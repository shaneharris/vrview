(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
// shim for using process in browser
var process = module.exports = {};

// cached from whatever global is present so that test runners that stub it
// don't break things.  But we need to wrap it in a try catch in case it is
// wrapped in strict mode code which doesn't define any globals.  It's inside a
// function because try/catches deoptimize in certain engines.

var cachedSetTimeout;
var cachedClearTimeout;

function defaultSetTimout() {
    throw new Error('setTimeout has not been defined');
}
function defaultClearTimeout () {
    throw new Error('clearTimeout has not been defined');
}
(function () {
    try {
        if (typeof setTimeout === 'function') {
            cachedSetTimeout = setTimeout;
        } else {
            cachedSetTimeout = defaultSetTimout;
        }
    } catch (e) {
        cachedSetTimeout = defaultSetTimout;
    }
    try {
        if (typeof clearTimeout === 'function') {
            cachedClearTimeout = clearTimeout;
        } else {
            cachedClearTimeout = defaultClearTimeout;
        }
    } catch (e) {
        cachedClearTimeout = defaultClearTimeout;
    }
} ())
function runTimeout(fun) {
    if (cachedSetTimeout === setTimeout) {
        //normal enviroments in sane situations
        return setTimeout(fun, 0);
    }
    // if setTimeout wasn't available but was latter defined
    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {
        cachedSetTimeout = setTimeout;
        return setTimeout(fun, 0);
    }
    try {
        // when when somebody has screwed with setTimeout but no I.E. maddness
        return cachedSetTimeout(fun, 0);
    } catch(e){
        try {
            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally
            return cachedSetTimeout.call(null, fun, 0);
        } catch(e){
            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error
            return cachedSetTimeout.call(this, fun, 0);
        }
    }


}
function runClearTimeout(marker) {
    if (cachedClearTimeout === clearTimeout) {
        //normal enviroments in sane situations
        return clearTimeout(marker);
    }
    // if clearTimeout wasn't available but was latter defined
    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {
        cachedClearTimeout = clearTimeout;
        return clearTimeout(marker);
    }
    try {
        // when when somebody has screwed with setTimeout but no I.E. maddness
        return cachedClearTimeout(marker);
    } catch (e){
        try {
            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally
            return cachedClearTimeout.call(null, marker);
        } catch (e){
            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.
            // Some versions of I.E. have different rules for clearTimeout vs setTimeout
            return cachedClearTimeout.call(this, marker);
        }
    }



}
var queue = [];
var draining = false;
var currentQueue;
var queueIndex = -1;

function cleanUpNextTick() {
    if (!draining || !currentQueue) {
        return;
    }
    draining = false;
    if (currentQueue.length) {
        queue = currentQueue.concat(queue);
    } else {
        queueIndex = -1;
    }
    if (queue.length) {
        drainQueue();
    }
}

function drainQueue() {
    if (draining) {
        return;
    }
    var timeout = runTimeout(cleanUpNextTick);
    draining = true;

    var len = queue.length;
    while(len) {
        currentQueue = queue;
        queue = [];
        while (++queueIndex < len) {
            if (currentQueue) {
                currentQueue[queueIndex].run();
            }
        }
        queueIndex = -1;
        len = queue.length;
    }
    currentQueue = null;
    draining = false;
    runClearTimeout(timeout);
}

process.nextTick = function (fun) {
    var args = new Array(arguments.length - 1);
    if (arguments.length > 1) {
        for (var i = 1; i < arguments.length; i++) {
            args[i - 1] = arguments[i];
        }
    }
    queue.push(new Item(fun, args));
    if (queue.length === 1 && !draining) {
        runTimeout(drainQueue);
    }
};

// v8 likes predictible objects
function Item(fun, array) {
    this.fun = fun;
    this.array = array;
}
Item.prototype.run = function () {
    this.fun.apply(null, this.array);
};
process.title = 'browser';
process.browser = true;
process.env = {};
process.argv = [];
process.version = ''; // empty string to avoid regexp issues
process.versions = {};

function noop() {}

process.on = noop;
process.addListener = noop;
process.once = noop;
process.off = noop;
process.removeListener = noop;
process.removeAllListeners = noop;
process.emit = noop;

process.binding = function (name) {
    throw new Error('process.binding is not supported');
};

process.cwd = function () { return '/' };
process.chdir = function (dir) {
    throw new Error('process.chdir is not supported');
};
process.umask = function() { return 0; };

},{}],2:[function(require,module,exports){
(function (process,global){
/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   3.3.1
 */

(function (global, factory) {
    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :
    typeof define === 'function' && define.amd ? define(factory) :
    (global.ES6Promise = factory());
}(this, (function () { 'use strict';

function objectOrFunction(x) {
  return typeof x === 'function' || typeof x === 'object' && x !== null;
}

function isFunction(x) {
  return typeof x === 'function';
}

var _isArray = undefined;
if (!Array.isArray) {
  _isArray = function (x) {
    return Object.prototype.toString.call(x) === '[object Array]';
  };
} else {
  _isArray = Array.isArray;
}

var isArray = _isArray;

var len = 0;
var vertxNext = undefined;
var customSchedulerFn = undefined;

var asap = function asap(callback, arg) {
  queue[len] = callback;
  queue[len + 1] = arg;
  len += 2;
  if (len === 2) {
    // If len is 2, that means that we need to schedule an async flush.
    // If additional callbacks are queued before the queue is flushed, they
    // will be processed by this flush that we are scheduling.
    if (customSchedulerFn) {
      customSchedulerFn(flush);
    } else {
      scheduleFlush();
    }
  }
};

function setScheduler(scheduleFn) {
  customSchedulerFn = scheduleFn;
}

function setAsap(asapFn) {
  asap = asapFn;
}

var browserWindow = typeof window !== 'undefined' ? window : undefined;
var browserGlobal = browserWindow || {};
var BrowserMutationObserver = browserGlobal.MutationObserver || browserGlobal.WebKitMutationObserver;
var isNode = typeof self === 'undefined' && typeof process !== 'undefined' && ({}).toString.call(process) === '[object process]';

// test for web worker but not in IE10
var isWorker = typeof Uint8ClampedArray !== 'undefined' && typeof importScripts !== 'undefined' && typeof MessageChannel !== 'undefined';

// node
function useNextTick() {
  // node version 0.10.x displays a deprecation warning when nextTick is used recursively
  // see https://github.com/cujojs/when/issues/410 for details
  return function () {
    return process.nextTick(flush);
  };
}

// vertx
function useVertxTimer() {
  return function () {
    vertxNext(flush);
  };
}

function useMutationObserver() {
  var iterations = 0;
  var observer = new BrowserMutationObserver(flush);
  var node = document.createTextNode('');
  observer.observe(node, { characterData: true });

  return function () {
    node.data = iterations = ++iterations % 2;
  };
}

// web worker
function useMessageChannel() {
  var channel = new MessageChannel();
  channel.port1.onmessage = flush;
  return function () {
    return channel.port2.postMessage(0);
  };
}

function useSetTimeout() {
  // Store setTimeout reference so es6-promise will be unaffected by
  // other code modifying setTimeout (like sinon.useFakeTimers())
  var globalSetTimeout = setTimeout;
  return function () {
    return globalSetTimeout(flush, 1);
  };
}

var queue = new Array(1000);
function flush() {
  for (var i = 0; i < len; i += 2) {
    var callback = queue[i];
    var arg = queue[i + 1];

    callback(arg);

    queue[i] = undefined;
    queue[i + 1] = undefined;
  }

  len = 0;
}

function attemptVertx() {
  try {
    var r = require;
    var vertx = r('vertx');
    vertxNext = vertx.runOnLoop || vertx.runOnContext;
    return useVertxTimer();
  } catch (e) {
    return useSetTimeout();
  }
}

var scheduleFlush = undefined;
// Decide what async method to use to triggering processing of queued callbacks:
if (isNode) {
  scheduleFlush = useNextTick();
} else if (BrowserMutationObserver) {
  scheduleFlush = useMutationObserver();
} else if (isWorker) {
  scheduleFlush = useMessageChannel();
} else if (browserWindow === undefined && typeof require === 'function') {
  scheduleFlush = attemptVertx();
} else {
  scheduleFlush = useSetTimeout();
}

function then(onFulfillment, onRejection) {
  var _arguments = arguments;

  var parent = this;

  var child = new this.constructor(noop);

  if (child[PROMISE_ID] === undefined) {
    makePromise(child);
  }

  var _state = parent._state;

  if (_state) {
    (function () {
      var callback = _arguments[_state - 1];
      asap(function () {
        return invokeCallback(_state, child, callback, parent._result);
      });
    })();
  } else {
    subscribe(parent, child, onFulfillment, onRejection);
  }

  return child;
}

/**
  `Promise.resolve` returns a promise that will become resolved with the
  passed `value`. It is shorthand for the following:

  ```javascript
  let promise = new Promise(function(resolve, reject){
    resolve(1);
  });

  promise.then(function(value){
    // value === 1
  });
  ```

  Instead of writing the above, your code now simply becomes the following:

  ```javascript
  let promise = Promise.resolve(1);

  promise.then(function(value){
    // value === 1
  });
  ```

  @method resolve
  @static
  @param {Any} value value that the returned promise will be resolved with
  Useful for tooling.
  @return {Promise} a promise that will become fulfilled with the given
  `value`
*/
function resolve(object) {
  /*jshint validthis:true */
  var Constructor = this;

  if (object && typeof object === 'object' && object.constructor === Constructor) {
    return object;
  }

  var promise = new Constructor(noop);
  _resolve(promise, object);
  return promise;
}

var PROMISE_ID = Math.random().toString(36).substring(16);

function noop() {}

var PENDING = void 0;
var FULFILLED = 1;
var REJECTED = 2;

var GET_THEN_ERROR = new ErrorObject();

function selfFulfillment() {
  return new TypeError("You cannot resolve a promise with itself");
}

function cannotReturnOwn() {
  return new TypeError('A promises callback cannot return that same promise.');
}

function getThen(promise) {
  try {
    return promise.then;
  } catch (error) {
    GET_THEN_ERROR.error = error;
    return GET_THEN_ERROR;
  }
}

function tryThen(then, value, fulfillmentHandler, rejectionHandler) {
  try {
    then.call(value, fulfillmentHandler, rejectionHandler);
  } catch (e) {
    return e;
  }
}

function handleForeignThenable(promise, thenable, then) {
  asap(function (promise) {
    var sealed = false;
    var error = tryThen(then, thenable, function (value) {
      if (sealed) {
        return;
      }
      sealed = true;
      if (thenable !== value) {
        _resolve(promise, value);
      } else {
        fulfill(promise, value);
      }
    }, function (reason) {
      if (sealed) {
        return;
      }
      sealed = true;

      _reject(promise, reason);
    }, 'Settle: ' + (promise._label || ' unknown promise'));

    if (!sealed && error) {
      sealed = true;
      _reject(promise, error);
    }
  }, promise);
}

function handleOwnThenable(promise, thenable) {
  if (thenable._state === FULFILLED) {
    fulfill(promise, thenable._result);
  } else if (thenable._state === REJECTED) {
    _reject(promise, thenable._result);
  } else {
    subscribe(thenable, undefined, function (value) {
      return _resolve(promise, value);
    }, function (reason) {
      return _reject(promise, reason);
    });
  }
}

function handleMaybeThenable(promise, maybeThenable, then$$) {
  if (maybeThenable.constructor === promise.constructor && then$$ === then && maybeThenable.constructor.resolve === resolve) {
    handleOwnThenable(promise, maybeThenable);
  } else {
    if (then$$ === GET_THEN_ERROR) {
      _reject(promise, GET_THEN_ERROR.error);
    } else if (then$$ === undefined) {
      fulfill(promise, maybeThenable);
    } else if (isFunction(then$$)) {
      handleForeignThenable(promise, maybeThenable, then$$);
    } else {
      fulfill(promise, maybeThenable);
    }
  }
}

function _resolve(promise, value) {
  if (promise === value) {
    _reject(promise, selfFulfillment());
  } else if (objectOrFunction(value)) {
    handleMaybeThenable(promise, value, getThen(value));
  } else {
    fulfill(promise, value);
  }
}

function publishRejection(promise) {
  if (promise._onerror) {
    promise._onerror(promise._result);
  }

  publish(promise);
}

function fulfill(promise, value) {
  if (promise._state !== PENDING) {
    return;
  }

  promise._result = value;
  promise._state = FULFILLED;

  if (promise._subscribers.length !== 0) {
    asap(publish, promise);
  }
}

function _reject(promise, reason) {
  if (promise._state !== PENDING) {
    return;
  }
  promise._state = REJECTED;
  promise._result = reason;

  asap(publishRejection, promise);
}

function subscribe(parent, child, onFulfillment, onRejection) {
  var _subscribers = parent._subscribers;
  var length = _subscribers.length;

  parent._onerror = null;

  _subscribers[length] = child;
  _subscribers[length + FULFILLED] = onFulfillment;
  _subscribers[length + REJECTED] = onRejection;

  if (length === 0 && parent._state) {
    asap(publish, parent);
  }
}

function publish(promise) {
  var subscribers = promise._subscribers;
  var settled = promise._state;

  if (subscribers.length === 0) {
    return;
  }

  var child = undefined,
      callback = undefined,
      detail = promise._result;

  for (var i = 0; i < subscribers.length; i += 3) {
    child = subscribers[i];
    callback = subscribers[i + settled];

    if (child) {
      invokeCallback(settled, child, callback, detail);
    } else {
      callback(detail);
    }
  }

  promise._subscribers.length = 0;
}

function ErrorObject() {
  this.error = null;
}

var TRY_CATCH_ERROR = new ErrorObject();

function tryCatch(callback, detail) {
  try {
    return callback(detail);
  } catch (e) {
    TRY_CATCH_ERROR.error = e;
    return TRY_CATCH_ERROR;
  }
}

function invokeCallback(settled, promise, callback, detail) {
  var hasCallback = isFunction(callback),
      value = undefined,
      error = undefined,
      succeeded = undefined,
      failed = undefined;

  if (hasCallback) {
    value = tryCatch(callback, detail);

    if (value === TRY_CATCH_ERROR) {
      failed = true;
      error = value.error;
      value = null;
    } else {
      succeeded = true;
    }

    if (promise === value) {
      _reject(promise, cannotReturnOwn());
      return;
    }
  } else {
    value = detail;
    succeeded = true;
  }

  if (promise._state !== PENDING) {
    // noop
  } else if (hasCallback && succeeded) {
      _resolve(promise, value);
    } else if (failed) {
      _reject(promise, error);
    } else if (settled === FULFILLED) {
      fulfill(promise, value);
    } else if (settled === REJECTED) {
      _reject(promise, value);
    }
}

function initializePromise(promise, resolver) {
  try {
    resolver(function resolvePromise(value) {
      _resolve(promise, value);
    }, function rejectPromise(reason) {
      _reject(promise, reason);
    });
  } catch (e) {
    _reject(promise, e);
  }
}

var id = 0;
function nextId() {
  return id++;
}

function makePromise(promise) {
  promise[PROMISE_ID] = id++;
  promise._state = undefined;
  promise._result = undefined;
  promise._subscribers = [];
}

function Enumerator(Constructor, input) {
  this._instanceConstructor = Constructor;
  this.promise = new Constructor(noop);

  if (!this.promise[PROMISE_ID]) {
    makePromise(this.promise);
  }

  if (isArray(input)) {
    this._input = input;
    this.length = input.length;
    this._remaining = input.length;

    this._result = new Array(this.length);

    if (this.length === 0) {
      fulfill(this.promise, this._result);
    } else {
      this.length = this.length || 0;
      this._enumerate();
      if (this._remaining === 0) {
        fulfill(this.promise, this._result);
      }
    }
  } else {
    _reject(this.promise, validationError());
  }
}

function validationError() {
  return new Error('Array Methods must be provided an Array');
};

Enumerator.prototype._enumerate = function () {
  var length = this.length;
  var _input = this._input;

  for (var i = 0; this._state === PENDING && i < length; i++) {
    this._eachEntry(_input[i], i);
  }
};

Enumerator.prototype._eachEntry = function (entry, i) {
  var c = this._instanceConstructor;
  var resolve$$ = c.resolve;

  if (resolve$$ === resolve) {
    var _then = getThen(entry);

    if (_then === then && entry._state !== PENDING) {
      this._settledAt(entry._state, i, entry._result);
    } else if (typeof _then !== 'function') {
      this._remaining--;
      this._result[i] = entry;
    } else if (c === Promise) {
      var promise = new c(noop);
      handleMaybeThenable(promise, entry, _then);
      this._willSettleAt(promise, i);
    } else {
      this._willSettleAt(new c(function (resolve$$) {
        return resolve$$(entry);
      }), i);
    }
  } else {
    this._willSettleAt(resolve$$(entry), i);
  }
};

Enumerator.prototype._settledAt = function (state, i, value) {
  var promise = this.promise;

  if (promise._state === PENDING) {
    this._remaining--;

    if (state === REJECTED) {
      _reject(promise, value);
    } else {
      this._result[i] = value;
    }
  }

  if (this._remaining === 0) {
    fulfill(promise, this._result);
  }
};

Enumerator.prototype._willSettleAt = function (promise, i) {
  var enumerator = this;

  subscribe(promise, undefined, function (value) {
    return enumerator._settledAt(FULFILLED, i, value);
  }, function (reason) {
    return enumerator._settledAt(REJECTED, i, reason);
  });
};

/**
  `Promise.all` accepts an array of promises, and returns a new promise which
  is fulfilled with an array of fulfillment values for the passed promises, or
  rejected with the reason of the first passed promise to be rejected. It casts all
  elements of the passed iterable to promises as it runs this algorithm.

  Example:

  ```javascript
  let promise1 = resolve(1);
  let promise2 = resolve(2);
  let promise3 = resolve(3);
  let promises = [ promise1, promise2, promise3 ];

  Promise.all(promises).then(function(array){
    // The array here would be [ 1, 2, 3 ];
  });
  ```

  If any of the `promises` given to `all` are rejected, the first promise
  that is rejected will be given as an argument to the returned promises's
  rejection handler. For example:

  Example:

  ```javascript
  let promise1 = resolve(1);
  let promise2 = reject(new Error("2"));
  let promise3 = reject(new Error("3"));
  let promises = [ promise1, promise2, promise3 ];

  Promise.all(promises).then(function(array){
    // Code here never runs because there are rejected promises!
  }, function(error) {
    // error.message === "2"
  });
  ```

  @method all
  @static
  @param {Array} entries array of promises
  @param {String} label optional string for labeling the promise.
  Useful for tooling.
  @return {Promise} promise that is fulfilled when all `promises` have been
  fulfilled, or rejected if any of them become rejected.
  @static
*/
function all(entries) {
  return new Enumerator(this, entries).promise;
}

/**
  `Promise.race` returns a new promise which is settled in the same way as the
  first passed promise to settle.

  Example:

  ```javascript
  let promise1 = new Promise(function(resolve, reject){
    setTimeout(function(){
      resolve('promise 1');
    }, 200);
  });

  let promise2 = new Promise(function(resolve, reject){
    setTimeout(function(){
      resolve('promise 2');
    }, 100);
  });

  Promise.race([promise1, promise2]).then(function(result){
    // result === 'promise 2' because it was resolved before promise1
    // was resolved.
  });
  ```

  `Promise.race` is deterministic in that only the state of the first
  settled promise matters. For example, even if other promises given to the
  `promises` array argument are resolved, but the first settled promise has
  become rejected before the other promises became fulfilled, the returned
  promise will become rejected:

  ```javascript
  let promise1 = new Promise(function(resolve, reject){
    setTimeout(function(){
      resolve('promise 1');
    }, 200);
  });

  let promise2 = new Promise(function(resolve, reject){
    setTimeout(function(){
      reject(new Error('promise 2'));
    }, 100);
  });

  Promise.race([promise1, promise2]).then(function(result){
    // Code here never runs
  }, function(reason){
    // reason.message === 'promise 2' because promise 2 became rejected before
    // promise 1 became fulfilled
  });
  ```

  An example real-world use case is implementing timeouts:

  ```javascript
  Promise.race([ajax('foo.json'), timeout(5000)])
  ```

  @method race
  @static
  @param {Array} promises array of promises to observe
  Useful for tooling.
  @return {Promise} a promise which settles in the same way as the first passed
  promise to settle.
*/
function race(entries) {
  /*jshint validthis:true */
  var Constructor = this;

  if (!isArray(entries)) {
    return new Constructor(function (_, reject) {
      return reject(new TypeError('You must pass an array to race.'));
    });
  } else {
    return new Constructor(function (resolve, reject) {
      var length = entries.length;
      for (var i = 0; i < length; i++) {
        Constructor.resolve(entries[i]).then(resolve, reject);
      }
    });
  }
}

/**
  `Promise.reject` returns a promise rejected with the passed `reason`.
  It is shorthand for the following:

  ```javascript
  let promise = new Promise(function(resolve, reject){
    reject(new Error('WHOOPS'));
  });

  promise.then(function(value){
    // Code here doesn't run because the promise is rejected!
  }, function(reason){
    // reason.message === 'WHOOPS'
  });
  ```

  Instead of writing the above, your code now simply becomes the following:

  ```javascript
  let promise = Promise.reject(new Error('WHOOPS'));

  promise.then(function(value){
    // Code here doesn't run because the promise is rejected!
  }, function(reason){
    // reason.message === 'WHOOPS'
  });
  ```

  @method reject
  @static
  @param {Any} reason value that the returned promise will be rejected with.
  Useful for tooling.
  @return {Promise} a promise rejected with the given `reason`.
*/
function reject(reason) {
  /*jshint validthis:true */
  var Constructor = this;
  var promise = new Constructor(noop);
  _reject(promise, reason);
  return promise;
}

function needsResolver() {
  throw new TypeError('You must pass a resolver function as the first argument to the promise constructor');
}

function needsNew() {
  throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");
}

/**
  Promise objects represent the eventual result of an asynchronous operation. The
  primary way of interacting with a promise is through its `then` method, which
  registers callbacks to receive either a promise's eventual value or the reason
  why the promise cannot be fulfilled.

  Terminology
  -----------

  - `promise` is an object or function with a `then` method whose behavior conforms to this specification.
  - `thenable` is an object or function that defines a `then` method.
  - `value` is any legal JavaScript value (including undefined, a thenable, or a promise).
  - `exception` is a value that is thrown using the throw statement.
  - `reason` is a value that indicates why a promise was rejected.
  - `settled` the final resting state of a promise, fulfilled or rejected.

  A promise can be in one of three states: pending, fulfilled, or rejected.

  Promises that are fulfilled have a fulfillment value and are in the fulfilled
  state.  Promises that are rejected have a rejection reason and are in the
  rejected state.  A fulfillment value is never a thenable.

  Promises can also be said to *resolve* a value.  If this value is also a
  promise, then the original promise's settled state will match the value's
  settled state.  So a promise that *resolves* a promise that rejects will
  itself reject, and a promise that *resolves* a promise that fulfills will
  itself fulfill.


  Basic Usage:
  ------------

  ```js
  let promise = new Promise(function(resolve, reject) {
    // on success
    resolve(value);

    // on failure
    reject(reason);
  });

  promise.then(function(value) {
    // on fulfillment
  }, function(reason) {
    // on rejection
  });
  ```

  Advanced Usage:
  ---------------

  Promises shine when abstracting away asynchronous interactions such as
  `XMLHttpRequest`s.

  ```js
  function getJSON(url) {
    return new Promise(function(resolve, reject){
      let xhr = new XMLHttpRequest();

      xhr.open('GET', url);
      xhr.onreadystatechange = handler;
      xhr.responseType = 'json';
      xhr.setRequestHeader('Accept', 'application/json');
      xhr.send();

      function handler() {
        if (this.readyState === this.DONE) {
          if (this.status === 200) {
            resolve(this.response);
          } else {
            reject(new Error('getJSON: `' + url + '` failed with status: [' + this.status + ']'));
          }
        }
      };
    });
  }

  getJSON('/posts.json').then(function(json) {
    // on fulfillment
  }, function(reason) {
    // on rejection
  });
  ```

  Unlike callbacks, promises are great composable primitives.

  ```js
  Promise.all([
    getJSON('/posts'),
    getJSON('/comments')
  ]).then(function(values){
    values[0] // => postsJSON
    values[1] // => commentsJSON

    return values;
  });
  ```

  @class Promise
  @param {function} resolver
  Useful for tooling.
  @constructor
*/
function Promise(resolver) {
  this[PROMISE_ID] = nextId();
  this._result = this._state = undefined;
  this._subscribers = [];

  if (noop !== resolver) {
    typeof resolver !== 'function' && needsResolver();
    this instanceof Promise ? initializePromise(this, resolver) : needsNew();
  }
}

Promise.all = all;
Promise.race = race;
Promise.resolve = resolve;
Promise.reject = reject;
Promise._setScheduler = setScheduler;
Promise._setAsap = setAsap;
Promise._asap = asap;

Promise.prototype = {
  constructor: Promise,

  /**
    The primary way of interacting with a promise is through its `then` method,
    which registers callbacks to receive either a promise's eventual value or the
    reason why the promise cannot be fulfilled.
  
    ```js
    findUser().then(function(user){
      // user is available
    }, function(reason){
      // user is unavailable, and you are given the reason why
    });
    ```
  
    Chaining
    --------
  
    The return value of `then` is itself a promise.  This second, 'downstream'
    promise is resolved with the return value of the first promise's fulfillment
    or rejection handler, or rejected if the handler throws an exception.
  
    ```js
    findUser().then(function (user) {
      return user.name;
    }, function (reason) {
      return 'default name';
    }).then(function (userName) {
      // If `findUser` fulfilled, `userName` will be the user's name, otherwise it
      // will be `'default name'`
    });
  
    findUser().then(function (user) {
      throw new Error('Found user, but still unhappy');
    }, function (reason) {
      throw new Error('`findUser` rejected and we're unhappy');
    }).then(function (value) {
      // never reached
    }, function (reason) {
      // if `findUser` fulfilled, `reason` will be 'Found user, but still unhappy'.
      // If `findUser` rejected, `reason` will be '`findUser` rejected and we're unhappy'.
    });
    ```
    If the downstream promise does not specify a rejection handler, rejection reasons will be propagated further downstream.
  
    ```js
    findUser().then(function (user) {
      throw new PedagogicalException('Upstream error');
    }).then(function (value) {
      // never reached
    }).then(function (value) {
      // never reached
    }, function (reason) {
      // The `PedgagocialException` is propagated all the way down to here
    });
    ```
  
    Assimilation
    ------------
  
    Sometimes the value you want to propagate to a downstream promise can only be
    retrieved asynchronously. This can be achieved by returning a promise in the
    fulfillment or rejection handler. The downstream promise will then be pending
    until the returned promise is settled. This is called *assimilation*.
  
    ```js
    findUser().then(function (user) {
      return findCommentsByAuthor(user);
    }).then(function (comments) {
      // The user's comments are now available
    });
    ```
  
    If the assimliated promise rejects, then the downstream promise will also reject.
  
    ```js
    findUser().then(function (user) {
      return findCommentsByAuthor(user);
    }).then(function (comments) {
      // If `findCommentsByAuthor` fulfills, we'll have the value here
    }, function (reason) {
      // If `findCommentsByAuthor` rejects, we'll have the reason here
    });
    ```
  
    Simple Example
    --------------
  
    Synchronous Example
  
    ```javascript
    let result;
  
    try {
      result = findResult();
      // success
    } catch(reason) {
      // failure
    }
    ```
  
    Errback Example
  
    ```js
    findResult(function(result, err){
      if (err) {
        // failure
      } else {
        // success
      }
    });
    ```
  
    Promise Example;
  
    ```javascript
    findResult().then(function(result){
      // success
    }, function(reason){
      // failure
    });
    ```
  
    Advanced Example
    --------------
  
    Synchronous Example
  
    ```javascript
    let author, books;
  
    try {
      author = findAuthor();
      books  = findBooksByAuthor(author);
      // success
    } catch(reason) {
      // failure
    }
    ```
  
    Errback Example
  
    ```js
  
    function foundBooks(books) {
  
    }
  
    function failure(reason) {
  
    }
  
    findAuthor(function(author, err){
      if (err) {
        failure(err);
        // failure
      } else {
        try {
          findBoooksByAuthor(author, function(books, err) {
            if (err) {
              failure(err);
            } else {
              try {
                foundBooks(books);
              } catch(reason) {
                failure(reason);
              }
            }
          });
        } catch(error) {
          failure(err);
        }
        // success
      }
    });
    ```
  
    Promise Example;
  
    ```javascript
    findAuthor().
      then(findBooksByAuthor).
      then(function(books){
        // found books
    }).catch(function(reason){
      // something went wrong
    });
    ```
  
    @method then
    @param {Function} onFulfilled
    @param {Function} onRejected
    Useful for tooling.
    @return {Promise}
  */
  then: then,

  /**
    `catch` is simply sugar for `then(undefined, onRejection)` which makes it the same
    as the catch block of a try/catch statement.
  
    ```js
    function findAuthor(){
      throw new Error('couldn't find that author');
    }
  
    // synchronous
    try {
      findAuthor();
    } catch(reason) {
      // something went wrong
    }
  
    // async with promises
    findAuthor().catch(function(reason){
      // something went wrong
    });
    ```
  
    @method catch
    @param {Function} onRejection
    Useful for tooling.
    @return {Promise}
  */
  'catch': function _catch(onRejection) {
    return this.then(null, onRejection);
  }
};

function polyfill() {
    var local = undefined;

    if (typeof global !== 'undefined') {
        local = global;
    } else if (typeof self !== 'undefined') {
        local = self;
    } else {
        try {
            local = Function('return this')();
        } catch (e) {
            throw new Error('polyfill failed because global object is unavailable in this environment');
        }
    }

    var P = local.Promise;

    if (P) {
        var promiseToString = null;
        try {
            promiseToString = Object.prototype.toString.call(P.resolve());
        } catch (e) {
            // silently ignored
        }

        if (promiseToString === '[object Promise]' && !P.cast) {
            return;
        }
    }

    local.Promise = Promise;
}

polyfill();
// Strange compat..
Promise.polyfill = polyfill;
Promise.Promise = Promise;

return Promise;

})));

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"_process":1}],3:[function(require,module,exports){
'use strict';

var has = Object.prototype.hasOwnProperty;

//
// We store our EE objects in a plain object whose properties are event names.
// If `Object.create(null)` is not supported we prefix the event names with a
// `~` to make sure that the built-in object properties are not overridden or
// used as an attack vector.
// We also assume that `Object.create(null)` is available when the event name
// is an ES6 Symbol.
//
var prefix = typeof Object.create !== 'function' ? '~' : false;

/**
 * Representation of a single EventEmitter function.
 *
 * @param {Function} fn Event handler to be called.
 * @param {Mixed} context Context for function execution.
 * @param {Boolean} [once=false] Only emit once
 * @api private
 */
function EE(fn, context, once) {
  this.fn = fn;
  this.context = context;
  this.once = once || false;
}

/**
 * Minimal EventEmitter interface that is molded against the Node.js
 * EventEmitter interface.
 *
 * @constructor
 * @api public
 */
function EventEmitter() { /* Nothing to set */ }

/**
 * Hold the assigned EventEmitters by name.
 *
 * @type {Object}
 * @private
 */
EventEmitter.prototype._events = undefined;

/**
 * Return an array listing the events for which the emitter has registered
 * listeners.
 *
 * @returns {Array}
 * @api public
 */
EventEmitter.prototype.eventNames = function eventNames() {
  var events = this._events
    , names = []
    , name;

  if (!events) return names;

  for (name in events) {
    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);
  }

  if (Object.getOwnPropertySymbols) {
    return names.concat(Object.getOwnPropertySymbols(events));
  }

  return names;
};

/**
 * Return a list of assigned event listeners.
 *
 * @param {String} event The events that should be listed.
 * @param {Boolean} exists We only need to know if there are listeners.
 * @returns {Array|Boolean}
 * @api public
 */
EventEmitter.prototype.listeners = function listeners(event, exists) {
  var evt = prefix ? prefix + event : event
    , available = this._events && this._events[evt];

  if (exists) return !!available;
  if (!available) return [];
  if (available.fn) return [available.fn];

  for (var i = 0, l = available.length, ee = new Array(l); i < l; i++) {
    ee[i] = available[i].fn;
  }

  return ee;
};

/**
 * Emit an event to all registered event listeners.
 *
 * @param {String} event The name of the event.
 * @returns {Boolean} Indication if we've emitted an event.
 * @api public
 */
EventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {
  var evt = prefix ? prefix + event : event;

  if (!this._events || !this._events[evt]) return false;

  var listeners = this._events[evt]
    , len = arguments.length
    , args
    , i;

  if ('function' === typeof listeners.fn) {
    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);

    switch (len) {
      case 1: return listeners.fn.call(listeners.context), true;
      case 2: return listeners.fn.call(listeners.context, a1), true;
      case 3: return listeners.fn.call(listeners.context, a1, a2), true;
      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;
      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;
      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;
    }

    for (i = 1, args = new Array(len -1); i < len; i++) {
      args[i - 1] = arguments[i];
    }

    listeners.fn.apply(listeners.context, args);
  } else {
    var length = listeners.length
      , j;

    for (i = 0; i < length; i++) {
      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);

      switch (len) {
        case 1: listeners[i].fn.call(listeners[i].context); break;
        case 2: listeners[i].fn.call(listeners[i].context, a1); break;
        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;
        default:
          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {
            args[j - 1] = arguments[j];
          }

          listeners[i].fn.apply(listeners[i].context, args);
      }
    }
  }

  return true;
};

/**
 * Register a new EventListener for the given event.
 *
 * @param {String} event Name of the event.
 * @param {Function} fn Callback function.
 * @param {Mixed} [context=this] The context of the function.
 * @api public
 */
EventEmitter.prototype.on = function on(event, fn, context) {
  var listener = new EE(fn, context || this)
    , evt = prefix ? prefix + event : event;

  if (!this._events) this._events = prefix ? {} : Object.create(null);
  if (!this._events[evt]) this._events[evt] = listener;
  else {
    if (!this._events[evt].fn) this._events[evt].push(listener);
    else this._events[evt] = [
      this._events[evt], listener
    ];
  }

  return this;
};

/**
 * Add an EventListener that's only called once.
 *
 * @param {String} event Name of the event.
 * @param {Function} fn Callback function.
 * @param {Mixed} [context=this] The context of the function.
 * @api public
 */
EventEmitter.prototype.once = function once(event, fn, context) {
  var listener = new EE(fn, context || this, true)
    , evt = prefix ? prefix + event : event;

  if (!this._events) this._events = prefix ? {} : Object.create(null);
  if (!this._events[evt]) this._events[evt] = listener;
  else {
    if (!this._events[evt].fn) this._events[evt].push(listener);
    else this._events[evt] = [
      this._events[evt], listener
    ];
  }

  return this;
};

/**
 * Remove event listeners.
 *
 * @param {String} event The event we want to remove.
 * @param {Function} fn The listener that we need to find.
 * @param {Mixed} context Only remove listeners matching this context.
 * @param {Boolean} once Only remove once listeners.
 * @api public
 */
EventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {
  var evt = prefix ? prefix + event : event;

  if (!this._events || !this._events[evt]) return this;

  var listeners = this._events[evt]
    , events = [];

  if (fn) {
    if (listeners.fn) {
      if (
           listeners.fn !== fn
        || (once && !listeners.once)
        || (context && listeners.context !== context)
      ) {
        events.push(listeners);
      }
    } else {
      for (var i = 0, length = listeners.length; i < length; i++) {
        if (
             listeners[i].fn !== fn
          || (once && !listeners[i].once)
          || (context && listeners[i].context !== context)
        ) {
          events.push(listeners[i]);
        }
      }
    }
  }

  //
  // Reset the array, or remove it completely if we have no more listeners.
  //
  if (events.length) {
    this._events[evt] = events.length === 1 ? events[0] : events;
  } else {
    delete this._events[evt];
  }

  return this;
};

/**
 * Remove all listeners or only the listeners for the specified event.
 *
 * @param {String} event The event want to remove all listeners for.
 * @api public
 */
EventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {
  if (!this._events) return this;

  if (event) delete this._events[prefix ? prefix + event : event];
  else this._events = prefix ? {} : Object.create(null);

  return this;
};

//
// Alias methods names because people roll like that.
//
EventEmitter.prototype.off = EventEmitter.prototype.removeListener;
EventEmitter.prototype.addListener = EventEmitter.prototype.on;

//
// This function doesn't apply anymore.
//
EventEmitter.prototype.setMaxListeners = function setMaxListeners() {
  return this;
};

//
// Expose the prefix.
//
EventEmitter.prefixed = prefix;

//
// Expose the module.
//
if ('undefined' !== typeof module) {
  module.exports = EventEmitter;
}

},{}],4:[function(require,module,exports){
(function(){var g={};
(function(window){var k,aa=this;aa.bd=!0;function l(a,b){var c=a.split("."),d=aa;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)c.length||void 0===b?d[e]?d=d[e]:d=d[e]={}:d[e]=b}function ba(a){var b=p;function c(){}c.prototype=b.prototype;a.jd=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.cd=function(a,c,f){return b.prototype[c].apply(a,Array.prototype.slice.call(arguments,2))}};/*

 Copyright 2016 Google Inc.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function ca(a){this.c=Math.exp(Math.log(.5)/a);this.a=this.b=0}function da(a,b,c){var d=Math.pow(a.c,b);a.b=c*(1-d)+d*a.b;a.a+=b}function ea(a){return a.b/(1-Math.pow(a.c,a.a))};function fa(){this.a=new ca(3);this.c=new ca(10);this.b=5E5}function ga(a){return.5>a.a.a?a.b:Math.min(ea(a.a),ea(a.c))};function ha(){}function ia(){};function ja(){this.h=null;this.f=!1;this.c=new fa;this.g={};this.a={};this.i=!1;this.b=null}l("shaka.abr.SimpleAbrManager",ja);k=ja.prototype;k.stop=function(){this.h=null;this.f=!1;this.g={};this.a={};this.b=null};k.init=function(a){this.h=a};
k.chooseStreams=function(a){for(var b in a)this.g[b]=a[b];b={};if("audio"in a){var c=ka(this);c?(b.audio=c,this.a.audio=c):delete this.a.audio}"video"in a&&((c=la(this))?(b.video=c,this.a.video=c):delete this.a.video);"text"in a&&(b.text=a.text.streams[0]);this.b=Date.now();return b};k.enable=function(){this.f=!0};k.disable=function(){this.f=!1};
k.segmentDownloaded=function(a,b,c){var d=this.c;a=b-a;65536>c||(a=Math.max(a,50),c=8E3*c/a,a/=1E3,da(d.a,a,c),da(d.c,a,c));if(null!=this.b&&this.f)a:{d=Date.now()-this.b;if(!this.i){if(4E3>d)break a;this.i=!0}else if(8E3>d)break a;d=this.a.video;c={};if(a=ka(this))c.audio=a,this.a.audio=a;if(a=la(this))c.video=a,this.a.video=a;this.b=Date.now();a=void 0;d&&c.video&&c.video.bandwidth>d.bandwidth&&(a=10);this.h(c,a)}};k.getBandwidthEstimate=function(){return ga(this.c)};
k.setDefaultEstimate=function(a){this.c.b=a};function ka(a){a=a.g.audio;if(!a)return null;a=ma(a);return a[Math.floor(a.length/2)]}function la(a){var b=a.g.video;if(!b)return null;var b=ma(b),c=a.a.audio,c=c&&c.bandwidth||0;a=ga(a.c);for(var d=b[0],e=0;e<b.length;++e){var f=b[e],g=e+1<b.length?b[e+1]:{bandwidth:Infinity};f.bandwidth&&(g=(g.bandwidth+c)/.85,a>=(f.bandwidth+c)/.95&&a<=g&&(d=f))}return d}
function ma(a){return a.streams.slice(0).filter(function(a){return a.allowedByApplication&&a.allowedByKeySystem}).sort(function(a,c){return a.bandwidth-c.bandwidth})};var na=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/;function oa(a){var b;a instanceof oa?(pa(this,a.R),this.la=a.la,this.T=a.T,qa(this,a.wa),this.O=a.O,ra(this,sa(a.a)),this.ea=a.ea):a&&(b=String(a).match(na))?(pa(this,b[1]||"",!0),this.la=ta(b[2]||""),this.T=ta(b[3]||"",!0),qa(this,b[4]),this.O=ta(b[5]||"",!0),ra(this,b[6]||"",!0),this.ea=ta(b[7]||"")):this.a=new ua(null)}k=oa.prototype;k.R="";k.la="";k.T="";k.wa=null;k.O="";k.ea="";
k.toString=function(){var a=[],b=this.R;b&&a.push(va(b,wa,!0),":");if(b=this.T){a.push("//");var c=this.la;c&&a.push(va(c,wa,!0),"@");a.push(encodeURIComponent(b).replace(/%25([0-9a-fA-F]{2})/g,"%$1"));b=this.wa;null!=b&&a.push(":",String(b))}if(b=this.O)this.T&&"/"!=b.charAt(0)&&a.push("/"),a.push(va(b,"/"==b.charAt(0)?xa:ya,!0));(b=this.a.toString())&&a.push("?",b);(b=this.ea)&&a.push("#",va(b,za));return a.join("")};
k.resolve=function(a){var b=new oa(this);"data"===b.R&&(b=new oa);var c=!!a.R;c?pa(b,a.R):c=!!a.la;c?b.la=a.la:c=!!a.T;c?b.T=a.T:c=null!=a.wa;var d=a.O;if(c)qa(b,a.wa);else if(c=!!a.O){if("/"!=d.charAt(0))if(this.T&&!this.O)d="/"+d;else{var e=b.O.lastIndexOf("/");-1!=e&&(d=b.O.substr(0,e+1)+d)}if(".."==d||"."==d)d="";else if(-1!=d.indexOf("./")||-1!=d.indexOf("/.")){for(var e=!d.lastIndexOf("/",0),d=d.split("/"),f=[],g=0;g<d.length;){var h=d[g++];"."==h?e&&g==d.length&&f.push(""):".."==h?((1<f.length||
1==f.length&&""!=f[0])&&f.pop(),e&&g==d.length&&f.push("")):(f.push(h),e=!0)}d=f.join("/")}}c?b.O=d:c=""!==a.a.toString();c?ra(b,sa(a.a)):c=!!a.ea;c&&(b.ea=a.ea);return b};function pa(a,b,c){a.R=c?ta(b,!0):b;a.R&&(a.R=a.R.replace(/:$/,""))}function qa(a,b){if(b){b=Number(b);if(isNaN(b)||0>b)throw Error("Bad port number "+b);a.wa=b}else a.wa=null}function ra(a,b,c){b instanceof ua?a.a=b:(c||(b=va(b,Aa)),a.a=new ua(b))}function ta(a,b){return a?b?decodeURI(a):decodeURIComponent(a):""}
function va(a,b,c){return"string"==typeof a?(a=encodeURI(a).replace(b,Ba),c&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function Ba(a){a=a.charCodeAt(0);return"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var wa=/[#\/\?@]/g,ya=/[\#\?:]/g,xa=/[\#\?]/g,Aa=/[\#\?@]/g,za=/#/g;function ua(a){this.b=a||null}ua.prototype.a=null;ua.prototype.c=null;
ua.prototype.toString=function(){if(this.b)return this.b;if(!this.a)return"";var a=[],b;for(b in this.a)for(var c=encodeURIComponent(b),d=this.a[b],e=0;e<d.length;e++){var f=c;""!==d[e]&&(f+="="+encodeURIComponent(d[e]));a.push(f)}return this.b=a.join("&")};function sa(a){var b=new ua;b.b=a.b;if(a.a){var c={},d;for(d in a.a)c[d]=a.a[d].concat();b.a=c;b.c=a.c}return b};function q(a,b,c){this.category=a;this.code=b;this.data=Array.prototype.slice.call(arguments,2)}l("shaka.util.Error",q);q.prototype.toString=function(){return"shaka.util.Error "+JSON.stringify(this,null,"  ")};q.Category={NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,CAST:8,STORAGE:9};
q.Code={UNSUPPORTED_SCHEME:1E3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,UNKNOWN_DATA_URI_ENCODING:1005,INVALID_TEXT_HEADER:2E3,INVALID_TEXT_CUE:2001,INVALID_TEXT_SETTINGS:2002,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_TTML:2006,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,BUFFER_READ_OUT_OF_BOUNDS:3E3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,EBML_BAD_FLOATING_POINT_SIZE:3003,MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,
MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,UNABLE_TO_GUESS_MANIFEST_TYPE:4E3,DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,
DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,UNPLAYABLE_PERIOD:4011,RESTRICTIONS_CANNOT_BE_MET:4012,INTERNAL_ERROR_KEY_STATUS:4013,INVALID_STREAMS_CHOSEN:5005,NO_RECOGNIZED_KEY_SYSTEMS:6E3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,
FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,LOAD_INTERRUPTED:7E3,CAST_API_UNAVAILABLE:8E3,NO_CAST_RECEIVERS:8001,ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,INDEXED_DB_NOT_SUPPORTED:9E3,INDEXED_DB_ERROR:9001,OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,
MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,STORE_ALREADY_IN_PROGRESS:9006,NO_INIT_DATA_FOR_OFFLINE:9007};function Ca(a,b){return a.reduce(function(a,b,e){return b["catch"](a.bind(null,e))}.bind(null,b),Promise.reject())}function t(a,b){return a.concat(b)}function v(){}function Da(a){return null!=a}function Ea(a){return function(b){return b!=a}};function w(){var a,b,c=new Promise(function(c,e){a=c;b=e});c.resolve=a;c.reject=b;return c};function y(a){this.f=!1;this.a=[];this.b=[];this.c=[];this.h=a||null}l("shaka.net.NetworkingEngine.RequestType",{MANIFEST:0,SEGMENT:1,LICENSE:2});var Fa={};l("shaka.net.NetworkingEngine.registerScheme",function(a,b){Fa[a]=b});l("shaka.net.NetworkingEngine.unregisterScheme",function(a){delete Fa[a]});y.prototype.vc=function(a){this.b.push(a)};y.prototype.registerRequestFilter=y.prototype.vc;y.prototype.Xc=function(a){var b=this.b;a=b.indexOf(a);0<=a&&b.splice(a,1)};
y.prototype.unregisterRequestFilter=y.prototype.Xc;y.prototype.Ob=function(){this.b=[]};y.prototype.clearAllRequestFilters=y.prototype.Ob;y.prototype.yb=function(a){this.c.push(a)};y.prototype.registerResponseFilter=y.prototype.yb;y.prototype.Jb=function(a){var b=this.c;a=b.indexOf(a);0<=a&&b.splice(a,1)};y.prototype.unregisterResponseFilter=y.prototype.Jb;y.prototype.Pb=function(){this.c=[]};y.prototype.clearAllResponseFilters=y.prototype.Pb;
function Ga(){return{maxAttempts:2,baseDelay:1E3,backoffFactor:2,fuzzFactor:.5,timeout:0}}function Ha(a,b){return{uris:a,method:"GET",body:null,headers:{},allowCrossSiteCredentials:!1,retryParameters:b}}y.prototype.o=function(){this.f=!0;this.b=[];this.c=[];for(var a=[],b=0;b<this.a.length;++b)a.push(this.a[b]["catch"](v));return Promise.all(a)};
y.prototype.request=function(a,b){if(this.f)return Promise.reject();for(var c=Date.now(),d=this.b,e=0;e<d.length;e++)try{d[e](a,b)}catch(m){return Promise.reject(m)}for(var e=b.retryParameters||{},d=e.maxAttempts||1,f=e.backoffFactor||2,g=null==e.baseDelay?1E3:e.baseDelay,h=this.g(a,b,0),e=1;e<d;e++)h=h["catch"](this.i.bind(this,a,b,g,e%b.uris.length)),g*=f;this.a.push(h);return h.then(function(b){this.a.splice(this.a.indexOf(h),1);var d=Date.now();this.h&&1==a&&this.h(c,d,b.data.byteLength);return b}.bind(this))["catch"](function(a){this.a.splice(this.a.indexOf(h),
1);return Promise.reject(a)}.bind(this))};y.prototype.request=y.prototype.request;y.prototype.g=function(a,b,c){if(this.f)return Promise.reject();var d=new oa(b.uris[c]),e=d.R;e||(e=location.protocol,e=e.slice(0,-1),pa(d,e),b.uris[c]=d.toString());return(e=Fa[e])?e(b.uris[c],b).then(function(b){for(var c=this.c,d=0;d<c.length;d++)c[d](a,b);return b}.bind(this)):Promise.reject(new q(1,1E3,d))};
y.prototype.i=function(a,b,c,d){var e=new w,f=b.retryParameters||{};window.setTimeout(e.resolve,c*(1+(2*Math.random()-1)*(null==f.fuzzFactor?.5:f.fuzzFactor)));return e.then(this.g.bind(this,a,b,d))};function Ia(a,b,c){for(var d=0;d<a.length;++d)if(c(a[d],b))return d;return-1};function Ja(){this.a={}}k=Ja.prototype;k.push=function(a,b){this.a.hasOwnProperty(a)?this.a[a].push(b):this.a[a]=[b]};k.set=function(a,b){this.a[a]=b};k.has=function(a){return this.a.hasOwnProperty(a)};k.get=function(a){return(a=this.a[a])?a.slice():null};k.remove=function(a,b){var c=this.a[a];if(c)for(var d=0;d<c.length;++d)c[d]==b&&(c.splice(d,1),--d)};k.keys=function(){var a=[],b;for(b in this.a)a.push(b);return a};k.clear=function(){this.a={}};function z(){this.a=new Ja}z.prototype.o=function(){Ka(this);this.a=null;return Promise.resolve()};function B(a,b,c,d){b=new La(b,c,d);a.a.push(c,b)}z.prototype.ka=function(a,b){for(var c=this.a.get(b)||[],d=0;d<c.length;++d){var e=c[d];e.target==a&&(e.ka(),this.a.remove(b,e))}};function Ka(a){var b=a.a,c=[],d;for(d in b.a)c.push.apply(c,b.a[d]);for(b=0;b<c.length;++b)c[b].ka();a.a.clear()}function La(a,b,c){this.target=a;this.type=b;this.a=c;this.target.addEventListener(b,c,!1)}
La.prototype.ka=function(){this.target&&(this.target.removeEventListener(this.type,this.a,!1),this.a=this.target=null)};function Ma(a){return!a||!Object.keys(a).length}function C(a){return Object.keys(a).map(function(b){return a[b]})}function Na(a,b){return Object.keys(a).reduce(function(c,d){c[d]=b(a[d],d);return c},{})}function Oa(a,b){return Object.keys(a).every(function(c){return b(c,a[c])})};function D(a){if(!a)return"";a=new Uint8Array(a);239==a[0]&&187==a[1]&&191==a[2]&&(a=a.subarray(3));a=escape(Pa(a));try{return decodeURIComponent(a)}catch(b){throw new q(2,2004);}}function Qa(a,b){if(!a)return"";if(a.byteLength%2)throw new q(2,2004);var c;if(a instanceof ArrayBuffer)c=a;else{var d=new Uint8Array(a.byteLength);d.set(new Uint8Array(a));c=d.buffer}var d=a.byteLength/2,e=new Uint16Array(d);c=new DataView(c);for(var f=0;f<d;f++)e[f]=c.getUint16(2*f,b);return Pa(e)}
function Ra(a){var b=new Uint8Array(a);if(239==b[0]&&187==b[1]&&191==b[2])return D(b);if(254==b[0]&&255==b[1])return Qa(b.subarray(2),!1);if(255==b[0]&&254==b[1])return Qa(b.subarray(2),!0);var c=function(a,b){return a.byteLength<=b||32<=a[b]&&126>=a[b]}.bind(null,b);if(b[0]||b[2]){if(!b[1]&&!b[3])return Qa(a,!0);if(c(0)&&c(1)&&c(2)&&c(3))return D(a)}else return Qa(a,!1);throw new q(2,2003);}
function Sa(a){a=unescape(encodeURIComponent(a));for(var b=new Uint8Array(a.length),c=0;c<a.length;++c)b[c]=a.charCodeAt(c);return b.buffer}function Pa(a){for(var b="",c=0;c<a.length;c+=16E3)b+=String.fromCharCode.apply(null,a.subarray(c,c+16E3));return b};function Ta(a){this.a=null;this.b=function(){this.a=null;a()}.bind(this)}function Ua(a){null!=a.a&&(clearTimeout(a.a),a.a=null)}function Va(a){Ua(a);a.a=setTimeout(a.b,100)};function Wa(a){return window.btoa(String.fromCharCode.apply(null,a)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=*$/,"")}function Xa(a){a=window.atob(a.replace(/-/g,"+").replace(/_/g,"/"));for(var b=new Uint8Array(a.length),c=0;c<a.length;++c)b[c]=a.charCodeAt(c);return b}function Ya(a){for(var b=new Uint8Array(a.length/2),c=0;c<a.length;c+=2)b[c/2]=window.parseInt(a.substr(c,2),16);return b}
function Za(a){for(var b="",c=0;c<a.length;++c){var d=a[c].toString(16);1==d.length&&(d="0"+d);b+=d}return b}function $a(a,b){if(!a&&!b)return!0;if(!a||!b||a.length!=b.length)return!1;for(var c=0;c<a.length;++c)if(a[c]!=b[c])return!1;return!0};function ab(a,b,c){this.l=this.h=this.m=null;this.A=!1;this.b=null;this.g=new z;this.a=[];this.s=[];this.j=new w;this.G=a;this.i=null;this.f=function(a){this.j.reject(a);b(a)}.bind(this);this.w={};this.J=c;this.v=new Ta(this.uc.bind(this));this.C=this.c=!1;this.j["catch"](function(){})}k=ab.prototype;
k.o=function(){this.c=!0;var a=this.a.map(function(a){a.ya.close()["catch"](v);return a.ya.closed});this.j.reject();this.g&&a.push(this.g.o());this.l&&a.push(this.l.setMediaKeys(null)["catch"](v));this.v&&Ua(this.v);this.g=this.l=this.h=this.m=this.b=this.v=null;this.a=[];this.s=[];this.f=this.i=this.G=null;return Promise.all(a)};k.configure=function(a){this.i=a};
k.init=function(a,b){var c={},d=[];this.C=b;this.s=a.offlineSessionIds;bb(this,a,b||0<a.offlineSessionIds.length,c,d);return d.length?cb(this,c,d):(this.A=!0,Promise.resolve())};
function db(a,b){if(!a.h)return B(a.g,b,"encrypted",function(){this.g.ka(b,"encrypted");this.f(new q(6,6010))}.bind(a)),Promise.resolve();a.l=b;var c=a.l.setMediaKeys(a.h),c=c["catch"](function(a){return Promise.reject(new q(6,6003,a.message))}),d=null;a.b.serverCertificate&&(d=a.h.setServerCertificate(a.b.serverCertificate),d=d["catch"](function(a){return Promise.reject(new q(6,6004,a.message))}));return Promise.all([c,d]).then(function(){if(this.c)return Promise.reject();eb(this);this.b.initData.length||
this.s.length||B(this.g,this.l,"encrypted",this.bc.bind(this))}.bind(a))["catch"](function(a){return this.c?Promise.resolve():Promise.reject(a)}.bind(a))}function fb(a,b){return Promise.all(b.map(function(a){return gb(this,a).then(function(a){if(a)return a.remove()})}.bind(a)))}function eb(a){var b=a.b?a.b.initData:[];b.forEach(function(a){hb(this,a.initDataType,a.initData)}.bind(a));a.s.forEach(function(a){gb(this,a)}.bind(a));b.length||a.s.length||a.j.resolve();return a.j}
k.keySystem=function(){return this.b?this.b.keySystem:""};function ib(a){return a.a.map(function(a){return a.ya.sessionId})}
function bb(a,b,c,d,e){var f=kb(a),g=0<=navigator.userAgent.indexOf("Edge/");b.periods.forEach(function(a){a.streamSets.forEach(function(a){"text"!=a.type&&(f&&(a.drmInfos=[f]),a.drmInfos.forEach(function(b){lb(this,b);var f=d[b.keySystem];f||(f={audioCapabilities:[],videoCapabilities:[],distinctiveIdentifier:"optional",persistentState:c?"required":"optional",sessionTypes:[c?"persistent-license":"temporary"],label:b.keySystem,drmInfos:[]},d[b.keySystem]=f,e.push(b.keySystem));f.drmInfos.push(b);b.distinctiveIdentifierRequired&&
(f.distinctiveIdentifier="required");b.persistentStateRequired&&(f.persistentState="required");var h="video"==a.type?f.videoCapabilities:f.audioCapabilities,A=("video"==a.type?b.videoRobustness:b.audioRobustness)||"";a.streams.forEach(function(a){var c=a.mimeType;a.codecs&&(c+='; codecs="'+a.codecs+'"');g&&"com.microsoft.playready"==b.keySystem&&h.length||h.push({robustness:A,contentType:c})}.bind(this))}.bind(this)))}.bind(this))}.bind(a))}
function cb(a,b,c){if(1==c.length&&""==c[0])return Promise.reject(new q(6,6E3));var d=new w,e=d;[!0,!1].forEach(function(a){c.forEach(function(c){var d=b[c];d.drmInfos.some(function(a){return!!a.licenseServerUri})==a&&(d.audioCapabilities.length||delete d.audioCapabilities,d.videoCapabilities.length||delete d.videoCapabilities,e=e["catch"](function(){return this.c?Promise.reject():navigator.requestMediaKeySystemAccess(c,[d])}.bind(this)))}.bind(this))}.bind(a));e=e["catch"](function(){return Promise.reject(new q(6,
6001))});e=e.then(function(a){if(this.c)return Promise.reject();var c=a.getConfiguration();this.m=(c.audioCapabilities||[]).concat(c.videoCapabilities||[]).map(function(a){return a.contentType});this.m.length||(this.m=null);c=b[a.keySystem];mb(this,a.keySystem,c,c.drmInfos);return this.b.licenseServerUri?a.createMediaKeys():Promise.reject(new q(6,6012))}.bind(a)).then(function(a){if(this.c)return Promise.reject();this.h=a;this.A=!0}.bind(a))["catch"](function(a){if(this.c)return Promise.resolve();
this.m=this.b=null;return a instanceof q?Promise.reject(a):Promise.reject(new q(6,6002,a.message))}.bind(a));d.reject();return e}
function lb(a,b){var c=b.keySystem;if(c){if(!b.licenseServerUri){var d=a.i.servers[c];d&&(b.licenseServerUri=d)}if(c=a.i.advanced[c])b.distinctiveIdentifierRequired||(b.distinctiveIdentifierRequired=c.distinctiveIdentifierRequired),b.persistentStateRequired||(b.persistentStateRequired=c.persistentStateRequired),b.videoRobustness||(b.videoRobustness=c.videoRobustness),b.audioRobustness||(b.audioRobustness=c.audioRobustness),b.serverCertificate||(b.serverCertificate=c.serverCertificate)}}
function kb(a){if(Ma(a.i.clearKeys))return null;var b=[],c=[],d;for(d in a.i.clearKeys){var e=a.i.clearKeys[d],f=Ya(d),e=Ya(e),f={kty:"oct",kid:Wa(f),k:Wa(e)};b.push(f);c.push(f.kid)}a=JSON.stringify({keys:b});c=JSON.stringify({kids:c});c=[{initData:new Uint8Array(Sa(c)),initDataType:"keyids"}];return{keySystem:"org.w3.clearkey",licenseServerUri:"data:application/json;base64,"+window.btoa(a),distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,
initData:c}}function mb(a,b,c,d){var e=[],f=[],g=[];nb(d,e,f,g);a.b={keySystem:b,licenseServerUri:e[0],distinctiveIdentifierRequired:"required"==c.distinctiveIdentifier,persistentStateRequired:"required"==c.persistentState,audioRobustness:c.audioCapabilities?c.audioCapabilities[0].robustness:"",videoRobustness:c.videoCapabilities?c.videoCapabilities[0].robustness:"",serverCertificate:f[0],initData:g}}
function nb(a,b,c,d){function e(a,b){return a.initDataType==b.initDataType&&$a(a.initData,b.initData)}a.forEach(function(a){-1==b.indexOf(a.licenseServerUri)&&b.push(a.licenseServerUri);a.serverCertificate&&-1==Ia(c,a.serverCertificate,$a)&&c.push(a.serverCertificate);a.initData&&a.initData.forEach(function(a){-1==Ia(d,a,e)&&d.push(a)})})}k.bc=function(a){for(var b=new Uint8Array(a.initData),c=0;c<this.a.length;++c)if($a(b,this.a[c].initData))return;hb(this,a.initDataType,b)};
function gb(a,b){var c;try{c=a.h.createSession("persistent-license")}catch(f){var d=new q(6,6005,f.message);a.f(d);return Promise.reject(d)}B(a.g,c,"message",a.vb.bind(a));B(a.g,c,"keystatuseschange",a.qb.bind(a));var e={initData:null,ya:c,loaded:!1};a.a.push(e);return c.load(b).then(function(a){if(!this.c){if(a)return e.loaded=!0,this.a.every(function(a){return a.loaded})&&this.j.resolve(),c;this.a.splice(this.a.indexOf(e),1);this.f(new q(6,6013))}}.bind(a),function(a){this.c||(this.a.splice(this.a.indexOf(e),
1),this.f(new q(6,6005,a.message)))}.bind(a))}function hb(a,b,c){var d;try{d=a.C?a.h.createSession("persistent-license"):a.h.createSession()}catch(e){a.f(new q(6,6005,e.message));return}B(a.g,d,"message",a.vb.bind(a));B(a.g,d,"keystatuseschange",a.qb.bind(a));a.a.push({initData:c,ya:d,loaded:!1});d.generateRequest(b,c.buffer)["catch"](function(a){if(!this.c){for(var b=0;b<this.a.length;++b)if(this.a[b].ya==d){this.a.splice(b,1);break}this.f(new q(6,6006,a.message))}}.bind(a))}
k.vb=function(a){var b=a.target,c=Ha([this.b.licenseServerUri],this.i.retryParameters);c.body=a.message;c.method="POST";"com.microsoft.playready"==this.b.keySystem&&pb(c);this.G.request(2,c).then(function(a){return this.c?Promise.reject():b.update(a.data)}.bind(this),function(a){if(this.c)return Promise.resolve();this.f(new q(6,6007,a))}.bind(this))["catch"](function(a){if(this.c)return Promise.resolve();this.f(new q(6,6008,a.message))}.bind(this))};
function pb(a){for(var b=Qa(a.body,!0),b=(new DOMParser).parseFromString(b,"application/xml"),c=b.getElementsByTagName("HttpHeader"),d=0;d<c.length;++d)a.headers[c[d].querySelector("name").textContent]=c[d].querySelector("value").textContent;a.body=Xa(b.querySelector("Challenge").textContent).buffer}
k.qb=function(a){a=a.target;var b;for(b=0;b<this.a.length&&this.a[b].ya!=a;++b);if(b!=this.a.length){var c=a.keyStatuses,d=!1;c.forEach||(c=[]);c.forEach(function(a,c){if("string"==typeof c){var g=c;c=a;a=g}if("com.microsoft.playready"==this.b.keySystem&&16==c.byteLength){var g=new DataView(c),h=g.getUint32(0,!0),m=g.getUint16(4,!0),n=g.getUint16(6,!0);g.setUint32(0,h,!1);g.setUint16(4,m,!1);g.setUint16(6,n,!1)}"com.microsoft.playready"==this.b.keySystem&&"status-pending"==a&&(a="usable");"status-pending"!=
a&&"internal-error"!=a&&(this.a[b].loaded=!0,this.a.every(function(a){return a.loaded})&&this.j.resolve());"expired"==a&&(d=!0);g=Za(new Uint8Array(c));"internal-error"==a&&this.f(new q(6,4013,g));this.w[g]=a}.bind(this));c=a.expiration-Date.now();if(0>c||d&&1E3>c)this.a.splice(b,1),a.close();Va(this.v)}};k.uc=function(){Oa(this.w,function(a,b){return"expired"==b})&&this.f(new q(6,6014));this.J(this.w)};
function qb(){var a=[],b=[{contentType:'video/mp4; codecs="avc1.42E01E"'}],c=[{videoCapabilities:b,persistentState:"required",sessionTypes:["persistent-license"]},{videoCapabilities:b}],d={};"org.w3.clearkey com.widevine.alpha com.microsoft.playready com.apple.fps.2_0 com.apple.fps.1_0 com.apple.fps com.adobe.primetime".split(" ").forEach(function(b){var f=navigator.requestMediaKeySystemAccess(b,c).then(function(a){return a.createMediaKeys()}).then(function(a){var c=!1;try{a.createSession("persistent-license"),
c=!0}catch(f){}d[b]={persistentState:c}},function(){d[b]=null});a.push(f)});return Promise.all(a).then(function(){return d})};var rb={},sb={};l("shaka.media.ManifestParser.registerParserByExtension",function(a,b){sb[a]=b});l("shaka.media.ManifestParser.registerParserByMime",function(a,b){rb[a]=b});function tb(){var a={},b;for(b in rb)a[b]=!0;for(b in sb)a[b]=!0;["application/dash+xml","application/x-mpegurl","application/vnd.apple.mpegurl","application/vnd.ms-sstr+xml"].forEach(function(b){a[b]=!!rb[b]});["mpd","m3u8","ism"].forEach(function(b){a[b]=!!sb[b]});return a}
function ub(a,b,c,d){var e=d;e||(d=(new oa(a)).O.split("/").pop().split("."),1<d.length&&(d=d.pop().toLowerCase(),e=sb[d]));if(e)return Promise.resolve(e);c=Ha([a],c);c.method="HEAD";return b.request(0,c).then(function(b){(b=b.headers["content-type"])&&(b=b.toLowerCase());return(e=rb[b])?e:Promise.reject(new q(4,4E3,a))},function(){return Promise.reject(new q(4,4E3,a))})};function vb(a,b){this.g=E[b];this.c=a;this.h=0;this.f=Infinity;this.a=this.b=null}var E={};l("shaka.media.TextEngine.registerParser",function(a,b){E[a]=b});l("shaka.media.TextEngine.unregisterParser",function(a){delete E[a]});function wb(a,b,c){return a>=b?null:new xb(a,b,c)}l("shaka.media.TextEngine.makeCue",wb);var xb=window.VTTCue||window.TextTrackCue;vb.prototype.o=function(){this.c&&yb(this,function(){return!0});this.c=this.g=null;return Promise.resolve()};
function zb(a,b,c,d){var e=a.h;return Promise.resolve().then(function(){var a=this.g(b,e,c,d);if(null!=c&&null!=d){for(var g=0;g<a.length&&!(a[g].startTime>=this.f);++g)this.c.addCue(a[g]);null==this.b&&(this.b=c);this.a=Math.min(d,this.f)}}.bind(a))}
vb.prototype.remove=function(a,b){return Promise.resolve().then(function(){yb(this,function(c){return c.startTime>=b||c.endTime<=a?!1:!0});null==this.b||b<=this.b||a>=this.a||(a<=this.b&&b>=this.a?this.b=this.a=null:a<=this.b&&b<this.a?this.b=b:a>this.b&&b>=this.a&&(this.a=a))}.bind(this))};function Ab(a,b){return null==a.a||a.a<b||b<a.b?0:a.a-b}function yb(a,b){for(var c=a.c.cues,d=[],e=0;e<c.length;++e)b(c[e])&&d.push(c[e]);for(e=0;e<d.length;++e)a.c.removeCue(d[e])};function Bb(a,b){var c=0;if(!a||1==a.length&&1E-6>a.end(0)-a.start(0))return c;for(var d=!1,e=0;e<a.length;++e)if(b+1E-4>=a.start(e)&&b<a.end(e))c+=a.end(e)-b,d=!0;else if(d&&.04>=a.start(e)-a.end(e-1))c+=a.end(e)-a.start(e),c+=a.start(e)-a.end(e-1);else if(0<e&&b+1E-4<a.start(e)&&b+1E-4>=a.end(e-1))if(.04>=a.start(e)-b)c+=a.end(e)-b,d=!0;else break;else d=!1;return c};function Cb(a,b,c){this.i=a;this.f=b;this.j=c;this.c={};this.b=null;this.a={};this.g=new z;this.h=!1}
function Db(){var a={};'video/mp4; codecs="avc1.42E01E",audio/mp4; codecs="mp4a.40.2",video/webm; codecs="vp8",video/webm; codecs="vp9",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="mp4a.40.2",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(",").forEach(function(b){a[b]=!!E[b]||MediaSource.isTypeSupported(b);var c=b.split(";")[0];a[c]=a[c]||a[b]});return a}k=Cb.prototype;
k.o=function(){this.h=!0;var a=[],b;for(b in this.a){var c=this.a[b],d=c[0];this.a[b]=c.slice(0,1);d&&a.push(d.p["catch"](v));for(d=1;d<c.length;++d)c[d].p["catch"](v),c[d].p.reject()}this.b&&a.push(this.b.o());return Promise.all(a).then(function(){this.g.o();this.b=this.j=this.f=this.i=this.g=null;this.c={};this.a={}}.bind(this))};
k.init=function(a){for(var b in a){var c=a[b];"text"==b?this.b=new vb(this.j,c):(c=this.f.addSourceBuffer(c),B(this.g,c,"error",this.Rc.bind(this,b)),B(this.g,c,"updateend",this.Fa.bind(this,b)),this.c[b]=c,this.a[b]=[])}};function Eb(a,b){var c;"text"==b?c=a.b.b:(c=Fb(a,b),c=!c||1==c.length&&1E-6>c.end(0)-c.start(0)?null:c.length?c.start(0):null);return c}function Gb(a,b,c){"text"==b?(b=Ab(a.b,c),b||(b=Ab(a.b,c+.1))&&(b+=.1)):(a=Fb(a,b),b=Bb(a,c),b||(b=Bb(a,c+.1))&&(b+=.1));return b}
function Fb(a,b){try{return a.c[b].buffered}catch(c){return null}}function Hb(a,b,c,d,e){return"text"==b?zb(a.b,c,d,e):Ib(a,b,a.Qc.bind(a,b,c))}k.remove=function(a,b,c){return"text"==a?this.b.remove(b,c):Promise.all([Ib(this,a,this.Ab.bind(this,a,b,c)),Ib(this,a,this.ib.bind(this,a))])};k.clear=function(a){return"text"==a?this.b.remove(0,Infinity):Ib(this,a,this.Ab.bind(this,a,0,this.f.duration))};function Jb(a,b,c){return"text"==b?(a.b.h=c,Promise.resolve()):Ib(a,b,a.Gc.bind(a,b,c))}
function Kb(a,b,c){return"text"==b?(a.b.f=c,Promise.resolve()):Promise.all([Ib(a,b,a.ib.bind(a,b)),Ib(a,b,a.Ec.bind(a,b,c))])}k.endOfStream=function(a){return Lb(this,function(){a?this.f.endOfStream(a):this.f.endOfStream()}.bind(this))};k.za=function(a){return Lb(this,function(){this.f.duration=a}.bind(this))};k.Z=function(){return this.f.duration};k.Qc=function(a,b){this.c[a].appendBuffer(b)};k.Ab=function(a,b,c){c<=b?this.Fa(a):this.c[a].remove(b,c)};
k.ib=function(a){var b=this.c[a].appendWindowEnd;this.c[a].abort();this.c[a].appendWindowEnd=b;this.Fa(a)};k.Gc=function(a,b){this.c[a].timestampOffset=b;this.Fa(a)};k.Ec=function(a,b){this.c[a].appendWindowEnd=b+.04;this.Fa(a)};k.Rc=function(a){this.a[a][0].p.reject(new q(3,3014,this.i.error?this.i.error.code:0))};k.Fa=function(a){var b=this.a[a][0];b&&(b.p.resolve(),Mb(this,a))};
function Ib(a,b,c){if(a.h)return Promise.reject();c={start:c,p:new w};a.a[b].push(c);if(1==a.a[b].length)try{c.start()}catch(d){"QuotaExceededError"==d.name?c.p.reject(new q(3,3017,b)):c.p.reject(new q(3,3015,d)),Mb(a,b)}return c.p}
function Lb(a,b){if(a.h)return Promise.reject();var c=[],d;for(d in a.c){var e=new w,f={start:function(a){a.resolve()}.bind(null,e),p:e};a.a[d].push(f);c.push(e);1==a.a[d].length&&f.start()}return Promise.all(c).then(function(){var a,c;try{b()}catch(d){c=Promise.reject(new q(3,3015,d))}for(a in this.c)Mb(this,a);return c}.bind(a),function(){return Promise.reject()}.bind(a))}function Mb(a,b){a.a[b].shift();var c=a.a[b][0];if(c)try{c.start()}catch(d){c.p.reject(new q(3,3015,d)),Mb(a,b)}};function F(a,b){this.j=a;this.i=b;this.c=this.a=Infinity;this.b=1;this.h=this.f=0;this.g=!0}l("shaka.media.PresentationTimeline",F);F.prototype.Z=function(){return this.a};F.prototype.getDuration=F.prototype.Z;F.prototype.za=function(a){this.a=a};F.prototype.setDuration=F.prototype.za;F.prototype.Eb=function(a){this.h=a};F.prototype.setClockOffset=F.prototype.Eb;F.prototype.Hb=function(a){this.g=a};F.prototype.setStatic=F.prototype.Hb;F.prototype.Ub=function(){return this.c};
F.prototype.getSegmentAvailabilityDuration=F.prototype.Ub;F.prototype.Gb=function(a){this.c=a};F.prototype.setSegmentAvailabilityDuration=F.prototype.Gb;F.prototype.Ea=function(a,b){b.length&&(this.b=b.reduce(function(a,b){return Math.max(a,b.endTime-b.startTime)},this.b),a||(this.f=Math.max(this.f,b[0].startTime)))};F.prototype.notifySegments=F.prototype.Ea;F.prototype.Xa=function(a){this.b=Math.max(this.b,a)};F.prototype.notifyMaxSegmentDuration=F.prototype.Xa;
F.prototype.U=function(){return Infinity==this.a&&!this.g};F.prototype.isLive=F.prototype.U;F.prototype.ga=function(){return Infinity!=this.a&&!this.g};F.prototype.isInProgress=F.prototype.ga;F.prototype.ra=function(){return Math.max(Math.min(this.f,this.fa()),this.sa())};F.prototype.getEarliestStart=F.prototype.ra;F.prototype.sa=function(){return Infinity==this.c?0:Math.max(0,this.fa()-this.c-this.i)};F.prototype.getSegmentAvailabilityStart=F.prototype.sa;
F.prototype.fa=function(){return this.U()||this.ga()?Math.min(Math.max(0,(Date.now()+this.h)/1E3-this.b-this.j),this.a):this.a};F.prototype.getSegmentAvailabilityEnd=F.prototype.fa;F.prototype.Ta=function(){return Math.max(0,this.fa()-(this.U()||this.ga()?this.i:0))};F.prototype.getSeekRangeEnd=F.prototype.Ta;function Nb(a,b,c,d,e,f){this.a=a;this.c=b;this.i=c;this.m=d;this.j=e;this.l=f;this.b=new z;this.h=!1;this.g=1;this.f=null;0<a.readyState?this.rb():B(this.b,a,"loadedmetadata",this.rb.bind(this));B(this.b,a,"ratechange",this.ic.bind(this))}k=Nb.prototype;k.o=function(){var a=this.b.o();this.b=null;null!=this.f&&(window.clearInterval(this.f),this.f=null);this.l=this.j=this.c=this.a=null;return a};function Ob(a){return 0<a.a.readyState?Pb(a,a.a.currentTime):Qb(a)}
function Qb(a){return a.m?Pb(a,a.m):Infinity>a.c.Z()?a.c.ra():Math.max(a.c.Ta(),a.c.ra())}function Rb(a,b){b!=a.h&&(a.h=b,Sb(a,a.g),a.j(b))}k.Sa=function(){return this.g};function Sb(a,b){null!=a.f&&(window.clearInterval(a.f),a.f=null);a.g=b;a.a.playbackRate=a.h||0>b?0:b;!a.h&&0>b&&(a.f=window.setInterval(function(){this.a.currentTime+=b/4}.bind(a),250))}k.ic=function(){this.a.playbackRate!=(this.h||0>this.g?0:this.g)&&Sb(this,this.a.playbackRate)};
k.rb=function(){this.b.ka(this.a,"loadedmetadata");var a=Qb(this);.001>Math.abs(this.a.currentTime-a)?(B(this.b,this.a,"seeking",this.tb.bind(this)),B(this.b,this.a,"playing",this.sb.bind(this))):(B(this.b,this.a,"seeking",this.kc.bind(this)),this.a.currentTime=a)};k.kc=function(){this.b.ka(this.a,"seeking");B(this.b,this.a,"seeking",this.tb.bind(this));B(this.b,this.a,"playing",this.sb.bind(this))};k.tb=function(){var a=this.a.currentTime,b=Tb(this,a);.001<Math.abs(b-a)?Ub(this,a,b):this.l()};
k.sb=function(){var a=this.a.currentTime,b=Tb(this,a);.001<Math.abs(b-a)&&Ub(this,a,b)};function Tb(a,b){var c=a.c,d=c.ra(),e=c.fa();if(!c.U()||Infinity==c.c)return b<d?d:b>e?e:b;c=d+1;d=c+a.i;return b>=d&&b<=e||Bb(a.a.buffered,b)&&b>=c&&b<=e?b:b>e?e:e<d&&b>=c&&b<=e?b:Math.min(d+2,e)}function Ub(a,b,c){a.a.currentTime=c;var d=0,e=function(){!this.a||10<=d++||this.a.currentTime!=b||(this.a.currentTime=c,setTimeout(e,100))}.bind(a);setTimeout(e,100)}
function Pb(a,b){var c=a.c.ra();if(b<c)return c;c=a.c.fa();return b>c?c:b};function Vb(a,b,c){this.a=a;this.L=b;this.D=c}l("shaka.media.InitSegmentReference",Vb);function G(a,b,c,d,e,f){this.position=a;this.startTime=b;this.endTime=c;this.a=d;this.L=e;this.D=f}l("shaka.media.SegmentReference",G);function Wb(a,b,c,d,e,f,g,h,m){this.i=a;this.c=b;this.S=c;this.a=d;this.J=e;this.w=f;this.l=g;this.A=h||null;this.C=m||null;this.g=null;this.j=1;this.G=Promise.resolve();this.h=[];this.m={};this.b={};this.f=this.s=this.v=!1}Wb.prototype.o=function(){for(var a in this.b)Xb(this.b[a]);this.g=this.b=this.m=this.h=this.C=this.A=this.l=this.w=this.J=this.G=this.a=this.S=this.c=this.i=null;this.f=!0;return Promise.resolve()};
Wb.prototype.configure=function(a){this.g=a;this.i.i=this.j*Math.max(this.a.minBufferTime||0,this.g.rebufferingGoal)};Wb.prototype.init=function(){var a=this.J(this.a.periods[Yb(this,Ob(this.i))]);return Ma(a)?Promise.reject(new q(5,5005)):Zb(this,a).then(function(){this.A&&this.A()}.bind(this))};function $b(a){return a.a.periods[Yb(a,Ob(a.i))]}function ac(a){return Na(a.b,function(a){return a.stream})}function bc(a,b){var c={};c.text=b;return Zb(a,c)}
function cc(a,b,c,d){var e=a.b[b];!e&&"text"==b&&a.g.ignoreTextStreamFailures?bc(a,c):e&&(b=a.h[dc(a,c)])&&b.xa&&(b=a.m[c.id])&&b.xa&&e.stream!=c&&(e.stream=c,e.La=!0,void 0==d||e.ca||e.da||(e.ha?ec(e,d):(Xb(e),fc(a,e,d))))}function ec(a,b){a.ca?a.Ka=Math.min(a.Ka,b):(a.ca=!0,a.Ka=b)}
function Zb(a,b){var c=Yb(a,Ob(a.i)),d=Na(b,function(a){return a.mimeType+(a.codecs?'; codecs="'+a.codecs+'"':"")});a.c.init(d);gc(a);d=C(b);return hc(a,d).then(function(){if(!this.f)for(var a in b){var d=b[a];this.b[a]||(this.b[a]={stream:d,type:a,ta:null,V:null,La:!0,va:!1,Ma:c,endOfStream:!1,ha:!1,ba:null,ca:!1,Ka:0,da:!1,ab:!1},ic(this,this.b[a],0))}}.bind(a))}
function jc(a,b){var c=a.h[b];if(c)return c.I;c={I:new w,xa:!1};a.h[b]=c;var d=a.a.periods[b].streamSets.map(function(a){return a.streams}).reduce(t,[]);a.G=a.G.then(function(){if(!this.f)return hc(this,d)}.bind(a)).then(function(){this.f||(this.h[b].I.resolve(),this.h[b].xa=!0)}.bind(a))["catch"](function(a){this.f||(this.h[b].I.reject(),delete this.h[b],this.l(a))}.bind(a));return c.I}
function hc(a,b){for(var c=[],d=0;d<b.length;++d){var e=b[d],f=a.m[e.id];f?c.push(f.I):(a.m[e.id]={I:new w,xa:!1},c.push(e.createSegmentIndex()))}return Promise.all(c).then(function(){if(!this.f)for(var a=0;a<b.length;++a){var c=this.m[b[a].id];c.xa||(c.I.resolve(),c.xa=!0)}}.bind(a))["catch"](function(a){if(!this.f)return this.m[e.id].I.reject(),delete this.m[e.id],Promise.reject(a)}.bind(a))}function gc(a){var b=a.a.presentationTimeline.Z();Infinity>b?a.c.za(b):a.c.za(Math.pow(2,32))}
Wb.prototype.X=function(a){if(!this.f&&!a.ha&&null!=a.ba&&!a.da)if(a.ba=null,a.ca)fc(this,a,a.Ka);else{try{var b=kc(this,a);null!=b&&ic(this,a,b)}catch(c){this.l(c);return}b=C(this.b);Rb(this.i,b.some(function(a){return a.va}));lc(this,a);b.every(function(a){return a.endOfStream})&&this.c.endOfStream()}};
function kc(a,b){var c=Ob(a.i),d;d=a.c;var e=b.type;"text"==e?d=d.b.a:(d=Fb(d,e),d=!d||1==d.length&&1E-6>d.end(0)-d.start(0)?null:d.length?d.end(d.length-1):null);var f=b.ta&&b.V?a.a.periods[dc(a,b.ta)].startTime+b.V.endTime:c,e=Yb(a,f),g=a.a.periods[e],h=mc(a,b,c,d,e),h=h?g.startTime+h.startTime-c:Gb(a.c,b.type,c),g=a.j*Math.max(a.a.minBufferTime||0,a.g.rebufferingGoal);if(h>=Math.max(g,a.j*a.g.bufferingGoal))return b.va=!1,.5;if(f>=a.a.presentationTimeline.Z())return b.va=!1,b.endOfStream=!0,null;
b.endOfStream=!1;!a.v&&h<g||1>=h?b.va=!0:h>=g&&(b.va=!1);f=dc(a,b.stream);if(e!=f)return b.Ma=e,null;h=mc(a,b,c,d,f);if(!h)return 1;nc(a,b,c,f,h);return null}
function mc(a,b,c,d,e){if(b.V&&b.stream==b.ta)return c=b.V.position+1,oc(a,b,e,c);c=b.V?b.stream.findSegmentPosition(Math.max(0,a.a.periods[dc(a,b.ta)].startTime+b.V.endTime-a.a.periods[e].startTime)):b.stream.findSegmentPosition(Math.max(0,(d||c)-a.a.periods[e].startTime));if(null==c)return null;var f=null;null==d&&(f=oc(a,b,e,Math.max(0,c-1)));return f||oc(a,b,e,c)}
function oc(a,b,c,d){c=a.a.periods[c];b=b.stream.getSegmentReference(d);if(!b)return null;a=a.a.presentationTimeline;d=a.fa();return c.startTime+b.endTime<a.sa()||c.startTime+b.startTime>d?null:b}
function nc(a,b,c,d,e){var f=a.a.periods[d],g=b.stream,h=a.a.periods[d+1],m=null,m=h?h.startTime:a.a.presentationTimeline.Z();d=pc(a,b,d,m);b.ha=!0;b.La=!1;h=qc(a,e);Promise.all([d,h]).then(function(a){if(!this.f&&!this.s)return rc(this,b,c,f,g,e,a[1])}.bind(a)).then(function(){this.f||this.s||(b.ha=!1,b.ab=!1,ic(this,b,0),sc(this,g))}.bind(a))["catch"](function(a){this.f||this.s||(b.ha=!1,1001==a.code||1002==a.code||1003==a.code?"text"==b.type&&this.g.ignoreTextStreamFailures&&1001==a.code?delete this.b.text:
(this.l(a),ic(this,b,4)):3017==a.code?tc(this,b,a):this.l(a))}.bind(a))}function tc(a,b,c){if(!C(a.b).some(function(a){return a!=b&&a.ab})){var d=Math.round(100*a.j);if(20<d)a.j-=.2;else if(4<d)a.j-=.04;else{a.s=!0;a.l(c);return}b.ab=!0}ic(a,b,b.va?0:4)}
function pc(a,b,c,d){if(!b.La)return Promise.resolve();c=Jb(a.c,b.type,a.a.periods[c].startTime-b.stream.presentationTimeOffset);d=null!=d?Kb(a.c,b.type,d):Promise.resolve();if(!b.stream.initSegmentReference)return Promise.all([c,d]);a=qc(a,b.stream.initSegmentReference).then(function(a){if(!this.f)return Hb(this.c,b.type,a,null,null)}.bind(a))["catch"](function(a){b.La=!0;return Promise.reject(a)});return Promise.all([c,d,a])}
function rc(a,b,c,d,e,f,g){return uc(a,b,c).then(function(){if(!this.f)return Hb(this.c,b.type,g,f.startTime+d.startTime,f.endTime+d.startTime)}.bind(a)).then(function(){if(!this.f)return b.ta=e,b.V=f,Promise.resolve()}.bind(a))}function uc(a,b,c){var d=Eb(a.c,b.type);if(null==d)return Promise.resolve();c=c-d-a.g.bufferBehind;return 0>=c?Promise.resolve():a.c.remove(b.type,d,d+c).then(function(){}.bind(a))}
function sc(a,b){if(!a.v&&(a.v=C(a.b).every(function(a){return!a.ca&&!a.da&&a.V}),a.v)){var c=dc(a,b);a.h[c]||jc(a,c).then(function(){this.w()}.bind(a))["catch"](v);for(c=0;c<a.a.periods.length;++c)jc(a,c)["catch"](v);a.C&&a.C()}}
function lc(a,b){if(b.Ma!=dc(a,b.stream)){var c=b.Ma,d=C(a.b);d.every(function(a){return a.Ma==c})&&d.every(vc)&&jc(a,c).then(function(){if(!this.f){var a=this.J(this.a.periods[c]),b;for(b in this.b)if(!a[b]){this.l(new q(5,5005));return}for(b in a)if(!(this.b[b]||"text"==b&&this.g.ignoreTextStreamFailures)){this.l(new q(5,5005));return}for(b in this.b){cc(this,b,a[b]);var d=this.b[b];vc(d)&&ic(this,d,0)}this.w()}}.bind(a))["catch"](v)}}function vc(a){return!a.ha&&null==a.ba&&!a.ca&&!a.da}
function Yb(a,b){for(var c=a.a.periods.length-1;0<c;--c)if(b>=a.a.periods[c].startTime)return c;return 0}function dc(a,b){for(var c=0;c<a.a.periods.length;++c)for(var d=a.a.periods[c],e=0;e<d.streamSets.length;++e)if(0<=d.streamSets[e].streams.indexOf(b))return c;return-1}function qc(a,b){var c=Ha(b.a(),a.g.retryParameters);if(b.L||null!=b.D){var d="bytes="+b.L+"-";null!=b.D&&(d+=b.D);c.headers.Range=d}return a.S.request(1,c).then(function(a){return a.data})}
function fc(a,b,c){b.ca=!1;b.da=!0;var d=Ob(a.i)+c,e=a.c.Z();(c?a.c.remove(b.type,d,e):a.c.clear(b.type)).then(function(){this.f||(b.ta=null,b.V=null,b.da=!1,ic(this,b,0))}.bind(a))}function ic(a,b,c){b.ba=window.setTimeout(a.X.bind(a,b),1E3*c)}function Xb(a){null!=a.ba&&(window.clearTimeout(a.ba),a.ba=null)};function wc(){this.a=Promise.resolve();this.c=this.b=this.f=!1;this.g=new Promise(function(a){this.h=a}.bind(this))}wc.prototype.then=function(a){this.a=this.a.then(a).then(function(a){return this.c?(this.h(),Promise.reject(this.i)):Promise.resolve(a)}.bind(this));return this};function xc(a){a.f||(a.a=a.a.then(function(a){this.b=!0;return Promise.resolve(a)}.bind(a),function(a){this.b=!0;return Promise.reject(a)}.bind(a)));a.f=!0;return a.a}
function yc(a,b){if(a.b)return Promise.resolve();a.c=!0;a.i=b;return a.g};function zc(a,b,c,d,e){var f=e in d,g;for(g in b){var h=e+"."+g,m=f?d[e]:c[g],n=!!{".abr.manager":!0}[h];if(f||g in a)void 0===b[g]?void 0===m||f?delete a[g]:a[g]=m:n?a[g]=b[g]:"object"==typeof a[g]&&"object"==typeof b[g]?zc(a[g],b[g],m,d,h):typeof b[g]==typeof m&&(a[g]=b[g])}};function H(a,b){var c=b||{},d;for(d in c)this[d]=c[d];this.defaultPrevented=this.cancelable=this.bubbles=!1;this.timeStamp=window.performance?window.performance.now():Date.now();this.type=a;this.isTrusted=!1;this.target=this.currentTarget=null;this.a=!1}H.prototype.preventDefault=function(){};H.prototype.stopImmediatePropagation=function(){this.a=!0};H.prototype.stopPropagation=function(){};function p(){this.Aa=new Ja;this.S=this}p.prototype.addEventListener=function(a,b){this.Aa.push(a,b)};p.prototype.removeEventListener=function(a,b){this.Aa.remove(a,b)};p.prototype.dispatchEvent=function(a){for(var b=this.Aa.get(a.type)||[],c=0;c<b.length;++c){a.target=this.S;a.currentTarget=this.S;var d=b[c];try{d.handleEvent?d.handleEvent(a):d.call(this,a)}catch(e){}if(a.a)break}return a.defaultPrevented};function Ac(a,b,c){return c==b||a>=Bc&&c==b.split("-")[0]||a>=Cc&&c.split("-")[0]==b.split("-")[0]?!0:!1}var Bc=1,Cc=2;function Dc(a){a=a.toLowerCase().split("-");var b=Ec[a[0]];b&&(a[0]=b);return a.join("-")}
var Ec={aar:"aa",abk:"ab",afr:"af",aka:"ak",alb:"sq",amh:"am",ara:"ar",arg:"an",arm:"hy",asm:"as",ava:"av",ave:"ae",aym:"ay",aze:"az",bak:"ba",bam:"bm",baq:"eu",bel:"be",ben:"bn",bih:"bh",bis:"bi",bod:"bo",bos:"bs",bre:"br",bul:"bg",bur:"my",cat:"ca",ces:"cs",cha:"ch",che:"ce",chi:"zh",chu:"cu",chv:"cv",cor:"kw",cos:"co",cre:"cr",cym:"cy",cze:"cs",dan:"da",deu:"de",div:"dv",dut:"nl",dzo:"dz",ell:"el",eng:"en",epo:"eo",est:"et",eus:"eu",ewe:"ee",fao:"fo",fas:"fa",fij:"fj",fin:"fi",fra:"fr",fre:"fr",
fry:"fy",ful:"ff",geo:"ka",ger:"de",gla:"gd",gle:"ga",glg:"gl",glv:"gv",gre:"el",grn:"gn",guj:"gu",hat:"ht",hau:"ha",heb:"he",her:"hz",hin:"hi",hmo:"ho",hrv:"hr",hun:"hu",hye:"hy",ibo:"ig",ice:"is",ido:"io",iii:"ii",iku:"iu",ile:"ie",ina:"ia",ind:"id",ipk:"ik",isl:"is",ita:"it",jav:"jv",jpn:"ja",kal:"kl",kan:"kn",kas:"ks",kat:"ka",kau:"kr",kaz:"kk",khm:"km",kik:"ki",kin:"rw",kir:"ky",kom:"kv",kon:"kg",kor:"ko",kua:"kj",kur:"ku",lao:"lo",lat:"la",lav:"lv",lim:"li",lin:"ln",lit:"lt",ltz:"lb",lub:"lu",
lug:"lg",mac:"mk",mah:"mh",mal:"ml",mao:"mi",mar:"mr",may:"ms",mkd:"mk",mlg:"mg",mlt:"mt",mon:"mn",mri:"mi",msa:"ms",mya:"my",nau:"na",nav:"nv",nbl:"nr",nde:"nd",ndo:"ng",nep:"ne",nld:"nl",nno:"nn",nob:"nb",nor:"no",nya:"ny",oci:"oc",oji:"oj",ori:"or",orm:"om",oss:"os",pan:"pa",per:"fa",pli:"pi",pol:"pl",por:"pt",pus:"ps",que:"qu",roh:"rm",ron:"ro",rum:"ro",run:"rn",rus:"ru",sag:"sg",san:"sa",sin:"si",slk:"sk",slo:"sk",slv:"sl",sme:"se",smo:"sm",sna:"sn",snd:"sd",som:"so",sot:"st",spa:"es",sqi:"sq",
srd:"sc",srp:"sr",ssw:"ss",sun:"su",swa:"sw",swe:"sv",tah:"ty",tam:"ta",tat:"tt",tel:"te",tgk:"tg",tgl:"tl",tha:"th",tib:"bo",tir:"ti",ton:"to",tsn:"tn",tso:"ts",tuk:"tk",tur:"tr",twi:"tw",uig:"ug",ukr:"uk",urd:"ur",uzb:"uz",ven:"ve",vie:"vi",vol:"vo",wel:"cy",wln:"wa",wol:"wo",xho:"xh",yid:"yi",yor:"yo",zha:"za",zho:"zh",zul:"zu"};function Fc(a,b,c){var d=!1;a.streamSets.forEach(function(a){a.streams.forEach(function(f){var g=f.allowedByApplication;f.allowedByApplication=!0;if("video"==a.type){if(f.width<b.minWidth||f.width>b.maxWidth||f.width>c.width||f.height<b.minHeight||f.height>b.maxHeight||f.height>c.height||f.width*f.height<b.minPixels||f.width*f.height>b.maxPixels||f.bandwidth<b.minVideoBandwidth||f.bandwidth>b.maxVideoBandwidth)f.allowedByApplication=!1}else"audio"==a.type&&(f.bandwidth<b.minAudioBandwidth||f.bandwidth>
b.maxAudioBandwidth)&&(f.allowedByApplication=!1);g!=f.allowedByApplication&&(d=!0)})});return d}
function Gc(a,b,c){var d="",e=null;a&&a.A&&(d=a.keySystem(),e=a.m);for(a=0;a<c.streamSets.length;++a){var f=c.streamSets[a];if(d&&f.drmInfos.length&&!f.drmInfos.some(function(a){return a.keySystem==d}))c.streamSets.splice(a,1),--a;else{for(var g=b[f.type],h=0;h<f.streams.length;++h){var m=f.streams[h],n=m.mimeType;m.codecs&&(n+='; codecs="'+m.codecs+'"');E[n]||MediaSource.isTypeSupported(n)?e&&m.encrypted&&0>e.indexOf(n)?(f.streams.splice(h,1),--h):!g||m.mimeType==g.mimeType&&m.codecs.split(".")[0]==
g.codecs.split(".")[0]||(f.streams.splice(h,1),--h):(f.streams.splice(h,1),--h)}f.streams.length||(c.streamSets.splice(a,1),--a)}}}function Hc(a,b){return a.streamSets.map(function(a){var d=b?b[a.type]:null;return a.streams.filter(function(a){return a.allowedByApplication&&a.allowedByKeySystem}).map(function(b){return{id:b.id,active:d==b,type:a.type,bandwidth:b.bandwidth,language:a.language,kind:b.kind||null,width:b.width||null,height:b.height||null}})}).reduce(t,[])}
function Ic(a,b){for(var c=0;c<a.streamSets.length;c++)for(var d=a.streamSets[c],e=0;e<d.streams.length;e++){var f=d.streams[e];if(f.id==b.id)return{stream:f,Tc:d}}return null}function Jc(a){return a.streams.some(function(a){return a.allowedByApplication&&a.allowedByKeySystem})}
function Kc(a,b,c){var d={};a.streamSets.forEach(function(a){!Jc(a)||a.type in d||(d[a.type]=a)});var e=0;a.streamSets.forEach(function(a){if(Jc(a)&&"video"==a.type){var b=Lc(a);b>e?(e=b,d.video=a):b==e&&Mc(a)<Mc(d.video)&&(d.video=a)}});a.streamSets.forEach(function(a){Jc(a)&&a.primary&&(d[a.type].primary?Mc(a)<Mc(d[a.type])&&(d[a.type]=a):d[a.type]=a)});[Cc,Bc,0].forEach(function(e){a.streamSets.forEach(function(a){if(Jc(a)){var h;"audio"==a.type?h=b.preferredAudioLanguage:"text"==a.type&&(h=b.preferredTextLanguage);
if(h){h=Dc(h);var m=Dc(a.language);Ac(e,h,m)&&(a.language==d[a.type].language?Mc(a)<Mc(d[a.type])&&(d[a.type]=a):d[a.type]=a,c&&(c[a.type]=!0))}}})});return d}function Mc(a){var b=0;if(!a||1>a.streams.length)return b;a.streams.forEach(function(a){b+=a.bandwidth});return b/a.streams.length}function Lc(a){var b=0;if(!a)return b;a.streams.forEach(function(a){a.height>b&&(b=a.height)});return b};function I(a,b){p.call(this);this.w=!1;this.f=a;this.m=null;this.v=new z;this.hb=new ja;this.na=this.c=this.l=this.b=this.i=this.oa=this.G=this.A=this.g=this.h=null;this.Kb=1E9;this.ma=[];this.Pa=!1;this.qa=!0;this.j=null;this.s={};this.a=Nc(this);this.Ba={width:Infinity,height:Infinity};this.C=[];this.X=this.J=this.pa=0;b&&b(this);this.h=new y(this.Lc.bind(this));this.oa=Oc(this);for(var c=0;c<this.f.textTracks.length;++c){var d=this.f.textTracks[c];d.mode="disabled";"Shaka Player TextTrack"==d.label&&
(this.m=d)}this.m||(this.m=this.f.addTextTrack("subtitles","Shaka Player TextTrack"));this.m.mode="hidden";B(this.v,this.f,"error",this.lc.bind(this))}ba(I);l("shaka.Player",I);I.prototype.o=function(){this.w=!0;var a=Promise.resolve();this.j&&(a=yc(this.j,new q(7,7E3)));return a.then(function(){var a=Promise.all([Pc(this),this.v?this.v.o():null,this.h?this.h.o():null]);this.a=this.h=this.hb=this.v=this.m=this.f=null;return a}.bind(this))};I.prototype.destroy=I.prototype.o;I.version="v2.0.0";
var Qc={};I.registerSupportPlugin=function(a,b){Qc[a]=b};I.isBrowserSupported=function(){return!!window.Promise&&!!window.Uint8Array&&!!Array.prototype.forEach&&!!window.MediaSource&&!!window.MediaKeys&&!!window.navigator&&!!window.navigator.requestMediaKeySystemAccess&&!!window.MediaKeySystemAccess&&!!window.MediaKeySystemAccess.prototype.getConfiguration};I.probeSupport=function(){return qb().then(function(a){var b=tb(),c=Db();a={manifest:b,media:c,drm:a};for(var d in Qc)a[d]=Qc[d]();return a})};
I.prototype.load=function(a,b,c){var d=this.gb(),e=new wc;this.j=e;this.dispatchEvent(new H("loading"));return xc(e.then(function(){return d}).then(function(){return ub(a,this.h,this.a.manifest.retryParameters,c)}.bind(this)).then(function(b){this.l=new b;this.l.configure(this.a.manifest);return this.l.start(a,this.h,this.Na.bind(this),this.aa.bind(this),this.Ic.bind(this))}.bind(this)).then(function(b){this.c=b;this.na=a;this.g=new ab(this.h,this.aa.bind(this),this.Jc.bind(this));this.g.configure(this.a.drm);
return this.g.init(b,!1)}.bind(this)).then(function(){this.c.periods.forEach(this.Na.bind(this));this.X=Date.now()/1E3;return Promise.all([db(this.g,this.f),this.oa])}.bind(this)).then(function(){this.i=new Nb(this.f,this.c.presentationTimeline,1*Math.max(this.c.minBufferTime||0,this.a.streaming.rebufferingGoal),b||null,this.Ib.bind(this),this.Kc.bind(this));this.G=new Cb(this.f,this.A,this.m);this.b=new Wb(this.i,this.G,this.h,this.c,this.Hc.bind(this),this.Mb.bind(this),this.aa.bind(this));this.b.configure(this.a.streaming);
return this.b.init()}.bind(this)).then(function(){this.c.periods.forEach(this.Na.bind(this));Rc(this);Sc(this);this.a.abr.manager.init(this.eb.bind(this));this.j=null}.bind(this)))["catch"](function(a){this.j==e&&(this.j=null,this.dispatchEvent(new H("unloading")));return Promise.reject(a)}.bind(this))};I.prototype.load=I.prototype.load;function Oc(a){a.A=new MediaSource;var b=new w;B(a.v,a.A,"sourceopen",b.resolve);a.f.src=window.URL.createObjectURL(a.A);return b}
I.prototype.configure=function(a){a.abr&&a.abr.manager&&a.abr.manager!=this.a.abr.manager&&(this.a.abr.manager.stop(),a.abr.manager.init(this.eb.bind(this)));zc(this.a,a,Nc(this),Tc(),"");Uc(this)};I.prototype.configure=I.prototype.configure;
function Uc(a){a.l&&a.l.configure(a.a.manifest);a.g&&a.g.configure(a.a.drm);a.b&&(a.b.configure(a.a.streaming),a.c.periods.forEach(a.Na.bind(a)),Vc(a,$b(a.b)));a.a.abr.enabled&&!a.qa?a.a.abr.manager.enable():a.a.abr.manager.disable();a.a.abr.manager.setDefaultEstimate(a.a.abr.defaultBandwidthEstimate)}I.prototype.getConfiguration=function(){var a=Nc(this);zc(a,this.a,Nc(this),Tc(),"");return a};I.prototype.getConfiguration=I.prototype.getConfiguration;
I.prototype.zc=function(){var a=Nc(this);a.abr&&a.abr.manager&&a.abr.manager!=this.a.abr.manager&&(this.a.abr.manager.stop(),a.abr.manager.init(this.eb.bind(this)));this.a=Nc(this);Uc(this)};I.prototype.resetConfiguration=I.prototype.zc;I.prototype.nb=function(){return this.h};I.prototype.getNetworkingEngine=I.prototype.nb;I.prototype.Sb=function(){return this.na};I.prototype.getManifestUri=I.prototype.Sb;I.prototype.U=function(){return this.c?this.c.presentationTimeline.U():!1};
I.prototype.isLive=I.prototype.U;I.prototype.ga=function(){return this.c?this.c.presentationTimeline.ga():!1};I.prototype.isInProgress=I.prototype.ga;I.prototype.Cc=function(){var a=0,b=0;this.c&&(b=this.c.presentationTimeline,a=b.sa(),b=b.Ta());return{start:a,end:b}};I.prototype.seekRange=I.prototype.Cc;I.prototype.keySystem=function(){return this.g?this.g.keySystem():""};I.prototype.keySystem=I.prototype.keySystem;I.prototype.drmInfo=function(){return this.g?this.g.b:null};I.prototype.drmInfo=I.prototype.drmInfo;
I.prototype.Wb=function(){return this.Pa};I.prototype.isBuffering=I.prototype.Wb;I.prototype.gb=function(){if(this.w)return Promise.resolve();this.dispatchEvent(new H("unloading"));if(this.j){var a=new q(7,7E3);return yc(this.j,a).then(this.Bb.bind(this))}return this.Bb()};I.prototype.unload=I.prototype.gb;I.prototype.Sa=function(){return this.i?this.i.Sa():0};I.prototype.getPlaybackRate=I.prototype.Sa;I.prototype.Wc=function(a){this.i&&Sb(this.i,a)};I.prototype.trickPlay=I.prototype.Wc;
I.prototype.Nb=function(){this.i&&Sb(this.i,1)};I.prototype.cancelTrickPlay=I.prototype.Nb;I.prototype.getTracks=function(){if(!this.b)return[];var a=ac(this.b);return Hc($b(this.b),a).filter(function(a){return 0>this.ma.indexOf(a.id)}.bind(this))};I.prototype.getTracks=I.prototype.getTracks;
I.prototype.Dc=function(a,b){if(this.b){var c=Ic($b(this.b),a);if(c&&(c=c.stream,c.allowedByApplication&&c.allowedByKeySystem)){this.C.push({timestamp:Date.now()/1E3,id:c.id,type:a.type,fromAdaptation:!1});"text"!=a.type&&this.configure({abr:{enabled:!1}});var d={};d[a.type]=c;Wc(this,d,b)}}};I.prototype.selectTrack=I.prototype.Dc;I.prototype.Zb=function(){return"showing"==this.m.mode};I.prototype.isTextTrackVisible=I.prototype.Zb;I.prototype.Fc=function(a){this.m.mode=a?"showing":"hidden";Xc(this)};
I.prototype.setTextTrackVisibility=I.prototype.Fc;
I.prototype.getStats=function(){Yc(this);var a={},b={},c=this.f&&this.f.getVideoPlaybackQuality?this.f.getVideoPlaybackQuality():{};this.b&&(b=ac(this.b),a=b.video||{},b=b.audio||{});return{width:a.width||0,height:a.height||0,streamBandwidth:a.bandwidth+b.bandwidth||0,decodedFrames:Number(c.totalVideoFrames),droppedFrames:Number(c.droppedVideoFrames),estimatedBandwidth:this.a.abr.manager.getBandwidthEstimate(),playTime:this.pa,bufferingTime:this.J,switchHistory:this.C.slice(0)}};
I.prototype.getStats=I.prototype.getStats;
I.prototype.addTextTrack=function(a,b,c,d,e){if(!this.b)return Promise.reject();for(var f=$b(this.b),g,h=0;h<this.c.periods.length;h++)if(this.c.periods[h]==f){if(h==this.c.periods.length-1){if(g=this.c.presentationTimeline.Z()-f.startTime,Infinity==g)return Promise.reject()}else g=this.c.periods[h+1].startTime-f.startTime;break}var m={id:this.Kb++,createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(){return 1},getSegmentReference:function(b){return 1!=b?null:new G(1,0,g,
function(){return[a]},0,null)},initSegmentReference:null,presentationTimeOffset:0,mimeType:d,codecs:e||"",bandwidth:0,kind:c,encrypted:!1,keyId:null,language:b,allowedByApplication:!0,allowedByKeySystem:!0};d={language:b,type:"text",primary:!1,drmInfos:[],streams:[m]};this.ma.push(m.id);f.streamSets.push(d);return bc(this.b,m).then(function(){if(!this.w)return this.ma.splice(this.ma.indexOf(m.id),1),Vc(this,f),Rc(this),{id:m.id,active:!1,type:"text",bandwidth:0,language:b,kind:c,width:null,height:null}}.bind(this))};
I.prototype.addTextTrack=I.prototype.addTextTrack;I.prototype.Fb=function(a,b){this.Ba.width=a;this.Ba.height=b};I.prototype.setMaxHardwareResolution=I.prototype.Fb;
function Pc(a){a.v&&a.v.ka(a.A,"sourceopen");a.f&&(a.f.removeAttribute("src"),a.f.load());var b=Promise.all([a.a?a.a.abr.manager.stop():null,a.g?a.g.o():null,a.G?a.G.o():null,a.i?a.i.o():null,a.b?a.b.o():null,a.l?a.l.stop():null]);a.g=null;a.G=null;a.i=null;a.b=null;a.l=null;a.c=null;a.na=null;a.oa=null;a.A=null;a.s={};a.C=[];a.pa=0;a.J=0;return b}k=I.prototype;k.Bb=function(){return this.l?Pc(this).then(function(){this.w||(this.Ib(!1),this.oa=Oc(this))}.bind(this)):Promise.resolve()};
function Tc(){return{".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:"",audioRobustness:"",serverCertificate:null}}}
function Nc(a){return{drm:{retryParameters:Ga(),servers:{},clearKeys:{},advanced:{}},manifest:{retryParameters:Ga(),dash:{customScheme:function(a){if(a)return null},clockSyncUri:""}},streaming:{retryParameters:Ga(),rebufferingGoal:2,bufferingGoal:30,bufferBehind:30,ignoreTextStreamFailures:!1},abr:{manager:a.hb,enabled:!0,defaultBandwidthEstimate:5E5},preferredAudioLanguage:"",preferredTextLanguage:"",restrictions:{minWidth:0,maxWidth:Infinity,minHeight:0,maxHeight:Infinity,minPixels:0,maxPixels:Infinity,
minAudioBandwidth:0,maxAudioBandwidth:Infinity,minVideoBandwidth:0,maxVideoBandwidth:Infinity}}}k.Na=function(a){var b=this.b?ac(this.b):{};Gc(this.g,b,a);b=a.streamSets.some(Jc);Fc(a,this.a.restrictions,this.Ba)&&!this.j&&Rc(this);a=!a.streamSets.some(Jc);b?a&&this.aa(new q(4,4012)):this.aa(new q(4,4011))};function Wc(a,b,c){for(var d in b){var e=b[d],f=c||"text"==d;a.qa?a.s[d]={stream:e,clear:f}:cc(a.b,d,e,f?0:void 0)}}
function Yc(a){if(a.c){var b=Date.now()/1E3;a.Pa?a.J+=b-a.X:a.pa+=b-a.X;a.X=b}}k.Lc=function(a,b,c){this.a.abr.manager.segmentDownloaded(a,b,c)};k.Ib=function(a){Yc(this);this.Pa=a;this.dispatchEvent(new H("buffering",{buffering:a}))};k.Kc=function(){if(this.b){var a=this.b,b;for(b in a.b){var c=a.b[b];c.da||0<Gb(a.c,b,Ob(a.i))||c.ca||(c.ha?ec(c,0):null==Eb(a.c,b)?null==c.ba&&ic(a,c,0):(Xb(c),fc(a,c,0)))}}};
function Zc(a,b,c){if(!C(b).some(Jc))return a.aa(new q(4,4012)),{};var d={};if(c)d=b;else{c=ac(a.b);for(var e in c){var f=c[e];f.allowedByApplication&&f.allowedByKeySystem&&b[e].language==f.language||(d[e]=b[e])}}if(Ma(d))return{};ia(Object.keys(d));var g=a.a.abr.manager.chooseStreams(d);return Oa(d,function(a){return!!g[a]})?g:(a.aa(new q(4,4012)),{})}
function Vc(a,b){var c={audio:!1,text:!1},d=Kc(b,a.a,c),e=Zc(a,d),f;for(f in e)a.C.push({timestamp:Date.now()/1E3,id:e[f].id,type:f,fromAdaptation:!0});Wc(a,e,!0);Sc(a);d.text&&d.audio&&c.text&&d.text.language!=d.audio.language&&(a.m.mode="showing",Xc(a))}k.Hc=function(a){this.qa=!0;this.a.abr.manager.disable();a=Kc(a,this.a);a=Zc(this,a,!0);for(var b in this.s)a[b]=this.s[b].stream;this.s={};for(b in a)this.C.push({timestamp:Date.now()/1E3,id:a[b].id,type:b,fromAdaptation:!0});this.j||Rc(this);return a};
k.Mb=function(){this.qa=!1;this.a.abr.enabled&&this.a.abr.manager.enable();for(var a in this.s){var b=this.s[a];cc(this.b,a,b.stream,b.clear?0:void 0)}this.s={}};k.eb=function(a,b){var c=ac(this.b),d;for(d in a){var e=a[d];c[d]!=e?this.C.push({timestamp:Date.now()/1E3,id:e.id,type:d,fromAdaptation:!0}):delete a[d]}if(!Ma(a)&&this.b){for(d in a)cc(this.b,d,a[d],"video"==d?b:void 0);Sc(this)}};
function Sc(a){Promise.resolve().then(function(){this.w||this.dispatchEvent(new H("adaptation"))}.bind(a))}function Rc(a){Promise.resolve().then(function(){this.w||this.dispatchEvent(new H("trackschanged"))}.bind(a))}function Xc(a){a.dispatchEvent(new H("texttrackvisibility"))}k.aa=function(a){this.dispatchEvent(new H("error",{detail:a}))};k.Ic=function(a){this.dispatchEvent(a)};
k.lc=function(){if(this.f.error){var a=this.f.error.code;if(1!=a){var b=this.f.error.msExtendedCode;b&&(0>b&&(b+=Math.pow(2,32)),b=b.toString(16));this.aa(new q(3,3016,a,b))}}};k.Jc=function(a){var b=$b(this.b),c=!1;b.streamSets.forEach(function(b){b.streams.forEach(function(b){var d=b.allowedByKeySystem;b.keyId&&b.keyId in a&&(b.allowedByKeySystem="output-restricted"!=a[b.keyId]);d!=b.allowedByKeySystem&&(c=!0)})});Vc(this,b);c&&Rc(this)};var $c="ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(" "),ad="buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(" "),cd=["loop","playbackRate"],dd=["pause","play"],ed=["adaptation","buffering","error","texttrackvisibility","trackschanged"],fd="getConfiguration getManifestUri getPlaybackRate getTracks getStats isBuffering isLive isTextTrackVisible seekRange".split(" "),gd=[["getConfiguration",
"configure"]],hd=[["isTextTrackVisible","setTextTrackVisibility"]],id="configure resetConfiguration trickPlay cancelTrickPlay selectTrack setTextTrackVisibility addTextTrack".split(" "),jd=["load","unload"];
function kd(a){return JSON.stringify(a,function(a,c){if("manager"!=a&&"function"!=typeof c){if(c instanceof Event||c instanceof H){var d={},e;for(e in c){var f=c[e];f&&"object"==typeof f||e in Event||(d[e]=f)}return d}if(c instanceof TimeRanges)for(d={__type__:"TimeRanges",length:c.length,start:[],end:[]},e=0;e<c.length;++e)d.start.push(c.start(e)),d.end.push(c.end(e));else d="number"==typeof c?isNaN(c)?"NaN":isFinite(c)?c:0>c?"-Infinity":"Infinity":c;return d}})}
function ld(a){return JSON.parse(a,function(a,c){return"NaN"==c?NaN:"-Infinity"==c?-Infinity:"Infinity"==c?Infinity:c&&"object"==typeof c&&"TimeRanges"==c.__type__?md(c):c})}function md(a){return{length:a.length,start:function(b){return a.start[b]},end:function(b){return a.end[b]}}};function nd(a,b,c,d,e){this.C=a;this.l=b;this.w=c;this.A=d;this.s=e;this.f=this.j=this.h=!1;this.v="";this.a=this.i=null;this.b={video:{},player:{}};this.m=0;this.c={};this.g=null}k=nd.prototype;k.o=function(){od(this);this.a&&(this.a.stop(function(){},function(){}),this.a=null);this.A=this.w=this.l=null;this.f=this.j=this.h=!1;this.g=this.c=this.b=this.a=this.i=null;return Promise.resolve()};k.N=function(){return this.f};k.$a=function(){return this.v};
k.init=function(){if(window.chrome&&chrome.cast&&chrome.cast.isAvailable){delete window.__onGCastApiAvailable;this.h=!0;this.l();var a=new chrome.cast.SessionRequest(this.C),a=new chrome.cast.ApiConfig(a,this.cc.bind(this),this.jc.bind(this),"origin_scoped");chrome.cast.initialize(a,function(){},function(){})}else window.__onGCastApiAvailable=function(a){a&&this.init()}.bind(this)};k.bb=function(a){this.i=a;this.f&&pd(this,{type:"appData",appData:this.i})};
k.cast=function(a){if(!this.h)return Promise.reject(new q(8,8E3));if(!this.j)return Promise.reject(new q(8,8001));if(this.f)return Promise.reject(new q(8,8002));this.g=new w;chrome.cast.requestSession(this.Ya.bind(this,a),this.ob.bind(this));return this.g};
k.get=function(a,b){if("video"==a){if(0<=dd.indexOf(b))return this.zb.bind(this,a,b)}else if("player"==a){if(0<=id.indexOf(b))return this.zb.bind(this,a,b);if(0<=jd.indexOf(b))return this.xc.bind(this,a,b);if(0<=fd.indexOf(b))return this.wb.bind(this,a,b)}return this.wb(a,b)};k.set=function(a,b,c){this.b[a][b]=c;pd(this,{type:"set",targetName:a,property:b,value:c})};
k.Ya=function(a,b){this.a=b;this.a.addUpdateListener(this.pb.bind(this));this.a.addMessageListener("urn:x-cast:com.google.shaka.v2",this.dc.bind(this));this.pb();pd(this,{type:"init",initState:a,appData:this.i});this.g.resolve()};k.ob=function(a){var b=8003;switch(a.code){case "cancel":b=8004;break;case "timeout":b=8005;break;case "receiver_unavailable":b=8006}this.g.reject(new q(8,b,a))};k.wb=function(a,b){return this.b[a][b]};
k.zb=function(a,b){pd(this,{type:"call",targetName:a,methodName:b,args:Array.prototype.slice.call(arguments,2)})};k.xc=function(a,b){var c=Array.prototype.slice.call(arguments,2),d=new w,e=this.m.toString();this.m++;this.c[e]=d;pd(this,{type:"asyncCall",targetName:a,methodName:b,args:c,id:e});return d};k.cc=function(a){var b=this.s();this.g=new w;this.Ya(b,a)};k.jc=function(a){this.j="available"==a;this.l()};
k.pb=function(){var a=this.a?"connected"==this.a.status:!1;if(this.f&&!a){this.A();for(var b in this.b)this.b[b]={};od(this)}this.v=(this.f=a)?this.a.receiver.friendlyName:"";this.l()};function od(a){for(var b in a.c){var c=a.c[b];delete a.c[b];c.reject(new q(7,7E3))}}
k.dc=function(a,b){var c=ld(b);switch(c.type){case "event":var d=c.targetName,e=c.event;this.w(d,new H(e.type,e));break;case "update":e=c.update;for(d in e){var c=this.b[d]||{},f;for(f in e[d])c[f]=e[d][f]}break;case "asyncComplete":if(d=c.id,f=c.error,c=this.c[d],delete this.c[d],c)if(f){d=new q(f.category,f.code);for(e in f)d[e]=f[e];c.reject(d)}else c.resolve()}};function pd(a,b){var c=kd(b);a.a.sendMessage("urn:x-cast:com.google.shaka.v2",c,function(){},ha)};function J(a,b,c){p.call(this);this.c=a;this.b=b;this.h=this.f=this.g=this.i=this.j=null;this.a=new nd(c,this.Mc.bind(this),this.Nc.bind(this),this.Oc.bind(this),this.mb.bind(this));qd(this)}ba(J);l("shaka.cast.CastProxy",J);J.prototype.o=function(){var a=[this.h?this.h.o():null,this.b?this.b.o():null,this.a?this.a.o():null];this.a=this.h=this.i=this.j=this.b=this.c=null;return Promise.all(a)};J.prototype.destroy=J.prototype.o;J.prototype.Vb=function(){return this.j};J.prototype.getVideo=J.prototype.Vb;
J.prototype.Tb=function(){return this.i};J.prototype.getPlayer=J.prototype.Tb;J.prototype.Lb=function(){return this.a?this.a.h&&this.a.j:!1};J.prototype.canCast=J.prototype.Lb;J.prototype.N=function(){return this.a?this.a.N():!1};J.prototype.isCasting=J.prototype.N;J.prototype.$a=function(){return this.a?this.a.$a():""};J.prototype.receiverName=J.prototype.$a;J.prototype.cast=function(){var a=this.mb();return this.a.cast(a).then(function(){return this.b.gb()}.bind(this))};J.prototype.cast=J.prototype.cast;
J.prototype.bb=function(a){this.a.bb(a)};J.prototype.setAppData=J.prototype.bb;J.prototype.Uc=function(){var a=this.a;if(a.f){var b=a.s();chrome.cast.requestSession(a.Ya.bind(a,b),a.ob.bind(a))}};J.prototype.suggestDisconnect=J.prototype.Uc;
function qd(a){a.a.init();a.h=new z;$c.forEach(function(a){B(this.h,this.c,a,this.$c.bind(this))}.bind(a));ed.forEach(function(a){B(this.h,this.b,a,this.tc.bind(this))}.bind(a));a.j={};for(var b in a.c)Object.defineProperty(a.j,b,{configurable:!1,enumerable:!0,get:a.Zc.bind(a,b),set:a.ad.bind(a,b)});a.i={};for(b in a.b)Object.defineProperty(a.i,b,{configurable:!1,enumerable:!0,get:a.sc.bind(a,b)});a.g=new p;a.g.S=a.j;a.f=new p;a.f.S=a.i}k=J.prototype;
k.mb=function(){var a={video:{},player:{},playerAfterLoad:{},manifest:this.b.na,startTime:null};this.c.pause();cd.forEach(function(b){a.video[b]=this.c[b]}.bind(this));this.c.ended||(a.startTime=this.c.currentTime);gd.forEach(function(b){var c=b[1];b=this.b[b[0]]();a.player[c]=b}.bind(this));hd.forEach(function(b){var c=b[1];b=this.b[b[0]]();a.playerAfterLoad[c]=b}.bind(this));return a};k.Mc=function(){this.dispatchEvent(new H("caststatuschanged"))};
k.Oc=function(){gd.forEach(function(a){var b=a[1];a=this.a.get("player",a[0])();this.b[b](a)}.bind(this));var a=this.a.get("player","getManifestUri")(),b=this.a.get("video","ended"),c=Promise.resolve(),d=this.c.autoplay,e=null;b||(e=this.a.get("video","currentTime"));a&&(this.c.autoplay=!1,c=this.b.load(a,e),c["catch"](function(a){this.b.dispatchEvent(new H("error",{detail:a}))}.bind(this)));var f={};cd.forEach(function(a){f[a]=this.a.get("video",a)}.bind(this));c.then(function(){cd.forEach(function(a){this.c[a]=
f[a]}.bind(this));hd.forEach(function(a){var b=a[1];a=this.a.get("player",a[0])();this.b[b](a)}.bind(this));this.c.autoplay=d;a&&this.c.play()}.bind(this))};
k.Zc=function(a){if("addEventListener"==a)return this.g.addEventListener.bind(this.g);if("removeEventListener"==a)return this.g.removeEventListener.bind(this.g);if(this.a.N()&&!Object.keys(this.a.b.video).length){var b=this.c[a];if("function"!=typeof b)return b}return this.a.N()?this.a.get("video",a):(b=this.c[a],"function"==typeof b&&(b=b.bind(this.c)),b)};k.ad=function(a,b){this.a.N()?this.a.set("video",a,b):this.c[a]=b};k.$c=function(a){this.a.N()||this.g.dispatchEvent(new H(a.type,a))};
k.sc=function(a){return"addEventListener"==a?this.f.addEventListener.bind(this.f):"removeEventListener"==a?this.f.removeEventListener.bind(this.f):"getNetworkingEngine"==a?this.b.nb.bind(this.b):this.a.N()&&!Object.keys(this.a.b.video).length&&0<=fd.indexOf(a)||!this.a.N()?(a=this.b[a],a.bind(this.b)):this.a.get("player",a)};k.tc=function(a){this.a.N()||this.f.dispatchEvent(a)};k.Nc=function(a,b){this.a.N()&&("video"==a?this.g.dispatchEvent(b):"player"==a&&this.f.dispatchEvent(b))};function L(a,b,c){p.call(this);this.b=a;this.a=b;this.i={video:a,player:b};this.j=c||function(){};this.h=!1;this.g=!0;this.c=this.f=null;rd(this)}ba(L);l("shaka.cast.CastReceiver",L);L.prototype.Xb=function(){return this.h};L.prototype.isConnected=L.prototype.Xb;L.prototype.Yb=function(){return this.g};L.prototype.isIdle=L.prototype.Yb;
L.prototype.o=function(){var a=this.a?this.a.o():Promise.resolve();null!=this.c&&window.clearTimeout(this.c);this.j=this.i=this.a=this.b=null;this.h=!1;this.g=!0;this.c=this.f=null;return a.then(function(){cast.receiver.CastReceiverManager.getInstance().stop()})};L.prototype.destroy=L.prototype.o;
function rd(a){var b=cast.receiver.CastReceiverManager.getInstance();b.onSenderConnected=a.ub.bind(a);b.onSenderDisconnected=a.ub.bind(a);b.onSystemVolumeChanged=a.Rb.bind(a);a.f=b.getCastMessageBus("urn:x-cast:com.google.shaka.v2");a.f.onMessage=a.ec.bind(a);b.start();$c.forEach(function(a){this.b.addEventListener(a,this.xb.bind(this,"video"))}.bind(a));ed.forEach(function(a){this.a.addEventListener(a,this.xb.bind(this,"player"))}.bind(a));a.a.Fb(1920,1080);a.a.addEventListener("loading",function(){this.g=
!1;sd(this)}.bind(a));a.a.addEventListener("unloading",function(){this.g=!0;sd(this)}.bind(a));a.b.addEventListener("ended",function(){window.setTimeout(function(){this.b&&this.b.ended&&(this.g=!0,sd(this))}.bind(this),5E3)}.bind(a))}k=L.prototype;k.ub=function(){this.h=!!cast.receiver.CastReceiverManager.getInstance().getSenders().length;sd(this)};function sd(a){Promise.resolve().then(function(){this.dispatchEvent(new H("caststatuschanged"))}.bind(a))}
function td(a,b,c){for(var d in b.player)a.a[d](b.player[d]);a.j(c);c=Promise.resolve();var e=a.b.autoplay;b.manifest&&(a.b.autoplay=!1,c=a.a.load(b.manifest,b.startTime),c["catch"](function(a){this.a.dispatchEvent(new H("error",{detail:a}))}.bind(a)));c.then(function(){for(var a in b.video){var c=b.video[a];this.b[a]=c}for(a in b.playerAfterLoad)c=b.playerAfterLoad[a],this.a[a](c);this.b.autoplay=e;b.manifest&&this.b.play()}.bind(a))}
k.xb=function(a,b){this.Za();ud(this,{type:"event",targetName:a,event:b})};k.Za=function(){null!=this.c&&window.clearTimeout(this.c);this.c=window.setTimeout(this.Za.bind(this),500);var a={video:{},player:{}};ad.forEach(function(b){a.video[b]=this.b[b]}.bind(this));fd.forEach(function(b){a.player[b]=this.a[b]()}.bind(this));var b=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();b&&(a.video.volume=b.level,a.video.muted=b.muted);ud(this,{type:"update",update:a})};
k.Rb=function(){var a=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();a&&ud(this,{type:"update",update:{video:{volume:a.level,muted:a.muted}}});ud(this,{type:"event",targetName:"video",event:{type:"volumechange"}})};
k.ec=function(a){var b=ld(a.data);switch(b.type){case "init":td(this,b.initState,b.appData);this.Za();break;case "appData":this.j(b.appData);break;case "set":var c=b.targetName,d=b.property,e=b.value;if("video"==c)if(b=cast.receiver.CastReceiverManager.getInstance(),"volume"==d){b.setSystemVolumeLevel(e);break}else if("muted"==d){b.setSystemVolumeMuted(e);break}this.i[c][d]=e;break;case "call":c=b.targetName;d=b.methodName;e=b.args;c=this.i[c];c[d].apply(c,e);break;case "asyncCall":c=b.targetName,
d=b.methodName,e=b.args,b=b.id,a=a.senderId,c=this.i[c],c[d].apply(c,e).then(this.Db.bind(this,a,b,null),this.Db.bind(this,a,b))}};k.Db=function(a,b,c){ud(this,{type:"asyncComplete",id:b,error:c},a)};function ud(a,b,c){a.h&&(b=kd(b),c?a.f.getCastChannel(c).send(b):a.f.broadcast(b))};function vd(a,b){var c=M(a,b);return 1!=c.length?null:c[0]}function M(a,b){return Array.prototype.filter.call(a.childNodes,function(a){return a.tagName==b})}function wd(a){return(a=a.firstChild)&&a.nodeType==Node.TEXT_NODE?a.nodeValue.trim():null}function N(a,b,c,d){var e=null;a=a.getAttribute(b);null!=a&&(e=c(a));return null==e?void 0!==d?d:null:e}function xd(a){if(!a)return null;a=Date.parse(a);return isNaN(a)?null:Math.floor(a/1E3)}
function O(a){if(!a)return null;a=/^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$/.exec(a);if(!a)return null;a=31536E3*Number(a[1]||null)+2592E3*Number(a[2]||null)+86400*Number(a[3]||null)+3600*Number(a[4]||null)+60*Number(a[5]||null)+Number(a[6]||null);return isFinite(a)?a:null}function yd(a){var b=/([0-9]+)-([0-9]+)/.exec(a);if(!b)return null;a=Number(b[1]);if(!isFinite(a))return null;b=Number(b[2]);return isFinite(b)?{start:a,end:b}:null}
function zd(a){a=Number(a);return a%1?null:a}function Ad(a){a=Number(a);return!(a%1)&&0<a?a:null}function Bd(a){a=Number(a);return!(a%1)&&0<=a?a:null};var Cd={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"};
function Dd(a,b){var c=Ed(a),d=null,e=c.filter(function(a){return"urn:mpeg:dash:mp4protection:2011"==a.Cb?(d=a.init||d,!1):!0}),f=c.map(function(a){return a.keyId}).filter(Da),g=null;if(0<f.length&&(g=f[0],f.some(Ea(g))))throw new q(4,4010);f=[];0<e.length?(f=Fd(d,b,e),f.length||(f=[Hd("",d)])):0<c.length&&(f=C(Cd).map(function(a){return Hd(a,d)}));return{kb:g,dd:d,drmInfos:f,lb:!0}}
function Id(a,b,c){var d=Dd(a,b);if(c.lb){a=1==c.drmInfos.length&&!c.drmInfos[0].keySystem;b=!d.drmInfos.length;if(!c.drmInfos.length||a&&!b)c.drmInfos=d.drmInfos;c.lb=!1}else if(0<d.drmInfos.length&&(c.drmInfos=c.drmInfos.filter(function(a){return d.drmInfos.some(function(b){return b.keySystem==a.keySystem})}),!c.drmInfos.length))throw new q(4,4008);return d.kb||c.kb}
function Hd(a,b){return{keySystem:a,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,initData:b||[]}}function Fd(a,b,c){return c.map(function(c){var e=Cd[c.Cb];return e?[Hd(e,c.init||a)]:b(c.node)||[]}).reduce(t,[])}
function Ed(a){return a.map(function(a){var c=a.getAttribute("schemeIdUri"),d=a.getAttribute("cenc:default_KID"),e=M(a,"cenc:pssh").map(wd);if(!c)return null;c=c.toLowerCase();if(d&&(d=d.replace(/-/g,"").toLowerCase(),0<=d.indexOf(" ")))throw new q(4,4009);var f=[];try{f=e.map(function(a){return{initDataType:"cenc",initData:Xa(a)}})}catch(g){throw new q(4,4007);}return{node:a,Cb:c,keyId:d,init:0<f.length?f:null}}).filter(Da)};var Jd=1/15;function Kd(a,b,c,d,e){null!==e&&(e=Math.round(e));var f={RepresentationID:b,Number:c,Bandwidth:d,Time:e};return a.replace(/\$(RepresentationID|Number|Bandwidth|Time)?(?:%0([0-9]+)d)?\$/g,function(a,b,c){if("$$"==a)return"$";var d=f[b];if(null==d)return a;"RepresentationID"==b&&c&&(c=void 0);a=d.toString();c=window.parseInt(c,10)||1;return Array(Math.max(0,c-a.length)+1).join("0")+a})}
function Ld(a,b,c){if(c.length){var d=c[0];d.startTime<=Jd&&(c[0]=new G(d.position,0,d.endTime,d.a,d.L,d.D));a||(a=c[c.length-1],a.startTime>b||(c[c.length-1]=new G(a.position,a.startTime,b,a.a,a.L,a.D)))}}function P(a,b){if(!b.length)return a;var c=b.map(function(a){return new oa(a)});return a.map(function(a){return new oa(a)}).map(function(a){return c.map(a.resolve.bind(a))}).reduce(t,[]).map(function(a){return a.toString()})}
function Md(a,b){var c=Q(a,b,"timescale"),d=1;c&&(d=Ad(c)||1);c=Q(a,b,"duration");(c=Ad(c||""))&&(c/=d);var e=Q(a,b,"startNumber"),f=Q(a,b,"presentationTimeOffset"),g=Bd(e||"");if(null==e||null==g)g=1;var h=Nd(a,b,"SegmentTimeline"),e=null;if(h){for(var e=d,m=Number(f),n=a.H.duration||Infinity,h=M(h,"S"),r=[],u=0,A=0;A<h.length;++A){var x=h[A],K=N(x,"t",Bd),jb=N(x,"d",Bd),x=N(x,"r",zd);null!=K&&(K-=m);if(!jb)break;K=null!=K?K:u;x=x||0;if(0>x)if(A+1<h.length){x=N(h[A+1],"t",Bd);if(null==x)break;else if(K>=
x)break;x=Math.ceil((x-K)/jb)-1}else{if(Infinity==n)break;else if(K/e>=n)break;x=Math.ceil((n*e-K)/jb)-1}0<r.length&&K!=u&&(r[r.length-1].end=K/e);for(var Gd=0;Gd<=x;++Gd)u=K+jb,r.push({start:K/e,end:u/e}),K=u}e=r}return{Ia:d,F:c,ia:g,presentationTimeOffset:Number(f)/d||0,B:e}}function Q(a,b,c){return[b(a.u),b(a.P),b(a.K)].filter(Da).map(function(a){return a.getAttribute(c)}).reduce(function(a,b){return a||b})}
function Nd(a,b,c){return[b(a.u),b(a.P),b(a.K)].filter(Da).map(function(a){return vd(a,c)}).reduce(function(a,b){return a||b})};function Od(a){this.b=a;this.c=0==Pd;this.a=0}var Pd=1;function Qd(a){return a.a<a.b.byteLength}function Rd(a){try{var b=a.b.getUint8(a.a)}catch(c){Sd()}a.a+=1;return b}function Td(a){try{var b=a.b.getUint16(a.a,a.c)}catch(c){Sd()}a.a+=2;return b}function R(a){try{var b=a.b.getUint32(a.a,a.c)}catch(c){Sd()}a.a+=4;return b}
function Ud(a){var b,c;try{a.c?(b=a.b.getUint32(a.a,!0),c=a.b.getUint32(a.a+4,!0)):(c=a.b.getUint32(a.a,!1),b=a.b.getUint32(a.a+4,!1))}catch(d){Sd()}if(2097151<c)throw new q(3,3001);a.a+=8;return c*Math.pow(2,32)+b}function Vd(a,b){a.a+b>a.b.byteLength&&Sd();var c=a.b.buffer.slice(a.a,a.a+b);a.a+=b;return new Uint8Array(c)}function S(a,b){a.a+b>a.b.byteLength&&Sd();a.a+=b}
function Wd(a){var b=a.a;try{for(;Qd(a)&&a.b.getUint8(a.a);)a.a+=1}catch(c){Sd()}b=a.b.buffer.slice(b,a.a);a.a+=1;return D(b)}function Sd(){throw new q(3,3E3);};function Xd(a,b){for(;Qd(b);){var c=b.a,d=R(b),e=R(b);1==d?d=Ud(b):d||(d=b.b.byteLength-c);if(e==a)return d;S(b,d-(b.a-c))}return-1}function Yd(a,b){for(var c=new Od(new DataView(a)),d=[[1836019574,0],[1953653099,0],[1835297121,0],[1835626086,0],[1937007212,0],[1937011556,8],[b,0]],e=-1,f=0;f<d.length;f++){var g=d[f][1],e=Xd(d[f][0],c);if(-1==e)return-1;S(c,g)}return e};function Zd(a,b,c,d){var e=[];a=new Od(new DataView(a));var f=Xd(1936286840,a);if(-1==f)throw new q(3,3004);var g=Rd(a);S(a,3);S(a,4);var h=R(a);if(!h)throw new q(3,3005);var m,n;g?(m=Ud(a),n=Ud(a)):(m=R(a),n=R(a));S(a,2);g=Td(a);d=m-d;b=b+f+n;for(f=0;f<g;f++){m=R(a);n=(m&2147483648)>>>31;m&=2147483647;var r=R(a);S(a,4);if(1==n)throw new q(3,3006);e.push(new G(e.length,d/h,(d+r)/h,function(){return c},b,b+m-1));d+=r;b+=m}return e};function T(a){this.a=a}l("shaka.media.SegmentIndex",T);T.prototype.o=function(){this.a=null;return Promise.resolve()};T.prototype.destroy=T.prototype.o;T.prototype.find=function(a){for(var b=this.a.length-1;0<=b;--b){var c=this.a[b];if(a>=c.startTime&&a<c.endTime)return c.position}return null};T.prototype.find=T.prototype.find;T.prototype.get=function(a){if(!this.a.length)return null;a-=this.a[0].position;return 0>a||a>=this.a.length?null:this.a[a]};T.prototype.get=T.prototype.get;
T.prototype.Wa=function(a){for(var b=[],c=0,d=0;c<this.a.length&&d<a.length;){var e=this.a[c],f=a[d];e.startTime<f.startTime?(b.push(e),c++):(e.startTime>f.startTime||(.1<Math.abs(e.endTime-f.endTime)?b.push(f):b.push(e),c++),d++)}for(;c<this.a.length;)b.push(this.a[c++]);if(b.length)for(c=b[b.length-1].position+1;d<a.length;)f=a[d++],f=new G(c++,f.startTime,f.endTime,f.a,f.L,f.D),b.push(f);else b=a;this.a=b};T.prototype.merge=T.prototype.Wa;
T.prototype.Ra=function(a){for(var b=0;b<this.a.length&&!(this.a[b].endTime>a);++b);this.a.splice(0,b)};T.prototype.evict=T.prototype.Ra;function $d(a){this.b=a;this.a=new Od(a);ae||(ae=[new Uint8Array([255]),new Uint8Array([127,255]),new Uint8Array([63,255,255]),new Uint8Array([31,255,255,255]),new Uint8Array([15,255,255,255,255]),new Uint8Array([7,255,255,255,255,255]),new Uint8Array([3,255,255,255,255,255,255]),new Uint8Array([1,255,255,255,255,255,255,255])])}var ae;
function be(a){var b;b=ce(a);if(7<b.length)throw new q(3,3002);for(var c=0,d=0;d<b.length;d++)c=256*c+b[d];b=c;c=ce(a);a:{for(d=0;d<ae.length;d++)if($a(c,ae[d])){d=!0;break a}d=!1}if(d)c=a.b.byteLength-a.a.a;else{if(8==c.length&&c[1]&224)throw new q(3,3001);for(var d=c[0]&(1<<8-c.length)-1,e=1;e<c.length;e++)d=256*d+c[e];c=d}c=a.a.a+c<=a.b.byteLength?c:a.b.byteLength-a.a.a;d=new DataView(a.b.buffer,a.b.byteOffset+a.a.a,c);S(a.a,c);return new de(b,d)}
function ce(a){var b=Rd(a.a),c;for(c=1;8>=c&&!(b&1<<8-c);c++);if(8<c)throw new q(3,3002);var d=new Uint8Array(c);d[0]=b;for(b=1;b<c;b++)d[b]=Rd(a.a);return d}function de(a,b){this.id=a;this.a=b}function ee(a){if(8<a.a.byteLength)throw new q(3,3002);if(8==a.a.byteLength&&a.a.getUint8(0)&224)throw new q(3,3001);for(var b=0,c=0;c<a.a.byteLength;c++)var d=a.a.getUint8(c),b=256*b+d;return b};function fe(a,b,c,d,e,f){function g(){return e}var h=[];a=new $d(a.a);for(var m=-1,n=-1;Qd(a.a);){var r=be(a);if(187==r.id){var u=ge(r);u&&(r=c*(u.Yc-f),u=b+u.wc,0<=m&&h.push(new G(h.length,m,r,g,n,u-1)),m=r,n=u)}}0<=m&&h.push(new G(h.length,m,d,g,n,null));return h}function ge(a){var b=new $d(a.a);a=be(b);if(179!=a.id)throw new q(3,3013);a=ee(a);b=be(b);if(183!=b.id)throw new q(3,3012);for(var b=new $d(b.a),c=0;Qd(b.a);){var d=be(b);if(241==d.id){c=ee(d);break}}return{Yc:a,wc:c}};function he(a,b){var c=Nd(a,b,"Initialization");if(!c)return null;var d=a.u.M,e=c.getAttribute("sourceURL");e&&(d=P(a.u.M,[e]));var e=0,f=null;if(c=N(c,"range",yd))e=c.start,f=c.end;return new Vb(function(){return d},e,f)}
function ie(a,b){var c=Q(a,je,"presentationTimeOffset"),d=he(a,je),e;e=Number(c);var f=a.u.mimeType.split("/")[1];if("text"!=a.u.contentType&&"mp4"!=f&&"webm"!=f)throw new q(4,4006);if("webm"==f&&!d)throw new q(4,4005);var g=Nd(a,je,"RepresentationIndex"),h=Q(a,je,"indexRange"),m=a.u.M,h=yd(h||"");if(g){var n=g.getAttribute("sourceURL");n&&(m=P(a.u.M,[n]));h=N(g,"range",yd,h)}if(!h)throw new q(4,4002);e=ke(a,b,d,m,h.start,h.end,f,e);return{createSegmentIndex:e.createSegmentIndex,findSegmentPosition:e.findSegmentPosition,
getSegmentReference:e.getSegmentReference,initSegmentReference:d,presentationTimeOffset:Number(c)||0}}
function ke(a,b,c,d,e,f,g,h){var m=a.presentationTimeline,n=a.H.start,r=a.H.duration,u=b,A=null;return{createSegmentIndex:function(){var b=[u(d,e,f),"webm"==g?u(c.a(),c.L,c.D):null];u=null;return Promise.all(b).then(function(b){var c,f=b[0];b=b[1]||null;if("mp4"==g)f=Zd(f,e,d,h);else{b=new $d(new DataView(b));if(440786851!=be(b).id)throw new q(3,3008);var u=be(b);if(408125543!=u.id)throw new q(3,3009);b=u.a.byteOffset;u=new $d(u.a);for(c=null;Qd(u.a);){var x=be(u);if(357149030==x.id){c=x;break}}if(!c)throw new q(3,
3010);u=new $d(c.a);c=1E6;for(x=null;Qd(u.a);){var ob=be(u);if(2807729==ob.id)c=ee(ob);else if(17545==ob.id)if(x=ob,4==x.a.byteLength)x=x.a.getFloat32(0);else if(8==x.a.byteLength)x=x.a.getFloat64(0);else throw new q(3,3003);}if(null==x)throw new q(3,3011);u=c/1E9;c=x*u;f=be(new $d(new DataView(f)));if(475249515!=f.id)throw new q(3,3007);f=fe(f,b,u,c,d,h)}Ld(a.Qa,r,f);m.Ea(n,f);A=new T(f)})},findSegmentPosition:function(a){return A.find(a)},getSegmentReference:function(a){return A.get(a)}}}
function je(a){return a.Ga};function le(a,b){var c=he(a,me),d;d=ne(a);var e=Md(a,me),f=e.ia;f||(f=1);var g=0;e.F?g=e.F*(f-1)-e.presentationTimeOffset:e.B&&0<e.B.length&&(g=e.B[0].start);d={F:e.F,startTime:g,ia:f,presentationTimeOffset:e.presentationTimeOffset,B:e.B,ua:d};if(!d.F&&!d.B&&1<d.ua.length)throw new q(4,4002);if(!d.F&&!a.H.duration&&!d.B&&1==d.ua.length)throw new q(4,4002);if(d.B&&!d.B.length)throw new q(4,4002);f=e=null;a.K.id&&a.u.id&&(f=a.K.id+","+a.u.id,e=b[f]);g=oe(a.H.duration,d.ia,a.u.M,d);Ld(a.Qa,a.H.duration,
g);e?(e.Wa(g),e.Ra(a.presentationTimeline.sa()-a.H.start)):(a.presentationTimeline.Ea(a.H.start,g),e=new T(g),f&&(b[f]=e));return{createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:e.find.bind(e),getSegmentReference:e.get.bind(e),initSegmentReference:c,presentationTimeOffset:d.presentationTimeOffset}}function me(a){return a.$}
function oe(a,b,c,d){var e=d.ua.length;d.B&&d.B.length!=d.ua.length&&(e=Math.min(d.B.length,d.ua.length));for(var f=[],g=d.startTime,h=0;h<e;h++){var m=d.ua[h],n=P(c,[m.ac]),r;r=null!=d.F?g+d.F:d.B?d.B[h].end:g+a;f.push(new G(h+b,g,r,function(a){return a}.bind(null,n),m.start,m.end));g=r}return f}
function ne(a){return[a.u.$,a.P.$,a.K.$].filter(Da).map(function(a){return M(a,"SegmentURL")}).reduce(function(a,c){return 0<a.length?a:c}).map(function(a){var c=a.getAttribute("media");a=N(a,"mediaRange",yd,{start:0,end:null});return{ac:c,start:a.start,end:a.end}})};function pe(a,b,c,d){var e=qe(a),f;f=Md(a,re);var g=Q(a,re,"media"),h=Q(a,re,"index");f={F:f.F,Ia:f.Ia,ia:f.ia,presentationTimeOffset:f.presentationTimeOffset,B:f.B,Va:g,Da:h};g=0+(f.Da?1:0);g+=f.B?1:0;g+=f.F?1:0;if(!g)throw new q(4,4002);1!=g&&(f.Da&&(f.B=null),f.F=null);if(!f.Da&&!f.Va)throw new q(4,4002);if(f.Da){c=a.u.mimeType.split("/")[1];if("mp4"!=c&&"webm"!=c)throw new q(4,4006);if("webm"==c&&!e)throw new q(4,4005);d=Kd(f.Da,a.u.id,null,a.bandwidth||null,null);d=P(a.u.M,[d]);a=ke(a,b,e,d,
0,null,c,f.presentationTimeOffset)}else f.F?(d||a.presentationTimeline.Xa(f.F),a=se(a,f)):(d=b=null,a.K.id&&a.u.id&&(d=a.K.id+","+a.u.id,b=c[d]),g=te(a,f),Ld(a.Qa,a.H.duration,g),b?(b.Wa(g),b.Ra(a.presentationTimeline.sa()-a.H.start)):(a.presentationTimeline.Ea(a.H.start,g),b=new T(g),d&&(c[d]=b)),a={createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:b.find.bind(b),getSegmentReference:b.get.bind(b)});return{createSegmentIndex:a.createSegmentIndex,findSegmentPosition:a.findSegmentPosition,
getSegmentReference:a.getSegmentReference,initSegmentReference:e,presentationTimeOffset:f.presentationTimeOffset}}function re(a){return a.Ha}function se(a,b){var c=a.H.duration,d=b.F,e=b.ia,f=b.Ia,g=b.Va,h=a.bandwidth||null,m=a.u.id,n=a.u.M;return{createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(a){return 0>a||c&&a>=c?null:Math.floor(a/d)},getSegmentReference:function(a){var b=a*d;return new G(a,b,b+d,function(){var c=Kd(g,m,a+e,h,b*f);return P(n,[c])},0,null)}}}
function te(a,b){for(var c=[],d=0;d<b.B.length;d++){var e=b.B[d].start,f=d+b.ia;c.push(new G(f,e,b.B[d].end,function(a,b,c,d,e,f){a=Kd(a,b,e,c,f);return P(d,[a]).map(function(a){return a.toString()})}.bind(null,b.Va,a.u.id,a.bandwidth||null,a.u.M,f,(e+b.presentationTimeOffset)*b.Ia),0,null))}return c}function qe(a){var b=Q(a,re,"initialization");if(!b)return null;var c=a.u.id,d=a.bandwidth||null,e=a.u.M;return new Vb(function(){var a=Kd(b,c,null,d,null);return P(e,[a])},0,null)};function ue(){this.m=this.l=this.j=this.c=this.a=null;this.g=[];this.b=null;this.h=[];this.v=1;this.i={};this.s=0;this.f=null;this.Ja=this.Ja.bind(this)}k=ue.prototype;k.configure=function(a){this.c=a};k.start=function(a,b,c,d,e){this.g=[a];this.a=b;this.j=c;this.l=d;this.m=e;return ve(this).then(function(){this.a&&we(this,0);return this.b}.bind(this))};
k.stop=function(){this.a&&this.a.Jb(this.Ja);this.c=this.m=this.l=this.j=this.a=null;this.g=[];this.b=null;this.h=[];this.i={};null!=this.f&&(window.clearTimeout(this.f),this.f=null);return Promise.resolve()};function ve(a){return a.a.request(0,Ha(a.g,a.c.retryParameters)).then(function(a){if(this.a)return xe(this,a.data,a.uri)}.bind(a))}
function xe(a,b,c){var d=D(b),e=new DOMParser,f=null;b=null;try{f=e.parseFromString(d,"text/xml")}catch(A){}f&&"MPD"==f.documentElement.tagName&&(b=f.documentElement);if(!b)throw new q(4,4001);c=[c];d=M(b,"Location").map(wd).filter(Da);0<d.length&&(c=a.g=d);d=M(b,"BaseURL").map(wd);c=P(c,d);var g=N(b,"minBufferTime",O);a.s=N(b,"minimumUpdatePeriod",O,-1);var h=N(b,"availabilityStartTime",xd),d=N(b,"timeShiftBufferDepth",O),m=N(b,"suggestedPresentationDelay",O),e=N(b,"maxSegmentDuration",O),f=b.getAttribute("type")||
"static",n;if(a.b)n=a.b.presentationTimeline;else{var r=Math.max(10,1.5*g);n=new F(h,null!=m?m:r)}var h=ye(a,{Qa:"static"!=f,presentationTimeline:n,K:null,H:null,P:null,u:null,bandwidth:void 0},c,b),m=h.duration,u=h.periods;n.Hb("static"==f);n.za(m||Infinity);n.Gb(null!=d?d:Infinity);n.Xa(e||1);if(a.b)return Promise.resolve();b=M(b,"UTCTiming");d=n.U();h.Y&&a.a.yb(a.Ja);return ze(a,c,b,d).then(function(a){this.a&&(n.Eb(a),this.b={presentationTimeline:n,periods:u,offlineSessionIds:[],minBufferTime:g||
0})}.bind(a))}
function ye(a,b,c,d){var e=N(d,"mediaPresentationDuration",O),f=[],g=0;d=M(d,"Period");for(var h=0;h<d.length;h++){var m=d[h],g=N(m,"start",O,g),n=N(m,"duration",O);if(null==n)if(h+1!=d.length){var r=N(d[h+1],"start",O);null!=r&&(n=r-g)}else null!=e&&(n=e-g);var m={start:g,duration:n,node:m,Y:!1},u=a,A=b,r=m;A.K=Ae(r.node,null,c);A.H=r;A.K.id||(A.K.id="__shaka_period_"+r.start);u=M(r.node,"AdaptationSet").map(u.qc.bind(u,A));if(!u.length)throw new q(4,4004);for(A=0;A<u.length;A++)u[A].Y&&(r.Y=!0);
u=Be(u);r={startTime:r.start,streamSets:u};f.push(r);u=b.K.id;a.h.every(Ea(u))&&(a.j(r),a.h.push(u),a.b&&a.b.periods.push(r));if(null==n){g=null;break}g+=n}return null!=e?{periods:f,duration:e,Y:m.Y}:{periods:f,duration:g,Y:m.Y}}
k.qc=function(a,b){a.P=Ae(b,a.K,null);var c=!1,d=M(b,"Role"),e=void 0;"text"==a.P.contentType&&(e="subtitle");for(var f=0;f<d.length;f++){var g=d[f].getAttribute("schemeIdUri");if(null==g||"urn:mpeg:dash:role:2011"==g)switch(g=d[f].getAttribute("value"),g){case "main":c=!0;break;case "caption":case "subtitle":e=g}}var d=!!vd(b,"InbandEventStream"),h=[];M(b,"SupplementalProperty").forEach(function(a){"http://dashif.org/descriptor/AdaptationSetSwitching"==a.getAttribute("schemeIdURI")&&(a=a.getAttribute("value"))&&
h.push.apply(h,a.split(","))});f=M(b,"ContentProtection");f=Dd(f,this.c.dash.customScheme);g=Dc(b.getAttribute("lang")||"und");e=M(b,"Representation").map(this.rc.bind(this,a,f,e,g)).filter(function(a){return!!a});if(!e.length)throw new q(4,4003);if(!a.P.contentType){var m=e[0].mimeType,n=e[0].codecs,r=m;n&&(r+='; codecs="'+n+'"');a.P.contentType=E[r]?"text":m.split("/")[0]}return{id:a.P.id||"__fake__"+this.v++,contentType:a.P.contentType,language:g,$b:c,streams:e,drmInfos:f.drmInfos,Vc:h,Y:d}};
k.rc=function(a,b,c,d,e){a.u=Ae(e,a.P,null);if(!Ce(a.u))return null;a.bandwidth=N(e,"bandwidth",Ad)||void 0;var f;f=this.yc.bind(this);if(a.u.Ga)f=ie(a,f);else if(a.u.$)f=le(a,this.i);else if(a.u.Ha)f=pe(a,f,this.i,!!this.b);else{var g=a.u.M,h=a.H.duration||0;f={createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(a){return 0<=a&&a<h?1:null},getSegmentReference:function(a){return 1!=a?null:new G(1,0,h,function(){return g},0,null)},initSegmentReference:null,presentationTimeOffset:0}}e=
M(e,"ContentProtection");e=Id(e,this.c.dash.customScheme,b);return{id:this.v++,createSegmentIndex:f.createSegmentIndex,findSegmentPosition:f.findSegmentPosition,getSegmentReference:f.getSegmentReference,initSegmentReference:f.initSegmentReference,presentationTimeOffset:f.presentationTimeOffset,mimeType:a.u.mimeType,codecs:a.u.codecs,bandwidth:a.bandwidth,width:a.u.width,height:a.u.height,kind:c,encrypted:0<b.drmInfos.length,keyId:e,language:d,allowedByApplication:!0,allowedByKeySystem:!0}};
k.Pc=function(){this.f=null;var a=Date.now();ve(this).then(function(){this.a&&we(this,(Date.now()-a)/1E3)}.bind(this))["catch"](function(a){this.l(a);this.a&&we(this,0)}.bind(this))};function we(a,b){0>a.s||(a.f=window.setTimeout(a.Pc.bind(a),1E3*Math.max(Math.max(3,a.s)-b,0)))}
function Ae(a,b,c){b=b||{contentType:"",mimeType:"",codecs:""};c=c||b.M;var d=M(a,"BaseURL").map(wd),e=a.getAttribute("contentType")||b.contentType,f=a.getAttribute("mimeType")||b.mimeType;e||(e=f.split("/")[0]);return{M:P(c,d),Ga:vd(a,"SegmentBase")||b.Ga,$:vd(a,"SegmentList")||b.$,Ha:vd(a,"SegmentTemplate")||b.Ha,width:N(a,"width",Bd)||b.width,height:N(a,"height",Bd)||b.height,contentType:e,mimeType:f,codecs:a.getAttribute("codecs")||b.codecs,id:a.getAttribute("id")}}
function Be(a){var b={};a.forEach(function(a){b[a.id]=[a]});a.forEach(function(a){var c=b[a.id];a.Vc.forEach(function(a){(a=b[a])&&a!=c&&(c.push.apply(c,a),a.forEach(function(a){b[a.id]=c}))})});var c=[],d=[];C(b).forEach(function(a){if(!(0<=d.indexOf(a))){d.push(a);var b=new Ja;a.forEach(function(a){b.push(a.contentType||"",a)});b.keys().forEach(function(a){var d=new Ja;b.get(a).forEach(function(a){d.push(a.language,a)});d.keys().forEach(function(b){var e=d.get(b);b={language:b,type:a,primary:e.some(function(a){return a.$b}),
drmInfos:e.map(function(a){return a.drmInfos}).reduce(t,[]),streams:e.map(function(a){return a.streams}).reduce(t,[])};c.push(b)})})}});return c}function Ce(a){var b;b=0+(a.Ga?1:0);b+=a.$?1:0;b+=a.Ha?1:0;if(!b)return"text"==a.contentType||"application"==a.contentType?!0:!1;1!=b&&(a.Ga&&(a.$=null),a.Ha=null);return!0}
function De(a,b,c,d){b=P(b,[c]);b=Ha(b,a.c.retryParameters);b.method=d;return a.a.request(0,b).then(function(a){if("HEAD"==d){if(!a.headers||!a.headers.date)return 0;a=a.headers.date}else a=D(a.data);a=Date.parse(a);return isNaN(a)?0:a-Date.now()})}
function ze(a,b,c,d){c=c.map(function(a){return{scheme:a.getAttribute("schemeIdUri"),value:a.getAttribute("value")}});var e=a.c.dash.clockSyncUri;d&&!c.length&&e&&c.push({scheme:"urn:mpeg:dash:utc:http-head:2014",value:e});return Ca(c,function(a){var c=a.value;switch(a.scheme){case "urn:mpeg:dash:utc:http-head:2014":case "urn:mpeg:dash:utc:http-head:2012":return De(this,b,c,"HEAD");case "urn:mpeg:dash:utc:http-xsdate:2014":case "urn:mpeg:dash:utc:http-iso:2014":case "urn:mpeg:dash:utc:http-xsdate:2012":case "urn:mpeg:dash:utc:http-iso:2012":return De(this,
b,c,"GET");case "urn:mpeg:dash:utc:direct:2014":case "urn:mpeg:dash:utc:direct:2012":return a=Date.parse(c),isNaN(a)?0:a-Date.now();case "urn:mpeg:dash:utc:http-ntp:2014":case "urn:mpeg:dash:utc:ntp:2014":case "urn:mpeg:dash:utc:sntp:2014":return Promise.reject();default:return Promise.reject()}}.bind(a))["catch"](function(){return 0})}k.yc=function(a,b,c){a=Ha(a,this.c.retryParameters);null!=b&&(a.headers.Range="bytes="+b+"-"+(null!=c?c:""));return this.a.request(1,a).then(function(a){return a.data})};
k.Ja=function(a,b){if(1==a){var c=new Od(new DataView(b.data)),d=Xd(1701671783,c);if(-1!=d){var e=c.a-8+d;S(c,4);d=Wd(c);if("urn:mpeg:dash:event:2012"==d)ve(this);else{var f=Wd(c),g=R(c),h=R(c),m=R(c),n=R(c),c=Vd(c,e-c.a);this.m(new H("emsg",{detail:{hd:d,value:f,Ia:g,gd:h,ed:m,id:n,fd:c}}))}}}};sb.mpd=ue;rb["application/dash+xml"]=ue;function U(a,b){var c=D(a),d=[],e=new DOMParser,f=null;try{f=e.parseFromString(c,"text/xml")}catch(n){throw new q(2,2005);}if(f){var g,h;if(c=f.getElementsByTagName("tt")[0])e=c.getAttribute("ttp:frameRate"),f=c.getAttribute("ttp:subFrameRate"),g=c.getAttribute("ttp:frameRateMultiplier"),h=c.getAttribute("ttp:tickRate");else throw new q(2,2006);e=new Ee(e,f,g,h);f=U.b(c.getElementsByTagName("styling")[0]);g=U.b(c.getElementsByTagName("layout")[0]);c=U.b(c.getElementsByTagName("body")[0]);for(h=0;h<
c.length;h++){var m=U.c(c[h],b,e,f,g);m&&d.push(m)}}return d}U.l=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/;U.s=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/;U.m=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d{2,})$/;U.v=/^(\d*\.?\d*)f$/;U.A=/^(\d*\.?\d*)t$/;U.w=/^(?:(\d*\.?\d*)h)?(?:(\d*\.?\d*)m)?(?:(\d*\.?\d*)s)?(?:(\d*\.?\d*)ms)?$/;U.j=/^(\d{1,2}|100)% (\d{1,2}|100)%$/;
U.b=function(a){var b=[];if(!a)return b;for(var c=a.childNodes,d=0;d<c.length;d++){var e="span"==c[d].nodeName&&"p"==a.nodeName;c[d].nodeType!=Node.ELEMENT_NODE||"br"==c[d].nodeName||e||(e=U.b(c[d]),b=b.concat(e))}b.length||b.push(a);return b};
U.c=function(a,b,c,d,e){if(!a.hasAttribute("begin")&&!a.hasAttribute("end")&&""==a.textContent)return null;var f=U.a(a.getAttribute("begin"),c),g=U.a(a.getAttribute("end"),c);c=U.a(a.getAttribute("dur"),c);var h=a.textContent;null==g&&null!=c&&(g=f+c);if(null==f||null==g)throw new q(2,2001);b=wb(f+b,g+b,h);if(!b)return null;e=U.h(a,"region",e);U.na(b,a,e,d);return b};
U.na=function(a,b,c,d){var e,f=U.f(b,c,d,"tts:textAlign");f&&(a.b=f);if(f=U.f(b,c,d,"tts:extent"))if(e=U.j.exec(f))a.size=Number(e[1]);e=U.f(b,c,d,"tts:writingMode");f=!0;"tb"==e||"tblr"==e?a.c="lr":"tbrl"==e?a.c="rl":f=!1;if(b=U.f(b,c,d,"tts:origin"))if(e=U.j.exec(b))f?(a.position=Number(e[2]),a.a=Number(e[1])):(a.position=Number(e[1]),a.a=Number(e[2]))};
U.f=function(a,b,c,d){for(var e=U.b(b),f=0;f<e.length;f++){var g=e[f].getAttribute(d);if(g)return g}e=U.h;return(a=e(b,"style",c)||e(a,"style",c))?a.getAttribute(d):null};U.h=function(a,b,c){if(!a||1>c.length)return null;var d=null;if(a=U.oa(a,b))for(b=0;b<c.length;b++)if(c[b].getAttribute("xml:id")==a){d=c[b];break}return d};U.oa=function(a,b){for(var c=null;a&&!(c=a.getAttribute(b));){var d=a.parentNode;if(d instanceof Element)a=d;else break}return c};
U.a=function(a,b){var c=null;U.l.test(a)?c=U.pa(b,a):U.s.test(a)?c=U.g(U.s,a):U.m.test(a)?c=U.g(U.m,a):U.v.test(a)?c=U.Aa(b,a):U.A.test(a)?c=U.Ba(b,a):U.w.test(a)&&(c=U.g(U.w,a));return c};U.Aa=function(a,b){var c=U.v.exec(b);return Number(c[1])/a.a};U.Ba=function(a,b){var c=U.A.exec(b);return Number(c[1])/a.b};U.pa=function(a,b){var c=U.l.exec(b),d=Number(c[1]),e=Number(c[2]),f=Number(c[3]),g=Number(c[4]),g=g+(Number(c[5])||0)/a.c,f=f+g/a.a;return f+60*e+3600*d};
U.g=function(a,b){var c=a.exec(b);return c&&""!=c[0]?(Number(c[4])||0)/1E3+(Number(c[3])||0)+60*(Number(c[2])||0)+3600*(Number(c[1])||0):null};function Ee(a,b,c,d){this.a=Number(a)||30;this.c=Number(b)||1;this.b=Number(d);this.b||(this.b=a?this.a*this.c:1);c&&(a=/^(\d+) (\d+)$/g.exec(c))&&(this.a*=a[1]/a[2])}E["application/ttml+xml"]=U;function Fe(a,b){var c=new Od(new DataView(a)),d=Xd(1835295092,c);if(-1!=d)return U(Vd(c,d-8).buffer,b);if(-1!=Yd(a,Fe.J))return[];throw new q(2,2007);}Fe.J=1937010800;E['application/mp4; codecs="stpp"']=Fe;function Ge(a){this.b=a;this.a=0}function He(a,b){var c;b.lastIndex=a.a;c=(c=b.exec(a.b))?{position:c.index,length:c[0].length,Bc:c}:null;if(a.a==a.b.length||!c||c.position!=a.a)return null;a.a+=c.length;return c.Bc}function Ie(a){return a.a==a.b.length?null:(a=He(a,/[^ \t\n]*/gm))?a[0]:null};function V(a,b){var c=D(a),c=c.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n"),c=c.split(/\n{2,}/m);if(!/^WEBVTT($|[ \t\n])/m.test(c[0]))throw new q(2,2E3);for(var d=[],e=1;e<c.length;e++){var f=V.c(c[e].split("\n"),b);f&&d.push(f)}return d}
V.c=function(a,b){if(1==a.length&&!a[0]||/^NOTE($|[ \t])/.test(a[0]))return null;var c=null;0>a[0].indexOf("--\x3e")&&(c=a[0],a.splice(0,1));var d=new Ge(a[0]),e=V.a(d),f=He(d,/[ \t]+--\x3e[ \t]+/g),g=V.a(d);if(null==e||!f||null==g)throw new q(2,2001);e=wb(e+b,g+b,a.slice(1).join("\n").trim());if(!e)return null;He(d,/[ \t]+/gm);for(f=Ie(d);f;){if(!V.i(e,f))throw new q(2,2002);He(d,/[ \t]+/gm);f=Ie(d)}null!=c&&(e.id=c);return e};
V.i=function(a,b){var c;if(c=/^align:(start|middle|end|left|right)$/.exec(b))a.align=c[1];else if(c=/^vertical:(lr|rl)$/.exec(b))a.c=c[1];else if(c=/^size:(\d{1,2}|100)%$/.exec(b))a.size=Number(c[1]);else if(c=/^position:(\d{1,2}|100)%(?:,(line-left|line-right|center|start|end))?$/.exec(b))a.position=Number(c[1]),c[2]&&(a.g=c[2]);else if(c=/^line:(\d{1,2}|100)%(?:,(start|end|center))?$/.exec(b))a.f=!1,a.a=Number(c[1]),c[2]&&(a.b=c[2]);else if(c=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(b))a.f=
!0,a.a=Number(c[1]),c[2]&&(a.b=c[2]);else return!1;return!0};V.a=function(a){a=He(a,/(?:(\d{2,}):)?(\d{2}):(\d{2})\.(\d{3})/g);if(!a)return null;var b=Number(a[2]),c=Number(a[3]);return 59<b||59<c?null:Number(a[4])/1E3+c+60*b+3600*(Number(a[1])||0)};E["text/vtt"]=V;E['text/vtt; codecs="vtt"']=V;function W(a,b,c,d){var e=new Od(new DataView(a)),f=Xd(1835295092,e);if(-1!=f)return W.qa(Vd(e,f-8).buffer,b,c,d);if(-1!=Yd(a,W.ma))return[];throw new q(2,2008);}W.qa=function(a,b,c,d){a=new Od(new DataView(a));c+=b;d+=b;for(b=[];Qd(a);){var e=Xd(W.X,a);if(-1==e)break;(e=W.c(Vd(a,e-8).buffer,c,d))&&b.push(e)}return b};
W.c=function(a,b,c){a=new Od(new DataView(a));for(var d,e,f;Qd(a);){var g=R(a),h=R(a),m=D(Vd(a,g-8).buffer);1==g&&Ud(a);switch(h){case W.G:d=m;break;case W.C:f=m;break;case W.S:e=m}}if(!d)throw new q(2,2008);b=wb(b,c,d);if(!b)return null;f&&(b.id=f);if(e)for(e=new Ge(e),f=Ie(e);f;){if(!V.i(b,f))throw new q(2,2002);He(e,/[ \t]+/gm);f=Ie(e)}return b};W.ma=2004251764;W.X=1987343459;W.G=1885436268;W.C=1768187247;W.S=1937011815;E['application/mp4; codecs="wvtt"']=W;Fa.data=function(a){return new Promise(function(b){var c=a.split(":");if(2>c.length||"data"!=c[0])throw new q(1,1004,a);c=c.slice(1).join(":").split(",");if(2>c.length)throw new q(1,1004,a);var d=c[0],c=window.decodeURIComponent(c.slice(1).join(",")),d=d.split(";"),e=null;1<d.length&&(e=d[1]);if("base64"==e)c=Xa(c).buffer;else{if(e)throw new q(1,1005,a);c=Sa(c)}b({uri:a,data:c,headers:{}})})};function Je(a,b){return new Promise(function(c,d){var e=new XMLHttpRequest;e.open(b.method,a,!0);e.responseType="arraybuffer";e.timeout=b.retryParameters.timeout;e.withCredentials=b.allowCrossSiteCredentials;e.onload=function(b){b=b.target;if(200<=b.status&&299>=b.status){var e=b.getAllResponseHeaders().split("\r\n").reduce(function(a,b){var c=b.split(": ");a[c[0].toLowerCase()]=c.slice(1).join(": ");return a},{});b.Ac&&(a=b.Ac);c({uri:a,data:b.response,headers:e})}else{e=null;try{e=Ra(b.response)}catch(f){}d(new q(1,
1001,a,b.status,e))}};e.onerror=function(){d(new q(1,1002,a))};e.ontimeout=function(){d(new q(1,1003,a))};for(var f in b.headers)e.setRequestHeader(f,b.headers[f]);e.send(b.body)})}Fa.http=Je;Fa.https=Je;function Ke(){this.a=null;this.c=[];this.b={}}k=Ke.prototype;
k.init=function(a){if(!window.indexedDB)return Promise.reject(new q(9,9E3));var b=window.indexedDB.open("shaka_offline_db",1),c=new w;b.onupgradeneeded=function(b){b=b.target.result;for(var c in a)b.createObjectStore(c,{keyPath:a[c]})};b.onsuccess=function(a){this.a=a.target.result;c.resolve()}.bind(this);b.onerror=Le.bind(null,b,c);return c.then(function(){var b=Object.keys(a);return Promise.all(b.map(function(a){return Me(this,a).then(function(b){this.b[a]=b}.bind(this))}.bind(this)))}.bind(this))};
k.o=function(){return Promise.all(this.c.map(function(a){try{a.transaction.abort()}catch(b){}return a.I["catch"](v)})).then(function(){this.a&&(this.a.close(),this.a=null)}.bind(this))};k.get=function(a,b){return Ne(this,a,"readonly",function(a){return a.get(b)})};k.forEach=function(a,b){return Ne(this,a,"readonly",function(a){return a.openCursor()},function(a){a&&(b(a.value),a["continue"]())})};function Oe(a,b,c){return Ne(a,b,"readwrite",function(a){return a.put(c)})}
k.remove=function(a,b){return Ne(this,a,"readwrite",function(a){return a["delete"](b)})};function Pe(a,b){var c=[];return Ne(a,"segment","readwrite",function(a){return a.openCursor()},function(a){if(a){if(b(a.value)){var e=a["delete"](),f=new w;e.onsuccess=f.resolve;e.onerror=Le.bind(null,e,f);c.push(f)}a["continue"]()}}).then(function(){return Promise.all(c)}).then(function(){return c.length})}
function Me(a,b){var c=0;return Ne(a,b,"readonly",function(a){return a.openCursor(null,"prev")},function(a){a&&(c=a.key+1)}).then(function(){return c})}
function Ne(a,b,c,d,e){c=a.a.transaction([b],c);var f=d(c.objectStore(b)),g=new w;e&&(f.onsuccess=function(a){e(a.target.result)});f.onerror=Le.bind(null,f,g);var h={transaction:c,I:g};a.c.push(h);var m=function(){this.c.splice(this.c.indexOf(h),1)}.bind(a);c.oncomplete=function(){m();g.resolve(f.result)};c.onerror=function(a){m();Le(f,g,a)};return g}function Le(a,b,c){"AbortError"==a.error.name?b.reject(new q(9,9002)):b.reject(new q(9,9001,a.error));c.preventDefault()};var Qe={manifest:"key",segment:"key"};function Re(a){return{offlineUri:"offline:"+a.key,originalManifestUri:a.originalManifestUri,duration:a.duration,size:a.size,tracks:a.periods[0].streams.map(function(a){return{id:a.id,active:!1,type:a.contentType,bandwidth:0,language:a.language,kind:a.kind||null,width:a.width,height:a.height}}),appMetadata:a.appMetadata}};function Se(){}Se.prototype.configure=function(){};Se.prototype.start=function(a){var b=/^offline:([0-9]+)$/.exec(a);if(!b)return Promise.reject(new q(1,9004,a));var c=Number(b[1]),d=new Ke;return d.init(Qe).then(function(){return d.get("manifest",c)}).then(function(a){if(!a)throw new q(9,9003,c);return Te(a)}).then(function(a){return d.o().then(function(){return a})},function(a){return d.o().then(function(){throw a;})})};Se.prototype.stop=function(){return Promise.resolve()};
function Te(a){var b=new F(null,0);b.za(a.duration);var c=a.drmInfo?[a.drmInfo]:[];return{presentationTimeline:b,minBufferTime:10,offlineSessionIds:a.sessionIds,periods:a.periods.map(function(a){return{startTime:a.startTime,streamSets:a.streams.map(function(e){var f=e.segments.map(function(a,b){return new G(b,a.startTime,a.endTime,function(){return[a.uri]},0,null)});b.Ea(a.startTime,f);f=new T(f);return{language:e.language,type:e.contentType,primary:e.primary,drmInfos:c,streams:[{id:e.id,createSegmentIndex:Promise.resolve.bind(Promise),
findSegmentPosition:f.find.bind(f),getSegmentReference:f.get.bind(f),initSegmentReference:e.initSegmentUri?new Vb(function(){return[e.initSegmentUri]},0,null):null,presentationTimeOffset:e.presentationTimeOffset,mimeType:e.mimeType,codecs:e.codecs,bandwidth:0,width:e.width||void 0,height:e.height||void 0,kind:e.kind,encrypted:e.encrypted,keyId:e.keyId,allowedByApplication:!0,allowedByKeySystem:!0}]}})}})}}rb["application/x-offline-manifest"]=Se;Fa.offline=function(a){if(/^offline:([0-9]+)$/.exec(a)){var b={uri:a,data:new ArrayBuffer(0),headers:{"content-type":"application/x-offline-manifest"}};return Promise.resolve(b)}if(b=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(a)){var c=Number(b[1]),d=new Ke;return d.init(Qe).then(function(){return d.get("segment",c)}).then(function(b){return d.o().then(function(){if(!b)throw new q(9,9003,c);return{uri:a,data:b.data,headers:{}}})})}return Promise.reject(new q(1,9004,a))};function Ue(a,b,c){this.b={};this.i=c;this.m=a;this.l=b;this.j=this.a=null;this.f=this.g=this.h=this.c=0}Ue.prototype.o=function(){var a=this.j||Promise.resolve();this.b={};this.j=this.a=this.l=this.m=this.i=null;return a};function Ve(a,b,c,d,e){a.b[b]=a.b[b]||[];a.b[b].push({uris:c.a(),L:c.L,D:c.D,jb:d,Ca:e})}
function We(a,b){a.c=0;a.h=0;a.g=0;a.f=0;C(a.b).forEach(function(a){a.forEach(function(a){null!=a.D?this.c+=a.D-a.L+1:this.g+=a.jb}.bind(this))}.bind(a));a.a=b;a.a.size=a.c;var c=C(a.b).map(function(a){var b=0,c=function(){if(!this.i)return Promise.reject(new q(9,9002));if(b>=a.length)return Promise.resolve();var g=a[b++];return Xe(this,g).then(c)}.bind(this);return c()}.bind(a));a.b={};return a.j=Promise.all(c)}
function Xe(a,b){var c=Ha(b.uris,a.l);if(b.L||null!=b.D)c.headers.Range="bytes="+b.L+"-"+(null==b.D?"":b.D);var d;return a.m.request(1,c).then(function(a){if(!this.a)return Promise.reject(new q(9,9002));d=a.data.byteLength;return b.Ca(a.data)}.bind(a)).then(function(){if(!this.a)return Promise.reject(new q(9,9002));null==b.D?(this.a.size+=d,this.f+=b.jb):this.h+=d;var a=(this.h+this.f)/(this.c+this.g),c=Re(this.a);this.i.progressCallback(c,a)}.bind(a))};function X(a){this.a=new Ke;this.c=a;this.j=Ye(this);this.g=null;this.v=!1;this.i=null;this.l=[];this.f=-1;this.m=0;this.b=null;this.h=new Ue(a.h,a.getConfiguration().streaming.retryParameters,this.j)}l("shaka.offline.Storage",X);function Ze(){return!!window.indexedDB}X.support=Ze;
X.prototype.o=function(){var a=this.l,b=this.a,c=this.h?this.h.o()["catch"](function(){}).then(function(){return Promise.all(a.map(function(a){return b.remove("segment",a)}))}).then(function(){return b.o()}):Promise.resolve();this.j=this.c=this.h=this.a=null;return c};X.prototype.destroy=X.prototype.o;X.prototype.configure=function(a){zc(this.j,a,Ye(this),{},"")};X.prototype.configure=X.prototype.configure;
X.prototype.Sc=function(a,b,c){function d(a){f=a}if(this.v)return Promise.reject(new q(9,9006));this.v=!0;var e,f=null;return $e(this).then(function(){Y(this);return af(this,a,d,c)}.bind(this)).then(function(c){Y(this);this.b=c.manifest;this.g=c.Qb;if(this.b.presentationTimeline.U()||this.b.presentationTimeline.ga())throw new q(9,9005,a);this.b.periods.forEach(this.s.bind(this));this.f=this.a.b.manifest++;this.m=0;c=this.b.periods.map(this.w.bind(this));var d=this.g.b,f=ib(this.g);if(d){if(!f.length)throw new q(9,
9007,a);d.initData=[]}e={key:this.f,originalManifestUri:a,duration:this.m,size:0,periods:c,sessionIds:f,drmInfo:d,appMetadata:b};return We(this.h,e)}.bind(this)).then(function(){Y(this);if(f)throw f;return Oe(this.a,"manifest",e)}.bind(this)).then(function(){return bf(this)}.bind(this)).then(function(){return Re(e)}.bind(this))["catch"](function(a){return bf(this)["catch"](v).then(function(){throw a;})}.bind(this))};X.prototype.store=X.prototype.Sc;
X.prototype.remove=function(a){function b(a){6013!=a.code&&(e=a)}var c=a.offlineUri,d=/^offline:([0-9]+)$/.exec(c);if(!d)return Promise.reject(new q(9,9004,c));var e=null,f,g,h=Number(d[1]);return $e(this).then(function(){Y(this);return this.a.get("manifest",h)}.bind(this)).then(function(a){Y(this);if(!a)throw new q(9,9003,c);f=a;a=Te(f);g=new ab(this.c.h,b,function(){});g.configure(this.c.getConfiguration().drm);return g.init(a,!0)}.bind(this)).then(function(){return fb(g,f.sessionIds)}.bind(this)).then(function(){return g.o()}.bind(this)).then(function(){Y(this);
if(e)throw e;var b=f.periods.map(function(a){return a.streams.map(function(a){var b=a.segments.map(function(a){return Number(/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(a.uri)[1])});a.initSegmentUri&&b.push(Number(/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(a.initSegmentUri)[1]));return b}).reduce(t,[])}).reduce(t,[]),c=0,d=b.length,g=this.j.progressCallback;return Pe(this.a,function(e){e=b.indexOf(e.key);0<=e&&(g(a,c/d),c++);return 0<=e}.bind(this))}.bind(this)).then(function(){Y(this);this.j.progressCallback(a,
1);return this.a.remove("manifest",h)}.bind(this))};X.prototype.remove=X.prototype.remove;X.prototype.list=function(){var a=[];return $e(this).then(function(){Y(this);return this.a.forEach("manifest",function(b){a.push(Re(b))})}.bind(this)).then(function(){return a})};X.prototype.list=X.prototype.list;
function af(a,b,c,d){function e(){}var f=a.c.h,g=a.c.getConfiguration(),h,m,n;return ub(b,f,g.manifest.retryParameters,d).then(function(a){Y(this);n=new a;n.configure(g.manifest);return n.start(b,f,this.s.bind(this),c)}.bind(a)).then(function(a){Y(this);h=a;m=new ab(f,c,e);m.configure(g.drm);return m.init(h,!0)}.bind(a)).then(function(){Y(this);return cf(h)}.bind(a)).then(function(){Y(this);return eb(m)}.bind(a)).then(function(){Y(this);return n.stop()}.bind(a)).then(function(){Y(this);return{manifest:h,
Qb:m}}.bind(a))["catch"](function(a){if(n)return n.stop().then(function(){throw a;});throw a;})}
X.prototype.A=function(a){var b=[],c=a.filter(function(a){return"video"==a.type&&480>=a.height});c.sort(function(a,b){return b.bandwidth-a.bandwidth});c.length&&b.push(c[0]);for(var d=Dc(this.c.getConfiguration().preferredAudioLanguage),c=[0,Bc,Cc],e=a.filter(function(a){return"audio"==a.type}),c=c.map(function(a){return e.filter(function(b){b=Dc(b.language);return Ac(a,d,b)})}),f=e,g=0;g<c.length;g++)c[g].length&&(f=c[g]);f.sort(function(a,b){return a.bandwidth-b.bandwidth});f.length&&b.push(f[Math.floor(f.length/
2)]);var c=Dc(this.c.getConfiguration().preferredTextLanguage),h=Ac.bind(null,Cc,c);b.push.apply(b,a.filter(function(a){var b=Dc(a.language);return"text"==a.type&&h(b)}));return b};function Ye(a){return{trackSelectionCallback:a.A.bind(a),progressCallback:function(a,c){if(a||c)return null}}}function $e(a){return a.a.a?Promise.resolve():a.a.init(Qe)}
X.prototype.s=function(a){function b(a,b,c){b=b.filter(function(a){return a.type==c});return 0==b.length?null:Ic(a,b[0]).stream}var c={};this.i&&(c={video:b(this.b.periods[0],this.i,"video"),audio:b(this.b.periods[0],this.i,"audio")});Gc(this.g,c,a);Fc(a,this.c.getConfiguration().restrictions,{width:Infinity,height:Infinity})};function bf(a){var b=a.g?a.g.o():Promise.resolve();a.g=null;a.b=null;a.v=!1;a.i=null;a.l=[];a.f=-1;return b}
function cf(a){a=a.periods.map(function(a){return a.streamSets}).reduce(t,[]).map(function(a){return a.streams}).reduce(t,[]);return Promise.all(a.map(function(a){return a.createSegmentIndex()}))}
X.prototype.w=function(a){var b=Hc(a,null),b=this.j.trackSelectionCallback(b);this.i||(this.i=b,this.b.periods.forEach(this.s.bind(this)));for(var c=b.length-1;0<c;--c){for(var d=!1,e=c-1;0<=e;--e)if(b[c].type==b[e].type&&b[c].kind==b[e].kind&&b[c].language==b[e].language){d=!0;break}if(d)break}b=b.map(function(b){b=Ic(a,b);return df(this,a,b.Tc,b.stream)}.bind(this));return{startTime:a.startTime,streams:b}};
function df(a,b,c,d){for(var e=[],f=a.b.presentationTimeline.ra(),g=f,h=d.findSegmentPosition(f),m=null!=h?d.getSegmentReference(h):null;m;){var n=a.a.b.segment++;Ve(a.h,c.type,m,(m.endTime-m.startTime)*d.bandwidth/8,function(a,b,c,d){b={key:a,data:d,manifestKey:this.f,streamNumber:c,segmentNumber:b};this.l.push(a);return Oe(this.a,"segment",b)}.bind(a,n,m.position,d.id));e.push({startTime:m.startTime,endTime:m.endTime,uri:"offline:"+a.f+"/"+d.id+"/"+n});g=m.endTime+b.startTime;m=d.getSegmentReference(++h)}a.m=
Math.max(a.m,g-f);b=null;d.initSegmentReference&&(n=a.a.b.segment++,b="offline:"+a.f+"/"+d.id+"/"+n,Ve(a.h,c.type,d.initSegmentReference,0,function(a,b){var c={key:n,data:b,manifestKey:this.f,streamNumber:a,segmentNumber:-1};this.l.push(n);return Oe(this.a,"segment",c)}.bind(a,d.id)));return{id:d.id,primary:c.primary,presentationTimeOffset:d.presentationTimeOffset||0,contentType:c.type,mimeType:d.mimeType,codecs:d.codecs,kind:d.kind,language:c.language,width:d.width||null,height:d.height||null,initSegmentUri:b,
encrypted:d.encrypted,keyId:d.keyId,segments:e}}function Y(a){if(!a.c)throw new q(9,9002);}Qc.offline=Ze;l("shaka.polyfill.installAll",function(){for(var a=0;a<ef.length;++a)ef[a]()});var ef=[];function ff(a){ef.push(a)}l("shaka.polyfill.register",ff);function gf(a){var b=a.type.replace(/^(webkit|moz|MS)/,"").toLowerCase(),b=new Event(b,a);a.target.dispatchEvent(b)}
ff(function(){if(window.Document){var a=Element.prototype;a.requestFullscreen=a.requestFullscreen||a.mozRequestFullScreen||a.msRequestFullscreen||a.webkitRequestFullscreen;a=Document.prototype;a.exitFullscreen=a.exitFullscreen||a.mozCancelFullScreen||a.msExitFullscreen||a.webkitExitFullscreen;"fullscreenElement"in document||Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement}});document.addEventListener("webkitfullscreenchange",
gf);document.addEventListener("webkitfullscreenerror",gf);document.addEventListener("mozfullscreenchange",gf);document.addEventListener("mozfullscreenerror",gf);document.addEventListener("MSFullscreenChange",gf);document.addEventListener("MSFullscreenError",gf)}});function hf(a){this.c=[];this.b=[];this.a=[];for(a=new Od(new DataView(a.buffer));Qd(a);){var b=Xd(1886614376,a);if(-1==b)break;var c=a.a-8,d=Rd(a);if(1<d)S(a,b-(a.a-c));else{S(a,3);var e=Za(Vd(a,16)),f=[];if(0<d)for(var d=R(a),g=0;g<d;++g){var h=Za(Vd(a,16));f.push(h)}d=R(a);S(a,d);this.b.push.apply(this.b,f);this.c.push(e);this.a.push({start:c,end:a.a-1});a.a!=c+b&&S(a,b-(a.a-c))}}};function jf(a,b){try{var c=new kf(a,b);return Promise.resolve(c)}catch(d){return Promise.reject(d)}}
function kf(a,b){this.keySystem=a;for(var c=!1,d=0;d<b.length;++d){var e=b[d],f={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:e.initDataTypes,sessionTypes:["temporary"],label:e.label},g=!1;if(e.audioCapabilities)for(var h=0;h<e.audioCapabilities.length;++h){var m=e.audioCapabilities[h];if(m.contentType){var g=!0,n=m.contentType.split(";")[0];MSMediaKeys.isTypeSupported(this.keySystem,n)&&(f.audioCapabilities.push(m),c=!0)}}if(e.videoCapabilities)for(h=
0;h<e.videoCapabilities.length;++h)m=e.videoCapabilities[h],m.contentType&&(g=!0,n=m.contentType.split(";")[0],MSMediaKeys.isTypeSupported(this.keySystem,n)&&(f.videoCapabilities.push(m),c=!0));g||(c=MSMediaKeys.isTypeSupported(this.keySystem,"video/mp4"));"required"==e.persistentState&&(f.persistentState="required",f.sessionTypes=["persistent-license"]);if(c){this.a=f;return}}c=Error("Unsupported keySystem");c.name="NotSupportedError";c.code=DOMException.NOT_SUPPORTED_ERR;throw c;}
kf.prototype.createMediaKeys=function(){var a=new lf(this.keySystem);return Promise.resolve(a)};kf.prototype.getConfiguration=function(){return this.a};function mf(a){var b=this.mediaKeys;b&&b!=a&&nf(b,null);delete this.mediaKeys;return(this.mediaKeys=a)?nf(a,this):Promise.resolve()}function lf(a){this.a=new MSMediaKeys(a);this.b=new z}lf.prototype.createSession=function(a){if("temporary"!=(a||"temporary"))throw new TypeError("Session type "+a+" is unsupported on this platform.");return new of(this.a)};
lf.prototype.setServerCertificate=function(){return Promise.reject(Error("setServerCertificate not supported on this platform."))};function nf(a,b){function c(){b.msSetMediaKeys(d.a);b.removeEventListener("loadedmetadata",c)}Ka(a.b);if(!b)return Promise.resolve();B(a.b,b,"msneedkey",pf);var d=a;try{return 1<=b.readyState?b.msSetMediaKeys(a.a):b.addEventListener("loadedmetadata",c),Promise.resolve()}catch(e){return Promise.reject(e)}}
function of(a){p.call(this);this.c=null;this.g=a;this.b=this.a=null;this.f=new z;this.sessionId="";this.expiration=NaN;this.closed=new w;this.keyStatuses=new qf}ba(of);k=of.prototype;k.generateRequest=function(a,b){this.a=new w;try{this.c=this.g.createSession("video/mp4",new Uint8Array(b),null),B(this.f,this.c,"mskeymessage",this.hc.bind(this)),B(this.f,this.c,"mskeyadded",this.fc.bind(this)),B(this.f,this.c,"mskeyerror",this.gc.bind(this)),rf(this,"status-pending")}catch(c){this.a.reject(c)}return this.a};
k.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))};k.update=function(a){this.b=new w;try{this.c.update(new Uint8Array(a))}catch(b){this.b.reject(b)}return this.b};k.close=function(){try{this.c.close(),this.closed.resolve(),Ka(this.f)}catch(a){this.closed.reject(a)}return this.closed};k.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))};
function pf(a){var b=document.createEvent("CustomEvent");b.initCustomEvent("encrypted",!1,!1,null);b.initDataType="cenc";if(a=a.initData){var c=new hf(a);if(!(1>=c.a.length)){for(var d=[],e=0;e<c.a.length;e++)d.push(a.subarray(c.a[e].start,c.a[e].end+1));e=sf;a=[];for(c=0;c<d.length;++c){for(var f=!1,g=0;g<a.length&&!(f=e?e(d[c],a[g]):d[c]===a[g]);++g);f||a.push(d[c])}for(e=d=0;e<a.length;e++)d+=a[e].length;d=new Uint8Array(d);for(e=c=0;e<a.length;e++)d.set(a[e],c),c+=a[e].length;a=d}}b.initData=
a;this.dispatchEvent(b)}function sf(a,b){return $a(a,b)}k.hc=function(a){this.a&&(this.a.resolve(),this.a=null);this.dispatchEvent(new H("message",{messageType:void 0==this.keyStatuses.Ua()?"licenserequest":"licenserenewal",message:a.message.buffer}))};k.fc=function(){this.a?(rf(this,"usable"),this.a.resolve(),this.a=null):this.b&&(rf(this,"usable"),this.b.resolve(),this.b=null)};
k.gc=function(){var a=Error("EME PatchedMediaKeysMs key error");a.errorCode=this.c.error;if(this.a)this.a.reject(a),this.a=null;else if(this.b)this.b.reject(a),this.b=null;else switch(this.c.error.code){case MSMediaKeyError.MS_MEDIA_KEYERR_OUTPUT:case MSMediaKeyError.MS_MEDIA_KEYERR_HARDWARECHANGE:rf(this,"output-not-allowed");default:rf(this,"internal-error")}};function rf(a,b){a.keyStatuses.cb(b);a.dispatchEvent(new H("keystatuseschange"))}function qf(){this.size=0;this.a=void 0}var tf;k=qf.prototype;
k.cb=function(a){this.size=void 0==a?0:1;this.a=a};k.Ua=function(){return this.a};k.forEach=function(a){this.a&&a(this.a,tf)};k.get=function(a){if(this.has(a))return this.a};k.has=function(a){var b=tf;return this.a&&$a(new Uint8Array(a),new Uint8Array(b))?!0:!1};function uf(){return Promise.reject(Error("The key system specified is not supported."))}function vf(a){return a?Promise.reject(Error("MediaKeys not supported.")):Promise.resolve()}function wf(){throw new TypeError("Illegal constructor.");}wf.prototype.createSession=function(){};wf.prototype.setServerCertificate=function(){};function xf(){throw new TypeError("Illegal constructor.");}xf.prototype.getConfiguration=function(){};xf.prototype.createMediaKeys=function(){};function yf(a,b){try{var c=new zf(a,b);return Promise.resolve(c)}catch(d){return Promise.reject(d)}}function Af(a){var b=this.mediaKeys;b&&b!=a&&Bf(b,null);delete this.mediaKeys;(this.mediaKeys=a)&&Bf(a,this);return Promise.resolve()}
function zf(a,b){this.a=this.keySystem=a;var c=!0;"org.w3.clearkey"==a&&(this.a="webkit-org.w3.clearkey",c=!1);var d=!1,e;e=document.getElementsByTagName("video");e=e.length?e[0]:document.createElement("video");for(var f=0;f<b.length;++f){var g=b[f],h={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:g.initDataTypes,sessionTypes:["temporary"],label:g.label},m=!1;if(g.audioCapabilities)for(var n=0;n<g.audioCapabilities.length;++n){var r=
g.audioCapabilities[n];r.contentType&&(m=!0,e.canPlayType(r.contentType.split(";")[0],this.a)&&(h.audioCapabilities.push(r),d=!0))}if(g.videoCapabilities)for(n=0;n<g.videoCapabilities.length;++n)r=g.videoCapabilities[n],r.contentType&&(m=!0,e.canPlayType(r.contentType,this.a)&&(h.videoCapabilities.push(r),d=!0));m||(d=e.canPlayType("video/mp4",this.a)||e.canPlayType("video/webm",this.a));"required"==g.persistentState&&(c?(h.persistentState="required",h.sessionTypes=["persistent-license"]):d=!1);if(d){this.b=
h;return}}c="Unsupported keySystem";if("org.w3.clearkey"==a||"com.widevine.alpha"==a)c="None of the requested configurations were supported.";c=Error(c);c.name="NotSupportedError";c.code=DOMException.NOT_SUPPORTED_ERR;throw c;}zf.prototype.createMediaKeys=function(){var a=new Cf(this.a);return Promise.resolve(a)};zf.prototype.getConfiguration=function(){return this.b};function Cf(a){this.g=a;this.b=null;this.a=new z;this.c=[];this.f={}}
function Bf(a,b){a.b=b;Ka(a.a);b&&(B(a.a,b,"webkitneedkey",a.pc.bind(a)),B(a.a,b,"webkitkeymessage",a.oc.bind(a)),B(a.a,b,"webkitkeyadded",a.mc.bind(a)),B(a.a,b,"webkitkeyerror",a.nc.bind(a)))}k=Cf.prototype;k.createSession=function(a){var b=a||"temporary";if("temporary"!=b&&"persistent-license"!=b)throw new TypeError("Session type "+a+" is unsupported on this platform.");a=this.b||document.createElement("video");a.src||(a.src="about:blank");b=new Df(a,this.g,b);this.c.push(b);return b};
k.setServerCertificate=function(){return Promise.reject(Error("setServerCertificate not supported on this platform."))};k.pc=function(a){this.b.dispatchEvent(new H("encrypted",{initDataType:"webm",initData:a.initData}))};k.oc=function(a){var b=Ef(this,a.sessionId);b&&(a=new H("message",{messageType:void 0==b.keyStatuses.Ua()?"licenserequest":"licenserenewal",message:a.message}),b.b&&(b.b.resolve(),b.b=null),b.dispatchEvent(a))};
k.mc=function(a){if(a=Ef(this,a.sessionId))Ff(a,"usable"),a.a&&a.a.resolve(),a.a=null};
k.nc=function(a){var b=Ef(this,a.sessionId);if(b){var c=Error("EME v0.1b key error");c.errorCode=a.errorCode;c.errorCode.systemCode=a.systemCode;!a.sessionId&&b.b?(c.method="generateRequest",45==a.systemCode&&(c.message="Unsupported session type."),b.b.reject(c),b.b=null):a.sessionId&&b.a?(c.method="update",b.a.reject(c),b.a=null):(c=a.systemCode,a.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?Ff(b,"output-restricted"):1==c?Ff(b,"expired"):Ff(b,"internal-error"))}};
function Ef(a,b){var c=a.f[b];return c?c:(c=a.c.shift())?(c.sessionId=b,a.f[b]=c):null}function Df(a,b,c){p.call(this);this.f=a;this.h=!1;this.a=this.b=null;this.c=b;this.g=c;this.sessionId="";this.expiration=NaN;this.closed=new w;this.keyStatuses=new Gf}ba(Df);
function Hf(a,b,c){if(a.h)return Promise.reject(Error("The session is already initialized."));a.h=!0;var d;try{if("persistent-license"==a.g)if(c)d=new Uint8Array(Sa("LOAD_SESSION|"+c));else{var e=Sa("PERSISTENT|"),f=new Uint8Array(e.byteLength+b.byteLength);f.set(new Uint8Array(e),0);f.set(new Uint8Array(b),e.byteLength);d=f}else d=new Uint8Array(b)}catch(g){return Promise.reject(g)}a.b=new w;try{a.f.webkitGenerateKeyRequest(a.c,d)}catch(g){if("InvalidStateError"!=g.name)return a.b=null,Promise.reject(g);
setTimeout(function(){try{this.f.webkitGenerateKeyRequest(this.c,d)}catch(a){this.b.reject(a),this.b=null}}.bind(a),10)}return a.b}k=Df.prototype;
k.fb=function(a,b){if(this.a)this.a.then(this.fb.bind(this,a,b))["catch"](this.fb.bind(this,a,b));else{this.a=a;var c,d;"webkit-org.w3.clearkey"==this.c?(c=D(b),d=JSON.parse(c),"oct"!=d.keys[0].kty&&(this.a.reject(Error("Response is not a valid JSON Web Key Set.")),this.a=null),c=Xa(d.keys[0].k),d=Xa(d.keys[0].kid)):(c=new Uint8Array(b),d=null);try{this.f.webkitAddKey(this.c,c,d,this.sessionId)}catch(e){this.a.reject(e),this.a=null}}};
function Ff(a,b){a.keyStatuses.cb(b);a.dispatchEvent(new H("keystatuseschange"))}k.generateRequest=function(a,b){return Hf(this,b,null)};k.load=function(a){return"persistent-license"==this.g?Hf(this,null,a):Promise.reject(Error("Not a persistent session."))};k.update=function(a){var b=new w;this.fb(b,a);return b};
k.close=function(){if("persistent-license"!=this.g){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;this.f.webkitCancelKeyRequest(this.c,this.sessionId)}this.closed.resolve();return this.closed};k.remove=function(){return"persistent-license"!=this.g?Promise.reject(Error("Not a persistent session.")):this.close()};function Gf(){this.size=0;this.a=void 0}var If;k=Gf.prototype;k.cb=function(a){this.size=void 0==a?0:1;this.a=a};k.Ua=function(){return this.a};
k.forEach=function(a){this.a&&a(this.a,If)};k.get=function(a){if(this.has(a))return this.a};k.has=function(a){var b=If;return this.a&&$a(new Uint8Array(a),new Uint8Array(b))?!0:!1};ff(function(){!window.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(HTMLMediaElement.prototype.webkitGenerateKeyRequest?(If=(new Uint8Array([0])).buffer,navigator.requestMediaKeySystemAccess=yf,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=Af,window.MediaKeys=Cf,window.MediaKeySystemAccess=zf):window.MSMediaKeys?(tf=(new Uint8Array([0])).buffer,delete HTMLMediaElement.prototype.mediaKeys,
HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=mf,window.MediaKeys=lf,window.MediaKeySystemAccess=kf,navigator.requestMediaKeySystemAccess=jf):(navigator.requestMediaKeySystemAccess=uf,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=vf,window.MediaKeys=wf,window.MediaKeySystemAccess=xf))});ff(function(){if(window.MediaSource){var a=navigator.vendor,b=navigator.appVersion;if(a&&b&&!(0>a.indexOf("Apple")))if(0<=b.indexOf("Version/8"))window.MediaSource=null;else{var c=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(){var a=c.apply(this,arguments);a.abort=function(){};return a}}}});function Z(a){this.c=[];this.b=[];this.ja=Jf;if(a)try{a(this.W.bind(this),this.a.bind(this))}catch(b){this.a(b)}}var Jf=0;function Kf(a){var b=new Z;b.W(a);return b}function Lf(a){var b=new Z;b.a(a);return b}function Mf(a){function b(a,b,c){a.ja==Jf&&(e[b]=c,d++,d==e.length&&a.W(e))}var c=new Z;if(!a.length)return c.W([]),c;for(var d=0,e=Array(a.length),f=c.a.bind(c),g=0;g<a.length;++g)a[g]&&a[g].then?a[g].then(b.bind(null,c,g),f):b(c,g,a[g]);return c}
function Nf(a){for(var b=new Z,c=b.W.bind(b),d=b.a.bind(b),e=0;e<a.length;++e)a[e]&&a[e].then?a[e].then(c,d):c(a[e]);return b}Z.prototype.then=function(a,b){var c=new Z;switch(this.ja){case 1:Of(this,c,a);break;case 2:Of(this,c,b);break;case Jf:this.c.push({I:c,Ca:a}),this.b.push({I:c,Ca:b})}return c};Z.prototype.then=Z.prototype.then;Z.prototype["catch"]=function(a){return this.then(void 0,a)};Z.prototype["catch"]=Z.prototype["catch"];
Z.prototype.W=function(a){if(this.ja==Jf){this.Oa=a;this.ja=1;for(a=0;a<this.c.length;++a)Of(this,this.c[a].I,this.c[a].Ca);this.c=[];this.b=[]}};Z.prototype.a=function(a){if(this.ja==Jf){this.Oa=a;this.ja=2;for(a=0;a<this.b.length;++a)Of(this,this.b[a].I,this.b[a].Ca);this.c=[];this.b=[]}};
function Of(a,b,c){Pf.push(function(){if(c&&"function"==typeof c){try{var a=c(this.Oa)}catch(f){b.a(f);return}var e;try{e=a&&a.then}catch(f){b.a(f);return}a instanceof Z?a==b?b.a(new TypeError("Chaining cycle detected")):a.then(b.W.bind(b),b.a.bind(b)):e?Qf(a,e,b):b.W(a)}else 1==this.ja?b.W(this.Oa):b.a(this.Oa)}.bind(a));null==Rf&&(Rf=Sf(Tf))}
function Qf(a,b,c){try{var d=!1;b.call(a,function(a){if(!d){d=!0;var b;try{b=a&&a.then}catch(g){c.a(g);return}b?Qf(a,b,c):c.W(a)}},c.a.bind(c))}catch(e){c.a(e)}}function Tf(){for(;Pf.length;){null!=Rf&&(Uf(Rf),Rf=null);var a=Pf;Pf=[];for(var b=0;b<a.length;++b)a[b]()}}function Sf(){return 0}function Uf(){}var Rf=null,Pf=[];
ff(function(a){window.setImmediate?(Sf=function(a){return window.setImmediate(a)},Uf=function(a){return window.clearImmediate(a)}):(Sf=function(a){return window.setTimeout(a,0)},Uf=function(a){return window.clearTimeout(a)});if(!window.Promise||a)window.Promise=Z,window.Promise.resolve=Kf,window.Promise.reject=Lf,window.Promise.all=Mf,window.Promise.race=Nf});function Vf(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}}ff(function(){if(window.HTMLVideoElement){var a=HTMLVideoElement.prototype;!a.getVideoPlaybackQuality&&"webkitDroppedFrameCount"in a&&(a.getVideoPlaybackQuality=Vf)}});}.call(g,this));
if (typeof(module)!="undefined"&&module.exports)module.exports=g.shaka;
else if (typeof(define)!="undefined" && define.amd)define(function(){return g.shaka});
else this.shaka=g.shaka;
})();


},{}],5:[function(require,module,exports){
// stats.js - http://github.com/mrdoob/stats.js
var Stats=function(){var l=Date.now(),m=l,g=0,n=Infinity,o=0,h=0,p=Infinity,q=0,r=0,s=0,f=document.createElement("div");f.id="stats";f.addEventListener("mousedown",function(b){b.preventDefault();t(++s%2)},!1);f.style.cssText="width:80px;opacity:0.9;cursor:pointer";var a=document.createElement("div");a.id="fps";a.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#002";f.appendChild(a);var i=document.createElement("div");i.id="fpsText";i.style.cssText="color:#0ff;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px";
i.innerHTML="FPS";a.appendChild(i);var c=document.createElement("div");c.id="fpsGraph";c.style.cssText="position:relative;width:74px;height:30px;background-color:#0ff";for(a.appendChild(c);74>c.children.length;){var j=document.createElement("span");j.style.cssText="width:1px;height:30px;float:left;background-color:#113";c.appendChild(j)}var d=document.createElement("div");d.id="ms";d.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#020;display:none";f.appendChild(d);var k=document.createElement("div");
k.id="msText";k.style.cssText="color:#0f0;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px";k.innerHTML="MS";d.appendChild(k);var e=document.createElement("div");e.id="msGraph";e.style.cssText="position:relative;width:74px;height:30px;background-color:#0f0";for(d.appendChild(e);74>e.children.length;)j=document.createElement("span"),j.style.cssText="width:1px;height:30px;float:left;background-color:#131",e.appendChild(j);var t=function(b){s=b;switch(s){case 0:a.style.display=
"block";d.style.display="none";break;case 1:a.style.display="none",d.style.display="block"}};return{REVISION:12,domElement:f,setMode:t,begin:function(){l=Date.now()},end:function(){var b=Date.now();g=b-l;n=Math.min(n,g);o=Math.max(o,g);k.textContent=g+" MS ("+n+"-"+o+")";var a=Math.min(30,30-30*(g/200));e.appendChild(e.firstChild).style.height=a+"px";r++;b>m+1E3&&(h=Math.round(1E3*r/(b-m)),p=Math.min(p,h),q=Math.max(q,h),i.textContent=h+" FPS ("+p+"-"+q+")",a=Math.min(30,30-30*(h/100)),c.appendChild(c.firstChild).style.height=
a+"px",m=b,r=0);return b},update:function(){l=this.end()}}};"object"===typeof module&&(module.exports=Stats);

},{}],6:[function(require,module,exports){
(function (process){
/**
 * Tween.js - Licensed under the MIT license
 * https://github.com/tweenjs/tween.js
 * ----------------------------------------------
 *
 * See https://github.com/tweenjs/tween.js/graphs/contributors for the full list of contributors.
 * Thank you all, you're awesome!
 */

var TWEEN = TWEEN || (function () {

	var _tweens = [];

	return {

		getAll: function () {

			return _tweens;

		},

		removeAll: function () {

			_tweens = [];

		},

		add: function (tween) {

			_tweens.push(tween);

		},

		remove: function (tween) {

			var i = _tweens.indexOf(tween);

			if (i !== -1) {
				_tweens.splice(i, 1);
			}

		},

		update: function (time, preserve) {

			if (_tweens.length === 0) {
				return false;
			}

			var i = 0;

			time = time !== undefined ? time : TWEEN.now();

			while (i < _tweens.length) {

				if (_tweens[i].update(time) || preserve) {
					i++;
				} else {
					_tweens.splice(i, 1);
				}

			}

			return true;

		}
	};

})();


// Include a performance.now polyfill
(function () {
	// In node.js, use process.hrtime.
	if (this.window === undefined && this.process !== undefined) {
		TWEEN.now = function () {
			var time = process.hrtime();

			// Convert [seconds, microseconds] to milliseconds.
			return time[0] * 1000 + time[1] / 1000;
		};
	}
	// In a browser, use window.performance.now if it is available.
	else if (this.window !== undefined &&
	         window.performance !== undefined &&
		 window.performance.now !== undefined) {

		// This must be bound, because directly assigning this function
		// leads to an invocation exception in Chrome.
		TWEEN.now = window.performance.now.bind(window.performance);
	}
	// Use Date.now if it is available.
	else if (Date.now !== undefined) {
		TWEEN.now = Date.now;
	}
	// Otherwise, use 'new Date().getTime()'.
	else {
		TWEEN.now = function () {
			return new Date().getTime();
		};
	}
})();


TWEEN.Tween = function (object) {

	var _object = object;
	var _valuesStart = {};
	var _valuesEnd = {};
	var _valuesStartRepeat = {};
	var _duration = 1000;
	var _repeat = 0;
	var _yoyo = false;
	var _isPlaying = false;
	var _reversed = false;
	var _delayTime = 0;
	var _startTime = null;
	var _easingFunction = TWEEN.Easing.Linear.None;
	var _interpolationFunction = TWEEN.Interpolation.Linear;
	var _chainedTweens = [];
	var _onStartCallback = null;
	var _onStartCallbackFired = false;
	var _onUpdateCallback = null;
	var _onCompleteCallback = null;
	var _onStopCallback = null;

	// Set all starting values present on the target object
	for (var field in object) {
		_valuesStart[field] = parseFloat(object[field], 10);
	}

	this.to = function (properties, duration) {

		if (duration !== undefined) {
			_duration = duration;
		}

		_valuesEnd = properties;

		return this;

	};

	this.start = function (time) {

		TWEEN.add(this);

		_isPlaying = true;

		_onStartCallbackFired = false;

		_startTime = time !== undefined ? time : TWEEN.now();
		_startTime += _delayTime;

		for (var property in _valuesEnd) {

			// Check if an Array was provided as property value
			if (_valuesEnd[property] instanceof Array) {

				if (_valuesEnd[property].length === 0) {
					continue;
				}

				// Create a local copy of the Array with the start value at the front
				_valuesEnd[property] = [_object[property]].concat(_valuesEnd[property]);

			}

			// If `to()` specifies a property that doesn't exist in the source object,
			// we should not set that property in the object
			if (_valuesStart[property] === undefined) {
				continue;
			}

			_valuesStart[property] = _object[property];

			if ((_valuesStart[property] instanceof Array) === false) {
				_valuesStart[property] *= 1.0; // Ensures we're using numbers, not strings
			}

			_valuesStartRepeat[property] = _valuesStart[property] || 0;

		}

		return this;

	};

	this.stop = function () {

		if (!_isPlaying) {
			return this;
		}

		TWEEN.remove(this);
		_isPlaying = false;

		if (_onStopCallback !== null) {
			_onStopCallback.call(_object);
		}

		this.stopChainedTweens();
		return this;

	};

	this.stopChainedTweens = function () {

		for (var i = 0, numChainedTweens = _chainedTweens.length; i < numChainedTweens; i++) {
			_chainedTweens[i].stop();
		}

	};

	this.delay = function (amount) {

		_delayTime = amount;
		return this;

	};

	this.repeat = function (times) {

		_repeat = times;
		return this;

	};

	this.yoyo = function (yoyo) {

		_yoyo = yoyo;
		return this;

	};


	this.easing = function (easing) {

		_easingFunction = easing;
		return this;

	};

	this.interpolation = function (interpolation) {

		_interpolationFunction = interpolation;
		return this;

	};

	this.chain = function () {

		_chainedTweens = arguments;
		return this;

	};

	this.onStart = function (callback) {

		_onStartCallback = callback;
		return this;

	};

	this.onUpdate = function (callback) {

		_onUpdateCallback = callback;
		return this;

	};

	this.onComplete = function (callback) {

		_onCompleteCallback = callback;
		return this;

	};

	this.onStop = function (callback) {

		_onStopCallback = callback;
		return this;

	};

	this.update = function (time) {

		var property;
		var elapsed;
		var value;

		if (time < _startTime) {
			return true;
		}

		if (_onStartCallbackFired === false) {

			if (_onStartCallback !== null) {
				_onStartCallback.call(_object);
			}

			_onStartCallbackFired = true;

		}

		elapsed = (time - _startTime) / _duration;
		elapsed = elapsed > 1 ? 1 : elapsed;

		value = _easingFunction(elapsed);

		for (property in _valuesEnd) {

			// Don't update properties that do not exist in the source object
			if (_valuesStart[property] === undefined) {
				continue;
			}

			var start = _valuesStart[property] || 0;
			var end = _valuesEnd[property];

			if (end instanceof Array) {

				_object[property] = _interpolationFunction(end, value);

			} else {

				// Parses relative end values with start as base (e.g.: +10, -3)
				if (typeof (end) === 'string') {

					if (end.charAt(0) === '+' || end.charAt(0) === '-') {
						end = start + parseFloat(end, 10);
					} else {
						end = parseFloat(end, 10);
					}
				}

				// Protect against non numeric properties.
				if (typeof (end) === 'number') {
					_object[property] = start + (end - start) * value;
				}

			}

		}

		if (_onUpdateCallback !== null) {
			_onUpdateCallback.call(_object, value);
		}

		if (elapsed === 1) {

			if (_repeat > 0) {

				if (isFinite(_repeat)) {
					_repeat--;
				}

				// Reassign starting values, restart by making startTime = now
				for (property in _valuesStartRepeat) {

					if (typeof (_valuesEnd[property]) === 'string') {
						_valuesStartRepeat[property] = _valuesStartRepeat[property] + parseFloat(_valuesEnd[property], 10);
					}

					if (_yoyo) {
						var tmp = _valuesStartRepeat[property];

						_valuesStartRepeat[property] = _valuesEnd[property];
						_valuesEnd[property] = tmp;
					}

					_valuesStart[property] = _valuesStartRepeat[property];

				}

				if (_yoyo) {
					_reversed = !_reversed;
				}

				_startTime = time + _delayTime;

				return true;

			} else {

				if (_onCompleteCallback !== null) {
					_onCompleteCallback.call(_object);
				}

				for (var i = 0, numChainedTweens = _chainedTweens.length; i < numChainedTweens; i++) {
					// Make the chained tweens start exactly at the time they should,
					// even if the `update()` method was called way past the duration of the tween
					_chainedTweens[i].start(_startTime + _duration);
				}

				return false;

			}

		}

		return true;

	};

};


TWEEN.Easing = {

	Linear: {

		None: function (k) {

			return k;

		}

	},

	Quadratic: {

		In: function (k) {

			return k * k;

		},

		Out: function (k) {

			return k * (2 - k);

		},

		InOut: function (k) {

			if ((k *= 2) < 1) {
				return 0.5 * k * k;
			}

			return - 0.5 * (--k * (k - 2) - 1);

		}

	},

	Cubic: {

		In: function (k) {

			return k * k * k;

		},

		Out: function (k) {

			return --k * k * k + 1;

		},

		InOut: function (k) {

			if ((k *= 2) < 1) {
				return 0.5 * k * k * k;
			}

			return 0.5 * ((k -= 2) * k * k + 2);

		}

	},

	Quartic: {

		In: function (k) {

			return k * k * k * k;

		},

		Out: function (k) {

			return 1 - (--k * k * k * k);

		},

		InOut: function (k) {

			if ((k *= 2) < 1) {
				return 0.5 * k * k * k * k;
			}

			return - 0.5 * ((k -= 2) * k * k * k - 2);

		}

	},

	Quintic: {

		In: function (k) {

			return k * k * k * k * k;

		},

		Out: function (k) {

			return --k * k * k * k * k + 1;

		},

		InOut: function (k) {

			if ((k *= 2) < 1) {
				return 0.5 * k * k * k * k * k;
			}

			return 0.5 * ((k -= 2) * k * k * k * k + 2);

		}

	},

	Sinusoidal: {

		In: function (k) {

			return 1 - Math.cos(k * Math.PI / 2);

		},

		Out: function (k) {

			return Math.sin(k * Math.PI / 2);

		},

		InOut: function (k) {

			return 0.5 * (1 - Math.cos(Math.PI * k));

		}

	},

	Exponential: {

		In: function (k) {

			return k === 0 ? 0 : Math.pow(1024, k - 1);

		},

		Out: function (k) {

			return k === 1 ? 1 : 1 - Math.pow(2, - 10 * k);

		},

		InOut: function (k) {

			if (k === 0) {
				return 0;
			}

			if (k === 1) {
				return 1;
			}

			if ((k *= 2) < 1) {
				return 0.5 * Math.pow(1024, k - 1);
			}

			return 0.5 * (- Math.pow(2, - 10 * (k - 1)) + 2);

		}

	},

	Circular: {

		In: function (k) {

			return 1 - Math.sqrt(1 - k * k);

		},

		Out: function (k) {

			return Math.sqrt(1 - (--k * k));

		},

		InOut: function (k) {

			if ((k *= 2) < 1) {
				return - 0.5 * (Math.sqrt(1 - k * k) - 1);
			}

			return 0.5 * (Math.sqrt(1 - (k -= 2) * k) + 1);

		}

	},

	Elastic: {

		In: function (k) {

			if (k === 0) {
				return 0;
			}

			if (k === 1) {
				return 1;
			}

			return -Math.pow(2, 10 * (k - 1)) * Math.sin((k - 1.1) * 5 * Math.PI);

		},

		Out: function (k) {

			if (k === 0) {
				return 0;
			}

			if (k === 1) {
				return 1;
			}

			return Math.pow(2, -10 * k) * Math.sin((k - 0.1) * 5 * Math.PI) + 1;

		},

		InOut: function (k) {

			if (k === 0) {
				return 0;
			}

			if (k === 1) {
				return 1;
			}

			k *= 2;

			if (k < 1) {
				return -0.5 * Math.pow(2, 10 * (k - 1)) * Math.sin((k - 1.1) * 5 * Math.PI);
			}

			return 0.5 * Math.pow(2, -10 * (k - 1)) * Math.sin((k - 1.1) * 5 * Math.PI) + 1;

		}

	},

	Back: {

		In: function (k) {

			var s = 1.70158;

			return k * k * ((s + 1) * k - s);

		},

		Out: function (k) {

			var s = 1.70158;

			return --k * k * ((s + 1) * k + s) + 1;

		},

		InOut: function (k) {

			var s = 1.70158 * 1.525;

			if ((k *= 2) < 1) {
				return 0.5 * (k * k * ((s + 1) * k - s));
			}

			return 0.5 * ((k -= 2) * k * ((s + 1) * k + s) + 2);

		}

	},

	Bounce: {

		In: function (k) {

			return 1 - TWEEN.Easing.Bounce.Out(1 - k);

		},

		Out: function (k) {

			if (k < (1 / 2.75)) {
				return 7.5625 * k * k;
			} else if (k < (2 / 2.75)) {
				return 7.5625 * (k -= (1.5 / 2.75)) * k + 0.75;
			} else if (k < (2.5 / 2.75)) {
				return 7.5625 * (k -= (2.25 / 2.75)) * k + 0.9375;
			} else {
				return 7.5625 * (k -= (2.625 / 2.75)) * k + 0.984375;
			}

		},

		InOut: function (k) {

			if (k < 0.5) {
				return TWEEN.Easing.Bounce.In(k * 2) * 0.5;
			}

			return TWEEN.Easing.Bounce.Out(k * 2 - 1) * 0.5 + 0.5;

		}

	}

};

TWEEN.Interpolation = {

	Linear: function (v, k) {

		var m = v.length - 1;
		var f = m * k;
		var i = Math.floor(f);
		var fn = TWEEN.Interpolation.Utils.Linear;

		if (k < 0) {
			return fn(v[0], v[1], f);
		}

		if (k > 1) {
			return fn(v[m], v[m - 1], m - f);
		}

		return fn(v[i], v[i + 1 > m ? m : i + 1], f - i);

	},

	Bezier: function (v, k) {

		var b = 0;
		var n = v.length - 1;
		var pw = Math.pow;
		var bn = TWEEN.Interpolation.Utils.Bernstein;

		for (var i = 0; i <= n; i++) {
			b += pw(1 - k, n - i) * pw(k, i) * v[i] * bn(n, i);
		}

		return b;

	},

	CatmullRom: function (v, k) {

		var m = v.length - 1;
		var f = m * k;
		var i = Math.floor(f);
		var fn = TWEEN.Interpolation.Utils.CatmullRom;

		if (v[0] === v[m]) {

			if (k < 0) {
				i = Math.floor(f = m * (1 + k));
			}

			return fn(v[(i - 1 + m) % m], v[i], v[(i + 1) % m], v[(i + 2) % m], f - i);

		} else {

			if (k < 0) {
				return v[0] - (fn(v[0], v[0], v[1], v[1], -f) - v[0]);
			}

			if (k > 1) {
				return v[m] - (fn(v[m], v[m], v[m - 1], v[m - 1], f - m) - v[m]);
			}

			return fn(v[i ? i - 1 : 0], v[i], v[m < i + 1 ? m : i + 1], v[m < i + 2 ? m : i + 2], f - i);

		}

	},

	Utils: {

		Linear: function (p0, p1, t) {

			return (p1 - p0) * t + p0;

		},

		Bernstein: function (n, i) {

			var fc = TWEEN.Interpolation.Utils.Factorial;

			return fc(n) / fc(i) / fc(n - i);

		},

		Factorial: (function () {

			var a = [1];

			return function (n) {

				var s = 1;

				if (a[n]) {
					return a[n];
				}

				for (var i = n; i > 1; i--) {
					s *= i;
				}

				a[n] = s;
				return s;

			};

		})(),

		CatmullRom: function (p0, p1, p2, p3, t) {

			var v0 = (p2 - p0) * 0.5;
			var v1 = (p3 - p1) * 0.5;
			var t2 = t * t;
			var t3 = t * t2;

			return (2 * p1 - 2 * p2 + v0 + v1) * t3 + (- 3 * p1 + 3 * p2 - 2 * v0 - v1) * t2 + v0 * t + p1;

		}

	}

};

// UMD (Universal Module Definition)
(function (root) {

	if (typeof define === 'function' && define.amd) {

		// AMD
		define([], function () {
			return TWEEN;
		});

	} else if (typeof module !== 'undefined' && typeof exports === 'object') {

		// Node.js
		module.exports = TWEEN;

	} else if (root !== undefined) {

		// Global variable
		root.TWEEN = TWEEN;

	}

})(this);

}).call(this,require('_process'))

},{"_process":1}],7:[function(require,module,exports){
(function (global){
(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.WebVRManager = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(_dereq_,module,exports){
/*
 * Copyright 2015 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

var Emitter = _dereq_('./emitter.js');
var Modes = _dereq_('./modes.js');
var Util = _dereq_('./util.js');

/**
 * Everything having to do with the WebVR button.
 * Emits a 'click' event when it's clicked.
 */
function ButtonManager(opt_root) {
  var root = opt_root || document.body;
  this.loadIcons_();

  // Make the fullscreen button.
  var fsButton = this.createButton();
  fsButton.src = this.ICONS.fullscreen;
  fsButton.title = 'Fullscreen mode';
  var s = fsButton.style;
  s.bottom = 0;
  s.right = 0;
  fsButton.addEventListener('click', this.createClickHandler_('fs'));
  root.appendChild(fsButton);
  this.fsButton = fsButton;

  // Make the VR button.
  var vrButton = this.createButton();
  vrButton.src = this.ICONS.cardboard;
  vrButton.title = 'Virtual reality mode';
  var s = vrButton.style;
  s.bottom = 0;
  s.right = '48px';
  vrButton.addEventListener('click', this.createClickHandler_('vr'));
  root.appendChild(vrButton);
  this.vrButton = vrButton;

  this.isVisible = true;

}
ButtonManager.prototype = new Emitter();

ButtonManager.prototype.createButton = function() {
  var button = document.createElement('img');
  button.className = 'webvr-button';
  var s = button.style;
  s.position = 'absolute';
  s.width = '24px'
  s.height = '24px';
  s.backgroundSize = 'cover';
  s.backgroundColor = 'transparent';
  s.border = 0;
  s.userSelect = 'none';
  s.webkitUserSelect = 'none';
  s.MozUserSelect = 'none';
  s.cursor = 'pointer';
  s.padding = '12px';
  s.zIndex = 1;
  s.display = 'none';
  s.boxSizing = 'content-box';

  // Prevent button from being selected and dragged.
  button.draggable = false;
  button.addEventListener('dragstart', function(e) {
    e.preventDefault();
  });

  // Style it on hover.
  button.addEventListener('mouseenter', function(e) {
    s.filter = s.webkitFilter = 'drop-shadow(0 0 5px rgba(255,255,255,1))';
  });
  button.addEventListener('mouseleave', function(e) {
    s.filter = s.webkitFilter = '';
  });
  return button;
};

ButtonManager.prototype.setMode = function(mode, isVRCompatible) {
  isVRCompatible = isVRCompatible || WebVRConfig.FORCE_ENABLE_VR;
  if (!this.isVisible) {
    return;
  }
  switch (mode) {
    case Modes.NORMAL:
      this.fsButton.style.display = 'block';
      this.fsButton.src = this.ICONS.fullscreen;
      this.vrButton.style.display = (isVRCompatible ? 'block' : 'none');
      break;
    case Modes.MAGIC_WINDOW:
      this.fsButton.style.display = 'block';
      this.fsButton.src = this.ICONS.exitFullscreen;
      this.vrButton.style.display = 'none';
      break;
    case Modes.VR:
      this.fsButton.style.display = 'none';
      this.vrButton.style.display = 'none';
      break;
  }

  // Hack for Safari Mac/iOS to force relayout (svg-specific issue)
  // http://goo.gl/hjgR6r
  var oldValue = this.fsButton.style.display;
  this.fsButton.style.display = 'inline-block';
  this.fsButton.offsetHeight;
  this.fsButton.style.display = oldValue;
};

ButtonManager.prototype.setVisibility = function(isVisible) {
  this.isVisible = isVisible;
  this.fsButton.style.display = isVisible ? 'block' : 'none';
  this.vrButton.style.display = isVisible ? 'block' : 'none';
};

ButtonManager.prototype.createClickHandler_ = function(eventName) {
  return function(e) {
    e.stopPropagation();
    e.preventDefault();
    this.emit(eventName);
  }.bind(this);
};

ButtonManager.prototype.loadIcons_ = function() {
  // Preload some hard-coded SVG.
  this.ICONS = {};
  this.ICONS.cardboard = Util.base64('image/svg+xml', 'PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNHB4IiBoZWlnaHQ9IjI0cHgiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0iI0ZGRkZGRiI+CiAgICA8cGF0aCBkPSJNMjAuNzQgNkgzLjIxQzIuNTUgNiAyIDYuNTcgMiA3LjI4djEwLjQ0YzAgLjcuNTUgMS4yOCAxLjIzIDEuMjhoNC43OWMuNTIgMCAuOTYtLjMzIDEuMTQtLjc5bDEuNC0zLjQ4Yy4yMy0uNTkuNzktMS4wMSAxLjQ0LTEuMDFzMS4yMS40MiAxLjQ1IDEuMDFsMS4zOSAzLjQ4Yy4xOS40Ni42My43OSAxLjExLjc5aDQuNzljLjcxIDAgMS4yNi0uNTcgMS4yNi0xLjI4VjcuMjhjMC0uNy0uNTUtMS4yOC0xLjI2LTEuMjh6TTcuNSAxNC42MmMtMS4xNyAwLTIuMTMtLjk1LTIuMTMtMi4xMiAwLTEuMTcuOTYtMi4xMyAyLjEzLTIuMTMgMS4xOCAwIDIuMTIuOTYgMi4xMiAyLjEzcy0uOTUgMi4xMi0yLjEyIDIuMTJ6bTkgMGMtMS4xNyAwLTIuMTMtLjk1LTIuMTMtMi4xMiAwLTEuMTcuOTYtMi4xMyAyLjEzLTIuMTNzMi4xMi45NiAyLjEyIDIuMTMtLjk1IDIuMTItMi4xMiAyLjEyeiIvPgogICAgPHBhdGggZmlsbD0ibm9uZSIgZD0iTTAgMGgyNHYyNEgwVjB6Ii8+Cjwvc3ZnPgo=');
  this.ICONS.fullscreen = Util.base64('image/svg+xml', 'PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNHB4IiBoZWlnaHQ9IjI0cHgiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0iI0ZGRkZGRiI+CiAgICA8cGF0aCBkPSJNMCAwaDI0djI0SDB6IiBmaWxsPSJub25lIi8+CiAgICA8cGF0aCBkPSJNNyAxNEg1djVoNXYtMkg3di0zem0tMi00aDJWN2gzVjVINXY1em0xMiA3aC0zdjJoNXYtNWgtMnYzek0xNCA1djJoM3YzaDJWNWgtNXoiLz4KPC9zdmc+Cg==');
  this.ICONS.exitFullscreen = Util.base64('image/svg+xml', 'PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNHB4IiBoZWlnaHQ9IjI0cHgiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0iI0ZGRkZGRiI+CiAgICA8cGF0aCBkPSJNMCAwaDI0djI0SDB6IiBmaWxsPSJub25lIi8+CiAgICA8cGF0aCBkPSJNNSAxNmgzdjNoMnYtNUg1djJ6bTMtOEg1djJoNVY1SDh2M3ptNiAxMWgydi0zaDN2LTJoLTV2NXptMi0xMVY1aC0ydjVoNVY4aC0zeiIvPgo8L3N2Zz4K');
  this.ICONS.settings = Util.base64('image/svg+xml', 'PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNHB4IiBoZWlnaHQ9IjI0cHgiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0iI0ZGRkZGRiI+CiAgICA8cGF0aCBkPSJNMCAwaDI0djI0SDB6IiBmaWxsPSJub25lIi8+CiAgICA8cGF0aCBkPSJNMTkuNDMgMTIuOThjLjA0LS4zMi4wNy0uNjQuMDctLjk4cy0uMDMtLjY2LS4wNy0uOThsMi4xMS0xLjY1Yy4xOS0uMTUuMjQtLjQyLjEyLS42NGwtMi0zLjQ2Yy0uMTItLjIyLS4zOS0uMy0uNjEtLjIybC0yLjQ5IDFjLS41Mi0uNC0xLjA4LS43My0xLjY5LS45OGwtLjM4LTIuNjVDMTQuNDYgMi4xOCAxNC4yNSAyIDE0IDJoLTRjLS4yNSAwLS40Ni4xOC0uNDkuNDJsLS4zOCAyLjY1Yy0uNjEuMjUtMS4xNy41OS0xLjY5Ljk4bC0yLjQ5LTFjLS4yMy0uMDktLjQ5IDAtLjYxLjIybC0yIDMuNDZjLS4xMy4yMi0uMDcuNDkuMTIuNjRsMi4xMSAxLjY1Yy0uMDQuMzItLjA3LjY1LS4wNy45OHMuMDMuNjYuMDcuOThsLTIuMTEgMS42NWMtLjE5LjE1LS4yNC40Mi0uMTIuNjRsMiAzLjQ2Yy4xMi4yMi4zOS4zLjYxLjIybDIuNDktMWMuNTIuNCAxLjA4LjczIDEuNjkuOThsLjM4IDIuNjVjLjAzLjI0LjI0LjQyLjQ5LjQyaDRjLjI1IDAgLjQ2LS4xOC40OS0uNDJsLjM4LTIuNjVjLjYxLS4yNSAxLjE3LS41OSAxLjY5LS45OGwyLjQ5IDFjLjIzLjA5LjQ5IDAgLjYxLS4yMmwyLTMuNDZjLjEyLS4yMi4wNy0uNDktLjEyLS42NGwtMi4xMS0xLjY1ek0xMiAxNS41Yy0xLjkzIDAtMy41LTEuNTctMy41LTMuNXMxLjU3LTMuNSAzLjUtMy41IDMuNSAxLjU3IDMuNSAzLjUtMS41NyAzLjUtMy41IDMuNXoiLz4KPC9zdmc+Cg==');
};

module.exports = ButtonManager;

},{"./emitter.js":2,"./modes.js":3,"./util.js":4}],2:[function(_dereq_,module,exports){
/*
 * Copyright 2015 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

function Emitter() {
  this.callbacks = {};
}

Emitter.prototype.emit = function(eventName) {
  var callbacks = this.callbacks[eventName];
  if (!callbacks) {
    //console.log('No valid callback specified.');
    return;
  }
  var args = [].slice.call(arguments);
  // Eliminate the first param (the callback).
  args.shift();
  for (var i = 0; i < callbacks.length; i++) {
    callbacks[i].apply(this, args);
  }
};

Emitter.prototype.on = function(eventName, callback) {
  if (eventName in this.callbacks) {
    this.callbacks[eventName].push(callback);
  } else {
    this.callbacks[eventName] = [callback];
  }
};

module.exports = Emitter;

},{}],3:[function(_dereq_,module,exports){
/*
 * Copyright 2015 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

var Modes = {
  UNKNOWN: 0,
  // Not fullscreen, just tracking.
  NORMAL: 1,
  // Magic window immersive mode.
  MAGIC_WINDOW: 2,
  // Full screen split screen VR mode.
  VR: 3,
};

module.exports = Modes;

},{}],4:[function(_dereq_,module,exports){
/*
 * Copyright 2015 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

var Util = {};

Util.base64 = function(mimeType, base64) {
  return 'data:' + mimeType + ';base64,' + base64;
};

Util.isMobile = function() {
  var check = false;
  (function(a){if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4)))check = true})(navigator.userAgent||navigator.vendor||window.opera);
  return check;
};

Util.isFirefox = function() {
  return /firefox/i.test(navigator.userAgent);
};

Util.isIOS = function() {
  return /(iPad|iPhone|iPod)/g.test(navigator.userAgent);
};

Util.isIFrame = function() {
  try {
    return window.self !== window.top;
  } catch (e) {
    return true;
  }
};

Util.appendQueryParameter = function(url, key, value) {
  // Determine delimiter based on if the URL already GET parameters in it.
  var delimiter = (url.indexOf('?') < 0 ? '?' : '&');
  url += delimiter + key + '=' + value;
  return url;
};

// From http://goo.gl/4WX3tg
Util.getQueryParameter = function(name) {
  var name = name.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
  var regex = new RegExp("[\\?&]" + name + "=([^&#]*)"),
      results = regex.exec(location.search);
  return results === null ? "" : decodeURIComponent(results[1].replace(/\+/g, " "));
};

Util.isLandscapeMode = function() {
  return (window.orientation == 90 || window.orientation == -90);
};

Util.getScreenWidth = function() {
  return Math.max(window.screen.width, window.screen.height) *
      window.devicePixelRatio;
};

Util.getScreenHeight = function() {
  return Math.min(window.screen.width, window.screen.height) *
      window.devicePixelRatio;
};

module.exports = Util;

},{}],5:[function(_dereq_,module,exports){
/*
 * Copyright 2015 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

var ButtonManager = _dereq_('./button-manager.js');
var Emitter = _dereq_('./emitter.js');
var Modes = _dereq_('./modes.js');
var Util = _dereq_('./util.js');

/**
 * Helper for getting in and out of VR mode.
 */
function WebVRManager(renderer, effect, params) {
  this.params = params || {};

  this.mode = Modes.UNKNOWN;

  // Set option to hide the button.
  this.hideButton = this.params.hideButton || false;
  // Whether or not the FOV should be distorted or un-distorted. By default, it
  // should be distorted, but in the case of vertex shader based distortion,
  // ensure that we use undistorted parameters.
  this.predistorted = !!this.params.predistorted;

  // Save the THREE.js renderer and effect for later.
  this.renderer = renderer;
  this.effect = effect;
  var polyfillWrapper = document.querySelector('.webvr-polyfill-fullscreen-wrapper');
  this.button = new ButtonManager(polyfillWrapper);

  this.isFullscreenDisabled = !!Util.getQueryParameter('no_fullscreen');
  this.startMode = Modes.NORMAL;
  var startModeParam = parseInt(Util.getQueryParameter('start_mode'));
  if (!isNaN(startModeParam)) {
    this.startMode = startModeParam;
  }

  if (this.hideButton) {
    this.button.setVisibility(false);
  }

  // Check if the browser is compatible with WebVR.
  this.getDeviceByType_(VRDisplay).then(function(hmd) {
    this.hmd = hmd;

    // Only enable VR mode if there's a VR device attached or we are running the
    // polyfill on mobile.
    if (!this.isVRCompatibleOverride) {
      this.isVRCompatible =  !hmd.isPolyfilled || Util.isMobile();
    }

    switch (this.startMode) {
      case Modes.MAGIC_WINDOW:
        this.setMode_(Modes.MAGIC_WINDOW);
        break;
      case Modes.VR:
        this.enterVRMode_();
        this.setMode_(Modes.VR);
        break;
      default:
        this.setMode_(Modes.NORMAL);
    }

    this.emit('initialized');
  }.bind(this));

  // Hook up button listeners.
  this.button.on('fs', this.onFSClick_.bind(this));
  this.button.on('vr', this.onVRClick_.bind(this));

  // Bind to fullscreen events.
  document.addEventListener('webkitfullscreenchange',
      this.onFullscreenChange_.bind(this));
  document.addEventListener('mozfullscreenchange',
      this.onFullscreenChange_.bind(this));
  document.addEventListener('msfullscreenchange',
      this.onFullscreenChange_.bind(this));

  // Bind to VR* specific events.
  window.addEventListener('vrdisplaypresentchange',
      this.onVRDisplayPresentChange_.bind(this));
  window.addEventListener('vrdisplaydeviceparamschange',
      this.onVRDisplayDeviceParamsChange_.bind(this));
}

WebVRManager.prototype = new Emitter();

// Expose these values externally.
WebVRManager.Modes = Modes;

WebVRManager.prototype.render = function(scene, camera, timestamp) {
  // Scene may be an array of two scenes, one for each eye.
  if (scene instanceof Array) {
    this.effect.render(scene[0], camera);
  } else {
    this.effect.render(scene, camera);
  }
};

WebVRManager.prototype.setVRCompatibleOverride = function(isVRCompatible) {
  this.isVRCompatible = isVRCompatible;
  this.isVRCompatibleOverride = true;

  // Don't actually change modes, just update the buttons.
  this.button.setMode(this.mode, this.isVRCompatible);
};

WebVRManager.prototype.setFullscreenCallback = function(callback) {
  this.fullscreenCallback = callback;
};

WebVRManager.prototype.setVRCallback = function(callback) {
  this.vrCallback = callback;
};

WebVRManager.prototype.setExitFullscreenCallback = function(callback) {
  this.exitFullscreenCallback = callback;
}

/**
 * Promise returns true if there is at least one HMD device available.
 */
WebVRManager.prototype.getDeviceByType_ = function(type) {
  return new Promise(function(resolve, reject) {
    navigator.getVRDisplays().then(function(displays) {
      // Promise succeeds, but check if there are any displays actually.
      for (var i = 0; i < displays.length; i++) {
        if (displays[i] instanceof type) {
          resolve(displays[i]);
          break;
        }
      }
      resolve(null);
    }, function() {
      // No displays are found.
      resolve(null);
    });
  });
};

/**
 * Helper for entering VR mode.
 */
WebVRManager.prototype.enterVRMode_ = function() {
  this.hmd.requestPresent([{
    source: this.renderer.domElement,
    predistorted: this.predistorted
  }]);
};

WebVRManager.prototype.setMode_ = function(mode) {
  var oldMode = this.mode;
  if (mode == this.mode) {
    console.warn('Not changing modes, already in %s', mode);
    return;
  }
  // console.log('Mode change: %s => %s', this.mode, mode);
  this.mode = mode;
  this.button.setMode(mode, this.isVRCompatible);

  // Emit an event indicating the mode changed.
  this.emit('modechange', mode, oldMode);
};

/**
 * Main button was clicked.
 */
WebVRManager.prototype.onFSClick_ = function() {
  switch (this.mode) {
    case Modes.NORMAL:
      // TODO: Remove this hack if/when iOS gets real fullscreen mode.
      // If this is an iframe on iOS, break out and open in no_fullscreen mode.
      if (Util.isIOS() && Util.isIFrame()) {
        if (this.fullscreenCallback) {
          this.fullscreenCallback();
        } else {
          var url = window.location.href;
          url = Util.appendQueryParameter(url, 'no_fullscreen', 'true');
          url = Util.appendQueryParameter(url, 'start_mode', Modes.MAGIC_WINDOW);
          top.location.href = url;
          return;
        }
      }
      this.setMode_(Modes.MAGIC_WINDOW);
      this.requestFullscreen_();
      break;
    case Modes.MAGIC_WINDOW:
      if (this.isFullscreenDisabled) {
        window.history.back();
        return;
      }
      if (this.exitFullscreenCallback) {
        this.exitFullscreenCallback();
      }
      this.setMode_(Modes.NORMAL);
      this.exitFullscreen_();
      break;
  }
};

/**
 * The VR button was clicked.
 */
WebVRManager.prototype.onVRClick_ = function() {
  // TODO: Remove this hack when iOS has fullscreen mode.
  // If this is an iframe on iOS, break out and open in no_fullscreen mode.
  if (this.mode == Modes.NORMAL && Util.isIOS() && Util.isIFrame()) {
    if (this.vrCallback) {
      this.vrCallback();
    } else {
      var url = window.location.href;
      url = Util.appendQueryParameter(url, 'no_fullscreen', 'true');
      url = Util.appendQueryParameter(url, 'start_mode', Modes.VR);
      top.location.href = url;
      return;
    }
  }
  this.enterVRMode_();
};

WebVRManager.prototype.requestFullscreen_ = function() {
  var canvas = document.body;
  //var canvas = this.renderer.domElement;
  if (canvas.requestFullscreen) {
    canvas.requestFullscreen();
  } else if (canvas.mozRequestFullScreen) {
    canvas.mozRequestFullScreen();
  } else if (canvas.webkitRequestFullscreen) {
    canvas.webkitRequestFullscreen();
  } else if (canvas.msRequestFullscreen) {
    canvas.msRequestFullscreen();
  }
};

WebVRManager.prototype.exitFullscreen_ = function() {
  if (document.exitFullscreen) {
    document.exitFullscreen();
  } else if (document.mozCancelFullScreen) {
    document.mozCancelFullScreen();
  } else if (document.webkitExitFullscreen) {
    document.webkitExitFullscreen();
  } else if (document.msExitFullscreen) {
    document.msExitFullscreen();
  }
};

WebVRManager.prototype.onVRDisplayPresentChange_ = function(e) {
  console.log('onVRDisplayPresentChange_', e);
  if (this.hmd.isPresenting) {
    this.setMode_(Modes.VR);
  } else {
    this.setMode_(Modes.NORMAL);
  }
};

WebVRManager.prototype.onVRDisplayDeviceParamsChange_ = function(e) {
  console.log('onVRDisplayDeviceParamsChange_', e);
};

WebVRManager.prototype.onFullscreenChange_ = function(e) {
  // If we leave full-screen, go back to normal mode.
  if (document.webkitFullscreenElement === null ||
      document.mozFullScreenElement === null) {
    this.setMode_(Modes.NORMAL);
  }
};

module.exports = WebVRManager;

},{"./button-manager.js":1,"./emitter.js":2,"./modes.js":3,"./util.js":4}]},{},[5])(5)
});
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],8:[function(require,module,exports){
(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(_dereq_,module,exports){
'use strict';
/* eslint-disable no-unused-vars */
var hasOwnProperty = Object.prototype.hasOwnProperty;
var propIsEnumerable = Object.prototype.propertyIsEnumerable;

function toObject(val) {
	if (val === null || val === undefined) {
		throw new TypeError('Object.assign cannot be called with null or undefined');
	}

	return Object(val);
}

function shouldUseNative() {
	try {
		if (!Object.assign) {
			return false;
		}

		// Detect buggy property enumeration order in older V8 versions.

		// https://bugs.chromium.org/p/v8/issues/detail?id=4118
		var test1 = new String('abc');  // eslint-disable-line
		test1[5] = 'de';
		if (Object.getOwnPropertyNames(test1)[0] === '5') {
			return false;
		}

		// https://bugs.chromium.org/p/v8/issues/detail?id=3056
		var test2 = {};
		for (var i = 0; i < 10; i++) {
			test2['_' + String.fromCharCode(i)] = i;
		}
		var order2 = Object.getOwnPropertyNames(test2).map(function (n) {
			return test2[n];
		});
		if (order2.join('') !== '0123456789') {
			return false;
		}

		// https://bugs.chromium.org/p/v8/issues/detail?id=3056
		var test3 = {};
		'abcdefghijklmnopqrst'.split('').forEach(function (letter) {
			test3[letter] = letter;
		});
		if (Object.keys(Object.assign({}, test3)).join('') !==
				'abcdefghijklmnopqrst') {
			return false;
		}

		return true;
	} catch (e) {
		// We don't expect any of the above to throw, but better to be safe.
		return false;
	}
}

module.exports = shouldUseNative() ? Object.assign : function (target, source) {
	var from;
	var to = toObject(target);
	var symbols;

	for (var s = 1; s < arguments.length; s++) {
		from = Object(arguments[s]);

		for (var key in from) {
			if (hasOwnProperty.call(from, key)) {
				to[key] = from[key];
			}
		}

		if (Object.getOwnPropertySymbols) {
			symbols = Object.getOwnPropertySymbols(from);
			for (var i = 0; i < symbols.length; i++) {
				if (propIsEnumerable.call(from, symbols[i])) {
					to[symbols[i]] = from[symbols[i]];
				}
			}
		}
	}

	return to;
};

},{}],2:[function(_dereq_,module,exports){
/*
 * Copyright 2015 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

var Util = _dereq_('./util.js');
var WakeLock = _dereq_('./wakelock.js');

// Start at a higher number to reduce chance of conflict.
var nextDisplayId = 1000;
var hasShowDeprecationWarning = false;

var defaultLeftBounds = [0, 0, 0.5, 1];
var defaultRightBounds = [0.5, 0, 0.5, 1];

/**
 * The base class for all VR displays.
 */
function VRDisplay() {
  this.isPolyfilled = true;
  this.displayId = nextDisplayId++;
  this.displayName = 'webvr-polyfill displayName';

  this.isConnected = true;
  this.isPresenting = false;
  this.capabilities = {
    hasPosition: false,
    hasOrientation: false,
    hasExternalDisplay: false,
    canPresent: false,
    maxLayers: 1
  };
  this.stageParameters = null;

  // "Private" members.
  this.waitingForPresent_ = false;
  this.layer_ = null;

  this.fullscreenElement_ = null;
  this.fullscreenWrapper_ = null;
  this.fullscreenElementCachedStyle_ = null;

  this.fullscreenEventTarget_ = null;
  this.fullscreenChangeHandler_ = null;
  this.fullscreenErrorHandler_ = null;

  this.wakelock_ = new WakeLock();
}

VRDisplay.prototype.getPose = function() {
  // TODO: Technically this should retain it's value for the duration of a frame
  // but I doubt that's practical to do in javascript.
  return this.getImmediatePose();
};

VRDisplay.prototype.requestAnimationFrame = function(callback) {
  return window.requestAnimationFrame(callback);
};

VRDisplay.prototype.cancelAnimationFrame = function(id) {
  return window.cancelAnimationFrame(id);
};

VRDisplay.prototype.wrapForFullscreen = function(element) {
  // Don't wrap in iOS.
  if (Util.isIOS()) {
    return element;
  }
  if (!this.fullscreenWrapper_) {
    this.fullscreenWrapper_ = document.createElement('div');
    var cssProperties = [
      'height: ' + Math.min(screen.height, screen.width) + 'px !important',
      'top: 0 !important',
      'left: 0 !important',
      'right: 0 !important',
      'border: 0',
      'margin: 0',
      'padding: 0',
      'z-index: 999999 !important',
      'position: fixed',
    ];
    this.fullscreenWrapper_.setAttribute('style', cssProperties.join('; ') + ';');
    this.fullscreenWrapper_.classList.add('webvr-polyfill-fullscreen-wrapper');
  }

  if (this.fullscreenElement_ == element) {
    return this.fullscreenWrapper_;
  }

  // Remove any previously applied wrappers
  this.removeFullscreenWrapper();

  this.fullscreenElement_ = element;
  var parent = this.fullscreenElement_.parentElement;
  parent.insertBefore(this.fullscreenWrapper_, this.fullscreenElement_);
  parent.removeChild(this.fullscreenElement_);
  this.fullscreenWrapper_.insertBefore(this.fullscreenElement_, this.fullscreenWrapper_.firstChild);
  this.fullscreenElementCachedStyle_ = this.fullscreenElement_.getAttribute('style');

  var self = this;
  function applyFullscreenElementStyle() {
    if (!self.fullscreenElement_) {
      return;
    }

    var cssProperties = [
      'position: absolute',
      'top: 0',
      'left: 0',
      'width: ' + Math.max(screen.width, screen.height) + 'px',
      'height: ' + Math.min(screen.height, screen.width) + 'px',
      'border: 0',
      'margin: 0',
      'padding: 0',
    ];
    self.fullscreenElement_.setAttribute('style', cssProperties.join('; ') + ';');
  }

  applyFullscreenElementStyle();

  return this.fullscreenWrapper_;
};

VRDisplay.prototype.removeFullscreenWrapper = function() {
  if (!this.fullscreenElement_) {
    return;
  }

  var element = this.fullscreenElement_;
  if (this.fullscreenElementCachedStyle_) {
    element.setAttribute('style', this.fullscreenElementCachedStyle_);
  } else {
    element.removeAttribute('style');
  }
  this.fullscreenElement_ = null;
  this.fullscreenElementCachedStyle_ = null;

  var parent = this.fullscreenWrapper_.parentElement;
  this.fullscreenWrapper_.removeChild(element);
  parent.insertBefore(element, this.fullscreenWrapper_);
  parent.removeChild(this.fullscreenWrapper_);

  return element;
};

VRDisplay.prototype.requestPresent = function(layers) {
  var wasPresenting = this.isPresenting;
  var self = this;

  if (!(layers instanceof Array)) {
    if (!hasShowDeprecationWarning) {
      console.warn("Using a deprecated form of requestPresent. Should pass in an array of VRLayers.");
      hasShowDeprecationWarning = true;
    }
    layers = [layers];
  }

  return new Promise(function(resolve, reject) {
    if (!self.capabilities.canPresent) {
      reject(new Error('VRDisplay is not capable of presenting.'));
      return;
    }

    if (layers.length == 0 || layers.length > self.capabilities.maxLayers) {
      reject(new Error('Invalid number of layers.'));
      return;
    }

    var incomingLayer = layers[0];
    if (!incomingLayer.source) {
      /*
      todo: figure out the correct behavior if the source is not provided.
      see https://github.com/w3c/webvr/issues/58
      */
      resolve();
      return;
    }

    var leftBounds = incomingLayer.leftBounds || defaultLeftBounds;
    var rightBounds = incomingLayer.rightBounds || defaultRightBounds;
    if (wasPresenting) {
      // Already presenting, just changing configuration
      var changed = false;
      var layer = self.layer_;
      if (layer.source !== incomingLayer.source) {
        layer.source = incomingLayer.source;
        changed = true;
      }

      for (var i = 0; i < 4; i++) {
        if (layer.leftBounds[i] !== leftBounds[i]) {
          layer.leftBounds[i] = leftBounds[i];
          changed = true;
        }
        if (layer.rightBounds[i] !== rightBounds[i]) {
          layer.rightBounds[i] = rightBounds[i];
          changed = true;
        }
      }

      if (changed) {
        self.fireVRDisplayPresentChange_();
      }
      resolve();
      return;
    }

    // Was not already presenting.
    self.layer_ = {
      predistorted: incomingLayer.predistorted,
      source: incomingLayer.source,
      leftBounds: leftBounds.slice(0),
      rightBounds: rightBounds.slice(0)
    };

    self.waitingForPresent_ = false;
    if (self.layer_ && self.layer_.source) {
      var fullscreenElement = self.wrapForFullscreen(self.layer_.source);

      function onFullscreenChange() {
        var actualFullscreenElement = Util.getFullscreenElement();

        self.isPresenting = (fullscreenElement === actualFullscreenElement);
        if (self.isPresenting) {
          if (screen.orientation && screen.orientation.lock) {
            screen.orientation.lock('landscape-primary').catch(function(error){
                    console.error('screen.orientation.lock() failed due to', error.message)
            });
          }
          self.waitingForPresent_ = false;
          self.beginPresent_();
          resolve();
        } else {
          if (screen.orientation && screen.orientation.unlock) {
            screen.orientation.unlock();
          }
          self.removeFullscreenWrapper();
          self.wakelock_.release();
          self.endPresent_();
          self.removeFullscreenListeners_();
        }
        self.fireVRDisplayPresentChange_();
      }
      function onFullscreenError() {
        if (!self.waitingForPresent_) {
          return;
        }

        self.removeFullscreenWrapper();
        self.removeFullscreenListeners_();

        self.wakelock_.release();
        self.waitingForPresent_ = false;
        self.isPresenting = false;

        reject(new Error('Unable to present.'));
      }

      self.addFullscreenListeners_(fullscreenElement,
          onFullscreenChange, onFullscreenError);

      if (Util.requestFullscreen(fullscreenElement)) {
        self.wakelock_.request();
        self.waitingForPresent_ = true;
      } else if (Util.isIOS()) {
        // *sigh* Just fake it.
        self.wakelock_.request();
        self.isPresenting = true;
        self.beginPresent_();
        self.fireVRDisplayPresentChange_();
        resolve();
      }
    }

    if (!self.waitingForPresent_ && !Util.isIOS()) {
      Util.exitFullscreen();
      reject(new Error('Unable to present.'));
    }
  });
};

VRDisplay.prototype.exitPresent = function() {
  var wasPresenting = this.isPresenting;
  var self = this;
  this.isPresenting = false;
  this.layer_ = null;
  this.wakelock_.release();

  return new Promise(function(resolve, reject) {
    if (wasPresenting) {
      if (!Util.exitFullscreen() && Util.isIOS()) {
        self.endPresent_();
        self.fireVRDisplayPresentChange_();
      }

      resolve();
    } else {
      reject(new Error('Was not presenting to VRDisplay.'));
    }
  });
};

VRDisplay.prototype.getLayers = function() {
  if (this.layer_) {
    return [this.layer_];
  }
  return [];
};

VRDisplay.prototype.fireVRDisplayPresentChange_ = function() {
  var event = new CustomEvent('vrdisplaypresentchange', {detail: {vrdisplay: this}});
  window.dispatchEvent(event);
};

VRDisplay.prototype.addFullscreenListeners_ = function(element, changeHandler, errorHandler) {
  this.removeFullscreenListeners_();

  this.fullscreenEventTarget_ = element;
  this.fullscreenChangeHandler_ = changeHandler;
  this.fullscreenErrorHandler_ = errorHandler;

  if (changeHandler) {
    element.addEventListener('fullscreenchange', changeHandler, false);
    element.addEventListener('webkitfullscreenchange', changeHandler, false);
    document.addEventListener('mozfullscreenchange', changeHandler, false);
    element.addEventListener('msfullscreenchange', changeHandler, false);
  }

  if (errorHandler) {
    element.addEventListener('fullscreenerror', errorHandler, false);
    element.addEventListener('webkitfullscreenerror', errorHandler, false);
    document.addEventListener('mozfullscreenerror', errorHandler, false);
    element.addEventListener('msfullscreenerror', errorHandler, false);
  }
};

VRDisplay.prototype.removeFullscreenListeners_ = function() {
  if (!this.fullscreenEventTarget_)
    return;

  var element = this.fullscreenEventTarget_;

  if (this.fullscreenChangeHandler_) {
    var changeHandler = this.fullscreenChangeHandler_;
    element.removeEventListener('fullscreenchange', changeHandler, false);
    element.removeEventListener('webkitfullscreenchange', changeHandler, false);
    document.removeEventListener('mozfullscreenchange', changeHandler, false);
    element.removeEventListener('msfullscreenchange', changeHandler, false);
  }

  if (this.fullscreenErrorHandler_) {
    var errorHandler = this.fullscreenErrorHandler_;
    element.removeEventListener('fullscreenerror', errorHandler, false);
    element.removeEventListener('webkitfullscreenerror', errorHandler, false);
    document.removeEventListener('mozfullscreenerror', errorHandler, false);
    element.removeEventListener('msfullscreenerror', errorHandler, false);
  }

  this.fullscreenEventTarget_ = null;
  this.fullscreenChangeHandler_ = null;
  this.fullscreenErrorHandler_ = null;
};

VRDisplay.prototype.beginPresent_ = function() {
  // Override to add custom behavior when presentation begins.
};

VRDisplay.prototype.endPresent_ = function() {
  // Override to add custom behavior when presentation ends.
};

VRDisplay.prototype.submitFrame = function(pose) {
  // Override to add custom behavior for frame submission.
};

VRDisplay.prototype.getEyeParameters = function(whichEye) {
  // Override to return accurate eye parameters if canPresent is true.
  return null;
};

/*
 * Deprecated classes
 */

/**
 * The base class for all VR devices. (Deprecated)
 */
function VRDevice() {
  this.isPolyfilled = true;
  this.hardwareUnitId = 'webvr-polyfill hardwareUnitId';
  this.deviceId = 'webvr-polyfill deviceId';
  this.deviceName = 'webvr-polyfill deviceName';
}

/**
 * The base class for all VR HMD devices. (Deprecated)
 */
function HMDVRDevice() {
}
HMDVRDevice.prototype = new VRDevice();

/**
 * The base class for all VR position sensor devices. (Deprecated)
 */
function PositionSensorVRDevice() {
}
PositionSensorVRDevice.prototype = new VRDevice();

module.exports.VRDisplay = VRDisplay;
module.exports.VRDevice = VRDevice;
module.exports.HMDVRDevice = HMDVRDevice;
module.exports.PositionSensorVRDevice = PositionSensorVRDevice;

},{"./util.js":22,"./wakelock.js":24}],3:[function(_dereq_,module,exports){
/*
 * Copyright 2016 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

var CardboardUI = _dereq_('./cardboard-ui.js');
var Util = _dereq_('./util.js');
var WGLUPreserveGLState = _dereq_('./deps/wglu-preserve-state.js');

var distortionVS = [
  'attribute vec2 position;',
  'attribute vec3 texCoord;',

  'varying vec2 vTexCoord;',

  'uniform vec4 viewportOffsetScale[2];',

  'void main() {',
  '  vec4 viewport = viewportOffsetScale[int(texCoord.z)];',
  '  vTexCoord = (texCoord.xy * viewport.zw) + viewport.xy;',
  '  gl_Position = vec4( position, 1.0, 1.0 );',
  '}',
].join('\n');

var distortionFS = [
  'precision mediump float;',
  'uniform sampler2D diffuse;',

  'varying vec2 vTexCoord;',

  'void main() {',
  '  gl_FragColor = texture2D(diffuse, vTexCoord);',
  '}',
].join('\n');

/**
 * A mesh-based distorter.
 */
function CardboardDistorter(gl) {
  this.gl = gl;
  this.ctxAttribs = gl.getContextAttributes();

  this.meshWidth = 20;
  this.meshHeight = 20;

  this.bufferScale = WebVRConfig.BUFFER_SCALE;

  this.bufferWidth = gl.drawingBufferWidth;
  this.bufferHeight = gl.drawingBufferHeight;

  // Patching support
  this.realBindFramebuffer = gl.bindFramebuffer;
  this.realEnable = gl.enable;
  this.realDisable = gl.disable;
  this.realColorMask = gl.colorMask;
  this.realClearColor = gl.clearColor;
  this.realViewport = gl.viewport;

  if (!Util.isIOS()) {
    this.realCanvasWidth = Object.getOwnPropertyDescriptor(gl.canvas.__proto__, 'width');
    this.realCanvasHeight = Object.getOwnPropertyDescriptor(gl.canvas.__proto__, 'height');
  }

  this.isPatched = false;

  // State tracking
  this.lastBoundFramebuffer = null;
  this.cullFace = false;
  this.depthTest = false;
  this.blend = false;
  this.scissorTest = false;
  this.stencilTest = false;
  this.viewport = [0, 0, 0, 0];
  this.colorMask = [true, true, true, true];
  this.clearColor = [0, 0, 0, 0];

  this.attribs = {
    position: 0,
    texCoord: 1
  };
  this.program = Util.linkProgram(gl, distortionVS, distortionFS, this.attribs);
  this.uniforms = Util.getProgramUniforms(gl, this.program);

  this.viewportOffsetScale = new Float32Array(8);
  this.setTextureBounds();

  this.vertexBuffer = gl.createBuffer();
  this.indexBuffer = gl.createBuffer();
  this.indexCount = 0;

  this.renderTarget = gl.createTexture();
  this.framebuffer = gl.createFramebuffer();

  this.depthStencilBuffer = null;
  this.depthBuffer = null;
  this.stencilBuffer = null;

  if (this.ctxAttribs.depth && this.ctxAttribs.stencil) {
    this.depthStencilBuffer = gl.createRenderbuffer();
  } else if (this.ctxAttribs.depth) {
    this.depthBuffer = gl.createRenderbuffer();
  } else if (this.ctxAttribs.stencil) {
    this.stencilBuffer = gl.createRenderbuffer();
  }

  this.patch();

  this.onResize();

  if (!WebVRConfig.CARDBOARD_UI_DISABLED) {
    this.cardboardUI = new CardboardUI(gl);
  }
};

/**
 * Tears down all the resources created by the distorter and removes any
 * patches.
 */
CardboardDistorter.prototype.destroy = function() {
  var gl = this.gl;

  this.unpatch();

  gl.deleteProgram(this.program);
  gl.deleteBuffer(this.vertexBuffer);
  gl.deleteBuffer(this.indexBuffer);
  gl.deleteTexture(this.renderTarget);
  gl.deleteFramebuffer(this.framebuffer);
  if (this.depthStencilBuffer) {
    gl.deleteRenderbuffer(this.depthStencilBuffer);
  }
  if (this.depthBuffer) {
    gl.deleteRenderbuffer(this.depthBuffer);
  }
  if (this.stencilBuffer) {
    gl.deleteRenderbuffer(this.stencilBuffer);
  }

  if (this.cardboardUI) {
    this.cardboardUI.destroy();
  }
};


/**
 * Resizes the backbuffer to match the canvas width and height.
 */
CardboardDistorter.prototype.onResize = function() {
  var gl = this.gl;
  var self = this;

  var glState = [
    gl.RENDERBUFFER_BINDING,
    gl.TEXTURE_BINDING_2D, gl.TEXTURE0
  ];

  WGLUPreserveGLState(gl, glState, function(gl) {
    // Bind real backbuffer and clear it once. We don't need to clear it again
    // after that because we're overwriting the same area every frame.
    self.realBindFramebuffer.call(gl, gl.FRAMEBUFFER, null);

    // Put things in a good state
    if (self.scissorTest) { self.realDisable.call(gl, gl.SCISSOR_TEST); }
    self.realColorMask.call(gl, true, true, true, true);
    self.realViewport.call(gl, 0, 0, gl.drawingBufferWidth, gl.drawingBufferHeight);
    self.realClearColor.call(gl, 0, 0, 0, 1);

    gl.clear(gl.COLOR_BUFFER_BIT);

    // Now bind and resize the fake backbuffer
    self.realBindFramebuffer.call(gl, gl.FRAMEBUFFER, self.framebuffer);

    gl.bindTexture(gl.TEXTURE_2D, self.renderTarget);
    gl.texImage2D(gl.TEXTURE_2D, 0, self.ctxAttribs.alpha ? gl.RGBA : gl.RGB,
        self.bufferWidth, self.bufferHeight, 0,
        self.ctxAttribs.alpha ? gl.RGBA : gl.RGB, gl.UNSIGNED_BYTE, null);
    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);
    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);
    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);
    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);
    gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, self.renderTarget, 0);

    if (self.ctxAttribs.depth && self.ctxAttribs.stencil) {
      gl.bindRenderbuffer(gl.RENDERBUFFER, self.depthStencilBuffer);
      gl.renderbufferStorage(gl.RENDERBUFFER, gl.DEPTH_STENCIL,
          self.bufferWidth, self.bufferHeight);
      gl.framebufferRenderbuffer(gl.FRAMEBUFFER, gl.DEPTH_STENCIL_ATTACHMENT,
          gl.RENDERBUFFER, self.depthStencilBuffer);
    } else if (self.ctxAttribs.depth) {
      gl.bindRenderbuffer(gl.RENDERBUFFER, self.depthBuffer);
      gl.renderbufferStorage(gl.RENDERBUFFER, gl.DEPTH_COMPONENT16,
          self.bufferWidth, self.bufferHeight);
      gl.framebufferRenderbuffer(gl.FRAMEBUFFER, gl.DEPTH_ATTACHMENT,
          gl.RENDERBUFFER, self.depthBuffer);
    } else if (self.ctxAttribs.stencil) {
      gl.bindRenderbuffer(gl.RENDERBUFFER, self.stencilBuffer);
      gl.renderbufferStorage(gl.RENDERBUFFER, gl.STENCIL_INDEX8,
          self.bufferWidth, self.bufferHeight);
      gl.framebufferRenderbuffer(gl.FRAMEBUFFER, gl.STENCIL_ATTACHMENT,
          gl.RENDERBUFFER, self.stencilBuffer);
    }

    if (!gl.checkFramebufferStatus(gl.FRAMEBUFFER) === gl.FRAMEBUFFER_COMPLETE) {
      console.error('Framebuffer incomplete!');
    }

    self.realBindFramebuffer.call(gl, gl.FRAMEBUFFER, self.lastBoundFramebuffer);

    if (self.scissorTest) { self.realEnable.call(gl, gl.SCISSOR_TEST); }

    self.realColorMask.apply(gl, self.colorMask);
    self.realViewport.apply(gl, self.viewport);
    self.realClearColor.apply(gl, self.clearColor);
  });

  if (this.cardboardUI) {
    this.cardboardUI.onResize();
  }
};

CardboardDistorter.prototype.patch = function() {
  if (this.isPatched) {
    return;
  }

  var self = this;
  var canvas = this.gl.canvas;
  var gl = this.gl;

  if (!Util.isIOS()) {
    canvas.width = Util.getScreenWidth() * this.bufferScale;
    canvas.height = Util.getScreenHeight() * this.bufferScale;

    Object.defineProperty(canvas, 'width', {
      configurable: true,
      enumerable: true,
      get: function() {
        return self.bufferWidth;
      },
      set: function(value) {
        self.bufferWidth = value;
        self.onResize();
      }
    });

    Object.defineProperty(canvas, 'height', {
      configurable: true,
      enumerable: true,
      get: function() {
        return self.bufferHeight;
      },
      set: function(value) {
        self.bufferHeight = value;
        self.onResize();
      }
    });
  }

  this.lastBoundFramebuffer = gl.getParameter(gl.FRAMEBUFFER_BINDING);

  if (this.lastBoundFramebuffer == null) {
    this.lastBoundFramebuffer = this.framebuffer;
    this.gl.bindFramebuffer(gl.FRAMEBUFFER, this.framebuffer);
  }

  this.gl.bindFramebuffer = function(target, framebuffer) {
    self.lastBoundFramebuffer = framebuffer ? framebuffer : self.framebuffer;
    // Silently make calls to bind the default framebuffer bind ours instead.
    self.realBindFramebuffer.call(gl, target, self.lastBoundFramebuffer);
  };

  this.cullFace = gl.getParameter(gl.CULL_FACE);
  this.depthTest = gl.getParameter(gl.DEPTH_TEST);
  this.blend = gl.getParameter(gl.BLEND);
  this.scissorTest = gl.getParameter(gl.SCISSOR_TEST);
  this.stencilTest = gl.getParameter(gl.STENCIL_TEST);

  gl.enable = function(pname) {
    switch (pname) {
      case gl.CULL_FACE: self.cullFace = true; break;
      case gl.DEPTH_TEST: self.depthTest = true; break;
      case gl.BLEND: self.blend = true; break;
      case gl.SCISSOR_TEST: self.scissorTest = true; break;
      case gl.STENCIL_TEST: self.stencilTest = true; break;
    }
    self.realEnable.call(gl, pname);
  };

  gl.disable = function(pname) {
    switch (pname) {
      case gl.CULL_FACE: self.cullFace = false; break;
      case gl.DEPTH_TEST: self.depthTest = false; break;
      case gl.BLEND: self.blend = false; break;
      case gl.SCISSOR_TEST: self.scissorTest = false; break;
      case gl.STENCIL_TEST: self.stencilTest = false; break;
    }
    self.realDisable.call(gl, pname);
  };

  this.colorMask = gl.getParameter(gl.COLOR_WRITEMASK);
  gl.colorMask = function(r, g, b, a) {
    self.colorMask[0] = r;
    self.colorMask[1] = g;
    self.colorMask[2] = b;
    self.colorMask[3] = a;
    self.realColorMask.call(gl, r, g, b, a);
  };

  this.clearColor = gl.getParameter(gl.COLOR_CLEAR_VALUE);
  gl.clearColor = function(r, g, b, a) {
    self.clearColor[0] = r;
    self.clearColor[1] = g;
    self.clearColor[2] = b;
    self.clearColor[3] = a;
    self.realClearColor.call(gl, r, g, b, a);
  };

  this.viewport = gl.getParameter(gl.VIEWPORT);
  gl.viewport = function(x, y, w, h) {
    self.viewport[0] = x;
    self.viewport[1] = y;
    self.viewport[2] = w;
    self.viewport[3] = h;
    self.realViewport.call(gl, x, y, w, h);
  };

  this.isPatched = true;
  Util.safariCssSizeWorkaround(canvas);
};

CardboardDistorter.prototype.unpatch = function() {
  if (!this.isPatched) {
    return;
  }

  var gl = this.gl;
  var canvas = this.gl.canvas;

  if (!Util.isIOS()) {
    Object.defineProperty(canvas, 'width', this.realCanvasWidth);
    Object.defineProperty(canvas, 'height', this.realCanvasHeight);
  }
  canvas.width = this.bufferWidth;
  canvas.height = this.bufferHeight;

  gl.bindFramebuffer = this.realBindFramebuffer;
  gl.enable = this.realEnable;
  gl.disable = this.realDisable;
  gl.colorMask = this.realColorMask;
  gl.clearColor = this.realClearColor;
  gl.viewport = this.realViewport;

  // Check to see if our fake backbuffer is bound and bind the real backbuffer
  // if that's the case.
  if (this.lastBoundFramebuffer == this.framebuffer) {
    gl.bindFramebuffer(gl.FRAMEBUFFER, null);
  }

  this.isPatched = false;

  setTimeout(function() {
    Util.safariCssSizeWorkaround(canvas);
  }, 1);
};

CardboardDistorter.prototype.setTextureBounds = function(leftBounds, rightBounds) {
  if (!leftBounds) {
    leftBounds = [0, 0, 0.5, 1];
  }

  if (!rightBounds) {
    rightBounds = [0.5, 0, 0.5, 1];
  }

  // Left eye
  this.viewportOffsetScale[0] = leftBounds[0]; // X
  this.viewportOffsetScale[1] = leftBounds[1]; // Y
  this.viewportOffsetScale[2] = leftBounds[2]; // Width
  this.viewportOffsetScale[3] = leftBounds[3]; // Height

  // Right eye
  this.viewportOffsetScale[4] = rightBounds[0]; // X
  this.viewportOffsetScale[5] = rightBounds[1]; // Y
  this.viewportOffsetScale[6] = rightBounds[2]; // Width
  this.viewportOffsetScale[7] = rightBounds[3]; // Height
};

/**
 * Performs distortion pass on the injected backbuffer, rendering it to the real
 * backbuffer.
 */
CardboardDistorter.prototype.submitFrame = function() {
  var gl = this.gl;
  var self = this;

  var glState = [];

  if (!WebVRConfig.DIRTY_SUBMIT_FRAME_BINDINGS) {
    glState.push(
      gl.CURRENT_PROGRAM,
      gl.ARRAY_BUFFER_BINDING,
      gl.ELEMENT_ARRAY_BUFFER_BINDING,
      gl.TEXTURE_BINDING_2D, gl.TEXTURE0
    );
  }

  WGLUPreserveGLState(gl, glState, function(gl) {
    // Bind the real default framebuffer
    self.realBindFramebuffer.call(gl, gl.FRAMEBUFFER, null);

    // Make sure the GL state is in a good place
    if (self.cullFace) { self.realDisable.call(gl, gl.CULL_FACE); }
    if (self.depthTest) { self.realDisable.call(gl, gl.DEPTH_TEST); }
    if (self.blend) { self.realDisable.call(gl, gl.BLEND); }
    if (self.scissorTest) { self.realDisable.call(gl, gl.SCISSOR_TEST); }
    if (self.stencilTest) { self.realDisable.call(gl, gl.STENCIL_TEST); }
    self.realColorMask.call(gl, true, true, true, true);
    self.realViewport.call(gl, 0, 0, gl.drawingBufferWidth, gl.drawingBufferHeight);

    // If the backbuffer has an alpha channel clear every frame so the page
    // doesn't show through.
    if (self.ctxAttribs.alpha || Util.isIOS()) {
      self.realClearColor.call(gl, 0, 0, 0, 1);
      gl.clear(gl.COLOR_BUFFER_BIT);
    }

    // Bind distortion program and mesh
    gl.useProgram(self.program);

    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, self.indexBuffer);

    gl.bindBuffer(gl.ARRAY_BUFFER, self.vertexBuffer);
    gl.enableVertexAttribArray(self.attribs.position);
    gl.enableVertexAttribArray(self.attribs.texCoord);
    gl.vertexAttribPointer(self.attribs.position, 2, gl.FLOAT, false, 20, 0);
    gl.vertexAttribPointer(self.attribs.texCoord, 3, gl.FLOAT, false, 20, 8);

    gl.activeTexture(gl.TEXTURE0);
    gl.uniform1i(self.uniforms.diffuse, 0);
    gl.bindTexture(gl.TEXTURE_2D, self.renderTarget);

    gl.uniform4fv(self.uniforms.viewportOffsetScale, self.viewportOffsetScale);

    // Draws both eyes
    gl.drawElements(gl.TRIANGLES, self.indexCount, gl.UNSIGNED_SHORT, 0);

    if (self.cardboardUI) {
      self.cardboardUI.renderNoState();
    }

    // Bind the fake default framebuffer again
    self.realBindFramebuffer.call(self.gl, gl.FRAMEBUFFER, self.framebuffer);

    // If preserveDrawingBuffer == false clear the framebuffer
    if (!self.ctxAttribs.preserveDrawingBuffer) {
      self.realClearColor.call(gl, 0, 0, 0, 0);
      gl.clear(gl.COLOR_BUFFER_BIT);
    }

    if (!WebVRConfig.DIRTY_SUBMIT_FRAME_BINDINGS) {
      self.realBindFramebuffer.call(gl, gl.FRAMEBUFFER, self.lastBoundFramebuffer);
    }

    // Restore state
    if (self.cullFace) { self.realEnable.call(gl, gl.CULL_FACE); }
    if (self.depthTest) { self.realEnable.call(gl, gl.DEPTH_TEST); }
    if (self.blend) { self.realEnable.call(gl, gl.BLEND); }
    if (self.scissorTest) { self.realEnable.call(gl, gl.SCISSOR_TEST); }
    if (self.stencilTest) { self.realEnable.call(gl, gl.STENCIL_TEST); }

    self.realColorMask.apply(gl, self.colorMask);
    self.realViewport.apply(gl, self.viewport);
    if (self.ctxAttribs.alpha || !self.ctxAttribs.preserveDrawingBuffer) {
      self.realClearColor.apply(gl, self.clearColor);
    }
  });

  // Workaround for the fact that Safari doesn't allow us to patch the canvas
  // width and height correctly. After each submit frame check to see what the
  // real backbuffer size has been set to and resize the fake backbuffer size
  // to match.
  if (Util.isIOS()) {
    var canvas = gl.canvas;
    if (canvas.width != self.bufferWidth || canvas.height != self.bufferHeight) {
      self.bufferWidth = canvas.width;
      self.bufferHeight = canvas.height;
      self.onResize();
    }
  }
};

/**
 * Call when the deviceInfo has changed. At this point we need
 * to re-calculate the distortion mesh.
 */
CardboardDistorter.prototype.updateDeviceInfo = function(deviceInfo) {
  var gl = this.gl;
  var self = this;

  var glState = [gl.ARRAY_BUFFER_BINDING, gl.ELEMENT_ARRAY_BUFFER_BINDING];
  WGLUPreserveGLState(gl, glState, function(gl) {
    var vertices = self.computeMeshVertices_(self.meshWidth, self.meshHeight, deviceInfo);
    gl.bindBuffer(gl.ARRAY_BUFFER, self.vertexBuffer);
    gl.bufferData(gl.ARRAY_BUFFER, vertices, gl.STATIC_DRAW);

    // Indices don't change based on device parameters, so only compute once.
    if (!self.indexCount) {
      var indices = self.computeMeshIndices_(self.meshWidth, self.meshHeight);
      gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, self.indexBuffer);
      gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, indices, gl.STATIC_DRAW);
      self.indexCount = indices.length;
    }
  });
};

/**
 * Build the distortion mesh vertices.
 * Based on code from the Unity cardboard plugin.
 */
CardboardDistorter.prototype.computeMeshVertices_ = function(width, height, deviceInfo) {
  var vertices = new Float32Array(2 * width * height * 5);

  var lensFrustum = deviceInfo.getLeftEyeVisibleTanAngles();
  var noLensFrustum = deviceInfo.getLeftEyeNoLensTanAngles();
  var viewport = deviceInfo.getLeftEyeVisibleScreenRect(noLensFrustum);
  var vidx = 0;
  var iidx = 0;
  for (var e = 0; e < 2; e++) {
    for (var j = 0; j < height; j++) {
      for (var i = 0; i < width; i++, vidx++) {
        var u = i / (width - 1);
        var v = j / (height - 1);

        // Grid points regularly spaced in StreoScreen, and barrel distorted in
        // the mesh.
        var s = u;
        var t = v;
        var x = Util.lerp(lensFrustum[0], lensFrustum[2], u);
        var y = Util.lerp(lensFrustum[3], lensFrustum[1], v);
        var d = Math.sqrt(x * x + y * y);
        var r = deviceInfo.distortion.distortInverse(d);
        var p = x * r / d;
        var q = y * r / d;
        u = (p - noLensFrustum[0]) / (noLensFrustum[2] - noLensFrustum[0]);
        v = (q - noLensFrustum[3]) / (noLensFrustum[1] - noLensFrustum[3]);

        // Convert u,v to mesh screen coordinates.
        var aspect = deviceInfo.device.widthMeters / deviceInfo.device.heightMeters;

        // FIXME: The original Unity plugin multiplied U by the aspect ratio
        // and didn't multiply either value by 2, but that seems to get it
        // really close to correct looking for me. I hate this kind of "Don't
        // know why it works" code though, and wold love a more logical
        // explanation of what needs to happen here.
        u = (viewport.x + u * viewport.width - 0.5) * 2.0; //* aspect;
        v = (viewport.y + v * viewport.height - 0.5) * 2.0;

        vertices[(vidx * 5) + 0] = u; // position.x
        vertices[(vidx * 5) + 1] = v; // position.y
        vertices[(vidx * 5) + 2] = s; // texCoord.x
        vertices[(vidx * 5) + 3] = t; // texCoord.y
        vertices[(vidx * 5) + 4] = e; // texCoord.z (viewport index)
      }
    }
    var w = lensFrustum[2] - lensFrustum[0];
    lensFrustum[0] = -(w + lensFrustum[0]);
    lensFrustum[2] = w - lensFrustum[2];
    w = noLensFrustum[2] - noLensFrustum[0];
    noLensFrustum[0] = -(w + noLensFrustum[0]);
    noLensFrustum[2] = w - noLensFrustum[2];
    viewport.x = 1 - (viewport.x + viewport.width);
  }
  return vertices;
}

/**
 * Build the distortion mesh indices.
 * Based on code from the Unity cardboard plugin.
 */
CardboardDistorter.prototype.computeMeshIndices_ = function(width, height) {
  var indices = new Uint16Array(2 * (width - 1) * (height - 1) * 6);
  var halfwidth = width / 2;
  var halfheight = height / 2;
  var vidx = 0;
  var iidx = 0;
  for (var e = 0; e < 2; e++) {
    for (var j = 0; j < height; j++) {
      for (var i = 0; i < width; i++, vidx++) {
        if (i == 0 || j == 0)
          continue;
        // Build a quad.  Lower right and upper left quadrants have quads with
        // the triangle diagonal flipped to get the vignette to interpolate
        // correctly.
        if ((i <= halfwidth) == (j <= halfheight)) {
          // Quad diagonal lower left to upper right.
          indices[iidx++] = vidx;
          indices[iidx++] = vidx - width - 1;
          indices[iidx++] = vidx - width;
          indices[iidx++] = vidx - width - 1;
          indices[iidx++] = vidx;
          indices[iidx++] = vidx - 1;
        } else {
          // Quad diagonal upper left to lower right.
          indices[iidx++] = vidx - 1;
          indices[iidx++] = vidx - width;
          indices[iidx++] = vidx;
          indices[iidx++] = vidx - width;
          indices[iidx++] = vidx - 1;
          indices[iidx++] = vidx - width - 1;
        }
      }
    }
  }
  return indices;
};

CardboardDistorter.prototype.getOwnPropertyDescriptor_ = function(proto, attrName) {
  var descriptor = Object.getOwnPropertyDescriptor(proto, attrName);
  // In some cases (ahem... Safari), the descriptor returns undefined get and
  // set fields. In this case, we need to create a synthetic property
  // descriptor. This works around some of the issues in
  // https://github.com/borismus/webvr-polyfill/issues/46
  if (descriptor.get === undefined || descriptor.set === undefined) {
    descriptor.configurable = true;
    descriptor.enumerable = true;
    descriptor.get = function() {
      return this.getAttribute(attrName);
    };
    descriptor.set = function(val) {
      this.setAttribute(attrName, val);
    };
  }
  return descriptor;
};

module.exports = CardboardDistorter;

},{"./cardboard-ui.js":4,"./deps/wglu-preserve-state.js":6,"./util.js":22}],4:[function(_dereq_,module,exports){
/*
 * Copyright 2016 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

var Util = _dereq_('./util.js');
var WGLUPreserveGLState = _dereq_('./deps/wglu-preserve-state.js');

var uiVS = [
  'attribute vec2 position;',

  'uniform mat4 projectionMat;',

  'void main() {',
  '  gl_Position = projectionMat * vec4( position, -1.0, 1.0 );',
  '}',
].join('\n');

var uiFS = [
  'precision mediump float;',

  'uniform vec4 color;',

  'void main() {',
  '  gl_FragColor = color;',
  '}',
].join('\n');

var DEG2RAD = Math.PI/180.0;

// The gear has 6 identical sections, each spanning 60 degrees.
var kAnglePerGearSection = 60;

// Half-angle of the span of the outer rim.
var kOuterRimEndAngle = 12;

// Angle between the middle of the outer rim and the start of the inner rim.
var kInnerRimBeginAngle = 20;

// Distance from center to outer rim, normalized so that the entire model
// fits in a [-1, 1] x [-1, 1] square.
var kOuterRadius = 1;

// Distance from center to depressed rim, in model units.
var kMiddleRadius = 0.75;

// Radius of the inner hollow circle, in model units.
var kInnerRadius = 0.3125;

// Center line thickness in DP.
var kCenterLineThicknessDp = 4;

// Button width in DP.
var kButtonWidthDp = 28;

// Factor to scale the touch area that responds to the touch.
var kTouchSlopFactor = 1.5;

var Angles = [
  0, kOuterRimEndAngle, kInnerRimBeginAngle,
  kAnglePerGearSection - kInnerRimBeginAngle,
  kAnglePerGearSection - kOuterRimEndAngle
];

/**
 * Renders the alignment line and "options" gear. It is assumed that the canvas
 * this is rendered into covers the entire screen (or close to it.)
 */
function CardboardUI(gl) {
  this.gl = gl;

  this.attribs = {
    position: 0
  };
  this.program = Util.linkProgram(gl, uiVS, uiFS, this.attribs);
  this.uniforms = Util.getProgramUniforms(gl, this.program);

  this.vertexBuffer = gl.createBuffer();
  this.gearOffset = 0;
  this.gearVertexCount = 0;
  this.arrowOffset = 0;
  this.arrowVertexCount = 0;

  this.projMat = new Float32Array(16);

  this.listener = null;

  this.onResize();
};

/**
 * Tears down all the resources created by the UI renderer.
 */
CardboardUI.prototype.destroy = function() {
  var gl = this.gl;

  if (this.listener) {
    gl.canvas.removeEventListener('click', this.listener, false);
  }

  gl.deleteProgram(this.program);
  gl.deleteBuffer(this.vertexBuffer);
};

/**
 * Adds a listener to clicks on the gear and back icons
 */
CardboardUI.prototype.listen = function(optionsCallback, backCallback) {
  var canvas = this.gl.canvas;
  this.listener = function(event) {
    var midline = canvas.clientWidth / 2;
    var buttonSize = kButtonWidthDp * kTouchSlopFactor;
    // Check to see if the user clicked on (or around) the gear icon
    if (event.clientX > midline - buttonSize &&
        event.clientX < midline + buttonSize &&
        event.clientY > canvas.clientHeight - buttonSize) {
      optionsCallback(event);
    }
    // Check to see if the user clicked on (or around) the back icon
    else if (event.clientX < buttonSize && event.clientY < buttonSize) {
      backCallback(event);
    }
  };
  canvas.addEventListener('click', this.listener, false);
};

/**
 * Builds the UI mesh.
 */
CardboardUI.prototype.onResize = function() {
  var gl = this.gl;
  var self = this;

  var glState = [
    gl.ARRAY_BUFFER_BINDING
  ];

  WGLUPreserveGLState(gl, glState, function(gl) {
    var vertices = [];

    var midline = gl.drawingBufferWidth / 2;

    // Assumes your canvas width and height is scaled proportionately.
    // TODO(smus): The following causes buttons to become huge on iOS, but seems
    // like the right thing to do. For now, added a hack. But really, investigate why.
    var dps = (gl.drawingBufferWidth / (screen.width * window.devicePixelRatio));
    if (!Util.isIOS()) {
      dps *= window.devicePixelRatio;
    }

    var lineWidth = kCenterLineThicknessDp * dps / 2;
    var buttonSize = kButtonWidthDp * kTouchSlopFactor * dps;
    var buttonScale = kButtonWidthDp * dps / 2;
    var buttonBorder = ((kButtonWidthDp * kTouchSlopFactor) - kButtonWidthDp) * dps;

    // Build centerline
    vertices.push(midline - lineWidth, buttonSize);
    vertices.push(midline - lineWidth, gl.drawingBufferHeight);
    vertices.push(midline + lineWidth, buttonSize);
    vertices.push(midline + lineWidth, gl.drawingBufferHeight);

    // Build gear
    self.gearOffset = (vertices.length / 2);

    function addGearSegment(theta, r) {
      var angle = (90 - theta) * DEG2RAD;
      var x = Math.cos(angle);
      var y = Math.sin(angle);
      vertices.push(kInnerRadius * x * buttonScale + midline, kInnerRadius * y * buttonScale + buttonScale);
      vertices.push(r * x * buttonScale + midline, r * y * buttonScale + buttonScale);
    }

    for (var i = 0; i <= 6; i++) {
      var segmentTheta = i * kAnglePerGearSection;

      addGearSegment(segmentTheta, kOuterRadius);
      addGearSegment(segmentTheta + kOuterRimEndAngle, kOuterRadius);
      addGearSegment(segmentTheta + kInnerRimBeginAngle, kMiddleRadius);
      addGearSegment(segmentTheta + (kAnglePerGearSection - kInnerRimBeginAngle), kMiddleRadius);
      addGearSegment(segmentTheta + (kAnglePerGearSection - kOuterRimEndAngle), kOuterRadius);
    }

    self.gearVertexCount = (vertices.length / 2) - self.gearOffset;

    // Build back arrow
    self.arrowOffset = (vertices.length / 2);

    function addArrowVertex(x, y) {
      vertices.push(buttonBorder + x, gl.drawingBufferHeight - buttonBorder - y);
    }

    var angledLineWidth = lineWidth / Math.sin(45 * DEG2RAD);

    addArrowVertex(0, buttonScale);
    addArrowVertex(buttonScale, 0);
    addArrowVertex(buttonScale + angledLineWidth, angledLineWidth);
    addArrowVertex(angledLineWidth, buttonScale + angledLineWidth);

    addArrowVertex(angledLineWidth, buttonScale - angledLineWidth);
    addArrowVertex(0, buttonScale);
    addArrowVertex(buttonScale, buttonScale * 2);
    addArrowVertex(buttonScale + angledLineWidth, (buttonScale * 2) - angledLineWidth);

    addArrowVertex(angledLineWidth, buttonScale - angledLineWidth);
    addArrowVertex(0, buttonScale);

    addArrowVertex(angledLineWidth, buttonScale - lineWidth);
    addArrowVertex(kButtonWidthDp * dps, buttonScale - lineWidth);
    addArrowVertex(angledLineWidth, buttonScale + lineWidth);
    addArrowVertex(kButtonWidthDp * dps, buttonScale + lineWidth);

    self.arrowVertexCount = (vertices.length / 2) - self.arrowOffset;

    // Buffer data
    gl.bindBuffer(gl.ARRAY_BUFFER, self.vertexBuffer);
    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(vertices), gl.STATIC_DRAW);
  });
};

/**
 * Performs distortion pass on the injected backbuffer, rendering it to the real
 * backbuffer.
 */
CardboardUI.prototype.render = function() {
  var gl = this.gl;
  var self = this;

  var glState = [
    gl.CULL_FACE,
    gl.DEPTH_TEST,
    gl.BLEND,
    gl.SCISSOR_TEST,
    gl.STENCIL_TEST,
    gl.COLOR_WRITEMASK,
    gl.VIEWPORT,

    gl.CURRENT_PROGRAM,
    gl.ARRAY_BUFFER_BINDING
  ];

  WGLUPreserveGLState(gl, glState, function(gl) {
    // Make sure the GL state is in a good place
    gl.disable(gl.CULL_FACE);
    gl.disable(gl.DEPTH_TEST);
    gl.disable(gl.BLEND);
    gl.disable(gl.SCISSOR_TEST);
    gl.disable(gl.STENCIL_TEST);
    gl.colorMask(true, true, true, true);
    gl.viewport(0, 0, gl.drawingBufferWidth, gl.drawingBufferHeight);

    self.renderNoState();
  });
};

CardboardUI.prototype.renderNoState = function() {
  var gl = this.gl;

  // Bind distortion program and mesh
  gl.useProgram(this.program);

  gl.bindBuffer(gl.ARRAY_BUFFER, this.vertexBuffer);
  gl.enableVertexAttribArray(this.attribs.position);
  gl.vertexAttribPointer(this.attribs.position, 2, gl.FLOAT, false, 8, 0);

  gl.uniform4f(this.uniforms.color, 1.0, 1.0, 1.0, 1.0);

  Util.orthoMatrix(this.projMat, 0, gl.drawingBufferWidth, 0, gl.drawingBufferHeight, 0.1, 1024.0);
  gl.uniformMatrix4fv(this.uniforms.projectionMat, false, this.projMat);

  // Draws UI element
  gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);
  gl.drawArrays(gl.TRIANGLE_STRIP, this.gearOffset, this.gearVertexCount);
  gl.drawArrays(gl.TRIANGLE_STRIP, this.arrowOffset, this.arrowVertexCount);
};

module.exports = CardboardUI;

},{"./deps/wglu-preserve-state.js":6,"./util.js":22}],5:[function(_dereq_,module,exports){
/*
 * Copyright 2016 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

var CardboardDistorter = _dereq_('./cardboard-distorter.js');
var CardboardUI = _dereq_('./cardboard-ui.js');
var DeviceInfo = _dereq_('./device-info.js');
var Dpdb = _dereq_('./dpdb/dpdb.js');
var FusionPoseSensor = _dereq_('./sensor-fusion/fusion-pose-sensor.js');
var RotateInstructions = _dereq_('./rotate-instructions.js');
var ViewerSelector = _dereq_('./viewer-selector.js');
var VRDisplay = _dereq_('./base.js').VRDisplay;
var Util = _dereq_('./util.js');

var Eye = {
  LEFT: 'left',
  RIGHT: 'right'
};

/**
 * VRDisplay based on mobile device parameters and DeviceMotion APIs.
 */
function CardboardVRDisplay() {
  this.displayName = 'Cardboard VRDisplay (webvr-polyfill)';

  this.capabilities.hasOrientation = true;
  this.capabilities.canPresent = true;

  // "Private" members.
  this.bufferScale_ = WebVRConfig.BUFFER_SCALE;
  this.poseSensor_ = new FusionPoseSensor();
  this.distorter_ = null;
  this.cardboardUI_ = null;

  this.dpdb_ = new Dpdb(true, this.onDeviceParamsUpdated_.bind(this));
  this.deviceInfo_ = new DeviceInfo(this.dpdb_.getDeviceParams());

  this.viewerSelector_ = new ViewerSelector();
  this.viewerSelector_.on('change', this.onViewerChanged_.bind(this));

  // Set the correct initial viewer.
  this.deviceInfo_.setViewer(this.viewerSelector_.getCurrentViewer());

  if (!WebVRConfig.ROTATE_INSTRUCTIONS_DISABLED) {
    this.rotateInstructions_ = new RotateInstructions();
  }

  if (Util.isIOS()) {
    // Listen for resize events to workaround this awful Safari bug.
    window.addEventListener('resize', this.onResize_.bind(this));
  }
}
CardboardVRDisplay.prototype = new VRDisplay();

CardboardVRDisplay.prototype.getImmediatePose = function() {
  return {
    position: this.poseSensor_.getPosition(),
    orientation: this.poseSensor_.getOrientation(),
    linearVelocity: null,
    linearAcceleration: null,
    angularVelocity: null,
    angularAcceleration: null
  };
};

CardboardVRDisplay.prototype.resetPose = function() {
  this.poseSensor_.resetPose();
};

CardboardVRDisplay.prototype.getEyeParameters = function(whichEye) {
  var offset = [this.deviceInfo_.viewer.interLensDistance * 0.5, 0.0, 0.0];
  var fieldOfView;

  // TODO: FoV can be a little expensive to compute. Cache when device params change.
  if (whichEye == Eye.LEFT) {
    offset[0] *= -1.0;
    fieldOfView = this.deviceInfo_.getFieldOfViewLeftEye();
  } else if (whichEye == Eye.RIGHT) {
    fieldOfView = this.deviceInfo_.getFieldOfViewRightEye();
  } else {
    console.error('Invalid eye provided: %s', whichEye);
    return null;
  }

  return {
    fieldOfView: fieldOfView,
    offset: offset,
    // TODO: Should be able to provide better values than these.
    renderWidth: this.deviceInfo_.device.width * 0.5 * this.bufferScale_,
    renderHeight: this.deviceInfo_.device.height * this.bufferScale_,
  };
};

CardboardVRDisplay.prototype.onDeviceParamsUpdated_ = function(newParams) {
  console.log('DPDB reported that device params were updated.');
  this.deviceInfo_.updateDeviceParams(newParams);

  if (this.distorter_) {
    this.distorter_.updateDeviceInfo(this.deviceInfo_);
  }
};

CardboardVRDisplay.prototype.updateBounds_ = function () {
  if (this.layer_ && this.distorter_ && (this.layer_.leftBounds || this.layer_.rightBounds)) {
    this.distorter_.setTextureBounds(this.layer_.leftBounds, this.layer_.rightBounds);
  }
};

CardboardVRDisplay.prototype.beginPresent_ = function() {
  var gl = this.layer_.source.getContext('webgl');
  if (!gl)
    gl = this.layer_.source.getContext('experimental-webgl');
  if (!gl)
    gl = this.layer_.source.getContext('webgl2');

  if (!gl)
    return; // Can't do distortion without a WebGL context.

  // Provides a way to opt out of distortion
  if (this.layer_.predistorted) {
    if (!WebVRConfig.CARDBOARD_UI_DISABLED) {
      gl.canvas.width = Util.getScreenWidth() * this.bufferScale_;
      gl.canvas.height = Util.getScreenHeight() * this.bufferScale_;
      this.cardboardUI_ = new CardboardUI(gl);
    }
  } else {
    // Create a new distorter for the target context
    this.distorter_ = new CardboardDistorter(gl);
    this.distorter_.updateDeviceInfo(this.deviceInfo_);
    this.cardboardUI_ = this.distorter_.cardboardUI;
  }

  if (this.cardboardUI_) {
    this.cardboardUI_.listen(function(e) {
      // Options clicked.
      this.viewerSelector_.show(this.layer_.source.parentElement);
      e.stopPropagation();
      e.preventDefault();
    }.bind(this), function(e) {
      // Back clicked.
      this.exitPresent();
      e.stopPropagation();
      e.preventDefault();
    }.bind(this));
  }

  if (this.rotateInstructions_) {
    if (Util.isLandscapeMode() && Util.isMobile()) {
      // In landscape mode, temporarily show the "put into Cardboard"
      // interstitial. Otherwise, do the default thing.
      this.rotateInstructions_.showTemporarily(3000, this.layer_.source.parentElement);
    } else {
      this.rotateInstructions_.update();
    }
  }

  // Listen for orientation change events in order to show interstitial.
  this.orientationHandler = this.onOrientationChange_.bind(this);
  window.addEventListener('orientationchange', this.orientationHandler);

  // Listen for present display change events in order to update distorter dimensions
  this.vrdisplaypresentchangeHandler = this.updateBounds_.bind(this);
  window.addEventListener('vrdisplaypresentchange', this.vrdisplaypresentchangeHandler);

  // Fire this event initially, to give geometry-distortion clients the chance
  // to do something custom.
  this.fireVRDisplayDeviceParamsChange_();
};

CardboardVRDisplay.prototype.endPresent_ = function() {
  if (this.distorter_) {
    this.distorter_.destroy();
    this.distorter_ = null;
  }
  if (this.cardboardUI_) {
    this.cardboardUI_.destroy();
    this.cardboardUI_ = null;
  }

  if (this.rotateInstructions_) {
    this.rotateInstructions_.hide();
  }
  this.viewerSelector_.hide();

  window.removeEventListener('orientationchange', this.orientationHandler);
  window.removeEventListener('vrdisplaypresentchange', this.vrdisplaypresentchangeHandler);
};

CardboardVRDisplay.prototype.submitFrame = function(pose) {
  if (this.distorter_) {
    this.distorter_.submitFrame();
  } else if (this.cardboardUI_ && this.layer_) {
    // Hack for predistorted: true.
    var canvas = this.layer_.source.getContext('webgl').canvas;
    if (canvas.width != this.lastWidth || canvas.height != this.lastHeight) {
      this.cardboardUI_.onResize();
    }
    this.lastWidth = canvas.width;
    this.lastHeight = canvas.height;

    // Render the Cardboard UI.
    this.cardboardUI_.render();
  }
};

CardboardVRDisplay.prototype.onOrientationChange_ = function(e) {
  console.log('onOrientationChange_');

  // Hide the viewer selector.
  this.viewerSelector_.hide();

  // Update the rotate instructions.
  if (this.rotateInstructions_) {
    this.rotateInstructions_.update();
  }

  this.onResize_();
};

CardboardVRDisplay.prototype.onResize_ = function(e) {
  if (this.layer_) {
    var gl = this.layer_.source.getContext('webgl');
    // Size the CSS canvas.
    // Added padding on right and bottom because iPhone 5 will not
    // hide the URL bar unless content is bigger than the screen.
    // This will not be visible as long as the container element (e.g. body)
    // is set to 'overflow: hidden'.
    var cssProperties = [
      'position: absolute',
      'top: 0',
      'left: 0',
      'width: ' + Math.max(screen.width, screen.height) + 'px',
      'height: ' + Math.min(screen.height, screen.width) + 'px',
      'border: 0',
      'margin: 0',
      'padding: 0 10px 10px 0',
    ];
    gl.canvas.setAttribute('style', cssProperties.join('; ') + ';');

    Util.safariCssSizeWorkaround(gl.canvas);
  }
};

CardboardVRDisplay.prototype.onViewerChanged_ = function(viewer) {
  this.deviceInfo_.setViewer(viewer);

  if (this.distorter_) {
    // Update the distortion appropriately.
    this.distorter_.updateDeviceInfo(this.deviceInfo_);
  }

  // Fire a new event containing viewer and device parameters for clients that
  // want to implement their own geometry-based distortion.
  this.fireVRDisplayDeviceParamsChange_();
};

CardboardVRDisplay.prototype.fireVRDisplayDeviceParamsChange_ = function() {
  var event = new CustomEvent('vrdisplaydeviceparamschange', {
    detail: {
      vrdisplay: this,
      deviceInfo: this.deviceInfo_,
    }
  });
  window.dispatchEvent(event);
};

module.exports = CardboardVRDisplay;

},{"./base.js":2,"./cardboard-distorter.js":3,"./cardboard-ui.js":4,"./device-info.js":7,"./dpdb/dpdb.js":11,"./rotate-instructions.js":16,"./sensor-fusion/fusion-pose-sensor.js":18,"./util.js":22,"./viewer-selector.js":23}],6:[function(_dereq_,module,exports){
/*
Copyright (c) 2016, Brandon Jones.

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.
*/

/*
Caches specified GL state, runs a callback, and restores the cached state when
done.

Example usage:

var savedState = [
  gl.ARRAY_BUFFER_BINDING,

  // TEXTURE_BINDING_2D or _CUBE_MAP must always be followed by the texure unit.
  gl.TEXTURE_BINDING_2D, gl.TEXTURE0,

  gl.CLEAR_COLOR,
];
// After this call the array buffer, texture unit 0, active texture, and clear
// color will be restored. The viewport will remain changed, however, because
// gl.VIEWPORT was not included in the savedState list.
WGLUPreserveGLState(gl, savedState, function(gl) {
  gl.viewport(0, 0, gl.drawingBufferWidth, gl.drawingBufferHeight);

  gl.bindBuffer(gl.ARRAY_BUFFER, buffer);
  gl.bufferData(gl.ARRAY_BUFFER, ....);

  gl.activeTexture(gl.TEXTURE0);
  gl.bindTexture(gl.TEXTURE_2D, texture);
  gl.texImage2D(gl.TEXTURE_2D, ...);

  gl.clearColor(1, 0, 0, 1);
  gl.clear(gl.COLOR_BUFFER_BIT);
});

Note that this is not intended to be fast. Managing state in your own code to
avoid redundant state setting and querying will always be faster. This function
is most useful for cases where you may not have full control over the WebGL
calls being made, such as tooling or effect injectors.
*/

function WGLUPreserveGLState(gl, bindings, callback) {
  if (!bindings) {
    callback(gl);
    return;
  }

  var boundValues = [];

  var activeTexture = null;
  for (var i = 0; i < bindings.length; ++i) {
    var binding = bindings[i];
    switch (binding) {
      case gl.TEXTURE_BINDING_2D:
      case gl.TEXTURE_BINDING_CUBE_MAP:
        var textureUnit = bindings[++i];
        if (textureUnit < gl.TEXTURE0 || textureUnit > gl.TEXTURE31) {
          console.error("TEXTURE_BINDING_2D or TEXTURE_BINDING_CUBE_MAP must be followed by a valid texture unit");
          boundValues.push(null, null);
          break;
        }
        if (!activeTexture) {
          activeTexture = gl.getParameter(gl.ACTIVE_TEXTURE);
        }
        gl.activeTexture(textureUnit);
        boundValues.push(gl.getParameter(binding), null);
        break;
      case gl.ACTIVE_TEXTURE:
        activeTexture = gl.getParameter(gl.ACTIVE_TEXTURE);
        boundValues.push(null);
        break;
      default:
        boundValues.push(gl.getParameter(binding));
        break;
    }
  }

  callback(gl);

  for (var i = 0; i < bindings.length; ++i) {
    var binding = bindings[i];
    var boundValue = boundValues[i];
    switch (binding) {
      case gl.ACTIVE_TEXTURE:
        break; // Ignore this binding, since we special-case it to happen last.
      case gl.ARRAY_BUFFER_BINDING:
        gl.bindBuffer(gl.ARRAY_BUFFER, boundValue);
        break;
      case gl.COLOR_CLEAR_VALUE:
        gl.clearColor(boundValue[0], boundValue[1], boundValue[2], boundValue[3]);
        break;
      case gl.COLOR_WRITEMASK:
        gl.colorMask(boundValue[0], boundValue[1], boundValue[2], boundValue[3]);
        break;
      case gl.CURRENT_PROGRAM:
        gl.useProgram(boundValue);
        break;
      case gl.ELEMENT_ARRAY_BUFFER_BINDING:
        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, boundValue);
        break;
      case gl.FRAMEBUFFER_BINDING:
        gl.bindFramebuffer(gl.FRAMEBUFFER, boundValue);
        break;
      case gl.RENDERBUFFER_BINDING:
        gl.bindRenderbuffer(gl.RENDERBUFFER, boundValue);
        break;
      case gl.TEXTURE_BINDING_2D:
        var textureUnit = bindings[++i];
        if (textureUnit < gl.TEXTURE0 || textureUnit > gl.TEXTURE31)
          break;
        gl.activeTexture(textureUnit);
        gl.bindTexture(gl.TEXTURE_2D, boundValue);
        break;
      case gl.TEXTURE_BINDING_CUBE_MAP:
        var textureUnit = bindings[++i];
        if (textureUnit < gl.TEXTURE0 || textureUnit > gl.TEXTURE31)
          break;
        gl.activeTexture(textureUnit);
        gl.bindTexture(gl.TEXTURE_CUBE_MAP, boundValue);
        break;
      case gl.VIEWPORT:
        gl.viewport(boundValue[0], boundValue[1], boundValue[2], boundValue[3]);
        break;
      case gl.BLEND:
      case gl.CULL_FACE:
      case gl.DEPTH_TEST:
      case gl.SCISSOR_TEST:
      case gl.STENCIL_TEST:
        if (boundValue) {
          gl.enable(binding);
        } else {
          gl.disable(binding);
        }
        break;
      default:
        console.log("No GL restore behavior for 0x" + binding.toString(16));
        break;
    }

    if (activeTexture) {
      gl.activeTexture(activeTexture);
    }
  }
}

module.exports = WGLUPreserveGLState;
},{}],7:[function(_dereq_,module,exports){
/*
 * Copyright 2015 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

var Distortion = _dereq_('./distortion/distortion.js');
var MathUtil = _dereq_('./math-util.js');
var Util = _dereq_('./util.js');

function Device(params) {
  this.width = params.width || Util.getScreenWidth();
  this.height = params.height || Util.getScreenHeight();
  this.widthMeters = params.widthMeters;
  this.heightMeters = params.heightMeters;
  this.bevelMeters = params.bevelMeters;
}


// Fallback Android device (based on Nexus 5 measurements) for use when
// we can't recognize an Android device.
var DEFAULT_ANDROID = new Device({
  widthMeters: 0.110,
  heightMeters: 0.062,
  bevelMeters: 0.004
});

// Fallback iOS device (based on iPhone6) for use when
// we can't recognize an Android device.
var DEFAULT_IOS = new Device({
  widthMeters: 0.1038,
  heightMeters: 0.0584,
  bevelMeters: 0.004
});


var Viewers = {
  CardboardV1: new CardboardViewer({
    id: 'CardboardV1',
    label: 'Cardboard I/O 2014',
    fov: 40,
    interLensDistance: 0.060,
    baselineLensDistance: 0.035,
    screenLensDistance: 0.042,
    distortionCoefficients: [0.441, 0.156],
    inverseCoefficients: [-0.4410035, 0.42756155, -0.4804439, 0.5460139,
      -0.58821183, 0.5733938, -0.48303202, 0.33299083, -0.17573841,
      0.0651772, -0.01488963, 0.001559834]
  }),
  CardboardV2: new CardboardViewer({
    id: 'CardboardV2',
    label: 'Cardboard I/O 2015',
    fov: 60,
    interLensDistance: 0.064,
    baselineLensDistance: 0.035,
    screenLensDistance: 0.039,
    distortionCoefficients: [0.34, 0.55],
    inverseCoefficients: [-0.33836704, -0.18162185, 0.862655, -1.2462051,
      1.0560602, -0.58208317, 0.21609078, -0.05444823, 0.009177956,
      -9.904169E-4, 6.183535E-5, -1.6981803E-6]
  })
};


var DEFAULT_LEFT_CENTER = {x: 0.5, y: 0.5};
var DEFAULT_RIGHT_CENTER = {x: 0.5, y: 0.5};

/**
 * Manages information about the device and the viewer.
 *
 * deviceParams indicates the parameters of the device to use (generally
 * obtained from dpdb.getDeviceParams()). Can be null to mean no device
 * params were found.
 */
function DeviceInfo(deviceParams) {
  this.viewer = Viewers.CardboardV2;
  this.updateDeviceParams(deviceParams);
  this.distortion = new Distortion(this.viewer.distortionCoefficients);
}

DeviceInfo.prototype.updateDeviceParams = function(deviceParams) {
  this.device = this.determineDevice_(deviceParams) || this.device;
};

DeviceInfo.prototype.getDevice = function() {
  return this.device;
};

DeviceInfo.prototype.setViewer = function(viewer) {
  this.viewer = viewer;
  this.distortion = new Distortion(this.viewer.distortionCoefficients);
};

DeviceInfo.prototype.determineDevice_ = function(deviceParams) {
  if (!deviceParams) {
    // No parameters, so use a default.
    if (Util.isIOS()) {
      console.warn('Using fallback iOS device measurements.');
      return DEFAULT_IOS;
    } else {
      console.warn('Using fallback Android device measurements.');
      return DEFAULT_ANDROID;
    }
  }

  // Compute device screen dimensions based on deviceParams.
  var METERS_PER_INCH = 0.0254;
  var metersPerPixelX = METERS_PER_INCH / deviceParams.xdpi;
  var metersPerPixelY = METERS_PER_INCH / deviceParams.ydpi;
  var width = Util.getScreenWidth();
  var height = Util.getScreenHeight();
  return new Device({
    widthMeters: metersPerPixelX * width,
    heightMeters: metersPerPixelY * height,
    bevelMeters: deviceParams.bevelMm * 0.001,
  });
};

/**
 * Calculates field of view for the left eye.
 */
DeviceInfo.prototype.getDistortedFieldOfViewLeftEye = function() {
  var viewer = this.viewer;
  var device = this.device;
  var distortion = this.distortion;

  // Device.height and device.width for device in portrait mode, so transpose.
  var eyeToScreenDistance = viewer.screenLensDistance;

  var outerDist = (device.widthMeters - viewer.interLensDistance) / 2;
  var innerDist = viewer.interLensDistance / 2;
  var bottomDist = viewer.baselineLensDistance - device.bevelMeters;
  var topDist = device.heightMeters - bottomDist;

  var outerAngle = MathUtil.radToDeg * Math.atan(
      distortion.distort(outerDist / eyeToScreenDistance));
  var innerAngle = MathUtil.radToDeg * Math.atan(
      distortion.distort(innerDist / eyeToScreenDistance));
  var bottomAngle = MathUtil.radToDeg * Math.atan(
      distortion.distort(bottomDist / eyeToScreenDistance));
  var topAngle = MathUtil.radToDeg * Math.atan(
      distortion.distort(topDist / eyeToScreenDistance));

  return {
    leftDegrees: Math.min(outerAngle, viewer.fov),
    rightDegrees: Math.min(innerAngle, viewer.fov),
    downDegrees: Math.min(bottomAngle, viewer.fov),
    upDegrees: Math.min(topAngle, viewer.fov)
  };
};

/**
 * Calculates the tan-angles from the maximum FOV for the left eye for the
 * current device and screen parameters.
 */
DeviceInfo.prototype.getLeftEyeVisibleTanAngles = function() {
  var viewer = this.viewer;
  var device = this.device;
  var distortion = this.distortion;

  // Tan-angles from the max FOV.
  var fovLeft = Math.tan(-MathUtil.degToRad * viewer.fov);
  var fovTop = Math.tan(MathUtil.degToRad * viewer.fov);
  var fovRight = Math.tan(MathUtil.degToRad * viewer.fov);
  var fovBottom = Math.tan(-MathUtil.degToRad * viewer.fov);
  // Viewport size.
  var halfWidth = device.widthMeters / 4;
  var halfHeight = device.heightMeters / 2;
  // Viewport center, measured from left lens position.
  var verticalLensOffset = (viewer.baselineLensDistance - device.bevelMeters - halfHeight);
  var centerX = viewer.interLensDistance / 2 - halfWidth;
  var centerY = -verticalLensOffset;
  var centerZ = viewer.screenLensDistance;
  // Tan-angles of the viewport edges, as seen through the lens.
  var screenLeft = distortion.distort((centerX - halfWidth) / centerZ);
  var screenTop = distortion.distort((centerY + halfHeight) / centerZ);
  var screenRight = distortion.distort((centerX + halfWidth) / centerZ);
  var screenBottom = distortion.distort((centerY - halfHeight) / centerZ);
  // Compare the two sets of tan-angles and take the value closer to zero on each side.
  var result = new Float32Array(4);
  result[0] = Math.max(fovLeft, screenLeft);
  result[1] = Math.min(fovTop, screenTop);
  result[2] = Math.min(fovRight, screenRight);
  result[3] = Math.max(fovBottom, screenBottom);
  return result;
};

/**
 * Calculates the tan-angles from the maximum FOV for the left eye for the
 * current device and screen parameters, assuming no lenses.
 */
DeviceInfo.prototype.getLeftEyeNoLensTanAngles = function() {
  var viewer = this.viewer;
  var device = this.device;
  var distortion = this.distortion;

  var result = new Float32Array(4);
  // Tan-angles from the max FOV.
  var fovLeft = distortion.distortInverse(Math.tan(-MathUtil.degToRad * viewer.fov));
  var fovTop = distortion.distortInverse(Math.tan(MathUtil.degToRad * viewer.fov));
  var fovRight = distortion.distortInverse(Math.tan(MathUtil.degToRad * viewer.fov));
  var fovBottom = distortion.distortInverse(Math.tan(-MathUtil.degToRad * viewer.fov));
  // Viewport size.
  var halfWidth = device.widthMeters / 4;
  var halfHeight = device.heightMeters / 2;
  // Viewport center, measured from left lens position.
  var verticalLensOffset = (viewer.baselineLensDistance - device.bevelMeters - halfHeight);
  var centerX = viewer.interLensDistance / 2 - halfWidth;
  var centerY = -verticalLensOffset;
  var centerZ = viewer.screenLensDistance;
  // Tan-angles of the viewport edges, as seen through the lens.
  var screenLeft = (centerX - halfWidth) / centerZ;
  var screenTop = (centerY + halfHeight) / centerZ;
  var screenRight = (centerX + halfWidth) / centerZ;
  var screenBottom = (centerY - halfHeight) / centerZ;
  // Compare the two sets of tan-angles and take the value closer to zero on each side.
  result[0] = Math.max(fovLeft, screenLeft);
  result[1] = Math.min(fovTop, screenTop);
  result[2] = Math.min(fovRight, screenRight);
  result[3] = Math.max(fovBottom, screenBottom);
  return result;
};

/**
 * Calculates the screen rectangle visible from the left eye for the
 * current device and screen parameters.
 */
DeviceInfo.prototype.getLeftEyeVisibleScreenRect = function(undistortedFrustum) {
  var viewer = this.viewer;
  var device = this.device;

  var dist = viewer.screenLensDistance;
  var eyeX = (device.widthMeters - viewer.interLensDistance) / 2;
  var eyeY = viewer.baselineLensDistance - device.bevelMeters;
  var left = (undistortedFrustum[0] * dist + eyeX) / device.widthMeters;
  var top = (undistortedFrustum[1] * dist + eyeY) / device.heightMeters;
  var right = (undistortedFrustum[2] * dist + eyeX) / device.widthMeters;
  var bottom = (undistortedFrustum[3] * dist + eyeY) / device.heightMeters;
  return {
    x: left,
    y: bottom,
    width: right - left,
    height: top - bottom
  };
};

DeviceInfo.prototype.getFieldOfViewLeftEye = function(opt_isUndistorted) {
  return opt_isUndistorted ? this.getUndistortedFieldOfViewLeftEye() :
      this.getDistortedFieldOfViewLeftEye();
};

DeviceInfo.prototype.getFieldOfViewRightEye = function(opt_isUndistorted) {
  var fov = this.getFieldOfViewLeftEye(opt_isUndistorted);
  return {
    leftDegrees: fov.rightDegrees,
    rightDegrees: fov.leftDegrees,
    upDegrees: fov.upDegrees,
    downDegrees: fov.downDegrees
  };
};

/**
 * Calculates undistorted field of view for the left eye.
 */
DeviceInfo.prototype.getUndistortedFieldOfViewLeftEye = function() {
  var p = this.getUndistortedParams_();

  return {
    leftDegrees: MathUtil.radToDeg * Math.atan(p.outerDist),
    rightDegrees: MathUtil.radToDeg * Math.atan(p.innerDist),
    downDegrees: MathUtil.radToDeg * Math.atan(p.bottomDist),
    upDegrees: MathUtil.radToDeg * Math.atan(p.topDist)
  };
};

DeviceInfo.prototype.getUndistortedViewportLeftEye = function() {
  var p = this.getUndistortedParams_();
  var viewer = this.viewer;
  var device = this.device;

  // Distances stored in local variables are in tan-angle units unless otherwise
  // noted.
  var eyeToScreenDistance = viewer.screenLensDistance;
  var screenWidth = device.widthMeters / eyeToScreenDistance;
  var screenHeight = device.heightMeters / eyeToScreenDistance;
  var xPxPerTanAngle = device.width / screenWidth;
  var yPxPerTanAngle = device.height / screenHeight;

  var x = Math.round((p.eyePosX - p.outerDist) * xPxPerTanAngle);
  var y = Math.round((p.eyePosY - p.bottomDist) * yPxPerTanAngle);
  return {
    x: x,
    y: y,
    width: Math.round((p.eyePosX + p.innerDist) * xPxPerTanAngle) - x,
    height: Math.round((p.eyePosY + p.topDist) * yPxPerTanAngle) - y
  };
};

DeviceInfo.prototype.getUndistortedParams_ = function() {
  var viewer = this.viewer;
  var device = this.device;
  var distortion = this.distortion;

  // Most of these variables in tan-angle units.
  var eyeToScreenDistance = viewer.screenLensDistance;
  var halfLensDistance = viewer.interLensDistance / 2 / eyeToScreenDistance;
  var screenWidth = device.widthMeters / eyeToScreenDistance;
  var screenHeight = device.heightMeters / eyeToScreenDistance;

  var eyePosX = screenWidth / 2 - halfLensDistance;
  var eyePosY = (viewer.baselineLensDistance - device.bevelMeters) / eyeToScreenDistance;

  var maxFov = viewer.fov;
  var viewerMax = distortion.distortInverse(Math.tan(MathUtil.degToRad * maxFov));
  var outerDist = Math.min(eyePosX, viewerMax);
  var innerDist = Math.min(halfLensDistance, viewerMax);
  var bottomDist = Math.min(eyePosY, viewerMax);
  var topDist = Math.min(screenHeight - eyePosY, viewerMax);

  return {
    outerDist: outerDist,
    innerDist: innerDist,
    topDist: topDist,
    bottomDist: bottomDist,
    eyePosX: eyePosX,
    eyePosY: eyePosY
  };
};


function CardboardViewer(params) {
  // A machine readable ID.
  this.id = params.id;
  // A human readable label.
  this.label = params.label;

  // Field of view in degrees (per side).
  this.fov = params.fov;

  // Distance between lens centers in meters.
  this.interLensDistance = params.interLensDistance;
  // Distance between viewer baseline and lens center in meters.
  this.baselineLensDistance = params.baselineLensDistance;
  // Screen-to-lens distance in meters.
  this.screenLensDistance = params.screenLensDistance;

  // Distortion coefficients.
  this.distortionCoefficients = params.distortionCoefficients;
  // Inverse distortion coefficients.
  // TODO: Calculate these from distortionCoefficients in the future.
  this.inverseCoefficients = params.inverseCoefficients;
}

// Export viewer information.
DeviceInfo.Viewers = Viewers;
module.exports = DeviceInfo;

},{"./distortion/distortion.js":9,"./math-util.js":14,"./util.js":22}],8:[function(_dereq_,module,exports){
/*
 * Copyright 2016 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var VRDisplay = _dereq_('./base.js').VRDisplay;
var HMDVRDevice = _dereq_('./base.js').HMDVRDevice;
var PositionSensorVRDevice = _dereq_('./base.js').PositionSensorVRDevice;

/**
 * Wraps a VRDisplay and exposes it as a HMDVRDevice
 */
function VRDisplayHMDDevice(display) {
  this.display = display;

  this.hardwareUnitId = display.displayId;
  this.deviceId = 'webvr-polyfill:HMD:' + display.displayId;
  this.deviceName = display.displayName + ' (HMD)';
}
VRDisplayHMDDevice.prototype = new HMDVRDevice();

VRDisplayHMDDevice.prototype.getEyeParameters = function(whichEye) {
  var eyeParameters = this.display.getEyeParameters(whichEye);

  return {
    currentFieldOfView: eyeParameters.fieldOfView,
    maximumFieldOfView: eyeParameters.fieldOfView,
    minimumFieldOfView: eyeParameters.fieldOfView,
    recommendedFieldOfView: eyeParameters.fieldOfView,
    eyeTranslation: { x: eyeParameters.offset[0], y: eyeParameters.offset[1], z: eyeParameters.offset[2] },
    renderRect: {
      x: (whichEye == 'right') ? eyeParameters.renderWidth : 0,
      y: 0,
      width: eyeParameters.renderWidth,
      height: eyeParameters.renderHeight
    }
  };
};

VRDisplayHMDDevice.prototype.setFieldOfView =
    function(opt_fovLeft, opt_fovRight, opt_zNear, opt_zFar) {
  // Not supported. getEyeParameters reports that the min, max, and recommended
  // FoV is all the same, so no adjustment can be made.
};

// TODO: Need to hook requestFullscreen to see if a wrapped VRDisplay was passed
// in as an option. If so we should prevent the default fullscreen behavior and
// call VRDisplay.requestPresent instead.

/**
 * Wraps a VRDisplay and exposes it as a PositionSensorVRDevice
 */
function VRDisplayPositionSensorDevice(display) {
  this.display = display;

  this.hardwareUnitId = display.displayId;
  this.deviceId = 'webvr-polyfill:PositionSensor: ' + display.displayId;
  this.deviceName = display.displayName + ' (PositionSensor)';
}
VRDisplayPositionSensorDevice.prototype = new PositionSensorVRDevice();

VRDisplayPositionSensorDevice.prototype.getState = function() {
  var pose = this.display.getPose();
  return {
    position: pose.position ? { x: pose.position[0], y: pose.position[1], z: pose.position[2] } : null,
    orientation: pose.orientation ? { x: pose.orientation[0], y: pose.orientation[1], z: pose.orientation[2], w: pose.orientation[3] } : null,
    linearVelocity: null,
    linearAcceleration: null,
    angularVelocity: null,
    angularAcceleration: null
  };
};

VRDisplayPositionSensorDevice.prototype.resetState = function() {
  return this.positionDevice.resetPose();
};


module.exports.VRDisplayHMDDevice = VRDisplayHMDDevice;
module.exports.VRDisplayPositionSensorDevice = VRDisplayPositionSensorDevice;


},{"./base.js":2}],9:[function(_dereq_,module,exports){
/**
 * TODO(smus): Implement coefficient inversion.
 */
function Distortion(coefficients) {
  this.coefficients = coefficients;
}

/**
 * Calculates the inverse distortion for a radius.
 * </p><p>
 * Allows to compute the original undistorted radius from a distorted one.
 * See also getApproximateInverseDistortion() for a faster but potentially
 * less accurate method.
 *
 * @param {Number} radius Distorted radius from the lens center in tan-angle units.
 * @return {Number} The undistorted radius in tan-angle units.
 */
Distortion.prototype.distortInverse = function(radius) {
  // Secant method.
  var r0 = 0;
  var r1 = 1;
  var dr0 = radius - this.distort(r0);
  while (Math.abs(r1 - r0) > 0.0001 /** 0.1mm */) {
    var dr1 = radius - this.distort(r1);
    var r2 = r1 - dr1 * ((r1 - r0) / (dr1 - dr0));
    r0 = r1;
    r1 = r2;
    dr0 = dr1;
  }
  return r1;
};

/**
 * Distorts a radius by its distortion factor from the center of the lenses.
 *
 * @param {Number} radius Radius from the lens center in tan-angle units.
 * @return {Number} The distorted radius in tan-angle units.
 */
Distortion.prototype.distort = function(radius) {
  var r2 = radius * radius;
  var ret = 0;
  for (var i = 0; i < this.coefficients.length; i++) {
    ret = r2 * (ret + this.coefficients[i]);
  }
  return (ret + 1) * radius;
};

// Functions below roughly ported from
// https://github.com/googlesamples/cardboard-unity/blob/master/Cardboard/Scripts/CardboardProfile.cs#L412

// Solves a small linear equation via destructive gaussian
// elimination and back substitution.  This isn't generic numeric
// code, it's just a quick hack to work with the generally
// well-behaved symmetric matrices for least-squares fitting.
// Not intended for reuse.
//
// @param a Input positive definite symmetrical matrix. Destroyed
//     during calculation.
// @param y Input right-hand-side values. Destroyed during calculation.
// @return Resulting x value vector.
//
Distortion.prototype.solveLinear_ = function(a, y) {
  var n = a.length;

  // Gaussian elimination (no row exchange) to triangular matrix.
  // The input matrix is a A^T A product which should be a positive
  // definite symmetrical matrix, and if I remember my linear
  // algebra right this implies that the pivots will be nonzero and
  // calculations sufficiently accurate without needing row
  // exchange.
  for (var j = 0; j < n - 1; ++j) {
    for (var k = j + 1; k < n; ++k) {
      var p = a[j][k] / a[j][j];
      for (var i = j + 1; i < n; ++i) {
        a[i][k] -= p * a[i][j];
      }
      y[k] -= p * y[j];
    }
  }
  // From this point on, only the matrix elements a[j][i] with i>=j are
  // valid. The elimination doesn't fill in eliminated 0 values.

  var x = new Array(n);

  // Back substitution.
  for (var j = n - 1; j >= 0; --j) {
    var v = y[j];
    for (var i = j + 1; i < n; ++i) {
      v -= a[i][j] * x[i];
    }
    x[j] = v / a[j][j];
  }

  return x;
};

// Solves a least-squares matrix equation.  Given the equation A * x = y, calculate the
// least-square fit x = inverse(A * transpose(A)) * transpose(A) * y.  The way this works
// is that, while A is typically not a square matrix (and hence not invertible), A * transpose(A)
// is always square.  That is:
//   A * x = y
//   transpose(A) * (A * x) = transpose(A) * y   <- multiply both sides by transpose(A)
//   (transpose(A) * A) * x = transpose(A) * y   <- associativity
//   x = inverse(transpose(A) * A) * transpose(A) * y  <- solve for x
// Matrix A's row count (first index) must match y's value count.  A's column count (second index)
// determines the length of the result vector x.
Distortion.prototype.solveLeastSquares_ = function(matA, vecY) {
  var i, j, k, sum;
  var numSamples = matA.length;
  var numCoefficients = matA[0].length;
  if (numSamples != vecY.Length) {
    throw new Error("Matrix / vector dimension mismatch");
  }

  // Calculate transpose(A) * A
  var matATA = new Array(numCoefficients);
  for (k = 0; k < numCoefficients; ++k) {
    matATA[k] = new Array(numCoefficients);
    for (j = 0; j < numCoefficients; ++j) {
      sum = 0;
      for (i = 0; i < numSamples; ++i) {
        sum += matA[j][i] * matA[k][i];
      }
      matATA[k][j] = sum;
    }
  }

  // Calculate transpose(A) * y
  var vecATY = new Array(numCoefficients);
  for (j = 0; j < numCoefficients; ++j) {
    sum = 0;
    for (i = 0; i < numSamples; ++i) {
      sum += matA[j][i] * vecY[i];
    }
    vecATY[j] = sum;
  }

  // Now solve (A * transpose(A)) * x = transpose(A) * y.
  return this.solveLinear_(matATA, vecATY);
};

/// Calculates an approximate inverse to the given radial distortion parameters.
Distortion.prototype.approximateInverse = function(maxRadius, numSamples) {
  maxRadius = maxRadius || 1;
  numSamples = numSamples || 100;
  var numCoefficients = 6;
  var i, j;

  // R + K1*R^3 + K2*R^5 = r, with R = rp = distort(r)
  // Repeating for numSamples:
  //   [ R0^3, R0^5 ] * [ K1 ] = [ r0 - R0 ]
  //   [ R1^3, R1^5 ]   [ K2 ]   [ r1 - R1 ]
  //   [ R2^3, R2^5 ]            [ r2 - R2 ]
  //   [ etc... ]                [ etc... ]
  // That is:
  //   matA * [K1, K2] = y
  // Solve:
  //   [K1, K2] = inverse(transpose(matA) * matA) * transpose(matA) * y
  var matA = new Array(numCoefficients);
  for (j = 0; j < numCoefficients; ++j) {
    matA[j] = new Array(numSamples);
  }
  var vecY = new Array(numSamples);

  for (i = 0; i < numSamples; ++i) {
    var r = maxRadius * (i + 1) / numSamples;
    var rp = this.distort(r);
    var v = rp;
    for (j = 0; j < numCoefficients; ++j) {
      v *= rp * rp;
      matA[j][i] = v;
    }
    vecY[i] = r - rp;
  }

  var inverseCoefficients = this.solveLeastSquares_(matA, vecY);

  return new Distortion(inverseCoefficients);
};

module.exports = Distortion;

},{}],10:[function(_dereq_,module,exports){
/*
 * Copyright 2015 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

/**
 * DPDB cache.
 */
var DPDB_CACHE = {
  "format": 1,
  "last_updated": "2016-01-20T00:18:35Z",
  "devices": [

  {
    "type": "android",
    "rules": [
      { "mdmh": "asus/*/Nexus 7/*" },
      { "ua": "Nexus 7" }
    ],
    "dpi": [ 320.8, 323.0 ],
    "bw": 3,
    "ac": 500
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "asus/*/ASUS_Z00AD/*" },
      { "ua": "ASUS_Z00AD" }
    ],
    "dpi": [ 403.0, 404.6 ],
    "bw": 3,
    "ac": 1000
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "HTC/*/HTC6435LVW/*" },
      { "ua": "HTC6435LVW" }
    ],
    "dpi": [ 449.7, 443.3 ],
    "bw": 3,
    "ac": 1000
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "HTC/*/HTC One XL/*" },
      { "ua": "HTC One XL" }
    ],
    "dpi": [ 315.3, 314.6 ],
    "bw": 3,
    "ac": 1000
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "htc/*/Nexus 9/*" },
      { "ua": "Nexus 9" }
    ],
    "dpi": 289.0,
    "bw": 3,
    "ac": 500
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "HTC/*/HTC One M9/*" },
      { "ua": "HTC One M9" }
    ],
    "dpi": [ 442.5, 443.3 ],
    "bw": 3,
    "ac": 500
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "HTC/*/HTC One_M8/*" },
      { "ua": "HTC One_M8" }
    ],
    "dpi": [ 449.7, 447.4 ],
    "bw": 3,
    "ac": 500
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "HTC/*/HTC One/*" },
      { "ua": "HTC One" }
    ],
    "dpi": 472.8,
    "bw": 3,
    "ac": 1000
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "Huawei/*/Nexus 6P/*" },
      { "ua": "Nexus 6P" }
    ],
    "dpi": [ 515.1, 518.0 ],
    "bw": 3,
    "ac": 1000
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "LGE/*/Nexus 5X/*" },
      { "ua": "Nexus 5X" }
    ],
    "dpi": [ 422.0, 419.9 ],
    "bw": 3,
    "ac": 1000
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "LGE/*/LGMS345/*" },
      { "ua": "LGMS345" }
    ],
    "dpi": [ 221.7, 219.1 ],
    "bw": 3,
    "ac": 500
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "LGE/*/LG-D800/*" },
      { "ua": "LG-D800" }
    ],
    "dpi": [ 422.0, 424.1 ],
    "bw": 3,
    "ac": 500
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "LGE/*/LG-D850/*" },
      { "ua": "LG-D850" }
    ],
    "dpi": [ 537.9, 541.9 ],
    "bw": 3,
    "ac": 500
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "LGE/*/VS985 4G/*" },
      { "ua": "VS985 4G" }
    ],
    "dpi": [ 537.9, 535.6 ],
    "bw": 3,
    "ac": 1000
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "LGE/*/Nexus 5/*" },
      { "ua": "Nexus 5 " }
    ],
    "dpi": [ 442.4, 444.8 ],
    "bw": 3,
    "ac": 1000
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "LGE/*/Nexus 4/*" },
      { "ua": "Nexus 4" }
    ],
    "dpi": [ 319.8, 318.4 ],
    "bw": 3,
    "ac": 1000
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "LGE/*/LG-P769/*" },
      { "ua": "LG-P769" }
    ],
    "dpi": [ 240.6, 247.5 ],
    "bw": 3,
    "ac": 1000
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "LGE/*/LGMS323/*" },
      { "ua": "LGMS323" }
    ],
    "dpi": [ 206.6, 204.6 ],
    "bw": 3,
    "ac": 1000
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "LGE/*/LGLS996/*" },
      { "ua": "LGLS996" }
    ],
    "dpi": [ 403.4, 401.5 ],
    "bw": 3,
    "ac": 1000
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "Micromax/*/4560MMX/*" },
      { "ua": "4560MMX" }
    ],
    "dpi": [ 240.0, 219.4 ],
    "bw": 3,
    "ac": 1000
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "Micromax/*/A250/*" },
      { "ua": "Micromax A250" }
    ],
    "dpi": [ 480.0, 446.4 ],
    "bw": 3,
    "ac": 1000
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "Micromax/*/Micromax AQ4501/*" },
      { "ua": "Micromax AQ4501" }
    ],
    "dpi": 240.0,
    "bw": 3,
    "ac": 500
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "motorola/*/DROID RAZR/*" },
      { "ua": "DROID RAZR" }
    ],
    "dpi": [ 368.1, 256.7 ],
    "bw": 3,
    "ac": 1000
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "motorola/*/XT830C/*" },
      { "ua": "XT830C" }
    ],
    "dpi": [ 254.0, 255.9 ],
    "bw": 3,
    "ac": 1000
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "motorola/*/XT1021/*" },
      { "ua": "XT1021" }
    ],
    "dpi": [ 254.0, 256.7 ],
    "bw": 3,
    "ac": 500
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "motorola/*/XT1023/*" },
      { "ua": "XT1023" }
    ],
    "dpi": [ 254.0, 256.7 ],
    "bw": 3,
    "ac": 500
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "motorola/*/XT1028/*" },
      { "ua": "XT1028" }
    ],
    "dpi": [ 326.6, 327.6 ],
    "bw": 3,
    "ac": 1000
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "motorola/*/XT1034/*" },
      { "ua": "XT1034" }
    ],
    "dpi": [ 326.6, 328.4 ],
    "bw": 3,
    "ac": 500
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "motorola/*/XT1053/*" },
      { "ua": "XT1053" }
    ],
    "dpi": [ 315.3, 316.1 ],
    "bw": 3,
    "ac": 1000
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "motorola/*/XT1562/*" },
      { "ua": "XT1562" }
    ],
    "dpi": [ 403.4, 402.7 ],
    "bw": 3,
    "ac": 1000
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "motorola/*/Nexus 6/*" },
      { "ua": "Nexus 6 " }
    ],
    "dpi": [ 494.3, 489.7 ],
    "bw": 3,
    "ac": 1000
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "motorola/*/XT1063/*" },
      { "ua": "XT1063" }
    ],
    "dpi": [ 295.0, 296.6 ],
    "bw": 3,
    "ac": 1000
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "motorola/*/XT1064/*" },
      { "ua": "XT1064" }
    ],
    "dpi": [ 295.0, 295.6 ],
    "bw": 3,
    "ac": 500
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "motorola/*/XT1092/*" },
      { "ua": "XT1092" }
    ],
    "dpi": [ 422.0, 424.1 ],
    "bw": 3,
    "ac": 500
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "motorola/*/XT1095/*" },
      { "ua": "XT1095" }
    ],
    "dpi": [ 422.0, 423.4 ],
    "bw": 3,
    "ac": 1000
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "OnePlus/*/A0001/*" },
      { "ua": "A0001" }
    ],
    "dpi": [ 403.4, 401.0 ],
    "bw": 3,
    "ac": 1000
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "OnePlus/*/ONE E1005/*" },
      { "ua": "ONE E1005" }
    ],
    "dpi": [ 442.4, 441.4 ],
    "bw": 3,
    "ac": 1000
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "OnePlus/*/ONE A2005/*" },
      { "ua": "ONE A2005" }
    ],
    "dpi": [ 391.9, 405.4 ],
    "bw": 3,
    "ac": 1000
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "OPPO/*/X909/*" },
      { "ua": "X909" }
    ],
    "dpi": [ 442.4, 444.1 ],
    "bw": 3,
    "ac": 1000
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "samsung/*/GT-I9082/*" },
      { "ua": "GT-I9082" }
    ],
    "dpi": [ 184.7, 185.4 ],
    "bw": 3,
    "ac": 1000
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "samsung/*/SM-G360P/*" },
      { "ua": "SM-G360P" }
    ],
    "dpi": [ 196.7, 205.4 ],
    "bw": 3,
    "ac": 1000
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "samsung/*/Nexus S/*" },
      { "ua": "Nexus S" }
    ],
    "dpi": [ 234.5, 229.8 ],
    "bw": 3,
    "ac": 1000
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "samsung/*/GT-I9300/*" },
      { "ua": "GT-I9300" }
    ],
    "dpi": [ 304.8, 303.9 ],
    "bw": 5,
    "ac": 500
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "samsung/*/SM-T230NU/*" },
      { "ua": "SM-T230NU" }
    ],
    "dpi": 216.0,
    "bw": 3,
    "ac": 500
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "samsung/*/SGH-T399/*" },
      { "ua": "SGH-T399" }
    ],
    "dpi": [ 217.7, 231.4 ],
    "bw": 3,
    "ac": 1000
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "samsung/*/SM-N9005/*" },
      { "ua": "SM-N9005" }
    ],
    "dpi": [ 386.4, 387.0 ],
    "bw": 3,
    "ac": 500
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "samsung/*/SAMSUNG-SM-N900A/*" },
      { "ua": "SAMSUNG-SM-N900A" }
    ],
    "dpi": [ 386.4, 387.7 ],
    "bw": 3,
    "ac": 1000
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "samsung/*/GT-I9500/*" },
      { "ua": "GT-I9500" }
    ],
    "dpi": [ 442.5, 443.3 ],
    "bw": 3,
    "ac": 500
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "samsung/*/GT-I9505/*" },
      { "ua": "GT-I9505" }
    ],
    "dpi": 439.4,
    "bw": 4,
    "ac": 1000
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "samsung/*/SM-G900F/*" },
      { "ua": "SM-G900F" }
    ],
    "dpi": [ 415.6, 431.6 ],
    "bw": 5,
    "ac": 1000
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "samsung/*/SM-G900M/*" },
      { "ua": "SM-G900M" }
    ],
    "dpi": [ 415.6, 431.6 ],
    "bw": 5,
    "ac": 1000
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "samsung/*/SM-G800F/*" },
      { "ua": "SM-G800F" }
    ],
    "dpi": 326.8,
    "bw": 3,
    "ac": 1000
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "samsung/*/SM-G906S/*" },
      { "ua": "SM-G906S" }
    ],
    "dpi": [ 562.7, 572.4 ],
    "bw": 3,
    "ac": 1000
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "samsung/*/GT-I9300/*" },
      { "ua": "GT-I9300" }
    ],
    "dpi": [ 306.7, 304.8 ],
    "bw": 5,
    "ac": 1000
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "samsung/*/SM-T535/*" },
      { "ua": "SM-T535" }
    ],
    "dpi": [ 142.6, 136.4 ],
    "bw": 3,
    "ac": 500
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "samsung/*/SM-N920C/*" },
      { "ua": "SM-N920C" }
    ],
    "dpi": [ 515.1, 518.4 ],
    "bw": 3,
    "ac": 1000
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "samsung/*/GT-I9300I/*" },
      { "ua": "GT-I9300I" }
    ],
    "dpi": [ 304.8, 305.8 ],
    "bw": 3,
    "ac": 1000
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "samsung/*/GT-I9195/*" },
      { "ua": "GT-I9195" }
    ],
    "dpi": [ 249.4, 256.7 ],
    "bw": 3,
    "ac": 500
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "samsung/*/SPH-L520/*" },
      { "ua": "SPH-L520" }
    ],
    "dpi": [ 249.4, 255.9 ],
    "bw": 3,
    "ac": 1000
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "samsung/*/SAMSUNG-SGH-I717/*" },
      { "ua": "SAMSUNG-SGH-I717" }
    ],
    "dpi": 285.8,
    "bw": 3,
    "ac": 1000
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "samsung/*/SPH-D710/*" },
      { "ua": "SPH-D710" }
    ],
    "dpi": [ 217.7, 204.2 ],
    "bw": 3,
    "ac": 1000
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "samsung/*/GT-N7100/*" },
      { "ua": "GT-N7100" }
    ],
    "dpi": 265.1,
    "bw": 3,
    "ac": 1000
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "samsung/*/SCH-I605/*" },
      { "ua": "SCH-I605" }
    ],
    "dpi": 265.1,
    "bw": 3,
    "ac": 1000
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "samsung/*/Galaxy Nexus/*" },
      { "ua": "Galaxy Nexus" }
    ],
    "dpi": [ 315.3, 314.2 ],
    "bw": 3,
    "ac": 1000
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "samsung/*/SM-N910H/*" },
      { "ua": "SM-N910H" }
    ],
    "dpi": [ 515.1, 518.0 ],
    "bw": 3,
    "ac": 1000
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "samsung/*/SM-N910C/*" },
      { "ua": "SM-N910C" }
    ],
    "dpi": [ 515.2, 520.2 ],
    "bw": 3,
    "ac": 500
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "samsung/*/SM-G130M/*" },
      { "ua": "SM-G130M" }
    ],
    "dpi": [ 165.9, 164.8 ],
    "bw": 3,
    "ac": 500
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "samsung/*/SM-G928I/*" },
      { "ua": "SM-G928I" }
    ],
    "dpi": [ 515.1, 518.4 ],
    "bw": 3,
    "ac": 1000
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "samsung/*/SM-G920F/*" },
      { "ua": "SM-G920F" }
    ],
    "dpi": 580.6,
    "bw": 3,
    "ac": 500
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "samsung/*/SM-G920P/*" },
      { "ua": "SM-G920P" }
    ],
    "dpi": [ 522.5, 577.0 ],
    "bw": 3,
    "ac": 1000
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "samsung/*/SM-G925F/*" },
      { "ua": "SM-G925F" }
    ],
    "dpi": 580.6,
    "bw": 3,
    "ac": 500
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "samsung/*/SM-G925V/*" },
      { "ua": "SM-G925V" }
    ],
    "dpi": [ 522.5, 576.6 ],
    "bw": 3,
    "ac": 1000
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "Sony/*/C6903/*" },
      { "ua": "C6903" }
    ],
    "dpi": [ 442.5, 443.3 ],
    "bw": 3,
    "ac": 500
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "Sony/*/D6653/*" },
      { "ua": "D6653" }
    ],
    "dpi": [ 428.6, 427.6 ],
    "bw": 3,
    "ac": 1000
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "Sony/*/E6653/*" },
      { "ua": "E6653" }
    ],
    "dpi": [ 428.6, 425.7 ],
    "bw": 3,
    "ac": 1000
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "Sony/*/E6853/*" },
      { "ua": "E6853" }
    ],
    "dpi": [ 403.4, 401.9 ],
    "bw": 3,
    "ac": 1000
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "Sony/*/SGP321/*" },
      { "ua": "SGP321" }
    ],
    "dpi": [ 224.7, 224.1 ],
    "bw": 3,
    "ac": 500
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "TCT/*/ALCATEL ONE TOUCH Fierce/*" },
      { "ua": "ALCATEL ONE TOUCH Fierce" }
    ],
    "dpi": [ 240.0, 247.5 ],
    "bw": 3,
    "ac": 1000
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "THL/*/thl 5000/*" },
      { "ua": "thl 5000" }
    ],
    "dpi": [ 480.0, 443.3 ],
    "bw": 3,
    "ac": 1000
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "ZTE/*/ZTE Blade L2/*" },
      { "ua": "ZTE Blade L2" }
    ],
    "dpi": 240.0,
    "bw": 3,
    "ac": 500
  },

  {
    "type": "ios",
    "rules": [ { "res": [ 640, 960 ] } ],
    "dpi": [ 325.1, 328.4 ],
    "bw": 4,
    "ac": 1000
  },

  {
    "type": "ios",
    "rules": [ { "res": [ 640, 960 ] } ],
    "dpi": [ 325.1, 328.4 ],
    "bw": 4,
    "ac": 1000
  },

  {
    "type": "ios",
    "rules": [ { "res": [ 640, 1136 ] } ],
    "dpi": [ 317.1, 320.2 ],
    "bw": 3,
    "ac": 1000
  },

  {
    "type": "ios",
    "rules": [ { "res": [ 640, 1136 ] } ],
    "dpi": [ 317.1, 320.2 ],
    "bw": 3,
    "ac": 1000
  },

  {
    "type": "ios",
    "rules": [ { "res": [ 750, 1334 ] } ],
    "dpi": 326.4,
    "bw": 4,
    "ac": 1000
  },

  {
    "type": "ios",
    "rules": [ { "res": [ 750, 1334 ] } ],
    "dpi": 326.4,
    "bw": 4,
    "ac": 1000
  },

  {
    "type": "ios",
    "rules": [ { "res": [ 1242, 2208 ] } ],
    "dpi": [ 453.6, 458.4 ],
    "bw": 4,
    "ac": 1000
  },

  {
    "type": "ios",
    "rules": [ { "res": [ 1242, 2208 ] } ],
    "dpi": [ 453.6, 458.4 ],
    "bw": 4,
    "ac": 1000
  }
]};

module.exports = DPDB_CACHE;

},{}],11:[function(_dereq_,module,exports){
/*
 * Copyright 2015 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

// Offline cache of the DPDB, to be used until we load the online one (and
// as a fallback in case we can't load the online one).
var DPDB_CACHE = _dereq_('./dpdb-cache.js');
var Util = _dereq_('../util.js');

// Online DPDB URL.
var ONLINE_DPDB_URL = 'https://storage.googleapis.com/cardboard-dpdb/dpdb.json';

/**
 * Calculates device parameters based on the DPDB (Device Parameter Database).
 * Initially, uses the cached DPDB values.
 *
 * If fetchOnline == true, then this object tries to fetch the online version
 * of the DPDB and updates the device info if a better match is found.
 * Calls the onDeviceParamsUpdated callback when there is an update to the
 * device information.
 */
function Dpdb(fetchOnline, onDeviceParamsUpdated) {
  // Start with the offline DPDB cache while we are loading the real one.
  this.dpdb = DPDB_CACHE;

  // Calculate device params based on the offline version of the DPDB.
  this.recalculateDeviceParams_();

  // XHR to fetch online DPDB file, if requested.
  if (fetchOnline) {
    // Set the callback.
    this.onDeviceParamsUpdated = onDeviceParamsUpdated;

    console.log('Fetching DPDB...');
    var xhr = new XMLHttpRequest();
    var obj = this;
    xhr.open('GET', ONLINE_DPDB_URL, true);
    xhr.addEventListener('load', function() {
      obj.loading = false;
      if (xhr.status >= 200 && xhr.status <= 299) {
        // Success.
        console.log('Successfully loaded online DPDB.');
        obj.dpdb = JSON.parse(xhr.response);
        obj.recalculateDeviceParams_();
      } else {
        // Error loading the DPDB.
        console.error('Error loading online DPDB!');
      }
    });
    xhr.send();
  }
}

// Returns the current device parameters.
Dpdb.prototype.getDeviceParams = function() {
  return this.deviceParams;
};

// Recalculates this device's parameters based on the DPDB.
Dpdb.prototype.recalculateDeviceParams_ = function() {
  console.log('Recalculating device params.');
  var newDeviceParams = this.calcDeviceParams_();
  console.log('New device parameters:');
  console.log(newDeviceParams);
  if (newDeviceParams) {
    this.deviceParams = newDeviceParams;
    // Invoke callback, if it is set.
    if (this.onDeviceParamsUpdated) {
      this.onDeviceParamsUpdated(this.deviceParams);
    }
  } else {
    console.error('Failed to recalculate device parameters.');
  }
};

// Returns a DeviceParams object that represents the best guess as to this
// device's parameters. Can return null if the device does not match any
// known devices.
Dpdb.prototype.calcDeviceParams_ = function() {
  var db = this.dpdb; // shorthand
  if (!db) {
    console.error('DPDB not available.');
    return null;
  }
  if (db.format != 1) {
    console.error('DPDB has unexpected format version.');
    return null;
  }
  if (!db.devices || !db.devices.length) {
    console.error('DPDB does not have a devices section.');
    return null;
  }

  // Get the actual user agent and screen dimensions in pixels.
  var userAgent = navigator.userAgent || navigator.vendor || window.opera;
  var width = Util.getScreenWidth();
  var height = Util.getScreenHeight();
  console.log('User agent: ' + userAgent);
  console.log('Pixel width: ' + width);
  console.log('Pixel height: ' + height);

  if (!db.devices) {
    console.error('DPDB has no devices section.');
    return null;
  }

  for (var i = 0; i < db.devices.length; i++) {
    var device = db.devices[i];
    if (!device.rules) {
      console.warn('Device[' + i + '] has no rules section.');
      continue;
    }

    if (device.type != 'ios' && device.type != 'android') {
      console.warn('Device[' + i + '] has invalid type.');
      continue;
    }

    // See if this device is of the appropriate type.
    if (Util.isIOS() != (device.type == 'ios')) continue;

    // See if this device matches any of the rules:
    var matched = false;
    for (var j = 0; j < device.rules.length; j++) {
      var rule = device.rules[j];
      if (this.matchRule_(rule, userAgent, width, height)) {
        console.log('Rule matched:');
        console.log(rule);
        matched = true;
        break;
      }
    }
    if (!matched) continue;

    // device.dpi might be an array of [ xdpi, ydpi] or just a scalar.
    var xdpi = device.dpi[0] || device.dpi;
    var ydpi = device.dpi[1] || device.dpi;

    return new DeviceParams({ xdpi: xdpi, ydpi: ydpi, bevelMm: device.bw });
  }

  console.warn('No DPDB device match.');
  return null;
};

Dpdb.prototype.matchRule_ = function(rule, ua, screenWidth, screenHeight) {
  // We can only match 'ua' and 'res' rules, not other types like 'mdmh'
  // (which are meant for native platforms).
  if (!rule.ua && !rule.res) return false;

  // If our user agent string doesn't contain the indicated user agent string,
  // the match fails.
  if (rule.ua && ua.indexOf(rule.ua) < 0) return false;

  // If the rule specifies screen dimensions that don't correspond to ours,
  // the match fails.
  if (rule.res) {
    if (!rule.res[0] || !rule.res[1]) return false;
    var resX = rule.res[0];
    var resY = rule.res[1];
    // Compare min and max so as to make the order not matter, i.e., it should
    // be true that 640x480 == 480x640.
    if (Math.min(screenWidth, screenHeight) != Math.min(resX, resY) ||
        (Math.max(screenWidth, screenHeight) != Math.max(resX, resY))) {
      return false;
    }
  }

  return true;
}

function DeviceParams(params) {
  this.xdpi = params.xdpi;
  this.ydpi = params.ydpi;
  this.bevelMm = params.bevelMm;
}

module.exports = Dpdb;
},{"../util.js":22,"./dpdb-cache.js":10}],12:[function(_dereq_,module,exports){
/*
 * Copyright 2015 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

function Emitter() {
  this.callbacks = {};
}

Emitter.prototype.emit = function(eventName) {
  var callbacks = this.callbacks[eventName];
  if (!callbacks) {
    //console.log('No valid callback specified.');
    return;
  }
  var args = [].slice.call(arguments);
  // Eliminate the first param (the callback).
  args.shift();
  for (var i = 0; i < callbacks.length; i++) {
    callbacks[i].apply(this, args);
  }
};

Emitter.prototype.on = function(eventName, callback) {
  if (eventName in this.callbacks) {
    this.callbacks[eventName].push(callback);
  } else {
    this.callbacks[eventName] = [callback];
  }
};

module.exports = Emitter;

},{}],13:[function(_dereq_,module,exports){
/*
 * Copyright 2015 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Util = _dereq_('./util.js');
var WebVRPolyfill = _dereq_('./webvr-polyfill.js');

// Initialize a WebVRConfig just in case.
window.WebVRConfig = Util.extend({
  // Forces availability of VR mode, even for non-mobile devices.
  FORCE_ENABLE_VR: false,

  // Complementary filter coefficient. 0 for accelerometer, 1 for gyro.
  K_FILTER: 0.98,

  // How far into the future to predict during fast motion (in seconds).
  PREDICTION_TIME_S: 0.040,

  // Flag to disable touch panner. In case you have your own touch controls.
  TOUCH_PANNER_DISABLED: false,

  // Flag to disabled the UI in VR Mode.
  CARDBOARD_UI_DISABLED: false, // Default: false

  // Flag to disable the instructions to rotate your device.
  ROTATE_INSTRUCTIONS_DISABLED: false, // Default: false.

  // Enable yaw panning only, disabling roll and pitch. This can be useful
  // for panoramas with nothing interesting above or below.
  YAW_ONLY: false,

  // To disable keyboard and mouse controls, if you want to use your own
  // implementation.
  MOUSE_KEYBOARD_CONTROLS_DISABLED: false,

  // Prevent the polyfill from initializing immediately. Requires the app
  // to call InitializeWebVRPolyfill() before it can be used.
  DEFER_INITIALIZATION: false,

  // Enable the deprecated version of the API (navigator.getVRDevices).
  ENABLE_DEPRECATED_API: false,

  // Scales the recommended buffer size reported by WebVR, which can improve
  // performance.
  // UPDATE(2016-05-03): Setting this to 0.5 by default since 1.0 does not
  // perform well on many mobile devices.
  BUFFER_SCALE: 0.5,

  // Allow VRDisplay.submitFrame to change gl bindings, which is more
  // efficient if the application code will re-bind its resources on the
  // next frame anyway. This has been seen to cause rendering glitches with
  // THREE.js.
  // Dirty bindings include: gl.FRAMEBUFFER_BINDING, gl.CURRENT_PROGRAM,
  // gl.ARRAY_BUFFER_BINDING, gl.ELEMENT_ARRAY_BUFFER_BINDING,
  // and gl.TEXTURE_BINDING_2D for texture unit 0.
  DIRTY_SUBMIT_FRAME_BINDINGS: false
}, window.WebVRConfig);

if (!window.WebVRConfig.DEFER_INITIALIZATION) {
  new WebVRPolyfill();
} else {
  window.InitializeWebVRPolyfill = function() {
    new WebVRPolyfill();
  }
}

},{"./util.js":22,"./webvr-polyfill.js":25}],14:[function(_dereq_,module,exports){
/*
 * Copyright 2016 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

var MathUtil = window.MathUtil || {};

MathUtil.degToRad = Math.PI / 180;
MathUtil.radToDeg = 180 / Math.PI;

// Some minimal math functionality borrowed from THREE.Math and stripped down
// for the purposes of this library.


MathUtil.Vector2 = function ( x, y ) {
  this.x = x || 0;
  this.y = y || 0;
};

MathUtil.Vector2.prototype = {
  constructor: MathUtil.Vector2,

  set: function ( x, y ) {
    this.x = x;
    this.y = y;

    return this;
  },

  copy: function ( v ) {
    this.x = v.x;
    this.y = v.y;

    return this;
  },

  subVectors: function ( a, b ) {
    this.x = a.x - b.x;
    this.y = a.y - b.y;

    return this;
  },
};

MathUtil.Vector3 = function ( x, y, z ) {
  this.x = x || 0;
  this.y = y || 0;
  this.z = z || 0;
};

MathUtil.Vector3.prototype = {
  constructor: MathUtil.Vector3,

  set: function ( x, y, z ) {
    this.x = x;
    this.y = y;
    this.z = z;

    return this;
  },

  copy: function ( v ) {
    this.x = v.x;
    this.y = v.y;
    this.z = v.z;

    return this;
  },

  length: function () {
    return Math.sqrt( this.x * this.x + this.y * this.y + this.z * this.z );
  },

  normalize: function () {
    var scalar = this.length();

    if ( scalar !== 0 ) {
      var invScalar = 1 / scalar;

      this.multiplyScalar(invScalar);
    } else {
      this.x = 0;
      this.y = 0;
      this.z = 0;
    }

    return this;
  },

  multiplyScalar: function ( scalar ) {
    this.x *= scalar;
    this.y *= scalar;
    this.z *= scalar;
  },

  applyQuaternion: function ( q ) {
    var x = this.x;
    var y = this.y;
    var z = this.z;

    var qx = q.x;
    var qy = q.y;
    var qz = q.z;
    var qw = q.w;

    // calculate quat * vector
    var ix =  qw * x + qy * z - qz * y;
    var iy =  qw * y + qz * x - qx * z;
    var iz =  qw * z + qx * y - qy * x;
    var iw = - qx * x - qy * y - qz * z;

    // calculate result * inverse quat
    this.x = ix * qw + iw * - qx + iy * - qz - iz * - qy;
    this.y = iy * qw + iw * - qy + iz * - qx - ix * - qz;
    this.z = iz * qw + iw * - qz + ix * - qy - iy * - qx;

    return this;
  },

  dot: function ( v ) {
    return this.x * v.x + this.y * v.y + this.z * v.z;
  },

  crossVectors: function ( a, b ) {
    var ax = a.x, ay = a.y, az = a.z;
    var bx = b.x, by = b.y, bz = b.z;

    this.x = ay * bz - az * by;
    this.y = az * bx - ax * bz;
    this.z = ax * by - ay * bx;

    return this;
  },
};

MathUtil.Quaternion = function ( x, y, z, w ) {
  this.x = x || 0;
  this.y = y || 0;
  this.z = z || 0;
  this.w = ( w !== undefined ) ? w : 1;
};

MathUtil.Quaternion.prototype = {
  constructor: MathUtil.Quaternion,

  set: function ( x, y, z, w ) {
    this.x = x;
    this.y = y;
    this.z = z;
    this.w = w;

    return this;
  },

  copy: function ( quaternion ) {
    this.x = quaternion.x;
    this.y = quaternion.y;
    this.z = quaternion.z;
    this.w = quaternion.w;

    return this;
  },

  setFromEulerXYZ: function( x, y, z ) {
    var c1 = Math.cos( x / 2 );
    var c2 = Math.cos( y / 2 );
    var c3 = Math.cos( z / 2 );
    var s1 = Math.sin( x / 2 );
    var s2 = Math.sin( y / 2 );
    var s3 = Math.sin( z / 2 );

    this.x = s1 * c2 * c3 + c1 * s2 * s3;
    this.y = c1 * s2 * c3 - s1 * c2 * s3;
    this.z = c1 * c2 * s3 + s1 * s2 * c3;
    this.w = c1 * c2 * c3 - s1 * s2 * s3;

    return this;
  },

  setFromEulerYXZ: function( x, y, z ) {
    var c1 = Math.cos( x / 2 );
    var c2 = Math.cos( y / 2 );
    var c3 = Math.cos( z / 2 );
    var s1 = Math.sin( x / 2 );
    var s2 = Math.sin( y / 2 );
    var s3 = Math.sin( z / 2 );

    this.x = s1 * c2 * c3 + c1 * s2 * s3;
    this.y = c1 * s2 * c3 - s1 * c2 * s3;
    this.z = c1 * c2 * s3 - s1 * s2 * c3;
    this.w = c1 * c2 * c3 + s1 * s2 * s3;

    return this;
  },

  setFromAxisAngle: function ( axis, angle ) {
    // http://www.euclideanspace.com/maths/geometry/rotations/conversions/angleToQuaternion/index.htm
    // assumes axis is normalized

    var halfAngle = angle / 2, s = Math.sin( halfAngle );

    this.x = axis.x * s;
    this.y = axis.y * s;
    this.z = axis.z * s;
    this.w = Math.cos( halfAngle );

    return this;
  },

  multiply: function ( q ) {
    return this.multiplyQuaternions( this, q );
  },

  multiplyQuaternions: function ( a, b ) {
    // from http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/code/index.htm

    var qax = a.x, qay = a.y, qaz = a.z, qaw = a.w;
    var qbx = b.x, qby = b.y, qbz = b.z, qbw = b.w;

    this.x = qax * qbw + qaw * qbx + qay * qbz - qaz * qby;
    this.y = qay * qbw + qaw * qby + qaz * qbx - qax * qbz;
    this.z = qaz * qbw + qaw * qbz + qax * qby - qay * qbx;
    this.w = qaw * qbw - qax * qbx - qay * qby - qaz * qbz;

    return this;
  },

  inverse: function () {
    this.x *= -1;
    this.y *= -1;
    this.z *= -1;

    this.normalize();

    return this;
  },

  normalize: function () {
    var l = Math.sqrt( this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w );

    if ( l === 0 ) {
      this.x = 0;
      this.y = 0;
      this.z = 0;
      this.w = 1;
    } else {
      l = 1 / l;

      this.x = this.x * l;
      this.y = this.y * l;
      this.z = this.z * l;
      this.w = this.w * l;
    }

    return this;
  },

  slerp: function ( qb, t ) {
    if ( t === 0 ) return this;
    if ( t === 1 ) return this.copy( qb );

    var x = this.x, y = this.y, z = this.z, w = this.w;

    // http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/slerp/

    var cosHalfTheta = w * qb.w + x * qb.x + y * qb.y + z * qb.z;

    if ( cosHalfTheta < 0 ) {
      this.w = - qb.w;
      this.x = - qb.x;
      this.y = - qb.y;
      this.z = - qb.z;

      cosHalfTheta = - cosHalfTheta;
    } else {
      this.copy( qb );
    }

    if ( cosHalfTheta >= 1.0 ) {
      this.w = w;
      this.x = x;
      this.y = y;
      this.z = z;

      return this;
    }

    var halfTheta = Math.acos( cosHalfTheta );
    var sinHalfTheta = Math.sqrt( 1.0 - cosHalfTheta * cosHalfTheta );

    if ( Math.abs( sinHalfTheta ) < 0.001 ) {
      this.w = 0.5 * ( w + this.w );
      this.x = 0.5 * ( x + this.x );
      this.y = 0.5 * ( y + this.y );
      this.z = 0.5 * ( z + this.z );

      return this;
    }

    var ratioA = Math.sin( ( 1 - t ) * halfTheta ) / sinHalfTheta,
    ratioB = Math.sin( t * halfTheta ) / sinHalfTheta;

    this.w = ( w * ratioA + this.w * ratioB );
    this.x = ( x * ratioA + this.x * ratioB );
    this.y = ( y * ratioA + this.y * ratioB );
    this.z = ( z * ratioA + this.z * ratioB );

    return this;
  },

  setFromUnitVectors: function () {
    // http://lolengine.net/blog/2014/02/24/quaternion-from-two-vectors-final
    // assumes direction vectors vFrom and vTo are normalized

    var v1, r;
    var EPS = 0.000001;

    return function ( vFrom, vTo ) {
      if ( v1 === undefined ) v1 = new MathUtil.Vector3();

      r = vFrom.dot( vTo ) + 1;

      if ( r < EPS ) {
        r = 0;

        if ( Math.abs( vFrom.x ) > Math.abs( vFrom.z ) ) {
          v1.set( - vFrom.y, vFrom.x, 0 );
        } else {
          v1.set( 0, - vFrom.z, vFrom.y );
        }
      } else {
        v1.crossVectors( vFrom, vTo );
      }

      this.x = v1.x;
      this.y = v1.y;
      this.z = v1.z;
      this.w = r;

      this.normalize();

      return this;
    }
  }(),
};

module.exports = MathUtil;

},{}],15:[function(_dereq_,module,exports){
/*
 * Copyright 2016 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

var VRDisplay = _dereq_('./base.js').VRDisplay;
var MathUtil = _dereq_('./math-util.js');
var Util = _dereq_('./util.js');

// How much to rotate per key stroke.
var KEY_SPEED = 0.15;
var KEY_ANIMATION_DURATION = 80;

// How much to rotate for mouse events.
var MOUSE_SPEED_X = 0.5;
var MOUSE_SPEED_Y = 0.3;

/**
 * VRDisplay based on mouse and keyboard input. Designed for desktops/laptops
 * where orientation events aren't supported. Cannot present.
 */
function MouseKeyboardVRDisplay() {
  this.displayName = 'Mouse and Keyboard VRDisplay (webvr-polyfill)';

  this.capabilities.hasOrientation = true;

  // Attach to mouse and keyboard events.
  window.addEventListener('keydown', this.onKeyDown_.bind(this));
  window.addEventListener('mousemove', this.onMouseMove_.bind(this));
  window.addEventListener('mousedown', this.onMouseDown_.bind(this));
  window.addEventListener('mouseup', this.onMouseUp_.bind(this));

  // "Private" members.
  this.phi_ = 0;
  this.theta_ = 0;

  // Variables for keyboard-based rotation animation.
  this.targetAngle_ = null;
  this.angleAnimation_ = null;

  // State variables for calculations.
  this.orientation_ = new MathUtil.Quaternion();

  // Variables for mouse-based rotation.
  this.rotateStart_ = new MathUtil.Vector2();
  this.rotateEnd_ = new MathUtil.Vector2();
  this.rotateDelta_ = new MathUtil.Vector2();
  this.isDragging_ = false;

  this.orientationOut_ = new Float32Array(4);
}
MouseKeyboardVRDisplay.prototype = new VRDisplay();

MouseKeyboardVRDisplay.prototype.getImmediatePose = function() {
  this.orientation_.setFromEulerYXZ(this.phi_, this.theta_, 0);

  this.orientationOut_[0] = this.orientation_.x;
  this.orientationOut_[1] = this.orientation_.y;
  this.orientationOut_[2] = this.orientation_.z;
  this.orientationOut_[3] = this.orientation_.w;

  return {
    position: null,
    orientation: this.orientationOut_,
    linearVelocity: null,
    linearAcceleration: null,
    angularVelocity: null,
    angularAcceleration: null
  };
};

MouseKeyboardVRDisplay.prototype.onKeyDown_ = function(e) {
  // Track WASD and arrow keys.
  if (e.keyCode == 38) { // Up key.
    this.animatePhi_(this.phi_ + KEY_SPEED);
  } else if (e.keyCode == 39) { // Right key.
    this.animateTheta_(this.theta_ - KEY_SPEED);
  } else if (e.keyCode == 40) { // Down key.
    this.animatePhi_(this.phi_ - KEY_SPEED);
  } else if (e.keyCode == 37) { // Left key.
    this.animateTheta_(this.theta_ + KEY_SPEED);
  }
};

MouseKeyboardVRDisplay.prototype.animateTheta_ = function(targetAngle) {
  this.animateKeyTransitions_('theta_', targetAngle);
};

MouseKeyboardVRDisplay.prototype.animatePhi_ = function(targetAngle) {
  // Prevent looking too far up or down.
  targetAngle = Util.clamp(targetAngle, -Math.PI/2, Math.PI/2);
  this.animateKeyTransitions_('phi_', targetAngle);
};

/**
 * Start an animation to transition an angle from one value to another.
 */
MouseKeyboardVRDisplay.prototype.animateKeyTransitions_ = function(angleName, targetAngle) {
  // If an animation is currently running, cancel it.
  if (this.angleAnimation_) {
    cancelAnimationFrame(this.angleAnimation_);
  }
  var startAngle = this[angleName];
  var startTime = new Date();
  // Set up an interval timer to perform the animation.
  this.angleAnimation_ = requestAnimationFrame(function animate() {
    // Once we're finished the animation, we're done.
    var elapsed = new Date() - startTime;
    if (elapsed >= KEY_ANIMATION_DURATION) {
      this[angleName] = targetAngle;
      cancelAnimationFrame(this.angleAnimation_);
      return;
    }
    // loop with requestAnimationFrame
    this.angleAnimation_ = requestAnimationFrame(animate.bind(this))
    // Linearly interpolate the angle some amount.
    var percent = elapsed / KEY_ANIMATION_DURATION;
    this[angleName] = startAngle + (targetAngle - startAngle) * percent;
  }.bind(this));
};

MouseKeyboardVRDisplay.prototype.onMouseDown_ = function(e) {
  this.rotateStart_.set(e.clientX, e.clientY);
  this.isDragging_ = true;
};

// Very similar to https://gist.github.com/mrflix/8351020
MouseKeyboardVRDisplay.prototype.onMouseMove_ = function(e) {
  if (!this.isDragging_ && !this.isPointerLocked_()) {
    return;
  }
  // Support pointer lock API.
  if (this.isPointerLocked_()) {
    var movementX = e.movementX || e.mozMovementX || 0;
    var movementY = e.movementY || e.mozMovementY || 0;
    this.rotateEnd_.set(this.rotateStart_.x - movementX, this.rotateStart_.y - movementY);
  } else {
    this.rotateEnd_.set(e.clientX, e.clientY);
  }
  // Calculate how much we moved in mouse space.
  this.rotateDelta_.subVectors(this.rotateEnd_, this.rotateStart_);
  this.rotateStart_.copy(this.rotateEnd_);

  // Keep track of the cumulative euler angles.
  this.phi_ += 2 * Math.PI * this.rotateDelta_.y / screen.height * MOUSE_SPEED_Y;
  this.theta_ += 2 * Math.PI * this.rotateDelta_.x / screen.width * MOUSE_SPEED_X;

  // Prevent looking too far up or down.
  this.phi_ = Util.clamp(this.phi_, -Math.PI/2, Math.PI/2);
};

MouseKeyboardVRDisplay.prototype.onMouseUp_ = function(e) {
  this.isDragging_ = false;
};

MouseKeyboardVRDisplay.prototype.isPointerLocked_ = function() {
  var el = document.pointerLockElement || document.mozPointerLockElement ||
      document.webkitPointerLockElement;
  return el !== undefined;
};

MouseKeyboardVRDisplay.prototype.resetPose = function() {
  this.phi_ = 0;
  this.theta_ = 0;
};

module.exports = MouseKeyboardVRDisplay;

},{"./base.js":2,"./math-util.js":14,"./util.js":22}],16:[function(_dereq_,module,exports){
/*
 * Copyright 2015 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

var Util = _dereq_('./util.js');

function RotateInstructions() {
  this.loadIcon_();

  var overlay = document.createElement('div');
  var s = overlay.style;
  s.position = 'fixed';
  s.top = 0;
  s.right = 0;
  s.bottom = 0;
  s.left = 0;
  s.backgroundColor = 'gray';
  s.fontFamily = 'sans-serif';
  // Force this to be above the fullscreen canvas, which is at zIndex: 999999.
  s.zIndex = 1000000;

  var img = document.createElement('img');
  img.src = this.icon;
  var s = img.style;
  s.marginLeft = '25%';
  s.marginTop = '25%';
  s.width = '50%';
  overlay.appendChild(img);

  var text = document.createElement('div');
  var s = text.style;
  s.textAlign = 'center';
  s.fontSize = '16px';
  s.lineHeight = '24px';
  s.margin = '24px 25%';
  s.width = '50%';
  text.innerHTML = 'Place your phone into your Cardboard viewer.';
  overlay.appendChild(text);

  var snackbar = document.createElement('div');
  var s = snackbar.style;
  s.backgroundColor = '#CFD8DC';
  s.position = 'fixed';
  s.bottom = 0;
  s.width = '100%';
  s.height = '48px';
  s.padding = '14px 24px';
  s.boxSizing = 'border-box';
  s.color = '#656A6B';
  overlay.appendChild(snackbar);

  var snackbarText = document.createElement('div');
  snackbarText.style.float = 'left';
  snackbarText.innerHTML = 'No Cardboard viewer?';

  var snackbarButton = document.createElement('a');
  snackbarButton.href = 'https://www.google.com/get/cardboard/get-cardboard/';
  snackbarButton.innerHTML = 'get one';
  snackbarButton.target = '_blank';
  var s = snackbarButton.style;
  s.float = 'right';
  s.fontWeight = 600;
  s.textTransform = 'uppercase';
  s.borderLeft = '1px solid gray';
  s.paddingLeft = '24px';
  s.textDecoration = 'none';
  s.color = '#656A6B';

  snackbar.appendChild(snackbarText);
  snackbar.appendChild(snackbarButton);

  this.overlay = overlay;
  this.text = text;

  this.hide();
}

RotateInstructions.prototype.show = function(parent) {
  if (!parent && !this.overlay.parentElement) {
    document.body.appendChild(this.overlay);
  } else if (parent) {
    if (this.overlay.parentElement && this.overlay.parentElement != parent)
      this.overlay.parentElement.removeChild(this.overlay);

    parent.appendChild(this.overlay);
  }

  this.overlay.style.display = 'block';

  var img = this.overlay.querySelector('img');
  var s = img.style;

  if (Util.isLandscapeMode()) {
    s.width = '20%';
    s.marginLeft = '40%';
    s.marginTop = '3%';
  } else {
    s.width = '50%';
    s.marginLeft = '25%';
    s.marginTop = '25%';
  }
};

RotateInstructions.prototype.hide = function() {
  this.overlay.style.display = 'none';
};

RotateInstructions.prototype.showTemporarily = function(ms, parent) {
  this.show(parent);
  this.timer = setTimeout(this.hide.bind(this), ms);
};

RotateInstructions.prototype.disableShowTemporarily = function() {
  clearTimeout(this.timer);
};

RotateInstructions.prototype.update = function() {
  this.disableShowTemporarily();
  // In portrait VR mode, tell the user to rotate to landscape. Otherwise, hide
  // the instructions.
  if (!Util.isLandscapeMode() && Util.isMobile()) {
    this.show();
  } else {
    this.hide();
  }
};

RotateInstructions.prototype.loadIcon_ = function() {
  // Encoded asset_src/rotate-instructions.svg
  this.icon = Util.base64('image/svg+xml', 'PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjE5OHB4IiBoZWlnaHQ9IjI0MHB4IiB2aWV3Qm94PSIwIDAgMTk4IDI0MCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4bWxuczpza2V0Y2g9Imh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaC9ucyI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDMuMy4zICgxMjA4MSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+dHJhbnNpdGlvbjwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxkZWZzPjwvZGVmcz4KICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHNrZXRjaDp0eXBlPSJNU1BhZ2UiPgogICAgICAgIDxnIGlkPSJ0cmFuc2l0aW9uIiBza2V0Y2g6dHlwZT0iTVNBcnRib2FyZEdyb3VwIj4KICAgICAgICAgICAgPGcgaWQ9IkltcG9ydGVkLUxheWVycy1Db3B5LTQtKy1JbXBvcnRlZC1MYXllcnMtQ29weS0rLUltcG9ydGVkLUxheWVycy1Db3B5LTItQ29weSIgc2tldGNoOnR5cGU9Ik1TTGF5ZXJHcm91cCI+CiAgICAgICAgICAgICAgICA8ZyBpZD0iSW1wb3J0ZWQtTGF5ZXJzLUNvcHktNCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC4wMDAwMDAsIDEwNy4wMDAwMDApIiBza2V0Y2g6dHlwZT0iTVNTaGFwZUdyb3VwIj4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTQ5LjYyNSwyLjUyNyBDMTQ5LjYyNSwyLjUyNyAxNTUuODA1LDYuMDk2IDE1Ni4zNjIsNi40MTggTDE1Ni4zNjIsNy4zMDQgQzE1Ni4zNjIsNy40ODEgMTU2LjM3NSw3LjY2NCAxNTYuNCw3Ljg1MyBDMTU2LjQxLDcuOTM0IDE1Ni40Miw4LjAxNSAxNTYuNDI3LDguMDk1IEMxNTYuNTY3LDkuNTEgMTU3LjQwMSwxMS4wOTMgMTU4LjUzMiwxMi4wOTQgTDE2NC4yNTIsMTcuMTU2IEwxNjQuMzMzLDE3LjA2NiBDMTY0LjMzMywxNy4wNjYgMTY4LjcxNSwxNC41MzYgMTY5LjU2OCwxNC4wNDIgQzE3MS4wMjUsMTQuODgzIDE5NS41MzgsMjkuMDM1IDE5NS41MzgsMjkuMDM1IEwxOTUuNTM4LDgzLjAzNiBDMTk1LjUzOCw4My44MDcgMTk1LjE1Miw4NC4yNTMgMTk0LjU5LDg0LjI1MyBDMTk0LjM1Nyw4NC4yNTMgMTk0LjA5NSw4NC4xNzcgMTkzLjgxOCw4NC4wMTcgTDE2OS44NTEsNzAuMTc5IEwxNjkuODM3LDcwLjIwMyBMMTQyLjUxNSw4NS45NzggTDE0MS42NjUsODQuNjU1IEMxMzYuOTM0LDgzLjEyNiAxMzEuOTE3LDgxLjkxNSAxMjYuNzE0LDgxLjA0NSBDMTI2LjcwOSw4MS4wNiAxMjYuNzA3LDgxLjA2OSAxMjYuNzA3LDgxLjA2OSBMMTIxLjY0LDk4LjAzIEwxMTMuNzQ5LDEwMi41ODYgTDExMy43MTIsMTAyLjUyMyBMMTEzLjcxMiwxMzAuMTEzIEMxMTMuNzEyLDEzMC44ODUgMTEzLjMyNiwxMzEuMzMgMTEyLjc2NCwxMzEuMzMgQzExMi41MzIsMTMxLjMzIDExMi4yNjksMTMxLjI1NCAxMTEuOTkyLDEzMS4wOTQgTDY5LjUxOSwxMDYuNTcyIEM2OC41NjksMTA2LjAyMyA2Ny43OTksMTA0LjY5NSA2Ny43OTksMTAzLjYwNSBMNjcuNzk5LDEwMi41NyBMNjcuNzc4LDEwMi42MTcgQzY3LjI3LDEwMi4zOTMgNjYuNjQ4LDEwMi4yNDkgNjUuOTYyLDEwMi4yMTggQzY1Ljg3NSwxMDIuMjE0IDY1Ljc4OCwxMDIuMjEyIDY1LjcwMSwxMDIuMjEyIEM2NS42MDYsMTAyLjIxMiA2NS41MTEsMTAyLjIxNSA2NS40MTYsMTAyLjIxOSBDNjUuMTk1LDEwMi4yMjkgNjQuOTc0LDEwMi4yMzUgNjQuNzU0LDEwMi4yMzUgQzY0LjMzMSwxMDIuMjM1IDYzLjkxMSwxMDIuMjE2IDYzLjQ5OCwxMDIuMTc4IEM2MS44NDMsMTAyLjAyNSA2MC4yOTgsMTAxLjU3OCA1OS4wOTQsMTAwLjg4MiBMMTIuNTE4LDczLjk5MiBMMTIuNTIzLDc0LjAwNCBMMi4yNDUsNTUuMjU0IEMxLjI0NCw1My40MjcgMi4wMDQsNTEuMDM4IDMuOTQzLDQ5LjkxOCBMNTkuOTU0LDE3LjU3MyBDNjAuNjI2LDE3LjE4NSA2MS4zNSwxNy4wMDEgNjIuMDUzLDE3LjAwMSBDNjMuMzc5LDE3LjAwMSA2NC42MjUsMTcuNjYgNjUuMjgsMTguODU0IEw2NS4yODUsMTguODUxIEw2NS41MTIsMTkuMjY0IEw2NS41MDYsMTkuMjY4IEM2NS45MDksMjAuMDAzIDY2LjQwNSwyMC42OCA2Ni45ODMsMjEuMjg2IEw2Ny4yNiwyMS41NTYgQzY5LjE3NCwyMy40MDYgNzEuNzI4LDI0LjM1NyA3NC4zNzMsMjQuMzU3IEM3Ni4zMjIsMjQuMzU3IDc4LjMyMSwyMy44NCA4MC4xNDgsMjIuNzg1IEM4MC4xNjEsMjIuNzg1IDg3LjQ2NywxOC41NjYgODcuNDY3LDE4LjU2NiBDODguMTM5LDE4LjE3OCA4OC44NjMsMTcuOTk0IDg5LjU2NiwxNy45OTQgQzkwLjg5MiwxNy45OTQgOTIuMTM4LDE4LjY1MiA5Mi43OTIsMTkuODQ3IEw5Ni4wNDIsMjUuNzc1IEw5Ni4wNjQsMjUuNzU3IEwxMDIuODQ5LDI5LjY3NCBMMTAyLjc0NCwyOS40OTIgTDE0OS42MjUsMi41MjcgTTE0OS42MjUsMC44OTIgQzE0OS4zNDMsMC44OTIgMTQ5LjA2MiwwLjk2NSAxNDguODEsMS4xMSBMMTAyLjY0MSwyNy42NjYgTDk3LjIzMSwyNC41NDIgTDk0LjIyNiwxOS4wNjEgQzkzLjMxMywxNy4zOTQgOTEuNTI3LDE2LjM1OSA4OS41NjYsMTYuMzU4IEM4OC41NTUsMTYuMzU4IDg3LjU0NiwxNi42MzIgODYuNjQ5LDE3LjE1IEM4My44NzgsMTguNzUgNzkuNjg3LDIxLjE2OSA3OS4zNzQsMjEuMzQ1IEM3OS4zNTksMjEuMzUzIDc5LjM0NSwyMS4zNjEgNzkuMzMsMjEuMzY5IEM3Ny43OTgsMjIuMjU0IDc2LjA4NCwyMi43MjIgNzQuMzczLDIyLjcyMiBDNzIuMDgxLDIyLjcyMiA2OS45NTksMjEuODkgNjguMzk3LDIwLjM4IEw2OC4xNDUsMjAuMTM1IEM2Ny43MDYsMTkuNjcyIDY3LjMyMywxOS4xNTYgNjcuMDA2LDE4LjYwMSBDNjYuOTg4LDE4LjU1OSA2Ni45NjgsMTguNTE5IDY2Ljk0NiwxOC40NzkgTDY2LjcxOSwxOC4wNjUgQzY2LjY5LDE4LjAxMiA2Ni42NTgsMTcuOTYgNjYuNjI0LDE3LjkxMSBDNjUuNjg2LDE2LjMzNyA2My45NTEsMTUuMzY2IDYyLjA1MywxNS4zNjYgQzYxLjA0MiwxNS4zNjYgNjAuMDMzLDE1LjY0IDU5LjEzNiwxNi4xNTggTDMuMTI1LDQ4LjUwMiBDMC40MjYsNTAuMDYxIC0wLjYxMyw1My40NDIgMC44MTEsNTYuMDQgTDExLjA4OSw3NC43OSBDMTEuMjY2LDc1LjExMyAxMS41MzcsNzUuMzUzIDExLjg1LDc1LjQ5NCBMNTguMjc2LDEwMi4yOTggQzU5LjY3OSwxMDMuMTA4IDYxLjQzMywxMDMuNjMgNjMuMzQ4LDEwMy44MDYgQzYzLjgxMiwxMDMuODQ4IDY0LjI4NSwxMDMuODcgNjQuNzU0LDEwMy44NyBDNjUsMTAzLjg3IDY1LjI0OSwxMDMuODY0IDY1LjQ5NCwxMDMuODUyIEM2NS41NjMsMTAzLjg0OSA2NS42MzIsMTAzLjg0NyA2NS43MDEsMTAzLjg0NyBDNjUuNzY0LDEwMy44NDcgNjUuODI4LDEwMy44NDkgNjUuODksMTAzLjg1MiBDNjUuOTg2LDEwMy44NTYgNjYuMDgsMTAzLjg2MyA2Ni4xNzMsMTAzLjg3NCBDNjYuMjgyLDEwNS40NjcgNjcuMzMyLDEwNy4xOTcgNjguNzAyLDEwNy45ODggTDExMS4xNzQsMTMyLjUxIEMxMTEuNjk4LDEzMi44MTIgMTEyLjIzMiwxMzIuOTY1IDExMi43NjQsMTMyLjk2NSBDMTE0LjI2MSwxMzIuOTY1IDExNS4zNDcsMTMxLjc2NSAxMTUuMzQ3LDEzMC4xMTMgTDExNS4zNDcsMTAzLjU1MSBMMTIyLjQ1OCw5OS40NDYgQzEyMi44MTksOTkuMjM3IDEyMy4wODcsOTguODk4IDEyMy4yMDcsOTguNDk4IEwxMjcuODY1LDgyLjkwNSBDMTMyLjI3OSw4My43MDIgMTM2LjU1Nyw4NC43NTMgMTQwLjYwNyw4Ni4wMzMgTDE0MS4xNCw4Ni44NjIgQzE0MS40NTEsODcuMzQ2IDE0MS45NzcsODcuNjEzIDE0Mi41MTYsODcuNjEzIEMxNDIuNzk0LDg3LjYxMyAxNDMuMDc2LDg3LjU0MiAxNDMuMzMzLDg3LjM5MyBMMTY5Ljg2NSw3Mi4wNzYgTDE5Myw4NS40MzMgQzE5My41MjMsODUuNzM1IDE5NC4wNTgsODUuODg4IDE5NC41OSw4NS44ODggQzE5Ni4wODcsODUuODg4IDE5Ny4xNzMsODQuNjg5IDE5Ny4xNzMsODMuMDM2IEwxOTcuMTczLDI5LjAzNSBDMTk3LjE3MywyOC40NTEgMTk2Ljg2MSwyNy45MTEgMTk2LjM1NSwyNy42MTkgQzE5Ni4zNTUsMjcuNjE5IDE3MS44NDMsMTMuNDY3IDE3MC4zODUsMTIuNjI2IEMxNzAuMTMyLDEyLjQ4IDE2OS44NSwxMi40MDcgMTY5LjU2OCwxMi40MDcgQzE2OS4yODUsMTIuNDA3IDE2OS4wMDIsMTIuNDgxIDE2OC43NDksMTIuNjI3IEMxNjguMTQzLDEyLjk3OCAxNjUuNzU2LDE0LjM1NyAxNjQuNDI0LDE1LjEyNSBMMTU5LjYxNSwxMC44NyBDMTU4Ljc5NiwxMC4xNDUgMTU4LjE1NCw4LjkzNyAxNTguMDU0LDcuOTM0IEMxNTguMDQ1LDcuODM3IDE1OC4wMzQsNy43MzkgMTU4LjAyMSw3LjY0IEMxNTguMDA1LDcuNTIzIDE1Ny45OTgsNy40MSAxNTcuOTk4LDcuMzA0IEwxNTcuOTk4LDYuNDE4IEMxNTcuOTk4LDUuODM0IDE1Ny42ODYsNS4yOTUgMTU3LjE4MSw1LjAwMiBDMTU2LjYyNCw0LjY4IDE1MC40NDIsMS4xMTEgMTUwLjQ0MiwxLjExMSBDMTUwLjE4OSwwLjk2NSAxNDkuOTA3LDAuODkyIDE0OS42MjUsMC44OTIiIGlkPSJGaWxsLTEiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOTYuMDI3LDI1LjYzNiBMMTQyLjYwMyw1Mi41MjcgQzE0My44MDcsNTMuMjIyIDE0NC41ODIsNTQuMTE0IDE0NC44NDUsNTUuMDY4IEwxNDQuODM1LDU1LjA3NSBMNjMuNDYxLDEwMi4wNTcgTDYzLjQ2LDEwMi4wNTcgQzYxLjgwNiwxMDEuOTA1IDYwLjI2MSwxMDEuNDU3IDU5LjA1NywxMDAuNzYyIEwxMi40ODEsNzMuODcxIEw5Ni4wMjcsMjUuNjM2IiBpZD0iRmlsbC0yIiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTYzLjQ2MSwxMDIuMTc0IEM2My40NTMsMTAyLjE3NCA2My40NDYsMTAyLjE3NCA2My40MzksMTAyLjE3MiBDNjEuNzQ2LDEwMi4wMTYgNjAuMjExLDEwMS41NjMgNTguOTk4LDEwMC44NjMgTDEyLjQyMiw3My45NzMgQzEyLjM4Niw3My45NTIgMTIuMzY0LDczLjkxNCAxMi4zNjQsNzMuODcxIEMxMi4zNjQsNzMuODMgMTIuMzg2LDczLjc5MSAxMi40MjIsNzMuNzcgTDk1Ljk2OCwyNS41MzUgQzk2LjAwNCwyNS41MTQgOTYuMDQ5LDI1LjUxNCA5Ni4wODUsMjUuNTM1IEwxNDIuNjYxLDUyLjQyNiBDMTQzLjg4OCw1My4xMzQgMTQ0LjY4Miw1NC4wMzggMTQ0Ljk1Nyw1NS4wMzcgQzE0NC45Nyw1NS4wODMgMTQ0Ljk1Myw1NS4xMzMgMTQ0LjkxNSw1NS4xNjEgQzE0NC45MTEsNTUuMTY1IDE0NC44OTgsNTUuMTc0IDE0NC44OTQsNTUuMTc3IEw2My41MTksMTAyLjE1OCBDNjMuNTAxLDEwMi4xNjkgNjMuNDgxLDEwMi4xNzQgNjMuNDYxLDEwMi4xNzQgTDYzLjQ2MSwxMDIuMTc0IFogTTEyLjcxNCw3My44NzEgTDU5LjExNSwxMDAuNjYxIEM2MC4yOTMsMTAxLjM0MSA2MS43ODYsMTAxLjc4MiA2My40MzUsMTAxLjkzNyBMMTQ0LjcwNyw1NS4wMTUgQzE0NC40MjgsNTQuMTA4IDE0My42ODIsNTMuMjg1IDE0Mi41NDQsNTIuNjI4IEw5Ni4wMjcsMjUuNzcxIEwxMi43MTQsNzMuODcxIEwxMi43MTQsNzMuODcxIFoiIGlkPSJGaWxsLTMiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTQ4LjMyNyw1OC40NzEgQzE0OC4xNDUsNTguNDggMTQ3Ljk2Miw1OC40OCAxNDcuNzgxLDU4LjQ3MiBDMTQ1Ljg4Nyw1OC4zODkgMTQ0LjQ3OSw1Ny40MzQgMTQ0LjYzNiw1Ni4zNCBDMTQ0LjY4OSw1NS45NjcgMTQ0LjY2NCw1NS41OTcgMTQ0LjU2NCw1NS4yMzUgTDYzLjQ2MSwxMDIuMDU3IEM2NC4wODksMTAyLjExNSA2NC43MzMsMTAyLjEzIDY1LjM3OSwxMDIuMDk5IEM2NS41NjEsMTAyLjA5IDY1Ljc0MywxMDIuMDkgNjUuOTI1LDEwMi4wOTggQzY3LjgxOSwxMDIuMTgxIDY5LjIyNywxMDMuMTM2IDY5LjA3LDEwNC4yMyBMMTQ4LjMyNyw1OC40NzEiIGlkPSJGaWxsLTQiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNjkuMDcsMTA0LjM0NyBDNjkuMDQ4LDEwNC4zNDcgNjkuMDI1LDEwNC4zNCA2OS4wMDUsMTA0LjMyNyBDNjguOTY4LDEwNC4zMDEgNjguOTQ4LDEwNC4yNTcgNjguOTU1LDEwNC4yMTMgQzY5LDEwMy44OTYgNjguODk4LDEwMy41NzYgNjguNjU4LDEwMy4yODggQzY4LjE1MywxMDIuNjc4IDY3LjEwMywxMDIuMjY2IDY1LjkyLDEwMi4yMTQgQzY1Ljc0MiwxMDIuMjA2IDY1LjU2MywxMDIuMjA3IDY1LjM4NSwxMDIuMjE1IEM2NC43NDIsMTAyLjI0NiA2NC4wODcsMTAyLjIzMiA2My40NSwxMDIuMTc0IEM2My4zOTksMTAyLjE2OSA2My4zNTgsMTAyLjEzMiA2My4zNDcsMTAyLjA4MiBDNjMuMzM2LDEwMi4wMzMgNjMuMzU4LDEwMS45ODEgNjMuNDAyLDEwMS45NTYgTDE0NC41MDYsNTUuMTM0IEMxNDQuNTM3LDU1LjExNiAxNDQuNTc1LDU1LjExMyAxNDQuNjA5LDU1LjEyNyBDMTQ0LjY0Miw1NS4xNDEgMTQ0LjY2OCw1NS4xNyAxNDQuNjc3LDU1LjIwNCBDMTQ0Ljc4MSw1NS41ODUgMTQ0LjgwNiw1NS45NzIgMTQ0Ljc1MSw1Ni4zNTcgQzE0NC43MDYsNTYuNjczIDE0NC44MDgsNTYuOTk0IDE0NS4wNDcsNTcuMjgyIEMxNDUuNTUzLDU3Ljg5MiAxNDYuNjAyLDU4LjMwMyAxNDcuNzg2LDU4LjM1NSBDMTQ3Ljk2NCw1OC4zNjMgMTQ4LjE0Myw1OC4zNjMgMTQ4LjMyMSw1OC4zNTQgQzE0OC4zNzcsNTguMzUyIDE0OC40MjQsNTguMzg3IDE0OC40MzksNTguNDM4IEMxNDguNDU0LDU4LjQ5IDE0OC40MzIsNTguNTQ1IDE0OC4zODUsNTguNTcyIEw2OS4xMjksMTA0LjMzMSBDNjkuMTExLDEwNC4zNDIgNjkuMDksMTA0LjM0NyA2OS4wNywxMDQuMzQ3IEw2OS4wNywxMDQuMzQ3IFogTTY1LjY2NSwxMDEuOTc1IEM2NS43NTQsMTAxLjk3NSA2NS44NDIsMTAxLjk3NyA2NS45MywxMDEuOTgxIEM2Ny4xOTYsMTAyLjAzNyA2OC4yODMsMTAyLjQ2OSA2OC44MzgsMTAzLjEzOSBDNjkuMDY1LDEwMy40MTMgNjkuMTg4LDEwMy43MTQgNjkuMTk4LDEwNC4wMjEgTDE0Ny44ODMsNTguNTkyIEMxNDcuODQ3LDU4LjU5MiAxNDcuODExLDU4LjU5MSAxNDcuNzc2LDU4LjU4OSBDMTQ2LjUwOSw1OC41MzMgMTQ1LjQyMiw1OC4xIDE0NC44NjcsNTcuNDMxIEMxNDQuNTg1LDU3LjA5MSAxNDQuNDY1LDU2LjcwNyAxNDQuNTIsNTYuMzI0IEMxNDQuNTYzLDU2LjAyMSAxNDQuNTUyLDU1LjcxNiAxNDQuNDg4LDU1LjQxNCBMNjMuODQ2LDEwMS45NyBDNjQuMzUzLDEwMi4wMDIgNjQuODY3LDEwMi4wMDYgNjUuMzc0LDEwMS45ODIgQzY1LjQ3MSwxMDEuOTc3IDY1LjU2OCwxMDEuOTc1IDY1LjY2NSwxMDEuOTc1IEw2NS42NjUsMTAxLjk3NSBaIiBpZD0iRmlsbC01IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTIuMjA4LDU1LjEzNCBDMS4yMDcsNTMuMzA3IDEuOTY3LDUwLjkxNyAzLjkwNiw0OS43OTcgTDU5LjkxNywxNy40NTMgQzYxLjg1NiwxNi4zMzMgNjQuMjQxLDE2LjkwNyA2NS4yNDMsMTguNzM0IEw2NS40NzUsMTkuMTQ0IEM2NS44NzIsMTkuODgyIDY2LjM2OCwyMC41NiA2Ni45NDUsMjEuMTY1IEw2Ny4yMjMsMjEuNDM1IEM3MC41NDgsMjQuNjQ5IDc1LjgwNiwyNS4xNTEgODAuMTExLDIyLjY2NSBMODcuNDMsMTguNDQ1IEM4OS4zNywxNy4zMjYgOTEuNzU0LDE3Ljg5OSA5Mi43NTUsMTkuNzI3IEw5Ni4wMDUsMjUuNjU1IEwxMi40ODYsNzMuODg0IEwyLjIwOCw1NS4xMzQgWiIgaWQ9IkZpbGwtNiIgZmlsbD0iI0ZBRkFGQSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMi40ODYsNzQuMDAxIEMxMi40NzYsNzQuMDAxIDEyLjQ2NSw3My45OTkgMTIuNDU1LDczLjk5NiBDMTIuNDI0LDczLjk4OCAxMi4zOTksNzMuOTY3IDEyLjM4NCw3My45NCBMMi4xMDYsNTUuMTkgQzEuMDc1LDUzLjMxIDEuODU3LDUwLjg0NSAzLjg0OCw0OS42OTYgTDU5Ljg1OCwxNy4zNTIgQzYwLjUyNSwxNi45NjcgNjEuMjcxLDE2Ljc2NCA2Mi4wMTYsMTYuNzY0IEM2My40MzEsMTYuNzY0IDY0LjY2NiwxNy40NjYgNjUuMzI3LDE4LjY0NiBDNjUuMzM3LDE4LjY1NCA2NS4zNDUsMTguNjYzIDY1LjM1MSwxOC42NzQgTDY1LjU3OCwxOS4wODggQzY1LjU4NCwxOS4xIDY1LjU4OSwxOS4xMTIgNjUuNTkxLDE5LjEyNiBDNjUuOTg1LDE5LjgzOCA2Ni40NjksMjAuNDk3IDY3LjAzLDIxLjA4NSBMNjcuMzA1LDIxLjM1MSBDNjkuMTUxLDIzLjEzNyA3MS42NDksMjQuMTIgNzQuMzM2LDI0LjEyIEM3Ni4zMTMsMjQuMTIgNzguMjksMjMuNTgyIDgwLjA1MywyMi41NjMgQzgwLjA2NCwyMi41NTcgODAuMDc2LDIyLjU1MyA4MC4wODgsMjIuNTUgTDg3LjM3MiwxOC4zNDQgQzg4LjAzOCwxNy45NTkgODguNzg0LDE3Ljc1NiA4OS41MjksMTcuNzU2IEM5MC45NTYsMTcuNzU2IDkyLjIwMSwxOC40NzIgOTIuODU4LDE5LjY3IEw5Ni4xMDcsMjUuNTk5IEM5Ni4xMzgsMjUuNjU0IDk2LjExOCwyNS43MjQgOTYuMDYzLDI1Ljc1NiBMMTIuNTQ1LDczLjk4NSBDMTIuNTI2LDczLjk5NiAxMi41MDYsNzQuMDAxIDEyLjQ4Niw3NC4wMDEgTDEyLjQ4Niw3NC4wMDEgWiBNNjIuMDE2LDE2Ljk5NyBDNjEuMzEyLDE2Ljk5NyA2MC42MDYsMTcuMTkgNTkuOTc1LDE3LjU1NCBMMy45NjUsNDkuODk5IEMyLjA4Myw1MC45ODUgMS4zNDEsNTMuMzA4IDIuMzEsNTUuMDc4IEwxMi41MzEsNzMuNzIzIEw5NS44NDgsMjUuNjExIEw5Mi42NTMsMTkuNzgyIEM5Mi4wMzgsMTguNjYgOTAuODcsMTcuOTkgODkuNTI5LDE3Ljk5IEM4OC44MjUsMTcuOTkgODguMTE5LDE4LjE4MiA4Ny40ODksMTguNTQ3IEw4MC4xNzIsMjIuNzcyIEM4MC4xNjEsMjIuNzc4IDgwLjE0OSwyMi43ODIgODAuMTM3LDIyLjc4NSBDNzguMzQ2LDIzLjgxMSA3Ni4zNDEsMjQuMzU0IDc0LjMzNiwyNC4zNTQgQzcxLjU4OCwyNC4zNTQgNjkuMDMzLDIzLjM0NyA2Ny4xNDIsMjEuNTE5IEw2Ni44NjQsMjEuMjQ5IEM2Ni4yNzcsMjAuNjM0IDY1Ljc3NCwxOS45NDcgNjUuMzY3LDE5LjIwMyBDNjUuMzYsMTkuMTkyIDY1LjM1NiwxOS4xNzkgNjUuMzU0LDE5LjE2NiBMNjUuMTYzLDE4LjgxOSBDNjUuMTU0LDE4LjgxMSA2NS4xNDYsMTguODAxIDY1LjE0LDE4Ljc5IEM2NC41MjUsMTcuNjY3IDYzLjM1NywxNi45OTcgNjIuMDE2LDE2Ljk5NyBMNjIuMDE2LDE2Ljk5NyBaIiBpZD0iRmlsbC03IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTQyLjQzNCw0OC44MDggTDQyLjQzNCw0OC44MDggQzM5LjkyNCw0OC44MDcgMzcuNzM3LDQ3LjU1IDM2LjU4Miw0NS40NDMgQzM0Ljc3MSw0Mi4xMzkgMzYuMTQ0LDM3LjgwOSAzOS42NDEsMzUuNzg5IEw1MS45MzIsMjguNjkxIEM1My4xMDMsMjguMDE1IDU0LjQxMywyNy42NTggNTUuNzIxLDI3LjY1OCBDNTguMjMxLDI3LjY1OCA2MC40MTgsMjguOTE2IDYxLjU3MywzMS4wMjMgQzYzLjM4NCwzNC4zMjcgNjIuMDEyLDM4LjY1NyA1OC41MTQsNDAuNjc3IEw0Ni4yMjMsNDcuNzc1IEM0NS4wNTMsNDguNDUgNDMuNzQyLDQ4LjgwOCA0Mi40MzQsNDguODA4IEw0Mi40MzQsNDguODA4IFogTTU1LjcyMSwyOC4xMjUgQzU0LjQ5NSwyOC4xMjUgNTMuMjY1LDI4LjQ2MSA1Mi4xNjYsMjkuMDk2IEwzOS44NzUsMzYuMTk0IEMzNi41OTYsMzguMDg3IDM1LjMwMiw0Mi4xMzYgMzYuOTkyLDQ1LjIxOCBDMzguMDYzLDQ3LjE3MyA0MC4wOTgsNDguMzQgNDIuNDM0LDQ4LjM0IEM0My42NjEsNDguMzQgNDQuODksNDguMDA1IDQ1Ljk5LDQ3LjM3IEw1OC4yODEsNDAuMjcyIEM2MS41NiwzOC4zNzkgNjIuODUzLDM0LjMzIDYxLjE2NCwzMS4yNDggQzYwLjA5MiwyOS4yOTMgNTguMDU4LDI4LjEyNSA1NS43MjEsMjguMTI1IEw1NS43MjEsMjguMTI1IFoiIGlkPSJGaWxsLTgiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTQ5LjU4OCwyLjQwNyBDMTQ5LjU4OCwyLjQwNyAxNTUuNzY4LDUuOTc1IDE1Ni4zMjUsNi4yOTcgTDE1Ni4zMjUsNy4xODQgQzE1Ni4zMjUsNy4zNiAxNTYuMzM4LDcuNTQ0IDE1Ni4zNjIsNy43MzMgQzE1Ni4zNzMsNy44MTQgMTU2LjM4Miw3Ljg5NCAxNTYuMzksNy45NzUgQzE1Ni41Myw5LjM5IDE1Ny4zNjMsMTAuOTczIDE1OC40OTUsMTEuOTc0IEwxNjUuODkxLDE4LjUxOSBDMTY2LjA2OCwxOC42NzUgMTY2LjI0OSwxOC44MTQgMTY2LjQzMiwxOC45MzQgQzE2OC4wMTEsMTkuOTc0IDE2OS4zODIsMTkuNCAxNjkuNDk0LDE3LjY1MiBDMTY5LjU0MywxNi44NjggMTY5LjU1MSwxNi4wNTcgMTY5LjUxNywxNS4yMjMgTDE2OS41MTQsMTUuMDYzIEwxNjkuNTE0LDEzLjkxMiBDMTcwLjc4LDE0LjY0MiAxOTUuNTAxLDI4LjkxNSAxOTUuNTAxLDI4LjkxNSBMMTk1LjUwMSw4Mi45MTUgQzE5NS41MDEsODQuMDA1IDE5NC43MzEsODQuNDQ1IDE5My43ODEsODMuODk3IEwxNTEuMzA4LDU5LjM3NCBDMTUwLjM1OCw1OC44MjYgMTQ5LjU4OCw1Ny40OTcgMTQ5LjU4OCw1Ni40MDggTDE0OS41ODgsMjIuMzc1IiBpZD0iRmlsbC05IiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE5NC41NTMsODQuMjUgQzE5NC4yOTYsODQuMjUgMTk0LjAxMyw4NC4xNjUgMTkzLjcyMiw4My45OTcgTDE1MS4yNSw1OS40NzYgQzE1MC4yNjksNTguOTA5IDE0OS40NzEsNTcuNTMzIDE0OS40NzEsNTYuNDA4IEwxNDkuNDcxLDIyLjM3NSBMMTQ5LjcwNSwyMi4zNzUgTDE0OS43MDUsNTYuNDA4IEMxNDkuNzA1LDU3LjQ1OSAxNTAuNDUsNTguNzQ0IDE1MS4zNjYsNTkuMjc0IEwxOTMuODM5LDgzLjc5NSBDMTk0LjI2Myw4NC4wNCAxOTQuNjU1LDg0LjA4MyAxOTQuOTQyLDgzLjkxNyBDMTk1LjIyNyw4My43NTMgMTk1LjM4NCw4My4zOTcgMTk1LjM4NCw4Mi45MTUgTDE5NS4zODQsMjguOTgyIEMxOTQuMTAyLDI4LjI0MiAxNzIuMTA0LDE1LjU0MiAxNjkuNjMxLDE0LjExNCBMMTY5LjYzNCwxNS4yMiBDMTY5LjY2OCwxNi4wNTIgMTY5LjY2LDE2Ljg3NCAxNjkuNjEsMTcuNjU5IEMxNjkuNTU2LDE4LjUwMyAxNjkuMjE0LDE5LjEyMyAxNjguNjQ3LDE5LjQwNSBDMTY4LjAyOCwxOS43MTQgMTY3LjE5NywxOS41NzggMTY2LjM2NywxOS4wMzIgQzE2Ni4xODEsMTguOTA5IDE2NS45OTUsMTguNzY2IDE2NS44MTQsMTguNjA2IEwxNTguNDE3LDEyLjA2MiBDMTU3LjI1OSwxMS4wMzYgMTU2LjQxOCw5LjQzNyAxNTYuMjc0LDcuOTg2IEMxNTYuMjY2LDcuOTA3IDE1Ni4yNTcsNy44MjcgMTU2LjI0Nyw3Ljc0OCBDMTU2LjIyMSw3LjU1NSAxNTYuMjA5LDcuMzY1IDE1Ni4yMDksNy4xODQgTDE1Ni4yMDksNi4zNjQgQzE1NS4zNzUsNS44ODMgMTQ5LjUyOSwyLjUwOCAxNDkuNTI5LDIuNTA4IEwxNDkuNjQ2LDIuMzA2IEMxNDkuNjQ2LDIuMzA2IDE1NS44MjcsNS44NzQgMTU2LjM4NCw2LjE5NiBMMTU2LjQ0Miw2LjIzIEwxNTYuNDQyLDcuMTg0IEMxNTYuNDQyLDcuMzU1IDE1Ni40NTQsNy41MzUgMTU2LjQ3OCw3LjcxNyBDMTU2LjQ4OSw3LjggMTU2LjQ5OSw3Ljg4MiAxNTYuNTA3LDcuOTYzIEMxNTYuNjQ1LDkuMzU4IDE1Ny40NTUsMTAuODk4IDE1OC41NzIsMTEuODg2IEwxNjUuOTY5LDE4LjQzMSBDMTY2LjE0MiwxOC41ODQgMTY2LjMxOSwxOC43MiAxNjYuNDk2LDE4LjgzNyBDMTY3LjI1NCwxOS4zMzYgMTY4LDE5LjQ2NyAxNjguNTQzLDE5LjE5NiBDMTY5LjAzMywxOC45NTMgMTY5LjMyOSwxOC40MDEgMTY5LjM3NywxNy42NDUgQzE2OS40MjcsMTYuODY3IDE2OS40MzQsMTYuMDU0IDE2OS40MDEsMTUuMjI4IEwxNjkuMzk3LDE1LjA2NSBMMTY5LjM5NywxMy43MSBMMTY5LjU3MiwxMy44MSBDMTcwLjgzOSwxNC41NDEgMTk1LjU1OSwyOC44MTQgMTk1LjU1OSwyOC44MTQgTDE5NS42MTgsMjguODQ3IEwxOTUuNjE4LDgyLjkxNSBDMTk1LjYxOCw4My40ODQgMTk1LjQyLDgzLjkxMSAxOTUuMDU5LDg0LjExOSBDMTk0LjkwOCw4NC4yMDYgMTk0LjczNyw4NC4yNSAxOTQuNTUzLDg0LjI1IiBpZD0iRmlsbC0xMCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNDUuNjg1LDU2LjE2MSBMMTY5LjgsNzAuMDgzIEwxNDMuODIyLDg1LjA4MSBMMTQyLjM2LDg0Ljc3NCBDMTM1LjgyNiw4Mi42MDQgMTI4LjczMiw4MS4wNDYgMTIxLjM0MSw4MC4xNTggQzExNi45NzYsNzkuNjM0IDExMi42NzgsODEuMjU0IDExMS43NDMsODMuNzc4IEMxMTEuNTA2LDg0LjQxNCAxMTEuNTAzLDg1LjA3MSAxMTEuNzMyLDg1LjcwNiBDMTEzLjI3LDg5Ljk3MyAxMTUuOTY4LDk0LjA2OSAxMTkuNzI3LDk3Ljg0MSBMMTIwLjI1OSw5OC42ODYgQzEyMC4yNiw5OC42ODUgOTQuMjgyLDExMy42ODMgOTQuMjgyLDExMy42ODMgTDcwLjE2Nyw5OS43NjEgTDE0NS42ODUsNTYuMTYxIiBpZD0iRmlsbC0xMSIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik05NC4yODIsMTEzLjgxOCBMOTQuMjIzLDExMy43ODUgTDY5LjkzMyw5OS43NjEgTDcwLjEwOCw5OS42NiBMMTQ1LjY4NSw1Ni4wMjYgTDE0NS43NDMsNTYuMDU5IEwxNzAuMDMzLDcwLjA4MyBMMTQzLjg0Miw4NS4yMDUgTDE0My43OTcsODUuMTk1IEMxNDMuNzcyLDg1LjE5IDE0Mi4zMzYsODQuODg4IDE0Mi4zMzYsODQuODg4IEMxMzUuNzg3LDgyLjcxNCAxMjguNzIzLDgxLjE2MyAxMjEuMzI3LDgwLjI3NCBDMTIwLjc4OCw4MC4yMDkgMTIwLjIzNiw4MC4xNzcgMTE5LjY4OSw4MC4xNzcgQzExNS45MzEsODAuMTc3IDExMi42MzUsODEuNzA4IDExMS44NTIsODMuODE5IEMxMTEuNjI0LDg0LjQzMiAxMTEuNjIxLDg1LjA1MyAxMTEuODQyLDg1LjY2NyBDMTEzLjM3Nyw4OS45MjUgMTE2LjA1OCw5My45OTMgMTE5LjgxLDk3Ljc1OCBMMTE5LjgyNiw5Ny43NzkgTDEyMC4zNTIsOTguNjE0IEMxMjAuMzU0LDk4LjYxNyAxMjAuMzU2LDk4LjYyIDEyMC4zNTgsOTguNjI0IEwxMjAuNDIyLDk4LjcyNiBMMTIwLjMxNyw5OC43ODcgQzEyMC4yNjQsOTguODE4IDk0LjU5OSwxMTMuNjM1IDk0LjM0LDExMy43ODUgTDk0LjI4MiwxMTMuODE4IEw5NC4yODIsMTEzLjgxOCBaIE03MC40MDEsOTkuNzYxIEw5NC4yODIsMTEzLjU0OSBMMTE5LjA4NCw5OS4yMjkgQzExOS42Myw5OC45MTQgMTE5LjkzLDk4Ljc0IDEyMC4xMDEsOTguNjU0IEwxMTkuNjM1LDk3LjkxNCBDMTE1Ljg2NCw5NC4xMjcgMTEzLjE2OCw5MC4wMzMgMTExLjYyMiw4NS43NDYgQzExMS4zODIsODUuMDc5IDExMS4zODYsODQuNDA0IDExMS42MzMsODMuNzM4IEMxMTIuNDQ4LDgxLjUzOSAxMTUuODM2LDc5Ljk0MyAxMTkuNjg5LDc5Ljk0MyBDMTIwLjI0Niw3OS45NDMgMTIwLjgwNiw3OS45NzYgMTIxLjM1NSw4MC4wNDIgQzEyOC43NjcsODAuOTMzIDEzNS44NDYsODIuNDg3IDE0Mi4zOTYsODQuNjYzIEMxNDMuMjMyLDg0LjgzOCAxNDMuNjExLDg0LjkxNyAxNDMuNzg2LDg0Ljk2NyBMMTY5LjU2Niw3MC4wODMgTDE0NS42ODUsNTYuMjk1IEw3MC40MDEsOTkuNzYxIEw3MC40MDEsOTkuNzYxIFoiIGlkPSJGaWxsLTEyIiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2Ny4yMywxOC45NzkgTDE2Ny4yMyw2OS44NSBMMTM5LjkwOSw4NS42MjMgTDEzMy40NDgsNzEuNDU2IEMxMzIuNTM4LDY5LjQ2IDEzMC4wMiw2OS43MTggMTI3LjgyNCw3Mi4wMyBDMTI2Ljc2OSw3My4xNCAxMjUuOTMxLDc0LjU4NSAxMjUuNDk0LDc2LjA0OCBMMTE5LjAzNCw5Ny42NzYgTDkxLjcxMiwxMTMuNDUgTDkxLjcxMiw2Mi41NzkgTDE2Ny4yMywxOC45NzkiIGlkPSJGaWxsLTEzIiBmaWxsPSIjRkZGRkZGIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTkxLjcxMiwxMTMuNTY3IEM5MS42OTIsMTEzLjU2NyA5MS42NzIsMTEzLjU2MSA5MS42NTMsMTEzLjU1MSBDOTEuNjE4LDExMy41MyA5MS41OTUsMTEzLjQ5MiA5MS41OTUsMTEzLjQ1IEw5MS41OTUsNjIuNTc5IEM5MS41OTUsNjIuNTM3IDkxLjYxOCw2Mi40OTkgOTEuNjUzLDYyLjQ3OCBMMTY3LjE3MiwxOC44NzggQzE2Ny4yMDgsMTguODU3IDE2Ny4yNTIsMTguODU3IDE2Ny4yODgsMTguODc4IEMxNjcuMzI0LDE4Ljg5OSAxNjcuMzQ3LDE4LjkzNyAxNjcuMzQ3LDE4Ljk3OSBMMTY3LjM0Nyw2OS44NSBDMTY3LjM0Nyw2OS44OTEgMTY3LjMyNCw2OS45MyAxNjcuMjg4LDY5Ljk1IEwxMzkuOTY3LDg1LjcyNSBDMTM5LjkzOSw4NS43NDEgMTM5LjkwNSw4NS43NDUgMTM5Ljg3Myw4NS43MzUgQzEzOS44NDIsODUuNzI1IDEzOS44MTYsODUuNzAyIDEzOS44MDIsODUuNjcyIEwxMzMuMzQyLDcxLjUwNCBDMTMyLjk2Nyw3MC42ODIgMTMyLjI4LDcwLjIyOSAxMzEuNDA4LDcwLjIyOSBDMTMwLjMxOSw3MC4yMjkgMTI5LjA0NCw3MC45MTUgMTI3LjkwOCw3Mi4xMSBDMTI2Ljg3NCw3My4yIDEyNi4wMzQsNzQuNjQ3IDEyNS42MDYsNzYuMDgyIEwxMTkuMTQ2LDk3LjcwOSBDMTE5LjEzNyw5Ny43MzggMTE5LjExOCw5Ny43NjIgMTE5LjA5Miw5Ny43NzcgTDkxLjc3LDExMy41NTEgQzkxLjc1MiwxMTMuNTYxIDkxLjczMiwxMTMuNTY3IDkxLjcxMiwxMTMuNTY3IEw5MS43MTIsMTEzLjU2NyBaIE05MS44MjksNjIuNjQ3IEw5MS44MjksMTEzLjI0OCBMMTE4LjkzNSw5Ny41OTggTDEyNS4zODIsNzYuMDE1IEMxMjUuODI3LDc0LjUyNSAxMjYuNjY0LDczLjA4MSAxMjcuNzM5LDcxLjk1IEMxMjguOTE5LDcwLjcwOCAxMzAuMjU2LDY5Ljk5NiAxMzEuNDA4LDY5Ljk5NiBDMTMyLjM3Nyw2OS45OTYgMTMzLjEzOSw3MC40OTcgMTMzLjU1NCw3MS40MDcgTDEzOS45NjEsODUuNDU4IEwxNjcuMTEzLDY5Ljc4MiBMMTY3LjExMywxOS4xODEgTDkxLjgyOSw2Mi42NDcgTDkxLjgyOSw2Mi42NDcgWiIgaWQ9IkZpbGwtMTQiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTY4LjU0MywxOS4yMTMgTDE2OC41NDMsNzAuMDgzIEwxNDEuMjIxLDg1Ljg1NyBMMTM0Ljc2MSw3MS42ODkgQzEzMy44NTEsNjkuNjk0IDEzMS4zMzMsNjkuOTUxIDEyOS4xMzcsNzIuMjYzIEMxMjguMDgyLDczLjM3NCAxMjcuMjQ0LDc0LjgxOSAxMjYuODA3LDc2LjI4MiBMMTIwLjM0Niw5Ny45MDkgTDkzLjAyNSwxMTMuNjgzIEw5My4wMjUsNjIuODEzIEwxNjguNTQzLDE5LjIxMyIgaWQ9IkZpbGwtMTUiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOTMuMDI1LDExMy44IEM5My4wMDUsMTEzLjggOTIuOTg0LDExMy43OTUgOTIuOTY2LDExMy43ODUgQzkyLjkzMSwxMTMuNzY0IDkyLjkwOCwxMTMuNzI1IDkyLjkwOCwxMTMuNjg0IEw5Mi45MDgsNjIuODEzIEM5Mi45MDgsNjIuNzcxIDkyLjkzMSw2Mi43MzMgOTIuOTY2LDYyLjcxMiBMMTY4LjQ4NCwxOS4xMTIgQzE2OC41MiwxOS4wOSAxNjguNTY1LDE5LjA5IDE2OC42MDEsMTkuMTEyIEMxNjguNjM3LDE5LjEzMiAxNjguNjYsMTkuMTcxIDE2OC42NiwxOS4yMTIgTDE2OC42Niw3MC4wODMgQzE2OC42Niw3MC4xMjUgMTY4LjYzNyw3MC4xNjQgMTY4LjYwMSw3MC4xODQgTDE0MS4yOCw4NS45NTggQzE0MS4yNTEsODUuOTc1IDE0MS4yMTcsODUuOTc5IDE0MS4xODYsODUuOTY4IEMxNDEuMTU0LDg1Ljk1OCAxNDEuMTI5LDg1LjkzNiAxNDEuMTE1LDg1LjkwNiBMMTM0LjY1NSw3MS43MzggQzEzNC4yOCw3MC45MTUgMTMzLjU5Myw3MC40NjMgMTMyLjcyLDcwLjQ2MyBDMTMxLjYzMiw3MC40NjMgMTMwLjM1Nyw3MS4xNDggMTI5LjIyMSw3Mi4zNDQgQzEyOC4xODYsNzMuNDMzIDEyNy4zNDcsNzQuODgxIDEyNi45MTksNzYuMzE1IEwxMjAuNDU4LDk3Ljk0MyBDMTIwLjQ1LDk3Ljk3MiAxMjAuNDMxLDk3Ljk5NiAxMjAuNDA1LDk4LjAxIEw5My4wODMsMTEzLjc4NSBDOTMuMDY1LDExMy43OTUgOTMuMDQ1LDExMy44IDkzLjAyNSwxMTMuOCBMOTMuMDI1LDExMy44IFogTTkzLjE0Miw2Mi44ODEgTDkzLjE0MiwxMTMuNDgxIEwxMjAuMjQ4LDk3LjgzMiBMMTI2LjY5NSw3Ni4yNDggQzEyNy4xNCw3NC43NTggMTI3Ljk3Nyw3My4zMTUgMTI5LjA1Miw3Mi4xODMgQzEzMC4yMzEsNzAuOTQyIDEzMS41NjgsNzAuMjI5IDEzMi43Miw3MC4yMjkgQzEzMy42ODksNzAuMjI5IDEzNC40NTIsNzAuNzMxIDEzNC44NjcsNzEuNjQxIEwxNDEuMjc0LDg1LjY5MiBMMTY4LjQyNiw3MC4wMTYgTDE2OC40MjYsMTkuNDE1IEw5My4xNDIsNjIuODgxIEw5My4xNDIsNjIuODgxIFoiIGlkPSJGaWxsLTE2IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2OS44LDcwLjA4MyBMMTQyLjQ3OCw4NS44NTcgTDEzNi4wMTgsNzEuNjg5IEMxMzUuMTA4LDY5LjY5NCAxMzIuNTksNjkuOTUxIDEzMC4zOTMsNzIuMjYzIEMxMjkuMzM5LDczLjM3NCAxMjguNSw3NC44MTkgMTI4LjA2NCw3Ni4yODIgTDEyMS42MDMsOTcuOTA5IEw5NC4yODIsMTEzLjY4MyBMOTQuMjgyLDYyLjgxMyBMMTY5LjgsMTkuMjEzIEwxNjkuOCw3MC4wODMgWiIgaWQ9IkZpbGwtMTciIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOTQuMjgyLDExMy45MTcgQzk0LjI0MSwxMTMuOTE3IDk0LjIwMSwxMTMuOTA3IDk0LjE2NSwxMTMuODg2IEM5NC4wOTMsMTEzLjg0NSA5NC4wNDgsMTEzLjc2NyA5NC4wNDgsMTEzLjY4NCBMOTQuMDQ4LDYyLjgxMyBDOTQuMDQ4LDYyLjczIDk0LjA5Myw2Mi42NTIgOTQuMTY1LDYyLjYxMSBMMTY5LjY4MywxOS4wMSBDMTY5Ljc1NSwxOC45NjkgMTY5Ljg0NCwxOC45NjkgMTY5LjkxNywxOS4wMSBDMTY5Ljk4OSwxOS4wNTIgMTcwLjAzMywxOS4xMjkgMTcwLjAzMywxOS4yMTIgTDE3MC4wMzMsNzAuMDgzIEMxNzAuMDMzLDcwLjE2NiAxNjkuOTg5LDcwLjI0NCAxNjkuOTE3LDcwLjI4NSBMMTQyLjU5NSw4Ni4wNiBDMTQyLjUzOCw4Ni4wOTIgMTQyLjQ2OSw4Ni4xIDE0Mi40MDcsODYuMDggQzE0Mi4zNDQsODYuMDYgMTQyLjI5Myw4Ni4wMTQgMTQyLjI2Niw4NS45NTQgTDEzNS44MDUsNzEuNzg2IEMxMzUuNDQ1LDcwLjk5NyAxMzQuODEzLDcwLjU4IDEzMy45NzcsNzAuNTggQzEzMi45MjEsNzAuNTggMTMxLjY3Niw3MS4yNTIgMTMwLjU2Miw3Mi40MjQgQzEyOS41NCw3My41MDEgMTI4LjcxMSw3NC45MzEgMTI4LjI4Nyw3Ni4zNDggTDEyMS44MjcsOTcuOTc2IEMxMjEuODEsOTguMDM0IDEyMS43NzEsOTguMDgyIDEyMS43Miw5OC4xMTIgTDk0LjM5OCwxMTMuODg2IEM5NC4zNjIsMTEzLjkwNyA5NC4zMjIsMTEzLjkxNyA5NC4yODIsMTEzLjkxNyBMOTQuMjgyLDExMy45MTcgWiBNOTQuNTE1LDYyLjk0OCBMOTQuNTE1LDExMy4yNzkgTDEyMS40MDYsOTcuNzU0IEwxMjcuODQsNzYuMjE1IEMxMjguMjksNzQuNzA4IDEyOS4xMzcsNzMuMjQ3IDEzMC4yMjQsNzIuMTAzIEMxMzEuNDI1LDcwLjgzOCAxMzIuNzkzLDcwLjExMiAxMzMuOTc3LDcwLjExMiBDMTM0Ljk5NSw3MC4xMTIgMTM1Ljc5NSw3MC42MzggMTM2LjIzLDcxLjU5MiBMMTQyLjU4NCw4NS41MjYgTDE2OS41NjYsNjkuOTQ4IEwxNjkuNTY2LDE5LjYxNyBMOTQuNTE1LDYyLjk0OCBMOTQuNTE1LDYyLjk0OCBaIiBpZD0iRmlsbC0xOCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMDkuODk0LDkyLjk0MyBMMTA5Ljg5NCw5Mi45NDMgQzEwOC4xMiw5Mi45NDMgMTA2LjY1Myw5Mi4yMTggMTA1LjY1LDkwLjgyMyBDMTA1LjU4Myw5MC43MzEgMTA1LjU5Myw5MC42MSAxMDUuNjczLDkwLjUyOSBDMTA1Ljc1Myw5MC40NDggMTA1Ljg4LDkwLjQ0IDEwNS45NzQsOTAuNTA2IEMxMDYuNzU0LDkxLjA1MyAxMDcuNjc5LDkxLjMzMyAxMDguNzI0LDkxLjMzMyBDMTEwLjA0Nyw5MS4zMzMgMTExLjQ3OCw5MC44OTQgMTEyLjk4LDkwLjAyNyBDMTE4LjI5MSw4Ni45NiAxMjIuNjExLDc5LjUwOSAxMjIuNjExLDczLjQxNiBDMTIyLjYxMSw3MS40ODkgMTIyLjE2OSw2OS44NTYgMTIxLjMzMyw2OC42OTIgQzEyMS4yNjYsNjguNiAxMjEuMjc2LDY4LjQ3MyAxMjEuMzU2LDY4LjM5MiBDMTIxLjQzNiw2OC4zMTEgMTIxLjU2Myw2OC4yOTkgMTIxLjY1Niw2OC4zNjUgQzEyMy4zMjcsNjkuNTM3IDEyNC4yNDcsNzEuNzQ2IDEyNC4yNDcsNzQuNTg0IEMxMjQuMjQ3LDgwLjgyNiAxMTkuODIxLDg4LjQ0NyAxMTQuMzgyLDkxLjU4NyBDMTEyLjgwOCw5Mi40OTUgMTExLjI5OCw5Mi45NDMgMTA5Ljg5NCw5Mi45NDMgTDEwOS44OTQsOTIuOTQzIFogTTEwNi45MjUsOTEuNDAxIEMxMDcuNzM4LDkyLjA1MiAxMDguNzQ1LDkyLjI3OCAxMDkuODkzLDkyLjI3OCBMMTA5Ljg5NCw5Mi4yNzggQzExMS4yMTUsOTIuMjc4IDExMi42NDcsOTEuOTUxIDExNC4xNDgsOTEuMDg0IEMxMTkuNDU5LDg4LjAxNyAxMjMuNzgsODAuNjIxIDEyMy43OCw3NC41MjggQzEyMy43OCw3Mi41NDkgMTIzLjMxNyw3MC45MjkgMTIyLjQ1NCw2OS43NjcgQzEyMi44NjUsNzAuODAyIDEyMy4wNzksNzIuMDQyIDEyMy4wNzksNzMuNDAyIEMxMjMuMDc5LDc5LjY0NSAxMTguNjUzLDg3LjI4NSAxMTMuMjE0LDkwLjQyNSBDMTExLjY0LDkxLjMzNCAxMTAuMTMsOTEuNzQyIDEwOC43MjQsOTEuNzQyIEMxMDguMDgzLDkxLjc0MiAxMDcuNDgxLDkxLjU5MyAxMDYuOTI1LDkxLjQwMSBMMTA2LjkyNSw5MS40MDEgWiIgaWQ9IkZpbGwtMTkiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEzLjA5Nyw5MC4yMyBDMTE4LjQ4MSw4Ny4xMjIgMTIyLjg0NSw3OS41OTQgMTIyLjg0NSw3My40MTYgQzEyMi44NDUsNzEuMzY1IDEyMi4zNjIsNjkuNzI0IDEyMS41MjIsNjguNTU2IEMxMTkuNzM4LDY3LjMwNCAxMTcuMTQ4LDY3LjM2MiAxMTQuMjY1LDY5LjAyNiBDMTA4Ljg4MSw3Mi4xMzQgMTA0LjUxNyw3OS42NjIgMTA0LjUxNyw4NS44NCBDMTA0LjUxNyw4Ny44OTEgMTA1LDg5LjUzMiAxMDUuODQsOTAuNyBDMTA3LjYyNCw5MS45NTIgMTEwLjIxNCw5MS44OTQgMTEzLjA5Nyw5MC4yMyIgaWQ9IkZpbGwtMjAiIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTA4LjcyNCw5MS42MTQgTDEwOC43MjQsOTEuNjE0IEMxMDcuNTgyLDkxLjYxNCAxMDYuNTY2LDkxLjQwMSAxMDUuNzA1LDkwLjc5NyBDMTA1LjY4NCw5MC43ODMgMTA1LjY2NSw5MC44MTEgMTA1LjY1LDkwLjc5IEMxMDQuNzU2LDg5LjU0NiAxMDQuMjgzLDg3Ljg0MiAxMDQuMjgzLDg1LjgxNyBDMTA0LjI4Myw3OS41NzUgMTA4LjcwOSw3MS45NTMgMTE0LjE0OCw2OC44MTIgQzExNS43MjIsNjcuOTA0IDExNy4yMzIsNjcuNDQ5IDExOC42MzgsNjcuNDQ5IEMxMTkuNzgsNjcuNDQ5IDEyMC43OTYsNjcuNzU4IDEyMS42NTYsNjguMzYyIEMxMjEuNjc4LDY4LjM3NyAxMjEuNjk3LDY4LjM5NyAxMjEuNzEyLDY4LjQxOCBDMTIyLjYwNiw2OS42NjIgMTIzLjA3OSw3MS4zOSAxMjMuMDc5LDczLjQxNSBDMTIzLjA3OSw3OS42NTggMTE4LjY1Myw4Ny4xOTggMTEzLjIxNCw5MC4zMzggQzExMS42NCw5MS4yNDcgMTEwLjEzLDkxLjYxNCAxMDguNzI0LDkxLjYxNCBMMTA4LjcyNCw5MS42MTQgWiBNMTA2LjAwNiw5MC41MDUgQzEwNi43OCw5MS4wMzcgMTA3LjY5NCw5MS4yODEgMTA4LjcyNCw5MS4yODEgQzExMC4wNDcsOTEuMjgxIDExMS40NzgsOTAuODY4IDExMi45OCw5MC4wMDEgQzExOC4yOTEsODYuOTM1IDEyMi42MTEsNzkuNDk2IDEyMi42MTEsNzMuNDAzIEMxMjIuNjExLDcxLjQ5NCAxMjIuMTc3LDY5Ljg4IDEyMS4zNTYsNjguNzE4IEMxMjAuNTgyLDY4LjE4NSAxMTkuNjY4LDY3LjkxOSAxMTguNjM4LDY3LjkxOSBDMTE3LjMxNSw2Ny45MTkgMTE1Ljg4Myw2OC4zNiAxMTQuMzgyLDY5LjIyNyBDMTA5LjA3MSw3Mi4yOTMgMTA0Ljc1MSw3OS43MzMgMTA0Ljc1MSw4NS44MjYgQzEwNC43NTEsODcuNzM1IDEwNS4xODUsODkuMzQzIDEwNi4wMDYsOTAuNTA1IEwxMDYuMDA2LDkwLjUwNSBaIiBpZD0iRmlsbC0yMSIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNDkuMzE4LDcuMjYyIEwxMzkuMzM0LDE2LjE0IEwxNTUuMjI3LDI3LjE3MSBMMTYwLjgxNiwyMS4wNTkgTDE0OS4zMTgsNy4yNjIiIGlkPSJGaWxsLTIyIiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2OS42NzYsMTMuODQgTDE1OS45MjgsMTkuNDY3IEMxNTYuMjg2LDIxLjU3IDE1MC40LDIxLjU4IDE0Ni43ODEsMTkuNDkxIEMxNDMuMTYxLDE3LjQwMiAxNDMuMTgsMTQuMDAzIDE0Ni44MjIsMTEuOSBMMTU2LjMxNyw2LjI5MiBMMTQ5LjU4OCwyLjQwNyBMNjcuNzUyLDQ5LjQ3OCBMMTEzLjY3NSw3NS45OTIgTDExNi43NTYsNzQuMjEzIEMxMTcuMzg3LDczLjg0OCAxMTcuNjI1LDczLjMxNSAxMTcuMzc0LDcyLjgyMyBDMTE1LjAxNyw2OC4xOTEgMTE0Ljc4MSw2My4yNzcgMTE2LjY5MSw1OC41NjEgQzEyMi4zMjksNDQuNjQxIDE0MS4yLDMzLjc0NiAxNjUuMzA5LDMwLjQ5MSBDMTczLjQ3OCwyOS4zODggMTgxLjk4OSwyOS41MjQgMTkwLjAxMywzMC44ODUgQzE5MC44NjUsMzEuMDMgMTkxLjc4OSwzMC44OTMgMTkyLjQyLDMwLjUyOCBMMTk1LjUwMSwyOC43NSBMMTY5LjY3NiwxMy44NCIgaWQ9IkZpbGwtMjMiIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEzLjY3NSw3Ni40NTkgQzExMy41OTQsNzYuNDU5IDExMy41MTQsNzYuNDM4IDExMy40NDIsNzYuMzk3IEw2Ny41MTgsNDkuODgyIEM2Ny4zNzQsNDkuNzk5IDY3LjI4NCw0OS42NDUgNjcuMjg1LDQ5LjQ3OCBDNjcuMjg1LDQ5LjMxMSA2Ny4zNzQsNDkuMTU3IDY3LjUxOSw0OS4wNzMgTDE0OS4zNTUsMi4wMDIgQzE0OS40OTksMS45MTkgMTQ5LjY3NywxLjkxOSAxNDkuODIxLDIuMDAyIEwxNTYuNTUsNS44ODcgQzE1Ni43NzQsNi4wMTcgMTU2Ljg1LDYuMzAyIDE1Ni43MjIsNi41MjYgQzE1Ni41OTIsNi43NDkgMTU2LjMwNyw2LjgyNiAxNTYuMDgzLDYuNjk2IEwxNDkuNTg3LDIuOTQ2IEw2OC42ODcsNDkuNDc5IEwxMTMuNjc1LDc1LjQ1MiBMMTE2LjUyMyw3My44MDggQzExNi43MTUsNzMuNjk3IDExNy4xNDMsNzMuMzk5IDExNi45NTgsNzMuMDM1IEMxMTQuNTQyLDY4LjI4NyAxMTQuMyw2My4yMjEgMTE2LjI1OCw1OC4zODUgQzExOS4wNjQsNTEuNDU4IDEyNS4xNDMsNDUuMTQzIDEzMy44NCw0MC4xMjIgQzE0Mi40OTcsMzUuMTI0IDE1My4zNTgsMzEuNjMzIDE2NS4yNDcsMzAuMDI4IEMxNzMuNDQ1LDI4LjkyMSAxODIuMDM3LDI5LjA1OCAxOTAuMDkxLDMwLjQyNSBDMTkwLjgzLDMwLjU1IDE5MS42NTIsMzAuNDMyIDE5Mi4xODYsMzAuMTI0IEwxOTQuNTY3LDI4Ljc1IEwxNjkuNDQyLDE0LjI0NCBDMTY5LjIxOSwxNC4xMTUgMTY5LjE0MiwxMy44MjkgMTY5LjI3MSwxMy42MDYgQzE2OS40LDEzLjM4MiAxNjkuNjg1LDEzLjMwNiAxNjkuOTA5LDEzLjQzNSBMMTk1LjczNCwyOC4zNDUgQzE5NS44NzksMjguNDI4IDE5NS45NjgsMjguNTgzIDE5NS45NjgsMjguNzUgQzE5NS45NjgsMjguOTE2IDE5NS44NzksMjkuMDcxIDE5NS43MzQsMjkuMTU0IEwxOTIuNjUzLDMwLjkzMyBDMTkxLjkzMiwzMS4zNSAxOTAuODksMzEuNTA4IDE4OS45MzUsMzEuMzQ2IEMxODEuOTcyLDI5Ljk5NSAxNzMuNDc4LDI5Ljg2IDE2NS4zNzIsMzAuOTU0IEMxNTMuNjAyLDMyLjU0MyAxNDIuODYsMzUuOTkzIDEzNC4zMDcsNDAuOTMxIEMxMjUuNzkzLDQ1Ljg0NyAxMTkuODUxLDUyLjAwNCAxMTcuMTI0LDU4LjczNiBDMTE1LjI3LDYzLjMxNCAxMTUuNTAxLDY4LjExMiAxMTcuNzksNzIuNjExIEMxMTguMTYsNzMuMzM2IDExNy44NDUsNzQuMTI0IDExNi45OSw3NC42MTcgTDExMy45MDksNzYuMzk3IEMxMTMuODM2LDc2LjQzOCAxMTMuNzU2LDc2LjQ1OSAxMTMuNjc1LDc2LjQ1OSIgaWQ9IkZpbGwtMjQiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTUzLjMxNiwyMS4yNzkgQzE1MC45MDMsMjEuMjc5IDE0OC40OTUsMjAuNzUxIDE0Ni42NjQsMTkuNjkzIEMxNDQuODQ2LDE4LjY0NCAxNDMuODQ0LDE3LjIzMiAxNDMuODQ0LDE1LjcxOCBDMTQzLjg0NCwxNC4xOTEgMTQ0Ljg2LDEyLjc2MyAxNDYuNzA1LDExLjY5OCBMMTU2LjE5OCw2LjA5MSBDMTU2LjMwOSw2LjAyNSAxNTYuNDUyLDYuMDYyIDE1Ni41MTgsNi4xNzMgQzE1Ni41ODMsNi4yODQgMTU2LjU0Nyw2LjQyNyAxNTYuNDM2LDYuNDkzIEwxNDYuOTQsMTIuMTAyIEMxNDUuMjQ0LDEzLjA4MSAxNDQuMzEyLDE0LjM2NSAxNDQuMzEyLDE1LjcxOCBDMTQ0LjMxMiwxNy4wNTggMTQ1LjIzLDE4LjMyNiAxNDYuODk3LDE5LjI4OSBDMTUwLjQ0NiwyMS4zMzggMTU2LjI0LDIxLjMyNyAxNTkuODExLDE5LjI2NSBMMTY5LjU1OSwxMy42MzcgQzE2OS42NywxMy41NzMgMTY5LjgxMywxMy42MTEgMTY5Ljg3OCwxMy43MjMgQzE2OS45NDMsMTMuODM0IDE2OS45MDQsMTMuOTc3IDE2OS43OTMsMTQuMDQyIEwxNjAuMDQ1LDE5LjY3IEMxNTguMTg3LDIwLjc0MiAxNTUuNzQ5LDIxLjI3OSAxNTMuMzE2LDIxLjI3OSIgaWQ9IkZpbGwtMjUiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEzLjY3NSw3NS45OTIgTDY3Ljc2Miw0OS40ODQiIGlkPSJGaWxsLTI2IiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTExMy42NzUsNzYuMzQyIEMxMTMuNjE1LDc2LjM0MiAxMTMuNTU1LDc2LjMyNyAxMTMuNSw3Ni4yOTUgTDY3LjU4Nyw0OS43ODcgQzY3LjQxOSw0OS42OSA2Ny4zNjIsNDkuNDc2IDY3LjQ1OSw0OS4zMDkgQzY3LjU1Niw0OS4xNDEgNjcuNzcsNDkuMDgzIDY3LjkzNyw0OS4xOCBMMTEzLjg1LDc1LjY4OCBDMTE0LjAxOCw3NS43ODUgMTE0LjA3NSw3NiAxMTMuOTc4LDc2LjE2NyBDMTEzLjkxNCw3Ni4yNzkgMTEzLjc5Niw3Ni4zNDIgMTEzLjY3NSw3Ni4zNDIiIGlkPSJGaWxsLTI3IiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTY3Ljc2Miw0OS40ODQgTDY3Ljc2MiwxMDMuNDg1IEM2Ny43NjIsMTA0LjU3NSA2OC41MzIsMTA1LjkwMyA2OS40ODIsMTA2LjQ1MiBMMTExLjk1NSwxMzAuOTczIEMxMTIuOTA1LDEzMS41MjIgMTEzLjY3NSwxMzEuMDgzIDExMy42NzUsMTI5Ljk5MyBMMTEzLjY3NSw3NS45OTIiIGlkPSJGaWxsLTI4IiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTExMi43MjcsMTMxLjU2MSBDMTEyLjQzLDEzMS41NjEgMTEyLjEwNywxMzEuNDY2IDExMS43OCwxMzEuMjc2IEw2OS4zMDcsMTA2Ljc1NSBDNjguMjQ0LDEwNi4xNDIgNjcuNDEyLDEwNC43MDUgNjcuNDEyLDEwMy40ODUgTDY3LjQxMiw0OS40ODQgQzY3LjQxMiw0OS4yOSA2Ny41NjksNDkuMTM0IDY3Ljc2Miw0OS4xMzQgQzY3Ljk1Niw0OS4xMzQgNjguMTEzLDQ5LjI5IDY4LjExMyw0OS40ODQgTDY4LjExMywxMDMuNDg1IEM2OC4xMTMsMTA0LjQ0NSA2OC44MiwxMDUuNjY1IDY5LjY1NywxMDYuMTQ4IEwxMTIuMTMsMTMwLjY3IEMxMTIuNDc0LDEzMC44NjggMTEyLjc5MSwxMzAuOTEzIDExMywxMzAuNzkyIEMxMTMuMjA2LDEzMC42NzMgMTEzLjMyNSwxMzAuMzgxIDExMy4zMjUsMTI5Ljk5MyBMMTEzLjMyNSw3NS45OTIgQzExMy4zMjUsNzUuNzk4IDExMy40ODIsNzUuNjQxIDExMy42NzUsNzUuNjQxIEMxMTMuODY5LDc1LjY0MSAxMTQuMDI1LDc1Ljc5OCAxMTQuMDI1LDc1Ljk5MiBMMTE0LjAyNSwxMjkuOTkzIEMxMTQuMDI1LDEzMC42NDggMTEzLjc4NiwxMzEuMTQ3IDExMy4zNSwxMzEuMzk5IEMxMTMuMTYyLDEzMS41MDcgMTEyLjk1MiwxMzEuNTYxIDExMi43MjcsMTMxLjU2MSIgaWQ9IkZpbGwtMjkiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEyLjg2LDQwLjUxMiBDMTEyLjg2LDQwLjUxMiAxMTIuODYsNDAuNTEyIDExMi44NTksNDAuNTEyIEMxMTAuNTQxLDQwLjUxMiAxMDguMzYsMzkuOTkgMTA2LjcxNywzOS4wNDEgQzEwNS4wMTIsMzguMDU3IDEwNC4wNzQsMzYuNzI2IDEwNC4wNzQsMzUuMjkyIEMxMDQuMDc0LDMzLjg0NyAxMDUuMDI2LDMyLjUwMSAxMDYuNzU0LDMxLjUwNCBMMTE4Ljc5NSwyNC41NTEgQzEyMC40NjMsMjMuNTg5IDEyMi42NjksMjMuMDU4IDEyNS4wMDcsMjMuMDU4IEMxMjcuMzI1LDIzLjA1OCAxMjkuNTA2LDIzLjU4MSAxMzEuMTUsMjQuNTMgQzEzMi44NTQsMjUuNTE0IDEzMy43OTMsMjYuODQ1IDEzMy43OTMsMjguMjc4IEMxMzMuNzkzLDI5LjcyNCAxMzIuODQxLDMxLjA2OSAxMzEuMTEzLDMyLjA2NyBMMTE5LjA3MSwzOS4wMTkgQzExNy40MDMsMzkuOTgyIDExNS4xOTcsNDAuNTEyIDExMi44Niw0MC41MTIgTDExMi44Niw0MC41MTIgWiBNMTI1LjAwNywyMy43NTkgQzEyMi43OSwyMy43NTkgMTIwLjcwOSwyNC4yNTYgMTE5LjE0NiwyNS4xNTggTDEwNy4xMDQsMzIuMTEgQzEwNS42MDIsMzIuOTc4IDEwNC43NzQsMzQuMTA4IDEwNC43NzQsMzUuMjkyIEMxMDQuNzc0LDM2LjQ2NSAxMDUuNTg5LDM3LjU4MSAxMDcuMDY3LDM4LjQzNCBDMTA4LjYwNSwzOS4zMjMgMTEwLjY2MywzOS44MTIgMTEyLjg1OSwzOS44MTIgTDExMi44NiwzOS44MTIgQzExNS4wNzYsMzkuODEyIDExNy4xNTgsMzkuMzE1IDExOC43MjEsMzguNDEzIEwxMzAuNzYyLDMxLjQ2IEMxMzIuMjY0LDMwLjU5MyAxMzMuMDkyLDI5LjQ2MyAxMzMuMDkyLDI4LjI3OCBDMTMzLjA5MiwyNy4xMDYgMTMyLjI3OCwyNS45OSAxMzAuOCwyNS4xMzYgQzEyOS4yNjEsMjQuMjQ4IDEyNy4yMDQsMjMuNzU5IDEyNS4wMDcsMjMuNzU5IEwxMjUuMDA3LDIzLjc1OSBaIiBpZD0iRmlsbC0zMCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNjUuNjMsMTYuMjE5IEwxNTkuODk2LDE5LjUzIEMxNTYuNzI5LDIxLjM1OCAxNTEuNjEsMjEuMzY3IDE0OC40NjMsMTkuNTUgQzE0NS4zMTYsMTcuNzMzIDE0NS4zMzIsMTQuNzc4IDE0OC40OTksMTIuOTQ5IEwxNTQuMjMzLDkuNjM5IEwxNjUuNjMsMTYuMjE5IiBpZD0iRmlsbC0zMSIgZmlsbD0iI0ZBRkFGQSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNTQuMjMzLDEwLjQ0OCBMMTY0LjIyOCwxNi4yMTkgTDE1OS41NDYsMTguOTIzIEMxNTguMTEyLDE5Ljc1IDE1Ni4xOTQsMjAuMjA2IDE1NC4xNDcsMjAuMjA2IEMxNTIuMTE4LDIwLjIwNiAxNTAuMjI0LDE5Ljc1NyAxNDguODE0LDE4Ljk0MyBDMTQ3LjUyNCwxOC4xOTkgMTQ2LjgxNCwxNy4yNDkgMTQ2LjgxNCwxNi4yNjkgQzE0Ni44MTQsMTUuMjc4IDE0Ny41MzcsMTQuMzE0IDE0OC44NSwxMy41NTYgTDE1NC4yMzMsMTAuNDQ4IE0xNTQuMjMzLDkuNjM5IEwxNDguNDk5LDEyLjk0OSBDMTQ1LjMzMiwxNC43NzggMTQ1LjMxNiwxNy43MzMgMTQ4LjQ2MywxOS41NSBDMTUwLjAzMSwyMC40NTUgMTUyLjA4NiwyMC45MDcgMTU0LjE0NywyMC45MDcgQzE1Ni4yMjQsMjAuOTA3IDE1OC4zMDYsMjAuNDQ3IDE1OS44OTYsMTkuNTMgTDE2NS42MywxNi4yMTkgTDE1NC4yMzMsOS42MzkiIGlkPSJGaWxsLTMyIiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0NS40NDUsNzIuNjY3IEwxNDUuNDQ1LDcyLjY2NyBDMTQzLjY3Miw3Mi42NjcgMTQyLjIwNCw3MS44MTcgMTQxLjIwMiw3MC40MjIgQzE0MS4xMzUsNzAuMzMgMTQxLjE0NSw3MC4xNDcgMTQxLjIyNSw3MC4wNjYgQzE0MS4zMDUsNjkuOTg1IDE0MS40MzIsNjkuOTQ2IDE0MS41MjUsNzAuMDExIEMxNDIuMzA2LDcwLjU1OSAxNDMuMjMxLDcwLjgyMyAxNDQuMjc2LDcwLjgyMiBDMTQ1LjU5OCw3MC44MjIgMTQ3LjAzLDcwLjM3NiAxNDguNTMyLDY5LjUwOSBDMTUzLjg0Miw2Ni40NDMgMTU4LjE2Myw1OC45ODcgMTU4LjE2Myw1Mi44OTQgQzE1OC4xNjMsNTAuOTY3IDE1Ny43MjEsNDkuMzMyIDE1Ni44ODQsNDguMTY4IEMxNTYuODE4LDQ4LjA3NiAxNTYuODI4LDQ3Ljk0OCAxNTYuOTA4LDQ3Ljg2NyBDMTU2Ljk4OCw0Ny43ODYgMTU3LjExNCw0Ny43NzQgMTU3LjIwOCw0Ny44NCBDMTU4Ljg3OCw0OS4wMTIgMTU5Ljc5OCw1MS4yMiAxNTkuNzk4LDU0LjA1OSBDMTU5Ljc5OCw2MC4zMDEgMTU1LjM3Myw2OC4wNDYgMTQ5LjkzMyw3MS4xODYgQzE0OC4zNiw3Mi4wOTQgMTQ2Ljg1LDcyLjY2NyAxNDUuNDQ1LDcyLjY2NyBMMTQ1LjQ0NSw3Mi42NjcgWiBNMTQyLjQ3Niw3MSBDMTQzLjI5LDcxLjY1MSAxNDQuMjk2LDcyLjAwMiAxNDUuNDQ1LDcyLjAwMiBDMTQ2Ljc2Nyw3Mi4wMDIgMTQ4LjE5OCw3MS41NSAxNDkuNyw3MC42ODIgQzE1NS4wMSw2Ny42MTcgMTU5LjMzMSw2MC4xNTkgMTU5LjMzMSw1NC4wNjUgQzE1OS4zMzEsNTIuMDg1IDE1OC44NjgsNTAuNDM1IDE1OC4wMDYsNDkuMjcyIEMxNTguNDE3LDUwLjMwNyAxNTguNjMsNTEuNTMyIDE1OC42Myw1Mi44OTIgQzE1OC42Myw1OS4xMzQgMTU0LjIwNSw2Ni43NjcgMTQ4Ljc2NSw2OS45MDcgQzE0Ny4xOTIsNzAuODE2IDE0NS42ODEsNzEuMjgzIDE0NC4yNzYsNzEuMjgzIEMxNDMuNjM0LDcxLjI4MyAxNDMuMDMzLDcxLjE5MiAxNDIuNDc2LDcxIEwxNDIuNDc2LDcxIFoiIGlkPSJGaWxsLTMzIiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0OC42NDgsNjkuNzA0IEMxNTQuMDMyLDY2LjU5NiAxNTguMzk2LDU5LjA2OCAxNTguMzk2LDUyLjg5MSBDMTU4LjM5Niw1MC44MzkgMTU3LjkxMyw0OS4xOTggMTU3LjA3NCw0OC4wMyBDMTU1LjI4OSw0Ni43NzggMTUyLjY5OSw0Ni44MzYgMTQ5LjgxNiw0OC41MDEgQzE0NC40MzMsNTEuNjA5IDE0MC4wNjgsNTkuMTM3IDE0MC4wNjgsNjUuMzE0IEMxNDAuMDY4LDY3LjM2NSAxNDAuNTUyLDY5LjAwNiAxNDEuMzkxLDcwLjE3NCBDMTQzLjE3Niw3MS40MjcgMTQ1Ljc2NSw3MS4zNjkgMTQ4LjY0OCw2OS43MDQiIGlkPSJGaWxsLTM0IiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0NC4yNzYsNzEuMjc2IEwxNDQuMjc2LDcxLjI3NiBDMTQzLjEzMyw3MS4yNzYgMTQyLjExOCw3MC45NjkgMTQxLjI1Nyw3MC4zNjUgQzE0MS4yMzYsNzAuMzUxIDE0MS4yMTcsNzAuMzMyIDE0MS4yMDIsNzAuMzExIEMxNDAuMzA3LDY5LjA2NyAxMzkuODM1LDY3LjMzOSAxMzkuODM1LDY1LjMxNCBDMTM5LjgzNSw1OS4wNzMgMTQ0LjI2LDUxLjQzOSAxNDkuNyw0OC4yOTggQzE1MS4yNzMsNDcuMzkgMTUyLjc4NCw0Ni45MjkgMTU0LjE4OSw0Ni45MjkgQzE1NS4zMzIsNDYuOTI5IDE1Ni4zNDcsNDcuMjM2IDE1Ny4yMDgsNDcuODM5IEMxNTcuMjI5LDQ3Ljg1NCAxNTcuMjQ4LDQ3Ljg3MyAxNTcuMjYzLDQ3Ljg5NCBDMTU4LjE1Nyw0OS4xMzggMTU4LjYzLDUwLjg2NSAxNTguNjMsNTIuODkxIEMxNTguNjMsNTkuMTMyIDE1NC4yMDUsNjYuNzY2IDE0OC43NjUsNjkuOTA3IEMxNDcuMTkyLDcwLjgxNSAxNDUuNjgxLDcxLjI3NiAxNDQuMjc2LDcxLjI3NiBMMTQ0LjI3Niw3MS4yNzYgWiBNMTQxLjU1OCw3MC4xMDQgQzE0Mi4zMzEsNzAuNjM3IDE0My4yNDUsNzEuMDA1IDE0NC4yNzYsNzEuMDA1IEMxNDUuNTk4LDcxLjAwNSAxNDcuMDMsNzAuNDY3IDE0OC41MzIsNjkuNiBDMTUzLjg0Miw2Ni41MzQgMTU4LjE2Myw1OS4wMzMgMTU4LjE2Myw1Mi45MzkgQzE1OC4xNjMsNTEuMDMxIDE1Ny43MjksNDkuMzg1IDE1Ni45MDcsNDguMjIzIEMxNTYuMTMzLDQ3LjY5MSAxNTUuMjE5LDQ3LjQwOSAxNTQuMTg5LDQ3LjQwOSBDMTUyLjg2Nyw0Ny40MDkgMTUxLjQzNSw0Ny44NDIgMTQ5LjkzMyw0OC43MDkgQzE0NC42MjMsNTEuNzc1IDE0MC4zMDIsNTkuMjczIDE0MC4zMDIsNjUuMzY2IEMxNDAuMzAyLDY3LjI3NiAxNDAuNzM2LDY4Ljk0MiAxNDEuNTU4LDcwLjEwNCBMMTQxLjU1OCw3MC4xMDQgWiIgaWQ9IkZpbGwtMzUiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTUwLjcyLDY1LjM2MSBMMTUwLjM1Nyw2NS4wNjYgQzE1MS4xNDcsNjQuMDkyIDE1MS44NjksNjMuMDQgMTUyLjUwNSw2MS45MzggQzE1My4zMTMsNjAuNTM5IDE1My45NzgsNTkuMDY3IDE1NC40ODIsNTcuNTYzIEwxNTQuOTI1LDU3LjcxMiBDMTU0LjQxMiw1OS4yNDUgMTUzLjczMyw2MC43NDUgMTUyLjkxLDYyLjE3MiBDMTUyLjI2Miw2My4yOTUgMTUxLjUyNSw2NC4zNjggMTUwLjcyLDY1LjM2MSIgaWQ9IkZpbGwtMzYiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTE1LjkxNyw4NC41MTQgTDExNS41NTQsODQuMjIgQzExNi4zNDQsODMuMjQ1IDExNy4wNjYsODIuMTk0IDExNy43MDIsODEuMDkyIEMxMTguNTEsNzkuNjkyIDExOS4xNzUsNzguMjIgMTE5LjY3OCw3Ni43MTcgTDEyMC4xMjEsNzYuODY1IEMxMTkuNjA4LDc4LjM5OCAxMTguOTMsNzkuODk5IDExOC4xMDYsODEuMzI2IEMxMTcuNDU4LDgyLjQ0OCAxMTYuNzIyLDgzLjUyMSAxMTUuOTE3LDg0LjUxNCIgaWQ9IkZpbGwtMzciIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTE0LDEzMC40NzYgTDExNCwxMzAuMDA4IEwxMTQsNzYuMDUyIEwxMTQsNzUuNTg0IEwxMTQsNzYuMDUyIEwxMTQsMTMwLjAwOCBMMTE0LDEzMC40NzYiIGlkPSJGaWxsLTM4IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICA8ZyBpZD0iSW1wb3J0ZWQtTGF5ZXJzLUNvcHkiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDYyLjAwMDAwMCwgMC4wMDAwMDApIiBza2V0Y2g6dHlwZT0iTVNTaGFwZUdyb3VwIj4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTkuODIyLDM3LjQ3NCBDMTkuODM5LDM3LjMzOSAxOS43NDcsMzcuMTk0IDE5LjU1NSwzNy4wODIgQzE5LjIyOCwzNi44OTQgMTguNzI5LDM2Ljg3MiAxOC40NDYsMzcuMDM3IEwxMi40MzQsNDAuNTA4IEMxMi4zMDMsNDAuNTg0IDEyLjI0LDQwLjY4NiAxMi4yNDMsNDAuNzkzIEMxMi4yNDUsNDAuOTI1IDEyLjI0NSw0MS4yNTQgMTIuMjQ1LDQxLjM3MSBMMTIuMjQ1LDQxLjQxNCBMMTIuMjM4LDQxLjU0MiBDOC4xNDgsNDMuODg3IDUuNjQ3LDQ1LjMyMSA1LjY0Nyw0NS4zMjEgQzUuNjQ2LDQ1LjMyMSAzLjU3LDQ2LjM2NyAyLjg2LDUwLjUxMyBDMi44Niw1MC41MTMgMS45NDgsNTcuNDc0IDEuOTYyLDcwLjI1OCBDMS45NzcsODIuODI4IDIuNTY4LDg3LjMyOCAzLjEyOSw5MS42MDkgQzMuMzQ5LDkzLjI5MyA2LjEzLDkzLjczNCA2LjEzLDkzLjczNCBDNi40NjEsOTMuNzc0IDYuODI4LDkzLjcwNyA3LjIxLDkzLjQ4NiBMODIuNDgzLDQ5LjkzNSBDODQuMjkxLDQ4Ljg2NiA4NS4xNSw0Ni4yMTYgODUuNTM5LDQzLjY1MSBDODYuNzUyLDM1LjY2MSA4Ny4yMTQsMTAuNjczIDg1LjI2NCwzLjc3MyBDODUuMDY4LDMuMDggODQuNzU0LDIuNjkgODQuMzk2LDIuNDkxIEw4Mi4zMSwxLjcwMSBDODEuNTgzLDEuNzI5IDgwLjg5NCwyLjE2OCA4MC43NzYsMi4yMzYgQzgwLjYzNiwyLjMxNyA0MS44MDcsMjQuNTg1IDIwLjAzMiwzNy4wNzIgTDE5LjgyMiwzNy40NzQiIGlkPSJGaWxsLTEiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNODIuMzExLDEuNzAxIEw4NC4zOTYsMi40OTEgQzg0Ljc1NCwyLjY5IDg1LjA2OCwzLjA4IDg1LjI2NCwzLjc3MyBDODcuMjEzLDEwLjY3MyA4Ni43NTEsMzUuNjYgODUuNTM5LDQzLjY1MSBDODUuMTQ5LDQ2LjIxNiA4NC4yOSw0OC44NjYgODIuNDgzLDQ5LjkzNSBMNy4yMSw5My40ODYgQzYuODk3LDkzLjY2NyA2LjU5NSw5My43NDQgNi4zMTQsOTMuNzQ0IEw2LjEzMSw5My43MzMgQzYuMTMxLDkzLjczNCAzLjM0OSw5My4yOTMgMy4xMjgsOTEuNjA5IEMyLjU2OCw4Ny4zMjcgMS45NzcsODIuODI4IDEuOTYzLDcwLjI1OCBDMS45NDgsNTcuNDc0IDIuODYsNTAuNTEzIDIuODYsNTAuNTEzIEMzLjU3LDQ2LjM2NyA1LjY0Nyw0NS4zMjEgNS42NDcsNDUuMzIxIEM1LjY0Nyw0NS4zMjEgOC4xNDgsNDMuODg3IDEyLjIzOCw0MS41NDIgTDEyLjI0NSw0MS40MTQgTDEyLjI0NSw0MS4zNzEgQzEyLjI0NSw0MS4yNTQgMTIuMjQ1LDQwLjkyNSAxMi4yNDMsNDAuNzkzIEMxMi4yNCw0MC42ODYgMTIuMzAyLDQwLjU4MyAxMi40MzQsNDAuNTA4IEwxOC40NDYsMzcuMDM2IEMxOC41NzQsMzYuOTYyIDE4Ljc0NiwzNi45MjYgMTguOTI3LDM2LjkyNiBDMTkuMTQ1LDM2LjkyNiAxOS4zNzYsMzYuOTc5IDE5LjU1NCwzNy4wODIgQzE5Ljc0NywzNy4xOTQgMTkuODM5LDM3LjM0IDE5LjgyMiwzNy40NzQgTDIwLjAzMywzNy4wNzIgQzQxLjgwNiwyNC41ODUgODAuNjM2LDIuMzE4IDgwLjc3NywyLjIzNiBDODAuODk0LDIuMTY4IDgxLjU4MywxLjcyOSA4Mi4zMTEsMS43MDEgTTgyLjMxMSwwLjcwNCBMODIuMjcyLDAuNzA1IEM4MS42NTQsMC43MjggODAuOTg5LDAuOTQ5IDgwLjI5OCwxLjM2MSBMODAuMjc3LDEuMzczIEM4MC4xMjksMS40NTggNTkuNzY4LDEzLjEzNSAxOS43NTgsMzYuMDc5IEMxOS41LDM1Ljk4MSAxOS4yMTQsMzUuOTI5IDE4LjkyNywzNS45MjkgQzE4LjU2MiwzNS45MjkgMTguMjIzLDM2LjAxMyAxNy45NDcsMzYuMTczIEwxMS45MzUsMzkuNjQ0IEMxMS40OTMsMzkuODk5IDExLjIzNiw0MC4zMzQgMTEuMjQ2LDQwLjgxIEwxMS4yNDcsNDAuOTYgTDUuMTY3LDQ0LjQ0NyBDNC43OTQsNDQuNjQ2IDIuNjI1LDQ1Ljk3OCAxLjg3Nyw1MC4zNDUgTDEuODcxLDUwLjM4NCBDMS44NjIsNTAuNDU0IDAuOTUxLDU3LjU1NyAwLjk2NSw3MC4yNTkgQzAuOTc5LDgyLjg3OSAxLjU2OCw4Ny4zNzUgMi4xMzcsOTEuNzI0IEwyLjEzOSw5MS43MzkgQzIuNDQ3LDk0LjA5NCA1LjYxNCw5NC42NjIgNS45NzUsOTQuNzE5IEw2LjAwOSw5NC43MjMgQzYuMTEsOTQuNzM2IDYuMjEzLDk0Ljc0MiA2LjMxNCw5NC43NDIgQzYuNzksOTQuNzQyIDcuMjYsOTQuNjEgNy43MSw5NC4zNSBMODIuOTgzLDUwLjc5OCBDODQuNzk0LDQ5LjcyNyA4NS45ODIsNDcuMzc1IDg2LjUyNSw0My44MDEgQzg3LjcxMSwzNS45ODcgODguMjU5LDEwLjcwNSA4Ni4yMjQsMy41MDIgQzg1Ljk3MSwyLjYwOSA4NS41MiwxLjk3NSA4NC44ODEsMS42MiBMODQuNzQ5LDEuNTU4IEw4Mi42NjQsMC43NjkgQzgyLjU1MSwwLjcyNSA4Mi40MzEsMC43MDQgODIuMzExLDAuNzA0IiBpZD0iRmlsbC0yIiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTY2LjI2NywxMS41NjUgTDY3Ljc2MiwxMS45OTkgTDExLjQyMyw0NC4zMjUiIGlkPSJGaWxsLTMiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTIuMjAyLDkwLjU0NSBDMTIuMDI5LDkwLjU0NSAxMS44NjIsOTAuNDU1IDExLjc2OSw5MC4yOTUgQzExLjYzMiw5MC4wNTcgMTEuNzEzLDg5Ljc1MiAxMS45NTIsODkuNjE0IEwzMC4zODksNzguOTY5IEMzMC42MjgsNzguODMxIDMwLjkzMyw3OC45MTMgMzEuMDcxLDc5LjE1MiBDMzEuMjA4LDc5LjM5IDMxLjEyNyw3OS42OTYgMzAuODg4LDc5LjgzMyBMMTIuNDUxLDkwLjQ3OCBMMTIuMjAyLDkwLjU0NSIgaWQ9IkZpbGwtNCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMy43NjQsNDIuNjU0IEwxMy42NTYsNDIuNTkyIEwxMy43MDIsNDIuNDIxIEwxOC44MzcsMzkuNDU3IEwxOS4wMDcsMzkuNTAyIEwxOC45NjIsMzkuNjczIEwxMy44MjcsNDIuNjM3IEwxMy43NjQsNDIuNjU0IiBpZD0iRmlsbC01IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTguNTIsOTAuMzc1IEw4LjUyLDQ2LjQyMSBMOC41ODMsNDYuMzg1IEw3NS44NCw3LjU1NCBMNzUuODQsNTEuNTA4IEw3NS43NzgsNTEuNTQ0IEw4LjUyLDkwLjM3NSBMOC41Miw5MC4zNzUgWiBNOC43Nyw0Ni41NjQgTDguNzcsODkuOTQ0IEw3NS41OTEsNTEuMzY1IEw3NS41OTEsNy45ODUgTDguNzcsNDYuNTY0IEw4Ljc3LDQ2LjU2NCBaIiBpZD0iRmlsbC02IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTI0Ljk4Niw4My4xODIgQzI0Ljc1Niw4My4zMzEgMjQuMzc0LDgzLjU2NiAyNC4xMzcsODMuNzA1IEwxMi42MzIsOTAuNDA2IEMxMi4zOTUsOTAuNTQ1IDEyLjQyNiw5MC42NTggMTIuNyw5MC42NTggTDEzLjI2NSw5MC42NTggQzEzLjU0LDkwLjY1OCAxMy45NTgsOTAuNTQ1IDE0LjE5NSw5MC40MDYgTDI1LjcsODMuNzA1IEMyNS45MzcsODMuNTY2IDI2LjEyOCw4My40NTIgMjYuMTI1LDgzLjQ0OSBDMjYuMTIyLDgzLjQ0NyAyNi4xMTksODMuMjIgMjYuMTE5LDgyLjk0NiBDMjYuMTE5LDgyLjY3MiAyNS45MzEsODIuNTY5IDI1LjcwMSw4Mi43MTkgTDI0Ljk4Niw4My4xODIiIGlkPSJGaWxsLTciIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTMuMjY2LDkwLjc4MiBMMTIuNyw5MC43ODIgQzEyLjUsOTAuNzgyIDEyLjM4NCw5MC43MjYgMTIuMzU0LDkwLjYxNiBDMTIuMzI0LDkwLjUwNiAxMi4zOTcsOTAuMzk5IDEyLjU2OSw5MC4yOTkgTDI0LjA3NCw4My41OTcgQzI0LjMxLDgzLjQ1OSAyNC42ODksODMuMjI2IDI0LjkxOCw4My4wNzggTDI1LjYzMyw4Mi42MTQgQzI1LjcyMyw4Mi41NTUgMjUuODEzLDgyLjUyNSAyNS44OTksODIuNTI1IEMyNi4wNzEsODIuNTI1IDI2LjI0NCw4Mi42NTUgMjYuMjQ0LDgyLjk0NiBDMjYuMjQ0LDgzLjE2IDI2LjI0NSw4My4zMDkgMjYuMjQ3LDgzLjM4MyBMMjYuMjUzLDgzLjM4NyBMMjYuMjQ5LDgzLjQ1NiBDMjYuMjQ2LDgzLjUzMSAyNi4yNDYsODMuNTMxIDI1Ljc2Myw4My44MTIgTDE0LjI1OCw5MC41MTQgQzE0LDkwLjY2NSAxMy41NjQsOTAuNzgyIDEzLjI2Niw5MC43ODIgTDEzLjI2Niw5MC43ODIgWiBNMTIuNjY2LDkwLjUzMiBMMTIuNyw5MC41MzMgTDEzLjI2Niw5MC41MzMgQzEzLjUxOCw5MC41MzMgMTMuOTE1LDkwLjQyNSAxNC4xMzIsOTAuMjk5IEwyNS42MzcsODMuNTk3IEMyNS44MDUsODMuNDk5IDI1LjkzMSw4My40MjQgMjUuOTk4LDgzLjM4MyBDMjUuOTk0LDgzLjI5OSAyNS45OTQsODMuMTY1IDI1Ljk5NCw4Mi45NDYgTDI1Ljg5OSw4Mi43NzUgTDI1Ljc2OCw4Mi44MjQgTDI1LjA1NCw4My4yODcgQzI0LjgyMiw4My40MzcgMjQuNDM4LDgzLjY3MyAyNC4yLDgzLjgxMiBMMTIuNjk1LDkwLjUxNCBMMTIuNjY2LDkwLjUzMiBMMTIuNjY2LDkwLjUzMiBaIiBpZD0iRmlsbC04IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTEzLjI2Niw4OS44NzEgTDEyLjcsODkuODcxIEMxMi41LDg5Ljg3MSAxMi4zODQsODkuODE1IDEyLjM1NCw4OS43MDUgQzEyLjMyNCw4OS41OTUgMTIuMzk3LDg5LjQ4OCAxMi41NjksODkuMzg4IEwyNC4wNzQsODIuNjg2IEMyNC4zMzIsODIuNTM1IDI0Ljc2OCw4Mi40MTggMjUuMDY3LDgyLjQxOCBMMjUuNjMyLDgyLjQxOCBDMjUuODMyLDgyLjQxOCAyNS45NDgsODIuNDc0IDI1Ljk3OCw4Mi41ODQgQzI2LjAwOCw4Mi42OTQgMjUuOTM1LDgyLjgwMSAyNS43NjMsODIuOTAxIEwxNC4yNTgsODkuNjAzIEMxNCw4OS43NTQgMTMuNTY0LDg5Ljg3MSAxMy4yNjYsODkuODcxIEwxMy4yNjYsODkuODcxIFogTTEyLjY2Niw4OS42MjEgTDEyLjcsODkuNjIyIEwxMy4yNjYsODkuNjIyIEMxMy41MTgsODkuNjIyIDEzLjkxNSw4OS41MTUgMTQuMTMyLDg5LjM4OCBMMjUuNjM3LDgyLjY4NiBMMjUuNjY3LDgyLjY2OCBMMjUuNjMyLDgyLjY2NyBMMjUuMDY3LDgyLjY2NyBDMjQuODE1LDgyLjY2NyAyNC40MTgsODIuNzc1IDI0LjIsODIuOTAxIEwxMi42OTUsODkuNjAzIEwxMi42NjYsODkuNjIxIEwxMi42NjYsODkuNjIxIFoiIGlkPSJGaWxsLTkiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTIuMzcsOTAuODAxIEwxMi4zNyw4OS41NTQgTDEyLjM3LDkwLjgwMSIgaWQ9IkZpbGwtMTAiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNi4xMyw5My45MDEgQzUuMzc5LDkzLjgwOCA0LjgxNiw5My4xNjQgNC42OTEsOTIuNTI1IEMzLjg2LDg4LjI4NyAzLjU0LDgzLjc0MyAzLjUyNiw3MS4xNzMgQzMuNTExLDU4LjM4OSA0LjQyMyw1MS40MjggNC40MjMsNTEuNDI4IEM1LjEzNCw0Ny4yODIgNy4yMSw0Ni4yMzYgNy4yMSw0Ni4yMzYgQzcuMjEsNDYuMjM2IDgxLjY2NywzLjI1IDgyLjA2OSwzLjAxNyBDODIuMjkyLDIuODg4IDg0LjU1NiwxLjQzMyA4NS4yNjQsMy45NCBDODcuMjE0LDEwLjg0IDg2Ljc1MiwzNS44MjcgODUuNTM5LDQzLjgxOCBDODUuMTUsNDYuMzgzIDg0LjI5MSw0OS4wMzMgODIuNDgzLDUwLjEwMSBMNy4yMSw5My42NTMgQzYuODI4LDkzLjg3NCA2LjQ2MSw5My45NDEgNi4xMyw5My45MDEgQzYuMTMsOTMuOTAxIDMuMzQ5LDkzLjQ2IDMuMTI5LDkxLjc3NiBDMi41NjgsODcuNDk1IDEuOTc3LDgyLjk5NSAxLjk2Miw3MC40MjUgQzEuOTQ4LDU3LjY0MSAyLjg2LDUwLjY4IDIuODYsNTAuNjggQzMuNTcsNDYuNTM0IDUuNjQ3LDQ1LjQ4OSA1LjY0Nyw0NS40ODkgQzUuNjQ2LDQ1LjQ4OSA4LjA2NSw0NC4wOTIgMTIuMjQ1LDQxLjY3OSBMMTMuMTE2LDQxLjU2IEwxOS43MTUsMzcuNzMgTDE5Ljc2MSwzNy4yNjkgTDYuMTMsOTMuOTAxIiBpZD0iRmlsbC0xMSIgZmlsbD0iI0ZBRkFGQSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik02LjMxNyw5NC4xNjEgTDYuMTAyLDk0LjE0OCBMNi4xMDEsOTQuMTQ4IEw1Ljg1Nyw5NC4xMDEgQzUuMTM4LDkzLjk0NSAzLjA4NSw5My4zNjUgMi44ODEsOTEuODA5IEMyLjMxMyw4Ny40NjkgMS43MjcsODIuOTk2IDEuNzEzLDcwLjQyNSBDMS42OTksNTcuNzcxIDIuNjA0LDUwLjcxOCAyLjYxMyw1MC42NDggQzMuMzM4LDQ2LjQxNyA1LjQ0NSw0NS4zMSA1LjUzNSw0NS4yNjYgTDEyLjE2Myw0MS40MzkgTDEzLjAzMyw0MS4zMiBMMTkuNDc5LDM3LjU3OCBMMTkuNTEzLDM3LjI0NCBDMTkuNTI2LDM3LjEwNyAxOS42NDcsMzcuMDA4IDE5Ljc4NiwzNy4wMjEgQzE5LjkyMiwzNy4wMzQgMjAuMDIzLDM3LjE1NiAyMC4wMDksMzcuMjkzIEwxOS45NSwzNy44ODIgTDEzLjE5OCw0MS44MDEgTDEyLjMyOCw0MS45MTkgTDUuNzcyLDQ1LjcwNCBDNS43NDEsNDUuNzIgMy43ODIsNDYuNzcyIDMuMTA2LDUwLjcyMiBDMy4wOTksNTAuNzgyIDIuMTk4LDU3LjgwOCAyLjIxMiw3MC40MjQgQzIuMjI2LDgyLjk2MyAyLjgwOSw4Ny40MiAzLjM3Myw5MS43MjkgQzMuNDY0LDkyLjQyIDQuMDYyLDkyLjg4MyA0LjY4Miw5My4xODEgQzQuNTY2LDkyLjk4NCA0LjQ4Niw5Mi43NzYgNC40NDYsOTIuNTcyIEMzLjY2NSw4OC41ODggMy4yOTEsODQuMzcgMy4yNzYsNzEuMTczIEMzLjI2Miw1OC41MiA0LjE2Nyw1MS40NjYgNC4xNzYsNTEuMzk2IEM0LjkwMSw0Ny4xNjUgNy4wMDgsNDYuMDU5IDcuMDk4LDQ2LjAxNCBDNy4wOTQsNDYuMDE1IDgxLjU0MiwzLjAzNCA4MS45NDQsMi44MDIgTDgxLjk3MiwyLjc4NSBDODIuODc2LDIuMjQ3IDgzLjY5MiwyLjA5NyA4NC4zMzIsMi4zNTIgQzg0Ljg4NywyLjU3MyA4NS4yODEsMy4wODUgODUuNTA0LDMuODcyIEM4Ny41MTgsMTEgODYuOTY0LDM2LjA5MSA4NS43ODUsNDMuODU1IEM4NS4yNzgsNDcuMTk2IDg0LjIxLDQ5LjM3IDgyLjYxLDUwLjMxNyBMNy4zMzUsOTMuODY5IEM2Ljk5OSw5NC4wNjMgNi42NTgsOTQuMTYxIDYuMzE3LDk0LjE2MSBMNi4zMTcsOTQuMTYxIFogTTYuMTcsOTMuNjU0IEM2LjQ2Myw5My42OSA2Ljc3NCw5My42MTcgNy4wODUsOTMuNDM3IEw4Mi4zNTgsNDkuODg2IEM4NC4xODEsNDguODA4IDg0Ljk2LDQ1Ljk3MSA4NS4yOTIsNDMuNzggQzg2LjQ2NiwzNi4wNDkgODcuMDIzLDExLjA4NSA4NS4wMjQsNC4wMDggQzg0Ljg0NiwzLjM3NyA4NC41NTEsMi45NzYgODQuMTQ4LDIuODE2IEM4My42NjQsMi42MjMgODIuOTgyLDIuNzY0IDgyLjIyNywzLjIxMyBMODIuMTkzLDMuMjM0IEM4MS43OTEsMy40NjYgNy4zMzUsNDYuNDUyIDcuMzM1LDQ2LjQ1MiBDNy4zMDQsNDYuNDY5IDUuMzQ2LDQ3LjUyMSA0LjY2OSw1MS40NzEgQzQuNjYyLDUxLjUzIDMuNzYxLDU4LjU1NiAzLjc3NSw3MS4xNzMgQzMuNzksODQuMzI4IDQuMTYxLDg4LjUyNCA0LjkzNiw5Mi40NzYgQzUuMDI2LDkyLjkzNyA1LjQxMiw5My40NTkgNS45NzMsOTMuNjE1IEM2LjA4Nyw5My42NCA2LjE1OCw5My42NTIgNi4xNjksOTMuNjU0IEw2LjE3LDkzLjY1NCBMNi4xNyw5My42NTQgWiIgaWQ9IkZpbGwtMTIiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNy4zMTcsNjguOTgyIEM3LjgwNiw2OC43MDEgOC4yMDIsNjguOTI2IDguMjAyLDY5LjQ4NyBDOC4yMDIsNzAuMDQ3IDcuODA2LDcwLjczIDcuMzE3LDcxLjAxMiBDNi44MjksNzEuMjk0IDYuNDMzLDcxLjA2OSA2LjQzMyw3MC41MDggQzYuNDMzLDY5Ljk0OCA2LjgyOSw2OS4yNjUgNy4zMTcsNjguOTgyIiBpZD0iRmlsbC0xMyIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik02LjkyLDcxLjEzMyBDNi42MzEsNzEuMTMzIDYuNDMzLDcwLjkwNSA2LjQzMyw3MC41MDggQzYuNDMzLDY5Ljk0OCA2LjgyOSw2OS4yNjUgNy4zMTcsNjguOTgyIEM3LjQ2LDY4LjkgNy41OTUsNjguODYxIDcuNzE0LDY4Ljg2MSBDOC4wMDMsNjguODYxIDguMjAyLDY5LjA5IDguMjAyLDY5LjQ4NyBDOC4yMDIsNzAuMDQ3IDcuODA2LDcwLjczIDcuMzE3LDcxLjAxMiBDNy4xNzQsNzEuMDk0IDcuMDM5LDcxLjEzMyA2LjkyLDcxLjEzMyBNNy43MTQsNjguNjc0IEM3LjU1Nyw2OC42NzQgNy4zOTIsNjguNzIzIDcuMjI0LDY4LjgyMSBDNi42NzYsNjkuMTM4IDYuMjQ2LDY5Ljg3OSA2LjI0Niw3MC41MDggQzYuMjQ2LDcwLjk5NCA2LjUxNyw3MS4zMiA2LjkyLDcxLjMyIEM3LjA3OCw3MS4zMiA3LjI0Myw3MS4yNzEgNy40MTEsNzEuMTc0IEM3Ljk1OSw3MC44NTcgOC4zODksNzAuMTE3IDguMzg5LDY5LjQ4NyBDOC4zODksNjkuMDAxIDguMTE3LDY4LjY3NCA3LjcxNCw2OC42NzQiIGlkPSJGaWxsLTE0IiBmaWxsPSIjODA5N0EyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTYuOTIsNzAuOTQ3IEM2LjY0OSw3MC45NDcgNi42MjEsNzAuNjQgNi42MjEsNzAuNTA4IEM2LjYyMSw3MC4wMTcgNi45ODIsNjkuMzkyIDcuNDExLDY5LjE0NSBDNy41MjEsNjkuMDgyIDcuNjI1LDY5LjA0OSA3LjcxNCw2OS4wNDkgQzcuOTg2LDY5LjA0OSA4LjAxNSw2OS4zNTUgOC4wMTUsNjkuNDg3IEM4LjAxNSw2OS45NzggNy42NTIsNzAuNjAzIDcuMjI0LDcwLjg1MSBDNy4xMTUsNzAuOTE0IDcuMDEsNzAuOTQ3IDYuOTIsNzAuOTQ3IE03LjcxNCw2OC44NjEgQzcuNTk1LDY4Ljg2MSA3LjQ2LDY4LjkgNy4zMTcsNjguOTgyIEM2LjgyOSw2OS4yNjUgNi40MzMsNjkuOTQ4IDYuNDMzLDcwLjUwOCBDNi40MzMsNzAuOTA1IDYuNjMxLDcxLjEzMyA2LjkyLDcxLjEzMyBDNy4wMzksNzEuMTMzIDcuMTc0LDcxLjA5NCA3LjMxNyw3MS4wMTIgQzcuODA2LDcwLjczIDguMjAyLDcwLjA0NyA4LjIwMiw2OS40ODcgQzguMjAyLDY5LjA5IDguMDAzLDY4Ljg2MSA3LjcxNCw2OC44NjEiIGlkPSJGaWxsLTE1IiBmaWxsPSIjODA5N0EyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTcuNDQ0LDg1LjM1IEM3LjcwOCw4NS4xOTggNy45MjEsODUuMzE5IDcuOTIxLDg1LjYyMiBDNy45MjEsODUuOTI1IDcuNzA4LDg2LjI5MiA3LjQ0NCw4Ni40NDQgQzcuMTgxLDg2LjU5NyA2Ljk2Nyw4Ni40NzUgNi45NjcsODYuMTczIEM2Ljk2Nyw4NS44NzEgNy4xODEsODUuNTAyIDcuNDQ0LDg1LjM1IiBpZD0iRmlsbC0xNiIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik03LjIzLDg2LjUxIEM3LjA3NCw4Ni41MSA2Ljk2Nyw4Ni4zODcgNi45NjcsODYuMTczIEM2Ljk2Nyw4NS44NzEgNy4xODEsODUuNTAyIDcuNDQ0LDg1LjM1IEM3LjUyMSw4NS4zMDUgNy41OTQsODUuMjg0IDcuNjU4LDg1LjI4NCBDNy44MTQsODUuMjg0IDcuOTIxLDg1LjQwOCA3LjkyMSw4NS42MjIgQzcuOTIxLDg1LjkyNSA3LjcwOCw4Ni4yOTIgNy40NDQsODYuNDQ0IEM3LjM2Nyw4Ni40ODkgNy4yOTQsODYuNTEgNy4yMyw4Ni41MSBNNy42NTgsODUuMDk4IEM3LjU1OCw4NS4wOTggNy40NTUsODUuMTI3IDcuMzUxLDg1LjE4OCBDNy4wMzEsODUuMzczIDYuNzgxLDg1LjgwNiA2Ljc4MSw4Ni4xNzMgQzYuNzgxLDg2LjQ4MiA2Ljk2Niw4Ni42OTcgNy4yMyw4Ni42OTcgQzcuMzMsODYuNjk3IDcuNDMzLDg2LjY2NiA3LjUzOCw4Ni42MDcgQzcuODU4LDg2LjQyMiA4LjEwOCw4NS45ODkgOC4xMDgsODUuNjIyIEM4LjEwOCw4NS4zMTMgNy45MjMsODUuMDk4IDcuNjU4LDg1LjA5OCIgaWQ9IkZpbGwtMTciIGZpbGw9IiM4MDk3QTIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNy4yMyw4Ni4zMjIgTDcuMTU0LDg2LjE3MyBDNy4xNTQsODUuOTM4IDcuMzMzLDg1LjYyOSA3LjUzOCw4NS41MTIgTDcuNjU4LDg1LjQ3MSBMNy43MzQsODUuNjIyIEM3LjczNCw4NS44NTYgNy41NTUsODYuMTY0IDcuMzUxLDg2LjI4MiBMNy4yMyw4Ni4zMjIgTTcuNjU4LDg1LjI4NCBDNy41OTQsODUuMjg0IDcuNTIxLDg1LjMwNSA3LjQ0NCw4NS4zNSBDNy4xODEsODUuNTAyIDYuOTY3LDg1Ljg3MSA2Ljk2Nyw4Ni4xNzMgQzYuOTY3LDg2LjM4NyA3LjA3NCw4Ni41MSA3LjIzLDg2LjUxIEM3LjI5NCw4Ni41MSA3LjM2Nyw4Ni40ODkgNy40NDQsODYuNDQ0IEM3LjcwOCw4Ni4yOTIgNy45MjEsODUuOTI1IDcuOTIxLDg1LjYyMiBDNy45MjEsODUuNDA4IDcuODE0LDg1LjI4NCA3LjY1OCw4NS4yODQiIGlkPSJGaWxsLTE4IiBmaWxsPSIjODA5N0EyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTc3LjI3OCw3Ljc2OSBMNzcuMjc4LDUxLjQzNiBMMTAuMjA4LDkwLjE2IEwxMC4yMDgsNDYuNDkzIEw3Ny4yNzgsNy43NjkiIGlkPSJGaWxsLTE5IiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTEwLjA4Myw5MC4zNzUgTDEwLjA4Myw0Ni40MjEgTDEwLjE0Niw0Ni4zODUgTDc3LjQwMyw3LjU1NCBMNzcuNDAzLDUxLjUwOCBMNzcuMzQxLDUxLjU0NCBMMTAuMDgzLDkwLjM3NSBMMTAuMDgzLDkwLjM3NSBaIE0xMC4zMzMsNDYuNTY0IEwxMC4zMzMsODkuOTQ0IEw3Ny4xNTQsNTEuMzY1IEw3Ny4xNTQsNy45ODUgTDEwLjMzMyw0Ni41NjQgTDEwLjMzMyw0Ni41NjQgWiIgaWQ9IkZpbGwtMjAiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMjUuNzM3LDg4LjY0NyBMMTE4LjA5OCw5MS45ODEgTDExOC4wOTgsODQgTDEwNi42MzksODguNzEzIEwxMDYuNjM5LDk2Ljk4MiBMOTksMTAwLjMxNSBMMTEyLjM2OSwxMDMuOTYxIEwxMjUuNzM3LDg4LjY0NyIgaWQ9IkltcG9ydGVkLUxheWVycy1Db3B5LTIiIGZpbGw9IiM0NTVBNjQiIHNrZXRjaDp0eXBlPSJNU1NoYXBlR3JvdXAiPjwvcGF0aD4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+');
};

module.exports = RotateInstructions;

},{"./util.js":22}],17:[function(_dereq_,module,exports){
/*
 * Copyright 2015 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

var SensorSample = _dereq_('./sensor-sample.js');
var MathUtil = _dereq_('../math-util.js');
var Util = _dereq_('../util.js');

var DEBUG = false;

/**
 * An implementation of a simple complementary filter, which fuses gyroscope and
 * accelerometer data from the 'devicemotion' event.
 *
 * Accelerometer data is very noisy, but stable over the long term.
 * Gyroscope data is smooth, but tends to drift over the long term.
 *
 * This fusion is relatively simple:
 * 1. Get orientation estimates from accelerometer by applying a low-pass filter
 *    on that data.
 * 2. Get orientation estimates from gyroscope by integrating over time.
 * 3. Combine the two estimates, weighing (1) in the long term, but (2) for the
 *    short term.
 */
function ComplementaryFilter(kFilter) {
  this.kFilter = kFilter;

  // Raw sensor measurements.
  this.currentAccelMeasurement = new SensorSample();
  this.currentGyroMeasurement = new SensorSample();
  this.previousGyroMeasurement = new SensorSample();

  // Set default look direction to be in the correct direction.
  if (Util.isIOS()) {
    this.filterQ = new MathUtil.Quaternion(-1, 0, 0, 1);
  } else {
    this.filterQ = new MathUtil.Quaternion(1, 0, 0, 1);
  }
  this.previousFilterQ = new MathUtil.Quaternion();
  this.previousFilterQ.copy(this.filterQ);

  // Orientation based on the accelerometer.
  this.accelQ = new MathUtil.Quaternion();
  // Whether or not the orientation has been initialized.
  this.isOrientationInitialized = false;
  // Running estimate of gravity based on the current orientation.
  this.estimatedGravity = new MathUtil.Vector3();
  // Measured gravity based on accelerometer.
  this.measuredGravity = new MathUtil.Vector3();

  // Debug only quaternion of gyro-based orientation.
  this.gyroIntegralQ = new MathUtil.Quaternion();
}

ComplementaryFilter.prototype.addAccelMeasurement = function(vector, timestampS) {
  this.currentAccelMeasurement.set(vector, timestampS);
};

ComplementaryFilter.prototype.addGyroMeasurement = function(vector, timestampS) {
  this.currentGyroMeasurement.set(vector, timestampS);

  var deltaT = timestampS - this.previousGyroMeasurement.timestampS;
  if (Util.isTimestampDeltaValid(deltaT)) {
    this.run_();
  }

  this.previousGyroMeasurement.copy(this.currentGyroMeasurement);
};

ComplementaryFilter.prototype.run_ = function() {

  if (!this.isOrientationInitialized) {
    this.accelQ = this.accelToQuaternion_(this.currentAccelMeasurement.sample);
    this.previousFilterQ.copy(this.accelQ);
    this.isOrientationInitialized = true;
    return;
  }

  var deltaT = this.currentGyroMeasurement.timestampS -
      this.previousGyroMeasurement.timestampS;

  // Convert gyro rotation vector to a quaternion delta.
  var gyroDeltaQ = this.gyroToQuaternionDelta_(this.currentGyroMeasurement.sample, deltaT);
  this.gyroIntegralQ.multiply(gyroDeltaQ);

  // filter_1 = K * (filter_0 + gyro * dT) + (1 - K) * accel.
  this.filterQ.copy(this.previousFilterQ);
  this.filterQ.multiply(gyroDeltaQ);

  // Calculate the delta between the current estimated gravity and the real
  // gravity vector from accelerometer.
  var invFilterQ = new MathUtil.Quaternion();
  invFilterQ.copy(this.filterQ);
  invFilterQ.inverse();

  this.estimatedGravity.set(0, 0, -1);
  this.estimatedGravity.applyQuaternion(invFilterQ);
  this.estimatedGravity.normalize();

  this.measuredGravity.copy(this.currentAccelMeasurement.sample);
  this.measuredGravity.normalize();

  // Compare estimated gravity with measured gravity, get the delta quaternion
  // between the two.
  var deltaQ = new MathUtil.Quaternion();
  deltaQ.setFromUnitVectors(this.estimatedGravity, this.measuredGravity);
  deltaQ.inverse();

  if (DEBUG) {
    console.log('Delta: %d deg, G_est: (%s, %s, %s), G_meas: (%s, %s, %s)',
                MathUtil.radToDeg * Util.getQuaternionAngle(deltaQ),
                (this.estimatedGravity.x).toFixed(1),
                (this.estimatedGravity.y).toFixed(1),
                (this.estimatedGravity.z).toFixed(1),
                (this.measuredGravity.x).toFixed(1),
                (this.measuredGravity.y).toFixed(1),
                (this.measuredGravity.z).toFixed(1));
  }

  // Calculate the SLERP target: current orientation plus the measured-estimated
  // quaternion delta.
  var targetQ = new MathUtil.Quaternion();
  targetQ.copy(this.filterQ);
  targetQ.multiply(deltaQ);

  // SLERP factor: 0 is pure gyro, 1 is pure accel.
  this.filterQ.slerp(targetQ, 1 - this.kFilter);

  this.previousFilterQ.copy(this.filterQ);
};

ComplementaryFilter.prototype.getOrientation = function() {
  return this.filterQ;
};

ComplementaryFilter.prototype.accelToQuaternion_ = function(accel) {
  var normAccel = new MathUtil.Vector3();
  normAccel.copy(accel);
  normAccel.normalize();
  var quat = new MathUtil.Quaternion();
  quat.setFromUnitVectors(new MathUtil.Vector3(0, 0, -1), normAccel);
  quat.inverse();
  return quat;
};

ComplementaryFilter.prototype.gyroToQuaternionDelta_ = function(gyro, dt) {
  // Extract axis and angle from the gyroscope data.
  var quat = new MathUtil.Quaternion();
  var axis = new MathUtil.Vector3();
  axis.copy(gyro);
  axis.normalize();
  quat.setFromAxisAngle(axis, gyro.length() * dt);
  return quat;
};


module.exports = ComplementaryFilter;

},{"../math-util.js":14,"../util.js":22,"./sensor-sample.js":20}],18:[function(_dereq_,module,exports){
/*
 * Copyright 2015 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ComplementaryFilter = _dereq_('./complementary-filter.js');
var PosePredictor = _dereq_('./pose-predictor.js');
var TouchPanner = _dereq_('../touch-panner.js');
var MathUtil = _dereq_('../math-util.js');
var Util = _dereq_('../util.js');

/**
 * The pose sensor, implemented using DeviceMotion APIs.
 */
function FusionPoseSensor() {
  this.deviceId = 'webvr-polyfill:fused';
  this.deviceName = 'VR Position Device (webvr-polyfill:fused)';

  this.accelerometer = new MathUtil.Vector3();
  this.gyroscope = new MathUtil.Vector3();

  window.addEventListener('devicemotion', this.onDeviceMotionChange_.bind(this));
  window.addEventListener('orientationchange', this.onScreenOrientationChange_.bind(this));

  this.filter = new ComplementaryFilter(WebVRConfig.K_FILTER);
  this.posePredictor = new PosePredictor(WebVRConfig.PREDICTION_TIME_S);
  this.touchPanner = new TouchPanner();

  this.filterToWorldQ = new MathUtil.Quaternion();

  // Set the filter to world transform, depending on OS.
  if (Util.isIOS()) {
    this.filterToWorldQ.setFromAxisAngle(new MathUtil.Vector3(1, 0, 0), Math.PI / 2);
  } else {
    this.filterToWorldQ.setFromAxisAngle(new MathUtil.Vector3(1, 0, 0), -Math.PI / 2);
  }

  this.inverseWorldToScreenQ = new MathUtil.Quaternion();
  this.worldToScreenQ = new MathUtil.Quaternion();
  this.originalPoseAdjustQ = new MathUtil.Quaternion();
  this.originalPoseAdjustQ.setFromAxisAngle(new MathUtil.Vector3(0, 0, 1),
                                           -window.orientation * Math.PI / 180);

  this.setScreenTransform_();
  // Adjust this filter for being in landscape mode.
  if (Util.isLandscapeMode()) {
    this.filterToWorldQ.multiply(this.inverseWorldToScreenQ);
  }

  // Keep track of a reset transform for resetSensor.
  this.resetQ = new MathUtil.Quaternion();

  this.isFirefoxAndroid = Util.isFirefoxAndroid();
  this.isIOS = Util.isIOS();

  this.orientationOut_ = new Float32Array(4);
}

FusionPoseSensor.prototype.getPosition = function() {
  // This PoseSensor doesn't support position
  return null;
};

FusionPoseSensor.prototype.getOrientation = function() {
  // Convert from filter space to the the same system used by the
  // deviceorientation event.
  var orientation = this.filter.getOrientation();

  // Predict orientation.
  this.predictedQ = this.posePredictor.getPrediction(orientation, this.gyroscope, this.previousTimestampS);

  // Convert to THREE coordinate system: -Z forward, Y up, X right.
  var out = new MathUtil.Quaternion();
  out.copy(this.filterToWorldQ);
  out.multiply(this.resetQ);
  if (!WebVRConfig.TOUCH_PANNER_DISABLED) {
    out.multiply(this.touchPanner.getOrientation());
  }
  out.multiply(this.predictedQ);
  out.multiply(this.worldToScreenQ);

  // Handle the yaw-only case.
  if (WebVRConfig.YAW_ONLY) {
    // Make a quaternion that only turns around the Y-axis.
    out.x = 0;
    out.z = 0;
    out.normalize();
  }

  this.orientationOut_[0] = out.x;
  this.orientationOut_[1] = out.y;
  this.orientationOut_[2] = out.z;
  this.orientationOut_[3] = out.w;
  return this.orientationOut_;
};

FusionPoseSensor.prototype.resetPose = function() {
  // Reduce to inverted yaw-only.
  this.resetQ.copy(this.filter.getOrientation());
  this.resetQ.x = 0;
  this.resetQ.y = 0;
  this.resetQ.z *= -1;
  this.resetQ.normalize();

  // Take into account extra transformations in landscape mode.
  if (Util.isLandscapeMode()) {
    this.resetQ.multiply(this.inverseWorldToScreenQ);
  }

  // Take into account original pose.
  this.resetQ.multiply(this.originalPoseAdjustQ);

  if (!WebVRConfig.TOUCH_PANNER_DISABLED) {
    this.touchPanner.resetSensor();
  }
};

FusionPoseSensor.prototype.onDeviceMotionChange_ = function(deviceMotion) {
  var accGravity = deviceMotion.accelerationIncludingGravity;
  var rotRate = deviceMotion.rotationRate;
  var timestampS = deviceMotion.timeStamp / 1000;

  // Firefox Android timeStamp returns one thousandth of a millisecond.
  if (this.isFirefoxAndroid) {
    timestampS /= 1000;
  }

  var deltaS = timestampS - this.previousTimestampS;
  if (deltaS <= Util.MIN_TIMESTEP || deltaS > Util.MAX_TIMESTEP) {
    console.warn('Invalid timestamps detected. Time step between successive ' +
                 'gyroscope sensor samples is very small or not monotonic');
    this.previousTimestampS = timestampS;
    return;
  }
  this.accelerometer.set(-accGravity.x, -accGravity.y, -accGravity.z);
  this.gyroscope.set(rotRate.alpha, rotRate.beta, rotRate.gamma);

  // With iOS and Firefox Android, rotationRate is reported in degrees,
  // so we first convert to radians.
  if (this.isIOS || this.isFirefoxAndroid) {
    this.gyroscope.multiplyScalar(Math.PI / 180);
  }

  this.filter.addAccelMeasurement(this.accelerometer, timestampS);
  this.filter.addGyroMeasurement(this.gyroscope, timestampS);

  this.previousTimestampS = timestampS;
};

FusionPoseSensor.prototype.onScreenOrientationChange_ =
    function(screenOrientation) {
  this.setScreenTransform_();
};

FusionPoseSensor.prototype.setScreenTransform_ = function() {
  this.worldToScreenQ.set(0, 0, 0, 1);
  switch (window.orientation) {
    case 0:
      break;
    case 90:
      this.worldToScreenQ.setFromAxisAngle(new MathUtil.Vector3(0, 0, 1), -Math.PI / 2);
      break;
    case -90:
      this.worldToScreenQ.setFromAxisAngle(new MathUtil.Vector3(0, 0, 1), Math.PI / 2);
      break;
    case 180:
      // TODO.
      break;
  }
  this.inverseWorldToScreenQ.copy(this.worldToScreenQ);
  this.inverseWorldToScreenQ.inverse();
};

module.exports = FusionPoseSensor;

},{"../math-util.js":14,"../touch-panner.js":21,"../util.js":22,"./complementary-filter.js":17,"./pose-predictor.js":19}],19:[function(_dereq_,module,exports){
/*
 * Copyright 2015 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var MathUtil = _dereq_('../math-util.js');
var DEBUG = false;

/**
 * Given an orientation and the gyroscope data, predicts the future orientation
 * of the head. This makes rendering appear faster.
 *
 * Also see: http://msl.cs.uiuc.edu/~lavalle/papers/LavYerKatAnt14.pdf
 *
 * @param {Number} predictionTimeS time from head movement to the appearance of
 * the corresponding image.
 */
function PosePredictor(predictionTimeS) {
  this.predictionTimeS = predictionTimeS;

  // The quaternion corresponding to the previous state.
  this.previousQ = new MathUtil.Quaternion();
  // Previous time a prediction occurred.
  this.previousTimestampS = null;

  // The delta quaternion that adjusts the current pose.
  this.deltaQ = new MathUtil.Quaternion();
  // The output quaternion.
  this.outQ = new MathUtil.Quaternion();
}

PosePredictor.prototype.getPrediction = function(currentQ, gyro, timestampS) {
  if (!this.previousTimestampS) {
    this.previousQ.copy(currentQ);
    this.previousTimestampS = timestampS;
    return currentQ;
  }

  // Calculate axis and angle based on gyroscope rotation rate data.
  var axis = new MathUtil.Vector3();
  axis.copy(gyro);
  axis.normalize();

  var angularSpeed = gyro.length();

  // If we're rotating slowly, don't do prediction.
  if (angularSpeed < MathUtil.degToRad * 20) {
    if (DEBUG) {
      console.log('Moving slowly, at %s deg/s: no prediction',
                  (MathUtil.radToDeg * angularSpeed).toFixed(1));
    }
    this.outQ.copy(currentQ);
    this.previousQ.copy(currentQ);
    return this.outQ;
  }

  // Get the predicted angle based on the time delta and latency.
  var deltaT = timestampS - this.previousTimestampS;
  var predictAngle = angularSpeed * this.predictionTimeS;

  this.deltaQ.setFromAxisAngle(axis, predictAngle);
  this.outQ.copy(this.previousQ);
  this.outQ.multiply(this.deltaQ);

  this.previousQ.copy(currentQ);

  return this.outQ;
};


module.exports = PosePredictor;

},{"../math-util.js":14}],20:[function(_dereq_,module,exports){
function SensorSample(sample, timestampS) {
  this.set(sample, timestampS);
};

SensorSample.prototype.set = function(sample, timestampS) {
  this.sample = sample;
  this.timestampS = timestampS;
};

SensorSample.prototype.copy = function(sensorSample) {
  this.set(sensorSample.sample, sensorSample.timestampS);
};

module.exports = SensorSample;

},{}],21:[function(_dereq_,module,exports){
/*
 * Copyright 2015 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var MathUtil = _dereq_('./math-util.js');
var Util = _dereq_('./util.js');

var ROTATE_SPEED = 0.5;
/**
 * Provides a quaternion responsible for pre-panning the scene before further
 * transformations due to device sensors.
 */
function TouchPanner() {
  window.addEventListener('touchstart', this.onTouchStart_.bind(this));
  window.addEventListener('touchmove', this.onTouchMove_.bind(this));
  window.addEventListener('touchend', this.onTouchEnd_.bind(this));

  this.isTouching = false;
  this.rotateStart = new MathUtil.Vector2();
  this.rotateEnd = new MathUtil.Vector2();
  this.rotateDelta = new MathUtil.Vector2();

  this.theta = 0;
  this.orientation = new MathUtil.Quaternion();
}

TouchPanner.prototype.getOrientation = function() {
  this.orientation.setFromEulerXYZ(0, 0, this.theta);
  return this.orientation;
};

TouchPanner.prototype.resetSensor = function() {
  this.theta = 0;
};

TouchPanner.prototype.onTouchStart_ = function(e) {
  // Only respond if there is exactly one touch.
  if (e.touches.length != 1) {
    return;
  }
  this.rotateStart.set(e.touches[0].pageX, e.touches[0].pageY);
  this.isTouching = true;
};

TouchPanner.prototype.onTouchMove_ = function(e) {
  if (!this.isTouching) {
    return;
  }
  this.rotateEnd.set(e.touches[0].pageX, e.touches[0].pageY);
  this.rotateDelta.subVectors(this.rotateEnd, this.rotateStart);
  this.rotateStart.copy(this.rotateEnd);

  // On iOS, direction is inverted.
  if (Util.isIOS()) {
    this.rotateDelta.x *= -1;
  }

  var element = document.body;
  this.theta += 2 * Math.PI * this.rotateDelta.x / element.clientWidth * ROTATE_SPEED;
};

TouchPanner.prototype.onTouchEnd_ = function(e) {
  this.isTouching = false;
};

module.exports = TouchPanner;

},{"./math-util.js":14,"./util.js":22}],22:[function(_dereq_,module,exports){
/*
 * Copyright 2015 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

var objectAssign = _dereq_('object-assign');

var Util = window.Util || {};

Util.MIN_TIMESTEP = 0.001;
Util.MAX_TIMESTEP = 1;

Util.base64 = function(mimeType, base64) {
  return 'data:' + mimeType + ';base64,' + base64;
};

Util.clamp = function(value, min, max) {
  return Math.min(Math.max(min, value), max);
};

Util.lerp = function(a, b, t) {
  return a + ((b - a) * t);
};

Util.isIOS = (function() {
  var isIOS = /iPad|iPhone|iPod/.test(navigator.platform);
  return function() {
    return isIOS;
  };
})();

Util.isSafari = (function() {
  var isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);
  return function() {
    return isSafari;
  };
})();

Util.isFirefoxAndroid = (function() {
  var isFirefoxAndroid = navigator.userAgent.indexOf('Firefox') !== -1 &&
      navigator.userAgent.indexOf('Android') !== -1;
  return function() {
    return isFirefoxAndroid;
  };
})();

Util.isLandscapeMode = function() {
  return (window.orientation == 90 || window.orientation == -90);
};

// Helper method to validate the time steps of sensor timestamps.
Util.isTimestampDeltaValid = function(timestampDeltaS) {
  if (isNaN(timestampDeltaS)) {
    return false;
  }
  if (timestampDeltaS <= Util.MIN_TIMESTEP) {
    return false;
  }
  if (timestampDeltaS > Util.MAX_TIMESTEP) {
    return false;
  }
  return true;
};

Util.getScreenWidth = function() {
  return Math.max(window.screen.width, window.screen.height) *
      window.devicePixelRatio;
};

Util.getScreenHeight = function() {
  return Math.min(window.screen.width, window.screen.height) *
      window.devicePixelRatio;
};

Util.requestFullscreen = function(element) {
  if (element.requestFullscreen) {
    element.requestFullscreen();
  } else if (element.webkitRequestFullscreen) {
    element.webkitRequestFullscreen();
  } else if (element.mozRequestFullScreen) {
    element.mozRequestFullScreen();
  } else if (element.msRequestFullscreen) {
    element.msRequestFullscreen();
  } else {
    return false;
  }

  return true;
};

Util.exitFullscreen = function() {
  if (document.exitFullscreen) {
    document.exitFullscreen();
  } else if (document.webkitExitFullscreen) {
    document.webkitExitFullscreen();
  } else if (document.mozCancelFullScreen) {
    document.mozCancelFullScreen();
  } else if (document.msExitFullscreen) {
    document.msExitFullscreen();
  } else {
    return false;
  }

  return true;
};

Util.getFullscreenElement = function() {
  return document.fullscreenElement ||
      document.webkitFullscreenElement ||
      document.mozFullScreenElement ||
      document.msFullscreenElement;
};

Util.linkProgram = function(gl, vertexSource, fragmentSource, attribLocationMap) {
  // No error checking for brevity.
  var vertexShader = gl.createShader(gl.VERTEX_SHADER);
  gl.shaderSource(vertexShader, vertexSource);
  gl.compileShader(vertexShader);

  var fragmentShader = gl.createShader(gl.FRAGMENT_SHADER);
  gl.shaderSource(fragmentShader, fragmentSource);
  gl.compileShader(fragmentShader);

  var program = gl.createProgram();
  gl.attachShader(program, vertexShader);
  gl.attachShader(program, fragmentShader);

  for (var attribName in attribLocationMap)
    gl.bindAttribLocation(program, attribLocationMap[attribName], attribName);

  gl.linkProgram(program);

  gl.deleteShader(vertexShader);
  gl.deleteShader(fragmentShader);

  return program;
};

Util.getProgramUniforms = function(gl, program) {
  var uniforms = {};
  var uniformCount = gl.getProgramParameter(program, gl.ACTIVE_UNIFORMS);
  var uniformName = '';
  for (var i = 0; i < uniformCount; i++) {
    var uniformInfo = gl.getActiveUniform(program, i);
    uniformName = uniformInfo.name.replace('[0]', '');
    uniforms[uniformName] = gl.getUniformLocation(program, uniformName);
  }
  return uniforms;
};

Util.orthoMatrix = function (out, left, right, bottom, top, near, far) {
  var lr = 1 / (left - right),
      bt = 1 / (bottom - top),
      nf = 1 / (near - far);
  out[0] = -2 * lr;
  out[1] = 0;
  out[2] = 0;
  out[3] = 0;
  out[4] = 0;
  out[5] = -2 * bt;
  out[6] = 0;
  out[7] = 0;
  out[8] = 0;
  out[9] = 0;
  out[10] = 2 * nf;
  out[11] = 0;
  out[12] = (left + right) * lr;
  out[13] = (top + bottom) * bt;
  out[14] = (far + near) * nf;
  out[15] = 1;
  return out;
};

Util.isMobile = function() {
  var check = false;
  (function(a){if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4)))check = true})(navigator.userAgent||navigator.vendor||window.opera);
  return check;
};

Util.extend = objectAssign;

Util.safariCssSizeWorkaround = function(canvas) {
  // TODO(smus): Remove this workaround when Safari for iOS is fixed.
  // iOS only workaround (for https://bugs.webkit.org/show_bug.cgi?id=152556).
  //
  // "To the last I grapple with thee;
  //  from hell's heart I stab at thee;
  //  for hate's sake I spit my last breath at thee."
  // -- Moby Dick, by Herman Melville
  if (Util.isIOS()) {
    var width = canvas.style.width;
    var height = canvas.style.height;
    canvas.style.width = (parseInt(width) + 1) + 'px';
    canvas.style.height = (parseInt(height)) + 'px';
    console.log('Resetting width to...', width);
    setTimeout(function() {
      console.log('Done. Width is now', width);
      canvas.style.width = width;
      canvas.style.height = height;
    }, 100);
  }

  // Debug only.
  window.Util = Util;
  window.canvas = canvas;
};

module.exports = Util;

},{"object-assign":1}],23:[function(_dereq_,module,exports){
/*
 * Copyright 2015 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

var Emitter = _dereq_('./emitter.js');
var Util = _dereq_('./util.js');
var DeviceInfo = _dereq_('./device-info.js');

var DEFAULT_VIEWER = 'CardboardV1';
var VIEWER_KEY = 'WEBVR_CARDBOARD_VIEWER';
var CLASS_NAME = 'webvr-polyfill-viewer-selector';

/**
 * Creates a viewer selector with the options specified. Supports being shown
 * and hidden. Generates events when viewer parameters change. Also supports
 * saving the currently selected index in localStorage.
 */
function ViewerSelector() {
  // Try to load the selected key from local storage. If none exists, use the
  // default key.
  try {
    this.selectedKey = localStorage.getItem(VIEWER_KEY) || DEFAULT_VIEWER;
  } catch (error) {
    console.error('Failed to load viewer profile: %s', error);
  }
  this.dialog = this.createDialog_(DeviceInfo.Viewers);
  this.root = null;
}
ViewerSelector.prototype = new Emitter();

ViewerSelector.prototype.show = function(root) {
  this.root = root;

  root.appendChild(this.dialog);
  //console.log('ViewerSelector.show');

  // Ensure the currently selected item is checked.
  var selected = this.dialog.querySelector('#' + this.selectedKey);
  selected.checked = true;

  // Show the UI.
  this.dialog.style.display = 'block';
};

ViewerSelector.prototype.hide = function() {
  if (this.root && this.root.contains(this.dialog)) {
    this.root.removeChild(this.dialog);
  }
  //console.log('ViewerSelector.hide');
  this.dialog.style.display = 'none';
};

ViewerSelector.prototype.getCurrentViewer = function() {
  return DeviceInfo.Viewers[this.selectedKey];
};

ViewerSelector.prototype.getSelectedKey_ = function() {
  var input = this.dialog.querySelector('input[name=field]:checked');
  if (input) {
    return input.id;
  }
  return null;
};

ViewerSelector.prototype.onSave_ = function() {
  this.selectedKey = this.getSelectedKey_();
  if (!this.selectedKey || !DeviceInfo.Viewers[this.selectedKey]) {
    console.error('ViewerSelector.onSave_: this should never happen!');
    return;
  }

  this.emit('change', DeviceInfo.Viewers[this.selectedKey]);

  // Attempt to save the viewer profile, but fails in private mode.
  try {
    localStorage.setItem(VIEWER_KEY, this.selectedKey);
  } catch(error) {
    console.error('Failed to save viewer profile: %s', error);
  }
  this.hide();
};

/**
 * Creates the dialog.
 */
ViewerSelector.prototype.createDialog_ = function(options) {
  var container = document.createElement('div');
  container.classList.add(CLASS_NAME);
  container.style.display = 'none';
  // Create an overlay that dims the background, and which goes away when you
  // tap it.
  var overlay = document.createElement('div');
  var s = overlay.style;
  s.position = 'fixed';
  s.left = 0;
  s.top = 0;
  s.width = '100%';
  s.height = '100%';
  s.background = 'rgba(0, 0, 0, 0.3)';
  overlay.addEventListener('click', this.hide.bind(this));

  var width = 280;
  var dialog = document.createElement('div');
  var s = dialog.style;
  s.boxSizing = 'border-box';
  s.position = 'fixed';
  s.top = '24px';
  s.left = '50%';
  s.marginLeft = (-width/2) + 'px';
  s.width = width + 'px';
  s.padding = '24px';
  s.overflow = 'hidden';
  s.background = '#fafafa';
  s.fontFamily = "'Roboto', sans-serif";
  s.boxShadow = '0px 5px 20px #666';

  dialog.appendChild(this.createH1_('Select your viewer'));
  for (var id in options) {
    dialog.appendChild(this.createChoice_(id, options[id].label));
  }
  dialog.appendChild(this.createButton_('Save', this.onSave_.bind(this)));

  container.appendChild(overlay);
  container.appendChild(dialog);

  return container;
};

ViewerSelector.prototype.createH1_ = function(name) {
  var h1 = document.createElement('h1');
  var s = h1.style;
  s.color = 'black';
  s.fontSize = '20px';
  s.fontWeight = 'bold';
  s.marginTop = 0;
  s.marginBottom = '24px';
  h1.innerHTML = name;
  return h1;
};

ViewerSelector.prototype.createChoice_ = function(id, name) {
  /*
  <div class="choice">
  <input id="v1" type="radio" name="field" value="v1">
  <label for="v1">Cardboard V1</label>
  </div>
  */
  var div = document.createElement('div');
  div.style.marginTop = '8px';
  div.style.color = 'black';

  var input = document.createElement('input');
  input.style.fontSize = '30px';
  input.setAttribute('id', id);
  input.setAttribute('type', 'radio');
  input.setAttribute('value', id);
  input.setAttribute('name', 'field');

  var label = document.createElement('label');
  label.style.marginLeft = '4px';
  label.setAttribute('for', id);
  label.innerHTML = name;

  div.appendChild(input);
  div.appendChild(label);

  return div;
};

ViewerSelector.prototype.createButton_ = function(label, onclick) {
  var button = document.createElement('button');
  button.innerHTML = label;
  var s = button.style;
  s.float = 'right';
  s.textTransform = 'uppercase';
  s.color = '#1094f7';
  s.fontSize = '14px';
  s.letterSpacing = 0;
  s.border = 0;
  s.background = 'none';
  s.marginTop = '16px';

  button.addEventListener('click', onclick);

  return button;
};

module.exports = ViewerSelector;

},{"./device-info.js":7,"./emitter.js":12,"./util.js":22}],24:[function(_dereq_,module,exports){
/*
 * Copyright 2015 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

var Util = _dereq_('./util.js');

/**
 * Android and iOS compatible wakelock implementation.
 *
 * Refactored thanks to dkovalev@.
 */
function AndroidWakeLock() {
  var video = document.createElement('video');

  video.addEventListener('ended', function() {
    video.play();
  });

  this.request = function() {
    if (video.paused) {
      // Base64 version of videos_src/no-sleep-120s.mp4.
      video.src = Util.base64('video/mp4', 'AAAAGGZ0eXBpc29tAAAAAG1wNDFhdmMxAAAIA21vb3YAAABsbXZoZAAAAADSa9v60mvb+gABX5AAlw/gAAEAAAEAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAdkdHJhawAAAFx0a2hkAAAAAdJr2/rSa9v6AAAAAQAAAAAAlw/gAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAQAAAAHAAAAAAAJGVkdHMAAAAcZWxzdAAAAAAAAAABAJcP4AAAAAAAAQAAAAAG3G1kaWEAAAAgbWRoZAAAAADSa9v60mvb+gAPQkAGjneAFccAAAAAAC1oZGxyAAAAAAAAAAB2aWRlAAAAAAAAAAAAAAAAVmlkZW9IYW5kbGVyAAAABodtaW5mAAAAFHZtaGQAAAABAAAAAAAAAAAAAAAkZGluZgAAABxkcmVmAAAAAAAAAAEAAAAMdXJsIAAAAAEAAAZHc3RibAAAAJdzdHNkAAAAAAAAAAEAAACHYXZjMQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAMABwASAAAAEgAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABj//wAAADFhdmNDAWQAC//hABlnZAALrNlfllw4QAAAAwBAAAADAKPFCmWAAQAFaOvssiwAAAAYc3R0cwAAAAAAAAABAAAAbgAPQkAAAAAUc3RzcwAAAAAAAAABAAAAAQAAA4BjdHRzAAAAAAAAAG4AAAABAD0JAAAAAAEAehIAAAAAAQA9CQAAAAABAAAAAAAAAAEAD0JAAAAAAQBMS0AAAAABAB6EgAAAAAEAAAAAAAAAAQAPQkAAAAABAExLQAAAAAEAHoSAAAAAAQAAAAAAAAABAA9CQAAAAAEATEtAAAAAAQAehIAAAAABAAAAAAAAAAEAD0JAAAAAAQBMS0AAAAABAB6EgAAAAAEAAAAAAAAAAQAPQkAAAAABAExLQAAAAAEAHoSAAAAAAQAAAAAAAAABAA9CQAAAAAEATEtAAAAAAQAehIAAAAABAAAAAAAAAAEAD0JAAAAAAQBMS0AAAAABAB6EgAAAAAEAAAAAAAAAAQAPQkAAAAABAExLQAAAAAEAHoSAAAAAAQAAAAAAAAABAA9CQAAAAAEATEtAAAAAAQAehIAAAAABAAAAAAAAAAEAD0JAAAAAAQBMS0AAAAABAB6EgAAAAAEAAAAAAAAAAQAPQkAAAAABAExLQAAAAAEAHoSAAAAAAQAAAAAAAAABAA9CQAAAAAEATEtAAAAAAQAehIAAAAABAAAAAAAAAAEAD0JAAAAAAQBMS0AAAAABAB6EgAAAAAEAAAAAAAAAAQAPQkAAAAABAExLQAAAAAEAHoSAAAAAAQAAAAAAAAABAA9CQAAAAAEATEtAAAAAAQAehIAAAAABAAAAAAAAAAEAD0JAAAAAAQBMS0AAAAABAB6EgAAAAAEAAAAAAAAAAQAPQkAAAAABAExLQAAAAAEAHoSAAAAAAQAAAAAAAAABAA9CQAAAAAEATEtAAAAAAQAehIAAAAABAAAAAAAAAAEAD0JAAAAAAQBMS0AAAAABAB6EgAAAAAEAAAAAAAAAAQAPQkAAAAABAExLQAAAAAEAHoSAAAAAAQAAAAAAAAABAA9CQAAAAAEATEtAAAAAAQAehIAAAAABAAAAAAAAAAEAD0JAAAAAAQBMS0AAAAABAB6EgAAAAAEAAAAAAAAAAQAPQkAAAAABAExLQAAAAAEAHoSAAAAAAQAAAAAAAAABAA9CQAAAAAEATEtAAAAAAQAehIAAAAABAAAAAAAAAAEAD0JAAAAAAQBMS0AAAAABAB6EgAAAAAEAAAAAAAAAAQAPQkAAAAABAExLQAAAAAEAHoSAAAAAAQAAAAAAAAABAA9CQAAAAAEALcbAAAAAHHN0c2MAAAAAAAAAAQAAAAEAAABuAAAAAQAAAcxzdHN6AAAAAAAAAAAAAABuAAADCQAAABgAAAAOAAAADgAAAAwAAAASAAAADgAAAAwAAAAMAAAAEgAAAA4AAAAMAAAADAAAABIAAAAOAAAADAAAAAwAAAASAAAADgAAAAwAAAAMAAAAEgAAAA4AAAAMAAAADAAAABIAAAAOAAAADAAAAAwAAAASAAAADgAAAAwAAAAMAAAAEgAAAA4AAAAMAAAADAAAABIAAAAOAAAADAAAAAwAAAASAAAADgAAAAwAAAAMAAAAEgAAAA4AAAAMAAAADAAAABIAAAAOAAAADAAAAAwAAAASAAAADgAAAAwAAAAMAAAAEgAAAA4AAAAMAAAADAAAABIAAAAOAAAADAAAAAwAAAASAAAADgAAAAwAAAAMAAAAEgAAAA4AAAAMAAAADAAAABIAAAAOAAAADAAAAAwAAAASAAAADgAAAAwAAAAMAAAAEgAAAA4AAAAMAAAADAAAABIAAAAOAAAADAAAAAwAAAASAAAADgAAAAwAAAAMAAAAEgAAAA4AAAAMAAAADAAAABIAAAAOAAAADAAAAAwAAAASAAAADgAAAAwAAAAMAAAAEgAAAA4AAAAMAAAADAAAABMAAAAUc3RjbwAAAAAAAAABAAAIKwAAACt1ZHRhAAAAI6llbmMAFwAAdmxjIDIuMi4xIHN0cmVhbSBvdXRwdXQAAAAId2lkZQAACRRtZGF0AAACrgX//6vcRem95tlIt5Ys2CDZI+7veDI2NCAtIGNvcmUgMTQyIC0gSC4yNjQvTVBFRy00IEFWQyBjb2RlYyAtIENvcHlsZWZ0IDIwMDMtMjAxNCAtIGh0dHA6Ly93d3cudmlkZW9sYW4ub3JnL3gyNjQuaHRtbCAtIG9wdGlvbnM6IGNhYmFjPTEgcmVmPTMgZGVibG9jaz0xOjA6MCBhbmFseXNlPTB4MzoweDEzIG1lPWhleCBzdWJtZT03IHBzeT0xIHBzeV9yZD0xLjAwOjAuMDAgbWl4ZWRfcmVmPTEgbWVfcmFuZ2U9MTYgY2hyb21hX21lPTEgdHJlbGxpcz0xIDh4OGRjdD0xIGNxbT0wIGRlYWR6b25lPTIxLDExIGZhc3RfcHNraXA9MSBjaHJvbWFfcXBfb2Zmc2V0PS0yIHRocmVhZHM9MTIgbG9va2FoZWFkX3RocmVhZHM9MSBzbGljZWRfdGhyZWFkcz0wIG5yPTAgZGVjaW1hdGU9MSBpbnRlcmxhY2VkPTAgYmx1cmF5X2NvbXBhdD0wIGNvbnN0cmFpbmVkX2ludHJhPTAgYmZyYW1lcz0zIGJfcHlyYW1pZD0yIGJfYWRhcHQ9MSBiX2JpYXM9MCBkaXJlY3Q9MSB3ZWlnaHRiPTEgb3Blbl9nb3A9MCB3ZWlnaHRwPTIga2V5aW50PTI1MCBrZXlpbnRfbWluPTEgc2NlbmVjdXQ9NDAgaW50cmFfcmVmcmVzaD0wIHJjX2xvb2thaGVhZD00MCByYz1hYnIgbWJ0cmVlPTEgYml0cmF0ZT0xMDAgcmF0ZXRvbD0xLjAgcWNvbXA9MC42MCBxcG1pbj0xMCBxcG1heD01MSBxcHN0ZXA9NCBpcF9yYXRpbz0xLjQwIGFxPTE6MS4wMACAAAAAU2WIhAAQ/8ltlOe+cTZuGkKg+aRtuivcDZ0pBsfsEi9p/i1yU9DxS2lq4dXTinViF1URBKXgnzKBd/Uh1bkhHtMrwrRcOJslD01UB+fyaL6ef+DBAAAAFEGaJGxBD5B+v+a+4QqF3MgBXz9MAAAACkGeQniH/+94r6EAAAAKAZ5hdEN/8QytwAAAAAgBnmNqQ3/EgQAAAA5BmmhJqEFomUwIIf/+4QAAAApBnoZFESw//76BAAAACAGepXRDf8SBAAAACAGep2pDf8SAAAAADkGarEmoQWyZTAgh//7gAAAACkGeykUVLD//voEAAAAIAZ7pdEN/xIAAAAAIAZ7rakN/xIAAAAAOQZrwSahBbJlMCCH//uEAAAAKQZ8ORRUsP/++gQAAAAgBny10Q3/EgQAAAAgBny9qQ3/EgAAAAA5BmzRJqEFsmUwIIf/+4AAAAApBn1JFFSw//76BAAAACAGfcXRDf8SAAAAACAGfc2pDf8SAAAAADkGbeEmoQWyZTAgh//7hAAAACkGflkUVLD//voAAAAAIAZ+1dEN/xIEAAAAIAZ+3akN/xIEAAAAOQZu8SahBbJlMCCH//uAAAAAKQZ/aRRUsP/++gQAAAAgBn/l0Q3/EgAAAAAgBn/tqQ3/EgQAAAA5Bm+BJqEFsmUwIIf/+4QAAAApBnh5FFSw//76AAAAACAGePXRDf8SAAAAACAGeP2pDf8SBAAAADkGaJEmoQWyZTAgh//7gAAAACkGeQkUVLD//voEAAAAIAZ5hdEN/xIAAAAAIAZ5jakN/xIEAAAAOQZpoSahBbJlMCCH//uEAAAAKQZ6GRRUsP/++gQAAAAgBnqV0Q3/EgQAAAAgBnqdqQ3/EgAAAAA5BmqxJqEFsmUwIIf/+4AAAAApBnspFFSw//76BAAAACAGe6XRDf8SAAAAACAGe62pDf8SAAAAADkGa8EmoQWyZTAgh//7hAAAACkGfDkUVLD//voEAAAAIAZ8tdEN/xIEAAAAIAZ8vakN/xIAAAAAOQZs0SahBbJlMCCH//uAAAAAKQZ9SRRUsP/++gQAAAAgBn3F0Q3/EgAAAAAgBn3NqQ3/EgAAAAA5Bm3hJqEFsmUwIIf/+4QAAAApBn5ZFFSw//76AAAAACAGftXRDf8SBAAAACAGft2pDf8SBAAAADkGbvEmoQWyZTAgh//7gAAAACkGf2kUVLD//voEAAAAIAZ/5dEN/xIAAAAAIAZ/7akN/xIEAAAAOQZvgSahBbJlMCCH//uEAAAAKQZ4eRRUsP/++gAAAAAgBnj10Q3/EgAAAAAgBnj9qQ3/EgQAAAA5BmiRJqEFsmUwIIf/+4AAAAApBnkJFFSw//76BAAAACAGeYXRDf8SAAAAACAGeY2pDf8SBAAAADkGaaEmoQWyZTAgh//7hAAAACkGehkUVLD//voEAAAAIAZ6ldEN/xIEAAAAIAZ6nakN/xIAAAAAOQZqsSahBbJlMCCH//uAAAAAKQZ7KRRUsP/++gQAAAAgBnul0Q3/EgAAAAAgBnutqQ3/EgAAAAA5BmvBJqEFsmUwIIf/+4QAAAApBnw5FFSw//76BAAAACAGfLXRDf8SBAAAACAGfL2pDf8SAAAAADkGbNEmoQWyZTAgh//7gAAAACkGfUkUVLD//voEAAAAIAZ9xdEN/xIAAAAAIAZ9zakN/xIAAAAAOQZt4SahBbJlMCCH//uEAAAAKQZ+WRRUsP/++gAAAAAgBn7V0Q3/EgQAAAAgBn7dqQ3/EgQAAAA5Bm7xJqEFsmUwIIf/+4AAAAApBn9pFFSw//76BAAAACAGf+XRDf8SAAAAACAGf+2pDf8SBAAAADkGb4EmoQWyZTAgh//7hAAAACkGeHkUVLD//voAAAAAIAZ49dEN/xIAAAAAIAZ4/akN/xIEAAAAOQZokSahBbJlMCCH//uAAAAAKQZ5CRRUsP/++gQAAAAgBnmF0Q3/EgAAAAAgBnmNqQ3/EgQAAAA5BmmhJqEFsmUwIIf/+4QAAAApBnoZFFSw//76BAAAACAGepXRDf8SBAAAACAGep2pDf8SAAAAADkGarEmoQWyZTAgh//7gAAAACkGeykUVLD//voEAAAAIAZ7pdEN/xIAAAAAIAZ7rakN/xIAAAAAPQZruSahBbJlMFEw3//7B');
      video.play();
    }
  };

  this.release = function() {
    video.pause();
    video.src = '';
  };
}

function iOSWakeLock() {
  var timer = null;

  this.request = function() {
    if (!timer) {
      timer = setInterval(function() {
        window.location = window.location;
        setTimeout(window.stop, 0);
      }, 30000);
    }
  }

  this.release = function() {
    if (timer) {
      clearInterval(timer);
      timer = null;
    }
  }
}


function getWakeLock() {
  var userAgent = navigator.userAgent || navigator.vendor || window.opera;
  if (userAgent.match(/iPhone/i) || userAgent.match(/iPod/i)) {
    return iOSWakeLock;
  } else {
    return AndroidWakeLock;
  }
}

module.exports = getWakeLock();
},{"./util.js":22}],25:[function(_dereq_,module,exports){
/*
 * Copyright 2015 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

var CardboardVRDisplay = _dereq_('./cardboard-vr-display.js');
var MouseKeyboardVRDisplay = _dereq_('./mouse-keyboard-vr-display.js');
// Uncomment to add positional tracking via webcam.
//var WebcamPositionSensorVRDevice = require('./webcam-position-sensor-vr-device.js');
var VRDisplay = _dereq_('./base.js').VRDisplay;
var HMDVRDevice = _dereq_('./base.js').HMDVRDevice;
var PositionSensorVRDevice = _dereq_('./base.js').PositionSensorVRDevice;
var VRDisplayHMDDevice = _dereq_('./display-wrappers.js').VRDisplayHMDDevice;
var VRDisplayPositionSensorDevice = _dereq_('./display-wrappers.js').VRDisplayPositionSensorDevice;

function WebVRPolyfill() {
  this.displays = [];
  this.devices = []; // For deprecated objects
  this.devicesPopulated = false;
  this.nativeWebVRAvailable = this.isWebVRAvailable();
  this.nativeLegacyWebVRAvailable = this.isDeprecatedWebVRAvailable();

  if (!this.nativeLegacyWebVRAvailable) {
    if (!this.nativeWebVRAvailable) {
      this.enablePolyfill();
    }
    if (WebVRConfig.ENABLE_DEPRECATED_API) {
      this.enableDeprecatedPolyfill();
    }
  }
}

WebVRPolyfill.prototype.isWebVRAvailable = function() {
  return ('getVRDisplays' in navigator);
};

WebVRPolyfill.prototype.isDeprecatedWebVRAvailable = function() {
  return ('getVRDevices' in navigator) || ('mozGetVRDevices' in navigator);
};

WebVRPolyfill.prototype.populateDevices = function() {
  if (this.devicesPopulated) {
    return;
  }

  // Initialize our virtual VR devices.
  var vrDisplay = null;

  // Add a Cardboard VRDisplay on compatible mobile devices
  if (this.isCardboardCompatible()) {
    vrDisplay = new CardboardVRDisplay();
    this.displays.push(vrDisplay);

    // For backwards compatibility
    if (WebVRConfig.ENABLE_DEPRECATED_API) {
      this.devices.push(new VRDisplayHMDDevice(vrDisplay));
      this.devices.push(new VRDisplayPositionSensorDevice(vrDisplay));
    }
  }

  // Add a Mouse and Keyboard driven VRDisplay for desktops/laptops
  if (!this.isMobile() && !WebVRConfig.MOUSE_KEYBOARD_CONTROLS_DISABLED) {
    vrDisplay = new MouseKeyboardVRDisplay();
    this.displays.push(vrDisplay);

    // For backwards compatibility
    if (WebVRConfig.ENABLE_DEPRECATED_API) {
      this.devices.push(new VRDisplayHMDDevice(vrDisplay));
      this.devices.push(new VRDisplayPositionSensorDevice(vrDisplay));
    }
  }

  // Uncomment to add positional tracking via webcam.
  //if (!this.isMobile() && WebVRConfig.ENABLE_DEPRECATED_API) {
  //  positionDevice = new WebcamPositionSensorVRDevice();
  //  this.devices.push(positionDevice);
  //}

  this.devicesPopulated = true;
};

WebVRPolyfill.prototype.enablePolyfill = function() {
  // Provide navigator.getVRDisplays.
  navigator.getVRDisplays = this.getVRDisplays.bind(this);

  // Provide the VRDisplay object.
  window.VRDisplay = VRDisplay;
};

WebVRPolyfill.prototype.enableDeprecatedPolyfill = function() {
  // Provide navigator.getVRDevices.
  navigator.getVRDevices = this.getVRDevices.bind(this);

  // Provide the CardboardHMDVRDevice and PositionSensorVRDevice objects.
  window.HMDVRDevice = HMDVRDevice;
  window.PositionSensorVRDevice = PositionSensorVRDevice;
};

WebVRPolyfill.prototype.getVRDisplays = function() {
  this.populateDevices();
  var displays = this.displays;
  return new Promise(function(resolve, reject) {
    try {
      resolve(displays);
    } catch (e) {
      reject(e);
    }
  });
};

WebVRPolyfill.prototype.getVRDevices = function() {
  console.warn('getVRDevices is deprecated. Please update your code to use getVRDisplays instead.');
  var self = this;
  return new Promise(function(resolve, reject) {
    try {
      if (!self.devicesPopulated) {
        if (self.nativeWebVRAvailable) {
          return navigator.getVRDisplays(function(displays) {
            for (var i = 0; i < displays.length; ++i) {
              self.devices.push(new VRDisplayHMDDevice(displays[i]));
              self.devices.push(new VRDisplayPositionSensorDevice(displays[i]));
            }
            self.devicesPopulated = true;
            resolve(self.devices);
          }, reject);
        }

        if (self.nativeLegacyWebVRAvailable) {
          return (navigator.getVRDDevices || navigator.mozGetVRDevices)(function(devices) {
            for (var i = 0; i < devices.length; ++i) {
              if (devices[i] instanceof HMDVRDevice) {
                self.devices.push(devices[i]);
              }
              if (devices[i] instanceof PositionSensorVRDevice) {
                self.devices.push(devices[i]);
              }
            }
            self.devicesPopulated = true;
            resolve(self.devices);
          }, reject);
        }
      }

      self.populateDevices();
      resolve(self.devices);
    } catch (e) {
      reject(e);
    }
  });
};

/**
 * Determine if a device is mobile.
 */
WebVRPolyfill.prototype.isMobile = function() {
  return /Android/i.test(navigator.userAgent) ||
      /iPhone|iPad|iPod/i.test(navigator.userAgent);
};

WebVRPolyfill.prototype.isCardboardCompatible = function() {
  // For now, support all iOS and Android devices.
  // Also enable the WebVRConfig.FORCE_VR flag for debugging.
  return this.isMobile() || WebVRConfig.FORCE_ENABLE_VR;
};

module.exports = WebVRPolyfill;

},{"./base.js":2,"./cardboard-vr-display.js":5,"./display-wrappers.js":8,"./mouse-keyboard-vr-display.js":15}]},{},[13]);

},{}],9:[function(require,module,exports){
var EventEmitter = require('eventemitter3');
var shaka = require('shaka-player');

var Types = {
  HLS: 1,
  DASH: 2,
  VIDEO: 3
};

var DEFAULT_BITS_PER_SECOND = 1000000;

/**
 * Supports regular video URLs (eg. mp4), as well as adaptive manifests like
 * DASH (.mpd) and soon HLS (.m3u8).
 *
 * Events:
 *   load(video): When the video is loaded.
 *   error(message): If an error occurs.
 *
 * To play/pause/seek/etc, please use the underlying video element.
 */
function AdaptivePlayer() {
  this.video = document.createElement('video');
  this.video.loop = true;
  // Enable inline video playback in iOS 10+.
  this.video.setAttribute('playsinline', true);
  this.video.setAttribute('crossorigin', 'anonymous');
}
AdaptivePlayer.prototype = new EventEmitter();

AdaptivePlayer.prototype.load = function(url) {
  var self = this;
  // TODO(smus): Investigate whether or not differentiation is best done by
  // mimeType after all. Cursory research suggests that adaptive streaming
  // manifest mime types aren't properly supported.
  //
  // For now, make determination based on extension.
  var extension = Util.getExtension(url);
  switch (extension) {
    case 'm3u8': // HLS
      this.type = Types.HLS;
      if (Util.isSafari()) {
        this.loadVideo_(url).then(function() {
          self.emit('load', self.video);
        }).catch(this.onError_.bind(this));
      } else {
        self.onError_('HLS is only supported on Safari.');
      }
      break;
    case 'mpd': // MPEG-DASH
      this.type = Types.DASH;
      this.loadShakaVideo_(url).then(function() {
        console.log('The video has now been loaded!');
        self.emit('load', self.video);
      }).catch(this.onError_.bind(this));
      break;
    default: // A regular video, not an adaptive manifest.
      this.type = Types.VIDEO;
      this.loadVideo_(url).then(function() {
        self.emit('load', self.video);
      }).catch(this.onError_.bind(this));
      break;
  }
};

AdaptivePlayer.prototype.destroy = function() {
  this.video.pause();
  this.video.src = '';
  this.video = null;
};

/*** PRIVATE API ***/

AdaptivePlayer.prototype.onError_ = function(e) {
  console.error(e);
  this.emit('error', e);
};

AdaptivePlayer.prototype.loadVideo_ = function(url) {
  var video = this.video;
  return new Promise(function(resolve, reject) {
    video.src = url;
    video.addEventListener('canplaythrough', resolve);
    video.addEventListener('error', reject);
    video.load();
  });
};

AdaptivePlayer.prototype.initShaka_ = function() {
  this.player = new shaka.Player(this.video);

  this.player.configure({
    abr: { defaultBandwidthEstimate: DEFAULT_BITS_PER_SECOND }
  });

  // Listen for error events.
  this.player.addEventListener('error', this.onError_);
};

AdaptivePlayer.prototype.loadShakaVideo_ = function(url) {
  // Install built-in polyfills to patch browser incompatibilities.
  shaka.polyfill.installAll();

  if (!shaka.Player.isBrowserSupported()) {
    console.error('Shaka is not supported on this browser.');
    return;
  }

  this.initShaka_();
  return this.player.load(url);
};

module.exports = AdaptivePlayer;

},{"eventemitter3":3,"shaka-player":4}],10:[function(require,module,exports){
/*
 * Copyright 2015 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Eyes = {
  LEFT: 1,
  RIGHT: 2
};

module.exports = Eyes;

},{}],11:[function(require,module,exports){
/*
 * Copyright 2015 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var EventEmitter = require('eventemitter3');
var TWEEN = require('tween.js');

// Constants for the focus/blur animation.
var NORMAL_SCALE = new THREE.Vector3(1, 1, 1);
var FOCUS_SCALE = new THREE.Vector3(1.2, 1.2, 1.2);
var FOCUS_DURATION = 200;

// Constants for the active/inactive animation.
var INACTIVE_COLOR = new THREE.Color(1, 1, 1);
var ACTIVE_COLOR = new THREE.Color(0.8, 0, 0);
var ACTIVE_DURATION = 100;

// Constants for opacity.
var MAX_INNER_OPACITY = 0.8;
var MAX_OUTER_OPACITY = 0.5;
var FADE_START_ANGLE_DEG = 35;
var FADE_END_ANGLE_DEG = 60;
/**
 * Responsible for rectangular hot spots that the user can interact with.
 *
 * Specific duties:
 *   Adding and removing hotspots.
 *   Rendering the hotspots (debug mode only).
 *   Notifying when hotspots are interacted with.
 * 
 * Emits the following events:
 *   click (id): a hotspot is clicked.
 *   focus (id): a hotspot is focused.
 *   blur (id): a hotspot is no longer hovered over.
 */
function HotspotRenderer(worldRenderer) {
  this.worldRenderer = worldRenderer;
  this.scene = worldRenderer.scene;

  // Note: this event must be added to document.body and not to window for it to
  // work inside iOS iframes.
  var body = document.body;
  // Bind events for hotspot interaction.
  if (!Util.isMobile()) {
    // Only enable mouse events on desktop.
    body.addEventListener('mousedown', this.onMouseDown_.bind(this), false);
    body.addEventListener('mousemove', this.onMouseMove_.bind(this), false);
    body.addEventListener('mouseup', this.onMouseUp_.bind(this), false);
  }
  body.addEventListener('touchstart', this.onTouchStart_.bind(this), false);
  body.addEventListener('touchend', this.onTouchEnd_.bind(this), false);

  // Add a placeholder for hotspots.
  this.hotspotRoot = new THREE.Object3D();
  // Align the center with the center of the camera too.
  this.hotspotRoot.rotation.y = Math.PI / 2;
  this.scene.add(this.hotspotRoot);

  // All hotspot IDs.
  this.hotspots = {};

  // Currently selected hotspots.
  this.selectedHotspots = {};

  // Hotspots that the last touchstart / mousedown event happened for.
  this.downHotspots = {};

  // For raycasting. Initialize mouse to be off screen initially.
  this.pointer = new THREE.Vector2(1, 1);
  this.raycaster = new THREE.Raycaster();
}
HotspotRenderer.prototype = new EventEmitter();

/**
 * @param pitch {Number} The latitude of center, specified in degrees, between
 * -90 and 90, with 0 at the horizon.
 * @param yaw {Number} The longitude of center, specified in degrees, between
 * -180 and 180, with 0 at the image center.
 * @param radius {Number} The radius of the hotspot, specified in meters.
 * @param distance {Number} The distance of the hotspot from camera, specified
 * in meters.
 * @param hotspotId {String} The ID of the hotspot.
 */
HotspotRenderer.prototype.add = function(pitch, yaw, radius, distance, id, image, is_stereo) {
  //console.log('HotspotRenderer.add', pitch, yaw, radius, distance, id, image);
  // If a hotspot already exists with this ID, stop.
  if (this.hotspots[id]) {
    // TODO: Proper error reporting.
    console.error('Attempt to add hotspot with existing id %s.', id);
    return;
  }
  var hotspot = this.createHotspot_(radius, distance, image, is_stereo);
  hotspot.name = id;

  // Position the hotspot based on the pitch and yaw specified.
  var quat = new THREE.Quaternion();
  quat.setFromEuler(new THREE.Euler(THREE.Math.degToRad(pitch), THREE.Math.degToRad(yaw), 0));
  hotspot.position.applyQuaternion(quat);
  hotspot.lookAt(new THREE.Vector3());
  
  this.hotspotRoot.add(hotspot);
  this.hotspots[id] = hotspot;
}

/**
 * Removes a hotspot based on the ID.
 *
 * @param ID {String} Identifier of the hotspot to be removed.
 */
HotspotRenderer.prototype.remove = function(id) {
  // If there's no hotspot with this ID, fail.
  if (!this.hotspots[id]) { 
    // TODO: Proper error reporting.
    console.error('Attempt to remove non-existing hotspot with id %s.', id);
    return;
  }
  // Remove the mesh from the scene.
  this.hotspotRoot.remove(this.hotspots[id]);

  // If this hotspot was selected, make sure it gets unselected.
  delete this.selectedHotspots[id];
  delete this.downHotspots[id];
  delete this.hotspots[id];
  this.emit('blur', id);
};

/**
 * Clears all hotspots from the pano. Often called when changing panos.
 */
HotspotRenderer.prototype.clearAll = function() {
  for (var id in this.hotspots) {
    this.remove(id);
  }
};

HotspotRenderer.prototype.getCount = function() {
  var count = 0;
  for (var id in this.hotspots) {
    count += 1;
  }
  return count;
};

HotspotRenderer.prototype.update = function(camera) {
  if (this.worldRenderer.isVRMode()) {
    this.pointer.set(0, 0);
  }
  // Update the picking ray with the camera and mouse position.
  this.raycaster.setFromCamera(this.pointer, camera);	

  // Fade hotspots out if they are really far from center to avoid overly
  // distorted visuals.
  this.fadeOffCenterHotspots_(camera);

  var hotspots = this.hotspotRoot.children;
  
  // Go through all hotspots to see if they are currently selected.
  for (var i = 0; i < hotspots.length; i++) {
    var hotspot = hotspots[i];
    //hotspot.lookAt(camera.position);
    var id = hotspot.name;
    // Check if hotspot is intersected with the picking ray.
    var intersects = this.raycaster.intersectObjects(hotspot.children);
    var isIntersected = (intersects.length > 0);

    // If newly selected, emit a focus event.
    if (isIntersected && !this.selectedHotspots[id]) {
      this.emit('focus', id);
      this.focus_(id);
    }
    // If no longer selected, emit a blur event.
    if (!isIntersected && this.selectedHotspots[id]) {
      this.emit('blur', id);
      this.blur_(id);
    }
    // Update the set of selected hotspots.
    if (isIntersected) {
      this.selectedHotspots[id] = true;
    } else {
      delete this.selectedHotspots[id];
    }
  }
};

/**
 * Toggle whether or not hotspots are visible.
 */
HotspotRenderer.prototype.setVisibility = function(isVisible) {
  this.hotspotRoot.visible = isVisible;
};

HotspotRenderer.prototype.onTouchStart_ = function(e) {
  // In VR mode, don't touch the pointer position.
  if (!this.worldRenderer.isVRMode()) {
    this.updateTouch_(e);
  }

  // Force a camera update to see if any hotspots were selected.
  this.update(this.worldRenderer.camera);

  this.downHotspots = {};
  for (var id in this.selectedHotspots) {
    this.downHotspots[id] = true;
    this.down_(id);
  }
  return false;
};

HotspotRenderer.prototype.onTouchEnd_ = function(e) {
  // If no hotspots are pressed, emit an empty click event.
  if (!this.downHotspots) {
    this.emit('click');
    return;
  }

  // Only emit a click if the finger was down on the same hotspot before.
  for (var id in this.downHotspots) {
    this.emit('click', id);
    this.up_(id);
    e.preventDefault();
  }
};

HotspotRenderer.prototype.updateTouch_ = function(e) {
  var size = this.getSize_();
  var touch = e.touches[0];
	this.pointer.x = (touch.clientX / size.width) * 2 - 1;
	this.pointer.y = - (touch.clientY / size.height) * 2 + 1;	
};

HotspotRenderer.prototype.onMouseDown_ = function(e) {
  this.updateMouse_(e);

  this.downHotspots = {};
  for (var id in this.selectedHotspots) {
    this.downHotspots[id] = true;
    this.down_(id);
  }
};

HotspotRenderer.prototype.onMouseMove_ = function(e) {
  this.updateMouse_(e);
};

HotspotRenderer.prototype.onMouseUp_ = function(e) {
  this.updateMouse_(e);

  // If no hotspots are pressed, emit an empty click event.
  if (!this.downHotspots) {
    this.emit('click');
    return;
  }

  // Only emit a click if the mouse was down on the same hotspot before.
  for (var id in this.selectedHotspots) {
    if (id in this.downHotspots) {
      this.emit('click', id);
      this.up_(id);
    }
  }
};

HotspotRenderer.prototype.updateMouse_ = function(e) {
  var size = this.getSize_();
	this.pointer.x = (e.clientX / size.width) * 2 - 1;
	this.pointer.y = - (e.clientY / size.height) * 2 + 1;	
};

HotspotRenderer.prototype.getSize_ = function() {
  var canvas = this.worldRenderer.renderer.domElement;
  return this.worldRenderer.renderer.getSize();
};

HotspotRenderer.prototype.createHotspot_ = function(radius, distance, image, is_stereo) {
  var innerGeometry = new THREE.CircleGeometry(radius, 32);

  var innerMaterial = new THREE.MeshBasicMaterial({
    color: 0xffffff, side: THREE.DoubleSide, transparent: true,
    opacity: MAX_INNER_OPACITY, depthTest: false
  });
  if(image&&image!="0"){
    var loader = new THREE.TextureLoader();
    loader.crossOrigin = 'anonymous';
    loader.load(image, function(texture){
      texture.wrapS = texture.wrapT = THREE.RepeatWrapping;
      if(is_stereo&&is_stereo!="0"){
        texture.repeat.set(0.5, 0.5);
      }else{
        texture.repeat.set(0.5, 1);
      }
      innerMaterial.map = texture;
      innerMaterial.map.needsUpdate = true;
      innerMaterial.needsUpdate = true;
    });
  }
  var inner = new THREE.Mesh(innerGeometry, innerMaterial);
  inner.name = 'inner';

  var outerMaterial = new THREE.MeshBasicMaterial({
    color: 0xffffff, side: THREE.DoubleSide, transparent: true,
    opacity: MAX_OUTER_OPACITY, depthTest: false
  });
  var outerGeometry = new THREE.RingGeometry(radius * 0.85, radius, 32);
  var outer = new THREE.Mesh(outerGeometry, outerMaterial);
  outer.name = 'outer';

  // Position at the extreme end of the sphere.
  var hotspot = new THREE.Object3D();
  hotspot.position.z = -distance;
  hotspot.scale.set(NORMAL_SCALE);

  hotspot.add(inner);
  hotspot.add(outer);

  return hotspot;
};

/**
 * Large aspect ratios tend to cause visually jarring distortions on the sides.
 * Here we fade hotspots out to avoid them.
 */
HotspotRenderer.prototype.fadeOffCenterHotspots_ = function(camera) {
  var lookAt = new THREE.Vector3(1, 0, 0);
  lookAt.applyQuaternion(camera.quaternion);
  // Take into account the camera parent too.
  lookAt.applyQuaternion(camera.parent.quaternion);

  // Go through each hotspot. Calculate how far off center it is.
  for (var id in this.hotspots) {
    var hotspot = this.hotspots[id];
    var angle = hotspot.position.angleTo(lookAt);
    var angleDeg = THREE.Math.radToDeg(angle);
    var isVisible = angleDeg < 45;
    var opacity;
    if (angleDeg < FADE_START_ANGLE_DEG) {
      opacity = 1;
    } else if (angleDeg > FADE_END_ANGLE_DEG) {
      opacity = 0;
    } else {
      // We are in the case START < angle < END. Linearly interpolate.
      var range = FADE_END_ANGLE_DEG - FADE_START_ANGLE_DEG;
      var value = FADE_END_ANGLE_DEG - angleDeg;
      opacity = value / range;
    }

    // Opacity a function of angle. If angle is large, opacity is zero. At some
    // point, ramp opacity down.
    this.setOpacity_(id, opacity);
  }
};

HotspotRenderer.prototype.focus_ = function(id) {
  var hotspot = this.hotspots[id];

  // Tween scale of hotspot.
  this.tween = new TWEEN.Tween(hotspot.scale).to(FOCUS_SCALE, FOCUS_DURATION)
      .easing(TWEEN.Easing.Quadratic.InOut)
      .start();
};

HotspotRenderer.prototype.blur_ = function(id) {
  var hotspot = this.hotspots[id];

  this.tween = new TWEEN.Tween(hotspot.scale).to(NORMAL_SCALE, FOCUS_DURATION)
      .easing(TWEEN.Easing.Quadratic.InOut)
      .start();
};

HotspotRenderer.prototype.down_ = function(id) {
  // Become active.
  var hotspot = this.hotspots[id];
  var outer = hotspot.getObjectByName('inner');

  this.tween = new TWEEN.Tween(outer.material.color).to(ACTIVE_COLOR, ACTIVE_DURATION)
      .start();
};

HotspotRenderer.prototype.up_ = function(id) {
  // Become inactive.
  var hotspot = this.hotspots[id];
  var outer = hotspot.getObjectByName('inner');

  this.tween = new TWEEN.Tween(outer.material.color).to(INACTIVE_COLOR, ACTIVE_DURATION)
      .start();
};

HotspotRenderer.prototype.setOpacity_ = function(id, opacity) {
  var hotspot = this.hotspots[id];
  var outer = hotspot.getObjectByName('outer');
  var inner = hotspot.getObjectByName('inner');

  outer.material.opacity = opacity * MAX_OUTER_OPACITY;
  inner.material.opacity = opacity * MAX_INNER_OPACITY;
};

module.exports = HotspotRenderer;

},{"eventemitter3":3,"tween.js":6}],12:[function(require,module,exports){
/*
 * Copyright 2015 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var EventEmitter = require('eventemitter3');
var Message = require('../message');


/**
 * Sits in an embedded iframe, receiving messages from a containing
 * iFrame. This facilitates an API which provides the following features:
 *
 *    Playing and pausing content.
 *    Adding hotspots.
 *    Sending messages back to the containing iframe when hotspot is clicked
 *    Sending analytics events to containing iframe.
 *    Receiving DeviceMotion events and resynthesizing them in this iframe
 *        (workaround for https://bugs.webkit.org/show_bug.cgi?id=150072).
 */
function IFrameMessageReceiver() {
  window.addEventListener('message', this.onMessage_.bind(this), false);
}
IFrameMessageReceiver.prototype = new EventEmitter();

IFrameMessageReceiver.prototype.onMessage_ = function(event) {
  //console.log('onMessage_', event);

  var message = event.data;
  var type = message.type.toLowerCase();
  var data = message.data;
  if(type == Message.SET_CONTENT){
    data.callback = function(){
      Util.sendParentMessage({type:type});
    };
  }
  switch (type) {
    case Message.DEVICE_MOTION:
      // Synthesize a DeviceMotion event.
      this.synthesizeDeviceMotionEvent_(message.deviceMotionEvent);
      break;
    case Message.SET_CONTENT:
    case Message.SET_VOLUME:
    case Message.ADD_HOTSPOT:
    case Message.PLAY:
    case Message.PAUSE:
    case Message.SETUP_NAVIGATION:
    case Message.ENABLE_MULTIPLAYER_MODE:
    case Message.JOIN_MULTIPLAYER_ROOM:
    case Message.LEAVE_MULTIPLAYER_ROOM:
    case Message.SET_MULTIPLAYER_ME:
      // TODO(smus): Emit the event 
      this.emit(type, data);
      break;
    default:
      console.warn('Got unknown message of type %s from %s', type, Message.SET_CONTENT, message.origin);
  }
};

IFrameMessageReceiver.prototype.synthesizeDeviceMotionEvent_ = function(eventData) {
  var type = 'devicemotion-iframe';
  var canBubble = false;
  var cancelable = false;

  var dme = document.createEvent('DeviceMotionEvent');
  dme.initDeviceMotionEvent(type, canBubble, cancelable,
      eventData.acceleration,
      eventData.accelerationIncludingGravity,
      eventData.rotationRate,
      eventData.interval);

  window.dispatchEvent(dme);
};

module.exports = IFrameMessageReceiver;

},{"../message":23,"eventemitter3":3}],13:[function(require,module,exports){
/*
 * Copyright 2015 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

/**
 * Shows a 2D loading indicator while various pieces of EmbedVR load.
 */
function LoadingIndicator() {
  this.el = this.build_();
  document.body.appendChild(this.el);
  this.show();
}

LoadingIndicator.prototype.build_ = function() {
  var overlay = document.createElement('div');
  var s = overlay.style;
  s.position = 'fixed';
  s.top = 0;
  s.left = 0;
  s.width = '100%';
  s.height = '100%';
  s.background = '#eee';
  var img = document.createElement('img');
  img.src = 'images/loading.gif';
  var s = img.style;
  s.position = 'absolute';
  s.top = '50%';
  s.left = '50%';
  s.transform = 'translate(-50%, -50%)';

  overlay.appendChild(img);
  return overlay;
};

LoadingIndicator.prototype.hide = function() {
  this.el.style.display = 'none';
};

LoadingIndicator.prototype.show = function() {
  this.el.style.display = 'block';
};

module.exports = LoadingIndicator;

},{}],14:[function(require,module,exports){
/*
 * Copyright 2015 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

// Initialize the loading indicator as quickly as possible to give the user
// immediate feedback.
var LoadingIndicator = require('./loading-indicator');
var loadIndicator = new LoadingIndicator();

var ES6Promise = require('es6-promise');
// Polyfill ES6 promises for IE.
ES6Promise.polyfill();

var IFrameMessageReceiver = require('./iframe-message-receiver');
var Message = require('../message');
var SceneInfo = require('./scene-info');
var Stats = require('../../node_modules/stats-js/build/stats.min');
var Util = require('../util');
var WebVRPolyfill = require('webvr-polyfill');
var WorldRenderer = require('./world-renderer');

var receiver = new IFrameMessageReceiver();
receiver.on(Message.PLAY, onPlayRequest);
receiver.on(Message.PAUSE, onPauseRequest);
receiver.on(Message.ADD_HOTSPOT, onAddHotspot);
receiver.on(Message.SETUP_NAVIGATION, onAddNavigation);
receiver.on(Message.ENABLE_MULTIPLAYER_MODE, enableMultiplayerMode);
receiver.on(Message.JOIN_MULTIPLAYER_ROOM, joinMultiplayerRoom);
receiver.on(Message.LEAVE_MULTIPLAYER_ROOM, leaveMultiplayerRoom);
receiver.on(Message.SET_MULTIPLAYER_ME, setMultiplayerMe);
receiver.on(Message.SET_CONTENT, onSetContent);
receiver.on(Message.SET_VOLUME, onSetVolume);

window.addEventListener('load', onLoad);

var stats = new Stats();

var worldRenderer = new WorldRenderer();
worldRenderer.on('error', onRenderError);
worldRenderer.on('load', onRenderLoad);
worldRenderer.on('modechange', onModeChange);
worldRenderer.hotspotRenderer.on('click', onHotspotClick);

window.worldRenderer = worldRenderer;

var isReadySent = false;

function onLoad() {
  if (!Util.isWebGLEnabled()) {
    showError('WebGL not supported.');
    return;
  }

  // Load the scene.
  var scene = SceneInfo.loadFromGetParams();
  worldRenderer.setScene(scene);

  if (scene.isDebug) {
    // Show stats.
    showStats();
  }

  if (scene.isYawOnly) {
    WebVRConfig = window.WebVRConfig || {};
    WebVRConfig.YAW_ONLY = true;
  }

  requestAnimationFrame(loop);
}


function onVideoTap() {
  worldRenderer.videoProxy.play();
  hidePlayButton();

  // Prevent multiple play() calls on the video element.
  document.body.removeEventListener('touchend', onVideoTap);
}

function onRenderLoad(event) {
  if (event.videoElement) {
    // On mobile, tell the user they need to tap to start. Otherwise, autoplay.
    if (Util.isMobile()) {
      // Tell user to tap to start.
      showPlayButton();
      document.body.addEventListener('touchend', onVideoTap);
    } else {
      event.videoElement.play();
    }

    // Attach to pause and play events, to notify the API.
    event.videoElement.addEventListener('pause', onPause);
    event.videoElement.addEventListener('play', onPlay);
  }
  // Hide loading indicator.
  loadIndicator.hide();

  // Autopan only on desktop, for photos only, and only if autopan is enabled.
  if (!Util.isMobile() && !worldRenderer.sceneInfo.video &&
      !worldRenderer.sceneInfo.isAutopanOff) {
    worldRenderer.autopan();
  }

  // Notify the API that we are ready, but only do this once.
  if (!isReadySent) {
    Util.sendParentMessage({
      type: 'ready' 
    });
    isReadySent = true;
  }
}

function onPlayRequest() {
  if (!worldRenderer.videoProxy) {
    onApiError('Attempt to pause, but no video found.');
    return;
  }
  worldRenderer.videoProxy.play();
}

function onPauseRequest() {
  if (!worldRenderer.videoProxy) {
    onApiError('Attempt to pause, but no video found.');
    return;
  }
  worldRenderer.videoProxy.pause();
}

function onAddHotspot(e) {
  // console.log('onAddHotspot', e);
  // TODO: Implement some validation?

  var pitch = parseFloat(e.pitch);
  var yaw = parseFloat(e.yaw);
  var radius = parseFloat(e.radius);
  var distance = parseFloat(e.distance);
  var id = e.id;
  var image = e.image;
  var is_stereo = e.is_stereo;
  worldRenderer.hotspotRenderer.add(pitch, yaw, radius, distance, id, image, is_stereo);
  
}
function enableMultiplayerMode(){
  worldRenderer.multiplayerMode.enableMultiplayerMode();
}
function setMultiplayerMe(e){
  worldRenderer.multiplayerMode.setMe(e);
}
function joinMultiplayerRoom(e){
  worldRenderer.multiplayerMode.joinRoom(e.room);
}
function leaveMultiplayerRoom(){
  
}
function onAddNavigation(e) {
  worldRenderer.navigationRenderer.setup(e);
}
function onSetContent(e) {
  // console.log('onSetContent', e);
  // Fade to black.
  worldRenderer.sphereRenderer.setOpacity(0, 500).then(function() {
    // Then load the new scene.
    var scene = SceneInfo.loadFromAPIParams(e.contentInfo);
    // Remove all of the hotspots.
    worldRenderer.hotspotRenderer.clearAll();
    // Destroy the world
    worldRenderer.destroy();
    // Update the URL to reflect the new scene. This is important particularily
    // on iOS where we use a fake fullscreen mode.
    var url = scene.getCurrentUrl();
    //console.log('Updating url to be %s', url);
    window.history.pushState(null, 'VR View', url);
    e.callback();
    // And set the new scene.
    return worldRenderer.setScene(scene);
  }).then(function() {
    // Then fade the scene back in.
    worldRenderer.sphereRenderer.setOpacity(1, 500);
  });
}

function onSetVolume(e) {
  // Only work for video. If there's no video, send back an error.
  if (!worldRenderer.videoProxy) {
    onApiError('Attempt to set volume, but no video found.');
    return;
  }
  worldRenderer.videoProxy.setVolume(e.volumeLevel);
}

function onApiError(message) {
  console.error(message);
  Util.sendParentMessage({
    type: 'error',
    data: {message: message}
  });
}

function onModeChange(mode) {
  Util.sendParentMessage({
    type: 'modechange',
    data: {mode: mode}
  });
}

function onHotspotClick(id) {
  Util.sendParentMessage({
    type: 'click',
    data: {id: id}
  });
}

function onPlay() {
  Util.sendParentMessage({
    type: 'paused',
    data: false
  });
}

function onPause() {
  Util.sendParentMessage({
    type: 'paused',
    data: true
  });
}

function onSceneError(message) {
  showError('Loader: ' + message);
}

function onRenderError(message) {
  showError('Render: ' + message);
}

function showError(message, opt_title) {
  // Hide loading indicator.
  loadIndicator.hide();

  var error = document.querySelector('#error');
  error.classList.add('visible');
  error.querySelector('.message').innerHTML = message;

  var title = (opt_title !== undefined ? opt_title : 'Error');
  error.querySelector('.title').innerHTML = title;
}

function hideError() {
  var error = document.querySelector('#error');
  error.classList.remove('visible');
}

function showPlayButton() {
  var playButton = document.querySelector('#play-overlay');
  playButton.classList.add('visible');
}

function hidePlayButton() {
  var playButton = document.querySelector('#play-overlay');
  playButton.classList.remove('visible');
}

function showStats() {
  stats.setMode(0); // 0: fps, 1: ms

  // Align bottom-left.
  stats.domElement.style.position = 'absolute';
  stats.domElement.style.left = '0px';
  stats.domElement.style.bottom = '0px';
  document.body.appendChild(stats.domElement);
}

function loop(time) {
  stats.begin();
  // Update the video if needed.
  if (worldRenderer.videoProxy) {
    worldRenderer.videoProxy.update(time);
  }
  worldRenderer.render(time);
  stats.end();
  requestAnimationFrame(loop);
}

},{"../../node_modules/stats-js/build/stats.min":5,"../message":23,"../util":24,"./iframe-message-receiver":12,"./loading-indicator":13,"./scene-info":18,"./world-renderer":22,"es6-promise":2,"webvr-polyfill":8}],15:[function(require,module,exports){

var EventEmitter = require('eventemitter3');


function MultiplayerMode(worldRenderer) {
    this.worldRenderer = worldRenderer;
    this.camera = this.worldRenderer.camera;
}
MultiplayerMode.prototype = new EventEmitter();

MultiplayerMode.prototype.enableMultiplayerMode = function(){
    this.camera = this.worldRenderer.camera;
    this.leapMotion();
    if(this.me){
        var that = this;
        this.socket = io();
        this.socket.on("room-render-data",function(room){
            that.renderMe();
            that.renderRoom(room);
        });
        this.socket.on("room-joined",function(socketId){
            that.socketId = socketId;
        });
    }
};

MultiplayerMode.prototype.joinRoom = function(room){
    if(this.me){
        this.room = room;
        this.socket.emit("join-room",{room:room,me:{name:this.me.me.name,face:this.me.me.face},position:{x:this.camera.position.x,y:this.camera.position.y,z:this.camera.position.z},quaternion:{w:this.camera.quaternion._w,x:this.camera.quaternion._x,y:this.camera.quaternion._y,z:this.camera.quaternion._z},leftHand:[],rightHand:[]});
    }
};

MultiplayerMode.prototype.leaveRoom = function(room){
    this.socket.emit("leave-room",{room:room,me:{name:this.me.me.name,face:this.me.me.face}});
};

MultiplayerMode.prototype.renderMe = function(){
    this.me = {room:this.room,me:{name:this.me.me.name,face:this.me.me.face},position:{x:this.camera.position.x,y:this.camera.position.y,z:this.camera.position.z},quaternion:{w:this.camera.quaternion._w,x:this.camera.quaternion._x,y:this.camera.quaternion._y,z:this.camera.quaternion._z},leftHand:this.me.leftHand,rightHand:this.me.rightHand};
    this.socket.emit("room-render",this.me);
};
MultiplayerMode.prototype.update = function(){
    for(var id in MultiplayerMode.prototype.players){
        var player = MultiplayerMode.prototype.players[id];
        player.quaternion.copy(player.person.quaternion);
        //player.rotation.set(-(player.person.rotation.z),player.person.rotation.y,player.person.rotation.x);
    }
};
MultiplayerMode.prototype.players = {};
MultiplayerMode.prototype.renderRoom = function(room){
    var personCount = 0;
    for(var id in room.people){
        personCount++;
        var angle = 360*(room.people[id].number/2);
        if(id!=this.me.me.name){
            var cube;
            var person = room.people[id];
            if(!(this.players[person.me.name])){
                var geometry = new THREE.SphereGeometry( 15, 24, 24 );
                var material = new THREE.MeshPhongMaterial( {color: 0xefefef} );
                geometry.applyMatrix( new THREE.Matrix4().makeScale( 1.0, 1.2, 0.2 ) );
                cube = new THREE.Group();
                cube.cube = new THREE.Mesh( geometry, material );
                
                cube.cube.renderOrder=-1;
                cube.add(cube.cube);
                cube.leftMeshes=[];
                cube.rightMeshes=[];
                cube.originalPosition = {x:100*Math.cos(angle),z:100*Math.sin(angle)};
                cube.position.set(cube.originalPosition.x,0,cube.originalPosition.z);
                cube.person = person;
                this.players[person.me.name] = cube;
                this.worldRenderer.scene.add( cube );
                var loader = new THREE.TextureLoader();
                loader.crossOrigin = 'anonymous';
                loader.load(person.me.face, function(texture){
                    texture.wrapS = texture.wrapT = THREE.RepeatWrapping;
                    texture.offset.x = 0.75;
                    cube.cube.material.map = texture;
                    texture.needsUpdate=true;
                    cube.cube.material.needsUpdate=true;
                });
            }else{
                this.players[person.me.name].person = person;
                this.renderHands(this.players[person.me.name],person,false);
            }
        }else{
            var originalPosition = {x:100*Math.cos(angle),z:100*Math.sin(angle)};
            this.camera.parent.position.set(originalPosition.x,0,originalPosition.z);
        }
    }
    for(var id in MultiplayerMode.prototype.players){
        if(!(id in room.people)){
            this.worldRenderer.scene.remove( MultiplayerMode.prototype.players[id] );
            delete MultiplayerMode.prototype.players[id];
        }
    }
};

MultiplayerMode.prototype.setMe = function(data){
    this.me = {me:{name:data.name,face:data.face},position:{x:this.camera.position.x,y:this.camera.position.y,z:this.camera.position.z},quaternion:{w:this.camera.quaternion._w,x:this.camera.quaternion._x,y:this.camera.quaternion._y,z:this.camera.quaternion._z},leftHand:[],rightHand:[]};
};
MultiplayerMode.prototype.renderHands = function(object,frame,isLeap){
    var countBones = 0;
    var countArms = 0;
    if(isLeap){
        object.armMeshes.forEach( function( item ) { object.remove( item ); } );
        object.boneMeshes.forEach( function( item ) { object.remove( item ); } );
        this.me.leftHand=[];
        this.me.rightHand=[];
        for ( var hand of frame.hands ) {
            for ( var finger of hand.fingers ) {
                for ( var bone of finger.bones ) {
                    if ( countBones++ === 0 ) { continue; }
                    bone.center_ = bone.center();
                    bone.matrix_ = bone.matrix();
                    var boneMesh = object.boneMeshes [ countBones ] || this.addBoneMesh( object.boneMeshes );
                    this.updateBoneMesh( bone, boneMesh, object, isLeap );
                    this.addHandToMe(hand.type,bone);
                }
            }
            //var arm = hand.arm;
            //arm.center_ = arm.center();
            //arm.matrix_ = arm.matrix();
            //var armMesh = object.armMeshes [ countArms++ ] || this.addBoneMesh( object.armMeshes );
            ////this.addHandToMe(hand.type,arm);
            //this.updateBoneMesh( arm, armMesh, object, isLeap );
            //armMesh.scale.set( arm.width / 4, arm.width / 2, arm.length );
        }
    }else{
        object.leftMeshes.forEach( function( item ) { object.remove( item ); } );
        object.rightMeshes.forEach( function( item ) { object.remove( item ); } );
        var that = this;
        frame.leftHand.forEach(function(bone,i){
            var boneMesh = object.leftMeshes [ i ] || that.addBoneMesh( object.leftMeshes );
            that.updateBoneMesh( bone, boneMesh, object, isLeap );
        });
        frame.rightHand.forEach(function(bone,i){
            var boneMesh = object.rightMeshes [ i ] || that.addBoneMesh( object.rightMeshes );
            that.updateBoneMesh( bone, boneMesh, object, isLeap);
        });
    }
};

MultiplayerMode.prototype.addHandToMe = function( side, bone ) {
    this.me[side+"Hand"].push({center_: bone.center_});
};

MultiplayerMode.prototype.addBoneMesh = function( meshes ) {
    var geometry = new THREE.SphereGeometry( 1, 20, 20 );
    var material = new THREE.MeshPhongMaterial( {color: 0xefefef} );
    var mesh = new THREE.Mesh( geometry, material );
        mesh.renderOrder=1;
    meshes.push( mesh );
    return mesh;
};

MultiplayerMode.prototype.updateBoneMesh = function( bone, mesh, parent, isLeap) {
        if(isLeap){
            mesh.setRotationFromMatrix( new THREE.Matrix4().fromArray( bone.matrix_ ) );
            mesh.quaternion.multiply( new THREE.Quaternion().setFromEuler( new THREE.Euler( 0, 0, Math.PI / 2 ) ) );
            mesh.scale.set( bone.width/10, bone.width/10, bone.length*0.8 );
            mesh.position.set( bone.center_[0],bone.center_[1],bone.center_[2] );
        }else{
            mesh.position.set( bone.center_[0],bone.center_[1],bone.center_[2] );
        }
        parent.add( mesh );
};

MultiplayerMode.prototype.leapMotion = function(){
    var that = this;
    that.camera.armMeshes = [];
	that.camera.boneMeshes = [];
    
    Leap.loop({enableGestures:true,optimizeHMD: true,background: true}, function(frame){
        that.renderHands(that.camera,frame,true);
    }).use('transform', {
        quaternion: new THREE.Quaternion().setFromEuler(new THREE.Euler(Math.PI * -0.3, 0, Math.PI, 'ZXY')),
        position: new THREE.Vector3(0, 0,20),
        scale:0.18,
        //effectiveParent:that.camera
    })
    /*.use('boneHand', {
      // If you already have a scene or want to create it yourself, you can pass it in here
      // Alternatively, you can pass it in whenever you want by doing
      // Leap.loopController.plugins.boneHand.scene = myScene.
        scene: this.worldRenderer.scene,
      // Display the arm
        arm: true
    })*/;
};
module.exports = MultiplayerMode;
},{"eventemitter3":3}],16:[function(require,module,exports){

var Eyes = require('./eyes');
var TemplateRenderer = require('./template-renderer');

var SceneInfo = require('./scene-info');

function NavigationRenderer(worldRenderer) {
  this.setWorld(worldRenderer);
}

NavigationRenderer.prototype = new TemplateRenderer();
NavigationRenderer.prototype.next_ = function(){
  var keys = Object.keys(this.data);
  if(this.current<keys.length-1){
    this.current++;
    this.showCurrent();
  }
};

NavigationRenderer.prototype.prev_ = function(){
  if(this.current>0){
    this.current--;
    this.showCurrent();
  }
};
NavigationRenderer.prototype.showCurrent = function(){
  var current = this.data[Object.keys(this.data)[this.current]];
  var that = this;
  var loader = new THREE.TextureLoader();
  loader.crossOrigin = 'anonymous';
  loader.load(current.image, function(texture){
    var leftTexture = texture.clone();
    var rightTexture = texture.clone();
    rightTexture.wrapS = rightTexture.wrapT = leftTexture.wrapS = leftTexture.wrapT = THREE.RepeatWrapping;
    if (current.is_stereo){
      leftTexture.repeat.set(0.8, 0.4);
      rightTexture.repeat.set(0.8,0.4);
      leftTexture.offset.set(0.05,0.05);
      rightTexture.offset.set(0.05,0.55);
    }else{
      leftTexture.repeat.set(0.8, 0.8);
      rightTexture.repeat.set(0.8, 0.8);
      leftTexture.offset.set(0.1,0.1);
      rightTexture.offset.set(0.1,0.1);
    }
    that.planeLeft.material.map = leftTexture;
    that.planeRight.material.map = rightTexture;
    that.planeLeft.material.needsUpdate=true;
    that.planeRight.material.needsUpdate=true;
    that.planeLeft.material.map.needsUpdate=true;
    that.planeRight.material.map.needsUpdate=true;
  });
};

NavigationRenderer.prototype.createNavigationPlane_ = function() {
  var geometry =  new THREE.PlaneGeometry( 0.2, 0.2, 0.01);
  var material = new THREE.MeshBasicMaterial({transparent: true, opacity: 0.9});
  var plane = new THREE.Mesh( geometry, material );
  plane.position.set(0,-0.1,-0.4);
  plane.lookAt(this.worldRenderer.camera.position);
  return plane;
};

NavigationRenderer.prototype.createNavigationButton_ = function() {
  var geometry =  new THREE.CylinderGeometry(0, 0.03, 0.03, 3, 2, false);
  var material = new THREE.MeshPhongMaterial({/*transparent: true, opacity: 0.9,*/ color: 0xb388ff});
  var button = new THREE.Mesh( geometry, material );
 // button.lookAt(this.worldRenderer.camera.position);
  return button;
};

NavigationRenderer.prototype.update_ = function(camera) {
  if (this.worldRenderer.isVRMode()) {
    this.pointer.set(0, 0);
  }
  // Update the picking ray with the camera and mouse position.
  this.raycaster.setFromCamera(this.pointer, camera);	
  
  if(this.update&&typeof this.update == "function")this.update();
  
  var elements = this.worldRenderer.scene.getObjectByName('nav').children;
  
  var intersects = this.raycaster.intersectObjects(elements);
  var isIntersected = (intersects.length > 0);
  
  // If newly selected, emit a focus event.
  if (isIntersected) {
    this.currentElement = intersects[0].object;
  }else{
    this.currentElement = false;
  }
};

NavigationRenderer.prototype.setup = function(data) {
  this.data = data;
  this.planeLeft = this.createNavigationPlane_();
  this.planeRight = this.createNavigationPlane_();
  this.planeLeft.name = "planeLeft";
  this.planeRight.name = "planeRight";
  this.navLeft = this.createNavigationButton_();
  this.navRight = this.createNavigationButton_();
  this.navLeft.name = "navLeft";
  this.navRight.name = "navRight";
  this.navLeft.position.set(-0.1,-0.075,-0.3);
  this.navRight.position.set(0.1,-0.075,-0.3);
  this.navLeft.rotation.set(0,-(Math.PI/4),Math.PI/2);
  this.navRight.rotation.set(0,Math.PI/4,-(Math.PI/2));
  //this.add_(this.navLeft,"navLeft");
  //this.add_(this.navRight,"navRight");
  
  // Display in left and right eye respectively.
  this.planeLeft.layers.set(Eyes.LEFT);
  this.planeLeft.eye = Eyes.LEFT;
  this.planeRight.layers.set(Eyes.RIGHT);
  this.planeRight.eye = Eyes.RIGHT;
  this.worldRenderer.scene.getObjectByName('nav').children = [this.planeLeft, this.planeRight,this.navLeft,this.navRight];
  this.current=0;
  this.showCurrent();
};































NavigationRenderer.prototype.focus = function(id) {
  
};

NavigationRenderer.prototype.blur = function(id) {
  
};

NavigationRenderer.prototype.down = function(id) {
  //alert("this is the click");
  // Become active.
};

NavigationRenderer.prototype.up = function(id) {
  if(this.currentElement&&this.currentElement.name){
    if(this.currentElement.name=="navLeft")this.prev_();
    if(this.currentElement.name=="navRight")this.next_();
    if(this.currentElement.name=="planeLeft"){
      var that = this;
      var data = this.data[Object.keys(this.data)[this.current]];
      this.navLeft.visible = false;
      this.navRight.visible = false; 
      this.planeRight.visible = false; 
      this.planeLeft.visible = false; 
      this.worldRenderer.sphereRenderer.setOpacity(0, 500).then(function() {
        // Then load the new scene.
        var scene = SceneInfo.loadFromAPIParams({
          image: data.image,
          preview: data.preview,
          is_stereo: data.is_stereo,
          is_autopan_off: true
        });
        // Remove all of the hotspots.
        that.worldRenderer.hotspotRenderer.clearAll();
        // Destroy the world
        that.worldRenderer.destroy();
        // Update the URL to reflect the new scene. This is important particularily
        // on iOS where we use a fake fullscreen mode.
        var url = scene.getCurrentUrl();
        //console.log('Updating url to be %s', url);
        window.history.pushState(null, 'VR View', url);
        // And set the new scene.
        return that.worldRenderer.setScene(scene);
      }).then(function() {
        // Then fade the scene back in.
        that.worldRenderer.sphereRenderer.setOpacity(1, 500).then(function(){
          that.navLeft.visible = true;  
          that.navRight.visible = true;  
          that.planeRight.visible = true; 
          that.planeLeft.visible = true; 
        });
      });
    }
  }
  // Become inactive.
};

NavigationRenderer.prototype.setOpacity = function(opacity, duration) {
  
};


NavigationRenderer.prototype.update = function() {
  
  // Fade hotspots out if they are really far from center to avoid overly
  // distorted visuals.
  // this.fadeOffCenterHotspots_(camera);
};

module.exports = NavigationRenderer;
},{"./eyes":10,"./scene-info":18,"./template-renderer":20}],17:[function(require,module,exports){
function ReticleRenderer(camera) {
  this.camera = camera;

  this.reticle = this.createReticle_();
  // In front of the hotspot itself, which is at r=0.99.
  this.reticle.position.z = -0.97;
  camera.add(this.reticle);

  this.setVisibility(false);
}

ReticleRenderer.prototype.setVisibility = function(isVisible) {
  // TODO: Tween the transition.
  this.reticle.visible = isVisible;
};

ReticleRenderer.prototype.createReticle_ = function() {
  // Make a torus.
  var geometry = new THREE.TorusGeometry(0.02, 0.005, 10, 20);
  var material = new THREE.MeshBasicMaterial({color: 0x000000});
  var torus = new THREE.Mesh(geometry, material);

  return torus;
};

module.exports = ReticleRenderer;

},{}],18:[function(require,module,exports){
/*
 * Copyright 2015 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

var CAMEL_TO_UNDERSCORE = {
  video: 'video',
  image: 'image',
  preview: 'preview',
  isStereo: 'is_stereo',
  defaultYaw: 'default_yaw',
  isYawOnly: 'is_yaw_only',
  isDebug: 'is_debug',
  isVROff: 'is_vr_off',
  isAutopanOff: 'is_autopan_off',
};

/**
 * Contains all information about a given scene.
 */
function SceneInfo(opt_params) {
  var params = opt_params || {};

  this.image = params.image;
  this.preview = params.preview;
  this.video = params.video;
  this.defaultYaw = THREE.Math.degToRad(params.defaultYaw || 0);

  this.isStereo = Util.parseBoolean(params.isStereo);
  this.isYawOnly = Util.parseBoolean(params.isYawOnly);
  this.isDebug = Util.parseBoolean(params.isDebug);
  this.isVROff = Util.parseBoolean(params.isVROff);
  this.isAutopanOff = Util.parseBoolean(params.isAutopanOff);
}

SceneInfo.loadFromGetParams = function() {
  var params = {};
  for (var camelCase in CAMEL_TO_UNDERSCORE) {
    var underscore = CAMEL_TO_UNDERSCORE[camelCase];
    params[camelCase] = Util.getQueryParameter(underscore);
  }
  var scene = new SceneInfo(params);
  if (!scene.isValid()) {
    console.warn('Invalid scene: %s', scene.errorMessage);
  }
  return scene;
};

SceneInfo.loadFromAPIParams = function(underscoreParams) {
  var params = {};
  for (var camelCase in CAMEL_TO_UNDERSCORE) {
    var underscore = CAMEL_TO_UNDERSCORE[camelCase];
    if (underscoreParams[underscore]) {
      params[camelCase] = underscoreParams[underscore];
    }
  }
  var scene = new SceneInfo(params);
  if (!scene.isValid()) {
    console.warn('Invalid scene: %s', scene.errorMessage);
  }
  return scene;
};

SceneInfo.prototype.isValid = function() {
  // Either it's an image or a video.
  if (!this.image && !this.video) {
    this.errorMessage = 'Either image or video URL must be specified.';
    return false;
  }
  if (this.image && this.video) {
    this.errorMessage = 'Both image and video URL can\'t be specified.';
    return false;
  }
  if (this.image && !this.isValidImage_(this.image)) {
    this.errorMessage = 'Invalid image URL: ' + this.image;
    return false;
  }
  this.errorMessage = null;
  return true;
};

/**
 * Generates a URL to reflect this scene.
 */
SceneInfo.prototype.getCurrentUrl = function() {
  var url = location.protocol + '//' + location.host + location.pathname + '?';
  for (var camelCase in CAMEL_TO_UNDERSCORE) {
    var underscore = CAMEL_TO_UNDERSCORE[camelCase];
    var value = this[camelCase];
    if (value !== undefined) {
      url += underscore + '=' + value + '&';
    }
  }
  // Chop off the trailing ampersand.
  return url.substring(0, url.length - 1);
};

SceneInfo.prototype.isValidImage_ = function(imageUrl) {
  return true;
};

module.exports = SceneInfo;

},{}],19:[function(require,module,exports){
/*
 * Copyright 2015 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

var Eyes = require('./eyes');
var TWEEN = require('tween.js');
var Util = require('../util');

function SphereRenderer(scene) {
  this.scene = scene;

  // Create a transparent mask.
  this.createOpacityMask_();
}

/**
 * Sets the photosphere based on the image in the source. Supports stereo and
 * mono photospheres.
 *
 * @return {Promise}
 */
SphereRenderer.prototype.setPhotosphere = function(src, opt_params) {
  return new Promise(function(resolve, reject) {
    this.resolve = resolve;
    this.reject = reject;

    var params = opt_params || {};

    this.isStereo = !!params.isStereo;
    this.src = src;

    // Load texture.
    var loader = new THREE.TextureLoader();
    loader.crossOrigin = 'anonymous';
    loader.load(src, this.onTextureLoaded_.bind(this), undefined,
                this.onTextureError_.bind(this));
  }.bind(this));
};

/**
 * @return {Promise} Yeah.
 */
SphereRenderer.prototype.set360Video = function(videoElement, opt_params) {
  return new Promise(function(resolve, reject) {
    this.resolve = resolve;
    this.reject = reject;

    var params = opt_params || {};

    this.isStereo = !!params.isStereo;

    // Load the video texture.
    var videoTexture = new THREE.VideoTexture(videoElement);
    videoTexture.minFilter = THREE.NearestFilter;
    videoTexture.magFilter = THREE.NearestFilter;
    videoTexture.format = THREE.RGBFormat;
    videoTexture.generateMipmaps = false;
    videoTexture.needsUpdate = true;

    this.onTextureLoaded_(videoTexture);
  }.bind(this));
};

/**
 * Set the opacity of the panorama.
 *
 * @param {Number} opacity How opaque we want the panorama to be. 0 means black,
 * 1 means full color.
 * @param {Number} duration Number of milliseconds the transition should take.
 *
 * @return {Promise} When the opacity change is complete.
 */
SphereRenderer.prototype.setOpacity = function(opacity, duration) {
  var scene = this.scene;
  // If we want the opacity
  var overlayOpacity = 1 - opacity;
  return new Promise(function(resolve, reject) {
    var mask = scene.getObjectByName('opacityMask');
    var tween = new TWEEN.Tween({opacity: mask.material.opacity})
        .to({opacity: overlayOpacity}, duration)
        .easing(TWEEN.Easing.Quadratic.InOut);
    tween.onUpdate(function(e) {
      mask.material.opacity = this.opacity;
    });
    tween.onComplete(resolve).start();
  });
};

SphereRenderer.prototype.onTextureLoaded_ = function(texture) {
  var sphereLeft;
  var sphereRight;
  if (this.isStereo) {
    sphereLeft = this.createPhotosphere_(texture, {offsetY: 0.5, scaleY: 0.5});
    sphereRight = this.createPhotosphere_(texture, {offsetY: 0, scaleY: 0.5});
  } else {
    sphereLeft = this.createPhotosphere_(texture);
    sphereRight = this.createPhotosphere_(texture);
  }

  // Display in left and right eye respectively.
  sphereLeft.layers.set(Eyes.LEFT);
  sphereLeft.eye = Eyes.LEFT;
  sphereRight.layers.set(Eyes.RIGHT);
  sphereRight.eye = Eyes.RIGHT;

  this.scene.getObjectByName('photo').children = [sphereLeft, sphereRight];

  this.resolve();
};

SphereRenderer.prototype.onTextureError_ = function(error) {
  this.reject('Unable to load texture from "' + this.src + '"');
};


SphereRenderer.prototype.createPhotosphere_ = function(texture, opt_params) {
  var p = opt_params || {};
  p.scaleX = p.scaleX || 1;
  p.scaleY = p.scaleY || 1;
  p.offsetX = p.offsetX || 0;
  p.offsetY = p.offsetY || 0;
  p.phiStart = p.phiStart || 0;
  p.phiLength = p.phiLength || Math.PI * 2;
  p.thetaStart = p.thetaStart || 0;
  p.thetaLength = p.thetaLength || Math.PI;

  var geometry = new THREE.SphereGeometry(1000, 48, 48,
      p.phiStart, p.phiLength, p.thetaStart, p.thetaLength);
  geometry.applyMatrix(new THREE.Matrix4().makeScale(-1, 1, 1));
  var uvs = geometry.faceVertexUvs[0];
  for (var i = 0; i < uvs.length; i ++) {
    for (var j = 0; j < 3; j ++) {
      uvs[i][j].x *= p.scaleX;
      uvs[i][j].x += p.offsetX;
      uvs[i][j].y *= p.scaleY;
      uvs[i][j].y += p.offsetY;
    }
  }

  var material = new THREE.MeshBasicMaterial({ map: texture });
  var out = new THREE.Mesh(geometry, material);
  //out.visible = false;
  out.renderOrder = -1;
  return out;
};

SphereRenderer.prototype.createOpacityMask_ = function() {
  var geometry = new THREE.SphereGeometry(0.2, 48, 48);
  var material = new THREE.MeshBasicMaterial({
    color: 0x000000, side: THREE.DoubleSide, opacity: 0, transparent: true});
  var opacityMask = new THREE.Mesh(geometry, material);
  opacityMask.name = 'opacityMask';
  opacityMask.renderOrder = 1;

  this.scene.add(opacityMask);
  return opacityMask;
};

module.exports = SphereRenderer;

},{"../util":24,"./eyes":10,"tween.js":6}],20:[function(require,module,exports){

var EventEmitter = require('eventemitter3');


function TemplateRenderer() {
}
TemplateRenderer.prototype = new EventEmitter();

TemplateRenderer.prototype.setWorld = function(worldRenderer){
  
  this.worldRenderer = worldRenderer;
  // Note: this event must be added to document.body and not to window for it to
  // work inside iOS iframes.
  var body = document.body;
  // Bind events for hotspot interaction.
  if (!Util.isMobile()) {
    // Only enable mouse events on desktop.
    body.addEventListener('mousedown', this.onMouseDown_.bind(this), false);
    body.addEventListener('mousemove', this.onMouseMove_.bind(this), false);
    body.addEventListener('mouseup', this.onMouseUp_.bind(this), false);
  }
  body.addEventListener('touchstart', this.onTouchStart_.bind(this), false);
  body.addEventListener('touchend', this.onTouchEnd_.bind(this), false);

  // Add a placeholder for hotspots.
  this.root = new THREE.Group();
  // Align the center with the center of the camera too.
  this.root.rotation.y = Math.PI / 2;
  this.worldRenderer.scene.add(this.root);

  // All element IDs.
  this.elements = {};

  // Currently selected elements.
  this.selectedElements = {};

  // Elements that the last touchstart / mousedown event happened for.
  this.downElements = {};

  // For raycasting. Initialize mouse to be off screen initially.
  this.pointer = new THREE.Vector2(1, 1);
  this.raycaster = new THREE.Raycaster();
  // TODO: Tween this animation.
  this.setVisibility(false);
}

TemplateRenderer.prototype.setVisibility = function(isVisible) {
  this.root.visible = isVisible;
};

TemplateRenderer.prototype.onTouchStart_ = function(e) {
  // In VR mode, don't touch the pointer position.
  if (!this.worldRenderer.isVRMode()) {
    this.updateTouch_(e);
  }

  // Force a camera update to see if any hotspots were selected.
  this.update(this.worldRenderer.camera);

  this.downElements = {};
  for (var id in this.selectedHotspots) {
    this.downElements[id] = true;
    if(this.down&&typeof this.down == "function")this.down(id);
  }
  return false;
};

TemplateRenderer.prototype.onTouchEnd_ = function(e) {
  // If no hotspots are pressed, emit an empty click event.
  
    if(this.up&&typeof this.up == "function")this.up();
};

TemplateRenderer.prototype.updateTouch_ = function(e) {
  var size = this.worldRenderer.renderer.getSize();
  var touch = e.touches[0];
	this.pointer.x = (touch.clientX / size.width) * 2 - 1;
	this.pointer.y = - (touch.clientY / size.height) * 2 + 1;	
};

TemplateRenderer.prototype.onMouseDown_ = function(e) {
  this.updateMouse_(e);
  if(this.down&&typeof this.down == "function")this.down();
};

TemplateRenderer.prototype.onMouseMove_ = function(e) {
  this.updateMouse_(e);
};

TemplateRenderer.prototype.onMouseUp_ = function(e) {
  this.updateMouse_(e);
  if(this.up&&typeof this.up == "function")this.up();
};

TemplateRenderer.prototype.updateMouse_ = function(e) {
  var size = this.worldRenderer.renderer.getSize();
	this.pointer.x = (e.clientX / size.width) * 2 - 1;
	this.pointer.y = - (e.clientY / size.height) * 2 + 1;	
};

TemplateRenderer.prototype.add_ = function(element, id/*, image, is_stereo*/) {
    // If a hotspot already exists with this ID, stop.
    if (this.elements[id]) {
      // TODO: Proper error reporting.
      console.error('Attempt to add element with existing id %s.', id);
      return;
    }
    if(element){
        element.name = id;
        this.root.add(element);
        this.elements[id] = element;
    }
};


TemplateRenderer.prototype.remove = function(id) {
  // If there's no hotspot with this ID, fail.
  if (!this.elements[id]) { 
    // TODO: Proper error reporting.
    console.error('Attempt to remove non-existing hotspot with id %s.', id);
    return;
  }
  // Remove the mesh from the scene.
  this.root.remove(this.elements[id]);

  // If this hotspot was selected, make sure it gets unselected.
  delete this.selectedElements[id];
  delete this.downElements[id];
  delete this.elements[id];
  this.emit('blur', id);
};

/**
 * Clears all hotspots from the pano. Often called when changing panos.
 */
TemplateRenderer.prototype.clearAll = function() {
  for (var id in this.elements) {
    this.remove(id);
  }
};

TemplateRenderer.prototype.getCount = function() {
  var count = 0;
  for (var id in this.elements) {
    count += 1;
  }
  return count;
};

module.exports = TemplateRenderer;
},{"eventemitter3":3}],21:[function(require,module,exports){
var Util = require('../util');

/**
 * A proxy class for working around the fact that as soon as a video is play()ed
 * on iOS, Safari auto-fullscreens the video.
 *
 * TODO(smus): The entire raison d'etre for this class is to work around this
 * issue. Once Safari implements some way to suppress this fullscreen player, we
 * can remove this code.
 */
function VideoProxy(videoElement) {
  this.videoElement = videoElement;
  // True if we're currently manually advancing the playhead (only on iOS).
  this.isFakePlayback = false;

  // When the video started playing.
  this.startTime = null;
}

VideoProxy.prototype.play = function() {
  if (Util.isIOS9OrLess()) {
    this.startTime = performance.now();
    this.isFakePlayback = true;

    // Make an audio element to playback just the audio part.
    this.audioElement = new Audio();
    this.audioElement.src = this.videoElement.src;
    this.audioElement.play();
  } else {
    this.videoElement.play().then(function(e) {
      console.log('Playing video.', e);
    });
  }
};

VideoProxy.prototype.pause = function() {
  if (Util.isIOS9OrLess() && this.isFakePlayback) {
    this.isFakePlayback = true;

    this.audioElement.pause();
  } else {
    this.videoElement.pause();
  }
};

VideoProxy.prototype.setVolume = function(volumeLevel) {
  if (this.videoElement) {
    // On iOS 10, the VideoElement.volume property is read-only. So we special
    // case muting and unmuting.
    if (Util.isIOS()) {
      this.videoElement.muted = (volumeLevel === 0);
    } else {
      this.videoElement.volume = volumeLevel;
    }
  }
  if (this.audioElement) {
    this.audioElement.volume = volumeLevel;
  }
};

/**
 * Called on RAF to progress playback.
 */
VideoProxy.prototype.update = function() {
  // Fakes playback for iOS only.
  if (!this.isFakePlayback) {
    return;
  }
  var duration = this.videoElement.duration;
  var now = performance.now();
  var delta = now - this.startTime;
  var deltaS = delta / 1000;
  this.videoElement.currentTime = deltaS;

  // Loop through the video
  if (deltaS > duration) {
    this.startTime = now;
    this.videoElement.currentTime = 0;
    // Also restart the audio.
    this.audioElement.currentTime = 0;
  }
};

module.exports = VideoProxy;

},{"../util":24}],22:[function(require,module,exports){
/*
 * Copyright 2016 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var AdaptivePlayer = require('./adaptive-player');
var EventEmitter = require('eventemitter3');
var Eyes = require('./eyes');
var HotspotRenderer = require('./hotspot-renderer');
var ReticleRenderer = require('./reticle-renderer');
var NavigationRenderer = require('./navigation-renderer');
var MultiplayerMode = require('./multiplayer-mode');
var SphereRenderer = require('./sphere-renderer');
var TWEEN = require('tween.js');
var Util = require('../util');
var VideoProxy = require('./video-proxy');
var WebVRManager = require('webvr-boilerplate');

var AUTOPAN_DURATION = 3000;
var AUTOPAN_ANGLE = 0.4;


/**
 * The main WebGL rendering entry point. Manages the scene, camera, VR-related
 * rendering updates. Interacts with the WebVRManager.
 *
 * Coordinates the other renderers: SphereRenderer, HotspotRenderer,
 * ReticleRenderer.
 *
 * Also manages the AdaptivePlayer and VideoProxy.
 *
 * Emits the following events:
 *   load: when the scene is loaded.
 *   error: if there is an error loading the scene.
 *   modechange(Boolean isVR): if the mode (eg. VR, fullscreen, etc) changes.
 */
function WorldRenderer() {
  this.init_();

  this.sphereRenderer = new SphereRenderer(this.scene);
  this.reticleRenderer = new ReticleRenderer(this.camera);
  this.hotspotRenderer = new HotspotRenderer(this);
  this.navigationRenderer = new NavigationRenderer(this);
  this.multiplayerMode = new MultiplayerMode(this);
  this.hotspotRenderer.on('focus', this.onHotspotFocus_.bind(this));
  this.hotspotRenderer.on('blur', this.onHotspotBlur_.bind(this));
}
WorldRenderer.prototype = new EventEmitter();

WorldRenderer.prototype.render = function(time) {
  this.controls.update();
  this.hotspotRenderer.update(this.camera);
  this.navigationRenderer.update_(this.camera);
  this.multiplayerMode.update();
  TWEEN.update(time);
  this.effect.render(this.scene, this.camera);
};

/**
 * @return {Promise} When the scene is fully loaded.
 */
WorldRenderer.prototype.setScene = function(scene) {
  var self = this;
  var promise = new Promise(function(resolve, reject) {
    self.sceneResolve = resolve;
    self.sceneReject = reject;
  });

  if (!scene || !scene.isValid()) {
    this.didLoadFail_(scene.errorMessage);
    return;
  }

  var params = {
    isStereo: scene.isStereo,
  };
  this.setDefaultYaw_(scene.defaultYaw || 0);

  // Disable VR mode if explicitly disabled, or if we're loading a video on iOS
  // 9 or earlier.
  if (scene.isVROff || (scene.video && Util.isIOS9OrLess())) {
    this.manager.setVRCompatibleOverride(false);
  }

  // Set various callback overrides in iOS.
  if (Util.isIOS()) {
    this.manager.setFullscreenCallback(function() {
      Util.sendParentMessage({type: 'enter-fullscreen'});
    });
    this.manager.setExitFullscreenCallback(function() {
      Util.sendParentMessage({type: 'exit-fullscreen'});
    });
    this.manager.setVRCallback(function() {
      Util.sendParentMessage({type: 'enter-vr'});
    });
  }

  // If we're dealing with an image, and not a video.
  if (scene.image && !scene.video) {
    if (scene.preview) {
      // First load the preview.
      this.sphereRenderer.setPhotosphere(scene.preview, params).then(function() {
        // As soon as something is loaded, emit the load event to hide the
        // loading progress bar.
        self.didLoad_();
        // Then load the full resolution image.
        self.sphereRenderer.setPhotosphere(scene.image, params);
      }).catch(self.didLoadFail_.bind(self));
    } else {
      // No preview -- go straight to rendering the full image.
      this.sphereRenderer.setPhotosphere(scene.image, params).then(function() {
        self.didLoad_();
      }).catch(self.didLoadFail_.bind(self));
    }
  } else if (scene.video) {
    if (Util.isIE11()) {
      // On IE 11, if an 'image' param is provided, load it instead of showing
      // an error.
      //
      // TODO(smus): Once video textures are supported, remove this fallback.
      if (scene.image) {
        this.sphereRenderer.setPhotosphere(scene.image, params).then(function() {
          self.didLoad_();
        }).catch(self.didLoadFail_.bind(self));
      } else {
        this.didLoadFail_('Video is not supported on IE11.');
      }
    } else {
      this.player = new AdaptivePlayer();
      this.player.on('load', function(videoElement) {
        self.sphereRenderer.set360Video(videoElement, params).then(function() {
          self.didLoad_({videoElement: videoElement});
        }).catch(self.didLoadFail_.bind(self));
      });
      this.player.on('error', function(error) {
        self.didLoadFail_('Video load error: ' + error);
      });
      this.player.load(scene.video);

      this.videoProxy = new VideoProxy(this.player.video);
    }
  }

  this.sceneInfo = scene;
 // console.log('Loaded scene', scene);

  return promise;
};

WorldRenderer.prototype.isVRMode = function() {
  return !!this.vrDisplay && this.vrDisplay.isPresenting;
};

WorldRenderer.prototype.destroy = function() {
  if (this.player) {
    this.player.removeAllListeners();
    this.player.destroy();
    this.player = null;
  }
}

WorldRenderer.prototype.didLoad_ = function(opt_event) {
  var event = opt_event || {};
  this.emit('load', event);
  if (this.sceneResolve) {
    this.sceneResolve();
  }
};

WorldRenderer.prototype.didLoadFail_ = function(message) {
  this.emit('error', message);
  if (this.sceneReject) {
    this.sceneReject(message);
  }
};

/**
 * Sets the default yaw.
 * @param {Number} angleRad The yaw in radians.
 */
WorldRenderer.prototype.setDefaultYaw_ = function(angleRad) {
  // Rotate the camera parent to take into account the scene's rotation.
  // By default, it should be at the center of the image.
  //this.camera.parent.rotation.y = (Math.PI / 2.0) + angleRad;
};

/**
 * Do the initial camera tween to rotate the camera, giving an indication that
 * there is live content there (on desktop only).
 */
WorldRenderer.prototype.autopan = function(duration) {
  var targetY = this.camera.parent.rotation.y - AUTOPAN_ANGLE;
  var tween = new TWEEN.Tween(this.camera.parent.rotation)
      .to({y: targetY}, AUTOPAN_DURATION)
      .easing(TWEEN.Easing.Quadratic.Out)
      .start();
};

WorldRenderer.prototype.init_ = function() {
  var container = document.querySelector('body');
  var aspect = window.innerWidth / window.innerHeight;
  var camera = new THREE.PerspectiveCamera(75, aspect, 0.000000001, 500);
  camera.layers.enable(1);

  var cameraDummy = new THREE.Object3D();
  cameraDummy.add(camera);

  // Antialiasing disabled to improve performance.
  var renderer = new THREE.WebGLRenderer({antialias: true});
  renderer.setClearColor(0x000000, 0);
  renderer.setSize(window.innerWidth, window.innerHeight);
  renderer.setPixelRatio(window.devicePixelRatio);

  container.appendChild(renderer.domElement);

  var controls = new THREE.VRControls(camera);
  var effect = new THREE.VREffect(renderer);

  // Disable eye separation.
  effect.scale = 0;
  effect.setSize(window.innerWidth, window.innerHeight);

  this.camera = camera;
  this.renderer = renderer;
  this.effect = effect;
  this.controls = controls;
  this.manager = new WebVRManager(renderer, effect, {predistorted: false});

  this.scene = this.createScene_();
  this.scene.add(this.camera.parent);


  // Watch the resize event.
  window.addEventListener('resize', this.onResize_.bind(this));

  // Prevent context menu.
  window.addEventListener('contextmenu', this.onContextMenu_.bind(this));

  window.addEventListener('vrdisplaypresentchange',
                          this.onVRDisplayPresentChange_.bind(this));
};

WorldRenderer.prototype.onResize_ = function() {
  this.effect.setSize(window.innerWidth, window.innerHeight);
  this.camera.aspect = window.innerWidth / window.innerHeight;
  this.camera.updateProjectionMatrix();
};

WorldRenderer.prototype.onVRDisplayPresentChange_ = function(e) {
  console.log('onVRDisplayPresentChange_');
  this.vrDisplay = e.detail.vrdisplay;
  var isVR = this.isVRMode();

  // If the mode changed to VR and there is at least one hotspot, show reticle.
  //var isReticleVisible = isVR;
  this.reticleRenderer.setVisibility(isVR);
  //console.log('Mode changed and reticle visibility is now: %s', isReticleVisible);

  // Resize the renderer for good measure.
  this.onResize_();

  // Analytics.
  if (window.analytics) {
    analytics.logModeChanged(isVR);
  }

  // When exiting VR mode, make sure we emit back an exit-fullscreen event.
  if (!isVR && Util.isIOS()) {
    Util.sendParentMessage({type: 'exit-fullscreen'});
  }

  // Emit a mode change event back to any listeners.
  this.emit('modechange', isVR);
};

WorldRenderer.prototype.createScene_ = function(opt_params) {
  var scene = new THREE.Scene();

  // Add a group for the photosphere.
  var photoGroup = new THREE.Object3D();
  photoGroup.name = 'photo';
  scene.add(photoGroup);

  // Add a group for the navigation.
  var navGroup = new THREE.Object3D();
  navGroup.name = 'nav';
  scene.add(navGroup);
  
  scene.add(new THREE.AmbientLight(0xFFFFFF));
  return scene;
};

WorldRenderer.prototype.onHotspotFocus_ = function(id) {
  //console.log('onHotspotFocus_', id);
  // Set the default cursor to be a pointer.
  this.setCursor_('pointer');
};

WorldRenderer.prototype.onHotspotBlur_ = function(id) {
  //console.log('onHotspotBlur_', id);
  // Reset the default cursor to be the default one.
  this.setCursor_('');
};

WorldRenderer.prototype.setCursor_ = function(cursor) {
  this.renderer.domElement.style.cursor = cursor;
};

WorldRenderer.prototype.onContextMenu_ = function(e) {
  e.preventDefault();
  e.stopPropagation();
  return false;
};


module.exports = WorldRenderer;

},{"../util":24,"./adaptive-player":9,"./eyes":10,"./hotspot-renderer":11,"./multiplayer-mode":15,"./navigation-renderer":16,"./reticle-renderer":17,"./sphere-renderer":19,"./video-proxy":21,"eventemitter3":3,"tween.js":6,"webvr-boilerplate":7}],23:[function(require,module,exports){
/**
 * Messages from the API to the embed.
 */
var Message = {
  PLAY: 'play',
  PAUSE: 'pause',
  ADD_HOTSPOT: 'addhotspot',
  SET_CONTENT: 'setimage',
  SET_VOLUME: 'setvolume',
  DEVICE_MOTION: 'devicemotion',
  SETUP_NAVIGATION: 'navigation',
  ENABLE_MULTIPLAYER_MODE: 'multiplayer-enable',
  JOIN_MULTIPLAYER_ROOM: 'multiplayer-join',
  LEAVE_MULTIPLAYER_ROOM: 'multiplayer-leave',
  SET_MULTIPLAYER_ME: 'multiplayer-me'
};
var Callbacks = {};
for(type in Message){
  Callbacks[Message[type]] = function(){};
}
Message.callbacks = Callbacks;
module.exports = Message;

},{}],24:[function(require,module,exports){
/*
 * Copyright 2015 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

Util = window.Util || {};

Util.isDataURI = function(src) {
  return src && src.indexOf('data:') == 0;
};

Util.generateUUID = function() {
  function s4() {
    return Math.floor((1 + Math.random()) * 0x10000)
    .toString(16)
    .substring(1);
  }
  return s4() + s4() + '-' + s4() + '-' + s4() + '-' +
    s4() + '-' + s4() + s4() + s4();
};

Util.isMobile = function() {
  var check = false;
  (function(a){if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4)))check = true})(navigator.userAgent||navigator.vendor||window.opera);
  return check;
};

Util.isIOS = function() {
  return /(iPad|iPhone|iPod)/g.test(navigator.userAgent);
};

Util.isSafari = function() {
  return /^((?!chrome|android).)*safari/i.test(navigator.userAgent);
};

Util.cloneObject = function(obj) {
  var out = {};
  for (key in obj) {
    out[key] = obj[key];
  }
  return out;
};

Util.hashCode = function(s) {
  return s.split("").reduce(function(a,b){a=((a<<5)-a)+b.charCodeAt(0);return a&a},0);
};

Util.loadTrackSrc = function(context, src, callback, opt_progressCallback) {
  var request = new XMLHttpRequest();
  request.open('GET', src, true);
  request.responseType = 'arraybuffer';

  // Decode asynchronously.
  request.onload = function() {
    context.decodeAudioData(request.response, function(buffer) {
      callback(buffer);
    }, function(e) {
      console.error(e);
    });
  };
  if (opt_progressCallback) {
    request.onprogress = function(e) {
      var percent = e.loaded / e.total;
      opt_progressCallback(percent);
    };
  }
  request.send();
};

Util.isPow2 = function(n) {
  return (n & (n - 1)) == 0;
};

Util.capitalize = function(s) {
  return s.charAt(0).toUpperCase() + s.slice(1);
};

Util.isIFrame = function() {
  try {
    return window.self !== window.top;
  } catch (e) {
    return true;
  }
};

// From http://goo.gl/4WX3tg
Util.getQueryParameter = function(name) {
  name = name.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
  var regex = new RegExp("[\\?&]" + name + "=([^&#]*)"),
      results = regex.exec(location.search);
  return results === null ? "" : decodeURIComponent(results[1].replace(/\+/g, " "));
};


// From http://stackoverflow.com/questions/11871077/proper-way-to-detect-webgl-support.
Util.isWebGLEnabled = function() {
  var canvas = document.createElement('canvas');
  try { gl = canvas.getContext("webgl"); }
  catch (x) { gl = null; }

  if (gl == null) {
    try { gl = canvas.getContext("experimental-webgl"); experimental = true; }
    catch (x) { gl = null; }
  }
  return !!gl;
};

Util.clone = function(obj) {
  return JSON.parse(JSON.stringify(obj));
};

// From http://stackoverflow.com/questions/10140604/fastest-hypotenuse-in-javascript
Util.hypot = Math.hypot || function(x, y) {
  return Math.sqrt(x*x + y*y);
};

// From http://stackoverflow.com/a/17447718/693934
Util.isIE11 = function() {
  return navigator.userAgent.match(/Trident/);
};

Util.getRectCenter = function(rect) {
  return new THREE.Vector2(rect.x + rect.width/2, rect.y + rect.height/2);
};

Util.getScreenWidth = function() {
  return Math.max(window.screen.width, window.screen.height) *
      window.devicePixelRatio;
};

Util.getScreenHeight = function() {
  return Math.min(window.screen.width, window.screen.height) *
      window.devicePixelRatio;
};

Util.isIOS9OrLess = function() {
  if (!Util.isIOS()) {
    return false;
  }
  var re = /(iPhone|iPad|iPod) OS ([\d_]+)/;
  var iOSVersion = navigator.userAgent.match(re);
  if (!iOSVersion) {
    return false;
  }
  // Get the last group.
  var versionString = iOSVersion[iOSVersion.length - 1];
  var majorVersion = parseFloat(versionString);
  return majorVersion <= 9;
};

Util.getExtension = function(url) {
  return url.split('.').pop();
};

Util.createGetParams = function(params) {
  var out = '?';
  for (var k in params) {
    var paramString = k + '=' + params[k] + '&';
    out += paramString;
  }
  // Remove the trailing ampersand.
  out.substring(0, params.length - 2);
  return out;
};

Util.sendParentMessage = function(message) {
  if (window.parent) {
    parent.postMessage(message, '*');
  }
};

Util.parseBoolean = function(value) {
  if (value == 'false' || value == 0) {
    return false;
  } else if (value == 'true' || value == 1) {
    return true;
  } else {
    return !!value;
  }
};

module.exports = Util;

},{}]},{},[14])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL0FwcERhdGEvUm9hbWluZy9ucG0vbm9kZV9tb2R1bGVzL3dhdGNoaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCIuLi8uLi9BcHBEYXRhL1JvYW1pbmcvbnBtL25vZGVfbW9kdWxlcy93YXRjaGlmeS9ub2RlX21vZHVsZXMvcHJvY2Vzcy9icm93c2VyLmpzIiwibm9kZV9tb2R1bGVzL2VzNi1wcm9taXNlL2Rpc3QvZXM2LXByb21pc2UuanMiLCJub2RlX21vZHVsZXMvZXZlbnRlbWl0dGVyMy9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy9zaGFrYS1wbGF5ZXIvZGlzdC9zaGFrYS1wbGF5ZXIuY29tcGlsZWQuanMiLCJub2RlX21vZHVsZXMvc3RhdHMtanMvYnVpbGQvc3RhdHMubWluLmpzIiwibm9kZV9tb2R1bGVzL3R3ZWVuLmpzL3NyYy9Ud2Vlbi5qcyIsIm5vZGVfbW9kdWxlcy93ZWJ2ci1ib2lsZXJwbGF0ZS9idWlsZC93ZWJ2ci1tYW5hZ2VyLmpzIiwibm9kZV9tb2R1bGVzL3dlYnZyLXBvbHlmaWxsL2J1aWxkL3dlYnZyLXBvbHlmaWxsLmpzIiwic3JjL2VtYmVkL2FkYXB0aXZlLXBsYXllci5qcyIsInNyYy9lbWJlZC9leWVzLmpzIiwic3JjL2VtYmVkL2hvdHNwb3QtcmVuZGVyZXIuanMiLCJzcmMvZW1iZWQvaWZyYW1lLW1lc3NhZ2UtcmVjZWl2ZXIuanMiLCJzcmMvZW1iZWQvbG9hZGluZy1pbmRpY2F0b3IuanMiLCJzcmMvZW1iZWQvbWFpbi5qcyIsInNyYy9lbWJlZC9tdWx0aXBsYXllci1tb2RlLmpzIiwic3JjL2VtYmVkL25hdmlnYXRpb24tcmVuZGVyZXIuanMiLCJzcmMvZW1iZWQvcmV0aWNsZS1yZW5kZXJlci5qcyIsInNyYy9lbWJlZC9zY2VuZS1pbmZvLmpzIiwic3JjL2VtYmVkL3NwaGVyZS1yZW5kZXJlci5qcyIsInNyYy9lbWJlZC90ZW1wbGF0ZS1yZW5kZXJlci5qcyIsInNyYy9lbWJlZC92aWRlby1wcm94eS5qcyIsInNyYy9lbWJlZC93b3JsZC1yZW5kZXJlci5qcyIsInNyYy9tZXNzYWdlLmpzIiwic3JjL3V0aWwuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDcExBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUNqb0NBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDalNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDM1JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNOQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUN0MkJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUM5akJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDeGtMQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDakhBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNwQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN0WkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDcEZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3REQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3BTQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDL0xBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzNOQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDMUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDaEhBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMxS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3JKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNwRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNyVUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN0QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiLy8gc2hpbSBmb3IgdXNpbmcgcHJvY2VzcyBpbiBicm93c2VyXG52YXIgcHJvY2VzcyA9IG1vZHVsZS5leHBvcnRzID0ge307XG5cbi8vIGNhY2hlZCBmcm9tIHdoYXRldmVyIGdsb2JhbCBpcyBwcmVzZW50IHNvIHRoYXQgdGVzdCBydW5uZXJzIHRoYXQgc3R1YiBpdFxuLy8gZG9uJ3QgYnJlYWsgdGhpbmdzLiAgQnV0IHdlIG5lZWQgdG8gd3JhcCBpdCBpbiBhIHRyeSBjYXRjaCBpbiBjYXNlIGl0IGlzXG4vLyB3cmFwcGVkIGluIHN0cmljdCBtb2RlIGNvZGUgd2hpY2ggZG9lc24ndCBkZWZpbmUgYW55IGdsb2JhbHMuICBJdCdzIGluc2lkZSBhXG4vLyBmdW5jdGlvbiBiZWNhdXNlIHRyeS9jYXRjaGVzIGRlb3B0aW1pemUgaW4gY2VydGFpbiBlbmdpbmVzLlxuXG52YXIgY2FjaGVkU2V0VGltZW91dDtcbnZhciBjYWNoZWRDbGVhclRpbWVvdXQ7XG5cbmZ1bmN0aW9uIGRlZmF1bHRTZXRUaW1vdXQoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdzZXRUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG59XG5mdW5jdGlvbiBkZWZhdWx0Q2xlYXJUaW1lb3V0ICgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2NsZWFyVGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xufVxuKGZ1bmN0aW9uICgpIHtcbiAgICB0cnkge1xuICAgICAgICBpZiAodHlwZW9mIHNldFRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IGRlZmF1bHRTZXRUaW1vdXQ7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICBpZiAodHlwZW9mIGNsZWFyVGltZW91dCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZGVmYXVsdENsZWFyVGltZW91dDtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZGVmYXVsdENsZWFyVGltZW91dDtcbiAgICB9XG59ICgpKVxuZnVuY3Rpb24gcnVuVGltZW91dChmdW4pIHtcbiAgICBpZiAoY2FjaGVkU2V0VGltZW91dCA9PT0gc2V0VGltZW91dCkge1xuICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnNcbiAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9XG4gICAgLy8gaWYgc2V0VGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcbiAgICBpZiAoKGNhY2hlZFNldFRpbWVvdXQgPT09IGRlZmF1bHRTZXRUaW1vdXQgfHwgIWNhY2hlZFNldFRpbWVvdXQpICYmIHNldFRpbWVvdXQpIHtcbiAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG4gICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3NcbiAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9IGNhdGNoKGUpe1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0IHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKG51bGwsIGZ1biwgMCk7XG4gICAgICAgIH0gY2F0Y2goZSl7XG4gICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvclxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbCh0aGlzLCBmdW4sIDApO1xuICAgICAgICB9XG4gICAgfVxuXG5cbn1cbmZ1bmN0aW9uIHJ1bkNsZWFyVGltZW91dChtYXJrZXIpIHtcbiAgICBpZiAoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBjbGVhclRpbWVvdXQpIHtcbiAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG4gICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9XG4gICAgLy8gaWYgY2xlYXJUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZFxuICAgIGlmICgoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBkZWZhdWx0Q2xlYXJUaW1lb3V0IHx8ICFjYWNoZWRDbGVhclRpbWVvdXQpICYmIGNsZWFyVGltZW91dCkge1xuICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7XG4gICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzc1xuICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfSBjYXRjaCAoZSl7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgIHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwobnVsbCwgbWFya2VyKTtcbiAgICAgICAgfSBjYXRjaCAoZSl7XG4gICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvci5cbiAgICAgICAgICAgIC8vIFNvbWUgdmVyc2lvbnMgb2YgSS5FLiBoYXZlIGRpZmZlcmVudCBydWxlcyBmb3IgY2xlYXJUaW1lb3V0IHZzIHNldFRpbWVvdXRcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbCh0aGlzLCBtYXJrZXIpO1xuICAgICAgICB9XG4gICAgfVxuXG5cblxufVxudmFyIHF1ZXVlID0gW107XG52YXIgZHJhaW5pbmcgPSBmYWxzZTtcbnZhciBjdXJyZW50UXVldWU7XG52YXIgcXVldWVJbmRleCA9IC0xO1xuXG5mdW5jdGlvbiBjbGVhblVwTmV4dFRpY2soKSB7XG4gICAgaWYgKCFkcmFpbmluZyB8fCAhY3VycmVudFF1ZXVlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZHJhaW5pbmcgPSBmYWxzZTtcbiAgICBpZiAoY3VycmVudFF1ZXVlLmxlbmd0aCkge1xuICAgICAgICBxdWV1ZSA9IGN1cnJlbnRRdWV1ZS5jb25jYXQocXVldWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcbiAgICB9XG4gICAgaWYgKHF1ZXVlLmxlbmd0aCkge1xuICAgICAgICBkcmFpblF1ZXVlKCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBkcmFpblF1ZXVlKCkge1xuICAgIGlmIChkcmFpbmluZykge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciB0aW1lb3V0ID0gcnVuVGltZW91dChjbGVhblVwTmV4dFRpY2spO1xuICAgIGRyYWluaW5nID0gdHJ1ZTtcblxuICAgIHZhciBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gICAgd2hpbGUobGVuKSB7XG4gICAgICAgIGN1cnJlbnRRdWV1ZSA9IHF1ZXVlO1xuICAgICAgICBxdWV1ZSA9IFtdO1xuICAgICAgICB3aGlsZSAoKytxdWV1ZUluZGV4IDwgbGVuKSB7XG4gICAgICAgICAgICBpZiAoY3VycmVudFF1ZXVlKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudFF1ZXVlW3F1ZXVlSW5kZXhdLnJ1bigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcbiAgICAgICAgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIH1cbiAgICBjdXJyZW50UXVldWUgPSBudWxsO1xuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgcnVuQ2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xufVxuXG5wcm9jZXNzLm5leHRUaWNrID0gZnVuY3Rpb24gKGZ1bikge1xuICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGggLSAxKTtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGFyZ3NbaSAtIDFdID0gYXJndW1lbnRzW2ldO1xuICAgICAgICB9XG4gICAgfVxuICAgIHF1ZXVlLnB1c2gobmV3IEl0ZW0oZnVuLCBhcmdzKSk7XG4gICAgaWYgKHF1ZXVlLmxlbmd0aCA9PT0gMSAmJiAhZHJhaW5pbmcpIHtcbiAgICAgICAgcnVuVGltZW91dChkcmFpblF1ZXVlKTtcbiAgICB9XG59O1xuXG4vLyB2OCBsaWtlcyBwcmVkaWN0aWJsZSBvYmplY3RzXG5mdW5jdGlvbiBJdGVtKGZ1biwgYXJyYXkpIHtcbiAgICB0aGlzLmZ1biA9IGZ1bjtcbiAgICB0aGlzLmFycmF5ID0gYXJyYXk7XG59XG5JdGVtLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5mdW4uYXBwbHkobnVsbCwgdGhpcy5hcnJheSk7XG59O1xucHJvY2Vzcy50aXRsZSA9ICdicm93c2VyJztcbnByb2Nlc3MuYnJvd3NlciA9IHRydWU7XG5wcm9jZXNzLmVudiA9IHt9O1xucHJvY2Vzcy5hcmd2ID0gW107XG5wcm9jZXNzLnZlcnNpb24gPSAnJzsgLy8gZW1wdHkgc3RyaW5nIHRvIGF2b2lkIHJlZ2V4cCBpc3N1ZXNcbnByb2Nlc3MudmVyc2lvbnMgPSB7fTtcblxuZnVuY3Rpb24gbm9vcCgpIHt9XG5cbnByb2Nlc3Mub24gPSBub29wO1xucHJvY2Vzcy5hZGRMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLm9uY2UgPSBub29wO1xucHJvY2Vzcy5vZmYgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLnJlbW92ZUFsbExpc3RlbmVycyA9IG5vb3A7XG5wcm9jZXNzLmVtaXQgPSBub29wO1xuXG5wcm9jZXNzLmJpbmRpbmcgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5iaW5kaW5nIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG5cbnByb2Nlc3MuY3dkID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gJy8nIH07XG5wcm9jZXNzLmNoZGlyID0gZnVuY3Rpb24gKGRpcikge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5jaGRpciBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xucHJvY2Vzcy51bWFzayA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gMDsgfTtcbiIsIi8qIVxyXG4gKiBAb3ZlcnZpZXcgZXM2LXByb21pc2UgLSBhIHRpbnkgaW1wbGVtZW50YXRpb24gb2YgUHJvbWlzZXMvQSsuXHJcbiAqIEBjb3B5cmlnaHQgQ29weXJpZ2h0IChjKSAyMDE0IFllaHVkYSBLYXR6LCBUb20gRGFsZSwgU3RlZmFuIFBlbm5lciBhbmQgY29udHJpYnV0b3JzIChDb252ZXJzaW9uIHRvIEVTNiBBUEkgYnkgSmFrZSBBcmNoaWJhbGQpXHJcbiAqIEBsaWNlbnNlICAgTGljZW5zZWQgdW5kZXIgTUlUIGxpY2Vuc2VcclxuICogICAgICAgICAgICBTZWUgaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL3N0ZWZhbnBlbm5lci9lczYtcHJvbWlzZS9tYXN0ZXIvTElDRU5TRVxyXG4gKiBAdmVyc2lvbiAgIDMuMy4xXHJcbiAqL1xyXG5cclxuKGZ1bmN0aW9uIChnbG9iYWwsIGZhY3RvcnkpIHtcclxuICAgIHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyA/IG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpIDpcclxuICAgIHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCA/IGRlZmluZShmYWN0b3J5KSA6XHJcbiAgICAoZ2xvYmFsLkVTNlByb21pc2UgPSBmYWN0b3J5KCkpO1xyXG59KHRoaXMsIChmdW5jdGlvbiAoKSB7ICd1c2Ugc3RyaWN0JztcclxuXHJcbmZ1bmN0aW9uIG9iamVjdE9yRnVuY3Rpb24oeCkge1xyXG4gIHJldHVybiB0eXBlb2YgeCA9PT0gJ2Z1bmN0aW9uJyB8fCB0eXBlb2YgeCA9PT0gJ29iamVjdCcgJiYgeCAhPT0gbnVsbDtcclxufVxyXG5cclxuZnVuY3Rpb24gaXNGdW5jdGlvbih4KSB7XHJcbiAgcmV0dXJuIHR5cGVvZiB4ID09PSAnZnVuY3Rpb24nO1xyXG59XHJcblxyXG52YXIgX2lzQXJyYXkgPSB1bmRlZmluZWQ7XHJcbmlmICghQXJyYXkuaXNBcnJheSkge1xyXG4gIF9pc0FycmF5ID0gZnVuY3Rpb24gKHgpIHtcclxuICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoeCkgPT09ICdbb2JqZWN0IEFycmF5XSc7XHJcbiAgfTtcclxufSBlbHNlIHtcclxuICBfaXNBcnJheSA9IEFycmF5LmlzQXJyYXk7XHJcbn1cclxuXHJcbnZhciBpc0FycmF5ID0gX2lzQXJyYXk7XHJcblxyXG52YXIgbGVuID0gMDtcclxudmFyIHZlcnR4TmV4dCA9IHVuZGVmaW5lZDtcclxudmFyIGN1c3RvbVNjaGVkdWxlckZuID0gdW5kZWZpbmVkO1xyXG5cclxudmFyIGFzYXAgPSBmdW5jdGlvbiBhc2FwKGNhbGxiYWNrLCBhcmcpIHtcclxuICBxdWV1ZVtsZW5dID0gY2FsbGJhY2s7XHJcbiAgcXVldWVbbGVuICsgMV0gPSBhcmc7XHJcbiAgbGVuICs9IDI7XHJcbiAgaWYgKGxlbiA9PT0gMikge1xyXG4gICAgLy8gSWYgbGVuIGlzIDIsIHRoYXQgbWVhbnMgdGhhdCB3ZSBuZWVkIHRvIHNjaGVkdWxlIGFuIGFzeW5jIGZsdXNoLlxyXG4gICAgLy8gSWYgYWRkaXRpb25hbCBjYWxsYmFja3MgYXJlIHF1ZXVlZCBiZWZvcmUgdGhlIHF1ZXVlIGlzIGZsdXNoZWQsIHRoZXlcclxuICAgIC8vIHdpbGwgYmUgcHJvY2Vzc2VkIGJ5IHRoaXMgZmx1c2ggdGhhdCB3ZSBhcmUgc2NoZWR1bGluZy5cclxuICAgIGlmIChjdXN0b21TY2hlZHVsZXJGbikge1xyXG4gICAgICBjdXN0b21TY2hlZHVsZXJGbihmbHVzaCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBzY2hlZHVsZUZsdXNoKCk7XHJcbiAgICB9XHJcbiAgfVxyXG59O1xyXG5cclxuZnVuY3Rpb24gc2V0U2NoZWR1bGVyKHNjaGVkdWxlRm4pIHtcclxuICBjdXN0b21TY2hlZHVsZXJGbiA9IHNjaGVkdWxlRm47XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNldEFzYXAoYXNhcEZuKSB7XHJcbiAgYXNhcCA9IGFzYXBGbjtcclxufVxyXG5cclxudmFyIGJyb3dzZXJXaW5kb3cgPSB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6IHVuZGVmaW5lZDtcclxudmFyIGJyb3dzZXJHbG9iYWwgPSBicm93c2VyV2luZG93IHx8IHt9O1xyXG52YXIgQnJvd3Nlck11dGF0aW9uT2JzZXJ2ZXIgPSBicm93c2VyR2xvYmFsLk11dGF0aW9uT2JzZXJ2ZXIgfHwgYnJvd3Nlckdsb2JhbC5XZWJLaXRNdXRhdGlvbk9ic2VydmVyO1xyXG52YXIgaXNOb2RlID0gdHlwZW9mIHNlbGYgPT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBwcm9jZXNzICE9PSAndW5kZWZpbmVkJyAmJiAoe30pLnRvU3RyaW5nLmNhbGwocHJvY2VzcykgPT09ICdbb2JqZWN0IHByb2Nlc3NdJztcclxuXHJcbi8vIHRlc3QgZm9yIHdlYiB3b3JrZXIgYnV0IG5vdCBpbiBJRTEwXHJcbnZhciBpc1dvcmtlciA9IHR5cGVvZiBVaW50OENsYW1wZWRBcnJheSAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIGltcG9ydFNjcmlwdHMgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBNZXNzYWdlQ2hhbm5lbCAhPT0gJ3VuZGVmaW5lZCc7XHJcblxyXG4vLyBub2RlXHJcbmZ1bmN0aW9uIHVzZU5leHRUaWNrKCkge1xyXG4gIC8vIG5vZGUgdmVyc2lvbiAwLjEwLnggZGlzcGxheXMgYSBkZXByZWNhdGlvbiB3YXJuaW5nIHdoZW4gbmV4dFRpY2sgaXMgdXNlZCByZWN1cnNpdmVseVxyXG4gIC8vIHNlZSBodHRwczovL2dpdGh1Yi5jb20vY3Vqb2pzL3doZW4vaXNzdWVzLzQxMCBmb3IgZGV0YWlsc1xyXG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XHJcbiAgICByZXR1cm4gcHJvY2Vzcy5uZXh0VGljayhmbHVzaCk7XHJcbiAgfTtcclxufVxyXG5cclxuLy8gdmVydHhcclxuZnVuY3Rpb24gdXNlVmVydHhUaW1lcigpIHtcclxuICByZXR1cm4gZnVuY3Rpb24gKCkge1xyXG4gICAgdmVydHhOZXh0KGZsdXNoKTtcclxuICB9O1xyXG59XHJcblxyXG5mdW5jdGlvbiB1c2VNdXRhdGlvbk9ic2VydmVyKCkge1xyXG4gIHZhciBpdGVyYXRpb25zID0gMDtcclxuICB2YXIgb2JzZXJ2ZXIgPSBuZXcgQnJvd3Nlck11dGF0aW9uT2JzZXJ2ZXIoZmx1c2gpO1xyXG4gIHZhciBub2RlID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoJycpO1xyXG4gIG9ic2VydmVyLm9ic2VydmUobm9kZSwgeyBjaGFyYWN0ZXJEYXRhOiB0cnVlIH0pO1xyXG5cclxuICByZXR1cm4gZnVuY3Rpb24gKCkge1xyXG4gICAgbm9kZS5kYXRhID0gaXRlcmF0aW9ucyA9ICsraXRlcmF0aW9ucyAlIDI7XHJcbiAgfTtcclxufVxyXG5cclxuLy8gd2ViIHdvcmtlclxyXG5mdW5jdGlvbiB1c2VNZXNzYWdlQ2hhbm5lbCgpIHtcclxuICB2YXIgY2hhbm5lbCA9IG5ldyBNZXNzYWdlQ2hhbm5lbCgpO1xyXG4gIGNoYW5uZWwucG9ydDEub25tZXNzYWdlID0gZmx1c2g7XHJcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcclxuICAgIHJldHVybiBjaGFubmVsLnBvcnQyLnBvc3RNZXNzYWdlKDApO1xyXG4gIH07XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHVzZVNldFRpbWVvdXQoKSB7XHJcbiAgLy8gU3RvcmUgc2V0VGltZW91dCByZWZlcmVuY2Ugc28gZXM2LXByb21pc2Ugd2lsbCBiZSB1bmFmZmVjdGVkIGJ5XHJcbiAgLy8gb3RoZXIgY29kZSBtb2RpZnlpbmcgc2V0VGltZW91dCAobGlrZSBzaW5vbi51c2VGYWtlVGltZXJzKCkpXHJcbiAgdmFyIGdsb2JhbFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xyXG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XHJcbiAgICByZXR1cm4gZ2xvYmFsU2V0VGltZW91dChmbHVzaCwgMSk7XHJcbiAgfTtcclxufVxyXG5cclxudmFyIHF1ZXVlID0gbmV3IEFycmF5KDEwMDApO1xyXG5mdW5jdGlvbiBmbHVzaCgpIHtcclxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSArPSAyKSB7XHJcbiAgICB2YXIgY2FsbGJhY2sgPSBxdWV1ZVtpXTtcclxuICAgIHZhciBhcmcgPSBxdWV1ZVtpICsgMV07XHJcblxyXG4gICAgY2FsbGJhY2soYXJnKTtcclxuXHJcbiAgICBxdWV1ZVtpXSA9IHVuZGVmaW5lZDtcclxuICAgIHF1ZXVlW2kgKyAxXSA9IHVuZGVmaW5lZDtcclxuICB9XHJcblxyXG4gIGxlbiA9IDA7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGF0dGVtcHRWZXJ0eCgpIHtcclxuICB0cnkge1xyXG4gICAgdmFyIHIgPSByZXF1aXJlO1xyXG4gICAgdmFyIHZlcnR4ID0gcigndmVydHgnKTtcclxuICAgIHZlcnR4TmV4dCA9IHZlcnR4LnJ1bk9uTG9vcCB8fCB2ZXJ0eC5ydW5PbkNvbnRleHQ7XHJcbiAgICByZXR1cm4gdXNlVmVydHhUaW1lcigpO1xyXG4gIH0gY2F0Y2ggKGUpIHtcclxuICAgIHJldHVybiB1c2VTZXRUaW1lb3V0KCk7XHJcbiAgfVxyXG59XHJcblxyXG52YXIgc2NoZWR1bGVGbHVzaCA9IHVuZGVmaW5lZDtcclxuLy8gRGVjaWRlIHdoYXQgYXN5bmMgbWV0aG9kIHRvIHVzZSB0byB0cmlnZ2VyaW5nIHByb2Nlc3Npbmcgb2YgcXVldWVkIGNhbGxiYWNrczpcclxuaWYgKGlzTm9kZSkge1xyXG4gIHNjaGVkdWxlRmx1c2ggPSB1c2VOZXh0VGljaygpO1xyXG59IGVsc2UgaWYgKEJyb3dzZXJNdXRhdGlvbk9ic2VydmVyKSB7XHJcbiAgc2NoZWR1bGVGbHVzaCA9IHVzZU11dGF0aW9uT2JzZXJ2ZXIoKTtcclxufSBlbHNlIGlmIChpc1dvcmtlcikge1xyXG4gIHNjaGVkdWxlRmx1c2ggPSB1c2VNZXNzYWdlQ2hhbm5lbCgpO1xyXG59IGVsc2UgaWYgKGJyb3dzZXJXaW5kb3cgPT09IHVuZGVmaW5lZCAmJiB0eXBlb2YgcmVxdWlyZSA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gIHNjaGVkdWxlRmx1c2ggPSBhdHRlbXB0VmVydHgoKTtcclxufSBlbHNlIHtcclxuICBzY2hlZHVsZUZsdXNoID0gdXNlU2V0VGltZW91dCgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiB0aGVuKG9uRnVsZmlsbG1lbnQsIG9uUmVqZWN0aW9uKSB7XHJcbiAgdmFyIF9hcmd1bWVudHMgPSBhcmd1bWVudHM7XHJcblxyXG4gIHZhciBwYXJlbnQgPSB0aGlzO1xyXG5cclxuICB2YXIgY2hpbGQgPSBuZXcgdGhpcy5jb25zdHJ1Y3Rvcihub29wKTtcclxuXHJcbiAgaWYgKGNoaWxkW1BST01JU0VfSURdID09PSB1bmRlZmluZWQpIHtcclxuICAgIG1ha2VQcm9taXNlKGNoaWxkKTtcclxuICB9XHJcblxyXG4gIHZhciBfc3RhdGUgPSBwYXJlbnQuX3N0YXRlO1xyXG5cclxuICBpZiAoX3N0YXRlKSB7XHJcbiAgICAoZnVuY3Rpb24gKCkge1xyXG4gICAgICB2YXIgY2FsbGJhY2sgPSBfYXJndW1lbnRzW19zdGF0ZSAtIDFdO1xyXG4gICAgICBhc2FwKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gaW52b2tlQ2FsbGJhY2soX3N0YXRlLCBjaGlsZCwgY2FsbGJhY2ssIHBhcmVudC5fcmVzdWx0KTtcclxuICAgICAgfSk7XHJcbiAgICB9KSgpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBzdWJzY3JpYmUocGFyZW50LCBjaGlsZCwgb25GdWxmaWxsbWVudCwgb25SZWplY3Rpb24pO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIGNoaWxkO1xyXG59XHJcblxyXG4vKipcclxuICBgUHJvbWlzZS5yZXNvbHZlYCByZXR1cm5zIGEgcHJvbWlzZSB0aGF0IHdpbGwgYmVjb21lIHJlc29sdmVkIHdpdGggdGhlXHJcbiAgcGFzc2VkIGB2YWx1ZWAuIEl0IGlzIHNob3J0aGFuZCBmb3IgdGhlIGZvbGxvd2luZzpcclxuXHJcbiAgYGBgamF2YXNjcmlwdFxyXG4gIGxldCBwcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KXtcclxuICAgIHJlc29sdmUoMSk7XHJcbiAgfSk7XHJcblxyXG4gIHByb21pc2UudGhlbihmdW5jdGlvbih2YWx1ZSl7XHJcbiAgICAvLyB2YWx1ZSA9PT0gMVxyXG4gIH0pO1xyXG4gIGBgYFxyXG5cclxuICBJbnN0ZWFkIG9mIHdyaXRpbmcgdGhlIGFib3ZlLCB5b3VyIGNvZGUgbm93IHNpbXBseSBiZWNvbWVzIHRoZSBmb2xsb3dpbmc6XHJcblxyXG4gIGBgYGphdmFzY3JpcHRcclxuICBsZXQgcHJvbWlzZSA9IFByb21pc2UucmVzb2x2ZSgxKTtcclxuXHJcbiAgcHJvbWlzZS50aGVuKGZ1bmN0aW9uKHZhbHVlKXtcclxuICAgIC8vIHZhbHVlID09PSAxXHJcbiAgfSk7XHJcbiAgYGBgXHJcblxyXG4gIEBtZXRob2QgcmVzb2x2ZVxyXG4gIEBzdGF0aWNcclxuICBAcGFyYW0ge0FueX0gdmFsdWUgdmFsdWUgdGhhdCB0aGUgcmV0dXJuZWQgcHJvbWlzZSB3aWxsIGJlIHJlc29sdmVkIHdpdGhcclxuICBVc2VmdWwgZm9yIHRvb2xpbmcuXHJcbiAgQHJldHVybiB7UHJvbWlzZX0gYSBwcm9taXNlIHRoYXQgd2lsbCBiZWNvbWUgZnVsZmlsbGVkIHdpdGggdGhlIGdpdmVuXHJcbiAgYHZhbHVlYFxyXG4qL1xyXG5mdW5jdGlvbiByZXNvbHZlKG9iamVjdCkge1xyXG4gIC8qanNoaW50IHZhbGlkdGhpczp0cnVlICovXHJcbiAgdmFyIENvbnN0cnVjdG9yID0gdGhpcztcclxuXHJcbiAgaWYgKG9iamVjdCAmJiB0eXBlb2Ygb2JqZWN0ID09PSAnb2JqZWN0JyAmJiBvYmplY3QuY29uc3RydWN0b3IgPT09IENvbnN0cnVjdG9yKSB7XHJcbiAgICByZXR1cm4gb2JqZWN0O1xyXG4gIH1cclxuXHJcbiAgdmFyIHByb21pc2UgPSBuZXcgQ29uc3RydWN0b3Iobm9vcCk7XHJcbiAgX3Jlc29sdmUocHJvbWlzZSwgb2JqZWN0KTtcclxuICByZXR1cm4gcHJvbWlzZTtcclxufVxyXG5cclxudmFyIFBST01JU0VfSUQgPSBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHJpbmcoMTYpO1xyXG5cclxuZnVuY3Rpb24gbm9vcCgpIHt9XHJcblxyXG52YXIgUEVORElORyA9IHZvaWQgMDtcclxudmFyIEZVTEZJTExFRCA9IDE7XHJcbnZhciBSRUpFQ1RFRCA9IDI7XHJcblxyXG52YXIgR0VUX1RIRU5fRVJST1IgPSBuZXcgRXJyb3JPYmplY3QoKTtcclxuXHJcbmZ1bmN0aW9uIHNlbGZGdWxmaWxsbWVudCgpIHtcclxuICByZXR1cm4gbmV3IFR5cGVFcnJvcihcIllvdSBjYW5ub3QgcmVzb2x2ZSBhIHByb21pc2Ugd2l0aCBpdHNlbGZcIik7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNhbm5vdFJldHVybk93bigpIHtcclxuICByZXR1cm4gbmV3IFR5cGVFcnJvcignQSBwcm9taXNlcyBjYWxsYmFjayBjYW5ub3QgcmV0dXJuIHRoYXQgc2FtZSBwcm9taXNlLicpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRUaGVuKHByb21pc2UpIHtcclxuICB0cnkge1xyXG4gICAgcmV0dXJuIHByb21pc2UudGhlbjtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgR0VUX1RIRU5fRVJST1IuZXJyb3IgPSBlcnJvcjtcclxuICAgIHJldHVybiBHRVRfVEhFTl9FUlJPUjtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHRyeVRoZW4odGhlbiwgdmFsdWUsIGZ1bGZpbGxtZW50SGFuZGxlciwgcmVqZWN0aW9uSGFuZGxlcikge1xyXG4gIHRyeSB7XHJcbiAgICB0aGVuLmNhbGwodmFsdWUsIGZ1bGZpbGxtZW50SGFuZGxlciwgcmVqZWN0aW9uSGFuZGxlcik7XHJcbiAgfSBjYXRjaCAoZSkge1xyXG4gICAgcmV0dXJuIGU7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVGb3JlaWduVGhlbmFibGUocHJvbWlzZSwgdGhlbmFibGUsIHRoZW4pIHtcclxuICBhc2FwKGZ1bmN0aW9uIChwcm9taXNlKSB7XHJcbiAgICB2YXIgc2VhbGVkID0gZmFsc2U7XHJcbiAgICB2YXIgZXJyb3IgPSB0cnlUaGVuKHRoZW4sIHRoZW5hYmxlLCBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgaWYgKHNlYWxlZCkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICBzZWFsZWQgPSB0cnVlO1xyXG4gICAgICBpZiAodGhlbmFibGUgIT09IHZhbHVlKSB7XHJcbiAgICAgICAgX3Jlc29sdmUocHJvbWlzZSwgdmFsdWUpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGZ1bGZpbGwocHJvbWlzZSwgdmFsdWUpO1xyXG4gICAgICB9XHJcbiAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XHJcbiAgICAgIGlmIChzZWFsZWQpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgc2VhbGVkID0gdHJ1ZTtcclxuXHJcbiAgICAgIF9yZWplY3QocHJvbWlzZSwgcmVhc29uKTtcclxuICAgIH0sICdTZXR0bGU6ICcgKyAocHJvbWlzZS5fbGFiZWwgfHwgJyB1bmtub3duIHByb21pc2UnKSk7XHJcblxyXG4gICAgaWYgKCFzZWFsZWQgJiYgZXJyb3IpIHtcclxuICAgICAgc2VhbGVkID0gdHJ1ZTtcclxuICAgICAgX3JlamVjdChwcm9taXNlLCBlcnJvcik7XHJcbiAgICB9XHJcbiAgfSwgcHJvbWlzZSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZU93blRoZW5hYmxlKHByb21pc2UsIHRoZW5hYmxlKSB7XHJcbiAgaWYgKHRoZW5hYmxlLl9zdGF0ZSA9PT0gRlVMRklMTEVEKSB7XHJcbiAgICBmdWxmaWxsKHByb21pc2UsIHRoZW5hYmxlLl9yZXN1bHQpO1xyXG4gIH0gZWxzZSBpZiAodGhlbmFibGUuX3N0YXRlID09PSBSRUpFQ1RFRCkge1xyXG4gICAgX3JlamVjdChwcm9taXNlLCB0aGVuYWJsZS5fcmVzdWx0KTtcclxuICB9IGVsc2Uge1xyXG4gICAgc3Vic2NyaWJlKHRoZW5hYmxlLCB1bmRlZmluZWQsIGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICByZXR1cm4gX3Jlc29sdmUocHJvbWlzZSwgdmFsdWUpO1xyXG4gICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xyXG4gICAgICByZXR1cm4gX3JlamVjdChwcm9taXNlLCByZWFzb24pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVNYXliZVRoZW5hYmxlKHByb21pc2UsIG1heWJlVGhlbmFibGUsIHRoZW4kJCkge1xyXG4gIGlmIChtYXliZVRoZW5hYmxlLmNvbnN0cnVjdG9yID09PSBwcm9taXNlLmNvbnN0cnVjdG9yICYmIHRoZW4kJCA9PT0gdGhlbiAmJiBtYXliZVRoZW5hYmxlLmNvbnN0cnVjdG9yLnJlc29sdmUgPT09IHJlc29sdmUpIHtcclxuICAgIGhhbmRsZU93blRoZW5hYmxlKHByb21pc2UsIG1heWJlVGhlbmFibGUpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBpZiAodGhlbiQkID09PSBHRVRfVEhFTl9FUlJPUikge1xyXG4gICAgICBfcmVqZWN0KHByb21pc2UsIEdFVF9USEVOX0VSUk9SLmVycm9yKTtcclxuICAgIH0gZWxzZSBpZiAodGhlbiQkID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgZnVsZmlsbChwcm9taXNlLCBtYXliZVRoZW5hYmxlKTtcclxuICAgIH0gZWxzZSBpZiAoaXNGdW5jdGlvbih0aGVuJCQpKSB7XHJcbiAgICAgIGhhbmRsZUZvcmVpZ25UaGVuYWJsZShwcm9taXNlLCBtYXliZVRoZW5hYmxlLCB0aGVuJCQpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgZnVsZmlsbChwcm9taXNlLCBtYXliZVRoZW5hYmxlKTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIF9yZXNvbHZlKHByb21pc2UsIHZhbHVlKSB7XHJcbiAgaWYgKHByb21pc2UgPT09IHZhbHVlKSB7XHJcbiAgICBfcmVqZWN0KHByb21pc2UsIHNlbGZGdWxmaWxsbWVudCgpKTtcclxuICB9IGVsc2UgaWYgKG9iamVjdE9yRnVuY3Rpb24odmFsdWUpKSB7XHJcbiAgICBoYW5kbGVNYXliZVRoZW5hYmxlKHByb21pc2UsIHZhbHVlLCBnZXRUaGVuKHZhbHVlKSk7XHJcbiAgfSBlbHNlIHtcclxuICAgIGZ1bGZpbGwocHJvbWlzZSwgdmFsdWUpO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gcHVibGlzaFJlamVjdGlvbihwcm9taXNlKSB7XHJcbiAgaWYgKHByb21pc2UuX29uZXJyb3IpIHtcclxuICAgIHByb21pc2UuX29uZXJyb3IocHJvbWlzZS5fcmVzdWx0KTtcclxuICB9XHJcblxyXG4gIHB1Ymxpc2gocHJvbWlzZSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGZ1bGZpbGwocHJvbWlzZSwgdmFsdWUpIHtcclxuICBpZiAocHJvbWlzZS5fc3RhdGUgIT09IFBFTkRJTkcpIHtcclxuICAgIHJldHVybjtcclxuICB9XHJcblxyXG4gIHByb21pc2UuX3Jlc3VsdCA9IHZhbHVlO1xyXG4gIHByb21pc2UuX3N0YXRlID0gRlVMRklMTEVEO1xyXG5cclxuICBpZiAocHJvbWlzZS5fc3Vic2NyaWJlcnMubGVuZ3RoICE9PSAwKSB7XHJcbiAgICBhc2FwKHB1Ymxpc2gsIHByb21pc2UpO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gX3JlamVjdChwcm9taXNlLCByZWFzb24pIHtcclxuICBpZiAocHJvbWlzZS5fc3RhdGUgIT09IFBFTkRJTkcpIHtcclxuICAgIHJldHVybjtcclxuICB9XHJcbiAgcHJvbWlzZS5fc3RhdGUgPSBSRUpFQ1RFRDtcclxuICBwcm9taXNlLl9yZXN1bHQgPSByZWFzb247XHJcblxyXG4gIGFzYXAocHVibGlzaFJlamVjdGlvbiwgcHJvbWlzZSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHN1YnNjcmliZShwYXJlbnQsIGNoaWxkLCBvbkZ1bGZpbGxtZW50LCBvblJlamVjdGlvbikge1xyXG4gIHZhciBfc3Vic2NyaWJlcnMgPSBwYXJlbnQuX3N1YnNjcmliZXJzO1xyXG4gIHZhciBsZW5ndGggPSBfc3Vic2NyaWJlcnMubGVuZ3RoO1xyXG5cclxuICBwYXJlbnQuX29uZXJyb3IgPSBudWxsO1xyXG5cclxuICBfc3Vic2NyaWJlcnNbbGVuZ3RoXSA9IGNoaWxkO1xyXG4gIF9zdWJzY3JpYmVyc1tsZW5ndGggKyBGVUxGSUxMRURdID0gb25GdWxmaWxsbWVudDtcclxuICBfc3Vic2NyaWJlcnNbbGVuZ3RoICsgUkVKRUNURURdID0gb25SZWplY3Rpb247XHJcblxyXG4gIGlmIChsZW5ndGggPT09IDAgJiYgcGFyZW50Ll9zdGF0ZSkge1xyXG4gICAgYXNhcChwdWJsaXNoLCBwYXJlbnQpO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gcHVibGlzaChwcm9taXNlKSB7XHJcbiAgdmFyIHN1YnNjcmliZXJzID0gcHJvbWlzZS5fc3Vic2NyaWJlcnM7XHJcbiAgdmFyIHNldHRsZWQgPSBwcm9taXNlLl9zdGF0ZTtcclxuXHJcbiAgaWYgKHN1YnNjcmliZXJzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuXHJcbiAgdmFyIGNoaWxkID0gdW5kZWZpbmVkLFxyXG4gICAgICBjYWxsYmFjayA9IHVuZGVmaW5lZCxcclxuICAgICAgZGV0YWlsID0gcHJvbWlzZS5fcmVzdWx0O1xyXG5cclxuICBmb3IgKHZhciBpID0gMDsgaSA8IHN1YnNjcmliZXJzLmxlbmd0aDsgaSArPSAzKSB7XHJcbiAgICBjaGlsZCA9IHN1YnNjcmliZXJzW2ldO1xyXG4gICAgY2FsbGJhY2sgPSBzdWJzY3JpYmVyc1tpICsgc2V0dGxlZF07XHJcblxyXG4gICAgaWYgKGNoaWxkKSB7XHJcbiAgICAgIGludm9rZUNhbGxiYWNrKHNldHRsZWQsIGNoaWxkLCBjYWxsYmFjaywgZGV0YWlsKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNhbGxiYWNrKGRldGFpbCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcm9taXNlLl9zdWJzY3JpYmVycy5sZW5ndGggPSAwO1xyXG59XHJcblxyXG5mdW5jdGlvbiBFcnJvck9iamVjdCgpIHtcclxuICB0aGlzLmVycm9yID0gbnVsbDtcclxufVxyXG5cclxudmFyIFRSWV9DQVRDSF9FUlJPUiA9IG5ldyBFcnJvck9iamVjdCgpO1xyXG5cclxuZnVuY3Rpb24gdHJ5Q2F0Y2goY2FsbGJhY2ssIGRldGFpbCkge1xyXG4gIHRyeSB7XHJcbiAgICByZXR1cm4gY2FsbGJhY2soZGV0YWlsKTtcclxuICB9IGNhdGNoIChlKSB7XHJcbiAgICBUUllfQ0FUQ0hfRVJST1IuZXJyb3IgPSBlO1xyXG4gICAgcmV0dXJuIFRSWV9DQVRDSF9FUlJPUjtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGludm9rZUNhbGxiYWNrKHNldHRsZWQsIHByb21pc2UsIGNhbGxiYWNrLCBkZXRhaWwpIHtcclxuICB2YXIgaGFzQ2FsbGJhY2sgPSBpc0Z1bmN0aW9uKGNhbGxiYWNrKSxcclxuICAgICAgdmFsdWUgPSB1bmRlZmluZWQsXHJcbiAgICAgIGVycm9yID0gdW5kZWZpbmVkLFxyXG4gICAgICBzdWNjZWVkZWQgPSB1bmRlZmluZWQsXHJcbiAgICAgIGZhaWxlZCA9IHVuZGVmaW5lZDtcclxuXHJcbiAgaWYgKGhhc0NhbGxiYWNrKSB7XHJcbiAgICB2YWx1ZSA9IHRyeUNhdGNoKGNhbGxiYWNrLCBkZXRhaWwpO1xyXG5cclxuICAgIGlmICh2YWx1ZSA9PT0gVFJZX0NBVENIX0VSUk9SKSB7XHJcbiAgICAgIGZhaWxlZCA9IHRydWU7XHJcbiAgICAgIGVycm9yID0gdmFsdWUuZXJyb3I7XHJcbiAgICAgIHZhbHVlID0gbnVsbDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHN1Y2NlZWRlZCA9IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHByb21pc2UgPT09IHZhbHVlKSB7XHJcbiAgICAgIF9yZWplY3QocHJvbWlzZSwgY2Fubm90UmV0dXJuT3duKCkpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgfSBlbHNlIHtcclxuICAgIHZhbHVlID0gZGV0YWlsO1xyXG4gICAgc3VjY2VlZGVkID0gdHJ1ZTtcclxuICB9XHJcblxyXG4gIGlmIChwcm9taXNlLl9zdGF0ZSAhPT0gUEVORElORykge1xyXG4gICAgLy8gbm9vcFxyXG4gIH0gZWxzZSBpZiAoaGFzQ2FsbGJhY2sgJiYgc3VjY2VlZGVkKSB7XHJcbiAgICAgIF9yZXNvbHZlKHByb21pc2UsIHZhbHVlKTtcclxuICAgIH0gZWxzZSBpZiAoZmFpbGVkKSB7XHJcbiAgICAgIF9yZWplY3QocHJvbWlzZSwgZXJyb3IpO1xyXG4gICAgfSBlbHNlIGlmIChzZXR0bGVkID09PSBGVUxGSUxMRUQpIHtcclxuICAgICAgZnVsZmlsbChwcm9taXNlLCB2YWx1ZSk7XHJcbiAgICB9IGVsc2UgaWYgKHNldHRsZWQgPT09IFJFSkVDVEVEKSB7XHJcbiAgICAgIF9yZWplY3QocHJvbWlzZSwgdmFsdWUpO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBpbml0aWFsaXplUHJvbWlzZShwcm9taXNlLCByZXNvbHZlcikge1xyXG4gIHRyeSB7XHJcbiAgICByZXNvbHZlcihmdW5jdGlvbiByZXNvbHZlUHJvbWlzZSh2YWx1ZSkge1xyXG4gICAgICBfcmVzb2x2ZShwcm9taXNlLCB2YWx1ZSk7XHJcbiAgICB9LCBmdW5jdGlvbiByZWplY3RQcm9taXNlKHJlYXNvbikge1xyXG4gICAgICBfcmVqZWN0KHByb21pc2UsIHJlYXNvbik7XHJcbiAgICB9KTtcclxuICB9IGNhdGNoIChlKSB7XHJcbiAgICBfcmVqZWN0KHByb21pc2UsIGUpO1xyXG4gIH1cclxufVxyXG5cclxudmFyIGlkID0gMDtcclxuZnVuY3Rpb24gbmV4dElkKCkge1xyXG4gIHJldHVybiBpZCsrO1xyXG59XHJcblxyXG5mdW5jdGlvbiBtYWtlUHJvbWlzZShwcm9taXNlKSB7XHJcbiAgcHJvbWlzZVtQUk9NSVNFX0lEXSA9IGlkKys7XHJcbiAgcHJvbWlzZS5fc3RhdGUgPSB1bmRlZmluZWQ7XHJcbiAgcHJvbWlzZS5fcmVzdWx0ID0gdW5kZWZpbmVkO1xyXG4gIHByb21pc2UuX3N1YnNjcmliZXJzID0gW107XHJcbn1cclxuXHJcbmZ1bmN0aW9uIEVudW1lcmF0b3IoQ29uc3RydWN0b3IsIGlucHV0KSB7XHJcbiAgdGhpcy5faW5zdGFuY2VDb25zdHJ1Y3RvciA9IENvbnN0cnVjdG9yO1xyXG4gIHRoaXMucHJvbWlzZSA9IG5ldyBDb25zdHJ1Y3Rvcihub29wKTtcclxuXHJcbiAgaWYgKCF0aGlzLnByb21pc2VbUFJPTUlTRV9JRF0pIHtcclxuICAgIG1ha2VQcm9taXNlKHRoaXMucHJvbWlzZSk7XHJcbiAgfVxyXG5cclxuICBpZiAoaXNBcnJheShpbnB1dCkpIHtcclxuICAgIHRoaXMuX2lucHV0ID0gaW5wdXQ7XHJcbiAgICB0aGlzLmxlbmd0aCA9IGlucHV0Lmxlbmd0aDtcclxuICAgIHRoaXMuX3JlbWFpbmluZyA9IGlucHV0Lmxlbmd0aDtcclxuXHJcbiAgICB0aGlzLl9yZXN1bHQgPSBuZXcgQXJyYXkodGhpcy5sZW5ndGgpO1xyXG5cclxuICAgIGlmICh0aGlzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICBmdWxmaWxsKHRoaXMucHJvbWlzZSwgdGhpcy5fcmVzdWx0KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMubGVuZ3RoID0gdGhpcy5sZW5ndGggfHwgMDtcclxuICAgICAgdGhpcy5fZW51bWVyYXRlKCk7XHJcbiAgICAgIGlmICh0aGlzLl9yZW1haW5pbmcgPT09IDApIHtcclxuICAgICAgICBmdWxmaWxsKHRoaXMucHJvbWlzZSwgdGhpcy5fcmVzdWx0KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH0gZWxzZSB7XHJcbiAgICBfcmVqZWN0KHRoaXMucHJvbWlzZSwgdmFsaWRhdGlvbkVycm9yKCkpO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gdmFsaWRhdGlvbkVycm9yKCkge1xyXG4gIHJldHVybiBuZXcgRXJyb3IoJ0FycmF5IE1ldGhvZHMgbXVzdCBiZSBwcm92aWRlZCBhbiBBcnJheScpO1xyXG59O1xyXG5cclxuRW51bWVyYXRvci5wcm90b3R5cGUuX2VudW1lcmF0ZSA9IGZ1bmN0aW9uICgpIHtcclxuICB2YXIgbGVuZ3RoID0gdGhpcy5sZW5ndGg7XHJcbiAgdmFyIF9pbnB1dCA9IHRoaXMuX2lucHV0O1xyXG5cclxuICBmb3IgKHZhciBpID0gMDsgdGhpcy5fc3RhdGUgPT09IFBFTkRJTkcgJiYgaSA8IGxlbmd0aDsgaSsrKSB7XHJcbiAgICB0aGlzLl9lYWNoRW50cnkoX2lucHV0W2ldLCBpKTtcclxuICB9XHJcbn07XHJcblxyXG5FbnVtZXJhdG9yLnByb3RvdHlwZS5fZWFjaEVudHJ5ID0gZnVuY3Rpb24gKGVudHJ5LCBpKSB7XHJcbiAgdmFyIGMgPSB0aGlzLl9pbnN0YW5jZUNvbnN0cnVjdG9yO1xyXG4gIHZhciByZXNvbHZlJCQgPSBjLnJlc29sdmU7XHJcblxyXG4gIGlmIChyZXNvbHZlJCQgPT09IHJlc29sdmUpIHtcclxuICAgIHZhciBfdGhlbiA9IGdldFRoZW4oZW50cnkpO1xyXG5cclxuICAgIGlmIChfdGhlbiA9PT0gdGhlbiAmJiBlbnRyeS5fc3RhdGUgIT09IFBFTkRJTkcpIHtcclxuICAgICAgdGhpcy5fc2V0dGxlZEF0KGVudHJ5Ll9zdGF0ZSwgaSwgZW50cnkuX3Jlc3VsdCk7XHJcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBfdGhlbiAhPT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICB0aGlzLl9yZW1haW5pbmctLTtcclxuICAgICAgdGhpcy5fcmVzdWx0W2ldID0gZW50cnk7XHJcbiAgICB9IGVsc2UgaWYgKGMgPT09IFByb21pc2UpIHtcclxuICAgICAgdmFyIHByb21pc2UgPSBuZXcgYyhub29wKTtcclxuICAgICAgaGFuZGxlTWF5YmVUaGVuYWJsZShwcm9taXNlLCBlbnRyeSwgX3RoZW4pO1xyXG4gICAgICB0aGlzLl93aWxsU2V0dGxlQXQocHJvbWlzZSwgaSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl93aWxsU2V0dGxlQXQobmV3IGMoZnVuY3Rpb24gKHJlc29sdmUkJCkge1xyXG4gICAgICAgIHJldHVybiByZXNvbHZlJCQoZW50cnkpO1xyXG4gICAgICB9KSwgaSk7XHJcbiAgICB9XHJcbiAgfSBlbHNlIHtcclxuICAgIHRoaXMuX3dpbGxTZXR0bGVBdChyZXNvbHZlJCQoZW50cnkpLCBpKTtcclxuICB9XHJcbn07XHJcblxyXG5FbnVtZXJhdG9yLnByb3RvdHlwZS5fc2V0dGxlZEF0ID0gZnVuY3Rpb24gKHN0YXRlLCBpLCB2YWx1ZSkge1xyXG4gIHZhciBwcm9taXNlID0gdGhpcy5wcm9taXNlO1xyXG5cclxuICBpZiAocHJvbWlzZS5fc3RhdGUgPT09IFBFTkRJTkcpIHtcclxuICAgIHRoaXMuX3JlbWFpbmluZy0tO1xyXG5cclxuICAgIGlmIChzdGF0ZSA9PT0gUkVKRUNURUQpIHtcclxuICAgICAgX3JlamVjdChwcm9taXNlLCB2YWx1ZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9yZXN1bHRbaV0gPSB2YWx1ZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGlmICh0aGlzLl9yZW1haW5pbmcgPT09IDApIHtcclxuICAgIGZ1bGZpbGwocHJvbWlzZSwgdGhpcy5fcmVzdWx0KTtcclxuICB9XHJcbn07XHJcblxyXG5FbnVtZXJhdG9yLnByb3RvdHlwZS5fd2lsbFNldHRsZUF0ID0gZnVuY3Rpb24gKHByb21pc2UsIGkpIHtcclxuICB2YXIgZW51bWVyYXRvciA9IHRoaXM7XHJcblxyXG4gIHN1YnNjcmliZShwcm9taXNlLCB1bmRlZmluZWQsIGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgcmV0dXJuIGVudW1lcmF0b3IuX3NldHRsZWRBdChGVUxGSUxMRUQsIGksIHZhbHVlKTtcclxuICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XHJcbiAgICByZXR1cm4gZW51bWVyYXRvci5fc2V0dGxlZEF0KFJFSkVDVEVELCBpLCByZWFzb24pO1xyXG4gIH0pO1xyXG59O1xyXG5cclxuLyoqXHJcbiAgYFByb21pc2UuYWxsYCBhY2NlcHRzIGFuIGFycmF5IG9mIHByb21pc2VzLCBhbmQgcmV0dXJucyBhIG5ldyBwcm9taXNlIHdoaWNoXHJcbiAgaXMgZnVsZmlsbGVkIHdpdGggYW4gYXJyYXkgb2YgZnVsZmlsbG1lbnQgdmFsdWVzIGZvciB0aGUgcGFzc2VkIHByb21pc2VzLCBvclxyXG4gIHJlamVjdGVkIHdpdGggdGhlIHJlYXNvbiBvZiB0aGUgZmlyc3QgcGFzc2VkIHByb21pc2UgdG8gYmUgcmVqZWN0ZWQuIEl0IGNhc3RzIGFsbFxyXG4gIGVsZW1lbnRzIG9mIHRoZSBwYXNzZWQgaXRlcmFibGUgdG8gcHJvbWlzZXMgYXMgaXQgcnVucyB0aGlzIGFsZ29yaXRobS5cclxuXHJcbiAgRXhhbXBsZTpcclxuXHJcbiAgYGBgamF2YXNjcmlwdFxyXG4gIGxldCBwcm9taXNlMSA9IHJlc29sdmUoMSk7XHJcbiAgbGV0IHByb21pc2UyID0gcmVzb2x2ZSgyKTtcclxuICBsZXQgcHJvbWlzZTMgPSByZXNvbHZlKDMpO1xyXG4gIGxldCBwcm9taXNlcyA9IFsgcHJvbWlzZTEsIHByb21pc2UyLCBwcm9taXNlMyBdO1xyXG5cclxuICBQcm9taXNlLmFsbChwcm9taXNlcykudGhlbihmdW5jdGlvbihhcnJheSl7XHJcbiAgICAvLyBUaGUgYXJyYXkgaGVyZSB3b3VsZCBiZSBbIDEsIDIsIDMgXTtcclxuICB9KTtcclxuICBgYGBcclxuXHJcbiAgSWYgYW55IG9mIHRoZSBgcHJvbWlzZXNgIGdpdmVuIHRvIGBhbGxgIGFyZSByZWplY3RlZCwgdGhlIGZpcnN0IHByb21pc2VcclxuICB0aGF0IGlzIHJlamVjdGVkIHdpbGwgYmUgZ2l2ZW4gYXMgYW4gYXJndW1lbnQgdG8gdGhlIHJldHVybmVkIHByb21pc2VzJ3NcclxuICByZWplY3Rpb24gaGFuZGxlci4gRm9yIGV4YW1wbGU6XHJcblxyXG4gIEV4YW1wbGU6XHJcblxyXG4gIGBgYGphdmFzY3JpcHRcclxuICBsZXQgcHJvbWlzZTEgPSByZXNvbHZlKDEpO1xyXG4gIGxldCBwcm9taXNlMiA9IHJlamVjdChuZXcgRXJyb3IoXCIyXCIpKTtcclxuICBsZXQgcHJvbWlzZTMgPSByZWplY3QobmV3IEVycm9yKFwiM1wiKSk7XHJcbiAgbGV0IHByb21pc2VzID0gWyBwcm9taXNlMSwgcHJvbWlzZTIsIHByb21pc2UzIF07XHJcblxyXG4gIFByb21pc2UuYWxsKHByb21pc2VzKS50aGVuKGZ1bmN0aW9uKGFycmF5KXtcclxuICAgIC8vIENvZGUgaGVyZSBuZXZlciBydW5zIGJlY2F1c2UgdGhlcmUgYXJlIHJlamVjdGVkIHByb21pc2VzIVxyXG4gIH0sIGZ1bmN0aW9uKGVycm9yKSB7XHJcbiAgICAvLyBlcnJvci5tZXNzYWdlID09PSBcIjJcIlxyXG4gIH0pO1xyXG4gIGBgYFxyXG5cclxuICBAbWV0aG9kIGFsbFxyXG4gIEBzdGF0aWNcclxuICBAcGFyYW0ge0FycmF5fSBlbnRyaWVzIGFycmF5IG9mIHByb21pc2VzXHJcbiAgQHBhcmFtIHtTdHJpbmd9IGxhYmVsIG9wdGlvbmFsIHN0cmluZyBmb3IgbGFiZWxpbmcgdGhlIHByb21pc2UuXHJcbiAgVXNlZnVsIGZvciB0b29saW5nLlxyXG4gIEByZXR1cm4ge1Byb21pc2V9IHByb21pc2UgdGhhdCBpcyBmdWxmaWxsZWQgd2hlbiBhbGwgYHByb21pc2VzYCBoYXZlIGJlZW5cclxuICBmdWxmaWxsZWQsIG9yIHJlamVjdGVkIGlmIGFueSBvZiB0aGVtIGJlY29tZSByZWplY3RlZC5cclxuICBAc3RhdGljXHJcbiovXHJcbmZ1bmN0aW9uIGFsbChlbnRyaWVzKSB7XHJcbiAgcmV0dXJuIG5ldyBFbnVtZXJhdG9yKHRoaXMsIGVudHJpZXMpLnByb21pc2U7XHJcbn1cclxuXHJcbi8qKlxyXG4gIGBQcm9taXNlLnJhY2VgIHJldHVybnMgYSBuZXcgcHJvbWlzZSB3aGljaCBpcyBzZXR0bGVkIGluIHRoZSBzYW1lIHdheSBhcyB0aGVcclxuICBmaXJzdCBwYXNzZWQgcHJvbWlzZSB0byBzZXR0bGUuXHJcblxyXG4gIEV4YW1wbGU6XHJcblxyXG4gIGBgYGphdmFzY3JpcHRcclxuICBsZXQgcHJvbWlzZTEgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3Qpe1xyXG4gICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xyXG4gICAgICByZXNvbHZlKCdwcm9taXNlIDEnKTtcclxuICAgIH0sIDIwMCk7XHJcbiAgfSk7XHJcblxyXG4gIGxldCBwcm9taXNlMiA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCl7XHJcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcbiAgICAgIHJlc29sdmUoJ3Byb21pc2UgMicpO1xyXG4gICAgfSwgMTAwKTtcclxuICB9KTtcclxuXHJcbiAgUHJvbWlzZS5yYWNlKFtwcm9taXNlMSwgcHJvbWlzZTJdKS50aGVuKGZ1bmN0aW9uKHJlc3VsdCl7XHJcbiAgICAvLyByZXN1bHQgPT09ICdwcm9taXNlIDInIGJlY2F1c2UgaXQgd2FzIHJlc29sdmVkIGJlZm9yZSBwcm9taXNlMVxyXG4gICAgLy8gd2FzIHJlc29sdmVkLlxyXG4gIH0pO1xyXG4gIGBgYFxyXG5cclxuICBgUHJvbWlzZS5yYWNlYCBpcyBkZXRlcm1pbmlzdGljIGluIHRoYXQgb25seSB0aGUgc3RhdGUgb2YgdGhlIGZpcnN0XHJcbiAgc2V0dGxlZCBwcm9taXNlIG1hdHRlcnMuIEZvciBleGFtcGxlLCBldmVuIGlmIG90aGVyIHByb21pc2VzIGdpdmVuIHRvIHRoZVxyXG4gIGBwcm9taXNlc2AgYXJyYXkgYXJndW1lbnQgYXJlIHJlc29sdmVkLCBidXQgdGhlIGZpcnN0IHNldHRsZWQgcHJvbWlzZSBoYXNcclxuICBiZWNvbWUgcmVqZWN0ZWQgYmVmb3JlIHRoZSBvdGhlciBwcm9taXNlcyBiZWNhbWUgZnVsZmlsbGVkLCB0aGUgcmV0dXJuZWRcclxuICBwcm9taXNlIHdpbGwgYmVjb21lIHJlamVjdGVkOlxyXG5cclxuICBgYGBqYXZhc2NyaXB0XHJcbiAgbGV0IHByb21pc2UxID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KXtcclxuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuICAgICAgcmVzb2x2ZSgncHJvbWlzZSAxJyk7XHJcbiAgICB9LCAyMDApO1xyXG4gIH0pO1xyXG5cclxuICBsZXQgcHJvbWlzZTIgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3Qpe1xyXG4gICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xyXG4gICAgICByZWplY3QobmV3IEVycm9yKCdwcm9taXNlIDInKSk7XHJcbiAgICB9LCAxMDApO1xyXG4gIH0pO1xyXG5cclxuICBQcm9taXNlLnJhY2UoW3Byb21pc2UxLCBwcm9taXNlMl0pLnRoZW4oZnVuY3Rpb24ocmVzdWx0KXtcclxuICAgIC8vIENvZGUgaGVyZSBuZXZlciBydW5zXHJcbiAgfSwgZnVuY3Rpb24ocmVhc29uKXtcclxuICAgIC8vIHJlYXNvbi5tZXNzYWdlID09PSAncHJvbWlzZSAyJyBiZWNhdXNlIHByb21pc2UgMiBiZWNhbWUgcmVqZWN0ZWQgYmVmb3JlXHJcbiAgICAvLyBwcm9taXNlIDEgYmVjYW1lIGZ1bGZpbGxlZFxyXG4gIH0pO1xyXG4gIGBgYFxyXG5cclxuICBBbiBleGFtcGxlIHJlYWwtd29ybGQgdXNlIGNhc2UgaXMgaW1wbGVtZW50aW5nIHRpbWVvdXRzOlxyXG5cclxuICBgYGBqYXZhc2NyaXB0XHJcbiAgUHJvbWlzZS5yYWNlKFthamF4KCdmb28uanNvbicpLCB0aW1lb3V0KDUwMDApXSlcclxuICBgYGBcclxuXHJcbiAgQG1ldGhvZCByYWNlXHJcbiAgQHN0YXRpY1xyXG4gIEBwYXJhbSB7QXJyYXl9IHByb21pc2VzIGFycmF5IG9mIHByb21pc2VzIHRvIG9ic2VydmVcclxuICBVc2VmdWwgZm9yIHRvb2xpbmcuXHJcbiAgQHJldHVybiB7UHJvbWlzZX0gYSBwcm9taXNlIHdoaWNoIHNldHRsZXMgaW4gdGhlIHNhbWUgd2F5IGFzIHRoZSBmaXJzdCBwYXNzZWRcclxuICBwcm9taXNlIHRvIHNldHRsZS5cclxuKi9cclxuZnVuY3Rpb24gcmFjZShlbnRyaWVzKSB7XHJcbiAgLypqc2hpbnQgdmFsaWR0aGlzOnRydWUgKi9cclxuICB2YXIgQ29uc3RydWN0b3IgPSB0aGlzO1xyXG5cclxuICBpZiAoIWlzQXJyYXkoZW50cmllcykpIHtcclxuICAgIHJldHVybiBuZXcgQ29uc3RydWN0b3IoZnVuY3Rpb24gKF8sIHJlamVjdCkge1xyXG4gICAgICByZXR1cm4gcmVqZWN0KG5ldyBUeXBlRXJyb3IoJ1lvdSBtdXN0IHBhc3MgYW4gYXJyYXkgdG8gcmFjZS4nKSk7XHJcbiAgICB9KTtcclxuICB9IGVsc2Uge1xyXG4gICAgcmV0dXJuIG5ldyBDb25zdHJ1Y3RvcihmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgIHZhciBsZW5ndGggPSBlbnRyaWVzLmxlbmd0aDtcclxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xyXG4gICAgICAgIENvbnN0cnVjdG9yLnJlc29sdmUoZW50cmllc1tpXSkudGhlbihyZXNvbHZlLCByZWplY3QpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gIGBQcm9taXNlLnJlamVjdGAgcmV0dXJucyBhIHByb21pc2UgcmVqZWN0ZWQgd2l0aCB0aGUgcGFzc2VkIGByZWFzb25gLlxyXG4gIEl0IGlzIHNob3J0aGFuZCBmb3IgdGhlIGZvbGxvd2luZzpcclxuXHJcbiAgYGBgamF2YXNjcmlwdFxyXG4gIGxldCBwcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KXtcclxuICAgIHJlamVjdChuZXcgRXJyb3IoJ1dIT09QUycpKTtcclxuICB9KTtcclxuXHJcbiAgcHJvbWlzZS50aGVuKGZ1bmN0aW9uKHZhbHVlKXtcclxuICAgIC8vIENvZGUgaGVyZSBkb2Vzbid0IHJ1biBiZWNhdXNlIHRoZSBwcm9taXNlIGlzIHJlamVjdGVkIVxyXG4gIH0sIGZ1bmN0aW9uKHJlYXNvbil7XHJcbiAgICAvLyByZWFzb24ubWVzc2FnZSA9PT0gJ1dIT09QUydcclxuICB9KTtcclxuICBgYGBcclxuXHJcbiAgSW5zdGVhZCBvZiB3cml0aW5nIHRoZSBhYm92ZSwgeW91ciBjb2RlIG5vdyBzaW1wbHkgYmVjb21lcyB0aGUgZm9sbG93aW5nOlxyXG5cclxuICBgYGBqYXZhc2NyaXB0XHJcbiAgbGV0IHByb21pc2UgPSBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoJ1dIT09QUycpKTtcclxuXHJcbiAgcHJvbWlzZS50aGVuKGZ1bmN0aW9uKHZhbHVlKXtcclxuICAgIC8vIENvZGUgaGVyZSBkb2Vzbid0IHJ1biBiZWNhdXNlIHRoZSBwcm9taXNlIGlzIHJlamVjdGVkIVxyXG4gIH0sIGZ1bmN0aW9uKHJlYXNvbil7XHJcbiAgICAvLyByZWFzb24ubWVzc2FnZSA9PT0gJ1dIT09QUydcclxuICB9KTtcclxuICBgYGBcclxuXHJcbiAgQG1ldGhvZCByZWplY3RcclxuICBAc3RhdGljXHJcbiAgQHBhcmFtIHtBbnl9IHJlYXNvbiB2YWx1ZSB0aGF0IHRoZSByZXR1cm5lZCBwcm9taXNlIHdpbGwgYmUgcmVqZWN0ZWQgd2l0aC5cclxuICBVc2VmdWwgZm9yIHRvb2xpbmcuXHJcbiAgQHJldHVybiB7UHJvbWlzZX0gYSBwcm9taXNlIHJlamVjdGVkIHdpdGggdGhlIGdpdmVuIGByZWFzb25gLlxyXG4qL1xyXG5mdW5jdGlvbiByZWplY3QocmVhc29uKSB7XHJcbiAgLypqc2hpbnQgdmFsaWR0aGlzOnRydWUgKi9cclxuICB2YXIgQ29uc3RydWN0b3IgPSB0aGlzO1xyXG4gIHZhciBwcm9taXNlID0gbmV3IENvbnN0cnVjdG9yKG5vb3ApO1xyXG4gIF9yZWplY3QocHJvbWlzZSwgcmVhc29uKTtcclxuICByZXR1cm4gcHJvbWlzZTtcclxufVxyXG5cclxuZnVuY3Rpb24gbmVlZHNSZXNvbHZlcigpIHtcclxuICB0aHJvdyBuZXcgVHlwZUVycm9yKCdZb3UgbXVzdCBwYXNzIGEgcmVzb2x2ZXIgZnVuY3Rpb24gYXMgdGhlIGZpcnN0IGFyZ3VtZW50IHRvIHRoZSBwcm9taXNlIGNvbnN0cnVjdG9yJyk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG5lZWRzTmV3KCkge1xyXG4gIHRocm93IG5ldyBUeXBlRXJyb3IoXCJGYWlsZWQgdG8gY29uc3RydWN0ICdQcm9taXNlJzogUGxlYXNlIHVzZSB0aGUgJ25ldycgb3BlcmF0b3IsIHRoaXMgb2JqZWN0IGNvbnN0cnVjdG9yIGNhbm5vdCBiZSBjYWxsZWQgYXMgYSBmdW5jdGlvbi5cIik7XHJcbn1cclxuXHJcbi8qKlxyXG4gIFByb21pc2Ugb2JqZWN0cyByZXByZXNlbnQgdGhlIGV2ZW50dWFsIHJlc3VsdCBvZiBhbiBhc3luY2hyb25vdXMgb3BlcmF0aW9uLiBUaGVcclxuICBwcmltYXJ5IHdheSBvZiBpbnRlcmFjdGluZyB3aXRoIGEgcHJvbWlzZSBpcyB0aHJvdWdoIGl0cyBgdGhlbmAgbWV0aG9kLCB3aGljaFxyXG4gIHJlZ2lzdGVycyBjYWxsYmFja3MgdG8gcmVjZWl2ZSBlaXRoZXIgYSBwcm9taXNlJ3MgZXZlbnR1YWwgdmFsdWUgb3IgdGhlIHJlYXNvblxyXG4gIHdoeSB0aGUgcHJvbWlzZSBjYW5ub3QgYmUgZnVsZmlsbGVkLlxyXG5cclxuICBUZXJtaW5vbG9neVxyXG4gIC0tLS0tLS0tLS0tXHJcblxyXG4gIC0gYHByb21pc2VgIGlzIGFuIG9iamVjdCBvciBmdW5jdGlvbiB3aXRoIGEgYHRoZW5gIG1ldGhvZCB3aG9zZSBiZWhhdmlvciBjb25mb3JtcyB0byB0aGlzIHNwZWNpZmljYXRpb24uXHJcbiAgLSBgdGhlbmFibGVgIGlzIGFuIG9iamVjdCBvciBmdW5jdGlvbiB0aGF0IGRlZmluZXMgYSBgdGhlbmAgbWV0aG9kLlxyXG4gIC0gYHZhbHVlYCBpcyBhbnkgbGVnYWwgSmF2YVNjcmlwdCB2YWx1ZSAoaW5jbHVkaW5nIHVuZGVmaW5lZCwgYSB0aGVuYWJsZSwgb3IgYSBwcm9taXNlKS5cclxuICAtIGBleGNlcHRpb25gIGlzIGEgdmFsdWUgdGhhdCBpcyB0aHJvd24gdXNpbmcgdGhlIHRocm93IHN0YXRlbWVudC5cclxuICAtIGByZWFzb25gIGlzIGEgdmFsdWUgdGhhdCBpbmRpY2F0ZXMgd2h5IGEgcHJvbWlzZSB3YXMgcmVqZWN0ZWQuXHJcbiAgLSBgc2V0dGxlZGAgdGhlIGZpbmFsIHJlc3Rpbmcgc3RhdGUgb2YgYSBwcm9taXNlLCBmdWxmaWxsZWQgb3IgcmVqZWN0ZWQuXHJcblxyXG4gIEEgcHJvbWlzZSBjYW4gYmUgaW4gb25lIG9mIHRocmVlIHN0YXRlczogcGVuZGluZywgZnVsZmlsbGVkLCBvciByZWplY3RlZC5cclxuXHJcbiAgUHJvbWlzZXMgdGhhdCBhcmUgZnVsZmlsbGVkIGhhdmUgYSBmdWxmaWxsbWVudCB2YWx1ZSBhbmQgYXJlIGluIHRoZSBmdWxmaWxsZWRcclxuICBzdGF0ZS4gIFByb21pc2VzIHRoYXQgYXJlIHJlamVjdGVkIGhhdmUgYSByZWplY3Rpb24gcmVhc29uIGFuZCBhcmUgaW4gdGhlXHJcbiAgcmVqZWN0ZWQgc3RhdGUuICBBIGZ1bGZpbGxtZW50IHZhbHVlIGlzIG5ldmVyIGEgdGhlbmFibGUuXHJcblxyXG4gIFByb21pc2VzIGNhbiBhbHNvIGJlIHNhaWQgdG8gKnJlc29sdmUqIGEgdmFsdWUuICBJZiB0aGlzIHZhbHVlIGlzIGFsc28gYVxyXG4gIHByb21pc2UsIHRoZW4gdGhlIG9yaWdpbmFsIHByb21pc2UncyBzZXR0bGVkIHN0YXRlIHdpbGwgbWF0Y2ggdGhlIHZhbHVlJ3NcclxuICBzZXR0bGVkIHN0YXRlLiAgU28gYSBwcm9taXNlIHRoYXQgKnJlc29sdmVzKiBhIHByb21pc2UgdGhhdCByZWplY3RzIHdpbGxcclxuICBpdHNlbGYgcmVqZWN0LCBhbmQgYSBwcm9taXNlIHRoYXQgKnJlc29sdmVzKiBhIHByb21pc2UgdGhhdCBmdWxmaWxscyB3aWxsXHJcbiAgaXRzZWxmIGZ1bGZpbGwuXHJcblxyXG5cclxuICBCYXNpYyBVc2FnZTpcclxuICAtLS0tLS0tLS0tLS1cclxuXHJcbiAgYGBganNcclxuICBsZXQgcHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgLy8gb24gc3VjY2Vzc1xyXG4gICAgcmVzb2x2ZSh2YWx1ZSk7XHJcblxyXG4gICAgLy8gb24gZmFpbHVyZVxyXG4gICAgcmVqZWN0KHJlYXNvbik7XHJcbiAgfSk7XHJcblxyXG4gIHByb21pc2UudGhlbihmdW5jdGlvbih2YWx1ZSkge1xyXG4gICAgLy8gb24gZnVsZmlsbG1lbnRcclxuICB9LCBmdW5jdGlvbihyZWFzb24pIHtcclxuICAgIC8vIG9uIHJlamVjdGlvblxyXG4gIH0pO1xyXG4gIGBgYFxyXG5cclxuICBBZHZhbmNlZCBVc2FnZTpcclxuICAtLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgUHJvbWlzZXMgc2hpbmUgd2hlbiBhYnN0cmFjdGluZyBhd2F5IGFzeW5jaHJvbm91cyBpbnRlcmFjdGlvbnMgc3VjaCBhc1xyXG4gIGBYTUxIdHRwUmVxdWVzdGBzLlxyXG5cclxuICBgYGBqc1xyXG4gIGZ1bmN0aW9uIGdldEpTT04odXJsKSB7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KXtcclxuICAgICAgbGV0IHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xyXG5cclxuICAgICAgeGhyLm9wZW4oJ0dFVCcsIHVybCk7XHJcbiAgICAgIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBoYW5kbGVyO1xyXG4gICAgICB4aHIucmVzcG9uc2VUeXBlID0gJ2pzb24nO1xyXG4gICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcignQWNjZXB0JywgJ2FwcGxpY2F0aW9uL2pzb24nKTtcclxuICAgICAgeGhyLnNlbmQoKTtcclxuXHJcbiAgICAgIGZ1bmN0aW9uIGhhbmRsZXIoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMucmVhZHlTdGF0ZSA9PT0gdGhpcy5ET05FKSB7XHJcbiAgICAgICAgICBpZiAodGhpcy5zdGF0dXMgPT09IDIwMCkge1xyXG4gICAgICAgICAgICByZXNvbHZlKHRoaXMucmVzcG9uc2UpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcignZ2V0SlNPTjogYCcgKyB1cmwgKyAnYCBmYWlsZWQgd2l0aCBzdGF0dXM6IFsnICsgdGhpcy5zdGF0dXMgKyAnXScpKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH07XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGdldEpTT04oJy9wb3N0cy5qc29uJykudGhlbihmdW5jdGlvbihqc29uKSB7XHJcbiAgICAvLyBvbiBmdWxmaWxsbWVudFxyXG4gIH0sIGZ1bmN0aW9uKHJlYXNvbikge1xyXG4gICAgLy8gb24gcmVqZWN0aW9uXHJcbiAgfSk7XHJcbiAgYGBgXHJcblxyXG4gIFVubGlrZSBjYWxsYmFja3MsIHByb21pc2VzIGFyZSBncmVhdCBjb21wb3NhYmxlIHByaW1pdGl2ZXMuXHJcblxyXG4gIGBgYGpzXHJcbiAgUHJvbWlzZS5hbGwoW1xyXG4gICAgZ2V0SlNPTignL3Bvc3RzJyksXHJcbiAgICBnZXRKU09OKCcvY29tbWVudHMnKVxyXG4gIF0pLnRoZW4oZnVuY3Rpb24odmFsdWVzKXtcclxuICAgIHZhbHVlc1swXSAvLyA9PiBwb3N0c0pTT05cclxuICAgIHZhbHVlc1sxXSAvLyA9PiBjb21tZW50c0pTT05cclxuXHJcbiAgICByZXR1cm4gdmFsdWVzO1xyXG4gIH0pO1xyXG4gIGBgYFxyXG5cclxuICBAY2xhc3MgUHJvbWlzZVxyXG4gIEBwYXJhbSB7ZnVuY3Rpb259IHJlc29sdmVyXHJcbiAgVXNlZnVsIGZvciB0b29saW5nLlxyXG4gIEBjb25zdHJ1Y3RvclxyXG4qL1xyXG5mdW5jdGlvbiBQcm9taXNlKHJlc29sdmVyKSB7XHJcbiAgdGhpc1tQUk9NSVNFX0lEXSA9IG5leHRJZCgpO1xyXG4gIHRoaXMuX3Jlc3VsdCA9IHRoaXMuX3N0YXRlID0gdW5kZWZpbmVkO1xyXG4gIHRoaXMuX3N1YnNjcmliZXJzID0gW107XHJcblxyXG4gIGlmIChub29wICE9PSByZXNvbHZlcikge1xyXG4gICAgdHlwZW9mIHJlc29sdmVyICE9PSAnZnVuY3Rpb24nICYmIG5lZWRzUmVzb2x2ZXIoKTtcclxuICAgIHRoaXMgaW5zdGFuY2VvZiBQcm9taXNlID8gaW5pdGlhbGl6ZVByb21pc2UodGhpcywgcmVzb2x2ZXIpIDogbmVlZHNOZXcoKTtcclxuICB9XHJcbn1cclxuXHJcblByb21pc2UuYWxsID0gYWxsO1xyXG5Qcm9taXNlLnJhY2UgPSByYWNlO1xyXG5Qcm9taXNlLnJlc29sdmUgPSByZXNvbHZlO1xyXG5Qcm9taXNlLnJlamVjdCA9IHJlamVjdDtcclxuUHJvbWlzZS5fc2V0U2NoZWR1bGVyID0gc2V0U2NoZWR1bGVyO1xyXG5Qcm9taXNlLl9zZXRBc2FwID0gc2V0QXNhcDtcclxuUHJvbWlzZS5fYXNhcCA9IGFzYXA7XHJcblxyXG5Qcm9taXNlLnByb3RvdHlwZSA9IHtcclxuICBjb25zdHJ1Y3RvcjogUHJvbWlzZSxcclxuXHJcbiAgLyoqXHJcbiAgICBUaGUgcHJpbWFyeSB3YXkgb2YgaW50ZXJhY3Rpbmcgd2l0aCBhIHByb21pc2UgaXMgdGhyb3VnaCBpdHMgYHRoZW5gIG1ldGhvZCxcclxuICAgIHdoaWNoIHJlZ2lzdGVycyBjYWxsYmFja3MgdG8gcmVjZWl2ZSBlaXRoZXIgYSBwcm9taXNlJ3MgZXZlbnR1YWwgdmFsdWUgb3IgdGhlXHJcbiAgICByZWFzb24gd2h5IHRoZSBwcm9taXNlIGNhbm5vdCBiZSBmdWxmaWxsZWQuXHJcbiAgXHJcbiAgICBgYGBqc1xyXG4gICAgZmluZFVzZXIoKS50aGVuKGZ1bmN0aW9uKHVzZXIpe1xyXG4gICAgICAvLyB1c2VyIGlzIGF2YWlsYWJsZVxyXG4gICAgfSwgZnVuY3Rpb24ocmVhc29uKXtcclxuICAgICAgLy8gdXNlciBpcyB1bmF2YWlsYWJsZSwgYW5kIHlvdSBhcmUgZ2l2ZW4gdGhlIHJlYXNvbiB3aHlcclxuICAgIH0pO1xyXG4gICAgYGBgXHJcbiAgXHJcbiAgICBDaGFpbmluZ1xyXG4gICAgLS0tLS0tLS1cclxuICBcclxuICAgIFRoZSByZXR1cm4gdmFsdWUgb2YgYHRoZW5gIGlzIGl0c2VsZiBhIHByb21pc2UuICBUaGlzIHNlY29uZCwgJ2Rvd25zdHJlYW0nXHJcbiAgICBwcm9taXNlIGlzIHJlc29sdmVkIHdpdGggdGhlIHJldHVybiB2YWx1ZSBvZiB0aGUgZmlyc3QgcHJvbWlzZSdzIGZ1bGZpbGxtZW50XHJcbiAgICBvciByZWplY3Rpb24gaGFuZGxlciwgb3IgcmVqZWN0ZWQgaWYgdGhlIGhhbmRsZXIgdGhyb3dzIGFuIGV4Y2VwdGlvbi5cclxuICBcclxuICAgIGBgYGpzXHJcbiAgICBmaW5kVXNlcigpLnRoZW4oZnVuY3Rpb24gKHVzZXIpIHtcclxuICAgICAgcmV0dXJuIHVzZXIubmFtZTtcclxuICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcclxuICAgICAgcmV0dXJuICdkZWZhdWx0IG5hbWUnO1xyXG4gICAgfSkudGhlbihmdW5jdGlvbiAodXNlck5hbWUpIHtcclxuICAgICAgLy8gSWYgYGZpbmRVc2VyYCBmdWxmaWxsZWQsIGB1c2VyTmFtZWAgd2lsbCBiZSB0aGUgdXNlcidzIG5hbWUsIG90aGVyd2lzZSBpdFxyXG4gICAgICAvLyB3aWxsIGJlIGAnZGVmYXVsdCBuYW1lJ2BcclxuICAgIH0pO1xyXG4gIFxyXG4gICAgZmluZFVzZXIoKS50aGVuKGZ1bmN0aW9uICh1c2VyKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignRm91bmQgdXNlciwgYnV0IHN0aWxsIHVuaGFwcHknKTtcclxuICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdgZmluZFVzZXJgIHJlamVjdGVkIGFuZCB3ZSdyZSB1bmhhcHB5Jyk7XHJcbiAgICB9KS50aGVuKGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAvLyBuZXZlciByZWFjaGVkXHJcbiAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XHJcbiAgICAgIC8vIGlmIGBmaW5kVXNlcmAgZnVsZmlsbGVkLCBgcmVhc29uYCB3aWxsIGJlICdGb3VuZCB1c2VyLCBidXQgc3RpbGwgdW5oYXBweScuXHJcbiAgICAgIC8vIElmIGBmaW5kVXNlcmAgcmVqZWN0ZWQsIGByZWFzb25gIHdpbGwgYmUgJ2BmaW5kVXNlcmAgcmVqZWN0ZWQgYW5kIHdlJ3JlIHVuaGFwcHknLlxyXG4gICAgfSk7XHJcbiAgICBgYGBcclxuICAgIElmIHRoZSBkb3duc3RyZWFtIHByb21pc2UgZG9lcyBub3Qgc3BlY2lmeSBhIHJlamVjdGlvbiBoYW5kbGVyLCByZWplY3Rpb24gcmVhc29ucyB3aWxsIGJlIHByb3BhZ2F0ZWQgZnVydGhlciBkb3duc3RyZWFtLlxyXG4gIFxyXG4gICAgYGBganNcclxuICAgIGZpbmRVc2VyKCkudGhlbihmdW5jdGlvbiAodXNlcikge1xyXG4gICAgICB0aHJvdyBuZXcgUGVkYWdvZ2ljYWxFeGNlcHRpb24oJ1Vwc3RyZWFtIGVycm9yJyk7XHJcbiAgICB9KS50aGVuKGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAvLyBuZXZlciByZWFjaGVkXHJcbiAgICB9KS50aGVuKGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAvLyBuZXZlciByZWFjaGVkXHJcbiAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XHJcbiAgICAgIC8vIFRoZSBgUGVkZ2Fnb2NpYWxFeGNlcHRpb25gIGlzIHByb3BhZ2F0ZWQgYWxsIHRoZSB3YXkgZG93biB0byBoZXJlXHJcbiAgICB9KTtcclxuICAgIGBgYFxyXG4gIFxyXG4gICAgQXNzaW1pbGF0aW9uXHJcbiAgICAtLS0tLS0tLS0tLS1cclxuICBcclxuICAgIFNvbWV0aW1lcyB0aGUgdmFsdWUgeW91IHdhbnQgdG8gcHJvcGFnYXRlIHRvIGEgZG93bnN0cmVhbSBwcm9taXNlIGNhbiBvbmx5IGJlXHJcbiAgICByZXRyaWV2ZWQgYXN5bmNocm9ub3VzbHkuIFRoaXMgY2FuIGJlIGFjaGlldmVkIGJ5IHJldHVybmluZyBhIHByb21pc2UgaW4gdGhlXHJcbiAgICBmdWxmaWxsbWVudCBvciByZWplY3Rpb24gaGFuZGxlci4gVGhlIGRvd25zdHJlYW0gcHJvbWlzZSB3aWxsIHRoZW4gYmUgcGVuZGluZ1xyXG4gICAgdW50aWwgdGhlIHJldHVybmVkIHByb21pc2UgaXMgc2V0dGxlZC4gVGhpcyBpcyBjYWxsZWQgKmFzc2ltaWxhdGlvbiouXHJcbiAgXHJcbiAgICBgYGBqc1xyXG4gICAgZmluZFVzZXIoKS50aGVuKGZ1bmN0aW9uICh1c2VyKSB7XHJcbiAgICAgIHJldHVybiBmaW5kQ29tbWVudHNCeUF1dGhvcih1c2VyKTtcclxuICAgIH0pLnRoZW4oZnVuY3Rpb24gKGNvbW1lbnRzKSB7XHJcbiAgICAgIC8vIFRoZSB1c2VyJ3MgY29tbWVudHMgYXJlIG5vdyBhdmFpbGFibGVcclxuICAgIH0pO1xyXG4gICAgYGBgXHJcbiAgXHJcbiAgICBJZiB0aGUgYXNzaW1saWF0ZWQgcHJvbWlzZSByZWplY3RzLCB0aGVuIHRoZSBkb3duc3RyZWFtIHByb21pc2Ugd2lsbCBhbHNvIHJlamVjdC5cclxuICBcclxuICAgIGBgYGpzXHJcbiAgICBmaW5kVXNlcigpLnRoZW4oZnVuY3Rpb24gKHVzZXIpIHtcclxuICAgICAgcmV0dXJuIGZpbmRDb21tZW50c0J5QXV0aG9yKHVzZXIpO1xyXG4gICAgfSkudGhlbihmdW5jdGlvbiAoY29tbWVudHMpIHtcclxuICAgICAgLy8gSWYgYGZpbmRDb21tZW50c0J5QXV0aG9yYCBmdWxmaWxscywgd2UnbGwgaGF2ZSB0aGUgdmFsdWUgaGVyZVxyXG4gICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xyXG4gICAgICAvLyBJZiBgZmluZENvbW1lbnRzQnlBdXRob3JgIHJlamVjdHMsIHdlJ2xsIGhhdmUgdGhlIHJlYXNvbiBoZXJlXHJcbiAgICB9KTtcclxuICAgIGBgYFxyXG4gIFxyXG4gICAgU2ltcGxlIEV4YW1wbGVcclxuICAgIC0tLS0tLS0tLS0tLS0tXHJcbiAgXHJcbiAgICBTeW5jaHJvbm91cyBFeGFtcGxlXHJcbiAgXHJcbiAgICBgYGBqYXZhc2NyaXB0XHJcbiAgICBsZXQgcmVzdWx0O1xyXG4gIFxyXG4gICAgdHJ5IHtcclxuICAgICAgcmVzdWx0ID0gZmluZFJlc3VsdCgpO1xyXG4gICAgICAvLyBzdWNjZXNzXHJcbiAgICB9IGNhdGNoKHJlYXNvbikge1xyXG4gICAgICAvLyBmYWlsdXJlXHJcbiAgICB9XHJcbiAgICBgYGBcclxuICBcclxuICAgIEVycmJhY2sgRXhhbXBsZVxyXG4gIFxyXG4gICAgYGBganNcclxuICAgIGZpbmRSZXN1bHQoZnVuY3Rpb24ocmVzdWx0LCBlcnIpe1xyXG4gICAgICBpZiAoZXJyKSB7XHJcbiAgICAgICAgLy8gZmFpbHVyZVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vIHN1Y2Nlc3NcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICBgYGBcclxuICBcclxuICAgIFByb21pc2UgRXhhbXBsZTtcclxuICBcclxuICAgIGBgYGphdmFzY3JpcHRcclxuICAgIGZpbmRSZXN1bHQoKS50aGVuKGZ1bmN0aW9uKHJlc3VsdCl7XHJcbiAgICAgIC8vIHN1Y2Nlc3NcclxuICAgIH0sIGZ1bmN0aW9uKHJlYXNvbil7XHJcbiAgICAgIC8vIGZhaWx1cmVcclxuICAgIH0pO1xyXG4gICAgYGBgXHJcbiAgXHJcbiAgICBBZHZhbmNlZCBFeGFtcGxlXHJcbiAgICAtLS0tLS0tLS0tLS0tLVxyXG4gIFxyXG4gICAgU3luY2hyb25vdXMgRXhhbXBsZVxyXG4gIFxyXG4gICAgYGBgamF2YXNjcmlwdFxyXG4gICAgbGV0IGF1dGhvciwgYm9va3M7XHJcbiAgXHJcbiAgICB0cnkge1xyXG4gICAgICBhdXRob3IgPSBmaW5kQXV0aG9yKCk7XHJcbiAgICAgIGJvb2tzICA9IGZpbmRCb29rc0J5QXV0aG9yKGF1dGhvcik7XHJcbiAgICAgIC8vIHN1Y2Nlc3NcclxuICAgIH0gY2F0Y2gocmVhc29uKSB7XHJcbiAgICAgIC8vIGZhaWx1cmVcclxuICAgIH1cclxuICAgIGBgYFxyXG4gIFxyXG4gICAgRXJyYmFjayBFeGFtcGxlXHJcbiAgXHJcbiAgICBgYGBqc1xyXG4gIFxyXG4gICAgZnVuY3Rpb24gZm91bmRCb29rcyhib29rcykge1xyXG4gIFxyXG4gICAgfVxyXG4gIFxyXG4gICAgZnVuY3Rpb24gZmFpbHVyZShyZWFzb24pIHtcclxuICBcclxuICAgIH1cclxuICBcclxuICAgIGZpbmRBdXRob3IoZnVuY3Rpb24oYXV0aG9yLCBlcnIpe1xyXG4gICAgICBpZiAoZXJyKSB7XHJcbiAgICAgICAgZmFpbHVyZShlcnIpO1xyXG4gICAgICAgIC8vIGZhaWx1cmVcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgZmluZEJvb29rc0J5QXV0aG9yKGF1dGhvciwgZnVuY3Rpb24oYm9va3MsIGVycikge1xyXG4gICAgICAgICAgICBpZiAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgZmFpbHVyZShlcnIpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBmb3VuZEJvb2tzKGJvb2tzKTtcclxuICAgICAgICAgICAgICB9IGNhdGNoKHJlYXNvbikge1xyXG4gICAgICAgICAgICAgICAgZmFpbHVyZShyZWFzb24pO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBjYXRjaChlcnJvcikge1xyXG4gICAgICAgICAgZmFpbHVyZShlcnIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBzdWNjZXNzXHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgYGBgXHJcbiAgXHJcbiAgICBQcm9taXNlIEV4YW1wbGU7XHJcbiAgXHJcbiAgICBgYGBqYXZhc2NyaXB0XHJcbiAgICBmaW5kQXV0aG9yKCkuXHJcbiAgICAgIHRoZW4oZmluZEJvb2tzQnlBdXRob3IpLlxyXG4gICAgICB0aGVuKGZ1bmN0aW9uKGJvb2tzKXtcclxuICAgICAgICAvLyBmb3VuZCBib29rc1xyXG4gICAgfSkuY2F0Y2goZnVuY3Rpb24ocmVhc29uKXtcclxuICAgICAgLy8gc29tZXRoaW5nIHdlbnQgd3JvbmdcclxuICAgIH0pO1xyXG4gICAgYGBgXHJcbiAgXHJcbiAgICBAbWV0aG9kIHRoZW5cclxuICAgIEBwYXJhbSB7RnVuY3Rpb259IG9uRnVsZmlsbGVkXHJcbiAgICBAcGFyYW0ge0Z1bmN0aW9ufSBvblJlamVjdGVkXHJcbiAgICBVc2VmdWwgZm9yIHRvb2xpbmcuXHJcbiAgICBAcmV0dXJuIHtQcm9taXNlfVxyXG4gICovXHJcbiAgdGhlbjogdGhlbixcclxuXHJcbiAgLyoqXHJcbiAgICBgY2F0Y2hgIGlzIHNpbXBseSBzdWdhciBmb3IgYHRoZW4odW5kZWZpbmVkLCBvblJlamVjdGlvbilgIHdoaWNoIG1ha2VzIGl0IHRoZSBzYW1lXHJcbiAgICBhcyB0aGUgY2F0Y2ggYmxvY2sgb2YgYSB0cnkvY2F0Y2ggc3RhdGVtZW50LlxyXG4gIFxyXG4gICAgYGBganNcclxuICAgIGZ1bmN0aW9uIGZpbmRBdXRob3IoKXtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdjb3VsZG4ndCBmaW5kIHRoYXQgYXV0aG9yJyk7XHJcbiAgICB9XHJcbiAgXHJcbiAgICAvLyBzeW5jaHJvbm91c1xyXG4gICAgdHJ5IHtcclxuICAgICAgZmluZEF1dGhvcigpO1xyXG4gICAgfSBjYXRjaChyZWFzb24pIHtcclxuICAgICAgLy8gc29tZXRoaW5nIHdlbnQgd3JvbmdcclxuICAgIH1cclxuICBcclxuICAgIC8vIGFzeW5jIHdpdGggcHJvbWlzZXNcclxuICAgIGZpbmRBdXRob3IoKS5jYXRjaChmdW5jdGlvbihyZWFzb24pe1xyXG4gICAgICAvLyBzb21ldGhpbmcgd2VudCB3cm9uZ1xyXG4gICAgfSk7XHJcbiAgICBgYGBcclxuICBcclxuICAgIEBtZXRob2QgY2F0Y2hcclxuICAgIEBwYXJhbSB7RnVuY3Rpb259IG9uUmVqZWN0aW9uXHJcbiAgICBVc2VmdWwgZm9yIHRvb2xpbmcuXHJcbiAgICBAcmV0dXJuIHtQcm9taXNlfVxyXG4gICovXHJcbiAgJ2NhdGNoJzogZnVuY3Rpb24gX2NhdGNoKG9uUmVqZWN0aW9uKSB7XHJcbiAgICByZXR1cm4gdGhpcy50aGVuKG51bGwsIG9uUmVqZWN0aW9uKTtcclxuICB9XHJcbn07XHJcblxyXG5mdW5jdGlvbiBwb2x5ZmlsbCgpIHtcclxuICAgIHZhciBsb2NhbCA9IHVuZGVmaW5lZDtcclxuXHJcbiAgICBpZiAodHlwZW9mIGdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICBsb2NhbCA9IGdsb2JhbDtcclxuICAgIH0gZWxzZSBpZiAodHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgbG9jYWwgPSBzZWxmO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBsb2NhbCA9IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKCk7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3BvbHlmaWxsIGZhaWxlZCBiZWNhdXNlIGdsb2JhbCBvYmplY3QgaXMgdW5hdmFpbGFibGUgaW4gdGhpcyBlbnZpcm9ubWVudCcpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB2YXIgUCA9IGxvY2FsLlByb21pc2U7XHJcblxyXG4gICAgaWYgKFApIHtcclxuICAgICAgICB2YXIgcHJvbWlzZVRvU3RyaW5nID0gbnVsbDtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBwcm9taXNlVG9TdHJpbmcgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoUC5yZXNvbHZlKCkpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgLy8gc2lsZW50bHkgaWdub3JlZFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHByb21pc2VUb1N0cmluZyA9PT0gJ1tvYmplY3QgUHJvbWlzZV0nICYmICFQLmNhc3QpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBsb2NhbC5Qcm9taXNlID0gUHJvbWlzZTtcclxufVxyXG5cclxucG9seWZpbGwoKTtcclxuLy8gU3RyYW5nZSBjb21wYXQuLlxyXG5Qcm9taXNlLnBvbHlmaWxsID0gcG9seWZpbGw7XHJcblByb21pc2UuUHJvbWlzZSA9IFByb21pc2U7XHJcblxyXG5yZXR1cm4gUHJvbWlzZTtcclxuXHJcbn0pKSk7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWVzNi1wcm9taXNlLm1hcCIsIid1c2Ugc3RyaWN0JztcclxuXHJcbnZhciBoYXMgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xyXG5cclxuLy9cclxuLy8gV2Ugc3RvcmUgb3VyIEVFIG9iamVjdHMgaW4gYSBwbGFpbiBvYmplY3Qgd2hvc2UgcHJvcGVydGllcyBhcmUgZXZlbnQgbmFtZXMuXHJcbi8vIElmIGBPYmplY3QuY3JlYXRlKG51bGwpYCBpcyBub3Qgc3VwcG9ydGVkIHdlIHByZWZpeCB0aGUgZXZlbnQgbmFtZXMgd2l0aCBhXHJcbi8vIGB+YCB0byBtYWtlIHN1cmUgdGhhdCB0aGUgYnVpbHQtaW4gb2JqZWN0IHByb3BlcnRpZXMgYXJlIG5vdCBvdmVycmlkZGVuIG9yXHJcbi8vIHVzZWQgYXMgYW4gYXR0YWNrIHZlY3Rvci5cclxuLy8gV2UgYWxzbyBhc3N1bWUgdGhhdCBgT2JqZWN0LmNyZWF0ZShudWxsKWAgaXMgYXZhaWxhYmxlIHdoZW4gdGhlIGV2ZW50IG5hbWVcclxuLy8gaXMgYW4gRVM2IFN5bWJvbC5cclxuLy9cclxudmFyIHByZWZpeCA9IHR5cGVvZiBPYmplY3QuY3JlYXRlICE9PSAnZnVuY3Rpb24nID8gJ34nIDogZmFsc2U7XHJcblxyXG4vKipcclxuICogUmVwcmVzZW50YXRpb24gb2YgYSBzaW5nbGUgRXZlbnRFbWl0dGVyIGZ1bmN0aW9uLlxyXG4gKlxyXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBFdmVudCBoYW5kbGVyIHRvIGJlIGNhbGxlZC5cclxuICogQHBhcmFtIHtNaXhlZH0gY29udGV4dCBDb250ZXh0IGZvciBmdW5jdGlvbiBleGVjdXRpb24uXHJcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gW29uY2U9ZmFsc2VdIE9ubHkgZW1pdCBvbmNlXHJcbiAqIEBhcGkgcHJpdmF0ZVxyXG4gKi9cclxuZnVuY3Rpb24gRUUoZm4sIGNvbnRleHQsIG9uY2UpIHtcclxuICB0aGlzLmZuID0gZm47XHJcbiAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcclxuICB0aGlzLm9uY2UgPSBvbmNlIHx8IGZhbHNlO1xyXG59XHJcblxyXG4vKipcclxuICogTWluaW1hbCBFdmVudEVtaXR0ZXIgaW50ZXJmYWNlIHRoYXQgaXMgbW9sZGVkIGFnYWluc3QgdGhlIE5vZGUuanNcclxuICogRXZlbnRFbWl0dGVyIGludGVyZmFjZS5cclxuICpcclxuICogQGNvbnN0cnVjdG9yXHJcbiAqIEBhcGkgcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiBFdmVudEVtaXR0ZXIoKSB7IC8qIE5vdGhpbmcgdG8gc2V0ICovIH1cclxuXHJcbi8qKlxyXG4gKiBIb2xkIHRoZSBhc3NpZ25lZCBFdmVudEVtaXR0ZXJzIGJ5IG5hbWUuXHJcbiAqXHJcbiAqIEB0eXBlIHtPYmplY3R9XHJcbiAqIEBwcml2YXRlXHJcbiAqL1xyXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLl9ldmVudHMgPSB1bmRlZmluZWQ7XHJcblxyXG4vKipcclxuICogUmV0dXJuIGFuIGFycmF5IGxpc3RpbmcgdGhlIGV2ZW50cyBmb3Igd2hpY2ggdGhlIGVtaXR0ZXIgaGFzIHJlZ2lzdGVyZWRcclxuICogbGlzdGVuZXJzLlxyXG4gKlxyXG4gKiBAcmV0dXJucyB7QXJyYXl9XHJcbiAqIEBhcGkgcHVibGljXHJcbiAqL1xyXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmV2ZW50TmFtZXMgPSBmdW5jdGlvbiBldmVudE5hbWVzKCkge1xyXG4gIHZhciBldmVudHMgPSB0aGlzLl9ldmVudHNcclxuICAgICwgbmFtZXMgPSBbXVxyXG4gICAgLCBuYW1lO1xyXG5cclxuICBpZiAoIWV2ZW50cykgcmV0dXJuIG5hbWVzO1xyXG5cclxuICBmb3IgKG5hbWUgaW4gZXZlbnRzKSB7XHJcbiAgICBpZiAoaGFzLmNhbGwoZXZlbnRzLCBuYW1lKSkgbmFtZXMucHVzaChwcmVmaXggPyBuYW1lLnNsaWNlKDEpIDogbmFtZSk7XHJcbiAgfVxyXG5cclxuICBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykge1xyXG4gICAgcmV0dXJuIG5hbWVzLmNvbmNhdChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGV2ZW50cykpO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIG5hbWVzO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIFJldHVybiBhIGxpc3Qgb2YgYXNzaWduZWQgZXZlbnQgbGlzdGVuZXJzLlxyXG4gKlxyXG4gKiBAcGFyYW0ge1N0cmluZ30gZXZlbnQgVGhlIGV2ZW50cyB0aGF0IHNob3VsZCBiZSBsaXN0ZWQuXHJcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gZXhpc3RzIFdlIG9ubHkgbmVlZCB0byBrbm93IGlmIHRoZXJlIGFyZSBsaXN0ZW5lcnMuXHJcbiAqIEByZXR1cm5zIHtBcnJheXxCb29sZWFufVxyXG4gKiBAYXBpIHB1YmxpY1xyXG4gKi9cclxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5saXN0ZW5lcnMgPSBmdW5jdGlvbiBsaXN0ZW5lcnMoZXZlbnQsIGV4aXN0cykge1xyXG4gIHZhciBldnQgPSBwcmVmaXggPyBwcmVmaXggKyBldmVudCA6IGV2ZW50XHJcbiAgICAsIGF2YWlsYWJsZSA9IHRoaXMuX2V2ZW50cyAmJiB0aGlzLl9ldmVudHNbZXZ0XTtcclxuXHJcbiAgaWYgKGV4aXN0cykgcmV0dXJuICEhYXZhaWxhYmxlO1xyXG4gIGlmICghYXZhaWxhYmxlKSByZXR1cm4gW107XHJcbiAgaWYgKGF2YWlsYWJsZS5mbikgcmV0dXJuIFthdmFpbGFibGUuZm5dO1xyXG5cclxuICBmb3IgKHZhciBpID0gMCwgbCA9IGF2YWlsYWJsZS5sZW5ndGgsIGVlID0gbmV3IEFycmF5KGwpOyBpIDwgbDsgaSsrKSB7XHJcbiAgICBlZVtpXSA9IGF2YWlsYWJsZVtpXS5mbjtcclxuICB9XHJcblxyXG4gIHJldHVybiBlZTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBFbWl0IGFuIGV2ZW50IHRvIGFsbCByZWdpc3RlcmVkIGV2ZW50IGxpc3RlbmVycy5cclxuICpcclxuICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50IFRoZSBuYW1lIG9mIHRoZSBldmVudC5cclxuICogQHJldHVybnMge0Jvb2xlYW59IEluZGljYXRpb24gaWYgd2UndmUgZW1pdHRlZCBhbiBldmVudC5cclxuICogQGFwaSBwdWJsaWNcclxuICovXHJcbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuZW1pdCA9IGZ1bmN0aW9uIGVtaXQoZXZlbnQsIGExLCBhMiwgYTMsIGE0LCBhNSkge1xyXG4gIHZhciBldnQgPSBwcmVmaXggPyBwcmVmaXggKyBldmVudCA6IGV2ZW50O1xyXG5cclxuICBpZiAoIXRoaXMuX2V2ZW50cyB8fCAhdGhpcy5fZXZlbnRzW2V2dF0pIHJldHVybiBmYWxzZTtcclxuXHJcbiAgdmFyIGxpc3RlbmVycyA9IHRoaXMuX2V2ZW50c1tldnRdXHJcbiAgICAsIGxlbiA9IGFyZ3VtZW50cy5sZW5ndGhcclxuICAgICwgYXJnc1xyXG4gICAgLCBpO1xyXG5cclxuICBpZiAoJ2Z1bmN0aW9uJyA9PT0gdHlwZW9mIGxpc3RlbmVycy5mbikge1xyXG4gICAgaWYgKGxpc3RlbmVycy5vbmNlKSB0aGlzLnJlbW92ZUxpc3RlbmVyKGV2ZW50LCBsaXN0ZW5lcnMuZm4sIHVuZGVmaW5lZCwgdHJ1ZSk7XHJcblxyXG4gICAgc3dpdGNoIChsZW4pIHtcclxuICAgICAgY2FzZSAxOiByZXR1cm4gbGlzdGVuZXJzLmZuLmNhbGwobGlzdGVuZXJzLmNvbnRleHQpLCB0cnVlO1xyXG4gICAgICBjYXNlIDI6IHJldHVybiBsaXN0ZW5lcnMuZm4uY2FsbChsaXN0ZW5lcnMuY29udGV4dCwgYTEpLCB0cnVlO1xyXG4gICAgICBjYXNlIDM6IHJldHVybiBsaXN0ZW5lcnMuZm4uY2FsbChsaXN0ZW5lcnMuY29udGV4dCwgYTEsIGEyKSwgdHJ1ZTtcclxuICAgICAgY2FzZSA0OiByZXR1cm4gbGlzdGVuZXJzLmZuLmNhbGwobGlzdGVuZXJzLmNvbnRleHQsIGExLCBhMiwgYTMpLCB0cnVlO1xyXG4gICAgICBjYXNlIDU6IHJldHVybiBsaXN0ZW5lcnMuZm4uY2FsbChsaXN0ZW5lcnMuY29udGV4dCwgYTEsIGEyLCBhMywgYTQpLCB0cnVlO1xyXG4gICAgICBjYXNlIDY6IHJldHVybiBsaXN0ZW5lcnMuZm4uY2FsbChsaXN0ZW5lcnMuY29udGV4dCwgYTEsIGEyLCBhMywgYTQsIGE1KSwgdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBmb3IgKGkgPSAxLCBhcmdzID0gbmV3IEFycmF5KGxlbiAtMSk7IGkgPCBsZW47IGkrKykge1xyXG4gICAgICBhcmdzW2kgLSAxXSA9IGFyZ3VtZW50c1tpXTtcclxuICAgIH1cclxuXHJcbiAgICBsaXN0ZW5lcnMuZm4uYXBwbHkobGlzdGVuZXJzLmNvbnRleHQsIGFyZ3MpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICB2YXIgbGVuZ3RoID0gbGlzdGVuZXJzLmxlbmd0aFxyXG4gICAgICAsIGo7XHJcblxyXG4gICAgZm9yIChpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIGlmIChsaXN0ZW5lcnNbaV0ub25jZSkgdGhpcy5yZW1vdmVMaXN0ZW5lcihldmVudCwgbGlzdGVuZXJzW2ldLmZuLCB1bmRlZmluZWQsIHRydWUpO1xyXG5cclxuICAgICAgc3dpdGNoIChsZW4pIHtcclxuICAgICAgICBjYXNlIDE6IGxpc3RlbmVyc1tpXS5mbi5jYWxsKGxpc3RlbmVyc1tpXS5jb250ZXh0KTsgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAyOiBsaXN0ZW5lcnNbaV0uZm4uY2FsbChsaXN0ZW5lcnNbaV0uY29udGV4dCwgYTEpOyBicmVhaztcclxuICAgICAgICBjYXNlIDM6IGxpc3RlbmVyc1tpXS5mbi5jYWxsKGxpc3RlbmVyc1tpXS5jb250ZXh0LCBhMSwgYTIpOyBicmVhaztcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgaWYgKCFhcmdzKSBmb3IgKGogPSAxLCBhcmdzID0gbmV3IEFycmF5KGxlbiAtMSk7IGogPCBsZW47IGorKykge1xyXG4gICAgICAgICAgICBhcmdzW2ogLSAxXSA9IGFyZ3VtZW50c1tqXTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBsaXN0ZW5lcnNbaV0uZm4uYXBwbHkobGlzdGVuZXJzW2ldLmNvbnRleHQsIGFyZ3MpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZXR1cm4gdHJ1ZTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBSZWdpc3RlciBhIG5ldyBFdmVudExpc3RlbmVyIGZvciB0aGUgZ2l2ZW4gZXZlbnQuXHJcbiAqXHJcbiAqIEBwYXJhbSB7U3RyaW5nfSBldmVudCBOYW1lIG9mIHRoZSBldmVudC5cclxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gQ2FsbGJhY2sgZnVuY3Rpb24uXHJcbiAqIEBwYXJhbSB7TWl4ZWR9IFtjb250ZXh0PXRoaXNdIFRoZSBjb250ZXh0IG9mIHRoZSBmdW5jdGlvbi5cclxuICogQGFwaSBwdWJsaWNcclxuICovXHJcbkV2ZW50RW1pdHRlci5wcm90b3R5cGUub24gPSBmdW5jdGlvbiBvbihldmVudCwgZm4sIGNvbnRleHQpIHtcclxuICB2YXIgbGlzdGVuZXIgPSBuZXcgRUUoZm4sIGNvbnRleHQgfHwgdGhpcylcclxuICAgICwgZXZ0ID0gcHJlZml4ID8gcHJlZml4ICsgZXZlbnQgOiBldmVudDtcclxuXHJcbiAgaWYgKCF0aGlzLl9ldmVudHMpIHRoaXMuX2V2ZW50cyA9IHByZWZpeCA/IHt9IDogT2JqZWN0LmNyZWF0ZShudWxsKTtcclxuICBpZiAoIXRoaXMuX2V2ZW50c1tldnRdKSB0aGlzLl9ldmVudHNbZXZ0XSA9IGxpc3RlbmVyO1xyXG4gIGVsc2Uge1xyXG4gICAgaWYgKCF0aGlzLl9ldmVudHNbZXZ0XS5mbikgdGhpcy5fZXZlbnRzW2V2dF0ucHVzaChsaXN0ZW5lcik7XHJcbiAgICBlbHNlIHRoaXMuX2V2ZW50c1tldnRdID0gW1xyXG4gICAgICB0aGlzLl9ldmVudHNbZXZ0XSwgbGlzdGVuZXJcclxuICAgIF07XHJcbiAgfVxyXG5cclxuICByZXR1cm4gdGhpcztcclxufTtcclxuXHJcbi8qKlxyXG4gKiBBZGQgYW4gRXZlbnRMaXN0ZW5lciB0aGF0J3Mgb25seSBjYWxsZWQgb25jZS5cclxuICpcclxuICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50IE5hbWUgb2YgdGhlIGV2ZW50LlxyXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBDYWxsYmFjayBmdW5jdGlvbi5cclxuICogQHBhcmFtIHtNaXhlZH0gW2NvbnRleHQ9dGhpc10gVGhlIGNvbnRleHQgb2YgdGhlIGZ1bmN0aW9uLlxyXG4gKiBAYXBpIHB1YmxpY1xyXG4gKi9cclxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vbmNlID0gZnVuY3Rpb24gb25jZShldmVudCwgZm4sIGNvbnRleHQpIHtcclxuICB2YXIgbGlzdGVuZXIgPSBuZXcgRUUoZm4sIGNvbnRleHQgfHwgdGhpcywgdHJ1ZSlcclxuICAgICwgZXZ0ID0gcHJlZml4ID8gcHJlZml4ICsgZXZlbnQgOiBldmVudDtcclxuXHJcbiAgaWYgKCF0aGlzLl9ldmVudHMpIHRoaXMuX2V2ZW50cyA9IHByZWZpeCA/IHt9IDogT2JqZWN0LmNyZWF0ZShudWxsKTtcclxuICBpZiAoIXRoaXMuX2V2ZW50c1tldnRdKSB0aGlzLl9ldmVudHNbZXZ0XSA9IGxpc3RlbmVyO1xyXG4gIGVsc2Uge1xyXG4gICAgaWYgKCF0aGlzLl9ldmVudHNbZXZ0XS5mbikgdGhpcy5fZXZlbnRzW2V2dF0ucHVzaChsaXN0ZW5lcik7XHJcbiAgICBlbHNlIHRoaXMuX2V2ZW50c1tldnRdID0gW1xyXG4gICAgICB0aGlzLl9ldmVudHNbZXZ0XSwgbGlzdGVuZXJcclxuICAgIF07XHJcbiAgfVxyXG5cclxuICByZXR1cm4gdGhpcztcclxufTtcclxuXHJcbi8qKlxyXG4gKiBSZW1vdmUgZXZlbnQgbGlzdGVuZXJzLlxyXG4gKlxyXG4gKiBAcGFyYW0ge1N0cmluZ30gZXZlbnQgVGhlIGV2ZW50IHdlIHdhbnQgdG8gcmVtb3ZlLlxyXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBUaGUgbGlzdGVuZXIgdGhhdCB3ZSBuZWVkIHRvIGZpbmQuXHJcbiAqIEBwYXJhbSB7TWl4ZWR9IGNvbnRleHQgT25seSByZW1vdmUgbGlzdGVuZXJzIG1hdGNoaW5nIHRoaXMgY29udGV4dC5cclxuICogQHBhcmFtIHtCb29sZWFufSBvbmNlIE9ubHkgcmVtb3ZlIG9uY2UgbGlzdGVuZXJzLlxyXG4gKiBAYXBpIHB1YmxpY1xyXG4gKi9cclxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVMaXN0ZW5lciA9IGZ1bmN0aW9uIHJlbW92ZUxpc3RlbmVyKGV2ZW50LCBmbiwgY29udGV4dCwgb25jZSkge1xyXG4gIHZhciBldnQgPSBwcmVmaXggPyBwcmVmaXggKyBldmVudCA6IGV2ZW50O1xyXG5cclxuICBpZiAoIXRoaXMuX2V2ZW50cyB8fCAhdGhpcy5fZXZlbnRzW2V2dF0pIHJldHVybiB0aGlzO1xyXG5cclxuICB2YXIgbGlzdGVuZXJzID0gdGhpcy5fZXZlbnRzW2V2dF1cclxuICAgICwgZXZlbnRzID0gW107XHJcblxyXG4gIGlmIChmbikge1xyXG4gICAgaWYgKGxpc3RlbmVycy5mbikge1xyXG4gICAgICBpZiAoXHJcbiAgICAgICAgICAgbGlzdGVuZXJzLmZuICE9PSBmblxyXG4gICAgICAgIHx8IChvbmNlICYmICFsaXN0ZW5lcnMub25jZSlcclxuICAgICAgICB8fCAoY29udGV4dCAmJiBsaXN0ZW5lcnMuY29udGV4dCAhPT0gY29udGV4dClcclxuICAgICAgKSB7XHJcbiAgICAgICAgZXZlbnRzLnB1c2gobGlzdGVuZXJzKTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IGxpc3RlbmVycy5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgIGxpc3RlbmVyc1tpXS5mbiAhPT0gZm5cclxuICAgICAgICAgIHx8IChvbmNlICYmICFsaXN0ZW5lcnNbaV0ub25jZSlcclxuICAgICAgICAgIHx8IChjb250ZXh0ICYmIGxpc3RlbmVyc1tpXS5jb250ZXh0ICE9PSBjb250ZXh0KVxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgZXZlbnRzLnB1c2gobGlzdGVuZXJzW2ldKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vXHJcbiAgLy8gUmVzZXQgdGhlIGFycmF5LCBvciByZW1vdmUgaXQgY29tcGxldGVseSBpZiB3ZSBoYXZlIG5vIG1vcmUgbGlzdGVuZXJzLlxyXG4gIC8vXHJcbiAgaWYgKGV2ZW50cy5sZW5ndGgpIHtcclxuICAgIHRoaXMuX2V2ZW50c1tldnRdID0gZXZlbnRzLmxlbmd0aCA9PT0gMSA/IGV2ZW50c1swXSA6IGV2ZW50cztcclxuICB9IGVsc2Uge1xyXG4gICAgZGVsZXRlIHRoaXMuX2V2ZW50c1tldnRdO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHRoaXM7XHJcbn07XHJcblxyXG4vKipcclxuICogUmVtb3ZlIGFsbCBsaXN0ZW5lcnMgb3Igb25seSB0aGUgbGlzdGVuZXJzIGZvciB0aGUgc3BlY2lmaWVkIGV2ZW50LlxyXG4gKlxyXG4gKiBAcGFyYW0ge1N0cmluZ30gZXZlbnQgVGhlIGV2ZW50IHdhbnQgdG8gcmVtb3ZlIGFsbCBsaXN0ZW5lcnMgZm9yLlxyXG4gKiBAYXBpIHB1YmxpY1xyXG4gKi9cclxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBmdW5jdGlvbiByZW1vdmVBbGxMaXN0ZW5lcnMoZXZlbnQpIHtcclxuICBpZiAoIXRoaXMuX2V2ZW50cykgcmV0dXJuIHRoaXM7XHJcblxyXG4gIGlmIChldmVudCkgZGVsZXRlIHRoaXMuX2V2ZW50c1twcmVmaXggPyBwcmVmaXggKyBldmVudCA6IGV2ZW50XTtcclxuICBlbHNlIHRoaXMuX2V2ZW50cyA9IHByZWZpeCA/IHt9IDogT2JqZWN0LmNyZWF0ZShudWxsKTtcclxuXHJcbiAgcmV0dXJuIHRoaXM7XHJcbn07XHJcblxyXG4vL1xyXG4vLyBBbGlhcyBtZXRob2RzIG5hbWVzIGJlY2F1c2UgcGVvcGxlIHJvbGwgbGlrZSB0aGF0LlxyXG4vL1xyXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLm9mZiA9IEV2ZW50RW1pdHRlci5wcm90b3R5cGUucmVtb3ZlTGlzdGVuZXI7XHJcbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuYWRkTGlzdGVuZXIgPSBFdmVudEVtaXR0ZXIucHJvdG90eXBlLm9uO1xyXG5cclxuLy9cclxuLy8gVGhpcyBmdW5jdGlvbiBkb2Vzbid0IGFwcGx5IGFueW1vcmUuXHJcbi8vXHJcbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuc2V0TWF4TGlzdGVuZXJzID0gZnVuY3Rpb24gc2V0TWF4TGlzdGVuZXJzKCkge1xyXG4gIHJldHVybiB0aGlzO1xyXG59O1xyXG5cclxuLy9cclxuLy8gRXhwb3NlIHRoZSBwcmVmaXguXHJcbi8vXHJcbkV2ZW50RW1pdHRlci5wcmVmaXhlZCA9IHByZWZpeDtcclxuXHJcbi8vXHJcbi8vIEV4cG9zZSB0aGUgbW9kdWxlLlxyXG4vL1xyXG5pZiAoJ3VuZGVmaW5lZCcgIT09IHR5cGVvZiBtb2R1bGUpIHtcclxuICBtb2R1bGUuZXhwb3J0cyA9IEV2ZW50RW1pdHRlcjtcclxufVxyXG4iLCIoZnVuY3Rpb24oKXt2YXIgZz17fTtcclxuKGZ1bmN0aW9uKHdpbmRvdyl7dmFyIGssYWE9dGhpczthYS5iZD0hMDtmdW5jdGlvbiBsKGEsYil7dmFyIGM9YS5zcGxpdChcIi5cIiksZD1hYTtjWzBdaW4gZHx8IWQuZXhlY1NjcmlwdHx8ZC5leGVjU2NyaXB0KFwidmFyIFwiK2NbMF0pO2Zvcih2YXIgZTtjLmxlbmd0aCYmKGU9Yy5zaGlmdCgpKTspYy5sZW5ndGh8fHZvaWQgMD09PWI/ZFtlXT9kPWRbZV06ZD1kW2VdPXt9OmRbZV09Yn1mdW5jdGlvbiBiYShhKXt2YXIgYj1wO2Z1bmN0aW9uIGMoKXt9Yy5wcm90b3R5cGU9Yi5wcm90b3R5cGU7YS5qZD1iLnByb3RvdHlwZTthLnByb3RvdHlwZT1uZXcgYzthLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1hO2EuY2Q9ZnVuY3Rpb24oYSxjLGYpe3JldHVybiBiLnByb3RvdHlwZVtjXS5hcHBseShhLEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywyKSl9fTsvKlxyXG5cclxuIENvcHlyaWdodCAyMDE2IEdvb2dsZSBJbmMuXHJcblxyXG4gTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG5cclxuICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuXHJcbiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4qL1xyXG5mdW5jdGlvbiBjYShhKXt0aGlzLmM9TWF0aC5leHAoTWF0aC5sb2coLjUpL2EpO3RoaXMuYT10aGlzLmI9MH1mdW5jdGlvbiBkYShhLGIsYyl7dmFyIGQ9TWF0aC5wb3coYS5jLGIpO2EuYj1jKigxLWQpK2QqYS5iO2EuYSs9Yn1mdW5jdGlvbiBlYShhKXtyZXR1cm4gYS5iLygxLU1hdGgucG93KGEuYyxhLmEpKX07ZnVuY3Rpb24gZmEoKXt0aGlzLmE9bmV3IGNhKDMpO3RoaXMuYz1uZXcgY2EoMTApO3RoaXMuYj01RTV9ZnVuY3Rpb24gZ2EoYSl7cmV0dXJuLjU+YS5hLmE/YS5iOk1hdGgubWluKGVhKGEuYSksZWEoYS5jKSl9O2Z1bmN0aW9uIGhhKCl7fWZ1bmN0aW9uIGlhKCl7fTtmdW5jdGlvbiBqYSgpe3RoaXMuaD1udWxsO3RoaXMuZj0hMTt0aGlzLmM9bmV3IGZhO3RoaXMuZz17fTt0aGlzLmE9e307dGhpcy5pPSExO3RoaXMuYj1udWxsfWwoXCJzaGFrYS5hYnIuU2ltcGxlQWJyTWFuYWdlclwiLGphKTtrPWphLnByb3RvdHlwZTtrLnN0b3A9ZnVuY3Rpb24oKXt0aGlzLmg9bnVsbDt0aGlzLmY9ITE7dGhpcy5nPXt9O3RoaXMuYT17fTt0aGlzLmI9bnVsbH07ay5pbml0PWZ1bmN0aW9uKGEpe3RoaXMuaD1hfTtcclxuay5jaG9vc2VTdHJlYW1zPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYiBpbiBhKXRoaXMuZ1tiXT1hW2JdO2I9e307aWYoXCJhdWRpb1wiaW4gYSl7dmFyIGM9a2EodGhpcyk7Yz8oYi5hdWRpbz1jLHRoaXMuYS5hdWRpbz1jKTpkZWxldGUgdGhpcy5hLmF1ZGlvfVwidmlkZW9cImluIGEmJigoYz1sYSh0aGlzKSk/KGIudmlkZW89Yyx0aGlzLmEudmlkZW89Yyk6ZGVsZXRlIHRoaXMuYS52aWRlbyk7XCJ0ZXh0XCJpbiBhJiYoYi50ZXh0PWEudGV4dC5zdHJlYW1zWzBdKTt0aGlzLmI9RGF0ZS5ub3coKTtyZXR1cm4gYn07ay5lbmFibGU9ZnVuY3Rpb24oKXt0aGlzLmY9ITB9O2suZGlzYWJsZT1mdW5jdGlvbigpe3RoaXMuZj0hMX07XHJcbmsuc2VnbWVudERvd25sb2FkZWQ9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXRoaXMuYzthPWItYTs2NTUzNj5jfHwoYT1NYXRoLm1heChhLDUwKSxjPThFMypjL2EsYS89MUUzLGRhKGQuYSxhLGMpLGRhKGQuYyxhLGMpKTtpZihudWxsIT10aGlzLmImJnRoaXMuZilhOntkPURhdGUubm93KCktdGhpcy5iO2lmKCF0aGlzLmkpe2lmKDRFMz5kKWJyZWFrIGE7dGhpcy5pPSEwfWVsc2UgaWYoOEUzPmQpYnJlYWsgYTtkPXRoaXMuYS52aWRlbztjPXt9O2lmKGE9a2EodGhpcykpYy5hdWRpbz1hLHRoaXMuYS5hdWRpbz1hO2lmKGE9bGEodGhpcykpYy52aWRlbz1hLHRoaXMuYS52aWRlbz1hO3RoaXMuYj1EYXRlLm5vdygpO2E9dm9pZCAwO2QmJmMudmlkZW8mJmMudmlkZW8uYmFuZHdpZHRoPmQuYmFuZHdpZHRoJiYoYT0xMCk7dGhpcy5oKGMsYSl9fTtrLmdldEJhbmR3aWR0aEVzdGltYXRlPWZ1bmN0aW9uKCl7cmV0dXJuIGdhKHRoaXMuYyl9O1xyXG5rLnNldERlZmF1bHRFc3RpbWF0ZT1mdW5jdGlvbihhKXt0aGlzLmMuYj1hfTtmdW5jdGlvbiBrYShhKXthPWEuZy5hdWRpbztpZighYSlyZXR1cm4gbnVsbDthPW1hKGEpO3JldHVybiBhW01hdGguZmxvb3IoYS5sZW5ndGgvMildfWZ1bmN0aW9uIGxhKGEpe3ZhciBiPWEuZy52aWRlbztpZighYilyZXR1cm4gbnVsbDt2YXIgYj1tYShiKSxjPWEuYS5hdWRpbyxjPWMmJmMuYmFuZHdpZHRofHwwO2E9Z2EoYS5jKTtmb3IodmFyIGQ9YlswXSxlPTA7ZTxiLmxlbmd0aDsrK2Upe3ZhciBmPWJbZV0sZz1lKzE8Yi5sZW5ndGg/YltlKzFdOntiYW5kd2lkdGg6SW5maW5pdHl9O2YuYmFuZHdpZHRoJiYoZz0oZy5iYW5kd2lkdGgrYykvLjg1LGE+PShmLmJhbmR3aWR0aCtjKS8uOTUmJmE8PWcmJihkPWYpKX1yZXR1cm4gZH1cclxuZnVuY3Rpb24gbWEoYSl7cmV0dXJuIGEuc3RyZWFtcy5zbGljZSgwKS5maWx0ZXIoZnVuY3Rpb24oYSl7cmV0dXJuIGEuYWxsb3dlZEJ5QXBwbGljYXRpb24mJmEuYWxsb3dlZEJ5S2V5U3lzdGVtfSkuc29ydChmdW5jdGlvbihhLGMpe3JldHVybiBhLmJhbmR3aWR0aC1jLmJhbmR3aWR0aH0pfTt2YXIgbmE9L14oPzooW146Lz8jLl0rKTopPyg/OlxcL1xcLyg/OihbXi8/I10qKUApPyhbXi8jP10qPykoPzo6KFswLTldKykpPyg/PVsvIz9dfCQpKT8oW14/I10rKT8oPzpcXD8oW14jXSopKT8oPzojKC4qKSk/JC87ZnVuY3Rpb24gb2EoYSl7dmFyIGI7YSBpbnN0YW5jZW9mIG9hPyhwYSh0aGlzLGEuUiksdGhpcy5sYT1hLmxhLHRoaXMuVD1hLlQscWEodGhpcyxhLndhKSx0aGlzLk89YS5PLHJhKHRoaXMsc2EoYS5hKSksdGhpcy5lYT1hLmVhKTphJiYoYj1TdHJpbmcoYSkubWF0Y2gobmEpKT8ocGEodGhpcyxiWzFdfHxcIlwiLCEwKSx0aGlzLmxhPXRhKGJbMl18fFwiXCIpLHRoaXMuVD10YShiWzNdfHxcIlwiLCEwKSxxYSh0aGlzLGJbNF0pLHRoaXMuTz10YShiWzVdfHxcIlwiLCEwKSxyYSh0aGlzLGJbNl18fFwiXCIsITApLHRoaXMuZWE9dGEoYls3XXx8XCJcIikpOnRoaXMuYT1uZXcgdWEobnVsbCl9az1vYS5wcm90b3R5cGU7ay5SPVwiXCI7ay5sYT1cIlwiO2suVD1cIlwiO2sud2E9bnVsbDtrLk89XCJcIjtrLmVhPVwiXCI7XHJcbmsudG9TdHJpbmc9ZnVuY3Rpb24oKXt2YXIgYT1bXSxiPXRoaXMuUjtiJiZhLnB1c2godmEoYix3YSwhMCksXCI6XCIpO2lmKGI9dGhpcy5UKXthLnB1c2goXCIvL1wiKTt2YXIgYz10aGlzLmxhO2MmJmEucHVzaCh2YShjLHdhLCEwKSxcIkBcIik7YS5wdXNoKGVuY29kZVVSSUNvbXBvbmVudChiKS5yZXBsYWNlKC8lMjUoWzAtOWEtZkEtRl17Mn0pL2csXCIlJDFcIikpO2I9dGhpcy53YTtudWxsIT1iJiZhLnB1c2goXCI6XCIsU3RyaW5nKGIpKX1pZihiPXRoaXMuTyl0aGlzLlQmJlwiL1wiIT1iLmNoYXJBdCgwKSYmYS5wdXNoKFwiL1wiKSxhLnB1c2godmEoYixcIi9cIj09Yi5jaGFyQXQoMCk/eGE6eWEsITApKTsoYj10aGlzLmEudG9TdHJpbmcoKSkmJmEucHVzaChcIj9cIixiKTsoYj10aGlzLmVhKSYmYS5wdXNoKFwiI1wiLHZhKGIsemEpKTtyZXR1cm4gYS5qb2luKFwiXCIpfTtcclxuay5yZXNvbHZlPWZ1bmN0aW9uKGEpe3ZhciBiPW5ldyBvYSh0aGlzKTtcImRhdGFcIj09PWIuUiYmKGI9bmV3IG9hKTt2YXIgYz0hIWEuUjtjP3BhKGIsYS5SKTpjPSEhYS5sYTtjP2IubGE9YS5sYTpjPSEhYS5UO2M/Yi5UPWEuVDpjPW51bGwhPWEud2E7dmFyIGQ9YS5PO2lmKGMpcWEoYixhLndhKTtlbHNlIGlmKGM9ISFhLk8pe2lmKFwiL1wiIT1kLmNoYXJBdCgwKSlpZih0aGlzLlQmJiF0aGlzLk8pZD1cIi9cIitkO2Vsc2V7dmFyIGU9Yi5PLmxhc3RJbmRleE9mKFwiL1wiKTstMSE9ZSYmKGQ9Yi5PLnN1YnN0cigwLGUrMSkrZCl9aWYoXCIuLlwiPT1kfHxcIi5cIj09ZClkPVwiXCI7ZWxzZSBpZigtMSE9ZC5pbmRleE9mKFwiLi9cIil8fC0xIT1kLmluZGV4T2YoXCIvLlwiKSl7Zm9yKHZhciBlPSFkLmxhc3RJbmRleE9mKFwiL1wiLDApLGQ9ZC5zcGxpdChcIi9cIiksZj1bXSxnPTA7ZzxkLmxlbmd0aDspe3ZhciBoPWRbZysrXTtcIi5cIj09aD9lJiZnPT1kLmxlbmd0aCYmZi5wdXNoKFwiXCIpOlwiLi5cIj09aD8oKDE8Zi5sZW5ndGh8fFxyXG4xPT1mLmxlbmd0aCYmXCJcIiE9ZlswXSkmJmYucG9wKCksZSYmZz09ZC5sZW5ndGgmJmYucHVzaChcIlwiKSk6KGYucHVzaChoKSxlPSEwKX1kPWYuam9pbihcIi9cIil9fWM/Yi5PPWQ6Yz1cIlwiIT09YS5hLnRvU3RyaW5nKCk7Yz9yYShiLHNhKGEuYSkpOmM9ISFhLmVhO2MmJihiLmVhPWEuZWEpO3JldHVybiBifTtmdW5jdGlvbiBwYShhLGIsYyl7YS5SPWM/dGEoYiwhMCk6YjthLlImJihhLlI9YS5SLnJlcGxhY2UoLzokLyxcIlwiKSl9ZnVuY3Rpb24gcWEoYSxiKXtpZihiKXtiPU51bWJlcihiKTtpZihpc05hTihiKXx8MD5iKXRocm93IEVycm9yKFwiQmFkIHBvcnQgbnVtYmVyIFwiK2IpO2Eud2E9Yn1lbHNlIGEud2E9bnVsbH1mdW5jdGlvbiByYShhLGIsYyl7YiBpbnN0YW5jZW9mIHVhP2EuYT1iOihjfHwoYj12YShiLEFhKSksYS5hPW5ldyB1YShiKSl9ZnVuY3Rpb24gdGEoYSxiKXtyZXR1cm4gYT9iP2RlY29kZVVSSShhKTpkZWNvZGVVUklDb21wb25lbnQoYSk6XCJcIn1cclxuZnVuY3Rpb24gdmEoYSxiLGMpe3JldHVyblwic3RyaW5nXCI9PXR5cGVvZiBhPyhhPWVuY29kZVVSSShhKS5yZXBsYWNlKGIsQmEpLGMmJihhPWEucmVwbGFjZSgvJTI1KFswLTlhLWZBLUZdezJ9KS9nLFwiJSQxXCIpKSxhKTpudWxsfWZ1bmN0aW9uIEJhKGEpe2E9YS5jaGFyQ29kZUF0KDApO3JldHVyblwiJVwiKyhhPj40JjE1KS50b1N0cmluZygxNikrKGEmMTUpLnRvU3RyaW5nKDE2KX12YXIgd2E9L1sjXFwvXFw/QF0vZyx5YT0vW1xcI1xcPzpdL2cseGE9L1tcXCNcXD9dL2csQWE9L1tcXCNcXD9AXS9nLHphPS8jL2c7ZnVuY3Rpb24gdWEoYSl7dGhpcy5iPWF8fG51bGx9dWEucHJvdG90eXBlLmE9bnVsbDt1YS5wcm90b3R5cGUuYz1udWxsO1xyXG51YS5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtpZih0aGlzLmIpcmV0dXJuIHRoaXMuYjtpZighdGhpcy5hKXJldHVyblwiXCI7dmFyIGE9W10sYjtmb3IoYiBpbiB0aGlzLmEpZm9yKHZhciBjPWVuY29kZVVSSUNvbXBvbmVudChiKSxkPXRoaXMuYVtiXSxlPTA7ZTxkLmxlbmd0aDtlKyspe3ZhciBmPWM7XCJcIiE9PWRbZV0mJihmKz1cIj1cIitlbmNvZGVVUklDb21wb25lbnQoZFtlXSkpO2EucHVzaChmKX1yZXR1cm4gdGhpcy5iPWEuam9pbihcIiZcIil9O2Z1bmN0aW9uIHNhKGEpe3ZhciBiPW5ldyB1YTtiLmI9YS5iO2lmKGEuYSl7dmFyIGM9e30sZDtmb3IoZCBpbiBhLmEpY1tkXT1hLmFbZF0uY29uY2F0KCk7Yi5hPWM7Yi5jPWEuY31yZXR1cm4gYn07ZnVuY3Rpb24gcShhLGIsYyl7dGhpcy5jYXRlZ29yeT1hO3RoaXMuY29kZT1iO3RoaXMuZGF0YT1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMil9bChcInNoYWthLnV0aWwuRXJyb3JcIixxKTtxLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVyblwic2hha2EudXRpbC5FcnJvciBcIitKU09OLnN0cmluZ2lmeSh0aGlzLG51bGwsXCIgIFwiKX07cS5DYXRlZ29yeT17TkVUV09SSzoxLFRFWFQ6MixNRURJQTozLE1BTklGRVNUOjQsU1RSRUFNSU5HOjUsRFJNOjYsUExBWUVSOjcsQ0FTVDo4LFNUT1JBR0U6OX07XHJcbnEuQ29kZT17VU5TVVBQT1JURURfU0NIRU1FOjFFMyxCQURfSFRUUF9TVEFUVVM6MTAwMSxIVFRQX0VSUk9SOjEwMDIsVElNRU9VVDoxMDAzLE1BTEZPUk1FRF9EQVRBX1VSSToxMDA0LFVOS05PV05fREFUQV9VUklfRU5DT0RJTkc6MTAwNSxJTlZBTElEX1RFWFRfSEVBREVSOjJFMyxJTlZBTElEX1RFWFRfQ1VFOjIwMDEsSU5WQUxJRF9URVhUX1NFVFRJTkdTOjIwMDIsVU5BQkxFX1RPX0RFVEVDVF9FTkNPRElORzoyMDAzLEJBRF9FTkNPRElORzoyMDA0LElOVkFMSURfWE1MOjIwMDUsSU5WQUxJRF9UVE1MOjIwMDYsSU5WQUxJRF9NUDRfVFRNTDoyMDA3LElOVkFMSURfTVA0X1ZUVDoyMDA4LEJVRkZFUl9SRUFEX09VVF9PRl9CT1VORFM6M0UzLEpTX0lOVEVHRVJfT1ZFUkZMT1c6MzAwMSxFQk1MX09WRVJGTE9XOjMwMDIsRUJNTF9CQURfRkxPQVRJTkdfUE9JTlRfU0laRTozMDAzLE1QNF9TSURYX1dST05HX0JPWF9UWVBFOjMwMDQsTVA0X1NJRFhfSU5WQUxJRF9USU1FU0NBTEU6MzAwNSxcclxuTVA0X1NJRFhfVFlQRV9OT1RfU1VQUE9SVEVEOjMwMDYsV0VCTV9DVUVTX0VMRU1FTlRfTUlTU0lORzozMDA3LFdFQk1fRUJNTF9IRUFERVJfRUxFTUVOVF9NSVNTSU5HOjMwMDgsV0VCTV9TRUdNRU5UX0VMRU1FTlRfTUlTU0lORzozMDA5LFdFQk1fSU5GT19FTEVNRU5UX01JU1NJTkc6MzAxMCxXRUJNX0RVUkFUSU9OX0VMRU1FTlRfTUlTU0lORzozMDExLFdFQk1fQ1VFX1RSQUNLX1BPU0lUSU9OU19FTEVNRU5UX01JU1NJTkc6MzAxMixXRUJNX0NVRV9USU1FX0VMRU1FTlRfTUlTU0lORzozMDEzLE1FRElBX1NPVVJDRV9PUEVSQVRJT05fRkFJTEVEOjMwMTQsTUVESUFfU09VUkNFX09QRVJBVElPTl9USFJFVzozMDE1LFZJREVPX0VSUk9SOjMwMTYsUVVPVEFfRVhDRUVERURfRVJST1I6MzAxNyxVTkFCTEVfVE9fR1VFU1NfTUFOSUZFU1RfVFlQRTo0RTMsREFTSF9JTlZBTElEX1hNTDo0MDAxLERBU0hfTk9fU0VHTUVOVF9JTkZPOjQwMDIsREFTSF9FTVBUWV9BREFQVEFUSU9OX1NFVDo0MDAzLFxyXG5EQVNIX0VNUFRZX1BFUklPRDo0MDA0LERBU0hfV0VCTV9NSVNTSU5HX0lOSVQ6NDAwNSxEQVNIX1VOU1VQUE9SVEVEX0NPTlRBSU5FUjo0MDA2LERBU0hfUFNTSF9CQURfRU5DT0RJTkc6NDAwNyxEQVNIX05PX0NPTU1PTl9LRVlfU1lTVEVNOjQwMDgsREFTSF9NVUxUSVBMRV9LRVlfSURTX05PVF9TVVBQT1JURUQ6NDAwOSxEQVNIX0NPTkZMSUNUSU5HX0tFWV9JRFM6NDAxMCxVTlBMQVlBQkxFX1BFUklPRDo0MDExLFJFU1RSSUNUSU9OU19DQU5OT1RfQkVfTUVUOjQwMTIsSU5URVJOQUxfRVJST1JfS0VZX1NUQVRVUzo0MDEzLElOVkFMSURfU1RSRUFNU19DSE9TRU46NTAwNSxOT19SRUNPR05JWkVEX0tFWV9TWVNURU1TOjZFMyxSRVFVRVNURURfS0VZX1NZU1RFTV9DT05GSUdfVU5BVkFJTEFCTEU6NjAwMSxGQUlMRURfVE9fQ1JFQVRFX0NETTo2MDAyLEZBSUxFRF9UT19BVFRBQ0hfVE9fVklERU86NjAwMyxJTlZBTElEX1NFUlZFUl9DRVJUSUZJQ0FURTo2MDA0LEZBSUxFRF9UT19DUkVBVEVfU0VTU0lPTjo2MDA1LFxyXG5GQUlMRURfVE9fR0VORVJBVEVfTElDRU5TRV9SRVFVRVNUOjYwMDYsTElDRU5TRV9SRVFVRVNUX0ZBSUxFRDo2MDA3LExJQ0VOU0VfUkVTUE9OU0VfUkVKRUNURUQ6NjAwOCxFTkNSWVBURURfQ09OVEVOVF9XSVRIT1VUX0RSTV9JTkZPOjYwMTAsTk9fTElDRU5TRV9TRVJWRVJfR0lWRU46NjAxMixPRkZMSU5FX1NFU1NJT05fUkVNT1ZFRDo2MDEzLEVYUElSRUQ6NjAxNCxMT0FEX0lOVEVSUlVQVEVEOjdFMyxDQVNUX0FQSV9VTkFWQUlMQUJMRTo4RTMsTk9fQ0FTVF9SRUNFSVZFUlM6ODAwMSxBTFJFQURZX0NBU1RJTkc6ODAwMixVTkVYUEVDVEVEX0NBU1RfRVJST1I6ODAwMyxDQVNUX0NBTkNFTEVEX0JZX1VTRVI6ODAwNCxDQVNUX0NPTk5FQ1RJT05fVElNRURfT1VUOjgwMDUsQ0FTVF9SRUNFSVZFUl9BUFBfVU5BVkFJTEFCTEU6ODAwNixJTkRFWEVEX0RCX05PVF9TVVBQT1JURUQ6OUUzLElOREVYRURfREJfRVJST1I6OTAwMSxPUEVSQVRJT05fQUJPUlRFRDo5MDAyLFJFUVVFU1RFRF9JVEVNX05PVF9GT1VORDo5MDAzLFxyXG5NQUxGT1JNRURfT0ZGTElORV9VUkk6OTAwNCxDQU5OT1RfU1RPUkVfTElWRV9PRkZMSU5FOjkwMDUsU1RPUkVfQUxSRUFEWV9JTl9QUk9HUkVTUzo5MDA2LE5PX0lOSVRfREFUQV9GT1JfT0ZGTElORTo5MDA3fTtmdW5jdGlvbiBDYShhLGIpe3JldHVybiBhLnJlZHVjZShmdW5jdGlvbihhLGIsZSl7cmV0dXJuIGJbXCJjYXRjaFwiXShhLmJpbmQobnVsbCxlKSl9LmJpbmQobnVsbCxiKSxQcm9taXNlLnJlamVjdCgpKX1mdW5jdGlvbiB0KGEsYil7cmV0dXJuIGEuY29uY2F0KGIpfWZ1bmN0aW9uIHYoKXt9ZnVuY3Rpb24gRGEoYSl7cmV0dXJuIG51bGwhPWF9ZnVuY3Rpb24gRWEoYSl7cmV0dXJuIGZ1bmN0aW9uKGIpe3JldHVybiBiIT1hfX07ZnVuY3Rpb24gdygpe3ZhciBhLGIsYz1uZXcgUHJvbWlzZShmdW5jdGlvbihjLGUpe2E9YztiPWV9KTtjLnJlc29sdmU9YTtjLnJlamVjdD1iO3JldHVybiBjfTtmdW5jdGlvbiB5KGEpe3RoaXMuZj0hMTt0aGlzLmE9W107dGhpcy5iPVtdO3RoaXMuYz1bXTt0aGlzLmg9YXx8bnVsbH1sKFwic2hha2EubmV0Lk5ldHdvcmtpbmdFbmdpbmUuUmVxdWVzdFR5cGVcIix7TUFOSUZFU1Q6MCxTRUdNRU5UOjEsTElDRU5TRToyfSk7dmFyIEZhPXt9O2woXCJzaGFrYS5uZXQuTmV0d29ya2luZ0VuZ2luZS5yZWdpc3RlclNjaGVtZVwiLGZ1bmN0aW9uKGEsYil7RmFbYV09Yn0pO2woXCJzaGFrYS5uZXQuTmV0d29ya2luZ0VuZ2luZS51bnJlZ2lzdGVyU2NoZW1lXCIsZnVuY3Rpb24oYSl7ZGVsZXRlIEZhW2FdfSk7eS5wcm90b3R5cGUudmM9ZnVuY3Rpb24oYSl7dGhpcy5iLnB1c2goYSl9O3kucHJvdG90eXBlLnJlZ2lzdGVyUmVxdWVzdEZpbHRlcj15LnByb3RvdHlwZS52Yzt5LnByb3RvdHlwZS5YYz1mdW5jdGlvbihhKXt2YXIgYj10aGlzLmI7YT1iLmluZGV4T2YoYSk7MDw9YSYmYi5zcGxpY2UoYSwxKX07XHJcbnkucHJvdG90eXBlLnVucmVnaXN0ZXJSZXF1ZXN0RmlsdGVyPXkucHJvdG90eXBlLlhjO3kucHJvdG90eXBlLk9iPWZ1bmN0aW9uKCl7dGhpcy5iPVtdfTt5LnByb3RvdHlwZS5jbGVhckFsbFJlcXVlc3RGaWx0ZXJzPXkucHJvdG90eXBlLk9iO3kucHJvdG90eXBlLnliPWZ1bmN0aW9uKGEpe3RoaXMuYy5wdXNoKGEpfTt5LnByb3RvdHlwZS5yZWdpc3RlclJlc3BvbnNlRmlsdGVyPXkucHJvdG90eXBlLnliO3kucHJvdG90eXBlLkpiPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuYzthPWIuaW5kZXhPZihhKTswPD1hJiZiLnNwbGljZShhLDEpfTt5LnByb3RvdHlwZS51bnJlZ2lzdGVyUmVzcG9uc2VGaWx0ZXI9eS5wcm90b3R5cGUuSmI7eS5wcm90b3R5cGUuUGI9ZnVuY3Rpb24oKXt0aGlzLmM9W119O3kucHJvdG90eXBlLmNsZWFyQWxsUmVzcG9uc2VGaWx0ZXJzPXkucHJvdG90eXBlLlBiO1xyXG5mdW5jdGlvbiBHYSgpe3JldHVybnttYXhBdHRlbXB0czoyLGJhc2VEZWxheToxRTMsYmFja29mZkZhY3RvcjoyLGZ1enpGYWN0b3I6LjUsdGltZW91dDowfX1mdW5jdGlvbiBIYShhLGIpe3JldHVybnt1cmlzOmEsbWV0aG9kOlwiR0VUXCIsYm9keTpudWxsLGhlYWRlcnM6e30sYWxsb3dDcm9zc1NpdGVDcmVkZW50aWFsczohMSxyZXRyeVBhcmFtZXRlcnM6Yn19eS5wcm90b3R5cGUubz1mdW5jdGlvbigpe3RoaXMuZj0hMDt0aGlzLmI9W107dGhpcy5jPVtdO2Zvcih2YXIgYT1bXSxiPTA7Yjx0aGlzLmEubGVuZ3RoOysrYilhLnB1c2godGhpcy5hW2JdW1wiY2F0Y2hcIl0odikpO3JldHVybiBQcm9taXNlLmFsbChhKX07XHJcbnkucHJvdG90eXBlLnJlcXVlc3Q9ZnVuY3Rpb24oYSxiKXtpZih0aGlzLmYpcmV0dXJuIFByb21pc2UucmVqZWN0KCk7Zm9yKHZhciBjPURhdGUubm93KCksZD10aGlzLmIsZT0wO2U8ZC5sZW5ndGg7ZSsrKXRyeXtkW2VdKGEsYil9Y2F0Y2gobSl7cmV0dXJuIFByb21pc2UucmVqZWN0KG0pfWZvcih2YXIgZT1iLnJldHJ5UGFyYW1ldGVyc3x8e30sZD1lLm1heEF0dGVtcHRzfHwxLGY9ZS5iYWNrb2ZmRmFjdG9yfHwyLGc9bnVsbD09ZS5iYXNlRGVsYXk/MUUzOmUuYmFzZURlbGF5LGg9dGhpcy5nKGEsYiwwKSxlPTE7ZTxkO2UrKyloPWhbXCJjYXRjaFwiXSh0aGlzLmkuYmluZCh0aGlzLGEsYixnLGUlYi51cmlzLmxlbmd0aCkpLGcqPWY7dGhpcy5hLnB1c2goaCk7cmV0dXJuIGgudGhlbihmdW5jdGlvbihiKXt0aGlzLmEuc3BsaWNlKHRoaXMuYS5pbmRleE9mKGgpLDEpO3ZhciBkPURhdGUubm93KCk7dGhpcy5oJiYxPT1hJiZ0aGlzLmgoYyxkLGIuZGF0YS5ieXRlTGVuZ3RoKTtyZXR1cm4gYn0uYmluZCh0aGlzKSlbXCJjYXRjaFwiXShmdW5jdGlvbihhKXt0aGlzLmEuc3BsaWNlKHRoaXMuYS5pbmRleE9mKGgpLFxyXG4xKTtyZXR1cm4gUHJvbWlzZS5yZWplY3QoYSl9LmJpbmQodGhpcykpfTt5LnByb3RvdHlwZS5yZXF1ZXN0PXkucHJvdG90eXBlLnJlcXVlc3Q7eS5wcm90b3R5cGUuZz1mdW5jdGlvbihhLGIsYyl7aWYodGhpcy5mKXJldHVybiBQcm9taXNlLnJlamVjdCgpO3ZhciBkPW5ldyBvYShiLnVyaXNbY10pLGU9ZC5SO2V8fChlPWxvY2F0aW9uLnByb3RvY29sLGU9ZS5zbGljZSgwLC0xKSxwYShkLGUpLGIudXJpc1tjXT1kLnRvU3RyaW5nKCkpO3JldHVybihlPUZhW2VdKT9lKGIudXJpc1tjXSxiKS50aGVuKGZ1bmN0aW9uKGIpe2Zvcih2YXIgYz10aGlzLmMsZD0wO2Q8Yy5sZW5ndGg7ZCsrKWNbZF0oYSxiKTtyZXR1cm4gYn0uYmluZCh0aGlzKSk6UHJvbWlzZS5yZWplY3QobmV3IHEoMSwxRTMsZCkpfTtcclxueS5wcm90b3R5cGUuaT1mdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1uZXcgdyxmPWIucmV0cnlQYXJhbWV0ZXJzfHx7fTt3aW5kb3cuc2V0VGltZW91dChlLnJlc29sdmUsYyooMSsoMipNYXRoLnJhbmRvbSgpLTEpKihudWxsPT1mLmZ1enpGYWN0b3I/LjU6Zi5mdXp6RmFjdG9yKSkpO3JldHVybiBlLnRoZW4odGhpcy5nLmJpbmQodGhpcyxhLGIsZCkpfTtmdW5jdGlvbiBJYShhLGIsYyl7Zm9yKHZhciBkPTA7ZDxhLmxlbmd0aDsrK2QpaWYoYyhhW2RdLGIpKXJldHVybiBkO3JldHVybi0xfTtmdW5jdGlvbiBKYSgpe3RoaXMuYT17fX1rPUphLnByb3RvdHlwZTtrLnB1c2g9ZnVuY3Rpb24oYSxiKXt0aGlzLmEuaGFzT3duUHJvcGVydHkoYSk/dGhpcy5hW2FdLnB1c2goYik6dGhpcy5hW2FdPVtiXX07ay5zZXQ9ZnVuY3Rpb24oYSxiKXt0aGlzLmFbYV09Yn07ay5oYXM9ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuYS5oYXNPd25Qcm9wZXJ0eShhKX07ay5nZXQ9ZnVuY3Rpb24oYSl7cmV0dXJuKGE9dGhpcy5hW2FdKT9hLnNsaWNlKCk6bnVsbH07ay5yZW1vdmU9ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmFbYV07aWYoYylmb3IodmFyIGQ9MDtkPGMubGVuZ3RoOysrZCljW2RdPT1iJiYoYy5zcGxpY2UoZCwxKSwtLWQpfTtrLmtleXM9ZnVuY3Rpb24oKXt2YXIgYT1bXSxiO2ZvcihiIGluIHRoaXMuYSlhLnB1c2goYik7cmV0dXJuIGF9O2suY2xlYXI9ZnVuY3Rpb24oKXt0aGlzLmE9e319O2Z1bmN0aW9uIHooKXt0aGlzLmE9bmV3IEphfXoucHJvdG90eXBlLm89ZnVuY3Rpb24oKXtLYSh0aGlzKTt0aGlzLmE9bnVsbDtyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCl9O2Z1bmN0aW9uIEIoYSxiLGMsZCl7Yj1uZXcgTGEoYixjLGQpO2EuYS5wdXNoKGMsYil9ei5wcm90b3R5cGUua2E9ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9dGhpcy5hLmdldChiKXx8W10sZD0wO2Q8Yy5sZW5ndGg7KytkKXt2YXIgZT1jW2RdO2UudGFyZ2V0PT1hJiYoZS5rYSgpLHRoaXMuYS5yZW1vdmUoYixlKSl9fTtmdW5jdGlvbiBLYShhKXt2YXIgYj1hLmEsYz1bXSxkO2ZvcihkIGluIGIuYSljLnB1c2guYXBwbHkoYyxiLmFbZF0pO2ZvcihiPTA7YjxjLmxlbmd0aDsrK2IpY1tiXS5rYSgpO2EuYS5jbGVhcigpfWZ1bmN0aW9uIExhKGEsYixjKXt0aGlzLnRhcmdldD1hO3RoaXMudHlwZT1iO3RoaXMuYT1jO3RoaXMudGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIoYixjLCExKX1cclxuTGEucHJvdG90eXBlLmthPWZ1bmN0aW9uKCl7dGhpcy50YXJnZXQmJih0aGlzLnRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKHRoaXMudHlwZSx0aGlzLmEsITEpLHRoaXMuYT10aGlzLnRhcmdldD1udWxsKX07ZnVuY3Rpb24gTWEoYSl7cmV0dXJuIWF8fCFPYmplY3Qua2V5cyhhKS5sZW5ndGh9ZnVuY3Rpb24gQyhhKXtyZXR1cm4gT2JqZWN0LmtleXMoYSkubWFwKGZ1bmN0aW9uKGIpe3JldHVybiBhW2JdfSl9ZnVuY3Rpb24gTmEoYSxiKXtyZXR1cm4gT2JqZWN0LmtleXMoYSkucmVkdWNlKGZ1bmN0aW9uKGMsZCl7Y1tkXT1iKGFbZF0sZCk7cmV0dXJuIGN9LHt9KX1mdW5jdGlvbiBPYShhLGIpe3JldHVybiBPYmplY3Qua2V5cyhhKS5ldmVyeShmdW5jdGlvbihjKXtyZXR1cm4gYihjLGFbY10pfSl9O2Z1bmN0aW9uIEQoYSl7aWYoIWEpcmV0dXJuXCJcIjthPW5ldyBVaW50OEFycmF5KGEpOzIzOT09YVswXSYmMTg3PT1hWzFdJiYxOTE9PWFbMl0mJihhPWEuc3ViYXJyYXkoMykpO2E9ZXNjYXBlKFBhKGEpKTt0cnl7cmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChhKX1jYXRjaChiKXt0aHJvdyBuZXcgcSgyLDIwMDQpO319ZnVuY3Rpb24gUWEoYSxiKXtpZighYSlyZXR1cm5cIlwiO2lmKGEuYnl0ZUxlbmd0aCUyKXRocm93IG5ldyBxKDIsMjAwNCk7dmFyIGM7aWYoYSBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKWM9YTtlbHNle3ZhciBkPW5ldyBVaW50OEFycmF5KGEuYnl0ZUxlbmd0aCk7ZC5zZXQobmV3IFVpbnQ4QXJyYXkoYSkpO2M9ZC5idWZmZXJ9dmFyIGQ9YS5ieXRlTGVuZ3RoLzIsZT1uZXcgVWludDE2QXJyYXkoZCk7Yz1uZXcgRGF0YVZpZXcoYyk7Zm9yKHZhciBmPTA7ZjxkO2YrKyllW2ZdPWMuZ2V0VWludDE2KDIqZixiKTtyZXR1cm4gUGEoZSl9XHJcbmZ1bmN0aW9uIFJhKGEpe3ZhciBiPW5ldyBVaW50OEFycmF5KGEpO2lmKDIzOT09YlswXSYmMTg3PT1iWzFdJiYxOTE9PWJbMl0pcmV0dXJuIEQoYik7aWYoMjU0PT1iWzBdJiYyNTU9PWJbMV0pcmV0dXJuIFFhKGIuc3ViYXJyYXkoMiksITEpO2lmKDI1NT09YlswXSYmMjU0PT1iWzFdKXJldHVybiBRYShiLnN1YmFycmF5KDIpLCEwKTt2YXIgYz1mdW5jdGlvbihhLGIpe3JldHVybiBhLmJ5dGVMZW5ndGg8PWJ8fDMyPD1hW2JdJiYxMjY+PWFbYl19LmJpbmQobnVsbCxiKTtpZihiWzBdfHxiWzJdKXtpZighYlsxXSYmIWJbM10pcmV0dXJuIFFhKGEsITApO2lmKGMoMCkmJmMoMSkmJmMoMikmJmMoMykpcmV0dXJuIEQoYSl9ZWxzZSByZXR1cm4gUWEoYSwhMSk7dGhyb3cgbmV3IHEoMiwyMDAzKTt9XHJcbmZ1bmN0aW9uIFNhKGEpe2E9dW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KGEpKTtmb3IodmFyIGI9bmV3IFVpbnQ4QXJyYXkoYS5sZW5ndGgpLGM9MDtjPGEubGVuZ3RoOysrYyliW2NdPWEuY2hhckNvZGVBdChjKTtyZXR1cm4gYi5idWZmZXJ9ZnVuY3Rpb24gUGEoYSl7Zm9yKHZhciBiPVwiXCIsYz0wO2M8YS5sZW5ndGg7Yys9MTZFMyliKz1TdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsYS5zdWJhcnJheShjLGMrMTZFMykpO3JldHVybiBifTtmdW5jdGlvbiBUYShhKXt0aGlzLmE9bnVsbDt0aGlzLmI9ZnVuY3Rpb24oKXt0aGlzLmE9bnVsbDthKCl9LmJpbmQodGhpcyl9ZnVuY3Rpb24gVWEoYSl7bnVsbCE9YS5hJiYoY2xlYXJUaW1lb3V0KGEuYSksYS5hPW51bGwpfWZ1bmN0aW9uIFZhKGEpe1VhKGEpO2EuYT1zZXRUaW1lb3V0KGEuYiwxMDApfTtmdW5jdGlvbiBXYShhKXtyZXR1cm4gd2luZG93LmJ0b2EoU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLGEpKS5yZXBsYWNlKC9cXCsvZyxcIi1cIikucmVwbGFjZSgvXFwvL2csXCJfXCIpLnJlcGxhY2UoLz0qJC8sXCJcIil9ZnVuY3Rpb24gWGEoYSl7YT13aW5kb3cuYXRvYihhLnJlcGxhY2UoLy0vZyxcIitcIikucmVwbGFjZSgvXy9nLFwiL1wiKSk7Zm9yKHZhciBiPW5ldyBVaW50OEFycmF5KGEubGVuZ3RoKSxjPTA7YzxhLmxlbmd0aDsrK2MpYltjXT1hLmNoYXJDb2RlQXQoYyk7cmV0dXJuIGJ9ZnVuY3Rpb24gWWEoYSl7Zm9yKHZhciBiPW5ldyBVaW50OEFycmF5KGEubGVuZ3RoLzIpLGM9MDtjPGEubGVuZ3RoO2MrPTIpYltjLzJdPXdpbmRvdy5wYXJzZUludChhLnN1YnN0cihjLDIpLDE2KTtyZXR1cm4gYn1cclxuZnVuY3Rpb24gWmEoYSl7Zm9yKHZhciBiPVwiXCIsYz0wO2M8YS5sZW5ndGg7KytjKXt2YXIgZD1hW2NdLnRvU3RyaW5nKDE2KTsxPT1kLmxlbmd0aCYmKGQ9XCIwXCIrZCk7Yis9ZH1yZXR1cm4gYn1mdW5jdGlvbiAkYShhLGIpe2lmKCFhJiYhYilyZXR1cm4hMDtpZighYXx8IWJ8fGEubGVuZ3RoIT1iLmxlbmd0aClyZXR1cm4hMTtmb3IodmFyIGM9MDtjPGEubGVuZ3RoOysrYylpZihhW2NdIT1iW2NdKXJldHVybiExO3JldHVybiEwfTtmdW5jdGlvbiBhYihhLGIsYyl7dGhpcy5sPXRoaXMuaD10aGlzLm09bnVsbDt0aGlzLkE9ITE7dGhpcy5iPW51bGw7dGhpcy5nPW5ldyB6O3RoaXMuYT1bXTt0aGlzLnM9W107dGhpcy5qPW5ldyB3O3RoaXMuRz1hO3RoaXMuaT1udWxsO3RoaXMuZj1mdW5jdGlvbihhKXt0aGlzLmoucmVqZWN0KGEpO2IoYSl9LmJpbmQodGhpcyk7dGhpcy53PXt9O3RoaXMuSj1jO3RoaXMudj1uZXcgVGEodGhpcy51Yy5iaW5kKHRoaXMpKTt0aGlzLkM9dGhpcy5jPSExO3RoaXMualtcImNhdGNoXCJdKGZ1bmN0aW9uKCl7fSl9az1hYi5wcm90b3R5cGU7XHJcbmsubz1mdW5jdGlvbigpe3RoaXMuYz0hMDt2YXIgYT10aGlzLmEubWFwKGZ1bmN0aW9uKGEpe2EueWEuY2xvc2UoKVtcImNhdGNoXCJdKHYpO3JldHVybiBhLnlhLmNsb3NlZH0pO3RoaXMuai5yZWplY3QoKTt0aGlzLmcmJmEucHVzaCh0aGlzLmcubygpKTt0aGlzLmwmJmEucHVzaCh0aGlzLmwuc2V0TWVkaWFLZXlzKG51bGwpW1wiY2F0Y2hcIl0odikpO3RoaXMudiYmVWEodGhpcy52KTt0aGlzLmc9dGhpcy5sPXRoaXMuaD10aGlzLm09dGhpcy5iPXRoaXMudj1udWxsO3RoaXMuYT1bXTt0aGlzLnM9W107dGhpcy5mPXRoaXMuaT10aGlzLkc9bnVsbDtyZXR1cm4gUHJvbWlzZS5hbGwoYSl9O2suY29uZmlndXJlPWZ1bmN0aW9uKGEpe3RoaXMuaT1hfTtcclxuay5pbml0PWZ1bmN0aW9uKGEsYil7dmFyIGM9e30sZD1bXTt0aGlzLkM9Yjt0aGlzLnM9YS5vZmZsaW5lU2Vzc2lvbklkcztiYih0aGlzLGEsYnx8MDxhLm9mZmxpbmVTZXNzaW9uSWRzLmxlbmd0aCxjLGQpO3JldHVybiBkLmxlbmd0aD9jYih0aGlzLGMsZCk6KHRoaXMuQT0hMCxQcm9taXNlLnJlc29sdmUoKSl9O1xyXG5mdW5jdGlvbiBkYihhLGIpe2lmKCFhLmgpcmV0dXJuIEIoYS5nLGIsXCJlbmNyeXB0ZWRcIixmdW5jdGlvbigpe3RoaXMuZy5rYShiLFwiZW5jcnlwdGVkXCIpO3RoaXMuZihuZXcgcSg2LDYwMTApKX0uYmluZChhKSksUHJvbWlzZS5yZXNvbHZlKCk7YS5sPWI7dmFyIGM9YS5sLnNldE1lZGlhS2V5cyhhLmgpLGM9Y1tcImNhdGNoXCJdKGZ1bmN0aW9uKGEpe3JldHVybiBQcm9taXNlLnJlamVjdChuZXcgcSg2LDYwMDMsYS5tZXNzYWdlKSl9KSxkPW51bGw7YS5iLnNlcnZlckNlcnRpZmljYXRlJiYoZD1hLmguc2V0U2VydmVyQ2VydGlmaWNhdGUoYS5iLnNlcnZlckNlcnRpZmljYXRlKSxkPWRbXCJjYXRjaFwiXShmdW5jdGlvbihhKXtyZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IHEoNiw2MDA0LGEubWVzc2FnZSkpfSkpO3JldHVybiBQcm9taXNlLmFsbChbYyxkXSkudGhlbihmdW5jdGlvbigpe2lmKHRoaXMuYylyZXR1cm4gUHJvbWlzZS5yZWplY3QoKTtlYih0aGlzKTt0aGlzLmIuaW5pdERhdGEubGVuZ3RofHxcclxudGhpcy5zLmxlbmd0aHx8Qih0aGlzLmcsdGhpcy5sLFwiZW5jcnlwdGVkXCIsdGhpcy5iYy5iaW5kKHRoaXMpKX0uYmluZChhKSlbXCJjYXRjaFwiXShmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5jP1Byb21pc2UucmVzb2x2ZSgpOlByb21pc2UucmVqZWN0KGEpfS5iaW5kKGEpKX1mdW5jdGlvbiBmYihhLGIpe3JldHVybiBQcm9taXNlLmFsbChiLm1hcChmdW5jdGlvbihhKXtyZXR1cm4gZ2IodGhpcyxhKS50aGVuKGZ1bmN0aW9uKGEpe2lmKGEpcmV0dXJuIGEucmVtb3ZlKCl9KX0uYmluZChhKSkpfWZ1bmN0aW9uIGViKGEpe3ZhciBiPWEuYj9hLmIuaW5pdERhdGE6W107Yi5mb3JFYWNoKGZ1bmN0aW9uKGEpe2hiKHRoaXMsYS5pbml0RGF0YVR5cGUsYS5pbml0RGF0YSl9LmJpbmQoYSkpO2Eucy5mb3JFYWNoKGZ1bmN0aW9uKGEpe2diKHRoaXMsYSl9LmJpbmQoYSkpO2IubGVuZ3RofHxhLnMubGVuZ3RofHxhLmoucmVzb2x2ZSgpO3JldHVybiBhLmp9XHJcbmsua2V5U3lzdGVtPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYj90aGlzLmIua2V5U3lzdGVtOlwiXCJ9O2Z1bmN0aW9uIGliKGEpe3JldHVybiBhLmEubWFwKGZ1bmN0aW9uKGEpe3JldHVybiBhLnlhLnNlc3Npb25JZH0pfVxyXG5mdW5jdGlvbiBiYihhLGIsYyxkLGUpe3ZhciBmPWtiKGEpLGc9MDw9bmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKFwiRWRnZS9cIik7Yi5wZXJpb2RzLmZvckVhY2goZnVuY3Rpb24oYSl7YS5zdHJlYW1TZXRzLmZvckVhY2goZnVuY3Rpb24oYSl7XCJ0ZXh0XCIhPWEudHlwZSYmKGYmJihhLmRybUluZm9zPVtmXSksYS5kcm1JbmZvcy5mb3JFYWNoKGZ1bmN0aW9uKGIpe2xiKHRoaXMsYik7dmFyIGY9ZFtiLmtleVN5c3RlbV07Znx8KGY9e2F1ZGlvQ2FwYWJpbGl0aWVzOltdLHZpZGVvQ2FwYWJpbGl0aWVzOltdLGRpc3RpbmN0aXZlSWRlbnRpZmllcjpcIm9wdGlvbmFsXCIscGVyc2lzdGVudFN0YXRlOmM/XCJyZXF1aXJlZFwiOlwib3B0aW9uYWxcIixzZXNzaW9uVHlwZXM6W2M/XCJwZXJzaXN0ZW50LWxpY2Vuc2VcIjpcInRlbXBvcmFyeVwiXSxsYWJlbDpiLmtleVN5c3RlbSxkcm1JbmZvczpbXX0sZFtiLmtleVN5c3RlbV09ZixlLnB1c2goYi5rZXlTeXN0ZW0pKTtmLmRybUluZm9zLnB1c2goYik7Yi5kaXN0aW5jdGl2ZUlkZW50aWZpZXJSZXF1aXJlZCYmXHJcbihmLmRpc3RpbmN0aXZlSWRlbnRpZmllcj1cInJlcXVpcmVkXCIpO2IucGVyc2lzdGVudFN0YXRlUmVxdWlyZWQmJihmLnBlcnNpc3RlbnRTdGF0ZT1cInJlcXVpcmVkXCIpO3ZhciBoPVwidmlkZW9cIj09YS50eXBlP2YudmlkZW9DYXBhYmlsaXRpZXM6Zi5hdWRpb0NhcGFiaWxpdGllcyxBPShcInZpZGVvXCI9PWEudHlwZT9iLnZpZGVvUm9idXN0bmVzczpiLmF1ZGlvUm9idXN0bmVzcyl8fFwiXCI7YS5zdHJlYW1zLmZvckVhY2goZnVuY3Rpb24oYSl7dmFyIGM9YS5taW1lVHlwZTthLmNvZGVjcyYmKGMrPSc7IGNvZGVjcz1cIicrYS5jb2RlY3MrJ1wiJyk7ZyYmXCJjb20ubWljcm9zb2Z0LnBsYXlyZWFkeVwiPT1iLmtleVN5c3RlbSYmaC5sZW5ndGh8fGgucHVzaCh7cm9idXN0bmVzczpBLGNvbnRlbnRUeXBlOmN9KX0uYmluZCh0aGlzKSl9LmJpbmQodGhpcykpKX0uYmluZCh0aGlzKSl9LmJpbmQoYSkpfVxyXG5mdW5jdGlvbiBjYihhLGIsYyl7aWYoMT09Yy5sZW5ndGgmJlwiXCI9PWNbMF0pcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBxKDYsNkUzKSk7dmFyIGQ9bmV3IHcsZT1kO1shMCwhMV0uZm9yRWFjaChmdW5jdGlvbihhKXtjLmZvckVhY2goZnVuY3Rpb24oYyl7dmFyIGQ9YltjXTtkLmRybUluZm9zLnNvbWUoZnVuY3Rpb24oYSl7cmV0dXJuISFhLmxpY2Vuc2VTZXJ2ZXJVcml9KT09YSYmKGQuYXVkaW9DYXBhYmlsaXRpZXMubGVuZ3RofHxkZWxldGUgZC5hdWRpb0NhcGFiaWxpdGllcyxkLnZpZGVvQ2FwYWJpbGl0aWVzLmxlbmd0aHx8ZGVsZXRlIGQudmlkZW9DYXBhYmlsaXRpZXMsZT1lW1wiY2F0Y2hcIl0oZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jP1Byb21pc2UucmVqZWN0KCk6bmF2aWdhdG9yLnJlcXVlc3RNZWRpYUtleVN5c3RlbUFjY2VzcyhjLFtkXSl9LmJpbmQodGhpcykpKX0uYmluZCh0aGlzKSl9LmJpbmQoYSkpO2U9ZVtcImNhdGNoXCJdKGZ1bmN0aW9uKCl7cmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBxKDYsXHJcbjYwMDEpKX0pO2U9ZS50aGVuKGZ1bmN0aW9uKGEpe2lmKHRoaXMuYylyZXR1cm4gUHJvbWlzZS5yZWplY3QoKTt2YXIgYz1hLmdldENvbmZpZ3VyYXRpb24oKTt0aGlzLm09KGMuYXVkaW9DYXBhYmlsaXRpZXN8fFtdKS5jb25jYXQoYy52aWRlb0NhcGFiaWxpdGllc3x8W10pLm1hcChmdW5jdGlvbihhKXtyZXR1cm4gYS5jb250ZW50VHlwZX0pO3RoaXMubS5sZW5ndGh8fCh0aGlzLm09bnVsbCk7Yz1iW2Eua2V5U3lzdGVtXTttYih0aGlzLGEua2V5U3lzdGVtLGMsYy5kcm1JbmZvcyk7cmV0dXJuIHRoaXMuYi5saWNlbnNlU2VydmVyVXJpP2EuY3JlYXRlTWVkaWFLZXlzKCk6UHJvbWlzZS5yZWplY3QobmV3IHEoNiw2MDEyKSl9LmJpbmQoYSkpLnRoZW4oZnVuY3Rpb24oYSl7aWYodGhpcy5jKXJldHVybiBQcm9taXNlLnJlamVjdCgpO3RoaXMuaD1hO3RoaXMuQT0hMH0uYmluZChhKSlbXCJjYXRjaFwiXShmdW5jdGlvbihhKXtpZih0aGlzLmMpcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xyXG50aGlzLm09dGhpcy5iPW51bGw7cmV0dXJuIGEgaW5zdGFuY2VvZiBxP1Byb21pc2UucmVqZWN0KGEpOlByb21pc2UucmVqZWN0KG5ldyBxKDYsNjAwMixhLm1lc3NhZ2UpKX0uYmluZChhKSk7ZC5yZWplY3QoKTtyZXR1cm4gZX1cclxuZnVuY3Rpb24gbGIoYSxiKXt2YXIgYz1iLmtleVN5c3RlbTtpZihjKXtpZighYi5saWNlbnNlU2VydmVyVXJpKXt2YXIgZD1hLmkuc2VydmVyc1tjXTtkJiYoYi5saWNlbnNlU2VydmVyVXJpPWQpfWlmKGM9YS5pLmFkdmFuY2VkW2NdKWIuZGlzdGluY3RpdmVJZGVudGlmaWVyUmVxdWlyZWR8fChiLmRpc3RpbmN0aXZlSWRlbnRpZmllclJlcXVpcmVkPWMuZGlzdGluY3RpdmVJZGVudGlmaWVyUmVxdWlyZWQpLGIucGVyc2lzdGVudFN0YXRlUmVxdWlyZWR8fChiLnBlcnNpc3RlbnRTdGF0ZVJlcXVpcmVkPWMucGVyc2lzdGVudFN0YXRlUmVxdWlyZWQpLGIudmlkZW9Sb2J1c3RuZXNzfHwoYi52aWRlb1JvYnVzdG5lc3M9Yy52aWRlb1JvYnVzdG5lc3MpLGIuYXVkaW9Sb2J1c3RuZXNzfHwoYi5hdWRpb1JvYnVzdG5lc3M9Yy5hdWRpb1JvYnVzdG5lc3MpLGIuc2VydmVyQ2VydGlmaWNhdGV8fChiLnNlcnZlckNlcnRpZmljYXRlPWMuc2VydmVyQ2VydGlmaWNhdGUpfX1cclxuZnVuY3Rpb24ga2IoYSl7aWYoTWEoYS5pLmNsZWFyS2V5cykpcmV0dXJuIG51bGw7dmFyIGI9W10sYz1bXSxkO2ZvcihkIGluIGEuaS5jbGVhcktleXMpe3ZhciBlPWEuaS5jbGVhcktleXNbZF0sZj1ZYShkKSxlPVlhKGUpLGY9e2t0eTpcIm9jdFwiLGtpZDpXYShmKSxrOldhKGUpfTtiLnB1c2goZik7Yy5wdXNoKGYua2lkKX1hPUpTT04uc3RyaW5naWZ5KHtrZXlzOmJ9KTtjPUpTT04uc3RyaW5naWZ5KHtraWRzOmN9KTtjPVt7aW5pdERhdGE6bmV3IFVpbnQ4QXJyYXkoU2EoYykpLGluaXREYXRhVHlwZTpcImtleWlkc1wifV07cmV0dXJue2tleVN5c3RlbTpcIm9yZy53My5jbGVhcmtleVwiLGxpY2Vuc2VTZXJ2ZXJVcmk6XCJkYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LFwiK3dpbmRvdy5idG9hKGEpLGRpc3RpbmN0aXZlSWRlbnRpZmllclJlcXVpcmVkOiExLHBlcnNpc3RlbnRTdGF0ZVJlcXVpcmVkOiExLGF1ZGlvUm9idXN0bmVzczpcIlwiLHZpZGVvUm9idXN0bmVzczpcIlwiLHNlcnZlckNlcnRpZmljYXRlOm51bGwsXHJcbmluaXREYXRhOmN9fWZ1bmN0aW9uIG1iKGEsYixjLGQpe3ZhciBlPVtdLGY9W10sZz1bXTtuYihkLGUsZixnKTthLmI9e2tleVN5c3RlbTpiLGxpY2Vuc2VTZXJ2ZXJVcmk6ZVswXSxkaXN0aW5jdGl2ZUlkZW50aWZpZXJSZXF1aXJlZDpcInJlcXVpcmVkXCI9PWMuZGlzdGluY3RpdmVJZGVudGlmaWVyLHBlcnNpc3RlbnRTdGF0ZVJlcXVpcmVkOlwicmVxdWlyZWRcIj09Yy5wZXJzaXN0ZW50U3RhdGUsYXVkaW9Sb2J1c3RuZXNzOmMuYXVkaW9DYXBhYmlsaXRpZXM/Yy5hdWRpb0NhcGFiaWxpdGllc1swXS5yb2J1c3RuZXNzOlwiXCIsdmlkZW9Sb2J1c3RuZXNzOmMudmlkZW9DYXBhYmlsaXRpZXM/Yy52aWRlb0NhcGFiaWxpdGllc1swXS5yb2J1c3RuZXNzOlwiXCIsc2VydmVyQ2VydGlmaWNhdGU6ZlswXSxpbml0RGF0YTpnfX1cclxuZnVuY3Rpb24gbmIoYSxiLGMsZCl7ZnVuY3Rpb24gZShhLGIpe3JldHVybiBhLmluaXREYXRhVHlwZT09Yi5pbml0RGF0YVR5cGUmJiRhKGEuaW5pdERhdGEsYi5pbml0RGF0YSl9YS5mb3JFYWNoKGZ1bmN0aW9uKGEpey0xPT1iLmluZGV4T2YoYS5saWNlbnNlU2VydmVyVXJpKSYmYi5wdXNoKGEubGljZW5zZVNlcnZlclVyaSk7YS5zZXJ2ZXJDZXJ0aWZpY2F0ZSYmLTE9PUlhKGMsYS5zZXJ2ZXJDZXJ0aWZpY2F0ZSwkYSkmJmMucHVzaChhLnNlcnZlckNlcnRpZmljYXRlKTthLmluaXREYXRhJiZhLmluaXREYXRhLmZvckVhY2goZnVuY3Rpb24oYSl7LTE9PUlhKGQsYSxlKSYmZC5wdXNoKGEpfSl9KX1rLmJjPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1uZXcgVWludDhBcnJheShhLmluaXREYXRhKSxjPTA7Yzx0aGlzLmEubGVuZ3RoOysrYylpZigkYShiLHRoaXMuYVtjXS5pbml0RGF0YSkpcmV0dXJuO2hiKHRoaXMsYS5pbml0RGF0YVR5cGUsYil9O1xyXG5mdW5jdGlvbiBnYihhLGIpe3ZhciBjO3RyeXtjPWEuaC5jcmVhdGVTZXNzaW9uKFwicGVyc2lzdGVudC1saWNlbnNlXCIpfWNhdGNoKGYpe3ZhciBkPW5ldyBxKDYsNjAwNSxmLm1lc3NhZ2UpO2EuZihkKTtyZXR1cm4gUHJvbWlzZS5yZWplY3QoZCl9QihhLmcsYyxcIm1lc3NhZ2VcIixhLnZiLmJpbmQoYSkpO0IoYS5nLGMsXCJrZXlzdGF0dXNlc2NoYW5nZVwiLGEucWIuYmluZChhKSk7dmFyIGU9e2luaXREYXRhOm51bGwseWE6Yyxsb2FkZWQ6ITF9O2EuYS5wdXNoKGUpO3JldHVybiBjLmxvYWQoYikudGhlbihmdW5jdGlvbihhKXtpZighdGhpcy5jKXtpZihhKXJldHVybiBlLmxvYWRlZD0hMCx0aGlzLmEuZXZlcnkoZnVuY3Rpb24oYSl7cmV0dXJuIGEubG9hZGVkfSkmJnRoaXMuai5yZXNvbHZlKCksYzt0aGlzLmEuc3BsaWNlKHRoaXMuYS5pbmRleE9mKGUpLDEpO3RoaXMuZihuZXcgcSg2LDYwMTMpKX19LmJpbmQoYSksZnVuY3Rpb24oYSl7dGhpcy5jfHwodGhpcy5hLnNwbGljZSh0aGlzLmEuaW5kZXhPZihlKSxcclxuMSksdGhpcy5mKG5ldyBxKDYsNjAwNSxhLm1lc3NhZ2UpKSl9LmJpbmQoYSkpfWZ1bmN0aW9uIGhiKGEsYixjKXt2YXIgZDt0cnl7ZD1hLkM/YS5oLmNyZWF0ZVNlc3Npb24oXCJwZXJzaXN0ZW50LWxpY2Vuc2VcIik6YS5oLmNyZWF0ZVNlc3Npb24oKX1jYXRjaChlKXthLmYobmV3IHEoNiw2MDA1LGUubWVzc2FnZSkpO3JldHVybn1CKGEuZyxkLFwibWVzc2FnZVwiLGEudmIuYmluZChhKSk7QihhLmcsZCxcImtleXN0YXR1c2VzY2hhbmdlXCIsYS5xYi5iaW5kKGEpKTthLmEucHVzaCh7aW5pdERhdGE6Yyx5YTpkLGxvYWRlZDohMX0pO2QuZ2VuZXJhdGVSZXF1ZXN0KGIsYy5idWZmZXIpW1wiY2F0Y2hcIl0oZnVuY3Rpb24oYSl7aWYoIXRoaXMuYyl7Zm9yKHZhciBiPTA7Yjx0aGlzLmEubGVuZ3RoOysrYilpZih0aGlzLmFbYl0ueWE9PWQpe3RoaXMuYS5zcGxpY2UoYiwxKTticmVha310aGlzLmYobmV3IHEoNiw2MDA2LGEubWVzc2FnZSkpfX0uYmluZChhKSl9XHJcbmsudmI9ZnVuY3Rpb24oYSl7dmFyIGI9YS50YXJnZXQsYz1IYShbdGhpcy5iLmxpY2Vuc2VTZXJ2ZXJVcmldLHRoaXMuaS5yZXRyeVBhcmFtZXRlcnMpO2MuYm9keT1hLm1lc3NhZ2U7Yy5tZXRob2Q9XCJQT1NUXCI7XCJjb20ubWljcm9zb2Z0LnBsYXlyZWFkeVwiPT10aGlzLmIua2V5U3lzdGVtJiZwYihjKTt0aGlzLkcucmVxdWVzdCgyLGMpLnRoZW4oZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuYz9Qcm9taXNlLnJlamVjdCgpOmIudXBkYXRlKGEuZGF0YSl9LmJpbmQodGhpcyksZnVuY3Rpb24oYSl7aWYodGhpcy5jKXJldHVybiBQcm9taXNlLnJlc29sdmUoKTt0aGlzLmYobmV3IHEoNiw2MDA3LGEpKX0uYmluZCh0aGlzKSlbXCJjYXRjaFwiXShmdW5jdGlvbihhKXtpZih0aGlzLmMpcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO3RoaXMuZihuZXcgcSg2LDYwMDgsYS5tZXNzYWdlKSl9LmJpbmQodGhpcykpfTtcclxuZnVuY3Rpb24gcGIoYSl7Zm9yKHZhciBiPVFhKGEuYm9keSwhMCksYj0obmV3IERPTVBhcnNlcikucGFyc2VGcm9tU3RyaW5nKGIsXCJhcHBsaWNhdGlvbi94bWxcIiksYz1iLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiSHR0cEhlYWRlclwiKSxkPTA7ZDxjLmxlbmd0aDsrK2QpYS5oZWFkZXJzW2NbZF0ucXVlcnlTZWxlY3RvcihcIm5hbWVcIikudGV4dENvbnRlbnRdPWNbZF0ucXVlcnlTZWxlY3RvcihcInZhbHVlXCIpLnRleHRDb250ZW50O2EuYm9keT1YYShiLnF1ZXJ5U2VsZWN0b3IoXCJDaGFsbGVuZ2VcIikudGV4dENvbnRlbnQpLmJ1ZmZlcn1cclxuay5xYj1mdW5jdGlvbihhKXthPWEudGFyZ2V0O3ZhciBiO2ZvcihiPTA7Yjx0aGlzLmEubGVuZ3RoJiZ0aGlzLmFbYl0ueWEhPWE7KytiKTtpZihiIT10aGlzLmEubGVuZ3RoKXt2YXIgYz1hLmtleVN0YXR1c2VzLGQ9ITE7Yy5mb3JFYWNofHwoYz1bXSk7Yy5mb3JFYWNoKGZ1bmN0aW9uKGEsYyl7aWYoXCJzdHJpbmdcIj09dHlwZW9mIGMpe3ZhciBnPWM7Yz1hO2E9Z31pZihcImNvbS5taWNyb3NvZnQucGxheXJlYWR5XCI9PXRoaXMuYi5rZXlTeXN0ZW0mJjE2PT1jLmJ5dGVMZW5ndGgpe3ZhciBnPW5ldyBEYXRhVmlldyhjKSxoPWcuZ2V0VWludDMyKDAsITApLG09Zy5nZXRVaW50MTYoNCwhMCksbj1nLmdldFVpbnQxNig2LCEwKTtnLnNldFVpbnQzMigwLGgsITEpO2cuc2V0VWludDE2KDQsbSwhMSk7Zy5zZXRVaW50MTYoNixuLCExKX1cImNvbS5taWNyb3NvZnQucGxheXJlYWR5XCI9PXRoaXMuYi5rZXlTeXN0ZW0mJlwic3RhdHVzLXBlbmRpbmdcIj09YSYmKGE9XCJ1c2FibGVcIik7XCJzdGF0dXMtcGVuZGluZ1wiIT1cclxuYSYmXCJpbnRlcm5hbC1lcnJvclwiIT1hJiYodGhpcy5hW2JdLmxvYWRlZD0hMCx0aGlzLmEuZXZlcnkoZnVuY3Rpb24oYSl7cmV0dXJuIGEubG9hZGVkfSkmJnRoaXMuai5yZXNvbHZlKCkpO1wiZXhwaXJlZFwiPT1hJiYoZD0hMCk7Zz1aYShuZXcgVWludDhBcnJheShjKSk7XCJpbnRlcm5hbC1lcnJvclwiPT1hJiZ0aGlzLmYobmV3IHEoNiw0MDEzLGcpKTt0aGlzLndbZ109YX0uYmluZCh0aGlzKSk7Yz1hLmV4cGlyYXRpb24tRGF0ZS5ub3coKTtpZigwPmN8fGQmJjFFMz5jKXRoaXMuYS5zcGxpY2UoYiwxKSxhLmNsb3NlKCk7VmEodGhpcy52KX19O2sudWM9ZnVuY3Rpb24oKXtPYSh0aGlzLncsZnVuY3Rpb24oYSxiKXtyZXR1cm5cImV4cGlyZWRcIj09Yn0pJiZ0aGlzLmYobmV3IHEoNiw2MDE0KSk7dGhpcy5KKHRoaXMudyl9O1xyXG5mdW5jdGlvbiBxYigpe3ZhciBhPVtdLGI9W3tjb250ZW50VHlwZTondmlkZW8vbXA0OyBjb2RlY3M9XCJhdmMxLjQyRTAxRVwiJ31dLGM9W3t2aWRlb0NhcGFiaWxpdGllczpiLHBlcnNpc3RlbnRTdGF0ZTpcInJlcXVpcmVkXCIsc2Vzc2lvblR5cGVzOltcInBlcnNpc3RlbnQtbGljZW5zZVwiXX0se3ZpZGVvQ2FwYWJpbGl0aWVzOmJ9XSxkPXt9O1wib3JnLnczLmNsZWFya2V5IGNvbS53aWRldmluZS5hbHBoYSBjb20ubWljcm9zb2Z0LnBsYXlyZWFkeSBjb20uYXBwbGUuZnBzLjJfMCBjb20uYXBwbGUuZnBzLjFfMCBjb20uYXBwbGUuZnBzIGNvbS5hZG9iZS5wcmltZXRpbWVcIi5zcGxpdChcIiBcIikuZm9yRWFjaChmdW5jdGlvbihiKXt2YXIgZj1uYXZpZ2F0b3IucmVxdWVzdE1lZGlhS2V5U3lzdGVtQWNjZXNzKGIsYykudGhlbihmdW5jdGlvbihhKXtyZXR1cm4gYS5jcmVhdGVNZWRpYUtleXMoKX0pLnRoZW4oZnVuY3Rpb24oYSl7dmFyIGM9ITE7dHJ5e2EuY3JlYXRlU2Vzc2lvbihcInBlcnNpc3RlbnQtbGljZW5zZVwiKSxcclxuYz0hMH1jYXRjaChmKXt9ZFtiXT17cGVyc2lzdGVudFN0YXRlOmN9fSxmdW5jdGlvbigpe2RbYl09bnVsbH0pO2EucHVzaChmKX0pO3JldHVybiBQcm9taXNlLmFsbChhKS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIGR9KX07dmFyIHJiPXt9LHNiPXt9O2woXCJzaGFrYS5tZWRpYS5NYW5pZmVzdFBhcnNlci5yZWdpc3RlclBhcnNlckJ5RXh0ZW5zaW9uXCIsZnVuY3Rpb24oYSxiKXtzYlthXT1ifSk7bChcInNoYWthLm1lZGlhLk1hbmlmZXN0UGFyc2VyLnJlZ2lzdGVyUGFyc2VyQnlNaW1lXCIsZnVuY3Rpb24oYSxiKXtyYlthXT1ifSk7ZnVuY3Rpb24gdGIoKXt2YXIgYT17fSxiO2ZvcihiIGluIHJiKWFbYl09ITA7Zm9yKGIgaW4gc2IpYVtiXT0hMDtbXCJhcHBsaWNhdGlvbi9kYXNoK3htbFwiLFwiYXBwbGljYXRpb24veC1tcGVndXJsXCIsXCJhcHBsaWNhdGlvbi92bmQuYXBwbGUubXBlZ3VybFwiLFwiYXBwbGljYXRpb24vdm5kLm1zLXNzdHIreG1sXCJdLmZvckVhY2goZnVuY3Rpb24oYil7YVtiXT0hIXJiW2JdfSk7W1wibXBkXCIsXCJtM3U4XCIsXCJpc21cIl0uZm9yRWFjaChmdW5jdGlvbihiKXthW2JdPSEhc2JbYl19KTtyZXR1cm4gYX1cclxuZnVuY3Rpb24gdWIoYSxiLGMsZCl7dmFyIGU9ZDtlfHwoZD0obmV3IG9hKGEpKS5PLnNwbGl0KFwiL1wiKS5wb3AoKS5zcGxpdChcIi5cIiksMTxkLmxlbmd0aCYmKGQ9ZC5wb3AoKS50b0xvd2VyQ2FzZSgpLGU9c2JbZF0pKTtpZihlKXJldHVybiBQcm9taXNlLnJlc29sdmUoZSk7Yz1IYShbYV0sYyk7Yy5tZXRob2Q9XCJIRUFEXCI7cmV0dXJuIGIucmVxdWVzdCgwLGMpLnRoZW4oZnVuY3Rpb24oYil7KGI9Yi5oZWFkZXJzW1wiY29udGVudC10eXBlXCJdKSYmKGI9Yi50b0xvd2VyQ2FzZSgpKTtyZXR1cm4oZT1yYltiXSk/ZTpQcm9taXNlLnJlamVjdChuZXcgcSg0LDRFMyxhKSl9LGZ1bmN0aW9uKCl7cmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBxKDQsNEUzLGEpKX0pfTtmdW5jdGlvbiB2YihhLGIpe3RoaXMuZz1FW2JdO3RoaXMuYz1hO3RoaXMuaD0wO3RoaXMuZj1JbmZpbml0eTt0aGlzLmE9dGhpcy5iPW51bGx9dmFyIEU9e307bChcInNoYWthLm1lZGlhLlRleHRFbmdpbmUucmVnaXN0ZXJQYXJzZXJcIixmdW5jdGlvbihhLGIpe0VbYV09Yn0pO2woXCJzaGFrYS5tZWRpYS5UZXh0RW5naW5lLnVucmVnaXN0ZXJQYXJzZXJcIixmdW5jdGlvbihhKXtkZWxldGUgRVthXX0pO2Z1bmN0aW9uIHdiKGEsYixjKXtyZXR1cm4gYT49Yj9udWxsOm5ldyB4YihhLGIsYyl9bChcInNoYWthLm1lZGlhLlRleHRFbmdpbmUubWFrZUN1ZVwiLHdiKTt2YXIgeGI9d2luZG93LlZUVEN1ZXx8d2luZG93LlRleHRUcmFja0N1ZTt2Yi5wcm90b3R5cGUubz1mdW5jdGlvbigpe3RoaXMuYyYmeWIodGhpcyxmdW5jdGlvbigpe3JldHVybiEwfSk7dGhpcy5jPXRoaXMuZz1udWxsO3JldHVybiBQcm9taXNlLnJlc29sdmUoKX07XHJcbmZ1bmN0aW9uIHpiKGEsYixjLGQpe3ZhciBlPWEuaDtyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCkudGhlbihmdW5jdGlvbigpe3ZhciBhPXRoaXMuZyhiLGUsYyxkKTtpZihudWxsIT1jJiZudWxsIT1kKXtmb3IodmFyIGc9MDtnPGEubGVuZ3RoJiYhKGFbZ10uc3RhcnRUaW1lPj10aGlzLmYpOysrZyl0aGlzLmMuYWRkQ3VlKGFbZ10pO251bGw9PXRoaXMuYiYmKHRoaXMuYj1jKTt0aGlzLmE9TWF0aC5taW4oZCx0aGlzLmYpfX0uYmluZChhKSl9XHJcbnZiLnByb3RvdHlwZS5yZW1vdmU9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCkudGhlbihmdW5jdGlvbigpe3liKHRoaXMsZnVuY3Rpb24oYyl7cmV0dXJuIGMuc3RhcnRUaW1lPj1ifHxjLmVuZFRpbWU8PWE/ITE6ITB9KTtudWxsPT10aGlzLmJ8fGI8PXRoaXMuYnx8YT49dGhpcy5hfHwoYTw9dGhpcy5iJiZiPj10aGlzLmE/dGhpcy5iPXRoaXMuYT1udWxsOmE8PXRoaXMuYiYmYjx0aGlzLmE/dGhpcy5iPWI6YT50aGlzLmImJmI+PXRoaXMuYSYmKHRoaXMuYT1hKSl9LmJpbmQodGhpcykpfTtmdW5jdGlvbiBBYihhLGIpe3JldHVybiBudWxsPT1hLmF8fGEuYTxifHxiPGEuYj8wOmEuYS1ifWZ1bmN0aW9uIHliKGEsYil7Zm9yKHZhciBjPWEuYy5jdWVzLGQ9W10sZT0wO2U8Yy5sZW5ndGg7KytlKWIoY1tlXSkmJmQucHVzaChjW2VdKTtmb3IoZT0wO2U8ZC5sZW5ndGg7KytlKWEuYy5yZW1vdmVDdWUoZFtlXSl9O2Z1bmN0aW9uIEJiKGEsYil7dmFyIGM9MDtpZighYXx8MT09YS5sZW5ndGgmJjFFLTY+YS5lbmQoMCktYS5zdGFydCgwKSlyZXR1cm4gYztmb3IodmFyIGQ9ITEsZT0wO2U8YS5sZW5ndGg7KytlKWlmKGIrMUUtND49YS5zdGFydChlKSYmYjxhLmVuZChlKSljKz1hLmVuZChlKS1iLGQ9ITA7ZWxzZSBpZihkJiYuMDQ+PWEuc3RhcnQoZSktYS5lbmQoZS0xKSljKz1hLmVuZChlKS1hLnN0YXJ0KGUpLGMrPWEuc3RhcnQoZSktYS5lbmQoZS0xKTtlbHNlIGlmKDA8ZSYmYisxRS00PGEuc3RhcnQoZSkmJmIrMUUtND49YS5lbmQoZS0xKSlpZiguMDQ+PWEuc3RhcnQoZSktYiljKz1hLmVuZChlKS1iLGQ9ITA7ZWxzZSBicmVhaztlbHNlIGQ9ITE7cmV0dXJuIGN9O2Z1bmN0aW9uIENiKGEsYixjKXt0aGlzLmk9YTt0aGlzLmY9Yjt0aGlzLmo9Yzt0aGlzLmM9e307dGhpcy5iPW51bGw7dGhpcy5hPXt9O3RoaXMuZz1uZXcgejt0aGlzLmg9ITF9XHJcbmZ1bmN0aW9uIERiKCl7dmFyIGE9e307J3ZpZGVvL21wNDsgY29kZWNzPVwiYXZjMS40MkUwMUVcIixhdWRpby9tcDQ7IGNvZGVjcz1cIm1wNGEuNDAuMlwiLHZpZGVvL3dlYm07IGNvZGVjcz1cInZwOFwiLHZpZGVvL3dlYm07IGNvZGVjcz1cInZwOVwiLGF1ZGlvL3dlYm07IGNvZGVjcz1cInZvcmJpc1wiLGF1ZGlvL3dlYm07IGNvZGVjcz1cIm9wdXNcIix2aWRlby9tcDJ0OyBjb2RlY3M9XCJhdmMxLjQyRTAxRVwiLHZpZGVvL21wMnQ7IGNvZGVjcz1cIm1wNGEuNDAuMlwiLHRleHQvdnR0LGFwcGxpY2F0aW9uL21wNDsgY29kZWNzPVwid3Z0dFwiLGFwcGxpY2F0aW9uL3R0bWwreG1sLGFwcGxpY2F0aW9uL21wNDsgY29kZWNzPVwic3RwcFwiJy5zcGxpdChcIixcIikuZm9yRWFjaChmdW5jdGlvbihiKXthW2JdPSEhRVtiXXx8TWVkaWFTb3VyY2UuaXNUeXBlU3VwcG9ydGVkKGIpO3ZhciBjPWIuc3BsaXQoXCI7XCIpWzBdO2FbY109YVtjXXx8YVtiXX0pO3JldHVybiBhfWs9Q2IucHJvdG90eXBlO1xyXG5rLm89ZnVuY3Rpb24oKXt0aGlzLmg9ITA7dmFyIGE9W10sYjtmb3IoYiBpbiB0aGlzLmEpe3ZhciBjPXRoaXMuYVtiXSxkPWNbMF07dGhpcy5hW2JdPWMuc2xpY2UoMCwxKTtkJiZhLnB1c2goZC5wW1wiY2F0Y2hcIl0odikpO2ZvcihkPTE7ZDxjLmxlbmd0aDsrK2QpY1tkXS5wW1wiY2F0Y2hcIl0odiksY1tkXS5wLnJlamVjdCgpfXRoaXMuYiYmYS5wdXNoKHRoaXMuYi5vKCkpO3JldHVybiBQcm9taXNlLmFsbChhKS50aGVuKGZ1bmN0aW9uKCl7dGhpcy5nLm8oKTt0aGlzLmI9dGhpcy5qPXRoaXMuZj10aGlzLmk9dGhpcy5nPW51bGw7dGhpcy5jPXt9O3RoaXMuYT17fX0uYmluZCh0aGlzKSl9O1xyXG5rLmluaXQ9ZnVuY3Rpb24oYSl7Zm9yKHZhciBiIGluIGEpe3ZhciBjPWFbYl07XCJ0ZXh0XCI9PWI/dGhpcy5iPW5ldyB2Yih0aGlzLmosYyk6KGM9dGhpcy5mLmFkZFNvdXJjZUJ1ZmZlcihjKSxCKHRoaXMuZyxjLFwiZXJyb3JcIix0aGlzLlJjLmJpbmQodGhpcyxiKSksQih0aGlzLmcsYyxcInVwZGF0ZWVuZFwiLHRoaXMuRmEuYmluZCh0aGlzLGIpKSx0aGlzLmNbYl09Yyx0aGlzLmFbYl09W10pfX07ZnVuY3Rpb24gRWIoYSxiKXt2YXIgYztcInRleHRcIj09Yj9jPWEuYi5iOihjPUZiKGEsYiksYz0hY3x8MT09Yy5sZW5ndGgmJjFFLTY+Yy5lbmQoMCktYy5zdGFydCgwKT9udWxsOmMubGVuZ3RoP2Muc3RhcnQoMCk6bnVsbCk7cmV0dXJuIGN9ZnVuY3Rpb24gR2IoYSxiLGMpe1widGV4dFwiPT1iPyhiPUFiKGEuYixjKSxifHwoYj1BYihhLmIsYysuMSkpJiYoYis9LjEpKTooYT1GYihhLGIpLGI9QmIoYSxjKSxifHwoYj1CYihhLGMrLjEpKSYmKGIrPS4xKSk7cmV0dXJuIGJ9XHJcbmZ1bmN0aW9uIEZiKGEsYil7dHJ5e3JldHVybiBhLmNbYl0uYnVmZmVyZWR9Y2F0Y2goYyl7cmV0dXJuIG51bGx9fWZ1bmN0aW9uIEhiKGEsYixjLGQsZSl7cmV0dXJuXCJ0ZXh0XCI9PWI/emIoYS5iLGMsZCxlKTpJYihhLGIsYS5RYy5iaW5kKGEsYixjKSl9ay5yZW1vdmU9ZnVuY3Rpb24oYSxiLGMpe3JldHVyblwidGV4dFwiPT1hP3RoaXMuYi5yZW1vdmUoYixjKTpQcm9taXNlLmFsbChbSWIodGhpcyxhLHRoaXMuQWIuYmluZCh0aGlzLGEsYixjKSksSWIodGhpcyxhLHRoaXMuaWIuYmluZCh0aGlzLGEpKV0pfTtrLmNsZWFyPWZ1bmN0aW9uKGEpe3JldHVyblwidGV4dFwiPT1hP3RoaXMuYi5yZW1vdmUoMCxJbmZpbml0eSk6SWIodGhpcyxhLHRoaXMuQWIuYmluZCh0aGlzLGEsMCx0aGlzLmYuZHVyYXRpb24pKX07ZnVuY3Rpb24gSmIoYSxiLGMpe3JldHVyblwidGV4dFwiPT1iPyhhLmIuaD1jLFByb21pc2UucmVzb2x2ZSgpKTpJYihhLGIsYS5HYy5iaW5kKGEsYixjKSl9XHJcbmZ1bmN0aW9uIEtiKGEsYixjKXtyZXR1cm5cInRleHRcIj09Yj8oYS5iLmY9YyxQcm9taXNlLnJlc29sdmUoKSk6UHJvbWlzZS5hbGwoW0liKGEsYixhLmliLmJpbmQoYSxiKSksSWIoYSxiLGEuRWMuYmluZChhLGIsYykpXSl9ay5lbmRPZlN0cmVhbT1mdW5jdGlvbihhKXtyZXR1cm4gTGIodGhpcyxmdW5jdGlvbigpe2E/dGhpcy5mLmVuZE9mU3RyZWFtKGEpOnRoaXMuZi5lbmRPZlN0cmVhbSgpfS5iaW5kKHRoaXMpKX07ay56YT1mdW5jdGlvbihhKXtyZXR1cm4gTGIodGhpcyxmdW5jdGlvbigpe3RoaXMuZi5kdXJhdGlvbj1hfS5iaW5kKHRoaXMpKX07ay5aPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZi5kdXJhdGlvbn07ay5RYz1mdW5jdGlvbihhLGIpe3RoaXMuY1thXS5hcHBlbmRCdWZmZXIoYil9O2suQWI9ZnVuY3Rpb24oYSxiLGMpe2M8PWI/dGhpcy5GYShhKTp0aGlzLmNbYV0ucmVtb3ZlKGIsYyl9O1xyXG5rLmliPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY1thXS5hcHBlbmRXaW5kb3dFbmQ7dGhpcy5jW2FdLmFib3J0KCk7dGhpcy5jW2FdLmFwcGVuZFdpbmRvd0VuZD1iO3RoaXMuRmEoYSl9O2suR2M9ZnVuY3Rpb24oYSxiKXt0aGlzLmNbYV0udGltZXN0YW1wT2Zmc2V0PWI7dGhpcy5GYShhKX07ay5FYz1mdW5jdGlvbihhLGIpe3RoaXMuY1thXS5hcHBlbmRXaW5kb3dFbmQ9YisuMDQ7dGhpcy5GYShhKX07ay5SYz1mdW5jdGlvbihhKXt0aGlzLmFbYV1bMF0ucC5yZWplY3QobmV3IHEoMywzMDE0LHRoaXMuaS5lcnJvcj90aGlzLmkuZXJyb3IuY29kZTowKSl9O2suRmE9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5hW2FdWzBdO2ImJihiLnAucmVzb2x2ZSgpLE1iKHRoaXMsYSkpfTtcclxuZnVuY3Rpb24gSWIoYSxiLGMpe2lmKGEuaClyZXR1cm4gUHJvbWlzZS5yZWplY3QoKTtjPXtzdGFydDpjLHA6bmV3IHd9O2EuYVtiXS5wdXNoKGMpO2lmKDE9PWEuYVtiXS5sZW5ndGgpdHJ5e2Muc3RhcnQoKX1jYXRjaChkKXtcIlF1b3RhRXhjZWVkZWRFcnJvclwiPT1kLm5hbWU/Yy5wLnJlamVjdChuZXcgcSgzLDMwMTcsYikpOmMucC5yZWplY3QobmV3IHEoMywzMDE1LGQpKSxNYihhLGIpfXJldHVybiBjLnB9XHJcbmZ1bmN0aW9uIExiKGEsYil7aWYoYS5oKXJldHVybiBQcm9taXNlLnJlamVjdCgpO3ZhciBjPVtdLGQ7Zm9yKGQgaW4gYS5jKXt2YXIgZT1uZXcgdyxmPXtzdGFydDpmdW5jdGlvbihhKXthLnJlc29sdmUoKX0uYmluZChudWxsLGUpLHA6ZX07YS5hW2RdLnB1c2goZik7Yy5wdXNoKGUpOzE9PWEuYVtkXS5sZW5ndGgmJmYuc3RhcnQoKX1yZXR1cm4gUHJvbWlzZS5hbGwoYykudGhlbihmdW5jdGlvbigpe3ZhciBhLGM7dHJ5e2IoKX1jYXRjaChkKXtjPVByb21pc2UucmVqZWN0KG5ldyBxKDMsMzAxNSxkKSl9Zm9yKGEgaW4gdGhpcy5jKU1iKHRoaXMsYSk7cmV0dXJuIGN9LmJpbmQoYSksZnVuY3Rpb24oKXtyZXR1cm4gUHJvbWlzZS5yZWplY3QoKX0uYmluZChhKSl9ZnVuY3Rpb24gTWIoYSxiKXthLmFbYl0uc2hpZnQoKTt2YXIgYz1hLmFbYl1bMF07aWYoYyl0cnl7Yy5zdGFydCgpfWNhdGNoKGQpe2MucC5yZWplY3QobmV3IHEoMywzMDE1LGQpKSxNYihhLGIpfX07ZnVuY3Rpb24gRihhLGIpe3RoaXMuaj1hO3RoaXMuaT1iO3RoaXMuYz10aGlzLmE9SW5maW5pdHk7dGhpcy5iPTE7dGhpcy5oPXRoaXMuZj0wO3RoaXMuZz0hMH1sKFwic2hha2EubWVkaWEuUHJlc2VudGF0aW9uVGltZWxpbmVcIixGKTtGLnByb3RvdHlwZS5aPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYX07Ri5wcm90b3R5cGUuZ2V0RHVyYXRpb249Ri5wcm90b3R5cGUuWjtGLnByb3RvdHlwZS56YT1mdW5jdGlvbihhKXt0aGlzLmE9YX07Ri5wcm90b3R5cGUuc2V0RHVyYXRpb249Ri5wcm90b3R5cGUuemE7Ri5wcm90b3R5cGUuRWI9ZnVuY3Rpb24oYSl7dGhpcy5oPWF9O0YucHJvdG90eXBlLnNldENsb2NrT2Zmc2V0PUYucHJvdG90eXBlLkViO0YucHJvdG90eXBlLkhiPWZ1bmN0aW9uKGEpe3RoaXMuZz1hfTtGLnByb3RvdHlwZS5zZXRTdGF0aWM9Ri5wcm90b3R5cGUuSGI7Ri5wcm90b3R5cGUuVWI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jfTtcclxuRi5wcm90b3R5cGUuZ2V0U2VnbWVudEF2YWlsYWJpbGl0eUR1cmF0aW9uPUYucHJvdG90eXBlLlViO0YucHJvdG90eXBlLkdiPWZ1bmN0aW9uKGEpe3RoaXMuYz1hfTtGLnByb3RvdHlwZS5zZXRTZWdtZW50QXZhaWxhYmlsaXR5RHVyYXRpb249Ri5wcm90b3R5cGUuR2I7Ri5wcm90b3R5cGUuRWE9ZnVuY3Rpb24oYSxiKXtiLmxlbmd0aCYmKHRoaXMuYj1iLnJlZHVjZShmdW5jdGlvbihhLGIpe3JldHVybiBNYXRoLm1heChhLGIuZW5kVGltZS1iLnN0YXJ0VGltZSl9LHRoaXMuYiksYXx8KHRoaXMuZj1NYXRoLm1heCh0aGlzLmYsYlswXS5zdGFydFRpbWUpKSl9O0YucHJvdG90eXBlLm5vdGlmeVNlZ21lbnRzPUYucHJvdG90eXBlLkVhO0YucHJvdG90eXBlLlhhPWZ1bmN0aW9uKGEpe3RoaXMuYj1NYXRoLm1heCh0aGlzLmIsYSl9O0YucHJvdG90eXBlLm5vdGlmeU1heFNlZ21lbnREdXJhdGlvbj1GLnByb3RvdHlwZS5YYTtcclxuRi5wcm90b3R5cGUuVT1mdW5jdGlvbigpe3JldHVybiBJbmZpbml0eT09dGhpcy5hJiYhdGhpcy5nfTtGLnByb3RvdHlwZS5pc0xpdmU9Ri5wcm90b3R5cGUuVTtGLnByb3RvdHlwZS5nYT1mdW5jdGlvbigpe3JldHVybiBJbmZpbml0eSE9dGhpcy5hJiYhdGhpcy5nfTtGLnByb3RvdHlwZS5pc0luUHJvZ3Jlc3M9Ri5wcm90b3R5cGUuZ2E7Ri5wcm90b3R5cGUucmE9ZnVuY3Rpb24oKXtyZXR1cm4gTWF0aC5tYXgoTWF0aC5taW4odGhpcy5mLHRoaXMuZmEoKSksdGhpcy5zYSgpKX07Ri5wcm90b3R5cGUuZ2V0RWFybGllc3RTdGFydD1GLnByb3RvdHlwZS5yYTtGLnByb3RvdHlwZS5zYT1mdW5jdGlvbigpe3JldHVybiBJbmZpbml0eT09dGhpcy5jPzA6TWF0aC5tYXgoMCx0aGlzLmZhKCktdGhpcy5jLXRoaXMuaSl9O0YucHJvdG90eXBlLmdldFNlZ21lbnRBdmFpbGFiaWxpdHlTdGFydD1GLnByb3RvdHlwZS5zYTtcclxuRi5wcm90b3R5cGUuZmE9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5VKCl8fHRoaXMuZ2EoKT9NYXRoLm1pbihNYXRoLm1heCgwLChEYXRlLm5vdygpK3RoaXMuaCkvMUUzLXRoaXMuYi10aGlzLmopLHRoaXMuYSk6dGhpcy5hfTtGLnByb3RvdHlwZS5nZXRTZWdtZW50QXZhaWxhYmlsaXR5RW5kPUYucHJvdG90eXBlLmZhO0YucHJvdG90eXBlLlRhPWZ1bmN0aW9uKCl7cmV0dXJuIE1hdGgubWF4KDAsdGhpcy5mYSgpLSh0aGlzLlUoKXx8dGhpcy5nYSgpP3RoaXMuaTowKSl9O0YucHJvdG90eXBlLmdldFNlZWtSYW5nZUVuZD1GLnByb3RvdHlwZS5UYTtmdW5jdGlvbiBOYihhLGIsYyxkLGUsZil7dGhpcy5hPWE7dGhpcy5jPWI7dGhpcy5pPWM7dGhpcy5tPWQ7dGhpcy5qPWU7dGhpcy5sPWY7dGhpcy5iPW5ldyB6O3RoaXMuaD0hMTt0aGlzLmc9MTt0aGlzLmY9bnVsbDswPGEucmVhZHlTdGF0ZT90aGlzLnJiKCk6Qih0aGlzLmIsYSxcImxvYWRlZG1ldGFkYXRhXCIsdGhpcy5yYi5iaW5kKHRoaXMpKTtCKHRoaXMuYixhLFwicmF0ZWNoYW5nZVwiLHRoaXMuaWMuYmluZCh0aGlzKSl9az1OYi5wcm90b3R5cGU7ay5vPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5iLm8oKTt0aGlzLmI9bnVsbDtudWxsIT10aGlzLmYmJih3aW5kb3cuY2xlYXJJbnRlcnZhbCh0aGlzLmYpLHRoaXMuZj1udWxsKTt0aGlzLmw9dGhpcy5qPXRoaXMuYz10aGlzLmE9bnVsbDtyZXR1cm4gYX07ZnVuY3Rpb24gT2IoYSl7cmV0dXJuIDA8YS5hLnJlYWR5U3RhdGU/UGIoYSxhLmEuY3VycmVudFRpbWUpOlFiKGEpfVxyXG5mdW5jdGlvbiBRYihhKXtyZXR1cm4gYS5tP1BiKGEsYS5tKTpJbmZpbml0eT5hLmMuWigpP2EuYy5yYSgpOk1hdGgubWF4KGEuYy5UYSgpLGEuYy5yYSgpKX1mdW5jdGlvbiBSYihhLGIpe2IhPWEuaCYmKGEuaD1iLFNiKGEsYS5nKSxhLmooYikpfWsuU2E9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nfTtmdW5jdGlvbiBTYihhLGIpe251bGwhPWEuZiYmKHdpbmRvdy5jbGVhckludGVydmFsKGEuZiksYS5mPW51bGwpO2EuZz1iO2EuYS5wbGF5YmFja1JhdGU9YS5ofHwwPmI/MDpiOyFhLmgmJjA+YiYmKGEuZj13aW5kb3cuc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXt0aGlzLmEuY3VycmVudFRpbWUrPWIvNH0uYmluZChhKSwyNTApKX1rLmljPWZ1bmN0aW9uKCl7dGhpcy5hLnBsYXliYWNrUmF0ZSE9KHRoaXMuaHx8MD50aGlzLmc/MDp0aGlzLmcpJiZTYih0aGlzLHRoaXMuYS5wbGF5YmFja1JhdGUpfTtcclxuay5yYj1mdW5jdGlvbigpe3RoaXMuYi5rYSh0aGlzLmEsXCJsb2FkZWRtZXRhZGF0YVwiKTt2YXIgYT1RYih0aGlzKTsuMDAxPk1hdGguYWJzKHRoaXMuYS5jdXJyZW50VGltZS1hKT8oQih0aGlzLmIsdGhpcy5hLFwic2Vla2luZ1wiLHRoaXMudGIuYmluZCh0aGlzKSksQih0aGlzLmIsdGhpcy5hLFwicGxheWluZ1wiLHRoaXMuc2IuYmluZCh0aGlzKSkpOihCKHRoaXMuYix0aGlzLmEsXCJzZWVraW5nXCIsdGhpcy5rYy5iaW5kKHRoaXMpKSx0aGlzLmEuY3VycmVudFRpbWU9YSl9O2sua2M9ZnVuY3Rpb24oKXt0aGlzLmIua2EodGhpcy5hLFwic2Vla2luZ1wiKTtCKHRoaXMuYix0aGlzLmEsXCJzZWVraW5nXCIsdGhpcy50Yi5iaW5kKHRoaXMpKTtCKHRoaXMuYix0aGlzLmEsXCJwbGF5aW5nXCIsdGhpcy5zYi5iaW5kKHRoaXMpKX07ay50Yj1mdW5jdGlvbigpe3ZhciBhPXRoaXMuYS5jdXJyZW50VGltZSxiPVRiKHRoaXMsYSk7LjAwMTxNYXRoLmFicyhiLWEpP1ViKHRoaXMsYSxiKTp0aGlzLmwoKX07XHJcbmsuc2I9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmEuY3VycmVudFRpbWUsYj1UYih0aGlzLGEpOy4wMDE8TWF0aC5hYnMoYi1hKSYmVWIodGhpcyxhLGIpfTtmdW5jdGlvbiBUYihhLGIpe3ZhciBjPWEuYyxkPWMucmEoKSxlPWMuZmEoKTtpZighYy5VKCl8fEluZmluaXR5PT1jLmMpcmV0dXJuIGI8ZD9kOmI+ZT9lOmI7Yz1kKzE7ZD1jK2EuaTtyZXR1cm4gYj49ZCYmYjw9ZXx8QmIoYS5hLmJ1ZmZlcmVkLGIpJiZiPj1jJiZiPD1lP2I6Yj5lP2U6ZTxkJiZiPj1jJiZiPD1lP2I6TWF0aC5taW4oZCsyLGUpfWZ1bmN0aW9uIFViKGEsYixjKXthLmEuY3VycmVudFRpbWU9Yzt2YXIgZD0wLGU9ZnVuY3Rpb24oKXshdGhpcy5hfHwxMDw9ZCsrfHx0aGlzLmEuY3VycmVudFRpbWUhPWJ8fCh0aGlzLmEuY3VycmVudFRpbWU9YyxzZXRUaW1lb3V0KGUsMTAwKSl9LmJpbmQoYSk7c2V0VGltZW91dChlLDEwMCl9XHJcbmZ1bmN0aW9uIFBiKGEsYil7dmFyIGM9YS5jLnJhKCk7aWYoYjxjKXJldHVybiBjO2M9YS5jLmZhKCk7cmV0dXJuIGI+Yz9jOmJ9O2Z1bmN0aW9uIFZiKGEsYixjKXt0aGlzLmE9YTt0aGlzLkw9Yjt0aGlzLkQ9Y31sKFwic2hha2EubWVkaWEuSW5pdFNlZ21lbnRSZWZlcmVuY2VcIixWYik7ZnVuY3Rpb24gRyhhLGIsYyxkLGUsZil7dGhpcy5wb3NpdGlvbj1hO3RoaXMuc3RhcnRUaW1lPWI7dGhpcy5lbmRUaW1lPWM7dGhpcy5hPWQ7dGhpcy5MPWU7dGhpcy5EPWZ9bChcInNoYWthLm1lZGlhLlNlZ21lbnRSZWZlcmVuY2VcIixHKTtmdW5jdGlvbiBXYihhLGIsYyxkLGUsZixnLGgsbSl7dGhpcy5pPWE7dGhpcy5jPWI7dGhpcy5TPWM7dGhpcy5hPWQ7dGhpcy5KPWU7dGhpcy53PWY7dGhpcy5sPWc7dGhpcy5BPWh8fG51bGw7dGhpcy5DPW18fG51bGw7dGhpcy5nPW51bGw7dGhpcy5qPTE7dGhpcy5HPVByb21pc2UucmVzb2x2ZSgpO3RoaXMuaD1bXTt0aGlzLm09e307dGhpcy5iPXt9O3RoaXMuZj10aGlzLnM9dGhpcy52PSExfVdiLnByb3RvdHlwZS5vPWZ1bmN0aW9uKCl7Zm9yKHZhciBhIGluIHRoaXMuYilYYih0aGlzLmJbYV0pO3RoaXMuZz10aGlzLmI9dGhpcy5tPXRoaXMuaD10aGlzLkM9dGhpcy5BPXRoaXMubD10aGlzLnc9dGhpcy5KPXRoaXMuRz10aGlzLmE9dGhpcy5TPXRoaXMuYz10aGlzLmk9bnVsbDt0aGlzLmY9ITA7cmV0dXJuIFByb21pc2UucmVzb2x2ZSgpfTtcclxuV2IucHJvdG90eXBlLmNvbmZpZ3VyZT1mdW5jdGlvbihhKXt0aGlzLmc9YTt0aGlzLmkuaT10aGlzLmoqTWF0aC5tYXgodGhpcy5hLm1pbkJ1ZmZlclRpbWV8fDAsdGhpcy5nLnJlYnVmZmVyaW5nR29hbCl9O1diLnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5KKHRoaXMuYS5wZXJpb2RzW1liKHRoaXMsT2IodGhpcy5pKSldKTtyZXR1cm4gTWEoYSk/UHJvbWlzZS5yZWplY3QobmV3IHEoNSw1MDA1KSk6WmIodGhpcyxhKS50aGVuKGZ1bmN0aW9uKCl7dGhpcy5BJiZ0aGlzLkEoKX0uYmluZCh0aGlzKSl9O2Z1bmN0aW9uICRiKGEpe3JldHVybiBhLmEucGVyaW9kc1tZYihhLE9iKGEuaSkpXX1mdW5jdGlvbiBhYyhhKXtyZXR1cm4gTmEoYS5iLGZ1bmN0aW9uKGEpe3JldHVybiBhLnN0cmVhbX0pfWZ1bmN0aW9uIGJjKGEsYil7dmFyIGM9e307Yy50ZXh0PWI7cmV0dXJuIFpiKGEsYyl9XHJcbmZ1bmN0aW9uIGNjKGEsYixjLGQpe3ZhciBlPWEuYltiXTshZSYmXCJ0ZXh0XCI9PWImJmEuZy5pZ25vcmVUZXh0U3RyZWFtRmFpbHVyZXM/YmMoYSxjKTplJiYoYj1hLmhbZGMoYSxjKV0pJiZiLnhhJiYoYj1hLm1bYy5pZF0pJiZiLnhhJiZlLnN0cmVhbSE9YyYmKGUuc3RyZWFtPWMsZS5MYT0hMCx2b2lkIDA9PWR8fGUuY2F8fGUuZGF8fChlLmhhP2VjKGUsZCk6KFhiKGUpLGZjKGEsZSxkKSkpKX1mdW5jdGlvbiBlYyhhLGIpe2EuY2E/YS5LYT1NYXRoLm1pbihhLkthLGIpOihhLmNhPSEwLGEuS2E9Yil9XHJcbmZ1bmN0aW9uIFpiKGEsYil7dmFyIGM9WWIoYSxPYihhLmkpKSxkPU5hKGIsZnVuY3Rpb24oYSl7cmV0dXJuIGEubWltZVR5cGUrKGEuY29kZWNzPyc7IGNvZGVjcz1cIicrYS5jb2RlY3MrJ1wiJzpcIlwiKX0pO2EuYy5pbml0KGQpO2djKGEpO2Q9QyhiKTtyZXR1cm4gaGMoYSxkKS50aGVuKGZ1bmN0aW9uKCl7aWYoIXRoaXMuZilmb3IodmFyIGEgaW4gYil7dmFyIGQ9YlthXTt0aGlzLmJbYV18fCh0aGlzLmJbYV09e3N0cmVhbTpkLHR5cGU6YSx0YTpudWxsLFY6bnVsbCxMYTohMCx2YTohMSxNYTpjLGVuZE9mU3RyZWFtOiExLGhhOiExLGJhOm51bGwsY2E6ITEsS2E6MCxkYTohMSxhYjohMX0saWModGhpcyx0aGlzLmJbYV0sMCkpfX0uYmluZChhKSl9XHJcbmZ1bmN0aW9uIGpjKGEsYil7dmFyIGM9YS5oW2JdO2lmKGMpcmV0dXJuIGMuSTtjPXtJOm5ldyB3LHhhOiExfTthLmhbYl09Yzt2YXIgZD1hLmEucGVyaW9kc1tiXS5zdHJlYW1TZXRzLm1hcChmdW5jdGlvbihhKXtyZXR1cm4gYS5zdHJlYW1zfSkucmVkdWNlKHQsW10pO2EuRz1hLkcudGhlbihmdW5jdGlvbigpe2lmKCF0aGlzLmYpcmV0dXJuIGhjKHRoaXMsZCl9LmJpbmQoYSkpLnRoZW4oZnVuY3Rpb24oKXt0aGlzLmZ8fCh0aGlzLmhbYl0uSS5yZXNvbHZlKCksdGhpcy5oW2JdLnhhPSEwKX0uYmluZChhKSlbXCJjYXRjaFwiXShmdW5jdGlvbihhKXt0aGlzLmZ8fCh0aGlzLmhbYl0uSS5yZWplY3QoKSxkZWxldGUgdGhpcy5oW2JdLHRoaXMubChhKSl9LmJpbmQoYSkpO3JldHVybiBjLkl9XHJcbmZ1bmN0aW9uIGhjKGEsYil7Zm9yKHZhciBjPVtdLGQ9MDtkPGIubGVuZ3RoOysrZCl7dmFyIGU9YltkXSxmPWEubVtlLmlkXTtmP2MucHVzaChmLkkpOihhLm1bZS5pZF09e0k6bmV3IHcseGE6ITF9LGMucHVzaChlLmNyZWF0ZVNlZ21lbnRJbmRleCgpKSl9cmV0dXJuIFByb21pc2UuYWxsKGMpLnRoZW4oZnVuY3Rpb24oKXtpZighdGhpcy5mKWZvcih2YXIgYT0wO2E8Yi5sZW5ndGg7KythKXt2YXIgYz10aGlzLm1bYlthXS5pZF07Yy54YXx8KGMuSS5yZXNvbHZlKCksYy54YT0hMCl9fS5iaW5kKGEpKVtcImNhdGNoXCJdKGZ1bmN0aW9uKGEpe2lmKCF0aGlzLmYpcmV0dXJuIHRoaXMubVtlLmlkXS5JLnJlamVjdCgpLGRlbGV0ZSB0aGlzLm1bZS5pZF0sUHJvbWlzZS5yZWplY3QoYSl9LmJpbmQoYSkpfWZ1bmN0aW9uIGdjKGEpe3ZhciBiPWEuYS5wcmVzZW50YXRpb25UaW1lbGluZS5aKCk7SW5maW5pdHk+Yj9hLmMuemEoYik6YS5jLnphKE1hdGgucG93KDIsMzIpKX1cclxuV2IucHJvdG90eXBlLlg9ZnVuY3Rpb24oYSl7aWYoIXRoaXMuZiYmIWEuaGEmJm51bGwhPWEuYmEmJiFhLmRhKWlmKGEuYmE9bnVsbCxhLmNhKWZjKHRoaXMsYSxhLkthKTtlbHNle3RyeXt2YXIgYj1rYyh0aGlzLGEpO251bGwhPWImJmljKHRoaXMsYSxiKX1jYXRjaChjKXt0aGlzLmwoYyk7cmV0dXJufWI9Qyh0aGlzLmIpO1JiKHRoaXMuaSxiLnNvbWUoZnVuY3Rpb24oYSl7cmV0dXJuIGEudmF9KSk7bGModGhpcyxhKTtiLmV2ZXJ5KGZ1bmN0aW9uKGEpe3JldHVybiBhLmVuZE9mU3RyZWFtfSkmJnRoaXMuYy5lbmRPZlN0cmVhbSgpfX07XHJcbmZ1bmN0aW9uIGtjKGEsYil7dmFyIGM9T2IoYS5pKSxkO2Q9YS5jO3ZhciBlPWIudHlwZTtcInRleHRcIj09ZT9kPWQuYi5hOihkPUZiKGQsZSksZD0hZHx8MT09ZC5sZW5ndGgmJjFFLTY+ZC5lbmQoMCktZC5zdGFydCgwKT9udWxsOmQubGVuZ3RoP2QuZW5kKGQubGVuZ3RoLTEpOm51bGwpO3ZhciBmPWIudGEmJmIuVj9hLmEucGVyaW9kc1tkYyhhLGIudGEpXS5zdGFydFRpbWUrYi5WLmVuZFRpbWU6YyxlPVliKGEsZiksZz1hLmEucGVyaW9kc1tlXSxoPW1jKGEsYixjLGQsZSksaD1oP2cuc3RhcnRUaW1lK2guc3RhcnRUaW1lLWM6R2IoYS5jLGIudHlwZSxjKSxnPWEuaipNYXRoLm1heChhLmEubWluQnVmZmVyVGltZXx8MCxhLmcucmVidWZmZXJpbmdHb2FsKTtpZihoPj1NYXRoLm1heChnLGEuaiphLmcuYnVmZmVyaW5nR29hbCkpcmV0dXJuIGIudmE9ITEsLjU7aWYoZj49YS5hLnByZXNlbnRhdGlvblRpbWVsaW5lLlooKSlyZXR1cm4gYi52YT0hMSxiLmVuZE9mU3RyZWFtPSEwLG51bGw7XHJcbmIuZW5kT2ZTdHJlYW09ITE7IWEudiYmaDxnfHwxPj1oP2IudmE9ITA6aD49ZyYmKGIudmE9ITEpO2Y9ZGMoYSxiLnN0cmVhbSk7aWYoZSE9ZilyZXR1cm4gYi5NYT1lLG51bGw7aD1tYyhhLGIsYyxkLGYpO2lmKCFoKXJldHVybiAxO25jKGEsYixjLGYsaCk7cmV0dXJuIG51bGx9XHJcbmZ1bmN0aW9uIG1jKGEsYixjLGQsZSl7aWYoYi5WJiZiLnN0cmVhbT09Yi50YSlyZXR1cm4gYz1iLlYucG9zaXRpb24rMSxvYyhhLGIsZSxjKTtjPWIuVj9iLnN0cmVhbS5maW5kU2VnbWVudFBvc2l0aW9uKE1hdGgubWF4KDAsYS5hLnBlcmlvZHNbZGMoYSxiLnRhKV0uc3RhcnRUaW1lK2IuVi5lbmRUaW1lLWEuYS5wZXJpb2RzW2VdLnN0YXJ0VGltZSkpOmIuc3RyZWFtLmZpbmRTZWdtZW50UG9zaXRpb24oTWF0aC5tYXgoMCwoZHx8YyktYS5hLnBlcmlvZHNbZV0uc3RhcnRUaW1lKSk7aWYobnVsbD09YylyZXR1cm4gbnVsbDt2YXIgZj1udWxsO251bGw9PWQmJihmPW9jKGEsYixlLE1hdGgubWF4KDAsYy0xKSkpO3JldHVybiBmfHxvYyhhLGIsZSxjKX1cclxuZnVuY3Rpb24gb2MoYSxiLGMsZCl7Yz1hLmEucGVyaW9kc1tjXTtiPWIuc3RyZWFtLmdldFNlZ21lbnRSZWZlcmVuY2UoZCk7aWYoIWIpcmV0dXJuIG51bGw7YT1hLmEucHJlc2VudGF0aW9uVGltZWxpbmU7ZD1hLmZhKCk7cmV0dXJuIGMuc3RhcnRUaW1lK2IuZW5kVGltZTxhLnNhKCl8fGMuc3RhcnRUaW1lK2Iuc3RhcnRUaW1lPmQ/bnVsbDpifVxyXG5mdW5jdGlvbiBuYyhhLGIsYyxkLGUpe3ZhciBmPWEuYS5wZXJpb2RzW2RdLGc9Yi5zdHJlYW0saD1hLmEucGVyaW9kc1tkKzFdLG09bnVsbCxtPWg/aC5zdGFydFRpbWU6YS5hLnByZXNlbnRhdGlvblRpbWVsaW5lLlooKTtkPXBjKGEsYixkLG0pO2IuaGE9ITA7Yi5MYT0hMTtoPXFjKGEsZSk7UHJvbWlzZS5hbGwoW2QsaF0pLnRoZW4oZnVuY3Rpb24oYSl7aWYoIXRoaXMuZiYmIXRoaXMucylyZXR1cm4gcmModGhpcyxiLGMsZixnLGUsYVsxXSl9LmJpbmQoYSkpLnRoZW4oZnVuY3Rpb24oKXt0aGlzLmZ8fHRoaXMuc3x8KGIuaGE9ITEsYi5hYj0hMSxpYyh0aGlzLGIsMCksc2ModGhpcyxnKSl9LmJpbmQoYSkpW1wiY2F0Y2hcIl0oZnVuY3Rpb24oYSl7dGhpcy5mfHx0aGlzLnN8fChiLmhhPSExLDEwMDE9PWEuY29kZXx8MTAwMj09YS5jb2RlfHwxMDAzPT1hLmNvZGU/XCJ0ZXh0XCI9PWIudHlwZSYmdGhpcy5nLmlnbm9yZVRleHRTdHJlYW1GYWlsdXJlcyYmMTAwMT09YS5jb2RlP2RlbGV0ZSB0aGlzLmIudGV4dDpcclxuKHRoaXMubChhKSxpYyh0aGlzLGIsNCkpOjMwMTc9PWEuY29kZT90Yyh0aGlzLGIsYSk6dGhpcy5sKGEpKX0uYmluZChhKSl9ZnVuY3Rpb24gdGMoYSxiLGMpe2lmKCFDKGEuYikuc29tZShmdW5jdGlvbihhKXtyZXR1cm4gYSE9YiYmYS5hYn0pKXt2YXIgZD1NYXRoLnJvdW5kKDEwMCphLmopO2lmKDIwPGQpYS5qLT0uMjtlbHNlIGlmKDQ8ZClhLmotPS4wNDtlbHNle2Eucz0hMDthLmwoYyk7cmV0dXJufWIuYWI9ITB9aWMoYSxiLGIudmE/MDo0KX1cclxuZnVuY3Rpb24gcGMoYSxiLGMsZCl7aWYoIWIuTGEpcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO2M9SmIoYS5jLGIudHlwZSxhLmEucGVyaW9kc1tjXS5zdGFydFRpbWUtYi5zdHJlYW0ucHJlc2VudGF0aW9uVGltZU9mZnNldCk7ZD1udWxsIT1kP0tiKGEuYyxiLnR5cGUsZCk6UHJvbWlzZS5yZXNvbHZlKCk7aWYoIWIuc3RyZWFtLmluaXRTZWdtZW50UmVmZXJlbmNlKXJldHVybiBQcm9taXNlLmFsbChbYyxkXSk7YT1xYyhhLGIuc3RyZWFtLmluaXRTZWdtZW50UmVmZXJlbmNlKS50aGVuKGZ1bmN0aW9uKGEpe2lmKCF0aGlzLmYpcmV0dXJuIEhiKHRoaXMuYyxiLnR5cGUsYSxudWxsLG51bGwpfS5iaW5kKGEpKVtcImNhdGNoXCJdKGZ1bmN0aW9uKGEpe2IuTGE9ITA7cmV0dXJuIFByb21pc2UucmVqZWN0KGEpfSk7cmV0dXJuIFByb21pc2UuYWxsKFtjLGQsYV0pfVxyXG5mdW5jdGlvbiByYyhhLGIsYyxkLGUsZixnKXtyZXR1cm4gdWMoYSxiLGMpLnRoZW4oZnVuY3Rpb24oKXtpZighdGhpcy5mKXJldHVybiBIYih0aGlzLmMsYi50eXBlLGcsZi5zdGFydFRpbWUrZC5zdGFydFRpbWUsZi5lbmRUaW1lK2Quc3RhcnRUaW1lKX0uYmluZChhKSkudGhlbihmdW5jdGlvbigpe2lmKCF0aGlzLmYpcmV0dXJuIGIudGE9ZSxiLlY9ZixQcm9taXNlLnJlc29sdmUoKX0uYmluZChhKSl9ZnVuY3Rpb24gdWMoYSxiLGMpe3ZhciBkPUViKGEuYyxiLnR5cGUpO2lmKG51bGw9PWQpcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO2M9Yy1kLWEuZy5idWZmZXJCZWhpbmQ7cmV0dXJuIDA+PWM/UHJvbWlzZS5yZXNvbHZlKCk6YS5jLnJlbW92ZShiLnR5cGUsZCxkK2MpLnRoZW4oZnVuY3Rpb24oKXt9LmJpbmQoYSkpfVxyXG5mdW5jdGlvbiBzYyhhLGIpe2lmKCFhLnYmJihhLnY9QyhhLmIpLmV2ZXJ5KGZ1bmN0aW9uKGEpe3JldHVybiFhLmNhJiYhYS5kYSYmYS5WfSksYS52KSl7dmFyIGM9ZGMoYSxiKTthLmhbY118fGpjKGEsYykudGhlbihmdW5jdGlvbigpe3RoaXMudygpfS5iaW5kKGEpKVtcImNhdGNoXCJdKHYpO2ZvcihjPTA7YzxhLmEucGVyaW9kcy5sZW5ndGg7KytjKWpjKGEsYylbXCJjYXRjaFwiXSh2KTthLkMmJmEuQygpfX1cclxuZnVuY3Rpb24gbGMoYSxiKXtpZihiLk1hIT1kYyhhLGIuc3RyZWFtKSl7dmFyIGM9Yi5NYSxkPUMoYS5iKTtkLmV2ZXJ5KGZ1bmN0aW9uKGEpe3JldHVybiBhLk1hPT1jfSkmJmQuZXZlcnkodmMpJiZqYyhhLGMpLnRoZW4oZnVuY3Rpb24oKXtpZighdGhpcy5mKXt2YXIgYT10aGlzLkoodGhpcy5hLnBlcmlvZHNbY10pLGI7Zm9yKGIgaW4gdGhpcy5iKWlmKCFhW2JdKXt0aGlzLmwobmV3IHEoNSw1MDA1KSk7cmV0dXJufWZvcihiIGluIGEpaWYoISh0aGlzLmJbYl18fFwidGV4dFwiPT1iJiZ0aGlzLmcuaWdub3JlVGV4dFN0cmVhbUZhaWx1cmVzKSl7dGhpcy5sKG5ldyBxKDUsNTAwNSkpO3JldHVybn1mb3IoYiBpbiB0aGlzLmIpe2NjKHRoaXMsYixhW2JdKTt2YXIgZD10aGlzLmJbYl07dmMoZCkmJmljKHRoaXMsZCwwKX10aGlzLncoKX19LmJpbmQoYSkpW1wiY2F0Y2hcIl0odil9fWZ1bmN0aW9uIHZjKGEpe3JldHVybiFhLmhhJiZudWxsPT1hLmJhJiYhYS5jYSYmIWEuZGF9XHJcbmZ1bmN0aW9uIFliKGEsYil7Zm9yKHZhciBjPWEuYS5wZXJpb2RzLmxlbmd0aC0xOzA8YzstLWMpaWYoYj49YS5hLnBlcmlvZHNbY10uc3RhcnRUaW1lKXJldHVybiBjO3JldHVybiAwfWZ1bmN0aW9uIGRjKGEsYil7Zm9yKHZhciBjPTA7YzxhLmEucGVyaW9kcy5sZW5ndGg7KytjKWZvcih2YXIgZD1hLmEucGVyaW9kc1tjXSxlPTA7ZTxkLnN0cmVhbVNldHMubGVuZ3RoOysrZSlpZigwPD1kLnN0cmVhbVNldHNbZV0uc3RyZWFtcy5pbmRleE9mKGIpKXJldHVybiBjO3JldHVybi0xfWZ1bmN0aW9uIHFjKGEsYil7dmFyIGM9SGEoYi5hKCksYS5nLnJldHJ5UGFyYW1ldGVycyk7aWYoYi5MfHxudWxsIT1iLkQpe3ZhciBkPVwiYnl0ZXM9XCIrYi5MK1wiLVwiO251bGwhPWIuRCYmKGQrPWIuRCk7Yy5oZWFkZXJzLlJhbmdlPWR9cmV0dXJuIGEuUy5yZXF1ZXN0KDEsYykudGhlbihmdW5jdGlvbihhKXtyZXR1cm4gYS5kYXRhfSl9XHJcbmZ1bmN0aW9uIGZjKGEsYixjKXtiLmNhPSExO2IuZGE9ITA7dmFyIGQ9T2IoYS5pKStjLGU9YS5jLlooKTsoYz9hLmMucmVtb3ZlKGIudHlwZSxkLGUpOmEuYy5jbGVhcihiLnR5cGUpKS50aGVuKGZ1bmN0aW9uKCl7dGhpcy5mfHwoYi50YT1udWxsLGIuVj1udWxsLGIuZGE9ITEsaWModGhpcyxiLDApKX0uYmluZChhKSl9ZnVuY3Rpb24gaWMoYSxiLGMpe2IuYmE9d2luZG93LnNldFRpbWVvdXQoYS5YLmJpbmQoYSxiKSwxRTMqYyl9ZnVuY3Rpb24gWGIoYSl7bnVsbCE9YS5iYSYmKHdpbmRvdy5jbGVhclRpbWVvdXQoYS5iYSksYS5iYT1udWxsKX07ZnVuY3Rpb24gd2MoKXt0aGlzLmE9UHJvbWlzZS5yZXNvbHZlKCk7dGhpcy5jPXRoaXMuYj10aGlzLmY9ITE7dGhpcy5nPW5ldyBQcm9taXNlKGZ1bmN0aW9uKGEpe3RoaXMuaD1hfS5iaW5kKHRoaXMpKX13Yy5wcm90b3R5cGUudGhlbj1mdW5jdGlvbihhKXt0aGlzLmE9dGhpcy5hLnRoZW4oYSkudGhlbihmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5jPyh0aGlzLmgoKSxQcm9taXNlLnJlamVjdCh0aGlzLmkpKTpQcm9taXNlLnJlc29sdmUoYSl9LmJpbmQodGhpcykpO3JldHVybiB0aGlzfTtmdW5jdGlvbiB4YyhhKXthLmZ8fChhLmE9YS5hLnRoZW4oZnVuY3Rpb24oYSl7dGhpcy5iPSEwO3JldHVybiBQcm9taXNlLnJlc29sdmUoYSl9LmJpbmQoYSksZnVuY3Rpb24oYSl7dGhpcy5iPSEwO3JldHVybiBQcm9taXNlLnJlamVjdChhKX0uYmluZChhKSkpO2EuZj0hMDtyZXR1cm4gYS5hfVxyXG5mdW5jdGlvbiB5YyhhLGIpe2lmKGEuYilyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7YS5jPSEwO2EuaT1iO3JldHVybiBhLmd9O2Z1bmN0aW9uIHpjKGEsYixjLGQsZSl7dmFyIGY9ZSBpbiBkLGc7Zm9yKGcgaW4gYil7dmFyIGg9ZStcIi5cIitnLG09Zj9kW2VdOmNbZ10sbj0hIXtcIi5hYnIubWFuYWdlclwiOiEwfVtoXTtpZihmfHxnIGluIGEpdm9pZCAwPT09YltnXT92b2lkIDA9PT1tfHxmP2RlbGV0ZSBhW2ddOmFbZ109bTpuP2FbZ109YltnXTpcIm9iamVjdFwiPT10eXBlb2YgYVtnXSYmXCJvYmplY3RcIj09dHlwZW9mIGJbZ10/emMoYVtnXSxiW2ddLG0sZCxoKTp0eXBlb2YgYltnXT09dHlwZW9mIG0mJihhW2ddPWJbZ10pfX07ZnVuY3Rpb24gSChhLGIpe3ZhciBjPWJ8fHt9LGQ7Zm9yKGQgaW4gYyl0aGlzW2RdPWNbZF07dGhpcy5kZWZhdWx0UHJldmVudGVkPXRoaXMuY2FuY2VsYWJsZT10aGlzLmJ1YmJsZXM9ITE7dGhpcy50aW1lU3RhbXA9d2luZG93LnBlcmZvcm1hbmNlP3dpbmRvdy5wZXJmb3JtYW5jZS5ub3coKTpEYXRlLm5vdygpO3RoaXMudHlwZT1hO3RoaXMuaXNUcnVzdGVkPSExO3RoaXMudGFyZ2V0PXRoaXMuY3VycmVudFRhcmdldD1udWxsO3RoaXMuYT0hMX1ILnByb3RvdHlwZS5wcmV2ZW50RGVmYXVsdD1mdW5jdGlvbigpe307SC5wcm90b3R5cGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uPWZ1bmN0aW9uKCl7dGhpcy5hPSEwfTtILnByb3RvdHlwZS5zdG9wUHJvcGFnYXRpb249ZnVuY3Rpb24oKXt9O2Z1bmN0aW9uIHAoKXt0aGlzLkFhPW5ldyBKYTt0aGlzLlM9dGhpc31wLnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyPWZ1bmN0aW9uKGEsYil7dGhpcy5BYS5wdXNoKGEsYil9O3AucHJvdG90eXBlLnJlbW92ZUV2ZW50TGlzdGVuZXI9ZnVuY3Rpb24oYSxiKXt0aGlzLkFhLnJlbW92ZShhLGIpfTtwLnByb3RvdHlwZS5kaXNwYXRjaEV2ZW50PWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj10aGlzLkFhLmdldChhLnR5cGUpfHxbXSxjPTA7YzxiLmxlbmd0aDsrK2Mpe2EudGFyZ2V0PXRoaXMuUzthLmN1cnJlbnRUYXJnZXQ9dGhpcy5TO3ZhciBkPWJbY107dHJ5e2QuaGFuZGxlRXZlbnQ/ZC5oYW5kbGVFdmVudChhKTpkLmNhbGwodGhpcyxhKX1jYXRjaChlKXt9aWYoYS5hKWJyZWFrfXJldHVybiBhLmRlZmF1bHRQcmV2ZW50ZWR9O2Z1bmN0aW9uIEFjKGEsYixjKXtyZXR1cm4gYz09Ynx8YT49QmMmJmM9PWIuc3BsaXQoXCItXCIpWzBdfHxhPj1DYyYmYy5zcGxpdChcIi1cIilbMF09PWIuc3BsaXQoXCItXCIpWzBdPyEwOiExfXZhciBCYz0xLENjPTI7ZnVuY3Rpb24gRGMoYSl7YT1hLnRvTG93ZXJDYXNlKCkuc3BsaXQoXCItXCIpO3ZhciBiPUVjW2FbMF1dO2ImJihhWzBdPWIpO3JldHVybiBhLmpvaW4oXCItXCIpfVxyXG52YXIgRWM9e2FhcjpcImFhXCIsYWJrOlwiYWJcIixhZnI6XCJhZlwiLGFrYTpcImFrXCIsYWxiOlwic3FcIixhbWg6XCJhbVwiLGFyYTpcImFyXCIsYXJnOlwiYW5cIixhcm06XCJoeVwiLGFzbTpcImFzXCIsYXZhOlwiYXZcIixhdmU6XCJhZVwiLGF5bTpcImF5XCIsYXplOlwiYXpcIixiYWs6XCJiYVwiLGJhbTpcImJtXCIsYmFxOlwiZXVcIixiZWw6XCJiZVwiLGJlbjpcImJuXCIsYmloOlwiYmhcIixiaXM6XCJiaVwiLGJvZDpcImJvXCIsYm9zOlwiYnNcIixicmU6XCJiclwiLGJ1bDpcImJnXCIsYnVyOlwibXlcIixjYXQ6XCJjYVwiLGNlczpcImNzXCIsY2hhOlwiY2hcIixjaGU6XCJjZVwiLGNoaTpcInpoXCIsY2h1OlwiY3VcIixjaHY6XCJjdlwiLGNvcjpcImt3XCIsY29zOlwiY29cIixjcmU6XCJjclwiLGN5bTpcImN5XCIsY3plOlwiY3NcIixkYW46XCJkYVwiLGRldTpcImRlXCIsZGl2OlwiZHZcIixkdXQ6XCJubFwiLGR6bzpcImR6XCIsZWxsOlwiZWxcIixlbmc6XCJlblwiLGVwbzpcImVvXCIsZXN0OlwiZXRcIixldXM6XCJldVwiLGV3ZTpcImVlXCIsZmFvOlwiZm9cIixmYXM6XCJmYVwiLGZpajpcImZqXCIsZmluOlwiZmlcIixmcmE6XCJmclwiLGZyZTpcImZyXCIsXHJcbmZyeTpcImZ5XCIsZnVsOlwiZmZcIixnZW86XCJrYVwiLGdlcjpcImRlXCIsZ2xhOlwiZ2RcIixnbGU6XCJnYVwiLGdsZzpcImdsXCIsZ2x2OlwiZ3ZcIixncmU6XCJlbFwiLGdybjpcImduXCIsZ3VqOlwiZ3VcIixoYXQ6XCJodFwiLGhhdTpcImhhXCIsaGViOlwiaGVcIixoZXI6XCJoelwiLGhpbjpcImhpXCIsaG1vOlwiaG9cIixocnY6XCJoclwiLGh1bjpcImh1XCIsaHllOlwiaHlcIixpYm86XCJpZ1wiLGljZTpcImlzXCIsaWRvOlwiaW9cIixpaWk6XCJpaVwiLGlrdTpcIml1XCIsaWxlOlwiaWVcIixpbmE6XCJpYVwiLGluZDpcImlkXCIsaXBrOlwiaWtcIixpc2w6XCJpc1wiLGl0YTpcIml0XCIsamF2OlwianZcIixqcG46XCJqYVwiLGthbDpcImtsXCIsa2FuOlwia25cIixrYXM6XCJrc1wiLGthdDpcImthXCIsa2F1Olwia3JcIixrYXo6XCJra1wiLGtobTpcImttXCIsa2lrOlwia2lcIixraW46XCJyd1wiLGtpcjpcImt5XCIsa29tOlwia3ZcIixrb246XCJrZ1wiLGtvcjpcImtvXCIsa3VhOlwia2pcIixrdXI6XCJrdVwiLGxhbzpcImxvXCIsbGF0OlwibGFcIixsYXY6XCJsdlwiLGxpbTpcImxpXCIsbGluOlwibG5cIixsaXQ6XCJsdFwiLGx0ejpcImxiXCIsbHViOlwibHVcIixcclxubHVnOlwibGdcIixtYWM6XCJta1wiLG1haDpcIm1oXCIsbWFsOlwibWxcIixtYW86XCJtaVwiLG1hcjpcIm1yXCIsbWF5OlwibXNcIixta2Q6XCJta1wiLG1sZzpcIm1nXCIsbWx0OlwibXRcIixtb246XCJtblwiLG1yaTpcIm1pXCIsbXNhOlwibXNcIixteWE6XCJteVwiLG5hdTpcIm5hXCIsbmF2OlwibnZcIixuYmw6XCJuclwiLG5kZTpcIm5kXCIsbmRvOlwibmdcIixuZXA6XCJuZVwiLG5sZDpcIm5sXCIsbm5vOlwibm5cIixub2I6XCJuYlwiLG5vcjpcIm5vXCIsbnlhOlwibnlcIixvY2k6XCJvY1wiLG9qaTpcIm9qXCIsb3JpOlwib3JcIixvcm06XCJvbVwiLG9zczpcIm9zXCIscGFuOlwicGFcIixwZXI6XCJmYVwiLHBsaTpcInBpXCIscG9sOlwicGxcIixwb3I6XCJwdFwiLHB1czpcInBzXCIscXVlOlwicXVcIixyb2g6XCJybVwiLHJvbjpcInJvXCIscnVtOlwicm9cIixydW46XCJyblwiLHJ1czpcInJ1XCIsc2FnOlwic2dcIixzYW46XCJzYVwiLHNpbjpcInNpXCIsc2xrOlwic2tcIixzbG86XCJza1wiLHNsdjpcInNsXCIsc21lOlwic2VcIixzbW86XCJzbVwiLHNuYTpcInNuXCIsc25kOlwic2RcIixzb206XCJzb1wiLHNvdDpcInN0XCIsc3BhOlwiZXNcIixzcWk6XCJzcVwiLFxyXG5zcmQ6XCJzY1wiLHNycDpcInNyXCIsc3N3Olwic3NcIixzdW46XCJzdVwiLHN3YTpcInN3XCIsc3dlOlwic3ZcIix0YWg6XCJ0eVwiLHRhbTpcInRhXCIsdGF0OlwidHRcIix0ZWw6XCJ0ZVwiLHRnazpcInRnXCIsdGdsOlwidGxcIix0aGE6XCJ0aFwiLHRpYjpcImJvXCIsdGlyOlwidGlcIix0b246XCJ0b1wiLHRzbjpcInRuXCIsdHNvOlwidHNcIix0dWs6XCJ0a1wiLHR1cjpcInRyXCIsdHdpOlwidHdcIix1aWc6XCJ1Z1wiLHVrcjpcInVrXCIsdXJkOlwidXJcIix1emI6XCJ1elwiLHZlbjpcInZlXCIsdmllOlwidmlcIix2b2w6XCJ2b1wiLHdlbDpcImN5XCIsd2xuOlwid2FcIix3b2w6XCJ3b1wiLHhobzpcInhoXCIseWlkOlwieWlcIix5b3I6XCJ5b1wiLHpoYTpcInphXCIsemhvOlwiemhcIix6dWw6XCJ6dVwifTtmdW5jdGlvbiBGYyhhLGIsYyl7dmFyIGQ9ITE7YS5zdHJlYW1TZXRzLmZvckVhY2goZnVuY3Rpb24oYSl7YS5zdHJlYW1zLmZvckVhY2goZnVuY3Rpb24oZil7dmFyIGc9Zi5hbGxvd2VkQnlBcHBsaWNhdGlvbjtmLmFsbG93ZWRCeUFwcGxpY2F0aW9uPSEwO2lmKFwidmlkZW9cIj09YS50eXBlKXtpZihmLndpZHRoPGIubWluV2lkdGh8fGYud2lkdGg+Yi5tYXhXaWR0aHx8Zi53aWR0aD5jLndpZHRofHxmLmhlaWdodDxiLm1pbkhlaWdodHx8Zi5oZWlnaHQ+Yi5tYXhIZWlnaHR8fGYuaGVpZ2h0PmMuaGVpZ2h0fHxmLndpZHRoKmYuaGVpZ2h0PGIubWluUGl4ZWxzfHxmLndpZHRoKmYuaGVpZ2h0PmIubWF4UGl4ZWxzfHxmLmJhbmR3aWR0aDxiLm1pblZpZGVvQmFuZHdpZHRofHxmLmJhbmR3aWR0aD5iLm1heFZpZGVvQmFuZHdpZHRoKWYuYWxsb3dlZEJ5QXBwbGljYXRpb249ITF9ZWxzZVwiYXVkaW9cIj09YS50eXBlJiYoZi5iYW5kd2lkdGg8Yi5taW5BdWRpb0JhbmR3aWR0aHx8Zi5iYW5kd2lkdGg+XHJcbmIubWF4QXVkaW9CYW5kd2lkdGgpJiYoZi5hbGxvd2VkQnlBcHBsaWNhdGlvbj0hMSk7ZyE9Zi5hbGxvd2VkQnlBcHBsaWNhdGlvbiYmKGQ9ITApfSl9KTtyZXR1cm4gZH1cclxuZnVuY3Rpb24gR2MoYSxiLGMpe3ZhciBkPVwiXCIsZT1udWxsO2EmJmEuQSYmKGQ9YS5rZXlTeXN0ZW0oKSxlPWEubSk7Zm9yKGE9MDthPGMuc3RyZWFtU2V0cy5sZW5ndGg7KythKXt2YXIgZj1jLnN0cmVhbVNldHNbYV07aWYoZCYmZi5kcm1JbmZvcy5sZW5ndGgmJiFmLmRybUluZm9zLnNvbWUoZnVuY3Rpb24oYSl7cmV0dXJuIGEua2V5U3lzdGVtPT1kfSkpYy5zdHJlYW1TZXRzLnNwbGljZShhLDEpLC0tYTtlbHNle2Zvcih2YXIgZz1iW2YudHlwZV0saD0wO2g8Zi5zdHJlYW1zLmxlbmd0aDsrK2gpe3ZhciBtPWYuc3RyZWFtc1toXSxuPW0ubWltZVR5cGU7bS5jb2RlY3MmJihuKz0nOyBjb2RlY3M9XCInK20uY29kZWNzKydcIicpO0Vbbl18fE1lZGlhU291cmNlLmlzVHlwZVN1cHBvcnRlZChuKT9lJiZtLmVuY3J5cHRlZCYmMD5lLmluZGV4T2Yobik/KGYuc3RyZWFtcy5zcGxpY2UoaCwxKSwtLWgpOiFnfHxtLm1pbWVUeXBlPT1nLm1pbWVUeXBlJiZtLmNvZGVjcy5zcGxpdChcIi5cIilbMF09PVxyXG5nLmNvZGVjcy5zcGxpdChcIi5cIilbMF18fChmLnN0cmVhbXMuc3BsaWNlKGgsMSksLS1oKTooZi5zdHJlYW1zLnNwbGljZShoLDEpLC0taCl9Zi5zdHJlYW1zLmxlbmd0aHx8KGMuc3RyZWFtU2V0cy5zcGxpY2UoYSwxKSwtLWEpfX19ZnVuY3Rpb24gSGMoYSxiKXtyZXR1cm4gYS5zdHJlYW1TZXRzLm1hcChmdW5jdGlvbihhKXt2YXIgZD1iP2JbYS50eXBlXTpudWxsO3JldHVybiBhLnN0cmVhbXMuZmlsdGVyKGZ1bmN0aW9uKGEpe3JldHVybiBhLmFsbG93ZWRCeUFwcGxpY2F0aW9uJiZhLmFsbG93ZWRCeUtleVN5c3RlbX0pLm1hcChmdW5jdGlvbihiKXtyZXR1cm57aWQ6Yi5pZCxhY3RpdmU6ZD09Yix0eXBlOmEudHlwZSxiYW5kd2lkdGg6Yi5iYW5kd2lkdGgsbGFuZ3VhZ2U6YS5sYW5ndWFnZSxraW5kOmIua2luZHx8bnVsbCx3aWR0aDpiLndpZHRofHxudWxsLGhlaWdodDpiLmhlaWdodHx8bnVsbH19KX0pLnJlZHVjZSh0LFtdKX1cclxuZnVuY3Rpb24gSWMoYSxiKXtmb3IodmFyIGM9MDtjPGEuc3RyZWFtU2V0cy5sZW5ndGg7YysrKWZvcih2YXIgZD1hLnN0cmVhbVNldHNbY10sZT0wO2U8ZC5zdHJlYW1zLmxlbmd0aDtlKyspe3ZhciBmPWQuc3RyZWFtc1tlXTtpZihmLmlkPT1iLmlkKXJldHVybntzdHJlYW06ZixUYzpkfX1yZXR1cm4gbnVsbH1mdW5jdGlvbiBKYyhhKXtyZXR1cm4gYS5zdHJlYW1zLnNvbWUoZnVuY3Rpb24oYSl7cmV0dXJuIGEuYWxsb3dlZEJ5QXBwbGljYXRpb24mJmEuYWxsb3dlZEJ5S2V5U3lzdGVtfSl9XHJcbmZ1bmN0aW9uIEtjKGEsYixjKXt2YXIgZD17fTthLnN0cmVhbVNldHMuZm9yRWFjaChmdW5jdGlvbihhKXshSmMoYSl8fGEudHlwZSBpbiBkfHwoZFthLnR5cGVdPWEpfSk7dmFyIGU9MDthLnN0cmVhbVNldHMuZm9yRWFjaChmdW5jdGlvbihhKXtpZihKYyhhKSYmXCJ2aWRlb1wiPT1hLnR5cGUpe3ZhciBiPUxjKGEpO2I+ZT8oZT1iLGQudmlkZW89YSk6Yj09ZSYmTWMoYSk8TWMoZC52aWRlbykmJihkLnZpZGVvPWEpfX0pO2Euc3RyZWFtU2V0cy5mb3JFYWNoKGZ1bmN0aW9uKGEpe0pjKGEpJiZhLnByaW1hcnkmJihkW2EudHlwZV0ucHJpbWFyeT9NYyhhKTxNYyhkW2EudHlwZV0pJiYoZFthLnR5cGVdPWEpOmRbYS50eXBlXT1hKX0pO1tDYyxCYywwXS5mb3JFYWNoKGZ1bmN0aW9uKGUpe2Euc3RyZWFtU2V0cy5mb3JFYWNoKGZ1bmN0aW9uKGEpe2lmKEpjKGEpKXt2YXIgaDtcImF1ZGlvXCI9PWEudHlwZT9oPWIucHJlZmVycmVkQXVkaW9MYW5ndWFnZTpcInRleHRcIj09YS50eXBlJiYoaD1iLnByZWZlcnJlZFRleHRMYW5ndWFnZSk7XHJcbmlmKGgpe2g9RGMoaCk7dmFyIG09RGMoYS5sYW5ndWFnZSk7QWMoZSxoLG0pJiYoYS5sYW5ndWFnZT09ZFthLnR5cGVdLmxhbmd1YWdlP01jKGEpPE1jKGRbYS50eXBlXSkmJihkW2EudHlwZV09YSk6ZFthLnR5cGVdPWEsYyYmKGNbYS50eXBlXT0hMCkpfX19KX0pO3JldHVybiBkfWZ1bmN0aW9uIE1jKGEpe3ZhciBiPTA7aWYoIWF8fDE+YS5zdHJlYW1zLmxlbmd0aClyZXR1cm4gYjthLnN0cmVhbXMuZm9yRWFjaChmdW5jdGlvbihhKXtiKz1hLmJhbmR3aWR0aH0pO3JldHVybiBiL2Euc3RyZWFtcy5sZW5ndGh9ZnVuY3Rpb24gTGMoYSl7dmFyIGI9MDtpZighYSlyZXR1cm4gYjthLnN0cmVhbXMuZm9yRWFjaChmdW5jdGlvbihhKXthLmhlaWdodD5iJiYoYj1hLmhlaWdodCl9KTtyZXR1cm4gYn07ZnVuY3Rpb24gSShhLGIpe3AuY2FsbCh0aGlzKTt0aGlzLnc9ITE7dGhpcy5mPWE7dGhpcy5tPW51bGw7dGhpcy52PW5ldyB6O3RoaXMuaGI9bmV3IGphO3RoaXMubmE9dGhpcy5jPXRoaXMubD10aGlzLmI9dGhpcy5pPXRoaXMub2E9dGhpcy5HPXRoaXMuQT10aGlzLmc9dGhpcy5oPW51bGw7dGhpcy5LYj0xRTk7dGhpcy5tYT1bXTt0aGlzLlBhPSExO3RoaXMucWE9ITA7dGhpcy5qPW51bGw7dGhpcy5zPXt9O3RoaXMuYT1OYyh0aGlzKTt0aGlzLkJhPXt3aWR0aDpJbmZpbml0eSxoZWlnaHQ6SW5maW5pdHl9O3RoaXMuQz1bXTt0aGlzLlg9dGhpcy5KPXRoaXMucGE9MDtiJiZiKHRoaXMpO3RoaXMuaD1uZXcgeSh0aGlzLkxjLmJpbmQodGhpcykpO3RoaXMub2E9T2ModGhpcyk7Zm9yKHZhciBjPTA7Yzx0aGlzLmYudGV4dFRyYWNrcy5sZW5ndGg7KytjKXt2YXIgZD10aGlzLmYudGV4dFRyYWNrc1tjXTtkLm1vZGU9XCJkaXNhYmxlZFwiO1wiU2hha2EgUGxheWVyIFRleHRUcmFja1wiPT1kLmxhYmVsJiZcclxuKHRoaXMubT1kKX10aGlzLm18fCh0aGlzLm09dGhpcy5mLmFkZFRleHRUcmFjayhcInN1YnRpdGxlc1wiLFwiU2hha2EgUGxheWVyIFRleHRUcmFja1wiKSk7dGhpcy5tLm1vZGU9XCJoaWRkZW5cIjtCKHRoaXMudix0aGlzLmYsXCJlcnJvclwiLHRoaXMubGMuYmluZCh0aGlzKSl9YmEoSSk7bChcInNoYWthLlBsYXllclwiLEkpO0kucHJvdG90eXBlLm89ZnVuY3Rpb24oKXt0aGlzLnc9ITA7dmFyIGE9UHJvbWlzZS5yZXNvbHZlKCk7dGhpcy5qJiYoYT15Yyh0aGlzLmosbmV3IHEoNyw3RTMpKSk7cmV0dXJuIGEudGhlbihmdW5jdGlvbigpe3ZhciBhPVByb21pc2UuYWxsKFtQYyh0aGlzKSx0aGlzLnY/dGhpcy52Lm8oKTpudWxsLHRoaXMuaD90aGlzLmgubygpOm51bGxdKTt0aGlzLmE9dGhpcy5oPXRoaXMuaGI9dGhpcy52PXRoaXMubT10aGlzLmY9bnVsbDtyZXR1cm4gYX0uYmluZCh0aGlzKSl9O0kucHJvdG90eXBlLmRlc3Ryb3k9SS5wcm90b3R5cGUubztJLnZlcnNpb249XCJ2Mi4wLjBcIjtcclxudmFyIFFjPXt9O0kucmVnaXN0ZXJTdXBwb3J0UGx1Z2luPWZ1bmN0aW9uKGEsYil7UWNbYV09Yn07SS5pc0Jyb3dzZXJTdXBwb3J0ZWQ9ZnVuY3Rpb24oKXtyZXR1cm4hIXdpbmRvdy5Qcm9taXNlJiYhIXdpbmRvdy5VaW50OEFycmF5JiYhIUFycmF5LnByb3RvdHlwZS5mb3JFYWNoJiYhIXdpbmRvdy5NZWRpYVNvdXJjZSYmISF3aW5kb3cuTWVkaWFLZXlzJiYhIXdpbmRvdy5uYXZpZ2F0b3ImJiEhd2luZG93Lm5hdmlnYXRvci5yZXF1ZXN0TWVkaWFLZXlTeXN0ZW1BY2Nlc3MmJiEhd2luZG93Lk1lZGlhS2V5U3lzdGVtQWNjZXNzJiYhIXdpbmRvdy5NZWRpYUtleVN5c3RlbUFjY2Vzcy5wcm90b3R5cGUuZ2V0Q29uZmlndXJhdGlvbn07SS5wcm9iZVN1cHBvcnQ9ZnVuY3Rpb24oKXtyZXR1cm4gcWIoKS50aGVuKGZ1bmN0aW9uKGEpe3ZhciBiPXRiKCksYz1EYigpO2E9e21hbmlmZXN0OmIsbWVkaWE6Yyxkcm06YX07Zm9yKHZhciBkIGluIFFjKWFbZF09UWNbZF0oKTtyZXR1cm4gYX0pfTtcclxuSS5wcm90b3R5cGUubG9hZD1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9dGhpcy5nYigpLGU9bmV3IHdjO3RoaXMuaj1lO3RoaXMuZGlzcGF0Y2hFdmVudChuZXcgSChcImxvYWRpbmdcIikpO3JldHVybiB4YyhlLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gZH0pLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gdWIoYSx0aGlzLmgsdGhpcy5hLm1hbmlmZXN0LnJldHJ5UGFyYW1ldGVycyxjKX0uYmluZCh0aGlzKSkudGhlbihmdW5jdGlvbihiKXt0aGlzLmw9bmV3IGI7dGhpcy5sLmNvbmZpZ3VyZSh0aGlzLmEubWFuaWZlc3QpO3JldHVybiB0aGlzLmwuc3RhcnQoYSx0aGlzLmgsdGhpcy5OYS5iaW5kKHRoaXMpLHRoaXMuYWEuYmluZCh0aGlzKSx0aGlzLkljLmJpbmQodGhpcykpfS5iaW5kKHRoaXMpKS50aGVuKGZ1bmN0aW9uKGIpe3RoaXMuYz1iO3RoaXMubmE9YTt0aGlzLmc9bmV3IGFiKHRoaXMuaCx0aGlzLmFhLmJpbmQodGhpcyksdGhpcy5KYy5iaW5kKHRoaXMpKTt0aGlzLmcuY29uZmlndXJlKHRoaXMuYS5kcm0pO1xyXG5yZXR1cm4gdGhpcy5nLmluaXQoYiwhMSl9LmJpbmQodGhpcykpLnRoZW4oZnVuY3Rpb24oKXt0aGlzLmMucGVyaW9kcy5mb3JFYWNoKHRoaXMuTmEuYmluZCh0aGlzKSk7dGhpcy5YPURhdGUubm93KCkvMUUzO3JldHVybiBQcm9taXNlLmFsbChbZGIodGhpcy5nLHRoaXMuZiksdGhpcy5vYV0pfS5iaW5kKHRoaXMpKS50aGVuKGZ1bmN0aW9uKCl7dGhpcy5pPW5ldyBOYih0aGlzLmYsdGhpcy5jLnByZXNlbnRhdGlvblRpbWVsaW5lLDEqTWF0aC5tYXgodGhpcy5jLm1pbkJ1ZmZlclRpbWV8fDAsdGhpcy5hLnN0cmVhbWluZy5yZWJ1ZmZlcmluZ0dvYWwpLGJ8fG51bGwsdGhpcy5JYi5iaW5kKHRoaXMpLHRoaXMuS2MuYmluZCh0aGlzKSk7dGhpcy5HPW5ldyBDYih0aGlzLmYsdGhpcy5BLHRoaXMubSk7dGhpcy5iPW5ldyBXYih0aGlzLmksdGhpcy5HLHRoaXMuaCx0aGlzLmMsdGhpcy5IYy5iaW5kKHRoaXMpLHRoaXMuTWIuYmluZCh0aGlzKSx0aGlzLmFhLmJpbmQodGhpcykpO3RoaXMuYi5jb25maWd1cmUodGhpcy5hLnN0cmVhbWluZyk7XHJcbnJldHVybiB0aGlzLmIuaW5pdCgpfS5iaW5kKHRoaXMpKS50aGVuKGZ1bmN0aW9uKCl7dGhpcy5jLnBlcmlvZHMuZm9yRWFjaCh0aGlzLk5hLmJpbmQodGhpcykpO1JjKHRoaXMpO1NjKHRoaXMpO3RoaXMuYS5hYnIubWFuYWdlci5pbml0KHRoaXMuZWIuYmluZCh0aGlzKSk7dGhpcy5qPW51bGx9LmJpbmQodGhpcykpKVtcImNhdGNoXCJdKGZ1bmN0aW9uKGEpe3RoaXMuaj09ZSYmKHRoaXMuaj1udWxsLHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgSChcInVubG9hZGluZ1wiKSkpO3JldHVybiBQcm9taXNlLnJlamVjdChhKX0uYmluZCh0aGlzKSl9O0kucHJvdG90eXBlLmxvYWQ9SS5wcm90b3R5cGUubG9hZDtmdW5jdGlvbiBPYyhhKXthLkE9bmV3IE1lZGlhU291cmNlO3ZhciBiPW5ldyB3O0IoYS52LGEuQSxcInNvdXJjZW9wZW5cIixiLnJlc29sdmUpO2EuZi5zcmM9d2luZG93LlVSTC5jcmVhdGVPYmplY3RVUkwoYS5BKTtyZXR1cm4gYn1cclxuSS5wcm90b3R5cGUuY29uZmlndXJlPWZ1bmN0aW9uKGEpe2EuYWJyJiZhLmFici5tYW5hZ2VyJiZhLmFici5tYW5hZ2VyIT10aGlzLmEuYWJyLm1hbmFnZXImJih0aGlzLmEuYWJyLm1hbmFnZXIuc3RvcCgpLGEuYWJyLm1hbmFnZXIuaW5pdCh0aGlzLmViLmJpbmQodGhpcykpKTt6Yyh0aGlzLmEsYSxOYyh0aGlzKSxUYygpLFwiXCIpO1VjKHRoaXMpfTtJLnByb3RvdHlwZS5jb25maWd1cmU9SS5wcm90b3R5cGUuY29uZmlndXJlO1xyXG5mdW5jdGlvbiBVYyhhKXthLmwmJmEubC5jb25maWd1cmUoYS5hLm1hbmlmZXN0KTthLmcmJmEuZy5jb25maWd1cmUoYS5hLmRybSk7YS5iJiYoYS5iLmNvbmZpZ3VyZShhLmEuc3RyZWFtaW5nKSxhLmMucGVyaW9kcy5mb3JFYWNoKGEuTmEuYmluZChhKSksVmMoYSwkYihhLmIpKSk7YS5hLmFici5lbmFibGVkJiYhYS5xYT9hLmEuYWJyLm1hbmFnZXIuZW5hYmxlKCk6YS5hLmFici5tYW5hZ2VyLmRpc2FibGUoKTthLmEuYWJyLm1hbmFnZXIuc2V0RGVmYXVsdEVzdGltYXRlKGEuYS5hYnIuZGVmYXVsdEJhbmR3aWR0aEVzdGltYXRlKX1JLnByb3RvdHlwZS5nZXRDb25maWd1cmF0aW9uPWZ1bmN0aW9uKCl7dmFyIGE9TmModGhpcyk7emMoYSx0aGlzLmEsTmModGhpcyksVGMoKSxcIlwiKTtyZXR1cm4gYX07SS5wcm90b3R5cGUuZ2V0Q29uZmlndXJhdGlvbj1JLnByb3RvdHlwZS5nZXRDb25maWd1cmF0aW9uO1xyXG5JLnByb3RvdHlwZS56Yz1mdW5jdGlvbigpe3ZhciBhPU5jKHRoaXMpO2EuYWJyJiZhLmFici5tYW5hZ2VyJiZhLmFici5tYW5hZ2VyIT10aGlzLmEuYWJyLm1hbmFnZXImJih0aGlzLmEuYWJyLm1hbmFnZXIuc3RvcCgpLGEuYWJyLm1hbmFnZXIuaW5pdCh0aGlzLmViLmJpbmQodGhpcykpKTt0aGlzLmE9TmModGhpcyk7VWModGhpcyl9O0kucHJvdG90eXBlLnJlc2V0Q29uZmlndXJhdGlvbj1JLnByb3RvdHlwZS56YztJLnByb3RvdHlwZS5uYj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmh9O0kucHJvdG90eXBlLmdldE5ldHdvcmtpbmdFbmdpbmU9SS5wcm90b3R5cGUubmI7SS5wcm90b3R5cGUuU2I9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5uYX07SS5wcm90b3R5cGUuZ2V0TWFuaWZlc3RVcmk9SS5wcm90b3R5cGUuU2I7SS5wcm90b3R5cGUuVT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmM/dGhpcy5jLnByZXNlbnRhdGlvblRpbWVsaW5lLlUoKTohMX07XHJcbkkucHJvdG90eXBlLmlzTGl2ZT1JLnByb3RvdHlwZS5VO0kucHJvdG90eXBlLmdhPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYz90aGlzLmMucHJlc2VudGF0aW9uVGltZWxpbmUuZ2EoKTohMX07SS5wcm90b3R5cGUuaXNJblByb2dyZXNzPUkucHJvdG90eXBlLmdhO0kucHJvdG90eXBlLkNjPWZ1bmN0aW9uKCl7dmFyIGE9MCxiPTA7dGhpcy5jJiYoYj10aGlzLmMucHJlc2VudGF0aW9uVGltZWxpbmUsYT1iLnNhKCksYj1iLlRhKCkpO3JldHVybntzdGFydDphLGVuZDpifX07SS5wcm90b3R5cGUuc2Vla1JhbmdlPUkucHJvdG90eXBlLkNjO0kucHJvdG90eXBlLmtleVN5c3RlbT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmc/dGhpcy5nLmtleVN5c3RlbSgpOlwiXCJ9O0kucHJvdG90eXBlLmtleVN5c3RlbT1JLnByb3RvdHlwZS5rZXlTeXN0ZW07SS5wcm90b3R5cGUuZHJtSW5mbz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmc/dGhpcy5nLmI6bnVsbH07SS5wcm90b3R5cGUuZHJtSW5mbz1JLnByb3RvdHlwZS5kcm1JbmZvO1xyXG5JLnByb3RvdHlwZS5XYj1mdW5jdGlvbigpe3JldHVybiB0aGlzLlBhfTtJLnByb3RvdHlwZS5pc0J1ZmZlcmluZz1JLnByb3RvdHlwZS5XYjtJLnByb3RvdHlwZS5nYj1mdW5jdGlvbigpe2lmKHRoaXMudylyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7dGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBIKFwidW5sb2FkaW5nXCIpKTtpZih0aGlzLmope3ZhciBhPW5ldyBxKDcsN0UzKTtyZXR1cm4geWModGhpcy5qLGEpLnRoZW4odGhpcy5CYi5iaW5kKHRoaXMpKX1yZXR1cm4gdGhpcy5CYigpfTtJLnByb3RvdHlwZS51bmxvYWQ9SS5wcm90b3R5cGUuZ2I7SS5wcm90b3R5cGUuU2E9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pP3RoaXMuaS5TYSgpOjB9O0kucHJvdG90eXBlLmdldFBsYXliYWNrUmF0ZT1JLnByb3RvdHlwZS5TYTtJLnByb3RvdHlwZS5XYz1mdW5jdGlvbihhKXt0aGlzLmkmJlNiKHRoaXMuaSxhKX07SS5wcm90b3R5cGUudHJpY2tQbGF5PUkucHJvdG90eXBlLldjO1xyXG5JLnByb3RvdHlwZS5OYj1mdW5jdGlvbigpe3RoaXMuaSYmU2IodGhpcy5pLDEpfTtJLnByb3RvdHlwZS5jYW5jZWxUcmlja1BsYXk9SS5wcm90b3R5cGUuTmI7SS5wcm90b3R5cGUuZ2V0VHJhY2tzPWZ1bmN0aW9uKCl7aWYoIXRoaXMuYilyZXR1cm5bXTt2YXIgYT1hYyh0aGlzLmIpO3JldHVybiBIYygkYih0aGlzLmIpLGEpLmZpbHRlcihmdW5jdGlvbihhKXtyZXR1cm4gMD50aGlzLm1hLmluZGV4T2YoYS5pZCl9LmJpbmQodGhpcykpfTtJLnByb3RvdHlwZS5nZXRUcmFja3M9SS5wcm90b3R5cGUuZ2V0VHJhY2tzO1xyXG5JLnByb3RvdHlwZS5EYz1mdW5jdGlvbihhLGIpe2lmKHRoaXMuYil7dmFyIGM9SWMoJGIodGhpcy5iKSxhKTtpZihjJiYoYz1jLnN0cmVhbSxjLmFsbG93ZWRCeUFwcGxpY2F0aW9uJiZjLmFsbG93ZWRCeUtleVN5c3RlbSkpe3RoaXMuQy5wdXNoKHt0aW1lc3RhbXA6RGF0ZS5ub3coKS8xRTMsaWQ6Yy5pZCx0eXBlOmEudHlwZSxmcm9tQWRhcHRhdGlvbjohMX0pO1widGV4dFwiIT1hLnR5cGUmJnRoaXMuY29uZmlndXJlKHthYnI6e2VuYWJsZWQ6ITF9fSk7dmFyIGQ9e307ZFthLnR5cGVdPWM7V2ModGhpcyxkLGIpfX19O0kucHJvdG90eXBlLnNlbGVjdFRyYWNrPUkucHJvdG90eXBlLkRjO0kucHJvdG90eXBlLlpiPWZ1bmN0aW9uKCl7cmV0dXJuXCJzaG93aW5nXCI9PXRoaXMubS5tb2RlfTtJLnByb3RvdHlwZS5pc1RleHRUcmFja1Zpc2libGU9SS5wcm90b3R5cGUuWmI7SS5wcm90b3R5cGUuRmM9ZnVuY3Rpb24oYSl7dGhpcy5tLm1vZGU9YT9cInNob3dpbmdcIjpcImhpZGRlblwiO1hjKHRoaXMpfTtcclxuSS5wcm90b3R5cGUuc2V0VGV4dFRyYWNrVmlzaWJpbGl0eT1JLnByb3RvdHlwZS5GYztcclxuSS5wcm90b3R5cGUuZ2V0U3RhdHM9ZnVuY3Rpb24oKXtZYyh0aGlzKTt2YXIgYT17fSxiPXt9LGM9dGhpcy5mJiZ0aGlzLmYuZ2V0VmlkZW9QbGF5YmFja1F1YWxpdHk/dGhpcy5mLmdldFZpZGVvUGxheWJhY2tRdWFsaXR5KCk6e307dGhpcy5iJiYoYj1hYyh0aGlzLmIpLGE9Yi52aWRlb3x8e30sYj1iLmF1ZGlvfHx7fSk7cmV0dXJue3dpZHRoOmEud2lkdGh8fDAsaGVpZ2h0OmEuaGVpZ2h0fHwwLHN0cmVhbUJhbmR3aWR0aDphLmJhbmR3aWR0aCtiLmJhbmR3aWR0aHx8MCxkZWNvZGVkRnJhbWVzOk51bWJlcihjLnRvdGFsVmlkZW9GcmFtZXMpLGRyb3BwZWRGcmFtZXM6TnVtYmVyKGMuZHJvcHBlZFZpZGVvRnJhbWVzKSxlc3RpbWF0ZWRCYW5kd2lkdGg6dGhpcy5hLmFici5tYW5hZ2VyLmdldEJhbmR3aWR0aEVzdGltYXRlKCkscGxheVRpbWU6dGhpcy5wYSxidWZmZXJpbmdUaW1lOnRoaXMuSixzd2l0Y2hIaXN0b3J5OnRoaXMuQy5zbGljZSgwKX19O1xyXG5JLnByb3RvdHlwZS5nZXRTdGF0cz1JLnByb3RvdHlwZS5nZXRTdGF0cztcclxuSS5wcm90b3R5cGUuYWRkVGV4dFRyYWNrPWZ1bmN0aW9uKGEsYixjLGQsZSl7aWYoIXRoaXMuYilyZXR1cm4gUHJvbWlzZS5yZWplY3QoKTtmb3IodmFyIGY9JGIodGhpcy5iKSxnLGg9MDtoPHRoaXMuYy5wZXJpb2RzLmxlbmd0aDtoKyspaWYodGhpcy5jLnBlcmlvZHNbaF09PWYpe2lmKGg9PXRoaXMuYy5wZXJpb2RzLmxlbmd0aC0xKXtpZihnPXRoaXMuYy5wcmVzZW50YXRpb25UaW1lbGluZS5aKCktZi5zdGFydFRpbWUsSW5maW5pdHk9PWcpcmV0dXJuIFByb21pc2UucmVqZWN0KCl9ZWxzZSBnPXRoaXMuYy5wZXJpb2RzW2grMV0uc3RhcnRUaW1lLWYuc3RhcnRUaW1lO2JyZWFrfXZhciBtPXtpZDp0aGlzLktiKyssY3JlYXRlU2VnbWVudEluZGV4OlByb21pc2UucmVzb2x2ZS5iaW5kKFByb21pc2UpLGZpbmRTZWdtZW50UG9zaXRpb246ZnVuY3Rpb24oKXtyZXR1cm4gMX0sZ2V0U2VnbWVudFJlZmVyZW5jZTpmdW5jdGlvbihiKXtyZXR1cm4gMSE9Yj9udWxsOm5ldyBHKDEsMCxnLFxyXG5mdW5jdGlvbigpe3JldHVyblthXX0sMCxudWxsKX0saW5pdFNlZ21lbnRSZWZlcmVuY2U6bnVsbCxwcmVzZW50YXRpb25UaW1lT2Zmc2V0OjAsbWltZVR5cGU6ZCxjb2RlY3M6ZXx8XCJcIixiYW5kd2lkdGg6MCxraW5kOmMsZW5jcnlwdGVkOiExLGtleUlkOm51bGwsbGFuZ3VhZ2U6YixhbGxvd2VkQnlBcHBsaWNhdGlvbjohMCxhbGxvd2VkQnlLZXlTeXN0ZW06ITB9O2Q9e2xhbmd1YWdlOmIsdHlwZTpcInRleHRcIixwcmltYXJ5OiExLGRybUluZm9zOltdLHN0cmVhbXM6W21dfTt0aGlzLm1hLnB1c2gobS5pZCk7Zi5zdHJlYW1TZXRzLnB1c2goZCk7cmV0dXJuIGJjKHRoaXMuYixtKS50aGVuKGZ1bmN0aW9uKCl7aWYoIXRoaXMudylyZXR1cm4gdGhpcy5tYS5zcGxpY2UodGhpcy5tYS5pbmRleE9mKG0uaWQpLDEpLFZjKHRoaXMsZiksUmModGhpcykse2lkOm0uaWQsYWN0aXZlOiExLHR5cGU6XCJ0ZXh0XCIsYmFuZHdpZHRoOjAsbGFuZ3VhZ2U6YixraW5kOmMsd2lkdGg6bnVsbCxoZWlnaHQ6bnVsbH19LmJpbmQodGhpcykpfTtcclxuSS5wcm90b3R5cGUuYWRkVGV4dFRyYWNrPUkucHJvdG90eXBlLmFkZFRleHRUcmFjaztJLnByb3RvdHlwZS5GYj1mdW5jdGlvbihhLGIpe3RoaXMuQmEud2lkdGg9YTt0aGlzLkJhLmhlaWdodD1ifTtJLnByb3RvdHlwZS5zZXRNYXhIYXJkd2FyZVJlc29sdXRpb249SS5wcm90b3R5cGUuRmI7XHJcbmZ1bmN0aW9uIFBjKGEpe2EudiYmYS52LmthKGEuQSxcInNvdXJjZW9wZW5cIik7YS5mJiYoYS5mLnJlbW92ZUF0dHJpYnV0ZShcInNyY1wiKSxhLmYubG9hZCgpKTt2YXIgYj1Qcm9taXNlLmFsbChbYS5hP2EuYS5hYnIubWFuYWdlci5zdG9wKCk6bnVsbCxhLmc/YS5nLm8oKTpudWxsLGEuRz9hLkcubygpOm51bGwsYS5pP2EuaS5vKCk6bnVsbCxhLmI/YS5iLm8oKTpudWxsLGEubD9hLmwuc3RvcCgpOm51bGxdKTthLmc9bnVsbDthLkc9bnVsbDthLmk9bnVsbDthLmI9bnVsbDthLmw9bnVsbDthLmM9bnVsbDthLm5hPW51bGw7YS5vYT1udWxsO2EuQT1udWxsO2Eucz17fTthLkM9W107YS5wYT0wO2EuSj0wO3JldHVybiBifWs9SS5wcm90b3R5cGU7ay5CYj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmw/UGModGhpcykudGhlbihmdW5jdGlvbigpe3RoaXMud3x8KHRoaXMuSWIoITEpLHRoaXMub2E9T2ModGhpcykpfS5iaW5kKHRoaXMpKTpQcm9taXNlLnJlc29sdmUoKX07XHJcbmZ1bmN0aW9uIFRjKCl7cmV0dXJue1wiLmRybS5zZXJ2ZXJzXCI6XCJcIixcIi5kcm0uY2xlYXJLZXlzXCI6XCJcIixcIi5kcm0uYWR2YW5jZWRcIjp7ZGlzdGluY3RpdmVJZGVudGlmaWVyUmVxdWlyZWQ6ITEscGVyc2lzdGVudFN0YXRlUmVxdWlyZWQ6ITEsdmlkZW9Sb2J1c3RuZXNzOlwiXCIsYXVkaW9Sb2J1c3RuZXNzOlwiXCIsc2VydmVyQ2VydGlmaWNhdGU6bnVsbH19fVxyXG5mdW5jdGlvbiBOYyhhKXtyZXR1cm57ZHJtOntyZXRyeVBhcmFtZXRlcnM6R2EoKSxzZXJ2ZXJzOnt9LGNsZWFyS2V5czp7fSxhZHZhbmNlZDp7fX0sbWFuaWZlc3Q6e3JldHJ5UGFyYW1ldGVyczpHYSgpLGRhc2g6e2N1c3RvbVNjaGVtZTpmdW5jdGlvbihhKXtpZihhKXJldHVybiBudWxsfSxjbG9ja1N5bmNVcmk6XCJcIn19LHN0cmVhbWluZzp7cmV0cnlQYXJhbWV0ZXJzOkdhKCkscmVidWZmZXJpbmdHb2FsOjIsYnVmZmVyaW5nR29hbDozMCxidWZmZXJCZWhpbmQ6MzAsaWdub3JlVGV4dFN0cmVhbUZhaWx1cmVzOiExfSxhYnI6e21hbmFnZXI6YS5oYixlbmFibGVkOiEwLGRlZmF1bHRCYW5kd2lkdGhFc3RpbWF0ZTo1RTV9LHByZWZlcnJlZEF1ZGlvTGFuZ3VhZ2U6XCJcIixwcmVmZXJyZWRUZXh0TGFuZ3VhZ2U6XCJcIixyZXN0cmljdGlvbnM6e21pbldpZHRoOjAsbWF4V2lkdGg6SW5maW5pdHksbWluSGVpZ2h0OjAsbWF4SGVpZ2h0OkluZmluaXR5LG1pblBpeGVsczowLG1heFBpeGVsczpJbmZpbml0eSxcclxubWluQXVkaW9CYW5kd2lkdGg6MCxtYXhBdWRpb0JhbmR3aWR0aDpJbmZpbml0eSxtaW5WaWRlb0JhbmR3aWR0aDowLG1heFZpZGVvQmFuZHdpZHRoOkluZmluaXR5fX19ay5OYT1mdW5jdGlvbihhKXt2YXIgYj10aGlzLmI/YWModGhpcy5iKTp7fTtHYyh0aGlzLmcsYixhKTtiPWEuc3RyZWFtU2V0cy5zb21lKEpjKTtGYyhhLHRoaXMuYS5yZXN0cmljdGlvbnMsdGhpcy5CYSkmJiF0aGlzLmomJlJjKHRoaXMpO2E9IWEuc3RyZWFtU2V0cy5zb21lKEpjKTtiP2EmJnRoaXMuYWEobmV3IHEoNCw0MDEyKSk6dGhpcy5hYShuZXcgcSg0LDQwMTEpKX07ZnVuY3Rpb24gV2MoYSxiLGMpe2Zvcih2YXIgZCBpbiBiKXt2YXIgZT1iW2RdLGY9Y3x8XCJ0ZXh0XCI9PWQ7YS5xYT9hLnNbZF09e3N0cmVhbTplLGNsZWFyOmZ9OmNjKGEuYixkLGUsZj8wOnZvaWQgMCl9fVxyXG5mdW5jdGlvbiBZYyhhKXtpZihhLmMpe3ZhciBiPURhdGUubm93KCkvMUUzO2EuUGE/YS5KKz1iLWEuWDphLnBhKz1iLWEuWDthLlg9Yn19ay5MYz1mdW5jdGlvbihhLGIsYyl7dGhpcy5hLmFici5tYW5hZ2VyLnNlZ21lbnREb3dubG9hZGVkKGEsYixjKX07ay5JYj1mdW5jdGlvbihhKXtZYyh0aGlzKTt0aGlzLlBhPWE7dGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBIKFwiYnVmZmVyaW5nXCIse2J1ZmZlcmluZzphfSkpfTtrLktjPWZ1bmN0aW9uKCl7aWYodGhpcy5iKXt2YXIgYT10aGlzLmIsYjtmb3IoYiBpbiBhLmIpe3ZhciBjPWEuYltiXTtjLmRhfHwwPEdiKGEuYyxiLE9iKGEuaSkpfHxjLmNhfHwoYy5oYT9lYyhjLDApOm51bGw9PUViKGEuYyxiKT9udWxsPT1jLmJhJiZpYyhhLGMsMCk6KFhiKGMpLGZjKGEsYywwKSkpfX19O1xyXG5mdW5jdGlvbiBaYyhhLGIsYyl7aWYoIUMoYikuc29tZShKYykpcmV0dXJuIGEuYWEobmV3IHEoNCw0MDEyKSkse307dmFyIGQ9e307aWYoYylkPWI7ZWxzZXtjPWFjKGEuYik7Zm9yKHZhciBlIGluIGMpe3ZhciBmPWNbZV07Zi5hbGxvd2VkQnlBcHBsaWNhdGlvbiYmZi5hbGxvd2VkQnlLZXlTeXN0ZW0mJmJbZV0ubGFuZ3VhZ2U9PWYubGFuZ3VhZ2V8fChkW2VdPWJbZV0pfX1pZihNYShkKSlyZXR1cm57fTtpYShPYmplY3Qua2V5cyhkKSk7dmFyIGc9YS5hLmFici5tYW5hZ2VyLmNob29zZVN0cmVhbXMoZCk7cmV0dXJuIE9hKGQsZnVuY3Rpb24oYSl7cmV0dXJuISFnW2FdfSk/ZzooYS5hYShuZXcgcSg0LDQwMTIpKSx7fSl9XHJcbmZ1bmN0aW9uIFZjKGEsYil7dmFyIGM9e2F1ZGlvOiExLHRleHQ6ITF9LGQ9S2MoYixhLmEsYyksZT1aYyhhLGQpLGY7Zm9yKGYgaW4gZSlhLkMucHVzaCh7dGltZXN0YW1wOkRhdGUubm93KCkvMUUzLGlkOmVbZl0uaWQsdHlwZTpmLGZyb21BZGFwdGF0aW9uOiEwfSk7V2MoYSxlLCEwKTtTYyhhKTtkLnRleHQmJmQuYXVkaW8mJmMudGV4dCYmZC50ZXh0Lmxhbmd1YWdlIT1kLmF1ZGlvLmxhbmd1YWdlJiYoYS5tLm1vZGU9XCJzaG93aW5nXCIsWGMoYSkpfWsuSGM9ZnVuY3Rpb24oYSl7dGhpcy5xYT0hMDt0aGlzLmEuYWJyLm1hbmFnZXIuZGlzYWJsZSgpO2E9S2MoYSx0aGlzLmEpO2E9WmModGhpcyxhLCEwKTtmb3IodmFyIGIgaW4gdGhpcy5zKWFbYl09dGhpcy5zW2JdLnN0cmVhbTt0aGlzLnM9e307Zm9yKGIgaW4gYSl0aGlzLkMucHVzaCh7dGltZXN0YW1wOkRhdGUubm93KCkvMUUzLGlkOmFbYl0uaWQsdHlwZTpiLGZyb21BZGFwdGF0aW9uOiEwfSk7dGhpcy5qfHxSYyh0aGlzKTtyZXR1cm4gYX07XHJcbmsuTWI9ZnVuY3Rpb24oKXt0aGlzLnFhPSExO3RoaXMuYS5hYnIuZW5hYmxlZCYmdGhpcy5hLmFici5tYW5hZ2VyLmVuYWJsZSgpO2Zvcih2YXIgYSBpbiB0aGlzLnMpe3ZhciBiPXRoaXMuc1thXTtjYyh0aGlzLmIsYSxiLnN0cmVhbSxiLmNsZWFyPzA6dm9pZCAwKX10aGlzLnM9e319O2suZWI9ZnVuY3Rpb24oYSxiKXt2YXIgYz1hYyh0aGlzLmIpLGQ7Zm9yKGQgaW4gYSl7dmFyIGU9YVtkXTtjW2RdIT1lP3RoaXMuQy5wdXNoKHt0aW1lc3RhbXA6RGF0ZS5ub3coKS8xRTMsaWQ6ZS5pZCx0eXBlOmQsZnJvbUFkYXB0YXRpb246ITB9KTpkZWxldGUgYVtkXX1pZighTWEoYSkmJnRoaXMuYil7Zm9yKGQgaW4gYSljYyh0aGlzLmIsZCxhW2RdLFwidmlkZW9cIj09ZD9iOnZvaWQgMCk7U2ModGhpcyl9fTtcclxuZnVuY3Rpb24gU2MoYSl7UHJvbWlzZS5yZXNvbHZlKCkudGhlbihmdW5jdGlvbigpe3RoaXMud3x8dGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBIKFwiYWRhcHRhdGlvblwiKSl9LmJpbmQoYSkpfWZ1bmN0aW9uIFJjKGEpe1Byb21pc2UucmVzb2x2ZSgpLnRoZW4oZnVuY3Rpb24oKXt0aGlzLnd8fHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgSChcInRyYWNrc2NoYW5nZWRcIikpfS5iaW5kKGEpKX1mdW5jdGlvbiBYYyhhKXthLmRpc3BhdGNoRXZlbnQobmV3IEgoXCJ0ZXh0dHJhY2t2aXNpYmlsaXR5XCIpKX1rLmFhPWZ1bmN0aW9uKGEpe3RoaXMuZGlzcGF0Y2hFdmVudChuZXcgSChcImVycm9yXCIse2RldGFpbDphfSkpfTtrLkljPWZ1bmN0aW9uKGEpe3RoaXMuZGlzcGF0Y2hFdmVudChhKX07XHJcbmsubGM9ZnVuY3Rpb24oKXtpZih0aGlzLmYuZXJyb3Ipe3ZhciBhPXRoaXMuZi5lcnJvci5jb2RlO2lmKDEhPWEpe3ZhciBiPXRoaXMuZi5lcnJvci5tc0V4dGVuZGVkQ29kZTtiJiYoMD5iJiYoYis9TWF0aC5wb3coMiwzMikpLGI9Yi50b1N0cmluZygxNikpO3RoaXMuYWEobmV3IHEoMywzMDE2LGEsYikpfX19O2suSmM9ZnVuY3Rpb24oYSl7dmFyIGI9JGIodGhpcy5iKSxjPSExO2Iuc3RyZWFtU2V0cy5mb3JFYWNoKGZ1bmN0aW9uKGIpe2Iuc3RyZWFtcy5mb3JFYWNoKGZ1bmN0aW9uKGIpe3ZhciBkPWIuYWxsb3dlZEJ5S2V5U3lzdGVtO2Iua2V5SWQmJmIua2V5SWQgaW4gYSYmKGIuYWxsb3dlZEJ5S2V5U3lzdGVtPVwib3V0cHV0LXJlc3RyaWN0ZWRcIiE9YVtiLmtleUlkXSk7ZCE9Yi5hbGxvd2VkQnlLZXlTeXN0ZW0mJihjPSEwKX0pfSk7VmModGhpcyxiKTtjJiZSYyh0aGlzKX07dmFyICRjPVwiZW5kZWQgcGxheSBwbGF5aW5nIHBhdXNlIHBhdXNpbmcgcmF0ZWNoYW5nZSBzZWVrZWQgc2Vla2luZyB0aW1ldXBkYXRlIHZvbHVtZWNoYW5nZVwiLnNwbGl0KFwiIFwiKSxhZD1cImJ1ZmZlcmVkIGN1cnJlbnRUaW1lIGR1cmF0aW9uIGVuZGVkIGxvb3AgbXV0ZWQgcGF1c2VkIHBsYXliYWNrUmF0ZSBzZWVraW5nIHZpZGVvSGVpZ2h0IHZpZGVvV2lkdGggdm9sdW1lXCIuc3BsaXQoXCIgXCIpLGNkPVtcImxvb3BcIixcInBsYXliYWNrUmF0ZVwiXSxkZD1bXCJwYXVzZVwiLFwicGxheVwiXSxlZD1bXCJhZGFwdGF0aW9uXCIsXCJidWZmZXJpbmdcIixcImVycm9yXCIsXCJ0ZXh0dHJhY2t2aXNpYmlsaXR5XCIsXCJ0cmFja3NjaGFuZ2VkXCJdLGZkPVwiZ2V0Q29uZmlndXJhdGlvbiBnZXRNYW5pZmVzdFVyaSBnZXRQbGF5YmFja1JhdGUgZ2V0VHJhY2tzIGdldFN0YXRzIGlzQnVmZmVyaW5nIGlzTGl2ZSBpc1RleHRUcmFja1Zpc2libGUgc2Vla1JhbmdlXCIuc3BsaXQoXCIgXCIpLGdkPVtbXCJnZXRDb25maWd1cmF0aW9uXCIsXHJcblwiY29uZmlndXJlXCJdXSxoZD1bW1wiaXNUZXh0VHJhY2tWaXNpYmxlXCIsXCJzZXRUZXh0VHJhY2tWaXNpYmlsaXR5XCJdXSxpZD1cImNvbmZpZ3VyZSByZXNldENvbmZpZ3VyYXRpb24gdHJpY2tQbGF5IGNhbmNlbFRyaWNrUGxheSBzZWxlY3RUcmFjayBzZXRUZXh0VHJhY2tWaXNpYmlsaXR5IGFkZFRleHRUcmFja1wiLnNwbGl0KFwiIFwiKSxqZD1bXCJsb2FkXCIsXCJ1bmxvYWRcIl07XHJcbmZ1bmN0aW9uIGtkKGEpe3JldHVybiBKU09OLnN0cmluZ2lmeShhLGZ1bmN0aW9uKGEsYyl7aWYoXCJtYW5hZ2VyXCIhPWEmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIGMpe2lmKGMgaW5zdGFuY2VvZiBFdmVudHx8YyBpbnN0YW5jZW9mIEgpe3ZhciBkPXt9LGU7Zm9yKGUgaW4gYyl7dmFyIGY9Y1tlXTtmJiZcIm9iamVjdFwiPT10eXBlb2YgZnx8ZSBpbiBFdmVudHx8KGRbZV09Zil9cmV0dXJuIGR9aWYoYyBpbnN0YW5jZW9mIFRpbWVSYW5nZXMpZm9yKGQ9e19fdHlwZV9fOlwiVGltZVJhbmdlc1wiLGxlbmd0aDpjLmxlbmd0aCxzdGFydDpbXSxlbmQ6W119LGU9MDtlPGMubGVuZ3RoOysrZSlkLnN0YXJ0LnB1c2goYy5zdGFydChlKSksZC5lbmQucHVzaChjLmVuZChlKSk7ZWxzZSBkPVwibnVtYmVyXCI9PXR5cGVvZiBjP2lzTmFOKGMpP1wiTmFOXCI6aXNGaW5pdGUoYyk/YzowPmM/XCItSW5maW5pdHlcIjpcIkluZmluaXR5XCI6YztyZXR1cm4gZH19KX1cclxuZnVuY3Rpb24gbGQoYSl7cmV0dXJuIEpTT04ucGFyc2UoYSxmdW5jdGlvbihhLGMpe3JldHVyblwiTmFOXCI9PWM/TmFOOlwiLUluZmluaXR5XCI9PWM/LUluZmluaXR5OlwiSW5maW5pdHlcIj09Yz9JbmZpbml0eTpjJiZcIm9iamVjdFwiPT10eXBlb2YgYyYmXCJUaW1lUmFuZ2VzXCI9PWMuX190eXBlX18/bWQoYyk6Y30pfWZ1bmN0aW9uIG1kKGEpe3JldHVybntsZW5ndGg6YS5sZW5ndGgsc3RhcnQ6ZnVuY3Rpb24oYil7cmV0dXJuIGEuc3RhcnRbYl19LGVuZDpmdW5jdGlvbihiKXtyZXR1cm4gYS5lbmRbYl19fX07ZnVuY3Rpb24gbmQoYSxiLGMsZCxlKXt0aGlzLkM9YTt0aGlzLmw9Yjt0aGlzLnc9Yzt0aGlzLkE9ZDt0aGlzLnM9ZTt0aGlzLmY9dGhpcy5qPXRoaXMuaD0hMTt0aGlzLnY9XCJcIjt0aGlzLmE9dGhpcy5pPW51bGw7dGhpcy5iPXt2aWRlbzp7fSxwbGF5ZXI6e319O3RoaXMubT0wO3RoaXMuYz17fTt0aGlzLmc9bnVsbH1rPW5kLnByb3RvdHlwZTtrLm89ZnVuY3Rpb24oKXtvZCh0aGlzKTt0aGlzLmEmJih0aGlzLmEuc3RvcChmdW5jdGlvbigpe30sZnVuY3Rpb24oKXt9KSx0aGlzLmE9bnVsbCk7dGhpcy5BPXRoaXMudz10aGlzLmw9bnVsbDt0aGlzLmY9dGhpcy5qPXRoaXMuaD0hMTt0aGlzLmc9dGhpcy5jPXRoaXMuYj10aGlzLmE9dGhpcy5pPW51bGw7cmV0dXJuIFByb21pc2UucmVzb2x2ZSgpfTtrLk49ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5mfTtrLiRhPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudn07XHJcbmsuaW5pdD1mdW5jdGlvbigpe2lmKHdpbmRvdy5jaHJvbWUmJmNocm9tZS5jYXN0JiZjaHJvbWUuY2FzdC5pc0F2YWlsYWJsZSl7ZGVsZXRlIHdpbmRvdy5fX29uR0Nhc3RBcGlBdmFpbGFibGU7dGhpcy5oPSEwO3RoaXMubCgpO3ZhciBhPW5ldyBjaHJvbWUuY2FzdC5TZXNzaW9uUmVxdWVzdCh0aGlzLkMpLGE9bmV3IGNocm9tZS5jYXN0LkFwaUNvbmZpZyhhLHRoaXMuY2MuYmluZCh0aGlzKSx0aGlzLmpjLmJpbmQodGhpcyksXCJvcmlnaW5fc2NvcGVkXCIpO2Nocm9tZS5jYXN0LmluaXRpYWxpemUoYSxmdW5jdGlvbigpe30sZnVuY3Rpb24oKXt9KX1lbHNlIHdpbmRvdy5fX29uR0Nhc3RBcGlBdmFpbGFibGU9ZnVuY3Rpb24oYSl7YSYmdGhpcy5pbml0KCl9LmJpbmQodGhpcyl9O2suYmI9ZnVuY3Rpb24oYSl7dGhpcy5pPWE7dGhpcy5mJiZwZCh0aGlzLHt0eXBlOlwiYXBwRGF0YVwiLGFwcERhdGE6dGhpcy5pfSl9O1xyXG5rLmNhc3Q9ZnVuY3Rpb24oYSl7aWYoIXRoaXMuaClyZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IHEoOCw4RTMpKTtpZighdGhpcy5qKXJldHVybiBQcm9taXNlLnJlamVjdChuZXcgcSg4LDgwMDEpKTtpZih0aGlzLmYpcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBxKDgsODAwMikpO3RoaXMuZz1uZXcgdztjaHJvbWUuY2FzdC5yZXF1ZXN0U2Vzc2lvbih0aGlzLllhLmJpbmQodGhpcyxhKSx0aGlzLm9iLmJpbmQodGhpcykpO3JldHVybiB0aGlzLmd9O1xyXG5rLmdldD1mdW5jdGlvbihhLGIpe2lmKFwidmlkZW9cIj09YSl7aWYoMDw9ZGQuaW5kZXhPZihiKSlyZXR1cm4gdGhpcy56Yi5iaW5kKHRoaXMsYSxiKX1lbHNlIGlmKFwicGxheWVyXCI9PWEpe2lmKDA8PWlkLmluZGV4T2YoYikpcmV0dXJuIHRoaXMuemIuYmluZCh0aGlzLGEsYik7aWYoMDw9amQuaW5kZXhPZihiKSlyZXR1cm4gdGhpcy54Yy5iaW5kKHRoaXMsYSxiKTtpZigwPD1mZC5pbmRleE9mKGIpKXJldHVybiB0aGlzLndiLmJpbmQodGhpcyxhLGIpfXJldHVybiB0aGlzLndiKGEsYil9O2suc2V0PWZ1bmN0aW9uKGEsYixjKXt0aGlzLmJbYV1bYl09YztwZCh0aGlzLHt0eXBlOlwic2V0XCIsdGFyZ2V0TmFtZTphLHByb3BlcnR5OmIsdmFsdWU6Y30pfTtcclxuay5ZYT1mdW5jdGlvbihhLGIpe3RoaXMuYT1iO3RoaXMuYS5hZGRVcGRhdGVMaXN0ZW5lcih0aGlzLnBiLmJpbmQodGhpcykpO3RoaXMuYS5hZGRNZXNzYWdlTGlzdGVuZXIoXCJ1cm46eC1jYXN0OmNvbS5nb29nbGUuc2hha2EudjJcIix0aGlzLmRjLmJpbmQodGhpcykpO3RoaXMucGIoKTtwZCh0aGlzLHt0eXBlOlwiaW5pdFwiLGluaXRTdGF0ZTphLGFwcERhdGE6dGhpcy5pfSk7dGhpcy5nLnJlc29sdmUoKX07ay5vYj1mdW5jdGlvbihhKXt2YXIgYj04MDAzO3N3aXRjaChhLmNvZGUpe2Nhc2UgXCJjYW5jZWxcIjpiPTgwMDQ7YnJlYWs7Y2FzZSBcInRpbWVvdXRcIjpiPTgwMDU7YnJlYWs7Y2FzZSBcInJlY2VpdmVyX3VuYXZhaWxhYmxlXCI6Yj04MDA2fXRoaXMuZy5yZWplY3QobmV3IHEoOCxiLGEpKX07ay53Yj1mdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLmJbYV1bYl19O1xyXG5rLnpiPWZ1bmN0aW9uKGEsYil7cGQodGhpcyx7dHlwZTpcImNhbGxcIix0YXJnZXROYW1lOmEsbWV0aG9kTmFtZTpiLGFyZ3M6QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDIpfSl9O2sueGM9ZnVuY3Rpb24oYSxiKXt2YXIgYz1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMiksZD1uZXcgdyxlPXRoaXMubS50b1N0cmluZygpO3RoaXMubSsrO3RoaXMuY1tlXT1kO3BkKHRoaXMse3R5cGU6XCJhc3luY0NhbGxcIix0YXJnZXROYW1lOmEsbWV0aG9kTmFtZTpiLGFyZ3M6YyxpZDplfSk7cmV0dXJuIGR9O2suY2M9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5zKCk7dGhpcy5nPW5ldyB3O3RoaXMuWWEoYixhKX07ay5qYz1mdW5jdGlvbihhKXt0aGlzLmo9XCJhdmFpbGFibGVcIj09YTt0aGlzLmwoKX07XHJcbmsucGI9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmE/XCJjb25uZWN0ZWRcIj09dGhpcy5hLnN0YXR1czohMTtpZih0aGlzLmYmJiFhKXt0aGlzLkEoKTtmb3IodmFyIGIgaW4gdGhpcy5iKXRoaXMuYltiXT17fTtvZCh0aGlzKX10aGlzLnY9KHRoaXMuZj1hKT90aGlzLmEucmVjZWl2ZXIuZnJpZW5kbHlOYW1lOlwiXCI7dGhpcy5sKCl9O2Z1bmN0aW9uIG9kKGEpe2Zvcih2YXIgYiBpbiBhLmMpe3ZhciBjPWEuY1tiXTtkZWxldGUgYS5jW2JdO2MucmVqZWN0KG5ldyBxKDcsN0UzKSl9fVxyXG5rLmRjPWZ1bmN0aW9uKGEsYil7dmFyIGM9bGQoYik7c3dpdGNoKGMudHlwZSl7Y2FzZSBcImV2ZW50XCI6dmFyIGQ9Yy50YXJnZXROYW1lLGU9Yy5ldmVudDt0aGlzLncoZCxuZXcgSChlLnR5cGUsZSkpO2JyZWFrO2Nhc2UgXCJ1cGRhdGVcIjplPWMudXBkYXRlO2ZvcihkIGluIGUpe3ZhciBjPXRoaXMuYltkXXx8e30sZjtmb3IoZiBpbiBlW2RdKWNbZl09ZVtkXVtmXX1icmVhaztjYXNlIFwiYXN5bmNDb21wbGV0ZVwiOmlmKGQ9Yy5pZCxmPWMuZXJyb3IsYz10aGlzLmNbZF0sZGVsZXRlIHRoaXMuY1tkXSxjKWlmKGYpe2Q9bmV3IHEoZi5jYXRlZ29yeSxmLmNvZGUpO2ZvcihlIGluIGYpZFtlXT1mW2VdO2MucmVqZWN0KGQpfWVsc2UgYy5yZXNvbHZlKCl9fTtmdW5jdGlvbiBwZChhLGIpe3ZhciBjPWtkKGIpO2EuYS5zZW5kTWVzc2FnZShcInVybjp4LWNhc3Q6Y29tLmdvb2dsZS5zaGFrYS52MlwiLGMsZnVuY3Rpb24oKXt9LGhhKX07ZnVuY3Rpb24gSihhLGIsYyl7cC5jYWxsKHRoaXMpO3RoaXMuYz1hO3RoaXMuYj1iO3RoaXMuaD10aGlzLmY9dGhpcy5nPXRoaXMuaT10aGlzLmo9bnVsbDt0aGlzLmE9bmV3IG5kKGMsdGhpcy5NYy5iaW5kKHRoaXMpLHRoaXMuTmMuYmluZCh0aGlzKSx0aGlzLk9jLmJpbmQodGhpcyksdGhpcy5tYi5iaW5kKHRoaXMpKTtxZCh0aGlzKX1iYShKKTtsKFwic2hha2EuY2FzdC5DYXN0UHJveHlcIixKKTtKLnByb3RvdHlwZS5vPWZ1bmN0aW9uKCl7dmFyIGE9W3RoaXMuaD90aGlzLmgubygpOm51bGwsdGhpcy5iP3RoaXMuYi5vKCk6bnVsbCx0aGlzLmE/dGhpcy5hLm8oKTpudWxsXTt0aGlzLmE9dGhpcy5oPXRoaXMuaT10aGlzLmo9dGhpcy5iPXRoaXMuYz1udWxsO3JldHVybiBQcm9taXNlLmFsbChhKX07Si5wcm90b3R5cGUuZGVzdHJveT1KLnByb3RvdHlwZS5vO0oucHJvdG90eXBlLlZiPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuan07Si5wcm90b3R5cGUuZ2V0VmlkZW89Si5wcm90b3R5cGUuVmI7XHJcbkoucHJvdG90eXBlLlRiPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaX07Si5wcm90b3R5cGUuZ2V0UGxheWVyPUoucHJvdG90eXBlLlRiO0oucHJvdG90eXBlLkxiPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYT90aGlzLmEuaCYmdGhpcy5hLmo6ITF9O0oucHJvdG90eXBlLmNhbkNhc3Q9Si5wcm90b3R5cGUuTGI7Si5wcm90b3R5cGUuTj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmE/dGhpcy5hLk4oKTohMX07Si5wcm90b3R5cGUuaXNDYXN0aW5nPUoucHJvdG90eXBlLk47Si5wcm90b3R5cGUuJGE9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hP3RoaXMuYS4kYSgpOlwiXCJ9O0oucHJvdG90eXBlLnJlY2VpdmVyTmFtZT1KLnByb3RvdHlwZS4kYTtKLnByb3RvdHlwZS5jYXN0PWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5tYigpO3JldHVybiB0aGlzLmEuY2FzdChhKS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYi5nYigpfS5iaW5kKHRoaXMpKX07Si5wcm90b3R5cGUuY2FzdD1KLnByb3RvdHlwZS5jYXN0O1xyXG5KLnByb3RvdHlwZS5iYj1mdW5jdGlvbihhKXt0aGlzLmEuYmIoYSl9O0oucHJvdG90eXBlLnNldEFwcERhdGE9Si5wcm90b3R5cGUuYmI7Si5wcm90b3R5cGUuVWM9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmE7aWYoYS5mKXt2YXIgYj1hLnMoKTtjaHJvbWUuY2FzdC5yZXF1ZXN0U2Vzc2lvbihhLllhLmJpbmQoYSxiKSxhLm9iLmJpbmQoYSkpfX07Si5wcm90b3R5cGUuc3VnZ2VzdERpc2Nvbm5lY3Q9Si5wcm90b3R5cGUuVWM7XHJcbmZ1bmN0aW9uIHFkKGEpe2EuYS5pbml0KCk7YS5oPW5ldyB6OyRjLmZvckVhY2goZnVuY3Rpb24oYSl7Qih0aGlzLmgsdGhpcy5jLGEsdGhpcy4kYy5iaW5kKHRoaXMpKX0uYmluZChhKSk7ZWQuZm9yRWFjaChmdW5jdGlvbihhKXtCKHRoaXMuaCx0aGlzLmIsYSx0aGlzLnRjLmJpbmQodGhpcykpfS5iaW5kKGEpKTthLmo9e307Zm9yKHZhciBiIGluIGEuYylPYmplY3QuZGVmaW5lUHJvcGVydHkoYS5qLGIse2NvbmZpZ3VyYWJsZTohMSxlbnVtZXJhYmxlOiEwLGdldDphLlpjLmJpbmQoYSxiKSxzZXQ6YS5hZC5iaW5kKGEsYil9KTthLmk9e307Zm9yKGIgaW4gYS5iKU9iamVjdC5kZWZpbmVQcm9wZXJ0eShhLmksYix7Y29uZmlndXJhYmxlOiExLGVudW1lcmFibGU6ITAsZ2V0OmEuc2MuYmluZChhLGIpfSk7YS5nPW5ldyBwO2EuZy5TPWEuajthLmY9bmV3IHA7YS5mLlM9YS5pfWs9Si5wcm90b3R5cGU7XHJcbmsubWI9ZnVuY3Rpb24oKXt2YXIgYT17dmlkZW86e30scGxheWVyOnt9LHBsYXllckFmdGVyTG9hZDp7fSxtYW5pZmVzdDp0aGlzLmIubmEsc3RhcnRUaW1lOm51bGx9O3RoaXMuYy5wYXVzZSgpO2NkLmZvckVhY2goZnVuY3Rpb24oYil7YS52aWRlb1tiXT10aGlzLmNbYl19LmJpbmQodGhpcykpO3RoaXMuYy5lbmRlZHx8KGEuc3RhcnRUaW1lPXRoaXMuYy5jdXJyZW50VGltZSk7Z2QuZm9yRWFjaChmdW5jdGlvbihiKXt2YXIgYz1iWzFdO2I9dGhpcy5iW2JbMF1dKCk7YS5wbGF5ZXJbY109Yn0uYmluZCh0aGlzKSk7aGQuZm9yRWFjaChmdW5jdGlvbihiKXt2YXIgYz1iWzFdO2I9dGhpcy5iW2JbMF1dKCk7YS5wbGF5ZXJBZnRlckxvYWRbY109Yn0uYmluZCh0aGlzKSk7cmV0dXJuIGF9O2suTWM9ZnVuY3Rpb24oKXt0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEgoXCJjYXN0c3RhdHVzY2hhbmdlZFwiKSl9O1xyXG5rLk9jPWZ1bmN0aW9uKCl7Z2QuZm9yRWFjaChmdW5jdGlvbihhKXt2YXIgYj1hWzFdO2E9dGhpcy5hLmdldChcInBsYXllclwiLGFbMF0pKCk7dGhpcy5iW2JdKGEpfS5iaW5kKHRoaXMpKTt2YXIgYT10aGlzLmEuZ2V0KFwicGxheWVyXCIsXCJnZXRNYW5pZmVzdFVyaVwiKSgpLGI9dGhpcy5hLmdldChcInZpZGVvXCIsXCJlbmRlZFwiKSxjPVByb21pc2UucmVzb2x2ZSgpLGQ9dGhpcy5jLmF1dG9wbGF5LGU9bnVsbDtifHwoZT10aGlzLmEuZ2V0KFwidmlkZW9cIixcImN1cnJlbnRUaW1lXCIpKTthJiYodGhpcy5jLmF1dG9wbGF5PSExLGM9dGhpcy5iLmxvYWQoYSxlKSxjW1wiY2F0Y2hcIl0oZnVuY3Rpb24oYSl7dGhpcy5iLmRpc3BhdGNoRXZlbnQobmV3IEgoXCJlcnJvclwiLHtkZXRhaWw6YX0pKX0uYmluZCh0aGlzKSkpO3ZhciBmPXt9O2NkLmZvckVhY2goZnVuY3Rpb24oYSl7ZlthXT10aGlzLmEuZ2V0KFwidmlkZW9cIixhKX0uYmluZCh0aGlzKSk7Yy50aGVuKGZ1bmN0aW9uKCl7Y2QuZm9yRWFjaChmdW5jdGlvbihhKXt0aGlzLmNbYV09XHJcbmZbYV19LmJpbmQodGhpcykpO2hkLmZvckVhY2goZnVuY3Rpb24oYSl7dmFyIGI9YVsxXTthPXRoaXMuYS5nZXQoXCJwbGF5ZXJcIixhWzBdKSgpO3RoaXMuYltiXShhKX0uYmluZCh0aGlzKSk7dGhpcy5jLmF1dG9wbGF5PWQ7YSYmdGhpcy5jLnBsYXkoKX0uYmluZCh0aGlzKSl9O1xyXG5rLlpjPWZ1bmN0aW9uKGEpe2lmKFwiYWRkRXZlbnRMaXN0ZW5lclwiPT1hKXJldHVybiB0aGlzLmcuYWRkRXZlbnRMaXN0ZW5lci5iaW5kKHRoaXMuZyk7aWYoXCJyZW1vdmVFdmVudExpc3RlbmVyXCI9PWEpcmV0dXJuIHRoaXMuZy5yZW1vdmVFdmVudExpc3RlbmVyLmJpbmQodGhpcy5nKTtpZih0aGlzLmEuTigpJiYhT2JqZWN0LmtleXModGhpcy5hLmIudmlkZW8pLmxlbmd0aCl7dmFyIGI9dGhpcy5jW2FdO2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIGIpcmV0dXJuIGJ9cmV0dXJuIHRoaXMuYS5OKCk/dGhpcy5hLmdldChcInZpZGVvXCIsYSk6KGI9dGhpcy5jW2FdLFwiZnVuY3Rpb25cIj09dHlwZW9mIGImJihiPWIuYmluZCh0aGlzLmMpKSxiKX07ay5hZD1mdW5jdGlvbihhLGIpe3RoaXMuYS5OKCk/dGhpcy5hLnNldChcInZpZGVvXCIsYSxiKTp0aGlzLmNbYV09Yn07ay4kYz1mdW5jdGlvbihhKXt0aGlzLmEuTigpfHx0aGlzLmcuZGlzcGF0Y2hFdmVudChuZXcgSChhLnR5cGUsYSkpfTtcclxuay5zYz1mdW5jdGlvbihhKXtyZXR1cm5cImFkZEV2ZW50TGlzdGVuZXJcIj09YT90aGlzLmYuYWRkRXZlbnRMaXN0ZW5lci5iaW5kKHRoaXMuZik6XCJyZW1vdmVFdmVudExpc3RlbmVyXCI9PWE/dGhpcy5mLnJlbW92ZUV2ZW50TGlzdGVuZXIuYmluZCh0aGlzLmYpOlwiZ2V0TmV0d29ya2luZ0VuZ2luZVwiPT1hP3RoaXMuYi5uYi5iaW5kKHRoaXMuYik6dGhpcy5hLk4oKSYmIU9iamVjdC5rZXlzKHRoaXMuYS5iLnZpZGVvKS5sZW5ndGgmJjA8PWZkLmluZGV4T2YoYSl8fCF0aGlzLmEuTigpPyhhPXRoaXMuYlthXSxhLmJpbmQodGhpcy5iKSk6dGhpcy5hLmdldChcInBsYXllclwiLGEpfTtrLnRjPWZ1bmN0aW9uKGEpe3RoaXMuYS5OKCl8fHRoaXMuZi5kaXNwYXRjaEV2ZW50KGEpfTtrLk5jPWZ1bmN0aW9uKGEsYil7dGhpcy5hLk4oKSYmKFwidmlkZW9cIj09YT90aGlzLmcuZGlzcGF0Y2hFdmVudChiKTpcInBsYXllclwiPT1hJiZ0aGlzLmYuZGlzcGF0Y2hFdmVudChiKSl9O2Z1bmN0aW9uIEwoYSxiLGMpe3AuY2FsbCh0aGlzKTt0aGlzLmI9YTt0aGlzLmE9Yjt0aGlzLmk9e3ZpZGVvOmEscGxheWVyOmJ9O3RoaXMuaj1jfHxmdW5jdGlvbigpe307dGhpcy5oPSExO3RoaXMuZz0hMDt0aGlzLmM9dGhpcy5mPW51bGw7cmQodGhpcyl9YmEoTCk7bChcInNoYWthLmNhc3QuQ2FzdFJlY2VpdmVyXCIsTCk7TC5wcm90b3R5cGUuWGI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ofTtMLnByb3RvdHlwZS5pc0Nvbm5lY3RlZD1MLnByb3RvdHlwZS5YYjtMLnByb3RvdHlwZS5ZYj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmd9O0wucHJvdG90eXBlLmlzSWRsZT1MLnByb3RvdHlwZS5ZYjtcclxuTC5wcm90b3R5cGUubz1mdW5jdGlvbigpe3ZhciBhPXRoaXMuYT90aGlzLmEubygpOlByb21pc2UucmVzb2x2ZSgpO251bGwhPXRoaXMuYyYmd2luZG93LmNsZWFyVGltZW91dCh0aGlzLmMpO3RoaXMuaj10aGlzLmk9dGhpcy5hPXRoaXMuYj1udWxsO3RoaXMuaD0hMTt0aGlzLmc9ITA7dGhpcy5jPXRoaXMuZj1udWxsO3JldHVybiBhLnRoZW4oZnVuY3Rpb24oKXtjYXN0LnJlY2VpdmVyLkNhc3RSZWNlaXZlck1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5zdG9wKCl9KX07TC5wcm90b3R5cGUuZGVzdHJveT1MLnByb3RvdHlwZS5vO1xyXG5mdW5jdGlvbiByZChhKXt2YXIgYj1jYXN0LnJlY2VpdmVyLkNhc3RSZWNlaXZlck1hbmFnZXIuZ2V0SW5zdGFuY2UoKTtiLm9uU2VuZGVyQ29ubmVjdGVkPWEudWIuYmluZChhKTtiLm9uU2VuZGVyRGlzY29ubmVjdGVkPWEudWIuYmluZChhKTtiLm9uU3lzdGVtVm9sdW1lQ2hhbmdlZD1hLlJiLmJpbmQoYSk7YS5mPWIuZ2V0Q2FzdE1lc3NhZ2VCdXMoXCJ1cm46eC1jYXN0OmNvbS5nb29nbGUuc2hha2EudjJcIik7YS5mLm9uTWVzc2FnZT1hLmVjLmJpbmQoYSk7Yi5zdGFydCgpOyRjLmZvckVhY2goZnVuY3Rpb24oYSl7dGhpcy5iLmFkZEV2ZW50TGlzdGVuZXIoYSx0aGlzLnhiLmJpbmQodGhpcyxcInZpZGVvXCIpKX0uYmluZChhKSk7ZWQuZm9yRWFjaChmdW5jdGlvbihhKXt0aGlzLmEuYWRkRXZlbnRMaXN0ZW5lcihhLHRoaXMueGIuYmluZCh0aGlzLFwicGxheWVyXCIpKX0uYmluZChhKSk7YS5hLkZiKDE5MjAsMTA4MCk7YS5hLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkaW5nXCIsZnVuY3Rpb24oKXt0aGlzLmc9XHJcbiExO3NkKHRoaXMpfS5iaW5kKGEpKTthLmEuYWRkRXZlbnRMaXN0ZW5lcihcInVubG9hZGluZ1wiLGZ1bmN0aW9uKCl7dGhpcy5nPSEwO3NkKHRoaXMpfS5iaW5kKGEpKTthLmIuYWRkRXZlbnRMaXN0ZW5lcihcImVuZGVkXCIsZnVuY3Rpb24oKXt3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpe3RoaXMuYiYmdGhpcy5iLmVuZGVkJiYodGhpcy5nPSEwLHNkKHRoaXMpKX0uYmluZCh0aGlzKSw1RTMpfS5iaW5kKGEpKX1rPUwucHJvdG90eXBlO2sudWI9ZnVuY3Rpb24oKXt0aGlzLmg9ISFjYXN0LnJlY2VpdmVyLkNhc3RSZWNlaXZlck1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5nZXRTZW5kZXJzKCkubGVuZ3RoO3NkKHRoaXMpfTtmdW5jdGlvbiBzZChhKXtQcm9taXNlLnJlc29sdmUoKS50aGVuKGZ1bmN0aW9uKCl7dGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBIKFwiY2FzdHN0YXR1c2NoYW5nZWRcIikpfS5iaW5kKGEpKX1cclxuZnVuY3Rpb24gdGQoYSxiLGMpe2Zvcih2YXIgZCBpbiBiLnBsYXllcilhLmFbZF0oYi5wbGF5ZXJbZF0pO2EuaihjKTtjPVByb21pc2UucmVzb2x2ZSgpO3ZhciBlPWEuYi5hdXRvcGxheTtiLm1hbmlmZXN0JiYoYS5iLmF1dG9wbGF5PSExLGM9YS5hLmxvYWQoYi5tYW5pZmVzdCxiLnN0YXJ0VGltZSksY1tcImNhdGNoXCJdKGZ1bmN0aW9uKGEpe3RoaXMuYS5kaXNwYXRjaEV2ZW50KG5ldyBIKFwiZXJyb3JcIix7ZGV0YWlsOmF9KSl9LmJpbmQoYSkpKTtjLnRoZW4oZnVuY3Rpb24oKXtmb3IodmFyIGEgaW4gYi52aWRlbyl7dmFyIGM9Yi52aWRlb1thXTt0aGlzLmJbYV09Y31mb3IoYSBpbiBiLnBsYXllckFmdGVyTG9hZCljPWIucGxheWVyQWZ0ZXJMb2FkW2FdLHRoaXMuYVthXShjKTt0aGlzLmIuYXV0b3BsYXk9ZTtiLm1hbmlmZXN0JiZ0aGlzLmIucGxheSgpfS5iaW5kKGEpKX1cclxuay54Yj1mdW5jdGlvbihhLGIpe3RoaXMuWmEoKTt1ZCh0aGlzLHt0eXBlOlwiZXZlbnRcIix0YXJnZXROYW1lOmEsZXZlbnQ6Yn0pfTtrLlphPWZ1bmN0aW9uKCl7bnVsbCE9dGhpcy5jJiZ3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMuYyk7dGhpcy5jPXdpbmRvdy5zZXRUaW1lb3V0KHRoaXMuWmEuYmluZCh0aGlzKSw1MDApO3ZhciBhPXt2aWRlbzp7fSxwbGF5ZXI6e319O2FkLmZvckVhY2goZnVuY3Rpb24oYil7YS52aWRlb1tiXT10aGlzLmJbYl19LmJpbmQodGhpcykpO2ZkLmZvckVhY2goZnVuY3Rpb24oYil7YS5wbGF5ZXJbYl09dGhpcy5hW2JdKCl9LmJpbmQodGhpcykpO3ZhciBiPWNhc3QucmVjZWl2ZXIuQ2FzdFJlY2VpdmVyTWFuYWdlci5nZXRJbnN0YW5jZSgpLmdldFN5c3RlbVZvbHVtZSgpO2ImJihhLnZpZGVvLnZvbHVtZT1iLmxldmVsLGEudmlkZW8ubXV0ZWQ9Yi5tdXRlZCk7dWQodGhpcyx7dHlwZTpcInVwZGF0ZVwiLHVwZGF0ZTphfSl9O1xyXG5rLlJiPWZ1bmN0aW9uKCl7dmFyIGE9Y2FzdC5yZWNlaXZlci5DYXN0UmVjZWl2ZXJNYW5hZ2VyLmdldEluc3RhbmNlKCkuZ2V0U3lzdGVtVm9sdW1lKCk7YSYmdWQodGhpcyx7dHlwZTpcInVwZGF0ZVwiLHVwZGF0ZTp7dmlkZW86e3ZvbHVtZTphLmxldmVsLG11dGVkOmEubXV0ZWR9fX0pO3VkKHRoaXMse3R5cGU6XCJldmVudFwiLHRhcmdldE5hbWU6XCJ2aWRlb1wiLGV2ZW50Ont0eXBlOlwidm9sdW1lY2hhbmdlXCJ9fSl9O1xyXG5rLmVjPWZ1bmN0aW9uKGEpe3ZhciBiPWxkKGEuZGF0YSk7c3dpdGNoKGIudHlwZSl7Y2FzZSBcImluaXRcIjp0ZCh0aGlzLGIuaW5pdFN0YXRlLGIuYXBwRGF0YSk7dGhpcy5aYSgpO2JyZWFrO2Nhc2UgXCJhcHBEYXRhXCI6dGhpcy5qKGIuYXBwRGF0YSk7YnJlYWs7Y2FzZSBcInNldFwiOnZhciBjPWIudGFyZ2V0TmFtZSxkPWIucHJvcGVydHksZT1iLnZhbHVlO2lmKFwidmlkZW9cIj09YylpZihiPWNhc3QucmVjZWl2ZXIuQ2FzdFJlY2VpdmVyTWFuYWdlci5nZXRJbnN0YW5jZSgpLFwidm9sdW1lXCI9PWQpe2Iuc2V0U3lzdGVtVm9sdW1lTGV2ZWwoZSk7YnJlYWt9ZWxzZSBpZihcIm11dGVkXCI9PWQpe2Iuc2V0U3lzdGVtVm9sdW1lTXV0ZWQoZSk7YnJlYWt9dGhpcy5pW2NdW2RdPWU7YnJlYWs7Y2FzZSBcImNhbGxcIjpjPWIudGFyZ2V0TmFtZTtkPWIubWV0aG9kTmFtZTtlPWIuYXJncztjPXRoaXMuaVtjXTtjW2RdLmFwcGx5KGMsZSk7YnJlYWs7Y2FzZSBcImFzeW5jQ2FsbFwiOmM9Yi50YXJnZXROYW1lLFxyXG5kPWIubWV0aG9kTmFtZSxlPWIuYXJncyxiPWIuaWQsYT1hLnNlbmRlcklkLGM9dGhpcy5pW2NdLGNbZF0uYXBwbHkoYyxlKS50aGVuKHRoaXMuRGIuYmluZCh0aGlzLGEsYixudWxsKSx0aGlzLkRiLmJpbmQodGhpcyxhLGIpKX19O2suRGI9ZnVuY3Rpb24oYSxiLGMpe3VkKHRoaXMse3R5cGU6XCJhc3luY0NvbXBsZXRlXCIsaWQ6YixlcnJvcjpjfSxhKX07ZnVuY3Rpb24gdWQoYSxiLGMpe2EuaCYmKGI9a2QoYiksYz9hLmYuZ2V0Q2FzdENoYW5uZWwoYykuc2VuZChiKTphLmYuYnJvYWRjYXN0KGIpKX07ZnVuY3Rpb24gdmQoYSxiKXt2YXIgYz1NKGEsYik7cmV0dXJuIDEhPWMubGVuZ3RoP251bGw6Y1swXX1mdW5jdGlvbiBNKGEsYil7cmV0dXJuIEFycmF5LnByb3RvdHlwZS5maWx0ZXIuY2FsbChhLmNoaWxkTm9kZXMsZnVuY3Rpb24oYSl7cmV0dXJuIGEudGFnTmFtZT09Yn0pfWZ1bmN0aW9uIHdkKGEpe3JldHVybihhPWEuZmlyc3RDaGlsZCkmJmEubm9kZVR5cGU9PU5vZGUuVEVYVF9OT0RFP2Eubm9kZVZhbHVlLnRyaW0oKTpudWxsfWZ1bmN0aW9uIE4oYSxiLGMsZCl7dmFyIGU9bnVsbDthPWEuZ2V0QXR0cmlidXRlKGIpO251bGwhPWEmJihlPWMoYSkpO3JldHVybiBudWxsPT1lP3ZvaWQgMCE9PWQ/ZDpudWxsOmV9ZnVuY3Rpb24geGQoYSl7aWYoIWEpcmV0dXJuIG51bGw7YT1EYXRlLnBhcnNlKGEpO3JldHVybiBpc05hTihhKT9udWxsOk1hdGguZmxvb3IoYS8xRTMpfVxyXG5mdW5jdGlvbiBPKGEpe2lmKCFhKXJldHVybiBudWxsO2E9L15QKD86KFswLTldKilZKT8oPzooWzAtOV0qKU0pPyg/OihbMC05XSopRCk/KD86VCg/OihbMC05XSopSCk/KD86KFswLTldKilNKT8oPzooWzAtOS5dKilTKT8pPyQvLmV4ZWMoYSk7aWYoIWEpcmV0dXJuIG51bGw7YT0zMTUzNkUzKk51bWJlcihhWzFdfHxudWxsKSsyNTkyRTMqTnVtYmVyKGFbMl18fG51bGwpKzg2NDAwKk51bWJlcihhWzNdfHxudWxsKSszNjAwKk51bWJlcihhWzRdfHxudWxsKSs2MCpOdW1iZXIoYVs1XXx8bnVsbCkrTnVtYmVyKGFbNl18fG51bGwpO3JldHVybiBpc0Zpbml0ZShhKT9hOm51bGx9ZnVuY3Rpb24geWQoYSl7dmFyIGI9LyhbMC05XSspLShbMC05XSspLy5leGVjKGEpO2lmKCFiKXJldHVybiBudWxsO2E9TnVtYmVyKGJbMV0pO2lmKCFpc0Zpbml0ZShhKSlyZXR1cm4gbnVsbDtiPU51bWJlcihiWzJdKTtyZXR1cm4gaXNGaW5pdGUoYik/e3N0YXJ0OmEsZW5kOmJ9Om51bGx9XHJcbmZ1bmN0aW9uIHpkKGEpe2E9TnVtYmVyKGEpO3JldHVybiBhJTE/bnVsbDphfWZ1bmN0aW9uIEFkKGEpe2E9TnVtYmVyKGEpO3JldHVybiEoYSUxKSYmMDxhP2E6bnVsbH1mdW5jdGlvbiBCZChhKXthPU51bWJlcihhKTtyZXR1cm4hKGElMSkmJjA8PWE/YTpudWxsfTt2YXIgQ2Q9e1widXJuOnV1aWQ6MTA3N2VmZWMtYzBiMi00ZDAyLWFjZTMtM2MxZTUyZTJmYjRiXCI6XCJvcmcudzMuY2xlYXJrZXlcIixcInVybjp1dWlkOmVkZWY4YmE5LTc5ZDYtNGFjZS1hM2M4LTI3ZGNkNTFkMjFlZFwiOlwiY29tLndpZGV2aW5lLmFscGhhXCIsXCJ1cm46dXVpZDo5YTA0ZjA3OS05ODQwLTQyODYtYWI5Mi1lNjViZTA4ODVmOTVcIjpcImNvbS5taWNyb3NvZnQucGxheXJlYWR5XCIsXCJ1cm46dXVpZDpmMjM5ZTc2OS1lZmEzLTQ4NTAtOWMxNi1hOTAzYzY5MzJlZmJcIjpcImNvbS5hZG9iZS5wcmltZXRpbWVcIn07XHJcbmZ1bmN0aW9uIERkKGEsYil7dmFyIGM9RWQoYSksZD1udWxsLGU9Yy5maWx0ZXIoZnVuY3Rpb24oYSl7cmV0dXJuXCJ1cm46bXBlZzpkYXNoOm1wNHByb3RlY3Rpb246MjAxMVwiPT1hLkNiPyhkPWEuaW5pdHx8ZCwhMSk6ITB9KSxmPWMubWFwKGZ1bmN0aW9uKGEpe3JldHVybiBhLmtleUlkfSkuZmlsdGVyKERhKSxnPW51bGw7aWYoMDxmLmxlbmd0aCYmKGc9ZlswXSxmLnNvbWUoRWEoZykpKSl0aHJvdyBuZXcgcSg0LDQwMTApO2Y9W107MDxlLmxlbmd0aD8oZj1GZChkLGIsZSksZi5sZW5ndGh8fChmPVtIZChcIlwiLGQpXSkpOjA8Yy5sZW5ndGgmJihmPUMoQ2QpLm1hcChmdW5jdGlvbihhKXtyZXR1cm4gSGQoYSxkKX0pKTtyZXR1cm57a2I6ZyxkZDpkLGRybUluZm9zOmYsbGI6ITB9fVxyXG5mdW5jdGlvbiBJZChhLGIsYyl7dmFyIGQ9RGQoYSxiKTtpZihjLmxiKXthPTE9PWMuZHJtSW5mb3MubGVuZ3RoJiYhYy5kcm1JbmZvc1swXS5rZXlTeXN0ZW07Yj0hZC5kcm1JbmZvcy5sZW5ndGg7aWYoIWMuZHJtSW5mb3MubGVuZ3RofHxhJiYhYiljLmRybUluZm9zPWQuZHJtSW5mb3M7Yy5sYj0hMX1lbHNlIGlmKDA8ZC5kcm1JbmZvcy5sZW5ndGgmJihjLmRybUluZm9zPWMuZHJtSW5mb3MuZmlsdGVyKGZ1bmN0aW9uKGEpe3JldHVybiBkLmRybUluZm9zLnNvbWUoZnVuY3Rpb24oYil7cmV0dXJuIGIua2V5U3lzdGVtPT1hLmtleVN5c3RlbX0pfSksIWMuZHJtSW5mb3MubGVuZ3RoKSl0aHJvdyBuZXcgcSg0LDQwMDgpO3JldHVybiBkLmtifHxjLmtifVxyXG5mdW5jdGlvbiBIZChhLGIpe3JldHVybntrZXlTeXN0ZW06YSxsaWNlbnNlU2VydmVyVXJpOlwiXCIsZGlzdGluY3RpdmVJZGVudGlmaWVyUmVxdWlyZWQ6ITEscGVyc2lzdGVudFN0YXRlUmVxdWlyZWQ6ITEsYXVkaW9Sb2J1c3RuZXNzOlwiXCIsdmlkZW9Sb2J1c3RuZXNzOlwiXCIsc2VydmVyQ2VydGlmaWNhdGU6bnVsbCxpbml0RGF0YTpifHxbXX19ZnVuY3Rpb24gRmQoYSxiLGMpe3JldHVybiBjLm1hcChmdW5jdGlvbihjKXt2YXIgZT1DZFtjLkNiXTtyZXR1cm4gZT9bSGQoZSxjLmluaXR8fGEpXTpiKGMubm9kZSl8fFtdfSkucmVkdWNlKHQsW10pfVxyXG5mdW5jdGlvbiBFZChhKXtyZXR1cm4gYS5tYXAoZnVuY3Rpb24oYSl7dmFyIGM9YS5nZXRBdHRyaWJ1dGUoXCJzY2hlbWVJZFVyaVwiKSxkPWEuZ2V0QXR0cmlidXRlKFwiY2VuYzpkZWZhdWx0X0tJRFwiKSxlPU0oYSxcImNlbmM6cHNzaFwiKS5tYXAod2QpO2lmKCFjKXJldHVybiBudWxsO2M9Yy50b0xvd2VyQ2FzZSgpO2lmKGQmJihkPWQucmVwbGFjZSgvLS9nLFwiXCIpLnRvTG93ZXJDYXNlKCksMDw9ZC5pbmRleE9mKFwiIFwiKSkpdGhyb3cgbmV3IHEoNCw0MDA5KTt2YXIgZj1bXTt0cnl7Zj1lLm1hcChmdW5jdGlvbihhKXtyZXR1cm57aW5pdERhdGFUeXBlOlwiY2VuY1wiLGluaXREYXRhOlhhKGEpfX0pfWNhdGNoKGcpe3Rocm93IG5ldyBxKDQsNDAwNyk7fXJldHVybntub2RlOmEsQ2I6YyxrZXlJZDpkLGluaXQ6MDxmLmxlbmd0aD9mOm51bGx9fSkuZmlsdGVyKERhKX07dmFyIEpkPTEvMTU7ZnVuY3Rpb24gS2QoYSxiLGMsZCxlKXtudWxsIT09ZSYmKGU9TWF0aC5yb3VuZChlKSk7dmFyIGY9e1JlcHJlc2VudGF0aW9uSUQ6YixOdW1iZXI6YyxCYW5kd2lkdGg6ZCxUaW1lOmV9O3JldHVybiBhLnJlcGxhY2UoL1xcJChSZXByZXNlbnRhdGlvbklEfE51bWJlcnxCYW5kd2lkdGh8VGltZSk/KD86JTAoWzAtOV0rKWQpP1xcJC9nLGZ1bmN0aW9uKGEsYixjKXtpZihcIiQkXCI9PWEpcmV0dXJuXCIkXCI7dmFyIGQ9ZltiXTtpZihudWxsPT1kKXJldHVybiBhO1wiUmVwcmVzZW50YXRpb25JRFwiPT1iJiZjJiYoYz12b2lkIDApO2E9ZC50b1N0cmluZygpO2M9d2luZG93LnBhcnNlSW50KGMsMTApfHwxO3JldHVybiBBcnJheShNYXRoLm1heCgwLGMtYS5sZW5ndGgpKzEpLmpvaW4oXCIwXCIpK2F9KX1cclxuZnVuY3Rpb24gTGQoYSxiLGMpe2lmKGMubGVuZ3RoKXt2YXIgZD1jWzBdO2Quc3RhcnRUaW1lPD1KZCYmKGNbMF09bmV3IEcoZC5wb3NpdGlvbiwwLGQuZW5kVGltZSxkLmEsZC5MLGQuRCkpO2F8fChhPWNbYy5sZW5ndGgtMV0sYS5zdGFydFRpbWU+Ynx8KGNbYy5sZW5ndGgtMV09bmV3IEcoYS5wb3NpdGlvbixhLnN0YXJ0VGltZSxiLGEuYSxhLkwsYS5EKSkpfX1mdW5jdGlvbiBQKGEsYil7aWYoIWIubGVuZ3RoKXJldHVybiBhO3ZhciBjPWIubWFwKGZ1bmN0aW9uKGEpe3JldHVybiBuZXcgb2EoYSl9KTtyZXR1cm4gYS5tYXAoZnVuY3Rpb24oYSl7cmV0dXJuIG5ldyBvYShhKX0pLm1hcChmdW5jdGlvbihhKXtyZXR1cm4gYy5tYXAoYS5yZXNvbHZlLmJpbmQoYSkpfSkucmVkdWNlKHQsW10pLm1hcChmdW5jdGlvbihhKXtyZXR1cm4gYS50b1N0cmluZygpfSl9XHJcbmZ1bmN0aW9uIE1kKGEsYil7dmFyIGM9UShhLGIsXCJ0aW1lc2NhbGVcIiksZD0xO2MmJihkPUFkKGMpfHwxKTtjPVEoYSxiLFwiZHVyYXRpb25cIik7KGM9QWQoY3x8XCJcIikpJiYoYy89ZCk7dmFyIGU9UShhLGIsXCJzdGFydE51bWJlclwiKSxmPVEoYSxiLFwicHJlc2VudGF0aW9uVGltZU9mZnNldFwiKSxnPUJkKGV8fFwiXCIpO2lmKG51bGw9PWV8fG51bGw9PWcpZz0xO3ZhciBoPU5kKGEsYixcIlNlZ21lbnRUaW1lbGluZVwiKSxlPW51bGw7aWYoaCl7Zm9yKHZhciBlPWQsbT1OdW1iZXIoZiksbj1hLkguZHVyYXRpb258fEluZmluaXR5LGg9TShoLFwiU1wiKSxyPVtdLHU9MCxBPTA7QTxoLmxlbmd0aDsrK0Epe3ZhciB4PWhbQV0sSz1OKHgsXCJ0XCIsQmQpLGpiPU4oeCxcImRcIixCZCkseD1OKHgsXCJyXCIsemQpO251bGwhPUsmJihLLT1tKTtpZighamIpYnJlYWs7Sz1udWxsIT1LP0s6dTt4PXh8fDA7aWYoMD54KWlmKEErMTxoLmxlbmd0aCl7eD1OKGhbQSsxXSxcInRcIixCZCk7aWYobnVsbD09eClicmVhaztlbHNlIGlmKEs+PVxyXG54KWJyZWFrO3g9TWF0aC5jZWlsKCh4LUspL2piKS0xfWVsc2V7aWYoSW5maW5pdHk9PW4pYnJlYWs7ZWxzZSBpZihLL2U+PW4pYnJlYWs7eD1NYXRoLmNlaWwoKG4qZS1LKS9qYiktMX0wPHIubGVuZ3RoJiZLIT11JiYocltyLmxlbmd0aC0xXS5lbmQ9Sy9lKTtmb3IodmFyIEdkPTA7R2Q8PXg7KytHZCl1PUsramIsci5wdXNoKHtzdGFydDpLL2UsZW5kOnUvZX0pLEs9dX1lPXJ9cmV0dXJue0lhOmQsRjpjLGlhOmcscHJlc2VudGF0aW9uVGltZU9mZnNldDpOdW1iZXIoZikvZHx8MCxCOmV9fWZ1bmN0aW9uIFEoYSxiLGMpe3JldHVybltiKGEudSksYihhLlApLGIoYS5LKV0uZmlsdGVyKERhKS5tYXAoZnVuY3Rpb24oYSl7cmV0dXJuIGEuZ2V0QXR0cmlidXRlKGMpfSkucmVkdWNlKGZ1bmN0aW9uKGEsYil7cmV0dXJuIGF8fGJ9KX1cclxuZnVuY3Rpb24gTmQoYSxiLGMpe3JldHVybltiKGEudSksYihhLlApLGIoYS5LKV0uZmlsdGVyKERhKS5tYXAoZnVuY3Rpb24oYSl7cmV0dXJuIHZkKGEsYyl9KS5yZWR1Y2UoZnVuY3Rpb24oYSxiKXtyZXR1cm4gYXx8Yn0pfTtmdW5jdGlvbiBPZChhKXt0aGlzLmI9YTt0aGlzLmM9MD09UGQ7dGhpcy5hPTB9dmFyIFBkPTE7ZnVuY3Rpb24gUWQoYSl7cmV0dXJuIGEuYTxhLmIuYnl0ZUxlbmd0aH1mdW5jdGlvbiBSZChhKXt0cnl7dmFyIGI9YS5iLmdldFVpbnQ4KGEuYSl9Y2F0Y2goYyl7U2QoKX1hLmErPTE7cmV0dXJuIGJ9ZnVuY3Rpb24gVGQoYSl7dHJ5e3ZhciBiPWEuYi5nZXRVaW50MTYoYS5hLGEuYyl9Y2F0Y2goYyl7U2QoKX1hLmErPTI7cmV0dXJuIGJ9ZnVuY3Rpb24gUihhKXt0cnl7dmFyIGI9YS5iLmdldFVpbnQzMihhLmEsYS5jKX1jYXRjaChjKXtTZCgpfWEuYSs9NDtyZXR1cm4gYn1cclxuZnVuY3Rpb24gVWQoYSl7dmFyIGIsYzt0cnl7YS5jPyhiPWEuYi5nZXRVaW50MzIoYS5hLCEwKSxjPWEuYi5nZXRVaW50MzIoYS5hKzQsITApKTooYz1hLmIuZ2V0VWludDMyKGEuYSwhMSksYj1hLmIuZ2V0VWludDMyKGEuYSs0LCExKSl9Y2F0Y2goZCl7U2QoKX1pZigyMDk3MTUxPGMpdGhyb3cgbmV3IHEoMywzMDAxKTthLmErPTg7cmV0dXJuIGMqTWF0aC5wb3coMiwzMikrYn1mdW5jdGlvbiBWZChhLGIpe2EuYStiPmEuYi5ieXRlTGVuZ3RoJiZTZCgpO3ZhciBjPWEuYi5idWZmZXIuc2xpY2UoYS5hLGEuYStiKTthLmErPWI7cmV0dXJuIG5ldyBVaW50OEFycmF5KGMpfWZ1bmN0aW9uIFMoYSxiKXthLmErYj5hLmIuYnl0ZUxlbmd0aCYmU2QoKTthLmErPWJ9XHJcbmZ1bmN0aW9uIFdkKGEpe3ZhciBiPWEuYTt0cnl7Zm9yKDtRZChhKSYmYS5iLmdldFVpbnQ4KGEuYSk7KWEuYSs9MX1jYXRjaChjKXtTZCgpfWI9YS5iLmJ1ZmZlci5zbGljZShiLGEuYSk7YS5hKz0xO3JldHVybiBEKGIpfWZ1bmN0aW9uIFNkKCl7dGhyb3cgbmV3IHEoMywzRTMpO307ZnVuY3Rpb24gWGQoYSxiKXtmb3IoO1FkKGIpOyl7dmFyIGM9Yi5hLGQ9UihiKSxlPVIoYik7MT09ZD9kPVVkKGIpOmR8fChkPWIuYi5ieXRlTGVuZ3RoLWMpO2lmKGU9PWEpcmV0dXJuIGQ7UyhiLGQtKGIuYS1jKSl9cmV0dXJuLTF9ZnVuY3Rpb24gWWQoYSxiKXtmb3IodmFyIGM9bmV3IE9kKG5ldyBEYXRhVmlldyhhKSksZD1bWzE4MzYwMTk1NzQsMF0sWzE5NTM2NTMwOTksMF0sWzE4MzUyOTcxMjEsMF0sWzE4MzU2MjYwODYsMF0sWzE5MzcwMDcyMTIsMF0sWzE5MzcwMTE1NTYsOF0sW2IsMF1dLGU9LTEsZj0wO2Y8ZC5sZW5ndGg7ZisrKXt2YXIgZz1kW2ZdWzFdLGU9WGQoZFtmXVswXSxjKTtpZigtMT09ZSlyZXR1cm4tMTtTKGMsZyl9cmV0dXJuIGV9O2Z1bmN0aW9uIFpkKGEsYixjLGQpe3ZhciBlPVtdO2E9bmV3IE9kKG5ldyBEYXRhVmlldyhhKSk7dmFyIGY9WGQoMTkzNjI4Njg0MCxhKTtpZigtMT09Zil0aHJvdyBuZXcgcSgzLDMwMDQpO3ZhciBnPVJkKGEpO1MoYSwzKTtTKGEsNCk7dmFyIGg9UihhKTtpZighaCl0aHJvdyBuZXcgcSgzLDMwMDUpO3ZhciBtLG47Zz8obT1VZChhKSxuPVVkKGEpKToobT1SKGEpLG49UihhKSk7UyhhLDIpO2c9VGQoYSk7ZD1tLWQ7Yj1iK2Yrbjtmb3IoZj0wO2Y8ZztmKyspe209UihhKTtuPShtJjIxNDc0ODM2NDgpPj4+MzE7bSY9MjE0NzQ4MzY0Nzt2YXIgcj1SKGEpO1MoYSw0KTtpZigxPT1uKXRocm93IG5ldyBxKDMsMzAwNik7ZS5wdXNoKG5ldyBHKGUubGVuZ3RoLGQvaCwoZCtyKS9oLGZ1bmN0aW9uKCl7cmV0dXJuIGN9LGIsYittLTEpKTtkKz1yO2IrPW19cmV0dXJuIGV9O2Z1bmN0aW9uIFQoYSl7dGhpcy5hPWF9bChcInNoYWthLm1lZGlhLlNlZ21lbnRJbmRleFwiLFQpO1QucHJvdG90eXBlLm89ZnVuY3Rpb24oKXt0aGlzLmE9bnVsbDtyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCl9O1QucHJvdG90eXBlLmRlc3Ryb3k9VC5wcm90b3R5cGUubztULnByb3RvdHlwZS5maW5kPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj10aGlzLmEubGVuZ3RoLTE7MDw9YjstLWIpe3ZhciBjPXRoaXMuYVtiXTtpZihhPj1jLnN0YXJ0VGltZSYmYTxjLmVuZFRpbWUpcmV0dXJuIGMucG9zaXRpb259cmV0dXJuIG51bGx9O1QucHJvdG90eXBlLmZpbmQ9VC5wcm90b3R5cGUuZmluZDtULnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24oYSl7aWYoIXRoaXMuYS5sZW5ndGgpcmV0dXJuIG51bGw7YS09dGhpcy5hWzBdLnBvc2l0aW9uO3JldHVybiAwPmF8fGE+PXRoaXMuYS5sZW5ndGg/bnVsbDp0aGlzLmFbYV19O1QucHJvdG90eXBlLmdldD1ULnByb3RvdHlwZS5nZXQ7XHJcblQucHJvdG90eXBlLldhPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1bXSxjPTAsZD0wO2M8dGhpcy5hLmxlbmd0aCYmZDxhLmxlbmd0aDspe3ZhciBlPXRoaXMuYVtjXSxmPWFbZF07ZS5zdGFydFRpbWU8Zi5zdGFydFRpbWU/KGIucHVzaChlKSxjKyspOihlLnN0YXJ0VGltZT5mLnN0YXJ0VGltZXx8KC4xPE1hdGguYWJzKGUuZW5kVGltZS1mLmVuZFRpbWUpP2IucHVzaChmKTpiLnB1c2goZSksYysrKSxkKyspfWZvcig7Yzx0aGlzLmEubGVuZ3RoOyliLnB1c2godGhpcy5hW2MrK10pO2lmKGIubGVuZ3RoKWZvcihjPWJbYi5sZW5ndGgtMV0ucG9zaXRpb24rMTtkPGEubGVuZ3RoOylmPWFbZCsrXSxmPW5ldyBHKGMrKyxmLnN0YXJ0VGltZSxmLmVuZFRpbWUsZi5hLGYuTCxmLkQpLGIucHVzaChmKTtlbHNlIGI9YTt0aGlzLmE9Yn07VC5wcm90b3R5cGUubWVyZ2U9VC5wcm90b3R5cGUuV2E7XHJcblQucHJvdG90eXBlLlJhPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0wO2I8dGhpcy5hLmxlbmd0aCYmISh0aGlzLmFbYl0uZW5kVGltZT5hKTsrK2IpO3RoaXMuYS5zcGxpY2UoMCxiKX07VC5wcm90b3R5cGUuZXZpY3Q9VC5wcm90b3R5cGUuUmE7ZnVuY3Rpb24gJGQoYSl7dGhpcy5iPWE7dGhpcy5hPW5ldyBPZChhKTthZXx8KGFlPVtuZXcgVWludDhBcnJheShbMjU1XSksbmV3IFVpbnQ4QXJyYXkoWzEyNywyNTVdKSxuZXcgVWludDhBcnJheShbNjMsMjU1LDI1NV0pLG5ldyBVaW50OEFycmF5KFszMSwyNTUsMjU1LDI1NV0pLG5ldyBVaW50OEFycmF5KFsxNSwyNTUsMjU1LDI1NSwyNTVdKSxuZXcgVWludDhBcnJheShbNywyNTUsMjU1LDI1NSwyNTUsMjU1XSksbmV3IFVpbnQ4QXJyYXkoWzMsMjU1LDI1NSwyNTUsMjU1LDI1NSwyNTVdKSxuZXcgVWludDhBcnJheShbMSwyNTUsMjU1LDI1NSwyNTUsMjU1LDI1NSwyNTVdKV0pfXZhciBhZTtcclxuZnVuY3Rpb24gYmUoYSl7dmFyIGI7Yj1jZShhKTtpZig3PGIubGVuZ3RoKXRocm93IG5ldyBxKDMsMzAwMik7Zm9yKHZhciBjPTAsZD0wO2Q8Yi5sZW5ndGg7ZCsrKWM9MjU2KmMrYltkXTtiPWM7Yz1jZShhKTthOntmb3IoZD0wO2Q8YWUubGVuZ3RoO2QrKylpZigkYShjLGFlW2RdKSl7ZD0hMDticmVhayBhfWQ9ITF9aWYoZCljPWEuYi5ieXRlTGVuZ3RoLWEuYS5hO2Vsc2V7aWYoOD09Yy5sZW5ndGgmJmNbMV0mMjI0KXRocm93IG5ldyBxKDMsMzAwMSk7Zm9yKHZhciBkPWNbMF0mKDE8PDgtYy5sZW5ndGgpLTEsZT0xO2U8Yy5sZW5ndGg7ZSsrKWQ9MjU2KmQrY1tlXTtjPWR9Yz1hLmEuYStjPD1hLmIuYnl0ZUxlbmd0aD9jOmEuYi5ieXRlTGVuZ3RoLWEuYS5hO2Q9bmV3IERhdGFWaWV3KGEuYi5idWZmZXIsYS5iLmJ5dGVPZmZzZXQrYS5hLmEsYyk7UyhhLmEsYyk7cmV0dXJuIG5ldyBkZShiLGQpfVxyXG5mdW5jdGlvbiBjZShhKXt2YXIgYj1SZChhLmEpLGM7Zm9yKGM9MTs4Pj1jJiYhKGImMTw8OC1jKTtjKyspO2lmKDg8Yyl0aHJvdyBuZXcgcSgzLDMwMDIpO3ZhciBkPW5ldyBVaW50OEFycmF5KGMpO2RbMF09Yjtmb3IoYj0xO2I8YztiKyspZFtiXT1SZChhLmEpO3JldHVybiBkfWZ1bmN0aW9uIGRlKGEsYil7dGhpcy5pZD1hO3RoaXMuYT1ifWZ1bmN0aW9uIGVlKGEpe2lmKDg8YS5hLmJ5dGVMZW5ndGgpdGhyb3cgbmV3IHEoMywzMDAyKTtpZig4PT1hLmEuYnl0ZUxlbmd0aCYmYS5hLmdldFVpbnQ4KDApJjIyNCl0aHJvdyBuZXcgcSgzLDMwMDEpO2Zvcih2YXIgYj0wLGM9MDtjPGEuYS5ieXRlTGVuZ3RoO2MrKyl2YXIgZD1hLmEuZ2V0VWludDgoYyksYj0yNTYqYitkO3JldHVybiBifTtmdW5jdGlvbiBmZShhLGIsYyxkLGUsZil7ZnVuY3Rpb24gZygpe3JldHVybiBlfXZhciBoPVtdO2E9bmV3ICRkKGEuYSk7Zm9yKHZhciBtPS0xLG49LTE7UWQoYS5hKTspe3ZhciByPWJlKGEpO2lmKDE4Nz09ci5pZCl7dmFyIHU9Z2Uocik7dSYmKHI9YyoodS5ZYy1mKSx1PWIrdS53YywwPD1tJiZoLnB1c2gobmV3IEcoaC5sZW5ndGgsbSxyLGcsbix1LTEpKSxtPXIsbj11KX19MDw9bSYmaC5wdXNoKG5ldyBHKGgubGVuZ3RoLG0sZCxnLG4sbnVsbCkpO3JldHVybiBofWZ1bmN0aW9uIGdlKGEpe3ZhciBiPW5ldyAkZChhLmEpO2E9YmUoYik7aWYoMTc5IT1hLmlkKXRocm93IG5ldyBxKDMsMzAxMyk7YT1lZShhKTtiPWJlKGIpO2lmKDE4MyE9Yi5pZCl0aHJvdyBuZXcgcSgzLDMwMTIpO2Zvcih2YXIgYj1uZXcgJGQoYi5hKSxjPTA7UWQoYi5hKTspe3ZhciBkPWJlKGIpO2lmKDI0MT09ZC5pZCl7Yz1lZShkKTticmVha319cmV0dXJue1ljOmEsd2M6Y319O2Z1bmN0aW9uIGhlKGEsYil7dmFyIGM9TmQoYSxiLFwiSW5pdGlhbGl6YXRpb25cIik7aWYoIWMpcmV0dXJuIG51bGw7dmFyIGQ9YS51Lk0sZT1jLmdldEF0dHJpYnV0ZShcInNvdXJjZVVSTFwiKTtlJiYoZD1QKGEudS5NLFtlXSkpO3ZhciBlPTAsZj1udWxsO2lmKGM9TihjLFwicmFuZ2VcIix5ZCkpZT1jLnN0YXJ0LGY9Yy5lbmQ7cmV0dXJuIG5ldyBWYihmdW5jdGlvbigpe3JldHVybiBkfSxlLGYpfVxyXG5mdW5jdGlvbiBpZShhLGIpe3ZhciBjPVEoYSxqZSxcInByZXNlbnRhdGlvblRpbWVPZmZzZXRcIiksZD1oZShhLGplKSxlO2U9TnVtYmVyKGMpO3ZhciBmPWEudS5taW1lVHlwZS5zcGxpdChcIi9cIilbMV07aWYoXCJ0ZXh0XCIhPWEudS5jb250ZW50VHlwZSYmXCJtcDRcIiE9ZiYmXCJ3ZWJtXCIhPWYpdGhyb3cgbmV3IHEoNCw0MDA2KTtpZihcIndlYm1cIj09ZiYmIWQpdGhyb3cgbmV3IHEoNCw0MDA1KTt2YXIgZz1OZChhLGplLFwiUmVwcmVzZW50YXRpb25JbmRleFwiKSxoPVEoYSxqZSxcImluZGV4UmFuZ2VcIiksbT1hLnUuTSxoPXlkKGh8fFwiXCIpO2lmKGcpe3ZhciBuPWcuZ2V0QXR0cmlidXRlKFwic291cmNlVVJMXCIpO24mJihtPVAoYS51Lk0sW25dKSk7aD1OKGcsXCJyYW5nZVwiLHlkLGgpfWlmKCFoKXRocm93IG5ldyBxKDQsNDAwMik7ZT1rZShhLGIsZCxtLGguc3RhcnQsaC5lbmQsZixlKTtyZXR1cm57Y3JlYXRlU2VnbWVudEluZGV4OmUuY3JlYXRlU2VnbWVudEluZGV4LGZpbmRTZWdtZW50UG9zaXRpb246ZS5maW5kU2VnbWVudFBvc2l0aW9uLFxyXG5nZXRTZWdtZW50UmVmZXJlbmNlOmUuZ2V0U2VnbWVudFJlZmVyZW5jZSxpbml0U2VnbWVudFJlZmVyZW5jZTpkLHByZXNlbnRhdGlvblRpbWVPZmZzZXQ6TnVtYmVyKGMpfHwwfX1cclxuZnVuY3Rpb24ga2UoYSxiLGMsZCxlLGYsZyxoKXt2YXIgbT1hLnByZXNlbnRhdGlvblRpbWVsaW5lLG49YS5ILnN0YXJ0LHI9YS5ILmR1cmF0aW9uLHU9YixBPW51bGw7cmV0dXJue2NyZWF0ZVNlZ21lbnRJbmRleDpmdW5jdGlvbigpe3ZhciBiPVt1KGQsZSxmKSxcIndlYm1cIj09Zz91KGMuYSgpLGMuTCxjLkQpOm51bGxdO3U9bnVsbDtyZXR1cm4gUHJvbWlzZS5hbGwoYikudGhlbihmdW5jdGlvbihiKXt2YXIgYyxmPWJbMF07Yj1iWzFdfHxudWxsO2lmKFwibXA0XCI9PWcpZj1aZChmLGUsZCxoKTtlbHNle2I9bmV3ICRkKG5ldyBEYXRhVmlldyhiKSk7aWYoNDQwNzg2ODUxIT1iZShiKS5pZCl0aHJvdyBuZXcgcSgzLDMwMDgpO3ZhciB1PWJlKGIpO2lmKDQwODEyNTU0MyE9dS5pZCl0aHJvdyBuZXcgcSgzLDMwMDkpO2I9dS5hLmJ5dGVPZmZzZXQ7dT1uZXcgJGQodS5hKTtmb3IoYz1udWxsO1FkKHUuYSk7KXt2YXIgeD1iZSh1KTtpZigzNTcxNDkwMzA9PXguaWQpe2M9eDticmVha319aWYoIWMpdGhyb3cgbmV3IHEoMyxcclxuMzAxMCk7dT1uZXcgJGQoYy5hKTtjPTFFNjtmb3IoeD1udWxsO1FkKHUuYSk7KXt2YXIgb2I9YmUodSk7aWYoMjgwNzcyOT09b2IuaWQpYz1lZShvYik7ZWxzZSBpZigxNzU0NT09b2IuaWQpaWYoeD1vYiw0PT14LmEuYnl0ZUxlbmd0aCl4PXguYS5nZXRGbG9hdDMyKDApO2Vsc2UgaWYoOD09eC5hLmJ5dGVMZW5ndGgpeD14LmEuZ2V0RmxvYXQ2NCgwKTtlbHNlIHRocm93IG5ldyBxKDMsMzAwMyk7fWlmKG51bGw9PXgpdGhyb3cgbmV3IHEoMywzMDExKTt1PWMvMUU5O2M9eCp1O2Y9YmUobmV3ICRkKG5ldyBEYXRhVmlldyhmKSkpO2lmKDQ3NTI0OTUxNSE9Zi5pZCl0aHJvdyBuZXcgcSgzLDMwMDcpO2Y9ZmUoZixiLHUsYyxkLGgpfUxkKGEuUWEscixmKTttLkVhKG4sZik7QT1uZXcgVChmKX0pfSxmaW5kU2VnbWVudFBvc2l0aW9uOmZ1bmN0aW9uKGEpe3JldHVybiBBLmZpbmQoYSl9LGdldFNlZ21lbnRSZWZlcmVuY2U6ZnVuY3Rpb24oYSl7cmV0dXJuIEEuZ2V0KGEpfX19XHJcbmZ1bmN0aW9uIGplKGEpe3JldHVybiBhLkdhfTtmdW5jdGlvbiBsZShhLGIpe3ZhciBjPWhlKGEsbWUpLGQ7ZD1uZShhKTt2YXIgZT1NZChhLG1lKSxmPWUuaWE7Znx8KGY9MSk7dmFyIGc9MDtlLkY/Zz1lLkYqKGYtMSktZS5wcmVzZW50YXRpb25UaW1lT2Zmc2V0OmUuQiYmMDxlLkIubGVuZ3RoJiYoZz1lLkJbMF0uc3RhcnQpO2Q9e0Y6ZS5GLHN0YXJ0VGltZTpnLGlhOmYscHJlc2VudGF0aW9uVGltZU9mZnNldDplLnByZXNlbnRhdGlvblRpbWVPZmZzZXQsQjplLkIsdWE6ZH07aWYoIWQuRiYmIWQuQiYmMTxkLnVhLmxlbmd0aCl0aHJvdyBuZXcgcSg0LDQwMDIpO2lmKCFkLkYmJiFhLkguZHVyYXRpb24mJiFkLkImJjE9PWQudWEubGVuZ3RoKXRocm93IG5ldyBxKDQsNDAwMik7aWYoZC5CJiYhZC5CLmxlbmd0aCl0aHJvdyBuZXcgcSg0LDQwMDIpO2Y9ZT1udWxsO2EuSy5pZCYmYS51LmlkJiYoZj1hLksuaWQrXCIsXCIrYS51LmlkLGU9YltmXSk7Zz1vZShhLkguZHVyYXRpb24sZC5pYSxhLnUuTSxkKTtMZChhLlFhLGEuSC5kdXJhdGlvbixcclxuZyk7ZT8oZS5XYShnKSxlLlJhKGEucHJlc2VudGF0aW9uVGltZWxpbmUuc2EoKS1hLkguc3RhcnQpKTooYS5wcmVzZW50YXRpb25UaW1lbGluZS5FYShhLkguc3RhcnQsZyksZT1uZXcgVChnKSxmJiYoYltmXT1lKSk7cmV0dXJue2NyZWF0ZVNlZ21lbnRJbmRleDpQcm9taXNlLnJlc29sdmUuYmluZChQcm9taXNlKSxmaW5kU2VnbWVudFBvc2l0aW9uOmUuZmluZC5iaW5kKGUpLGdldFNlZ21lbnRSZWZlcmVuY2U6ZS5nZXQuYmluZChlKSxpbml0U2VnbWVudFJlZmVyZW5jZTpjLHByZXNlbnRhdGlvblRpbWVPZmZzZXQ6ZC5wcmVzZW50YXRpb25UaW1lT2Zmc2V0fX1mdW5jdGlvbiBtZShhKXtyZXR1cm4gYS4kfVxyXG5mdW5jdGlvbiBvZShhLGIsYyxkKXt2YXIgZT1kLnVhLmxlbmd0aDtkLkImJmQuQi5sZW5ndGghPWQudWEubGVuZ3RoJiYoZT1NYXRoLm1pbihkLkIubGVuZ3RoLGQudWEubGVuZ3RoKSk7Zm9yKHZhciBmPVtdLGc9ZC5zdGFydFRpbWUsaD0wO2g8ZTtoKyspe3ZhciBtPWQudWFbaF0sbj1QKGMsW20uYWNdKSxyO3I9bnVsbCE9ZC5GP2crZC5GOmQuQj9kLkJbaF0uZW5kOmcrYTtmLnB1c2gobmV3IEcoaCtiLGcscixmdW5jdGlvbihhKXtyZXR1cm4gYX0uYmluZChudWxsLG4pLG0uc3RhcnQsbS5lbmQpKTtnPXJ9cmV0dXJuIGZ9XHJcbmZ1bmN0aW9uIG5lKGEpe3JldHVyblthLnUuJCxhLlAuJCxhLksuJF0uZmlsdGVyKERhKS5tYXAoZnVuY3Rpb24oYSl7cmV0dXJuIE0oYSxcIlNlZ21lbnRVUkxcIil9KS5yZWR1Y2UoZnVuY3Rpb24oYSxjKXtyZXR1cm4gMDxhLmxlbmd0aD9hOmN9KS5tYXAoZnVuY3Rpb24oYSl7dmFyIGM9YS5nZXRBdHRyaWJ1dGUoXCJtZWRpYVwiKTthPU4oYSxcIm1lZGlhUmFuZ2VcIix5ZCx7c3RhcnQ6MCxlbmQ6bnVsbH0pO3JldHVybnthYzpjLHN0YXJ0OmEuc3RhcnQsZW5kOmEuZW5kfX0pfTtmdW5jdGlvbiBwZShhLGIsYyxkKXt2YXIgZT1xZShhKSxmO2Y9TWQoYSxyZSk7dmFyIGc9UShhLHJlLFwibWVkaWFcIiksaD1RKGEscmUsXCJpbmRleFwiKTtmPXtGOmYuRixJYTpmLklhLGlhOmYuaWEscHJlc2VudGF0aW9uVGltZU9mZnNldDpmLnByZXNlbnRhdGlvblRpbWVPZmZzZXQsQjpmLkIsVmE6ZyxEYTpofTtnPTArKGYuRGE/MTowKTtnKz1mLkI/MTowO2crPWYuRj8xOjA7aWYoIWcpdGhyb3cgbmV3IHEoNCw0MDAyKTsxIT1nJiYoZi5EYSYmKGYuQj1udWxsKSxmLkY9bnVsbCk7aWYoIWYuRGEmJiFmLlZhKXRocm93IG5ldyBxKDQsNDAwMik7aWYoZi5EYSl7Yz1hLnUubWltZVR5cGUuc3BsaXQoXCIvXCIpWzFdO2lmKFwibXA0XCIhPWMmJlwid2VibVwiIT1jKXRocm93IG5ldyBxKDQsNDAwNik7aWYoXCJ3ZWJtXCI9PWMmJiFlKXRocm93IG5ldyBxKDQsNDAwNSk7ZD1LZChmLkRhLGEudS5pZCxudWxsLGEuYmFuZHdpZHRofHxudWxsLG51bGwpO2Q9UChhLnUuTSxbZF0pO2E9a2UoYSxiLGUsZCxcclxuMCxudWxsLGMsZi5wcmVzZW50YXRpb25UaW1lT2Zmc2V0KX1lbHNlIGYuRj8oZHx8YS5wcmVzZW50YXRpb25UaW1lbGluZS5YYShmLkYpLGE9c2UoYSxmKSk6KGQ9Yj1udWxsLGEuSy5pZCYmYS51LmlkJiYoZD1hLksuaWQrXCIsXCIrYS51LmlkLGI9Y1tkXSksZz10ZShhLGYpLExkKGEuUWEsYS5ILmR1cmF0aW9uLGcpLGI/KGIuV2EoZyksYi5SYShhLnByZXNlbnRhdGlvblRpbWVsaW5lLnNhKCktYS5ILnN0YXJ0KSk6KGEucHJlc2VudGF0aW9uVGltZWxpbmUuRWEoYS5ILnN0YXJ0LGcpLGI9bmV3IFQoZyksZCYmKGNbZF09YikpLGE9e2NyZWF0ZVNlZ21lbnRJbmRleDpQcm9taXNlLnJlc29sdmUuYmluZChQcm9taXNlKSxmaW5kU2VnbWVudFBvc2l0aW9uOmIuZmluZC5iaW5kKGIpLGdldFNlZ21lbnRSZWZlcmVuY2U6Yi5nZXQuYmluZChiKX0pO3JldHVybntjcmVhdGVTZWdtZW50SW5kZXg6YS5jcmVhdGVTZWdtZW50SW5kZXgsZmluZFNlZ21lbnRQb3NpdGlvbjphLmZpbmRTZWdtZW50UG9zaXRpb24sXHJcbmdldFNlZ21lbnRSZWZlcmVuY2U6YS5nZXRTZWdtZW50UmVmZXJlbmNlLGluaXRTZWdtZW50UmVmZXJlbmNlOmUscHJlc2VudGF0aW9uVGltZU9mZnNldDpmLnByZXNlbnRhdGlvblRpbWVPZmZzZXR9fWZ1bmN0aW9uIHJlKGEpe3JldHVybiBhLkhhfWZ1bmN0aW9uIHNlKGEsYil7dmFyIGM9YS5ILmR1cmF0aW9uLGQ9Yi5GLGU9Yi5pYSxmPWIuSWEsZz1iLlZhLGg9YS5iYW5kd2lkdGh8fG51bGwsbT1hLnUuaWQsbj1hLnUuTTtyZXR1cm57Y3JlYXRlU2VnbWVudEluZGV4OlByb21pc2UucmVzb2x2ZS5iaW5kKFByb21pc2UpLGZpbmRTZWdtZW50UG9zaXRpb246ZnVuY3Rpb24oYSl7cmV0dXJuIDA+YXx8YyYmYT49Yz9udWxsOk1hdGguZmxvb3IoYS9kKX0sZ2V0U2VnbWVudFJlZmVyZW5jZTpmdW5jdGlvbihhKXt2YXIgYj1hKmQ7cmV0dXJuIG5ldyBHKGEsYixiK2QsZnVuY3Rpb24oKXt2YXIgYz1LZChnLG0sYStlLGgsYipmKTtyZXR1cm4gUChuLFtjXSl9LDAsbnVsbCl9fX1cclxuZnVuY3Rpb24gdGUoYSxiKXtmb3IodmFyIGM9W10sZD0wO2Q8Yi5CLmxlbmd0aDtkKyspe3ZhciBlPWIuQltkXS5zdGFydCxmPWQrYi5pYTtjLnB1c2gobmV3IEcoZixlLGIuQltkXS5lbmQsZnVuY3Rpb24oYSxiLGMsZCxlLGYpe2E9S2QoYSxiLGUsYyxmKTtyZXR1cm4gUChkLFthXSkubWFwKGZ1bmN0aW9uKGEpe3JldHVybiBhLnRvU3RyaW5nKCl9KX0uYmluZChudWxsLGIuVmEsYS51LmlkLGEuYmFuZHdpZHRofHxudWxsLGEudS5NLGYsKGUrYi5wcmVzZW50YXRpb25UaW1lT2Zmc2V0KSpiLklhKSwwLG51bGwpKX1yZXR1cm4gY31mdW5jdGlvbiBxZShhKXt2YXIgYj1RKGEscmUsXCJpbml0aWFsaXphdGlvblwiKTtpZighYilyZXR1cm4gbnVsbDt2YXIgYz1hLnUuaWQsZD1hLmJhbmR3aWR0aHx8bnVsbCxlPWEudS5NO3JldHVybiBuZXcgVmIoZnVuY3Rpb24oKXt2YXIgYT1LZChiLGMsbnVsbCxkLG51bGwpO3JldHVybiBQKGUsW2FdKX0sMCxudWxsKX07ZnVuY3Rpb24gdWUoKXt0aGlzLm09dGhpcy5sPXRoaXMuaj10aGlzLmM9dGhpcy5hPW51bGw7dGhpcy5nPVtdO3RoaXMuYj1udWxsO3RoaXMuaD1bXTt0aGlzLnY9MTt0aGlzLmk9e307dGhpcy5zPTA7dGhpcy5mPW51bGw7dGhpcy5KYT10aGlzLkphLmJpbmQodGhpcyl9az11ZS5wcm90b3R5cGU7ay5jb25maWd1cmU9ZnVuY3Rpb24oYSl7dGhpcy5jPWF9O2suc3RhcnQ9ZnVuY3Rpb24oYSxiLGMsZCxlKXt0aGlzLmc9W2FdO3RoaXMuYT1iO3RoaXMuaj1jO3RoaXMubD1kO3RoaXMubT1lO3JldHVybiB2ZSh0aGlzKS50aGVuKGZ1bmN0aW9uKCl7dGhpcy5hJiZ3ZSh0aGlzLDApO3JldHVybiB0aGlzLmJ9LmJpbmQodGhpcykpfTtcclxuay5zdG9wPWZ1bmN0aW9uKCl7dGhpcy5hJiZ0aGlzLmEuSmIodGhpcy5KYSk7dGhpcy5jPXRoaXMubT10aGlzLmw9dGhpcy5qPXRoaXMuYT1udWxsO3RoaXMuZz1bXTt0aGlzLmI9bnVsbDt0aGlzLmg9W107dGhpcy5pPXt9O251bGwhPXRoaXMuZiYmKHdpbmRvdy5jbGVhclRpbWVvdXQodGhpcy5mKSx0aGlzLmY9bnVsbCk7cmV0dXJuIFByb21pc2UucmVzb2x2ZSgpfTtmdW5jdGlvbiB2ZShhKXtyZXR1cm4gYS5hLnJlcXVlc3QoMCxIYShhLmcsYS5jLnJldHJ5UGFyYW1ldGVycykpLnRoZW4oZnVuY3Rpb24oYSl7aWYodGhpcy5hKXJldHVybiB4ZSh0aGlzLGEuZGF0YSxhLnVyaSl9LmJpbmQoYSkpfVxyXG5mdW5jdGlvbiB4ZShhLGIsYyl7dmFyIGQ9RChiKSxlPW5ldyBET01QYXJzZXIsZj1udWxsO2I9bnVsbDt0cnl7Zj1lLnBhcnNlRnJvbVN0cmluZyhkLFwidGV4dC94bWxcIil9Y2F0Y2goQSl7fWYmJlwiTVBEXCI9PWYuZG9jdW1lbnRFbGVtZW50LnRhZ05hbWUmJihiPWYuZG9jdW1lbnRFbGVtZW50KTtpZighYil0aHJvdyBuZXcgcSg0LDQwMDEpO2M9W2NdO2Q9TShiLFwiTG9jYXRpb25cIikubWFwKHdkKS5maWx0ZXIoRGEpOzA8ZC5sZW5ndGgmJihjPWEuZz1kKTtkPU0oYixcIkJhc2VVUkxcIikubWFwKHdkKTtjPVAoYyxkKTt2YXIgZz1OKGIsXCJtaW5CdWZmZXJUaW1lXCIsTyk7YS5zPU4oYixcIm1pbmltdW1VcGRhdGVQZXJpb2RcIixPLC0xKTt2YXIgaD1OKGIsXCJhdmFpbGFiaWxpdHlTdGFydFRpbWVcIix4ZCksZD1OKGIsXCJ0aW1lU2hpZnRCdWZmZXJEZXB0aFwiLE8pLG09TihiLFwic3VnZ2VzdGVkUHJlc2VudGF0aW9uRGVsYXlcIixPKSxlPU4oYixcIm1heFNlZ21lbnREdXJhdGlvblwiLE8pLGY9Yi5nZXRBdHRyaWJ1dGUoXCJ0eXBlXCIpfHxcclxuXCJzdGF0aWNcIixuO2lmKGEuYiluPWEuYi5wcmVzZW50YXRpb25UaW1lbGluZTtlbHNle3ZhciByPU1hdGgubWF4KDEwLDEuNSpnKTtuPW5ldyBGKGgsbnVsbCE9bT9tOnIpfXZhciBoPXllKGEse1FhOlwic3RhdGljXCIhPWYscHJlc2VudGF0aW9uVGltZWxpbmU6bixLOm51bGwsSDpudWxsLFA6bnVsbCx1Om51bGwsYmFuZHdpZHRoOnZvaWQgMH0sYyxiKSxtPWguZHVyYXRpb24sdT1oLnBlcmlvZHM7bi5IYihcInN0YXRpY1wiPT1mKTtuLnphKG18fEluZmluaXR5KTtuLkdiKG51bGwhPWQ/ZDpJbmZpbml0eSk7bi5YYShlfHwxKTtpZihhLmIpcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO2I9TShiLFwiVVRDVGltaW5nXCIpO2Q9bi5VKCk7aC5ZJiZhLmEueWIoYS5KYSk7cmV0dXJuIHplKGEsYyxiLGQpLnRoZW4oZnVuY3Rpb24oYSl7dGhpcy5hJiYobi5FYihhKSx0aGlzLmI9e3ByZXNlbnRhdGlvblRpbWVsaW5lOm4scGVyaW9kczp1LG9mZmxpbmVTZXNzaW9uSWRzOltdLG1pbkJ1ZmZlclRpbWU6Z3x8XHJcbjB9KX0uYmluZChhKSl9XHJcbmZ1bmN0aW9uIHllKGEsYixjLGQpe3ZhciBlPU4oZCxcIm1lZGlhUHJlc2VudGF0aW9uRHVyYXRpb25cIixPKSxmPVtdLGc9MDtkPU0oZCxcIlBlcmlvZFwiKTtmb3IodmFyIGg9MDtoPGQubGVuZ3RoO2grKyl7dmFyIG09ZFtoXSxnPU4obSxcInN0YXJ0XCIsTyxnKSxuPU4obSxcImR1cmF0aW9uXCIsTyk7aWYobnVsbD09bilpZihoKzEhPWQubGVuZ3RoKXt2YXIgcj1OKGRbaCsxXSxcInN0YXJ0XCIsTyk7bnVsbCE9ciYmKG49ci1nKX1lbHNlIG51bGwhPWUmJihuPWUtZyk7dmFyIG09e3N0YXJ0OmcsZHVyYXRpb246bixub2RlOm0sWTohMX0sdT1hLEE9YixyPW07QS5LPUFlKHIubm9kZSxudWxsLGMpO0EuSD1yO0EuSy5pZHx8KEEuSy5pZD1cIl9fc2hha2FfcGVyaW9kX1wiK3Iuc3RhcnQpO3U9TShyLm5vZGUsXCJBZGFwdGF0aW9uU2V0XCIpLm1hcCh1LnFjLmJpbmQodSxBKSk7aWYoIXUubGVuZ3RoKXRocm93IG5ldyBxKDQsNDAwNCk7Zm9yKEE9MDtBPHUubGVuZ3RoO0ErKyl1W0FdLlkmJihyLlk9ITApO1xyXG51PUJlKHUpO3I9e3N0YXJ0VGltZTpyLnN0YXJ0LHN0cmVhbVNldHM6dX07Zi5wdXNoKHIpO3U9Yi5LLmlkO2EuaC5ldmVyeShFYSh1KSkmJihhLmoociksYS5oLnB1c2godSksYS5iJiZhLmIucGVyaW9kcy5wdXNoKHIpKTtpZihudWxsPT1uKXtnPW51bGw7YnJlYWt9Zys9bn1yZXR1cm4gbnVsbCE9ZT97cGVyaW9kczpmLGR1cmF0aW9uOmUsWTptLll9OntwZXJpb2RzOmYsZHVyYXRpb246ZyxZOm0uWX19XHJcbmsucWM9ZnVuY3Rpb24oYSxiKXthLlA9QWUoYixhLkssbnVsbCk7dmFyIGM9ITEsZD1NKGIsXCJSb2xlXCIpLGU9dm9pZCAwO1widGV4dFwiPT1hLlAuY29udGVudFR5cGUmJihlPVwic3VidGl0bGVcIik7Zm9yKHZhciBmPTA7ZjxkLmxlbmd0aDtmKyspe3ZhciBnPWRbZl0uZ2V0QXR0cmlidXRlKFwic2NoZW1lSWRVcmlcIik7aWYobnVsbD09Z3x8XCJ1cm46bXBlZzpkYXNoOnJvbGU6MjAxMVwiPT1nKXN3aXRjaChnPWRbZl0uZ2V0QXR0cmlidXRlKFwidmFsdWVcIiksZyl7Y2FzZSBcIm1haW5cIjpjPSEwO2JyZWFrO2Nhc2UgXCJjYXB0aW9uXCI6Y2FzZSBcInN1YnRpdGxlXCI6ZT1nfX12YXIgZD0hIXZkKGIsXCJJbmJhbmRFdmVudFN0cmVhbVwiKSxoPVtdO00oYixcIlN1cHBsZW1lbnRhbFByb3BlcnR5XCIpLmZvckVhY2goZnVuY3Rpb24oYSl7XCJodHRwOi8vZGFzaGlmLm9yZy9kZXNjcmlwdG9yL0FkYXB0YXRpb25TZXRTd2l0Y2hpbmdcIj09YS5nZXRBdHRyaWJ1dGUoXCJzY2hlbWVJZFVSSVwiKSYmKGE9YS5nZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiKSkmJlxyXG5oLnB1c2guYXBwbHkoaCxhLnNwbGl0KFwiLFwiKSl9KTtmPU0oYixcIkNvbnRlbnRQcm90ZWN0aW9uXCIpO2Y9RGQoZix0aGlzLmMuZGFzaC5jdXN0b21TY2hlbWUpO2c9RGMoYi5nZXRBdHRyaWJ1dGUoXCJsYW5nXCIpfHxcInVuZFwiKTtlPU0oYixcIlJlcHJlc2VudGF0aW9uXCIpLm1hcCh0aGlzLnJjLmJpbmQodGhpcyxhLGYsZSxnKSkuZmlsdGVyKGZ1bmN0aW9uKGEpe3JldHVybiEhYX0pO2lmKCFlLmxlbmd0aCl0aHJvdyBuZXcgcSg0LDQwMDMpO2lmKCFhLlAuY29udGVudFR5cGUpe3ZhciBtPWVbMF0ubWltZVR5cGUsbj1lWzBdLmNvZGVjcyxyPW07biYmKHIrPSc7IGNvZGVjcz1cIicrbisnXCInKTthLlAuY29udGVudFR5cGU9RVtyXT9cInRleHRcIjptLnNwbGl0KFwiL1wiKVswXX1yZXR1cm57aWQ6YS5QLmlkfHxcIl9fZmFrZV9fXCIrdGhpcy52KyssY29udGVudFR5cGU6YS5QLmNvbnRlbnRUeXBlLGxhbmd1YWdlOmcsJGI6YyxzdHJlYW1zOmUsZHJtSW5mb3M6Zi5kcm1JbmZvcyxWYzpoLFk6ZH19O1xyXG5rLnJjPWZ1bmN0aW9uKGEsYixjLGQsZSl7YS51PUFlKGUsYS5QLG51bGwpO2lmKCFDZShhLnUpKXJldHVybiBudWxsO2EuYmFuZHdpZHRoPU4oZSxcImJhbmR3aWR0aFwiLEFkKXx8dm9pZCAwO3ZhciBmO2Y9dGhpcy55Yy5iaW5kKHRoaXMpO2lmKGEudS5HYSlmPWllKGEsZik7ZWxzZSBpZihhLnUuJClmPWxlKGEsdGhpcy5pKTtlbHNlIGlmKGEudS5IYSlmPXBlKGEsZix0aGlzLmksISF0aGlzLmIpO2Vsc2V7dmFyIGc9YS51Lk0saD1hLkguZHVyYXRpb258fDA7Zj17Y3JlYXRlU2VnbWVudEluZGV4OlByb21pc2UucmVzb2x2ZS5iaW5kKFByb21pc2UpLGZpbmRTZWdtZW50UG9zaXRpb246ZnVuY3Rpb24oYSl7cmV0dXJuIDA8PWEmJmE8aD8xOm51bGx9LGdldFNlZ21lbnRSZWZlcmVuY2U6ZnVuY3Rpb24oYSl7cmV0dXJuIDEhPWE/bnVsbDpuZXcgRygxLDAsaCxmdW5jdGlvbigpe3JldHVybiBnfSwwLG51bGwpfSxpbml0U2VnbWVudFJlZmVyZW5jZTpudWxsLHByZXNlbnRhdGlvblRpbWVPZmZzZXQ6MH19ZT1cclxuTShlLFwiQ29udGVudFByb3RlY3Rpb25cIik7ZT1JZChlLHRoaXMuYy5kYXNoLmN1c3RvbVNjaGVtZSxiKTtyZXR1cm57aWQ6dGhpcy52KyssY3JlYXRlU2VnbWVudEluZGV4OmYuY3JlYXRlU2VnbWVudEluZGV4LGZpbmRTZWdtZW50UG9zaXRpb246Zi5maW5kU2VnbWVudFBvc2l0aW9uLGdldFNlZ21lbnRSZWZlcmVuY2U6Zi5nZXRTZWdtZW50UmVmZXJlbmNlLGluaXRTZWdtZW50UmVmZXJlbmNlOmYuaW5pdFNlZ21lbnRSZWZlcmVuY2UscHJlc2VudGF0aW9uVGltZU9mZnNldDpmLnByZXNlbnRhdGlvblRpbWVPZmZzZXQsbWltZVR5cGU6YS51Lm1pbWVUeXBlLGNvZGVjczphLnUuY29kZWNzLGJhbmR3aWR0aDphLmJhbmR3aWR0aCx3aWR0aDphLnUud2lkdGgsaGVpZ2h0OmEudS5oZWlnaHQsa2luZDpjLGVuY3J5cHRlZDowPGIuZHJtSW5mb3MubGVuZ3RoLGtleUlkOmUsbGFuZ3VhZ2U6ZCxhbGxvd2VkQnlBcHBsaWNhdGlvbjohMCxhbGxvd2VkQnlLZXlTeXN0ZW06ITB9fTtcclxuay5QYz1mdW5jdGlvbigpe3RoaXMuZj1udWxsO3ZhciBhPURhdGUubm93KCk7dmUodGhpcykudGhlbihmdW5jdGlvbigpe3RoaXMuYSYmd2UodGhpcywoRGF0ZS5ub3coKS1hKS8xRTMpfS5iaW5kKHRoaXMpKVtcImNhdGNoXCJdKGZ1bmN0aW9uKGEpe3RoaXMubChhKTt0aGlzLmEmJndlKHRoaXMsMCl9LmJpbmQodGhpcykpfTtmdW5jdGlvbiB3ZShhLGIpezA+YS5zfHwoYS5mPXdpbmRvdy5zZXRUaW1lb3V0KGEuUGMuYmluZChhKSwxRTMqTWF0aC5tYXgoTWF0aC5tYXgoMyxhLnMpLWIsMCkpKX1cclxuZnVuY3Rpb24gQWUoYSxiLGMpe2I9Ynx8e2NvbnRlbnRUeXBlOlwiXCIsbWltZVR5cGU6XCJcIixjb2RlY3M6XCJcIn07Yz1jfHxiLk07dmFyIGQ9TShhLFwiQmFzZVVSTFwiKS5tYXAod2QpLGU9YS5nZXRBdHRyaWJ1dGUoXCJjb250ZW50VHlwZVwiKXx8Yi5jb250ZW50VHlwZSxmPWEuZ2V0QXR0cmlidXRlKFwibWltZVR5cGVcIil8fGIubWltZVR5cGU7ZXx8KGU9Zi5zcGxpdChcIi9cIilbMF0pO3JldHVybntNOlAoYyxkKSxHYTp2ZChhLFwiU2VnbWVudEJhc2VcIil8fGIuR2EsJDp2ZChhLFwiU2VnbWVudExpc3RcIil8fGIuJCxIYTp2ZChhLFwiU2VnbWVudFRlbXBsYXRlXCIpfHxiLkhhLHdpZHRoOk4oYSxcIndpZHRoXCIsQmQpfHxiLndpZHRoLGhlaWdodDpOKGEsXCJoZWlnaHRcIixCZCl8fGIuaGVpZ2h0LGNvbnRlbnRUeXBlOmUsbWltZVR5cGU6Zixjb2RlY3M6YS5nZXRBdHRyaWJ1dGUoXCJjb2RlY3NcIil8fGIuY29kZWNzLGlkOmEuZ2V0QXR0cmlidXRlKFwiaWRcIil9fVxyXG5mdW5jdGlvbiBCZShhKXt2YXIgYj17fTthLmZvckVhY2goZnVuY3Rpb24oYSl7YlthLmlkXT1bYV19KTthLmZvckVhY2goZnVuY3Rpb24oYSl7dmFyIGM9YlthLmlkXTthLlZjLmZvckVhY2goZnVuY3Rpb24oYSl7KGE9YlthXSkmJmEhPWMmJihjLnB1c2guYXBwbHkoYyxhKSxhLmZvckVhY2goZnVuY3Rpb24oYSl7YlthLmlkXT1jfSkpfSl9KTt2YXIgYz1bXSxkPVtdO0MoYikuZm9yRWFjaChmdW5jdGlvbihhKXtpZighKDA8PWQuaW5kZXhPZihhKSkpe2QucHVzaChhKTt2YXIgYj1uZXcgSmE7YS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2IucHVzaChhLmNvbnRlbnRUeXBlfHxcIlwiLGEpfSk7Yi5rZXlzKCkuZm9yRWFjaChmdW5jdGlvbihhKXt2YXIgZD1uZXcgSmE7Yi5nZXQoYSkuZm9yRWFjaChmdW5jdGlvbihhKXtkLnB1c2goYS5sYW5ndWFnZSxhKX0pO2Qua2V5cygpLmZvckVhY2goZnVuY3Rpb24oYil7dmFyIGU9ZC5nZXQoYik7Yj17bGFuZ3VhZ2U6Yix0eXBlOmEscHJpbWFyeTplLnNvbWUoZnVuY3Rpb24oYSl7cmV0dXJuIGEuJGJ9KSxcclxuZHJtSW5mb3M6ZS5tYXAoZnVuY3Rpb24oYSl7cmV0dXJuIGEuZHJtSW5mb3N9KS5yZWR1Y2UodCxbXSksc3RyZWFtczplLm1hcChmdW5jdGlvbihhKXtyZXR1cm4gYS5zdHJlYW1zfSkucmVkdWNlKHQsW10pfTtjLnB1c2goYil9KX0pfX0pO3JldHVybiBjfWZ1bmN0aW9uIENlKGEpe3ZhciBiO2I9MCsoYS5HYT8xOjApO2IrPWEuJD8xOjA7Yis9YS5IYT8xOjA7aWYoIWIpcmV0dXJuXCJ0ZXh0XCI9PWEuY29udGVudFR5cGV8fFwiYXBwbGljYXRpb25cIj09YS5jb250ZW50VHlwZT8hMDohMTsxIT1iJiYoYS5HYSYmKGEuJD1udWxsKSxhLkhhPW51bGwpO3JldHVybiEwfVxyXG5mdW5jdGlvbiBEZShhLGIsYyxkKXtiPVAoYixbY10pO2I9SGEoYixhLmMucmV0cnlQYXJhbWV0ZXJzKTtiLm1ldGhvZD1kO3JldHVybiBhLmEucmVxdWVzdCgwLGIpLnRoZW4oZnVuY3Rpb24oYSl7aWYoXCJIRUFEXCI9PWQpe2lmKCFhLmhlYWRlcnN8fCFhLmhlYWRlcnMuZGF0ZSlyZXR1cm4gMDthPWEuaGVhZGVycy5kYXRlfWVsc2UgYT1EKGEuZGF0YSk7YT1EYXRlLnBhcnNlKGEpO3JldHVybiBpc05hTihhKT8wOmEtRGF0ZS5ub3coKX0pfVxyXG5mdW5jdGlvbiB6ZShhLGIsYyxkKXtjPWMubWFwKGZ1bmN0aW9uKGEpe3JldHVybntzY2hlbWU6YS5nZXRBdHRyaWJ1dGUoXCJzY2hlbWVJZFVyaVwiKSx2YWx1ZTphLmdldEF0dHJpYnV0ZShcInZhbHVlXCIpfX0pO3ZhciBlPWEuYy5kYXNoLmNsb2NrU3luY1VyaTtkJiYhYy5sZW5ndGgmJmUmJmMucHVzaCh7c2NoZW1lOlwidXJuOm1wZWc6ZGFzaDp1dGM6aHR0cC1oZWFkOjIwMTRcIix2YWx1ZTplfSk7cmV0dXJuIENhKGMsZnVuY3Rpb24oYSl7dmFyIGM9YS52YWx1ZTtzd2l0Y2goYS5zY2hlbWUpe2Nhc2UgXCJ1cm46bXBlZzpkYXNoOnV0YzpodHRwLWhlYWQ6MjAxNFwiOmNhc2UgXCJ1cm46bXBlZzpkYXNoOnV0YzpodHRwLWhlYWQ6MjAxMlwiOnJldHVybiBEZSh0aGlzLGIsYyxcIkhFQURcIik7Y2FzZSBcInVybjptcGVnOmRhc2g6dXRjOmh0dHAteHNkYXRlOjIwMTRcIjpjYXNlIFwidXJuOm1wZWc6ZGFzaDp1dGM6aHR0cC1pc286MjAxNFwiOmNhc2UgXCJ1cm46bXBlZzpkYXNoOnV0YzpodHRwLXhzZGF0ZToyMDEyXCI6Y2FzZSBcInVybjptcGVnOmRhc2g6dXRjOmh0dHAtaXNvOjIwMTJcIjpyZXR1cm4gRGUodGhpcyxcclxuYixjLFwiR0VUXCIpO2Nhc2UgXCJ1cm46bXBlZzpkYXNoOnV0YzpkaXJlY3Q6MjAxNFwiOmNhc2UgXCJ1cm46bXBlZzpkYXNoOnV0YzpkaXJlY3Q6MjAxMlwiOnJldHVybiBhPURhdGUucGFyc2UoYyksaXNOYU4oYSk/MDphLURhdGUubm93KCk7Y2FzZSBcInVybjptcGVnOmRhc2g6dXRjOmh0dHAtbnRwOjIwMTRcIjpjYXNlIFwidXJuOm1wZWc6ZGFzaDp1dGM6bnRwOjIwMTRcIjpjYXNlIFwidXJuOm1wZWc6ZGFzaDp1dGM6c250cDoyMDE0XCI6cmV0dXJuIFByb21pc2UucmVqZWN0KCk7ZGVmYXVsdDpyZXR1cm4gUHJvbWlzZS5yZWplY3QoKX19LmJpbmQoYSkpW1wiY2F0Y2hcIl0oZnVuY3Rpb24oKXtyZXR1cm4gMH0pfWsueWM9ZnVuY3Rpb24oYSxiLGMpe2E9SGEoYSx0aGlzLmMucmV0cnlQYXJhbWV0ZXJzKTtudWxsIT1iJiYoYS5oZWFkZXJzLlJhbmdlPVwiYnl0ZXM9XCIrYitcIi1cIisobnVsbCE9Yz9jOlwiXCIpKTtyZXR1cm4gdGhpcy5hLnJlcXVlc3QoMSxhKS50aGVuKGZ1bmN0aW9uKGEpe3JldHVybiBhLmRhdGF9KX07XHJcbmsuSmE9ZnVuY3Rpb24oYSxiKXtpZigxPT1hKXt2YXIgYz1uZXcgT2QobmV3IERhdGFWaWV3KGIuZGF0YSkpLGQ9WGQoMTcwMTY3MTc4MyxjKTtpZigtMSE9ZCl7dmFyIGU9Yy5hLTgrZDtTKGMsNCk7ZD1XZChjKTtpZihcInVybjptcGVnOmRhc2g6ZXZlbnQ6MjAxMlwiPT1kKXZlKHRoaXMpO2Vsc2V7dmFyIGY9V2QoYyksZz1SKGMpLGg9UihjKSxtPVIoYyksbj1SKGMpLGM9VmQoYyxlLWMuYSk7dGhpcy5tKG5ldyBIKFwiZW1zZ1wiLHtkZXRhaWw6e2hkOmQsdmFsdWU6ZixJYTpnLGdkOmgsZWQ6bSxpZDpuLGZkOmN9fSkpfX19fTtzYi5tcGQ9dWU7cmJbXCJhcHBsaWNhdGlvbi9kYXNoK3htbFwiXT11ZTtmdW5jdGlvbiBVKGEsYil7dmFyIGM9RChhKSxkPVtdLGU9bmV3IERPTVBhcnNlcixmPW51bGw7dHJ5e2Y9ZS5wYXJzZUZyb21TdHJpbmcoYyxcInRleHQveG1sXCIpfWNhdGNoKG4pe3Rocm93IG5ldyBxKDIsMjAwNSk7fWlmKGYpe3ZhciBnLGg7aWYoYz1mLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwidHRcIilbMF0pZT1jLmdldEF0dHJpYnV0ZShcInR0cDpmcmFtZVJhdGVcIiksZj1jLmdldEF0dHJpYnV0ZShcInR0cDpzdWJGcmFtZVJhdGVcIiksZz1jLmdldEF0dHJpYnV0ZShcInR0cDpmcmFtZVJhdGVNdWx0aXBsaWVyXCIpLGg9Yy5nZXRBdHRyaWJ1dGUoXCJ0dHA6dGlja1JhdGVcIik7ZWxzZSB0aHJvdyBuZXcgcSgyLDIwMDYpO2U9bmV3IEVlKGUsZixnLGgpO2Y9VS5iKGMuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJzdHlsaW5nXCIpWzBdKTtnPVUuYihjLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwibGF5b3V0XCIpWzBdKTtjPVUuYihjLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiYm9keVwiKVswXSk7Zm9yKGg9MDtoPFxyXG5jLmxlbmd0aDtoKyspe3ZhciBtPVUuYyhjW2hdLGIsZSxmLGcpO20mJmQucHVzaChtKX19cmV0dXJuIGR9VS5sPS9eKFxcZHsyLH0pOihcXGR7Mn0pOihcXGR7Mn0pOihcXGR7Mn0pXFwuPyhcXGQrKT8kLztVLnM9L14oPzooXFxkezIsfSk6KT8oXFxkezJ9KTooXFxkezJ9KSQvO1UubT0vXig/OihcXGR7Mix9KTopPyhcXGR7Mn0pOihcXGR7Mn1cXC5cXGR7Mix9KSQvO1Uudj0vXihcXGQqXFwuP1xcZCopZiQvO1UuQT0vXihcXGQqXFwuP1xcZCopdCQvO1Uudz0vXig/OihcXGQqXFwuP1xcZCopaCk/KD86KFxcZCpcXC4/XFxkKiltKT8oPzooXFxkKlxcLj9cXGQqKXMpPyg/OihcXGQqXFwuP1xcZCopbXMpPyQvO1Uuaj0vXihcXGR7MSwyfXwxMDApJSAoXFxkezEsMn18MTAwKSUkLztcclxuVS5iPWZ1bmN0aW9uKGEpe3ZhciBiPVtdO2lmKCFhKXJldHVybiBiO2Zvcih2YXIgYz1hLmNoaWxkTm9kZXMsZD0wO2Q8Yy5sZW5ndGg7ZCsrKXt2YXIgZT1cInNwYW5cIj09Y1tkXS5ub2RlTmFtZSYmXCJwXCI9PWEubm9kZU5hbWU7Y1tkXS5ub2RlVHlwZSE9Tm9kZS5FTEVNRU5UX05PREV8fFwiYnJcIj09Y1tkXS5ub2RlTmFtZXx8ZXx8KGU9VS5iKGNbZF0pLGI9Yi5jb25jYXQoZSkpfWIubGVuZ3RofHxiLnB1c2goYSk7cmV0dXJuIGJ9O1xyXG5VLmM9ZnVuY3Rpb24oYSxiLGMsZCxlKXtpZighYS5oYXNBdHRyaWJ1dGUoXCJiZWdpblwiKSYmIWEuaGFzQXR0cmlidXRlKFwiZW5kXCIpJiZcIlwiPT1hLnRleHRDb250ZW50KXJldHVybiBudWxsO3ZhciBmPVUuYShhLmdldEF0dHJpYnV0ZShcImJlZ2luXCIpLGMpLGc9VS5hKGEuZ2V0QXR0cmlidXRlKFwiZW5kXCIpLGMpO2M9VS5hKGEuZ2V0QXR0cmlidXRlKFwiZHVyXCIpLGMpO3ZhciBoPWEudGV4dENvbnRlbnQ7bnVsbD09ZyYmbnVsbCE9YyYmKGc9ZitjKTtpZihudWxsPT1mfHxudWxsPT1nKXRocm93IG5ldyBxKDIsMjAwMSk7Yj13YihmK2IsZytiLGgpO2lmKCFiKXJldHVybiBudWxsO2U9VS5oKGEsXCJyZWdpb25cIixlKTtVLm5hKGIsYSxlLGQpO3JldHVybiBifTtcclxuVS5uYT1mdW5jdGlvbihhLGIsYyxkKXt2YXIgZSxmPVUuZihiLGMsZCxcInR0czp0ZXh0QWxpZ25cIik7ZiYmKGEuYj1mKTtpZihmPVUuZihiLGMsZCxcInR0czpleHRlbnRcIikpaWYoZT1VLmouZXhlYyhmKSlhLnNpemU9TnVtYmVyKGVbMV0pO2U9VS5mKGIsYyxkLFwidHRzOndyaXRpbmdNb2RlXCIpO2Y9ITA7XCJ0YlwiPT1lfHxcInRibHJcIj09ZT9hLmM9XCJsclwiOlwidGJybFwiPT1lP2EuYz1cInJsXCI6Zj0hMTtpZihiPVUuZihiLGMsZCxcInR0czpvcmlnaW5cIikpaWYoZT1VLmouZXhlYyhiKSlmPyhhLnBvc2l0aW9uPU51bWJlcihlWzJdKSxhLmE9TnVtYmVyKGVbMV0pKTooYS5wb3NpdGlvbj1OdW1iZXIoZVsxXSksYS5hPU51bWJlcihlWzJdKSl9O1xyXG5VLmY9ZnVuY3Rpb24oYSxiLGMsZCl7Zm9yKHZhciBlPVUuYihiKSxmPTA7ZjxlLmxlbmd0aDtmKyspe3ZhciBnPWVbZl0uZ2V0QXR0cmlidXRlKGQpO2lmKGcpcmV0dXJuIGd9ZT1VLmg7cmV0dXJuKGE9ZShiLFwic3R5bGVcIixjKXx8ZShhLFwic3R5bGVcIixjKSk/YS5nZXRBdHRyaWJ1dGUoZCk6bnVsbH07VS5oPWZ1bmN0aW9uKGEsYixjKXtpZighYXx8MT5jLmxlbmd0aClyZXR1cm4gbnVsbDt2YXIgZD1udWxsO2lmKGE9VS5vYShhLGIpKWZvcihiPTA7YjxjLmxlbmd0aDtiKyspaWYoY1tiXS5nZXRBdHRyaWJ1dGUoXCJ4bWw6aWRcIik9PWEpe2Q9Y1tiXTticmVha31yZXR1cm4gZH07VS5vYT1mdW5jdGlvbihhLGIpe2Zvcih2YXIgYz1udWxsO2EmJiEoYz1hLmdldEF0dHJpYnV0ZShiKSk7KXt2YXIgZD1hLnBhcmVudE5vZGU7aWYoZCBpbnN0YW5jZW9mIEVsZW1lbnQpYT1kO2Vsc2UgYnJlYWt9cmV0dXJuIGN9O1xyXG5VLmE9ZnVuY3Rpb24oYSxiKXt2YXIgYz1udWxsO1UubC50ZXN0KGEpP2M9VS5wYShiLGEpOlUucy50ZXN0KGEpP2M9VS5nKFUucyxhKTpVLm0udGVzdChhKT9jPVUuZyhVLm0sYSk6VS52LnRlc3QoYSk/Yz1VLkFhKGIsYSk6VS5BLnRlc3QoYSk/Yz1VLkJhKGIsYSk6VS53LnRlc3QoYSkmJihjPVUuZyhVLncsYSkpO3JldHVybiBjfTtVLkFhPWZ1bmN0aW9uKGEsYil7dmFyIGM9VS52LmV4ZWMoYik7cmV0dXJuIE51bWJlcihjWzFdKS9hLmF9O1UuQmE9ZnVuY3Rpb24oYSxiKXt2YXIgYz1VLkEuZXhlYyhiKTtyZXR1cm4gTnVtYmVyKGNbMV0pL2EuYn07VS5wYT1mdW5jdGlvbihhLGIpe3ZhciBjPVUubC5leGVjKGIpLGQ9TnVtYmVyKGNbMV0pLGU9TnVtYmVyKGNbMl0pLGY9TnVtYmVyKGNbM10pLGc9TnVtYmVyKGNbNF0pLGc9ZysoTnVtYmVyKGNbNV0pfHwwKS9hLmMsZj1mK2cvYS5hO3JldHVybiBmKzYwKmUrMzYwMCpkfTtcclxuVS5nPWZ1bmN0aW9uKGEsYil7dmFyIGM9YS5leGVjKGIpO3JldHVybiBjJiZcIlwiIT1jWzBdPyhOdW1iZXIoY1s0XSl8fDApLzFFMysoTnVtYmVyKGNbM10pfHwwKSs2MCooTnVtYmVyKGNbMl0pfHwwKSszNjAwKihOdW1iZXIoY1sxXSl8fDApOm51bGx9O2Z1bmN0aW9uIEVlKGEsYixjLGQpe3RoaXMuYT1OdW1iZXIoYSl8fDMwO3RoaXMuYz1OdW1iZXIoYil8fDE7dGhpcy5iPU51bWJlcihkKTt0aGlzLmJ8fCh0aGlzLmI9YT90aGlzLmEqdGhpcy5jOjEpO2MmJihhPS9eKFxcZCspIChcXGQrKSQvZy5leGVjKGMpKSYmKHRoaXMuYSo9YVsxXS9hWzJdKX1FW1wiYXBwbGljYXRpb24vdHRtbCt4bWxcIl09VTtmdW5jdGlvbiBGZShhLGIpe3ZhciBjPW5ldyBPZChuZXcgRGF0YVZpZXcoYSkpLGQ9WGQoMTgzNTI5NTA5MixjKTtpZigtMSE9ZClyZXR1cm4gVShWZChjLGQtOCkuYnVmZmVyLGIpO2lmKC0xIT1ZZChhLEZlLkopKXJldHVybltdO3Rocm93IG5ldyBxKDIsMjAwNyk7fUZlLko9MTkzNzAxMDgwMDtFWydhcHBsaWNhdGlvbi9tcDQ7IGNvZGVjcz1cInN0cHBcIiddPUZlO2Z1bmN0aW9uIEdlKGEpe3RoaXMuYj1hO3RoaXMuYT0wfWZ1bmN0aW9uIEhlKGEsYil7dmFyIGM7Yi5sYXN0SW5kZXg9YS5hO2M9KGM9Yi5leGVjKGEuYikpP3twb3NpdGlvbjpjLmluZGV4LGxlbmd0aDpjWzBdLmxlbmd0aCxCYzpjfTpudWxsO2lmKGEuYT09YS5iLmxlbmd0aHx8IWN8fGMucG9zaXRpb24hPWEuYSlyZXR1cm4gbnVsbDthLmErPWMubGVuZ3RoO3JldHVybiBjLkJjfWZ1bmN0aW9uIEllKGEpe3JldHVybiBhLmE9PWEuYi5sZW5ndGg/bnVsbDooYT1IZShhLC9bXiBcXHRcXG5dKi9nbSkpP2FbMF06bnVsbH07ZnVuY3Rpb24gVihhLGIpe3ZhciBjPUQoYSksYz1jLnJlcGxhY2UoL1xcclxcbnxcXHIoPz1bXlxcbl18JCkvZ20sXCJcXG5cIiksYz1jLnNwbGl0KC9cXG57Mix9L20pO2lmKCEvXldFQlZUVCgkfFsgXFx0XFxuXSkvbS50ZXN0KGNbMF0pKXRocm93IG5ldyBxKDIsMkUzKTtmb3IodmFyIGQ9W10sZT0xO2U8Yy5sZW5ndGg7ZSsrKXt2YXIgZj1WLmMoY1tlXS5zcGxpdChcIlxcblwiKSxiKTtmJiZkLnB1c2goZil9cmV0dXJuIGR9XHJcblYuYz1mdW5jdGlvbihhLGIpe2lmKDE9PWEubGVuZ3RoJiYhYVswXXx8L15OT1RFKCR8WyBcXHRdKS8udGVzdChhWzBdKSlyZXR1cm4gbnVsbDt2YXIgYz1udWxsOzA+YVswXS5pbmRleE9mKFwiLS1cXHgzZVwiKSYmKGM9YVswXSxhLnNwbGljZSgwLDEpKTt2YXIgZD1uZXcgR2UoYVswXSksZT1WLmEoZCksZj1IZShkLC9bIFxcdF0rLS1cXHgzZVsgXFx0XSsvZyksZz1WLmEoZCk7aWYobnVsbD09ZXx8IWZ8fG51bGw9PWcpdGhyb3cgbmV3IHEoMiwyMDAxKTtlPXdiKGUrYixnK2IsYS5zbGljZSgxKS5qb2luKFwiXFxuXCIpLnRyaW0oKSk7aWYoIWUpcmV0dXJuIG51bGw7SGUoZCwvWyBcXHRdKy9nbSk7Zm9yKGY9SWUoZCk7Zjspe2lmKCFWLmkoZSxmKSl0aHJvdyBuZXcgcSgyLDIwMDIpO0hlKGQsL1sgXFx0XSsvZ20pO2Y9SWUoZCl9bnVsbCE9YyYmKGUuaWQ9Yyk7cmV0dXJuIGV9O1xyXG5WLmk9ZnVuY3Rpb24oYSxiKXt2YXIgYztpZihjPS9eYWxpZ246KHN0YXJ0fG1pZGRsZXxlbmR8bGVmdHxyaWdodCkkLy5leGVjKGIpKWEuYWxpZ249Y1sxXTtlbHNlIGlmKGM9L152ZXJ0aWNhbDoobHJ8cmwpJC8uZXhlYyhiKSlhLmM9Y1sxXTtlbHNlIGlmKGM9L15zaXplOihcXGR7MSwyfXwxMDApJSQvLmV4ZWMoYikpYS5zaXplPU51bWJlcihjWzFdKTtlbHNlIGlmKGM9L15wb3NpdGlvbjooXFxkezEsMn18MTAwKSUoPzosKGxpbmUtbGVmdHxsaW5lLXJpZ2h0fGNlbnRlcnxzdGFydHxlbmQpKT8kLy5leGVjKGIpKWEucG9zaXRpb249TnVtYmVyKGNbMV0pLGNbMl0mJihhLmc9Y1syXSk7ZWxzZSBpZihjPS9ebGluZTooXFxkezEsMn18MTAwKSUoPzosKHN0YXJ0fGVuZHxjZW50ZXIpKT8kLy5leGVjKGIpKWEuZj0hMSxhLmE9TnVtYmVyKGNbMV0pLGNbMl0mJihhLmI9Y1syXSk7ZWxzZSBpZihjPS9ebGluZTooLT9cXGQrKSg/Oiwoc3RhcnR8ZW5kfGNlbnRlcikpPyQvLmV4ZWMoYikpYS5mPVxyXG4hMCxhLmE9TnVtYmVyKGNbMV0pLGNbMl0mJihhLmI9Y1syXSk7ZWxzZSByZXR1cm4hMTtyZXR1cm4hMH07Vi5hPWZ1bmN0aW9uKGEpe2E9SGUoYSwvKD86KFxcZHsyLH0pOik/KFxcZHsyfSk6KFxcZHsyfSlcXC4oXFxkezN9KS9nKTtpZighYSlyZXR1cm4gbnVsbDt2YXIgYj1OdW1iZXIoYVsyXSksYz1OdW1iZXIoYVszXSk7cmV0dXJuIDU5PGJ8fDU5PGM/bnVsbDpOdW1iZXIoYVs0XSkvMUUzK2MrNjAqYiszNjAwKihOdW1iZXIoYVsxXSl8fDApfTtFW1widGV4dC92dHRcIl09VjtFWyd0ZXh0L3Z0dDsgY29kZWNzPVwidnR0XCInXT1WO2Z1bmN0aW9uIFcoYSxiLGMsZCl7dmFyIGU9bmV3IE9kKG5ldyBEYXRhVmlldyhhKSksZj1YZCgxODM1Mjk1MDkyLGUpO2lmKC0xIT1mKXJldHVybiBXLnFhKFZkKGUsZi04KS5idWZmZXIsYixjLGQpO2lmKC0xIT1ZZChhLFcubWEpKXJldHVybltdO3Rocm93IG5ldyBxKDIsMjAwOCk7fVcucWE9ZnVuY3Rpb24oYSxiLGMsZCl7YT1uZXcgT2QobmV3IERhdGFWaWV3KGEpKTtjKz1iO2QrPWI7Zm9yKGI9W107UWQoYSk7KXt2YXIgZT1YZChXLlgsYSk7aWYoLTE9PWUpYnJlYWs7KGU9Vy5jKFZkKGEsZS04KS5idWZmZXIsYyxkKSkmJmIucHVzaChlKX1yZXR1cm4gYn07XHJcblcuYz1mdW5jdGlvbihhLGIsYyl7YT1uZXcgT2QobmV3IERhdGFWaWV3KGEpKTtmb3IodmFyIGQsZSxmO1FkKGEpOyl7dmFyIGc9UihhKSxoPVIoYSksbT1EKFZkKGEsZy04KS5idWZmZXIpOzE9PWcmJlVkKGEpO3N3aXRjaChoKXtjYXNlIFcuRzpkPW07YnJlYWs7Y2FzZSBXLkM6Zj1tO2JyZWFrO2Nhc2UgVy5TOmU9bX19aWYoIWQpdGhyb3cgbmV3IHEoMiwyMDA4KTtiPXdiKGIsYyxkKTtpZighYilyZXR1cm4gbnVsbDtmJiYoYi5pZD1mKTtpZihlKWZvcihlPW5ldyBHZShlKSxmPUllKGUpO2Y7KXtpZighVi5pKGIsZikpdGhyb3cgbmV3IHEoMiwyMDAyKTtIZShlLC9bIFxcdF0rL2dtKTtmPUllKGUpfXJldHVybiBifTtXLm1hPTIwMDQyNTE3NjQ7Vy5YPTE5ODczNDM0NTk7Vy5HPTE4ODU0MzYyNjg7Vy5DPTE3NjgxODcyNDc7Vy5TPTE5MzcwMTE4MTU7RVsnYXBwbGljYXRpb24vbXA0OyBjb2RlY3M9XCJ3dnR0XCInXT1XO0ZhLmRhdGE9ZnVuY3Rpb24oYSl7cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKGIpe3ZhciBjPWEuc3BsaXQoXCI6XCIpO2lmKDI+Yy5sZW5ndGh8fFwiZGF0YVwiIT1jWzBdKXRocm93IG5ldyBxKDEsMTAwNCxhKTtjPWMuc2xpY2UoMSkuam9pbihcIjpcIikuc3BsaXQoXCIsXCIpO2lmKDI+Yy5sZW5ndGgpdGhyb3cgbmV3IHEoMSwxMDA0LGEpO3ZhciBkPWNbMF0sYz13aW5kb3cuZGVjb2RlVVJJQ29tcG9uZW50KGMuc2xpY2UoMSkuam9pbihcIixcIikpLGQ9ZC5zcGxpdChcIjtcIiksZT1udWxsOzE8ZC5sZW5ndGgmJihlPWRbMV0pO2lmKFwiYmFzZTY0XCI9PWUpYz1YYShjKS5idWZmZXI7ZWxzZXtpZihlKXRocm93IG5ldyBxKDEsMTAwNSxhKTtjPVNhKGMpfWIoe3VyaTphLGRhdGE6YyxoZWFkZXJzOnt9fSl9KX07ZnVuY3Rpb24gSmUoYSxiKXtyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24oYyxkKXt2YXIgZT1uZXcgWE1MSHR0cFJlcXVlc3Q7ZS5vcGVuKGIubWV0aG9kLGEsITApO2UucmVzcG9uc2VUeXBlPVwiYXJyYXlidWZmZXJcIjtlLnRpbWVvdXQ9Yi5yZXRyeVBhcmFtZXRlcnMudGltZW91dDtlLndpdGhDcmVkZW50aWFscz1iLmFsbG93Q3Jvc3NTaXRlQ3JlZGVudGlhbHM7ZS5vbmxvYWQ9ZnVuY3Rpb24oYil7Yj1iLnRhcmdldDtpZigyMDA8PWIuc3RhdHVzJiYyOTk+PWIuc3RhdHVzKXt2YXIgZT1iLmdldEFsbFJlc3BvbnNlSGVhZGVycygpLnNwbGl0KFwiXFxyXFxuXCIpLnJlZHVjZShmdW5jdGlvbihhLGIpe3ZhciBjPWIuc3BsaXQoXCI6IFwiKTthW2NbMF0udG9Mb3dlckNhc2UoKV09Yy5zbGljZSgxKS5qb2luKFwiOiBcIik7cmV0dXJuIGF9LHt9KTtiLkFjJiYoYT1iLkFjKTtjKHt1cmk6YSxkYXRhOmIucmVzcG9uc2UsaGVhZGVyczplfSl9ZWxzZXtlPW51bGw7dHJ5e2U9UmEoYi5yZXNwb25zZSl9Y2F0Y2goZil7fWQobmV3IHEoMSxcclxuMTAwMSxhLGIuc3RhdHVzLGUpKX19O2Uub25lcnJvcj1mdW5jdGlvbigpe2QobmV3IHEoMSwxMDAyLGEpKX07ZS5vbnRpbWVvdXQ9ZnVuY3Rpb24oKXtkKG5ldyBxKDEsMTAwMyxhKSl9O2Zvcih2YXIgZiBpbiBiLmhlYWRlcnMpZS5zZXRSZXF1ZXN0SGVhZGVyKGYsYi5oZWFkZXJzW2ZdKTtlLnNlbmQoYi5ib2R5KX0pfUZhLmh0dHA9SmU7RmEuaHR0cHM9SmU7ZnVuY3Rpb24gS2UoKXt0aGlzLmE9bnVsbDt0aGlzLmM9W107dGhpcy5iPXt9fWs9S2UucHJvdG90eXBlO1xyXG5rLmluaXQ9ZnVuY3Rpb24oYSl7aWYoIXdpbmRvdy5pbmRleGVkREIpcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBxKDksOUUzKSk7dmFyIGI9d2luZG93LmluZGV4ZWREQi5vcGVuKFwic2hha2Ffb2ZmbGluZV9kYlwiLDEpLGM9bmV3IHc7Yi5vbnVwZ3JhZGVuZWVkZWQ9ZnVuY3Rpb24oYil7Yj1iLnRhcmdldC5yZXN1bHQ7Zm9yKHZhciBjIGluIGEpYi5jcmVhdGVPYmplY3RTdG9yZShjLHtrZXlQYXRoOmFbY119KX07Yi5vbnN1Y2Nlc3M9ZnVuY3Rpb24oYSl7dGhpcy5hPWEudGFyZ2V0LnJlc3VsdDtjLnJlc29sdmUoKX0uYmluZCh0aGlzKTtiLm9uZXJyb3I9TGUuYmluZChudWxsLGIsYyk7cmV0dXJuIGMudGhlbihmdW5jdGlvbigpe3ZhciBiPU9iamVjdC5rZXlzKGEpO3JldHVybiBQcm9taXNlLmFsbChiLm1hcChmdW5jdGlvbihhKXtyZXR1cm4gTWUodGhpcyxhKS50aGVuKGZ1bmN0aW9uKGIpe3RoaXMuYlthXT1ifS5iaW5kKHRoaXMpKX0uYmluZCh0aGlzKSkpfS5iaW5kKHRoaXMpKX07XHJcbmsubz1mdW5jdGlvbigpe3JldHVybiBQcm9taXNlLmFsbCh0aGlzLmMubWFwKGZ1bmN0aW9uKGEpe3RyeXthLnRyYW5zYWN0aW9uLmFib3J0KCl9Y2F0Y2goYil7fXJldHVybiBhLklbXCJjYXRjaFwiXSh2KX0pKS50aGVuKGZ1bmN0aW9uKCl7dGhpcy5hJiYodGhpcy5hLmNsb3NlKCksdGhpcy5hPW51bGwpfS5iaW5kKHRoaXMpKX07ay5nZXQ9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gTmUodGhpcyxhLFwicmVhZG9ubHlcIixmdW5jdGlvbihhKXtyZXR1cm4gYS5nZXQoYil9KX07ay5mb3JFYWNoPWZ1bmN0aW9uKGEsYil7cmV0dXJuIE5lKHRoaXMsYSxcInJlYWRvbmx5XCIsZnVuY3Rpb24oYSl7cmV0dXJuIGEub3BlbkN1cnNvcigpfSxmdW5jdGlvbihhKXthJiYoYihhLnZhbHVlKSxhW1wiY29udGludWVcIl0oKSl9KX07ZnVuY3Rpb24gT2UoYSxiLGMpe3JldHVybiBOZShhLGIsXCJyZWFkd3JpdGVcIixmdW5jdGlvbihhKXtyZXR1cm4gYS5wdXQoYyl9KX1cclxuay5yZW1vdmU9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gTmUodGhpcyxhLFwicmVhZHdyaXRlXCIsZnVuY3Rpb24oYSl7cmV0dXJuIGFbXCJkZWxldGVcIl0oYil9KX07ZnVuY3Rpb24gUGUoYSxiKXt2YXIgYz1bXTtyZXR1cm4gTmUoYSxcInNlZ21lbnRcIixcInJlYWR3cml0ZVwiLGZ1bmN0aW9uKGEpe3JldHVybiBhLm9wZW5DdXJzb3IoKX0sZnVuY3Rpb24oYSl7aWYoYSl7aWYoYihhLnZhbHVlKSl7dmFyIGU9YVtcImRlbGV0ZVwiXSgpLGY9bmV3IHc7ZS5vbnN1Y2Nlc3M9Zi5yZXNvbHZlO2Uub25lcnJvcj1MZS5iaW5kKG51bGwsZSxmKTtjLnB1c2goZil9YVtcImNvbnRpbnVlXCJdKCl9fSkudGhlbihmdW5jdGlvbigpe3JldHVybiBQcm9taXNlLmFsbChjKX0pLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gYy5sZW5ndGh9KX1cclxuZnVuY3Rpb24gTWUoYSxiKXt2YXIgYz0wO3JldHVybiBOZShhLGIsXCJyZWFkb25seVwiLGZ1bmN0aW9uKGEpe3JldHVybiBhLm9wZW5DdXJzb3IobnVsbCxcInByZXZcIil9LGZ1bmN0aW9uKGEpe2EmJihjPWEua2V5KzEpfSkudGhlbihmdW5jdGlvbigpe3JldHVybiBjfSl9XHJcbmZ1bmN0aW9uIE5lKGEsYixjLGQsZSl7Yz1hLmEudHJhbnNhY3Rpb24oW2JdLGMpO3ZhciBmPWQoYy5vYmplY3RTdG9yZShiKSksZz1uZXcgdztlJiYoZi5vbnN1Y2Nlc3M9ZnVuY3Rpb24oYSl7ZShhLnRhcmdldC5yZXN1bHQpfSk7Zi5vbmVycm9yPUxlLmJpbmQobnVsbCxmLGcpO3ZhciBoPXt0cmFuc2FjdGlvbjpjLEk6Z307YS5jLnB1c2goaCk7dmFyIG09ZnVuY3Rpb24oKXt0aGlzLmMuc3BsaWNlKHRoaXMuYy5pbmRleE9mKGgpLDEpfS5iaW5kKGEpO2Mub25jb21wbGV0ZT1mdW5jdGlvbigpe20oKTtnLnJlc29sdmUoZi5yZXN1bHQpfTtjLm9uZXJyb3I9ZnVuY3Rpb24oYSl7bSgpO0xlKGYsZyxhKX07cmV0dXJuIGd9ZnVuY3Rpb24gTGUoYSxiLGMpe1wiQWJvcnRFcnJvclwiPT1hLmVycm9yLm5hbWU/Yi5yZWplY3QobmV3IHEoOSw5MDAyKSk6Yi5yZWplY3QobmV3IHEoOSw5MDAxLGEuZXJyb3IpKTtjLnByZXZlbnREZWZhdWx0KCl9O3ZhciBRZT17bWFuaWZlc3Q6XCJrZXlcIixzZWdtZW50Olwia2V5XCJ9O2Z1bmN0aW9uIFJlKGEpe3JldHVybntvZmZsaW5lVXJpOlwib2ZmbGluZTpcIithLmtleSxvcmlnaW5hbE1hbmlmZXN0VXJpOmEub3JpZ2luYWxNYW5pZmVzdFVyaSxkdXJhdGlvbjphLmR1cmF0aW9uLHNpemU6YS5zaXplLHRyYWNrczphLnBlcmlvZHNbMF0uc3RyZWFtcy5tYXAoZnVuY3Rpb24oYSl7cmV0dXJue2lkOmEuaWQsYWN0aXZlOiExLHR5cGU6YS5jb250ZW50VHlwZSxiYW5kd2lkdGg6MCxsYW5ndWFnZTphLmxhbmd1YWdlLGtpbmQ6YS5raW5kfHxudWxsLHdpZHRoOmEud2lkdGgsaGVpZ2h0OmEuaGVpZ2h0fX0pLGFwcE1ldGFkYXRhOmEuYXBwTWV0YWRhdGF9fTtmdW5jdGlvbiBTZSgpe31TZS5wcm90b3R5cGUuY29uZmlndXJlPWZ1bmN0aW9uKCl7fTtTZS5wcm90b3R5cGUuc3RhcnQ9ZnVuY3Rpb24oYSl7dmFyIGI9L15vZmZsaW5lOihbMC05XSspJC8uZXhlYyhhKTtpZighYilyZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IHEoMSw5MDA0LGEpKTt2YXIgYz1OdW1iZXIoYlsxXSksZD1uZXcgS2U7cmV0dXJuIGQuaW5pdChRZSkudGhlbihmdW5jdGlvbigpe3JldHVybiBkLmdldChcIm1hbmlmZXN0XCIsYyl9KS50aGVuKGZ1bmN0aW9uKGEpe2lmKCFhKXRocm93IG5ldyBxKDksOTAwMyxjKTtyZXR1cm4gVGUoYSl9KS50aGVuKGZ1bmN0aW9uKGEpe3JldHVybiBkLm8oKS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIGF9KX0sZnVuY3Rpb24oYSl7cmV0dXJuIGQubygpLnRoZW4oZnVuY3Rpb24oKXt0aHJvdyBhO30pfSl9O1NlLnByb3RvdHlwZS5zdG9wPWZ1bmN0aW9uKCl7cmV0dXJuIFByb21pc2UucmVzb2x2ZSgpfTtcclxuZnVuY3Rpb24gVGUoYSl7dmFyIGI9bmV3IEYobnVsbCwwKTtiLnphKGEuZHVyYXRpb24pO3ZhciBjPWEuZHJtSW5mbz9bYS5kcm1JbmZvXTpbXTtyZXR1cm57cHJlc2VudGF0aW9uVGltZWxpbmU6YixtaW5CdWZmZXJUaW1lOjEwLG9mZmxpbmVTZXNzaW9uSWRzOmEuc2Vzc2lvbklkcyxwZXJpb2RzOmEucGVyaW9kcy5tYXAoZnVuY3Rpb24oYSl7cmV0dXJue3N0YXJ0VGltZTphLnN0YXJ0VGltZSxzdHJlYW1TZXRzOmEuc3RyZWFtcy5tYXAoZnVuY3Rpb24oZSl7dmFyIGY9ZS5zZWdtZW50cy5tYXAoZnVuY3Rpb24oYSxiKXtyZXR1cm4gbmV3IEcoYixhLnN0YXJ0VGltZSxhLmVuZFRpbWUsZnVuY3Rpb24oKXtyZXR1cm5bYS51cmldfSwwLG51bGwpfSk7Yi5FYShhLnN0YXJ0VGltZSxmKTtmPW5ldyBUKGYpO3JldHVybntsYW5ndWFnZTplLmxhbmd1YWdlLHR5cGU6ZS5jb250ZW50VHlwZSxwcmltYXJ5OmUucHJpbWFyeSxkcm1JbmZvczpjLHN0cmVhbXM6W3tpZDplLmlkLGNyZWF0ZVNlZ21lbnRJbmRleDpQcm9taXNlLnJlc29sdmUuYmluZChQcm9taXNlKSxcclxuZmluZFNlZ21lbnRQb3NpdGlvbjpmLmZpbmQuYmluZChmKSxnZXRTZWdtZW50UmVmZXJlbmNlOmYuZ2V0LmJpbmQoZiksaW5pdFNlZ21lbnRSZWZlcmVuY2U6ZS5pbml0U2VnbWVudFVyaT9uZXcgVmIoZnVuY3Rpb24oKXtyZXR1cm5bZS5pbml0U2VnbWVudFVyaV19LDAsbnVsbCk6bnVsbCxwcmVzZW50YXRpb25UaW1lT2Zmc2V0OmUucHJlc2VudGF0aW9uVGltZU9mZnNldCxtaW1lVHlwZTplLm1pbWVUeXBlLGNvZGVjczplLmNvZGVjcyxiYW5kd2lkdGg6MCx3aWR0aDplLndpZHRofHx2b2lkIDAsaGVpZ2h0OmUuaGVpZ2h0fHx2b2lkIDAsa2luZDplLmtpbmQsZW5jcnlwdGVkOmUuZW5jcnlwdGVkLGtleUlkOmUua2V5SWQsYWxsb3dlZEJ5QXBwbGljYXRpb246ITAsYWxsb3dlZEJ5S2V5U3lzdGVtOiEwfV19fSl9fSl9fXJiW1wiYXBwbGljYXRpb24veC1vZmZsaW5lLW1hbmlmZXN0XCJdPVNlO0ZhLm9mZmxpbmU9ZnVuY3Rpb24oYSl7aWYoL15vZmZsaW5lOihbMC05XSspJC8uZXhlYyhhKSl7dmFyIGI9e3VyaTphLGRhdGE6bmV3IEFycmF5QnVmZmVyKDApLGhlYWRlcnM6e1wiY29udGVudC10eXBlXCI6XCJhcHBsaWNhdGlvbi94LW9mZmxpbmUtbWFuaWZlc3RcIn19O3JldHVybiBQcm9taXNlLnJlc29sdmUoYil9aWYoYj0vXm9mZmxpbmU6WzAtOV0rXFwvWzAtOV0rXFwvKFswLTldKykkLy5leGVjKGEpKXt2YXIgYz1OdW1iZXIoYlsxXSksZD1uZXcgS2U7cmV0dXJuIGQuaW5pdChRZSkudGhlbihmdW5jdGlvbigpe3JldHVybiBkLmdldChcInNlZ21lbnRcIixjKX0pLnRoZW4oZnVuY3Rpb24oYil7cmV0dXJuIGQubygpLnRoZW4oZnVuY3Rpb24oKXtpZighYil0aHJvdyBuZXcgcSg5LDkwMDMsYyk7cmV0dXJue3VyaTphLGRhdGE6Yi5kYXRhLGhlYWRlcnM6e319fSl9KX1yZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IHEoMSw5MDA0LGEpKX07ZnVuY3Rpb24gVWUoYSxiLGMpe3RoaXMuYj17fTt0aGlzLmk9Yzt0aGlzLm09YTt0aGlzLmw9Yjt0aGlzLmo9dGhpcy5hPW51bGw7dGhpcy5mPXRoaXMuZz10aGlzLmg9dGhpcy5jPTB9VWUucHJvdG90eXBlLm89ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmp8fFByb21pc2UucmVzb2x2ZSgpO3RoaXMuYj17fTt0aGlzLmo9dGhpcy5hPXRoaXMubD10aGlzLm09dGhpcy5pPW51bGw7cmV0dXJuIGF9O2Z1bmN0aW9uIFZlKGEsYixjLGQsZSl7YS5iW2JdPWEuYltiXXx8W107YS5iW2JdLnB1c2goe3VyaXM6Yy5hKCksTDpjLkwsRDpjLkQsamI6ZCxDYTplfSl9XHJcbmZ1bmN0aW9uIFdlKGEsYil7YS5jPTA7YS5oPTA7YS5nPTA7YS5mPTA7QyhhLmIpLmZvckVhY2goZnVuY3Rpb24oYSl7YS5mb3JFYWNoKGZ1bmN0aW9uKGEpe251bGwhPWEuRD90aGlzLmMrPWEuRC1hLkwrMTp0aGlzLmcrPWEuamJ9LmJpbmQodGhpcykpfS5iaW5kKGEpKTthLmE9YjthLmEuc2l6ZT1hLmM7dmFyIGM9QyhhLmIpLm1hcChmdW5jdGlvbihhKXt2YXIgYj0wLGM9ZnVuY3Rpb24oKXtpZighdGhpcy5pKXJldHVybiBQcm9taXNlLnJlamVjdChuZXcgcSg5LDkwMDIpKTtpZihiPj1hLmxlbmd0aClyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7dmFyIGc9YVtiKytdO3JldHVybiBYZSh0aGlzLGcpLnRoZW4oYyl9LmJpbmQodGhpcyk7cmV0dXJuIGMoKX0uYmluZChhKSk7YS5iPXt9O3JldHVybiBhLmo9UHJvbWlzZS5hbGwoYyl9XHJcbmZ1bmN0aW9uIFhlKGEsYil7dmFyIGM9SGEoYi51cmlzLGEubCk7aWYoYi5MfHxudWxsIT1iLkQpYy5oZWFkZXJzLlJhbmdlPVwiYnl0ZXM9XCIrYi5MK1wiLVwiKyhudWxsPT1iLkQ/XCJcIjpiLkQpO3ZhciBkO3JldHVybiBhLm0ucmVxdWVzdCgxLGMpLnRoZW4oZnVuY3Rpb24oYSl7aWYoIXRoaXMuYSlyZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IHEoOSw5MDAyKSk7ZD1hLmRhdGEuYnl0ZUxlbmd0aDtyZXR1cm4gYi5DYShhLmRhdGEpfS5iaW5kKGEpKS50aGVuKGZ1bmN0aW9uKCl7aWYoIXRoaXMuYSlyZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IHEoOSw5MDAyKSk7bnVsbD09Yi5EPyh0aGlzLmEuc2l6ZSs9ZCx0aGlzLmYrPWIuamIpOnRoaXMuaCs9ZDt2YXIgYT0odGhpcy5oK3RoaXMuZikvKHRoaXMuYyt0aGlzLmcpLGM9UmUodGhpcy5hKTt0aGlzLmkucHJvZ3Jlc3NDYWxsYmFjayhjLGEpfS5iaW5kKGEpKX07ZnVuY3Rpb24gWChhKXt0aGlzLmE9bmV3IEtlO3RoaXMuYz1hO3RoaXMuaj1ZZSh0aGlzKTt0aGlzLmc9bnVsbDt0aGlzLnY9ITE7dGhpcy5pPW51bGw7dGhpcy5sPVtdO3RoaXMuZj0tMTt0aGlzLm09MDt0aGlzLmI9bnVsbDt0aGlzLmg9bmV3IFVlKGEuaCxhLmdldENvbmZpZ3VyYXRpb24oKS5zdHJlYW1pbmcucmV0cnlQYXJhbWV0ZXJzLHRoaXMuail9bChcInNoYWthLm9mZmxpbmUuU3RvcmFnZVwiLFgpO2Z1bmN0aW9uIFplKCl7cmV0dXJuISF3aW5kb3cuaW5kZXhlZERCfVguc3VwcG9ydD1aZTtcclxuWC5wcm90b3R5cGUubz1mdW5jdGlvbigpe3ZhciBhPXRoaXMubCxiPXRoaXMuYSxjPXRoaXMuaD90aGlzLmgubygpW1wiY2F0Y2hcIl0oZnVuY3Rpb24oKXt9KS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIFByb21pc2UuYWxsKGEubWFwKGZ1bmN0aW9uKGEpe3JldHVybiBiLnJlbW92ZShcInNlZ21lbnRcIixhKX0pKX0pLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gYi5vKCl9KTpQcm9taXNlLnJlc29sdmUoKTt0aGlzLmo9dGhpcy5jPXRoaXMuaD10aGlzLmE9bnVsbDtyZXR1cm4gY307WC5wcm90b3R5cGUuZGVzdHJveT1YLnByb3RvdHlwZS5vO1gucHJvdG90eXBlLmNvbmZpZ3VyZT1mdW5jdGlvbihhKXt6Yyh0aGlzLmosYSxZZSh0aGlzKSx7fSxcIlwiKX07WC5wcm90b3R5cGUuY29uZmlndXJlPVgucHJvdG90eXBlLmNvbmZpZ3VyZTtcclxuWC5wcm90b3R5cGUuU2M9ZnVuY3Rpb24oYSxiLGMpe2Z1bmN0aW9uIGQoYSl7Zj1hfWlmKHRoaXMudilyZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IHEoOSw5MDA2KSk7dGhpcy52PSEwO3ZhciBlLGY9bnVsbDtyZXR1cm4gJGUodGhpcykudGhlbihmdW5jdGlvbigpe1kodGhpcyk7cmV0dXJuIGFmKHRoaXMsYSxkLGMpfS5iaW5kKHRoaXMpKS50aGVuKGZ1bmN0aW9uKGMpe1kodGhpcyk7dGhpcy5iPWMubWFuaWZlc3Q7dGhpcy5nPWMuUWI7aWYodGhpcy5iLnByZXNlbnRhdGlvblRpbWVsaW5lLlUoKXx8dGhpcy5iLnByZXNlbnRhdGlvblRpbWVsaW5lLmdhKCkpdGhyb3cgbmV3IHEoOSw5MDA1LGEpO3RoaXMuYi5wZXJpb2RzLmZvckVhY2godGhpcy5zLmJpbmQodGhpcykpO3RoaXMuZj10aGlzLmEuYi5tYW5pZmVzdCsrO3RoaXMubT0wO2M9dGhpcy5iLnBlcmlvZHMubWFwKHRoaXMudy5iaW5kKHRoaXMpKTt2YXIgZD10aGlzLmcuYixmPWliKHRoaXMuZyk7aWYoZCl7aWYoIWYubGVuZ3RoKXRocm93IG5ldyBxKDksXHJcbjkwMDcsYSk7ZC5pbml0RGF0YT1bXX1lPXtrZXk6dGhpcy5mLG9yaWdpbmFsTWFuaWZlc3RVcmk6YSxkdXJhdGlvbjp0aGlzLm0sc2l6ZTowLHBlcmlvZHM6YyxzZXNzaW9uSWRzOmYsZHJtSW5mbzpkLGFwcE1ldGFkYXRhOmJ9O3JldHVybiBXZSh0aGlzLmgsZSl9LmJpbmQodGhpcykpLnRoZW4oZnVuY3Rpb24oKXtZKHRoaXMpO2lmKGYpdGhyb3cgZjtyZXR1cm4gT2UodGhpcy5hLFwibWFuaWZlc3RcIixlKX0uYmluZCh0aGlzKSkudGhlbihmdW5jdGlvbigpe3JldHVybiBiZih0aGlzKX0uYmluZCh0aGlzKSkudGhlbihmdW5jdGlvbigpe3JldHVybiBSZShlKX0uYmluZCh0aGlzKSlbXCJjYXRjaFwiXShmdW5jdGlvbihhKXtyZXR1cm4gYmYodGhpcylbXCJjYXRjaFwiXSh2KS50aGVuKGZ1bmN0aW9uKCl7dGhyb3cgYTt9KX0uYmluZCh0aGlzKSl9O1gucHJvdG90eXBlLnN0b3JlPVgucHJvdG90eXBlLlNjO1xyXG5YLnByb3RvdHlwZS5yZW1vdmU9ZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhKXs2MDEzIT1hLmNvZGUmJihlPWEpfXZhciBjPWEub2ZmbGluZVVyaSxkPS9eb2ZmbGluZTooWzAtOV0rKSQvLmV4ZWMoYyk7aWYoIWQpcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBxKDksOTAwNCxjKSk7dmFyIGU9bnVsbCxmLGcsaD1OdW1iZXIoZFsxXSk7cmV0dXJuICRlKHRoaXMpLnRoZW4oZnVuY3Rpb24oKXtZKHRoaXMpO3JldHVybiB0aGlzLmEuZ2V0KFwibWFuaWZlc3RcIixoKX0uYmluZCh0aGlzKSkudGhlbihmdW5jdGlvbihhKXtZKHRoaXMpO2lmKCFhKXRocm93IG5ldyBxKDksOTAwMyxjKTtmPWE7YT1UZShmKTtnPW5ldyBhYih0aGlzLmMuaCxiLGZ1bmN0aW9uKCl7fSk7Zy5jb25maWd1cmUodGhpcy5jLmdldENvbmZpZ3VyYXRpb24oKS5kcm0pO3JldHVybiBnLmluaXQoYSwhMCl9LmJpbmQodGhpcykpLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gZmIoZyxmLnNlc3Npb25JZHMpfS5iaW5kKHRoaXMpKS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIGcubygpfS5iaW5kKHRoaXMpKS50aGVuKGZ1bmN0aW9uKCl7WSh0aGlzKTtcclxuaWYoZSl0aHJvdyBlO3ZhciBiPWYucGVyaW9kcy5tYXAoZnVuY3Rpb24oYSl7cmV0dXJuIGEuc3RyZWFtcy5tYXAoZnVuY3Rpb24oYSl7dmFyIGI9YS5zZWdtZW50cy5tYXAoZnVuY3Rpb24oYSl7cmV0dXJuIE51bWJlcigvXm9mZmxpbmU6WzAtOV0rXFwvWzAtOV0rXFwvKFswLTldKykkLy5leGVjKGEudXJpKVsxXSl9KTthLmluaXRTZWdtZW50VXJpJiZiLnB1c2goTnVtYmVyKC9eb2ZmbGluZTpbMC05XStcXC9bMC05XStcXC8oWzAtOV0rKSQvLmV4ZWMoYS5pbml0U2VnbWVudFVyaSlbMV0pKTtyZXR1cm4gYn0pLnJlZHVjZSh0LFtdKX0pLnJlZHVjZSh0LFtdKSxjPTAsZD1iLmxlbmd0aCxnPXRoaXMuai5wcm9ncmVzc0NhbGxiYWNrO3JldHVybiBQZSh0aGlzLmEsZnVuY3Rpb24oZSl7ZT1iLmluZGV4T2YoZS5rZXkpOzA8PWUmJihnKGEsYy9kKSxjKyspO3JldHVybiAwPD1lfS5iaW5kKHRoaXMpKX0uYmluZCh0aGlzKSkudGhlbihmdW5jdGlvbigpe1kodGhpcyk7dGhpcy5qLnByb2dyZXNzQ2FsbGJhY2soYSxcclxuMSk7cmV0dXJuIHRoaXMuYS5yZW1vdmUoXCJtYW5pZmVzdFwiLGgpfS5iaW5kKHRoaXMpKX07WC5wcm90b3R5cGUucmVtb3ZlPVgucHJvdG90eXBlLnJlbW92ZTtYLnByb3RvdHlwZS5saXN0PWZ1bmN0aW9uKCl7dmFyIGE9W107cmV0dXJuICRlKHRoaXMpLnRoZW4oZnVuY3Rpb24oKXtZKHRoaXMpO3JldHVybiB0aGlzLmEuZm9yRWFjaChcIm1hbmlmZXN0XCIsZnVuY3Rpb24oYil7YS5wdXNoKFJlKGIpKX0pfS5iaW5kKHRoaXMpKS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIGF9KX07WC5wcm90b3R5cGUubGlzdD1YLnByb3RvdHlwZS5saXN0O1xyXG5mdW5jdGlvbiBhZihhLGIsYyxkKXtmdW5jdGlvbiBlKCl7fXZhciBmPWEuYy5oLGc9YS5jLmdldENvbmZpZ3VyYXRpb24oKSxoLG0sbjtyZXR1cm4gdWIoYixmLGcubWFuaWZlc3QucmV0cnlQYXJhbWV0ZXJzLGQpLnRoZW4oZnVuY3Rpb24oYSl7WSh0aGlzKTtuPW5ldyBhO24uY29uZmlndXJlKGcubWFuaWZlc3QpO3JldHVybiBuLnN0YXJ0KGIsZix0aGlzLnMuYmluZCh0aGlzKSxjKX0uYmluZChhKSkudGhlbihmdW5jdGlvbihhKXtZKHRoaXMpO2g9YTttPW5ldyBhYihmLGMsZSk7bS5jb25maWd1cmUoZy5kcm0pO3JldHVybiBtLmluaXQoaCwhMCl9LmJpbmQoYSkpLnRoZW4oZnVuY3Rpb24oKXtZKHRoaXMpO3JldHVybiBjZihoKX0uYmluZChhKSkudGhlbihmdW5jdGlvbigpe1kodGhpcyk7cmV0dXJuIGViKG0pfS5iaW5kKGEpKS50aGVuKGZ1bmN0aW9uKCl7WSh0aGlzKTtyZXR1cm4gbi5zdG9wKCl9LmJpbmQoYSkpLnRoZW4oZnVuY3Rpb24oKXtZKHRoaXMpO3JldHVybnttYW5pZmVzdDpoLFxyXG5RYjptfX0uYmluZChhKSlbXCJjYXRjaFwiXShmdW5jdGlvbihhKXtpZihuKXJldHVybiBuLnN0b3AoKS50aGVuKGZ1bmN0aW9uKCl7dGhyb3cgYTt9KTt0aHJvdyBhO30pfVxyXG5YLnByb3RvdHlwZS5BPWZ1bmN0aW9uKGEpe3ZhciBiPVtdLGM9YS5maWx0ZXIoZnVuY3Rpb24oYSl7cmV0dXJuXCJ2aWRlb1wiPT1hLnR5cGUmJjQ4MD49YS5oZWlnaHR9KTtjLnNvcnQoZnVuY3Rpb24oYSxiKXtyZXR1cm4gYi5iYW5kd2lkdGgtYS5iYW5kd2lkdGh9KTtjLmxlbmd0aCYmYi5wdXNoKGNbMF0pO2Zvcih2YXIgZD1EYyh0aGlzLmMuZ2V0Q29uZmlndXJhdGlvbigpLnByZWZlcnJlZEF1ZGlvTGFuZ3VhZ2UpLGM9WzAsQmMsQ2NdLGU9YS5maWx0ZXIoZnVuY3Rpb24oYSl7cmV0dXJuXCJhdWRpb1wiPT1hLnR5cGV9KSxjPWMubWFwKGZ1bmN0aW9uKGEpe3JldHVybiBlLmZpbHRlcihmdW5jdGlvbihiKXtiPURjKGIubGFuZ3VhZ2UpO3JldHVybiBBYyhhLGQsYil9KX0pLGY9ZSxnPTA7ZzxjLmxlbmd0aDtnKyspY1tnXS5sZW5ndGgmJihmPWNbZ10pO2Yuc29ydChmdW5jdGlvbihhLGIpe3JldHVybiBhLmJhbmR3aWR0aC1iLmJhbmR3aWR0aH0pO2YubGVuZ3RoJiZiLnB1c2goZltNYXRoLmZsb29yKGYubGVuZ3RoL1xyXG4yKV0pO3ZhciBjPURjKHRoaXMuYy5nZXRDb25maWd1cmF0aW9uKCkucHJlZmVycmVkVGV4dExhbmd1YWdlKSxoPUFjLmJpbmQobnVsbCxDYyxjKTtiLnB1c2guYXBwbHkoYixhLmZpbHRlcihmdW5jdGlvbihhKXt2YXIgYj1EYyhhLmxhbmd1YWdlKTtyZXR1cm5cInRleHRcIj09YS50eXBlJiZoKGIpfSkpO3JldHVybiBifTtmdW5jdGlvbiBZZShhKXtyZXR1cm57dHJhY2tTZWxlY3Rpb25DYWxsYmFjazphLkEuYmluZChhKSxwcm9ncmVzc0NhbGxiYWNrOmZ1bmN0aW9uKGEsYyl7aWYoYXx8YylyZXR1cm4gbnVsbH19fWZ1bmN0aW9uICRlKGEpe3JldHVybiBhLmEuYT9Qcm9taXNlLnJlc29sdmUoKTphLmEuaW5pdChRZSl9XHJcblgucHJvdG90eXBlLnM9ZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhLGIsYyl7Yj1iLmZpbHRlcihmdW5jdGlvbihhKXtyZXR1cm4gYS50eXBlPT1jfSk7cmV0dXJuIDA9PWIubGVuZ3RoP251bGw6SWMoYSxiWzBdKS5zdHJlYW19dmFyIGM9e307dGhpcy5pJiYoYz17dmlkZW86Yih0aGlzLmIucGVyaW9kc1swXSx0aGlzLmksXCJ2aWRlb1wiKSxhdWRpbzpiKHRoaXMuYi5wZXJpb2RzWzBdLHRoaXMuaSxcImF1ZGlvXCIpfSk7R2ModGhpcy5nLGMsYSk7RmMoYSx0aGlzLmMuZ2V0Q29uZmlndXJhdGlvbigpLnJlc3RyaWN0aW9ucyx7d2lkdGg6SW5maW5pdHksaGVpZ2h0OkluZmluaXR5fSl9O2Z1bmN0aW9uIGJmKGEpe3ZhciBiPWEuZz9hLmcubygpOlByb21pc2UucmVzb2x2ZSgpO2EuZz1udWxsO2EuYj1udWxsO2Eudj0hMTthLmk9bnVsbDthLmw9W107YS5mPS0xO3JldHVybiBifVxyXG5mdW5jdGlvbiBjZihhKXthPWEucGVyaW9kcy5tYXAoZnVuY3Rpb24oYSl7cmV0dXJuIGEuc3RyZWFtU2V0c30pLnJlZHVjZSh0LFtdKS5tYXAoZnVuY3Rpb24oYSl7cmV0dXJuIGEuc3RyZWFtc30pLnJlZHVjZSh0LFtdKTtyZXR1cm4gUHJvbWlzZS5hbGwoYS5tYXAoZnVuY3Rpb24oYSl7cmV0dXJuIGEuY3JlYXRlU2VnbWVudEluZGV4KCl9KSl9XHJcblgucHJvdG90eXBlLnc9ZnVuY3Rpb24oYSl7dmFyIGI9SGMoYSxudWxsKSxiPXRoaXMuai50cmFja1NlbGVjdGlvbkNhbGxiYWNrKGIpO3RoaXMuaXx8KHRoaXMuaT1iLHRoaXMuYi5wZXJpb2RzLmZvckVhY2godGhpcy5zLmJpbmQodGhpcykpKTtmb3IodmFyIGM9Yi5sZW5ndGgtMTswPGM7LS1jKXtmb3IodmFyIGQ9ITEsZT1jLTE7MDw9ZTstLWUpaWYoYltjXS50eXBlPT1iW2VdLnR5cGUmJmJbY10ua2luZD09YltlXS5raW5kJiZiW2NdLmxhbmd1YWdlPT1iW2VdLmxhbmd1YWdlKXtkPSEwO2JyZWFrfWlmKGQpYnJlYWt9Yj1iLm1hcChmdW5jdGlvbihiKXtiPUljKGEsYik7cmV0dXJuIGRmKHRoaXMsYSxiLlRjLGIuc3RyZWFtKX0uYmluZCh0aGlzKSk7cmV0dXJue3N0YXJ0VGltZTphLnN0YXJ0VGltZSxzdHJlYW1zOmJ9fTtcclxuZnVuY3Rpb24gZGYoYSxiLGMsZCl7Zm9yKHZhciBlPVtdLGY9YS5iLnByZXNlbnRhdGlvblRpbWVsaW5lLnJhKCksZz1mLGg9ZC5maW5kU2VnbWVudFBvc2l0aW9uKGYpLG09bnVsbCE9aD9kLmdldFNlZ21lbnRSZWZlcmVuY2UoaCk6bnVsbDttOyl7dmFyIG49YS5hLmIuc2VnbWVudCsrO1ZlKGEuaCxjLnR5cGUsbSwobS5lbmRUaW1lLW0uc3RhcnRUaW1lKSpkLmJhbmR3aWR0aC84LGZ1bmN0aW9uKGEsYixjLGQpe2I9e2tleTphLGRhdGE6ZCxtYW5pZmVzdEtleTp0aGlzLmYsc3RyZWFtTnVtYmVyOmMsc2VnbWVudE51bWJlcjpifTt0aGlzLmwucHVzaChhKTtyZXR1cm4gT2UodGhpcy5hLFwic2VnbWVudFwiLGIpfS5iaW5kKGEsbixtLnBvc2l0aW9uLGQuaWQpKTtlLnB1c2goe3N0YXJ0VGltZTptLnN0YXJ0VGltZSxlbmRUaW1lOm0uZW5kVGltZSx1cmk6XCJvZmZsaW5lOlwiK2EuZitcIi9cIitkLmlkK1wiL1wiK259KTtnPW0uZW5kVGltZStiLnN0YXJ0VGltZTttPWQuZ2V0U2VnbWVudFJlZmVyZW5jZSgrK2gpfWEubT1cclxuTWF0aC5tYXgoYS5tLGctZik7Yj1udWxsO2QuaW5pdFNlZ21lbnRSZWZlcmVuY2UmJihuPWEuYS5iLnNlZ21lbnQrKyxiPVwib2ZmbGluZTpcIithLmYrXCIvXCIrZC5pZCtcIi9cIituLFZlKGEuaCxjLnR5cGUsZC5pbml0U2VnbWVudFJlZmVyZW5jZSwwLGZ1bmN0aW9uKGEsYil7dmFyIGM9e2tleTpuLGRhdGE6YixtYW5pZmVzdEtleTp0aGlzLmYsc3RyZWFtTnVtYmVyOmEsc2VnbWVudE51bWJlcjotMX07dGhpcy5sLnB1c2gobik7cmV0dXJuIE9lKHRoaXMuYSxcInNlZ21lbnRcIixjKX0uYmluZChhLGQuaWQpKSk7cmV0dXJue2lkOmQuaWQscHJpbWFyeTpjLnByaW1hcnkscHJlc2VudGF0aW9uVGltZU9mZnNldDpkLnByZXNlbnRhdGlvblRpbWVPZmZzZXR8fDAsY29udGVudFR5cGU6Yy50eXBlLG1pbWVUeXBlOmQubWltZVR5cGUsY29kZWNzOmQuY29kZWNzLGtpbmQ6ZC5raW5kLGxhbmd1YWdlOmMubGFuZ3VhZ2Usd2lkdGg6ZC53aWR0aHx8bnVsbCxoZWlnaHQ6ZC5oZWlnaHR8fG51bGwsaW5pdFNlZ21lbnRVcmk6YixcclxuZW5jcnlwdGVkOmQuZW5jcnlwdGVkLGtleUlkOmQua2V5SWQsc2VnbWVudHM6ZX19ZnVuY3Rpb24gWShhKXtpZighYS5jKXRocm93IG5ldyBxKDksOTAwMik7fVFjLm9mZmxpbmU9WmU7bChcInNoYWthLnBvbHlmaWxsLmluc3RhbGxBbGxcIixmdW5jdGlvbigpe2Zvcih2YXIgYT0wO2E8ZWYubGVuZ3RoOysrYSllZlthXSgpfSk7dmFyIGVmPVtdO2Z1bmN0aW9uIGZmKGEpe2VmLnB1c2goYSl9bChcInNoYWthLnBvbHlmaWxsLnJlZ2lzdGVyXCIsZmYpO2Z1bmN0aW9uIGdmKGEpe3ZhciBiPWEudHlwZS5yZXBsYWNlKC9eKHdlYmtpdHxtb3p8TVMpLyxcIlwiKS50b0xvd2VyQ2FzZSgpLGI9bmV3IEV2ZW50KGIsYSk7YS50YXJnZXQuZGlzcGF0Y2hFdmVudChiKX1cclxuZmYoZnVuY3Rpb24oKXtpZih3aW5kb3cuRG9jdW1lbnQpe3ZhciBhPUVsZW1lbnQucHJvdG90eXBlO2EucmVxdWVzdEZ1bGxzY3JlZW49YS5yZXF1ZXN0RnVsbHNjcmVlbnx8YS5tb3pSZXF1ZXN0RnVsbFNjcmVlbnx8YS5tc1JlcXVlc3RGdWxsc2NyZWVufHxhLndlYmtpdFJlcXVlc3RGdWxsc2NyZWVuO2E9RG9jdW1lbnQucHJvdG90eXBlO2EuZXhpdEZ1bGxzY3JlZW49YS5leGl0RnVsbHNjcmVlbnx8YS5tb3pDYW5jZWxGdWxsU2NyZWVufHxhLm1zRXhpdEZ1bGxzY3JlZW58fGEud2Via2l0RXhpdEZ1bGxzY3JlZW47XCJmdWxsc2NyZWVuRWxlbWVudFwiaW4gZG9jdW1lbnR8fE9iamVjdC5kZWZpbmVQcm9wZXJ0eShkb2N1bWVudCxcImZ1bGxzY3JlZW5FbGVtZW50XCIse2dldDpmdW5jdGlvbigpe3JldHVybiBkb2N1bWVudC5tb3pGdWxsU2NyZWVuRWxlbWVudHx8ZG9jdW1lbnQubXNGdWxsc2NyZWVuRWxlbWVudHx8ZG9jdW1lbnQud2Via2l0RnVsbHNjcmVlbkVsZW1lbnR9fSk7ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIndlYmtpdGZ1bGxzY3JlZW5jaGFuZ2VcIixcclxuZ2YpO2RvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJ3ZWJraXRmdWxsc2NyZWVuZXJyb3JcIixnZik7ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vemZ1bGxzY3JlZW5jaGFuZ2VcIixnZik7ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vemZ1bGxzY3JlZW5lcnJvclwiLGdmKTtkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiTVNGdWxsc2NyZWVuQ2hhbmdlXCIsZ2YpO2RvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJNU0Z1bGxzY3JlZW5FcnJvclwiLGdmKX19KTtmdW5jdGlvbiBoZihhKXt0aGlzLmM9W107dGhpcy5iPVtdO3RoaXMuYT1bXTtmb3IoYT1uZXcgT2QobmV3IERhdGFWaWV3KGEuYnVmZmVyKSk7UWQoYSk7KXt2YXIgYj1YZCgxODg2NjE0Mzc2LGEpO2lmKC0xPT1iKWJyZWFrO3ZhciBjPWEuYS04LGQ9UmQoYSk7aWYoMTxkKVMoYSxiLShhLmEtYykpO2Vsc2V7UyhhLDMpO3ZhciBlPVphKFZkKGEsMTYpKSxmPVtdO2lmKDA8ZClmb3IodmFyIGQ9UihhKSxnPTA7ZzxkOysrZyl7dmFyIGg9WmEoVmQoYSwxNikpO2YucHVzaChoKX1kPVIoYSk7UyhhLGQpO3RoaXMuYi5wdXNoLmFwcGx5KHRoaXMuYixmKTt0aGlzLmMucHVzaChlKTt0aGlzLmEucHVzaCh7c3RhcnQ6YyxlbmQ6YS5hLTF9KTthLmEhPWMrYiYmUyhhLGItKGEuYS1jKSl9fX07ZnVuY3Rpb24gamYoYSxiKXt0cnl7dmFyIGM9bmV3IGtmKGEsYik7cmV0dXJuIFByb21pc2UucmVzb2x2ZShjKX1jYXRjaChkKXtyZXR1cm4gUHJvbWlzZS5yZWplY3QoZCl9fVxyXG5mdW5jdGlvbiBrZihhLGIpe3RoaXMua2V5U3lzdGVtPWE7Zm9yKHZhciBjPSExLGQ9MDtkPGIubGVuZ3RoOysrZCl7dmFyIGU9YltkXSxmPXthdWRpb0NhcGFiaWxpdGllczpbXSx2aWRlb0NhcGFiaWxpdGllczpbXSxwZXJzaXN0ZW50U3RhdGU6XCJvcHRpb25hbFwiLGRpc3RpbmN0aXZlSWRlbnRpZmllcjpcIm9wdGlvbmFsXCIsaW5pdERhdGFUeXBlczplLmluaXREYXRhVHlwZXMsc2Vzc2lvblR5cGVzOltcInRlbXBvcmFyeVwiXSxsYWJlbDplLmxhYmVsfSxnPSExO2lmKGUuYXVkaW9DYXBhYmlsaXRpZXMpZm9yKHZhciBoPTA7aDxlLmF1ZGlvQ2FwYWJpbGl0aWVzLmxlbmd0aDsrK2gpe3ZhciBtPWUuYXVkaW9DYXBhYmlsaXRpZXNbaF07aWYobS5jb250ZW50VHlwZSl7dmFyIGc9ITAsbj1tLmNvbnRlbnRUeXBlLnNwbGl0KFwiO1wiKVswXTtNU01lZGlhS2V5cy5pc1R5cGVTdXBwb3J0ZWQodGhpcy5rZXlTeXN0ZW0sbikmJihmLmF1ZGlvQ2FwYWJpbGl0aWVzLnB1c2gobSksYz0hMCl9fWlmKGUudmlkZW9DYXBhYmlsaXRpZXMpZm9yKGg9XHJcbjA7aDxlLnZpZGVvQ2FwYWJpbGl0aWVzLmxlbmd0aDsrK2gpbT1lLnZpZGVvQ2FwYWJpbGl0aWVzW2hdLG0uY29udGVudFR5cGUmJihnPSEwLG49bS5jb250ZW50VHlwZS5zcGxpdChcIjtcIilbMF0sTVNNZWRpYUtleXMuaXNUeXBlU3VwcG9ydGVkKHRoaXMua2V5U3lzdGVtLG4pJiYoZi52aWRlb0NhcGFiaWxpdGllcy5wdXNoKG0pLGM9ITApKTtnfHwoYz1NU01lZGlhS2V5cy5pc1R5cGVTdXBwb3J0ZWQodGhpcy5rZXlTeXN0ZW0sXCJ2aWRlby9tcDRcIikpO1wicmVxdWlyZWRcIj09ZS5wZXJzaXN0ZW50U3RhdGUmJihmLnBlcnNpc3RlbnRTdGF0ZT1cInJlcXVpcmVkXCIsZi5zZXNzaW9uVHlwZXM9W1wicGVyc2lzdGVudC1saWNlbnNlXCJdKTtpZihjKXt0aGlzLmE9ZjtyZXR1cm59fWM9RXJyb3IoXCJVbnN1cHBvcnRlZCBrZXlTeXN0ZW1cIik7Yy5uYW1lPVwiTm90U3VwcG9ydGVkRXJyb3JcIjtjLmNvZGU9RE9NRXhjZXB0aW9uLk5PVF9TVVBQT1JURURfRVJSO3Rocm93IGM7fVxyXG5rZi5wcm90b3R5cGUuY3JlYXRlTWVkaWFLZXlzPWZ1bmN0aW9uKCl7dmFyIGE9bmV3IGxmKHRoaXMua2V5U3lzdGVtKTtyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGEpfTtrZi5wcm90b3R5cGUuZ2V0Q29uZmlndXJhdGlvbj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmF9O2Z1bmN0aW9uIG1mKGEpe3ZhciBiPXRoaXMubWVkaWFLZXlzO2ImJmIhPWEmJm5mKGIsbnVsbCk7ZGVsZXRlIHRoaXMubWVkaWFLZXlzO3JldHVybih0aGlzLm1lZGlhS2V5cz1hKT9uZihhLHRoaXMpOlByb21pc2UucmVzb2x2ZSgpfWZ1bmN0aW9uIGxmKGEpe3RoaXMuYT1uZXcgTVNNZWRpYUtleXMoYSk7dGhpcy5iPW5ldyB6fWxmLnByb3RvdHlwZS5jcmVhdGVTZXNzaW9uPWZ1bmN0aW9uKGEpe2lmKFwidGVtcG9yYXJ5XCIhPShhfHxcInRlbXBvcmFyeVwiKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiU2Vzc2lvbiB0eXBlIFwiK2ErXCIgaXMgdW5zdXBwb3J0ZWQgb24gdGhpcyBwbGF0Zm9ybS5cIik7cmV0dXJuIG5ldyBvZih0aGlzLmEpfTtcclxubGYucHJvdG90eXBlLnNldFNlcnZlckNlcnRpZmljYXRlPWZ1bmN0aW9uKCl7cmV0dXJuIFByb21pc2UucmVqZWN0KEVycm9yKFwic2V0U2VydmVyQ2VydGlmaWNhdGUgbm90IHN1cHBvcnRlZCBvbiB0aGlzIHBsYXRmb3JtLlwiKSl9O2Z1bmN0aW9uIG5mKGEsYil7ZnVuY3Rpb24gYygpe2IubXNTZXRNZWRpYUtleXMoZC5hKTtiLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJsb2FkZWRtZXRhZGF0YVwiLGMpfUthKGEuYik7aWYoIWIpcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO0IoYS5iLGIsXCJtc25lZWRrZXlcIixwZik7dmFyIGQ9YTt0cnl7cmV0dXJuIDE8PWIucmVhZHlTdGF0ZT9iLm1zU2V0TWVkaWFLZXlzKGEuYSk6Yi5hZGRFdmVudExpc3RlbmVyKFwibG9hZGVkbWV0YWRhdGFcIixjKSxQcm9taXNlLnJlc29sdmUoKX1jYXRjaChlKXtyZXR1cm4gUHJvbWlzZS5yZWplY3QoZSl9fVxyXG5mdW5jdGlvbiBvZihhKXtwLmNhbGwodGhpcyk7dGhpcy5jPW51bGw7dGhpcy5nPWE7dGhpcy5iPXRoaXMuYT1udWxsO3RoaXMuZj1uZXcgejt0aGlzLnNlc3Npb25JZD1cIlwiO3RoaXMuZXhwaXJhdGlvbj1OYU47dGhpcy5jbG9zZWQ9bmV3IHc7dGhpcy5rZXlTdGF0dXNlcz1uZXcgcWZ9YmEob2YpO2s9b2YucHJvdG90eXBlO2suZ2VuZXJhdGVSZXF1ZXN0PWZ1bmN0aW9uKGEsYil7dGhpcy5hPW5ldyB3O3RyeXt0aGlzLmM9dGhpcy5nLmNyZWF0ZVNlc3Npb24oXCJ2aWRlby9tcDRcIixuZXcgVWludDhBcnJheShiKSxudWxsKSxCKHRoaXMuZix0aGlzLmMsXCJtc2tleW1lc3NhZ2VcIix0aGlzLmhjLmJpbmQodGhpcykpLEIodGhpcy5mLHRoaXMuYyxcIm1za2V5YWRkZWRcIix0aGlzLmZjLmJpbmQodGhpcykpLEIodGhpcy5mLHRoaXMuYyxcIm1za2V5ZXJyb3JcIix0aGlzLmdjLmJpbmQodGhpcykpLHJmKHRoaXMsXCJzdGF0dXMtcGVuZGluZ1wiKX1jYXRjaChjKXt0aGlzLmEucmVqZWN0KGMpfXJldHVybiB0aGlzLmF9O1xyXG5rLmxvYWQ9ZnVuY3Rpb24oKXtyZXR1cm4gUHJvbWlzZS5yZWplY3QoRXJyb3IoXCJNZWRpYUtleVNlc3Npb24ubG9hZCBub3QgeWV0IHN1cHBvcnRlZFwiKSl9O2sudXBkYXRlPWZ1bmN0aW9uKGEpe3RoaXMuYj1uZXcgdzt0cnl7dGhpcy5jLnVwZGF0ZShuZXcgVWludDhBcnJheShhKSl9Y2F0Y2goYil7dGhpcy5iLnJlamVjdChiKX1yZXR1cm4gdGhpcy5ifTtrLmNsb3NlPWZ1bmN0aW9uKCl7dHJ5e3RoaXMuYy5jbG9zZSgpLHRoaXMuY2xvc2VkLnJlc29sdmUoKSxLYSh0aGlzLmYpfWNhdGNoKGEpe3RoaXMuY2xvc2VkLnJlamVjdChhKX1yZXR1cm4gdGhpcy5jbG9zZWR9O2sucmVtb3ZlPWZ1bmN0aW9uKCl7cmV0dXJuIFByb21pc2UucmVqZWN0KEVycm9yKFwiTWVkaWFLZXlTZXNzaW9uLnJlbW92ZSBpcyBvbmx5IGFwcGxpY2FibGUgZm9yIHBlcnNpc3RlbnQgbGljZW5zZXMsIHdoaWNoIGFyZSBub3Qgc3VwcG9ydGVkIG9uIHRoaXMgcGxhdGZvcm1cIikpfTtcclxuZnVuY3Rpb24gcGYoYSl7dmFyIGI9ZG9jdW1lbnQuY3JlYXRlRXZlbnQoXCJDdXN0b21FdmVudFwiKTtiLmluaXRDdXN0b21FdmVudChcImVuY3J5cHRlZFwiLCExLCExLG51bGwpO2IuaW5pdERhdGFUeXBlPVwiY2VuY1wiO2lmKGE9YS5pbml0RGF0YSl7dmFyIGM9bmV3IGhmKGEpO2lmKCEoMT49Yy5hLmxlbmd0aCkpe2Zvcih2YXIgZD1bXSxlPTA7ZTxjLmEubGVuZ3RoO2UrKylkLnB1c2goYS5zdWJhcnJheShjLmFbZV0uc3RhcnQsYy5hW2VdLmVuZCsxKSk7ZT1zZjthPVtdO2ZvcihjPTA7YzxkLmxlbmd0aDsrK2Mpe2Zvcih2YXIgZj0hMSxnPTA7ZzxhLmxlbmd0aCYmIShmPWU/ZShkW2NdLGFbZ10pOmRbY109PT1hW2ddKTsrK2cpO2Z8fGEucHVzaChkW2NdKX1mb3IoZT1kPTA7ZTxhLmxlbmd0aDtlKyspZCs9YVtlXS5sZW5ndGg7ZD1uZXcgVWludDhBcnJheShkKTtmb3IoZT1jPTA7ZTxhLmxlbmd0aDtlKyspZC5zZXQoYVtlXSxjKSxjKz1hW2VdLmxlbmd0aDthPWR9fWIuaW5pdERhdGE9XHJcbmE7dGhpcy5kaXNwYXRjaEV2ZW50KGIpfWZ1bmN0aW9uIHNmKGEsYil7cmV0dXJuICRhKGEsYil9ay5oYz1mdW5jdGlvbihhKXt0aGlzLmEmJih0aGlzLmEucmVzb2x2ZSgpLHRoaXMuYT1udWxsKTt0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEgoXCJtZXNzYWdlXCIse21lc3NhZ2VUeXBlOnZvaWQgMD09dGhpcy5rZXlTdGF0dXNlcy5VYSgpP1wibGljZW5zZXJlcXVlc3RcIjpcImxpY2Vuc2VyZW5ld2FsXCIsbWVzc2FnZTphLm1lc3NhZ2UuYnVmZmVyfSkpfTtrLmZjPWZ1bmN0aW9uKCl7dGhpcy5hPyhyZih0aGlzLFwidXNhYmxlXCIpLHRoaXMuYS5yZXNvbHZlKCksdGhpcy5hPW51bGwpOnRoaXMuYiYmKHJmKHRoaXMsXCJ1c2FibGVcIiksdGhpcy5iLnJlc29sdmUoKSx0aGlzLmI9bnVsbCl9O1xyXG5rLmdjPWZ1bmN0aW9uKCl7dmFyIGE9RXJyb3IoXCJFTUUgUGF0Y2hlZE1lZGlhS2V5c01zIGtleSBlcnJvclwiKTthLmVycm9yQ29kZT10aGlzLmMuZXJyb3I7aWYodGhpcy5hKXRoaXMuYS5yZWplY3QoYSksdGhpcy5hPW51bGw7ZWxzZSBpZih0aGlzLmIpdGhpcy5iLnJlamVjdChhKSx0aGlzLmI9bnVsbDtlbHNlIHN3aXRjaCh0aGlzLmMuZXJyb3IuY29kZSl7Y2FzZSBNU01lZGlhS2V5RXJyb3IuTVNfTUVESUFfS0VZRVJSX09VVFBVVDpjYXNlIE1TTWVkaWFLZXlFcnJvci5NU19NRURJQV9LRVlFUlJfSEFSRFdBUkVDSEFOR0U6cmYodGhpcyxcIm91dHB1dC1ub3QtYWxsb3dlZFwiKTtkZWZhdWx0OnJmKHRoaXMsXCJpbnRlcm5hbC1lcnJvclwiKX19O2Z1bmN0aW9uIHJmKGEsYil7YS5rZXlTdGF0dXNlcy5jYihiKTthLmRpc3BhdGNoRXZlbnQobmV3IEgoXCJrZXlzdGF0dXNlc2NoYW5nZVwiKSl9ZnVuY3Rpb24gcWYoKXt0aGlzLnNpemU9MDt0aGlzLmE9dm9pZCAwfXZhciB0ZjtrPXFmLnByb3RvdHlwZTtcclxuay5jYj1mdW5jdGlvbihhKXt0aGlzLnNpemU9dm9pZCAwPT1hPzA6MTt0aGlzLmE9YX07ay5VYT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmF9O2suZm9yRWFjaD1mdW5jdGlvbihhKXt0aGlzLmEmJmEodGhpcy5hLHRmKX07ay5nZXQ9ZnVuY3Rpb24oYSl7aWYodGhpcy5oYXMoYSkpcmV0dXJuIHRoaXMuYX07ay5oYXM9ZnVuY3Rpb24oYSl7dmFyIGI9dGY7cmV0dXJuIHRoaXMuYSYmJGEobmV3IFVpbnQ4QXJyYXkoYSksbmV3IFVpbnQ4QXJyYXkoYikpPyEwOiExfTtmdW5jdGlvbiB1Zigpe3JldHVybiBQcm9taXNlLnJlamVjdChFcnJvcihcIlRoZSBrZXkgc3lzdGVtIHNwZWNpZmllZCBpcyBub3Qgc3VwcG9ydGVkLlwiKSl9ZnVuY3Rpb24gdmYoYSl7cmV0dXJuIGE/UHJvbWlzZS5yZWplY3QoRXJyb3IoXCJNZWRpYUtleXMgbm90IHN1cHBvcnRlZC5cIikpOlByb21pc2UucmVzb2x2ZSgpfWZ1bmN0aW9uIHdmKCl7dGhyb3cgbmV3IFR5cGVFcnJvcihcIklsbGVnYWwgY29uc3RydWN0b3IuXCIpO313Zi5wcm90b3R5cGUuY3JlYXRlU2Vzc2lvbj1mdW5jdGlvbigpe307d2YucHJvdG90eXBlLnNldFNlcnZlckNlcnRpZmljYXRlPWZ1bmN0aW9uKCl7fTtmdW5jdGlvbiB4Zigpe3Rocm93IG5ldyBUeXBlRXJyb3IoXCJJbGxlZ2FsIGNvbnN0cnVjdG9yLlwiKTt9eGYucHJvdG90eXBlLmdldENvbmZpZ3VyYXRpb249ZnVuY3Rpb24oKXt9O3hmLnByb3RvdHlwZS5jcmVhdGVNZWRpYUtleXM9ZnVuY3Rpb24oKXt9O2Z1bmN0aW9uIHlmKGEsYil7dHJ5e3ZhciBjPW5ldyB6ZihhLGIpO3JldHVybiBQcm9taXNlLnJlc29sdmUoYyl9Y2F0Y2goZCl7cmV0dXJuIFByb21pc2UucmVqZWN0KGQpfX1mdW5jdGlvbiBBZihhKXt2YXIgYj10aGlzLm1lZGlhS2V5cztiJiZiIT1hJiZCZihiLG51bGwpO2RlbGV0ZSB0aGlzLm1lZGlhS2V5czsodGhpcy5tZWRpYUtleXM9YSkmJkJmKGEsdGhpcyk7cmV0dXJuIFByb21pc2UucmVzb2x2ZSgpfVxyXG5mdW5jdGlvbiB6ZihhLGIpe3RoaXMuYT10aGlzLmtleVN5c3RlbT1hO3ZhciBjPSEwO1wib3JnLnczLmNsZWFya2V5XCI9PWEmJih0aGlzLmE9XCJ3ZWJraXQtb3JnLnczLmNsZWFya2V5XCIsYz0hMSk7dmFyIGQ9ITEsZTtlPWRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwidmlkZW9cIik7ZT1lLmxlbmd0aD9lWzBdOmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ2aWRlb1wiKTtmb3IodmFyIGY9MDtmPGIubGVuZ3RoOysrZil7dmFyIGc9YltmXSxoPXthdWRpb0NhcGFiaWxpdGllczpbXSx2aWRlb0NhcGFiaWxpdGllczpbXSxwZXJzaXN0ZW50U3RhdGU6XCJvcHRpb25hbFwiLGRpc3RpbmN0aXZlSWRlbnRpZmllcjpcIm9wdGlvbmFsXCIsaW5pdERhdGFUeXBlczpnLmluaXREYXRhVHlwZXMsc2Vzc2lvblR5cGVzOltcInRlbXBvcmFyeVwiXSxsYWJlbDpnLmxhYmVsfSxtPSExO2lmKGcuYXVkaW9DYXBhYmlsaXRpZXMpZm9yKHZhciBuPTA7bjxnLmF1ZGlvQ2FwYWJpbGl0aWVzLmxlbmd0aDsrK24pe3ZhciByPVxyXG5nLmF1ZGlvQ2FwYWJpbGl0aWVzW25dO3IuY29udGVudFR5cGUmJihtPSEwLGUuY2FuUGxheVR5cGUoci5jb250ZW50VHlwZS5zcGxpdChcIjtcIilbMF0sdGhpcy5hKSYmKGguYXVkaW9DYXBhYmlsaXRpZXMucHVzaChyKSxkPSEwKSl9aWYoZy52aWRlb0NhcGFiaWxpdGllcylmb3Iobj0wO248Zy52aWRlb0NhcGFiaWxpdGllcy5sZW5ndGg7KytuKXI9Zy52aWRlb0NhcGFiaWxpdGllc1tuXSxyLmNvbnRlbnRUeXBlJiYobT0hMCxlLmNhblBsYXlUeXBlKHIuY29udGVudFR5cGUsdGhpcy5hKSYmKGgudmlkZW9DYXBhYmlsaXRpZXMucHVzaChyKSxkPSEwKSk7bXx8KGQ9ZS5jYW5QbGF5VHlwZShcInZpZGVvL21wNFwiLHRoaXMuYSl8fGUuY2FuUGxheVR5cGUoXCJ2aWRlby93ZWJtXCIsdGhpcy5hKSk7XCJyZXF1aXJlZFwiPT1nLnBlcnNpc3RlbnRTdGF0ZSYmKGM/KGgucGVyc2lzdGVudFN0YXRlPVwicmVxdWlyZWRcIixoLnNlc3Npb25UeXBlcz1bXCJwZXJzaXN0ZW50LWxpY2Vuc2VcIl0pOmQ9ITEpO2lmKGQpe3RoaXMuYj1cclxuaDtyZXR1cm59fWM9XCJVbnN1cHBvcnRlZCBrZXlTeXN0ZW1cIjtpZihcIm9yZy53My5jbGVhcmtleVwiPT1hfHxcImNvbS53aWRldmluZS5hbHBoYVwiPT1hKWM9XCJOb25lIG9mIHRoZSByZXF1ZXN0ZWQgY29uZmlndXJhdGlvbnMgd2VyZSBzdXBwb3J0ZWQuXCI7Yz1FcnJvcihjKTtjLm5hbWU9XCJOb3RTdXBwb3J0ZWRFcnJvclwiO2MuY29kZT1ET01FeGNlcHRpb24uTk9UX1NVUFBPUlRFRF9FUlI7dGhyb3cgYzt9emYucHJvdG90eXBlLmNyZWF0ZU1lZGlhS2V5cz1mdW5jdGlvbigpe3ZhciBhPW5ldyBDZih0aGlzLmEpO3JldHVybiBQcm9taXNlLnJlc29sdmUoYSl9O3pmLnByb3RvdHlwZS5nZXRDb25maWd1cmF0aW9uPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYn07ZnVuY3Rpb24gQ2YoYSl7dGhpcy5nPWE7dGhpcy5iPW51bGw7dGhpcy5hPW5ldyB6O3RoaXMuYz1bXTt0aGlzLmY9e319XHJcbmZ1bmN0aW9uIEJmKGEsYil7YS5iPWI7S2EoYS5hKTtiJiYoQihhLmEsYixcIndlYmtpdG5lZWRrZXlcIixhLnBjLmJpbmQoYSkpLEIoYS5hLGIsXCJ3ZWJraXRrZXltZXNzYWdlXCIsYS5vYy5iaW5kKGEpKSxCKGEuYSxiLFwid2Via2l0a2V5YWRkZWRcIixhLm1jLmJpbmQoYSkpLEIoYS5hLGIsXCJ3ZWJraXRrZXllcnJvclwiLGEubmMuYmluZChhKSkpfWs9Q2YucHJvdG90eXBlO2suY3JlYXRlU2Vzc2lvbj1mdW5jdGlvbihhKXt2YXIgYj1hfHxcInRlbXBvcmFyeVwiO2lmKFwidGVtcG9yYXJ5XCIhPWImJlwicGVyc2lzdGVudC1saWNlbnNlXCIhPWIpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlNlc3Npb24gdHlwZSBcIithK1wiIGlzIHVuc3VwcG9ydGVkIG9uIHRoaXMgcGxhdGZvcm0uXCIpO2E9dGhpcy5ifHxkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidmlkZW9cIik7YS5zcmN8fChhLnNyYz1cImFib3V0OmJsYW5rXCIpO2I9bmV3IERmKGEsdGhpcy5nLGIpO3RoaXMuYy5wdXNoKGIpO3JldHVybiBifTtcclxuay5zZXRTZXJ2ZXJDZXJ0aWZpY2F0ZT1mdW5jdGlvbigpe3JldHVybiBQcm9taXNlLnJlamVjdChFcnJvcihcInNldFNlcnZlckNlcnRpZmljYXRlIG5vdCBzdXBwb3J0ZWQgb24gdGhpcyBwbGF0Zm9ybS5cIikpfTtrLnBjPWZ1bmN0aW9uKGEpe3RoaXMuYi5kaXNwYXRjaEV2ZW50KG5ldyBIKFwiZW5jcnlwdGVkXCIse2luaXREYXRhVHlwZTpcIndlYm1cIixpbml0RGF0YTphLmluaXREYXRhfSkpfTtrLm9jPWZ1bmN0aW9uKGEpe3ZhciBiPUVmKHRoaXMsYS5zZXNzaW9uSWQpO2ImJihhPW5ldyBIKFwibWVzc2FnZVwiLHttZXNzYWdlVHlwZTp2b2lkIDA9PWIua2V5U3RhdHVzZXMuVWEoKT9cImxpY2Vuc2VyZXF1ZXN0XCI6XCJsaWNlbnNlcmVuZXdhbFwiLG1lc3NhZ2U6YS5tZXNzYWdlfSksYi5iJiYoYi5iLnJlc29sdmUoKSxiLmI9bnVsbCksYi5kaXNwYXRjaEV2ZW50KGEpKX07XHJcbmsubWM9ZnVuY3Rpb24oYSl7aWYoYT1FZih0aGlzLGEuc2Vzc2lvbklkKSlGZihhLFwidXNhYmxlXCIpLGEuYSYmYS5hLnJlc29sdmUoKSxhLmE9bnVsbH07XHJcbmsubmM9ZnVuY3Rpb24oYSl7dmFyIGI9RWYodGhpcyxhLnNlc3Npb25JZCk7aWYoYil7dmFyIGM9RXJyb3IoXCJFTUUgdjAuMWIga2V5IGVycm9yXCIpO2MuZXJyb3JDb2RlPWEuZXJyb3JDb2RlO2MuZXJyb3JDb2RlLnN5c3RlbUNvZGU9YS5zeXN0ZW1Db2RlOyFhLnNlc3Npb25JZCYmYi5iPyhjLm1ldGhvZD1cImdlbmVyYXRlUmVxdWVzdFwiLDQ1PT1hLnN5c3RlbUNvZGUmJihjLm1lc3NhZ2U9XCJVbnN1cHBvcnRlZCBzZXNzaW9uIHR5cGUuXCIpLGIuYi5yZWplY3QoYyksYi5iPW51bGwpOmEuc2Vzc2lvbklkJiZiLmE/KGMubWV0aG9kPVwidXBkYXRlXCIsYi5hLnJlamVjdChjKSxiLmE9bnVsbCk6KGM9YS5zeXN0ZW1Db2RlLGEuZXJyb3JDb2RlLmNvZGU9PU1lZGlhS2V5RXJyb3IuTUVESUFfS0VZRVJSX09VVFBVVD9GZihiLFwib3V0cHV0LXJlc3RyaWN0ZWRcIik6MT09Yz9GZihiLFwiZXhwaXJlZFwiKTpGZihiLFwiaW50ZXJuYWwtZXJyb3JcIikpfX07XHJcbmZ1bmN0aW9uIEVmKGEsYil7dmFyIGM9YS5mW2JdO3JldHVybiBjP2M6KGM9YS5jLnNoaWZ0KCkpPyhjLnNlc3Npb25JZD1iLGEuZltiXT1jKTpudWxsfWZ1bmN0aW9uIERmKGEsYixjKXtwLmNhbGwodGhpcyk7dGhpcy5mPWE7dGhpcy5oPSExO3RoaXMuYT10aGlzLmI9bnVsbDt0aGlzLmM9Yjt0aGlzLmc9Yzt0aGlzLnNlc3Npb25JZD1cIlwiO3RoaXMuZXhwaXJhdGlvbj1OYU47dGhpcy5jbG9zZWQ9bmV3IHc7dGhpcy5rZXlTdGF0dXNlcz1uZXcgR2Z9YmEoRGYpO1xyXG5mdW5jdGlvbiBIZihhLGIsYyl7aWYoYS5oKXJldHVybiBQcm9taXNlLnJlamVjdChFcnJvcihcIlRoZSBzZXNzaW9uIGlzIGFscmVhZHkgaW5pdGlhbGl6ZWQuXCIpKTthLmg9ITA7dmFyIGQ7dHJ5e2lmKFwicGVyc2lzdGVudC1saWNlbnNlXCI9PWEuZylpZihjKWQ9bmV3IFVpbnQ4QXJyYXkoU2EoXCJMT0FEX1NFU1NJT058XCIrYykpO2Vsc2V7dmFyIGU9U2EoXCJQRVJTSVNURU5UfFwiKSxmPW5ldyBVaW50OEFycmF5KGUuYnl0ZUxlbmd0aCtiLmJ5dGVMZW5ndGgpO2Yuc2V0KG5ldyBVaW50OEFycmF5KGUpLDApO2Yuc2V0KG5ldyBVaW50OEFycmF5KGIpLGUuYnl0ZUxlbmd0aCk7ZD1mfWVsc2UgZD1uZXcgVWludDhBcnJheShiKX1jYXRjaChnKXtyZXR1cm4gUHJvbWlzZS5yZWplY3QoZyl9YS5iPW5ldyB3O3RyeXthLmYud2Via2l0R2VuZXJhdGVLZXlSZXF1ZXN0KGEuYyxkKX1jYXRjaChnKXtpZihcIkludmFsaWRTdGF0ZUVycm9yXCIhPWcubmFtZSlyZXR1cm4gYS5iPW51bGwsUHJvbWlzZS5yZWplY3QoZyk7XHJcbnNldFRpbWVvdXQoZnVuY3Rpb24oKXt0cnl7dGhpcy5mLndlYmtpdEdlbmVyYXRlS2V5UmVxdWVzdCh0aGlzLmMsZCl9Y2F0Y2goYSl7dGhpcy5iLnJlamVjdChhKSx0aGlzLmI9bnVsbH19LmJpbmQoYSksMTApfXJldHVybiBhLmJ9az1EZi5wcm90b3R5cGU7XHJcbmsuZmI9ZnVuY3Rpb24oYSxiKXtpZih0aGlzLmEpdGhpcy5hLnRoZW4odGhpcy5mYi5iaW5kKHRoaXMsYSxiKSlbXCJjYXRjaFwiXSh0aGlzLmZiLmJpbmQodGhpcyxhLGIpKTtlbHNle3RoaXMuYT1hO3ZhciBjLGQ7XCJ3ZWJraXQtb3JnLnczLmNsZWFya2V5XCI9PXRoaXMuYz8oYz1EKGIpLGQ9SlNPTi5wYXJzZShjKSxcIm9jdFwiIT1kLmtleXNbMF0ua3R5JiYodGhpcy5hLnJlamVjdChFcnJvcihcIlJlc3BvbnNlIGlzIG5vdCBhIHZhbGlkIEpTT04gV2ViIEtleSBTZXQuXCIpKSx0aGlzLmE9bnVsbCksYz1YYShkLmtleXNbMF0uayksZD1YYShkLmtleXNbMF0ua2lkKSk6KGM9bmV3IFVpbnQ4QXJyYXkoYiksZD1udWxsKTt0cnl7dGhpcy5mLndlYmtpdEFkZEtleSh0aGlzLmMsYyxkLHRoaXMuc2Vzc2lvbklkKX1jYXRjaChlKXt0aGlzLmEucmVqZWN0KGUpLHRoaXMuYT1udWxsfX19O1xyXG5mdW5jdGlvbiBGZihhLGIpe2Eua2V5U3RhdHVzZXMuY2IoYik7YS5kaXNwYXRjaEV2ZW50KG5ldyBIKFwia2V5c3RhdHVzZXNjaGFuZ2VcIikpfWsuZ2VuZXJhdGVSZXF1ZXN0PWZ1bmN0aW9uKGEsYil7cmV0dXJuIEhmKHRoaXMsYixudWxsKX07ay5sb2FkPWZ1bmN0aW9uKGEpe3JldHVyblwicGVyc2lzdGVudC1saWNlbnNlXCI9PXRoaXMuZz9IZih0aGlzLG51bGwsYSk6UHJvbWlzZS5yZWplY3QoRXJyb3IoXCJOb3QgYSBwZXJzaXN0ZW50IHNlc3Npb24uXCIpKX07ay51cGRhdGU9ZnVuY3Rpb24oYSl7dmFyIGI9bmV3IHc7dGhpcy5mYihiLGEpO3JldHVybiBifTtcclxuay5jbG9zZT1mdW5jdGlvbigpe2lmKFwicGVyc2lzdGVudC1saWNlbnNlXCIhPXRoaXMuZyl7aWYoIXRoaXMuc2Vzc2lvbklkKXJldHVybiB0aGlzLmNsb3NlZC5yZWplY3QoRXJyb3IoXCJUaGUgc2Vzc2lvbiBpcyBub3QgY2FsbGFibGUuXCIpKSx0aGlzLmNsb3NlZDt0aGlzLmYud2Via2l0Q2FuY2VsS2V5UmVxdWVzdCh0aGlzLmMsdGhpcy5zZXNzaW9uSWQpfXRoaXMuY2xvc2VkLnJlc29sdmUoKTtyZXR1cm4gdGhpcy5jbG9zZWR9O2sucmVtb3ZlPWZ1bmN0aW9uKCl7cmV0dXJuXCJwZXJzaXN0ZW50LWxpY2Vuc2VcIiE9dGhpcy5nP1Byb21pc2UucmVqZWN0KEVycm9yKFwiTm90IGEgcGVyc2lzdGVudCBzZXNzaW9uLlwiKSk6dGhpcy5jbG9zZSgpfTtmdW5jdGlvbiBHZigpe3RoaXMuc2l6ZT0wO3RoaXMuYT12b2lkIDB9dmFyIElmO2s9R2YucHJvdG90eXBlO2suY2I9ZnVuY3Rpb24oYSl7dGhpcy5zaXplPXZvaWQgMD09YT8wOjE7dGhpcy5hPWF9O2suVWE9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hfTtcclxuay5mb3JFYWNoPWZ1bmN0aW9uKGEpe3RoaXMuYSYmYSh0aGlzLmEsSWYpfTtrLmdldD1mdW5jdGlvbihhKXtpZih0aGlzLmhhcyhhKSlyZXR1cm4gdGhpcy5hfTtrLmhhcz1mdW5jdGlvbihhKXt2YXIgYj1JZjtyZXR1cm4gdGhpcy5hJiYkYShuZXcgVWludDhBcnJheShhKSxuZXcgVWludDhBcnJheShiKSk/ITA6ITF9O2ZmKGZ1bmN0aW9uKCl7IXdpbmRvdy5IVE1MVmlkZW9FbGVtZW50fHxuYXZpZ2F0b3IucmVxdWVzdE1lZGlhS2V5U3lzdGVtQWNjZXNzJiZNZWRpYUtleVN5c3RlbUFjY2Vzcy5wcm90b3R5cGUuZ2V0Q29uZmlndXJhdGlvbnx8KEhUTUxNZWRpYUVsZW1lbnQucHJvdG90eXBlLndlYmtpdEdlbmVyYXRlS2V5UmVxdWVzdD8oSWY9KG5ldyBVaW50OEFycmF5KFswXSkpLmJ1ZmZlcixuYXZpZ2F0b3IucmVxdWVzdE1lZGlhS2V5U3lzdGVtQWNjZXNzPXlmLGRlbGV0ZSBIVE1MTWVkaWFFbGVtZW50LnByb3RvdHlwZS5tZWRpYUtleXMsSFRNTE1lZGlhRWxlbWVudC5wcm90b3R5cGUubWVkaWFLZXlzPW51bGwsSFRNTE1lZGlhRWxlbWVudC5wcm90b3R5cGUuc2V0TWVkaWFLZXlzPUFmLHdpbmRvdy5NZWRpYUtleXM9Q2Ysd2luZG93Lk1lZGlhS2V5U3lzdGVtQWNjZXNzPXpmKTp3aW5kb3cuTVNNZWRpYUtleXM/KHRmPShuZXcgVWludDhBcnJheShbMF0pKS5idWZmZXIsZGVsZXRlIEhUTUxNZWRpYUVsZW1lbnQucHJvdG90eXBlLm1lZGlhS2V5cyxcclxuSFRNTE1lZGlhRWxlbWVudC5wcm90b3R5cGUubWVkaWFLZXlzPW51bGwsSFRNTE1lZGlhRWxlbWVudC5wcm90b3R5cGUuc2V0TWVkaWFLZXlzPW1mLHdpbmRvdy5NZWRpYUtleXM9bGYsd2luZG93Lk1lZGlhS2V5U3lzdGVtQWNjZXNzPWtmLG5hdmlnYXRvci5yZXF1ZXN0TWVkaWFLZXlTeXN0ZW1BY2Nlc3M9amYpOihuYXZpZ2F0b3IucmVxdWVzdE1lZGlhS2V5U3lzdGVtQWNjZXNzPXVmLGRlbGV0ZSBIVE1MTWVkaWFFbGVtZW50LnByb3RvdHlwZS5tZWRpYUtleXMsSFRNTE1lZGlhRWxlbWVudC5wcm90b3R5cGUubWVkaWFLZXlzPW51bGwsSFRNTE1lZGlhRWxlbWVudC5wcm90b3R5cGUuc2V0TWVkaWFLZXlzPXZmLHdpbmRvdy5NZWRpYUtleXM9d2Ysd2luZG93Lk1lZGlhS2V5U3lzdGVtQWNjZXNzPXhmKSl9KTtmZihmdW5jdGlvbigpe2lmKHdpbmRvdy5NZWRpYVNvdXJjZSl7dmFyIGE9bmF2aWdhdG9yLnZlbmRvcixiPW5hdmlnYXRvci5hcHBWZXJzaW9uO2lmKGEmJmImJiEoMD5hLmluZGV4T2YoXCJBcHBsZVwiKSkpaWYoMDw9Yi5pbmRleE9mKFwiVmVyc2lvbi84XCIpKXdpbmRvdy5NZWRpYVNvdXJjZT1udWxsO2Vsc2V7dmFyIGM9TWVkaWFTb3VyY2UucHJvdG90eXBlLmFkZFNvdXJjZUJ1ZmZlcjtNZWRpYVNvdXJjZS5wcm90b3R5cGUuYWRkU291cmNlQnVmZmVyPWZ1bmN0aW9uKCl7dmFyIGE9Yy5hcHBseSh0aGlzLGFyZ3VtZW50cyk7YS5hYm9ydD1mdW5jdGlvbigpe307cmV0dXJuIGF9fX19KTtmdW5jdGlvbiBaKGEpe3RoaXMuYz1bXTt0aGlzLmI9W107dGhpcy5qYT1KZjtpZihhKXRyeXthKHRoaXMuVy5iaW5kKHRoaXMpLHRoaXMuYS5iaW5kKHRoaXMpKX1jYXRjaChiKXt0aGlzLmEoYil9fXZhciBKZj0wO2Z1bmN0aW9uIEtmKGEpe3ZhciBiPW5ldyBaO2IuVyhhKTtyZXR1cm4gYn1mdW5jdGlvbiBMZihhKXt2YXIgYj1uZXcgWjtiLmEoYSk7cmV0dXJuIGJ9ZnVuY3Rpb24gTWYoYSl7ZnVuY3Rpb24gYihhLGIsYyl7YS5qYT09SmYmJihlW2JdPWMsZCsrLGQ9PWUubGVuZ3RoJiZhLlcoZSkpfXZhciBjPW5ldyBaO2lmKCFhLmxlbmd0aClyZXR1cm4gYy5XKFtdKSxjO2Zvcih2YXIgZD0wLGU9QXJyYXkoYS5sZW5ndGgpLGY9Yy5hLmJpbmQoYyksZz0wO2c8YS5sZW5ndGg7KytnKWFbZ10mJmFbZ10udGhlbj9hW2ddLnRoZW4oYi5iaW5kKG51bGwsYyxnKSxmKTpiKGMsZyxhW2ddKTtyZXR1cm4gY31cclxuZnVuY3Rpb24gTmYoYSl7Zm9yKHZhciBiPW5ldyBaLGM9Yi5XLmJpbmQoYiksZD1iLmEuYmluZChiKSxlPTA7ZTxhLmxlbmd0aDsrK2UpYVtlXSYmYVtlXS50aGVuP2FbZV0udGhlbihjLGQpOmMoYVtlXSk7cmV0dXJuIGJ9Wi5wcm90b3R5cGUudGhlbj1mdW5jdGlvbihhLGIpe3ZhciBjPW5ldyBaO3N3aXRjaCh0aGlzLmphKXtjYXNlIDE6T2YodGhpcyxjLGEpO2JyZWFrO2Nhc2UgMjpPZih0aGlzLGMsYik7YnJlYWs7Y2FzZSBKZjp0aGlzLmMucHVzaCh7STpjLENhOmF9KSx0aGlzLmIucHVzaCh7STpjLENhOmJ9KX1yZXR1cm4gY307Wi5wcm90b3R5cGUudGhlbj1aLnByb3RvdHlwZS50aGVuO1oucHJvdG90eXBlW1wiY2F0Y2hcIl09ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMudGhlbih2b2lkIDAsYSl9O1oucHJvdG90eXBlW1wiY2F0Y2hcIl09Wi5wcm90b3R5cGVbXCJjYXRjaFwiXTtcclxuWi5wcm90b3R5cGUuVz1mdW5jdGlvbihhKXtpZih0aGlzLmphPT1KZil7dGhpcy5PYT1hO3RoaXMuamE9MTtmb3IoYT0wO2E8dGhpcy5jLmxlbmd0aDsrK2EpT2YodGhpcyx0aGlzLmNbYV0uSSx0aGlzLmNbYV0uQ2EpO3RoaXMuYz1bXTt0aGlzLmI9W119fTtaLnByb3RvdHlwZS5hPWZ1bmN0aW9uKGEpe2lmKHRoaXMuamE9PUpmKXt0aGlzLk9hPWE7dGhpcy5qYT0yO2ZvcihhPTA7YTx0aGlzLmIubGVuZ3RoOysrYSlPZih0aGlzLHRoaXMuYlthXS5JLHRoaXMuYlthXS5DYSk7dGhpcy5jPVtdO3RoaXMuYj1bXX19O1xyXG5mdW5jdGlvbiBPZihhLGIsYyl7UGYucHVzaChmdW5jdGlvbigpe2lmKGMmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGMpe3RyeXt2YXIgYT1jKHRoaXMuT2EpfWNhdGNoKGYpe2IuYShmKTtyZXR1cm59dmFyIGU7dHJ5e2U9YSYmYS50aGVufWNhdGNoKGYpe2IuYShmKTtyZXR1cm59YSBpbnN0YW5jZW9mIFo/YT09Yj9iLmEobmV3IFR5cGVFcnJvcihcIkNoYWluaW5nIGN5Y2xlIGRldGVjdGVkXCIpKTphLnRoZW4oYi5XLmJpbmQoYiksYi5hLmJpbmQoYikpOmU/UWYoYSxlLGIpOmIuVyhhKX1lbHNlIDE9PXRoaXMuamE/Yi5XKHRoaXMuT2EpOmIuYSh0aGlzLk9hKX0uYmluZChhKSk7bnVsbD09UmYmJihSZj1TZihUZikpfVxyXG5mdW5jdGlvbiBRZihhLGIsYyl7dHJ5e3ZhciBkPSExO2IuY2FsbChhLGZ1bmN0aW9uKGEpe2lmKCFkKXtkPSEwO3ZhciBiO3RyeXtiPWEmJmEudGhlbn1jYXRjaChnKXtjLmEoZyk7cmV0dXJufWI/UWYoYSxiLGMpOmMuVyhhKX19LGMuYS5iaW5kKGMpKX1jYXRjaChlKXtjLmEoZSl9fWZ1bmN0aW9uIFRmKCl7Zm9yKDtQZi5sZW5ndGg7KXtudWxsIT1SZiYmKFVmKFJmKSxSZj1udWxsKTt2YXIgYT1QZjtQZj1bXTtmb3IodmFyIGI9MDtiPGEubGVuZ3RoOysrYilhW2JdKCl9fWZ1bmN0aW9uIFNmKCl7cmV0dXJuIDB9ZnVuY3Rpb24gVWYoKXt9dmFyIFJmPW51bGwsUGY9W107XHJcbmZmKGZ1bmN0aW9uKGEpe3dpbmRvdy5zZXRJbW1lZGlhdGU/KFNmPWZ1bmN0aW9uKGEpe3JldHVybiB3aW5kb3cuc2V0SW1tZWRpYXRlKGEpfSxVZj1mdW5jdGlvbihhKXtyZXR1cm4gd2luZG93LmNsZWFySW1tZWRpYXRlKGEpfSk6KFNmPWZ1bmN0aW9uKGEpe3JldHVybiB3aW5kb3cuc2V0VGltZW91dChhLDApfSxVZj1mdW5jdGlvbihhKXtyZXR1cm4gd2luZG93LmNsZWFyVGltZW91dChhKX0pO2lmKCF3aW5kb3cuUHJvbWlzZXx8YSl3aW5kb3cuUHJvbWlzZT1aLHdpbmRvdy5Qcm9taXNlLnJlc29sdmU9S2Ysd2luZG93LlByb21pc2UucmVqZWN0PUxmLHdpbmRvdy5Qcm9taXNlLmFsbD1NZix3aW5kb3cuUHJvbWlzZS5yYWNlPU5mfSk7ZnVuY3Rpb24gVmYoKXtyZXR1cm57ZHJvcHBlZFZpZGVvRnJhbWVzOnRoaXMud2Via2l0RHJvcHBlZEZyYW1lQ291bnQsdG90YWxWaWRlb0ZyYW1lczp0aGlzLndlYmtpdERlY29kZWRGcmFtZUNvdW50LGNvcnJ1cHRlZFZpZGVvRnJhbWVzOjAsY3JlYXRpb25UaW1lOk5hTix0b3RhbEZyYW1lRGVsYXk6MH19ZmYoZnVuY3Rpb24oKXtpZih3aW5kb3cuSFRNTFZpZGVvRWxlbWVudCl7dmFyIGE9SFRNTFZpZGVvRWxlbWVudC5wcm90b3R5cGU7IWEuZ2V0VmlkZW9QbGF5YmFja1F1YWxpdHkmJlwid2Via2l0RHJvcHBlZEZyYW1lQ291bnRcImluIGEmJihhLmdldFZpZGVvUGxheWJhY2tRdWFsaXR5PVZmKX19KTt9LmNhbGwoZyx0aGlzKSk7XHJcbmlmICh0eXBlb2YobW9kdWxlKSE9XCJ1bmRlZmluZWRcIiYmbW9kdWxlLmV4cG9ydHMpbW9kdWxlLmV4cG9ydHM9Zy5zaGFrYTtcclxuZWxzZSBpZiAodHlwZW9mKGRlZmluZSkhPVwidW5kZWZpbmVkXCIgJiYgZGVmaW5lLmFtZClkZWZpbmUoZnVuY3Rpb24oKXtyZXR1cm4gZy5zaGFrYX0pO1xyXG5lbHNlIHRoaXMuc2hha2E9Zy5zaGFrYTtcclxufSkoKTtcclxuXHJcbiIsIi8vIHN0YXRzLmpzIC0gaHR0cDovL2dpdGh1Yi5jb20vbXJkb29iL3N0YXRzLmpzXHJcbnZhciBTdGF0cz1mdW5jdGlvbigpe3ZhciBsPURhdGUubm93KCksbT1sLGc9MCxuPUluZmluaXR5LG89MCxoPTAscD1JbmZpbml0eSxxPTAscj0wLHM9MCxmPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7Zi5pZD1cInN0YXRzXCI7Zi5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsZnVuY3Rpb24oYil7Yi5wcmV2ZW50RGVmYXVsdCgpO3QoKytzJTIpfSwhMSk7Zi5zdHlsZS5jc3NUZXh0PVwid2lkdGg6ODBweDtvcGFjaXR5OjAuOTtjdXJzb3I6cG9pbnRlclwiO3ZhciBhPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7YS5pZD1cImZwc1wiO2Euc3R5bGUuY3NzVGV4dD1cInBhZGRpbmc6MCAwIDNweCAzcHg7dGV4dC1hbGlnbjpsZWZ0O2JhY2tncm91bmQtY29sb3I6IzAwMlwiO2YuYXBwZW5kQ2hpbGQoYSk7dmFyIGk9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtpLmlkPVwiZnBzVGV4dFwiO2kuc3R5bGUuY3NzVGV4dD1cImNvbG9yOiMwZmY7Zm9udC1mYW1pbHk6SGVsdmV0aWNhLEFyaWFsLHNhbnMtc2VyaWY7Zm9udC1zaXplOjlweDtmb250LXdlaWdodDpib2xkO2xpbmUtaGVpZ2h0OjE1cHhcIjtcclxuaS5pbm5lckhUTUw9XCJGUFNcIjthLmFwcGVuZENoaWxkKGkpO3ZhciBjPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7Yy5pZD1cImZwc0dyYXBoXCI7Yy5zdHlsZS5jc3NUZXh0PVwicG9zaXRpb246cmVsYXRpdmU7d2lkdGg6NzRweDtoZWlnaHQ6MzBweDtiYWNrZ3JvdW5kLWNvbG9yOiMwZmZcIjtmb3IoYS5hcHBlbmRDaGlsZChjKTs3ND5jLmNoaWxkcmVuLmxlbmd0aDspe3ZhciBqPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO2ouc3R5bGUuY3NzVGV4dD1cIndpZHRoOjFweDtoZWlnaHQ6MzBweDtmbG9hdDpsZWZ0O2JhY2tncm91bmQtY29sb3I6IzExM1wiO2MuYXBwZW5kQ2hpbGQoail9dmFyIGQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtkLmlkPVwibXNcIjtkLnN0eWxlLmNzc1RleHQ9XCJwYWRkaW5nOjAgMCAzcHggM3B4O3RleHQtYWxpZ246bGVmdDtiYWNrZ3JvdW5kLWNvbG9yOiMwMjA7ZGlzcGxheTpub25lXCI7Zi5hcHBlbmRDaGlsZChkKTt2YXIgaz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG5rLmlkPVwibXNUZXh0XCI7ay5zdHlsZS5jc3NUZXh0PVwiY29sb3I6IzBmMDtmb250LWZhbWlseTpIZWx2ZXRpY2EsQXJpYWwsc2Fucy1zZXJpZjtmb250LXNpemU6OXB4O2ZvbnQtd2VpZ2h0OmJvbGQ7bGluZS1oZWlnaHQ6MTVweFwiO2suaW5uZXJIVE1MPVwiTVNcIjtkLmFwcGVuZENoaWxkKGspO3ZhciBlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7ZS5pZD1cIm1zR3JhcGhcIjtlLnN0eWxlLmNzc1RleHQ9XCJwb3NpdGlvbjpyZWxhdGl2ZTt3aWR0aDo3NHB4O2hlaWdodDozMHB4O2JhY2tncm91bmQtY29sb3I6IzBmMFwiO2ZvcihkLmFwcGVuZENoaWxkKGUpOzc0PmUuY2hpbGRyZW4ubGVuZ3RoOylqPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpLGouc3R5bGUuY3NzVGV4dD1cIndpZHRoOjFweDtoZWlnaHQ6MzBweDtmbG9hdDpsZWZ0O2JhY2tncm91bmQtY29sb3I6IzEzMVwiLGUuYXBwZW5kQ2hpbGQoaik7dmFyIHQ9ZnVuY3Rpb24oYil7cz1iO3N3aXRjaChzKXtjYXNlIDA6YS5zdHlsZS5kaXNwbGF5PVxyXG5cImJsb2NrXCI7ZC5zdHlsZS5kaXNwbGF5PVwibm9uZVwiO2JyZWFrO2Nhc2UgMTphLnN0eWxlLmRpc3BsYXk9XCJub25lXCIsZC5zdHlsZS5kaXNwbGF5PVwiYmxvY2tcIn19O3JldHVybntSRVZJU0lPTjoxMixkb21FbGVtZW50OmYsc2V0TW9kZTp0LGJlZ2luOmZ1bmN0aW9uKCl7bD1EYXRlLm5vdygpfSxlbmQ6ZnVuY3Rpb24oKXt2YXIgYj1EYXRlLm5vdygpO2c9Yi1sO249TWF0aC5taW4obixnKTtvPU1hdGgubWF4KG8sZyk7ay50ZXh0Q29udGVudD1nK1wiIE1TIChcIituK1wiLVwiK28rXCIpXCI7dmFyIGE9TWF0aC5taW4oMzAsMzAtMzAqKGcvMjAwKSk7ZS5hcHBlbmRDaGlsZChlLmZpcnN0Q2hpbGQpLnN0eWxlLmhlaWdodD1hK1wicHhcIjtyKys7Yj5tKzFFMyYmKGg9TWF0aC5yb3VuZCgxRTMqci8oYi1tKSkscD1NYXRoLm1pbihwLGgpLHE9TWF0aC5tYXgocSxoKSxpLnRleHRDb250ZW50PWgrXCIgRlBTIChcIitwK1wiLVwiK3ErXCIpXCIsYT1NYXRoLm1pbigzMCwzMC0zMCooaC8xMDApKSxjLmFwcGVuZENoaWxkKGMuZmlyc3RDaGlsZCkuc3R5bGUuaGVpZ2h0PVxyXG5hK1wicHhcIixtPWIscj0wKTtyZXR1cm4gYn0sdXBkYXRlOmZ1bmN0aW9uKCl7bD10aGlzLmVuZCgpfX19O1wib2JqZWN0XCI9PT10eXBlb2YgbW9kdWxlJiYobW9kdWxlLmV4cG9ydHM9U3RhdHMpO1xyXG4iLCIvKipcclxuICogVHdlZW4uanMgLSBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2VcclxuICogaHR0cHM6Ly9naXRodWIuY29tL3R3ZWVuanMvdHdlZW4uanNcclxuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gKlxyXG4gKiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL3R3ZWVuanMvdHdlZW4uanMvZ3JhcGhzL2NvbnRyaWJ1dG9ycyBmb3IgdGhlIGZ1bGwgbGlzdCBvZiBjb250cmlidXRvcnMuXHJcbiAqIFRoYW5rIHlvdSBhbGwsIHlvdSdyZSBhd2Vzb21lIVxyXG4gKi9cclxuXHJcbnZhciBUV0VFTiA9IFRXRUVOIHx8IChmdW5jdGlvbiAoKSB7XHJcblxyXG5cdHZhciBfdHdlZW5zID0gW107XHJcblxyXG5cdHJldHVybiB7XHJcblxyXG5cdFx0Z2V0QWxsOiBmdW5jdGlvbiAoKSB7XHJcblxyXG5cdFx0XHRyZXR1cm4gX3R3ZWVucztcclxuXHJcblx0XHR9LFxyXG5cclxuXHRcdHJlbW92ZUFsbDogZnVuY3Rpb24gKCkge1xyXG5cclxuXHRcdFx0X3R3ZWVucyA9IFtdO1xyXG5cclxuXHRcdH0sXHJcblxyXG5cdFx0YWRkOiBmdW5jdGlvbiAodHdlZW4pIHtcclxuXHJcblx0XHRcdF90d2VlbnMucHVzaCh0d2Vlbik7XHJcblxyXG5cdFx0fSxcclxuXHJcblx0XHRyZW1vdmU6IGZ1bmN0aW9uICh0d2Vlbikge1xyXG5cclxuXHRcdFx0dmFyIGkgPSBfdHdlZW5zLmluZGV4T2YodHdlZW4pO1xyXG5cclxuXHRcdFx0aWYgKGkgIT09IC0xKSB7XHJcblx0XHRcdFx0X3R3ZWVucy5zcGxpY2UoaSwgMSk7XHJcblx0XHRcdH1cclxuXHJcblx0XHR9LFxyXG5cclxuXHRcdHVwZGF0ZTogZnVuY3Rpb24gKHRpbWUsIHByZXNlcnZlKSB7XHJcblxyXG5cdFx0XHRpZiAoX3R3ZWVucy5sZW5ndGggPT09IDApIHtcclxuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHZhciBpID0gMDtcclxuXHJcblx0XHRcdHRpbWUgPSB0aW1lICE9PSB1bmRlZmluZWQgPyB0aW1lIDogVFdFRU4ubm93KCk7XHJcblxyXG5cdFx0XHR3aGlsZSAoaSA8IF90d2VlbnMubGVuZ3RoKSB7XHJcblxyXG5cdFx0XHRcdGlmIChfdHdlZW5zW2ldLnVwZGF0ZSh0aW1lKSB8fCBwcmVzZXJ2ZSkge1xyXG5cdFx0XHRcdFx0aSsrO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRfdHdlZW5zLnNwbGljZShpLCAxKTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHJcblx0XHR9XHJcblx0fTtcclxuXHJcbn0pKCk7XHJcblxyXG5cclxuLy8gSW5jbHVkZSBhIHBlcmZvcm1hbmNlLm5vdyBwb2x5ZmlsbFxyXG4oZnVuY3Rpb24gKCkge1xyXG5cdC8vIEluIG5vZGUuanMsIHVzZSBwcm9jZXNzLmhydGltZS5cclxuXHRpZiAodGhpcy53aW5kb3cgPT09IHVuZGVmaW5lZCAmJiB0aGlzLnByb2Nlc3MgIT09IHVuZGVmaW5lZCkge1xyXG5cdFx0VFdFRU4ubm93ID0gZnVuY3Rpb24gKCkge1xyXG5cdFx0XHR2YXIgdGltZSA9IHByb2Nlc3MuaHJ0aW1lKCk7XHJcblxyXG5cdFx0XHQvLyBDb252ZXJ0IFtzZWNvbmRzLCBtaWNyb3NlY29uZHNdIHRvIG1pbGxpc2Vjb25kcy5cclxuXHRcdFx0cmV0dXJuIHRpbWVbMF0gKiAxMDAwICsgdGltZVsxXSAvIDEwMDA7XHJcblx0XHR9O1xyXG5cdH1cclxuXHQvLyBJbiBhIGJyb3dzZXIsIHVzZSB3aW5kb3cucGVyZm9ybWFuY2Uubm93IGlmIGl0IGlzIGF2YWlsYWJsZS5cclxuXHRlbHNlIGlmICh0aGlzLndpbmRvdyAhPT0gdW5kZWZpbmVkICYmXHJcblx0ICAgICAgICAgd2luZG93LnBlcmZvcm1hbmNlICE9PSB1bmRlZmluZWQgJiZcclxuXHRcdCB3aW5kb3cucGVyZm9ybWFuY2Uubm93ICE9PSB1bmRlZmluZWQpIHtcclxuXHJcblx0XHQvLyBUaGlzIG11c3QgYmUgYm91bmQsIGJlY2F1c2UgZGlyZWN0bHkgYXNzaWduaW5nIHRoaXMgZnVuY3Rpb25cclxuXHRcdC8vIGxlYWRzIHRvIGFuIGludm9jYXRpb24gZXhjZXB0aW9uIGluIENocm9tZS5cclxuXHRcdFRXRUVOLm5vdyA9IHdpbmRvdy5wZXJmb3JtYW5jZS5ub3cuYmluZCh3aW5kb3cucGVyZm9ybWFuY2UpO1xyXG5cdH1cclxuXHQvLyBVc2UgRGF0ZS5ub3cgaWYgaXQgaXMgYXZhaWxhYmxlLlxyXG5cdGVsc2UgaWYgKERhdGUubm93ICE9PSB1bmRlZmluZWQpIHtcclxuXHRcdFRXRUVOLm5vdyA9IERhdGUubm93O1xyXG5cdH1cclxuXHQvLyBPdGhlcndpc2UsIHVzZSAnbmV3IERhdGUoKS5nZXRUaW1lKCknLlxyXG5cdGVsc2Uge1xyXG5cdFx0VFdFRU4ubm93ID0gZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRyZXR1cm4gbmV3IERhdGUoKS5nZXRUaW1lKCk7XHJcblx0XHR9O1xyXG5cdH1cclxufSkoKTtcclxuXHJcblxyXG5UV0VFTi5Ud2VlbiA9IGZ1bmN0aW9uIChvYmplY3QpIHtcclxuXHJcblx0dmFyIF9vYmplY3QgPSBvYmplY3Q7XHJcblx0dmFyIF92YWx1ZXNTdGFydCA9IHt9O1xyXG5cdHZhciBfdmFsdWVzRW5kID0ge307XHJcblx0dmFyIF92YWx1ZXNTdGFydFJlcGVhdCA9IHt9O1xyXG5cdHZhciBfZHVyYXRpb24gPSAxMDAwO1xyXG5cdHZhciBfcmVwZWF0ID0gMDtcclxuXHR2YXIgX3lveW8gPSBmYWxzZTtcclxuXHR2YXIgX2lzUGxheWluZyA9IGZhbHNlO1xyXG5cdHZhciBfcmV2ZXJzZWQgPSBmYWxzZTtcclxuXHR2YXIgX2RlbGF5VGltZSA9IDA7XHJcblx0dmFyIF9zdGFydFRpbWUgPSBudWxsO1xyXG5cdHZhciBfZWFzaW5nRnVuY3Rpb24gPSBUV0VFTi5FYXNpbmcuTGluZWFyLk5vbmU7XHJcblx0dmFyIF9pbnRlcnBvbGF0aW9uRnVuY3Rpb24gPSBUV0VFTi5JbnRlcnBvbGF0aW9uLkxpbmVhcjtcclxuXHR2YXIgX2NoYWluZWRUd2VlbnMgPSBbXTtcclxuXHR2YXIgX29uU3RhcnRDYWxsYmFjayA9IG51bGw7XHJcblx0dmFyIF9vblN0YXJ0Q2FsbGJhY2tGaXJlZCA9IGZhbHNlO1xyXG5cdHZhciBfb25VcGRhdGVDYWxsYmFjayA9IG51bGw7XHJcblx0dmFyIF9vbkNvbXBsZXRlQ2FsbGJhY2sgPSBudWxsO1xyXG5cdHZhciBfb25TdG9wQ2FsbGJhY2sgPSBudWxsO1xyXG5cclxuXHQvLyBTZXQgYWxsIHN0YXJ0aW5nIHZhbHVlcyBwcmVzZW50IG9uIHRoZSB0YXJnZXQgb2JqZWN0XHJcblx0Zm9yICh2YXIgZmllbGQgaW4gb2JqZWN0KSB7XHJcblx0XHRfdmFsdWVzU3RhcnRbZmllbGRdID0gcGFyc2VGbG9hdChvYmplY3RbZmllbGRdLCAxMCk7XHJcblx0fVxyXG5cclxuXHR0aGlzLnRvID0gZnVuY3Rpb24gKHByb3BlcnRpZXMsIGR1cmF0aW9uKSB7XHJcblxyXG5cdFx0aWYgKGR1cmF0aW9uICE9PSB1bmRlZmluZWQpIHtcclxuXHRcdFx0X2R1cmF0aW9uID0gZHVyYXRpb247XHJcblx0XHR9XHJcblxyXG5cdFx0X3ZhbHVlc0VuZCA9IHByb3BlcnRpZXM7XHJcblxyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblxyXG5cdH07XHJcblxyXG5cdHRoaXMuc3RhcnQgPSBmdW5jdGlvbiAodGltZSkge1xyXG5cclxuXHRcdFRXRUVOLmFkZCh0aGlzKTtcclxuXHJcblx0XHRfaXNQbGF5aW5nID0gdHJ1ZTtcclxuXHJcblx0XHRfb25TdGFydENhbGxiYWNrRmlyZWQgPSBmYWxzZTtcclxuXHJcblx0XHRfc3RhcnRUaW1lID0gdGltZSAhPT0gdW5kZWZpbmVkID8gdGltZSA6IFRXRUVOLm5vdygpO1xyXG5cdFx0X3N0YXJ0VGltZSArPSBfZGVsYXlUaW1lO1xyXG5cclxuXHRcdGZvciAodmFyIHByb3BlcnR5IGluIF92YWx1ZXNFbmQpIHtcclxuXHJcblx0XHRcdC8vIENoZWNrIGlmIGFuIEFycmF5IHdhcyBwcm92aWRlZCBhcyBwcm9wZXJ0eSB2YWx1ZVxyXG5cdFx0XHRpZiAoX3ZhbHVlc0VuZFtwcm9wZXJ0eV0gaW5zdGFuY2VvZiBBcnJheSkge1xyXG5cclxuXHRcdFx0XHRpZiAoX3ZhbHVlc0VuZFtwcm9wZXJ0eV0ubGVuZ3RoID09PSAwKSB7XHJcblx0XHRcdFx0XHRjb250aW51ZTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdC8vIENyZWF0ZSBhIGxvY2FsIGNvcHkgb2YgdGhlIEFycmF5IHdpdGggdGhlIHN0YXJ0IHZhbHVlIGF0IHRoZSBmcm9udFxyXG5cdFx0XHRcdF92YWx1ZXNFbmRbcHJvcGVydHldID0gW19vYmplY3RbcHJvcGVydHldXS5jb25jYXQoX3ZhbHVlc0VuZFtwcm9wZXJ0eV0pO1xyXG5cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gSWYgYHRvKClgIHNwZWNpZmllcyBhIHByb3BlcnR5IHRoYXQgZG9lc24ndCBleGlzdCBpbiB0aGUgc291cmNlIG9iamVjdCxcclxuXHRcdFx0Ly8gd2Ugc2hvdWxkIG5vdCBzZXQgdGhhdCBwcm9wZXJ0eSBpbiB0aGUgb2JqZWN0XHJcblx0XHRcdGlmIChfdmFsdWVzU3RhcnRbcHJvcGVydHldID09PSB1bmRlZmluZWQpIHtcclxuXHRcdFx0XHRjb250aW51ZTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0X3ZhbHVlc1N0YXJ0W3Byb3BlcnR5XSA9IF9vYmplY3RbcHJvcGVydHldO1xyXG5cclxuXHRcdFx0aWYgKChfdmFsdWVzU3RhcnRbcHJvcGVydHldIGluc3RhbmNlb2YgQXJyYXkpID09PSBmYWxzZSkge1xyXG5cdFx0XHRcdF92YWx1ZXNTdGFydFtwcm9wZXJ0eV0gKj0gMS4wOyAvLyBFbnN1cmVzIHdlJ3JlIHVzaW5nIG51bWJlcnMsIG5vdCBzdHJpbmdzXHJcblx0XHRcdH1cclxuXHJcblx0XHRcdF92YWx1ZXNTdGFydFJlcGVhdFtwcm9wZXJ0eV0gPSBfdmFsdWVzU3RhcnRbcHJvcGVydHldIHx8IDA7XHJcblxyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiB0aGlzO1xyXG5cclxuXHR9O1xyXG5cclxuXHR0aGlzLnN0b3AgPSBmdW5jdGlvbiAoKSB7XHJcblxyXG5cdFx0aWYgKCFfaXNQbGF5aW5nKSB7XHJcblx0XHRcdHJldHVybiB0aGlzO1xyXG5cdFx0fVxyXG5cclxuXHRcdFRXRUVOLnJlbW92ZSh0aGlzKTtcclxuXHRcdF9pc1BsYXlpbmcgPSBmYWxzZTtcclxuXHJcblx0XHRpZiAoX29uU3RvcENhbGxiYWNrICE9PSBudWxsKSB7XHJcblx0XHRcdF9vblN0b3BDYWxsYmFjay5jYWxsKF9vYmplY3QpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuc3RvcENoYWluZWRUd2VlbnMoKTtcclxuXHRcdHJldHVybiB0aGlzO1xyXG5cclxuXHR9O1xyXG5cclxuXHR0aGlzLnN0b3BDaGFpbmVkVHdlZW5zID0gZnVuY3Rpb24gKCkge1xyXG5cclxuXHRcdGZvciAodmFyIGkgPSAwLCBudW1DaGFpbmVkVHdlZW5zID0gX2NoYWluZWRUd2VlbnMubGVuZ3RoOyBpIDwgbnVtQ2hhaW5lZFR3ZWVuczsgaSsrKSB7XHJcblx0XHRcdF9jaGFpbmVkVHdlZW5zW2ldLnN0b3AoKTtcclxuXHRcdH1cclxuXHJcblx0fTtcclxuXHJcblx0dGhpcy5kZWxheSA9IGZ1bmN0aW9uIChhbW91bnQpIHtcclxuXHJcblx0XHRfZGVsYXlUaW1lID0gYW1vdW50O1xyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblxyXG5cdH07XHJcblxyXG5cdHRoaXMucmVwZWF0ID0gZnVuY3Rpb24gKHRpbWVzKSB7XHJcblxyXG5cdFx0X3JlcGVhdCA9IHRpbWVzO1xyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblxyXG5cdH07XHJcblxyXG5cdHRoaXMueW95byA9IGZ1bmN0aW9uICh5b3lvKSB7XHJcblxyXG5cdFx0X3lveW8gPSB5b3lvO1xyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblxyXG5cdH07XHJcblxyXG5cclxuXHR0aGlzLmVhc2luZyA9IGZ1bmN0aW9uIChlYXNpbmcpIHtcclxuXHJcblx0XHRfZWFzaW5nRnVuY3Rpb24gPSBlYXNpbmc7XHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHJcblx0fTtcclxuXHJcblx0dGhpcy5pbnRlcnBvbGF0aW9uID0gZnVuY3Rpb24gKGludGVycG9sYXRpb24pIHtcclxuXHJcblx0XHRfaW50ZXJwb2xhdGlvbkZ1bmN0aW9uID0gaW50ZXJwb2xhdGlvbjtcclxuXHRcdHJldHVybiB0aGlzO1xyXG5cclxuXHR9O1xyXG5cclxuXHR0aGlzLmNoYWluID0gZnVuY3Rpb24gKCkge1xyXG5cclxuXHRcdF9jaGFpbmVkVHdlZW5zID0gYXJndW1lbnRzO1xyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblxyXG5cdH07XHJcblxyXG5cdHRoaXMub25TdGFydCA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xyXG5cclxuXHRcdF9vblN0YXJ0Q2FsbGJhY2sgPSBjYWxsYmFjaztcclxuXHRcdHJldHVybiB0aGlzO1xyXG5cclxuXHR9O1xyXG5cclxuXHR0aGlzLm9uVXBkYXRlID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XHJcblxyXG5cdFx0X29uVXBkYXRlQ2FsbGJhY2sgPSBjYWxsYmFjaztcclxuXHRcdHJldHVybiB0aGlzO1xyXG5cclxuXHR9O1xyXG5cclxuXHR0aGlzLm9uQ29tcGxldGUgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcclxuXHJcblx0XHRfb25Db21wbGV0ZUNhbGxiYWNrID0gY2FsbGJhY2s7XHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHJcblx0fTtcclxuXHJcblx0dGhpcy5vblN0b3AgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcclxuXHJcblx0XHRfb25TdG9wQ2FsbGJhY2sgPSBjYWxsYmFjaztcclxuXHRcdHJldHVybiB0aGlzO1xyXG5cclxuXHR9O1xyXG5cclxuXHR0aGlzLnVwZGF0ZSA9IGZ1bmN0aW9uICh0aW1lKSB7XHJcblxyXG5cdFx0dmFyIHByb3BlcnR5O1xyXG5cdFx0dmFyIGVsYXBzZWQ7XHJcblx0XHR2YXIgdmFsdWU7XHJcblxyXG5cdFx0aWYgKHRpbWUgPCBfc3RhcnRUaW1lKSB7XHJcblx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmIChfb25TdGFydENhbGxiYWNrRmlyZWQgPT09IGZhbHNlKSB7XHJcblxyXG5cdFx0XHRpZiAoX29uU3RhcnRDYWxsYmFjayAhPT0gbnVsbCkge1xyXG5cdFx0XHRcdF9vblN0YXJ0Q2FsbGJhY2suY2FsbChfb2JqZWN0KTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0X29uU3RhcnRDYWxsYmFja0ZpcmVkID0gdHJ1ZTtcclxuXHJcblx0XHR9XHJcblxyXG5cdFx0ZWxhcHNlZCA9ICh0aW1lIC0gX3N0YXJ0VGltZSkgLyBfZHVyYXRpb247XHJcblx0XHRlbGFwc2VkID0gZWxhcHNlZCA+IDEgPyAxIDogZWxhcHNlZDtcclxuXHJcblx0XHR2YWx1ZSA9IF9lYXNpbmdGdW5jdGlvbihlbGFwc2VkKTtcclxuXHJcblx0XHRmb3IgKHByb3BlcnR5IGluIF92YWx1ZXNFbmQpIHtcclxuXHJcblx0XHRcdC8vIERvbid0IHVwZGF0ZSBwcm9wZXJ0aWVzIHRoYXQgZG8gbm90IGV4aXN0IGluIHRoZSBzb3VyY2Ugb2JqZWN0XHJcblx0XHRcdGlmIChfdmFsdWVzU3RhcnRbcHJvcGVydHldID09PSB1bmRlZmluZWQpIHtcclxuXHRcdFx0XHRjb250aW51ZTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0dmFyIHN0YXJ0ID0gX3ZhbHVlc1N0YXJ0W3Byb3BlcnR5XSB8fCAwO1xyXG5cdFx0XHR2YXIgZW5kID0gX3ZhbHVlc0VuZFtwcm9wZXJ0eV07XHJcblxyXG5cdFx0XHRpZiAoZW5kIGluc3RhbmNlb2YgQXJyYXkpIHtcclxuXHJcblx0XHRcdFx0X29iamVjdFtwcm9wZXJ0eV0gPSBfaW50ZXJwb2xhdGlvbkZ1bmN0aW9uKGVuZCwgdmFsdWUpO1xyXG5cclxuXHRcdFx0fSBlbHNlIHtcclxuXHJcblx0XHRcdFx0Ly8gUGFyc2VzIHJlbGF0aXZlIGVuZCB2YWx1ZXMgd2l0aCBzdGFydCBhcyBiYXNlIChlLmcuOiArMTAsIC0zKVxyXG5cdFx0XHRcdGlmICh0eXBlb2YgKGVuZCkgPT09ICdzdHJpbmcnKSB7XHJcblxyXG5cdFx0XHRcdFx0aWYgKGVuZC5jaGFyQXQoMCkgPT09ICcrJyB8fCBlbmQuY2hhckF0KDApID09PSAnLScpIHtcclxuXHRcdFx0XHRcdFx0ZW5kID0gc3RhcnQgKyBwYXJzZUZsb2F0KGVuZCwgMTApO1xyXG5cdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0ZW5kID0gcGFyc2VGbG9hdChlbmQsIDEwKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdC8vIFByb3RlY3QgYWdhaW5zdCBub24gbnVtZXJpYyBwcm9wZXJ0aWVzLlxyXG5cdFx0XHRcdGlmICh0eXBlb2YgKGVuZCkgPT09ICdudW1iZXInKSB7XHJcblx0XHRcdFx0XHRfb2JqZWN0W3Byb3BlcnR5XSA9IHN0YXJ0ICsgKGVuZCAtIHN0YXJ0KSAqIHZhbHVlO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdH1cclxuXHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKF9vblVwZGF0ZUNhbGxiYWNrICE9PSBudWxsKSB7XHJcblx0XHRcdF9vblVwZGF0ZUNhbGxiYWNrLmNhbGwoX29iamVjdCwgdmFsdWUpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmIChlbGFwc2VkID09PSAxKSB7XHJcblxyXG5cdFx0XHRpZiAoX3JlcGVhdCA+IDApIHtcclxuXHJcblx0XHRcdFx0aWYgKGlzRmluaXRlKF9yZXBlYXQpKSB7XHJcblx0XHRcdFx0XHRfcmVwZWF0LS07XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHQvLyBSZWFzc2lnbiBzdGFydGluZyB2YWx1ZXMsIHJlc3RhcnQgYnkgbWFraW5nIHN0YXJ0VGltZSA9IG5vd1xyXG5cdFx0XHRcdGZvciAocHJvcGVydHkgaW4gX3ZhbHVlc1N0YXJ0UmVwZWF0KSB7XHJcblxyXG5cdFx0XHRcdFx0aWYgKHR5cGVvZiAoX3ZhbHVlc0VuZFtwcm9wZXJ0eV0pID09PSAnc3RyaW5nJykge1xyXG5cdFx0XHRcdFx0XHRfdmFsdWVzU3RhcnRSZXBlYXRbcHJvcGVydHldID0gX3ZhbHVlc1N0YXJ0UmVwZWF0W3Byb3BlcnR5XSArIHBhcnNlRmxvYXQoX3ZhbHVlc0VuZFtwcm9wZXJ0eV0sIDEwKTtcclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHRpZiAoX3lveW8pIHtcclxuXHRcdFx0XHRcdFx0dmFyIHRtcCA9IF92YWx1ZXNTdGFydFJlcGVhdFtwcm9wZXJ0eV07XHJcblxyXG5cdFx0XHRcdFx0XHRfdmFsdWVzU3RhcnRSZXBlYXRbcHJvcGVydHldID0gX3ZhbHVlc0VuZFtwcm9wZXJ0eV07XHJcblx0XHRcdFx0XHRcdF92YWx1ZXNFbmRbcHJvcGVydHldID0gdG1wO1xyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdF92YWx1ZXNTdGFydFtwcm9wZXJ0eV0gPSBfdmFsdWVzU3RhcnRSZXBlYXRbcHJvcGVydHldO1xyXG5cclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdGlmIChfeW95bykge1xyXG5cdFx0XHRcdFx0X3JldmVyc2VkID0gIV9yZXZlcnNlZDtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdF9zdGFydFRpbWUgPSB0aW1lICsgX2RlbGF5VGltZTtcclxuXHJcblx0XHRcdFx0cmV0dXJuIHRydWU7XHJcblxyXG5cdFx0XHR9IGVsc2Uge1xyXG5cclxuXHRcdFx0XHRpZiAoX29uQ29tcGxldGVDYWxsYmFjayAhPT0gbnVsbCkge1xyXG5cdFx0XHRcdFx0X29uQ29tcGxldGVDYWxsYmFjay5jYWxsKF9vYmplY3QpO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Zm9yICh2YXIgaSA9IDAsIG51bUNoYWluZWRUd2VlbnMgPSBfY2hhaW5lZFR3ZWVucy5sZW5ndGg7IGkgPCBudW1DaGFpbmVkVHdlZW5zOyBpKyspIHtcclxuXHRcdFx0XHRcdC8vIE1ha2UgdGhlIGNoYWluZWQgdHdlZW5zIHN0YXJ0IGV4YWN0bHkgYXQgdGhlIHRpbWUgdGhleSBzaG91bGQsXHJcblx0XHRcdFx0XHQvLyBldmVuIGlmIHRoZSBgdXBkYXRlKClgIG1ldGhvZCB3YXMgY2FsbGVkIHdheSBwYXN0IHRoZSBkdXJhdGlvbiBvZiB0aGUgdHdlZW5cclxuXHRcdFx0XHRcdF9jaGFpbmVkVHdlZW5zW2ldLnN0YXJ0KF9zdGFydFRpbWUgKyBfZHVyYXRpb24pO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cclxuXHRcdFx0fVxyXG5cclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gdHJ1ZTtcclxuXHJcblx0fTtcclxuXHJcbn07XHJcblxyXG5cclxuVFdFRU4uRWFzaW5nID0ge1xyXG5cclxuXHRMaW5lYXI6IHtcclxuXHJcblx0XHROb25lOiBmdW5jdGlvbiAoaykge1xyXG5cclxuXHRcdFx0cmV0dXJuIGs7XHJcblxyXG5cdFx0fVxyXG5cclxuXHR9LFxyXG5cclxuXHRRdWFkcmF0aWM6IHtcclxuXHJcblx0XHRJbjogZnVuY3Rpb24gKGspIHtcclxuXHJcblx0XHRcdHJldHVybiBrICogaztcclxuXHJcblx0XHR9LFxyXG5cclxuXHRcdE91dDogZnVuY3Rpb24gKGspIHtcclxuXHJcblx0XHRcdHJldHVybiBrICogKDIgLSBrKTtcclxuXHJcblx0XHR9LFxyXG5cclxuXHRcdEluT3V0OiBmdW5jdGlvbiAoaykge1xyXG5cclxuXHRcdFx0aWYgKChrICo9IDIpIDwgMSkge1xyXG5cdFx0XHRcdHJldHVybiAwLjUgKiBrICogaztcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0cmV0dXJuIC0gMC41ICogKC0tayAqIChrIC0gMikgLSAxKTtcclxuXHJcblx0XHR9XHJcblxyXG5cdH0sXHJcblxyXG5cdEN1YmljOiB7XHJcblxyXG5cdFx0SW46IGZ1bmN0aW9uIChrKSB7XHJcblxyXG5cdFx0XHRyZXR1cm4gayAqIGsgKiBrO1xyXG5cclxuXHRcdH0sXHJcblxyXG5cdFx0T3V0OiBmdW5jdGlvbiAoaykge1xyXG5cclxuXHRcdFx0cmV0dXJuIC0tayAqIGsgKiBrICsgMTtcclxuXHJcblx0XHR9LFxyXG5cclxuXHRcdEluT3V0OiBmdW5jdGlvbiAoaykge1xyXG5cclxuXHRcdFx0aWYgKChrICo9IDIpIDwgMSkge1xyXG5cdFx0XHRcdHJldHVybiAwLjUgKiBrICogayAqIGs7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHJldHVybiAwLjUgKiAoKGsgLT0gMikgKiBrICogayArIDIpO1xyXG5cclxuXHRcdH1cclxuXHJcblx0fSxcclxuXHJcblx0UXVhcnRpYzoge1xyXG5cclxuXHRcdEluOiBmdW5jdGlvbiAoaykge1xyXG5cclxuXHRcdFx0cmV0dXJuIGsgKiBrICogayAqIGs7XHJcblxyXG5cdFx0fSxcclxuXHJcblx0XHRPdXQ6IGZ1bmN0aW9uIChrKSB7XHJcblxyXG5cdFx0XHRyZXR1cm4gMSAtICgtLWsgKiBrICogayAqIGspO1xyXG5cclxuXHRcdH0sXHJcblxyXG5cdFx0SW5PdXQ6IGZ1bmN0aW9uIChrKSB7XHJcblxyXG5cdFx0XHRpZiAoKGsgKj0gMikgPCAxKSB7XHJcblx0XHRcdFx0cmV0dXJuIDAuNSAqIGsgKiBrICogayAqIGs7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHJldHVybiAtIDAuNSAqICgoayAtPSAyKSAqIGsgKiBrICogayAtIDIpO1xyXG5cclxuXHRcdH1cclxuXHJcblx0fSxcclxuXHJcblx0UXVpbnRpYzoge1xyXG5cclxuXHRcdEluOiBmdW5jdGlvbiAoaykge1xyXG5cclxuXHRcdFx0cmV0dXJuIGsgKiBrICogayAqIGsgKiBrO1xyXG5cclxuXHRcdH0sXHJcblxyXG5cdFx0T3V0OiBmdW5jdGlvbiAoaykge1xyXG5cclxuXHRcdFx0cmV0dXJuIC0tayAqIGsgKiBrICogayAqIGsgKyAxO1xyXG5cclxuXHRcdH0sXHJcblxyXG5cdFx0SW5PdXQ6IGZ1bmN0aW9uIChrKSB7XHJcblxyXG5cdFx0XHRpZiAoKGsgKj0gMikgPCAxKSB7XHJcblx0XHRcdFx0cmV0dXJuIDAuNSAqIGsgKiBrICogayAqIGsgKiBrO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRyZXR1cm4gMC41ICogKChrIC09IDIpICogayAqIGsgKiBrICogayArIDIpO1xyXG5cclxuXHRcdH1cclxuXHJcblx0fSxcclxuXHJcblx0U2ludXNvaWRhbDoge1xyXG5cclxuXHRcdEluOiBmdW5jdGlvbiAoaykge1xyXG5cclxuXHRcdFx0cmV0dXJuIDEgLSBNYXRoLmNvcyhrICogTWF0aC5QSSAvIDIpO1xyXG5cclxuXHRcdH0sXHJcblxyXG5cdFx0T3V0OiBmdW5jdGlvbiAoaykge1xyXG5cclxuXHRcdFx0cmV0dXJuIE1hdGguc2luKGsgKiBNYXRoLlBJIC8gMik7XHJcblxyXG5cdFx0fSxcclxuXHJcblx0XHRJbk91dDogZnVuY3Rpb24gKGspIHtcclxuXHJcblx0XHRcdHJldHVybiAwLjUgKiAoMSAtIE1hdGguY29zKE1hdGguUEkgKiBrKSk7XHJcblxyXG5cdFx0fVxyXG5cclxuXHR9LFxyXG5cclxuXHRFeHBvbmVudGlhbDoge1xyXG5cclxuXHRcdEluOiBmdW5jdGlvbiAoaykge1xyXG5cclxuXHRcdFx0cmV0dXJuIGsgPT09IDAgPyAwIDogTWF0aC5wb3coMTAyNCwgayAtIDEpO1xyXG5cclxuXHRcdH0sXHJcblxyXG5cdFx0T3V0OiBmdW5jdGlvbiAoaykge1xyXG5cclxuXHRcdFx0cmV0dXJuIGsgPT09IDEgPyAxIDogMSAtIE1hdGgucG93KDIsIC0gMTAgKiBrKTtcclxuXHJcblx0XHR9LFxyXG5cclxuXHRcdEluT3V0OiBmdW5jdGlvbiAoaykge1xyXG5cclxuXHRcdFx0aWYgKGsgPT09IDApIHtcclxuXHRcdFx0XHRyZXR1cm4gMDtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYgKGsgPT09IDEpIHtcclxuXHRcdFx0XHRyZXR1cm4gMTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYgKChrICo9IDIpIDwgMSkge1xyXG5cdFx0XHRcdHJldHVybiAwLjUgKiBNYXRoLnBvdygxMDI0LCBrIC0gMSk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHJldHVybiAwLjUgKiAoLSBNYXRoLnBvdygyLCAtIDEwICogKGsgLSAxKSkgKyAyKTtcclxuXHJcblx0XHR9XHJcblxyXG5cdH0sXHJcblxyXG5cdENpcmN1bGFyOiB7XHJcblxyXG5cdFx0SW46IGZ1bmN0aW9uIChrKSB7XHJcblxyXG5cdFx0XHRyZXR1cm4gMSAtIE1hdGguc3FydCgxIC0gayAqIGspO1xyXG5cclxuXHRcdH0sXHJcblxyXG5cdFx0T3V0OiBmdW5jdGlvbiAoaykge1xyXG5cclxuXHRcdFx0cmV0dXJuIE1hdGguc3FydCgxIC0gKC0tayAqIGspKTtcclxuXHJcblx0XHR9LFxyXG5cclxuXHRcdEluT3V0OiBmdW5jdGlvbiAoaykge1xyXG5cclxuXHRcdFx0aWYgKChrICo9IDIpIDwgMSkge1xyXG5cdFx0XHRcdHJldHVybiAtIDAuNSAqIChNYXRoLnNxcnQoMSAtIGsgKiBrKSAtIDEpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRyZXR1cm4gMC41ICogKE1hdGguc3FydCgxIC0gKGsgLT0gMikgKiBrKSArIDEpO1xyXG5cclxuXHRcdH1cclxuXHJcblx0fSxcclxuXHJcblx0RWxhc3RpYzoge1xyXG5cclxuXHRcdEluOiBmdW5jdGlvbiAoaykge1xyXG5cclxuXHRcdFx0aWYgKGsgPT09IDApIHtcclxuXHRcdFx0XHRyZXR1cm4gMDtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYgKGsgPT09IDEpIHtcclxuXHRcdFx0XHRyZXR1cm4gMTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0cmV0dXJuIC1NYXRoLnBvdygyLCAxMCAqIChrIC0gMSkpICogTWF0aC5zaW4oKGsgLSAxLjEpICogNSAqIE1hdGguUEkpO1xyXG5cclxuXHRcdH0sXHJcblxyXG5cdFx0T3V0OiBmdW5jdGlvbiAoaykge1xyXG5cclxuXHRcdFx0aWYgKGsgPT09IDApIHtcclxuXHRcdFx0XHRyZXR1cm4gMDtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYgKGsgPT09IDEpIHtcclxuXHRcdFx0XHRyZXR1cm4gMTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0cmV0dXJuIE1hdGgucG93KDIsIC0xMCAqIGspICogTWF0aC5zaW4oKGsgLSAwLjEpICogNSAqIE1hdGguUEkpICsgMTtcclxuXHJcblx0XHR9LFxyXG5cclxuXHRcdEluT3V0OiBmdW5jdGlvbiAoaykge1xyXG5cclxuXHRcdFx0aWYgKGsgPT09IDApIHtcclxuXHRcdFx0XHRyZXR1cm4gMDtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYgKGsgPT09IDEpIHtcclxuXHRcdFx0XHRyZXR1cm4gMTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0ayAqPSAyO1xyXG5cclxuXHRcdFx0aWYgKGsgPCAxKSB7XHJcblx0XHRcdFx0cmV0dXJuIC0wLjUgKiBNYXRoLnBvdygyLCAxMCAqIChrIC0gMSkpICogTWF0aC5zaW4oKGsgLSAxLjEpICogNSAqIE1hdGguUEkpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRyZXR1cm4gMC41ICogTWF0aC5wb3coMiwgLTEwICogKGsgLSAxKSkgKiBNYXRoLnNpbigoayAtIDEuMSkgKiA1ICogTWF0aC5QSSkgKyAxO1xyXG5cclxuXHRcdH1cclxuXHJcblx0fSxcclxuXHJcblx0QmFjazoge1xyXG5cclxuXHRcdEluOiBmdW5jdGlvbiAoaykge1xyXG5cclxuXHRcdFx0dmFyIHMgPSAxLjcwMTU4O1xyXG5cclxuXHRcdFx0cmV0dXJuIGsgKiBrICogKChzICsgMSkgKiBrIC0gcyk7XHJcblxyXG5cdFx0fSxcclxuXHJcblx0XHRPdXQ6IGZ1bmN0aW9uIChrKSB7XHJcblxyXG5cdFx0XHR2YXIgcyA9IDEuNzAxNTg7XHJcblxyXG5cdFx0XHRyZXR1cm4gLS1rICogayAqICgocyArIDEpICogayArIHMpICsgMTtcclxuXHJcblx0XHR9LFxyXG5cclxuXHRcdEluT3V0OiBmdW5jdGlvbiAoaykge1xyXG5cclxuXHRcdFx0dmFyIHMgPSAxLjcwMTU4ICogMS41MjU7XHJcblxyXG5cdFx0XHRpZiAoKGsgKj0gMikgPCAxKSB7XHJcblx0XHRcdFx0cmV0dXJuIDAuNSAqIChrICogayAqICgocyArIDEpICogayAtIHMpKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0cmV0dXJuIDAuNSAqICgoayAtPSAyKSAqIGsgKiAoKHMgKyAxKSAqIGsgKyBzKSArIDIpO1xyXG5cclxuXHRcdH1cclxuXHJcblx0fSxcclxuXHJcblx0Qm91bmNlOiB7XHJcblxyXG5cdFx0SW46IGZ1bmN0aW9uIChrKSB7XHJcblxyXG5cdFx0XHRyZXR1cm4gMSAtIFRXRUVOLkVhc2luZy5Cb3VuY2UuT3V0KDEgLSBrKTtcclxuXHJcblx0XHR9LFxyXG5cclxuXHRcdE91dDogZnVuY3Rpb24gKGspIHtcclxuXHJcblx0XHRcdGlmIChrIDwgKDEgLyAyLjc1KSkge1xyXG5cdFx0XHRcdHJldHVybiA3LjU2MjUgKiBrICogaztcclxuXHRcdFx0fSBlbHNlIGlmIChrIDwgKDIgLyAyLjc1KSkge1xyXG5cdFx0XHRcdHJldHVybiA3LjU2MjUgKiAoayAtPSAoMS41IC8gMi43NSkpICogayArIDAuNzU7XHJcblx0XHRcdH0gZWxzZSBpZiAoayA8ICgyLjUgLyAyLjc1KSkge1xyXG5cdFx0XHRcdHJldHVybiA3LjU2MjUgKiAoayAtPSAoMi4yNSAvIDIuNzUpKSAqIGsgKyAwLjkzNzU7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0cmV0dXJuIDcuNTYyNSAqIChrIC09ICgyLjYyNSAvIDIuNzUpKSAqIGsgKyAwLjk4NDM3NTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdH0sXHJcblxyXG5cdFx0SW5PdXQ6IGZ1bmN0aW9uIChrKSB7XHJcblxyXG5cdFx0XHRpZiAoayA8IDAuNSkge1xyXG5cdFx0XHRcdHJldHVybiBUV0VFTi5FYXNpbmcuQm91bmNlLkluKGsgKiAyKSAqIDAuNTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0cmV0dXJuIFRXRUVOLkVhc2luZy5Cb3VuY2UuT3V0KGsgKiAyIC0gMSkgKiAwLjUgKyAwLjU7XHJcblxyXG5cdFx0fVxyXG5cclxuXHR9XHJcblxyXG59O1xyXG5cclxuVFdFRU4uSW50ZXJwb2xhdGlvbiA9IHtcclxuXHJcblx0TGluZWFyOiBmdW5jdGlvbiAodiwgaykge1xyXG5cclxuXHRcdHZhciBtID0gdi5sZW5ndGggLSAxO1xyXG5cdFx0dmFyIGYgPSBtICogaztcclxuXHRcdHZhciBpID0gTWF0aC5mbG9vcihmKTtcclxuXHRcdHZhciBmbiA9IFRXRUVOLkludGVycG9sYXRpb24uVXRpbHMuTGluZWFyO1xyXG5cclxuXHRcdGlmIChrIDwgMCkge1xyXG5cdFx0XHRyZXR1cm4gZm4odlswXSwgdlsxXSwgZik7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKGsgPiAxKSB7XHJcblx0XHRcdHJldHVybiBmbih2W21dLCB2W20gLSAxXSwgbSAtIGYpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiBmbih2W2ldLCB2W2kgKyAxID4gbSA/IG0gOiBpICsgMV0sIGYgLSBpKTtcclxuXHJcblx0fSxcclxuXHJcblx0QmV6aWVyOiBmdW5jdGlvbiAodiwgaykge1xyXG5cclxuXHRcdHZhciBiID0gMDtcclxuXHRcdHZhciBuID0gdi5sZW5ndGggLSAxO1xyXG5cdFx0dmFyIHB3ID0gTWF0aC5wb3c7XHJcblx0XHR2YXIgYm4gPSBUV0VFTi5JbnRlcnBvbGF0aW9uLlV0aWxzLkJlcm5zdGVpbjtcclxuXHJcblx0XHRmb3IgKHZhciBpID0gMDsgaSA8PSBuOyBpKyspIHtcclxuXHRcdFx0YiArPSBwdygxIC0gaywgbiAtIGkpICogcHcoaywgaSkgKiB2W2ldICogYm4obiwgaSk7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIGI7XHJcblxyXG5cdH0sXHJcblxyXG5cdENhdG11bGxSb206IGZ1bmN0aW9uICh2LCBrKSB7XHJcblxyXG5cdFx0dmFyIG0gPSB2Lmxlbmd0aCAtIDE7XHJcblx0XHR2YXIgZiA9IG0gKiBrO1xyXG5cdFx0dmFyIGkgPSBNYXRoLmZsb29yKGYpO1xyXG5cdFx0dmFyIGZuID0gVFdFRU4uSW50ZXJwb2xhdGlvbi5VdGlscy5DYXRtdWxsUm9tO1xyXG5cclxuXHRcdGlmICh2WzBdID09PSB2W21dKSB7XHJcblxyXG5cdFx0XHRpZiAoayA8IDApIHtcclxuXHRcdFx0XHRpID0gTWF0aC5mbG9vcihmID0gbSAqICgxICsgaykpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRyZXR1cm4gZm4odlsoaSAtIDEgKyBtKSAlIG1dLCB2W2ldLCB2WyhpICsgMSkgJSBtXSwgdlsoaSArIDIpICUgbV0sIGYgLSBpKTtcclxuXHJcblx0XHR9IGVsc2Uge1xyXG5cclxuXHRcdFx0aWYgKGsgPCAwKSB7XHJcblx0XHRcdFx0cmV0dXJuIHZbMF0gLSAoZm4odlswXSwgdlswXSwgdlsxXSwgdlsxXSwgLWYpIC0gdlswXSk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmIChrID4gMSkge1xyXG5cdFx0XHRcdHJldHVybiB2W21dIC0gKGZuKHZbbV0sIHZbbV0sIHZbbSAtIDFdLCB2W20gLSAxXSwgZiAtIG0pIC0gdlttXSk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHJldHVybiBmbih2W2kgPyBpIC0gMSA6IDBdLCB2W2ldLCB2W20gPCBpICsgMSA/IG0gOiBpICsgMV0sIHZbbSA8IGkgKyAyID8gbSA6IGkgKyAyXSwgZiAtIGkpO1xyXG5cclxuXHRcdH1cclxuXHJcblx0fSxcclxuXHJcblx0VXRpbHM6IHtcclxuXHJcblx0XHRMaW5lYXI6IGZ1bmN0aW9uIChwMCwgcDEsIHQpIHtcclxuXHJcblx0XHRcdHJldHVybiAocDEgLSBwMCkgKiB0ICsgcDA7XHJcblxyXG5cdFx0fSxcclxuXHJcblx0XHRCZXJuc3RlaW46IGZ1bmN0aW9uIChuLCBpKSB7XHJcblxyXG5cdFx0XHR2YXIgZmMgPSBUV0VFTi5JbnRlcnBvbGF0aW9uLlV0aWxzLkZhY3RvcmlhbDtcclxuXHJcblx0XHRcdHJldHVybiBmYyhuKSAvIGZjKGkpIC8gZmMobiAtIGkpO1xyXG5cclxuXHRcdH0sXHJcblxyXG5cdFx0RmFjdG9yaWFsOiAoZnVuY3Rpb24gKCkge1xyXG5cclxuXHRcdFx0dmFyIGEgPSBbMV07XHJcblxyXG5cdFx0XHRyZXR1cm4gZnVuY3Rpb24gKG4pIHtcclxuXHJcblx0XHRcdFx0dmFyIHMgPSAxO1xyXG5cclxuXHRcdFx0XHRpZiAoYVtuXSkge1xyXG5cdFx0XHRcdFx0cmV0dXJuIGFbbl07XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRmb3IgKHZhciBpID0gbjsgaSA+IDE7IGktLSkge1xyXG5cdFx0XHRcdFx0cyAqPSBpO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0YVtuXSA9IHM7XHJcblx0XHRcdFx0cmV0dXJuIHM7XHJcblxyXG5cdFx0XHR9O1xyXG5cclxuXHRcdH0pKCksXHJcblxyXG5cdFx0Q2F0bXVsbFJvbTogZnVuY3Rpb24gKHAwLCBwMSwgcDIsIHAzLCB0KSB7XHJcblxyXG5cdFx0XHR2YXIgdjAgPSAocDIgLSBwMCkgKiAwLjU7XHJcblx0XHRcdHZhciB2MSA9IChwMyAtIHAxKSAqIDAuNTtcclxuXHRcdFx0dmFyIHQyID0gdCAqIHQ7XHJcblx0XHRcdHZhciB0MyA9IHQgKiB0MjtcclxuXHJcblx0XHRcdHJldHVybiAoMiAqIHAxIC0gMiAqIHAyICsgdjAgKyB2MSkgKiB0MyArICgtIDMgKiBwMSArIDMgKiBwMiAtIDIgKiB2MCAtIHYxKSAqIHQyICsgdjAgKiB0ICsgcDE7XHJcblxyXG5cdFx0fVxyXG5cclxuXHR9XHJcblxyXG59O1xyXG5cclxuLy8gVU1EIChVbml2ZXJzYWwgTW9kdWxlIERlZmluaXRpb24pXHJcbihmdW5jdGlvbiAocm9vdCkge1xyXG5cclxuXHRpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XHJcblxyXG5cdFx0Ly8gQU1EXHJcblx0XHRkZWZpbmUoW10sIGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0cmV0dXJuIFRXRUVOO1xyXG5cdFx0fSk7XHJcblxyXG5cdH0gZWxzZSBpZiAodHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKSB7XHJcblxyXG5cdFx0Ly8gTm9kZS5qc1xyXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBUV0VFTjtcclxuXHJcblx0fSBlbHNlIGlmIChyb290ICE9PSB1bmRlZmluZWQpIHtcclxuXHJcblx0XHQvLyBHbG9iYWwgdmFyaWFibGVcclxuXHRcdHJvb3QuVFdFRU4gPSBUV0VFTjtcclxuXHJcblx0fVxyXG5cclxufSkodGhpcyk7XHJcbiIsIihmdW5jdGlvbihmKXtpZih0eXBlb2YgZXhwb3J0cz09PVwib2JqZWN0XCImJnR5cGVvZiBtb2R1bGUhPT1cInVuZGVmaW5lZFwiKXttb2R1bGUuZXhwb3J0cz1mKCl9ZWxzZSBpZih0eXBlb2YgZGVmaW5lPT09XCJmdW5jdGlvblwiJiZkZWZpbmUuYW1kKXtkZWZpbmUoW10sZil9ZWxzZXt2YXIgZztpZih0eXBlb2Ygd2luZG93IT09XCJ1bmRlZmluZWRcIil7Zz13aW5kb3d9ZWxzZSBpZih0eXBlb2YgZ2xvYmFsIT09XCJ1bmRlZmluZWRcIil7Zz1nbG9iYWx9ZWxzZSBpZih0eXBlb2Ygc2VsZiE9PVwidW5kZWZpbmVkXCIpe2c9c2VsZn1lbHNle2c9dGhpc31nLldlYlZSTWFuYWdlciA9IGYoKX19KShmdW5jdGlvbigpe3ZhciBkZWZpbmUsbW9kdWxlLGV4cG9ydHM7cmV0dXJuIChmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pKHsxOltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcclxuLypcclxuICogQ29weXJpZ2h0IDIwMTUgR29vZ2xlIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5cclxudmFyIEVtaXR0ZXIgPSBfZGVyZXFfKCcuL2VtaXR0ZXIuanMnKTtcclxudmFyIE1vZGVzID0gX2RlcmVxXygnLi9tb2Rlcy5qcycpO1xyXG52YXIgVXRpbCA9IF9kZXJlcV8oJy4vdXRpbC5qcycpO1xyXG5cclxuLyoqXHJcbiAqIEV2ZXJ5dGhpbmcgaGF2aW5nIHRvIGRvIHdpdGggdGhlIFdlYlZSIGJ1dHRvbi5cclxuICogRW1pdHMgYSAnY2xpY2snIGV2ZW50IHdoZW4gaXQncyBjbGlja2VkLlxyXG4gKi9cclxuZnVuY3Rpb24gQnV0dG9uTWFuYWdlcihvcHRfcm9vdCkge1xyXG4gIHZhciByb290ID0gb3B0X3Jvb3QgfHwgZG9jdW1lbnQuYm9keTtcclxuICB0aGlzLmxvYWRJY29uc18oKTtcclxuXHJcbiAgLy8gTWFrZSB0aGUgZnVsbHNjcmVlbiBidXR0b24uXHJcbiAgdmFyIGZzQnV0dG9uID0gdGhpcy5jcmVhdGVCdXR0b24oKTtcclxuICBmc0J1dHRvbi5zcmMgPSB0aGlzLklDT05TLmZ1bGxzY3JlZW47XHJcbiAgZnNCdXR0b24udGl0bGUgPSAnRnVsbHNjcmVlbiBtb2RlJztcclxuICB2YXIgcyA9IGZzQnV0dG9uLnN0eWxlO1xyXG4gIHMuYm90dG9tID0gMDtcclxuICBzLnJpZ2h0ID0gMDtcclxuICBmc0J1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuY3JlYXRlQ2xpY2tIYW5kbGVyXygnZnMnKSk7XHJcbiAgcm9vdC5hcHBlbmRDaGlsZChmc0J1dHRvbik7XHJcbiAgdGhpcy5mc0J1dHRvbiA9IGZzQnV0dG9uO1xyXG5cclxuICAvLyBNYWtlIHRoZSBWUiBidXR0b24uXHJcbiAgdmFyIHZyQnV0dG9uID0gdGhpcy5jcmVhdGVCdXR0b24oKTtcclxuICB2ckJ1dHRvbi5zcmMgPSB0aGlzLklDT05TLmNhcmRib2FyZDtcclxuICB2ckJ1dHRvbi50aXRsZSA9ICdWaXJ0dWFsIHJlYWxpdHkgbW9kZSc7XHJcbiAgdmFyIHMgPSB2ckJ1dHRvbi5zdHlsZTtcclxuICBzLmJvdHRvbSA9IDA7XHJcbiAgcy5yaWdodCA9ICc0OHB4JztcclxuICB2ckJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuY3JlYXRlQ2xpY2tIYW5kbGVyXygndnInKSk7XHJcbiAgcm9vdC5hcHBlbmRDaGlsZCh2ckJ1dHRvbik7XHJcbiAgdGhpcy52ckJ1dHRvbiA9IHZyQnV0dG9uO1xyXG5cclxuICB0aGlzLmlzVmlzaWJsZSA9IHRydWU7XHJcblxyXG59XHJcbkJ1dHRvbk1hbmFnZXIucHJvdG90eXBlID0gbmV3IEVtaXR0ZXIoKTtcclxuXHJcbkJ1dHRvbk1hbmFnZXIucHJvdG90eXBlLmNyZWF0ZUJ1dHRvbiA9IGZ1bmN0aW9uKCkge1xyXG4gIHZhciBidXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcclxuICBidXR0b24uY2xhc3NOYW1lID0gJ3dlYnZyLWJ1dHRvbic7XHJcbiAgdmFyIHMgPSBidXR0b24uc3R5bGU7XHJcbiAgcy5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XHJcbiAgcy53aWR0aCA9ICcyNHB4J1xyXG4gIHMuaGVpZ2h0ID0gJzI0cHgnO1xyXG4gIHMuYmFja2dyb3VuZFNpemUgPSAnY292ZXInO1xyXG4gIHMuYmFja2dyb3VuZENvbG9yID0gJ3RyYW5zcGFyZW50JztcclxuICBzLmJvcmRlciA9IDA7XHJcbiAgcy51c2VyU2VsZWN0ID0gJ25vbmUnO1xyXG4gIHMud2Via2l0VXNlclNlbGVjdCA9ICdub25lJztcclxuICBzLk1velVzZXJTZWxlY3QgPSAnbm9uZSc7XHJcbiAgcy5jdXJzb3IgPSAncG9pbnRlcic7XHJcbiAgcy5wYWRkaW5nID0gJzEycHgnO1xyXG4gIHMuekluZGV4ID0gMTtcclxuICBzLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgcy5ib3hTaXppbmcgPSAnY29udGVudC1ib3gnO1xyXG5cclxuICAvLyBQcmV2ZW50IGJ1dHRvbiBmcm9tIGJlaW5nIHNlbGVjdGVkIGFuZCBkcmFnZ2VkLlxyXG4gIGJ1dHRvbi5kcmFnZ2FibGUgPSBmYWxzZTtcclxuICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignZHJhZ3N0YXJ0JywgZnVuY3Rpb24oZSkge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIH0pO1xyXG5cclxuICAvLyBTdHlsZSBpdCBvbiBob3Zlci5cclxuICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VlbnRlcicsIGZ1bmN0aW9uKGUpIHtcclxuICAgIHMuZmlsdGVyID0gcy53ZWJraXRGaWx0ZXIgPSAnZHJvcC1zaGFkb3coMCAwIDVweCByZ2JhKDI1NSwyNTUsMjU1LDEpKSc7XHJcbiAgfSk7XHJcbiAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCBmdW5jdGlvbihlKSB7XHJcbiAgICBzLmZpbHRlciA9IHMud2Via2l0RmlsdGVyID0gJyc7XHJcbiAgfSk7XHJcbiAgcmV0dXJuIGJ1dHRvbjtcclxufTtcclxuXHJcbkJ1dHRvbk1hbmFnZXIucHJvdG90eXBlLnNldE1vZGUgPSBmdW5jdGlvbihtb2RlLCBpc1ZSQ29tcGF0aWJsZSkge1xyXG4gIGlzVlJDb21wYXRpYmxlID0gaXNWUkNvbXBhdGlibGUgfHwgV2ViVlJDb25maWcuRk9SQ0VfRU5BQkxFX1ZSO1xyXG4gIGlmICghdGhpcy5pc1Zpc2libGUpIHtcclxuICAgIHJldHVybjtcclxuICB9XHJcbiAgc3dpdGNoIChtb2RlKSB7XHJcbiAgICBjYXNlIE1vZGVzLk5PUk1BTDpcclxuICAgICAgdGhpcy5mc0J1dHRvbi5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcclxuICAgICAgdGhpcy5mc0J1dHRvbi5zcmMgPSB0aGlzLklDT05TLmZ1bGxzY3JlZW47XHJcbiAgICAgIHRoaXMudnJCdXR0b24uc3R5bGUuZGlzcGxheSA9IChpc1ZSQ29tcGF0aWJsZSA/ICdibG9jaycgOiAnbm9uZScpO1xyXG4gICAgICBicmVhaztcclxuICAgIGNhc2UgTW9kZXMuTUFHSUNfV0lORE9XOlxyXG4gICAgICB0aGlzLmZzQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xyXG4gICAgICB0aGlzLmZzQnV0dG9uLnNyYyA9IHRoaXMuSUNPTlMuZXhpdEZ1bGxzY3JlZW47XHJcbiAgICAgIHRoaXMudnJCdXR0b24uc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgICAgYnJlYWs7XHJcbiAgICBjYXNlIE1vZGVzLlZSOlxyXG4gICAgICB0aGlzLmZzQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICAgIHRoaXMudnJCdXR0b24uc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgICAgYnJlYWs7XHJcbiAgfVxyXG5cclxuICAvLyBIYWNrIGZvciBTYWZhcmkgTWFjL2lPUyB0byBmb3JjZSByZWxheW91dCAoc3ZnLXNwZWNpZmljIGlzc3VlKVxyXG4gIC8vIGh0dHA6Ly9nb28uZ2wvaGpnUjZyXHJcbiAgdmFyIG9sZFZhbHVlID0gdGhpcy5mc0J1dHRvbi5zdHlsZS5kaXNwbGF5O1xyXG4gIHRoaXMuZnNCdXR0b24uc3R5bGUuZGlzcGxheSA9ICdpbmxpbmUtYmxvY2snO1xyXG4gIHRoaXMuZnNCdXR0b24ub2Zmc2V0SGVpZ2h0O1xyXG4gIHRoaXMuZnNCdXR0b24uc3R5bGUuZGlzcGxheSA9IG9sZFZhbHVlO1xyXG59O1xyXG5cclxuQnV0dG9uTWFuYWdlci5wcm90b3R5cGUuc2V0VmlzaWJpbGl0eSA9IGZ1bmN0aW9uKGlzVmlzaWJsZSkge1xyXG4gIHRoaXMuaXNWaXNpYmxlID0gaXNWaXNpYmxlO1xyXG4gIHRoaXMuZnNCdXR0b24uc3R5bGUuZGlzcGxheSA9IGlzVmlzaWJsZSA/ICdibG9jaycgOiAnbm9uZSc7XHJcbiAgdGhpcy52ckJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gaXNWaXNpYmxlID8gJ2Jsb2NrJyA6ICdub25lJztcclxufTtcclxuXHJcbkJ1dHRvbk1hbmFnZXIucHJvdG90eXBlLmNyZWF0ZUNsaWNrSGFuZGxlcl8gPSBmdW5jdGlvbihldmVudE5hbWUpIHtcclxuICByZXR1cm4gZnVuY3Rpb24oZSkge1xyXG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIHRoaXMuZW1pdChldmVudE5hbWUpO1xyXG4gIH0uYmluZCh0aGlzKTtcclxufTtcclxuXHJcbkJ1dHRvbk1hbmFnZXIucHJvdG90eXBlLmxvYWRJY29uc18gPSBmdW5jdGlvbigpIHtcclxuICAvLyBQcmVsb2FkIHNvbWUgaGFyZC1jb2RlZCBTVkcuXHJcbiAgdGhpcy5JQ09OUyA9IHt9O1xyXG4gIHRoaXMuSUNPTlMuY2FyZGJvYXJkID0gVXRpbC5iYXNlNjQoJ2ltYWdlL3N2Zyt4bWwnLCAnUEhOMlp5QjRiV3h1Y3owaWFIUjBjRG92TDNkM2R5NTNNeTV2Y21jdk1qQXdNQzl6ZG1jaUlIZHBaSFJvUFNJeU5IQjRJaUJvWldsbmFIUTlJakkwY0hnaUlIWnBaWGRDYjNnOUlqQWdNQ0F5TkNBeU5DSWdabWxzYkQwaUkwWkdSa1pHUmlJK0NpQWdJQ0E4Y0dGMGFDQmtQU0pOTWpBdU56UWdOa2d6TGpJeFF6SXVOVFVnTmlBeUlEWXVOVGNnTWlBM0xqSTRkakV3TGpRMFl6QWdMamN1TlRVZ01TNHlPQ0F4TGpJeklERXVNamhvTkM0M09XTXVOVElnTUNBdU9UWXRMak16SURFdU1UUXRMamM1YkRFdU5DMHpMalE0WXk0eU15MHVOVGt1TnprdE1TNHdNU0F4TGpRMExURXVNREZ6TVM0eU1TNDBNaUF4TGpRMUlERXVNREZzTVM0ek9TQXpMalE0WXk0eE9TNDBOaTQyTXk0M09TQXhMakV4TGpjNWFEUXVOemxqTGpjeElEQWdNUzR5TmkwdU5UY2dNUzR5TmkweExqSTRWamN1TWpoak1DMHVOeTB1TlRVdE1TNHlPQzB4TGpJMkxURXVNamg2VFRjdU5TQXhOQzQyTW1NdE1TNHhOeUF3TFRJdU1UTXRMamsxTFRJdU1UTXRNaTR4TWlBd0xURXVNVGN1T1RZdE1pNHhNeUF5TGpFekxUSXVNVE1nTVM0eE9DQXdJREl1TVRJdU9UWWdNaTR4TWlBeUxqRXpjeTB1T1RVZ01pNHhNaTB5TGpFeUlESXVNVEo2YlRrZ01HTXRNUzR4TnlBd0xUSXVNVE10TGprMUxUSXVNVE10TWk0eE1pQXdMVEV1TVRjdU9UWXRNaTR4TXlBeUxqRXpMVEl1TVROek1pNHhNaTQ1TmlBeUxqRXlJREl1TVRNdExqazFJREl1TVRJdE1pNHhNaUF5TGpFeWVpSXZQZ29nSUNBZ1BIQmhkR2dnWm1sc2JEMGlibTl1WlNJZ1pEMGlUVEFnTUdneU5IWXlORWd3VmpCNklpOCtDand2YzNablBnbz0nKTtcclxuICB0aGlzLklDT05TLmZ1bGxzY3JlZW4gPSBVdGlsLmJhc2U2NCgnaW1hZ2Uvc3ZnK3htbCcsICdQSE4yWnlCNGJXeHVjejBpYUhSMGNEb3ZMM2QzZHk1M015NXZjbWN2TWpBd01DOXpkbWNpSUhkcFpIUm9QU0l5TkhCNElpQm9aV2xuYUhROUlqSTBjSGdpSUhacFpYZENiM2c5SWpBZ01DQXlOQ0F5TkNJZ1ptbHNiRDBpSTBaR1JrWkdSaUkrQ2lBZ0lDQThjR0YwYUNCa1BTSk5NQ0F3YURJMGRqSTBTREI2SWlCbWFXeHNQU0p1YjI1bElpOCtDaUFnSUNBOGNHRjBhQ0JrUFNKTk55QXhORWcxZGpWb05YWXRNa2czZGkwemVtMHRNaTAwYURKV04yZ3pWalZJTlhZMWVtMHhNaUEzYUMwemRqSm9OWFl0TldndE1uWXplazB4TkNBMWRqSm9NM1l6YURKV05XZ3ROWG9pTHo0S1BDOXpkbWMrQ2c9PScpO1xyXG4gIHRoaXMuSUNPTlMuZXhpdEZ1bGxzY3JlZW4gPSBVdGlsLmJhc2U2NCgnaW1hZ2Uvc3ZnK3htbCcsICdQSE4yWnlCNGJXeHVjejBpYUhSMGNEb3ZMM2QzZHk1M015NXZjbWN2TWpBd01DOXpkbWNpSUhkcFpIUm9QU0l5TkhCNElpQm9aV2xuYUhROUlqSTBjSGdpSUhacFpYZENiM2c5SWpBZ01DQXlOQ0F5TkNJZ1ptbHNiRDBpSTBaR1JrWkdSaUkrQ2lBZ0lDQThjR0YwYUNCa1BTSk5NQ0F3YURJMGRqSTBTREI2SWlCbWFXeHNQU0p1YjI1bElpOCtDaUFnSUNBOGNHRjBhQ0JrUFNKTk5TQXhObWd6ZGpOb01uWXROVWcxZGpKNmJUTXRPRWcxZGpKb05WWTFTRGgyTTNwdE5pQXhNV2d5ZGkwemFETjJMVEpvTFRWMk5YcHRNaTB4TVZZMWFDMHlkalZvTlZZNGFDMHplaUl2UGdvOEwzTjJaejRLJyk7XHJcbiAgdGhpcy5JQ09OUy5zZXR0aW5ncyA9IFV0aWwuYmFzZTY0KCdpbWFnZS9zdmcreG1sJywgJ1BITjJaeUI0Yld4dWN6MGlhSFIwY0RvdkwzZDNkeTUzTXk1dmNtY3ZNakF3TUM5emRtY2lJSGRwWkhSb1BTSXlOSEI0SWlCb1pXbG5hSFE5SWpJMGNIZ2lJSFpwWlhkQ2IzZzlJakFnTUNBeU5DQXlOQ0lnWm1sc2JEMGlJMFpHUmtaR1JpSStDaUFnSUNBOGNHRjBhQ0JrUFNKTk1DQXdhREkwZGpJMFNEQjZJaUJtYVd4c1BTSnViMjVsSWk4K0NpQWdJQ0E4Y0dGMGFDQmtQU0pOTVRrdU5ETWdNVEl1T1RoakxqQTBMUzR6TWk0d055MHVOalF1TURjdExqazRjeTB1TURNdExqWTJMUzR3TnkwdU9UaHNNaTR4TVMweExqWTFZeTR4T1MwdU1UVXVNalF0TGpReUxqRXlMUzQyTkd3dE1pMHpMalEyWXkwdU1USXRMakl5TFM0ek9TMHVNeTB1TmpFdExqSXliQzB5TGpRNUlERmpMUzQxTWkwdU5DMHhMakE0TFM0M015MHhMalk1TFM0NU9Hd3RMak00TFRJdU5qVkRNVFF1TkRZZ01pNHhPQ0F4TkM0eU5TQXlJREUwSURKb0xUUmpMUzR5TlNBd0xTNDBOaTR4T0MwdU5Ea3VOREpzTFM0ek9DQXlMalkxWXkwdU5qRXVNalV0TVM0eE55NDFPUzB4TGpZNUxqazRiQzB5TGpRNUxURmpMUzR5TXkwdU1Ea3RMalE1SURBdExqWXhMakl5YkMweUlETXVORFpqTFM0eE15NHlNaTB1TURjdU5Ea3VNVEl1TmpSc01pNHhNU0F4TGpZMVl5MHVNRFF1TXpJdExqQTNMalkxTFM0d055NDVPSE11TURNdU5qWXVNRGN1T1Roc0xUSXVNVEVnTVM0Mk5XTXRMakU1TGpFMUxTNHlOQzQwTWkwdU1USXVOalJzTWlBekxqUTJZeTR4TWk0eU1pNHpPUzR6TGpZeExqSXliREl1TkRrdE1XTXVOVEl1TkNBeExqQTRMamN6SURFdU5qa3VPVGhzTGpNNElESXVOalZqTGpBekxqSTBMakkwTGpReUxqUTVMalF5YURSakxqSTFJREFnTGpRMkxTNHhPQzQwT1MwdU5ESnNMak00TFRJdU5qVmpMall4TFM0eU5TQXhMakUzTFM0MU9TQXhMalk1TFM0NU9Hd3lMalE1SURGakxqSXpMakE1TGpRNUlEQWdMall4TFM0eU1td3lMVE11TkRaakxqRXlMUzR5TWk0d055MHVORGt0TGpFeUxTNDJOR3d0TWk0eE1TMHhMalkxZWsweE1pQXhOUzQxWXkweExqa3pJREF0TXk0MUxURXVOVGN0TXk0MUxUTXVOWE14TGpVM0xUTXVOU0F6TGpVdE15NDFJRE11TlNBeExqVTNJRE11TlNBekxqVXRNUzQxTnlBekxqVXRNeTQxSURNdU5Yb2lMejRLUEM5emRtYytDZz09Jyk7XHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IEJ1dHRvbk1hbmFnZXI7XHJcblxyXG59LHtcIi4vZW1pdHRlci5qc1wiOjIsXCIuL21vZGVzLmpzXCI6MyxcIi4vdXRpbC5qc1wiOjR9XSwyOltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcclxuLypcclxuICogQ29weXJpZ2h0IDIwMTUgR29vZ2xlIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5cclxuZnVuY3Rpb24gRW1pdHRlcigpIHtcclxuICB0aGlzLmNhbGxiYWNrcyA9IHt9O1xyXG59XHJcblxyXG5FbWl0dGVyLnByb3RvdHlwZS5lbWl0ID0gZnVuY3Rpb24oZXZlbnROYW1lKSB7XHJcbiAgdmFyIGNhbGxiYWNrcyA9IHRoaXMuY2FsbGJhY2tzW2V2ZW50TmFtZV07XHJcbiAgaWYgKCFjYWxsYmFja3MpIHtcclxuICAgIC8vY29uc29sZS5sb2coJ05vIHZhbGlkIGNhbGxiYWNrIHNwZWNpZmllZC4nKTtcclxuICAgIHJldHVybjtcclxuICB9XHJcbiAgdmFyIGFyZ3MgPSBbXS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7XHJcbiAgLy8gRWxpbWluYXRlIHRoZSBmaXJzdCBwYXJhbSAodGhlIGNhbGxiYWNrKS5cclxuICBhcmdzLnNoaWZ0KCk7XHJcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBjYWxsYmFja3MubGVuZ3RoOyBpKyspIHtcclxuICAgIGNhbGxiYWNrc1tpXS5hcHBseSh0aGlzLCBhcmdzKTtcclxuICB9XHJcbn07XHJcblxyXG5FbWl0dGVyLnByb3RvdHlwZS5vbiA9IGZ1bmN0aW9uKGV2ZW50TmFtZSwgY2FsbGJhY2spIHtcclxuICBpZiAoZXZlbnROYW1lIGluIHRoaXMuY2FsbGJhY2tzKSB7XHJcbiAgICB0aGlzLmNhbGxiYWNrc1tldmVudE5hbWVdLnB1c2goY2FsbGJhY2spO1xyXG4gIH0gZWxzZSB7XHJcbiAgICB0aGlzLmNhbGxiYWNrc1tldmVudE5hbWVdID0gW2NhbGxiYWNrXTtcclxuICB9XHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IEVtaXR0ZXI7XHJcblxyXG59LHt9XSwzOltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcclxuLypcclxuICogQ29weXJpZ2h0IDIwMTUgR29vZ2xlIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5cclxudmFyIE1vZGVzID0ge1xyXG4gIFVOS05PV046IDAsXHJcbiAgLy8gTm90IGZ1bGxzY3JlZW4sIGp1c3QgdHJhY2tpbmcuXHJcbiAgTk9STUFMOiAxLFxyXG4gIC8vIE1hZ2ljIHdpbmRvdyBpbW1lcnNpdmUgbW9kZS5cclxuICBNQUdJQ19XSU5ET1c6IDIsXHJcbiAgLy8gRnVsbCBzY3JlZW4gc3BsaXQgc2NyZWVuIFZSIG1vZGUuXHJcbiAgVlI6IDMsXHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IE1vZGVzO1xyXG5cclxufSx7fV0sNDpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XHJcbi8qXHJcbiAqIENvcHlyaWdodCAyMDE1IEdvb2dsZSBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuXHJcbnZhciBVdGlsID0ge307XHJcblxyXG5VdGlsLmJhc2U2NCA9IGZ1bmN0aW9uKG1pbWVUeXBlLCBiYXNlNjQpIHtcclxuICByZXR1cm4gJ2RhdGE6JyArIG1pbWVUeXBlICsgJztiYXNlNjQsJyArIGJhc2U2NDtcclxufTtcclxuXHJcblV0aWwuaXNNb2JpbGUgPSBmdW5jdGlvbigpIHtcclxuICB2YXIgY2hlY2sgPSBmYWxzZTtcclxuICAoZnVuY3Rpb24oYSl7aWYoLyhhbmRyb2lkfGJiXFxkK3xtZWVnbykuK21vYmlsZXxhdmFudGdvfGJhZGFcXC98YmxhY2tiZXJyeXxibGF6ZXJ8Y29tcGFsfGVsYWluZXxmZW5uZWN8aGlwdG9wfGllbW9iaWxlfGlwKGhvbmV8b2QpfGlyaXN8a2luZGxlfGxnZSB8bWFlbW98bWlkcHxtbXB8bW9iaWxlLitmaXJlZm94fG5ldGZyb250fG9wZXJhIG0ob2J8aW4paXxwYWxtKCBvcyk/fHBob25lfHAoaXhpfHJlKVxcL3xwbHVja2VyfHBvY2tldHxwc3B8c2VyaWVzKDR8NikwfHN5bWJpYW58dHJlb3x1cFxcLihicm93c2VyfGxpbmspfHZvZGFmb25lfHdhcHx3aW5kb3dzIGNlfHhkYXx4aWluby9pLnRlc3QoYSl8fC8xMjA3fDYzMTB8NjU5MHwzZ3NvfDR0aHB8NTBbMS02XWl8Nzcwc3w4MDJzfGEgd2F8YWJhY3xhYyhlcnxvb3xzXFwtKXxhaShrb3xybil8YWwoYXZ8Y2F8Y28pfGFtb2l8YW4oZXh8bnl8eXcpfGFwdHV8YXIoY2h8Z28pfGFzKHRlfHVzKXxhdHR3fGF1KGRpfFxcLW18ciB8cyApfGF2YW58YmUoY2t8bGx8bnEpfGJpKGxifHJkKXxibChhY3xheil8YnIoZXx2KXd8YnVtYnxid1xcLShufHUpfGM1NVxcL3xjYXBpfGNjd2F8Y2RtXFwtfGNlbGx8Y2h0bXxjbGRjfGNtZFxcLXxjbyhtcHxuZCl8Y3Jhd3xkYShpdHxsbHxuZyl8ZGJ0ZXxkY1xcLXN8ZGV2aXxkaWNhfGRtb2J8ZG8oY3xwKW98ZHMoMTJ8XFwtZCl8ZWwoNDl8YWkpfGVtKGwyfHVsKXxlcihpY3xrMCl8ZXNsOHxleihbNC03XTB8b3N8d2F8emUpfGZldGN8Zmx5KFxcLXxfKXxnMSB1fGc1NjB8Z2VuZXxnZlxcLTV8Z1xcLW1vfGdvKFxcLnd8b2QpfGdyKGFkfHVuKXxoYWllfGhjaXR8aGRcXC0obXxwfHQpfGhlaVxcLXxoaShwdHx0YSl8aHAoIGl8aXApfGhzXFwtY3xodChjKFxcLXwgfF98YXxnfHB8c3x0KXx0cCl8aHUoYXd8dGMpfGlcXC0oMjB8Z298bWEpfGkyMzB8aWFjKCB8XFwtfFxcLyl8aWJyb3xpZGVhfGlnMDF8aWtvbXxpbTFrfGlubm98aXBhcXxpcmlzfGphKHR8dilhfGpicm98amVtdXxqaWdzfGtkZGl8a2VqaXxrZ3QoIHxcXC8pfGtsb258a3B0IHxrd2NcXC18a3lvKGN8ayl8bGUobm98eGkpfGxnKCBnfFxcLyhrfGx8dSl8NTB8NTR8XFwtW2Etd10pfGxpYnd8bHlueHxtMVxcLXd8bTNnYXxtNTBcXC98bWEodGV8dWl8eG8pfG1jKDAxfDIxfGNhKXxtXFwtY3J8bWUocmN8cmkpfG1pKG84fG9hfHRzKXxtbWVmfG1vKDAxfDAyfGJpfGRlfGRvfHQoXFwtfCB8b3x2KXx6eil8bXQoNTB8cDF8diApfG13YnB8bXl3YXxuMTBbMC0yXXxuMjBbMi0zXXxuMzAoMHwyKXxuNTAoMHwyfDUpfG43KDAoMHwxKXwxMCl8bmUoKGN8bSlcXC18b258dGZ8d2Z8d2d8d3QpfG5vayg2fGkpfG56cGh8bzJpbXxvcCh0aXx3dil8b3Jhbnxvd2cxfHA4MDB8cGFuKGF8ZHx0KXxwZHhnfHBnKDEzfFxcLShbMS04XXxjKSl8cGhpbHxwaXJlfHBsKGF5fHVjKXxwblxcLTJ8cG8oY2t8cnR8c2UpfHByb3h8cHNpb3xwdFxcLWd8cWFcXC1hfHFjKDA3fDEyfDIxfDMyfDYwfFxcLVsyLTddfGlcXC0pfHF0ZWt8cjM4MHxyNjAwfHJha3N8cmltOXxybyh2ZXx6byl8czU1XFwvfHNhKGdlfG1hfG1tfG1zfG55fHZhKXxzYygwMXxoXFwtfG9vfHBcXC0pfHNka1xcL3xzZShjKFxcLXwwfDEpfDQ3fG1jfG5kfHJpKXxzZ2hcXC18c2hhcnxzaWUoXFwtfG0pfHNrXFwtMHxzbCg0NXxpZCl8c20oYWx8YXJ8YjN8aXR8dDUpfHNvKGZ0fG55KXxzcCgwMXxoXFwtfHZcXC18diApfHN5KDAxfG1iKXx0MigxOHw1MCl8dDYoMDB8MTB8MTgpfHRhKGd0fGxrKXx0Y2xcXC18dGRnXFwtfHRlbChpfG0pfHRpbVxcLXx0XFwtbW98dG8ocGx8c2gpfHRzKDcwfG1cXC18bTN8bTUpfHR4XFwtOXx1cChcXC5ifGcxfHNpKXx1dHN0fHY0MDB8djc1MHx2ZXJpfHZpKHJnfHRlKXx2ayg0MHw1WzAtM118XFwtdil8dm00MHx2b2RhfHZ1bGN8dngoNTJ8NTN8NjB8NjF8NzB8ODB8ODF8ODN8ODV8OTgpfHczYyhcXC18ICl8d2ViY3x3aGl0fHdpKGcgfG5jfG53KXx3bWxifHdvbnV8eDcwMHx5YXNcXC18eW91cnx6ZXRvfHp0ZVxcLS9pLnRlc3QoYS5zdWJzdHIoMCw0KSkpY2hlY2sgPSB0cnVlfSkobmF2aWdhdG9yLnVzZXJBZ2VudHx8bmF2aWdhdG9yLnZlbmRvcnx8d2luZG93Lm9wZXJhKTtcclxuICByZXR1cm4gY2hlY2s7XHJcbn07XHJcblxyXG5VdGlsLmlzRmlyZWZveCA9IGZ1bmN0aW9uKCkge1xyXG4gIHJldHVybiAvZmlyZWZveC9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk7XHJcbn07XHJcblxyXG5VdGlsLmlzSU9TID0gZnVuY3Rpb24oKSB7XHJcbiAgcmV0dXJuIC8oaVBhZHxpUGhvbmV8aVBvZCkvZy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpO1xyXG59O1xyXG5cclxuVXRpbC5pc0lGcmFtZSA9IGZ1bmN0aW9uKCkge1xyXG4gIHRyeSB7XHJcbiAgICByZXR1cm4gd2luZG93LnNlbGYgIT09IHdpbmRvdy50b3A7XHJcbiAgfSBjYXRjaCAoZSkge1xyXG4gICAgcmV0dXJuIHRydWU7XHJcbiAgfVxyXG59O1xyXG5cclxuVXRpbC5hcHBlbmRRdWVyeVBhcmFtZXRlciA9IGZ1bmN0aW9uKHVybCwga2V5LCB2YWx1ZSkge1xyXG4gIC8vIERldGVybWluZSBkZWxpbWl0ZXIgYmFzZWQgb24gaWYgdGhlIFVSTCBhbHJlYWR5IEdFVCBwYXJhbWV0ZXJzIGluIGl0LlxyXG4gIHZhciBkZWxpbWl0ZXIgPSAodXJsLmluZGV4T2YoJz8nKSA8IDAgPyAnPycgOiAnJicpO1xyXG4gIHVybCArPSBkZWxpbWl0ZXIgKyBrZXkgKyAnPScgKyB2YWx1ZTtcclxuICByZXR1cm4gdXJsO1xyXG59O1xyXG5cclxuLy8gRnJvbSBodHRwOi8vZ29vLmdsLzRXWDN0Z1xyXG5VdGlsLmdldFF1ZXJ5UGFyYW1ldGVyID0gZnVuY3Rpb24obmFtZSkge1xyXG4gIHZhciBuYW1lID0gbmFtZS5yZXBsYWNlKC9bXFxbXS8sIFwiXFxcXFtcIikucmVwbGFjZSgvW1xcXV0vLCBcIlxcXFxdXCIpO1xyXG4gIHZhciByZWdleCA9IG5ldyBSZWdFeHAoXCJbXFxcXD8mXVwiICsgbmFtZSArIFwiPShbXiYjXSopXCIpLFxyXG4gICAgICByZXN1bHRzID0gcmVnZXguZXhlYyhsb2NhdGlvbi5zZWFyY2gpO1xyXG4gIHJldHVybiByZXN1bHRzID09PSBudWxsID8gXCJcIiA6IGRlY29kZVVSSUNvbXBvbmVudChyZXN1bHRzWzFdLnJlcGxhY2UoL1xcKy9nLCBcIiBcIikpO1xyXG59O1xyXG5cclxuVXRpbC5pc0xhbmRzY2FwZU1vZGUgPSBmdW5jdGlvbigpIHtcclxuICByZXR1cm4gKHdpbmRvdy5vcmllbnRhdGlvbiA9PSA5MCB8fCB3aW5kb3cub3JpZW50YXRpb24gPT0gLTkwKTtcclxufTtcclxuXHJcblV0aWwuZ2V0U2NyZWVuV2lkdGggPSBmdW5jdGlvbigpIHtcclxuICByZXR1cm4gTWF0aC5tYXgod2luZG93LnNjcmVlbi53aWR0aCwgd2luZG93LnNjcmVlbi5oZWlnaHQpICpcclxuICAgICAgd2luZG93LmRldmljZVBpeGVsUmF0aW87XHJcbn07XHJcblxyXG5VdGlsLmdldFNjcmVlbkhlaWdodCA9IGZ1bmN0aW9uKCkge1xyXG4gIHJldHVybiBNYXRoLm1pbih3aW5kb3cuc2NyZWVuLndpZHRoLCB3aW5kb3cuc2NyZWVuLmhlaWdodCkgKlxyXG4gICAgICB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbztcclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gVXRpbDtcclxuXHJcbn0se31dLDU6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xyXG4vKlxyXG4gKiBDb3B5cmlnaHQgMjAxNSBHb29nbGUgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcblxyXG52YXIgQnV0dG9uTWFuYWdlciA9IF9kZXJlcV8oJy4vYnV0dG9uLW1hbmFnZXIuanMnKTtcclxudmFyIEVtaXR0ZXIgPSBfZGVyZXFfKCcuL2VtaXR0ZXIuanMnKTtcclxudmFyIE1vZGVzID0gX2RlcmVxXygnLi9tb2Rlcy5qcycpO1xyXG52YXIgVXRpbCA9IF9kZXJlcV8oJy4vdXRpbC5qcycpO1xyXG5cclxuLyoqXHJcbiAqIEhlbHBlciBmb3IgZ2V0dGluZyBpbiBhbmQgb3V0IG9mIFZSIG1vZGUuXHJcbiAqL1xyXG5mdW5jdGlvbiBXZWJWUk1hbmFnZXIocmVuZGVyZXIsIGVmZmVjdCwgcGFyYW1zKSB7XHJcbiAgdGhpcy5wYXJhbXMgPSBwYXJhbXMgfHwge307XHJcblxyXG4gIHRoaXMubW9kZSA9IE1vZGVzLlVOS05PV047XHJcblxyXG4gIC8vIFNldCBvcHRpb24gdG8gaGlkZSB0aGUgYnV0dG9uLlxyXG4gIHRoaXMuaGlkZUJ1dHRvbiA9IHRoaXMucGFyYW1zLmhpZGVCdXR0b24gfHwgZmFsc2U7XHJcbiAgLy8gV2hldGhlciBvciBub3QgdGhlIEZPViBzaG91bGQgYmUgZGlzdG9ydGVkIG9yIHVuLWRpc3RvcnRlZC4gQnkgZGVmYXVsdCwgaXRcclxuICAvLyBzaG91bGQgYmUgZGlzdG9ydGVkLCBidXQgaW4gdGhlIGNhc2Ugb2YgdmVydGV4IHNoYWRlciBiYXNlZCBkaXN0b3J0aW9uLFxyXG4gIC8vIGVuc3VyZSB0aGF0IHdlIHVzZSB1bmRpc3RvcnRlZCBwYXJhbWV0ZXJzLlxyXG4gIHRoaXMucHJlZGlzdG9ydGVkID0gISF0aGlzLnBhcmFtcy5wcmVkaXN0b3J0ZWQ7XHJcblxyXG4gIC8vIFNhdmUgdGhlIFRIUkVFLmpzIHJlbmRlcmVyIGFuZCBlZmZlY3QgZm9yIGxhdGVyLlxyXG4gIHRoaXMucmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICB0aGlzLmVmZmVjdCA9IGVmZmVjdDtcclxuICB2YXIgcG9seWZpbGxXcmFwcGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLndlYnZyLXBvbHlmaWxsLWZ1bGxzY3JlZW4td3JhcHBlcicpO1xyXG4gIHRoaXMuYnV0dG9uID0gbmV3IEJ1dHRvbk1hbmFnZXIocG9seWZpbGxXcmFwcGVyKTtcclxuXHJcbiAgdGhpcy5pc0Z1bGxzY3JlZW5EaXNhYmxlZCA9ICEhVXRpbC5nZXRRdWVyeVBhcmFtZXRlcignbm9fZnVsbHNjcmVlbicpO1xyXG4gIHRoaXMuc3RhcnRNb2RlID0gTW9kZXMuTk9STUFMO1xyXG4gIHZhciBzdGFydE1vZGVQYXJhbSA9IHBhcnNlSW50KFV0aWwuZ2V0UXVlcnlQYXJhbWV0ZXIoJ3N0YXJ0X21vZGUnKSk7XHJcbiAgaWYgKCFpc05hTihzdGFydE1vZGVQYXJhbSkpIHtcclxuICAgIHRoaXMuc3RhcnRNb2RlID0gc3RhcnRNb2RlUGFyYW07XHJcbiAgfVxyXG5cclxuICBpZiAodGhpcy5oaWRlQnV0dG9uKSB7XHJcbiAgICB0aGlzLmJ1dHRvbi5zZXRWaXNpYmlsaXR5KGZhbHNlKTtcclxuICB9XHJcblxyXG4gIC8vIENoZWNrIGlmIHRoZSBicm93c2VyIGlzIGNvbXBhdGlibGUgd2l0aCBXZWJWUi5cclxuICB0aGlzLmdldERldmljZUJ5VHlwZV8oVlJEaXNwbGF5KS50aGVuKGZ1bmN0aW9uKGhtZCkge1xyXG4gICAgdGhpcy5obWQgPSBobWQ7XHJcblxyXG4gICAgLy8gT25seSBlbmFibGUgVlIgbW9kZSBpZiB0aGVyZSdzIGEgVlIgZGV2aWNlIGF0dGFjaGVkIG9yIHdlIGFyZSBydW5uaW5nIHRoZVxyXG4gICAgLy8gcG9seWZpbGwgb24gbW9iaWxlLlxyXG4gICAgaWYgKCF0aGlzLmlzVlJDb21wYXRpYmxlT3ZlcnJpZGUpIHtcclxuICAgICAgdGhpcy5pc1ZSQ29tcGF0aWJsZSA9ICAhaG1kLmlzUG9seWZpbGxlZCB8fCBVdGlsLmlzTW9iaWxlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgc3dpdGNoICh0aGlzLnN0YXJ0TW9kZSkge1xyXG4gICAgICBjYXNlIE1vZGVzLk1BR0lDX1dJTkRPVzpcclxuICAgICAgICB0aGlzLnNldE1vZGVfKE1vZGVzLk1BR0lDX1dJTkRPVyk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgTW9kZXMuVlI6XHJcbiAgICAgICAgdGhpcy5lbnRlclZSTW9kZV8oKTtcclxuICAgICAgICB0aGlzLnNldE1vZGVfKE1vZGVzLlZSKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgZGVmYXVsdDpcclxuICAgICAgICB0aGlzLnNldE1vZGVfKE1vZGVzLk5PUk1BTCk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5lbWl0KCdpbml0aWFsaXplZCcpO1xyXG4gIH0uYmluZCh0aGlzKSk7XHJcblxyXG4gIC8vIEhvb2sgdXAgYnV0dG9uIGxpc3RlbmVycy5cclxuICB0aGlzLmJ1dHRvbi5vbignZnMnLCB0aGlzLm9uRlNDbGlja18uYmluZCh0aGlzKSk7XHJcbiAgdGhpcy5idXR0b24ub24oJ3ZyJywgdGhpcy5vblZSQ2xpY2tfLmJpbmQodGhpcykpO1xyXG5cclxuICAvLyBCaW5kIHRvIGZ1bGxzY3JlZW4gZXZlbnRzLlxyXG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3dlYmtpdGZ1bGxzY3JlZW5jaGFuZ2UnLFxyXG4gICAgICB0aGlzLm9uRnVsbHNjcmVlbkNoYW5nZV8uYmluZCh0aGlzKSk7XHJcbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW96ZnVsbHNjcmVlbmNoYW5nZScsXHJcbiAgICAgIHRoaXMub25GdWxsc2NyZWVuQ2hhbmdlXy5iaW5kKHRoaXMpKTtcclxuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtc2Z1bGxzY3JlZW5jaGFuZ2UnLFxyXG4gICAgICB0aGlzLm9uRnVsbHNjcmVlbkNoYW5nZV8uYmluZCh0aGlzKSk7XHJcblxyXG4gIC8vIEJpbmQgdG8gVlIqIHNwZWNpZmljIGV2ZW50cy5cclxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigndnJkaXNwbGF5cHJlc2VudGNoYW5nZScsXHJcbiAgICAgIHRoaXMub25WUkRpc3BsYXlQcmVzZW50Q2hhbmdlXy5iaW5kKHRoaXMpKTtcclxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigndnJkaXNwbGF5ZGV2aWNlcGFyYW1zY2hhbmdlJyxcclxuICAgICAgdGhpcy5vblZSRGlzcGxheURldmljZVBhcmFtc0NoYW5nZV8uYmluZCh0aGlzKSk7XHJcbn1cclxuXHJcbldlYlZSTWFuYWdlci5wcm90b3R5cGUgPSBuZXcgRW1pdHRlcigpO1xyXG5cclxuLy8gRXhwb3NlIHRoZXNlIHZhbHVlcyBleHRlcm5hbGx5LlxyXG5XZWJWUk1hbmFnZXIuTW9kZXMgPSBNb2RlcztcclxuXHJcbldlYlZSTWFuYWdlci5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24oc2NlbmUsIGNhbWVyYSwgdGltZXN0YW1wKSB7XHJcbiAgLy8gU2NlbmUgbWF5IGJlIGFuIGFycmF5IG9mIHR3byBzY2VuZXMsIG9uZSBmb3IgZWFjaCBleWUuXHJcbiAgaWYgKHNjZW5lIGluc3RhbmNlb2YgQXJyYXkpIHtcclxuICAgIHRoaXMuZWZmZWN0LnJlbmRlcihzY2VuZVswXSwgY2FtZXJhKTtcclxuICB9IGVsc2Uge1xyXG4gICAgdGhpcy5lZmZlY3QucmVuZGVyKHNjZW5lLCBjYW1lcmEpO1xyXG4gIH1cclxufTtcclxuXHJcbldlYlZSTWFuYWdlci5wcm90b3R5cGUuc2V0VlJDb21wYXRpYmxlT3ZlcnJpZGUgPSBmdW5jdGlvbihpc1ZSQ29tcGF0aWJsZSkge1xyXG4gIHRoaXMuaXNWUkNvbXBhdGlibGUgPSBpc1ZSQ29tcGF0aWJsZTtcclxuICB0aGlzLmlzVlJDb21wYXRpYmxlT3ZlcnJpZGUgPSB0cnVlO1xyXG5cclxuICAvLyBEb24ndCBhY3R1YWxseSBjaGFuZ2UgbW9kZXMsIGp1c3QgdXBkYXRlIHRoZSBidXR0b25zLlxyXG4gIHRoaXMuYnV0dG9uLnNldE1vZGUodGhpcy5tb2RlLCB0aGlzLmlzVlJDb21wYXRpYmxlKTtcclxufTtcclxuXHJcbldlYlZSTWFuYWdlci5wcm90b3R5cGUuc2V0RnVsbHNjcmVlbkNhbGxiYWNrID0gZnVuY3Rpb24oY2FsbGJhY2spIHtcclxuICB0aGlzLmZ1bGxzY3JlZW5DYWxsYmFjayA9IGNhbGxiYWNrO1xyXG59O1xyXG5cclxuV2ViVlJNYW5hZ2VyLnByb3RvdHlwZS5zZXRWUkNhbGxiYWNrID0gZnVuY3Rpb24oY2FsbGJhY2spIHtcclxuICB0aGlzLnZyQ2FsbGJhY2sgPSBjYWxsYmFjaztcclxufTtcclxuXHJcbldlYlZSTWFuYWdlci5wcm90b3R5cGUuc2V0RXhpdEZ1bGxzY3JlZW5DYWxsYmFjayA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XHJcbiAgdGhpcy5leGl0RnVsbHNjcmVlbkNhbGxiYWNrID0gY2FsbGJhY2s7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBQcm9taXNlIHJldHVybnMgdHJ1ZSBpZiB0aGVyZSBpcyBhdCBsZWFzdCBvbmUgSE1EIGRldmljZSBhdmFpbGFibGUuXHJcbiAqL1xyXG5XZWJWUk1hbmFnZXIucHJvdG90eXBlLmdldERldmljZUJ5VHlwZV8gPSBmdW5jdGlvbih0eXBlKSB7XHJcbiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgbmF2aWdhdG9yLmdldFZSRGlzcGxheXMoKS50aGVuKGZ1bmN0aW9uKGRpc3BsYXlzKSB7XHJcbiAgICAgIC8vIFByb21pc2Ugc3VjY2VlZHMsIGJ1dCBjaGVjayBpZiB0aGVyZSBhcmUgYW55IGRpc3BsYXlzIGFjdHVhbGx5LlxyXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRpc3BsYXlzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgaWYgKGRpc3BsYXlzW2ldIGluc3RhbmNlb2YgdHlwZSkge1xyXG4gICAgICAgICAgcmVzb2x2ZShkaXNwbGF5c1tpXSk7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgcmVzb2x2ZShudWxsKTtcclxuICAgIH0sIGZ1bmN0aW9uKCkge1xyXG4gICAgICAvLyBObyBkaXNwbGF5cyBhcmUgZm91bmQuXHJcbiAgICAgIHJlc29sdmUobnVsbCk7XHJcbiAgICB9KTtcclxuICB9KTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBIZWxwZXIgZm9yIGVudGVyaW5nIFZSIG1vZGUuXHJcbiAqL1xyXG5XZWJWUk1hbmFnZXIucHJvdG90eXBlLmVudGVyVlJNb2RlXyA9IGZ1bmN0aW9uKCkge1xyXG4gIHRoaXMuaG1kLnJlcXVlc3RQcmVzZW50KFt7XHJcbiAgICBzb3VyY2U6IHRoaXMucmVuZGVyZXIuZG9tRWxlbWVudCxcclxuICAgIHByZWRpc3RvcnRlZDogdGhpcy5wcmVkaXN0b3J0ZWRcclxuICB9XSk7XHJcbn07XHJcblxyXG5XZWJWUk1hbmFnZXIucHJvdG90eXBlLnNldE1vZGVfID0gZnVuY3Rpb24obW9kZSkge1xyXG4gIHZhciBvbGRNb2RlID0gdGhpcy5tb2RlO1xyXG4gIGlmIChtb2RlID09IHRoaXMubW9kZSkge1xyXG4gICAgY29uc29sZS53YXJuKCdOb3QgY2hhbmdpbmcgbW9kZXMsIGFscmVhZHkgaW4gJXMnLCBtb2RlKTtcclxuICAgIHJldHVybjtcclxuICB9XHJcbiAgLy8gY29uc29sZS5sb2coJ01vZGUgY2hhbmdlOiAlcyA9PiAlcycsIHRoaXMubW9kZSwgbW9kZSk7XHJcbiAgdGhpcy5tb2RlID0gbW9kZTtcclxuICB0aGlzLmJ1dHRvbi5zZXRNb2RlKG1vZGUsIHRoaXMuaXNWUkNvbXBhdGlibGUpO1xyXG5cclxuICAvLyBFbWl0IGFuIGV2ZW50IGluZGljYXRpbmcgdGhlIG1vZGUgY2hhbmdlZC5cclxuICB0aGlzLmVtaXQoJ21vZGVjaGFuZ2UnLCBtb2RlLCBvbGRNb2RlKTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBNYWluIGJ1dHRvbiB3YXMgY2xpY2tlZC5cclxuICovXHJcbldlYlZSTWFuYWdlci5wcm90b3R5cGUub25GU0NsaWNrXyA9IGZ1bmN0aW9uKCkge1xyXG4gIHN3aXRjaCAodGhpcy5tb2RlKSB7XHJcbiAgICBjYXNlIE1vZGVzLk5PUk1BTDpcclxuICAgICAgLy8gVE9ETzogUmVtb3ZlIHRoaXMgaGFjayBpZi93aGVuIGlPUyBnZXRzIHJlYWwgZnVsbHNjcmVlbiBtb2RlLlxyXG4gICAgICAvLyBJZiB0aGlzIGlzIGFuIGlmcmFtZSBvbiBpT1MsIGJyZWFrIG91dCBhbmQgb3BlbiBpbiBub19mdWxsc2NyZWVuIG1vZGUuXHJcbiAgICAgIGlmIChVdGlsLmlzSU9TKCkgJiYgVXRpbC5pc0lGcmFtZSgpKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZnVsbHNjcmVlbkNhbGxiYWNrKSB7XHJcbiAgICAgICAgICB0aGlzLmZ1bGxzY3JlZW5DYWxsYmFjaygpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB2YXIgdXJsID0gd2luZG93LmxvY2F0aW9uLmhyZWY7XHJcbiAgICAgICAgICB1cmwgPSBVdGlsLmFwcGVuZFF1ZXJ5UGFyYW1ldGVyKHVybCwgJ25vX2Z1bGxzY3JlZW4nLCAndHJ1ZScpO1xyXG4gICAgICAgICAgdXJsID0gVXRpbC5hcHBlbmRRdWVyeVBhcmFtZXRlcih1cmwsICdzdGFydF9tb2RlJywgTW9kZXMuTUFHSUNfV0lORE9XKTtcclxuICAgICAgICAgIHRvcC5sb2NhdGlvbi5ocmVmID0gdXJsO1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICB0aGlzLnNldE1vZGVfKE1vZGVzLk1BR0lDX1dJTkRPVyk7XHJcbiAgICAgIHRoaXMucmVxdWVzdEZ1bGxzY3JlZW5fKCk7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgY2FzZSBNb2Rlcy5NQUdJQ19XSU5ET1c6XHJcbiAgICAgIGlmICh0aGlzLmlzRnVsbHNjcmVlbkRpc2FibGVkKSB7XHJcbiAgICAgICAgd2luZG93Lmhpc3RvcnkuYmFjaygpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICBpZiAodGhpcy5leGl0RnVsbHNjcmVlbkNhbGxiYWNrKSB7XHJcbiAgICAgICAgdGhpcy5leGl0RnVsbHNjcmVlbkNhbGxiYWNrKCk7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5zZXRNb2RlXyhNb2Rlcy5OT1JNQUwpO1xyXG4gICAgICB0aGlzLmV4aXRGdWxsc2NyZWVuXygpO1xyXG4gICAgICBicmVhaztcclxuICB9XHJcbn07XHJcblxyXG4vKipcclxuICogVGhlIFZSIGJ1dHRvbiB3YXMgY2xpY2tlZC5cclxuICovXHJcbldlYlZSTWFuYWdlci5wcm90b3R5cGUub25WUkNsaWNrXyA9IGZ1bmN0aW9uKCkge1xyXG4gIC8vIFRPRE86IFJlbW92ZSB0aGlzIGhhY2sgd2hlbiBpT1MgaGFzIGZ1bGxzY3JlZW4gbW9kZS5cclxuICAvLyBJZiB0aGlzIGlzIGFuIGlmcmFtZSBvbiBpT1MsIGJyZWFrIG91dCBhbmQgb3BlbiBpbiBub19mdWxsc2NyZWVuIG1vZGUuXHJcbiAgaWYgKHRoaXMubW9kZSA9PSBNb2Rlcy5OT1JNQUwgJiYgVXRpbC5pc0lPUygpICYmIFV0aWwuaXNJRnJhbWUoKSkge1xyXG4gICAgaWYgKHRoaXMudnJDYWxsYmFjaykge1xyXG4gICAgICB0aGlzLnZyQ2FsbGJhY2soKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHZhciB1cmwgPSB3aW5kb3cubG9jYXRpb24uaHJlZjtcclxuICAgICAgdXJsID0gVXRpbC5hcHBlbmRRdWVyeVBhcmFtZXRlcih1cmwsICdub19mdWxsc2NyZWVuJywgJ3RydWUnKTtcclxuICAgICAgdXJsID0gVXRpbC5hcHBlbmRRdWVyeVBhcmFtZXRlcih1cmwsICdzdGFydF9tb2RlJywgTW9kZXMuVlIpO1xyXG4gICAgICB0b3AubG9jYXRpb24uaHJlZiA9IHVybDtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gIH1cclxuICB0aGlzLmVudGVyVlJNb2RlXygpO1xyXG59O1xyXG5cclxuV2ViVlJNYW5hZ2VyLnByb3RvdHlwZS5yZXF1ZXN0RnVsbHNjcmVlbl8gPSBmdW5jdGlvbigpIHtcclxuICB2YXIgY2FudmFzID0gZG9jdW1lbnQuYm9keTtcclxuICAvL3ZhciBjYW52YXMgPSB0aGlzLnJlbmRlcmVyLmRvbUVsZW1lbnQ7XHJcbiAgaWYgKGNhbnZhcy5yZXF1ZXN0RnVsbHNjcmVlbikge1xyXG4gICAgY2FudmFzLnJlcXVlc3RGdWxsc2NyZWVuKCk7XHJcbiAgfSBlbHNlIGlmIChjYW52YXMubW96UmVxdWVzdEZ1bGxTY3JlZW4pIHtcclxuICAgIGNhbnZhcy5tb3pSZXF1ZXN0RnVsbFNjcmVlbigpO1xyXG4gIH0gZWxzZSBpZiAoY2FudmFzLndlYmtpdFJlcXVlc3RGdWxsc2NyZWVuKSB7XHJcbiAgICBjYW52YXMud2Via2l0UmVxdWVzdEZ1bGxzY3JlZW4oKTtcclxuICB9IGVsc2UgaWYgKGNhbnZhcy5tc1JlcXVlc3RGdWxsc2NyZWVuKSB7XHJcbiAgICBjYW52YXMubXNSZXF1ZXN0RnVsbHNjcmVlbigpO1xyXG4gIH1cclxufTtcclxuXHJcbldlYlZSTWFuYWdlci5wcm90b3R5cGUuZXhpdEZ1bGxzY3JlZW5fID0gZnVuY3Rpb24oKSB7XHJcbiAgaWYgKGRvY3VtZW50LmV4aXRGdWxsc2NyZWVuKSB7XHJcbiAgICBkb2N1bWVudC5leGl0RnVsbHNjcmVlbigpO1xyXG4gIH0gZWxzZSBpZiAoZG9jdW1lbnQubW96Q2FuY2VsRnVsbFNjcmVlbikge1xyXG4gICAgZG9jdW1lbnQubW96Q2FuY2VsRnVsbFNjcmVlbigpO1xyXG4gIH0gZWxzZSBpZiAoZG9jdW1lbnQud2Via2l0RXhpdEZ1bGxzY3JlZW4pIHtcclxuICAgIGRvY3VtZW50LndlYmtpdEV4aXRGdWxsc2NyZWVuKCk7XHJcbiAgfSBlbHNlIGlmIChkb2N1bWVudC5tc0V4aXRGdWxsc2NyZWVuKSB7XHJcbiAgICBkb2N1bWVudC5tc0V4aXRGdWxsc2NyZWVuKCk7XHJcbiAgfVxyXG59O1xyXG5cclxuV2ViVlJNYW5hZ2VyLnByb3RvdHlwZS5vblZSRGlzcGxheVByZXNlbnRDaGFuZ2VfID0gZnVuY3Rpb24oZSkge1xyXG4gIGNvbnNvbGUubG9nKCdvblZSRGlzcGxheVByZXNlbnRDaGFuZ2VfJywgZSk7XHJcbiAgaWYgKHRoaXMuaG1kLmlzUHJlc2VudGluZykge1xyXG4gICAgdGhpcy5zZXRNb2RlXyhNb2Rlcy5WUik7XHJcbiAgfSBlbHNlIHtcclxuICAgIHRoaXMuc2V0TW9kZV8oTW9kZXMuTk9STUFMKTtcclxuICB9XHJcbn07XHJcblxyXG5XZWJWUk1hbmFnZXIucHJvdG90eXBlLm9uVlJEaXNwbGF5RGV2aWNlUGFyYW1zQ2hhbmdlXyA9IGZ1bmN0aW9uKGUpIHtcclxuICBjb25zb2xlLmxvZygnb25WUkRpc3BsYXlEZXZpY2VQYXJhbXNDaGFuZ2VfJywgZSk7XHJcbn07XHJcblxyXG5XZWJWUk1hbmFnZXIucHJvdG90eXBlLm9uRnVsbHNjcmVlbkNoYW5nZV8gPSBmdW5jdGlvbihlKSB7XHJcbiAgLy8gSWYgd2UgbGVhdmUgZnVsbC1zY3JlZW4sIGdvIGJhY2sgdG8gbm9ybWFsIG1vZGUuXHJcbiAgaWYgKGRvY3VtZW50LndlYmtpdEZ1bGxzY3JlZW5FbGVtZW50ID09PSBudWxsIHx8XHJcbiAgICAgIGRvY3VtZW50Lm1vekZ1bGxTY3JlZW5FbGVtZW50ID09PSBudWxsKSB7XHJcbiAgICB0aGlzLnNldE1vZGVfKE1vZGVzLk5PUk1BTCk7XHJcbiAgfVxyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBXZWJWUk1hbmFnZXI7XHJcblxyXG59LHtcIi4vYnV0dG9uLW1hbmFnZXIuanNcIjoxLFwiLi9lbWl0dGVyLmpzXCI6MixcIi4vbW9kZXMuanNcIjozLFwiLi91dGlsLmpzXCI6NH1dfSx7fSxbNV0pKDUpXHJcbn0pOyIsIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pKHsxOltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcclxuJ3VzZSBzdHJpY3QnO1xyXG4vKiBlc2xpbnQtZGlzYWJsZSBuby11bnVzZWQtdmFycyAqL1xyXG52YXIgaGFzT3duUHJvcGVydHkgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xyXG52YXIgcHJvcElzRW51bWVyYWJsZSA9IE9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGU7XHJcblxyXG5mdW5jdGlvbiB0b09iamVjdCh2YWwpIHtcclxuXHRpZiAodmFsID09PSBudWxsIHx8IHZhbCA9PT0gdW5kZWZpbmVkKSB7XHJcblx0XHR0aHJvdyBuZXcgVHlwZUVycm9yKCdPYmplY3QuYXNzaWduIGNhbm5vdCBiZSBjYWxsZWQgd2l0aCBudWxsIG9yIHVuZGVmaW5lZCcpO1xyXG5cdH1cclxuXHJcblx0cmV0dXJuIE9iamVjdCh2YWwpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzaG91bGRVc2VOYXRpdmUoKSB7XHJcblx0dHJ5IHtcclxuXHRcdGlmICghT2JqZWN0LmFzc2lnbikge1xyXG5cdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gRGV0ZWN0IGJ1Z2d5IHByb3BlcnR5IGVudW1lcmF0aW9uIG9yZGVyIGluIG9sZGVyIFY4IHZlcnNpb25zLlxyXG5cclxuXHRcdC8vIGh0dHBzOi8vYnVncy5jaHJvbWl1bS5vcmcvcC92OC9pc3N1ZXMvZGV0YWlsP2lkPTQxMThcclxuXHRcdHZhciB0ZXN0MSA9IG5ldyBTdHJpbmcoJ2FiYycpOyAgLy8gZXNsaW50LWRpc2FibGUtbGluZVxyXG5cdFx0dGVzdDFbNV0gPSAnZGUnO1xyXG5cdFx0aWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHRlc3QxKVswXSA9PT0gJzUnKSB7XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBodHRwczovL2J1Z3MuY2hyb21pdW0ub3JnL3AvdjgvaXNzdWVzL2RldGFpbD9pZD0zMDU2XHJcblx0XHR2YXIgdGVzdDIgPSB7fTtcclxuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgMTA7IGkrKykge1xyXG5cdFx0XHR0ZXN0MlsnXycgKyBTdHJpbmcuZnJvbUNoYXJDb2RlKGkpXSA9IGk7XHJcblx0XHR9XHJcblx0XHR2YXIgb3JkZXIyID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXModGVzdDIpLm1hcChmdW5jdGlvbiAobikge1xyXG5cdFx0XHRyZXR1cm4gdGVzdDJbbl07XHJcblx0XHR9KTtcclxuXHRcdGlmIChvcmRlcjIuam9pbignJykgIT09ICcwMTIzNDU2Nzg5Jykge1xyXG5cdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gaHR0cHM6Ly9idWdzLmNocm9taXVtLm9yZy9wL3Y4L2lzc3Vlcy9kZXRhaWw/aWQ9MzA1NlxyXG5cdFx0dmFyIHRlc3QzID0ge307XHJcblx0XHQnYWJjZGVmZ2hpamtsbW5vcHFyc3QnLnNwbGl0KCcnKS5mb3JFYWNoKGZ1bmN0aW9uIChsZXR0ZXIpIHtcclxuXHRcdFx0dGVzdDNbbGV0dGVyXSA9IGxldHRlcjtcclxuXHRcdH0pO1xyXG5cdFx0aWYgKE9iamVjdC5rZXlzKE9iamVjdC5hc3NpZ24oe30sIHRlc3QzKSkuam9pbignJykgIT09XHJcblx0XHRcdFx0J2FiY2RlZmdoaWprbG1ub3BxcnN0Jykge1xyXG5cdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHRydWU7XHJcblx0fSBjYXRjaCAoZSkge1xyXG5cdFx0Ly8gV2UgZG9uJ3QgZXhwZWN0IGFueSBvZiB0aGUgYWJvdmUgdG8gdGhyb3csIGJ1dCBiZXR0ZXIgdG8gYmUgc2FmZS5cclxuXHRcdHJldHVybiBmYWxzZTtcclxuXHR9XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gc2hvdWxkVXNlTmF0aXZlKCkgPyBPYmplY3QuYXNzaWduIDogZnVuY3Rpb24gKHRhcmdldCwgc291cmNlKSB7XHJcblx0dmFyIGZyb207XHJcblx0dmFyIHRvID0gdG9PYmplY3QodGFyZ2V0KTtcclxuXHR2YXIgc3ltYm9scztcclxuXHJcblx0Zm9yICh2YXIgcyA9IDE7IHMgPCBhcmd1bWVudHMubGVuZ3RoOyBzKyspIHtcclxuXHRcdGZyb20gPSBPYmplY3QoYXJndW1lbnRzW3NdKTtcclxuXHJcblx0XHRmb3IgKHZhciBrZXkgaW4gZnJvbSkge1xyXG5cdFx0XHRpZiAoaGFzT3duUHJvcGVydHkuY2FsbChmcm9tLCBrZXkpKSB7XHJcblx0XHRcdFx0dG9ba2V5XSA9IGZyb21ba2V5XTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7XHJcblx0XHRcdHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGZyb20pO1xyXG5cdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IHN5bWJvbHMubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0XHRpZiAocHJvcElzRW51bWVyYWJsZS5jYWxsKGZyb20sIHN5bWJvbHNbaV0pKSB7XHJcblx0XHRcdFx0XHR0b1tzeW1ib2xzW2ldXSA9IGZyb21bc3ltYm9sc1tpXV07XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRyZXR1cm4gdG87XHJcbn07XHJcblxyXG59LHt9XSwyOltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcclxuLypcclxuICogQ29weXJpZ2h0IDIwMTUgR29vZ2xlIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5cclxudmFyIFV0aWwgPSBfZGVyZXFfKCcuL3V0aWwuanMnKTtcclxudmFyIFdha2VMb2NrID0gX2RlcmVxXygnLi93YWtlbG9jay5qcycpO1xyXG5cclxuLy8gU3RhcnQgYXQgYSBoaWdoZXIgbnVtYmVyIHRvIHJlZHVjZSBjaGFuY2Ugb2YgY29uZmxpY3QuXHJcbnZhciBuZXh0RGlzcGxheUlkID0gMTAwMDtcclxudmFyIGhhc1Nob3dEZXByZWNhdGlvbldhcm5pbmcgPSBmYWxzZTtcclxuXHJcbnZhciBkZWZhdWx0TGVmdEJvdW5kcyA9IFswLCAwLCAwLjUsIDFdO1xyXG52YXIgZGVmYXVsdFJpZ2h0Qm91bmRzID0gWzAuNSwgMCwgMC41LCAxXTtcclxuXHJcbi8qKlxyXG4gKiBUaGUgYmFzZSBjbGFzcyBmb3IgYWxsIFZSIGRpc3BsYXlzLlxyXG4gKi9cclxuZnVuY3Rpb24gVlJEaXNwbGF5KCkge1xyXG4gIHRoaXMuaXNQb2x5ZmlsbGVkID0gdHJ1ZTtcclxuICB0aGlzLmRpc3BsYXlJZCA9IG5leHREaXNwbGF5SWQrKztcclxuICB0aGlzLmRpc3BsYXlOYW1lID0gJ3dlYnZyLXBvbHlmaWxsIGRpc3BsYXlOYW1lJztcclxuXHJcbiAgdGhpcy5pc0Nvbm5lY3RlZCA9IHRydWU7XHJcbiAgdGhpcy5pc1ByZXNlbnRpbmcgPSBmYWxzZTtcclxuICB0aGlzLmNhcGFiaWxpdGllcyA9IHtcclxuICAgIGhhc1Bvc2l0aW9uOiBmYWxzZSxcclxuICAgIGhhc09yaWVudGF0aW9uOiBmYWxzZSxcclxuICAgIGhhc0V4dGVybmFsRGlzcGxheTogZmFsc2UsXHJcbiAgICBjYW5QcmVzZW50OiBmYWxzZSxcclxuICAgIG1heExheWVyczogMVxyXG4gIH07XHJcbiAgdGhpcy5zdGFnZVBhcmFtZXRlcnMgPSBudWxsO1xyXG5cclxuICAvLyBcIlByaXZhdGVcIiBtZW1iZXJzLlxyXG4gIHRoaXMud2FpdGluZ0ZvclByZXNlbnRfID0gZmFsc2U7XHJcbiAgdGhpcy5sYXllcl8gPSBudWxsO1xyXG5cclxuICB0aGlzLmZ1bGxzY3JlZW5FbGVtZW50XyA9IG51bGw7XHJcbiAgdGhpcy5mdWxsc2NyZWVuV3JhcHBlcl8gPSBudWxsO1xyXG4gIHRoaXMuZnVsbHNjcmVlbkVsZW1lbnRDYWNoZWRTdHlsZV8gPSBudWxsO1xyXG5cclxuICB0aGlzLmZ1bGxzY3JlZW5FdmVudFRhcmdldF8gPSBudWxsO1xyXG4gIHRoaXMuZnVsbHNjcmVlbkNoYW5nZUhhbmRsZXJfID0gbnVsbDtcclxuICB0aGlzLmZ1bGxzY3JlZW5FcnJvckhhbmRsZXJfID0gbnVsbDtcclxuXHJcbiAgdGhpcy53YWtlbG9ja18gPSBuZXcgV2FrZUxvY2soKTtcclxufVxyXG5cclxuVlJEaXNwbGF5LnByb3RvdHlwZS5nZXRQb3NlID0gZnVuY3Rpb24oKSB7XHJcbiAgLy8gVE9ETzogVGVjaG5pY2FsbHkgdGhpcyBzaG91bGQgcmV0YWluIGl0J3MgdmFsdWUgZm9yIHRoZSBkdXJhdGlvbiBvZiBhIGZyYW1lXHJcbiAgLy8gYnV0IEkgZG91YnQgdGhhdCdzIHByYWN0aWNhbCB0byBkbyBpbiBqYXZhc2NyaXB0LlxyXG4gIHJldHVybiB0aGlzLmdldEltbWVkaWF0ZVBvc2UoKTtcclxufTtcclxuXHJcblZSRGlzcGxheS5wcm90b3R5cGUucmVxdWVzdEFuaW1hdGlvbkZyYW1lID0gZnVuY3Rpb24oY2FsbGJhY2spIHtcclxuICByZXR1cm4gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZShjYWxsYmFjayk7XHJcbn07XHJcblxyXG5WUkRpc3BsYXkucHJvdG90eXBlLmNhbmNlbEFuaW1hdGlvbkZyYW1lID0gZnVuY3Rpb24oaWQpIHtcclxuICByZXR1cm4gd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lKGlkKTtcclxufTtcclxuXHJcblZSRGlzcGxheS5wcm90b3R5cGUud3JhcEZvckZ1bGxzY3JlZW4gPSBmdW5jdGlvbihlbGVtZW50KSB7XHJcbiAgLy8gRG9uJ3Qgd3JhcCBpbiBpT1MuXHJcbiAgaWYgKFV0aWwuaXNJT1MoKSkge1xyXG4gICAgcmV0dXJuIGVsZW1lbnQ7XHJcbiAgfVxyXG4gIGlmICghdGhpcy5mdWxsc2NyZWVuV3JhcHBlcl8pIHtcclxuICAgIHRoaXMuZnVsbHNjcmVlbldyYXBwZXJfID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICB2YXIgY3NzUHJvcGVydGllcyA9IFtcclxuICAgICAgJ2hlaWdodDogJyArIE1hdGgubWluKHNjcmVlbi5oZWlnaHQsIHNjcmVlbi53aWR0aCkgKyAncHggIWltcG9ydGFudCcsXHJcbiAgICAgICd0b3A6IDAgIWltcG9ydGFudCcsXHJcbiAgICAgICdsZWZ0OiAwICFpbXBvcnRhbnQnLFxyXG4gICAgICAncmlnaHQ6IDAgIWltcG9ydGFudCcsXHJcbiAgICAgICdib3JkZXI6IDAnLFxyXG4gICAgICAnbWFyZ2luOiAwJyxcclxuICAgICAgJ3BhZGRpbmc6IDAnLFxyXG4gICAgICAnei1pbmRleDogOTk5OTk5ICFpbXBvcnRhbnQnLFxyXG4gICAgICAncG9zaXRpb246IGZpeGVkJyxcclxuICAgIF07XHJcbiAgICB0aGlzLmZ1bGxzY3JlZW5XcmFwcGVyXy5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgY3NzUHJvcGVydGllcy5qb2luKCc7ICcpICsgJzsnKTtcclxuICAgIHRoaXMuZnVsbHNjcmVlbldyYXBwZXJfLmNsYXNzTGlzdC5hZGQoJ3dlYnZyLXBvbHlmaWxsLWZ1bGxzY3JlZW4td3JhcHBlcicpO1xyXG4gIH1cclxuXHJcbiAgaWYgKHRoaXMuZnVsbHNjcmVlbkVsZW1lbnRfID09IGVsZW1lbnQpIHtcclxuICAgIHJldHVybiB0aGlzLmZ1bGxzY3JlZW5XcmFwcGVyXztcclxuICB9XHJcblxyXG4gIC8vIFJlbW92ZSBhbnkgcHJldmlvdXNseSBhcHBsaWVkIHdyYXBwZXJzXHJcbiAgdGhpcy5yZW1vdmVGdWxsc2NyZWVuV3JhcHBlcigpO1xyXG5cclxuICB0aGlzLmZ1bGxzY3JlZW5FbGVtZW50XyA9IGVsZW1lbnQ7XHJcbiAgdmFyIHBhcmVudCA9IHRoaXMuZnVsbHNjcmVlbkVsZW1lbnRfLnBhcmVudEVsZW1lbnQ7XHJcbiAgcGFyZW50Lmluc2VydEJlZm9yZSh0aGlzLmZ1bGxzY3JlZW5XcmFwcGVyXywgdGhpcy5mdWxsc2NyZWVuRWxlbWVudF8pO1xyXG4gIHBhcmVudC5yZW1vdmVDaGlsZCh0aGlzLmZ1bGxzY3JlZW5FbGVtZW50Xyk7XHJcbiAgdGhpcy5mdWxsc2NyZWVuV3JhcHBlcl8uaW5zZXJ0QmVmb3JlKHRoaXMuZnVsbHNjcmVlbkVsZW1lbnRfLCB0aGlzLmZ1bGxzY3JlZW5XcmFwcGVyXy5maXJzdENoaWxkKTtcclxuICB0aGlzLmZ1bGxzY3JlZW5FbGVtZW50Q2FjaGVkU3R5bGVfID0gdGhpcy5mdWxsc2NyZWVuRWxlbWVudF8uZ2V0QXR0cmlidXRlKCdzdHlsZScpO1xyXG5cclxuICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgZnVuY3Rpb24gYXBwbHlGdWxsc2NyZWVuRWxlbWVudFN0eWxlKCkge1xyXG4gICAgaWYgKCFzZWxmLmZ1bGxzY3JlZW5FbGVtZW50Xykge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIGNzc1Byb3BlcnRpZXMgPSBbXHJcbiAgICAgICdwb3NpdGlvbjogYWJzb2x1dGUnLFxyXG4gICAgICAndG9wOiAwJyxcclxuICAgICAgJ2xlZnQ6IDAnLFxyXG4gICAgICAnd2lkdGg6ICcgKyBNYXRoLm1heChzY3JlZW4ud2lkdGgsIHNjcmVlbi5oZWlnaHQpICsgJ3B4JyxcclxuICAgICAgJ2hlaWdodDogJyArIE1hdGgubWluKHNjcmVlbi5oZWlnaHQsIHNjcmVlbi53aWR0aCkgKyAncHgnLFxyXG4gICAgICAnYm9yZGVyOiAwJyxcclxuICAgICAgJ21hcmdpbjogMCcsXHJcbiAgICAgICdwYWRkaW5nOiAwJyxcclxuICAgIF07XHJcbiAgICBzZWxmLmZ1bGxzY3JlZW5FbGVtZW50Xy5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgY3NzUHJvcGVydGllcy5qb2luKCc7ICcpICsgJzsnKTtcclxuICB9XHJcblxyXG4gIGFwcGx5RnVsbHNjcmVlbkVsZW1lbnRTdHlsZSgpO1xyXG5cclxuICByZXR1cm4gdGhpcy5mdWxsc2NyZWVuV3JhcHBlcl87XHJcbn07XHJcblxyXG5WUkRpc3BsYXkucHJvdG90eXBlLnJlbW92ZUZ1bGxzY3JlZW5XcmFwcGVyID0gZnVuY3Rpb24oKSB7XHJcbiAgaWYgKCF0aGlzLmZ1bGxzY3JlZW5FbGVtZW50Xykge1xyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuXHJcbiAgdmFyIGVsZW1lbnQgPSB0aGlzLmZ1bGxzY3JlZW5FbGVtZW50XztcclxuICBpZiAodGhpcy5mdWxsc2NyZWVuRWxlbWVudENhY2hlZFN0eWxlXykge1xyXG4gICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgdGhpcy5mdWxsc2NyZWVuRWxlbWVudENhY2hlZFN0eWxlXyk7XHJcbiAgfSBlbHNlIHtcclxuICAgIGVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCdzdHlsZScpO1xyXG4gIH1cclxuICB0aGlzLmZ1bGxzY3JlZW5FbGVtZW50XyA9IG51bGw7XHJcbiAgdGhpcy5mdWxsc2NyZWVuRWxlbWVudENhY2hlZFN0eWxlXyA9IG51bGw7XHJcblxyXG4gIHZhciBwYXJlbnQgPSB0aGlzLmZ1bGxzY3JlZW5XcmFwcGVyXy5wYXJlbnRFbGVtZW50O1xyXG4gIHRoaXMuZnVsbHNjcmVlbldyYXBwZXJfLnJlbW92ZUNoaWxkKGVsZW1lbnQpO1xyXG4gIHBhcmVudC5pbnNlcnRCZWZvcmUoZWxlbWVudCwgdGhpcy5mdWxsc2NyZWVuV3JhcHBlcl8pO1xyXG4gIHBhcmVudC5yZW1vdmVDaGlsZCh0aGlzLmZ1bGxzY3JlZW5XcmFwcGVyXyk7XHJcblxyXG4gIHJldHVybiBlbGVtZW50O1xyXG59O1xyXG5cclxuVlJEaXNwbGF5LnByb3RvdHlwZS5yZXF1ZXN0UHJlc2VudCA9IGZ1bmN0aW9uKGxheWVycykge1xyXG4gIHZhciB3YXNQcmVzZW50aW5nID0gdGhpcy5pc1ByZXNlbnRpbmc7XHJcbiAgdmFyIHNlbGYgPSB0aGlzO1xyXG5cclxuICBpZiAoIShsYXllcnMgaW5zdGFuY2VvZiBBcnJheSkpIHtcclxuICAgIGlmICghaGFzU2hvd0RlcHJlY2F0aW9uV2FybmluZykge1xyXG4gICAgICBjb25zb2xlLndhcm4oXCJVc2luZyBhIGRlcHJlY2F0ZWQgZm9ybSBvZiByZXF1ZXN0UHJlc2VudC4gU2hvdWxkIHBhc3MgaW4gYW4gYXJyYXkgb2YgVlJMYXllcnMuXCIpO1xyXG4gICAgICBoYXNTaG93RGVwcmVjYXRpb25XYXJuaW5nID0gdHJ1ZTtcclxuICAgIH1cclxuICAgIGxheWVycyA9IFtsYXllcnNdO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgaWYgKCFzZWxmLmNhcGFiaWxpdGllcy5jYW5QcmVzZW50KSB7XHJcbiAgICAgIHJlamVjdChuZXcgRXJyb3IoJ1ZSRGlzcGxheSBpcyBub3QgY2FwYWJsZSBvZiBwcmVzZW50aW5nLicpKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChsYXllcnMubGVuZ3RoID09IDAgfHwgbGF5ZXJzLmxlbmd0aCA+IHNlbGYuY2FwYWJpbGl0aWVzLm1heExheWVycykge1xyXG4gICAgICByZWplY3QobmV3IEVycm9yKCdJbnZhbGlkIG51bWJlciBvZiBsYXllcnMuJykpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIGluY29taW5nTGF5ZXIgPSBsYXllcnNbMF07XHJcbiAgICBpZiAoIWluY29taW5nTGF5ZXIuc291cmNlKSB7XHJcbiAgICAgIC8qXHJcbiAgICAgIHRvZG86IGZpZ3VyZSBvdXQgdGhlIGNvcnJlY3QgYmVoYXZpb3IgaWYgdGhlIHNvdXJjZSBpcyBub3QgcHJvdmlkZWQuXHJcbiAgICAgIHNlZSBodHRwczovL2dpdGh1Yi5jb20vdzNjL3dlYnZyL2lzc3Vlcy81OFxyXG4gICAgICAqL1xyXG4gICAgICByZXNvbHZlKCk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgbGVmdEJvdW5kcyA9IGluY29taW5nTGF5ZXIubGVmdEJvdW5kcyB8fCBkZWZhdWx0TGVmdEJvdW5kcztcclxuICAgIHZhciByaWdodEJvdW5kcyA9IGluY29taW5nTGF5ZXIucmlnaHRCb3VuZHMgfHwgZGVmYXVsdFJpZ2h0Qm91bmRzO1xyXG4gICAgaWYgKHdhc1ByZXNlbnRpbmcpIHtcclxuICAgICAgLy8gQWxyZWFkeSBwcmVzZW50aW5nLCBqdXN0IGNoYW5naW5nIGNvbmZpZ3VyYXRpb25cclxuICAgICAgdmFyIGNoYW5nZWQgPSBmYWxzZTtcclxuICAgICAgdmFyIGxheWVyID0gc2VsZi5sYXllcl87XHJcbiAgICAgIGlmIChsYXllci5zb3VyY2UgIT09IGluY29taW5nTGF5ZXIuc291cmNlKSB7XHJcbiAgICAgICAgbGF5ZXIuc291cmNlID0gaW5jb21pbmdMYXllci5zb3VyY2U7XHJcbiAgICAgICAgY2hhbmdlZCA9IHRydWU7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgNDsgaSsrKSB7XHJcbiAgICAgICAgaWYgKGxheWVyLmxlZnRCb3VuZHNbaV0gIT09IGxlZnRCb3VuZHNbaV0pIHtcclxuICAgICAgICAgIGxheWVyLmxlZnRCb3VuZHNbaV0gPSBsZWZ0Qm91bmRzW2ldO1xyXG4gICAgICAgICAgY2hhbmdlZCA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChsYXllci5yaWdodEJvdW5kc1tpXSAhPT0gcmlnaHRCb3VuZHNbaV0pIHtcclxuICAgICAgICAgIGxheWVyLnJpZ2h0Qm91bmRzW2ldID0gcmlnaHRCb3VuZHNbaV07XHJcbiAgICAgICAgICBjaGFuZ2VkID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChjaGFuZ2VkKSB7XHJcbiAgICAgICAgc2VsZi5maXJlVlJEaXNwbGF5UHJlc2VudENoYW5nZV8oKTtcclxuICAgICAgfVxyXG4gICAgICByZXNvbHZlKCk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICAvLyBXYXMgbm90IGFscmVhZHkgcHJlc2VudGluZy5cclxuICAgIHNlbGYubGF5ZXJfID0ge1xyXG4gICAgICBwcmVkaXN0b3J0ZWQ6IGluY29taW5nTGF5ZXIucHJlZGlzdG9ydGVkLFxyXG4gICAgICBzb3VyY2U6IGluY29taW5nTGF5ZXIuc291cmNlLFxyXG4gICAgICBsZWZ0Qm91bmRzOiBsZWZ0Qm91bmRzLnNsaWNlKDApLFxyXG4gICAgICByaWdodEJvdW5kczogcmlnaHRCb3VuZHMuc2xpY2UoMClcclxuICAgIH07XHJcblxyXG4gICAgc2VsZi53YWl0aW5nRm9yUHJlc2VudF8gPSBmYWxzZTtcclxuICAgIGlmIChzZWxmLmxheWVyXyAmJiBzZWxmLmxheWVyXy5zb3VyY2UpIHtcclxuICAgICAgdmFyIGZ1bGxzY3JlZW5FbGVtZW50ID0gc2VsZi53cmFwRm9yRnVsbHNjcmVlbihzZWxmLmxheWVyXy5zb3VyY2UpO1xyXG5cclxuICAgICAgZnVuY3Rpb24gb25GdWxsc2NyZWVuQ2hhbmdlKCkge1xyXG4gICAgICAgIHZhciBhY3R1YWxGdWxsc2NyZWVuRWxlbWVudCA9IFV0aWwuZ2V0RnVsbHNjcmVlbkVsZW1lbnQoKTtcclxuXHJcbiAgICAgICAgc2VsZi5pc1ByZXNlbnRpbmcgPSAoZnVsbHNjcmVlbkVsZW1lbnQgPT09IGFjdHVhbEZ1bGxzY3JlZW5FbGVtZW50KTtcclxuICAgICAgICBpZiAoc2VsZi5pc1ByZXNlbnRpbmcpIHtcclxuICAgICAgICAgIGlmIChzY3JlZW4ub3JpZW50YXRpb24gJiYgc2NyZWVuLm9yaWVudGF0aW9uLmxvY2spIHtcclxuICAgICAgICAgICAgc2NyZWVuLm9yaWVudGF0aW9uLmxvY2soJ2xhbmRzY2FwZS1wcmltYXJ5JykuY2F0Y2goZnVuY3Rpb24oZXJyb3Ipe1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ3NjcmVlbi5vcmllbnRhdGlvbi5sb2NrKCkgZmFpbGVkIGR1ZSB0bycsIGVycm9yLm1lc3NhZ2UpXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgc2VsZi53YWl0aW5nRm9yUHJlc2VudF8gPSBmYWxzZTtcclxuICAgICAgICAgIHNlbGYuYmVnaW5QcmVzZW50XygpO1xyXG4gICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBpZiAoc2NyZWVuLm9yaWVudGF0aW9uICYmIHNjcmVlbi5vcmllbnRhdGlvbi51bmxvY2spIHtcclxuICAgICAgICAgICAgc2NyZWVuLm9yaWVudGF0aW9uLnVubG9jaygpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgc2VsZi5yZW1vdmVGdWxsc2NyZWVuV3JhcHBlcigpO1xyXG4gICAgICAgICAgc2VsZi53YWtlbG9ja18ucmVsZWFzZSgpO1xyXG4gICAgICAgICAgc2VsZi5lbmRQcmVzZW50XygpO1xyXG4gICAgICAgICAgc2VsZi5yZW1vdmVGdWxsc2NyZWVuTGlzdGVuZXJzXygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzZWxmLmZpcmVWUkRpc3BsYXlQcmVzZW50Q2hhbmdlXygpO1xyXG4gICAgICB9XHJcbiAgICAgIGZ1bmN0aW9uIG9uRnVsbHNjcmVlbkVycm9yKCkge1xyXG4gICAgICAgIGlmICghc2VsZi53YWl0aW5nRm9yUHJlc2VudF8pIHtcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHNlbGYucmVtb3ZlRnVsbHNjcmVlbldyYXBwZXIoKTtcclxuICAgICAgICBzZWxmLnJlbW92ZUZ1bGxzY3JlZW5MaXN0ZW5lcnNfKCk7XHJcblxyXG4gICAgICAgIHNlbGYud2FrZWxvY2tfLnJlbGVhc2UoKTtcclxuICAgICAgICBzZWxmLndhaXRpbmdGb3JQcmVzZW50XyA9IGZhbHNlO1xyXG4gICAgICAgIHNlbGYuaXNQcmVzZW50aW5nID0gZmFsc2U7XHJcblxyXG4gICAgICAgIHJlamVjdChuZXcgRXJyb3IoJ1VuYWJsZSB0byBwcmVzZW50LicpKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgc2VsZi5hZGRGdWxsc2NyZWVuTGlzdGVuZXJzXyhmdWxsc2NyZWVuRWxlbWVudCxcclxuICAgICAgICAgIG9uRnVsbHNjcmVlbkNoYW5nZSwgb25GdWxsc2NyZWVuRXJyb3IpO1xyXG5cclxuICAgICAgaWYgKFV0aWwucmVxdWVzdEZ1bGxzY3JlZW4oZnVsbHNjcmVlbkVsZW1lbnQpKSB7XHJcbiAgICAgICAgc2VsZi53YWtlbG9ja18ucmVxdWVzdCgpO1xyXG4gICAgICAgIHNlbGYud2FpdGluZ0ZvclByZXNlbnRfID0gdHJ1ZTtcclxuICAgICAgfSBlbHNlIGlmIChVdGlsLmlzSU9TKCkpIHtcclxuICAgICAgICAvLyAqc2lnaCogSnVzdCBmYWtlIGl0LlxyXG4gICAgICAgIHNlbGYud2FrZWxvY2tfLnJlcXVlc3QoKTtcclxuICAgICAgICBzZWxmLmlzUHJlc2VudGluZyA9IHRydWU7XHJcbiAgICAgICAgc2VsZi5iZWdpblByZXNlbnRfKCk7XHJcbiAgICAgICAgc2VsZi5maXJlVlJEaXNwbGF5UHJlc2VudENoYW5nZV8oKTtcclxuICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZiAoIXNlbGYud2FpdGluZ0ZvclByZXNlbnRfICYmICFVdGlsLmlzSU9TKCkpIHtcclxuICAgICAgVXRpbC5leGl0RnVsbHNjcmVlbigpO1xyXG4gICAgICByZWplY3QobmV3IEVycm9yKCdVbmFibGUgdG8gcHJlc2VudC4nKSk7XHJcbiAgICB9XHJcbiAgfSk7XHJcbn07XHJcblxyXG5WUkRpc3BsYXkucHJvdG90eXBlLmV4aXRQcmVzZW50ID0gZnVuY3Rpb24oKSB7XHJcbiAgdmFyIHdhc1ByZXNlbnRpbmcgPSB0aGlzLmlzUHJlc2VudGluZztcclxuICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgdGhpcy5pc1ByZXNlbnRpbmcgPSBmYWxzZTtcclxuICB0aGlzLmxheWVyXyA9IG51bGw7XHJcbiAgdGhpcy53YWtlbG9ja18ucmVsZWFzZSgpO1xyXG5cclxuICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICBpZiAod2FzUHJlc2VudGluZykge1xyXG4gICAgICBpZiAoIVV0aWwuZXhpdEZ1bGxzY3JlZW4oKSAmJiBVdGlsLmlzSU9TKCkpIHtcclxuICAgICAgICBzZWxmLmVuZFByZXNlbnRfKCk7XHJcbiAgICAgICAgc2VsZi5maXJlVlJEaXNwbGF5UHJlc2VudENoYW5nZV8oKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmVqZWN0KG5ldyBFcnJvcignV2FzIG5vdCBwcmVzZW50aW5nIHRvIFZSRGlzcGxheS4nKSk7XHJcbiAgICB9XHJcbiAgfSk7XHJcbn07XHJcblxyXG5WUkRpc3BsYXkucHJvdG90eXBlLmdldExheWVycyA9IGZ1bmN0aW9uKCkge1xyXG4gIGlmICh0aGlzLmxheWVyXykge1xyXG4gICAgcmV0dXJuIFt0aGlzLmxheWVyX107XHJcbiAgfVxyXG4gIHJldHVybiBbXTtcclxufTtcclxuXHJcblZSRGlzcGxheS5wcm90b3R5cGUuZmlyZVZSRGlzcGxheVByZXNlbnRDaGFuZ2VfID0gZnVuY3Rpb24oKSB7XHJcbiAgdmFyIGV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KCd2cmRpc3BsYXlwcmVzZW50Y2hhbmdlJywge2RldGFpbDoge3ZyZGlzcGxheTogdGhpc319KTtcclxuICB3aW5kb3cuZGlzcGF0Y2hFdmVudChldmVudCk7XHJcbn07XHJcblxyXG5WUkRpc3BsYXkucHJvdG90eXBlLmFkZEZ1bGxzY3JlZW5MaXN0ZW5lcnNfID0gZnVuY3Rpb24oZWxlbWVudCwgY2hhbmdlSGFuZGxlciwgZXJyb3JIYW5kbGVyKSB7XHJcbiAgdGhpcy5yZW1vdmVGdWxsc2NyZWVuTGlzdGVuZXJzXygpO1xyXG5cclxuICB0aGlzLmZ1bGxzY3JlZW5FdmVudFRhcmdldF8gPSBlbGVtZW50O1xyXG4gIHRoaXMuZnVsbHNjcmVlbkNoYW5nZUhhbmRsZXJfID0gY2hhbmdlSGFuZGxlcjtcclxuICB0aGlzLmZ1bGxzY3JlZW5FcnJvckhhbmRsZXJfID0gZXJyb3JIYW5kbGVyO1xyXG5cclxuICBpZiAoY2hhbmdlSGFuZGxlcikge1xyXG4gICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdmdWxsc2NyZWVuY2hhbmdlJywgY2hhbmdlSGFuZGxlciwgZmFsc2UpO1xyXG4gICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCd3ZWJraXRmdWxsc2NyZWVuY2hhbmdlJywgY2hhbmdlSGFuZGxlciwgZmFsc2UpO1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW96ZnVsbHNjcmVlbmNoYW5nZScsIGNoYW5nZUhhbmRsZXIsIGZhbHNlKTtcclxuICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbXNmdWxsc2NyZWVuY2hhbmdlJywgY2hhbmdlSGFuZGxlciwgZmFsc2UpO1xyXG4gIH1cclxuXHJcbiAgaWYgKGVycm9ySGFuZGxlcikge1xyXG4gICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdmdWxsc2NyZWVuZXJyb3InLCBlcnJvckhhbmRsZXIsIGZhbHNlKTtcclxuICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignd2Via2l0ZnVsbHNjcmVlbmVycm9yJywgZXJyb3JIYW5kbGVyLCBmYWxzZSk7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3pmdWxsc2NyZWVuZXJyb3InLCBlcnJvckhhbmRsZXIsIGZhbHNlKTtcclxuICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbXNmdWxsc2NyZWVuZXJyb3InLCBlcnJvckhhbmRsZXIsIGZhbHNlKTtcclxuICB9XHJcbn07XHJcblxyXG5WUkRpc3BsYXkucHJvdG90eXBlLnJlbW92ZUZ1bGxzY3JlZW5MaXN0ZW5lcnNfID0gZnVuY3Rpb24oKSB7XHJcbiAgaWYgKCF0aGlzLmZ1bGxzY3JlZW5FdmVudFRhcmdldF8pXHJcbiAgICByZXR1cm47XHJcblxyXG4gIHZhciBlbGVtZW50ID0gdGhpcy5mdWxsc2NyZWVuRXZlbnRUYXJnZXRfO1xyXG5cclxuICBpZiAodGhpcy5mdWxsc2NyZWVuQ2hhbmdlSGFuZGxlcl8pIHtcclxuICAgIHZhciBjaGFuZ2VIYW5kbGVyID0gdGhpcy5mdWxsc2NyZWVuQ2hhbmdlSGFuZGxlcl87XHJcbiAgICBlbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2Z1bGxzY3JlZW5jaGFuZ2UnLCBjaGFuZ2VIYW5kbGVyLCBmYWxzZSk7XHJcbiAgICBlbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3dlYmtpdGZ1bGxzY3JlZW5jaGFuZ2UnLCBjaGFuZ2VIYW5kbGVyLCBmYWxzZSk7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3pmdWxsc2NyZWVuY2hhbmdlJywgY2hhbmdlSGFuZGxlciwgZmFsc2UpO1xyXG4gICAgZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtc2Z1bGxzY3JlZW5jaGFuZ2UnLCBjaGFuZ2VIYW5kbGVyLCBmYWxzZSk7XHJcbiAgfVxyXG5cclxuICBpZiAodGhpcy5mdWxsc2NyZWVuRXJyb3JIYW5kbGVyXykge1xyXG4gICAgdmFyIGVycm9ySGFuZGxlciA9IHRoaXMuZnVsbHNjcmVlbkVycm9ySGFuZGxlcl87XHJcbiAgICBlbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2Z1bGxzY3JlZW5lcnJvcicsIGVycm9ySGFuZGxlciwgZmFsc2UpO1xyXG4gICAgZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCd3ZWJraXRmdWxsc2NyZWVuZXJyb3InLCBlcnJvckhhbmRsZXIsIGZhbHNlKTtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vemZ1bGxzY3JlZW5lcnJvcicsIGVycm9ySGFuZGxlciwgZmFsc2UpO1xyXG4gICAgZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtc2Z1bGxzY3JlZW5lcnJvcicsIGVycm9ySGFuZGxlciwgZmFsc2UpO1xyXG4gIH1cclxuXHJcbiAgdGhpcy5mdWxsc2NyZWVuRXZlbnRUYXJnZXRfID0gbnVsbDtcclxuICB0aGlzLmZ1bGxzY3JlZW5DaGFuZ2VIYW5kbGVyXyA9IG51bGw7XHJcbiAgdGhpcy5mdWxsc2NyZWVuRXJyb3JIYW5kbGVyXyA9IG51bGw7XHJcbn07XHJcblxyXG5WUkRpc3BsYXkucHJvdG90eXBlLmJlZ2luUHJlc2VudF8gPSBmdW5jdGlvbigpIHtcclxuICAvLyBPdmVycmlkZSB0byBhZGQgY3VzdG9tIGJlaGF2aW9yIHdoZW4gcHJlc2VudGF0aW9uIGJlZ2lucy5cclxufTtcclxuXHJcblZSRGlzcGxheS5wcm90b3R5cGUuZW5kUHJlc2VudF8gPSBmdW5jdGlvbigpIHtcclxuICAvLyBPdmVycmlkZSB0byBhZGQgY3VzdG9tIGJlaGF2aW9yIHdoZW4gcHJlc2VudGF0aW9uIGVuZHMuXHJcbn07XHJcblxyXG5WUkRpc3BsYXkucHJvdG90eXBlLnN1Ym1pdEZyYW1lID0gZnVuY3Rpb24ocG9zZSkge1xyXG4gIC8vIE92ZXJyaWRlIHRvIGFkZCBjdXN0b20gYmVoYXZpb3IgZm9yIGZyYW1lIHN1Ym1pc3Npb24uXHJcbn07XHJcblxyXG5WUkRpc3BsYXkucHJvdG90eXBlLmdldEV5ZVBhcmFtZXRlcnMgPSBmdW5jdGlvbih3aGljaEV5ZSkge1xyXG4gIC8vIE92ZXJyaWRlIHRvIHJldHVybiBhY2N1cmF0ZSBleWUgcGFyYW1ldGVycyBpZiBjYW5QcmVzZW50IGlzIHRydWUuXHJcbiAgcmV0dXJuIG51bGw7XHJcbn07XHJcblxyXG4vKlxyXG4gKiBEZXByZWNhdGVkIGNsYXNzZXNcclxuICovXHJcblxyXG4vKipcclxuICogVGhlIGJhc2UgY2xhc3MgZm9yIGFsbCBWUiBkZXZpY2VzLiAoRGVwcmVjYXRlZClcclxuICovXHJcbmZ1bmN0aW9uIFZSRGV2aWNlKCkge1xyXG4gIHRoaXMuaXNQb2x5ZmlsbGVkID0gdHJ1ZTtcclxuICB0aGlzLmhhcmR3YXJlVW5pdElkID0gJ3dlYnZyLXBvbHlmaWxsIGhhcmR3YXJlVW5pdElkJztcclxuICB0aGlzLmRldmljZUlkID0gJ3dlYnZyLXBvbHlmaWxsIGRldmljZUlkJztcclxuICB0aGlzLmRldmljZU5hbWUgPSAnd2VidnItcG9seWZpbGwgZGV2aWNlTmFtZSc7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBUaGUgYmFzZSBjbGFzcyBmb3IgYWxsIFZSIEhNRCBkZXZpY2VzLiAoRGVwcmVjYXRlZClcclxuICovXHJcbmZ1bmN0aW9uIEhNRFZSRGV2aWNlKCkge1xyXG59XHJcbkhNRFZSRGV2aWNlLnByb3RvdHlwZSA9IG5ldyBWUkRldmljZSgpO1xyXG5cclxuLyoqXHJcbiAqIFRoZSBiYXNlIGNsYXNzIGZvciBhbGwgVlIgcG9zaXRpb24gc2Vuc29yIGRldmljZXMuIChEZXByZWNhdGVkKVxyXG4gKi9cclxuZnVuY3Rpb24gUG9zaXRpb25TZW5zb3JWUkRldmljZSgpIHtcclxufVxyXG5Qb3NpdGlvblNlbnNvclZSRGV2aWNlLnByb3RvdHlwZSA9IG5ldyBWUkRldmljZSgpO1xyXG5cclxubW9kdWxlLmV4cG9ydHMuVlJEaXNwbGF5ID0gVlJEaXNwbGF5O1xyXG5tb2R1bGUuZXhwb3J0cy5WUkRldmljZSA9IFZSRGV2aWNlO1xyXG5tb2R1bGUuZXhwb3J0cy5ITURWUkRldmljZSA9IEhNRFZSRGV2aWNlO1xyXG5tb2R1bGUuZXhwb3J0cy5Qb3NpdGlvblNlbnNvclZSRGV2aWNlID0gUG9zaXRpb25TZW5zb3JWUkRldmljZTtcclxuXHJcbn0se1wiLi91dGlsLmpzXCI6MjIsXCIuL3dha2Vsb2NrLmpzXCI6MjR9XSwzOltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcclxuLypcclxuICogQ29weXJpZ2h0IDIwMTYgR29vZ2xlIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5cclxudmFyIENhcmRib2FyZFVJID0gX2RlcmVxXygnLi9jYXJkYm9hcmQtdWkuanMnKTtcclxudmFyIFV0aWwgPSBfZGVyZXFfKCcuL3V0aWwuanMnKTtcclxudmFyIFdHTFVQcmVzZXJ2ZUdMU3RhdGUgPSBfZGVyZXFfKCcuL2RlcHMvd2dsdS1wcmVzZXJ2ZS1zdGF0ZS5qcycpO1xyXG5cclxudmFyIGRpc3RvcnRpb25WUyA9IFtcclxuICAnYXR0cmlidXRlIHZlYzIgcG9zaXRpb247JyxcclxuICAnYXR0cmlidXRlIHZlYzMgdGV4Q29vcmQ7JyxcclxuXHJcbiAgJ3ZhcnlpbmcgdmVjMiB2VGV4Q29vcmQ7JyxcclxuXHJcbiAgJ3VuaWZvcm0gdmVjNCB2aWV3cG9ydE9mZnNldFNjYWxlWzJdOycsXHJcblxyXG4gICd2b2lkIG1haW4oKSB7JyxcclxuICAnICB2ZWM0IHZpZXdwb3J0ID0gdmlld3BvcnRPZmZzZXRTY2FsZVtpbnQodGV4Q29vcmQueildOycsXHJcbiAgJyAgdlRleENvb3JkID0gKHRleENvb3JkLnh5ICogdmlld3BvcnQuencpICsgdmlld3BvcnQueHk7JyxcclxuICAnICBnbF9Qb3NpdGlvbiA9IHZlYzQoIHBvc2l0aW9uLCAxLjAsIDEuMCApOycsXHJcbiAgJ30nLFxyXG5dLmpvaW4oJ1xcbicpO1xyXG5cclxudmFyIGRpc3RvcnRpb25GUyA9IFtcclxuICAncHJlY2lzaW9uIG1lZGl1bXAgZmxvYXQ7JyxcclxuICAndW5pZm9ybSBzYW1wbGVyMkQgZGlmZnVzZTsnLFxyXG5cclxuICAndmFyeWluZyB2ZWMyIHZUZXhDb29yZDsnLFxyXG5cclxuICAndm9pZCBtYWluKCkgeycsXHJcbiAgJyAgZ2xfRnJhZ0NvbG9yID0gdGV4dHVyZTJEKGRpZmZ1c2UsIHZUZXhDb29yZCk7JyxcclxuICAnfScsXHJcbl0uam9pbignXFxuJyk7XHJcblxyXG4vKipcclxuICogQSBtZXNoLWJhc2VkIGRpc3RvcnRlci5cclxuICovXHJcbmZ1bmN0aW9uIENhcmRib2FyZERpc3RvcnRlcihnbCkge1xyXG4gIHRoaXMuZ2wgPSBnbDtcclxuICB0aGlzLmN0eEF0dHJpYnMgPSBnbC5nZXRDb250ZXh0QXR0cmlidXRlcygpO1xyXG5cclxuICB0aGlzLm1lc2hXaWR0aCA9IDIwO1xyXG4gIHRoaXMubWVzaEhlaWdodCA9IDIwO1xyXG5cclxuICB0aGlzLmJ1ZmZlclNjYWxlID0gV2ViVlJDb25maWcuQlVGRkVSX1NDQUxFO1xyXG5cclxuICB0aGlzLmJ1ZmZlcldpZHRoID0gZ2wuZHJhd2luZ0J1ZmZlcldpZHRoO1xyXG4gIHRoaXMuYnVmZmVySGVpZ2h0ID0gZ2wuZHJhd2luZ0J1ZmZlckhlaWdodDtcclxuXHJcbiAgLy8gUGF0Y2hpbmcgc3VwcG9ydFxyXG4gIHRoaXMucmVhbEJpbmRGcmFtZWJ1ZmZlciA9IGdsLmJpbmRGcmFtZWJ1ZmZlcjtcclxuICB0aGlzLnJlYWxFbmFibGUgPSBnbC5lbmFibGU7XHJcbiAgdGhpcy5yZWFsRGlzYWJsZSA9IGdsLmRpc2FibGU7XHJcbiAgdGhpcy5yZWFsQ29sb3JNYXNrID0gZ2wuY29sb3JNYXNrO1xyXG4gIHRoaXMucmVhbENsZWFyQ29sb3IgPSBnbC5jbGVhckNvbG9yO1xyXG4gIHRoaXMucmVhbFZpZXdwb3J0ID0gZ2wudmlld3BvcnQ7XHJcblxyXG4gIGlmICghVXRpbC5pc0lPUygpKSB7XHJcbiAgICB0aGlzLnJlYWxDYW52YXNXaWR0aCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZ2wuY2FudmFzLl9fcHJvdG9fXywgJ3dpZHRoJyk7XHJcbiAgICB0aGlzLnJlYWxDYW52YXNIZWlnaHQgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGdsLmNhbnZhcy5fX3Byb3RvX18sICdoZWlnaHQnKTtcclxuICB9XHJcblxyXG4gIHRoaXMuaXNQYXRjaGVkID0gZmFsc2U7XHJcblxyXG4gIC8vIFN0YXRlIHRyYWNraW5nXHJcbiAgdGhpcy5sYXN0Qm91bmRGcmFtZWJ1ZmZlciA9IG51bGw7XHJcbiAgdGhpcy5jdWxsRmFjZSA9IGZhbHNlO1xyXG4gIHRoaXMuZGVwdGhUZXN0ID0gZmFsc2U7XHJcbiAgdGhpcy5ibGVuZCA9IGZhbHNlO1xyXG4gIHRoaXMuc2Npc3NvclRlc3QgPSBmYWxzZTtcclxuICB0aGlzLnN0ZW5jaWxUZXN0ID0gZmFsc2U7XHJcbiAgdGhpcy52aWV3cG9ydCA9IFswLCAwLCAwLCAwXTtcclxuICB0aGlzLmNvbG9yTWFzayA9IFt0cnVlLCB0cnVlLCB0cnVlLCB0cnVlXTtcclxuICB0aGlzLmNsZWFyQ29sb3IgPSBbMCwgMCwgMCwgMF07XHJcblxyXG4gIHRoaXMuYXR0cmlicyA9IHtcclxuICAgIHBvc2l0aW9uOiAwLFxyXG4gICAgdGV4Q29vcmQ6IDFcclxuICB9O1xyXG4gIHRoaXMucHJvZ3JhbSA9IFV0aWwubGlua1Byb2dyYW0oZ2wsIGRpc3RvcnRpb25WUywgZGlzdG9ydGlvbkZTLCB0aGlzLmF0dHJpYnMpO1xyXG4gIHRoaXMudW5pZm9ybXMgPSBVdGlsLmdldFByb2dyYW1Vbmlmb3JtcyhnbCwgdGhpcy5wcm9ncmFtKTtcclxuXHJcbiAgdGhpcy52aWV3cG9ydE9mZnNldFNjYWxlID0gbmV3IEZsb2F0MzJBcnJheSg4KTtcclxuICB0aGlzLnNldFRleHR1cmVCb3VuZHMoKTtcclxuXHJcbiAgdGhpcy52ZXJ0ZXhCdWZmZXIgPSBnbC5jcmVhdGVCdWZmZXIoKTtcclxuICB0aGlzLmluZGV4QnVmZmVyID0gZ2wuY3JlYXRlQnVmZmVyKCk7XHJcbiAgdGhpcy5pbmRleENvdW50ID0gMDtcclxuXHJcbiAgdGhpcy5yZW5kZXJUYXJnZXQgPSBnbC5jcmVhdGVUZXh0dXJlKCk7XHJcbiAgdGhpcy5mcmFtZWJ1ZmZlciA9IGdsLmNyZWF0ZUZyYW1lYnVmZmVyKCk7XHJcblxyXG4gIHRoaXMuZGVwdGhTdGVuY2lsQnVmZmVyID0gbnVsbDtcclxuICB0aGlzLmRlcHRoQnVmZmVyID0gbnVsbDtcclxuICB0aGlzLnN0ZW5jaWxCdWZmZXIgPSBudWxsO1xyXG5cclxuICBpZiAodGhpcy5jdHhBdHRyaWJzLmRlcHRoICYmIHRoaXMuY3R4QXR0cmlicy5zdGVuY2lsKSB7XHJcbiAgICB0aGlzLmRlcHRoU3RlbmNpbEJ1ZmZlciA9IGdsLmNyZWF0ZVJlbmRlcmJ1ZmZlcigpO1xyXG4gIH0gZWxzZSBpZiAodGhpcy5jdHhBdHRyaWJzLmRlcHRoKSB7XHJcbiAgICB0aGlzLmRlcHRoQnVmZmVyID0gZ2wuY3JlYXRlUmVuZGVyYnVmZmVyKCk7XHJcbiAgfSBlbHNlIGlmICh0aGlzLmN0eEF0dHJpYnMuc3RlbmNpbCkge1xyXG4gICAgdGhpcy5zdGVuY2lsQnVmZmVyID0gZ2wuY3JlYXRlUmVuZGVyYnVmZmVyKCk7XHJcbiAgfVxyXG5cclxuICB0aGlzLnBhdGNoKCk7XHJcblxyXG4gIHRoaXMub25SZXNpemUoKTtcclxuXHJcbiAgaWYgKCFXZWJWUkNvbmZpZy5DQVJEQk9BUkRfVUlfRElTQUJMRUQpIHtcclxuICAgIHRoaXMuY2FyZGJvYXJkVUkgPSBuZXcgQ2FyZGJvYXJkVUkoZ2wpO1xyXG4gIH1cclxufTtcclxuXHJcbi8qKlxyXG4gKiBUZWFycyBkb3duIGFsbCB0aGUgcmVzb3VyY2VzIGNyZWF0ZWQgYnkgdGhlIGRpc3RvcnRlciBhbmQgcmVtb3ZlcyBhbnlcclxuICogcGF0Y2hlcy5cclxuICovXHJcbkNhcmRib2FyZERpc3RvcnRlci5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uKCkge1xyXG4gIHZhciBnbCA9IHRoaXMuZ2w7XHJcblxyXG4gIHRoaXMudW5wYXRjaCgpO1xyXG5cclxuICBnbC5kZWxldGVQcm9ncmFtKHRoaXMucHJvZ3JhbSk7XHJcbiAgZ2wuZGVsZXRlQnVmZmVyKHRoaXMudmVydGV4QnVmZmVyKTtcclxuICBnbC5kZWxldGVCdWZmZXIodGhpcy5pbmRleEJ1ZmZlcik7XHJcbiAgZ2wuZGVsZXRlVGV4dHVyZSh0aGlzLnJlbmRlclRhcmdldCk7XHJcbiAgZ2wuZGVsZXRlRnJhbWVidWZmZXIodGhpcy5mcmFtZWJ1ZmZlcik7XHJcbiAgaWYgKHRoaXMuZGVwdGhTdGVuY2lsQnVmZmVyKSB7XHJcbiAgICBnbC5kZWxldGVSZW5kZXJidWZmZXIodGhpcy5kZXB0aFN0ZW5jaWxCdWZmZXIpO1xyXG4gIH1cclxuICBpZiAodGhpcy5kZXB0aEJ1ZmZlcikge1xyXG4gICAgZ2wuZGVsZXRlUmVuZGVyYnVmZmVyKHRoaXMuZGVwdGhCdWZmZXIpO1xyXG4gIH1cclxuICBpZiAodGhpcy5zdGVuY2lsQnVmZmVyKSB7XHJcbiAgICBnbC5kZWxldGVSZW5kZXJidWZmZXIodGhpcy5zdGVuY2lsQnVmZmVyKTtcclxuICB9XHJcblxyXG4gIGlmICh0aGlzLmNhcmRib2FyZFVJKSB7XHJcbiAgICB0aGlzLmNhcmRib2FyZFVJLmRlc3Ryb3koKTtcclxuICB9XHJcbn07XHJcblxyXG5cclxuLyoqXHJcbiAqIFJlc2l6ZXMgdGhlIGJhY2tidWZmZXIgdG8gbWF0Y2ggdGhlIGNhbnZhcyB3aWR0aCBhbmQgaGVpZ2h0LlxyXG4gKi9cclxuQ2FyZGJvYXJkRGlzdG9ydGVyLnByb3RvdHlwZS5vblJlc2l6ZSA9IGZ1bmN0aW9uKCkge1xyXG4gIHZhciBnbCA9IHRoaXMuZ2w7XHJcbiAgdmFyIHNlbGYgPSB0aGlzO1xyXG5cclxuICB2YXIgZ2xTdGF0ZSA9IFtcclxuICAgIGdsLlJFTkRFUkJVRkZFUl9CSU5ESU5HLFxyXG4gICAgZ2wuVEVYVFVSRV9CSU5ESU5HXzJELCBnbC5URVhUVVJFMFxyXG4gIF07XHJcblxyXG4gIFdHTFVQcmVzZXJ2ZUdMU3RhdGUoZ2wsIGdsU3RhdGUsIGZ1bmN0aW9uKGdsKSB7XHJcbiAgICAvLyBCaW5kIHJlYWwgYmFja2J1ZmZlciBhbmQgY2xlYXIgaXQgb25jZS4gV2UgZG9uJ3QgbmVlZCB0byBjbGVhciBpdCBhZ2FpblxyXG4gICAgLy8gYWZ0ZXIgdGhhdCBiZWNhdXNlIHdlJ3JlIG92ZXJ3cml0aW5nIHRoZSBzYW1lIGFyZWEgZXZlcnkgZnJhbWUuXHJcbiAgICBzZWxmLnJlYWxCaW5kRnJhbWVidWZmZXIuY2FsbChnbCwgZ2wuRlJBTUVCVUZGRVIsIG51bGwpO1xyXG5cclxuICAgIC8vIFB1dCB0aGluZ3MgaW4gYSBnb29kIHN0YXRlXHJcbiAgICBpZiAoc2VsZi5zY2lzc29yVGVzdCkgeyBzZWxmLnJlYWxEaXNhYmxlLmNhbGwoZ2wsIGdsLlNDSVNTT1JfVEVTVCk7IH1cclxuICAgIHNlbGYucmVhbENvbG9yTWFzay5jYWxsKGdsLCB0cnVlLCB0cnVlLCB0cnVlLCB0cnVlKTtcclxuICAgIHNlbGYucmVhbFZpZXdwb3J0LmNhbGwoZ2wsIDAsIDAsIGdsLmRyYXdpbmdCdWZmZXJXaWR0aCwgZ2wuZHJhd2luZ0J1ZmZlckhlaWdodCk7XHJcbiAgICBzZWxmLnJlYWxDbGVhckNvbG9yLmNhbGwoZ2wsIDAsIDAsIDAsIDEpO1xyXG5cclxuICAgIGdsLmNsZWFyKGdsLkNPTE9SX0JVRkZFUl9CSVQpO1xyXG5cclxuICAgIC8vIE5vdyBiaW5kIGFuZCByZXNpemUgdGhlIGZha2UgYmFja2J1ZmZlclxyXG4gICAgc2VsZi5yZWFsQmluZEZyYW1lYnVmZmVyLmNhbGwoZ2wsIGdsLkZSQU1FQlVGRkVSLCBzZWxmLmZyYW1lYnVmZmVyKTtcclxuXHJcbiAgICBnbC5iaW5kVGV4dHVyZShnbC5URVhUVVJFXzJELCBzZWxmLnJlbmRlclRhcmdldCk7XHJcbiAgICBnbC50ZXhJbWFnZTJEKGdsLlRFWFRVUkVfMkQsIDAsIHNlbGYuY3R4QXR0cmlicy5hbHBoYSA/IGdsLlJHQkEgOiBnbC5SR0IsXHJcbiAgICAgICAgc2VsZi5idWZmZXJXaWR0aCwgc2VsZi5idWZmZXJIZWlnaHQsIDAsXHJcbiAgICAgICAgc2VsZi5jdHhBdHRyaWJzLmFscGhhID8gZ2wuUkdCQSA6IGdsLlJHQiwgZ2wuVU5TSUdORURfQllURSwgbnVsbCk7XHJcbiAgICBnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkQsIGdsLlRFWFRVUkVfTUFHX0ZJTFRFUiwgZ2wuTElORUFSKTtcclxuICAgIGdsLnRleFBhcmFtZXRlcmkoZ2wuVEVYVFVSRV8yRCwgZ2wuVEVYVFVSRV9NSU5fRklMVEVSLCBnbC5MSU5FQVIpO1xyXG4gICAgZ2wudGV4UGFyYW1ldGVyaShnbC5URVhUVVJFXzJELCBnbC5URVhUVVJFX1dSQVBfUywgZ2wuQ0xBTVBfVE9fRURHRSk7XHJcbiAgICBnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkQsIGdsLlRFWFRVUkVfV1JBUF9ULCBnbC5DTEFNUF9UT19FREdFKTtcclxuICAgIGdsLmZyYW1lYnVmZmVyVGV4dHVyZTJEKGdsLkZSQU1FQlVGRkVSLCBnbC5DT0xPUl9BVFRBQ0hNRU5UMCwgZ2wuVEVYVFVSRV8yRCwgc2VsZi5yZW5kZXJUYXJnZXQsIDApO1xyXG5cclxuICAgIGlmIChzZWxmLmN0eEF0dHJpYnMuZGVwdGggJiYgc2VsZi5jdHhBdHRyaWJzLnN0ZW5jaWwpIHtcclxuICAgICAgZ2wuYmluZFJlbmRlcmJ1ZmZlcihnbC5SRU5ERVJCVUZGRVIsIHNlbGYuZGVwdGhTdGVuY2lsQnVmZmVyKTtcclxuICAgICAgZ2wucmVuZGVyYnVmZmVyU3RvcmFnZShnbC5SRU5ERVJCVUZGRVIsIGdsLkRFUFRIX1NURU5DSUwsXHJcbiAgICAgICAgICBzZWxmLmJ1ZmZlcldpZHRoLCBzZWxmLmJ1ZmZlckhlaWdodCk7XHJcbiAgICAgIGdsLmZyYW1lYnVmZmVyUmVuZGVyYnVmZmVyKGdsLkZSQU1FQlVGRkVSLCBnbC5ERVBUSF9TVEVOQ0lMX0FUVEFDSE1FTlQsXHJcbiAgICAgICAgICBnbC5SRU5ERVJCVUZGRVIsIHNlbGYuZGVwdGhTdGVuY2lsQnVmZmVyKTtcclxuICAgIH0gZWxzZSBpZiAoc2VsZi5jdHhBdHRyaWJzLmRlcHRoKSB7XHJcbiAgICAgIGdsLmJpbmRSZW5kZXJidWZmZXIoZ2wuUkVOREVSQlVGRkVSLCBzZWxmLmRlcHRoQnVmZmVyKTtcclxuICAgICAgZ2wucmVuZGVyYnVmZmVyU3RvcmFnZShnbC5SRU5ERVJCVUZGRVIsIGdsLkRFUFRIX0NPTVBPTkVOVDE2LFxyXG4gICAgICAgICAgc2VsZi5idWZmZXJXaWR0aCwgc2VsZi5idWZmZXJIZWlnaHQpO1xyXG4gICAgICBnbC5mcmFtZWJ1ZmZlclJlbmRlcmJ1ZmZlcihnbC5GUkFNRUJVRkZFUiwgZ2wuREVQVEhfQVRUQUNITUVOVCxcclxuICAgICAgICAgIGdsLlJFTkRFUkJVRkZFUiwgc2VsZi5kZXB0aEJ1ZmZlcik7XHJcbiAgICB9IGVsc2UgaWYgKHNlbGYuY3R4QXR0cmlicy5zdGVuY2lsKSB7XHJcbiAgICAgIGdsLmJpbmRSZW5kZXJidWZmZXIoZ2wuUkVOREVSQlVGRkVSLCBzZWxmLnN0ZW5jaWxCdWZmZXIpO1xyXG4gICAgICBnbC5yZW5kZXJidWZmZXJTdG9yYWdlKGdsLlJFTkRFUkJVRkZFUiwgZ2wuU1RFTkNJTF9JTkRFWDgsXHJcbiAgICAgICAgICBzZWxmLmJ1ZmZlcldpZHRoLCBzZWxmLmJ1ZmZlckhlaWdodCk7XHJcbiAgICAgIGdsLmZyYW1lYnVmZmVyUmVuZGVyYnVmZmVyKGdsLkZSQU1FQlVGRkVSLCBnbC5TVEVOQ0lMX0FUVEFDSE1FTlQsXHJcbiAgICAgICAgICBnbC5SRU5ERVJCVUZGRVIsIHNlbGYuc3RlbmNpbEJ1ZmZlcik7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCFnbC5jaGVja0ZyYW1lYnVmZmVyU3RhdHVzKGdsLkZSQU1FQlVGRkVSKSA9PT0gZ2wuRlJBTUVCVUZGRVJfQ09NUExFVEUpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRnJhbWVidWZmZXIgaW5jb21wbGV0ZSEnKTtcclxuICAgIH1cclxuXHJcbiAgICBzZWxmLnJlYWxCaW5kRnJhbWVidWZmZXIuY2FsbChnbCwgZ2wuRlJBTUVCVUZGRVIsIHNlbGYubGFzdEJvdW5kRnJhbWVidWZmZXIpO1xyXG5cclxuICAgIGlmIChzZWxmLnNjaXNzb3JUZXN0KSB7IHNlbGYucmVhbEVuYWJsZS5jYWxsKGdsLCBnbC5TQ0lTU09SX1RFU1QpOyB9XHJcblxyXG4gICAgc2VsZi5yZWFsQ29sb3JNYXNrLmFwcGx5KGdsLCBzZWxmLmNvbG9yTWFzayk7XHJcbiAgICBzZWxmLnJlYWxWaWV3cG9ydC5hcHBseShnbCwgc2VsZi52aWV3cG9ydCk7XHJcbiAgICBzZWxmLnJlYWxDbGVhckNvbG9yLmFwcGx5KGdsLCBzZWxmLmNsZWFyQ29sb3IpO1xyXG4gIH0pO1xyXG5cclxuICBpZiAodGhpcy5jYXJkYm9hcmRVSSkge1xyXG4gICAgdGhpcy5jYXJkYm9hcmRVSS5vblJlc2l6ZSgpO1xyXG4gIH1cclxufTtcclxuXHJcbkNhcmRib2FyZERpc3RvcnRlci5wcm90b3R5cGUucGF0Y2ggPSBmdW5jdGlvbigpIHtcclxuICBpZiAodGhpcy5pc1BhdGNoZWQpIHtcclxuICAgIHJldHVybjtcclxuICB9XHJcblxyXG4gIHZhciBzZWxmID0gdGhpcztcclxuICB2YXIgY2FudmFzID0gdGhpcy5nbC5jYW52YXM7XHJcbiAgdmFyIGdsID0gdGhpcy5nbDtcclxuXHJcbiAgaWYgKCFVdGlsLmlzSU9TKCkpIHtcclxuICAgIGNhbnZhcy53aWR0aCA9IFV0aWwuZ2V0U2NyZWVuV2lkdGgoKSAqIHRoaXMuYnVmZmVyU2NhbGU7XHJcbiAgICBjYW52YXMuaGVpZ2h0ID0gVXRpbC5nZXRTY3JlZW5IZWlnaHQoKSAqIHRoaXMuYnVmZmVyU2NhbGU7XHJcblxyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGNhbnZhcywgJ3dpZHRoJywge1xyXG4gICAgICBjb25maWd1cmFibGU6IHRydWUsXHJcbiAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgIGdldDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuYnVmZmVyV2lkdGg7XHJcbiAgICAgIH0sXHJcbiAgICAgIHNldDogZnVuY3Rpb24odmFsdWUpIHtcclxuICAgICAgICBzZWxmLmJ1ZmZlcldpZHRoID0gdmFsdWU7XHJcbiAgICAgICAgc2VsZi5vblJlc2l6ZSgpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoY2FudmFzLCAnaGVpZ2h0Jywge1xyXG4gICAgICBjb25maWd1cmFibGU6IHRydWUsXHJcbiAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgIGdldDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuYnVmZmVySGVpZ2h0O1xyXG4gICAgICB9LFxyXG4gICAgICBzZXQ6IGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICAgICAgc2VsZi5idWZmZXJIZWlnaHQgPSB2YWx1ZTtcclxuICAgICAgICBzZWxmLm9uUmVzaXplKCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgdGhpcy5sYXN0Qm91bmRGcmFtZWJ1ZmZlciA9IGdsLmdldFBhcmFtZXRlcihnbC5GUkFNRUJVRkZFUl9CSU5ESU5HKTtcclxuXHJcbiAgaWYgKHRoaXMubGFzdEJvdW5kRnJhbWVidWZmZXIgPT0gbnVsbCkge1xyXG4gICAgdGhpcy5sYXN0Qm91bmRGcmFtZWJ1ZmZlciA9IHRoaXMuZnJhbWVidWZmZXI7XHJcbiAgICB0aGlzLmdsLmJpbmRGcmFtZWJ1ZmZlcihnbC5GUkFNRUJVRkZFUiwgdGhpcy5mcmFtZWJ1ZmZlcik7XHJcbiAgfVxyXG5cclxuICB0aGlzLmdsLmJpbmRGcmFtZWJ1ZmZlciA9IGZ1bmN0aW9uKHRhcmdldCwgZnJhbWVidWZmZXIpIHtcclxuICAgIHNlbGYubGFzdEJvdW5kRnJhbWVidWZmZXIgPSBmcmFtZWJ1ZmZlciA/IGZyYW1lYnVmZmVyIDogc2VsZi5mcmFtZWJ1ZmZlcjtcclxuICAgIC8vIFNpbGVudGx5IG1ha2UgY2FsbHMgdG8gYmluZCB0aGUgZGVmYXVsdCBmcmFtZWJ1ZmZlciBiaW5kIG91cnMgaW5zdGVhZC5cclxuICAgIHNlbGYucmVhbEJpbmRGcmFtZWJ1ZmZlci5jYWxsKGdsLCB0YXJnZXQsIHNlbGYubGFzdEJvdW5kRnJhbWVidWZmZXIpO1xyXG4gIH07XHJcblxyXG4gIHRoaXMuY3VsbEZhY2UgPSBnbC5nZXRQYXJhbWV0ZXIoZ2wuQ1VMTF9GQUNFKTtcclxuICB0aGlzLmRlcHRoVGVzdCA9IGdsLmdldFBhcmFtZXRlcihnbC5ERVBUSF9URVNUKTtcclxuICB0aGlzLmJsZW5kID0gZ2wuZ2V0UGFyYW1ldGVyKGdsLkJMRU5EKTtcclxuICB0aGlzLnNjaXNzb3JUZXN0ID0gZ2wuZ2V0UGFyYW1ldGVyKGdsLlNDSVNTT1JfVEVTVCk7XHJcbiAgdGhpcy5zdGVuY2lsVGVzdCA9IGdsLmdldFBhcmFtZXRlcihnbC5TVEVOQ0lMX1RFU1QpO1xyXG5cclxuICBnbC5lbmFibGUgPSBmdW5jdGlvbihwbmFtZSkge1xyXG4gICAgc3dpdGNoIChwbmFtZSkge1xyXG4gICAgICBjYXNlIGdsLkNVTExfRkFDRTogc2VsZi5jdWxsRmFjZSA9IHRydWU7IGJyZWFrO1xyXG4gICAgICBjYXNlIGdsLkRFUFRIX1RFU1Q6IHNlbGYuZGVwdGhUZXN0ID0gdHJ1ZTsgYnJlYWs7XHJcbiAgICAgIGNhc2UgZ2wuQkxFTkQ6IHNlbGYuYmxlbmQgPSB0cnVlOyBicmVhaztcclxuICAgICAgY2FzZSBnbC5TQ0lTU09SX1RFU1Q6IHNlbGYuc2Npc3NvclRlc3QgPSB0cnVlOyBicmVhaztcclxuICAgICAgY2FzZSBnbC5TVEVOQ0lMX1RFU1Q6IHNlbGYuc3RlbmNpbFRlc3QgPSB0cnVlOyBicmVhaztcclxuICAgIH1cclxuICAgIHNlbGYucmVhbEVuYWJsZS5jYWxsKGdsLCBwbmFtZSk7XHJcbiAgfTtcclxuXHJcbiAgZ2wuZGlzYWJsZSA9IGZ1bmN0aW9uKHBuYW1lKSB7XHJcbiAgICBzd2l0Y2ggKHBuYW1lKSB7XHJcbiAgICAgIGNhc2UgZ2wuQ1VMTF9GQUNFOiBzZWxmLmN1bGxGYWNlID0gZmFsc2U7IGJyZWFrO1xyXG4gICAgICBjYXNlIGdsLkRFUFRIX1RFU1Q6IHNlbGYuZGVwdGhUZXN0ID0gZmFsc2U7IGJyZWFrO1xyXG4gICAgICBjYXNlIGdsLkJMRU5EOiBzZWxmLmJsZW5kID0gZmFsc2U7IGJyZWFrO1xyXG4gICAgICBjYXNlIGdsLlNDSVNTT1JfVEVTVDogc2VsZi5zY2lzc29yVGVzdCA9IGZhbHNlOyBicmVhaztcclxuICAgICAgY2FzZSBnbC5TVEVOQ0lMX1RFU1Q6IHNlbGYuc3RlbmNpbFRlc3QgPSBmYWxzZTsgYnJlYWs7XHJcbiAgICB9XHJcbiAgICBzZWxmLnJlYWxEaXNhYmxlLmNhbGwoZ2wsIHBuYW1lKTtcclxuICB9O1xyXG5cclxuICB0aGlzLmNvbG9yTWFzayA9IGdsLmdldFBhcmFtZXRlcihnbC5DT0xPUl9XUklURU1BU0spO1xyXG4gIGdsLmNvbG9yTWFzayA9IGZ1bmN0aW9uKHIsIGcsIGIsIGEpIHtcclxuICAgIHNlbGYuY29sb3JNYXNrWzBdID0gcjtcclxuICAgIHNlbGYuY29sb3JNYXNrWzFdID0gZztcclxuICAgIHNlbGYuY29sb3JNYXNrWzJdID0gYjtcclxuICAgIHNlbGYuY29sb3JNYXNrWzNdID0gYTtcclxuICAgIHNlbGYucmVhbENvbG9yTWFzay5jYWxsKGdsLCByLCBnLCBiLCBhKTtcclxuICB9O1xyXG5cclxuICB0aGlzLmNsZWFyQ29sb3IgPSBnbC5nZXRQYXJhbWV0ZXIoZ2wuQ09MT1JfQ0xFQVJfVkFMVUUpO1xyXG4gIGdsLmNsZWFyQ29sb3IgPSBmdW5jdGlvbihyLCBnLCBiLCBhKSB7XHJcbiAgICBzZWxmLmNsZWFyQ29sb3JbMF0gPSByO1xyXG4gICAgc2VsZi5jbGVhckNvbG9yWzFdID0gZztcclxuICAgIHNlbGYuY2xlYXJDb2xvclsyXSA9IGI7XHJcbiAgICBzZWxmLmNsZWFyQ29sb3JbM10gPSBhO1xyXG4gICAgc2VsZi5yZWFsQ2xlYXJDb2xvci5jYWxsKGdsLCByLCBnLCBiLCBhKTtcclxuICB9O1xyXG5cclxuICB0aGlzLnZpZXdwb3J0ID0gZ2wuZ2V0UGFyYW1ldGVyKGdsLlZJRVdQT1JUKTtcclxuICBnbC52aWV3cG9ydCA9IGZ1bmN0aW9uKHgsIHksIHcsIGgpIHtcclxuICAgIHNlbGYudmlld3BvcnRbMF0gPSB4O1xyXG4gICAgc2VsZi52aWV3cG9ydFsxXSA9IHk7XHJcbiAgICBzZWxmLnZpZXdwb3J0WzJdID0gdztcclxuICAgIHNlbGYudmlld3BvcnRbM10gPSBoO1xyXG4gICAgc2VsZi5yZWFsVmlld3BvcnQuY2FsbChnbCwgeCwgeSwgdywgaCk7XHJcbiAgfTtcclxuXHJcbiAgdGhpcy5pc1BhdGNoZWQgPSB0cnVlO1xyXG4gIFV0aWwuc2FmYXJpQ3NzU2l6ZVdvcmthcm91bmQoY2FudmFzKTtcclxufTtcclxuXHJcbkNhcmRib2FyZERpc3RvcnRlci5wcm90b3R5cGUudW5wYXRjaCA9IGZ1bmN0aW9uKCkge1xyXG4gIGlmICghdGhpcy5pc1BhdGNoZWQpIHtcclxuICAgIHJldHVybjtcclxuICB9XHJcblxyXG4gIHZhciBnbCA9IHRoaXMuZ2w7XHJcbiAgdmFyIGNhbnZhcyA9IHRoaXMuZ2wuY2FudmFzO1xyXG5cclxuICBpZiAoIVV0aWwuaXNJT1MoKSkge1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGNhbnZhcywgJ3dpZHRoJywgdGhpcy5yZWFsQ2FudmFzV2lkdGgpO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGNhbnZhcywgJ2hlaWdodCcsIHRoaXMucmVhbENhbnZhc0hlaWdodCk7XHJcbiAgfVxyXG4gIGNhbnZhcy53aWR0aCA9IHRoaXMuYnVmZmVyV2lkdGg7XHJcbiAgY2FudmFzLmhlaWdodCA9IHRoaXMuYnVmZmVySGVpZ2h0O1xyXG5cclxuICBnbC5iaW5kRnJhbWVidWZmZXIgPSB0aGlzLnJlYWxCaW5kRnJhbWVidWZmZXI7XHJcbiAgZ2wuZW5hYmxlID0gdGhpcy5yZWFsRW5hYmxlO1xyXG4gIGdsLmRpc2FibGUgPSB0aGlzLnJlYWxEaXNhYmxlO1xyXG4gIGdsLmNvbG9yTWFzayA9IHRoaXMucmVhbENvbG9yTWFzaztcclxuICBnbC5jbGVhckNvbG9yID0gdGhpcy5yZWFsQ2xlYXJDb2xvcjtcclxuICBnbC52aWV3cG9ydCA9IHRoaXMucmVhbFZpZXdwb3J0O1xyXG5cclxuICAvLyBDaGVjayB0byBzZWUgaWYgb3VyIGZha2UgYmFja2J1ZmZlciBpcyBib3VuZCBhbmQgYmluZCB0aGUgcmVhbCBiYWNrYnVmZmVyXHJcbiAgLy8gaWYgdGhhdCdzIHRoZSBjYXNlLlxyXG4gIGlmICh0aGlzLmxhc3RCb3VuZEZyYW1lYnVmZmVyID09IHRoaXMuZnJhbWVidWZmZXIpIHtcclxuICAgIGdsLmJpbmRGcmFtZWJ1ZmZlcihnbC5GUkFNRUJVRkZFUiwgbnVsbCk7XHJcbiAgfVxyXG5cclxuICB0aGlzLmlzUGF0Y2hlZCA9IGZhbHNlO1xyXG5cclxuICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgVXRpbC5zYWZhcmlDc3NTaXplV29ya2Fyb3VuZChjYW52YXMpO1xyXG4gIH0sIDEpO1xyXG59O1xyXG5cclxuQ2FyZGJvYXJkRGlzdG9ydGVyLnByb3RvdHlwZS5zZXRUZXh0dXJlQm91bmRzID0gZnVuY3Rpb24obGVmdEJvdW5kcywgcmlnaHRCb3VuZHMpIHtcclxuICBpZiAoIWxlZnRCb3VuZHMpIHtcclxuICAgIGxlZnRCb3VuZHMgPSBbMCwgMCwgMC41LCAxXTtcclxuICB9XHJcblxyXG4gIGlmICghcmlnaHRCb3VuZHMpIHtcclxuICAgIHJpZ2h0Qm91bmRzID0gWzAuNSwgMCwgMC41LCAxXTtcclxuICB9XHJcblxyXG4gIC8vIExlZnQgZXllXHJcbiAgdGhpcy52aWV3cG9ydE9mZnNldFNjYWxlWzBdID0gbGVmdEJvdW5kc1swXTsgLy8gWFxyXG4gIHRoaXMudmlld3BvcnRPZmZzZXRTY2FsZVsxXSA9IGxlZnRCb3VuZHNbMV07IC8vIFlcclxuICB0aGlzLnZpZXdwb3J0T2Zmc2V0U2NhbGVbMl0gPSBsZWZ0Qm91bmRzWzJdOyAvLyBXaWR0aFxyXG4gIHRoaXMudmlld3BvcnRPZmZzZXRTY2FsZVszXSA9IGxlZnRCb3VuZHNbM107IC8vIEhlaWdodFxyXG5cclxuICAvLyBSaWdodCBleWVcclxuICB0aGlzLnZpZXdwb3J0T2Zmc2V0U2NhbGVbNF0gPSByaWdodEJvdW5kc1swXTsgLy8gWFxyXG4gIHRoaXMudmlld3BvcnRPZmZzZXRTY2FsZVs1XSA9IHJpZ2h0Qm91bmRzWzFdOyAvLyBZXHJcbiAgdGhpcy52aWV3cG9ydE9mZnNldFNjYWxlWzZdID0gcmlnaHRCb3VuZHNbMl07IC8vIFdpZHRoXHJcbiAgdGhpcy52aWV3cG9ydE9mZnNldFNjYWxlWzddID0gcmlnaHRCb3VuZHNbM107IC8vIEhlaWdodFxyXG59O1xyXG5cclxuLyoqXHJcbiAqIFBlcmZvcm1zIGRpc3RvcnRpb24gcGFzcyBvbiB0aGUgaW5qZWN0ZWQgYmFja2J1ZmZlciwgcmVuZGVyaW5nIGl0IHRvIHRoZSByZWFsXHJcbiAqIGJhY2tidWZmZXIuXHJcbiAqL1xyXG5DYXJkYm9hcmREaXN0b3J0ZXIucHJvdG90eXBlLnN1Ym1pdEZyYW1lID0gZnVuY3Rpb24oKSB7XHJcbiAgdmFyIGdsID0gdGhpcy5nbDtcclxuICB2YXIgc2VsZiA9IHRoaXM7XHJcblxyXG4gIHZhciBnbFN0YXRlID0gW107XHJcblxyXG4gIGlmICghV2ViVlJDb25maWcuRElSVFlfU1VCTUlUX0ZSQU1FX0JJTkRJTkdTKSB7XHJcbiAgICBnbFN0YXRlLnB1c2goXHJcbiAgICAgIGdsLkNVUlJFTlRfUFJPR1JBTSxcclxuICAgICAgZ2wuQVJSQVlfQlVGRkVSX0JJTkRJTkcsXHJcbiAgICAgIGdsLkVMRU1FTlRfQVJSQVlfQlVGRkVSX0JJTkRJTkcsXHJcbiAgICAgIGdsLlRFWFRVUkVfQklORElOR18yRCwgZ2wuVEVYVFVSRTBcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBXR0xVUHJlc2VydmVHTFN0YXRlKGdsLCBnbFN0YXRlLCBmdW5jdGlvbihnbCkge1xyXG4gICAgLy8gQmluZCB0aGUgcmVhbCBkZWZhdWx0IGZyYW1lYnVmZmVyXHJcbiAgICBzZWxmLnJlYWxCaW5kRnJhbWVidWZmZXIuY2FsbChnbCwgZ2wuRlJBTUVCVUZGRVIsIG51bGwpO1xyXG5cclxuICAgIC8vIE1ha2Ugc3VyZSB0aGUgR0wgc3RhdGUgaXMgaW4gYSBnb29kIHBsYWNlXHJcbiAgICBpZiAoc2VsZi5jdWxsRmFjZSkgeyBzZWxmLnJlYWxEaXNhYmxlLmNhbGwoZ2wsIGdsLkNVTExfRkFDRSk7IH1cclxuICAgIGlmIChzZWxmLmRlcHRoVGVzdCkgeyBzZWxmLnJlYWxEaXNhYmxlLmNhbGwoZ2wsIGdsLkRFUFRIX1RFU1QpOyB9XHJcbiAgICBpZiAoc2VsZi5ibGVuZCkgeyBzZWxmLnJlYWxEaXNhYmxlLmNhbGwoZ2wsIGdsLkJMRU5EKTsgfVxyXG4gICAgaWYgKHNlbGYuc2Npc3NvclRlc3QpIHsgc2VsZi5yZWFsRGlzYWJsZS5jYWxsKGdsLCBnbC5TQ0lTU09SX1RFU1QpOyB9XHJcbiAgICBpZiAoc2VsZi5zdGVuY2lsVGVzdCkgeyBzZWxmLnJlYWxEaXNhYmxlLmNhbGwoZ2wsIGdsLlNURU5DSUxfVEVTVCk7IH1cclxuICAgIHNlbGYucmVhbENvbG9yTWFzay5jYWxsKGdsLCB0cnVlLCB0cnVlLCB0cnVlLCB0cnVlKTtcclxuICAgIHNlbGYucmVhbFZpZXdwb3J0LmNhbGwoZ2wsIDAsIDAsIGdsLmRyYXdpbmdCdWZmZXJXaWR0aCwgZ2wuZHJhd2luZ0J1ZmZlckhlaWdodCk7XHJcblxyXG4gICAgLy8gSWYgdGhlIGJhY2tidWZmZXIgaGFzIGFuIGFscGhhIGNoYW5uZWwgY2xlYXIgZXZlcnkgZnJhbWUgc28gdGhlIHBhZ2VcclxuICAgIC8vIGRvZXNuJ3Qgc2hvdyB0aHJvdWdoLlxyXG4gICAgaWYgKHNlbGYuY3R4QXR0cmlicy5hbHBoYSB8fCBVdGlsLmlzSU9TKCkpIHtcclxuICAgICAgc2VsZi5yZWFsQ2xlYXJDb2xvci5jYWxsKGdsLCAwLCAwLCAwLCAxKTtcclxuICAgICAgZ2wuY2xlYXIoZ2wuQ09MT1JfQlVGRkVSX0JJVCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQmluZCBkaXN0b3J0aW9uIHByb2dyYW0gYW5kIG1lc2hcclxuICAgIGdsLnVzZVByb2dyYW0oc2VsZi5wcm9ncmFtKTtcclxuXHJcbiAgICBnbC5iaW5kQnVmZmVyKGdsLkVMRU1FTlRfQVJSQVlfQlVGRkVSLCBzZWxmLmluZGV4QnVmZmVyKTtcclxuXHJcbiAgICBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgc2VsZi52ZXJ0ZXhCdWZmZXIpO1xyXG4gICAgZ2wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkoc2VsZi5hdHRyaWJzLnBvc2l0aW9uKTtcclxuICAgIGdsLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KHNlbGYuYXR0cmlicy50ZXhDb29yZCk7XHJcbiAgICBnbC52ZXJ0ZXhBdHRyaWJQb2ludGVyKHNlbGYuYXR0cmlicy5wb3NpdGlvbiwgMiwgZ2wuRkxPQVQsIGZhbHNlLCAyMCwgMCk7XHJcbiAgICBnbC52ZXJ0ZXhBdHRyaWJQb2ludGVyKHNlbGYuYXR0cmlicy50ZXhDb29yZCwgMywgZ2wuRkxPQVQsIGZhbHNlLCAyMCwgOCk7XHJcblxyXG4gICAgZ2wuYWN0aXZlVGV4dHVyZShnbC5URVhUVVJFMCk7XHJcbiAgICBnbC51bmlmb3JtMWkoc2VsZi51bmlmb3Jtcy5kaWZmdXNlLCAwKTtcclxuICAgIGdsLmJpbmRUZXh0dXJlKGdsLlRFWFRVUkVfMkQsIHNlbGYucmVuZGVyVGFyZ2V0KTtcclxuXHJcbiAgICBnbC51bmlmb3JtNGZ2KHNlbGYudW5pZm9ybXMudmlld3BvcnRPZmZzZXRTY2FsZSwgc2VsZi52aWV3cG9ydE9mZnNldFNjYWxlKTtcclxuXHJcbiAgICAvLyBEcmF3cyBib3RoIGV5ZXNcclxuICAgIGdsLmRyYXdFbGVtZW50cyhnbC5UUklBTkdMRVMsIHNlbGYuaW5kZXhDb3VudCwgZ2wuVU5TSUdORURfU0hPUlQsIDApO1xyXG5cclxuICAgIGlmIChzZWxmLmNhcmRib2FyZFVJKSB7XHJcbiAgICAgIHNlbGYuY2FyZGJvYXJkVUkucmVuZGVyTm9TdGF0ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEJpbmQgdGhlIGZha2UgZGVmYXVsdCBmcmFtZWJ1ZmZlciBhZ2FpblxyXG4gICAgc2VsZi5yZWFsQmluZEZyYW1lYnVmZmVyLmNhbGwoc2VsZi5nbCwgZ2wuRlJBTUVCVUZGRVIsIHNlbGYuZnJhbWVidWZmZXIpO1xyXG5cclxuICAgIC8vIElmIHByZXNlcnZlRHJhd2luZ0J1ZmZlciA9PSBmYWxzZSBjbGVhciB0aGUgZnJhbWVidWZmZXJcclxuICAgIGlmICghc2VsZi5jdHhBdHRyaWJzLnByZXNlcnZlRHJhd2luZ0J1ZmZlcikge1xyXG4gICAgICBzZWxmLnJlYWxDbGVhckNvbG9yLmNhbGwoZ2wsIDAsIDAsIDAsIDApO1xyXG4gICAgICBnbC5jbGVhcihnbC5DT0xPUl9CVUZGRVJfQklUKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoIVdlYlZSQ29uZmlnLkRJUlRZX1NVQk1JVF9GUkFNRV9CSU5ESU5HUykge1xyXG4gICAgICBzZWxmLnJlYWxCaW5kRnJhbWVidWZmZXIuY2FsbChnbCwgZ2wuRlJBTUVCVUZGRVIsIHNlbGYubGFzdEJvdW5kRnJhbWVidWZmZXIpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFJlc3RvcmUgc3RhdGVcclxuICAgIGlmIChzZWxmLmN1bGxGYWNlKSB7IHNlbGYucmVhbEVuYWJsZS5jYWxsKGdsLCBnbC5DVUxMX0ZBQ0UpOyB9XHJcbiAgICBpZiAoc2VsZi5kZXB0aFRlc3QpIHsgc2VsZi5yZWFsRW5hYmxlLmNhbGwoZ2wsIGdsLkRFUFRIX1RFU1QpOyB9XHJcbiAgICBpZiAoc2VsZi5ibGVuZCkgeyBzZWxmLnJlYWxFbmFibGUuY2FsbChnbCwgZ2wuQkxFTkQpOyB9XHJcbiAgICBpZiAoc2VsZi5zY2lzc29yVGVzdCkgeyBzZWxmLnJlYWxFbmFibGUuY2FsbChnbCwgZ2wuU0NJU1NPUl9URVNUKTsgfVxyXG4gICAgaWYgKHNlbGYuc3RlbmNpbFRlc3QpIHsgc2VsZi5yZWFsRW5hYmxlLmNhbGwoZ2wsIGdsLlNURU5DSUxfVEVTVCk7IH1cclxuXHJcbiAgICBzZWxmLnJlYWxDb2xvck1hc2suYXBwbHkoZ2wsIHNlbGYuY29sb3JNYXNrKTtcclxuICAgIHNlbGYucmVhbFZpZXdwb3J0LmFwcGx5KGdsLCBzZWxmLnZpZXdwb3J0KTtcclxuICAgIGlmIChzZWxmLmN0eEF0dHJpYnMuYWxwaGEgfHwgIXNlbGYuY3R4QXR0cmlicy5wcmVzZXJ2ZURyYXdpbmdCdWZmZXIpIHtcclxuICAgICAgc2VsZi5yZWFsQ2xlYXJDb2xvci5hcHBseShnbCwgc2VsZi5jbGVhckNvbG9yKTtcclxuICAgIH1cclxuICB9KTtcclxuXHJcbiAgLy8gV29ya2Fyb3VuZCBmb3IgdGhlIGZhY3QgdGhhdCBTYWZhcmkgZG9lc24ndCBhbGxvdyB1cyB0byBwYXRjaCB0aGUgY2FudmFzXHJcbiAgLy8gd2lkdGggYW5kIGhlaWdodCBjb3JyZWN0bHkuIEFmdGVyIGVhY2ggc3VibWl0IGZyYW1lIGNoZWNrIHRvIHNlZSB3aGF0IHRoZVxyXG4gIC8vIHJlYWwgYmFja2J1ZmZlciBzaXplIGhhcyBiZWVuIHNldCB0byBhbmQgcmVzaXplIHRoZSBmYWtlIGJhY2tidWZmZXIgc2l6ZVxyXG4gIC8vIHRvIG1hdGNoLlxyXG4gIGlmIChVdGlsLmlzSU9TKCkpIHtcclxuICAgIHZhciBjYW52YXMgPSBnbC5jYW52YXM7XHJcbiAgICBpZiAoY2FudmFzLndpZHRoICE9IHNlbGYuYnVmZmVyV2lkdGggfHwgY2FudmFzLmhlaWdodCAhPSBzZWxmLmJ1ZmZlckhlaWdodCkge1xyXG4gICAgICBzZWxmLmJ1ZmZlcldpZHRoID0gY2FudmFzLndpZHRoO1xyXG4gICAgICBzZWxmLmJ1ZmZlckhlaWdodCA9IGNhbnZhcy5oZWlnaHQ7XHJcbiAgICAgIHNlbGYub25SZXNpemUoKTtcclxuICAgIH1cclxuICB9XHJcbn07XHJcblxyXG4vKipcclxuICogQ2FsbCB3aGVuIHRoZSBkZXZpY2VJbmZvIGhhcyBjaGFuZ2VkLiBBdCB0aGlzIHBvaW50IHdlIG5lZWRcclxuICogdG8gcmUtY2FsY3VsYXRlIHRoZSBkaXN0b3J0aW9uIG1lc2guXHJcbiAqL1xyXG5DYXJkYm9hcmREaXN0b3J0ZXIucHJvdG90eXBlLnVwZGF0ZURldmljZUluZm8gPSBmdW5jdGlvbihkZXZpY2VJbmZvKSB7XHJcbiAgdmFyIGdsID0gdGhpcy5nbDtcclxuICB2YXIgc2VsZiA9IHRoaXM7XHJcblxyXG4gIHZhciBnbFN0YXRlID0gW2dsLkFSUkFZX0JVRkZFUl9CSU5ESU5HLCBnbC5FTEVNRU5UX0FSUkFZX0JVRkZFUl9CSU5ESU5HXTtcclxuICBXR0xVUHJlc2VydmVHTFN0YXRlKGdsLCBnbFN0YXRlLCBmdW5jdGlvbihnbCkge1xyXG4gICAgdmFyIHZlcnRpY2VzID0gc2VsZi5jb21wdXRlTWVzaFZlcnRpY2VzXyhzZWxmLm1lc2hXaWR0aCwgc2VsZi5tZXNoSGVpZ2h0LCBkZXZpY2VJbmZvKTtcclxuICAgIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCBzZWxmLnZlcnRleEJ1ZmZlcik7XHJcbiAgICBnbC5idWZmZXJEYXRhKGdsLkFSUkFZX0JVRkZFUiwgdmVydGljZXMsIGdsLlNUQVRJQ19EUkFXKTtcclxuXHJcbiAgICAvLyBJbmRpY2VzIGRvbid0IGNoYW5nZSBiYXNlZCBvbiBkZXZpY2UgcGFyYW1ldGVycywgc28gb25seSBjb21wdXRlIG9uY2UuXHJcbiAgICBpZiAoIXNlbGYuaW5kZXhDb3VudCkge1xyXG4gICAgICB2YXIgaW5kaWNlcyA9IHNlbGYuY29tcHV0ZU1lc2hJbmRpY2VzXyhzZWxmLm1lc2hXaWR0aCwgc2VsZi5tZXNoSGVpZ2h0KTtcclxuICAgICAgZ2wuYmluZEJ1ZmZlcihnbC5FTEVNRU5UX0FSUkFZX0JVRkZFUiwgc2VsZi5pbmRleEJ1ZmZlcik7XHJcbiAgICAgIGdsLmJ1ZmZlckRhdGEoZ2wuRUxFTUVOVF9BUlJBWV9CVUZGRVIsIGluZGljZXMsIGdsLlNUQVRJQ19EUkFXKTtcclxuICAgICAgc2VsZi5pbmRleENvdW50ID0gaW5kaWNlcy5sZW5ndGg7XHJcbiAgICB9XHJcbiAgfSk7XHJcbn07XHJcblxyXG4vKipcclxuICogQnVpbGQgdGhlIGRpc3RvcnRpb24gbWVzaCB2ZXJ0aWNlcy5cclxuICogQmFzZWQgb24gY29kZSBmcm9tIHRoZSBVbml0eSBjYXJkYm9hcmQgcGx1Z2luLlxyXG4gKi9cclxuQ2FyZGJvYXJkRGlzdG9ydGVyLnByb3RvdHlwZS5jb21wdXRlTWVzaFZlcnRpY2VzXyA9IGZ1bmN0aW9uKHdpZHRoLCBoZWlnaHQsIGRldmljZUluZm8pIHtcclxuICB2YXIgdmVydGljZXMgPSBuZXcgRmxvYXQzMkFycmF5KDIgKiB3aWR0aCAqIGhlaWdodCAqIDUpO1xyXG5cclxuICB2YXIgbGVuc0ZydXN0dW0gPSBkZXZpY2VJbmZvLmdldExlZnRFeWVWaXNpYmxlVGFuQW5nbGVzKCk7XHJcbiAgdmFyIG5vTGVuc0ZydXN0dW0gPSBkZXZpY2VJbmZvLmdldExlZnRFeWVOb0xlbnNUYW5BbmdsZXMoKTtcclxuICB2YXIgdmlld3BvcnQgPSBkZXZpY2VJbmZvLmdldExlZnRFeWVWaXNpYmxlU2NyZWVuUmVjdChub0xlbnNGcnVzdHVtKTtcclxuICB2YXIgdmlkeCA9IDA7XHJcbiAgdmFyIGlpZHggPSAwO1xyXG4gIGZvciAodmFyIGUgPSAwOyBlIDwgMjsgZSsrKSB7XHJcbiAgICBmb3IgKHZhciBqID0gMDsgaiA8IGhlaWdodDsgaisrKSB7XHJcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgd2lkdGg7IGkrKywgdmlkeCsrKSB7XHJcbiAgICAgICAgdmFyIHUgPSBpIC8gKHdpZHRoIC0gMSk7XHJcbiAgICAgICAgdmFyIHYgPSBqIC8gKGhlaWdodCAtIDEpO1xyXG5cclxuICAgICAgICAvLyBHcmlkIHBvaW50cyByZWd1bGFybHkgc3BhY2VkIGluIFN0cmVvU2NyZWVuLCBhbmQgYmFycmVsIGRpc3RvcnRlZCBpblxyXG4gICAgICAgIC8vIHRoZSBtZXNoLlxyXG4gICAgICAgIHZhciBzID0gdTtcclxuICAgICAgICB2YXIgdCA9IHY7XHJcbiAgICAgICAgdmFyIHggPSBVdGlsLmxlcnAobGVuc0ZydXN0dW1bMF0sIGxlbnNGcnVzdHVtWzJdLCB1KTtcclxuICAgICAgICB2YXIgeSA9IFV0aWwubGVycChsZW5zRnJ1c3R1bVszXSwgbGVuc0ZydXN0dW1bMV0sIHYpO1xyXG4gICAgICAgIHZhciBkID0gTWF0aC5zcXJ0KHggKiB4ICsgeSAqIHkpO1xyXG4gICAgICAgIHZhciByID0gZGV2aWNlSW5mby5kaXN0b3J0aW9uLmRpc3RvcnRJbnZlcnNlKGQpO1xyXG4gICAgICAgIHZhciBwID0geCAqIHIgLyBkO1xyXG4gICAgICAgIHZhciBxID0geSAqIHIgLyBkO1xyXG4gICAgICAgIHUgPSAocCAtIG5vTGVuc0ZydXN0dW1bMF0pIC8gKG5vTGVuc0ZydXN0dW1bMl0gLSBub0xlbnNGcnVzdHVtWzBdKTtcclxuICAgICAgICB2ID0gKHEgLSBub0xlbnNGcnVzdHVtWzNdKSAvIChub0xlbnNGcnVzdHVtWzFdIC0gbm9MZW5zRnJ1c3R1bVszXSk7XHJcblxyXG4gICAgICAgIC8vIENvbnZlcnQgdSx2IHRvIG1lc2ggc2NyZWVuIGNvb3JkaW5hdGVzLlxyXG4gICAgICAgIHZhciBhc3BlY3QgPSBkZXZpY2VJbmZvLmRldmljZS53aWR0aE1ldGVycyAvIGRldmljZUluZm8uZGV2aWNlLmhlaWdodE1ldGVycztcclxuXHJcbiAgICAgICAgLy8gRklYTUU6IFRoZSBvcmlnaW5hbCBVbml0eSBwbHVnaW4gbXVsdGlwbGllZCBVIGJ5IHRoZSBhc3BlY3QgcmF0aW9cclxuICAgICAgICAvLyBhbmQgZGlkbid0IG11bHRpcGx5IGVpdGhlciB2YWx1ZSBieSAyLCBidXQgdGhhdCBzZWVtcyB0byBnZXQgaXRcclxuICAgICAgICAvLyByZWFsbHkgY2xvc2UgdG8gY29ycmVjdCBsb29raW5nIGZvciBtZS4gSSBoYXRlIHRoaXMga2luZCBvZiBcIkRvbid0XHJcbiAgICAgICAgLy8ga25vdyB3aHkgaXQgd29ya3NcIiBjb2RlIHRob3VnaCwgYW5kIHdvbGQgbG92ZSBhIG1vcmUgbG9naWNhbFxyXG4gICAgICAgIC8vIGV4cGxhbmF0aW9uIG9mIHdoYXQgbmVlZHMgdG8gaGFwcGVuIGhlcmUuXHJcbiAgICAgICAgdSA9ICh2aWV3cG9ydC54ICsgdSAqIHZpZXdwb3J0LndpZHRoIC0gMC41KSAqIDIuMDsgLy8qIGFzcGVjdDtcclxuICAgICAgICB2ID0gKHZpZXdwb3J0LnkgKyB2ICogdmlld3BvcnQuaGVpZ2h0IC0gMC41KSAqIDIuMDtcclxuXHJcbiAgICAgICAgdmVydGljZXNbKHZpZHggKiA1KSArIDBdID0gdTsgLy8gcG9zaXRpb24ueFxyXG4gICAgICAgIHZlcnRpY2VzWyh2aWR4ICogNSkgKyAxXSA9IHY7IC8vIHBvc2l0aW9uLnlcclxuICAgICAgICB2ZXJ0aWNlc1sodmlkeCAqIDUpICsgMl0gPSBzOyAvLyB0ZXhDb29yZC54XHJcbiAgICAgICAgdmVydGljZXNbKHZpZHggKiA1KSArIDNdID0gdDsgLy8gdGV4Q29vcmQueVxyXG4gICAgICAgIHZlcnRpY2VzWyh2aWR4ICogNSkgKyA0XSA9IGU7IC8vIHRleENvb3JkLnogKHZpZXdwb3J0IGluZGV4KVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICB2YXIgdyA9IGxlbnNGcnVzdHVtWzJdIC0gbGVuc0ZydXN0dW1bMF07XHJcbiAgICBsZW5zRnJ1c3R1bVswXSA9IC0odyArIGxlbnNGcnVzdHVtWzBdKTtcclxuICAgIGxlbnNGcnVzdHVtWzJdID0gdyAtIGxlbnNGcnVzdHVtWzJdO1xyXG4gICAgdyA9IG5vTGVuc0ZydXN0dW1bMl0gLSBub0xlbnNGcnVzdHVtWzBdO1xyXG4gICAgbm9MZW5zRnJ1c3R1bVswXSA9IC0odyArIG5vTGVuc0ZydXN0dW1bMF0pO1xyXG4gICAgbm9MZW5zRnJ1c3R1bVsyXSA9IHcgLSBub0xlbnNGcnVzdHVtWzJdO1xyXG4gICAgdmlld3BvcnQueCA9IDEgLSAodmlld3BvcnQueCArIHZpZXdwb3J0LndpZHRoKTtcclxuICB9XHJcbiAgcmV0dXJuIHZlcnRpY2VzO1xyXG59XHJcblxyXG4vKipcclxuICogQnVpbGQgdGhlIGRpc3RvcnRpb24gbWVzaCBpbmRpY2VzLlxyXG4gKiBCYXNlZCBvbiBjb2RlIGZyb20gdGhlIFVuaXR5IGNhcmRib2FyZCBwbHVnaW4uXHJcbiAqL1xyXG5DYXJkYm9hcmREaXN0b3J0ZXIucHJvdG90eXBlLmNvbXB1dGVNZXNoSW5kaWNlc18gPSBmdW5jdGlvbih3aWR0aCwgaGVpZ2h0KSB7XHJcbiAgdmFyIGluZGljZXMgPSBuZXcgVWludDE2QXJyYXkoMiAqICh3aWR0aCAtIDEpICogKGhlaWdodCAtIDEpICogNik7XHJcbiAgdmFyIGhhbGZ3aWR0aCA9IHdpZHRoIC8gMjtcclxuICB2YXIgaGFsZmhlaWdodCA9IGhlaWdodCAvIDI7XHJcbiAgdmFyIHZpZHggPSAwO1xyXG4gIHZhciBpaWR4ID0gMDtcclxuICBmb3IgKHZhciBlID0gMDsgZSA8IDI7IGUrKykge1xyXG4gICAgZm9yICh2YXIgaiA9IDA7IGogPCBoZWlnaHQ7IGorKykge1xyXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHdpZHRoOyBpKyssIHZpZHgrKykge1xyXG4gICAgICAgIGlmIChpID09IDAgfHwgaiA9PSAwKVxyXG4gICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgLy8gQnVpbGQgYSBxdWFkLiAgTG93ZXIgcmlnaHQgYW5kIHVwcGVyIGxlZnQgcXVhZHJhbnRzIGhhdmUgcXVhZHMgd2l0aFxyXG4gICAgICAgIC8vIHRoZSB0cmlhbmdsZSBkaWFnb25hbCBmbGlwcGVkIHRvIGdldCB0aGUgdmlnbmV0dGUgdG8gaW50ZXJwb2xhdGVcclxuICAgICAgICAvLyBjb3JyZWN0bHkuXHJcbiAgICAgICAgaWYgKChpIDw9IGhhbGZ3aWR0aCkgPT0gKGogPD0gaGFsZmhlaWdodCkpIHtcclxuICAgICAgICAgIC8vIFF1YWQgZGlhZ29uYWwgbG93ZXIgbGVmdCB0byB1cHBlciByaWdodC5cclxuICAgICAgICAgIGluZGljZXNbaWlkeCsrXSA9IHZpZHg7XHJcbiAgICAgICAgICBpbmRpY2VzW2lpZHgrK10gPSB2aWR4IC0gd2lkdGggLSAxO1xyXG4gICAgICAgICAgaW5kaWNlc1tpaWR4KytdID0gdmlkeCAtIHdpZHRoO1xyXG4gICAgICAgICAgaW5kaWNlc1tpaWR4KytdID0gdmlkeCAtIHdpZHRoIC0gMTtcclxuICAgICAgICAgIGluZGljZXNbaWlkeCsrXSA9IHZpZHg7XHJcbiAgICAgICAgICBpbmRpY2VzW2lpZHgrK10gPSB2aWR4IC0gMTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgLy8gUXVhZCBkaWFnb25hbCB1cHBlciBsZWZ0IHRvIGxvd2VyIHJpZ2h0LlxyXG4gICAgICAgICAgaW5kaWNlc1tpaWR4KytdID0gdmlkeCAtIDE7XHJcbiAgICAgICAgICBpbmRpY2VzW2lpZHgrK10gPSB2aWR4IC0gd2lkdGg7XHJcbiAgICAgICAgICBpbmRpY2VzW2lpZHgrK10gPSB2aWR4O1xyXG4gICAgICAgICAgaW5kaWNlc1tpaWR4KytdID0gdmlkeCAtIHdpZHRoO1xyXG4gICAgICAgICAgaW5kaWNlc1tpaWR4KytdID0gdmlkeCAtIDE7XHJcbiAgICAgICAgICBpbmRpY2VzW2lpZHgrK10gPSB2aWR4IC0gd2lkdGggLSAxO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuICByZXR1cm4gaW5kaWNlcztcclxufTtcclxuXHJcbkNhcmRib2FyZERpc3RvcnRlci5wcm90b3R5cGUuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yXyA9IGZ1bmN0aW9uKHByb3RvLCBhdHRyTmFtZSkge1xyXG4gIHZhciBkZXNjcmlwdG9yID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihwcm90bywgYXR0ck5hbWUpO1xyXG4gIC8vIEluIHNvbWUgY2FzZXMgKGFoZW0uLi4gU2FmYXJpKSwgdGhlIGRlc2NyaXB0b3IgcmV0dXJucyB1bmRlZmluZWQgZ2V0IGFuZFxyXG4gIC8vIHNldCBmaWVsZHMuIEluIHRoaXMgY2FzZSwgd2UgbmVlZCB0byBjcmVhdGUgYSBzeW50aGV0aWMgcHJvcGVydHlcclxuICAvLyBkZXNjcmlwdG9yLiBUaGlzIHdvcmtzIGFyb3VuZCBzb21lIG9mIHRoZSBpc3N1ZXMgaW5cclxuICAvLyBodHRwczovL2dpdGh1Yi5jb20vYm9yaXNtdXMvd2VidnItcG9seWZpbGwvaXNzdWVzLzQ2XHJcbiAgaWYgKGRlc2NyaXB0b3IuZ2V0ID09PSB1bmRlZmluZWQgfHwgZGVzY3JpcHRvci5zZXQgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlO1xyXG4gICAgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gdHJ1ZTtcclxuICAgIGRlc2NyaXB0b3IuZ2V0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLmdldEF0dHJpYnV0ZShhdHRyTmFtZSk7XHJcbiAgICB9O1xyXG4gICAgZGVzY3JpcHRvci5zZXQgPSBmdW5jdGlvbih2YWwpIHtcclxuICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoYXR0ck5hbWUsIHZhbCk7XHJcbiAgICB9O1xyXG4gIH1cclxuICByZXR1cm4gZGVzY3JpcHRvcjtcclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gQ2FyZGJvYXJkRGlzdG9ydGVyO1xyXG5cclxufSx7XCIuL2NhcmRib2FyZC11aS5qc1wiOjQsXCIuL2RlcHMvd2dsdS1wcmVzZXJ2ZS1zdGF0ZS5qc1wiOjYsXCIuL3V0aWwuanNcIjoyMn1dLDQ6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xyXG4vKlxyXG4gKiBDb3B5cmlnaHQgMjAxNiBHb29nbGUgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcblxyXG52YXIgVXRpbCA9IF9kZXJlcV8oJy4vdXRpbC5qcycpO1xyXG52YXIgV0dMVVByZXNlcnZlR0xTdGF0ZSA9IF9kZXJlcV8oJy4vZGVwcy93Z2x1LXByZXNlcnZlLXN0YXRlLmpzJyk7XHJcblxyXG52YXIgdWlWUyA9IFtcclxuICAnYXR0cmlidXRlIHZlYzIgcG9zaXRpb247JyxcclxuXHJcbiAgJ3VuaWZvcm0gbWF0NCBwcm9qZWN0aW9uTWF0OycsXHJcblxyXG4gICd2b2lkIG1haW4oKSB7JyxcclxuICAnICBnbF9Qb3NpdGlvbiA9IHByb2plY3Rpb25NYXQgKiB2ZWM0KCBwb3NpdGlvbiwgLTEuMCwgMS4wICk7JyxcclxuICAnfScsXHJcbl0uam9pbignXFxuJyk7XHJcblxyXG52YXIgdWlGUyA9IFtcclxuICAncHJlY2lzaW9uIG1lZGl1bXAgZmxvYXQ7JyxcclxuXHJcbiAgJ3VuaWZvcm0gdmVjNCBjb2xvcjsnLFxyXG5cclxuICAndm9pZCBtYWluKCkgeycsXHJcbiAgJyAgZ2xfRnJhZ0NvbG9yID0gY29sb3I7JyxcclxuICAnfScsXHJcbl0uam9pbignXFxuJyk7XHJcblxyXG52YXIgREVHMlJBRCA9IE1hdGguUEkvMTgwLjA7XHJcblxyXG4vLyBUaGUgZ2VhciBoYXMgNiBpZGVudGljYWwgc2VjdGlvbnMsIGVhY2ggc3Bhbm5pbmcgNjAgZGVncmVlcy5cclxudmFyIGtBbmdsZVBlckdlYXJTZWN0aW9uID0gNjA7XHJcblxyXG4vLyBIYWxmLWFuZ2xlIG9mIHRoZSBzcGFuIG9mIHRoZSBvdXRlciByaW0uXHJcbnZhciBrT3V0ZXJSaW1FbmRBbmdsZSA9IDEyO1xyXG5cclxuLy8gQW5nbGUgYmV0d2VlbiB0aGUgbWlkZGxlIG9mIHRoZSBvdXRlciByaW0gYW5kIHRoZSBzdGFydCBvZiB0aGUgaW5uZXIgcmltLlxyXG52YXIga0lubmVyUmltQmVnaW5BbmdsZSA9IDIwO1xyXG5cclxuLy8gRGlzdGFuY2UgZnJvbSBjZW50ZXIgdG8gb3V0ZXIgcmltLCBub3JtYWxpemVkIHNvIHRoYXQgdGhlIGVudGlyZSBtb2RlbFxyXG4vLyBmaXRzIGluIGEgWy0xLCAxXSB4IFstMSwgMV0gc3F1YXJlLlxyXG52YXIga091dGVyUmFkaXVzID0gMTtcclxuXHJcbi8vIERpc3RhbmNlIGZyb20gY2VudGVyIHRvIGRlcHJlc3NlZCByaW0sIGluIG1vZGVsIHVuaXRzLlxyXG52YXIga01pZGRsZVJhZGl1cyA9IDAuNzU7XHJcblxyXG4vLyBSYWRpdXMgb2YgdGhlIGlubmVyIGhvbGxvdyBjaXJjbGUsIGluIG1vZGVsIHVuaXRzLlxyXG52YXIga0lubmVyUmFkaXVzID0gMC4zMTI1O1xyXG5cclxuLy8gQ2VudGVyIGxpbmUgdGhpY2tuZXNzIGluIERQLlxyXG52YXIga0NlbnRlckxpbmVUaGlja25lc3NEcCA9IDQ7XHJcblxyXG4vLyBCdXR0b24gd2lkdGggaW4gRFAuXHJcbnZhciBrQnV0dG9uV2lkdGhEcCA9IDI4O1xyXG5cclxuLy8gRmFjdG9yIHRvIHNjYWxlIHRoZSB0b3VjaCBhcmVhIHRoYXQgcmVzcG9uZHMgdG8gdGhlIHRvdWNoLlxyXG52YXIga1RvdWNoU2xvcEZhY3RvciA9IDEuNTtcclxuXHJcbnZhciBBbmdsZXMgPSBbXHJcbiAgMCwga091dGVyUmltRW5kQW5nbGUsIGtJbm5lclJpbUJlZ2luQW5nbGUsXHJcbiAga0FuZ2xlUGVyR2VhclNlY3Rpb24gLSBrSW5uZXJSaW1CZWdpbkFuZ2xlLFxyXG4gIGtBbmdsZVBlckdlYXJTZWN0aW9uIC0ga091dGVyUmltRW5kQW5nbGVcclxuXTtcclxuXHJcbi8qKlxyXG4gKiBSZW5kZXJzIHRoZSBhbGlnbm1lbnQgbGluZSBhbmQgXCJvcHRpb25zXCIgZ2Vhci4gSXQgaXMgYXNzdW1lZCB0aGF0IHRoZSBjYW52YXNcclxuICogdGhpcyBpcyByZW5kZXJlZCBpbnRvIGNvdmVycyB0aGUgZW50aXJlIHNjcmVlbiAob3IgY2xvc2UgdG8gaXQuKVxyXG4gKi9cclxuZnVuY3Rpb24gQ2FyZGJvYXJkVUkoZ2wpIHtcclxuICB0aGlzLmdsID0gZ2w7XHJcblxyXG4gIHRoaXMuYXR0cmlicyA9IHtcclxuICAgIHBvc2l0aW9uOiAwXHJcbiAgfTtcclxuICB0aGlzLnByb2dyYW0gPSBVdGlsLmxpbmtQcm9ncmFtKGdsLCB1aVZTLCB1aUZTLCB0aGlzLmF0dHJpYnMpO1xyXG4gIHRoaXMudW5pZm9ybXMgPSBVdGlsLmdldFByb2dyYW1Vbmlmb3JtcyhnbCwgdGhpcy5wcm9ncmFtKTtcclxuXHJcbiAgdGhpcy52ZXJ0ZXhCdWZmZXIgPSBnbC5jcmVhdGVCdWZmZXIoKTtcclxuICB0aGlzLmdlYXJPZmZzZXQgPSAwO1xyXG4gIHRoaXMuZ2VhclZlcnRleENvdW50ID0gMDtcclxuICB0aGlzLmFycm93T2Zmc2V0ID0gMDtcclxuICB0aGlzLmFycm93VmVydGV4Q291bnQgPSAwO1xyXG5cclxuICB0aGlzLnByb2pNYXQgPSBuZXcgRmxvYXQzMkFycmF5KDE2KTtcclxuXHJcbiAgdGhpcy5saXN0ZW5lciA9IG51bGw7XHJcblxyXG4gIHRoaXMub25SZXNpemUoKTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBUZWFycyBkb3duIGFsbCB0aGUgcmVzb3VyY2VzIGNyZWF0ZWQgYnkgdGhlIFVJIHJlbmRlcmVyLlxyXG4gKi9cclxuQ2FyZGJvYXJkVUkucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbigpIHtcclxuICB2YXIgZ2wgPSB0aGlzLmdsO1xyXG5cclxuICBpZiAodGhpcy5saXN0ZW5lcikge1xyXG4gICAgZ2wuY2FudmFzLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5saXN0ZW5lciwgZmFsc2UpO1xyXG4gIH1cclxuXHJcbiAgZ2wuZGVsZXRlUHJvZ3JhbSh0aGlzLnByb2dyYW0pO1xyXG4gIGdsLmRlbGV0ZUJ1ZmZlcih0aGlzLnZlcnRleEJ1ZmZlcik7XHJcbn07XHJcblxyXG4vKipcclxuICogQWRkcyBhIGxpc3RlbmVyIHRvIGNsaWNrcyBvbiB0aGUgZ2VhciBhbmQgYmFjayBpY29uc1xyXG4gKi9cclxuQ2FyZGJvYXJkVUkucHJvdG90eXBlLmxpc3RlbiA9IGZ1bmN0aW9uKG9wdGlvbnNDYWxsYmFjaywgYmFja0NhbGxiYWNrKSB7XHJcbiAgdmFyIGNhbnZhcyA9IHRoaXMuZ2wuY2FudmFzO1xyXG4gIHRoaXMubGlzdGVuZXIgPSBmdW5jdGlvbihldmVudCkge1xyXG4gICAgdmFyIG1pZGxpbmUgPSBjYW52YXMuY2xpZW50V2lkdGggLyAyO1xyXG4gICAgdmFyIGJ1dHRvblNpemUgPSBrQnV0dG9uV2lkdGhEcCAqIGtUb3VjaFNsb3BGYWN0b3I7XHJcbiAgICAvLyBDaGVjayB0byBzZWUgaWYgdGhlIHVzZXIgY2xpY2tlZCBvbiAob3IgYXJvdW5kKSB0aGUgZ2VhciBpY29uXHJcbiAgICBpZiAoZXZlbnQuY2xpZW50WCA+IG1pZGxpbmUgLSBidXR0b25TaXplICYmXHJcbiAgICAgICAgZXZlbnQuY2xpZW50WCA8IG1pZGxpbmUgKyBidXR0b25TaXplICYmXHJcbiAgICAgICAgZXZlbnQuY2xpZW50WSA+IGNhbnZhcy5jbGllbnRIZWlnaHQgLSBidXR0b25TaXplKSB7XHJcbiAgICAgIG9wdGlvbnNDYWxsYmFjayhldmVudCk7XHJcbiAgICB9XHJcbiAgICAvLyBDaGVjayB0byBzZWUgaWYgdGhlIHVzZXIgY2xpY2tlZCBvbiAob3IgYXJvdW5kKSB0aGUgYmFjayBpY29uXHJcbiAgICBlbHNlIGlmIChldmVudC5jbGllbnRYIDwgYnV0dG9uU2l6ZSAmJiBldmVudC5jbGllbnRZIDwgYnV0dG9uU2l6ZSkge1xyXG4gICAgICBiYWNrQ2FsbGJhY2soZXZlbnQpO1xyXG4gICAgfVxyXG4gIH07XHJcbiAgY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5saXN0ZW5lciwgZmFsc2UpO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIEJ1aWxkcyB0aGUgVUkgbWVzaC5cclxuICovXHJcbkNhcmRib2FyZFVJLnByb3RvdHlwZS5vblJlc2l6ZSA9IGZ1bmN0aW9uKCkge1xyXG4gIHZhciBnbCA9IHRoaXMuZ2w7XHJcbiAgdmFyIHNlbGYgPSB0aGlzO1xyXG5cclxuICB2YXIgZ2xTdGF0ZSA9IFtcclxuICAgIGdsLkFSUkFZX0JVRkZFUl9CSU5ESU5HXHJcbiAgXTtcclxuXHJcbiAgV0dMVVByZXNlcnZlR0xTdGF0ZShnbCwgZ2xTdGF0ZSwgZnVuY3Rpb24oZ2wpIHtcclxuICAgIHZhciB2ZXJ0aWNlcyA9IFtdO1xyXG5cclxuICAgIHZhciBtaWRsaW5lID0gZ2wuZHJhd2luZ0J1ZmZlcldpZHRoIC8gMjtcclxuXHJcbiAgICAvLyBBc3N1bWVzIHlvdXIgY2FudmFzIHdpZHRoIGFuZCBoZWlnaHQgaXMgc2NhbGVkIHByb3BvcnRpb25hdGVseS5cclxuICAgIC8vIFRPRE8oc211cyk6IFRoZSBmb2xsb3dpbmcgY2F1c2VzIGJ1dHRvbnMgdG8gYmVjb21lIGh1Z2Ugb24gaU9TLCBidXQgc2VlbXNcclxuICAgIC8vIGxpa2UgdGhlIHJpZ2h0IHRoaW5nIHRvIGRvLiBGb3Igbm93LCBhZGRlZCBhIGhhY2suIEJ1dCByZWFsbHksIGludmVzdGlnYXRlIHdoeS5cclxuICAgIHZhciBkcHMgPSAoZ2wuZHJhd2luZ0J1ZmZlcldpZHRoIC8gKHNjcmVlbi53aWR0aCAqIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvKSk7XHJcbiAgICBpZiAoIVV0aWwuaXNJT1MoKSkge1xyXG4gICAgICBkcHMgKj0gd2luZG93LmRldmljZVBpeGVsUmF0aW87XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIGxpbmVXaWR0aCA9IGtDZW50ZXJMaW5lVGhpY2tuZXNzRHAgKiBkcHMgLyAyO1xyXG4gICAgdmFyIGJ1dHRvblNpemUgPSBrQnV0dG9uV2lkdGhEcCAqIGtUb3VjaFNsb3BGYWN0b3IgKiBkcHM7XHJcbiAgICB2YXIgYnV0dG9uU2NhbGUgPSBrQnV0dG9uV2lkdGhEcCAqIGRwcyAvIDI7XHJcbiAgICB2YXIgYnV0dG9uQm9yZGVyID0gKChrQnV0dG9uV2lkdGhEcCAqIGtUb3VjaFNsb3BGYWN0b3IpIC0ga0J1dHRvbldpZHRoRHApICogZHBzO1xyXG5cclxuICAgIC8vIEJ1aWxkIGNlbnRlcmxpbmVcclxuICAgIHZlcnRpY2VzLnB1c2gobWlkbGluZSAtIGxpbmVXaWR0aCwgYnV0dG9uU2l6ZSk7XHJcbiAgICB2ZXJ0aWNlcy5wdXNoKG1pZGxpbmUgLSBsaW5lV2lkdGgsIGdsLmRyYXdpbmdCdWZmZXJIZWlnaHQpO1xyXG4gICAgdmVydGljZXMucHVzaChtaWRsaW5lICsgbGluZVdpZHRoLCBidXR0b25TaXplKTtcclxuICAgIHZlcnRpY2VzLnB1c2gobWlkbGluZSArIGxpbmVXaWR0aCwgZ2wuZHJhd2luZ0J1ZmZlckhlaWdodCk7XHJcblxyXG4gICAgLy8gQnVpbGQgZ2VhclxyXG4gICAgc2VsZi5nZWFyT2Zmc2V0ID0gKHZlcnRpY2VzLmxlbmd0aCAvIDIpO1xyXG5cclxuICAgIGZ1bmN0aW9uIGFkZEdlYXJTZWdtZW50KHRoZXRhLCByKSB7XHJcbiAgICAgIHZhciBhbmdsZSA9ICg5MCAtIHRoZXRhKSAqIERFRzJSQUQ7XHJcbiAgICAgIHZhciB4ID0gTWF0aC5jb3MoYW5nbGUpO1xyXG4gICAgICB2YXIgeSA9IE1hdGguc2luKGFuZ2xlKTtcclxuICAgICAgdmVydGljZXMucHVzaChrSW5uZXJSYWRpdXMgKiB4ICogYnV0dG9uU2NhbGUgKyBtaWRsaW5lLCBrSW5uZXJSYWRpdXMgKiB5ICogYnV0dG9uU2NhbGUgKyBidXR0b25TY2FsZSk7XHJcbiAgICAgIHZlcnRpY2VzLnB1c2gociAqIHggKiBidXR0b25TY2FsZSArIG1pZGxpbmUsIHIgKiB5ICogYnV0dG9uU2NhbGUgKyBidXR0b25TY2FsZSk7XHJcbiAgICB9XHJcblxyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPD0gNjsgaSsrKSB7XHJcbiAgICAgIHZhciBzZWdtZW50VGhldGEgPSBpICoga0FuZ2xlUGVyR2VhclNlY3Rpb247XHJcblxyXG4gICAgICBhZGRHZWFyU2VnbWVudChzZWdtZW50VGhldGEsIGtPdXRlclJhZGl1cyk7XHJcbiAgICAgIGFkZEdlYXJTZWdtZW50KHNlZ21lbnRUaGV0YSArIGtPdXRlclJpbUVuZEFuZ2xlLCBrT3V0ZXJSYWRpdXMpO1xyXG4gICAgICBhZGRHZWFyU2VnbWVudChzZWdtZW50VGhldGEgKyBrSW5uZXJSaW1CZWdpbkFuZ2xlLCBrTWlkZGxlUmFkaXVzKTtcclxuICAgICAgYWRkR2VhclNlZ21lbnQoc2VnbWVudFRoZXRhICsgKGtBbmdsZVBlckdlYXJTZWN0aW9uIC0ga0lubmVyUmltQmVnaW5BbmdsZSksIGtNaWRkbGVSYWRpdXMpO1xyXG4gICAgICBhZGRHZWFyU2VnbWVudChzZWdtZW50VGhldGEgKyAoa0FuZ2xlUGVyR2VhclNlY3Rpb24gLSBrT3V0ZXJSaW1FbmRBbmdsZSksIGtPdXRlclJhZGl1cyk7XHJcbiAgICB9XHJcblxyXG4gICAgc2VsZi5nZWFyVmVydGV4Q291bnQgPSAodmVydGljZXMubGVuZ3RoIC8gMikgLSBzZWxmLmdlYXJPZmZzZXQ7XHJcblxyXG4gICAgLy8gQnVpbGQgYmFjayBhcnJvd1xyXG4gICAgc2VsZi5hcnJvd09mZnNldCA9ICh2ZXJ0aWNlcy5sZW5ndGggLyAyKTtcclxuXHJcbiAgICBmdW5jdGlvbiBhZGRBcnJvd1ZlcnRleCh4LCB5KSB7XHJcbiAgICAgIHZlcnRpY2VzLnB1c2goYnV0dG9uQm9yZGVyICsgeCwgZ2wuZHJhd2luZ0J1ZmZlckhlaWdodCAtIGJ1dHRvbkJvcmRlciAtIHkpO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBhbmdsZWRMaW5lV2lkdGggPSBsaW5lV2lkdGggLyBNYXRoLnNpbig0NSAqIERFRzJSQUQpO1xyXG5cclxuICAgIGFkZEFycm93VmVydGV4KDAsIGJ1dHRvblNjYWxlKTtcclxuICAgIGFkZEFycm93VmVydGV4KGJ1dHRvblNjYWxlLCAwKTtcclxuICAgIGFkZEFycm93VmVydGV4KGJ1dHRvblNjYWxlICsgYW5nbGVkTGluZVdpZHRoLCBhbmdsZWRMaW5lV2lkdGgpO1xyXG4gICAgYWRkQXJyb3dWZXJ0ZXgoYW5nbGVkTGluZVdpZHRoLCBidXR0b25TY2FsZSArIGFuZ2xlZExpbmVXaWR0aCk7XHJcblxyXG4gICAgYWRkQXJyb3dWZXJ0ZXgoYW5nbGVkTGluZVdpZHRoLCBidXR0b25TY2FsZSAtIGFuZ2xlZExpbmVXaWR0aCk7XHJcbiAgICBhZGRBcnJvd1ZlcnRleCgwLCBidXR0b25TY2FsZSk7XHJcbiAgICBhZGRBcnJvd1ZlcnRleChidXR0b25TY2FsZSwgYnV0dG9uU2NhbGUgKiAyKTtcclxuICAgIGFkZEFycm93VmVydGV4KGJ1dHRvblNjYWxlICsgYW5nbGVkTGluZVdpZHRoLCAoYnV0dG9uU2NhbGUgKiAyKSAtIGFuZ2xlZExpbmVXaWR0aCk7XHJcblxyXG4gICAgYWRkQXJyb3dWZXJ0ZXgoYW5nbGVkTGluZVdpZHRoLCBidXR0b25TY2FsZSAtIGFuZ2xlZExpbmVXaWR0aCk7XHJcbiAgICBhZGRBcnJvd1ZlcnRleCgwLCBidXR0b25TY2FsZSk7XHJcblxyXG4gICAgYWRkQXJyb3dWZXJ0ZXgoYW5nbGVkTGluZVdpZHRoLCBidXR0b25TY2FsZSAtIGxpbmVXaWR0aCk7XHJcbiAgICBhZGRBcnJvd1ZlcnRleChrQnV0dG9uV2lkdGhEcCAqIGRwcywgYnV0dG9uU2NhbGUgLSBsaW5lV2lkdGgpO1xyXG4gICAgYWRkQXJyb3dWZXJ0ZXgoYW5nbGVkTGluZVdpZHRoLCBidXR0b25TY2FsZSArIGxpbmVXaWR0aCk7XHJcbiAgICBhZGRBcnJvd1ZlcnRleChrQnV0dG9uV2lkdGhEcCAqIGRwcywgYnV0dG9uU2NhbGUgKyBsaW5lV2lkdGgpO1xyXG5cclxuICAgIHNlbGYuYXJyb3dWZXJ0ZXhDb3VudCA9ICh2ZXJ0aWNlcy5sZW5ndGggLyAyKSAtIHNlbGYuYXJyb3dPZmZzZXQ7XHJcblxyXG4gICAgLy8gQnVmZmVyIGRhdGFcclxuICAgIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCBzZWxmLnZlcnRleEJ1ZmZlcik7XHJcbiAgICBnbC5idWZmZXJEYXRhKGdsLkFSUkFZX0JVRkZFUiwgbmV3IEZsb2F0MzJBcnJheSh2ZXJ0aWNlcyksIGdsLlNUQVRJQ19EUkFXKTtcclxuICB9KTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBQZXJmb3JtcyBkaXN0b3J0aW9uIHBhc3Mgb24gdGhlIGluamVjdGVkIGJhY2tidWZmZXIsIHJlbmRlcmluZyBpdCB0byB0aGUgcmVhbFxyXG4gKiBiYWNrYnVmZmVyLlxyXG4gKi9cclxuQ2FyZGJvYXJkVUkucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uKCkge1xyXG4gIHZhciBnbCA9IHRoaXMuZ2w7XHJcbiAgdmFyIHNlbGYgPSB0aGlzO1xyXG5cclxuICB2YXIgZ2xTdGF0ZSA9IFtcclxuICAgIGdsLkNVTExfRkFDRSxcclxuICAgIGdsLkRFUFRIX1RFU1QsXHJcbiAgICBnbC5CTEVORCxcclxuICAgIGdsLlNDSVNTT1JfVEVTVCxcclxuICAgIGdsLlNURU5DSUxfVEVTVCxcclxuICAgIGdsLkNPTE9SX1dSSVRFTUFTSyxcclxuICAgIGdsLlZJRVdQT1JULFxyXG5cclxuICAgIGdsLkNVUlJFTlRfUFJPR1JBTSxcclxuICAgIGdsLkFSUkFZX0JVRkZFUl9CSU5ESU5HXHJcbiAgXTtcclxuXHJcbiAgV0dMVVByZXNlcnZlR0xTdGF0ZShnbCwgZ2xTdGF0ZSwgZnVuY3Rpb24oZ2wpIHtcclxuICAgIC8vIE1ha2Ugc3VyZSB0aGUgR0wgc3RhdGUgaXMgaW4gYSBnb29kIHBsYWNlXHJcbiAgICBnbC5kaXNhYmxlKGdsLkNVTExfRkFDRSk7XHJcbiAgICBnbC5kaXNhYmxlKGdsLkRFUFRIX1RFU1QpO1xyXG4gICAgZ2wuZGlzYWJsZShnbC5CTEVORCk7XHJcbiAgICBnbC5kaXNhYmxlKGdsLlNDSVNTT1JfVEVTVCk7XHJcbiAgICBnbC5kaXNhYmxlKGdsLlNURU5DSUxfVEVTVCk7XHJcbiAgICBnbC5jb2xvck1hc2sodHJ1ZSwgdHJ1ZSwgdHJ1ZSwgdHJ1ZSk7XHJcbiAgICBnbC52aWV3cG9ydCgwLCAwLCBnbC5kcmF3aW5nQnVmZmVyV2lkdGgsIGdsLmRyYXdpbmdCdWZmZXJIZWlnaHQpO1xyXG5cclxuICAgIHNlbGYucmVuZGVyTm9TdGF0ZSgpO1xyXG4gIH0pO1xyXG59O1xyXG5cclxuQ2FyZGJvYXJkVUkucHJvdG90eXBlLnJlbmRlck5vU3RhdGUgPSBmdW5jdGlvbigpIHtcclxuICB2YXIgZ2wgPSB0aGlzLmdsO1xyXG5cclxuICAvLyBCaW5kIGRpc3RvcnRpb24gcHJvZ3JhbSBhbmQgbWVzaFxyXG4gIGdsLnVzZVByb2dyYW0odGhpcy5wcm9ncmFtKTtcclxuXHJcbiAgZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIHRoaXMudmVydGV4QnVmZmVyKTtcclxuICBnbC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheSh0aGlzLmF0dHJpYnMucG9zaXRpb24pO1xyXG4gIGdsLnZlcnRleEF0dHJpYlBvaW50ZXIodGhpcy5hdHRyaWJzLnBvc2l0aW9uLCAyLCBnbC5GTE9BVCwgZmFsc2UsIDgsIDApO1xyXG5cclxuICBnbC51bmlmb3JtNGYodGhpcy51bmlmb3Jtcy5jb2xvciwgMS4wLCAxLjAsIDEuMCwgMS4wKTtcclxuXHJcbiAgVXRpbC5vcnRob01hdHJpeCh0aGlzLnByb2pNYXQsIDAsIGdsLmRyYXdpbmdCdWZmZXJXaWR0aCwgMCwgZ2wuZHJhd2luZ0J1ZmZlckhlaWdodCwgMC4xLCAxMDI0LjApO1xyXG4gIGdsLnVuaWZvcm1NYXRyaXg0ZnYodGhpcy51bmlmb3Jtcy5wcm9qZWN0aW9uTWF0LCBmYWxzZSwgdGhpcy5wcm9qTWF0KTtcclxuXHJcbiAgLy8gRHJhd3MgVUkgZWxlbWVudFxyXG4gIGdsLmRyYXdBcnJheXMoZ2wuVFJJQU5HTEVfU1RSSVAsIDAsIDQpO1xyXG4gIGdsLmRyYXdBcnJheXMoZ2wuVFJJQU5HTEVfU1RSSVAsIHRoaXMuZ2Vhck9mZnNldCwgdGhpcy5nZWFyVmVydGV4Q291bnQpO1xyXG4gIGdsLmRyYXdBcnJheXMoZ2wuVFJJQU5HTEVfU1RSSVAsIHRoaXMuYXJyb3dPZmZzZXQsIHRoaXMuYXJyb3dWZXJ0ZXhDb3VudCk7XHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IENhcmRib2FyZFVJO1xyXG5cclxufSx7XCIuL2RlcHMvd2dsdS1wcmVzZXJ2ZS1zdGF0ZS5qc1wiOjYsXCIuL3V0aWwuanNcIjoyMn1dLDU6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xyXG4vKlxyXG4gKiBDb3B5cmlnaHQgMjAxNiBHb29nbGUgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcblxyXG52YXIgQ2FyZGJvYXJkRGlzdG9ydGVyID0gX2RlcmVxXygnLi9jYXJkYm9hcmQtZGlzdG9ydGVyLmpzJyk7XHJcbnZhciBDYXJkYm9hcmRVSSA9IF9kZXJlcV8oJy4vY2FyZGJvYXJkLXVpLmpzJyk7XHJcbnZhciBEZXZpY2VJbmZvID0gX2RlcmVxXygnLi9kZXZpY2UtaW5mby5qcycpO1xyXG52YXIgRHBkYiA9IF9kZXJlcV8oJy4vZHBkYi9kcGRiLmpzJyk7XHJcbnZhciBGdXNpb25Qb3NlU2Vuc29yID0gX2RlcmVxXygnLi9zZW5zb3ItZnVzaW9uL2Z1c2lvbi1wb3NlLXNlbnNvci5qcycpO1xyXG52YXIgUm90YXRlSW5zdHJ1Y3Rpb25zID0gX2RlcmVxXygnLi9yb3RhdGUtaW5zdHJ1Y3Rpb25zLmpzJyk7XHJcbnZhciBWaWV3ZXJTZWxlY3RvciA9IF9kZXJlcV8oJy4vdmlld2VyLXNlbGVjdG9yLmpzJyk7XHJcbnZhciBWUkRpc3BsYXkgPSBfZGVyZXFfKCcuL2Jhc2UuanMnKS5WUkRpc3BsYXk7XHJcbnZhciBVdGlsID0gX2RlcmVxXygnLi91dGlsLmpzJyk7XHJcblxyXG52YXIgRXllID0ge1xyXG4gIExFRlQ6ICdsZWZ0JyxcclxuICBSSUdIVDogJ3JpZ2h0J1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIFZSRGlzcGxheSBiYXNlZCBvbiBtb2JpbGUgZGV2aWNlIHBhcmFtZXRlcnMgYW5kIERldmljZU1vdGlvbiBBUElzLlxyXG4gKi9cclxuZnVuY3Rpb24gQ2FyZGJvYXJkVlJEaXNwbGF5KCkge1xyXG4gIHRoaXMuZGlzcGxheU5hbWUgPSAnQ2FyZGJvYXJkIFZSRGlzcGxheSAod2VidnItcG9seWZpbGwpJztcclxuXHJcbiAgdGhpcy5jYXBhYmlsaXRpZXMuaGFzT3JpZW50YXRpb24gPSB0cnVlO1xyXG4gIHRoaXMuY2FwYWJpbGl0aWVzLmNhblByZXNlbnQgPSB0cnVlO1xyXG5cclxuICAvLyBcIlByaXZhdGVcIiBtZW1iZXJzLlxyXG4gIHRoaXMuYnVmZmVyU2NhbGVfID0gV2ViVlJDb25maWcuQlVGRkVSX1NDQUxFO1xyXG4gIHRoaXMucG9zZVNlbnNvcl8gPSBuZXcgRnVzaW9uUG9zZVNlbnNvcigpO1xyXG4gIHRoaXMuZGlzdG9ydGVyXyA9IG51bGw7XHJcbiAgdGhpcy5jYXJkYm9hcmRVSV8gPSBudWxsO1xyXG5cclxuICB0aGlzLmRwZGJfID0gbmV3IERwZGIodHJ1ZSwgdGhpcy5vbkRldmljZVBhcmFtc1VwZGF0ZWRfLmJpbmQodGhpcykpO1xyXG4gIHRoaXMuZGV2aWNlSW5mb18gPSBuZXcgRGV2aWNlSW5mbyh0aGlzLmRwZGJfLmdldERldmljZVBhcmFtcygpKTtcclxuXHJcbiAgdGhpcy52aWV3ZXJTZWxlY3Rvcl8gPSBuZXcgVmlld2VyU2VsZWN0b3IoKTtcclxuICB0aGlzLnZpZXdlclNlbGVjdG9yXy5vbignY2hhbmdlJywgdGhpcy5vblZpZXdlckNoYW5nZWRfLmJpbmQodGhpcykpO1xyXG5cclxuICAvLyBTZXQgdGhlIGNvcnJlY3QgaW5pdGlhbCB2aWV3ZXIuXHJcbiAgdGhpcy5kZXZpY2VJbmZvXy5zZXRWaWV3ZXIodGhpcy52aWV3ZXJTZWxlY3Rvcl8uZ2V0Q3VycmVudFZpZXdlcigpKTtcclxuXHJcbiAgaWYgKCFXZWJWUkNvbmZpZy5ST1RBVEVfSU5TVFJVQ1RJT05TX0RJU0FCTEVEKSB7XHJcbiAgICB0aGlzLnJvdGF0ZUluc3RydWN0aW9uc18gPSBuZXcgUm90YXRlSW5zdHJ1Y3Rpb25zKCk7XHJcbiAgfVxyXG5cclxuICBpZiAoVXRpbC5pc0lPUygpKSB7XHJcbiAgICAvLyBMaXN0ZW4gZm9yIHJlc2l6ZSBldmVudHMgdG8gd29ya2Fyb3VuZCB0aGlzIGF3ZnVsIFNhZmFyaSBidWcuXHJcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy5vblJlc2l6ZV8uYmluZCh0aGlzKSk7XHJcbiAgfVxyXG59XHJcbkNhcmRib2FyZFZSRGlzcGxheS5wcm90b3R5cGUgPSBuZXcgVlJEaXNwbGF5KCk7XHJcblxyXG5DYXJkYm9hcmRWUkRpc3BsYXkucHJvdG90eXBlLmdldEltbWVkaWF0ZVBvc2UgPSBmdW5jdGlvbigpIHtcclxuICByZXR1cm4ge1xyXG4gICAgcG9zaXRpb246IHRoaXMucG9zZVNlbnNvcl8uZ2V0UG9zaXRpb24oKSxcclxuICAgIG9yaWVudGF0aW9uOiB0aGlzLnBvc2VTZW5zb3JfLmdldE9yaWVudGF0aW9uKCksXHJcbiAgICBsaW5lYXJWZWxvY2l0eTogbnVsbCxcclxuICAgIGxpbmVhckFjY2VsZXJhdGlvbjogbnVsbCxcclxuICAgIGFuZ3VsYXJWZWxvY2l0eTogbnVsbCxcclxuICAgIGFuZ3VsYXJBY2NlbGVyYXRpb246IG51bGxcclxuICB9O1xyXG59O1xyXG5cclxuQ2FyZGJvYXJkVlJEaXNwbGF5LnByb3RvdHlwZS5yZXNldFBvc2UgPSBmdW5jdGlvbigpIHtcclxuICB0aGlzLnBvc2VTZW5zb3JfLnJlc2V0UG9zZSgpO1xyXG59O1xyXG5cclxuQ2FyZGJvYXJkVlJEaXNwbGF5LnByb3RvdHlwZS5nZXRFeWVQYXJhbWV0ZXJzID0gZnVuY3Rpb24od2hpY2hFeWUpIHtcclxuICB2YXIgb2Zmc2V0ID0gW3RoaXMuZGV2aWNlSW5mb18udmlld2VyLmludGVyTGVuc0Rpc3RhbmNlICogMC41LCAwLjAsIDAuMF07XHJcbiAgdmFyIGZpZWxkT2ZWaWV3O1xyXG5cclxuICAvLyBUT0RPOiBGb1YgY2FuIGJlIGEgbGl0dGxlIGV4cGVuc2l2ZSB0byBjb21wdXRlLiBDYWNoZSB3aGVuIGRldmljZSBwYXJhbXMgY2hhbmdlLlxyXG4gIGlmICh3aGljaEV5ZSA9PSBFeWUuTEVGVCkge1xyXG4gICAgb2Zmc2V0WzBdICo9IC0xLjA7XHJcbiAgICBmaWVsZE9mVmlldyA9IHRoaXMuZGV2aWNlSW5mb18uZ2V0RmllbGRPZlZpZXdMZWZ0RXllKCk7XHJcbiAgfSBlbHNlIGlmICh3aGljaEV5ZSA9PSBFeWUuUklHSFQpIHtcclxuICAgIGZpZWxkT2ZWaWV3ID0gdGhpcy5kZXZpY2VJbmZvXy5nZXRGaWVsZE9mVmlld1JpZ2h0RXllKCk7XHJcbiAgfSBlbHNlIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0ludmFsaWQgZXllIHByb3ZpZGVkOiAlcycsIHdoaWNoRXllKTtcclxuICAgIHJldHVybiBudWxsO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIGZpZWxkT2ZWaWV3OiBmaWVsZE9mVmlldyxcclxuICAgIG9mZnNldDogb2Zmc2V0LFxyXG4gICAgLy8gVE9ETzogU2hvdWxkIGJlIGFibGUgdG8gcHJvdmlkZSBiZXR0ZXIgdmFsdWVzIHRoYW4gdGhlc2UuXHJcbiAgICByZW5kZXJXaWR0aDogdGhpcy5kZXZpY2VJbmZvXy5kZXZpY2Uud2lkdGggKiAwLjUgKiB0aGlzLmJ1ZmZlclNjYWxlXyxcclxuICAgIHJlbmRlckhlaWdodDogdGhpcy5kZXZpY2VJbmZvXy5kZXZpY2UuaGVpZ2h0ICogdGhpcy5idWZmZXJTY2FsZV8sXHJcbiAgfTtcclxufTtcclxuXHJcbkNhcmRib2FyZFZSRGlzcGxheS5wcm90b3R5cGUub25EZXZpY2VQYXJhbXNVcGRhdGVkXyA9IGZ1bmN0aW9uKG5ld1BhcmFtcykge1xyXG4gIGNvbnNvbGUubG9nKCdEUERCIHJlcG9ydGVkIHRoYXQgZGV2aWNlIHBhcmFtcyB3ZXJlIHVwZGF0ZWQuJyk7XHJcbiAgdGhpcy5kZXZpY2VJbmZvXy51cGRhdGVEZXZpY2VQYXJhbXMobmV3UGFyYW1zKTtcclxuXHJcbiAgaWYgKHRoaXMuZGlzdG9ydGVyXykge1xyXG4gICAgdGhpcy5kaXN0b3J0ZXJfLnVwZGF0ZURldmljZUluZm8odGhpcy5kZXZpY2VJbmZvXyk7XHJcbiAgfVxyXG59O1xyXG5cclxuQ2FyZGJvYXJkVlJEaXNwbGF5LnByb3RvdHlwZS51cGRhdGVCb3VuZHNfID0gZnVuY3Rpb24gKCkge1xyXG4gIGlmICh0aGlzLmxheWVyXyAmJiB0aGlzLmRpc3RvcnRlcl8gJiYgKHRoaXMubGF5ZXJfLmxlZnRCb3VuZHMgfHwgdGhpcy5sYXllcl8ucmlnaHRCb3VuZHMpKSB7XHJcbiAgICB0aGlzLmRpc3RvcnRlcl8uc2V0VGV4dHVyZUJvdW5kcyh0aGlzLmxheWVyXy5sZWZ0Qm91bmRzLCB0aGlzLmxheWVyXy5yaWdodEJvdW5kcyk7XHJcbiAgfVxyXG59O1xyXG5cclxuQ2FyZGJvYXJkVlJEaXNwbGF5LnByb3RvdHlwZS5iZWdpblByZXNlbnRfID0gZnVuY3Rpb24oKSB7XHJcbiAgdmFyIGdsID0gdGhpcy5sYXllcl8uc291cmNlLmdldENvbnRleHQoJ3dlYmdsJyk7XHJcbiAgaWYgKCFnbClcclxuICAgIGdsID0gdGhpcy5sYXllcl8uc291cmNlLmdldENvbnRleHQoJ2V4cGVyaW1lbnRhbC13ZWJnbCcpO1xyXG4gIGlmICghZ2wpXHJcbiAgICBnbCA9IHRoaXMubGF5ZXJfLnNvdXJjZS5nZXRDb250ZXh0KCd3ZWJnbDInKTtcclxuXHJcbiAgaWYgKCFnbClcclxuICAgIHJldHVybjsgLy8gQ2FuJ3QgZG8gZGlzdG9ydGlvbiB3aXRob3V0IGEgV2ViR0wgY29udGV4dC5cclxuXHJcbiAgLy8gUHJvdmlkZXMgYSB3YXkgdG8gb3B0IG91dCBvZiBkaXN0b3J0aW9uXHJcbiAgaWYgKHRoaXMubGF5ZXJfLnByZWRpc3RvcnRlZCkge1xyXG4gICAgaWYgKCFXZWJWUkNvbmZpZy5DQVJEQk9BUkRfVUlfRElTQUJMRUQpIHtcclxuICAgICAgZ2wuY2FudmFzLndpZHRoID0gVXRpbC5nZXRTY3JlZW5XaWR0aCgpICogdGhpcy5idWZmZXJTY2FsZV87XHJcbiAgICAgIGdsLmNhbnZhcy5oZWlnaHQgPSBVdGlsLmdldFNjcmVlbkhlaWdodCgpICogdGhpcy5idWZmZXJTY2FsZV87XHJcbiAgICAgIHRoaXMuY2FyZGJvYXJkVUlfID0gbmV3IENhcmRib2FyZFVJKGdsKTtcclxuICAgIH1cclxuICB9IGVsc2Uge1xyXG4gICAgLy8gQ3JlYXRlIGEgbmV3IGRpc3RvcnRlciBmb3IgdGhlIHRhcmdldCBjb250ZXh0XHJcbiAgICB0aGlzLmRpc3RvcnRlcl8gPSBuZXcgQ2FyZGJvYXJkRGlzdG9ydGVyKGdsKTtcclxuICAgIHRoaXMuZGlzdG9ydGVyXy51cGRhdGVEZXZpY2VJbmZvKHRoaXMuZGV2aWNlSW5mb18pO1xyXG4gICAgdGhpcy5jYXJkYm9hcmRVSV8gPSB0aGlzLmRpc3RvcnRlcl8uY2FyZGJvYXJkVUk7XHJcbiAgfVxyXG5cclxuICBpZiAodGhpcy5jYXJkYm9hcmRVSV8pIHtcclxuICAgIHRoaXMuY2FyZGJvYXJkVUlfLmxpc3RlbihmdW5jdGlvbihlKSB7XHJcbiAgICAgIC8vIE9wdGlvbnMgY2xpY2tlZC5cclxuICAgICAgdGhpcy52aWV3ZXJTZWxlY3Rvcl8uc2hvdyh0aGlzLmxheWVyXy5zb3VyY2UucGFyZW50RWxlbWVudCk7XHJcbiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIH0uYmluZCh0aGlzKSwgZnVuY3Rpb24oZSkge1xyXG4gICAgICAvLyBCYWNrIGNsaWNrZWQuXHJcbiAgICAgIHRoaXMuZXhpdFByZXNlbnQoKTtcclxuICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfS5iaW5kKHRoaXMpKTtcclxuICB9XHJcblxyXG4gIGlmICh0aGlzLnJvdGF0ZUluc3RydWN0aW9uc18pIHtcclxuICAgIGlmIChVdGlsLmlzTGFuZHNjYXBlTW9kZSgpICYmIFV0aWwuaXNNb2JpbGUoKSkge1xyXG4gICAgICAvLyBJbiBsYW5kc2NhcGUgbW9kZSwgdGVtcG9yYXJpbHkgc2hvdyB0aGUgXCJwdXQgaW50byBDYXJkYm9hcmRcIlxyXG4gICAgICAvLyBpbnRlcnN0aXRpYWwuIE90aGVyd2lzZSwgZG8gdGhlIGRlZmF1bHQgdGhpbmcuXHJcbiAgICAgIHRoaXMucm90YXRlSW5zdHJ1Y3Rpb25zXy5zaG93VGVtcG9yYXJpbHkoMzAwMCwgdGhpcy5sYXllcl8uc291cmNlLnBhcmVudEVsZW1lbnQpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5yb3RhdGVJbnN0cnVjdGlvbnNfLnVwZGF0ZSgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8gTGlzdGVuIGZvciBvcmllbnRhdGlvbiBjaGFuZ2UgZXZlbnRzIGluIG9yZGVyIHRvIHNob3cgaW50ZXJzdGl0aWFsLlxyXG4gIHRoaXMub3JpZW50YXRpb25IYW5kbGVyID0gdGhpcy5vbk9yaWVudGF0aW9uQ2hhbmdlXy5iaW5kKHRoaXMpO1xyXG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdvcmllbnRhdGlvbmNoYW5nZScsIHRoaXMub3JpZW50YXRpb25IYW5kbGVyKTtcclxuXHJcbiAgLy8gTGlzdGVuIGZvciBwcmVzZW50IGRpc3BsYXkgY2hhbmdlIGV2ZW50cyBpbiBvcmRlciB0byB1cGRhdGUgZGlzdG9ydGVyIGRpbWVuc2lvbnNcclxuICB0aGlzLnZyZGlzcGxheXByZXNlbnRjaGFuZ2VIYW5kbGVyID0gdGhpcy51cGRhdGVCb3VuZHNfLmJpbmQodGhpcyk7XHJcbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3ZyZGlzcGxheXByZXNlbnRjaGFuZ2UnLCB0aGlzLnZyZGlzcGxheXByZXNlbnRjaGFuZ2VIYW5kbGVyKTtcclxuXHJcbiAgLy8gRmlyZSB0aGlzIGV2ZW50IGluaXRpYWxseSwgdG8gZ2l2ZSBnZW9tZXRyeS1kaXN0b3J0aW9uIGNsaWVudHMgdGhlIGNoYW5jZVxyXG4gIC8vIHRvIGRvIHNvbWV0aGluZyBjdXN0b20uXHJcbiAgdGhpcy5maXJlVlJEaXNwbGF5RGV2aWNlUGFyYW1zQ2hhbmdlXygpO1xyXG59O1xyXG5cclxuQ2FyZGJvYXJkVlJEaXNwbGF5LnByb3RvdHlwZS5lbmRQcmVzZW50XyA9IGZ1bmN0aW9uKCkge1xyXG4gIGlmICh0aGlzLmRpc3RvcnRlcl8pIHtcclxuICAgIHRoaXMuZGlzdG9ydGVyXy5kZXN0cm95KCk7XHJcbiAgICB0aGlzLmRpc3RvcnRlcl8gPSBudWxsO1xyXG4gIH1cclxuICBpZiAodGhpcy5jYXJkYm9hcmRVSV8pIHtcclxuICAgIHRoaXMuY2FyZGJvYXJkVUlfLmRlc3Ryb3koKTtcclxuICAgIHRoaXMuY2FyZGJvYXJkVUlfID0gbnVsbDtcclxuICB9XHJcblxyXG4gIGlmICh0aGlzLnJvdGF0ZUluc3RydWN0aW9uc18pIHtcclxuICAgIHRoaXMucm90YXRlSW5zdHJ1Y3Rpb25zXy5oaWRlKCk7XHJcbiAgfVxyXG4gIHRoaXMudmlld2VyU2VsZWN0b3JfLmhpZGUoKTtcclxuXHJcbiAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ29yaWVudGF0aW9uY2hhbmdlJywgdGhpcy5vcmllbnRhdGlvbkhhbmRsZXIpO1xyXG4gIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCd2cmRpc3BsYXlwcmVzZW50Y2hhbmdlJywgdGhpcy52cmRpc3BsYXlwcmVzZW50Y2hhbmdlSGFuZGxlcik7XHJcbn07XHJcblxyXG5DYXJkYm9hcmRWUkRpc3BsYXkucHJvdG90eXBlLnN1Ym1pdEZyYW1lID0gZnVuY3Rpb24ocG9zZSkge1xyXG4gIGlmICh0aGlzLmRpc3RvcnRlcl8pIHtcclxuICAgIHRoaXMuZGlzdG9ydGVyXy5zdWJtaXRGcmFtZSgpO1xyXG4gIH0gZWxzZSBpZiAodGhpcy5jYXJkYm9hcmRVSV8gJiYgdGhpcy5sYXllcl8pIHtcclxuICAgIC8vIEhhY2sgZm9yIHByZWRpc3RvcnRlZDogdHJ1ZS5cclxuICAgIHZhciBjYW52YXMgPSB0aGlzLmxheWVyXy5zb3VyY2UuZ2V0Q29udGV4dCgnd2ViZ2wnKS5jYW52YXM7XHJcbiAgICBpZiAoY2FudmFzLndpZHRoICE9IHRoaXMubGFzdFdpZHRoIHx8IGNhbnZhcy5oZWlnaHQgIT0gdGhpcy5sYXN0SGVpZ2h0KSB7XHJcbiAgICAgIHRoaXMuY2FyZGJvYXJkVUlfLm9uUmVzaXplKCk7XHJcbiAgICB9XHJcbiAgICB0aGlzLmxhc3RXaWR0aCA9IGNhbnZhcy53aWR0aDtcclxuICAgIHRoaXMubGFzdEhlaWdodCA9IGNhbnZhcy5oZWlnaHQ7XHJcblxyXG4gICAgLy8gUmVuZGVyIHRoZSBDYXJkYm9hcmQgVUkuXHJcbiAgICB0aGlzLmNhcmRib2FyZFVJXy5yZW5kZXIoKTtcclxuICB9XHJcbn07XHJcblxyXG5DYXJkYm9hcmRWUkRpc3BsYXkucHJvdG90eXBlLm9uT3JpZW50YXRpb25DaGFuZ2VfID0gZnVuY3Rpb24oZSkge1xyXG4gIGNvbnNvbGUubG9nKCdvbk9yaWVudGF0aW9uQ2hhbmdlXycpO1xyXG5cclxuICAvLyBIaWRlIHRoZSB2aWV3ZXIgc2VsZWN0b3IuXHJcbiAgdGhpcy52aWV3ZXJTZWxlY3Rvcl8uaGlkZSgpO1xyXG5cclxuICAvLyBVcGRhdGUgdGhlIHJvdGF0ZSBpbnN0cnVjdGlvbnMuXHJcbiAgaWYgKHRoaXMucm90YXRlSW5zdHJ1Y3Rpb25zXykge1xyXG4gICAgdGhpcy5yb3RhdGVJbnN0cnVjdGlvbnNfLnVwZGF0ZSgpO1xyXG4gIH1cclxuXHJcbiAgdGhpcy5vblJlc2l6ZV8oKTtcclxufTtcclxuXHJcbkNhcmRib2FyZFZSRGlzcGxheS5wcm90b3R5cGUub25SZXNpemVfID0gZnVuY3Rpb24oZSkge1xyXG4gIGlmICh0aGlzLmxheWVyXykge1xyXG4gICAgdmFyIGdsID0gdGhpcy5sYXllcl8uc291cmNlLmdldENvbnRleHQoJ3dlYmdsJyk7XHJcbiAgICAvLyBTaXplIHRoZSBDU1MgY2FudmFzLlxyXG4gICAgLy8gQWRkZWQgcGFkZGluZyBvbiByaWdodCBhbmQgYm90dG9tIGJlY2F1c2UgaVBob25lIDUgd2lsbCBub3RcclxuICAgIC8vIGhpZGUgdGhlIFVSTCBiYXIgdW5sZXNzIGNvbnRlbnQgaXMgYmlnZ2VyIHRoYW4gdGhlIHNjcmVlbi5cclxuICAgIC8vIFRoaXMgd2lsbCBub3QgYmUgdmlzaWJsZSBhcyBsb25nIGFzIHRoZSBjb250YWluZXIgZWxlbWVudCAoZS5nLiBib2R5KVxyXG4gICAgLy8gaXMgc2V0IHRvICdvdmVyZmxvdzogaGlkZGVuJy5cclxuICAgIHZhciBjc3NQcm9wZXJ0aWVzID0gW1xyXG4gICAgICAncG9zaXRpb246IGFic29sdXRlJyxcclxuICAgICAgJ3RvcDogMCcsXHJcbiAgICAgICdsZWZ0OiAwJyxcclxuICAgICAgJ3dpZHRoOiAnICsgTWF0aC5tYXgoc2NyZWVuLndpZHRoLCBzY3JlZW4uaGVpZ2h0KSArICdweCcsXHJcbiAgICAgICdoZWlnaHQ6ICcgKyBNYXRoLm1pbihzY3JlZW4uaGVpZ2h0LCBzY3JlZW4ud2lkdGgpICsgJ3B4JyxcclxuICAgICAgJ2JvcmRlcjogMCcsXHJcbiAgICAgICdtYXJnaW46IDAnLFxyXG4gICAgICAncGFkZGluZzogMCAxMHB4IDEwcHggMCcsXHJcbiAgICBdO1xyXG4gICAgZ2wuY2FudmFzLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCBjc3NQcm9wZXJ0aWVzLmpvaW4oJzsgJykgKyAnOycpO1xyXG5cclxuICAgIFV0aWwuc2FmYXJpQ3NzU2l6ZVdvcmthcm91bmQoZ2wuY2FudmFzKTtcclxuICB9XHJcbn07XHJcblxyXG5DYXJkYm9hcmRWUkRpc3BsYXkucHJvdG90eXBlLm9uVmlld2VyQ2hhbmdlZF8gPSBmdW5jdGlvbih2aWV3ZXIpIHtcclxuICB0aGlzLmRldmljZUluZm9fLnNldFZpZXdlcih2aWV3ZXIpO1xyXG5cclxuICBpZiAodGhpcy5kaXN0b3J0ZXJfKSB7XHJcbiAgICAvLyBVcGRhdGUgdGhlIGRpc3RvcnRpb24gYXBwcm9wcmlhdGVseS5cclxuICAgIHRoaXMuZGlzdG9ydGVyXy51cGRhdGVEZXZpY2VJbmZvKHRoaXMuZGV2aWNlSW5mb18pO1xyXG4gIH1cclxuXHJcbiAgLy8gRmlyZSBhIG5ldyBldmVudCBjb250YWluaW5nIHZpZXdlciBhbmQgZGV2aWNlIHBhcmFtZXRlcnMgZm9yIGNsaWVudHMgdGhhdFxyXG4gIC8vIHdhbnQgdG8gaW1wbGVtZW50IHRoZWlyIG93biBnZW9tZXRyeS1iYXNlZCBkaXN0b3J0aW9uLlxyXG4gIHRoaXMuZmlyZVZSRGlzcGxheURldmljZVBhcmFtc0NoYW5nZV8oKTtcclxufTtcclxuXHJcbkNhcmRib2FyZFZSRGlzcGxheS5wcm90b3R5cGUuZmlyZVZSRGlzcGxheURldmljZVBhcmFtc0NoYW5nZV8gPSBmdW5jdGlvbigpIHtcclxuICB2YXIgZXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoJ3ZyZGlzcGxheWRldmljZXBhcmFtc2NoYW5nZScsIHtcclxuICAgIGRldGFpbDoge1xyXG4gICAgICB2cmRpc3BsYXk6IHRoaXMsXHJcbiAgICAgIGRldmljZUluZm86IHRoaXMuZGV2aWNlSW5mb18sXHJcbiAgICB9XHJcbiAgfSk7XHJcbiAgd2luZG93LmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBDYXJkYm9hcmRWUkRpc3BsYXk7XHJcblxyXG59LHtcIi4vYmFzZS5qc1wiOjIsXCIuL2NhcmRib2FyZC1kaXN0b3J0ZXIuanNcIjozLFwiLi9jYXJkYm9hcmQtdWkuanNcIjo0LFwiLi9kZXZpY2UtaW5mby5qc1wiOjcsXCIuL2RwZGIvZHBkYi5qc1wiOjExLFwiLi9yb3RhdGUtaW5zdHJ1Y3Rpb25zLmpzXCI6MTYsXCIuL3NlbnNvci1mdXNpb24vZnVzaW9uLXBvc2Utc2Vuc29yLmpzXCI6MTgsXCIuL3V0aWwuanNcIjoyMixcIi4vdmlld2VyLXNlbGVjdG9yLmpzXCI6MjN9XSw2OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcclxuLypcclxuQ29weXJpZ2h0IChjKSAyMDE2LCBCcmFuZG9uIEpvbmVzLlxyXG5cclxuUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weVxyXG5vZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSBcIlNvZnR3YXJlXCIpLCB0byBkZWFsXHJcbmluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHNcclxudG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbFxyXG5jb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXNcclxuZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczpcclxuXHJcblRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkIGluXHJcbmFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxyXG5cclxuVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUlxyXG5JTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSxcclxuRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFXHJcbkFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVJcclxuTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSxcclxuT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTlxyXG5USEUgU09GVFdBUkUuXHJcbiovXHJcblxyXG4vKlxyXG5DYWNoZXMgc3BlY2lmaWVkIEdMIHN0YXRlLCBydW5zIGEgY2FsbGJhY2ssIGFuZCByZXN0b3JlcyB0aGUgY2FjaGVkIHN0YXRlIHdoZW5cclxuZG9uZS5cclxuXHJcbkV4YW1wbGUgdXNhZ2U6XHJcblxyXG52YXIgc2F2ZWRTdGF0ZSA9IFtcclxuICBnbC5BUlJBWV9CVUZGRVJfQklORElORyxcclxuXHJcbiAgLy8gVEVYVFVSRV9CSU5ESU5HXzJEIG9yIF9DVUJFX01BUCBtdXN0IGFsd2F5cyBiZSBmb2xsb3dlZCBieSB0aGUgdGV4dXJlIHVuaXQuXHJcbiAgZ2wuVEVYVFVSRV9CSU5ESU5HXzJELCBnbC5URVhUVVJFMCxcclxuXHJcbiAgZ2wuQ0xFQVJfQ09MT1IsXHJcbl07XHJcbi8vIEFmdGVyIHRoaXMgY2FsbCB0aGUgYXJyYXkgYnVmZmVyLCB0ZXh0dXJlIHVuaXQgMCwgYWN0aXZlIHRleHR1cmUsIGFuZCBjbGVhclxyXG4vLyBjb2xvciB3aWxsIGJlIHJlc3RvcmVkLiBUaGUgdmlld3BvcnQgd2lsbCByZW1haW4gY2hhbmdlZCwgaG93ZXZlciwgYmVjYXVzZVxyXG4vLyBnbC5WSUVXUE9SVCB3YXMgbm90IGluY2x1ZGVkIGluIHRoZSBzYXZlZFN0YXRlIGxpc3QuXHJcbldHTFVQcmVzZXJ2ZUdMU3RhdGUoZ2wsIHNhdmVkU3RhdGUsIGZ1bmN0aW9uKGdsKSB7XHJcbiAgZ2wudmlld3BvcnQoMCwgMCwgZ2wuZHJhd2luZ0J1ZmZlcldpZHRoLCBnbC5kcmF3aW5nQnVmZmVySGVpZ2h0KTtcclxuXHJcbiAgZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIGJ1ZmZlcik7XHJcbiAgZ2wuYnVmZmVyRGF0YShnbC5BUlJBWV9CVUZGRVIsIC4uLi4pO1xyXG5cclxuICBnbC5hY3RpdmVUZXh0dXJlKGdsLlRFWFRVUkUwKTtcclxuICBnbC5iaW5kVGV4dHVyZShnbC5URVhUVVJFXzJELCB0ZXh0dXJlKTtcclxuICBnbC50ZXhJbWFnZTJEKGdsLlRFWFRVUkVfMkQsIC4uLik7XHJcblxyXG4gIGdsLmNsZWFyQ29sb3IoMSwgMCwgMCwgMSk7XHJcbiAgZ2wuY2xlYXIoZ2wuQ09MT1JfQlVGRkVSX0JJVCk7XHJcbn0pO1xyXG5cclxuTm90ZSB0aGF0IHRoaXMgaXMgbm90IGludGVuZGVkIHRvIGJlIGZhc3QuIE1hbmFnaW5nIHN0YXRlIGluIHlvdXIgb3duIGNvZGUgdG9cclxuYXZvaWQgcmVkdW5kYW50IHN0YXRlIHNldHRpbmcgYW5kIHF1ZXJ5aW5nIHdpbGwgYWx3YXlzIGJlIGZhc3Rlci4gVGhpcyBmdW5jdGlvblxyXG5pcyBtb3N0IHVzZWZ1bCBmb3IgY2FzZXMgd2hlcmUgeW91IG1heSBub3QgaGF2ZSBmdWxsIGNvbnRyb2wgb3ZlciB0aGUgV2ViR0xcclxuY2FsbHMgYmVpbmcgbWFkZSwgc3VjaCBhcyB0b29saW5nIG9yIGVmZmVjdCBpbmplY3RvcnMuXHJcbiovXHJcblxyXG5mdW5jdGlvbiBXR0xVUHJlc2VydmVHTFN0YXRlKGdsLCBiaW5kaW5ncywgY2FsbGJhY2spIHtcclxuICBpZiAoIWJpbmRpbmdzKSB7XHJcbiAgICBjYWxsYmFjayhnbCk7XHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG5cclxuICB2YXIgYm91bmRWYWx1ZXMgPSBbXTtcclxuXHJcbiAgdmFyIGFjdGl2ZVRleHR1cmUgPSBudWxsO1xyXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgYmluZGluZ3MubGVuZ3RoOyArK2kpIHtcclxuICAgIHZhciBiaW5kaW5nID0gYmluZGluZ3NbaV07XHJcbiAgICBzd2l0Y2ggKGJpbmRpbmcpIHtcclxuICAgICAgY2FzZSBnbC5URVhUVVJFX0JJTkRJTkdfMkQ6XHJcbiAgICAgIGNhc2UgZ2wuVEVYVFVSRV9CSU5ESU5HX0NVQkVfTUFQOlxyXG4gICAgICAgIHZhciB0ZXh0dXJlVW5pdCA9IGJpbmRpbmdzWysraV07XHJcbiAgICAgICAgaWYgKHRleHR1cmVVbml0IDwgZ2wuVEVYVFVSRTAgfHwgdGV4dHVyZVVuaXQgPiBnbC5URVhUVVJFMzEpIHtcclxuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJURVhUVVJFX0JJTkRJTkdfMkQgb3IgVEVYVFVSRV9CSU5ESU5HX0NVQkVfTUFQIG11c3QgYmUgZm9sbG93ZWQgYnkgYSB2YWxpZCB0ZXh0dXJlIHVuaXRcIik7XHJcbiAgICAgICAgICBib3VuZFZhbHVlcy5wdXNoKG51bGwsIG51bGwpO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghYWN0aXZlVGV4dHVyZSkge1xyXG4gICAgICAgICAgYWN0aXZlVGV4dHVyZSA9IGdsLmdldFBhcmFtZXRlcihnbC5BQ1RJVkVfVEVYVFVSRSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGdsLmFjdGl2ZVRleHR1cmUodGV4dHVyZVVuaXQpO1xyXG4gICAgICAgIGJvdW5kVmFsdWVzLnB1c2goZ2wuZ2V0UGFyYW1ldGVyKGJpbmRpbmcpLCBudWxsKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSBnbC5BQ1RJVkVfVEVYVFVSRTpcclxuICAgICAgICBhY3RpdmVUZXh0dXJlID0gZ2wuZ2V0UGFyYW1ldGVyKGdsLkFDVElWRV9URVhUVVJFKTtcclxuICAgICAgICBib3VuZFZhbHVlcy5wdXNoKG51bGwpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBkZWZhdWx0OlxyXG4gICAgICAgIGJvdW5kVmFsdWVzLnB1c2goZ2wuZ2V0UGFyYW1ldGVyKGJpbmRpbmcpKTtcclxuICAgICAgICBicmVhaztcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGNhbGxiYWNrKGdsKTtcclxuXHJcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBiaW5kaW5ncy5sZW5ndGg7ICsraSkge1xyXG4gICAgdmFyIGJpbmRpbmcgPSBiaW5kaW5nc1tpXTtcclxuICAgIHZhciBib3VuZFZhbHVlID0gYm91bmRWYWx1ZXNbaV07XHJcbiAgICBzd2l0Y2ggKGJpbmRpbmcpIHtcclxuICAgICAgY2FzZSBnbC5BQ1RJVkVfVEVYVFVSRTpcclxuICAgICAgICBicmVhazsgLy8gSWdub3JlIHRoaXMgYmluZGluZywgc2luY2Ugd2Ugc3BlY2lhbC1jYXNlIGl0IHRvIGhhcHBlbiBsYXN0LlxyXG4gICAgICBjYXNlIGdsLkFSUkFZX0JVRkZFUl9CSU5ESU5HOlxyXG4gICAgICAgIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCBib3VuZFZhbHVlKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSBnbC5DT0xPUl9DTEVBUl9WQUxVRTpcclxuICAgICAgICBnbC5jbGVhckNvbG9yKGJvdW5kVmFsdWVbMF0sIGJvdW5kVmFsdWVbMV0sIGJvdW5kVmFsdWVbMl0sIGJvdW5kVmFsdWVbM10pO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIGdsLkNPTE9SX1dSSVRFTUFTSzpcclxuICAgICAgICBnbC5jb2xvck1hc2soYm91bmRWYWx1ZVswXSwgYm91bmRWYWx1ZVsxXSwgYm91bmRWYWx1ZVsyXSwgYm91bmRWYWx1ZVszXSk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgZ2wuQ1VSUkVOVF9QUk9HUkFNOlxyXG4gICAgICAgIGdsLnVzZVByb2dyYW0oYm91bmRWYWx1ZSk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgZ2wuRUxFTUVOVF9BUlJBWV9CVUZGRVJfQklORElORzpcclxuICAgICAgICBnbC5iaW5kQnVmZmVyKGdsLkVMRU1FTlRfQVJSQVlfQlVGRkVSLCBib3VuZFZhbHVlKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSBnbC5GUkFNRUJVRkZFUl9CSU5ESU5HOlxyXG4gICAgICAgIGdsLmJpbmRGcmFtZWJ1ZmZlcihnbC5GUkFNRUJVRkZFUiwgYm91bmRWYWx1ZSk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgZ2wuUkVOREVSQlVGRkVSX0JJTkRJTkc6XHJcbiAgICAgICAgZ2wuYmluZFJlbmRlcmJ1ZmZlcihnbC5SRU5ERVJCVUZGRVIsIGJvdW5kVmFsdWUpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIGdsLlRFWFRVUkVfQklORElOR18yRDpcclxuICAgICAgICB2YXIgdGV4dHVyZVVuaXQgPSBiaW5kaW5nc1srK2ldO1xyXG4gICAgICAgIGlmICh0ZXh0dXJlVW5pdCA8IGdsLlRFWFRVUkUwIHx8IHRleHR1cmVVbml0ID4gZ2wuVEVYVFVSRTMxKVxyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgZ2wuYWN0aXZlVGV4dHVyZSh0ZXh0dXJlVW5pdCk7XHJcbiAgICAgICAgZ2wuYmluZFRleHR1cmUoZ2wuVEVYVFVSRV8yRCwgYm91bmRWYWx1ZSk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgZ2wuVEVYVFVSRV9CSU5ESU5HX0NVQkVfTUFQOlxyXG4gICAgICAgIHZhciB0ZXh0dXJlVW5pdCA9IGJpbmRpbmdzWysraV07XHJcbiAgICAgICAgaWYgKHRleHR1cmVVbml0IDwgZ2wuVEVYVFVSRTAgfHwgdGV4dHVyZVVuaXQgPiBnbC5URVhUVVJFMzEpXHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBnbC5hY3RpdmVUZXh0dXJlKHRleHR1cmVVbml0KTtcclxuICAgICAgICBnbC5iaW5kVGV4dHVyZShnbC5URVhUVVJFX0NVQkVfTUFQLCBib3VuZFZhbHVlKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSBnbC5WSUVXUE9SVDpcclxuICAgICAgICBnbC52aWV3cG9ydChib3VuZFZhbHVlWzBdLCBib3VuZFZhbHVlWzFdLCBib3VuZFZhbHVlWzJdLCBib3VuZFZhbHVlWzNdKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSBnbC5CTEVORDpcclxuICAgICAgY2FzZSBnbC5DVUxMX0ZBQ0U6XHJcbiAgICAgIGNhc2UgZ2wuREVQVEhfVEVTVDpcclxuICAgICAgY2FzZSBnbC5TQ0lTU09SX1RFU1Q6XHJcbiAgICAgIGNhc2UgZ2wuU1RFTkNJTF9URVNUOlxyXG4gICAgICAgIGlmIChib3VuZFZhbHVlKSB7XHJcbiAgICAgICAgICBnbC5lbmFibGUoYmluZGluZyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGdsLmRpc2FibGUoYmluZGluZyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBkZWZhdWx0OlxyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiTm8gR0wgcmVzdG9yZSBiZWhhdmlvciBmb3IgMHhcIiArIGJpbmRpbmcudG9TdHJpbmcoMTYpKTtcclxuICAgICAgICBicmVhaztcclxuICAgIH1cclxuXHJcbiAgICBpZiAoYWN0aXZlVGV4dHVyZSkge1xyXG4gICAgICBnbC5hY3RpdmVUZXh0dXJlKGFjdGl2ZVRleHR1cmUpO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBXR0xVUHJlc2VydmVHTFN0YXRlO1xyXG59LHt9XSw3OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcclxuLypcclxuICogQ29weXJpZ2h0IDIwMTUgR29vZ2xlIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5cclxudmFyIERpc3RvcnRpb24gPSBfZGVyZXFfKCcuL2Rpc3RvcnRpb24vZGlzdG9ydGlvbi5qcycpO1xyXG52YXIgTWF0aFV0aWwgPSBfZGVyZXFfKCcuL21hdGgtdXRpbC5qcycpO1xyXG52YXIgVXRpbCA9IF9kZXJlcV8oJy4vdXRpbC5qcycpO1xyXG5cclxuZnVuY3Rpb24gRGV2aWNlKHBhcmFtcykge1xyXG4gIHRoaXMud2lkdGggPSBwYXJhbXMud2lkdGggfHwgVXRpbC5nZXRTY3JlZW5XaWR0aCgpO1xyXG4gIHRoaXMuaGVpZ2h0ID0gcGFyYW1zLmhlaWdodCB8fCBVdGlsLmdldFNjcmVlbkhlaWdodCgpO1xyXG4gIHRoaXMud2lkdGhNZXRlcnMgPSBwYXJhbXMud2lkdGhNZXRlcnM7XHJcbiAgdGhpcy5oZWlnaHRNZXRlcnMgPSBwYXJhbXMuaGVpZ2h0TWV0ZXJzO1xyXG4gIHRoaXMuYmV2ZWxNZXRlcnMgPSBwYXJhbXMuYmV2ZWxNZXRlcnM7XHJcbn1cclxuXHJcblxyXG4vLyBGYWxsYmFjayBBbmRyb2lkIGRldmljZSAoYmFzZWQgb24gTmV4dXMgNSBtZWFzdXJlbWVudHMpIGZvciB1c2Ugd2hlblxyXG4vLyB3ZSBjYW4ndCByZWNvZ25pemUgYW4gQW5kcm9pZCBkZXZpY2UuXHJcbnZhciBERUZBVUxUX0FORFJPSUQgPSBuZXcgRGV2aWNlKHtcclxuICB3aWR0aE1ldGVyczogMC4xMTAsXHJcbiAgaGVpZ2h0TWV0ZXJzOiAwLjA2MixcclxuICBiZXZlbE1ldGVyczogMC4wMDRcclxufSk7XHJcblxyXG4vLyBGYWxsYmFjayBpT1MgZGV2aWNlIChiYXNlZCBvbiBpUGhvbmU2KSBmb3IgdXNlIHdoZW5cclxuLy8gd2UgY2FuJ3QgcmVjb2duaXplIGFuIEFuZHJvaWQgZGV2aWNlLlxyXG52YXIgREVGQVVMVF9JT1MgPSBuZXcgRGV2aWNlKHtcclxuICB3aWR0aE1ldGVyczogMC4xMDM4LFxyXG4gIGhlaWdodE1ldGVyczogMC4wNTg0LFxyXG4gIGJldmVsTWV0ZXJzOiAwLjAwNFxyXG59KTtcclxuXHJcblxyXG52YXIgVmlld2VycyA9IHtcclxuICBDYXJkYm9hcmRWMTogbmV3IENhcmRib2FyZFZpZXdlcih7XHJcbiAgICBpZDogJ0NhcmRib2FyZFYxJyxcclxuICAgIGxhYmVsOiAnQ2FyZGJvYXJkIEkvTyAyMDE0JyxcclxuICAgIGZvdjogNDAsXHJcbiAgICBpbnRlckxlbnNEaXN0YW5jZTogMC4wNjAsXHJcbiAgICBiYXNlbGluZUxlbnNEaXN0YW5jZTogMC4wMzUsXHJcbiAgICBzY3JlZW5MZW5zRGlzdGFuY2U6IDAuMDQyLFxyXG4gICAgZGlzdG9ydGlvbkNvZWZmaWNpZW50czogWzAuNDQxLCAwLjE1Nl0sXHJcbiAgICBpbnZlcnNlQ29lZmZpY2llbnRzOiBbLTAuNDQxMDAzNSwgMC40Mjc1NjE1NSwgLTAuNDgwNDQzOSwgMC41NDYwMTM5LFxyXG4gICAgICAtMC41ODgyMTE4MywgMC41NzMzOTM4LCAtMC40ODMwMzIwMiwgMC4zMzI5OTA4MywgLTAuMTc1NzM4NDEsXHJcbiAgICAgIDAuMDY1MTc3MiwgLTAuMDE0ODg5NjMsIDAuMDAxNTU5ODM0XVxyXG4gIH0pLFxyXG4gIENhcmRib2FyZFYyOiBuZXcgQ2FyZGJvYXJkVmlld2VyKHtcclxuICAgIGlkOiAnQ2FyZGJvYXJkVjInLFxyXG4gICAgbGFiZWw6ICdDYXJkYm9hcmQgSS9PIDIwMTUnLFxyXG4gICAgZm92OiA2MCxcclxuICAgIGludGVyTGVuc0Rpc3RhbmNlOiAwLjA2NCxcclxuICAgIGJhc2VsaW5lTGVuc0Rpc3RhbmNlOiAwLjAzNSxcclxuICAgIHNjcmVlbkxlbnNEaXN0YW5jZTogMC4wMzksXHJcbiAgICBkaXN0b3J0aW9uQ29lZmZpY2llbnRzOiBbMC4zNCwgMC41NV0sXHJcbiAgICBpbnZlcnNlQ29lZmZpY2llbnRzOiBbLTAuMzM4MzY3MDQsIC0wLjE4MTYyMTg1LCAwLjg2MjY1NSwgLTEuMjQ2MjA1MSxcclxuICAgICAgMS4wNTYwNjAyLCAtMC41ODIwODMxNywgMC4yMTYwOTA3OCwgLTAuMDU0NDQ4MjMsIDAuMDA5MTc3OTU2LFxyXG4gICAgICAtOS45MDQxNjlFLTQsIDYuMTgzNTM1RS01LCAtMS42OTgxODAzRS02XVxyXG4gIH0pXHJcbn07XHJcblxyXG5cclxudmFyIERFRkFVTFRfTEVGVF9DRU5URVIgPSB7eDogMC41LCB5OiAwLjV9O1xyXG52YXIgREVGQVVMVF9SSUdIVF9DRU5URVIgPSB7eDogMC41LCB5OiAwLjV9O1xyXG5cclxuLyoqXHJcbiAqIE1hbmFnZXMgaW5mb3JtYXRpb24gYWJvdXQgdGhlIGRldmljZSBhbmQgdGhlIHZpZXdlci5cclxuICpcclxuICogZGV2aWNlUGFyYW1zIGluZGljYXRlcyB0aGUgcGFyYW1ldGVycyBvZiB0aGUgZGV2aWNlIHRvIHVzZSAoZ2VuZXJhbGx5XHJcbiAqIG9idGFpbmVkIGZyb20gZHBkYi5nZXREZXZpY2VQYXJhbXMoKSkuIENhbiBiZSBudWxsIHRvIG1lYW4gbm8gZGV2aWNlXHJcbiAqIHBhcmFtcyB3ZXJlIGZvdW5kLlxyXG4gKi9cclxuZnVuY3Rpb24gRGV2aWNlSW5mbyhkZXZpY2VQYXJhbXMpIHtcclxuICB0aGlzLnZpZXdlciA9IFZpZXdlcnMuQ2FyZGJvYXJkVjI7XHJcbiAgdGhpcy51cGRhdGVEZXZpY2VQYXJhbXMoZGV2aWNlUGFyYW1zKTtcclxuICB0aGlzLmRpc3RvcnRpb24gPSBuZXcgRGlzdG9ydGlvbih0aGlzLnZpZXdlci5kaXN0b3J0aW9uQ29lZmZpY2llbnRzKTtcclxufVxyXG5cclxuRGV2aWNlSW5mby5wcm90b3R5cGUudXBkYXRlRGV2aWNlUGFyYW1zID0gZnVuY3Rpb24oZGV2aWNlUGFyYW1zKSB7XHJcbiAgdGhpcy5kZXZpY2UgPSB0aGlzLmRldGVybWluZURldmljZV8oZGV2aWNlUGFyYW1zKSB8fCB0aGlzLmRldmljZTtcclxufTtcclxuXHJcbkRldmljZUluZm8ucHJvdG90eXBlLmdldERldmljZSA9IGZ1bmN0aW9uKCkge1xyXG4gIHJldHVybiB0aGlzLmRldmljZTtcclxufTtcclxuXHJcbkRldmljZUluZm8ucHJvdG90eXBlLnNldFZpZXdlciA9IGZ1bmN0aW9uKHZpZXdlcikge1xyXG4gIHRoaXMudmlld2VyID0gdmlld2VyO1xyXG4gIHRoaXMuZGlzdG9ydGlvbiA9IG5ldyBEaXN0b3J0aW9uKHRoaXMudmlld2VyLmRpc3RvcnRpb25Db2VmZmljaWVudHMpO1xyXG59O1xyXG5cclxuRGV2aWNlSW5mby5wcm90b3R5cGUuZGV0ZXJtaW5lRGV2aWNlXyA9IGZ1bmN0aW9uKGRldmljZVBhcmFtcykge1xyXG4gIGlmICghZGV2aWNlUGFyYW1zKSB7XHJcbiAgICAvLyBObyBwYXJhbWV0ZXJzLCBzbyB1c2UgYSBkZWZhdWx0LlxyXG4gICAgaWYgKFV0aWwuaXNJT1MoKSkge1xyXG4gICAgICBjb25zb2xlLndhcm4oJ1VzaW5nIGZhbGxiYWNrIGlPUyBkZXZpY2UgbWVhc3VyZW1lbnRzLicpO1xyXG4gICAgICByZXR1cm4gREVGQVVMVF9JT1M7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zb2xlLndhcm4oJ1VzaW5nIGZhbGxiYWNrIEFuZHJvaWQgZGV2aWNlIG1lYXN1cmVtZW50cy4nKTtcclxuICAgICAgcmV0dXJuIERFRkFVTFRfQU5EUk9JRDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIENvbXB1dGUgZGV2aWNlIHNjcmVlbiBkaW1lbnNpb25zIGJhc2VkIG9uIGRldmljZVBhcmFtcy5cclxuICB2YXIgTUVURVJTX1BFUl9JTkNIID0gMC4wMjU0O1xyXG4gIHZhciBtZXRlcnNQZXJQaXhlbFggPSBNRVRFUlNfUEVSX0lOQ0ggLyBkZXZpY2VQYXJhbXMueGRwaTtcclxuICB2YXIgbWV0ZXJzUGVyUGl4ZWxZID0gTUVURVJTX1BFUl9JTkNIIC8gZGV2aWNlUGFyYW1zLnlkcGk7XHJcbiAgdmFyIHdpZHRoID0gVXRpbC5nZXRTY3JlZW5XaWR0aCgpO1xyXG4gIHZhciBoZWlnaHQgPSBVdGlsLmdldFNjcmVlbkhlaWdodCgpO1xyXG4gIHJldHVybiBuZXcgRGV2aWNlKHtcclxuICAgIHdpZHRoTWV0ZXJzOiBtZXRlcnNQZXJQaXhlbFggKiB3aWR0aCxcclxuICAgIGhlaWdodE1ldGVyczogbWV0ZXJzUGVyUGl4ZWxZICogaGVpZ2h0LFxyXG4gICAgYmV2ZWxNZXRlcnM6IGRldmljZVBhcmFtcy5iZXZlbE1tICogMC4wMDEsXHJcbiAgfSk7XHJcbn07XHJcblxyXG4vKipcclxuICogQ2FsY3VsYXRlcyBmaWVsZCBvZiB2aWV3IGZvciB0aGUgbGVmdCBleWUuXHJcbiAqL1xyXG5EZXZpY2VJbmZvLnByb3RvdHlwZS5nZXREaXN0b3J0ZWRGaWVsZE9mVmlld0xlZnRFeWUgPSBmdW5jdGlvbigpIHtcclxuICB2YXIgdmlld2VyID0gdGhpcy52aWV3ZXI7XHJcbiAgdmFyIGRldmljZSA9IHRoaXMuZGV2aWNlO1xyXG4gIHZhciBkaXN0b3J0aW9uID0gdGhpcy5kaXN0b3J0aW9uO1xyXG5cclxuICAvLyBEZXZpY2UuaGVpZ2h0IGFuZCBkZXZpY2Uud2lkdGggZm9yIGRldmljZSBpbiBwb3J0cmFpdCBtb2RlLCBzbyB0cmFuc3Bvc2UuXHJcbiAgdmFyIGV5ZVRvU2NyZWVuRGlzdGFuY2UgPSB2aWV3ZXIuc2NyZWVuTGVuc0Rpc3RhbmNlO1xyXG5cclxuICB2YXIgb3V0ZXJEaXN0ID0gKGRldmljZS53aWR0aE1ldGVycyAtIHZpZXdlci5pbnRlckxlbnNEaXN0YW5jZSkgLyAyO1xyXG4gIHZhciBpbm5lckRpc3QgPSB2aWV3ZXIuaW50ZXJMZW5zRGlzdGFuY2UgLyAyO1xyXG4gIHZhciBib3R0b21EaXN0ID0gdmlld2VyLmJhc2VsaW5lTGVuc0Rpc3RhbmNlIC0gZGV2aWNlLmJldmVsTWV0ZXJzO1xyXG4gIHZhciB0b3BEaXN0ID0gZGV2aWNlLmhlaWdodE1ldGVycyAtIGJvdHRvbURpc3Q7XHJcblxyXG4gIHZhciBvdXRlckFuZ2xlID0gTWF0aFV0aWwucmFkVG9EZWcgKiBNYXRoLmF0YW4oXHJcbiAgICAgIGRpc3RvcnRpb24uZGlzdG9ydChvdXRlckRpc3QgLyBleWVUb1NjcmVlbkRpc3RhbmNlKSk7XHJcbiAgdmFyIGlubmVyQW5nbGUgPSBNYXRoVXRpbC5yYWRUb0RlZyAqIE1hdGguYXRhbihcclxuICAgICAgZGlzdG9ydGlvbi5kaXN0b3J0KGlubmVyRGlzdCAvIGV5ZVRvU2NyZWVuRGlzdGFuY2UpKTtcclxuICB2YXIgYm90dG9tQW5nbGUgPSBNYXRoVXRpbC5yYWRUb0RlZyAqIE1hdGguYXRhbihcclxuICAgICAgZGlzdG9ydGlvbi5kaXN0b3J0KGJvdHRvbURpc3QgLyBleWVUb1NjcmVlbkRpc3RhbmNlKSk7XHJcbiAgdmFyIHRvcEFuZ2xlID0gTWF0aFV0aWwucmFkVG9EZWcgKiBNYXRoLmF0YW4oXHJcbiAgICAgIGRpc3RvcnRpb24uZGlzdG9ydCh0b3BEaXN0IC8gZXllVG9TY3JlZW5EaXN0YW5jZSkpO1xyXG5cclxuICByZXR1cm4ge1xyXG4gICAgbGVmdERlZ3JlZXM6IE1hdGgubWluKG91dGVyQW5nbGUsIHZpZXdlci5mb3YpLFxyXG4gICAgcmlnaHREZWdyZWVzOiBNYXRoLm1pbihpbm5lckFuZ2xlLCB2aWV3ZXIuZm92KSxcclxuICAgIGRvd25EZWdyZWVzOiBNYXRoLm1pbihib3R0b21BbmdsZSwgdmlld2VyLmZvdiksXHJcbiAgICB1cERlZ3JlZXM6IE1hdGgubWluKHRvcEFuZ2xlLCB2aWV3ZXIuZm92KVxyXG4gIH07XHJcbn07XHJcblxyXG4vKipcclxuICogQ2FsY3VsYXRlcyB0aGUgdGFuLWFuZ2xlcyBmcm9tIHRoZSBtYXhpbXVtIEZPViBmb3IgdGhlIGxlZnQgZXllIGZvciB0aGVcclxuICogY3VycmVudCBkZXZpY2UgYW5kIHNjcmVlbiBwYXJhbWV0ZXJzLlxyXG4gKi9cclxuRGV2aWNlSW5mby5wcm90b3R5cGUuZ2V0TGVmdEV5ZVZpc2libGVUYW5BbmdsZXMgPSBmdW5jdGlvbigpIHtcclxuICB2YXIgdmlld2VyID0gdGhpcy52aWV3ZXI7XHJcbiAgdmFyIGRldmljZSA9IHRoaXMuZGV2aWNlO1xyXG4gIHZhciBkaXN0b3J0aW9uID0gdGhpcy5kaXN0b3J0aW9uO1xyXG5cclxuICAvLyBUYW4tYW5nbGVzIGZyb20gdGhlIG1heCBGT1YuXHJcbiAgdmFyIGZvdkxlZnQgPSBNYXRoLnRhbigtTWF0aFV0aWwuZGVnVG9SYWQgKiB2aWV3ZXIuZm92KTtcclxuICB2YXIgZm92VG9wID0gTWF0aC50YW4oTWF0aFV0aWwuZGVnVG9SYWQgKiB2aWV3ZXIuZm92KTtcclxuICB2YXIgZm92UmlnaHQgPSBNYXRoLnRhbihNYXRoVXRpbC5kZWdUb1JhZCAqIHZpZXdlci5mb3YpO1xyXG4gIHZhciBmb3ZCb3R0b20gPSBNYXRoLnRhbigtTWF0aFV0aWwuZGVnVG9SYWQgKiB2aWV3ZXIuZm92KTtcclxuICAvLyBWaWV3cG9ydCBzaXplLlxyXG4gIHZhciBoYWxmV2lkdGggPSBkZXZpY2Uud2lkdGhNZXRlcnMgLyA0O1xyXG4gIHZhciBoYWxmSGVpZ2h0ID0gZGV2aWNlLmhlaWdodE1ldGVycyAvIDI7XHJcbiAgLy8gVmlld3BvcnQgY2VudGVyLCBtZWFzdXJlZCBmcm9tIGxlZnQgbGVucyBwb3NpdGlvbi5cclxuICB2YXIgdmVydGljYWxMZW5zT2Zmc2V0ID0gKHZpZXdlci5iYXNlbGluZUxlbnNEaXN0YW5jZSAtIGRldmljZS5iZXZlbE1ldGVycyAtIGhhbGZIZWlnaHQpO1xyXG4gIHZhciBjZW50ZXJYID0gdmlld2VyLmludGVyTGVuc0Rpc3RhbmNlIC8gMiAtIGhhbGZXaWR0aDtcclxuICB2YXIgY2VudGVyWSA9IC12ZXJ0aWNhbExlbnNPZmZzZXQ7XHJcbiAgdmFyIGNlbnRlclogPSB2aWV3ZXIuc2NyZWVuTGVuc0Rpc3RhbmNlO1xyXG4gIC8vIFRhbi1hbmdsZXMgb2YgdGhlIHZpZXdwb3J0IGVkZ2VzLCBhcyBzZWVuIHRocm91Z2ggdGhlIGxlbnMuXHJcbiAgdmFyIHNjcmVlbkxlZnQgPSBkaXN0b3J0aW9uLmRpc3RvcnQoKGNlbnRlclggLSBoYWxmV2lkdGgpIC8gY2VudGVyWik7XHJcbiAgdmFyIHNjcmVlblRvcCA9IGRpc3RvcnRpb24uZGlzdG9ydCgoY2VudGVyWSArIGhhbGZIZWlnaHQpIC8gY2VudGVyWik7XHJcbiAgdmFyIHNjcmVlblJpZ2h0ID0gZGlzdG9ydGlvbi5kaXN0b3J0KChjZW50ZXJYICsgaGFsZldpZHRoKSAvIGNlbnRlclopO1xyXG4gIHZhciBzY3JlZW5Cb3R0b20gPSBkaXN0b3J0aW9uLmRpc3RvcnQoKGNlbnRlclkgLSBoYWxmSGVpZ2h0KSAvIGNlbnRlclopO1xyXG4gIC8vIENvbXBhcmUgdGhlIHR3byBzZXRzIG9mIHRhbi1hbmdsZXMgYW5kIHRha2UgdGhlIHZhbHVlIGNsb3NlciB0byB6ZXJvIG9uIGVhY2ggc2lkZS5cclxuICB2YXIgcmVzdWx0ID0gbmV3IEZsb2F0MzJBcnJheSg0KTtcclxuICByZXN1bHRbMF0gPSBNYXRoLm1heChmb3ZMZWZ0LCBzY3JlZW5MZWZ0KTtcclxuICByZXN1bHRbMV0gPSBNYXRoLm1pbihmb3ZUb3AsIHNjcmVlblRvcCk7XHJcbiAgcmVzdWx0WzJdID0gTWF0aC5taW4oZm92UmlnaHQsIHNjcmVlblJpZ2h0KTtcclxuICByZXN1bHRbM10gPSBNYXRoLm1heChmb3ZCb3R0b20sIHNjcmVlbkJvdHRvbSk7XHJcbiAgcmV0dXJuIHJlc3VsdDtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBDYWxjdWxhdGVzIHRoZSB0YW4tYW5nbGVzIGZyb20gdGhlIG1heGltdW0gRk9WIGZvciB0aGUgbGVmdCBleWUgZm9yIHRoZVxyXG4gKiBjdXJyZW50IGRldmljZSBhbmQgc2NyZWVuIHBhcmFtZXRlcnMsIGFzc3VtaW5nIG5vIGxlbnNlcy5cclxuICovXHJcbkRldmljZUluZm8ucHJvdG90eXBlLmdldExlZnRFeWVOb0xlbnNUYW5BbmdsZXMgPSBmdW5jdGlvbigpIHtcclxuICB2YXIgdmlld2VyID0gdGhpcy52aWV3ZXI7XHJcbiAgdmFyIGRldmljZSA9IHRoaXMuZGV2aWNlO1xyXG4gIHZhciBkaXN0b3J0aW9uID0gdGhpcy5kaXN0b3J0aW9uO1xyXG5cclxuICB2YXIgcmVzdWx0ID0gbmV3IEZsb2F0MzJBcnJheSg0KTtcclxuICAvLyBUYW4tYW5nbGVzIGZyb20gdGhlIG1heCBGT1YuXHJcbiAgdmFyIGZvdkxlZnQgPSBkaXN0b3J0aW9uLmRpc3RvcnRJbnZlcnNlKE1hdGgudGFuKC1NYXRoVXRpbC5kZWdUb1JhZCAqIHZpZXdlci5mb3YpKTtcclxuICB2YXIgZm92VG9wID0gZGlzdG9ydGlvbi5kaXN0b3J0SW52ZXJzZShNYXRoLnRhbihNYXRoVXRpbC5kZWdUb1JhZCAqIHZpZXdlci5mb3YpKTtcclxuICB2YXIgZm92UmlnaHQgPSBkaXN0b3J0aW9uLmRpc3RvcnRJbnZlcnNlKE1hdGgudGFuKE1hdGhVdGlsLmRlZ1RvUmFkICogdmlld2VyLmZvdikpO1xyXG4gIHZhciBmb3ZCb3R0b20gPSBkaXN0b3J0aW9uLmRpc3RvcnRJbnZlcnNlKE1hdGgudGFuKC1NYXRoVXRpbC5kZWdUb1JhZCAqIHZpZXdlci5mb3YpKTtcclxuICAvLyBWaWV3cG9ydCBzaXplLlxyXG4gIHZhciBoYWxmV2lkdGggPSBkZXZpY2Uud2lkdGhNZXRlcnMgLyA0O1xyXG4gIHZhciBoYWxmSGVpZ2h0ID0gZGV2aWNlLmhlaWdodE1ldGVycyAvIDI7XHJcbiAgLy8gVmlld3BvcnQgY2VudGVyLCBtZWFzdXJlZCBmcm9tIGxlZnQgbGVucyBwb3NpdGlvbi5cclxuICB2YXIgdmVydGljYWxMZW5zT2Zmc2V0ID0gKHZpZXdlci5iYXNlbGluZUxlbnNEaXN0YW5jZSAtIGRldmljZS5iZXZlbE1ldGVycyAtIGhhbGZIZWlnaHQpO1xyXG4gIHZhciBjZW50ZXJYID0gdmlld2VyLmludGVyTGVuc0Rpc3RhbmNlIC8gMiAtIGhhbGZXaWR0aDtcclxuICB2YXIgY2VudGVyWSA9IC12ZXJ0aWNhbExlbnNPZmZzZXQ7XHJcbiAgdmFyIGNlbnRlclogPSB2aWV3ZXIuc2NyZWVuTGVuc0Rpc3RhbmNlO1xyXG4gIC8vIFRhbi1hbmdsZXMgb2YgdGhlIHZpZXdwb3J0IGVkZ2VzLCBhcyBzZWVuIHRocm91Z2ggdGhlIGxlbnMuXHJcbiAgdmFyIHNjcmVlbkxlZnQgPSAoY2VudGVyWCAtIGhhbGZXaWR0aCkgLyBjZW50ZXJaO1xyXG4gIHZhciBzY3JlZW5Ub3AgPSAoY2VudGVyWSArIGhhbGZIZWlnaHQpIC8gY2VudGVyWjtcclxuICB2YXIgc2NyZWVuUmlnaHQgPSAoY2VudGVyWCArIGhhbGZXaWR0aCkgLyBjZW50ZXJaO1xyXG4gIHZhciBzY3JlZW5Cb3R0b20gPSAoY2VudGVyWSAtIGhhbGZIZWlnaHQpIC8gY2VudGVyWjtcclxuICAvLyBDb21wYXJlIHRoZSB0d28gc2V0cyBvZiB0YW4tYW5nbGVzIGFuZCB0YWtlIHRoZSB2YWx1ZSBjbG9zZXIgdG8gemVybyBvbiBlYWNoIHNpZGUuXHJcbiAgcmVzdWx0WzBdID0gTWF0aC5tYXgoZm92TGVmdCwgc2NyZWVuTGVmdCk7XHJcbiAgcmVzdWx0WzFdID0gTWF0aC5taW4oZm92VG9wLCBzY3JlZW5Ub3ApO1xyXG4gIHJlc3VsdFsyXSA9IE1hdGgubWluKGZvdlJpZ2h0LCBzY3JlZW5SaWdodCk7XHJcbiAgcmVzdWx0WzNdID0gTWF0aC5tYXgoZm92Qm90dG9tLCBzY3JlZW5Cb3R0b20pO1xyXG4gIHJldHVybiByZXN1bHQ7XHJcbn07XHJcblxyXG4vKipcclxuICogQ2FsY3VsYXRlcyB0aGUgc2NyZWVuIHJlY3RhbmdsZSB2aXNpYmxlIGZyb20gdGhlIGxlZnQgZXllIGZvciB0aGVcclxuICogY3VycmVudCBkZXZpY2UgYW5kIHNjcmVlbiBwYXJhbWV0ZXJzLlxyXG4gKi9cclxuRGV2aWNlSW5mby5wcm90b3R5cGUuZ2V0TGVmdEV5ZVZpc2libGVTY3JlZW5SZWN0ID0gZnVuY3Rpb24odW5kaXN0b3J0ZWRGcnVzdHVtKSB7XHJcbiAgdmFyIHZpZXdlciA9IHRoaXMudmlld2VyO1xyXG4gIHZhciBkZXZpY2UgPSB0aGlzLmRldmljZTtcclxuXHJcbiAgdmFyIGRpc3QgPSB2aWV3ZXIuc2NyZWVuTGVuc0Rpc3RhbmNlO1xyXG4gIHZhciBleWVYID0gKGRldmljZS53aWR0aE1ldGVycyAtIHZpZXdlci5pbnRlckxlbnNEaXN0YW5jZSkgLyAyO1xyXG4gIHZhciBleWVZID0gdmlld2VyLmJhc2VsaW5lTGVuc0Rpc3RhbmNlIC0gZGV2aWNlLmJldmVsTWV0ZXJzO1xyXG4gIHZhciBsZWZ0ID0gKHVuZGlzdG9ydGVkRnJ1c3R1bVswXSAqIGRpc3QgKyBleWVYKSAvIGRldmljZS53aWR0aE1ldGVycztcclxuICB2YXIgdG9wID0gKHVuZGlzdG9ydGVkRnJ1c3R1bVsxXSAqIGRpc3QgKyBleWVZKSAvIGRldmljZS5oZWlnaHRNZXRlcnM7XHJcbiAgdmFyIHJpZ2h0ID0gKHVuZGlzdG9ydGVkRnJ1c3R1bVsyXSAqIGRpc3QgKyBleWVYKSAvIGRldmljZS53aWR0aE1ldGVycztcclxuICB2YXIgYm90dG9tID0gKHVuZGlzdG9ydGVkRnJ1c3R1bVszXSAqIGRpc3QgKyBleWVZKSAvIGRldmljZS5oZWlnaHRNZXRlcnM7XHJcbiAgcmV0dXJuIHtcclxuICAgIHg6IGxlZnQsXHJcbiAgICB5OiBib3R0b20sXHJcbiAgICB3aWR0aDogcmlnaHQgLSBsZWZ0LFxyXG4gICAgaGVpZ2h0OiB0b3AgLSBib3R0b21cclxuICB9O1xyXG59O1xyXG5cclxuRGV2aWNlSW5mby5wcm90b3R5cGUuZ2V0RmllbGRPZlZpZXdMZWZ0RXllID0gZnVuY3Rpb24ob3B0X2lzVW5kaXN0b3J0ZWQpIHtcclxuICByZXR1cm4gb3B0X2lzVW5kaXN0b3J0ZWQgPyB0aGlzLmdldFVuZGlzdG9ydGVkRmllbGRPZlZpZXdMZWZ0RXllKCkgOlxyXG4gICAgICB0aGlzLmdldERpc3RvcnRlZEZpZWxkT2ZWaWV3TGVmdEV5ZSgpO1xyXG59O1xyXG5cclxuRGV2aWNlSW5mby5wcm90b3R5cGUuZ2V0RmllbGRPZlZpZXdSaWdodEV5ZSA9IGZ1bmN0aW9uKG9wdF9pc1VuZGlzdG9ydGVkKSB7XHJcbiAgdmFyIGZvdiA9IHRoaXMuZ2V0RmllbGRPZlZpZXdMZWZ0RXllKG9wdF9pc1VuZGlzdG9ydGVkKTtcclxuICByZXR1cm4ge1xyXG4gICAgbGVmdERlZ3JlZXM6IGZvdi5yaWdodERlZ3JlZXMsXHJcbiAgICByaWdodERlZ3JlZXM6IGZvdi5sZWZ0RGVncmVlcyxcclxuICAgIHVwRGVncmVlczogZm92LnVwRGVncmVlcyxcclxuICAgIGRvd25EZWdyZWVzOiBmb3YuZG93bkRlZ3JlZXNcclxuICB9O1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIENhbGN1bGF0ZXMgdW5kaXN0b3J0ZWQgZmllbGQgb2YgdmlldyBmb3IgdGhlIGxlZnQgZXllLlxyXG4gKi9cclxuRGV2aWNlSW5mby5wcm90b3R5cGUuZ2V0VW5kaXN0b3J0ZWRGaWVsZE9mVmlld0xlZnRFeWUgPSBmdW5jdGlvbigpIHtcclxuICB2YXIgcCA9IHRoaXMuZ2V0VW5kaXN0b3J0ZWRQYXJhbXNfKCk7XHJcblxyXG4gIHJldHVybiB7XHJcbiAgICBsZWZ0RGVncmVlczogTWF0aFV0aWwucmFkVG9EZWcgKiBNYXRoLmF0YW4ocC5vdXRlckRpc3QpLFxyXG4gICAgcmlnaHREZWdyZWVzOiBNYXRoVXRpbC5yYWRUb0RlZyAqIE1hdGguYXRhbihwLmlubmVyRGlzdCksXHJcbiAgICBkb3duRGVncmVlczogTWF0aFV0aWwucmFkVG9EZWcgKiBNYXRoLmF0YW4ocC5ib3R0b21EaXN0KSxcclxuICAgIHVwRGVncmVlczogTWF0aFV0aWwucmFkVG9EZWcgKiBNYXRoLmF0YW4ocC50b3BEaXN0KVxyXG4gIH07XHJcbn07XHJcblxyXG5EZXZpY2VJbmZvLnByb3RvdHlwZS5nZXRVbmRpc3RvcnRlZFZpZXdwb3J0TGVmdEV5ZSA9IGZ1bmN0aW9uKCkge1xyXG4gIHZhciBwID0gdGhpcy5nZXRVbmRpc3RvcnRlZFBhcmFtc18oKTtcclxuICB2YXIgdmlld2VyID0gdGhpcy52aWV3ZXI7XHJcbiAgdmFyIGRldmljZSA9IHRoaXMuZGV2aWNlO1xyXG5cclxuICAvLyBEaXN0YW5jZXMgc3RvcmVkIGluIGxvY2FsIHZhcmlhYmxlcyBhcmUgaW4gdGFuLWFuZ2xlIHVuaXRzIHVubGVzcyBvdGhlcndpc2VcclxuICAvLyBub3RlZC5cclxuICB2YXIgZXllVG9TY3JlZW5EaXN0YW5jZSA9IHZpZXdlci5zY3JlZW5MZW5zRGlzdGFuY2U7XHJcbiAgdmFyIHNjcmVlbldpZHRoID0gZGV2aWNlLndpZHRoTWV0ZXJzIC8gZXllVG9TY3JlZW5EaXN0YW5jZTtcclxuICB2YXIgc2NyZWVuSGVpZ2h0ID0gZGV2aWNlLmhlaWdodE1ldGVycyAvIGV5ZVRvU2NyZWVuRGlzdGFuY2U7XHJcbiAgdmFyIHhQeFBlclRhbkFuZ2xlID0gZGV2aWNlLndpZHRoIC8gc2NyZWVuV2lkdGg7XHJcbiAgdmFyIHlQeFBlclRhbkFuZ2xlID0gZGV2aWNlLmhlaWdodCAvIHNjcmVlbkhlaWdodDtcclxuXHJcbiAgdmFyIHggPSBNYXRoLnJvdW5kKChwLmV5ZVBvc1ggLSBwLm91dGVyRGlzdCkgKiB4UHhQZXJUYW5BbmdsZSk7XHJcbiAgdmFyIHkgPSBNYXRoLnJvdW5kKChwLmV5ZVBvc1kgLSBwLmJvdHRvbURpc3QpICogeVB4UGVyVGFuQW5nbGUpO1xyXG4gIHJldHVybiB7XHJcbiAgICB4OiB4LFxyXG4gICAgeTogeSxcclxuICAgIHdpZHRoOiBNYXRoLnJvdW5kKChwLmV5ZVBvc1ggKyBwLmlubmVyRGlzdCkgKiB4UHhQZXJUYW5BbmdsZSkgLSB4LFxyXG4gICAgaGVpZ2h0OiBNYXRoLnJvdW5kKChwLmV5ZVBvc1kgKyBwLnRvcERpc3QpICogeVB4UGVyVGFuQW5nbGUpIC0geVxyXG4gIH07XHJcbn07XHJcblxyXG5EZXZpY2VJbmZvLnByb3RvdHlwZS5nZXRVbmRpc3RvcnRlZFBhcmFtc18gPSBmdW5jdGlvbigpIHtcclxuICB2YXIgdmlld2VyID0gdGhpcy52aWV3ZXI7XHJcbiAgdmFyIGRldmljZSA9IHRoaXMuZGV2aWNlO1xyXG4gIHZhciBkaXN0b3J0aW9uID0gdGhpcy5kaXN0b3J0aW9uO1xyXG5cclxuICAvLyBNb3N0IG9mIHRoZXNlIHZhcmlhYmxlcyBpbiB0YW4tYW5nbGUgdW5pdHMuXHJcbiAgdmFyIGV5ZVRvU2NyZWVuRGlzdGFuY2UgPSB2aWV3ZXIuc2NyZWVuTGVuc0Rpc3RhbmNlO1xyXG4gIHZhciBoYWxmTGVuc0Rpc3RhbmNlID0gdmlld2VyLmludGVyTGVuc0Rpc3RhbmNlIC8gMiAvIGV5ZVRvU2NyZWVuRGlzdGFuY2U7XHJcbiAgdmFyIHNjcmVlbldpZHRoID0gZGV2aWNlLndpZHRoTWV0ZXJzIC8gZXllVG9TY3JlZW5EaXN0YW5jZTtcclxuICB2YXIgc2NyZWVuSGVpZ2h0ID0gZGV2aWNlLmhlaWdodE1ldGVycyAvIGV5ZVRvU2NyZWVuRGlzdGFuY2U7XHJcblxyXG4gIHZhciBleWVQb3NYID0gc2NyZWVuV2lkdGggLyAyIC0gaGFsZkxlbnNEaXN0YW5jZTtcclxuICB2YXIgZXllUG9zWSA9ICh2aWV3ZXIuYmFzZWxpbmVMZW5zRGlzdGFuY2UgLSBkZXZpY2UuYmV2ZWxNZXRlcnMpIC8gZXllVG9TY3JlZW5EaXN0YW5jZTtcclxuXHJcbiAgdmFyIG1heEZvdiA9IHZpZXdlci5mb3Y7XHJcbiAgdmFyIHZpZXdlck1heCA9IGRpc3RvcnRpb24uZGlzdG9ydEludmVyc2UoTWF0aC50YW4oTWF0aFV0aWwuZGVnVG9SYWQgKiBtYXhGb3YpKTtcclxuICB2YXIgb3V0ZXJEaXN0ID0gTWF0aC5taW4oZXllUG9zWCwgdmlld2VyTWF4KTtcclxuICB2YXIgaW5uZXJEaXN0ID0gTWF0aC5taW4oaGFsZkxlbnNEaXN0YW5jZSwgdmlld2VyTWF4KTtcclxuICB2YXIgYm90dG9tRGlzdCA9IE1hdGgubWluKGV5ZVBvc1ksIHZpZXdlck1heCk7XHJcbiAgdmFyIHRvcERpc3QgPSBNYXRoLm1pbihzY3JlZW5IZWlnaHQgLSBleWVQb3NZLCB2aWV3ZXJNYXgpO1xyXG5cclxuICByZXR1cm4ge1xyXG4gICAgb3V0ZXJEaXN0OiBvdXRlckRpc3QsXHJcbiAgICBpbm5lckRpc3Q6IGlubmVyRGlzdCxcclxuICAgIHRvcERpc3Q6IHRvcERpc3QsXHJcbiAgICBib3R0b21EaXN0OiBib3R0b21EaXN0LFxyXG4gICAgZXllUG9zWDogZXllUG9zWCxcclxuICAgIGV5ZVBvc1k6IGV5ZVBvc1lcclxuICB9O1xyXG59O1xyXG5cclxuXHJcbmZ1bmN0aW9uIENhcmRib2FyZFZpZXdlcihwYXJhbXMpIHtcclxuICAvLyBBIG1hY2hpbmUgcmVhZGFibGUgSUQuXHJcbiAgdGhpcy5pZCA9IHBhcmFtcy5pZDtcclxuICAvLyBBIGh1bWFuIHJlYWRhYmxlIGxhYmVsLlxyXG4gIHRoaXMubGFiZWwgPSBwYXJhbXMubGFiZWw7XHJcblxyXG4gIC8vIEZpZWxkIG9mIHZpZXcgaW4gZGVncmVlcyAocGVyIHNpZGUpLlxyXG4gIHRoaXMuZm92ID0gcGFyYW1zLmZvdjtcclxuXHJcbiAgLy8gRGlzdGFuY2UgYmV0d2VlbiBsZW5zIGNlbnRlcnMgaW4gbWV0ZXJzLlxyXG4gIHRoaXMuaW50ZXJMZW5zRGlzdGFuY2UgPSBwYXJhbXMuaW50ZXJMZW5zRGlzdGFuY2U7XHJcbiAgLy8gRGlzdGFuY2UgYmV0d2VlbiB2aWV3ZXIgYmFzZWxpbmUgYW5kIGxlbnMgY2VudGVyIGluIG1ldGVycy5cclxuICB0aGlzLmJhc2VsaW5lTGVuc0Rpc3RhbmNlID0gcGFyYW1zLmJhc2VsaW5lTGVuc0Rpc3RhbmNlO1xyXG4gIC8vIFNjcmVlbi10by1sZW5zIGRpc3RhbmNlIGluIG1ldGVycy5cclxuICB0aGlzLnNjcmVlbkxlbnNEaXN0YW5jZSA9IHBhcmFtcy5zY3JlZW5MZW5zRGlzdGFuY2U7XHJcblxyXG4gIC8vIERpc3RvcnRpb24gY29lZmZpY2llbnRzLlxyXG4gIHRoaXMuZGlzdG9ydGlvbkNvZWZmaWNpZW50cyA9IHBhcmFtcy5kaXN0b3J0aW9uQ29lZmZpY2llbnRzO1xyXG4gIC8vIEludmVyc2UgZGlzdG9ydGlvbiBjb2VmZmljaWVudHMuXHJcbiAgLy8gVE9ETzogQ2FsY3VsYXRlIHRoZXNlIGZyb20gZGlzdG9ydGlvbkNvZWZmaWNpZW50cyBpbiB0aGUgZnV0dXJlLlxyXG4gIHRoaXMuaW52ZXJzZUNvZWZmaWNpZW50cyA9IHBhcmFtcy5pbnZlcnNlQ29lZmZpY2llbnRzO1xyXG59XHJcblxyXG4vLyBFeHBvcnQgdmlld2VyIGluZm9ybWF0aW9uLlxyXG5EZXZpY2VJbmZvLlZpZXdlcnMgPSBWaWV3ZXJzO1xyXG5tb2R1bGUuZXhwb3J0cyA9IERldmljZUluZm87XHJcblxyXG59LHtcIi4vZGlzdG9ydGlvbi9kaXN0b3J0aW9uLmpzXCI6OSxcIi4vbWF0aC11dGlsLmpzXCI6MTQsXCIuL3V0aWwuanNcIjoyMn1dLDg6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xyXG4vKlxyXG4gKiBDb3B5cmlnaHQgMjAxNiBHb29nbGUgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBWUkRpc3BsYXkgPSBfZGVyZXFfKCcuL2Jhc2UuanMnKS5WUkRpc3BsYXk7XHJcbnZhciBITURWUkRldmljZSA9IF9kZXJlcV8oJy4vYmFzZS5qcycpLkhNRFZSRGV2aWNlO1xyXG52YXIgUG9zaXRpb25TZW5zb3JWUkRldmljZSA9IF9kZXJlcV8oJy4vYmFzZS5qcycpLlBvc2l0aW9uU2Vuc29yVlJEZXZpY2U7XHJcblxyXG4vKipcclxuICogV3JhcHMgYSBWUkRpc3BsYXkgYW5kIGV4cG9zZXMgaXQgYXMgYSBITURWUkRldmljZVxyXG4gKi9cclxuZnVuY3Rpb24gVlJEaXNwbGF5SE1ERGV2aWNlKGRpc3BsYXkpIHtcclxuICB0aGlzLmRpc3BsYXkgPSBkaXNwbGF5O1xyXG5cclxuICB0aGlzLmhhcmR3YXJlVW5pdElkID0gZGlzcGxheS5kaXNwbGF5SWQ7XHJcbiAgdGhpcy5kZXZpY2VJZCA9ICd3ZWJ2ci1wb2x5ZmlsbDpITUQ6JyArIGRpc3BsYXkuZGlzcGxheUlkO1xyXG4gIHRoaXMuZGV2aWNlTmFtZSA9IGRpc3BsYXkuZGlzcGxheU5hbWUgKyAnIChITUQpJztcclxufVxyXG5WUkRpc3BsYXlITUREZXZpY2UucHJvdG90eXBlID0gbmV3IEhNRFZSRGV2aWNlKCk7XHJcblxyXG5WUkRpc3BsYXlITUREZXZpY2UucHJvdG90eXBlLmdldEV5ZVBhcmFtZXRlcnMgPSBmdW5jdGlvbih3aGljaEV5ZSkge1xyXG4gIHZhciBleWVQYXJhbWV0ZXJzID0gdGhpcy5kaXNwbGF5LmdldEV5ZVBhcmFtZXRlcnMod2hpY2hFeWUpO1xyXG5cclxuICByZXR1cm4ge1xyXG4gICAgY3VycmVudEZpZWxkT2ZWaWV3OiBleWVQYXJhbWV0ZXJzLmZpZWxkT2ZWaWV3LFxyXG4gICAgbWF4aW11bUZpZWxkT2ZWaWV3OiBleWVQYXJhbWV0ZXJzLmZpZWxkT2ZWaWV3LFxyXG4gICAgbWluaW11bUZpZWxkT2ZWaWV3OiBleWVQYXJhbWV0ZXJzLmZpZWxkT2ZWaWV3LFxyXG4gICAgcmVjb21tZW5kZWRGaWVsZE9mVmlldzogZXllUGFyYW1ldGVycy5maWVsZE9mVmlldyxcclxuICAgIGV5ZVRyYW5zbGF0aW9uOiB7IHg6IGV5ZVBhcmFtZXRlcnMub2Zmc2V0WzBdLCB5OiBleWVQYXJhbWV0ZXJzLm9mZnNldFsxXSwgejogZXllUGFyYW1ldGVycy5vZmZzZXRbMl0gfSxcclxuICAgIHJlbmRlclJlY3Q6IHtcclxuICAgICAgeDogKHdoaWNoRXllID09ICdyaWdodCcpID8gZXllUGFyYW1ldGVycy5yZW5kZXJXaWR0aCA6IDAsXHJcbiAgICAgIHk6IDAsXHJcbiAgICAgIHdpZHRoOiBleWVQYXJhbWV0ZXJzLnJlbmRlcldpZHRoLFxyXG4gICAgICBoZWlnaHQ6IGV5ZVBhcmFtZXRlcnMucmVuZGVySGVpZ2h0XHJcbiAgICB9XHJcbiAgfTtcclxufTtcclxuXHJcblZSRGlzcGxheUhNRERldmljZS5wcm90b3R5cGUuc2V0RmllbGRPZlZpZXcgPVxyXG4gICAgZnVuY3Rpb24ob3B0X2ZvdkxlZnQsIG9wdF9mb3ZSaWdodCwgb3B0X3pOZWFyLCBvcHRfekZhcikge1xyXG4gIC8vIE5vdCBzdXBwb3J0ZWQuIGdldEV5ZVBhcmFtZXRlcnMgcmVwb3J0cyB0aGF0IHRoZSBtaW4sIG1heCwgYW5kIHJlY29tbWVuZGVkXHJcbiAgLy8gRm9WIGlzIGFsbCB0aGUgc2FtZSwgc28gbm8gYWRqdXN0bWVudCBjYW4gYmUgbWFkZS5cclxufTtcclxuXHJcbi8vIFRPRE86IE5lZWQgdG8gaG9vayByZXF1ZXN0RnVsbHNjcmVlbiB0byBzZWUgaWYgYSB3cmFwcGVkIFZSRGlzcGxheSB3YXMgcGFzc2VkXHJcbi8vIGluIGFzIGFuIG9wdGlvbi4gSWYgc28gd2Ugc2hvdWxkIHByZXZlbnQgdGhlIGRlZmF1bHQgZnVsbHNjcmVlbiBiZWhhdmlvciBhbmRcclxuLy8gY2FsbCBWUkRpc3BsYXkucmVxdWVzdFByZXNlbnQgaW5zdGVhZC5cclxuXHJcbi8qKlxyXG4gKiBXcmFwcyBhIFZSRGlzcGxheSBhbmQgZXhwb3NlcyBpdCBhcyBhIFBvc2l0aW9uU2Vuc29yVlJEZXZpY2VcclxuICovXHJcbmZ1bmN0aW9uIFZSRGlzcGxheVBvc2l0aW9uU2Vuc29yRGV2aWNlKGRpc3BsYXkpIHtcclxuICB0aGlzLmRpc3BsYXkgPSBkaXNwbGF5O1xyXG5cclxuICB0aGlzLmhhcmR3YXJlVW5pdElkID0gZGlzcGxheS5kaXNwbGF5SWQ7XHJcbiAgdGhpcy5kZXZpY2VJZCA9ICd3ZWJ2ci1wb2x5ZmlsbDpQb3NpdGlvblNlbnNvcjogJyArIGRpc3BsYXkuZGlzcGxheUlkO1xyXG4gIHRoaXMuZGV2aWNlTmFtZSA9IGRpc3BsYXkuZGlzcGxheU5hbWUgKyAnIChQb3NpdGlvblNlbnNvciknO1xyXG59XHJcblZSRGlzcGxheVBvc2l0aW9uU2Vuc29yRGV2aWNlLnByb3RvdHlwZSA9IG5ldyBQb3NpdGlvblNlbnNvclZSRGV2aWNlKCk7XHJcblxyXG5WUkRpc3BsYXlQb3NpdGlvblNlbnNvckRldmljZS5wcm90b3R5cGUuZ2V0U3RhdGUgPSBmdW5jdGlvbigpIHtcclxuICB2YXIgcG9zZSA9IHRoaXMuZGlzcGxheS5nZXRQb3NlKCk7XHJcbiAgcmV0dXJuIHtcclxuICAgIHBvc2l0aW9uOiBwb3NlLnBvc2l0aW9uID8geyB4OiBwb3NlLnBvc2l0aW9uWzBdLCB5OiBwb3NlLnBvc2l0aW9uWzFdLCB6OiBwb3NlLnBvc2l0aW9uWzJdIH0gOiBudWxsLFxyXG4gICAgb3JpZW50YXRpb246IHBvc2Uub3JpZW50YXRpb24gPyB7IHg6IHBvc2Uub3JpZW50YXRpb25bMF0sIHk6IHBvc2Uub3JpZW50YXRpb25bMV0sIHo6IHBvc2Uub3JpZW50YXRpb25bMl0sIHc6IHBvc2Uub3JpZW50YXRpb25bM10gfSA6IG51bGwsXHJcbiAgICBsaW5lYXJWZWxvY2l0eTogbnVsbCxcclxuICAgIGxpbmVhckFjY2VsZXJhdGlvbjogbnVsbCxcclxuICAgIGFuZ3VsYXJWZWxvY2l0eTogbnVsbCxcclxuICAgIGFuZ3VsYXJBY2NlbGVyYXRpb246IG51bGxcclxuICB9O1xyXG59O1xyXG5cclxuVlJEaXNwbGF5UG9zaXRpb25TZW5zb3JEZXZpY2UucHJvdG90eXBlLnJlc2V0U3RhdGUgPSBmdW5jdGlvbigpIHtcclxuICByZXR1cm4gdGhpcy5wb3NpdGlvbkRldmljZS5yZXNldFBvc2UoKTtcclxufTtcclxuXHJcblxyXG5tb2R1bGUuZXhwb3J0cy5WUkRpc3BsYXlITUREZXZpY2UgPSBWUkRpc3BsYXlITUREZXZpY2U7XHJcbm1vZHVsZS5leHBvcnRzLlZSRGlzcGxheVBvc2l0aW9uU2Vuc29yRGV2aWNlID0gVlJEaXNwbGF5UG9zaXRpb25TZW5zb3JEZXZpY2U7XHJcblxyXG5cclxufSx7XCIuL2Jhc2UuanNcIjoyfV0sOTpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XHJcbi8qKlxyXG4gKiBUT0RPKHNtdXMpOiBJbXBsZW1lbnQgY29lZmZpY2llbnQgaW52ZXJzaW9uLlxyXG4gKi9cclxuZnVuY3Rpb24gRGlzdG9ydGlvbihjb2VmZmljaWVudHMpIHtcclxuICB0aGlzLmNvZWZmaWNpZW50cyA9IGNvZWZmaWNpZW50cztcclxufVxyXG5cclxuLyoqXHJcbiAqIENhbGN1bGF0ZXMgdGhlIGludmVyc2UgZGlzdG9ydGlvbiBmb3IgYSByYWRpdXMuXHJcbiAqIDwvcD48cD5cclxuICogQWxsb3dzIHRvIGNvbXB1dGUgdGhlIG9yaWdpbmFsIHVuZGlzdG9ydGVkIHJhZGl1cyBmcm9tIGEgZGlzdG9ydGVkIG9uZS5cclxuICogU2VlIGFsc28gZ2V0QXBwcm94aW1hdGVJbnZlcnNlRGlzdG9ydGlvbigpIGZvciBhIGZhc3RlciBidXQgcG90ZW50aWFsbHlcclxuICogbGVzcyBhY2N1cmF0ZSBtZXRob2QuXHJcbiAqXHJcbiAqIEBwYXJhbSB7TnVtYmVyfSByYWRpdXMgRGlzdG9ydGVkIHJhZGl1cyBmcm9tIHRoZSBsZW5zIGNlbnRlciBpbiB0YW4tYW5nbGUgdW5pdHMuXHJcbiAqIEByZXR1cm4ge051bWJlcn0gVGhlIHVuZGlzdG9ydGVkIHJhZGl1cyBpbiB0YW4tYW5nbGUgdW5pdHMuXHJcbiAqL1xyXG5EaXN0b3J0aW9uLnByb3RvdHlwZS5kaXN0b3J0SW52ZXJzZSA9IGZ1bmN0aW9uKHJhZGl1cykge1xyXG4gIC8vIFNlY2FudCBtZXRob2QuXHJcbiAgdmFyIHIwID0gMDtcclxuICB2YXIgcjEgPSAxO1xyXG4gIHZhciBkcjAgPSByYWRpdXMgLSB0aGlzLmRpc3RvcnQocjApO1xyXG4gIHdoaWxlIChNYXRoLmFicyhyMSAtIHIwKSA+IDAuMDAwMSAvKiogMC4xbW0gKi8pIHtcclxuICAgIHZhciBkcjEgPSByYWRpdXMgLSB0aGlzLmRpc3RvcnQocjEpO1xyXG4gICAgdmFyIHIyID0gcjEgLSBkcjEgKiAoKHIxIC0gcjApIC8gKGRyMSAtIGRyMCkpO1xyXG4gICAgcjAgPSByMTtcclxuICAgIHIxID0gcjI7XHJcbiAgICBkcjAgPSBkcjE7XHJcbiAgfVxyXG4gIHJldHVybiByMTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBEaXN0b3J0cyBhIHJhZGl1cyBieSBpdHMgZGlzdG9ydGlvbiBmYWN0b3IgZnJvbSB0aGUgY2VudGVyIG9mIHRoZSBsZW5zZXMuXHJcbiAqXHJcbiAqIEBwYXJhbSB7TnVtYmVyfSByYWRpdXMgUmFkaXVzIGZyb20gdGhlIGxlbnMgY2VudGVyIGluIHRhbi1hbmdsZSB1bml0cy5cclxuICogQHJldHVybiB7TnVtYmVyfSBUaGUgZGlzdG9ydGVkIHJhZGl1cyBpbiB0YW4tYW5nbGUgdW5pdHMuXHJcbiAqL1xyXG5EaXN0b3J0aW9uLnByb3RvdHlwZS5kaXN0b3J0ID0gZnVuY3Rpb24ocmFkaXVzKSB7XHJcbiAgdmFyIHIyID0gcmFkaXVzICogcmFkaXVzO1xyXG4gIHZhciByZXQgPSAwO1xyXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5jb2VmZmljaWVudHMubGVuZ3RoOyBpKyspIHtcclxuICAgIHJldCA9IHIyICogKHJldCArIHRoaXMuY29lZmZpY2llbnRzW2ldKTtcclxuICB9XHJcbiAgcmV0dXJuIChyZXQgKyAxKSAqIHJhZGl1cztcclxufTtcclxuXHJcbi8vIEZ1bmN0aW9ucyBiZWxvdyByb3VnaGx5IHBvcnRlZCBmcm9tXHJcbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9nb29nbGVzYW1wbGVzL2NhcmRib2FyZC11bml0eS9ibG9iL21hc3Rlci9DYXJkYm9hcmQvU2NyaXB0cy9DYXJkYm9hcmRQcm9maWxlLmNzI0w0MTJcclxuXHJcbi8vIFNvbHZlcyBhIHNtYWxsIGxpbmVhciBlcXVhdGlvbiB2aWEgZGVzdHJ1Y3RpdmUgZ2F1c3NpYW5cclxuLy8gZWxpbWluYXRpb24gYW5kIGJhY2sgc3Vic3RpdHV0aW9uLiAgVGhpcyBpc24ndCBnZW5lcmljIG51bWVyaWNcclxuLy8gY29kZSwgaXQncyBqdXN0IGEgcXVpY2sgaGFjayB0byB3b3JrIHdpdGggdGhlIGdlbmVyYWxseVxyXG4vLyB3ZWxsLWJlaGF2ZWQgc3ltbWV0cmljIG1hdHJpY2VzIGZvciBsZWFzdC1zcXVhcmVzIGZpdHRpbmcuXHJcbi8vIE5vdCBpbnRlbmRlZCBmb3IgcmV1c2UuXHJcbi8vXHJcbi8vIEBwYXJhbSBhIElucHV0IHBvc2l0aXZlIGRlZmluaXRlIHN5bW1ldHJpY2FsIG1hdHJpeC4gRGVzdHJveWVkXHJcbi8vICAgICBkdXJpbmcgY2FsY3VsYXRpb24uXHJcbi8vIEBwYXJhbSB5IElucHV0IHJpZ2h0LWhhbmQtc2lkZSB2YWx1ZXMuIERlc3Ryb3llZCBkdXJpbmcgY2FsY3VsYXRpb24uXHJcbi8vIEByZXR1cm4gUmVzdWx0aW5nIHggdmFsdWUgdmVjdG9yLlxyXG4vL1xyXG5EaXN0b3J0aW9uLnByb3RvdHlwZS5zb2x2ZUxpbmVhcl8gPSBmdW5jdGlvbihhLCB5KSB7XHJcbiAgdmFyIG4gPSBhLmxlbmd0aDtcclxuXHJcbiAgLy8gR2F1c3NpYW4gZWxpbWluYXRpb24gKG5vIHJvdyBleGNoYW5nZSkgdG8gdHJpYW5ndWxhciBtYXRyaXguXHJcbiAgLy8gVGhlIGlucHV0IG1hdHJpeCBpcyBhIEFeVCBBIHByb2R1Y3Qgd2hpY2ggc2hvdWxkIGJlIGEgcG9zaXRpdmVcclxuICAvLyBkZWZpbml0ZSBzeW1tZXRyaWNhbCBtYXRyaXgsIGFuZCBpZiBJIHJlbWVtYmVyIG15IGxpbmVhclxyXG4gIC8vIGFsZ2VicmEgcmlnaHQgdGhpcyBpbXBsaWVzIHRoYXQgdGhlIHBpdm90cyB3aWxsIGJlIG5vbnplcm8gYW5kXHJcbiAgLy8gY2FsY3VsYXRpb25zIHN1ZmZpY2llbnRseSBhY2N1cmF0ZSB3aXRob3V0IG5lZWRpbmcgcm93XHJcbiAgLy8gZXhjaGFuZ2UuXHJcbiAgZm9yICh2YXIgaiA9IDA7IGogPCBuIC0gMTsgKytqKSB7XHJcbiAgICBmb3IgKHZhciBrID0gaiArIDE7IGsgPCBuOyArK2spIHtcclxuICAgICAgdmFyIHAgPSBhW2pdW2tdIC8gYVtqXVtqXTtcclxuICAgICAgZm9yICh2YXIgaSA9IGogKyAxOyBpIDwgbjsgKytpKSB7XHJcbiAgICAgICAgYVtpXVtrXSAtPSBwICogYVtpXVtqXTtcclxuICAgICAgfVxyXG4gICAgICB5W2tdIC09IHAgKiB5W2pdO1xyXG4gICAgfVxyXG4gIH1cclxuICAvLyBGcm9tIHRoaXMgcG9pbnQgb24sIG9ubHkgdGhlIG1hdHJpeCBlbGVtZW50cyBhW2pdW2ldIHdpdGggaT49aiBhcmVcclxuICAvLyB2YWxpZC4gVGhlIGVsaW1pbmF0aW9uIGRvZXNuJ3QgZmlsbCBpbiBlbGltaW5hdGVkIDAgdmFsdWVzLlxyXG5cclxuICB2YXIgeCA9IG5ldyBBcnJheShuKTtcclxuXHJcbiAgLy8gQmFjayBzdWJzdGl0dXRpb24uXHJcbiAgZm9yICh2YXIgaiA9IG4gLSAxOyBqID49IDA7IC0taikge1xyXG4gICAgdmFyIHYgPSB5W2pdO1xyXG4gICAgZm9yICh2YXIgaSA9IGogKyAxOyBpIDwgbjsgKytpKSB7XHJcbiAgICAgIHYgLT0gYVtpXVtqXSAqIHhbaV07XHJcbiAgICB9XHJcbiAgICB4W2pdID0gdiAvIGFbal1bal07XHJcbiAgfVxyXG5cclxuICByZXR1cm4geDtcclxufTtcclxuXHJcbi8vIFNvbHZlcyBhIGxlYXN0LXNxdWFyZXMgbWF0cml4IGVxdWF0aW9uLiAgR2l2ZW4gdGhlIGVxdWF0aW9uIEEgKiB4ID0geSwgY2FsY3VsYXRlIHRoZVxyXG4vLyBsZWFzdC1zcXVhcmUgZml0IHggPSBpbnZlcnNlKEEgKiB0cmFuc3Bvc2UoQSkpICogdHJhbnNwb3NlKEEpICogeS4gIFRoZSB3YXkgdGhpcyB3b3Jrc1xyXG4vLyBpcyB0aGF0LCB3aGlsZSBBIGlzIHR5cGljYWxseSBub3QgYSBzcXVhcmUgbWF0cml4IChhbmQgaGVuY2Ugbm90IGludmVydGlibGUpLCBBICogdHJhbnNwb3NlKEEpXHJcbi8vIGlzIGFsd2F5cyBzcXVhcmUuICBUaGF0IGlzOlxyXG4vLyAgIEEgKiB4ID0geVxyXG4vLyAgIHRyYW5zcG9zZShBKSAqIChBICogeCkgPSB0cmFuc3Bvc2UoQSkgKiB5ICAgPC0gbXVsdGlwbHkgYm90aCBzaWRlcyBieSB0cmFuc3Bvc2UoQSlcclxuLy8gICAodHJhbnNwb3NlKEEpICogQSkgKiB4ID0gdHJhbnNwb3NlKEEpICogeSAgIDwtIGFzc29jaWF0aXZpdHlcclxuLy8gICB4ID0gaW52ZXJzZSh0cmFuc3Bvc2UoQSkgKiBBKSAqIHRyYW5zcG9zZShBKSAqIHkgIDwtIHNvbHZlIGZvciB4XHJcbi8vIE1hdHJpeCBBJ3Mgcm93IGNvdW50IChmaXJzdCBpbmRleCkgbXVzdCBtYXRjaCB5J3MgdmFsdWUgY291bnQuICBBJ3MgY29sdW1uIGNvdW50IChzZWNvbmQgaW5kZXgpXHJcbi8vIGRldGVybWluZXMgdGhlIGxlbmd0aCBvZiB0aGUgcmVzdWx0IHZlY3RvciB4LlxyXG5EaXN0b3J0aW9uLnByb3RvdHlwZS5zb2x2ZUxlYXN0U3F1YXJlc18gPSBmdW5jdGlvbihtYXRBLCB2ZWNZKSB7XHJcbiAgdmFyIGksIGosIGssIHN1bTtcclxuICB2YXIgbnVtU2FtcGxlcyA9IG1hdEEubGVuZ3RoO1xyXG4gIHZhciBudW1Db2VmZmljaWVudHMgPSBtYXRBWzBdLmxlbmd0aDtcclxuICBpZiAobnVtU2FtcGxlcyAhPSB2ZWNZLkxlbmd0aCkge1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKFwiTWF0cml4IC8gdmVjdG9yIGRpbWVuc2lvbiBtaXNtYXRjaFwiKTtcclxuICB9XHJcblxyXG4gIC8vIENhbGN1bGF0ZSB0cmFuc3Bvc2UoQSkgKiBBXHJcbiAgdmFyIG1hdEFUQSA9IG5ldyBBcnJheShudW1Db2VmZmljaWVudHMpO1xyXG4gIGZvciAoayA9IDA7IGsgPCBudW1Db2VmZmljaWVudHM7ICsraykge1xyXG4gICAgbWF0QVRBW2tdID0gbmV3IEFycmF5KG51bUNvZWZmaWNpZW50cyk7XHJcbiAgICBmb3IgKGogPSAwOyBqIDwgbnVtQ29lZmZpY2llbnRzOyArK2opIHtcclxuICAgICAgc3VtID0gMDtcclxuICAgICAgZm9yIChpID0gMDsgaSA8IG51bVNhbXBsZXM7ICsraSkge1xyXG4gICAgICAgIHN1bSArPSBtYXRBW2pdW2ldICogbWF0QVtrXVtpXTtcclxuICAgICAgfVxyXG4gICAgICBtYXRBVEFba11bal0gPSBzdW07XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBDYWxjdWxhdGUgdHJhbnNwb3NlKEEpICogeVxyXG4gIHZhciB2ZWNBVFkgPSBuZXcgQXJyYXkobnVtQ29lZmZpY2llbnRzKTtcclxuICBmb3IgKGogPSAwOyBqIDwgbnVtQ29lZmZpY2llbnRzOyArK2opIHtcclxuICAgIHN1bSA9IDA7XHJcbiAgICBmb3IgKGkgPSAwOyBpIDwgbnVtU2FtcGxlczsgKytpKSB7XHJcbiAgICAgIHN1bSArPSBtYXRBW2pdW2ldICogdmVjWVtpXTtcclxuICAgIH1cclxuICAgIHZlY0FUWVtqXSA9IHN1bTtcclxuICB9XHJcblxyXG4gIC8vIE5vdyBzb2x2ZSAoQSAqIHRyYW5zcG9zZShBKSkgKiB4ID0gdHJhbnNwb3NlKEEpICogeS5cclxuICByZXR1cm4gdGhpcy5zb2x2ZUxpbmVhcl8obWF0QVRBLCB2ZWNBVFkpO1xyXG59O1xyXG5cclxuLy8vIENhbGN1bGF0ZXMgYW4gYXBwcm94aW1hdGUgaW52ZXJzZSB0byB0aGUgZ2l2ZW4gcmFkaWFsIGRpc3RvcnRpb24gcGFyYW1ldGVycy5cclxuRGlzdG9ydGlvbi5wcm90b3R5cGUuYXBwcm94aW1hdGVJbnZlcnNlID0gZnVuY3Rpb24obWF4UmFkaXVzLCBudW1TYW1wbGVzKSB7XHJcbiAgbWF4UmFkaXVzID0gbWF4UmFkaXVzIHx8IDE7XHJcbiAgbnVtU2FtcGxlcyA9IG51bVNhbXBsZXMgfHwgMTAwO1xyXG4gIHZhciBudW1Db2VmZmljaWVudHMgPSA2O1xyXG4gIHZhciBpLCBqO1xyXG5cclxuICAvLyBSICsgSzEqUl4zICsgSzIqUl41ID0gciwgd2l0aCBSID0gcnAgPSBkaXN0b3J0KHIpXHJcbiAgLy8gUmVwZWF0aW5nIGZvciBudW1TYW1wbGVzOlxyXG4gIC8vICAgWyBSMF4zLCBSMF41IF0gKiBbIEsxIF0gPSBbIHIwIC0gUjAgXVxyXG4gIC8vICAgWyBSMV4zLCBSMV41IF0gICBbIEsyIF0gICBbIHIxIC0gUjEgXVxyXG4gIC8vICAgWyBSMl4zLCBSMl41IF0gICAgICAgICAgICBbIHIyIC0gUjIgXVxyXG4gIC8vICAgWyBldGMuLi4gXSAgICAgICAgICAgICAgICBbIGV0Yy4uLiBdXHJcbiAgLy8gVGhhdCBpczpcclxuICAvLyAgIG1hdEEgKiBbSzEsIEsyXSA9IHlcclxuICAvLyBTb2x2ZTpcclxuICAvLyAgIFtLMSwgSzJdID0gaW52ZXJzZSh0cmFuc3Bvc2UobWF0QSkgKiBtYXRBKSAqIHRyYW5zcG9zZShtYXRBKSAqIHlcclxuICB2YXIgbWF0QSA9IG5ldyBBcnJheShudW1Db2VmZmljaWVudHMpO1xyXG4gIGZvciAoaiA9IDA7IGogPCBudW1Db2VmZmljaWVudHM7ICsraikge1xyXG4gICAgbWF0QVtqXSA9IG5ldyBBcnJheShudW1TYW1wbGVzKTtcclxuICB9XHJcbiAgdmFyIHZlY1kgPSBuZXcgQXJyYXkobnVtU2FtcGxlcyk7XHJcblxyXG4gIGZvciAoaSA9IDA7IGkgPCBudW1TYW1wbGVzOyArK2kpIHtcclxuICAgIHZhciByID0gbWF4UmFkaXVzICogKGkgKyAxKSAvIG51bVNhbXBsZXM7XHJcbiAgICB2YXIgcnAgPSB0aGlzLmRpc3RvcnQocik7XHJcbiAgICB2YXIgdiA9IHJwO1xyXG4gICAgZm9yIChqID0gMDsgaiA8IG51bUNvZWZmaWNpZW50czsgKytqKSB7XHJcbiAgICAgIHYgKj0gcnAgKiBycDtcclxuICAgICAgbWF0QVtqXVtpXSA9IHY7XHJcbiAgICB9XHJcbiAgICB2ZWNZW2ldID0gciAtIHJwO1xyXG4gIH1cclxuXHJcbiAgdmFyIGludmVyc2VDb2VmZmljaWVudHMgPSB0aGlzLnNvbHZlTGVhc3RTcXVhcmVzXyhtYXRBLCB2ZWNZKTtcclxuXHJcbiAgcmV0dXJuIG5ldyBEaXN0b3J0aW9uKGludmVyc2VDb2VmZmljaWVudHMpO1xyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBEaXN0b3J0aW9uO1xyXG5cclxufSx7fV0sMTA6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xyXG4vKlxyXG4gKiBDb3B5cmlnaHQgMjAxNSBHb29nbGUgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcblxyXG4vKipcclxuICogRFBEQiBjYWNoZS5cclxuICovXHJcbnZhciBEUERCX0NBQ0hFID0ge1xyXG4gIFwiZm9ybWF0XCI6IDEsXHJcbiAgXCJsYXN0X3VwZGF0ZWRcIjogXCIyMDE2LTAxLTIwVDAwOjE4OjM1WlwiLFxyXG4gIFwiZGV2aWNlc1wiOiBbXHJcblxyXG4gIHtcclxuICAgIFwidHlwZVwiOiBcImFuZHJvaWRcIixcclxuICAgIFwicnVsZXNcIjogW1xyXG4gICAgICB7IFwibWRtaFwiOiBcImFzdXMvKi9OZXh1cyA3LypcIiB9LFxyXG4gICAgICB7IFwidWFcIjogXCJOZXh1cyA3XCIgfVxyXG4gICAgXSxcclxuICAgIFwiZHBpXCI6IFsgMzIwLjgsIDMyMy4wIF0sXHJcbiAgICBcImJ3XCI6IDMsXHJcbiAgICBcImFjXCI6IDUwMFxyXG4gIH0sXHJcblxyXG4gIHtcclxuICAgIFwidHlwZVwiOiBcImFuZHJvaWRcIixcclxuICAgIFwicnVsZXNcIjogW1xyXG4gICAgICB7IFwibWRtaFwiOiBcImFzdXMvKi9BU1VTX1owMEFELypcIiB9LFxyXG4gICAgICB7IFwidWFcIjogXCJBU1VTX1owMEFEXCIgfVxyXG4gICAgXSxcclxuICAgIFwiZHBpXCI6IFsgNDAzLjAsIDQwNC42IF0sXHJcbiAgICBcImJ3XCI6IDMsXHJcbiAgICBcImFjXCI6IDEwMDBcclxuICB9LFxyXG5cclxuICB7XHJcbiAgICBcInR5cGVcIjogXCJhbmRyb2lkXCIsXHJcbiAgICBcInJ1bGVzXCI6IFtcclxuICAgICAgeyBcIm1kbWhcIjogXCJIVEMvKi9IVEM2NDM1TFZXLypcIiB9LFxyXG4gICAgICB7IFwidWFcIjogXCJIVEM2NDM1TFZXXCIgfVxyXG4gICAgXSxcclxuICAgIFwiZHBpXCI6IFsgNDQ5LjcsIDQ0My4zIF0sXHJcbiAgICBcImJ3XCI6IDMsXHJcbiAgICBcImFjXCI6IDEwMDBcclxuICB9LFxyXG5cclxuICB7XHJcbiAgICBcInR5cGVcIjogXCJhbmRyb2lkXCIsXHJcbiAgICBcInJ1bGVzXCI6IFtcclxuICAgICAgeyBcIm1kbWhcIjogXCJIVEMvKi9IVEMgT25lIFhMLypcIiB9LFxyXG4gICAgICB7IFwidWFcIjogXCJIVEMgT25lIFhMXCIgfVxyXG4gICAgXSxcclxuICAgIFwiZHBpXCI6IFsgMzE1LjMsIDMxNC42IF0sXHJcbiAgICBcImJ3XCI6IDMsXHJcbiAgICBcImFjXCI6IDEwMDBcclxuICB9LFxyXG5cclxuICB7XHJcbiAgICBcInR5cGVcIjogXCJhbmRyb2lkXCIsXHJcbiAgICBcInJ1bGVzXCI6IFtcclxuICAgICAgeyBcIm1kbWhcIjogXCJodGMvKi9OZXh1cyA5LypcIiB9LFxyXG4gICAgICB7IFwidWFcIjogXCJOZXh1cyA5XCIgfVxyXG4gICAgXSxcclxuICAgIFwiZHBpXCI6IDI4OS4wLFxyXG4gICAgXCJid1wiOiAzLFxyXG4gICAgXCJhY1wiOiA1MDBcclxuICB9LFxyXG5cclxuICB7XHJcbiAgICBcInR5cGVcIjogXCJhbmRyb2lkXCIsXHJcbiAgICBcInJ1bGVzXCI6IFtcclxuICAgICAgeyBcIm1kbWhcIjogXCJIVEMvKi9IVEMgT25lIE05LypcIiB9LFxyXG4gICAgICB7IFwidWFcIjogXCJIVEMgT25lIE05XCIgfVxyXG4gICAgXSxcclxuICAgIFwiZHBpXCI6IFsgNDQyLjUsIDQ0My4zIF0sXHJcbiAgICBcImJ3XCI6IDMsXHJcbiAgICBcImFjXCI6IDUwMFxyXG4gIH0sXHJcblxyXG4gIHtcclxuICAgIFwidHlwZVwiOiBcImFuZHJvaWRcIixcclxuICAgIFwicnVsZXNcIjogW1xyXG4gICAgICB7IFwibWRtaFwiOiBcIkhUQy8qL0hUQyBPbmVfTTgvKlwiIH0sXHJcbiAgICAgIHsgXCJ1YVwiOiBcIkhUQyBPbmVfTThcIiB9XHJcbiAgICBdLFxyXG4gICAgXCJkcGlcIjogWyA0NDkuNywgNDQ3LjQgXSxcclxuICAgIFwiYndcIjogMyxcclxuICAgIFwiYWNcIjogNTAwXHJcbiAgfSxcclxuXHJcbiAge1xyXG4gICAgXCJ0eXBlXCI6IFwiYW5kcm9pZFwiLFxyXG4gICAgXCJydWxlc1wiOiBbXHJcbiAgICAgIHsgXCJtZG1oXCI6IFwiSFRDLyovSFRDIE9uZS8qXCIgfSxcclxuICAgICAgeyBcInVhXCI6IFwiSFRDIE9uZVwiIH1cclxuICAgIF0sXHJcbiAgICBcImRwaVwiOiA0NzIuOCxcclxuICAgIFwiYndcIjogMyxcclxuICAgIFwiYWNcIjogMTAwMFxyXG4gIH0sXHJcblxyXG4gIHtcclxuICAgIFwidHlwZVwiOiBcImFuZHJvaWRcIixcclxuICAgIFwicnVsZXNcIjogW1xyXG4gICAgICB7IFwibWRtaFwiOiBcIkh1YXdlaS8qL05leHVzIDZQLypcIiB9LFxyXG4gICAgICB7IFwidWFcIjogXCJOZXh1cyA2UFwiIH1cclxuICAgIF0sXHJcbiAgICBcImRwaVwiOiBbIDUxNS4xLCA1MTguMCBdLFxyXG4gICAgXCJid1wiOiAzLFxyXG4gICAgXCJhY1wiOiAxMDAwXHJcbiAgfSxcclxuXHJcbiAge1xyXG4gICAgXCJ0eXBlXCI6IFwiYW5kcm9pZFwiLFxyXG4gICAgXCJydWxlc1wiOiBbXHJcbiAgICAgIHsgXCJtZG1oXCI6IFwiTEdFLyovTmV4dXMgNVgvKlwiIH0sXHJcbiAgICAgIHsgXCJ1YVwiOiBcIk5leHVzIDVYXCIgfVxyXG4gICAgXSxcclxuICAgIFwiZHBpXCI6IFsgNDIyLjAsIDQxOS45IF0sXHJcbiAgICBcImJ3XCI6IDMsXHJcbiAgICBcImFjXCI6IDEwMDBcclxuICB9LFxyXG5cclxuICB7XHJcbiAgICBcInR5cGVcIjogXCJhbmRyb2lkXCIsXHJcbiAgICBcInJ1bGVzXCI6IFtcclxuICAgICAgeyBcIm1kbWhcIjogXCJMR0UvKi9MR01TMzQ1LypcIiB9LFxyXG4gICAgICB7IFwidWFcIjogXCJMR01TMzQ1XCIgfVxyXG4gICAgXSxcclxuICAgIFwiZHBpXCI6IFsgMjIxLjcsIDIxOS4xIF0sXHJcbiAgICBcImJ3XCI6IDMsXHJcbiAgICBcImFjXCI6IDUwMFxyXG4gIH0sXHJcblxyXG4gIHtcclxuICAgIFwidHlwZVwiOiBcImFuZHJvaWRcIixcclxuICAgIFwicnVsZXNcIjogW1xyXG4gICAgICB7IFwibWRtaFwiOiBcIkxHRS8qL0xHLUQ4MDAvKlwiIH0sXHJcbiAgICAgIHsgXCJ1YVwiOiBcIkxHLUQ4MDBcIiB9XHJcbiAgICBdLFxyXG4gICAgXCJkcGlcIjogWyA0MjIuMCwgNDI0LjEgXSxcclxuICAgIFwiYndcIjogMyxcclxuICAgIFwiYWNcIjogNTAwXHJcbiAgfSxcclxuXHJcbiAge1xyXG4gICAgXCJ0eXBlXCI6IFwiYW5kcm9pZFwiLFxyXG4gICAgXCJydWxlc1wiOiBbXHJcbiAgICAgIHsgXCJtZG1oXCI6IFwiTEdFLyovTEctRDg1MC8qXCIgfSxcclxuICAgICAgeyBcInVhXCI6IFwiTEctRDg1MFwiIH1cclxuICAgIF0sXHJcbiAgICBcImRwaVwiOiBbIDUzNy45LCA1NDEuOSBdLFxyXG4gICAgXCJid1wiOiAzLFxyXG4gICAgXCJhY1wiOiA1MDBcclxuICB9LFxyXG5cclxuICB7XHJcbiAgICBcInR5cGVcIjogXCJhbmRyb2lkXCIsXHJcbiAgICBcInJ1bGVzXCI6IFtcclxuICAgICAgeyBcIm1kbWhcIjogXCJMR0UvKi9WUzk4NSA0Ry8qXCIgfSxcclxuICAgICAgeyBcInVhXCI6IFwiVlM5ODUgNEdcIiB9XHJcbiAgICBdLFxyXG4gICAgXCJkcGlcIjogWyA1MzcuOSwgNTM1LjYgXSxcclxuICAgIFwiYndcIjogMyxcclxuICAgIFwiYWNcIjogMTAwMFxyXG4gIH0sXHJcblxyXG4gIHtcclxuICAgIFwidHlwZVwiOiBcImFuZHJvaWRcIixcclxuICAgIFwicnVsZXNcIjogW1xyXG4gICAgICB7IFwibWRtaFwiOiBcIkxHRS8qL05leHVzIDUvKlwiIH0sXHJcbiAgICAgIHsgXCJ1YVwiOiBcIk5leHVzIDUgXCIgfVxyXG4gICAgXSxcclxuICAgIFwiZHBpXCI6IFsgNDQyLjQsIDQ0NC44IF0sXHJcbiAgICBcImJ3XCI6IDMsXHJcbiAgICBcImFjXCI6IDEwMDBcclxuICB9LFxyXG5cclxuICB7XHJcbiAgICBcInR5cGVcIjogXCJhbmRyb2lkXCIsXHJcbiAgICBcInJ1bGVzXCI6IFtcclxuICAgICAgeyBcIm1kbWhcIjogXCJMR0UvKi9OZXh1cyA0LypcIiB9LFxyXG4gICAgICB7IFwidWFcIjogXCJOZXh1cyA0XCIgfVxyXG4gICAgXSxcclxuICAgIFwiZHBpXCI6IFsgMzE5LjgsIDMxOC40IF0sXHJcbiAgICBcImJ3XCI6IDMsXHJcbiAgICBcImFjXCI6IDEwMDBcclxuICB9LFxyXG5cclxuICB7XHJcbiAgICBcInR5cGVcIjogXCJhbmRyb2lkXCIsXHJcbiAgICBcInJ1bGVzXCI6IFtcclxuICAgICAgeyBcIm1kbWhcIjogXCJMR0UvKi9MRy1QNzY5LypcIiB9LFxyXG4gICAgICB7IFwidWFcIjogXCJMRy1QNzY5XCIgfVxyXG4gICAgXSxcclxuICAgIFwiZHBpXCI6IFsgMjQwLjYsIDI0Ny41IF0sXHJcbiAgICBcImJ3XCI6IDMsXHJcbiAgICBcImFjXCI6IDEwMDBcclxuICB9LFxyXG5cclxuICB7XHJcbiAgICBcInR5cGVcIjogXCJhbmRyb2lkXCIsXHJcbiAgICBcInJ1bGVzXCI6IFtcclxuICAgICAgeyBcIm1kbWhcIjogXCJMR0UvKi9MR01TMzIzLypcIiB9LFxyXG4gICAgICB7IFwidWFcIjogXCJMR01TMzIzXCIgfVxyXG4gICAgXSxcclxuICAgIFwiZHBpXCI6IFsgMjA2LjYsIDIwNC42IF0sXHJcbiAgICBcImJ3XCI6IDMsXHJcbiAgICBcImFjXCI6IDEwMDBcclxuICB9LFxyXG5cclxuICB7XHJcbiAgICBcInR5cGVcIjogXCJhbmRyb2lkXCIsXHJcbiAgICBcInJ1bGVzXCI6IFtcclxuICAgICAgeyBcIm1kbWhcIjogXCJMR0UvKi9MR0xTOTk2LypcIiB9LFxyXG4gICAgICB7IFwidWFcIjogXCJMR0xTOTk2XCIgfVxyXG4gICAgXSxcclxuICAgIFwiZHBpXCI6IFsgNDAzLjQsIDQwMS41IF0sXHJcbiAgICBcImJ3XCI6IDMsXHJcbiAgICBcImFjXCI6IDEwMDBcclxuICB9LFxyXG5cclxuICB7XHJcbiAgICBcInR5cGVcIjogXCJhbmRyb2lkXCIsXHJcbiAgICBcInJ1bGVzXCI6IFtcclxuICAgICAgeyBcIm1kbWhcIjogXCJNaWNyb21heC8qLzQ1NjBNTVgvKlwiIH0sXHJcbiAgICAgIHsgXCJ1YVwiOiBcIjQ1NjBNTVhcIiB9XHJcbiAgICBdLFxyXG4gICAgXCJkcGlcIjogWyAyNDAuMCwgMjE5LjQgXSxcclxuICAgIFwiYndcIjogMyxcclxuICAgIFwiYWNcIjogMTAwMFxyXG4gIH0sXHJcblxyXG4gIHtcclxuICAgIFwidHlwZVwiOiBcImFuZHJvaWRcIixcclxuICAgIFwicnVsZXNcIjogW1xyXG4gICAgICB7IFwibWRtaFwiOiBcIk1pY3JvbWF4LyovQTI1MC8qXCIgfSxcclxuICAgICAgeyBcInVhXCI6IFwiTWljcm9tYXggQTI1MFwiIH1cclxuICAgIF0sXHJcbiAgICBcImRwaVwiOiBbIDQ4MC4wLCA0NDYuNCBdLFxyXG4gICAgXCJid1wiOiAzLFxyXG4gICAgXCJhY1wiOiAxMDAwXHJcbiAgfSxcclxuXHJcbiAge1xyXG4gICAgXCJ0eXBlXCI6IFwiYW5kcm9pZFwiLFxyXG4gICAgXCJydWxlc1wiOiBbXHJcbiAgICAgIHsgXCJtZG1oXCI6IFwiTWljcm9tYXgvKi9NaWNyb21heCBBUTQ1MDEvKlwiIH0sXHJcbiAgICAgIHsgXCJ1YVwiOiBcIk1pY3JvbWF4IEFRNDUwMVwiIH1cclxuICAgIF0sXHJcbiAgICBcImRwaVwiOiAyNDAuMCxcclxuICAgIFwiYndcIjogMyxcclxuICAgIFwiYWNcIjogNTAwXHJcbiAgfSxcclxuXHJcbiAge1xyXG4gICAgXCJ0eXBlXCI6IFwiYW5kcm9pZFwiLFxyXG4gICAgXCJydWxlc1wiOiBbXHJcbiAgICAgIHsgXCJtZG1oXCI6IFwibW90b3JvbGEvKi9EUk9JRCBSQVpSLypcIiB9LFxyXG4gICAgICB7IFwidWFcIjogXCJEUk9JRCBSQVpSXCIgfVxyXG4gICAgXSxcclxuICAgIFwiZHBpXCI6IFsgMzY4LjEsIDI1Ni43IF0sXHJcbiAgICBcImJ3XCI6IDMsXHJcbiAgICBcImFjXCI6IDEwMDBcclxuICB9LFxyXG5cclxuICB7XHJcbiAgICBcInR5cGVcIjogXCJhbmRyb2lkXCIsXHJcbiAgICBcInJ1bGVzXCI6IFtcclxuICAgICAgeyBcIm1kbWhcIjogXCJtb3Rvcm9sYS8qL1hUODMwQy8qXCIgfSxcclxuICAgICAgeyBcInVhXCI6IFwiWFQ4MzBDXCIgfVxyXG4gICAgXSxcclxuICAgIFwiZHBpXCI6IFsgMjU0LjAsIDI1NS45IF0sXHJcbiAgICBcImJ3XCI6IDMsXHJcbiAgICBcImFjXCI6IDEwMDBcclxuICB9LFxyXG5cclxuICB7XHJcbiAgICBcInR5cGVcIjogXCJhbmRyb2lkXCIsXHJcbiAgICBcInJ1bGVzXCI6IFtcclxuICAgICAgeyBcIm1kbWhcIjogXCJtb3Rvcm9sYS8qL1hUMTAyMS8qXCIgfSxcclxuICAgICAgeyBcInVhXCI6IFwiWFQxMDIxXCIgfVxyXG4gICAgXSxcclxuICAgIFwiZHBpXCI6IFsgMjU0LjAsIDI1Ni43IF0sXHJcbiAgICBcImJ3XCI6IDMsXHJcbiAgICBcImFjXCI6IDUwMFxyXG4gIH0sXHJcblxyXG4gIHtcclxuICAgIFwidHlwZVwiOiBcImFuZHJvaWRcIixcclxuICAgIFwicnVsZXNcIjogW1xyXG4gICAgICB7IFwibWRtaFwiOiBcIm1vdG9yb2xhLyovWFQxMDIzLypcIiB9LFxyXG4gICAgICB7IFwidWFcIjogXCJYVDEwMjNcIiB9XHJcbiAgICBdLFxyXG4gICAgXCJkcGlcIjogWyAyNTQuMCwgMjU2LjcgXSxcclxuICAgIFwiYndcIjogMyxcclxuICAgIFwiYWNcIjogNTAwXHJcbiAgfSxcclxuXHJcbiAge1xyXG4gICAgXCJ0eXBlXCI6IFwiYW5kcm9pZFwiLFxyXG4gICAgXCJydWxlc1wiOiBbXHJcbiAgICAgIHsgXCJtZG1oXCI6IFwibW90b3JvbGEvKi9YVDEwMjgvKlwiIH0sXHJcbiAgICAgIHsgXCJ1YVwiOiBcIlhUMTAyOFwiIH1cclxuICAgIF0sXHJcbiAgICBcImRwaVwiOiBbIDMyNi42LCAzMjcuNiBdLFxyXG4gICAgXCJid1wiOiAzLFxyXG4gICAgXCJhY1wiOiAxMDAwXHJcbiAgfSxcclxuXHJcbiAge1xyXG4gICAgXCJ0eXBlXCI6IFwiYW5kcm9pZFwiLFxyXG4gICAgXCJydWxlc1wiOiBbXHJcbiAgICAgIHsgXCJtZG1oXCI6IFwibW90b3JvbGEvKi9YVDEwMzQvKlwiIH0sXHJcbiAgICAgIHsgXCJ1YVwiOiBcIlhUMTAzNFwiIH1cclxuICAgIF0sXHJcbiAgICBcImRwaVwiOiBbIDMyNi42LCAzMjguNCBdLFxyXG4gICAgXCJid1wiOiAzLFxyXG4gICAgXCJhY1wiOiA1MDBcclxuICB9LFxyXG5cclxuICB7XHJcbiAgICBcInR5cGVcIjogXCJhbmRyb2lkXCIsXHJcbiAgICBcInJ1bGVzXCI6IFtcclxuICAgICAgeyBcIm1kbWhcIjogXCJtb3Rvcm9sYS8qL1hUMTA1My8qXCIgfSxcclxuICAgICAgeyBcInVhXCI6IFwiWFQxMDUzXCIgfVxyXG4gICAgXSxcclxuICAgIFwiZHBpXCI6IFsgMzE1LjMsIDMxNi4xIF0sXHJcbiAgICBcImJ3XCI6IDMsXHJcbiAgICBcImFjXCI6IDEwMDBcclxuICB9LFxyXG5cclxuICB7XHJcbiAgICBcInR5cGVcIjogXCJhbmRyb2lkXCIsXHJcbiAgICBcInJ1bGVzXCI6IFtcclxuICAgICAgeyBcIm1kbWhcIjogXCJtb3Rvcm9sYS8qL1hUMTU2Mi8qXCIgfSxcclxuICAgICAgeyBcInVhXCI6IFwiWFQxNTYyXCIgfVxyXG4gICAgXSxcclxuICAgIFwiZHBpXCI6IFsgNDAzLjQsIDQwMi43IF0sXHJcbiAgICBcImJ3XCI6IDMsXHJcbiAgICBcImFjXCI6IDEwMDBcclxuICB9LFxyXG5cclxuICB7XHJcbiAgICBcInR5cGVcIjogXCJhbmRyb2lkXCIsXHJcbiAgICBcInJ1bGVzXCI6IFtcclxuICAgICAgeyBcIm1kbWhcIjogXCJtb3Rvcm9sYS8qL05leHVzIDYvKlwiIH0sXHJcbiAgICAgIHsgXCJ1YVwiOiBcIk5leHVzIDYgXCIgfVxyXG4gICAgXSxcclxuICAgIFwiZHBpXCI6IFsgNDk0LjMsIDQ4OS43IF0sXHJcbiAgICBcImJ3XCI6IDMsXHJcbiAgICBcImFjXCI6IDEwMDBcclxuICB9LFxyXG5cclxuICB7XHJcbiAgICBcInR5cGVcIjogXCJhbmRyb2lkXCIsXHJcbiAgICBcInJ1bGVzXCI6IFtcclxuICAgICAgeyBcIm1kbWhcIjogXCJtb3Rvcm9sYS8qL1hUMTA2My8qXCIgfSxcclxuICAgICAgeyBcInVhXCI6IFwiWFQxMDYzXCIgfVxyXG4gICAgXSxcclxuICAgIFwiZHBpXCI6IFsgMjk1LjAsIDI5Ni42IF0sXHJcbiAgICBcImJ3XCI6IDMsXHJcbiAgICBcImFjXCI6IDEwMDBcclxuICB9LFxyXG5cclxuICB7XHJcbiAgICBcInR5cGVcIjogXCJhbmRyb2lkXCIsXHJcbiAgICBcInJ1bGVzXCI6IFtcclxuICAgICAgeyBcIm1kbWhcIjogXCJtb3Rvcm9sYS8qL1hUMTA2NC8qXCIgfSxcclxuICAgICAgeyBcInVhXCI6IFwiWFQxMDY0XCIgfVxyXG4gICAgXSxcclxuICAgIFwiZHBpXCI6IFsgMjk1LjAsIDI5NS42IF0sXHJcbiAgICBcImJ3XCI6IDMsXHJcbiAgICBcImFjXCI6IDUwMFxyXG4gIH0sXHJcblxyXG4gIHtcclxuICAgIFwidHlwZVwiOiBcImFuZHJvaWRcIixcclxuICAgIFwicnVsZXNcIjogW1xyXG4gICAgICB7IFwibWRtaFwiOiBcIm1vdG9yb2xhLyovWFQxMDkyLypcIiB9LFxyXG4gICAgICB7IFwidWFcIjogXCJYVDEwOTJcIiB9XHJcbiAgICBdLFxyXG4gICAgXCJkcGlcIjogWyA0MjIuMCwgNDI0LjEgXSxcclxuICAgIFwiYndcIjogMyxcclxuICAgIFwiYWNcIjogNTAwXHJcbiAgfSxcclxuXHJcbiAge1xyXG4gICAgXCJ0eXBlXCI6IFwiYW5kcm9pZFwiLFxyXG4gICAgXCJydWxlc1wiOiBbXHJcbiAgICAgIHsgXCJtZG1oXCI6IFwibW90b3JvbGEvKi9YVDEwOTUvKlwiIH0sXHJcbiAgICAgIHsgXCJ1YVwiOiBcIlhUMTA5NVwiIH1cclxuICAgIF0sXHJcbiAgICBcImRwaVwiOiBbIDQyMi4wLCA0MjMuNCBdLFxyXG4gICAgXCJid1wiOiAzLFxyXG4gICAgXCJhY1wiOiAxMDAwXHJcbiAgfSxcclxuXHJcbiAge1xyXG4gICAgXCJ0eXBlXCI6IFwiYW5kcm9pZFwiLFxyXG4gICAgXCJydWxlc1wiOiBbXHJcbiAgICAgIHsgXCJtZG1oXCI6IFwiT25lUGx1cy8qL0EwMDAxLypcIiB9LFxyXG4gICAgICB7IFwidWFcIjogXCJBMDAwMVwiIH1cclxuICAgIF0sXHJcbiAgICBcImRwaVwiOiBbIDQwMy40LCA0MDEuMCBdLFxyXG4gICAgXCJid1wiOiAzLFxyXG4gICAgXCJhY1wiOiAxMDAwXHJcbiAgfSxcclxuXHJcbiAge1xyXG4gICAgXCJ0eXBlXCI6IFwiYW5kcm9pZFwiLFxyXG4gICAgXCJydWxlc1wiOiBbXHJcbiAgICAgIHsgXCJtZG1oXCI6IFwiT25lUGx1cy8qL09ORSBFMTAwNS8qXCIgfSxcclxuICAgICAgeyBcInVhXCI6IFwiT05FIEUxMDA1XCIgfVxyXG4gICAgXSxcclxuICAgIFwiZHBpXCI6IFsgNDQyLjQsIDQ0MS40IF0sXHJcbiAgICBcImJ3XCI6IDMsXHJcbiAgICBcImFjXCI6IDEwMDBcclxuICB9LFxyXG5cclxuICB7XHJcbiAgICBcInR5cGVcIjogXCJhbmRyb2lkXCIsXHJcbiAgICBcInJ1bGVzXCI6IFtcclxuICAgICAgeyBcIm1kbWhcIjogXCJPbmVQbHVzLyovT05FIEEyMDA1LypcIiB9LFxyXG4gICAgICB7IFwidWFcIjogXCJPTkUgQTIwMDVcIiB9XHJcbiAgICBdLFxyXG4gICAgXCJkcGlcIjogWyAzOTEuOSwgNDA1LjQgXSxcclxuICAgIFwiYndcIjogMyxcclxuICAgIFwiYWNcIjogMTAwMFxyXG4gIH0sXHJcblxyXG4gIHtcclxuICAgIFwidHlwZVwiOiBcImFuZHJvaWRcIixcclxuICAgIFwicnVsZXNcIjogW1xyXG4gICAgICB7IFwibWRtaFwiOiBcIk9QUE8vKi9YOTA5LypcIiB9LFxyXG4gICAgICB7IFwidWFcIjogXCJYOTA5XCIgfVxyXG4gICAgXSxcclxuICAgIFwiZHBpXCI6IFsgNDQyLjQsIDQ0NC4xIF0sXHJcbiAgICBcImJ3XCI6IDMsXHJcbiAgICBcImFjXCI6IDEwMDBcclxuICB9LFxyXG5cclxuICB7XHJcbiAgICBcInR5cGVcIjogXCJhbmRyb2lkXCIsXHJcbiAgICBcInJ1bGVzXCI6IFtcclxuICAgICAgeyBcIm1kbWhcIjogXCJzYW1zdW5nLyovR1QtSTkwODIvKlwiIH0sXHJcbiAgICAgIHsgXCJ1YVwiOiBcIkdULUk5MDgyXCIgfVxyXG4gICAgXSxcclxuICAgIFwiZHBpXCI6IFsgMTg0LjcsIDE4NS40IF0sXHJcbiAgICBcImJ3XCI6IDMsXHJcbiAgICBcImFjXCI6IDEwMDBcclxuICB9LFxyXG5cclxuICB7XHJcbiAgICBcInR5cGVcIjogXCJhbmRyb2lkXCIsXHJcbiAgICBcInJ1bGVzXCI6IFtcclxuICAgICAgeyBcIm1kbWhcIjogXCJzYW1zdW5nLyovU00tRzM2MFAvKlwiIH0sXHJcbiAgICAgIHsgXCJ1YVwiOiBcIlNNLUczNjBQXCIgfVxyXG4gICAgXSxcclxuICAgIFwiZHBpXCI6IFsgMTk2LjcsIDIwNS40IF0sXHJcbiAgICBcImJ3XCI6IDMsXHJcbiAgICBcImFjXCI6IDEwMDBcclxuICB9LFxyXG5cclxuICB7XHJcbiAgICBcInR5cGVcIjogXCJhbmRyb2lkXCIsXHJcbiAgICBcInJ1bGVzXCI6IFtcclxuICAgICAgeyBcIm1kbWhcIjogXCJzYW1zdW5nLyovTmV4dXMgUy8qXCIgfSxcclxuICAgICAgeyBcInVhXCI6IFwiTmV4dXMgU1wiIH1cclxuICAgIF0sXHJcbiAgICBcImRwaVwiOiBbIDIzNC41LCAyMjkuOCBdLFxyXG4gICAgXCJid1wiOiAzLFxyXG4gICAgXCJhY1wiOiAxMDAwXHJcbiAgfSxcclxuXHJcbiAge1xyXG4gICAgXCJ0eXBlXCI6IFwiYW5kcm9pZFwiLFxyXG4gICAgXCJydWxlc1wiOiBbXHJcbiAgICAgIHsgXCJtZG1oXCI6IFwic2Ftc3VuZy8qL0dULUk5MzAwLypcIiB9LFxyXG4gICAgICB7IFwidWFcIjogXCJHVC1JOTMwMFwiIH1cclxuICAgIF0sXHJcbiAgICBcImRwaVwiOiBbIDMwNC44LCAzMDMuOSBdLFxyXG4gICAgXCJid1wiOiA1LFxyXG4gICAgXCJhY1wiOiA1MDBcclxuICB9LFxyXG5cclxuICB7XHJcbiAgICBcInR5cGVcIjogXCJhbmRyb2lkXCIsXHJcbiAgICBcInJ1bGVzXCI6IFtcclxuICAgICAgeyBcIm1kbWhcIjogXCJzYW1zdW5nLyovU00tVDIzME5VLypcIiB9LFxyXG4gICAgICB7IFwidWFcIjogXCJTTS1UMjMwTlVcIiB9XHJcbiAgICBdLFxyXG4gICAgXCJkcGlcIjogMjE2LjAsXHJcbiAgICBcImJ3XCI6IDMsXHJcbiAgICBcImFjXCI6IDUwMFxyXG4gIH0sXHJcblxyXG4gIHtcclxuICAgIFwidHlwZVwiOiBcImFuZHJvaWRcIixcclxuICAgIFwicnVsZXNcIjogW1xyXG4gICAgICB7IFwibWRtaFwiOiBcInNhbXN1bmcvKi9TR0gtVDM5OS8qXCIgfSxcclxuICAgICAgeyBcInVhXCI6IFwiU0dILVQzOTlcIiB9XHJcbiAgICBdLFxyXG4gICAgXCJkcGlcIjogWyAyMTcuNywgMjMxLjQgXSxcclxuICAgIFwiYndcIjogMyxcclxuICAgIFwiYWNcIjogMTAwMFxyXG4gIH0sXHJcblxyXG4gIHtcclxuICAgIFwidHlwZVwiOiBcImFuZHJvaWRcIixcclxuICAgIFwicnVsZXNcIjogW1xyXG4gICAgICB7IFwibWRtaFwiOiBcInNhbXN1bmcvKi9TTS1OOTAwNS8qXCIgfSxcclxuICAgICAgeyBcInVhXCI6IFwiU00tTjkwMDVcIiB9XHJcbiAgICBdLFxyXG4gICAgXCJkcGlcIjogWyAzODYuNCwgMzg3LjAgXSxcclxuICAgIFwiYndcIjogMyxcclxuICAgIFwiYWNcIjogNTAwXHJcbiAgfSxcclxuXHJcbiAge1xyXG4gICAgXCJ0eXBlXCI6IFwiYW5kcm9pZFwiLFxyXG4gICAgXCJydWxlc1wiOiBbXHJcbiAgICAgIHsgXCJtZG1oXCI6IFwic2Ftc3VuZy8qL1NBTVNVTkctU00tTjkwMEEvKlwiIH0sXHJcbiAgICAgIHsgXCJ1YVwiOiBcIlNBTVNVTkctU00tTjkwMEFcIiB9XHJcbiAgICBdLFxyXG4gICAgXCJkcGlcIjogWyAzODYuNCwgMzg3LjcgXSxcclxuICAgIFwiYndcIjogMyxcclxuICAgIFwiYWNcIjogMTAwMFxyXG4gIH0sXHJcblxyXG4gIHtcclxuICAgIFwidHlwZVwiOiBcImFuZHJvaWRcIixcclxuICAgIFwicnVsZXNcIjogW1xyXG4gICAgICB7IFwibWRtaFwiOiBcInNhbXN1bmcvKi9HVC1JOTUwMC8qXCIgfSxcclxuICAgICAgeyBcInVhXCI6IFwiR1QtSTk1MDBcIiB9XHJcbiAgICBdLFxyXG4gICAgXCJkcGlcIjogWyA0NDIuNSwgNDQzLjMgXSxcclxuICAgIFwiYndcIjogMyxcclxuICAgIFwiYWNcIjogNTAwXHJcbiAgfSxcclxuXHJcbiAge1xyXG4gICAgXCJ0eXBlXCI6IFwiYW5kcm9pZFwiLFxyXG4gICAgXCJydWxlc1wiOiBbXHJcbiAgICAgIHsgXCJtZG1oXCI6IFwic2Ftc3VuZy8qL0dULUk5NTA1LypcIiB9LFxyXG4gICAgICB7IFwidWFcIjogXCJHVC1JOTUwNVwiIH1cclxuICAgIF0sXHJcbiAgICBcImRwaVwiOiA0MzkuNCxcclxuICAgIFwiYndcIjogNCxcclxuICAgIFwiYWNcIjogMTAwMFxyXG4gIH0sXHJcblxyXG4gIHtcclxuICAgIFwidHlwZVwiOiBcImFuZHJvaWRcIixcclxuICAgIFwicnVsZXNcIjogW1xyXG4gICAgICB7IFwibWRtaFwiOiBcInNhbXN1bmcvKi9TTS1HOTAwRi8qXCIgfSxcclxuICAgICAgeyBcInVhXCI6IFwiU00tRzkwMEZcIiB9XHJcbiAgICBdLFxyXG4gICAgXCJkcGlcIjogWyA0MTUuNiwgNDMxLjYgXSxcclxuICAgIFwiYndcIjogNSxcclxuICAgIFwiYWNcIjogMTAwMFxyXG4gIH0sXHJcblxyXG4gIHtcclxuICAgIFwidHlwZVwiOiBcImFuZHJvaWRcIixcclxuICAgIFwicnVsZXNcIjogW1xyXG4gICAgICB7IFwibWRtaFwiOiBcInNhbXN1bmcvKi9TTS1HOTAwTS8qXCIgfSxcclxuICAgICAgeyBcInVhXCI6IFwiU00tRzkwME1cIiB9XHJcbiAgICBdLFxyXG4gICAgXCJkcGlcIjogWyA0MTUuNiwgNDMxLjYgXSxcclxuICAgIFwiYndcIjogNSxcclxuICAgIFwiYWNcIjogMTAwMFxyXG4gIH0sXHJcblxyXG4gIHtcclxuICAgIFwidHlwZVwiOiBcImFuZHJvaWRcIixcclxuICAgIFwicnVsZXNcIjogW1xyXG4gICAgICB7IFwibWRtaFwiOiBcInNhbXN1bmcvKi9TTS1HODAwRi8qXCIgfSxcclxuICAgICAgeyBcInVhXCI6IFwiU00tRzgwMEZcIiB9XHJcbiAgICBdLFxyXG4gICAgXCJkcGlcIjogMzI2LjgsXHJcbiAgICBcImJ3XCI6IDMsXHJcbiAgICBcImFjXCI6IDEwMDBcclxuICB9LFxyXG5cclxuICB7XHJcbiAgICBcInR5cGVcIjogXCJhbmRyb2lkXCIsXHJcbiAgICBcInJ1bGVzXCI6IFtcclxuICAgICAgeyBcIm1kbWhcIjogXCJzYW1zdW5nLyovU00tRzkwNlMvKlwiIH0sXHJcbiAgICAgIHsgXCJ1YVwiOiBcIlNNLUc5MDZTXCIgfVxyXG4gICAgXSxcclxuICAgIFwiZHBpXCI6IFsgNTYyLjcsIDU3Mi40IF0sXHJcbiAgICBcImJ3XCI6IDMsXHJcbiAgICBcImFjXCI6IDEwMDBcclxuICB9LFxyXG5cclxuICB7XHJcbiAgICBcInR5cGVcIjogXCJhbmRyb2lkXCIsXHJcbiAgICBcInJ1bGVzXCI6IFtcclxuICAgICAgeyBcIm1kbWhcIjogXCJzYW1zdW5nLyovR1QtSTkzMDAvKlwiIH0sXHJcbiAgICAgIHsgXCJ1YVwiOiBcIkdULUk5MzAwXCIgfVxyXG4gICAgXSxcclxuICAgIFwiZHBpXCI6IFsgMzA2LjcsIDMwNC44IF0sXHJcbiAgICBcImJ3XCI6IDUsXHJcbiAgICBcImFjXCI6IDEwMDBcclxuICB9LFxyXG5cclxuICB7XHJcbiAgICBcInR5cGVcIjogXCJhbmRyb2lkXCIsXHJcbiAgICBcInJ1bGVzXCI6IFtcclxuICAgICAgeyBcIm1kbWhcIjogXCJzYW1zdW5nLyovU00tVDUzNS8qXCIgfSxcclxuICAgICAgeyBcInVhXCI6IFwiU00tVDUzNVwiIH1cclxuICAgIF0sXHJcbiAgICBcImRwaVwiOiBbIDE0Mi42LCAxMzYuNCBdLFxyXG4gICAgXCJid1wiOiAzLFxyXG4gICAgXCJhY1wiOiA1MDBcclxuICB9LFxyXG5cclxuICB7XHJcbiAgICBcInR5cGVcIjogXCJhbmRyb2lkXCIsXHJcbiAgICBcInJ1bGVzXCI6IFtcclxuICAgICAgeyBcIm1kbWhcIjogXCJzYW1zdW5nLyovU00tTjkyMEMvKlwiIH0sXHJcbiAgICAgIHsgXCJ1YVwiOiBcIlNNLU45MjBDXCIgfVxyXG4gICAgXSxcclxuICAgIFwiZHBpXCI6IFsgNTE1LjEsIDUxOC40IF0sXHJcbiAgICBcImJ3XCI6IDMsXHJcbiAgICBcImFjXCI6IDEwMDBcclxuICB9LFxyXG5cclxuICB7XHJcbiAgICBcInR5cGVcIjogXCJhbmRyb2lkXCIsXHJcbiAgICBcInJ1bGVzXCI6IFtcclxuICAgICAgeyBcIm1kbWhcIjogXCJzYW1zdW5nLyovR1QtSTkzMDBJLypcIiB9LFxyXG4gICAgICB7IFwidWFcIjogXCJHVC1JOTMwMElcIiB9XHJcbiAgICBdLFxyXG4gICAgXCJkcGlcIjogWyAzMDQuOCwgMzA1LjggXSxcclxuICAgIFwiYndcIjogMyxcclxuICAgIFwiYWNcIjogMTAwMFxyXG4gIH0sXHJcblxyXG4gIHtcclxuICAgIFwidHlwZVwiOiBcImFuZHJvaWRcIixcclxuICAgIFwicnVsZXNcIjogW1xyXG4gICAgICB7IFwibWRtaFwiOiBcInNhbXN1bmcvKi9HVC1JOTE5NS8qXCIgfSxcclxuICAgICAgeyBcInVhXCI6IFwiR1QtSTkxOTVcIiB9XHJcbiAgICBdLFxyXG4gICAgXCJkcGlcIjogWyAyNDkuNCwgMjU2LjcgXSxcclxuICAgIFwiYndcIjogMyxcclxuICAgIFwiYWNcIjogNTAwXHJcbiAgfSxcclxuXHJcbiAge1xyXG4gICAgXCJ0eXBlXCI6IFwiYW5kcm9pZFwiLFxyXG4gICAgXCJydWxlc1wiOiBbXHJcbiAgICAgIHsgXCJtZG1oXCI6IFwic2Ftc3VuZy8qL1NQSC1MNTIwLypcIiB9LFxyXG4gICAgICB7IFwidWFcIjogXCJTUEgtTDUyMFwiIH1cclxuICAgIF0sXHJcbiAgICBcImRwaVwiOiBbIDI0OS40LCAyNTUuOSBdLFxyXG4gICAgXCJid1wiOiAzLFxyXG4gICAgXCJhY1wiOiAxMDAwXHJcbiAgfSxcclxuXHJcbiAge1xyXG4gICAgXCJ0eXBlXCI6IFwiYW5kcm9pZFwiLFxyXG4gICAgXCJydWxlc1wiOiBbXHJcbiAgICAgIHsgXCJtZG1oXCI6IFwic2Ftc3VuZy8qL1NBTVNVTkctU0dILUk3MTcvKlwiIH0sXHJcbiAgICAgIHsgXCJ1YVwiOiBcIlNBTVNVTkctU0dILUk3MTdcIiB9XHJcbiAgICBdLFxyXG4gICAgXCJkcGlcIjogMjg1LjgsXHJcbiAgICBcImJ3XCI6IDMsXHJcbiAgICBcImFjXCI6IDEwMDBcclxuICB9LFxyXG5cclxuICB7XHJcbiAgICBcInR5cGVcIjogXCJhbmRyb2lkXCIsXHJcbiAgICBcInJ1bGVzXCI6IFtcclxuICAgICAgeyBcIm1kbWhcIjogXCJzYW1zdW5nLyovU1BILUQ3MTAvKlwiIH0sXHJcbiAgICAgIHsgXCJ1YVwiOiBcIlNQSC1ENzEwXCIgfVxyXG4gICAgXSxcclxuICAgIFwiZHBpXCI6IFsgMjE3LjcsIDIwNC4yIF0sXHJcbiAgICBcImJ3XCI6IDMsXHJcbiAgICBcImFjXCI6IDEwMDBcclxuICB9LFxyXG5cclxuICB7XHJcbiAgICBcInR5cGVcIjogXCJhbmRyb2lkXCIsXHJcbiAgICBcInJ1bGVzXCI6IFtcclxuICAgICAgeyBcIm1kbWhcIjogXCJzYW1zdW5nLyovR1QtTjcxMDAvKlwiIH0sXHJcbiAgICAgIHsgXCJ1YVwiOiBcIkdULU43MTAwXCIgfVxyXG4gICAgXSxcclxuICAgIFwiZHBpXCI6IDI2NS4xLFxyXG4gICAgXCJid1wiOiAzLFxyXG4gICAgXCJhY1wiOiAxMDAwXHJcbiAgfSxcclxuXHJcbiAge1xyXG4gICAgXCJ0eXBlXCI6IFwiYW5kcm9pZFwiLFxyXG4gICAgXCJydWxlc1wiOiBbXHJcbiAgICAgIHsgXCJtZG1oXCI6IFwic2Ftc3VuZy8qL1NDSC1JNjA1LypcIiB9LFxyXG4gICAgICB7IFwidWFcIjogXCJTQ0gtSTYwNVwiIH1cclxuICAgIF0sXHJcbiAgICBcImRwaVwiOiAyNjUuMSxcclxuICAgIFwiYndcIjogMyxcclxuICAgIFwiYWNcIjogMTAwMFxyXG4gIH0sXHJcblxyXG4gIHtcclxuICAgIFwidHlwZVwiOiBcImFuZHJvaWRcIixcclxuICAgIFwicnVsZXNcIjogW1xyXG4gICAgICB7IFwibWRtaFwiOiBcInNhbXN1bmcvKi9HYWxheHkgTmV4dXMvKlwiIH0sXHJcbiAgICAgIHsgXCJ1YVwiOiBcIkdhbGF4eSBOZXh1c1wiIH1cclxuICAgIF0sXHJcbiAgICBcImRwaVwiOiBbIDMxNS4zLCAzMTQuMiBdLFxyXG4gICAgXCJid1wiOiAzLFxyXG4gICAgXCJhY1wiOiAxMDAwXHJcbiAgfSxcclxuXHJcbiAge1xyXG4gICAgXCJ0eXBlXCI6IFwiYW5kcm9pZFwiLFxyXG4gICAgXCJydWxlc1wiOiBbXHJcbiAgICAgIHsgXCJtZG1oXCI6IFwic2Ftc3VuZy8qL1NNLU45MTBILypcIiB9LFxyXG4gICAgICB7IFwidWFcIjogXCJTTS1OOTEwSFwiIH1cclxuICAgIF0sXHJcbiAgICBcImRwaVwiOiBbIDUxNS4xLCA1MTguMCBdLFxyXG4gICAgXCJid1wiOiAzLFxyXG4gICAgXCJhY1wiOiAxMDAwXHJcbiAgfSxcclxuXHJcbiAge1xyXG4gICAgXCJ0eXBlXCI6IFwiYW5kcm9pZFwiLFxyXG4gICAgXCJydWxlc1wiOiBbXHJcbiAgICAgIHsgXCJtZG1oXCI6IFwic2Ftc3VuZy8qL1NNLU45MTBDLypcIiB9LFxyXG4gICAgICB7IFwidWFcIjogXCJTTS1OOTEwQ1wiIH1cclxuICAgIF0sXHJcbiAgICBcImRwaVwiOiBbIDUxNS4yLCA1MjAuMiBdLFxyXG4gICAgXCJid1wiOiAzLFxyXG4gICAgXCJhY1wiOiA1MDBcclxuICB9LFxyXG5cclxuICB7XHJcbiAgICBcInR5cGVcIjogXCJhbmRyb2lkXCIsXHJcbiAgICBcInJ1bGVzXCI6IFtcclxuICAgICAgeyBcIm1kbWhcIjogXCJzYW1zdW5nLyovU00tRzEzME0vKlwiIH0sXHJcbiAgICAgIHsgXCJ1YVwiOiBcIlNNLUcxMzBNXCIgfVxyXG4gICAgXSxcclxuICAgIFwiZHBpXCI6IFsgMTY1LjksIDE2NC44IF0sXHJcbiAgICBcImJ3XCI6IDMsXHJcbiAgICBcImFjXCI6IDUwMFxyXG4gIH0sXHJcblxyXG4gIHtcclxuICAgIFwidHlwZVwiOiBcImFuZHJvaWRcIixcclxuICAgIFwicnVsZXNcIjogW1xyXG4gICAgICB7IFwibWRtaFwiOiBcInNhbXN1bmcvKi9TTS1HOTI4SS8qXCIgfSxcclxuICAgICAgeyBcInVhXCI6IFwiU00tRzkyOElcIiB9XHJcbiAgICBdLFxyXG4gICAgXCJkcGlcIjogWyA1MTUuMSwgNTE4LjQgXSxcclxuICAgIFwiYndcIjogMyxcclxuICAgIFwiYWNcIjogMTAwMFxyXG4gIH0sXHJcblxyXG4gIHtcclxuICAgIFwidHlwZVwiOiBcImFuZHJvaWRcIixcclxuICAgIFwicnVsZXNcIjogW1xyXG4gICAgICB7IFwibWRtaFwiOiBcInNhbXN1bmcvKi9TTS1HOTIwRi8qXCIgfSxcclxuICAgICAgeyBcInVhXCI6IFwiU00tRzkyMEZcIiB9XHJcbiAgICBdLFxyXG4gICAgXCJkcGlcIjogNTgwLjYsXHJcbiAgICBcImJ3XCI6IDMsXHJcbiAgICBcImFjXCI6IDUwMFxyXG4gIH0sXHJcblxyXG4gIHtcclxuICAgIFwidHlwZVwiOiBcImFuZHJvaWRcIixcclxuICAgIFwicnVsZXNcIjogW1xyXG4gICAgICB7IFwibWRtaFwiOiBcInNhbXN1bmcvKi9TTS1HOTIwUC8qXCIgfSxcclxuICAgICAgeyBcInVhXCI6IFwiU00tRzkyMFBcIiB9XHJcbiAgICBdLFxyXG4gICAgXCJkcGlcIjogWyA1MjIuNSwgNTc3LjAgXSxcclxuICAgIFwiYndcIjogMyxcclxuICAgIFwiYWNcIjogMTAwMFxyXG4gIH0sXHJcblxyXG4gIHtcclxuICAgIFwidHlwZVwiOiBcImFuZHJvaWRcIixcclxuICAgIFwicnVsZXNcIjogW1xyXG4gICAgICB7IFwibWRtaFwiOiBcInNhbXN1bmcvKi9TTS1HOTI1Ri8qXCIgfSxcclxuICAgICAgeyBcInVhXCI6IFwiU00tRzkyNUZcIiB9XHJcbiAgICBdLFxyXG4gICAgXCJkcGlcIjogNTgwLjYsXHJcbiAgICBcImJ3XCI6IDMsXHJcbiAgICBcImFjXCI6IDUwMFxyXG4gIH0sXHJcblxyXG4gIHtcclxuICAgIFwidHlwZVwiOiBcImFuZHJvaWRcIixcclxuICAgIFwicnVsZXNcIjogW1xyXG4gICAgICB7IFwibWRtaFwiOiBcInNhbXN1bmcvKi9TTS1HOTI1Vi8qXCIgfSxcclxuICAgICAgeyBcInVhXCI6IFwiU00tRzkyNVZcIiB9XHJcbiAgICBdLFxyXG4gICAgXCJkcGlcIjogWyA1MjIuNSwgNTc2LjYgXSxcclxuICAgIFwiYndcIjogMyxcclxuICAgIFwiYWNcIjogMTAwMFxyXG4gIH0sXHJcblxyXG4gIHtcclxuICAgIFwidHlwZVwiOiBcImFuZHJvaWRcIixcclxuICAgIFwicnVsZXNcIjogW1xyXG4gICAgICB7IFwibWRtaFwiOiBcIlNvbnkvKi9DNjkwMy8qXCIgfSxcclxuICAgICAgeyBcInVhXCI6IFwiQzY5MDNcIiB9XHJcbiAgICBdLFxyXG4gICAgXCJkcGlcIjogWyA0NDIuNSwgNDQzLjMgXSxcclxuICAgIFwiYndcIjogMyxcclxuICAgIFwiYWNcIjogNTAwXHJcbiAgfSxcclxuXHJcbiAge1xyXG4gICAgXCJ0eXBlXCI6IFwiYW5kcm9pZFwiLFxyXG4gICAgXCJydWxlc1wiOiBbXHJcbiAgICAgIHsgXCJtZG1oXCI6IFwiU29ueS8qL0Q2NjUzLypcIiB9LFxyXG4gICAgICB7IFwidWFcIjogXCJENjY1M1wiIH1cclxuICAgIF0sXHJcbiAgICBcImRwaVwiOiBbIDQyOC42LCA0MjcuNiBdLFxyXG4gICAgXCJid1wiOiAzLFxyXG4gICAgXCJhY1wiOiAxMDAwXHJcbiAgfSxcclxuXHJcbiAge1xyXG4gICAgXCJ0eXBlXCI6IFwiYW5kcm9pZFwiLFxyXG4gICAgXCJydWxlc1wiOiBbXHJcbiAgICAgIHsgXCJtZG1oXCI6IFwiU29ueS8qL0U2NjUzLypcIiB9LFxyXG4gICAgICB7IFwidWFcIjogXCJFNjY1M1wiIH1cclxuICAgIF0sXHJcbiAgICBcImRwaVwiOiBbIDQyOC42LCA0MjUuNyBdLFxyXG4gICAgXCJid1wiOiAzLFxyXG4gICAgXCJhY1wiOiAxMDAwXHJcbiAgfSxcclxuXHJcbiAge1xyXG4gICAgXCJ0eXBlXCI6IFwiYW5kcm9pZFwiLFxyXG4gICAgXCJydWxlc1wiOiBbXHJcbiAgICAgIHsgXCJtZG1oXCI6IFwiU29ueS8qL0U2ODUzLypcIiB9LFxyXG4gICAgICB7IFwidWFcIjogXCJFNjg1M1wiIH1cclxuICAgIF0sXHJcbiAgICBcImRwaVwiOiBbIDQwMy40LCA0MDEuOSBdLFxyXG4gICAgXCJid1wiOiAzLFxyXG4gICAgXCJhY1wiOiAxMDAwXHJcbiAgfSxcclxuXHJcbiAge1xyXG4gICAgXCJ0eXBlXCI6IFwiYW5kcm9pZFwiLFxyXG4gICAgXCJydWxlc1wiOiBbXHJcbiAgICAgIHsgXCJtZG1oXCI6IFwiU29ueS8qL1NHUDMyMS8qXCIgfSxcclxuICAgICAgeyBcInVhXCI6IFwiU0dQMzIxXCIgfVxyXG4gICAgXSxcclxuICAgIFwiZHBpXCI6IFsgMjI0LjcsIDIyNC4xIF0sXHJcbiAgICBcImJ3XCI6IDMsXHJcbiAgICBcImFjXCI6IDUwMFxyXG4gIH0sXHJcblxyXG4gIHtcclxuICAgIFwidHlwZVwiOiBcImFuZHJvaWRcIixcclxuICAgIFwicnVsZXNcIjogW1xyXG4gICAgICB7IFwibWRtaFwiOiBcIlRDVC8qL0FMQ0FURUwgT05FIFRPVUNIIEZpZXJjZS8qXCIgfSxcclxuICAgICAgeyBcInVhXCI6IFwiQUxDQVRFTCBPTkUgVE9VQ0ggRmllcmNlXCIgfVxyXG4gICAgXSxcclxuICAgIFwiZHBpXCI6IFsgMjQwLjAsIDI0Ny41IF0sXHJcbiAgICBcImJ3XCI6IDMsXHJcbiAgICBcImFjXCI6IDEwMDBcclxuICB9LFxyXG5cclxuICB7XHJcbiAgICBcInR5cGVcIjogXCJhbmRyb2lkXCIsXHJcbiAgICBcInJ1bGVzXCI6IFtcclxuICAgICAgeyBcIm1kbWhcIjogXCJUSEwvKi90aGwgNTAwMC8qXCIgfSxcclxuICAgICAgeyBcInVhXCI6IFwidGhsIDUwMDBcIiB9XHJcbiAgICBdLFxyXG4gICAgXCJkcGlcIjogWyA0ODAuMCwgNDQzLjMgXSxcclxuICAgIFwiYndcIjogMyxcclxuICAgIFwiYWNcIjogMTAwMFxyXG4gIH0sXHJcblxyXG4gIHtcclxuICAgIFwidHlwZVwiOiBcImFuZHJvaWRcIixcclxuICAgIFwicnVsZXNcIjogW1xyXG4gICAgICB7IFwibWRtaFwiOiBcIlpURS8qL1pURSBCbGFkZSBMMi8qXCIgfSxcclxuICAgICAgeyBcInVhXCI6IFwiWlRFIEJsYWRlIEwyXCIgfVxyXG4gICAgXSxcclxuICAgIFwiZHBpXCI6IDI0MC4wLFxyXG4gICAgXCJid1wiOiAzLFxyXG4gICAgXCJhY1wiOiA1MDBcclxuICB9LFxyXG5cclxuICB7XHJcbiAgICBcInR5cGVcIjogXCJpb3NcIixcclxuICAgIFwicnVsZXNcIjogWyB7IFwicmVzXCI6IFsgNjQwLCA5NjAgXSB9IF0sXHJcbiAgICBcImRwaVwiOiBbIDMyNS4xLCAzMjguNCBdLFxyXG4gICAgXCJid1wiOiA0LFxyXG4gICAgXCJhY1wiOiAxMDAwXHJcbiAgfSxcclxuXHJcbiAge1xyXG4gICAgXCJ0eXBlXCI6IFwiaW9zXCIsXHJcbiAgICBcInJ1bGVzXCI6IFsgeyBcInJlc1wiOiBbIDY0MCwgOTYwIF0gfSBdLFxyXG4gICAgXCJkcGlcIjogWyAzMjUuMSwgMzI4LjQgXSxcclxuICAgIFwiYndcIjogNCxcclxuICAgIFwiYWNcIjogMTAwMFxyXG4gIH0sXHJcblxyXG4gIHtcclxuICAgIFwidHlwZVwiOiBcImlvc1wiLFxyXG4gICAgXCJydWxlc1wiOiBbIHsgXCJyZXNcIjogWyA2NDAsIDExMzYgXSB9IF0sXHJcbiAgICBcImRwaVwiOiBbIDMxNy4xLCAzMjAuMiBdLFxyXG4gICAgXCJid1wiOiAzLFxyXG4gICAgXCJhY1wiOiAxMDAwXHJcbiAgfSxcclxuXHJcbiAge1xyXG4gICAgXCJ0eXBlXCI6IFwiaW9zXCIsXHJcbiAgICBcInJ1bGVzXCI6IFsgeyBcInJlc1wiOiBbIDY0MCwgMTEzNiBdIH0gXSxcclxuICAgIFwiZHBpXCI6IFsgMzE3LjEsIDMyMC4yIF0sXHJcbiAgICBcImJ3XCI6IDMsXHJcbiAgICBcImFjXCI6IDEwMDBcclxuICB9LFxyXG5cclxuICB7XHJcbiAgICBcInR5cGVcIjogXCJpb3NcIixcclxuICAgIFwicnVsZXNcIjogWyB7IFwicmVzXCI6IFsgNzUwLCAxMzM0IF0gfSBdLFxyXG4gICAgXCJkcGlcIjogMzI2LjQsXHJcbiAgICBcImJ3XCI6IDQsXHJcbiAgICBcImFjXCI6IDEwMDBcclxuICB9LFxyXG5cclxuICB7XHJcbiAgICBcInR5cGVcIjogXCJpb3NcIixcclxuICAgIFwicnVsZXNcIjogWyB7IFwicmVzXCI6IFsgNzUwLCAxMzM0IF0gfSBdLFxyXG4gICAgXCJkcGlcIjogMzI2LjQsXHJcbiAgICBcImJ3XCI6IDQsXHJcbiAgICBcImFjXCI6IDEwMDBcclxuICB9LFxyXG5cclxuICB7XHJcbiAgICBcInR5cGVcIjogXCJpb3NcIixcclxuICAgIFwicnVsZXNcIjogWyB7IFwicmVzXCI6IFsgMTI0MiwgMjIwOCBdIH0gXSxcclxuICAgIFwiZHBpXCI6IFsgNDUzLjYsIDQ1OC40IF0sXHJcbiAgICBcImJ3XCI6IDQsXHJcbiAgICBcImFjXCI6IDEwMDBcclxuICB9LFxyXG5cclxuICB7XHJcbiAgICBcInR5cGVcIjogXCJpb3NcIixcclxuICAgIFwicnVsZXNcIjogWyB7IFwicmVzXCI6IFsgMTI0MiwgMjIwOCBdIH0gXSxcclxuICAgIFwiZHBpXCI6IFsgNDUzLjYsIDQ1OC40IF0sXHJcbiAgICBcImJ3XCI6IDQsXHJcbiAgICBcImFjXCI6IDEwMDBcclxuICB9XHJcbl19O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBEUERCX0NBQ0hFO1xyXG5cclxufSx7fV0sMTE6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xyXG4vKlxyXG4gKiBDb3B5cmlnaHQgMjAxNSBHb29nbGUgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcblxyXG4vLyBPZmZsaW5lIGNhY2hlIG9mIHRoZSBEUERCLCB0byBiZSB1c2VkIHVudGlsIHdlIGxvYWQgdGhlIG9ubGluZSBvbmUgKGFuZFxyXG4vLyBhcyBhIGZhbGxiYWNrIGluIGNhc2Ugd2UgY2FuJ3QgbG9hZCB0aGUgb25saW5lIG9uZSkuXHJcbnZhciBEUERCX0NBQ0hFID0gX2RlcmVxXygnLi9kcGRiLWNhY2hlLmpzJyk7XHJcbnZhciBVdGlsID0gX2RlcmVxXygnLi4vdXRpbC5qcycpO1xyXG5cclxuLy8gT25saW5lIERQREIgVVJMLlxyXG52YXIgT05MSU5FX0RQREJfVVJMID0gJ2h0dHBzOi8vc3RvcmFnZS5nb29nbGVhcGlzLmNvbS9jYXJkYm9hcmQtZHBkYi9kcGRiLmpzb24nO1xyXG5cclxuLyoqXHJcbiAqIENhbGN1bGF0ZXMgZGV2aWNlIHBhcmFtZXRlcnMgYmFzZWQgb24gdGhlIERQREIgKERldmljZSBQYXJhbWV0ZXIgRGF0YWJhc2UpLlxyXG4gKiBJbml0aWFsbHksIHVzZXMgdGhlIGNhY2hlZCBEUERCIHZhbHVlcy5cclxuICpcclxuICogSWYgZmV0Y2hPbmxpbmUgPT0gdHJ1ZSwgdGhlbiB0aGlzIG9iamVjdCB0cmllcyB0byBmZXRjaCB0aGUgb25saW5lIHZlcnNpb25cclxuICogb2YgdGhlIERQREIgYW5kIHVwZGF0ZXMgdGhlIGRldmljZSBpbmZvIGlmIGEgYmV0dGVyIG1hdGNoIGlzIGZvdW5kLlxyXG4gKiBDYWxscyB0aGUgb25EZXZpY2VQYXJhbXNVcGRhdGVkIGNhbGxiYWNrIHdoZW4gdGhlcmUgaXMgYW4gdXBkYXRlIHRvIHRoZVxyXG4gKiBkZXZpY2UgaW5mb3JtYXRpb24uXHJcbiAqL1xyXG5mdW5jdGlvbiBEcGRiKGZldGNoT25saW5lLCBvbkRldmljZVBhcmFtc1VwZGF0ZWQpIHtcclxuICAvLyBTdGFydCB3aXRoIHRoZSBvZmZsaW5lIERQREIgY2FjaGUgd2hpbGUgd2UgYXJlIGxvYWRpbmcgdGhlIHJlYWwgb25lLlxyXG4gIHRoaXMuZHBkYiA9IERQREJfQ0FDSEU7XHJcblxyXG4gIC8vIENhbGN1bGF0ZSBkZXZpY2UgcGFyYW1zIGJhc2VkIG9uIHRoZSBvZmZsaW5lIHZlcnNpb24gb2YgdGhlIERQREIuXHJcbiAgdGhpcy5yZWNhbGN1bGF0ZURldmljZVBhcmFtc18oKTtcclxuXHJcbiAgLy8gWEhSIHRvIGZldGNoIG9ubGluZSBEUERCIGZpbGUsIGlmIHJlcXVlc3RlZC5cclxuICBpZiAoZmV0Y2hPbmxpbmUpIHtcclxuICAgIC8vIFNldCB0aGUgY2FsbGJhY2suXHJcbiAgICB0aGlzLm9uRGV2aWNlUGFyYW1zVXBkYXRlZCA9IG9uRGV2aWNlUGFyYW1zVXBkYXRlZDtcclxuXHJcbiAgICBjb25zb2xlLmxvZygnRmV0Y2hpbmcgRFBEQi4uLicpO1xyXG4gICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xyXG4gICAgdmFyIG9iaiA9IHRoaXM7XHJcbiAgICB4aHIub3BlbignR0VUJywgT05MSU5FX0RQREJfVVJMLCB0cnVlKTtcclxuICAgIHhoci5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgIG9iai5sb2FkaW5nID0gZmFsc2U7XHJcbiAgICAgIGlmICh4aHIuc3RhdHVzID49IDIwMCAmJiB4aHIuc3RhdHVzIDw9IDI5OSkge1xyXG4gICAgICAgIC8vIFN1Y2Nlc3MuXHJcbiAgICAgICAgY29uc29sZS5sb2coJ1N1Y2Nlc3NmdWxseSBsb2FkZWQgb25saW5lIERQREIuJyk7XHJcbiAgICAgICAgb2JqLmRwZGIgPSBKU09OLnBhcnNlKHhoci5yZXNwb25zZSk7XHJcbiAgICAgICAgb2JqLnJlY2FsY3VsYXRlRGV2aWNlUGFyYW1zXygpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vIEVycm9yIGxvYWRpbmcgdGhlIERQREIuXHJcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgbG9hZGluZyBvbmxpbmUgRFBEQiEnKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICB4aHIuc2VuZCgpO1xyXG4gIH1cclxufVxyXG5cclxuLy8gUmV0dXJucyB0aGUgY3VycmVudCBkZXZpY2UgcGFyYW1ldGVycy5cclxuRHBkYi5wcm90b3R5cGUuZ2V0RGV2aWNlUGFyYW1zID0gZnVuY3Rpb24oKSB7XHJcbiAgcmV0dXJuIHRoaXMuZGV2aWNlUGFyYW1zO1xyXG59O1xyXG5cclxuLy8gUmVjYWxjdWxhdGVzIHRoaXMgZGV2aWNlJ3MgcGFyYW1ldGVycyBiYXNlZCBvbiB0aGUgRFBEQi5cclxuRHBkYi5wcm90b3R5cGUucmVjYWxjdWxhdGVEZXZpY2VQYXJhbXNfID0gZnVuY3Rpb24oKSB7XHJcbiAgY29uc29sZS5sb2coJ1JlY2FsY3VsYXRpbmcgZGV2aWNlIHBhcmFtcy4nKTtcclxuICB2YXIgbmV3RGV2aWNlUGFyYW1zID0gdGhpcy5jYWxjRGV2aWNlUGFyYW1zXygpO1xyXG4gIGNvbnNvbGUubG9nKCdOZXcgZGV2aWNlIHBhcmFtZXRlcnM6Jyk7XHJcbiAgY29uc29sZS5sb2cobmV3RGV2aWNlUGFyYW1zKTtcclxuICBpZiAobmV3RGV2aWNlUGFyYW1zKSB7XHJcbiAgICB0aGlzLmRldmljZVBhcmFtcyA9IG5ld0RldmljZVBhcmFtcztcclxuICAgIC8vIEludm9rZSBjYWxsYmFjaywgaWYgaXQgaXMgc2V0LlxyXG4gICAgaWYgKHRoaXMub25EZXZpY2VQYXJhbXNVcGRhdGVkKSB7XHJcbiAgICAgIHRoaXMub25EZXZpY2VQYXJhbXNVcGRhdGVkKHRoaXMuZGV2aWNlUGFyYW1zKTtcclxuICAgIH1cclxuICB9IGVsc2Uge1xyXG4gICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIHJlY2FsY3VsYXRlIGRldmljZSBwYXJhbWV0ZXJzLicpO1xyXG4gIH1cclxufTtcclxuXHJcbi8vIFJldHVybnMgYSBEZXZpY2VQYXJhbXMgb2JqZWN0IHRoYXQgcmVwcmVzZW50cyB0aGUgYmVzdCBndWVzcyBhcyB0byB0aGlzXHJcbi8vIGRldmljZSdzIHBhcmFtZXRlcnMuIENhbiByZXR1cm4gbnVsbCBpZiB0aGUgZGV2aWNlIGRvZXMgbm90IG1hdGNoIGFueVxyXG4vLyBrbm93biBkZXZpY2VzLlxyXG5EcGRiLnByb3RvdHlwZS5jYWxjRGV2aWNlUGFyYW1zXyA9IGZ1bmN0aW9uKCkge1xyXG4gIHZhciBkYiA9IHRoaXMuZHBkYjsgLy8gc2hvcnRoYW5kXHJcbiAgaWYgKCFkYikge1xyXG4gICAgY29uc29sZS5lcnJvcignRFBEQiBub3QgYXZhaWxhYmxlLicpO1xyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG4gIGlmIChkYi5mb3JtYXQgIT0gMSkge1xyXG4gICAgY29uc29sZS5lcnJvcignRFBEQiBoYXMgdW5leHBlY3RlZCBmb3JtYXQgdmVyc2lvbi4nKTtcclxuICAgIHJldHVybiBudWxsO1xyXG4gIH1cclxuICBpZiAoIWRiLmRldmljZXMgfHwgIWRiLmRldmljZXMubGVuZ3RoKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdEUERCIGRvZXMgbm90IGhhdmUgYSBkZXZpY2VzIHNlY3Rpb24uJyk7XHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9XHJcblxyXG4gIC8vIEdldCB0aGUgYWN0dWFsIHVzZXIgYWdlbnQgYW5kIHNjcmVlbiBkaW1lbnNpb25zIGluIHBpeGVscy5cclxuICB2YXIgdXNlckFnZW50ID0gbmF2aWdhdG9yLnVzZXJBZ2VudCB8fCBuYXZpZ2F0b3IudmVuZG9yIHx8IHdpbmRvdy5vcGVyYTtcclxuICB2YXIgd2lkdGggPSBVdGlsLmdldFNjcmVlbldpZHRoKCk7XHJcbiAgdmFyIGhlaWdodCA9IFV0aWwuZ2V0U2NyZWVuSGVpZ2h0KCk7XHJcbiAgY29uc29sZS5sb2coJ1VzZXIgYWdlbnQ6ICcgKyB1c2VyQWdlbnQpO1xyXG4gIGNvbnNvbGUubG9nKCdQaXhlbCB3aWR0aDogJyArIHdpZHRoKTtcclxuICBjb25zb2xlLmxvZygnUGl4ZWwgaGVpZ2h0OiAnICsgaGVpZ2h0KTtcclxuXHJcbiAgaWYgKCFkYi5kZXZpY2VzKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdEUERCIGhhcyBubyBkZXZpY2VzIHNlY3Rpb24uJyk7XHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9XHJcblxyXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgZGIuZGV2aWNlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgdmFyIGRldmljZSA9IGRiLmRldmljZXNbaV07XHJcbiAgICBpZiAoIWRldmljZS5ydWxlcykge1xyXG4gICAgICBjb25zb2xlLndhcm4oJ0RldmljZVsnICsgaSArICddIGhhcyBubyBydWxlcyBzZWN0aW9uLicpO1xyXG4gICAgICBjb250aW51ZTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoZGV2aWNlLnR5cGUgIT0gJ2lvcycgJiYgZGV2aWNlLnR5cGUgIT0gJ2FuZHJvaWQnKSB7XHJcbiAgICAgIGNvbnNvbGUud2FybignRGV2aWNlWycgKyBpICsgJ10gaGFzIGludmFsaWQgdHlwZS4nKTtcclxuICAgICAgY29udGludWU7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gU2VlIGlmIHRoaXMgZGV2aWNlIGlzIG9mIHRoZSBhcHByb3ByaWF0ZSB0eXBlLlxyXG4gICAgaWYgKFV0aWwuaXNJT1MoKSAhPSAoZGV2aWNlLnR5cGUgPT0gJ2lvcycpKSBjb250aW51ZTtcclxuXHJcbiAgICAvLyBTZWUgaWYgdGhpcyBkZXZpY2UgbWF0Y2hlcyBhbnkgb2YgdGhlIHJ1bGVzOlxyXG4gICAgdmFyIG1hdGNoZWQgPSBmYWxzZTtcclxuICAgIGZvciAodmFyIGogPSAwOyBqIDwgZGV2aWNlLnJ1bGVzLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgIHZhciBydWxlID0gZGV2aWNlLnJ1bGVzW2pdO1xyXG4gICAgICBpZiAodGhpcy5tYXRjaFJ1bGVfKHJ1bGUsIHVzZXJBZ2VudCwgd2lkdGgsIGhlaWdodCkpIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnUnVsZSBtYXRjaGVkOicpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKHJ1bGUpO1xyXG4gICAgICAgIG1hdGNoZWQgPSB0cnVlO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAoIW1hdGNoZWQpIGNvbnRpbnVlO1xyXG5cclxuICAgIC8vIGRldmljZS5kcGkgbWlnaHQgYmUgYW4gYXJyYXkgb2YgWyB4ZHBpLCB5ZHBpXSBvciBqdXN0IGEgc2NhbGFyLlxyXG4gICAgdmFyIHhkcGkgPSBkZXZpY2UuZHBpWzBdIHx8IGRldmljZS5kcGk7XHJcbiAgICB2YXIgeWRwaSA9IGRldmljZS5kcGlbMV0gfHwgZGV2aWNlLmRwaTtcclxuXHJcbiAgICByZXR1cm4gbmV3IERldmljZVBhcmFtcyh7IHhkcGk6IHhkcGksIHlkcGk6IHlkcGksIGJldmVsTW06IGRldmljZS5idyB9KTtcclxuICB9XHJcblxyXG4gIGNvbnNvbGUud2FybignTm8gRFBEQiBkZXZpY2UgbWF0Y2guJyk7XHJcbiAgcmV0dXJuIG51bGw7XHJcbn07XHJcblxyXG5EcGRiLnByb3RvdHlwZS5tYXRjaFJ1bGVfID0gZnVuY3Rpb24ocnVsZSwgdWEsIHNjcmVlbldpZHRoLCBzY3JlZW5IZWlnaHQpIHtcclxuICAvLyBXZSBjYW4gb25seSBtYXRjaCAndWEnIGFuZCAncmVzJyBydWxlcywgbm90IG90aGVyIHR5cGVzIGxpa2UgJ21kbWgnXHJcbiAgLy8gKHdoaWNoIGFyZSBtZWFudCBmb3IgbmF0aXZlIHBsYXRmb3JtcykuXHJcbiAgaWYgKCFydWxlLnVhICYmICFydWxlLnJlcykgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAvLyBJZiBvdXIgdXNlciBhZ2VudCBzdHJpbmcgZG9lc24ndCBjb250YWluIHRoZSBpbmRpY2F0ZWQgdXNlciBhZ2VudCBzdHJpbmcsXHJcbiAgLy8gdGhlIG1hdGNoIGZhaWxzLlxyXG4gIGlmIChydWxlLnVhICYmIHVhLmluZGV4T2YocnVsZS51YSkgPCAwKSByZXR1cm4gZmFsc2U7XHJcblxyXG4gIC8vIElmIHRoZSBydWxlIHNwZWNpZmllcyBzY3JlZW4gZGltZW5zaW9ucyB0aGF0IGRvbid0IGNvcnJlc3BvbmQgdG8gb3VycyxcclxuICAvLyB0aGUgbWF0Y2ggZmFpbHMuXHJcbiAgaWYgKHJ1bGUucmVzKSB7XHJcbiAgICBpZiAoIXJ1bGUucmVzWzBdIHx8ICFydWxlLnJlc1sxXSkgcmV0dXJuIGZhbHNlO1xyXG4gICAgdmFyIHJlc1ggPSBydWxlLnJlc1swXTtcclxuICAgIHZhciByZXNZID0gcnVsZS5yZXNbMV07XHJcbiAgICAvLyBDb21wYXJlIG1pbiBhbmQgbWF4IHNvIGFzIHRvIG1ha2UgdGhlIG9yZGVyIG5vdCBtYXR0ZXIsIGkuZS4sIGl0IHNob3VsZFxyXG4gICAgLy8gYmUgdHJ1ZSB0aGF0IDY0MHg0ODAgPT0gNDgweDY0MC5cclxuICAgIGlmIChNYXRoLm1pbihzY3JlZW5XaWR0aCwgc2NyZWVuSGVpZ2h0KSAhPSBNYXRoLm1pbihyZXNYLCByZXNZKSB8fFxyXG4gICAgICAgIChNYXRoLm1heChzY3JlZW5XaWR0aCwgc2NyZWVuSGVpZ2h0KSAhPSBNYXRoLm1heChyZXNYLCByZXNZKSkpIHtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHRydWU7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIERldmljZVBhcmFtcyhwYXJhbXMpIHtcclxuICB0aGlzLnhkcGkgPSBwYXJhbXMueGRwaTtcclxuICB0aGlzLnlkcGkgPSBwYXJhbXMueWRwaTtcclxuICB0aGlzLmJldmVsTW0gPSBwYXJhbXMuYmV2ZWxNbTtcclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBEcGRiO1xyXG59LHtcIi4uL3V0aWwuanNcIjoyMixcIi4vZHBkYi1jYWNoZS5qc1wiOjEwfV0sMTI6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xyXG4vKlxyXG4gKiBDb3B5cmlnaHQgMjAxNSBHb29nbGUgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcblxyXG5mdW5jdGlvbiBFbWl0dGVyKCkge1xyXG4gIHRoaXMuY2FsbGJhY2tzID0ge307XHJcbn1cclxuXHJcbkVtaXR0ZXIucHJvdG90eXBlLmVtaXQgPSBmdW5jdGlvbihldmVudE5hbWUpIHtcclxuICB2YXIgY2FsbGJhY2tzID0gdGhpcy5jYWxsYmFja3NbZXZlbnROYW1lXTtcclxuICBpZiAoIWNhbGxiYWNrcykge1xyXG4gICAgLy9jb25zb2xlLmxvZygnTm8gdmFsaWQgY2FsbGJhY2sgc3BlY2lmaWVkLicpO1xyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuICB2YXIgYXJncyA9IFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzKTtcclxuICAvLyBFbGltaW5hdGUgdGhlIGZpcnN0IHBhcmFtICh0aGUgY2FsbGJhY2spLlxyXG4gIGFyZ3Muc2hpZnQoKTtcclxuICBmb3IgKHZhciBpID0gMDsgaSA8IGNhbGxiYWNrcy5sZW5ndGg7IGkrKykge1xyXG4gICAgY2FsbGJhY2tzW2ldLmFwcGx5KHRoaXMsIGFyZ3MpO1xyXG4gIH1cclxufTtcclxuXHJcbkVtaXR0ZXIucHJvdG90eXBlLm9uID0gZnVuY3Rpb24oZXZlbnROYW1lLCBjYWxsYmFjaykge1xyXG4gIGlmIChldmVudE5hbWUgaW4gdGhpcy5jYWxsYmFja3MpIHtcclxuICAgIHRoaXMuY2FsbGJhY2tzW2V2ZW50TmFtZV0ucHVzaChjYWxsYmFjayk7XHJcbiAgfSBlbHNlIHtcclxuICAgIHRoaXMuY2FsbGJhY2tzW2V2ZW50TmFtZV0gPSBbY2FsbGJhY2tdO1xyXG4gIH1cclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gRW1pdHRlcjtcclxuXHJcbn0se31dLDEzOltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcclxuLypcclxuICogQ29weXJpZ2h0IDIwMTUgR29vZ2xlIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG52YXIgVXRpbCA9IF9kZXJlcV8oJy4vdXRpbC5qcycpO1xyXG52YXIgV2ViVlJQb2x5ZmlsbCA9IF9kZXJlcV8oJy4vd2VidnItcG9seWZpbGwuanMnKTtcclxuXHJcbi8vIEluaXRpYWxpemUgYSBXZWJWUkNvbmZpZyBqdXN0IGluIGNhc2UuXHJcbndpbmRvdy5XZWJWUkNvbmZpZyA9IFV0aWwuZXh0ZW5kKHtcclxuICAvLyBGb3JjZXMgYXZhaWxhYmlsaXR5IG9mIFZSIG1vZGUsIGV2ZW4gZm9yIG5vbi1tb2JpbGUgZGV2aWNlcy5cclxuICBGT1JDRV9FTkFCTEVfVlI6IGZhbHNlLFxyXG5cclxuICAvLyBDb21wbGVtZW50YXJ5IGZpbHRlciBjb2VmZmljaWVudC4gMCBmb3IgYWNjZWxlcm9tZXRlciwgMSBmb3IgZ3lyby5cclxuICBLX0ZJTFRFUjogMC45OCxcclxuXHJcbiAgLy8gSG93IGZhciBpbnRvIHRoZSBmdXR1cmUgdG8gcHJlZGljdCBkdXJpbmcgZmFzdCBtb3Rpb24gKGluIHNlY29uZHMpLlxyXG4gIFBSRURJQ1RJT05fVElNRV9TOiAwLjA0MCxcclxuXHJcbiAgLy8gRmxhZyB0byBkaXNhYmxlIHRvdWNoIHBhbm5lci4gSW4gY2FzZSB5b3UgaGF2ZSB5b3VyIG93biB0b3VjaCBjb250cm9scy5cclxuICBUT1VDSF9QQU5ORVJfRElTQUJMRUQ6IGZhbHNlLFxyXG5cclxuICAvLyBGbGFnIHRvIGRpc2FibGVkIHRoZSBVSSBpbiBWUiBNb2RlLlxyXG4gIENBUkRCT0FSRF9VSV9ESVNBQkxFRDogZmFsc2UsIC8vIERlZmF1bHQ6IGZhbHNlXHJcblxyXG4gIC8vIEZsYWcgdG8gZGlzYWJsZSB0aGUgaW5zdHJ1Y3Rpb25zIHRvIHJvdGF0ZSB5b3VyIGRldmljZS5cclxuICBST1RBVEVfSU5TVFJVQ1RJT05TX0RJU0FCTEVEOiBmYWxzZSwgLy8gRGVmYXVsdDogZmFsc2UuXHJcblxyXG4gIC8vIEVuYWJsZSB5YXcgcGFubmluZyBvbmx5LCBkaXNhYmxpbmcgcm9sbCBhbmQgcGl0Y2guIFRoaXMgY2FuIGJlIHVzZWZ1bFxyXG4gIC8vIGZvciBwYW5vcmFtYXMgd2l0aCBub3RoaW5nIGludGVyZXN0aW5nIGFib3ZlIG9yIGJlbG93LlxyXG4gIFlBV19PTkxZOiBmYWxzZSxcclxuXHJcbiAgLy8gVG8gZGlzYWJsZSBrZXlib2FyZCBhbmQgbW91c2UgY29udHJvbHMsIGlmIHlvdSB3YW50IHRvIHVzZSB5b3VyIG93blxyXG4gIC8vIGltcGxlbWVudGF0aW9uLlxyXG4gIE1PVVNFX0tFWUJPQVJEX0NPTlRST0xTX0RJU0FCTEVEOiBmYWxzZSxcclxuXHJcbiAgLy8gUHJldmVudCB0aGUgcG9seWZpbGwgZnJvbSBpbml0aWFsaXppbmcgaW1tZWRpYXRlbHkuIFJlcXVpcmVzIHRoZSBhcHBcclxuICAvLyB0byBjYWxsIEluaXRpYWxpemVXZWJWUlBvbHlmaWxsKCkgYmVmb3JlIGl0IGNhbiBiZSB1c2VkLlxyXG4gIERFRkVSX0lOSVRJQUxJWkFUSU9OOiBmYWxzZSxcclxuXHJcbiAgLy8gRW5hYmxlIHRoZSBkZXByZWNhdGVkIHZlcnNpb24gb2YgdGhlIEFQSSAobmF2aWdhdG9yLmdldFZSRGV2aWNlcykuXHJcbiAgRU5BQkxFX0RFUFJFQ0FURURfQVBJOiBmYWxzZSxcclxuXHJcbiAgLy8gU2NhbGVzIHRoZSByZWNvbW1lbmRlZCBidWZmZXIgc2l6ZSByZXBvcnRlZCBieSBXZWJWUiwgd2hpY2ggY2FuIGltcHJvdmVcclxuICAvLyBwZXJmb3JtYW5jZS5cclxuICAvLyBVUERBVEUoMjAxNi0wNS0wMyk6IFNldHRpbmcgdGhpcyB0byAwLjUgYnkgZGVmYXVsdCBzaW5jZSAxLjAgZG9lcyBub3RcclxuICAvLyBwZXJmb3JtIHdlbGwgb24gbWFueSBtb2JpbGUgZGV2aWNlcy5cclxuICBCVUZGRVJfU0NBTEU6IDAuNSxcclxuXHJcbiAgLy8gQWxsb3cgVlJEaXNwbGF5LnN1Ym1pdEZyYW1lIHRvIGNoYW5nZSBnbCBiaW5kaW5ncywgd2hpY2ggaXMgbW9yZVxyXG4gIC8vIGVmZmljaWVudCBpZiB0aGUgYXBwbGljYXRpb24gY29kZSB3aWxsIHJlLWJpbmQgaXRzIHJlc291cmNlcyBvbiB0aGVcclxuICAvLyBuZXh0IGZyYW1lIGFueXdheS4gVGhpcyBoYXMgYmVlbiBzZWVuIHRvIGNhdXNlIHJlbmRlcmluZyBnbGl0Y2hlcyB3aXRoXHJcbiAgLy8gVEhSRUUuanMuXHJcbiAgLy8gRGlydHkgYmluZGluZ3MgaW5jbHVkZTogZ2wuRlJBTUVCVUZGRVJfQklORElORywgZ2wuQ1VSUkVOVF9QUk9HUkFNLFxyXG4gIC8vIGdsLkFSUkFZX0JVRkZFUl9CSU5ESU5HLCBnbC5FTEVNRU5UX0FSUkFZX0JVRkZFUl9CSU5ESU5HLFxyXG4gIC8vIGFuZCBnbC5URVhUVVJFX0JJTkRJTkdfMkQgZm9yIHRleHR1cmUgdW5pdCAwLlxyXG4gIERJUlRZX1NVQk1JVF9GUkFNRV9CSU5ESU5HUzogZmFsc2VcclxufSwgd2luZG93LldlYlZSQ29uZmlnKTtcclxuXHJcbmlmICghd2luZG93LldlYlZSQ29uZmlnLkRFRkVSX0lOSVRJQUxJWkFUSU9OKSB7XHJcbiAgbmV3IFdlYlZSUG9seWZpbGwoKTtcclxufSBlbHNlIHtcclxuICB3aW5kb3cuSW5pdGlhbGl6ZVdlYlZSUG9seWZpbGwgPSBmdW5jdGlvbigpIHtcclxuICAgIG5ldyBXZWJWUlBvbHlmaWxsKCk7XHJcbiAgfVxyXG59XHJcblxyXG59LHtcIi4vdXRpbC5qc1wiOjIyLFwiLi93ZWJ2ci1wb2x5ZmlsbC5qc1wiOjI1fV0sMTQ6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xyXG4vKlxyXG4gKiBDb3B5cmlnaHQgMjAxNiBHb29nbGUgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcblxyXG52YXIgTWF0aFV0aWwgPSB3aW5kb3cuTWF0aFV0aWwgfHwge307XHJcblxyXG5NYXRoVXRpbC5kZWdUb1JhZCA9IE1hdGguUEkgLyAxODA7XHJcbk1hdGhVdGlsLnJhZFRvRGVnID0gMTgwIC8gTWF0aC5QSTtcclxuXHJcbi8vIFNvbWUgbWluaW1hbCBtYXRoIGZ1bmN0aW9uYWxpdHkgYm9ycm93ZWQgZnJvbSBUSFJFRS5NYXRoIGFuZCBzdHJpcHBlZCBkb3duXHJcbi8vIGZvciB0aGUgcHVycG9zZXMgb2YgdGhpcyBsaWJyYXJ5LlxyXG5cclxuXHJcbk1hdGhVdGlsLlZlY3RvcjIgPSBmdW5jdGlvbiAoIHgsIHkgKSB7XHJcbiAgdGhpcy54ID0geCB8fCAwO1xyXG4gIHRoaXMueSA9IHkgfHwgMDtcclxufTtcclxuXHJcbk1hdGhVdGlsLlZlY3RvcjIucHJvdG90eXBlID0ge1xyXG4gIGNvbnN0cnVjdG9yOiBNYXRoVXRpbC5WZWN0b3IyLFxyXG5cclxuICBzZXQ6IGZ1bmN0aW9uICggeCwgeSApIHtcclxuICAgIHRoaXMueCA9IHg7XHJcbiAgICB0aGlzLnkgPSB5O1xyXG5cclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH0sXHJcblxyXG4gIGNvcHk6IGZ1bmN0aW9uICggdiApIHtcclxuICAgIHRoaXMueCA9IHYueDtcclxuICAgIHRoaXMueSA9IHYueTtcclxuXHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9LFxyXG5cclxuICBzdWJWZWN0b3JzOiBmdW5jdGlvbiAoIGEsIGIgKSB7XHJcbiAgICB0aGlzLnggPSBhLnggLSBiLng7XHJcbiAgICB0aGlzLnkgPSBhLnkgLSBiLnk7XHJcblxyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfSxcclxufTtcclxuXHJcbk1hdGhVdGlsLlZlY3RvcjMgPSBmdW5jdGlvbiAoIHgsIHksIHogKSB7XHJcbiAgdGhpcy54ID0geCB8fCAwO1xyXG4gIHRoaXMueSA9IHkgfHwgMDtcclxuICB0aGlzLnogPSB6IHx8IDA7XHJcbn07XHJcblxyXG5NYXRoVXRpbC5WZWN0b3IzLnByb3RvdHlwZSA9IHtcclxuICBjb25zdHJ1Y3RvcjogTWF0aFV0aWwuVmVjdG9yMyxcclxuXHJcbiAgc2V0OiBmdW5jdGlvbiAoIHgsIHksIHogKSB7XHJcbiAgICB0aGlzLnggPSB4O1xyXG4gICAgdGhpcy55ID0geTtcclxuICAgIHRoaXMueiA9IHo7XHJcblxyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfSxcclxuXHJcbiAgY29weTogZnVuY3Rpb24gKCB2ICkge1xyXG4gICAgdGhpcy54ID0gdi54O1xyXG4gICAgdGhpcy55ID0gdi55O1xyXG4gICAgdGhpcy56ID0gdi56O1xyXG5cclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH0sXHJcblxyXG4gIGxlbmd0aDogZnVuY3Rpb24gKCkge1xyXG4gICAgcmV0dXJuIE1hdGguc3FydCggdGhpcy54ICogdGhpcy54ICsgdGhpcy55ICogdGhpcy55ICsgdGhpcy56ICogdGhpcy56ICk7XHJcbiAgfSxcclxuXHJcbiAgbm9ybWFsaXplOiBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2NhbGFyID0gdGhpcy5sZW5ndGgoKTtcclxuXHJcbiAgICBpZiAoIHNjYWxhciAhPT0gMCApIHtcclxuICAgICAgdmFyIGludlNjYWxhciA9IDEgLyBzY2FsYXI7XHJcblxyXG4gICAgICB0aGlzLm11bHRpcGx5U2NhbGFyKGludlNjYWxhcik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLnggPSAwO1xyXG4gICAgICB0aGlzLnkgPSAwO1xyXG4gICAgICB0aGlzLnogPSAwO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH0sXHJcblxyXG4gIG11bHRpcGx5U2NhbGFyOiBmdW5jdGlvbiAoIHNjYWxhciApIHtcclxuICAgIHRoaXMueCAqPSBzY2FsYXI7XHJcbiAgICB0aGlzLnkgKj0gc2NhbGFyO1xyXG4gICAgdGhpcy56ICo9IHNjYWxhcjtcclxuICB9LFxyXG5cclxuICBhcHBseVF1YXRlcm5pb246IGZ1bmN0aW9uICggcSApIHtcclxuICAgIHZhciB4ID0gdGhpcy54O1xyXG4gICAgdmFyIHkgPSB0aGlzLnk7XHJcbiAgICB2YXIgeiA9IHRoaXMuejtcclxuXHJcbiAgICB2YXIgcXggPSBxLng7XHJcbiAgICB2YXIgcXkgPSBxLnk7XHJcbiAgICB2YXIgcXogPSBxLno7XHJcbiAgICB2YXIgcXcgPSBxLnc7XHJcblxyXG4gICAgLy8gY2FsY3VsYXRlIHF1YXQgKiB2ZWN0b3JcclxuICAgIHZhciBpeCA9ICBxdyAqIHggKyBxeSAqIHogLSBxeiAqIHk7XHJcbiAgICB2YXIgaXkgPSAgcXcgKiB5ICsgcXogKiB4IC0gcXggKiB6O1xyXG4gICAgdmFyIGl6ID0gIHF3ICogeiArIHF4ICogeSAtIHF5ICogeDtcclxuICAgIHZhciBpdyA9IC0gcXggKiB4IC0gcXkgKiB5IC0gcXogKiB6O1xyXG5cclxuICAgIC8vIGNhbGN1bGF0ZSByZXN1bHQgKiBpbnZlcnNlIHF1YXRcclxuICAgIHRoaXMueCA9IGl4ICogcXcgKyBpdyAqIC0gcXggKyBpeSAqIC0gcXogLSBpeiAqIC0gcXk7XHJcbiAgICB0aGlzLnkgPSBpeSAqIHF3ICsgaXcgKiAtIHF5ICsgaXogKiAtIHF4IC0gaXggKiAtIHF6O1xyXG4gICAgdGhpcy56ID0gaXogKiBxdyArIGl3ICogLSBxeiArIGl4ICogLSBxeSAtIGl5ICogLSBxeDtcclxuXHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9LFxyXG5cclxuICBkb3Q6IGZ1bmN0aW9uICggdiApIHtcclxuICAgIHJldHVybiB0aGlzLnggKiB2LnggKyB0aGlzLnkgKiB2LnkgKyB0aGlzLnogKiB2Lno7XHJcbiAgfSxcclxuXHJcbiAgY3Jvc3NWZWN0b3JzOiBmdW5jdGlvbiAoIGEsIGIgKSB7XHJcbiAgICB2YXIgYXggPSBhLngsIGF5ID0gYS55LCBheiA9IGEuejtcclxuICAgIHZhciBieCA9IGIueCwgYnkgPSBiLnksIGJ6ID0gYi56O1xyXG5cclxuICAgIHRoaXMueCA9IGF5ICogYnogLSBheiAqIGJ5O1xyXG4gICAgdGhpcy55ID0gYXogKiBieCAtIGF4ICogYno7XHJcbiAgICB0aGlzLnogPSBheCAqIGJ5IC0gYXkgKiBieDtcclxuXHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9LFxyXG59O1xyXG5cclxuTWF0aFV0aWwuUXVhdGVybmlvbiA9IGZ1bmN0aW9uICggeCwgeSwgeiwgdyApIHtcclxuICB0aGlzLnggPSB4IHx8IDA7XHJcbiAgdGhpcy55ID0geSB8fCAwO1xyXG4gIHRoaXMueiA9IHogfHwgMDtcclxuICB0aGlzLncgPSAoIHcgIT09IHVuZGVmaW5lZCApID8gdyA6IDE7XHJcbn07XHJcblxyXG5NYXRoVXRpbC5RdWF0ZXJuaW9uLnByb3RvdHlwZSA9IHtcclxuICBjb25zdHJ1Y3RvcjogTWF0aFV0aWwuUXVhdGVybmlvbixcclxuXHJcbiAgc2V0OiBmdW5jdGlvbiAoIHgsIHksIHosIHcgKSB7XHJcbiAgICB0aGlzLnggPSB4O1xyXG4gICAgdGhpcy55ID0geTtcclxuICAgIHRoaXMueiA9IHo7XHJcbiAgICB0aGlzLncgPSB3O1xyXG5cclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH0sXHJcblxyXG4gIGNvcHk6IGZ1bmN0aW9uICggcXVhdGVybmlvbiApIHtcclxuICAgIHRoaXMueCA9IHF1YXRlcm5pb24ueDtcclxuICAgIHRoaXMueSA9IHF1YXRlcm5pb24ueTtcclxuICAgIHRoaXMueiA9IHF1YXRlcm5pb24uejtcclxuICAgIHRoaXMudyA9IHF1YXRlcm5pb24udztcclxuXHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9LFxyXG5cclxuICBzZXRGcm9tRXVsZXJYWVo6IGZ1bmN0aW9uKCB4LCB5LCB6ICkge1xyXG4gICAgdmFyIGMxID0gTWF0aC5jb3MoIHggLyAyICk7XHJcbiAgICB2YXIgYzIgPSBNYXRoLmNvcyggeSAvIDIgKTtcclxuICAgIHZhciBjMyA9IE1hdGguY29zKCB6IC8gMiApO1xyXG4gICAgdmFyIHMxID0gTWF0aC5zaW4oIHggLyAyICk7XHJcbiAgICB2YXIgczIgPSBNYXRoLnNpbiggeSAvIDIgKTtcclxuICAgIHZhciBzMyA9IE1hdGguc2luKCB6IC8gMiApO1xyXG5cclxuICAgIHRoaXMueCA9IHMxICogYzIgKiBjMyArIGMxICogczIgKiBzMztcclxuICAgIHRoaXMueSA9IGMxICogczIgKiBjMyAtIHMxICogYzIgKiBzMztcclxuICAgIHRoaXMueiA9IGMxICogYzIgKiBzMyArIHMxICogczIgKiBjMztcclxuICAgIHRoaXMudyA9IGMxICogYzIgKiBjMyAtIHMxICogczIgKiBzMztcclxuXHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9LFxyXG5cclxuICBzZXRGcm9tRXVsZXJZWFo6IGZ1bmN0aW9uKCB4LCB5LCB6ICkge1xyXG4gICAgdmFyIGMxID0gTWF0aC5jb3MoIHggLyAyICk7XHJcbiAgICB2YXIgYzIgPSBNYXRoLmNvcyggeSAvIDIgKTtcclxuICAgIHZhciBjMyA9IE1hdGguY29zKCB6IC8gMiApO1xyXG4gICAgdmFyIHMxID0gTWF0aC5zaW4oIHggLyAyICk7XHJcbiAgICB2YXIgczIgPSBNYXRoLnNpbiggeSAvIDIgKTtcclxuICAgIHZhciBzMyA9IE1hdGguc2luKCB6IC8gMiApO1xyXG5cclxuICAgIHRoaXMueCA9IHMxICogYzIgKiBjMyArIGMxICogczIgKiBzMztcclxuICAgIHRoaXMueSA9IGMxICogczIgKiBjMyAtIHMxICogYzIgKiBzMztcclxuICAgIHRoaXMueiA9IGMxICogYzIgKiBzMyAtIHMxICogczIgKiBjMztcclxuICAgIHRoaXMudyA9IGMxICogYzIgKiBjMyArIHMxICogczIgKiBzMztcclxuXHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9LFxyXG5cclxuICBzZXRGcm9tQXhpc0FuZ2xlOiBmdW5jdGlvbiAoIGF4aXMsIGFuZ2xlICkge1xyXG4gICAgLy8gaHR0cDovL3d3dy5ldWNsaWRlYW5zcGFjZS5jb20vbWF0aHMvZ2VvbWV0cnkvcm90YXRpb25zL2NvbnZlcnNpb25zL2FuZ2xlVG9RdWF0ZXJuaW9uL2luZGV4Lmh0bVxyXG4gICAgLy8gYXNzdW1lcyBheGlzIGlzIG5vcm1hbGl6ZWRcclxuXHJcbiAgICB2YXIgaGFsZkFuZ2xlID0gYW5nbGUgLyAyLCBzID0gTWF0aC5zaW4oIGhhbGZBbmdsZSApO1xyXG5cclxuICAgIHRoaXMueCA9IGF4aXMueCAqIHM7XHJcbiAgICB0aGlzLnkgPSBheGlzLnkgKiBzO1xyXG4gICAgdGhpcy56ID0gYXhpcy56ICogcztcclxuICAgIHRoaXMudyA9IE1hdGguY29zKCBoYWxmQW5nbGUgKTtcclxuXHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9LFxyXG5cclxuICBtdWx0aXBseTogZnVuY3Rpb24gKCBxICkge1xyXG4gICAgcmV0dXJuIHRoaXMubXVsdGlwbHlRdWF0ZXJuaW9ucyggdGhpcywgcSApO1xyXG4gIH0sXHJcblxyXG4gIG11bHRpcGx5UXVhdGVybmlvbnM6IGZ1bmN0aW9uICggYSwgYiApIHtcclxuICAgIC8vIGZyb20gaHR0cDovL3d3dy5ldWNsaWRlYW5zcGFjZS5jb20vbWF0aHMvYWxnZWJyYS9yZWFsTm9ybWVkQWxnZWJyYS9xdWF0ZXJuaW9ucy9jb2RlL2luZGV4Lmh0bVxyXG5cclxuICAgIHZhciBxYXggPSBhLngsIHFheSA9IGEueSwgcWF6ID0gYS56LCBxYXcgPSBhLnc7XHJcbiAgICB2YXIgcWJ4ID0gYi54LCBxYnkgPSBiLnksIHFieiA9IGIueiwgcWJ3ID0gYi53O1xyXG5cclxuICAgIHRoaXMueCA9IHFheCAqIHFidyArIHFhdyAqIHFieCArIHFheSAqIHFieiAtIHFheiAqIHFieTtcclxuICAgIHRoaXMueSA9IHFheSAqIHFidyArIHFhdyAqIHFieSArIHFheiAqIHFieCAtIHFheCAqIHFiejtcclxuICAgIHRoaXMueiA9IHFheiAqIHFidyArIHFhdyAqIHFieiArIHFheCAqIHFieSAtIHFheSAqIHFieDtcclxuICAgIHRoaXMudyA9IHFhdyAqIHFidyAtIHFheCAqIHFieCAtIHFheSAqIHFieSAtIHFheiAqIHFiejtcclxuXHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9LFxyXG5cclxuICBpbnZlcnNlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICB0aGlzLnggKj0gLTE7XHJcbiAgICB0aGlzLnkgKj0gLTE7XHJcbiAgICB0aGlzLnogKj0gLTE7XHJcblxyXG4gICAgdGhpcy5ub3JtYWxpemUoKTtcclxuXHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9LFxyXG5cclxuICBub3JtYWxpemU6IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBsID0gTWF0aC5zcXJ0KCB0aGlzLnggKiB0aGlzLnggKyB0aGlzLnkgKiB0aGlzLnkgKyB0aGlzLnogKiB0aGlzLnogKyB0aGlzLncgKiB0aGlzLncgKTtcclxuXHJcbiAgICBpZiAoIGwgPT09IDAgKSB7XHJcbiAgICAgIHRoaXMueCA9IDA7XHJcbiAgICAgIHRoaXMueSA9IDA7XHJcbiAgICAgIHRoaXMueiA9IDA7XHJcbiAgICAgIHRoaXMudyA9IDE7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBsID0gMSAvIGw7XHJcblxyXG4gICAgICB0aGlzLnggPSB0aGlzLnggKiBsO1xyXG4gICAgICB0aGlzLnkgPSB0aGlzLnkgKiBsO1xyXG4gICAgICB0aGlzLnogPSB0aGlzLnogKiBsO1xyXG4gICAgICB0aGlzLncgPSB0aGlzLncgKiBsO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH0sXHJcblxyXG4gIHNsZXJwOiBmdW5jdGlvbiAoIHFiLCB0ICkge1xyXG4gICAgaWYgKCB0ID09PSAwICkgcmV0dXJuIHRoaXM7XHJcbiAgICBpZiAoIHQgPT09IDEgKSByZXR1cm4gdGhpcy5jb3B5KCBxYiApO1xyXG5cclxuICAgIHZhciB4ID0gdGhpcy54LCB5ID0gdGhpcy55LCB6ID0gdGhpcy56LCB3ID0gdGhpcy53O1xyXG5cclxuICAgIC8vIGh0dHA6Ly93d3cuZXVjbGlkZWFuc3BhY2UuY29tL21hdGhzL2FsZ2VicmEvcmVhbE5vcm1lZEFsZ2VicmEvcXVhdGVybmlvbnMvc2xlcnAvXHJcblxyXG4gICAgdmFyIGNvc0hhbGZUaGV0YSA9IHcgKiBxYi53ICsgeCAqIHFiLnggKyB5ICogcWIueSArIHogKiBxYi56O1xyXG5cclxuICAgIGlmICggY29zSGFsZlRoZXRhIDwgMCApIHtcclxuICAgICAgdGhpcy53ID0gLSBxYi53O1xyXG4gICAgICB0aGlzLnggPSAtIHFiLng7XHJcbiAgICAgIHRoaXMueSA9IC0gcWIueTtcclxuICAgICAgdGhpcy56ID0gLSBxYi56O1xyXG5cclxuICAgICAgY29zSGFsZlRoZXRhID0gLSBjb3NIYWxmVGhldGE7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmNvcHkoIHFiICk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCBjb3NIYWxmVGhldGEgPj0gMS4wICkge1xyXG4gICAgICB0aGlzLncgPSB3O1xyXG4gICAgICB0aGlzLnggPSB4O1xyXG4gICAgICB0aGlzLnkgPSB5O1xyXG4gICAgICB0aGlzLnogPSB6O1xyXG5cclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIGhhbGZUaGV0YSA9IE1hdGguYWNvcyggY29zSGFsZlRoZXRhICk7XHJcbiAgICB2YXIgc2luSGFsZlRoZXRhID0gTWF0aC5zcXJ0KCAxLjAgLSBjb3NIYWxmVGhldGEgKiBjb3NIYWxmVGhldGEgKTtcclxuXHJcbiAgICBpZiAoIE1hdGguYWJzKCBzaW5IYWxmVGhldGEgKSA8IDAuMDAxICkge1xyXG4gICAgICB0aGlzLncgPSAwLjUgKiAoIHcgKyB0aGlzLncgKTtcclxuICAgICAgdGhpcy54ID0gMC41ICogKCB4ICsgdGhpcy54ICk7XHJcbiAgICAgIHRoaXMueSA9IDAuNSAqICggeSArIHRoaXMueSApO1xyXG4gICAgICB0aGlzLnogPSAwLjUgKiAoIHogKyB0aGlzLnogKTtcclxuXHJcbiAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciByYXRpb0EgPSBNYXRoLnNpbiggKCAxIC0gdCApICogaGFsZlRoZXRhICkgLyBzaW5IYWxmVGhldGEsXHJcbiAgICByYXRpb0IgPSBNYXRoLnNpbiggdCAqIGhhbGZUaGV0YSApIC8gc2luSGFsZlRoZXRhO1xyXG5cclxuICAgIHRoaXMudyA9ICggdyAqIHJhdGlvQSArIHRoaXMudyAqIHJhdGlvQiApO1xyXG4gICAgdGhpcy54ID0gKCB4ICogcmF0aW9BICsgdGhpcy54ICogcmF0aW9CICk7XHJcbiAgICB0aGlzLnkgPSAoIHkgKiByYXRpb0EgKyB0aGlzLnkgKiByYXRpb0IgKTtcclxuICAgIHRoaXMueiA9ICggeiAqIHJhdGlvQSArIHRoaXMueiAqIHJhdGlvQiApO1xyXG5cclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH0sXHJcblxyXG4gIHNldEZyb21Vbml0VmVjdG9yczogZnVuY3Rpb24gKCkge1xyXG4gICAgLy8gaHR0cDovL2xvbGVuZ2luZS5uZXQvYmxvZy8yMDE0LzAyLzI0L3F1YXRlcm5pb24tZnJvbS10d28tdmVjdG9ycy1maW5hbFxyXG4gICAgLy8gYXNzdW1lcyBkaXJlY3Rpb24gdmVjdG9ycyB2RnJvbSBhbmQgdlRvIGFyZSBub3JtYWxpemVkXHJcblxyXG4gICAgdmFyIHYxLCByO1xyXG4gICAgdmFyIEVQUyA9IDAuMDAwMDAxO1xyXG5cclxuICAgIHJldHVybiBmdW5jdGlvbiAoIHZGcm9tLCB2VG8gKSB7XHJcbiAgICAgIGlmICggdjEgPT09IHVuZGVmaW5lZCApIHYxID0gbmV3IE1hdGhVdGlsLlZlY3RvcjMoKTtcclxuXHJcbiAgICAgIHIgPSB2RnJvbS5kb3QoIHZUbyApICsgMTtcclxuXHJcbiAgICAgIGlmICggciA8IEVQUyApIHtcclxuICAgICAgICByID0gMDtcclxuXHJcbiAgICAgICAgaWYgKCBNYXRoLmFicyggdkZyb20ueCApID4gTWF0aC5hYnMoIHZGcm9tLnogKSApIHtcclxuICAgICAgICAgIHYxLnNldCggLSB2RnJvbS55LCB2RnJvbS54LCAwICk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHYxLnNldCggMCwgLSB2RnJvbS56LCB2RnJvbS55ICk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHYxLmNyb3NzVmVjdG9ycyggdkZyb20sIHZUbyApO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB0aGlzLnggPSB2MS54O1xyXG4gICAgICB0aGlzLnkgPSB2MS55O1xyXG4gICAgICB0aGlzLnogPSB2MS56O1xyXG4gICAgICB0aGlzLncgPSByO1xyXG5cclxuICAgICAgdGhpcy5ub3JtYWxpemUoKTtcclxuXHJcbiAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gIH0oKSxcclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gTWF0aFV0aWw7XHJcblxyXG59LHt9XSwxNTpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XHJcbi8qXHJcbiAqIENvcHlyaWdodCAyMDE2IEdvb2dsZSBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuXHJcbnZhciBWUkRpc3BsYXkgPSBfZGVyZXFfKCcuL2Jhc2UuanMnKS5WUkRpc3BsYXk7XHJcbnZhciBNYXRoVXRpbCA9IF9kZXJlcV8oJy4vbWF0aC11dGlsLmpzJyk7XHJcbnZhciBVdGlsID0gX2RlcmVxXygnLi91dGlsLmpzJyk7XHJcblxyXG4vLyBIb3cgbXVjaCB0byByb3RhdGUgcGVyIGtleSBzdHJva2UuXHJcbnZhciBLRVlfU1BFRUQgPSAwLjE1O1xyXG52YXIgS0VZX0FOSU1BVElPTl9EVVJBVElPTiA9IDgwO1xyXG5cclxuLy8gSG93IG11Y2ggdG8gcm90YXRlIGZvciBtb3VzZSBldmVudHMuXHJcbnZhciBNT1VTRV9TUEVFRF9YID0gMC41O1xyXG52YXIgTU9VU0VfU1BFRURfWSA9IDAuMztcclxuXHJcbi8qKlxyXG4gKiBWUkRpc3BsYXkgYmFzZWQgb24gbW91c2UgYW5kIGtleWJvYXJkIGlucHV0LiBEZXNpZ25lZCBmb3IgZGVza3RvcHMvbGFwdG9wc1xyXG4gKiB3aGVyZSBvcmllbnRhdGlvbiBldmVudHMgYXJlbid0IHN1cHBvcnRlZC4gQ2Fubm90IHByZXNlbnQuXHJcbiAqL1xyXG5mdW5jdGlvbiBNb3VzZUtleWJvYXJkVlJEaXNwbGF5KCkge1xyXG4gIHRoaXMuZGlzcGxheU5hbWUgPSAnTW91c2UgYW5kIEtleWJvYXJkIFZSRGlzcGxheSAod2VidnItcG9seWZpbGwpJztcclxuXHJcbiAgdGhpcy5jYXBhYmlsaXRpZXMuaGFzT3JpZW50YXRpb24gPSB0cnVlO1xyXG5cclxuICAvLyBBdHRhY2ggdG8gbW91c2UgYW5kIGtleWJvYXJkIGV2ZW50cy5cclxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMub25LZXlEb3duXy5iaW5kKHRoaXMpKTtcclxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgdGhpcy5vbk1vdXNlTW92ZV8uYmluZCh0aGlzKSk7XHJcbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHRoaXMub25Nb3VzZURvd25fLmJpbmQodGhpcykpO1xyXG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgdGhpcy5vbk1vdXNlVXBfLmJpbmQodGhpcykpO1xyXG5cclxuICAvLyBcIlByaXZhdGVcIiBtZW1iZXJzLlxyXG4gIHRoaXMucGhpXyA9IDA7XHJcbiAgdGhpcy50aGV0YV8gPSAwO1xyXG5cclxuICAvLyBWYXJpYWJsZXMgZm9yIGtleWJvYXJkLWJhc2VkIHJvdGF0aW9uIGFuaW1hdGlvbi5cclxuICB0aGlzLnRhcmdldEFuZ2xlXyA9IG51bGw7XHJcbiAgdGhpcy5hbmdsZUFuaW1hdGlvbl8gPSBudWxsO1xyXG5cclxuICAvLyBTdGF0ZSB2YXJpYWJsZXMgZm9yIGNhbGN1bGF0aW9ucy5cclxuICB0aGlzLm9yaWVudGF0aW9uXyA9IG5ldyBNYXRoVXRpbC5RdWF0ZXJuaW9uKCk7XHJcblxyXG4gIC8vIFZhcmlhYmxlcyBmb3IgbW91c2UtYmFzZWQgcm90YXRpb24uXHJcbiAgdGhpcy5yb3RhdGVTdGFydF8gPSBuZXcgTWF0aFV0aWwuVmVjdG9yMigpO1xyXG4gIHRoaXMucm90YXRlRW5kXyA9IG5ldyBNYXRoVXRpbC5WZWN0b3IyKCk7XHJcbiAgdGhpcy5yb3RhdGVEZWx0YV8gPSBuZXcgTWF0aFV0aWwuVmVjdG9yMigpO1xyXG4gIHRoaXMuaXNEcmFnZ2luZ18gPSBmYWxzZTtcclxuXHJcbiAgdGhpcy5vcmllbnRhdGlvbk91dF8gPSBuZXcgRmxvYXQzMkFycmF5KDQpO1xyXG59XHJcbk1vdXNlS2V5Ym9hcmRWUkRpc3BsYXkucHJvdG90eXBlID0gbmV3IFZSRGlzcGxheSgpO1xyXG5cclxuTW91c2VLZXlib2FyZFZSRGlzcGxheS5wcm90b3R5cGUuZ2V0SW1tZWRpYXRlUG9zZSA9IGZ1bmN0aW9uKCkge1xyXG4gIHRoaXMub3JpZW50YXRpb25fLnNldEZyb21FdWxlcllYWih0aGlzLnBoaV8sIHRoaXMudGhldGFfLCAwKTtcclxuXHJcbiAgdGhpcy5vcmllbnRhdGlvbk91dF9bMF0gPSB0aGlzLm9yaWVudGF0aW9uXy54O1xyXG4gIHRoaXMub3JpZW50YXRpb25PdXRfWzFdID0gdGhpcy5vcmllbnRhdGlvbl8ueTtcclxuICB0aGlzLm9yaWVudGF0aW9uT3V0X1syXSA9IHRoaXMub3JpZW50YXRpb25fLno7XHJcbiAgdGhpcy5vcmllbnRhdGlvbk91dF9bM10gPSB0aGlzLm9yaWVudGF0aW9uXy53O1xyXG5cclxuICByZXR1cm4ge1xyXG4gICAgcG9zaXRpb246IG51bGwsXHJcbiAgICBvcmllbnRhdGlvbjogdGhpcy5vcmllbnRhdGlvbk91dF8sXHJcbiAgICBsaW5lYXJWZWxvY2l0eTogbnVsbCxcclxuICAgIGxpbmVhckFjY2VsZXJhdGlvbjogbnVsbCxcclxuICAgIGFuZ3VsYXJWZWxvY2l0eTogbnVsbCxcclxuICAgIGFuZ3VsYXJBY2NlbGVyYXRpb246IG51bGxcclxuICB9O1xyXG59O1xyXG5cclxuTW91c2VLZXlib2FyZFZSRGlzcGxheS5wcm90b3R5cGUub25LZXlEb3duXyA9IGZ1bmN0aW9uKGUpIHtcclxuICAvLyBUcmFjayBXQVNEIGFuZCBhcnJvdyBrZXlzLlxyXG4gIGlmIChlLmtleUNvZGUgPT0gMzgpIHsgLy8gVXAga2V5LlxyXG4gICAgdGhpcy5hbmltYXRlUGhpXyh0aGlzLnBoaV8gKyBLRVlfU1BFRUQpO1xyXG4gIH0gZWxzZSBpZiAoZS5rZXlDb2RlID09IDM5KSB7IC8vIFJpZ2h0IGtleS5cclxuICAgIHRoaXMuYW5pbWF0ZVRoZXRhXyh0aGlzLnRoZXRhXyAtIEtFWV9TUEVFRCk7XHJcbiAgfSBlbHNlIGlmIChlLmtleUNvZGUgPT0gNDApIHsgLy8gRG93biBrZXkuXHJcbiAgICB0aGlzLmFuaW1hdGVQaGlfKHRoaXMucGhpXyAtIEtFWV9TUEVFRCk7XHJcbiAgfSBlbHNlIGlmIChlLmtleUNvZGUgPT0gMzcpIHsgLy8gTGVmdCBrZXkuXHJcbiAgICB0aGlzLmFuaW1hdGVUaGV0YV8odGhpcy50aGV0YV8gKyBLRVlfU1BFRUQpO1xyXG4gIH1cclxufTtcclxuXHJcbk1vdXNlS2V5Ym9hcmRWUkRpc3BsYXkucHJvdG90eXBlLmFuaW1hdGVUaGV0YV8gPSBmdW5jdGlvbih0YXJnZXRBbmdsZSkge1xyXG4gIHRoaXMuYW5pbWF0ZUtleVRyYW5zaXRpb25zXygndGhldGFfJywgdGFyZ2V0QW5nbGUpO1xyXG59O1xyXG5cclxuTW91c2VLZXlib2FyZFZSRGlzcGxheS5wcm90b3R5cGUuYW5pbWF0ZVBoaV8gPSBmdW5jdGlvbih0YXJnZXRBbmdsZSkge1xyXG4gIC8vIFByZXZlbnQgbG9va2luZyB0b28gZmFyIHVwIG9yIGRvd24uXHJcbiAgdGFyZ2V0QW5nbGUgPSBVdGlsLmNsYW1wKHRhcmdldEFuZ2xlLCAtTWF0aC5QSS8yLCBNYXRoLlBJLzIpO1xyXG4gIHRoaXMuYW5pbWF0ZUtleVRyYW5zaXRpb25zXygncGhpXycsIHRhcmdldEFuZ2xlKTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBTdGFydCBhbiBhbmltYXRpb24gdG8gdHJhbnNpdGlvbiBhbiBhbmdsZSBmcm9tIG9uZSB2YWx1ZSB0byBhbm90aGVyLlxyXG4gKi9cclxuTW91c2VLZXlib2FyZFZSRGlzcGxheS5wcm90b3R5cGUuYW5pbWF0ZUtleVRyYW5zaXRpb25zXyA9IGZ1bmN0aW9uKGFuZ2xlTmFtZSwgdGFyZ2V0QW5nbGUpIHtcclxuICAvLyBJZiBhbiBhbmltYXRpb24gaXMgY3VycmVudGx5IHJ1bm5pbmcsIGNhbmNlbCBpdC5cclxuICBpZiAodGhpcy5hbmdsZUFuaW1hdGlvbl8pIHtcclxuICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMuYW5nbGVBbmltYXRpb25fKTtcclxuICB9XHJcbiAgdmFyIHN0YXJ0QW5nbGUgPSB0aGlzW2FuZ2xlTmFtZV07XHJcbiAgdmFyIHN0YXJ0VGltZSA9IG5ldyBEYXRlKCk7XHJcbiAgLy8gU2V0IHVwIGFuIGludGVydmFsIHRpbWVyIHRvIHBlcmZvcm0gdGhlIGFuaW1hdGlvbi5cclxuICB0aGlzLmFuZ2xlQW5pbWF0aW9uXyA9IHJlcXVlc3RBbmltYXRpb25GcmFtZShmdW5jdGlvbiBhbmltYXRlKCkge1xyXG4gICAgLy8gT25jZSB3ZSdyZSBmaW5pc2hlZCB0aGUgYW5pbWF0aW9uLCB3ZSdyZSBkb25lLlxyXG4gICAgdmFyIGVsYXBzZWQgPSBuZXcgRGF0ZSgpIC0gc3RhcnRUaW1lO1xyXG4gICAgaWYgKGVsYXBzZWQgPj0gS0VZX0FOSU1BVElPTl9EVVJBVElPTikge1xyXG4gICAgICB0aGlzW2FuZ2xlTmFtZV0gPSB0YXJnZXRBbmdsZTtcclxuICAgICAgY2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy5hbmdsZUFuaW1hdGlvbl8pO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICAvLyBsb29wIHdpdGggcmVxdWVzdEFuaW1hdGlvbkZyYW1lXHJcbiAgICB0aGlzLmFuZ2xlQW5pbWF0aW9uXyA9IHJlcXVlc3RBbmltYXRpb25GcmFtZShhbmltYXRlLmJpbmQodGhpcykpXHJcbiAgICAvLyBMaW5lYXJseSBpbnRlcnBvbGF0ZSB0aGUgYW5nbGUgc29tZSBhbW91bnQuXHJcbiAgICB2YXIgcGVyY2VudCA9IGVsYXBzZWQgLyBLRVlfQU5JTUFUSU9OX0RVUkFUSU9OO1xyXG4gICAgdGhpc1thbmdsZU5hbWVdID0gc3RhcnRBbmdsZSArICh0YXJnZXRBbmdsZSAtIHN0YXJ0QW5nbGUpICogcGVyY2VudDtcclxuICB9LmJpbmQodGhpcykpO1xyXG59O1xyXG5cclxuTW91c2VLZXlib2FyZFZSRGlzcGxheS5wcm90b3R5cGUub25Nb3VzZURvd25fID0gZnVuY3Rpb24oZSkge1xyXG4gIHRoaXMucm90YXRlU3RhcnRfLnNldChlLmNsaWVudFgsIGUuY2xpZW50WSk7XHJcbiAgdGhpcy5pc0RyYWdnaW5nXyA9IHRydWU7XHJcbn07XHJcblxyXG4vLyBWZXJ5IHNpbWlsYXIgdG8gaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vbXJmbGl4LzgzNTEwMjBcclxuTW91c2VLZXlib2FyZFZSRGlzcGxheS5wcm90b3R5cGUub25Nb3VzZU1vdmVfID0gZnVuY3Rpb24oZSkge1xyXG4gIGlmICghdGhpcy5pc0RyYWdnaW5nXyAmJiAhdGhpcy5pc1BvaW50ZXJMb2NrZWRfKCkpIHtcclxuICAgIHJldHVybjtcclxuICB9XHJcbiAgLy8gU3VwcG9ydCBwb2ludGVyIGxvY2sgQVBJLlxyXG4gIGlmICh0aGlzLmlzUG9pbnRlckxvY2tlZF8oKSkge1xyXG4gICAgdmFyIG1vdmVtZW50WCA9IGUubW92ZW1lbnRYIHx8IGUubW96TW92ZW1lbnRYIHx8IDA7XHJcbiAgICB2YXIgbW92ZW1lbnRZID0gZS5tb3ZlbWVudFkgfHwgZS5tb3pNb3ZlbWVudFkgfHwgMDtcclxuICAgIHRoaXMucm90YXRlRW5kXy5zZXQodGhpcy5yb3RhdGVTdGFydF8ueCAtIG1vdmVtZW50WCwgdGhpcy5yb3RhdGVTdGFydF8ueSAtIG1vdmVtZW50WSk7XHJcbiAgfSBlbHNlIHtcclxuICAgIHRoaXMucm90YXRlRW5kXy5zZXQoZS5jbGllbnRYLCBlLmNsaWVudFkpO1xyXG4gIH1cclxuICAvLyBDYWxjdWxhdGUgaG93IG11Y2ggd2UgbW92ZWQgaW4gbW91c2Ugc3BhY2UuXHJcbiAgdGhpcy5yb3RhdGVEZWx0YV8uc3ViVmVjdG9ycyh0aGlzLnJvdGF0ZUVuZF8sIHRoaXMucm90YXRlU3RhcnRfKTtcclxuICB0aGlzLnJvdGF0ZVN0YXJ0Xy5jb3B5KHRoaXMucm90YXRlRW5kXyk7XHJcblxyXG4gIC8vIEtlZXAgdHJhY2sgb2YgdGhlIGN1bXVsYXRpdmUgZXVsZXIgYW5nbGVzLlxyXG4gIHRoaXMucGhpXyArPSAyICogTWF0aC5QSSAqIHRoaXMucm90YXRlRGVsdGFfLnkgLyBzY3JlZW4uaGVpZ2h0ICogTU9VU0VfU1BFRURfWTtcclxuICB0aGlzLnRoZXRhXyArPSAyICogTWF0aC5QSSAqIHRoaXMucm90YXRlRGVsdGFfLnggLyBzY3JlZW4ud2lkdGggKiBNT1VTRV9TUEVFRF9YO1xyXG5cclxuICAvLyBQcmV2ZW50IGxvb2tpbmcgdG9vIGZhciB1cCBvciBkb3duLlxyXG4gIHRoaXMucGhpXyA9IFV0aWwuY2xhbXAodGhpcy5waGlfLCAtTWF0aC5QSS8yLCBNYXRoLlBJLzIpO1xyXG59O1xyXG5cclxuTW91c2VLZXlib2FyZFZSRGlzcGxheS5wcm90b3R5cGUub25Nb3VzZVVwXyA9IGZ1bmN0aW9uKGUpIHtcclxuICB0aGlzLmlzRHJhZ2dpbmdfID0gZmFsc2U7XHJcbn07XHJcblxyXG5Nb3VzZUtleWJvYXJkVlJEaXNwbGF5LnByb3RvdHlwZS5pc1BvaW50ZXJMb2NrZWRfID0gZnVuY3Rpb24oKSB7XHJcbiAgdmFyIGVsID0gZG9jdW1lbnQucG9pbnRlckxvY2tFbGVtZW50IHx8IGRvY3VtZW50Lm1velBvaW50ZXJMb2NrRWxlbWVudCB8fFxyXG4gICAgICBkb2N1bWVudC53ZWJraXRQb2ludGVyTG9ja0VsZW1lbnQ7XHJcbiAgcmV0dXJuIGVsICE9PSB1bmRlZmluZWQ7XHJcbn07XHJcblxyXG5Nb3VzZUtleWJvYXJkVlJEaXNwbGF5LnByb3RvdHlwZS5yZXNldFBvc2UgPSBmdW5jdGlvbigpIHtcclxuICB0aGlzLnBoaV8gPSAwO1xyXG4gIHRoaXMudGhldGFfID0gMDtcclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gTW91c2VLZXlib2FyZFZSRGlzcGxheTtcclxuXHJcbn0se1wiLi9iYXNlLmpzXCI6MixcIi4vbWF0aC11dGlsLmpzXCI6MTQsXCIuL3V0aWwuanNcIjoyMn1dLDE2OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcclxuLypcclxuICogQ29weXJpZ2h0IDIwMTUgR29vZ2xlIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5cclxudmFyIFV0aWwgPSBfZGVyZXFfKCcuL3V0aWwuanMnKTtcclxuXHJcbmZ1bmN0aW9uIFJvdGF0ZUluc3RydWN0aW9ucygpIHtcclxuICB0aGlzLmxvYWRJY29uXygpO1xyXG5cclxuICB2YXIgb3ZlcmxheSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gIHZhciBzID0gb3ZlcmxheS5zdHlsZTtcclxuICBzLnBvc2l0aW9uID0gJ2ZpeGVkJztcclxuICBzLnRvcCA9IDA7XHJcbiAgcy5yaWdodCA9IDA7XHJcbiAgcy5ib3R0b20gPSAwO1xyXG4gIHMubGVmdCA9IDA7XHJcbiAgcy5iYWNrZ3JvdW5kQ29sb3IgPSAnZ3JheSc7XHJcbiAgcy5mb250RmFtaWx5ID0gJ3NhbnMtc2VyaWYnO1xyXG4gIC8vIEZvcmNlIHRoaXMgdG8gYmUgYWJvdmUgdGhlIGZ1bGxzY3JlZW4gY2FudmFzLCB3aGljaCBpcyBhdCB6SW5kZXg6IDk5OTk5OS5cclxuICBzLnpJbmRleCA9IDEwMDAwMDA7XHJcblxyXG4gIHZhciBpbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcclxuICBpbWcuc3JjID0gdGhpcy5pY29uO1xyXG4gIHZhciBzID0gaW1nLnN0eWxlO1xyXG4gIHMubWFyZ2luTGVmdCA9ICcyNSUnO1xyXG4gIHMubWFyZ2luVG9wID0gJzI1JSc7XHJcbiAgcy53aWR0aCA9ICc1MCUnO1xyXG4gIG92ZXJsYXkuYXBwZW5kQ2hpbGQoaW1nKTtcclxuXHJcbiAgdmFyIHRleHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICB2YXIgcyA9IHRleHQuc3R5bGU7XHJcbiAgcy50ZXh0QWxpZ24gPSAnY2VudGVyJztcclxuICBzLmZvbnRTaXplID0gJzE2cHgnO1xyXG4gIHMubGluZUhlaWdodCA9ICcyNHB4JztcclxuICBzLm1hcmdpbiA9ICcyNHB4IDI1JSc7XHJcbiAgcy53aWR0aCA9ICc1MCUnO1xyXG4gIHRleHQuaW5uZXJIVE1MID0gJ1BsYWNlIHlvdXIgcGhvbmUgaW50byB5b3VyIENhcmRib2FyZCB2aWV3ZXIuJztcclxuICBvdmVybGF5LmFwcGVuZENoaWxkKHRleHQpO1xyXG5cclxuICB2YXIgc25hY2tiYXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICB2YXIgcyA9IHNuYWNrYmFyLnN0eWxlO1xyXG4gIHMuYmFja2dyb3VuZENvbG9yID0gJyNDRkQ4REMnO1xyXG4gIHMucG9zaXRpb24gPSAnZml4ZWQnO1xyXG4gIHMuYm90dG9tID0gMDtcclxuICBzLndpZHRoID0gJzEwMCUnO1xyXG4gIHMuaGVpZ2h0ID0gJzQ4cHgnO1xyXG4gIHMucGFkZGluZyA9ICcxNHB4IDI0cHgnO1xyXG4gIHMuYm94U2l6aW5nID0gJ2JvcmRlci1ib3gnO1xyXG4gIHMuY29sb3IgPSAnIzY1NkE2Qic7XHJcbiAgb3ZlcmxheS5hcHBlbmRDaGlsZChzbmFja2Jhcik7XHJcblxyXG4gIHZhciBzbmFja2JhclRleHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICBzbmFja2JhclRleHQuc3R5bGUuZmxvYXQgPSAnbGVmdCc7XHJcbiAgc25hY2tiYXJUZXh0LmlubmVySFRNTCA9ICdObyBDYXJkYm9hcmQgdmlld2VyPyc7XHJcblxyXG4gIHZhciBzbmFja2JhckJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcclxuICBzbmFja2JhckJ1dHRvbi5ocmVmID0gJ2h0dHBzOi8vd3d3Lmdvb2dsZS5jb20vZ2V0L2NhcmRib2FyZC9nZXQtY2FyZGJvYXJkLyc7XHJcbiAgc25hY2tiYXJCdXR0b24uaW5uZXJIVE1MID0gJ2dldCBvbmUnO1xyXG4gIHNuYWNrYmFyQnV0dG9uLnRhcmdldCA9ICdfYmxhbmsnO1xyXG4gIHZhciBzID0gc25hY2tiYXJCdXR0b24uc3R5bGU7XHJcbiAgcy5mbG9hdCA9ICdyaWdodCc7XHJcbiAgcy5mb250V2VpZ2h0ID0gNjAwO1xyXG4gIHMudGV4dFRyYW5zZm9ybSA9ICd1cHBlcmNhc2UnO1xyXG4gIHMuYm9yZGVyTGVmdCA9ICcxcHggc29saWQgZ3JheSc7XHJcbiAgcy5wYWRkaW5nTGVmdCA9ICcyNHB4JztcclxuICBzLnRleHREZWNvcmF0aW9uID0gJ25vbmUnO1xyXG4gIHMuY29sb3IgPSAnIzY1NkE2Qic7XHJcblxyXG4gIHNuYWNrYmFyLmFwcGVuZENoaWxkKHNuYWNrYmFyVGV4dCk7XHJcbiAgc25hY2tiYXIuYXBwZW5kQ2hpbGQoc25hY2tiYXJCdXR0b24pO1xyXG5cclxuICB0aGlzLm92ZXJsYXkgPSBvdmVybGF5O1xyXG4gIHRoaXMudGV4dCA9IHRleHQ7XHJcblxyXG4gIHRoaXMuaGlkZSgpO1xyXG59XHJcblxyXG5Sb3RhdGVJbnN0cnVjdGlvbnMucHJvdG90eXBlLnNob3cgPSBmdW5jdGlvbihwYXJlbnQpIHtcclxuICBpZiAoIXBhcmVudCAmJiAhdGhpcy5vdmVybGF5LnBhcmVudEVsZW1lbnQpIHtcclxuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGhpcy5vdmVybGF5KTtcclxuICB9IGVsc2UgaWYgKHBhcmVudCkge1xyXG4gICAgaWYgKHRoaXMub3ZlcmxheS5wYXJlbnRFbGVtZW50ICYmIHRoaXMub3ZlcmxheS5wYXJlbnRFbGVtZW50ICE9IHBhcmVudClcclxuICAgICAgdGhpcy5vdmVybGF5LnBhcmVudEVsZW1lbnQucmVtb3ZlQ2hpbGQodGhpcy5vdmVybGF5KTtcclxuXHJcbiAgICBwYXJlbnQuYXBwZW5kQ2hpbGQodGhpcy5vdmVybGF5KTtcclxuICB9XHJcblxyXG4gIHRoaXMub3ZlcmxheS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcclxuXHJcbiAgdmFyIGltZyA9IHRoaXMub3ZlcmxheS5xdWVyeVNlbGVjdG9yKCdpbWcnKTtcclxuICB2YXIgcyA9IGltZy5zdHlsZTtcclxuXHJcbiAgaWYgKFV0aWwuaXNMYW5kc2NhcGVNb2RlKCkpIHtcclxuICAgIHMud2lkdGggPSAnMjAlJztcclxuICAgIHMubWFyZ2luTGVmdCA9ICc0MCUnO1xyXG4gICAgcy5tYXJnaW5Ub3AgPSAnMyUnO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBzLndpZHRoID0gJzUwJSc7XHJcbiAgICBzLm1hcmdpbkxlZnQgPSAnMjUlJztcclxuICAgIHMubWFyZ2luVG9wID0gJzI1JSc7XHJcbiAgfVxyXG59O1xyXG5cclxuUm90YXRlSW5zdHJ1Y3Rpb25zLnByb3RvdHlwZS5oaWRlID0gZnVuY3Rpb24oKSB7XHJcbiAgdGhpcy5vdmVybGF5LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbn07XHJcblxyXG5Sb3RhdGVJbnN0cnVjdGlvbnMucHJvdG90eXBlLnNob3dUZW1wb3JhcmlseSA9IGZ1bmN0aW9uKG1zLCBwYXJlbnQpIHtcclxuICB0aGlzLnNob3cocGFyZW50KTtcclxuICB0aGlzLnRpbWVyID0gc2V0VGltZW91dCh0aGlzLmhpZGUuYmluZCh0aGlzKSwgbXMpO1xyXG59O1xyXG5cclxuUm90YXRlSW5zdHJ1Y3Rpb25zLnByb3RvdHlwZS5kaXNhYmxlU2hvd1RlbXBvcmFyaWx5ID0gZnVuY3Rpb24oKSB7XHJcbiAgY2xlYXJUaW1lb3V0KHRoaXMudGltZXIpO1xyXG59O1xyXG5cclxuUm90YXRlSW5zdHJ1Y3Rpb25zLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbigpIHtcclxuICB0aGlzLmRpc2FibGVTaG93VGVtcG9yYXJpbHkoKTtcclxuICAvLyBJbiBwb3J0cmFpdCBWUiBtb2RlLCB0ZWxsIHRoZSB1c2VyIHRvIHJvdGF0ZSB0byBsYW5kc2NhcGUuIE90aGVyd2lzZSwgaGlkZVxyXG4gIC8vIHRoZSBpbnN0cnVjdGlvbnMuXHJcbiAgaWYgKCFVdGlsLmlzTGFuZHNjYXBlTW9kZSgpICYmIFV0aWwuaXNNb2JpbGUoKSkge1xyXG4gICAgdGhpcy5zaG93KCk7XHJcbiAgfSBlbHNlIHtcclxuICAgIHRoaXMuaGlkZSgpO1xyXG4gIH1cclxufTtcclxuXHJcblJvdGF0ZUluc3RydWN0aW9ucy5wcm90b3R5cGUubG9hZEljb25fID0gZnVuY3Rpb24oKSB7XHJcbiAgLy8gRW5jb2RlZCBhc3NldF9zcmMvcm90YXRlLWluc3RydWN0aW9ucy5zdmdcclxuICB0aGlzLmljb24gPSBVdGlsLmJhc2U2NCgnaW1hZ2Uvc3ZnK3htbCcsICdQRDk0Yld3Z2RtVnljMmx2YmowaU1TNHdJaUJsYm1OdlpHbHVaejBpVlZSR0xUZ2lJSE4wWVc1a1lXeHZibVU5SW01dklqOCtDanh6ZG1jZ2QybGtkR2c5SWpFNU9IQjRJaUJvWldsbmFIUTlJakkwTUhCNElpQjJhV1YzUW05NFBTSXdJREFnTVRrNElESTBNQ0lnZG1WeWMybHZiajBpTVM0eElpQjRiV3h1Y3owaWFIUjBjRG92TDNkM2R5NTNNeTV2Y21jdk1qQXdNQzl6ZG1jaUlIaHRiRzV6T25oc2FXNXJQU0pvZEhSd09pOHZkM2QzTG5jekxtOXlaeTh4T1RrNUwzaHNhVzVySWlCNGJXeHVjenB6YTJWMFkyZzlJbWgwZEhBNkx5OTNkM2N1WW05b1pXMXBZVzVqYjJScGJtY3VZMjl0TDNOclpYUmphQzl1Y3lJK0NpQWdJQ0E4SVMwdElFZGxibVZ5WVhSdmNqb2dVMnRsZEdOb0lETXVNeTR6SUNneE1qQTRNU2tnTFNCb2RIUndPaTh2ZDNkM0xtSnZhR1Z0YVdGdVkyOWthVzVuTG1OdmJTOXphMlYwWTJnZ0xTMCtDaUFnSUNBOGRHbDBiR1UrZEhKaGJuTnBkR2x2Ymp3dmRHbDBiR1UrQ2lBZ0lDQThaR1Z6WXo1RGNtVmhkR1ZrSUhkcGRHZ2dVMnRsZEdOb0xqd3ZaR1Z6WXo0S0lDQWdJRHhrWldaelBqd3ZaR1ZtY3o0S0lDQWdJRHhuSUdsa1BTSlFZV2RsTFRFaUlITjBjbTlyWlQwaWJtOXVaU0lnYzNSeWIydGxMWGRwWkhSb1BTSXhJaUJtYVd4c1BTSnViMjVsSWlCbWFXeHNMWEoxYkdVOUltVjJaVzV2WkdRaUlITnJaWFJqYURwMGVYQmxQU0pOVTFCaFoyVWlQZ29nSUNBZ0lDQWdJRHhuSUdsa1BTSjBjbUZ1YzJsMGFXOXVJaUJ6YTJWMFkyZzZkSGx3WlQwaVRWTkJjblJpYjJGeVpFZHliM1Z3SWo0S0lDQWdJQ0FnSUNBZ0lDQWdQR2NnYVdROUlrbHRjRzl5ZEdWa0xVeGhlV1Z5Y3kxRGIzQjVMVFF0S3kxSmJYQnZjblJsWkMxTVlYbGxjbk10UTI5d2VTMHJMVWx0Y0c5eWRHVmtMVXhoZVdWeWN5MURiM0I1TFRJdFEyOXdlU0lnYzJ0bGRHTm9PblI1Y0dVOUlrMVRUR0Y1WlhKSGNtOTFjQ0krQ2lBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0E4WnlCcFpEMGlTVzF3YjNKMFpXUXRUR0Y1WlhKekxVTnZjSGt0TkNJZ2RISmhibk5tYjNKdFBTSjBjbUZ1YzJ4aGRHVW9NQzR3TURBd01EQXNJREV3Tnk0d01EQXdNREFwSWlCemEyVjBZMmc2ZEhsd1pUMGlUVk5UYUdGd1pVZHliM1Z3SWo0S0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQThjR0YwYUNCa1BTSk5NVFE1TGpZeU5Td3lMalV5TnlCRE1UUTVMall5TlN3eUxqVXlOeUF4TlRVdU9EQTFMRFl1TURrMklERTFOaTR6TmpJc05pNDBNVGdnVERFMU5pNHpOaklzTnk0ek1EUWdRekUxTmk0ek5qSXNOeTQwT0RFZ01UVTJMak0zTlN3M0xqWTJOQ0F4TlRZdU5DdzNMamcxTXlCRE1UVTJMalF4TERjdU9UTTBJREUxTmk0ME1pdzRMakF4TlNBeE5UWXVOREkzTERndU1EazFJRU14TlRZdU5UWTNMRGt1TlRFZ01UVTNMalF3TVN3eE1TNHdPVE1nTVRVNExqVXpNaXd4TWk0d09UUWdUREUyTkM0eU5USXNNVGN1TVRVMklFd3hOalF1TXpNekxERTNMakEyTmlCRE1UWTBMak16TXl3eE55NHdOallnTVRZNExqY3hOU3d4TkM0MU16WWdNVFk1TGpVMk9Dd3hOQzR3TkRJZ1F6RTNNUzR3TWpVc01UUXVPRGd6SURFNU5TNDFNemdzTWprdU1ETTFJREU1TlM0MU16Z3NNamt1TURNMUlFd3hPVFV1TlRNNExEZ3pMakF6TmlCRE1UazFMalV6T0N3NE15NDRNRGNnTVRrMUxqRTFNaXc0TkM0eU5UTWdNVGswTGpVNUxEZzBMakkxTXlCRE1UazBMak0xTnl3NE5DNHlOVE1nTVRrMExqQTVOU3c0TkM0eE56Y2dNVGt6TGpneE9DdzROQzR3TVRjZ1RERTJPUzQ0TlRFc056QXVNVGM1SUV3eE5qa3VPRE0zTERjd0xqSXdNeUJNTVRReUxqVXhOU3c0TlM0NU56Z2dUREUwTVM0Mk5qVXNPRFF1TmpVMUlFTXhNell1T1RNMExEZ3pMakV5TmlBeE16RXVPVEUzTERneExqa3hOU0F4TWpZdU56RTBMRGd4TGpBME5TQkRNVEkyTGpjd09TdzRNUzR3TmlBeE1qWXVOekEzTERneExqQTJPU0F4TWpZdU56QTNMRGd4TGpBMk9TQk1NVEl4TGpZMExEazRMakF6SUV3eE1UTXVOelE1TERFd01pNDFPRFlnVERFeE15NDNNVElzTVRBeUxqVXlNeUJNTVRFekxqY3hNaXd4TXpBdU1URXpJRU14TVRNdU56RXlMREV6TUM0NE9EVWdNVEV6TGpNeU5pd3hNekV1TXpNZ01URXlMamMyTkN3eE16RXVNek1nUXpFeE1pNDFNeklzTVRNeExqTXpJREV4TWk0eU5qa3NNVE14TGpJMU5DQXhNVEV1T1RreUxERXpNUzR3T1RRZ1REWTVMalV4T1N3eE1EWXVOVGN5SUVNMk9DNDFOamtzTVRBMkxqQXlNeUEyTnk0M09Ua3NNVEEwTGpZNU5TQTJOeTQzT1Rrc01UQXpMall3TlNCTU5qY3VOems1TERFd01pNDFOeUJNTmpjdU56YzRMREV3TWk0Mk1UY2dRelkzTGpJM0xERXdNaTR6T1RNZ05qWXVOalE0TERFd01pNHlORGtnTmpVdU9UWXlMREV3TWk0eU1UZ2dRelkxTGpnM05Td3hNREl1TWpFMElEWTFMamM0T0N3eE1ESXVNakV5SURZMUxqY3dNU3d4TURJdU1qRXlJRU0yTlM0Mk1EWXNNVEF5TGpJeE1pQTJOUzQxTVRFc01UQXlMakl4TlNBMk5TNDBNVFlzTVRBeUxqSXhPU0JETmpVdU1UazFMREV3TWk0eU1qa2dOalF1T1RjMExERXdNaTR5TXpVZ05qUXVOelUwTERFd01pNHlNelVnUXpZMExqTXpNU3d4TURJdU1qTTFJRFl6TGpreE1Td3hNREl1TWpFMklEWXpMalE1T0N3eE1ESXVNVGM0SUVNMk1TNDRORE1zTVRBeUxqQXlOU0EyTUM0eU9UZ3NNVEF4TGpVM09DQTFPUzR3T1RRc01UQXdMamc0TWlCTU1USXVOVEU0TERjekxqazVNaUJNTVRJdU5USXpMRGMwTGpBd05DQk1NaTR5TkRVc05UVXVNalUwSUVNeExqSTBOQ3cxTXk0ME1qY2dNaTR3TURRc05URXVNRE00SURNdU9UUXpMRFE1TGpreE9DQk1OVGt1T1RVMExERTNMalUzTXlCRE5qQXVOakkyTERFM0xqRTROU0EyTVM0ek5Td3hOeTR3TURFZ05qSXVNRFV6TERFM0xqQXdNU0JETmpNdU16YzVMREUzTGpBd01TQTJOQzQyTWpVc01UY3VOallnTmpVdU1qZ3NNVGd1T0RVMElFdzJOUzR5T0RVc01UZ3VPRFV4SUV3Mk5TNDFNVElzTVRrdU1qWTBJRXcyTlM0MU1EWXNNVGt1TWpZNElFTTJOUzQ1TURrc01qQXVNREF6SURZMkxqUXdOU3d5TUM0Mk9DQTJOaTQ1T0RNc01qRXVNamcySUV3Mk55NHlOaXd5TVM0MU5UWWdRelk1TGpFM05Dd3lNeTQwTURZZ056RXVOekk0TERJMExqTTFOeUEzTkM0ek56TXNNalF1TXpVM0lFTTNOaTR6TWpJc01qUXVNelUzSURjNExqTXlNU3d5TXk0NE5DQTRNQzR4TkRnc01qSXVOemcxSUVNNE1DNHhOakVzTWpJdU56ZzFJRGczTGpRMk55d3hPQzQxTmpZZ09EY3VORFkzTERFNExqVTJOaUJET0RndU1UTTVMREU0TGpFM09DQTRPQzQ0TmpNc01UY3VPVGswSURnNUxqVTJOaXd4Tnk0NU9UUWdRemt3TGpnNU1pd3hOeTQ1T1RRZ09USXVNVE00TERFNExqWTFNaUE1TWk0M09USXNNVGt1T0RRM0lFdzVOaTR3TkRJc01qVXVOemMxSUV3NU5pNHdOalFzTWpVdU56VTNJRXd4TURJdU9EUTVMREk1TGpZM05DQk1NVEF5TGpjME5Dd3lPUzQwT1RJZ1RERTBPUzQyTWpVc01pNDFNamNnVFRFME9TNDJNalVzTUM0NE9USWdRekUwT1M0ek5ETXNNQzQ0T1RJZ01UUTVMakEyTWl3d0xqazJOU0F4TkRndU9ERXNNUzR4TVNCTU1UQXlMalkwTVN3eU55NDJOallnVERrM0xqSXpNU3d5TkM0MU5ESWdURGswTGpJeU5pd3hPUzR3TmpFZ1F6a3pMak14TXl3eE55NHpPVFFnT1RFdU5USTNMREUyTGpNMU9TQTRPUzQxTmpZc01UWXVNelU0SUVNNE9DNDFOVFVzTVRZdU16VTRJRGczTGpVME5pd3hOaTQyTXpJZ09EWXVOalE1TERFM0xqRTFJRU00TXk0NE56Z3NNVGd1TnpVZ056a3VOamczTERJeExqRTJPU0EzT1M0ek56UXNNakV1TXpRMUlFTTNPUzR6TlRrc01qRXVNelV6SURjNUxqTTBOU3d5TVM0ek5qRWdOemt1TXpNc01qRXVNelk1SUVNM055NDNPVGdzTWpJdU1qVTBJRGMyTGpBNE5Dd3lNaTQzTWpJZ056UXVNemN6TERJeUxqY3lNaUJETnpJdU1EZ3hMREl5TGpjeU1pQTJPUzQ1TlRrc01qRXVPRGtnTmpndU16azNMREl3TGpNNElFdzJPQzR4TkRVc01qQXVNVE0xSUVNMk55NDNNRFlzTVRrdU5qY3lJRFkzTGpNeU15d3hPUzR4TlRZZ05qY3VNREEyTERFNExqWXdNU0JETmpZdU9UZzRMREU0TGpVMU9TQTJOaTQ1Tmpnc01UZ3VOVEU1SURZMkxqazBOaXd4T0M0ME56a2dURFkyTGpjeE9Td3hPQzR3TmpVZ1F6WTJMalk1TERFNExqQXhNaUEyTmk0Mk5UZ3NNVGN1T1RZZ05qWXVOakkwTERFM0xqa3hNU0JETmpVdU5qZzJMREUyTGpNek55QTJNeTQ1TlRFc01UVXVNelkySURZeUxqQTFNeXd4TlM0ek5qWWdRell4TGpBME1pd3hOUzR6TmpZZ05qQXVNRE16TERFMUxqWTBJRFU1TGpFek5pd3hOaTR4TlRnZ1RETXVNVEkxTERRNExqVXdNaUJETUM0ME1qWXNOVEF1TURZeElDMHdMall4TXl3MU15NDBORElnTUM0NE1URXNOVFl1TURRZ1RERXhMakE0T1N3M05DNDNPU0JETVRFdU1qWTJMRGMxTGpFeE15QXhNUzQxTXpjc056VXVNelV6SURFeExqZzFMRGMxTGpRNU5DQk1OVGd1TWpjMkxERXdNaTR5T1RnZ1F6VTVMalkzT1N3eE1ETXVNVEE0SURZeExqUXpNeXd4TURNdU5qTWdOak11TXpRNExERXdNeTQ0TURZZ1F6WXpMamd4TWl3eE1ETXVPRFE0SURZMExqSTROU3d4TURNdU9EY2dOalF1TnpVMExERXdNeTQ0TnlCRE5qVXNNVEF6TGpnM0lEWTFMakkwT1N3eE1ETXVPRFkwSURZMUxqUTVOQ3d4TURNdU9EVXlJRU0yTlM0MU5qTXNNVEF6TGpnME9TQTJOUzQyTXpJc01UQXpMamcwTnlBMk5TNDNNREVzTVRBekxqZzBOeUJETmpVdU56WTBMREV3TXk0NE5EY2dOalV1T0RJNExERXdNeTQ0TkRrZ05qVXVPRGtzTVRBekxqZzFNaUJETmpVdU9UZzJMREV3TXk0NE5UWWdOall1TURnc01UQXpMamcyTXlBMk5pNHhOek1zTVRBekxqZzNOQ0JETmpZdU1qZ3lMREV3TlM0ME5qY2dOamN1TXpNeUxERXdOeTR4T1RjZ05qZ3VOekF5TERFd055NDVPRGdnVERFeE1TNHhOelFzTVRNeUxqVXhJRU14TVRFdU5qazRMREV6TWk0NE1USWdNVEV5TGpJek1pd3hNekl1T1RZMUlERXhNaTQzTmpRc01UTXlMamsyTlNCRE1URTBMakkyTVN3eE16SXVPVFkxSURFeE5TNHpORGNzTVRNeExqYzJOU0F4TVRVdU16UTNMREV6TUM0eE1UTWdUREV4TlM0ek5EY3NNVEF6TGpVMU1TQk1NVEl5TGpRMU9DdzVPUzQwTkRZZ1F6RXlNaTQ0TVRrc09Ua3VNak0zSURFeU15NHdPRGNzT1RndU9EazRJREV5TXk0eU1EY3NPVGd1TkRrNElFd3hNamN1T0RZMUxEZ3lMamt3TlNCRE1UTXlMakkzT1N3NE15NDNNRElnTVRNMkxqVTFOeXc0TkM0M05UTWdNVFF3TGpZd055dzROaTR3TXpNZ1RERTBNUzR4TkN3NE5pNDROaklnUXpFME1TNDBOVEVzT0RjdU16UTJJREUwTVM0NU56Y3NPRGN1TmpFeklERTBNaTQxTVRZc09EY3VOakV6SUVNeE5ESXVOemswTERnM0xqWXhNeUF4TkRNdU1EYzJMRGczTGpVME1pQXhORE11TXpNekxEZzNMak01TXlCTU1UWTVMamcyTlN3M01pNHdOellnVERFNU15dzROUzQwTXpNZ1F6RTVNeTQxTWpNc09EVXVOek0xSURFNU5DNHdOVGdzT0RVdU9EZzRJREU1TkM0MU9TdzROUzQ0T0RnZ1F6RTVOaTR3T0Rjc09EVXVPRGc0SURFNU55NHhOek1zT0RRdU5qZzVJREU1Tnk0eE56TXNPRE11TURNMklFd3hPVGN1TVRjekxESTVMakF6TlNCRE1UazNMakUzTXl3eU9DNDBOVEVnTVRrMkxqZzJNU3d5Tnk0NU1URWdNVGsyTGpNMU5Td3lOeTQyTVRrZ1F6RTVOaTR6TlRVc01qY3VOakU1SURFM01TNDRORE1zTVRNdU5EWTNJREUzTUM0ek9EVXNNVEl1TmpJMklFTXhOekF1TVRNeUxERXlMalE0SURFMk9TNDROU3d4TWk0ME1EY2dNVFk1TGpVMk9Dd3hNaTQwTURjZ1F6RTJPUzR5T0RVc01USXVOREEzSURFMk9TNHdNRElzTVRJdU5EZ3hJREUyT0M0M05Ea3NNVEl1TmpJM0lFTXhOamd1TVRRekxERXlMamszT0NBeE5qVXVOelUyTERFMExqTTFOeUF4TmpRdU5ESTBMREUxTGpFeU5TQk1NVFU1TGpZeE5Td3hNQzQ0TnlCRE1UVTRMamM1Tml3eE1DNHhORFVnTVRVNExqRTFOQ3c0TGprek55QXhOVGd1TURVMExEY3VPVE0wSUVNeE5UZ3VNRFExTERjdU9ETTNJREUxT0M0d016UXNOeTQzTXprZ01UVTRMakF5TVN3M0xqWTBJRU14TlRndU1EQTFMRGN1TlRJeklERTFOeTQ1T1Rnc055NDBNU0F4TlRjdU9UazRMRGN1TXpBMElFd3hOVGN1T1RrNExEWXVOREU0SUVNeE5UY3VPVGs0TERVdU9ETTBJREUxTnk0Mk9EWXNOUzR5T1RVZ01UVTNMakU0TVN3MUxqQXdNaUJETVRVMkxqWXlOQ3cwTGpZNElERTFNQzQwTkRJc01TNHhNVEVnTVRVd0xqUTBNaXd4TGpFeE1TQkRNVFV3TGpFNE9Td3dMamsyTlNBeE5Ea3VPVEEzTERBdU9Ea3lJREUwT1M0Mk1qVXNNQzQ0T1RJaUlHbGtQU0pHYVd4c0xURWlJR1pwYkd3OUlpTTBOVFZCTmpRaVBqd3ZjR0YwYUQ0S0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQThjR0YwYUNCa1BTSk5PVFl1TURJM0xESTFMall6TmlCTU1UUXlMall3TXl3MU1pNDFNamNnUXpFME15NDRNRGNzTlRNdU1qSXlJREUwTkM0MU9ESXNOVFF1TVRFMElERTBOQzQ0TkRVc05UVXVNRFk0SUV3eE5EUXVPRE0xTERVMUxqQTNOU0JNTmpNdU5EWXhMREV3TWk0d05UY2dURFl6TGpRMkxERXdNaTR3TlRjZ1F6WXhMamd3Tml3eE1ERXVPVEExSURZd0xqSTJNU3d4TURFdU5EVTNJRFU1TGpBMU55d3hNREF1TnpZeUlFd3hNaTQwT0RFc056TXVPRGN4SUV3NU5pNHdNamNzTWpVdU5qTTJJaUJwWkQwaVJtbHNiQzB5SWlCbWFXeHNQU0lqUmtGR1FVWkJJajQ4TDNCaGRHZytDaUFnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnUEhCaGRHZ2daRDBpVFRZekxqUTJNU3d4TURJdU1UYzBJRU0yTXk0ME5UTXNNVEF5TGpFM05DQTJNeTQwTkRZc01UQXlMakUzTkNBMk15NDBNemtzTVRBeUxqRTNNaUJETmpFdU56UTJMREV3TWk0d01UWWdOakF1TWpFeExERXdNUzQxTmpNZ05UZ3VPVGs0TERFd01DNDROak1nVERFeUxqUXlNaXczTXk0NU56TWdRekV5TGpNNE5pdzNNeTQ1TlRJZ01USXVNelkwTERjekxqa3hOQ0F4TWk0ek5qUXNOek11T0RjeElFTXhNaTR6TmpRc056TXVPRE1nTVRJdU16ZzJMRGN6TGpjNU1TQXhNaTQwTWpJc056TXVOemNnVERrMUxqazJPQ3d5TlM0MU16VWdRemsyTGpBd05Dd3lOUzQxTVRRZ09UWXVNRFE1TERJMUxqVXhOQ0E1Tmk0d09EVXNNalV1TlRNMUlFd3hOREl1TmpZeExEVXlMalF5TmlCRE1UUXpMamc0T0N3MU15NHhNelFnTVRRMExqWTRNaXcxTkM0d016Z2dNVFEwTGprMU55dzFOUzR3TXpjZ1F6RTBOQzQ1Tnl3MU5TNHdPRE1nTVRRMExqazFNeXcxTlM0eE16TWdNVFEwTGpreE5TdzFOUzR4TmpFZ1F6RTBOQzQ1TVRFc05UVXVNVFkxSURFME5DNDRPVGdzTlRVdU1UYzBJREUwTkM0NE9UUXNOVFV1TVRjM0lFdzJNeTQxTVRrc01UQXlMakUxT0NCRE5qTXVOVEF4TERFd01pNHhOamtnTmpNdU5EZ3hMREV3TWk0eE56UWdOak11TkRZeExERXdNaTR4TnpRZ1REWXpMalEyTVN3eE1ESXVNVGMwSUZvZ1RURXlMamN4TkN3M015NDROekVnVERVNUxqRXhOU3d4TURBdU5qWXhJRU0yTUM0eU9UTXNNVEF4TGpNME1TQTJNUzQzT0RZc01UQXhMamM0TWlBMk15NDBNelVzTVRBeExqa3pOeUJNTVRRMExqY3dOeXcxTlM0d01UVWdRekUwTkM0ME1qZ3NOVFF1TVRBNElERTBNeTQyT0RJc05UTXVNamcxSURFME1pNDFORFFzTlRJdU5qSTRJRXc1Tmk0d01qY3NNalV1TnpjeElFd3hNaTQzTVRRc056TXVPRGN4SUV3eE1pNDNNVFFzTnpNdU9EY3hJRm9pSUdsa1BTSkdhV3hzTFRNaUlHWnBiR3c5SWlNMk1EZEVPRUlpUGp3dmNHRjBhRDRLSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBOGNHRjBhQ0JrUFNKTk1UUTRMak15Tnl3MU9DNDBOekVnUXpFME9DNHhORFVzTlRndU5EZ2dNVFEzTGprMk1pdzFPQzQwT0NBeE5EY3VOemd4TERVNExqUTNNaUJETVRRMUxqZzROeXcxT0M0ek9Ea2dNVFEwTGpRM09TdzFOeTQwTXpRZ01UUTBMall6Tml3MU5pNHpOQ0JETVRRMExqWTRPU3cxTlM0NU5qY2dNVFEwTGpZMk5DdzFOUzQxT1RjZ01UUTBMalUyTkN3MU5TNHlNelVnVERZekxqUTJNU3d4TURJdU1EVTNJRU0yTkM0d09Ea3NNVEF5TGpFeE5TQTJOQzQzTXpNc01UQXlMakV6SURZMUxqTTNPU3d4TURJdU1EazVJRU0yTlM0MU5qRXNNVEF5TGpBNUlEWTFMamMwTXl3eE1ESXVNRGtnTmpVdU9USTFMREV3TWk0d09UZ2dRelkzTGpneE9Td3hNREl1TVRneElEWTVMakl5Tnl3eE1ETXVNVE0ySURZNUxqQTNMREV3TkM0eU15Qk1NVFE0TGpNeU55dzFPQzQwTnpFaUlHbGtQU0pHYVd4c0xUUWlJR1pwYkd3OUlpTkdSa1pHUmtZaVBqd3ZjR0YwYUQ0S0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQThjR0YwYUNCa1BTSk5Oamt1TURjc01UQTBMak0wTnlCRE5qa3VNRFE0TERFd05DNHpORGNnTmprdU1ESTFMREV3TkM0ek5DQTJPUzR3TURVc01UQTBMak15TnlCRE5qZ3VPVFk0TERFd05DNHpNREVnTmpndU9UUTRMREV3TkM0eU5UY2dOamd1T1RVMUxERXdOQzR5TVRNZ1F6WTVMREV3TXk0NE9UWWdOamd1T0RrNExERXdNeTQxTnpZZ05qZ3VOalU0TERFd015NHlPRGdnUXpZNExqRTFNeXd4TURJdU5qYzRJRFkzTGpFd015d3hNREl1TWpZMklEWTFMamt5TERFd01pNHlNVFFnUXpZMUxqYzBNaXd4TURJdU1qQTJJRFkxTGpVMk15d3hNREl1TWpBM0lEWTFMak00TlN3eE1ESXVNakUxSUVNMk5DNDNORElzTVRBeUxqSTBOaUEyTkM0d09EY3NNVEF5TGpJek1pQTJNeTQwTlN3eE1ESXVNVGMwSUVNMk15NHpPVGtzTVRBeUxqRTJPU0EyTXk0ek5UZ3NNVEF5TGpFek1pQTJNeTR6TkRjc01UQXlMakE0TWlCRE5qTXVNek0yTERFd01pNHdNek1nTmpNdU16VTRMREV3TVM0NU9ERWdOak11TkRBeUxERXdNUzQ1TlRZZ1RERTBOQzQxTURZc05UVXVNVE0wSUVNeE5EUXVOVE0zTERVMUxqRXhOaUF4TkRRdU5UYzFMRFUxTGpFeE15QXhORFF1TmpBNUxEVTFMakV5TnlCRE1UUTBMalkwTWl3MU5TNHhOREVnTVRRMExqWTJPQ3cxTlM0eE55QXhORFF1TmpjM0xEVTFMakl3TkNCRE1UUTBMamM0TVN3MU5TNDFPRFVnTVRRMExqZ3dOaXcxTlM0NU56SWdNVFEwTGpjMU1TdzFOaTR6TlRjZ1F6RTBOQzQzTURZc05UWXVOamN6SURFME5DNDRNRGdzTlRZdU9UazBJREUwTlM0d05EY3NOVGN1TWpneUlFTXhORFV1TlRVekxEVTNMamc1TWlBeE5EWXVOakF5TERVNExqTXdNeUF4TkRjdU56ZzJMRFU0TGpNMU5TQkRNVFEzTGprMk5DdzFPQzR6TmpNZ01UUTRMakUwTXl3MU9DNHpOak1nTVRRNExqTXlNU3cxT0M0ek5UUWdRekUwT0M0ek56Y3NOVGd1TXpVeUlERTBPQzQwTWpRc05UZ3VNemczSURFME9DNDBNemtzTlRndU5ETTRJRU14TkRndU5EVTBMRFU0TGpRNUlERTBPQzQwTXpJc05UZ3VOVFExSURFME9DNHpPRFVzTlRndU5UY3lJRXcyT1M0eE1qa3NNVEEwTGpNek1TQkROamt1TVRFeExERXdOQzR6TkRJZ05qa3VNRGtzTVRBMExqTTBOeUEyT1M0d055d3hNRFF1TXpRM0lFdzJPUzR3Tnl3eE1EUXVNelEzSUZvZ1RUWTFMalkyTlN3eE1ERXVPVGMxSUVNMk5TNDNOVFFzTVRBeExqazNOU0EyTlM0NE5ESXNNVEF4TGprM055QTJOUzQ1TXl3eE1ERXVPVGd4SUVNMk55NHhPVFlzTVRBeUxqQXpOeUEyT0M0eU9ETXNNVEF5TGpRMk9TQTJPQzQ0TXpnc01UQXpMakV6T1NCRE5qa3VNRFkxTERFd015NDBNVE1nTmprdU1UZzRMREV3TXk0M01UUWdOamt1TVRrNExERXdOQzR3TWpFZ1RERTBOeTQ0T0RNc05UZ3VOVGt5SUVNeE5EY3VPRFEzTERVNExqVTVNaUF4TkRjdU9ERXhMRFU0TGpVNU1TQXhORGN1TnpjMkxEVTRMalU0T1NCRE1UUTJMalV3T1N3MU9DNDFNek1nTVRRMUxqUXlNaXcxT0M0eElERTBOQzQ0Tmpjc05UY3VORE14SUVNeE5EUXVOVGcxTERVM0xqQTVNU0F4TkRRdU5EWTFMRFUyTGpjd055QXhORFF1TlRJc05UWXVNekkwSUVNeE5EUXVOVFl6TERVMkxqQXlNU0F4TkRRdU5UVXlMRFUxTGpjeE5pQXhORFF1TkRnNExEVTFMalF4TkNCTU5qTXVPRFEyTERFd01TNDVOeUJETmpRdU16VXpMREV3TWk0d01ESWdOalF1T0RZM0xERXdNaTR3TURZZ05qVXVNemMwTERFd01TNDVPRElnUXpZMUxqUTNNU3d4TURFdU9UYzNJRFkxTGpVMk9Dd3hNREV1T1RjMUlEWTFMalkyTlN3eE1ERXVPVGMxSUV3Mk5TNDJOalVzTVRBeExqazNOU0JhSWlCcFpEMGlSbWxzYkMwMUlpQm1hV3hzUFNJak5qQTNSRGhDSWo0OEwzQmhkR2crQ2lBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ1BIQmhkR2dnWkQwaVRUSXVNakE0TERVMUxqRXpOQ0JETVM0eU1EY3NOVE11TXpBM0lERXVPVFkzTERVd0xqa3hOeUF6TGprd05pdzBPUzQzT1RjZ1REVTVMamt4Tnl3eE55NDBOVE1nUXpZeExqZzFOaXd4Tmk0ek16TWdOalF1TWpReExERTJMamt3TnlBMk5TNHlORE1zTVRndU56TTBJRXcyTlM0ME56VXNNVGt1TVRRMElFTTJOUzQ0TnpJc01Ua3VPRGd5SURZMkxqTTJPQ3d5TUM0MU5pQTJOaTQ1TkRVc01qRXVNVFkxSUV3Mk55NHlNak1zTWpFdU5ETTFJRU0zTUM0MU5EZ3NNalF1TmpRNUlEYzFMamd3Tml3eU5TNHhOVEVnT0RBdU1URXhMREl5TGpZMk5TQk1PRGN1TkRNc01UZ3VORFExSUVNNE9TNHpOeXd4Tnk0ek1qWWdPVEV1TnpVMExERTNMamc1T1NBNU1pNDNOVFVzTVRrdU56STNJRXc1Tmk0d01EVXNNalV1TmpVMUlFd3hNaTQwT0RZc056TXVPRGcwSUV3eUxqSXdPQ3cxTlM0eE16UWdXaUlnYVdROUlrWnBiR3d0TmlJZ1ptbHNiRDBpSTBaQlJrRkdRU0krUEM5d1lYUm9QZ29nSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUR4d1lYUm9JR1E5SWsweE1pNDBPRFlzTnpRdU1EQXhJRU14TWk0ME56WXNOelF1TURBeElERXlMalEyTlN3M015NDVPVGtnTVRJdU5EVTFMRGN6TGprNU5pQkRNVEl1TkRJMExEY3pMams0T0NBeE1pNHpPVGtzTnpNdU9UWTNJREV5TGpNNE5DdzNNeTQ1TkNCTU1pNHhNRFlzTlRVdU1Ua2dRekV1TURjMUxEVXpMak14SURFdU9EVTNMRFV3TGpnME5TQXpMamcwT0N3ME9TNDJPVFlnVERVNUxqZzFPQ3d4Tnk0ek5USWdRell3TGpVeU5Td3hOaTQ1TmpjZ05qRXVNamN4TERFMkxqYzJOQ0EyTWk0d01UWXNNVFl1TnpZMElFTTJNeTQwTXpFc01UWXVOelkwSURZMExqWTJOaXd4Tnk0ME5qWWdOalV1TXpJM0xERTRMalkwTmlCRE5qVXVNek0zTERFNExqWTFOQ0EyTlM0ek5EVXNNVGd1TmpZeklEWTFMak0xTVN3eE9DNDJOelFnVERZMUxqVTNPQ3d4T1M0d09EZ2dRelkxTGpVNE5Dd3hPUzR4SURZMUxqVTRPU3d4T1M0eE1USWdOalV1TlRreExERTVMakV5TmlCRE5qVXVPVGcxTERFNUxqZ3pPQ0EyTmk0ME5qa3NNakF1TkRrM0lEWTNMakF6TERJeExqQTROU0JNTmpjdU16QTFMREl4TGpNMU1TQkROamt1TVRVeExESXpMakV6TnlBM01TNDJORGtzTWpRdU1USWdOelF1TXpNMkxESTBMakV5SUVNM05pNHpNVE1zTWpRdU1USWdOemd1TWprc01qTXVOVGd5SURnd0xqQTFNeXd5TWk0MU5qTWdRemd3TGpBMk5Dd3lNaTQxTlRjZ09EQXVNRGMyTERJeUxqVTFNeUE0TUM0d09EZ3NNakl1TlRVZ1REZzNMak0zTWl3eE9DNHpORFFnUXpnNExqQXpPQ3d4Tnk0NU5Ua2dPRGd1TnpnMExERTNMamMxTmlBNE9TNDFNamtzTVRjdU56VTJJRU01TUM0NU5UWXNNVGN1TnpVMklEa3lMakl3TVN3eE9DNDBOeklnT1RJdU9EVTRMREU1TGpZM0lFdzVOaTR4TURjc01qVXVOVGs1SUVNNU5pNHhNemdzTWpVdU5qVTBJRGsyTGpFeE9Dd3lOUzQzTWpRZ09UWXVNRFl6TERJMUxqYzFOaUJNTVRJdU5UUTFMRGN6TGprNE5TQkRNVEl1TlRJMkxEY3pMams1TmlBeE1pNDFNRFlzTnpRdU1EQXhJREV5TGpRNE5pdzNOQzR3TURFZ1RERXlMalE0Tml3M05DNHdNREVnV2lCTk5qSXVNREUyTERFMkxqazVOeUJETmpFdU16RXlMREUyTGprNU55QTJNQzQyTURZc01UY3VNVGtnTlRrdU9UYzFMREUzTGpVMU5DQk1NeTQ1TmpVc05Ea3VPRGs1SUVNeUxqQTRNeXcxTUM0NU9EVWdNUzR6TkRFc05UTXVNekE0SURJdU16RXNOVFV1TURjNElFd3hNaTQxTXpFc056TXVOekl6SUV3NU5TNDRORGdzTWpVdU5qRXhJRXc1TWk0Mk5UTXNNVGt1TnpneUlFTTVNaTR3TXpnc01UZ3VOallnT1RBdU9EY3NNVGN1T1RrZ09Ea3VOVEk1TERFM0xqazVJRU00T0M0NE1qVXNNVGN1T1RrZ09EZ3VNVEU1TERFNExqRTRNaUE0Tnk0ME9Ea3NNVGd1TlRRM0lFdzRNQzR4TnpJc01qSXVOemN5SUVNNE1DNHhOakVzTWpJdU56YzRJRGd3TGpFME9Td3lNaTQzT0RJZ09EQXVNVE0zTERJeUxqYzROU0JETnpndU16UTJMREl6TGpneE1TQTNOaTR6TkRFc01qUXVNelUwSURjMExqTXpOaXd5TkM0ek5UUWdRemN4TGpVNE9Dd3lOQzR6TlRRZ05qa3VNRE16TERJekxqTTBOeUEyTnk0eE5ESXNNakV1TlRFNUlFdzJOaTQ0TmpRc01qRXVNalE1SUVNMk5pNHlOemNzTWpBdU5qTTBJRFkxTGpjM05Dd3hPUzQ1TkRjZ05qVXVNelkzTERFNUxqSXdNeUJETmpVdU16WXNNVGt1TVRreUlEWTFMak0xTml3eE9TNHhOemtnTmpVdU16VTBMREU1TGpFMk5pQk1OalV1TVRZekxERTRMamd4T1NCRE5qVXVNVFUwTERFNExqZ3hNU0EyTlM0eE5EWXNNVGd1T0RBeElEWTFMakUwTERFNExqYzVJRU0yTkM0MU1qVXNNVGN1TmpZM0lEWXpMak0xTnl3eE5pNDVPVGNnTmpJdU1ERTJMREUyTGprNU55Qk1Oakl1TURFMkxERTJMams1TnlCYUlpQnBaRDBpUm1sc2JDMDNJaUJtYVd4c1BTSWpOakEzUkRoQ0lqNDhMM0JoZEdnK0NpQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdQSEJoZEdnZ1pEMGlUVFF5TGpRek5DdzBPQzQ0TURnZ1REUXlMalF6TkN3ME9DNDRNRGdnUXpNNUxqa3lOQ3cwT0M0NE1EY2dNemN1TnpNM0xEUTNMalUxSURNMkxqVTRNaXcwTlM0ME5ETWdRek0wTGpjM01TdzBNaTR4TXprZ016WXVNVFEwTERNM0xqZ3dPU0F6T1M0Mk5ERXNNelV1TnpnNUlFdzFNUzQ1TXpJc01qZ3VOamt4SUVNMU15NHhNRE1zTWpndU1ERTFJRFUwTGpReE15d3lOeTQyTlRnZ05UVXVOekl4TERJM0xqWTFPQ0JETlRndU1qTXhMREkzTGpZMU9DQTJNQzQwTVRnc01qZ3VPVEUySURZeExqVTNNeXd6TVM0d01qTWdRell6TGpNNE5Dd3pOQzR6TWpjZ05qSXVNREV5TERNNExqWTFOeUExT0M0MU1UUXNOREF1TmpjM0lFdzBOaTR5TWpNc05EY3VOemMxSUVNME5TNHdOVE1zTkRndU5EVWdORE11TnpReUxEUTRMamd3T0NBME1pNDBNelFzTkRndU9EQTRJRXcwTWk0ME16UXNORGd1T0RBNElGb2dUVFUxTGpjeU1Td3lPQzR4TWpVZ1F6VTBMalE1TlN3eU9DNHhNalVnTlRNdU1qWTFMREk0TGpRMk1TQTFNaTR4TmpZc01qa3VNRGsySUV3ek9TNDROelVzTXpZdU1UazBJRU16Tmk0MU9UWXNNemd1TURnM0lETTFMak13TWl3ME1pNHhNellnTXpZdU9Ua3lMRFExTGpJeE9DQkRNemd1TURZekxEUTNMakUzTXlBME1DNHdPVGdzTkRndU16UWdOREl1TkRNMExEUTRMak0wSUVNME15NDJOakVzTkRndU16UWdORFF1T0Rrc05EZ3VNREExSURRMUxqazVMRFEzTGpNM0lFdzFPQzR5T0RFc05EQXVNamN5SUVNMk1TNDFOaXd6T0M0ek56a2dOakl1T0RVekxETTBMak16SURZeExqRTJOQ3d6TVM0eU5EZ2dRell3TGpBNU1pd3lPUzR5T1RNZ05UZ3VNRFU0TERJNExqRXlOU0ExTlM0M01qRXNNamd1TVRJMUlFdzFOUzQzTWpFc01qZ3VNVEkxSUZvaUlHbGtQU0pHYVd4c0xUZ2lJR1pwYkd3OUlpTTJNRGRFT0VJaVBqd3ZjR0YwYUQ0S0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQThjR0YwYUNCa1BTSk5NVFE1TGpVNE9Dd3lMalF3TnlCRE1UUTVMalU0T0N3eUxqUXdOeUF4TlRVdU56WTRMRFV1T1RjMUlERTFOaTR6TWpVc05pNHlPVGNnVERFMU5pNHpNalVzTnk0eE9EUWdRekUxTmk0ek1qVXNOeTR6TmlBeE5UWXVNek00TERjdU5UUTBJREUxTmk0ek5qSXNOeTQzTXpNZ1F6RTFOaTR6TnpNc055NDRNVFFnTVRVMkxqTTRNaXczTGpnNU5DQXhOVFl1TXprc055NDVOelVnUXpFMU5pNDFNeXc1TGpNNUlERTFOeTR6TmpNc01UQXVPVGN6SURFMU9DNDBPVFVzTVRFdU9UYzBJRXd4TmpVdU9Ea3hMREU0TGpVeE9TQkRNVFkyTGpBMk9Dd3hPQzQyTnpVZ01UWTJMakkwT1N3eE9DNDRNVFFnTVRZMkxqUXpNaXd4T0M0NU16UWdRekUyT0M0d01URXNNVGt1T1RjMElERTJPUzR6T0RJc01Ua3VOQ0F4TmprdU5EazBMREUzTGpZMU1pQkRNVFk1TGpVME15d3hOaTQ0TmpnZ01UWTVMalUxTVN3eE5pNHdOVGNnTVRZNUxqVXhOeXd4TlM0eU1qTWdUREUyT1M0MU1UUXNNVFV1TURZeklFd3hOamt1TlRFMExERXpMamt4TWlCRE1UY3dMamM0TERFMExqWTBNaUF4T1RVdU5UQXhMREk0TGpreE5TQXhPVFV1TlRBeExESTRMamt4TlNCTU1UazFMalV3TVN3NE1pNDVNVFVnUXpFNU5TNDFNREVzT0RRdU1EQTFJREU1TkM0M016RXNPRFF1TkRRMUlERTVNeTQzT0RFc09ETXVPRGszSUV3eE5URXVNekE0TERVNUxqTTNOQ0JETVRVd0xqTTFPQ3cxT0M0NE1qWWdNVFE1TGpVNE9DdzFOeTQwT1RjZ01UUTVMalU0T0N3MU5pNDBNRGdnVERFME9TNDFPRGdzTWpJdU16YzFJaUJwWkQwaVJtbHNiQzA1SWlCbWFXeHNQU0lqUmtGR1FVWkJJajQ4TDNCaGRHZytDaUFnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnUEhCaGRHZ2daRDBpVFRFNU5DNDFOVE1zT0RRdU1qVWdRekU1TkM0eU9UWXNPRFF1TWpVZ01UazBMakF4TXl3NE5DNHhOalVnTVRrekxqY3lNaXc0TXk0NU9UY2dUREUxTVM0eU5TdzFPUzQwTnpZZ1F6RTFNQzR5Tmprc05UZ3VPVEE1SURFME9TNDBOekVzTlRjdU5UTXpJREUwT1M0ME56RXNOVFl1TkRBNElFd3hORGt1TkRjeExESXlMak0zTlNCTU1UUTVMamN3TlN3eU1pNHpOelVnVERFME9TNDNNRFVzTlRZdU5EQTRJRU14TkRrdU56QTFMRFUzTGpRMU9TQXhOVEF1TkRVc05UZ3VOelEwSURFMU1TNHpOallzTlRrdU1qYzBJRXd4T1RNdU9ETTVMRGd6TGpjNU5TQkRNVGswTGpJMk15dzROQzR3TkNBeE9UUXVOalUxTERnMExqQTRNeUF4T1RRdU9UUXlMRGd6TGpreE55QkRNVGsxTGpJeU55dzRNeTQzTlRNZ01UazFMak00TkN3NE15NHpPVGNnTVRrMUxqTTROQ3c0TWk0NU1UVWdUREU1TlM0ek9EUXNNamd1T1RneUlFTXhPVFF1TVRBeUxESTRMakkwTWlBeE56SXVNVEEwTERFMUxqVTBNaUF4TmprdU5qTXhMREUwTGpFeE5DQk1NVFk1TGpZek5Dd3hOUzR5TWlCRE1UWTVMalkyT0N3eE5pNHdOVElnTVRZNUxqWTJMREUyTGpnM05DQXhOamt1TmpFc01UY3VOalU1SUVNeE5qa3VOVFUyTERFNExqVXdNeUF4TmprdU1qRTBMREU1TGpFeU15QXhOamd1TmpRM0xERTVMalF3TlNCRE1UWTRMakF5T0N3eE9TNDNNVFFnTVRZM0xqRTVOeXd4T1M0MU56Z2dNVFkyTGpNMk55d3hPUzR3TXpJZ1F6RTJOaTR4T0RFc01UZ3VPVEE1SURFMk5TNDVPVFVzTVRndU56WTJJREUyTlM0NE1UUXNNVGd1TmpBMklFd3hOVGd1TkRFM0xERXlMakEyTWlCRE1UVTNMakkxT1N3eE1TNHdNellnTVRVMkxqUXhPQ3c1TGpRek55QXhOVFl1TWpjMExEY3VPVGcySUVNeE5UWXVNalkyTERjdU9UQTNJREUxTmk0eU5UY3NOeTQ0TWpjZ01UVTJMakkwTnl3M0xqYzBPQ0JETVRVMkxqSXlNU3czTGpVMU5TQXhOVFl1TWpBNUxEY3VNelkxSURFMU5pNHlNRGtzTnk0eE9EUWdUREUxTmk0eU1Ea3NOaTR6TmpRZ1F6RTFOUzR6TnpVc05TNDRPRE1nTVRRNUxqVXlPU3d5TGpVd09DQXhORGt1TlRJNUxESXVOVEE0SUV3eE5Ea3VOalEyTERJdU16QTJJRU14TkRrdU5qUTJMREl1TXpBMklERTFOUzQ0TWpjc05TNDROelFnTVRVMkxqTTROQ3cyTGpFNU5pQk1NVFUyTGpRME1pdzJMakl6SUV3eE5UWXVORFF5TERjdU1UZzBJRU14TlRZdU5EUXlMRGN1TXpVMUlERTFOaTQwTlRRc055NDFNelVnTVRVMkxqUTNPQ3czTGpjeE55QkRNVFUyTGpRNE9TdzNMamdnTVRVMkxqUTVPU3czTGpnNE1pQXhOVFl1TlRBM0xEY3VPVFl6SUVNeE5UWXVOalExTERrdU16VTRJREUxTnk0ME5UVXNNVEF1T0RrNElERTFPQzQxTnpJc01URXVPRGcySUV3eE5qVXVPVFk1TERFNExqUXpNU0JETVRZMkxqRTBNaXd4T0M0MU9EUWdNVFkyTGpNeE9Td3hPQzQzTWlBeE5qWXVORGsyTERFNExqZ3pOeUJETVRZM0xqSTFOQ3d4T1M0ek16WWdNVFk0TERFNUxqUTJOeUF4TmpndU5UUXpMREU1TGpFNU5pQkRNVFk1TGpBek15d3hPQzQ1TlRNZ01UWTVMak15T1N3eE9DNDBNREVnTVRZNUxqTTNOeXd4Tnk0Mk5EVWdRekUyT1M0ME1qY3NNVFl1T0RZM0lERTJPUzQwTXpRc01UWXVNRFUwSURFMk9TNDBNREVzTVRVdU1qSTRJRXd4TmprdU16azNMREUxTGpBMk5TQk1NVFk1TGpNNU55d3hNeTQzTVNCTU1UWTVMalUzTWl3eE15NDRNU0JETVRjd0xqZ3pPU3d4TkM0MU5ERWdNVGsxTGpVMU9Td3lPQzQ0TVRRZ01UazFMalUxT1N3eU9DNDRNVFFnVERFNU5TNDJNVGdzTWpndU9EUTNJRXd4T1RVdU5qRTRMRGd5TGpreE5TQkRNVGsxTGpZeE9DdzRNeTQwT0RRZ01UazFMalF5TERnekxqa3hNU0F4T1RVdU1EVTVMRGcwTGpFeE9TQkRNVGswTGprd09DdzROQzR5TURZZ01UazBMamN6Tnl3NE5DNHlOU0F4T1RRdU5UVXpMRGcwTGpJMUlpQnBaRDBpUm1sc2JDMHhNQ0lnWm1sc2JEMGlJell3TjBRNFFpSStQQzl3WVhSb1Bnb2dJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJRHh3WVhSb0lHUTlJazB4TkRVdU5qZzFMRFUyTGpFMk1TQk1NVFk1TGpnc056QXVNRGd6SUV3eE5ETXVPREl5TERnMUxqQTRNU0JNTVRReUxqTTJMRGcwTGpjM05DQkRNVE0xTGpneU5pdzRNaTQyTURRZ01USTRMamN6TWl3NE1TNHdORFlnTVRJeExqTTBNU3c0TUM0eE5UZ2dRekV4Tmk0NU56WXNOemt1TmpNMElERXhNaTQyTnpnc09ERXVNalUwSURFeE1TNDNORE1zT0RNdU56YzRJRU14TVRFdU5UQTJMRGcwTGpReE5DQXhNVEV1TlRBekxEZzFMakEzTVNBeE1URXVOek15TERnMUxqY3dOaUJETVRFekxqSTNMRGc1TGprM015QXhNVFV1T1RZNExEazBMakEyT1NBeE1Ua3VOekkzTERrM0xqZzBNU0JNTVRJd0xqSTFPU3c1T0M0Mk9EWWdRekV5TUM0eU5pdzVPQzQyT0RVZ09UUXVNamd5TERFeE15NDJPRE1nT1RRdU1qZ3lMREV4TXk0Mk9ETWdURGN3TGpFMk55dzVPUzQzTmpFZ1RERTBOUzQyT0RVc05UWXVNVFl4SWlCcFpEMGlSbWxzYkMweE1TSWdabWxzYkQwaUkwWkdSa1pHUmlJK1BDOXdZWFJvUGdvZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lEeHdZWFJvSUdROUlrMDVOQzR5T0RJc01URXpMamd4T0NCTU9UUXVNakl6TERFeE15NDNPRFVnVERZNUxqa3pNeXc1T1M0M05qRWdURGN3TGpFd09DdzVPUzQyTmlCTU1UUTFMalk0TlN3MU5pNHdNallnVERFME5TNDNORE1zTlRZdU1EVTVJRXd4TnpBdU1ETXpMRGN3TGpBNE15Qk1NVFF6TGpnME1pdzROUzR5TURVZ1RERTBNeTQzT1Rjc09EVXVNVGsxSUVNeE5ETXVOemN5TERnMUxqRTVJREUwTWk0ek16WXNPRFF1T0RnNElERTBNaTR6TXpZc09EUXVPRGc0SUVNeE16VXVOemczTERneUxqY3hOQ0F4TWpndU56SXpMRGd4TGpFMk15QXhNakV1TXpJM0xEZ3dMakkzTkNCRE1USXdMamM0T0N3NE1DNHlNRGtnTVRJd0xqSXpOaXc0TUM0eE56Y2dNVEU1TGpZNE9TdzRNQzR4TnpjZ1F6RXhOUzQ1TXpFc09EQXVNVGMzSURFeE1pNDJNelVzT0RFdU56QTRJREV4TVM0NE5USXNPRE11T0RFNUlFTXhNVEV1TmpJMExEZzBMalF6TWlBeE1URXVOakl4TERnMUxqQTFNeUF4TVRFdU9EUXlMRGcxTGpZMk55QkRNVEV6TGpNM055dzRPUzQ1TWpVZ01URTJMakExT0N3NU15NDVPVE1nTVRFNUxqZ3hMRGszTGpjMU9DQk1NVEU1TGpneU5pdzVOeTQzTnprZ1RERXlNQzR6TlRJc09UZ3VOakUwSUVNeE1qQXVNelUwTERrNExqWXhOeUF4TWpBdU16VTJMRGs0TGpZeUlERXlNQzR6TlRnc09UZ3VOakkwSUV3eE1qQXVOREl5TERrNExqY3lOaUJNTVRJd0xqTXhOeXc1T0M0M09EY2dRekV5TUM0eU5qUXNPVGd1T0RFNElEazBMalU1T1N3eE1UTXVOak0xSURrMExqTTBMREV4TXk0M09EVWdURGswTGpJNE1pd3hNVE11T0RFNElFdzVOQzR5T0RJc01URXpMamd4T0NCYUlFMDNNQzQwTURFc09Ua3VOell4SUV3NU5DNHlPRElzTVRFekxqVTBPU0JNTVRFNUxqQTROQ3c1T1M0eU1qa2dRekV4T1M0Mk15dzVPQzQ1TVRRZ01URTVMamt6TERrNExqYzBJREV5TUM0eE1ERXNPVGd1TmpVMElFd3hNVGt1TmpNMUxEazNMamt4TkNCRE1URTFMamcyTkN3NU5DNHhNamNnTVRFekxqRTJPQ3c1TUM0d016TWdNVEV4TGpZeU1pdzROUzQzTkRZZ1F6RXhNUzR6T0RJc09EVXVNRGM1SURFeE1TNHpPRFlzT0RRdU5EQTBJREV4TVM0Mk16TXNPRE11TnpNNElFTXhNVEl1TkRRNExEZ3hMalV6T1NBeE1UVXVPRE0yTERjNUxqazBNeUF4TVRrdU5qZzVMRGM1TGprME15QkRNVEl3TGpJME5pdzNPUzQ1TkRNZ01USXdMamd3Tml3M09TNDVOellnTVRJeExqTTFOU3c0TUM0d05ESWdRekV5T0M0M05qY3NPREF1T1RNeklERXpOUzQ0TkRZc09ESXVORGczSURFME1pNHpPVFlzT0RRdU5qWXpJRU14TkRNdU1qTXlMRGcwTGpnek9DQXhORE11TmpFeExEZzBMamt4TnlBeE5ETXVOemcyTERnMExqazJOeUJNTVRZNUxqVTJOaXczTUM0d09ETWdUREUwTlM0Mk9EVXNOVFl1TWprMUlFdzNNQzQwTURFc09Ua3VOell4SUV3M01DNDBNREVzT1RrdU56WXhJRm9pSUdsa1BTSkdhV3hzTFRFeUlpQm1hV3hzUFNJak5qQTNSRGhDSWo0OEwzQmhkR2crQ2lBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ1BIQmhkR2dnWkQwaVRURTJOeTR5TXl3eE9DNDVOemtnVERFMk55NHlNeXcyT1M0NE5TQk1NVE01TGprd09TdzROUzQyTWpNZ1RERXpNeTQwTkRnc056RXVORFUySUVNeE16SXVOVE00TERZNUxqUTJJREV6TUM0d01pdzJPUzQzTVRnZ01USTNMamd5TkN3M01pNHdNeUJETVRJMkxqYzJPU3czTXk0eE5DQXhNalV1T1RNeExEYzBMalU0TlNBeE1qVXVORGswTERjMkxqQTBPQ0JNTVRFNUxqQXpOQ3c1Tnk0Mk56WWdURGt4TGpjeE1pd3hNVE11TkRVZ1REa3hMamN4TWl3Mk1pNDFOemtnVERFMk55NHlNeXd4T0M0NU56a2lJR2xrUFNKR2FXeHNMVEV6SWlCbWFXeHNQU0lqUmtaR1JrWkdJajQ4TDNCaGRHZytDaUFnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnUEhCaGRHZ2daRDBpVFRreExqY3hNaXd4TVRNdU5UWTNJRU01TVM0Mk9USXNNVEV6TGpVMk55QTVNUzQyTnpJc01URXpMalUyTVNBNU1TNDJOVE1zTVRFekxqVTFNU0JET1RFdU5qRTRMREV4TXk0MU15QTVNUzQxT1RVc01URXpMalE1TWlBNU1TNDFPVFVzTVRFekxqUTFJRXc1TVM0MU9UVXNOakl1TlRjNUlFTTVNUzQxT1RVc05qSXVOVE0zSURreExqWXhPQ3cyTWk0ME9Ua2dPVEV1TmpVekxEWXlMalEzT0NCTU1UWTNMakUzTWl3eE9DNDROemdnUXpFMk55NHlNRGdzTVRndU9EVTNJREUyTnk0eU5USXNNVGd1T0RVM0lERTJOeTR5T0Rnc01UZ3VPRGM0SUVNeE5qY3VNekkwTERFNExqZzVPU0F4TmpjdU16UTNMREU0TGprek55QXhOamN1TXpRM0xERTRMamszT1NCTU1UWTNMak0wTnl3Mk9TNDROU0JETVRZM0xqTTBOeXcyT1M0NE9URWdNVFkzTGpNeU5DdzJPUzQ1TXlBeE5qY3VNamc0TERZNUxqazFJRXd4TXprdU9UWTNMRGcxTGpjeU5TQkRNVE01TGprek9TdzROUzQzTkRFZ01UTTVMamt3TlN3NE5TNDNORFVnTVRNNUxqZzNNeXc0TlM0M016VWdRekV6T1M0NE5ESXNPRFV1TnpJMUlERXpPUzQ0TVRZc09EVXVOekF5SURFek9TNDRNRElzT0RVdU5qY3lJRXd4TXpNdU16UXlMRGN4TGpVd05DQkRNVE15TGprMk55dzNNQzQyT0RJZ01UTXlMakk0TERjd0xqSXlPU0F4TXpFdU5EQTRMRGN3TGpJeU9TQkRNVE13TGpNeE9TdzNNQzR5TWprZ01USTVMakEwTkN3M01DNDVNVFVnTVRJM0xqa3dPQ3czTWk0eE1TQkRNVEkyTGpnM05DdzNNeTR5SURFeU5pNHdNelFzTnpRdU5qUTNJREV5TlM0Mk1EWXNOell1TURneUlFd3hNVGt1TVRRMkxEazNMamN3T1NCRE1URTVMakV6Tnl3NU55NDNNemdnTVRFNUxqRXhPQ3c1Tnk0M05qSWdNVEU1TGpBNU1pdzVOeTQzTnpjZ1REa3hMamMzTERFeE15NDFOVEVnUXpreExqYzFNaXd4TVRNdU5UWXhJRGt4TGpjek1pd3hNVE11TlRZM0lEa3hMamN4TWl3eE1UTXVOVFkzSUV3NU1TNDNNVElzTVRFekxqVTJOeUJhSUUwNU1TNDRNamtzTmpJdU5qUTNJRXc1TVM0NE1qa3NNVEV6TGpJME9DQk1NVEU0TGprek5TdzVOeTQxT1RnZ1RERXlOUzR6T0RJc056WXVNREUxSUVNeE1qVXVPREkzTERjMExqVXlOU0F4TWpZdU5qWTBMRGN6TGpBNE1TQXhNamN1TnpNNUxEY3hMamsxSUVNeE1qZ3VPVEU1TERjd0xqY3dPQ0F4TXpBdU1qVTJMRFk1TGprNU5pQXhNekV1TkRBNExEWTVMams1TmlCRE1UTXlMak0zTnl3Mk9TNDVPVFlnTVRNekxqRXpPU3czTUM0ME9UY2dNVE16TGpVMU5DdzNNUzQwTURjZ1RERXpPUzQ1TmpFc09EVXVORFU0SUV3eE5qY3VNVEV6TERZNUxqYzRNaUJNTVRZM0xqRXhNeXd4T1M0eE9ERWdURGt4TGpneU9TdzJNaTQyTkRjZ1REa3hMamd5T1N3Mk1pNDJORGNnV2lJZ2FXUTlJa1pwYkd3dE1UUWlJR1pwYkd3OUlpTTJNRGRFT0VJaVBqd3ZjR0YwYUQ0S0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQThjR0YwYUNCa1BTSk5NVFk0TGpVME15d3hPUzR5TVRNZ1RERTJPQzQxTkRNc056QXVNRGd6SUV3eE5ERXVNakl4TERnMUxqZzFOeUJNTVRNMExqYzJNU3czTVM0Mk9Ea2dRekV6TXk0NE5URXNOamt1TmprMElERXpNUzR6TXpNc05qa3VPVFV4SURFeU9TNHhNemNzTnpJdU1qWXpJRU14TWpndU1EZ3lMRGN6TGpNM05DQXhNamN1TWpRMExEYzBMamd4T1NBeE1qWXVPREEzTERjMkxqSTRNaUJNTVRJd0xqTTBOaXc1Tnk0NU1Ea2dURGt6TGpBeU5Td3hNVE11TmpneklFdzVNeTR3TWpVc05qSXVPREV6SUV3eE5qZ3VOVFF6TERFNUxqSXhNeUlnYVdROUlrWnBiR3d0TVRVaUlHWnBiR3c5SWlOR1JrWkdSa1lpUGp3dmNHRjBhRDRLSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBOGNHRjBhQ0JrUFNKTk9UTXVNREkxTERFeE15NDRJRU01TXk0d01EVXNNVEV6TGpnZ09USXVPVGcwTERFeE15NDNPVFVnT1RJdU9UWTJMREV4TXk0M09EVWdRemt5TGprek1Td3hNVE11TnpZMElEa3lMamt3T0N3eE1UTXVOekkxSURreUxqa3dPQ3d4TVRNdU5qZzBJRXc1TWk0NU1EZ3NOakl1T0RFeklFTTVNaTQ1TURnc05qSXVOemN4SURreUxqa3pNU3cyTWk0M016TWdPVEl1T1RZMkxEWXlMamN4TWlCTU1UWTRMalE0TkN3eE9TNHhNVElnUXpFMk9DNDFNaXd4T1M0d09TQXhOamd1TlRZMUxERTVMakE1SURFMk9DNDJNREVzTVRrdU1URXlJRU14TmpndU5qTTNMREU1TGpFek1pQXhOamd1TmpZc01Ua3VNVGN4SURFMk9DNDJOaXd4T1M0eU1USWdUREUyT0M0Mk5pdzNNQzR3T0RNZ1F6RTJPQzQyTml3M01DNHhNalVnTVRZNExqWXpOeXczTUM0eE5qUWdNVFk0TGpZd01TdzNNQzR4T0RRZ1RERTBNUzR5T0N3NE5TNDVOVGdnUXpFME1TNHlOVEVzT0RVdU9UYzFJREUwTVM0eU1UY3NPRFV1T1RjNUlERTBNUzR4T0RZc09EVXVPVFk0SUVNeE5ERXVNVFUwTERnMUxqazFPQ0F4TkRFdU1USTVMRGcxTGprek5pQXhOREV1TVRFMUxEZzFMamt3TmlCTU1UTTBMalkxTlN3M01TNDNNemdnUXpFek5DNHlPQ3czTUM0NU1UVWdNVE16TGpVNU15dzNNQzQwTmpNZ01UTXlMamN5TERjd0xqUTJNeUJETVRNeExqWXpNaXczTUM0ME5qTWdNVE13TGpNMU55dzNNUzR4TkRnZ01USTVMakl5TVN3M01pNHpORFFnUXpFeU9DNHhPRFlzTnpNdU5ETXpJREV5Tnk0ek5EY3NOelF1T0RneElERXlOaTQ1TVRrc056WXVNekUxSUV3eE1qQXVORFU0TERrM0xqazBNeUJETVRJd0xqUTFMRGszTGprM01pQXhNakF1TkRNeExEazNMams1TmlBeE1qQXVOREExTERrNExqQXhJRXc1TXk0d09ETXNNVEV6TGpjNE5TQkRPVE11TURZMUxERXhNeTQzT1RVZ09UTXVNRFExTERFeE15NDRJRGt6TGpBeU5Td3hNVE11T0NCTU9UTXVNREkxTERFeE15NDRJRm9nVFRrekxqRTBNaXcyTWk0NE9ERWdURGt6TGpFME1pd3hNVE11TkRneElFd3hNakF1TWpRNExEazNMamd6TWlCTU1USTJMalk1TlN3M05pNHlORGdnUXpFeU55NHhOQ3czTkM0M05UZ2dNVEkzTGprM055dzNNeTR6TVRVZ01USTVMakExTWl3M01pNHhPRE1nUXpFek1DNHlNekVzTnpBdU9UUXlJREV6TVM0MU5qZ3NOekF1TWpJNUlERXpNaTQzTWl3M01DNHlNamtnUXpFek15NDJPRGtzTnpBdU1qSTVJREV6TkM0ME5USXNOekF1TnpNeElERXpOQzQ0Tmpjc056RXVOalF4SUV3eE5ERXVNamMwTERnMUxqWTVNaUJNTVRZNExqUXlOaXczTUM0d01UWWdUREUyT0M0ME1qWXNNVGt1TkRFMUlFdzVNeTR4TkRJc05qSXVPRGd4SUV3NU15NHhORElzTmpJdU9EZ3hJRm9pSUdsa1BTSkdhV3hzTFRFMklpQm1hV3hzUFNJak5qQTNSRGhDSWo0OEwzQmhkR2crQ2lBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ1BIQmhkR2dnWkQwaVRURTJPUzQ0TERjd0xqQTRNeUJNTVRReUxqUTNPQ3c0TlM0NE5UY2dUREV6Tmk0d01UZ3NOekV1TmpnNUlFTXhNelV1TVRBNExEWTVMalk1TkNBeE16SXVOVGtzTmprdU9UVXhJREV6TUM0ek9UTXNOekl1TWpZeklFTXhNamt1TXpNNUxEY3pMak0zTkNBeE1qZ3VOU3czTkM0NE1Ua2dNVEk0TGpBMk5DdzNOaTR5T0RJZ1RERXlNUzQyTURNc09UY3VPVEE1SUV3NU5DNHlPRElzTVRFekxqWTRNeUJNT1RRdU1qZ3lMRFl5TGpneE15Qk1NVFk1TGpnc01Ua3VNakV6SUV3eE5qa3VPQ3czTUM0d09ETWdXaUlnYVdROUlrWnBiR3d0TVRjaUlHWnBiR3c5SWlOR1FVWkJSa0VpUGp3dmNHRjBhRDRLSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBOGNHRjBhQ0JrUFNKTk9UUXVNamd5TERFeE15NDVNVGNnUXprMExqSTBNU3d4TVRNdU9URTNJRGswTGpJd01Td3hNVE11T1RBM0lEazBMakUyTlN3eE1UTXVPRGcySUVNNU5DNHdPVE1zTVRFekxqZzBOU0E1TkM0d05EZ3NNVEV6TGpjMk55QTVOQzR3TkRnc01URXpMalk0TkNCTU9UUXVNRFE0TERZeUxqZ3hNeUJET1RRdU1EUTRMRFl5TGpjeklEazBMakE1TXl3Mk1pNDJOVElnT1RRdU1UWTFMRFl5TGpZeE1TQk1NVFk1TGpZNE15d3hPUzR3TVNCRE1UWTVMamMxTlN3eE9DNDVOamtnTVRZNUxqZzBOQ3d4T0M0NU5qa2dNVFk1TGpreE55d3hPUzR3TVNCRE1UWTVMams0T1N3eE9TNHdOVElnTVRjd0xqQXpNeXd4T1M0eE1qa2dNVGN3TGpBek15d3hPUzR5TVRJZ1RERTNNQzR3TXpNc056QXVNRGd6SUVNeE56QXVNRE16TERjd0xqRTJOaUF4TmprdU9UZzVMRGN3TGpJME5DQXhOamt1T1RFM0xEY3dMakk0TlNCTU1UUXlMalU1TlN3NE5pNHdOaUJETVRReUxqVXpPQ3c0Tmk0d09USWdNVFF5TGpRMk9TdzROaTR4SURFME1pNDBNRGNzT0RZdU1EZ2dRekUwTWk0ek5EUXNPRFl1TURZZ01UUXlMakk1TXl3NE5pNHdNVFFnTVRReUxqSTJOaXc0TlM0NU5UUWdUREV6TlM0NE1EVXNOekV1TnpnMklFTXhNelV1TkRRMUxEY3dMams1TnlBeE16UXVPREV6TERjd0xqVTRJREV6TXk0NU56Y3NOekF1TlRnZ1F6RXpNaTQ1TWpFc056QXVOVGdnTVRNeExqWTNOaXczTVM0eU5USWdNVE13TGpVMk1pdzNNaTQwTWpRZ1F6RXlPUzQxTkN3M015NDFNREVnTVRJNExqY3hNU3czTkM0NU16RWdNVEk0TGpJNE55dzNOaTR6TkRnZ1RERXlNUzQ0TWpjc09UY3VPVGMySUVNeE1qRXVPREVzT1RndU1ETTBJREV5TVM0M056RXNPVGd1TURneUlERXlNUzQzTWl3NU9DNHhNVElnVERrMExqTTVPQ3d4TVRNdU9EZzJJRU01TkM0ek5qSXNNVEV6TGprd055QTVOQzR6TWpJc01URXpMamt4TnlBNU5DNHlPRElzTVRFekxqa3hOeUJNT1RRdU1qZ3lMREV4TXk0NU1UY2dXaUJOT1RRdU5URTFMRFl5TGprME9DQk1PVFF1TlRFMUxERXhNeTR5TnprZ1RERXlNUzQwTURZc09UY3VOelUwSUV3eE1qY3VPRFFzTnpZdU1qRTFJRU14TWpndU1qa3NOelF1TnpBNElERXlPUzR4TXpjc056TXVNalEzSURFek1DNHlNalFzTnpJdU1UQXpJRU14TXpFdU5ESTFMRGN3TGpnek9DQXhNekl1TnprekxEY3dMakV4TWlBeE16TXVPVGMzTERjd0xqRXhNaUJETVRNMExqazVOU3czTUM0eE1USWdNVE0xTGpjNU5TdzNNQzQyTXpnZ01UTTJMakl6TERjeExqVTVNaUJNTVRReUxqVTROQ3c0TlM0MU1qWWdUREUyT1M0MU5qWXNOamt1T1RRNElFd3hOamt1TlRZMkxERTVMall4TnlCTU9UUXVOVEUxTERZeUxqazBPQ0JNT1RRdU5URTFMRFl5TGprME9DQmFJaUJwWkQwaVJtbHNiQzB4T0NJZ1ptbHNiRDBpSXpZd04wUTRRaUkrUEM5d1lYUm9QZ29nSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUR4d1lYUm9JR1E5SWsweE1Ea3VPRGswTERreUxqazBNeUJNTVRBNUxqZzVOQ3c1TWk0NU5ETWdRekV3T0M0eE1pdzVNaTQ1TkRNZ01UQTJMalkxTXl3NU1pNHlNVGdnTVRBMUxqWTFMRGt3TGpneU15QkRNVEExTGpVNE15dzVNQzQzTXpFZ01UQTFMalU1TXl3NU1DNDJNU0F4TURVdU5qY3pMRGt3TGpVeU9TQkRNVEExTGpjMU15dzVNQzQwTkRnZ01UQTFMamc0TERrd0xqUTBJREV3TlM0NU56UXNPVEF1TlRBMklFTXhNRFl1TnpVMExEa3hMakExTXlBeE1EY3VOamM1TERreExqTXpNeUF4TURndU56STBMRGt4TGpNek15QkRNVEV3TGpBME55dzVNUzR6TXpNZ01URXhMalEzT0N3NU1DNDRPVFFnTVRFeUxqazRMRGt3TGpBeU55QkRNVEU0TGpJNU1TdzROaTQ1TmlBeE1qSXVOakV4TERjNUxqVXdPU0F4TWpJdU5qRXhMRGN6TGpReE5pQkRNVEl5TGpZeE1TdzNNUzQwT0RrZ01USXlMakUyT1N3Mk9TNDROVFlnTVRJeExqTXpNeXcyT0M0Mk9USWdRekV5TVM0eU5qWXNOamd1TmlBeE1qRXVNamMyTERZNExqUTNNeUF4TWpFdU16VTJMRFk0TGpNNU1pQkRNVEl4TGpRek5pdzJPQzR6TVRFZ01USXhMalUyTXl3Mk9DNHlPVGtnTVRJeExqWTFOaXcyT0M0ek5qVWdRekV5TXk0ek1qY3NOamt1TlRNM0lERXlOQzR5TkRjc056RXVOelEySURFeU5DNHlORGNzTnpRdU5UZzBJRU14TWpRdU1qUTNMRGd3TGpneU5pQXhNVGt1T0RJeExEZzRMalEwTnlBeE1UUXVNemd5TERreExqVTROeUJETVRFeUxqZ3dPQ3c1TWk0ME9UVWdNVEV4TGpJNU9DdzVNaTQ1TkRNZ01UQTVMamc1TkN3NU1pNDVORE1nVERFd09TNDRPVFFzT1RJdU9UUXpJRm9nVFRFd05pNDVNalVzT1RFdU5EQXhJRU14TURjdU56TTRMRGt5TGpBMU1pQXhNRGd1TnpRMUxEa3lMakkzT0NBeE1Ea3VPRGt6TERreUxqSTNPQ0JNTVRBNUxqZzVOQ3c1TWk0eU56Z2dRekV4TVM0eU1UVXNPVEl1TWpjNElERXhNaTQyTkRjc09URXVPVFV4SURFeE5DNHhORGdzT1RFdU1EZzBJRU14TVRrdU5EVTVMRGc0TGpBeE55QXhNak11Tnpnc09EQXVOakl4SURFeU15NDNPQ3czTkM0MU1qZ2dRekV5TXk0M09DdzNNaTQxTkRrZ01USXpMak14Tnl3M01DNDVNamtnTVRJeUxqUTFOQ3cyT1M0M05qY2dRekV5TWk0NE5qVXNOekF1T0RBeUlERXlNeTR3Tnprc056SXVNRFF5SURFeU15NHdOemtzTnpNdU5EQXlJRU14TWpNdU1EYzVMRGM1TGpZME5TQXhNVGd1TmpVekxEZzNMakk0TlNBeE1UTXVNakUwTERrd0xqUXlOU0JETVRFeExqWTBMRGt4TGpNek5DQXhNVEF1TVRNc09URXVOelF5SURFd09DNDNNalFzT1RFdU56UXlJRU14TURndU1EZ3pMRGt4TGpjME1pQXhNRGN1TkRneExEa3hMalU1TXlBeE1EWXVPVEkxTERreExqUXdNU0JNTVRBMkxqa3lOU3c1TVM0ME1ERWdXaUlnYVdROUlrWnBiR3d0TVRraUlHWnBiR3c5SWlNMk1EZEVPRUlpUGp3dmNHRjBhRDRLSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBOGNHRjBhQ0JrUFNKTk1URXpMakE1Tnl3NU1DNHlNeUJETVRFNExqUTRNU3c0Tnk0eE1qSWdNVEl5TGpnME5TdzNPUzQxT1RRZ01USXlMamcwTlN3M015NDBNVFlnUXpFeU1pNDRORFVzTnpFdU16WTFJREV5TWk0ek5qSXNOamt1TnpJMElERXlNUzQxTWpJc05qZ3VOVFUySUVNeE1Ua3VOek00TERZM0xqTXdOQ0F4TVRjdU1UUTRMRFkzTGpNMk1pQXhNVFF1TWpZMUxEWTVMakF5TmlCRE1UQTRMamc0TVN3M01pNHhNelFnTVRBMExqVXhOeXczT1M0Mk5qSWdNVEEwTGpVeE55dzROUzQ0TkNCRE1UQTBMalV4Tnl3NE55NDRPVEVnTVRBMUxEZzVMalV6TWlBeE1EVXVPRFFzT1RBdU55QkRNVEEzTGpZeU5DdzVNUzQ1TlRJZ01URXdMakl4TkN3NU1TNDRPVFFnTVRFekxqQTVOeXc1TUM0eU15SWdhV1E5SWtacGJHd3RNakFpSUdacGJHdzlJaU5HUVVaQlJrRWlQand2Y0dGMGFENEtJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0E4Y0dGMGFDQmtQU0pOTVRBNExqY3lOQ3c1TVM0Mk1UUWdUREV3T0M0M01qUXNPVEV1TmpFMElFTXhNRGN1TlRneUxEa3hMall4TkNBeE1EWXVOVFkyTERreExqUXdNU0F4TURVdU56QTFMRGt3TGpjNU55QkRNVEExTGpZNE5DdzVNQzQzT0RNZ01UQTFMalkyTlN3NU1DNDRNVEVnTVRBMUxqWTFMRGt3TGpjNUlFTXhNRFF1TnpVMkxEZzVMalUwTmlBeE1EUXVNamd6TERnM0xqZzBNaUF4TURRdU1qZ3pMRGcxTGpneE55QkRNVEEwTGpJNE15dzNPUzQxTnpVZ01UQTRMamN3T1N3M01TNDVOVE1nTVRFMExqRTBPQ3cyT0M0NE1USWdRekV4TlM0M01qSXNOamN1T1RBMElERXhOeTR5TXpJc05qY3VORFE1SURFeE9DNDJNemdzTmpjdU5EUTVJRU14TVRrdU56Z3NOamN1TkRRNUlERXlNQzQzT1RZc05qY3VOelU0SURFeU1TNDJOVFlzTmpndU16WXlJRU14TWpFdU5qYzRMRFk0TGpNM055QXhNakV1TmprM0xEWTRMak01TnlBeE1qRXVOekV5TERZNExqUXhPQ0JETVRJeUxqWXdOaXcyT1M0Mk5qSWdNVEl6TGpBM09TdzNNUzR6T1NBeE1qTXVNRGM1TERjekxqUXhOU0JETVRJekxqQTNPU3czT1M0Mk5UZ2dNVEU0TGpZMU15dzROeTR4T1RnZ01URXpMakl4TkN3NU1DNHpNemdnUXpFeE1TNDJOQ3c1TVM0eU5EY2dNVEV3TGpFekxEa3hMall4TkNBeE1EZ3VOekkwTERreExqWXhOQ0JNTVRBNExqY3lOQ3c1TVM0Mk1UUWdXaUJOTVRBMkxqQXdOaXc1TUM0MU1EVWdRekV3Tmk0M09DdzVNUzR3TXpjZ01UQTNMalk1TkN3NU1TNHlPREVnTVRBNExqY3lOQ3c1TVM0eU9ERWdRekV4TUM0d05EY3NPVEV1TWpneElERXhNUzQwTnpnc09UQXVPRFk0SURFeE1pNDVPQ3c1TUM0d01ERWdRekV4T0M0eU9URXNPRFl1T1RNMUlERXlNaTQyTVRFc056a3VORGsySURFeU1pNDJNVEVzTnpNdU5EQXpJRU14TWpJdU5qRXhMRGN4TGpRNU5DQXhNakl1TVRjM0xEWTVMamc0SURFeU1TNHpOVFlzTmpndU56RTRJRU14TWpBdU5UZ3lMRFk0TGpFNE5TQXhNVGt1TmpZNExEWTNMamt4T1NBeE1UZ3VOak00TERZM0xqa3hPU0JETVRFM0xqTXhOU3cyTnk0NU1Ua2dNVEUxTGpnNE15dzJPQzR6TmlBeE1UUXVNemd5TERZNUxqSXlOeUJETVRBNUxqQTNNU3czTWk0eU9UTWdNVEEwTGpjMU1TdzNPUzQzTXpNZ01UQTBMamMxTVN3NE5TNDRNallnUXpFd05DNDNOVEVzT0RjdU56TTFJREV3TlM0eE9EVXNPRGt1TXpReklERXdOaTR3TURZc09UQXVOVEExSUV3eE1EWXVNREEyTERrd0xqVXdOU0JhSWlCcFpEMGlSbWxzYkMweU1TSWdabWxzYkQwaUl6WXdOMFE0UWlJK1BDOXdZWFJvUGdvZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lEeHdZWFJvSUdROUlrMHhORGt1TXpFNExEY3VNall5SUV3eE16a3VNek0wTERFMkxqRTBJRXd4TlRVdU1qSTNMREkzTGpFM01TQk1NVFl3TGpneE5pd3lNUzR3TlRrZ1RERTBPUzR6TVRnc055NHlOaklpSUdsa1BTSkdhV3hzTFRJeUlpQm1hV3hzUFNJalJrRkdRVVpCSWo0OEwzQmhkR2crQ2lBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ1BIQmhkR2dnWkQwaVRURTJPUzQyTnpZc01UTXVPRFFnVERFMU9TNDVNamdzTVRrdU5EWTNJRU14TlRZdU1qZzJMREl4TGpVM0lERTFNQzQwTERJeExqVTRJREUwTmk0M09ERXNNVGt1TkRreElFTXhORE11TVRZeExERTNMalF3TWlBeE5ETXVNVGdzTVRRdU1EQXpJREUwTmk0NE1qSXNNVEV1T1NCTU1UVTJMak14Tnl3MkxqSTVNaUJNTVRRNUxqVTRPQ3d5TGpRd055Qk1OamN1TnpVeUxEUTVMalEzT0NCTU1URXpMalkzTlN3M05TNDVPVElnVERFeE5pNDNOVFlzTnpRdU1qRXpJRU14TVRjdU16ZzNMRGN6TGpnME9DQXhNVGN1TmpJMUxEY3pMak14TlNBeE1UY3VNemMwTERjeUxqZ3lNeUJETVRFMUxqQXhOeXcyT0M0eE9URWdNVEUwTGpjNE1TdzJNeTR5TnpjZ01URTJMalk1TVN3MU9DNDFOakVnUXpFeU1pNHpNamtzTkRRdU5qUXhJREUwTVM0eUxETXpMamMwTmlBeE5qVXVNekE1TERNd0xqUTVNU0JETVRjekxqUTNPQ3d5T1M0ek9EZ2dNVGd4TGprNE9Td3lPUzQxTWpRZ01Ua3dMakF4TXl3ek1DNDRPRFVnUXpFNU1DNDROalVzTXpFdU1ETWdNVGt4TGpjNE9Td3pNQzQ0T1RNZ01Ua3lMalF5TERNd0xqVXlPQ0JNTVRrMUxqVXdNU3d5T0M0M05TQk1NVFk1TGpZM05pd3hNeTQ0TkNJZ2FXUTlJa1pwYkd3dE1qTWlJR1pwYkd3OUlpTkdRVVpCUmtFaVBqd3ZjR0YwYUQ0S0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQThjR0YwYUNCa1BTSk5NVEV6TGpZM05TdzNOaTQwTlRrZ1F6RXhNeTQxT1RRc056WXVORFU1SURFeE15NDFNVFFzTnpZdU5ETTRJREV4TXk0ME5ESXNOell1TXprM0lFdzJOeTQxTVRnc05Ea3VPRGd5SUVNMk55NHpOelFzTkRrdU56azVJRFkzTGpJNE5DdzBPUzQyTkRVZ05qY3VNamcxTERRNUxqUTNPQ0JETmpjdU1qZzFMRFE1TGpNeE1TQTJOeTR6TnpRc05Ea3VNVFUzSURZM0xqVXhPU3cwT1M0d056TWdUREUwT1M0ek5UVXNNaTR3TURJZ1F6RTBPUzQwT1Rrc01TNDVNVGtnTVRRNUxqWTNOeXd4TGpreE9TQXhORGt1T0RJeExESXVNREF5SUV3eE5UWXVOVFVzTlM0NE9EY2dRekUxTmk0M056UXNOaTR3TVRjZ01UVTJMamcxTERZdU16QXlJREUxTmk0M01qSXNOaTQxTWpZZ1F6RTFOaTQxT1RJc05pNDNORGtnTVRVMkxqTXdOeXcyTGpneU5pQXhOVFl1TURnekxEWXVOamsySUV3eE5Ea3VOVGczTERJdU9UUTJJRXcyT0M0Mk9EY3NORGt1TkRjNUlFd3hNVE11TmpjMUxEYzFMalExTWlCTU1URTJMalV5TXl3M015NDRNRGdnUXpFeE5pNDNNVFVzTnpNdU5qazNJREV4Tnk0eE5ETXNOek11TXprNUlERXhOaTQ1TlRnc056TXVNRE0xSUVNeE1UUXVOVFF5TERZNExqSTROeUF4TVRRdU15dzJNeTR5TWpFZ01URTJMakkxT0N3MU9DNHpPRFVnUXpFeE9TNHdOalFzTlRFdU5EVTRJREV5TlM0eE5ETXNORFV1TVRReklERXpNeTQ0TkN3ME1DNHhNaklnUXpFME1pNDBPVGNzTXpVdU1USTBJREUxTXk0ek5UZ3NNekV1TmpNeklERTJOUzR5TkRjc016QXVNREk0SUVNeE56TXVORFExTERJNExqa3lNU0F4T0RJdU1ETTNMREk1TGpBMU9DQXhPVEF1TURreExETXdMalF5TlNCRE1Ua3dMamd6TERNd0xqVTFJREU1TVM0Mk5USXNNekF1TkRNeUlERTVNaTR4T0RZc016QXVNVEkwSUV3eE9UUXVOVFkzTERJNExqYzFJRXd4TmprdU5EUXlMREUwTGpJME5DQkRNVFk1TGpJeE9Td3hOQzR4TVRVZ01UWTVMakUwTWl3eE15NDRNamtnTVRZNUxqSTNNU3d4TXk0Mk1EWWdRekUyT1M0MExERXpMak00TWlBeE5qa3VOamcxTERFekxqTXdOaUF4TmprdU9UQTVMREV6TGpRek5TQk1NVGsxTGpjek5Dd3lPQzR6TkRVZ1F6RTVOUzQ0Tnprc01qZ3VOREk0SURFNU5TNDVOamdzTWpndU5UZ3pJREU1TlM0NU5qZ3NNamd1TnpVZ1F6RTVOUzQ1Tmpnc01qZ3VPVEUySURFNU5TNDROemtzTWprdU1EY3hJREU1TlM0M016UXNNamt1TVRVMElFd3hPVEl1TmpVekxETXdMamt6TXlCRE1Ua3hMamt6TWl3ek1TNHpOU0F4T1RBdU9Ea3NNekV1TlRBNElERTRPUzQ1TXpVc016RXVNelEySUVNeE9ERXVPVGN5TERJNUxqazVOU0F4TnpNdU5EYzRMREk1TGpnMklERTJOUzR6TnpJc016QXVPVFUwSUVNeE5UTXVOakF5TERNeUxqVTBNeUF4TkRJdU9EWXNNelV1T1RreklERXpOQzR6TURjc05EQXVPVE14SUVNeE1qVXVOemt6TERRMUxqZzBOeUF4TVRrdU9EVXhMRFV5TGpBd05DQXhNVGN1TVRJMExEVTRMamN6TmlCRE1URTFMakkzTERZekxqTXhOQ0F4TVRVdU5UQXhMRFk0TGpFeE1pQXhNVGN1Tnprc056SXVOakV4SUVNeE1UZ3VNVFlzTnpNdU16TTJJREV4Tnk0NE5EVXNOelF1TVRJMElERXhOaTQ1T1N3M05DNDJNVGNnVERFeE15NDVNRGtzTnpZdU16azNJRU14TVRNdU9ETTJMRGMyTGpRek9DQXhNVE11TnpVMkxEYzJMalExT1NBeE1UTXVOamMxTERjMkxqUTFPU0lnYVdROUlrWnBiR3d0TWpRaUlHWnBiR3c5SWlNME5UVkJOalFpUGp3dmNHRjBhRDRLSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBOGNHRjBhQ0JrUFNKTk1UVXpMak14Tml3eU1TNHlOemtnUXpFMU1DNDVNRE1zTWpFdU1qYzVJREUwT0M0ME9UVXNNakF1TnpVeElERTBOaTQyTmpRc01Ua3VOamt6SUVNeE5EUXVPRFEyTERFNExqWTBOQ0F4TkRNdU9EUTBMREUzTGpJek1pQXhORE11T0RRMExERTFMamN4T0NCRE1UUXpMamcwTkN3eE5DNHhPVEVnTVRRMExqZzJMREV5TGpjMk15QXhORFl1TnpBMUxERXhMalk1T0NCTU1UVTJMakU1T0N3MkxqQTVNU0JETVRVMkxqTXdPU3cyTGpBeU5TQXhOVFl1TkRVeUxEWXVNRFl5SURFMU5pNDFNVGdzTmk0eE56TWdRekUxTmk0MU9ETXNOaTR5T0RRZ01UVTJMalUwTnl3MkxqUXlOeUF4TlRZdU5ETTJMRFl1TkRreklFd3hORFl1T1RRc01USXVNVEF5SUVNeE5EVXVNalEwTERFekxqQTRNU0F4TkRRdU16RXlMREUwTGpNMk5TQXhORFF1TXpFeUxERTFMamN4T0NCRE1UUTBMak14TWl3eE55NHdOVGdnTVRRMUxqSXpMREU0TGpNeU5pQXhORFl1T0RrM0xERTVMakk0T1NCRE1UVXdMalEwTml3eU1TNHpNemdnTVRVMkxqSTBMREl4TGpNeU55QXhOVGt1T0RFeExERTVMakkyTlNCTU1UWTVMalUxT1N3eE15NDJNemNnUXpFMk9TNDJOeXd4TXk0MU56TWdNVFk1TGpneE15d3hNeTQyTVRFZ01UWTVMamczT0N3eE15NDNNak1nUXpFMk9TNDVORE1zTVRNdU9ETTBJREUyT1M0NU1EUXNNVE11T1RjM0lERTJPUzQzT1RNc01UUXVNRFF5SUV3eE5qQXVNRFExTERFNUxqWTNJRU14TlRndU1UZzNMREl3TGpjME1pQXhOVFV1TnpRNUxESXhMakkzT1NBeE5UTXVNekUyTERJeExqSTNPU0lnYVdROUlrWnBiR3d0TWpVaUlHWnBiR3c5SWlNMk1EZEVPRUlpUGp3dmNHRjBhRDRLSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBOGNHRjBhQ0JrUFNKTk1URXpMalkzTlN3M05TNDVPVElnVERZM0xqYzJNaXcwT1M0ME9EUWlJR2xrUFNKR2FXeHNMVEkySWlCbWFXeHNQU0lqTkRVMVFUWTBJajQ4TDNCaGRHZytDaUFnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnUEhCaGRHZ2daRDBpVFRFeE15NDJOelVzTnpZdU16UXlJRU14TVRNdU5qRTFMRGMyTGpNME1pQXhNVE11TlRVMUxEYzJMak15TnlBeE1UTXVOU3czTmk0eU9UVWdURFkzTGpVNE55dzBPUzQzT0RjZ1F6WTNMalF4T1N3ME9TNDJPU0EyTnk0ek5qSXNORGt1TkRjMklEWTNMalExT1N3ME9TNHpNRGtnUXpZM0xqVTFOaXcwT1M0eE5ERWdOamN1Tnpjc05Ea3VNRGd6SURZM0xqa3pOeXcwT1M0eE9DQk1NVEV6TGpnMUxEYzFMalk0T0NCRE1URTBMakF4T0N3M05TNDNPRFVnTVRFMExqQTNOU3czTmlBeE1UTXVPVGM0TERjMkxqRTJOeUJETVRFekxqa3hOQ3czTmk0eU56a2dNVEV6TGpjNU5pdzNOaTR6TkRJZ01URXpMalkzTlN3M05pNHpORElpSUdsa1BTSkdhV3hzTFRJM0lpQm1hV3hzUFNJak5EVTFRVFkwSWo0OEwzQmhkR2crQ2lBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ1BIQmhkR2dnWkQwaVRUWTNMamMyTWl3ME9TNDBPRFFnVERZM0xqYzJNaXd4TURNdU5EZzFJRU0yTnk0M05qSXNNVEEwTGpVM05TQTJPQzQxTXpJc01UQTFMamt3TXlBMk9TNDBPRElzTVRBMkxqUTFNaUJNTVRFeExqazFOU3d4TXpBdU9UY3pJRU14TVRJdU9UQTFMREV6TVM0MU1qSWdNVEV6TGpZM05Td3hNekV1TURneklERXhNeTQyTnpVc01USTVMams1TXlCTU1URXpMalkzTlN3M05TNDVPVElpSUdsa1BTSkdhV3hzTFRJNElpQm1hV3hzUFNJalJrRkdRVVpCSWo0OEwzQmhkR2crQ2lBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ1BIQmhkR2dnWkQwaVRURXhNaTQzTWpjc01UTXhMalUyTVNCRE1URXlMalF6TERFek1TNDFOakVnTVRFeUxqRXdOeXd4TXpFdU5EWTJJREV4TVM0M09Dd3hNekV1TWpjMklFdzJPUzR6TURjc01UQTJMamMxTlNCRE5qZ3VNalEwTERFd05pNHhORElnTmpjdU5ERXlMREV3TkM0M01EVWdOamN1TkRFeUxERXdNeTQwT0RVZ1REWTNMalF4TWl3ME9TNDBPRFFnUXpZM0xqUXhNaXcwT1M0eU9TQTJOeTQxTmprc05Ea3VNVE0wSURZM0xqYzJNaXcwT1M0eE16UWdRelkzTGprMU5pdzBPUzR4TXpRZ05qZ3VNVEV6TERRNUxqSTVJRFk0TGpFeE15dzBPUzQwT0RRZ1REWTRMakV4TXl3eE1ETXVORGcxSUVNMk9DNHhNVE1zTVRBMExqUTBOU0EyT0M0NE1pd3hNRFV1TmpZMUlEWTVMalkxTnl3eE1EWXVNVFE0SUV3eE1USXVNVE1zTVRNd0xqWTNJRU14TVRJdU5EYzBMREV6TUM0NE5qZ2dNVEV5TGpjNU1Td3hNekF1T1RFeklERXhNeXd4TXpBdU56a3lJRU14TVRNdU1qQTJMREV6TUM0Mk56TWdNVEV6TGpNeU5Td3hNekF1TXpneElERXhNeTR6TWpVc01USTVMams1TXlCTU1URXpMak15TlN3M05TNDVPVElnUXpFeE15NHpNalVzTnpVdU56azRJREV4TXk0ME9ESXNOelV1TmpReElERXhNeTQyTnpVc056VXVOalF4SUVNeE1UTXVPRFk1TERjMUxqWTBNU0F4TVRRdU1ESTFMRGMxTGpjNU9DQXhNVFF1TURJMUxEYzFMams1TWlCTU1URTBMakF5TlN3eE1qa3VPVGt6SUVNeE1UUXVNREkxTERFek1DNDJORGdnTVRFekxqYzROaXd4TXpFdU1UUTNJREV4TXk0ek5Td3hNekV1TXprNUlFTXhNVE11TVRZeUxERXpNUzQxTURjZ01URXlMamsxTWl3eE16RXVOVFl4SURFeE1pNDNNamNzTVRNeExqVTJNU0lnYVdROUlrWnBiR3d0TWpraUlHWnBiR3c5SWlNME5UVkJOalFpUGp3dmNHRjBhRDRLSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBOGNHRjBhQ0JrUFNKTk1URXlMamcyTERRd0xqVXhNaUJETVRFeUxqZzJMRFF3TGpVeE1pQXhNVEl1T0RZc05EQXVOVEV5SURFeE1pNDROVGtzTkRBdU5URXlJRU14TVRBdU5UUXhMRFF3TGpVeE1pQXhNRGd1TXpZc016a3VPVGtnTVRBMkxqY3hOeXd6T1M0d05ERWdRekV3TlM0d01USXNNemd1TURVM0lERXdOQzR3TnpRc016WXVOekkySURFd05DNHdOelFzTXpVdU1qa3lJRU14TURRdU1EYzBMRE16TGpnME55QXhNRFV1TURJMkxETXlMalV3TVNBeE1EWXVOelUwTERNeExqVXdOQ0JNTVRFNExqYzVOU3d5TkM0MU5URWdRekV5TUM0ME5qTXNNak11TlRnNUlERXlNaTQyTmprc01qTXVNRFU0SURFeU5TNHdNRGNzTWpNdU1EVTRJRU14TWpjdU16STFMREl6TGpBMU9DQXhNamt1TlRBMkxESXpMalU0TVNBeE16RXVNVFVzTWpRdU5UTWdRekV6TWk0NE5UUXNNalV1TlRFMElERXpNeTQzT1RNc01qWXVPRFExSURFek15NDNPVE1zTWpndU1qYzRJRU14TXpNdU56a3pMREk1TGpjeU5DQXhNekl1T0RReExETXhMakEyT1NBeE16RXVNVEV6TERNeUxqQTJOeUJNTVRFNUxqQTNNU3d6T1M0d01Ua2dRekV4Tnk0ME1ETXNNemt1T1RneUlERXhOUzR4T1Rjc05EQXVOVEV5SURFeE1pNDROaXcwTUM0MU1USWdUREV4TWk0NE5pdzBNQzQxTVRJZ1dpQk5NVEkxTGpBd055d3lNeTQzTlRrZ1F6RXlNaTQzT1N3eU15NDNOVGtnTVRJd0xqY3dPU3d5TkM0eU5UWWdNVEU1TGpFME5pd3lOUzR4TlRnZ1RERXdOeTR4TURRc016SXVNVEVnUXpFd05TNDJNRElzTXpJdU9UYzRJREV3TkM0M056UXNNelF1TVRBNElERXdOQzQzTnpRc016VXVNamt5SUVNeE1EUXVOemMwTERNMkxqUTJOU0F4TURVdU5UZzVMRE0zTGpVNE1TQXhNRGN1TURZM0xETTRMalF6TkNCRE1UQTRMall3TlN3ek9TNHpNak1nTVRFd0xqWTJNeXd6T1M0NE1USWdNVEV5TGpnMU9Td3pPUzQ0TVRJZ1RERXhNaTQ0Tml3ek9TNDRNVElnUXpFeE5TNHdOellzTXprdU9ERXlJREV4Tnk0eE5UZ3NNemt1TXpFMUlERXhPQzQzTWpFc016Z3VOREV6SUV3eE16QXVOell5TERNeExqUTJJRU14TXpJdU1qWTBMRE13TGpVNU15QXhNek11TURreUxESTVMalEyTXlBeE16TXVNRGt5TERJNExqSTNPQ0JETVRNekxqQTVNaXd5Tnk0eE1EWWdNVE15TGpJM09Dd3lOUzQ1T1NBeE16QXVPQ3d5TlM0eE16WWdRekV5T1M0eU5qRXNNalF1TWpRNElERXlOeTR5TURRc01qTXVOelU1SURFeU5TNHdNRGNzTWpNdU56VTVJRXd4TWpVdU1EQTNMREl6TGpjMU9TQmFJaUJwWkQwaVJtbHNiQzB6TUNJZ1ptbHNiRDBpSXpZd04wUTRRaUkrUEM5d1lYUm9QZ29nSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUR4d1lYUm9JR1E5SWsweE5qVXVOak1zTVRZdU1qRTVJRXd4TlRrdU9EazJMREU1TGpVeklFTXhOVFl1TnpJNUxESXhMak0xT0NBeE5URXVOakVzTWpFdU16WTNJREUwT0M0ME5qTXNNVGt1TlRVZ1F6RTBOUzR6TVRZc01UY3VOek16SURFME5TNHpNeklzTVRRdU56YzRJREUwT0M0ME9Ua3NNVEl1T1RRNUlFd3hOVFF1TWpNekxEa3VOak01SUV3eE5qVXVOak1zTVRZdU1qRTVJaUJwWkQwaVJtbHNiQzB6TVNJZ1ptbHNiRDBpSTBaQlJrRkdRU0krUEM5d1lYUm9QZ29nSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUR4d1lYUm9JR1E5SWsweE5UUXVNak16TERFd0xqUTBPQ0JNTVRZMExqSXlPQ3d4Tmk0eU1Ua2dUREUxT1M0MU5EWXNNVGd1T1RJeklFTXhOVGd1TVRFeUxERTVMamMxSURFMU5pNHhPVFFzTWpBdU1qQTJJREUxTkM0eE5EY3NNakF1TWpBMklFTXhOVEl1TVRFNExESXdMakl3TmlBeE5UQXVNakkwTERFNUxqYzFOeUF4TkRndU9ERTBMREU0TGprME15QkRNVFEzTGpVeU5Dd3hPQzR4T1RrZ01UUTJMamd4TkN3eE55NHlORGtnTVRRMkxqZ3hOQ3d4Tmk0eU5qa2dRekUwTmk0NE1UUXNNVFV1TWpjNElERTBOeTQxTXpjc01UUXVNekUwSURFME9DNDROU3d4TXk0MU5UWWdUREUxTkM0eU16TXNNVEF1TkRRNElFMHhOVFF1TWpNekxEa3VOak01SUV3eE5EZ3VORGs1TERFeUxqazBPU0JETVRRMUxqTXpNaXd4TkM0M056Z2dNVFExTGpNeE5pd3hOeTQzTXpNZ01UUTRMalEyTXl3eE9TNDFOU0JETVRVd0xqQXpNU3d5TUM0ME5UVWdNVFV5TGpBNE5pd3lNQzQ1TURjZ01UVTBMakUwTnl3eU1DNDVNRGNnUXpFMU5pNHlNalFzTWpBdU9UQTNJREUxT0M0ek1EWXNNakF1TkRRM0lERTFPUzQ0T1RZc01Ua3VOVE1nVERFMk5TNDJNeXd4Tmk0eU1Ua2dUREUxTkM0eU16TXNPUzQyTXpraUlHbGtQU0pHYVd4c0xUTXlJaUJtYVd4c1BTSWpOakEzUkRoQ0lqNDhMM0JoZEdnK0NpQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdQSEJoZEdnZ1pEMGlUVEUwTlM0ME5EVXNOekl1TmpZM0lFd3hORFV1TkRRMUxEY3lMalkyTnlCRE1UUXpMalkzTWl3M01pNDJOamNnTVRReUxqSXdOQ3czTVM0NE1UY2dNVFF4TGpJd01pdzNNQzQwTWpJZ1F6RTBNUzR4TXpVc056QXVNek1nTVRReExqRTBOU3czTUM0eE5EY2dNVFF4TGpJeU5TdzNNQzR3TmpZZ1F6RTBNUzR6TURVc05qa3VPVGcxSURFME1TNDBNeklzTmprdU9UUTJJREUwTVM0MU1qVXNOekF1TURFeElFTXhOREl1TXpBMkxEY3dMalUxT1NBeE5ETXVNak14TERjd0xqZ3lNeUF4TkRRdU1qYzJMRGN3TGpneU1pQkRNVFExTGpVNU9DdzNNQzQ0TWpJZ01UUTNMakF6TERjd0xqTTNOaUF4TkRndU5UTXlMRFk1TGpVd09TQkRNVFV6TGpnME1pdzJOaTQwTkRNZ01UVTRMakUyTXl3MU9DNDVPRGNnTVRVNExqRTJNeXcxTWk0NE9UUWdRekUxT0M0eE5qTXNOVEF1T1RZM0lERTFOeTQzTWpFc05Ea3VNek15SURFMU5pNDRPRFFzTkRndU1UWTRJRU14TlRZdU9ERTRMRFE0TGpBM05pQXhOVFl1T0RJNExEUTNMamswT0NBeE5UWXVPVEE0TERRM0xqZzJOeUJETVRVMkxqazRPQ3cwTnk0M09EWWdNVFUzTGpFeE5DdzBOeTQzTnpRZ01UVTNMakl3T0N3ME55NDROQ0JETVRVNExqZzNPQ3cwT1M0d01USWdNVFU1TGpjNU9DdzFNUzR5TWlBeE5Ua3VOems0TERVMExqQTFPU0JETVRVNUxqYzVPQ3cyTUM0ek1ERWdNVFUxTGpNM015dzJPQzR3TkRZZ01UUTVMamt6TXl3M01TNHhPRFlnUXpFME9DNHpOaXczTWk0d09UUWdNVFEyTGpnMUxEY3lMalkyTnlBeE5EVXVORFExTERjeUxqWTJOeUJNTVRRMUxqUTBOU3czTWk0Mk5qY2dXaUJOTVRReUxqUTNOaXczTVNCRE1UUXpMakk1TERjeExqWTFNU0F4TkRRdU1qazJMRGN5TGpBd01pQXhORFV1TkRRMUxEY3lMakF3TWlCRE1UUTJMamMyTnl3M01pNHdNRElnTVRRNExqRTVPQ3czTVM0MU5TQXhORGt1Tnl3M01DNDJPRElnUXpFMU5TNHdNU3cyTnk0Mk1UY2dNVFU1TGpNek1TdzJNQzR4TlRrZ01UVTVMak16TVN3MU5DNHdOalVnUXpFMU9TNHpNekVzTlRJdU1EZzFJREUxT0M0NE5qZ3NOVEF1TkRNMUlERTFPQzR3TURZc05Ea3VNamN5SUVNeE5UZ3VOREUzTERVd0xqTXdOeUF4TlRndU5qTXNOVEV1TlRNeUlERTFPQzQyTXl3MU1pNDRPVElnUXpFMU9DNDJNeXcxT1M0eE16UWdNVFUwTGpJd05TdzJOaTQzTmpjZ01UUTRMamMyTlN3Mk9TNDVNRGNnUXpFME55NHhPVElzTnpBdU9ERTJJREUwTlM0Mk9ERXNOekV1TWpneklERTBOQzR5TnpZc056RXVNamd6SUVNeE5ETXVOak0wTERjeExqSTRNeUF4TkRNdU1ETXpMRGN4TGpFNU1pQXhOREl1TkRjMkxEY3hJRXd4TkRJdU5EYzJMRGN4SUZvaUlHbGtQU0pHYVd4c0xUTXpJaUJtYVd4c1BTSWpOakEzUkRoQ0lqNDhMM0JoZEdnK0NpQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdQSEJoZEdnZ1pEMGlUVEUwT0M0Mk5EZ3NOamt1TnpBMElFTXhOVFF1TURNeUxEWTJMalU1TmlBeE5UZ3VNemsyTERVNUxqQTJPQ0F4TlRndU16azJMRFV5TGpnNU1TQkRNVFU0TGpNNU5pdzFNQzQ0TXprZ01UVTNMamt4TXl3ME9TNHhPVGdnTVRVM0xqQTNOQ3cwT0M0d015QkRNVFUxTGpJNE9TdzBOaTQzTnpnZ01UVXlMalk1T1N3ME5pNDRNellnTVRRNUxqZ3hOaXcwT0M0MU1ERWdRekUwTkM0ME16TXNOVEV1TmpBNUlERTBNQzR3Tmpnc05Ua3VNVE0zSURFME1DNHdOamdzTmpVdU16RTBJRU14TkRBdU1EWTRMRFkzTGpNMk5TQXhOREF1TlRVeUxEWTVMakF3TmlBeE5ERXVNemt4TERjd0xqRTNOQ0JETVRRekxqRTNOaXczTVM0ME1qY2dNVFExTGpjMk5TdzNNUzR6TmprZ01UUTRMalkwT0N3Mk9TNDNNRFFpSUdsa1BTSkdhV3hzTFRNMElpQm1hV3hzUFNJalJrRkdRVVpCSWo0OEwzQmhkR2crQ2lBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ1BIQmhkR2dnWkQwaVRURTBOQzR5TnpZc056RXVNamMySUV3eE5EUXVNamMyTERjeExqSTNOaUJETVRRekxqRXpNeXczTVM0eU56WWdNVFF5TGpFeE9DdzNNQzQ1TmprZ01UUXhMakkxTnl3M01DNHpOalVnUXpFME1TNHlNellzTnpBdU16VXhJREUwTVM0eU1UY3NOekF1TXpNeUlERTBNUzR5TURJc056QXVNekV4SUVNeE5EQXVNekEzTERZNUxqQTJOeUF4TXprdU9ETTFMRFkzTGpNek9TQXhNemt1T0RNMUxEWTFMak14TkNCRE1UTTVMamd6TlN3MU9TNHdOek1nTVRRMExqSTJMRFV4TGpRek9TQXhORGt1Tnl3ME9DNHlPVGdnUXpFMU1TNHlOek1zTkRjdU16a2dNVFV5TGpjNE5DdzBOaTQ1TWprZ01UVTBMakU0T1N3ME5pNDVNamtnUXpFMU5TNHpNeklzTkRZdU9USTVJREUxTmk0ek5EY3NORGN1TWpNMklERTFOeTR5TURnc05EY3VPRE01SUVNeE5UY3VNakk1TERRM0xqZzFOQ0F4TlRjdU1qUTRMRFEzTGpnM015QXhOVGN1TWpZekxEUTNMamc1TkNCRE1UVTRMakUxTnl3ME9TNHhNemdnTVRVNExqWXpMRFV3TGpnMk5TQXhOVGd1TmpNc05USXVPRGt4SUVNeE5UZ3VOak1zTlRrdU1UTXlJREUxTkM0eU1EVXNOall1TnpZMklERTBPQzQzTmpVc05qa3VPVEEzSUVNeE5EY3VNVGt5TERjd0xqZ3hOU0F4TkRVdU5qZ3hMRGN4TGpJM05pQXhORFF1TWpjMkxEY3hMakkzTmlCTU1UUTBMakkzTml3M01TNHlOellnV2lCTk1UUXhMalUxT0N3M01DNHhNRFFnUXpFME1pNHpNekVzTnpBdU5qTTNJREUwTXk0eU5EVXNOekV1TURBMUlERTBOQzR5TnpZc056RXVNREExSUVNeE5EVXVOVGs0TERjeExqQXdOU0F4TkRjdU1ETXNOekF1TkRZM0lERTBPQzQxTXpJc05qa3VOaUJETVRVekxqZzBNaXcyTmk0MU16UWdNVFU0TGpFMk15dzFPUzR3TXpNZ01UVTRMakUyTXl3MU1pNDVNemtnUXpFMU9DNHhOak1zTlRFdU1ETXhJREUxTnk0M01qa3NORGt1TXpnMUlERTFOaTQ1TURjc05EZ3VNakl6SUVNeE5UWXVNVE16TERRM0xqWTVNU0F4TlRVdU1qRTVMRFEzTGpRd09TQXhOVFF1TVRnNUxEUTNMalF3T1NCRE1UVXlMamcyTnl3ME55NDBNRGtnTVRVeExqUXpOU3cwTnk0NE5ESWdNVFE1TGprek15dzBPQzQzTURrZ1F6RTBOQzQyTWpNc05URXVOemMxSURFME1DNHpNRElzTlRrdU1qY3pJREUwTUM0ek1ESXNOalV1TXpZMklFTXhOREF1TXpBeUxEWTNMakkzTmlBeE5EQXVOek0yTERZNExqazBNaUF4TkRFdU5UVTRMRGN3TGpFd05DQk1NVFF4TGpVMU9DdzNNQzR4TURRZ1dpSWdhV1E5SWtacGJHd3RNelVpSUdacGJHdzlJaU0yTURkRU9FSWlQand2Y0dGMGFENEtJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0E4Y0dGMGFDQmtQU0pOTVRVd0xqY3lMRFkxTGpNMk1TQk1NVFV3TGpNMU55dzJOUzR3TmpZZ1F6RTFNUzR4TkRjc05qUXVNRGt5SURFMU1TNDROamtzTmpNdU1EUWdNVFV5TGpVd05TdzJNUzQ1TXpnZ1F6RTFNeTR6TVRNc05qQXVOVE01SURFMU15NDVOemdzTlRrdU1EWTNJREUxTkM0ME9ESXNOVGN1TlRZeklFd3hOVFF1T1RJMUxEVTNMamN4TWlCRE1UVTBMalF4TWl3MU9TNHlORFVnTVRVekxqY3pNeXcyTUM0M05EVWdNVFV5TGpreExEWXlMakUzTWlCRE1UVXlMakkyTWl3Mk15NHlPVFVnTVRVeExqVXlOU3cyTkM0ek5qZ2dNVFV3TGpjeUxEWTFMak0yTVNJZ2FXUTlJa1pwYkd3dE16WWlJR1pwYkd3OUlpTTJNRGRFT0VJaVBqd3ZjR0YwYUQ0S0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQThjR0YwYUNCa1BTSk5NVEUxTGpreE55dzROQzQxTVRRZ1RERXhOUzQxTlRRc09EUXVNaklnUXpFeE5pNHpORFFzT0RNdU1qUTFJREV4Tnk0d05qWXNPREl1TVRrMElERXhOeTQzTURJc09ERXVNRGt5SUVNeE1UZ3VOVEVzTnprdU5qa3lJREV4T1M0eE56VXNOemd1TWpJZ01URTVMalkzT0N3M05pNDNNVGNnVERFeU1DNHhNakVzTnpZdU9EWTFJRU14TVRrdU5qQTRMRGM0TGpNNU9DQXhNVGd1T1RNc056a3VPRGs1SURFeE9DNHhNRFlzT0RFdU16STJJRU14TVRjdU5EVTRMRGd5TGpRME9DQXhNVFl1TnpJeUxEZ3pMalV5TVNBeE1UVXVPVEUzTERnMExqVXhOQ0lnYVdROUlrWnBiR3d0TXpjaUlHWnBiR3c5SWlNMk1EZEVPRUlpUGp3dmNHRjBhRDRLSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBOGNHRjBhQ0JrUFNKTk1URTBMREV6TUM0ME56WWdUREV4TkN3eE16QXVNREE0SUV3eE1UUXNOell1TURVeUlFd3hNVFFzTnpVdU5UZzBJRXd4TVRRc056WXVNRFV5SUV3eE1UUXNNVE13TGpBd09DQk1NVEUwTERFek1DNDBOellpSUdsa1BTSkdhV3hzTFRNNElpQm1hV3hzUFNJak5qQTNSRGhDSWo0OEwzQmhkR2crQ2lBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0E4TDJjK0NpQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBOFp5QnBaRDBpU1cxd2IzSjBaV1F0VEdGNVpYSnpMVU52Y0hraUlIUnlZVzV6Wm05eWJUMGlkSEpoYm5Oc1lYUmxLRFl5TGpBd01EQXdNQ3dnTUM0d01EQXdNREFwSWlCemEyVjBZMmc2ZEhsd1pUMGlUVk5UYUdGd1pVZHliM1Z3SWo0S0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQThjR0YwYUNCa1BTSk5NVGt1T0RJeUxETTNMalEzTkNCRE1Ua3VPRE01TERNM0xqTXpPU0F4T1M0M05EY3NNemN1TVRrMElERTVMalUxTlN3ek55NHdPRElnUXpFNUxqSXlPQ3d6Tmk0NE9UUWdNVGd1TnpJNUxETTJMamczTWlBeE9DNDBORFlzTXpjdU1ETTNJRXd4TWk0ME16UXNOREF1TlRBNElFTXhNaTR6TURNc05EQXVOVGcwSURFeUxqSTBMRFF3TGpZNE5pQXhNaTR5TkRNc05EQXVOemt6SUVNeE1pNHlORFVzTkRBdU9USTFJREV5TGpJME5TdzBNUzR5TlRRZ01USXVNalExTERReExqTTNNU0JNTVRJdU1qUTFMRFF4TGpReE5DQk1NVEl1TWpNNExEUXhMalUwTWlCRE9DNHhORGdzTkRNdU9EZzNJRFV1TmpRM0xEUTFMak15TVNBMUxqWTBOeXcwTlM0ek1qRWdRelV1TmpRMkxEUTFMak15TVNBekxqVTNMRFEyTGpNMk55QXlMamcyTERVd0xqVXhNeUJETWk0NE5pdzFNQzQxTVRNZ01TNDVORGdzTlRjdU5EYzBJREV1T1RZeUxEY3dMakkxT0NCRE1TNDVOemNzT0RJdU9ESTRJREl1TlRZNExEZzNMak15T0NBekxqRXlPU3c1TVM0Mk1Ea2dRek11TXpRNUxEa3pMakk1TXlBMkxqRXpMRGt6TGpjek5DQTJMakV6TERrekxqY3pOQ0JETmk0ME5qRXNPVE11TnpjMElEWXVPREk0TERrekxqY3dOeUEzTGpJeExEa3pMalE0TmlCTU9ESXVORGd6TERRNUxqa3pOU0JET0RRdU1qa3hMRFE0TGpnMk5pQTROUzR4TlN3ME5pNHlNVFlnT0RVdU5UTTVMRFF6TGpZMU1TQkRPRFl1TnpVeUxETTFMalkyTVNBNE55NHlNVFFzTVRBdU5qY3pJRGcxTGpJMk5Dd3pMamMzTXlCRE9EVXVNRFk0TERNdU1EZ2dPRFF1TnpVMExESXVOamtnT0RRdU16azJMREl1TkRreElFdzRNaTR6TVN3eExqY3dNU0JET0RFdU5UZ3pMREV1TnpJNUlEZ3dMamc1TkN3eUxqRTJPQ0E0TUM0M056WXNNaTR5TXpZZ1F6Z3dMall6Tml3eUxqTXhOeUEwTVM0NE1EY3NNalF1TlRnMUlESXdMakF6TWl3ek55NHdOeklnVERFNUxqZ3lNaXd6Tnk0ME56UWlJR2xrUFNKR2FXeHNMVEVpSUdacGJHdzlJaU5HUmtaR1JrWWlQand2Y0dGMGFENEtJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0E4Y0dGMGFDQmtQU0pOT0RJdU16RXhMREV1TnpBeElFdzROQzR6T1RZc01pNDBPVEVnUXpnMExqYzFOQ3d5TGpZNUlEZzFMakEyT0N3ekxqQTRJRGcxTGpJMk5Dd3pMamMzTXlCRE9EY3VNakV6TERFd0xqWTNNeUE0Tmk0M05URXNNelV1TmpZZ09EVXVOVE01TERRekxqWTFNU0JET0RVdU1UUTVMRFEyTGpJeE5pQTROQzR5T1N3ME9DNDROallnT0RJdU5EZ3pMRFE1TGprek5TQk1OeTR5TVN3NU15NDBPRFlnUXpZdU9EazNMRGt6TGpZMk55QTJMalU1TlN3NU15NDNORFFnTmk0ek1UUXNPVE11TnpRMElFdzJMakV6TVN3NU15NDNNek1nUXpZdU1UTXhMRGt6TGpjek5DQXpMak0wT1N3NU15NHlPVE1nTXk0eE1qZ3NPVEV1TmpBNUlFTXlMalUyT0N3NE55NHpNamNnTVM0NU56Y3NPREl1T0RJNElERXVPVFl6TERjd0xqSTFPQ0JETVM0NU5EZ3NOVGN1TkRjMElESXVPRFlzTlRBdU5URXpJREl1T0RZc05UQXVOVEV6SUVNekxqVTNMRFEyTGpNMk55QTFMalkwTnl3ME5TNHpNakVnTlM0Mk5EY3NORFV1TXpJeElFTTFMalkwTnl3ME5TNHpNakVnT0M0eE5EZ3NORE11T0RnM0lERXlMakl6T0N3ME1TNDFORElnVERFeUxqSTBOU3cwTVM0ME1UUWdUREV5TGpJME5TdzBNUzR6TnpFZ1F6RXlMakkwTlN3ME1TNHlOVFFnTVRJdU1qUTFMRFF3TGpreU5TQXhNaTR5TkRNc05EQXVOemt6SUVNeE1pNHlOQ3cwTUM0Mk9EWWdNVEl1TXpBeUxEUXdMalU0TXlBeE1pNDBNelFzTkRBdU5UQTRJRXd4T0M0ME5EWXNNemN1TURNMklFTXhPQzQxTnpRc016WXVPVFl5SURFNExqYzBOaXd6Tmk0NU1qWWdNVGd1T1RJM0xETTJMamt5TmlCRE1Ua3VNVFExTERNMkxqa3lOaUF4T1M0ek56WXNNell1T1RjNUlERTVMalUxTkN3ek55NHdPRElnUXpFNUxqYzBOeXd6Tnk0eE9UUWdNVGt1T0RNNUxETTNMak0wSURFNUxqZ3lNaXd6Tnk0ME56UWdUREl3TGpBek15d3pOeTR3TnpJZ1F6UXhMamd3Tml3eU5DNDFPRFVnT0RBdU5qTTJMREl1TXpFNElEZ3dMamMzTnl3eUxqSXpOaUJET0RBdU9EazBMREl1TVRZNElEZ3hMalU0TXl3eExqY3lPU0E0TWk0ek1URXNNUzQzTURFZ1RUZ3lMak14TVN3d0xqY3dOQ0JNT0RJdU1qY3lMREF1TnpBMUlFTTRNUzQyTlRRc01DNDNNamdnT0RBdU9UZzVMREF1T1RRNUlEZ3dMakk1T0N3eExqTTJNU0JNT0RBdU1qYzNMREV1TXpjeklFTTRNQzR4TWprc01TNDBOVGdnTlRrdU56WTRMREV6TGpFek5TQXhPUzQzTlRnc016WXVNRGM1SUVNeE9TNDFMRE0xTGprNE1TQXhPUzR5TVRRc016VXVPVEk1SURFNExqa3lOeXd6TlM0NU1qa2dRekU0TGpVMk1pd3pOUzQ1TWprZ01UZ3VNakl6TERNMkxqQXhNeUF4Tnk0NU5EY3NNell1TVRjeklFd3hNUzQ1TXpVc016a3VOalEwSUVNeE1TNDBPVE1zTXprdU9EazVJREV4TGpJek5pdzBNQzR6TXpRZ01URXVNalEyTERRd0xqZ3hJRXd4TVM0eU5EY3NOREF1T1RZZ1REVXVNVFkzTERRMExqUTBOeUJETkM0M09UUXNORFF1TmpRMklESXVOakkxTERRMUxqazNPQ0F4TGpnM055dzFNQzR6TkRVZ1RERXVPRGN4TERVd0xqTTROQ0JETVM0NE5qSXNOVEF1TkRVMElEQXVPVFV4TERVM0xqVTFOeUF3TGprMk5TdzNNQzR5TlRrZ1F6QXVPVGM1TERneUxqZzNPU0F4TGpVMk9DdzROeTR6TnpVZ01pNHhNemNzT1RFdU56STBJRXd5TGpFek9TdzVNUzQzTXprZ1F6SXVORFEzTERrMExqQTVOQ0ExTGpZeE5DdzVOQzQyTmpJZ05TNDVOelVzT1RRdU56RTVJRXcyTGpBd09TdzVOQzQzTWpNZ1F6WXVNVEVzT1RRdU56TTJJRFl1TWpFekxEazBMamMwTWlBMkxqTXhOQ3c1TkM0M05ESWdRell1Tnprc09UUXVOelF5SURjdU1qWXNPVFF1TmpFZ055NDNNU3c1TkM0ek5TQk1PREl1T1RnekxEVXdMamM1T0NCRE9EUXVOemswTERRNUxqY3lOeUE0TlM0NU9ESXNORGN1TXpjMUlEZzJMalV5TlN3ME15NDRNREVnUXpnM0xqY3hNU3d6TlM0NU9EY2dPRGd1TWpVNUxERXdMamN3TlNBNE5pNHlNalFzTXk0MU1ESWdRemcxTGprM01Td3lMall3T1NBNE5TNDFNaXd4TGprM05TQTROQzQ0T0RFc01TNDJNaUJNT0RRdU56UTVMREV1TlRVNElFdzRNaTQyTmpRc01DNDNOamtnUXpneUxqVTFNU3d3TGpjeU5TQTRNaTQwTXpFc01DNDNNRFFnT0RJdU16RXhMREF1TnpBMElpQnBaRDBpUm1sc2JDMHlJaUJtYVd4c1BTSWpORFUxUVRZMElqNDhMM0JoZEdnK0NpQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdQSEJoZEdnZ1pEMGlUVFkyTGpJMk55d3hNUzQxTmpVZ1REWTNMamMyTWl3eE1TNDVPVGtnVERFeExqUXlNeXcwTkM0ek1qVWlJR2xrUFNKR2FXeHNMVE1pSUdacGJHdzlJaU5HUmtaR1JrWWlQand2Y0dGMGFENEtJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0E4Y0dGMGFDQmtQU0pOTVRJdU1qQXlMRGt3TGpVME5TQkRNVEl1TURJNUxEa3dMalUwTlNBeE1TNDROaklzT1RBdU5EVTFJREV4TGpjMk9TdzVNQzR5T1RVZ1F6RXhMall6TWl3NU1DNHdOVGNnTVRFdU56RXpMRGc1TGpjMU1pQXhNUzQ1TlRJc09Ea3VOakUwSUV3ek1DNHpPRGtzTnpndU9UWTVJRU16TUM0Mk1qZ3NOemd1T0RNeElETXdMamt6TXl3M09DNDVNVE1nTXpFdU1EY3hMRGM1TGpFMU1pQkRNekV1TWpBNExEYzVMak01SURNeExqRXlOeXczT1M0Mk9UWWdNekF1T0RnNExEYzVMamd6TXlCTU1USXVORFV4TERrd0xqUTNPQ0JNTVRJdU1qQXlMRGt3TGpVME5TSWdhV1E5SWtacGJHd3ROQ0lnWm1sc2JEMGlJell3TjBRNFFpSStQQzl3WVhSb1Bnb2dJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJRHh3WVhSb0lHUTlJazB4TXk0M05qUXNOREl1TmpVMElFd3hNeTQyTlRZc05ESXVOVGt5SUV3eE15NDNNRElzTkRJdU5ESXhJRXd4T0M0NE16Y3NNemt1TkRVM0lFd3hPUzR3TURjc016a3VOVEF5SUV3eE9DNDVOaklzTXprdU5qY3pJRXd4TXk0NE1qY3NOREl1TmpNM0lFd3hNeTQzTmpRc05ESXVOalUwSWlCcFpEMGlSbWxzYkMwMUlpQm1hV3hzUFNJak5qQTNSRGhDSWo0OEwzQmhkR2crQ2lBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ1BIQmhkR2dnWkQwaVRUZ3VOVElzT1RBdU16YzFJRXc0TGpVeUxEUTJMalF5TVNCTU9DNDFPRE1zTkRZdU16ZzFJRXczTlM0NE5DdzNMalUxTkNCTU56VXVPRFFzTlRFdU5UQTRJRXczTlM0M056Z3NOVEV1TlRRMElFdzRMalV5TERrd0xqTTNOU0JNT0M0MU1pdzVNQzR6TnpVZ1dpQk5PQzQzTnl3ME5pNDFOalFnVERndU56Y3NPRGt1T1RRMElFdzNOUzQxT1RFc05URXVNelkxSUV3M05TNDFPVEVzTnk0NU9EVWdURGd1Tnpjc05EWXVOVFkwSUV3NExqYzNMRFEyTGpVMk5DQmFJaUJwWkQwaVJtbHNiQzAySWlCbWFXeHNQU0lqTmpBM1JEaENJajQ4TDNCaGRHZytDaUFnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnUEhCaGRHZ2daRDBpVFRJMExqazROaXc0TXk0eE9ESWdRekkwTGpjMU5pdzRNeTR6TXpFZ01qUXVNemMwTERnekxqVTJOaUF5TkM0eE16Y3NPRE11TnpBMUlFd3hNaTQyTXpJc09UQXVOREEySUVNeE1pNHpPVFVzT1RBdU5UUTFJREV5TGpReU5pdzVNQzQyTlRnZ01USXVOeXc1TUM0Mk5UZ2dUREV6TGpJMk5TdzVNQzQyTlRnZ1F6RXpMalUwTERrd0xqWTFPQ0F4TXk0NU5UZ3NPVEF1TlRRMUlERTBMakU1TlN3NU1DNDBNRFlnVERJMUxqY3NPRE11TnpBMUlFTXlOUzQ1TXpjc09ETXVOVFkySURJMkxqRXlPQ3c0TXk0ME5USWdNall1TVRJMUxEZ3pMalEwT1NCRE1qWXVNVEl5TERnekxqUTBOeUF5Tmk0eE1Ua3NPRE11TWpJZ01qWXVNVEU1TERneUxqazBOaUJETWpZdU1URTVMRGd5TGpZM01pQXlOUzQ1TXpFc09ESXVOVFk1SURJMUxqY3dNU3c0TWk0M01Ua2dUREkwTGprNE5pdzRNeTR4T0RJaUlHbGtQU0pHYVd4c0xUY2lJR1pwYkd3OUlpTTJNRGRFT0VJaVBqd3ZjR0YwYUQ0S0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQThjR0YwYUNCa1BTSk5NVE11TWpZMkxEa3dMamM0TWlCTU1USXVOeXc1TUM0M09ESWdRekV5TGpVc09UQXVOemd5SURFeUxqTTROQ3c1TUM0M01qWWdNVEl1TXpVMExEa3dMall4TmlCRE1USXVNekkwTERrd0xqVXdOaUF4TWk0ek9UY3NPVEF1TXprNUlERXlMalUyT1N3NU1DNHlPVGtnVERJMExqQTNOQ3c0TXk0MU9UY2dRekkwTGpNeExEZ3pMalExT1NBeU5DNDJPRGtzT0RNdU1qSTJJREkwTGpreE9DdzRNeTR3TnpnZ1RESTFMall6TXl3NE1pNDJNVFFnUXpJMUxqY3lNeXc0TWk0MU5UVWdNalV1T0RFekxEZ3lMalV5TlNBeU5TNDRPVGtzT0RJdU5USTFJRU15Tmk0d056RXNPREl1TlRJMUlESTJMakkwTkN3NE1pNDJOVFVnTWpZdU1qUTBMRGd5TGprME5pQkRNall1TWpRMExEZ3pMakUySURJMkxqSTBOU3c0TXk0ek1Ea2dNall1TWpRM0xEZ3pMak00TXlCTU1qWXVNalV6TERnekxqTTROeUJNTWpZdU1qUTVMRGd6TGpRMU5pQkRNall1TWpRMkxEZ3pMalV6TVNBeU5pNHlORFlzT0RNdU5UTXhJREkxTGpjMk15dzRNeTQ0TVRJZ1RERTBMakkxT0N3NU1DNDFNVFFnUXpFMExEa3dMalkyTlNBeE15NDFOalFzT1RBdU56Z3lJREV6TGpJMk5pdzVNQzQzT0RJZ1RERXpMakkyTml3NU1DNDNPRElnV2lCTk1USXVOalkyTERrd0xqVXpNaUJNTVRJdU55dzVNQzQxTXpNZ1RERXpMakkyTml3NU1DNDFNek1nUXpFekxqVXhPQ3c1TUM0MU16TWdNVE11T1RFMUxEa3dMalF5TlNBeE5DNHhNeklzT1RBdU1qazVJRXd5TlM0Mk16Y3NPRE11TlRrM0lFTXlOUzQ0TURVc09ETXVORGs1SURJMUxqa3pNU3c0TXk0ME1qUWdNalV1T1RrNExEZ3pMak00TXlCRE1qVXVPVGswTERnekxqSTVPU0F5TlM0NU9UUXNPRE11TVRZMUlESTFMams1TkN3NE1pNDVORFlnVERJMUxqZzVPU3c0TWk0M056VWdUREkxTGpjMk9DdzRNaTQ0TWpRZ1RESTFMakExTkN3NE15NHlPRGNnUXpJMExqZ3lNaXc0TXk0ME16Y2dNalF1TkRNNExEZ3pMalkzTXlBeU5DNHlMRGd6TGpneE1pQk1NVEl1TmprMUxEa3dMalV4TkNCTU1USXVOalkyTERrd0xqVXpNaUJNTVRJdU5qWTJMRGt3TGpVek1pQmFJaUJwWkQwaVJtbHNiQzA0SWlCbWFXeHNQU0lqTmpBM1JEaENJajQ4TDNCaGRHZytDaUFnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnUEhCaGRHZ2daRDBpVFRFekxqSTJOaXc0T1M0NE56RWdUREV5TGpjc09Ea3VPRGN4SUVNeE1pNDFMRGc1TGpnM01TQXhNaTR6T0RRc09Ea3VPREUxSURFeUxqTTFOQ3c0T1M0M01EVWdRekV5TGpNeU5DdzRPUzQxT1RVZ01USXVNemszTERnNUxqUTRPQ0F4TWk0MU5qa3NPRGt1TXpnNElFd3lOQzR3TnpRc09ESXVOamcySUVNeU5DNHpNeklzT0RJdU5UTTFJREkwTGpjMk9DdzRNaTQwTVRnZ01qVXVNRFkzTERneUxqUXhPQ0JNTWpVdU5qTXlMRGd5TGpReE9DQkRNalV1T0RNeUxEZ3lMalF4T0NBeU5TNDVORGdzT0RJdU5EYzBJREkxTGprM09DdzRNaTQxT0RRZ1F6STJMakF3T0N3NE1pNDJPVFFnTWpVdU9UTTFMRGd5TGpnd01TQXlOUzQzTmpNc09ESXVPVEF4SUV3eE5DNHlOVGdzT0RrdU5qQXpJRU14TkN3NE9TNDNOVFFnTVRNdU5UWTBMRGc1TGpnM01TQXhNeTR5TmpZc09Ea3VPRGN4SUV3eE15NHlOallzT0RrdU9EY3hJRm9nVFRFeUxqWTJOaXc0T1M0Mk1qRWdUREV5TGpjc09Ea3VOakl5SUV3eE15NHlOallzT0RrdU5qSXlJRU14TXk0MU1UZ3NPRGt1TmpJeUlERXpMamt4TlN3NE9TNDFNVFVnTVRRdU1UTXlMRGc1TGpNNE9DQk1NalV1TmpNM0xEZ3lMalk0TmlCTU1qVXVOalkzTERneUxqWTJPQ0JNTWpVdU5qTXlMRGd5TGpZMk55Qk1NalV1TURZM0xEZ3lMalkyTnlCRE1qUXVPREUxTERneUxqWTJOeUF5TkM0ME1UZ3NPREl1TnpjMUlESTBMaklzT0RJdU9UQXhJRXd4TWk0Mk9UVXNPRGt1TmpBeklFd3hNaTQyTmpZc09Ea3VOakl4SUV3eE1pNDJOallzT0RrdU5qSXhJRm9pSUdsa1BTSkdhV3hzTFRraUlHWnBiR3c5SWlNMk1EZEVPRUlpUGp3dmNHRjBhRDRLSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBOGNHRjBhQ0JrUFNKTk1USXVNemNzT1RBdU9EQXhJRXd4TWk0ek55dzRPUzQxTlRRZ1RERXlMak0zTERrd0xqZ3dNU0lnYVdROUlrWnBiR3d0TVRBaUlHWnBiR3c5SWlNMk1EZEVPRUlpUGp3dmNHRjBhRDRLSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBOGNHRjBhQ0JrUFNKTk5pNHhNeXc1TXk0NU1ERWdRelV1TXpjNUxEa3pMamd3T0NBMExqZ3hOaXc1TXk0eE5qUWdOQzQyT1RFc09USXVOVEkxSUVNekxqZzJMRGc0TGpJNE55QXpMalUwTERnekxqYzBNeUF6TGpVeU5pdzNNUzR4TnpNZ1F6TXVOVEV4TERVNExqTTRPU0EwTGpReU15dzFNUzQwTWpnZ05DNDBNak1zTlRFdU5ESTRJRU0xTGpFek5DdzBOeTR5T0RJZ055NHlNU3cwTmk0eU16WWdOeTR5TVN3ME5pNHlNellnUXpjdU1qRXNORFl1TWpNMklEZ3hMalkyTnl3ekxqSTFJRGd5TGpBMk9Td3pMakF4TnlCRE9ESXVNamt5TERJdU9EZzRJRGcwTGpVMU5pd3hMalF6TXlBNE5TNHlOalFzTXk0NU5DQkRPRGN1TWpFMExERXdMamcwSURnMkxqYzFNaXd6TlM0NE1qY2dPRFV1TlRNNUxEUXpMamd4T0NCRE9EVXVNVFVzTkRZdU16Z3pJRGcwTGpJNU1TdzBPUzR3TXpNZ09ESXVORGd6TERVd0xqRXdNU0JNTnk0eU1TdzVNeTQyTlRNZ1F6WXVPREk0TERrekxqZzNOQ0EyTGpRMk1TdzVNeTQ1TkRFZ05pNHhNeXc1TXk0NU1ERWdRell1TVRNc09UTXVPVEF4SURNdU16UTVMRGt6TGpRMklETXVNVEk1TERreExqYzNOaUJETWk0MU5qZ3NPRGN1TkRrMUlERXVPVGMzTERneUxqazVOU0F4TGprMk1pdzNNQzQwTWpVZ1F6RXVPVFE0TERVM0xqWTBNU0F5TGpnMkxEVXdMalk0SURJdU9EWXNOVEF1TmpnZ1F6TXVOVGNzTkRZdU5UTTBJRFV1TmpRM0xEUTFMalE0T1NBMUxqWTBOeXcwTlM0ME9Ea2dRelV1TmpRMkxEUTFMalE0T1NBNExqQTJOU3cwTkM0d09USWdNVEl1TWpRMUxEUXhMalkzT1NCTU1UTXVNVEUyTERReExqVTJJRXd4T1M0M01UVXNNemN1TnpNZ1RERTVMamMyTVN3ek55NHlOamtnVERZdU1UTXNPVE11T1RBeElpQnBaRDBpUm1sc2JDMHhNU0lnWm1sc2JEMGlJMFpCUmtGR1FTSStQQzl3WVhSb1Bnb2dJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJRHh3WVhSb0lHUTlJazAyTGpNeE55dzVOQzR4TmpFZ1REWXVNVEF5TERrMExqRTBPQ0JNTmk0eE1ERXNPVFF1TVRRNElFdzFMamcxTnl3NU5DNHhNREVnUXpVdU1UTTRMRGt6TGprME5TQXpMakE0TlN3NU15NHpOalVnTWk0NE9ERXNPVEV1T0RBNUlFTXlMak14TXl3NE55NDBOamtnTVM0M01qY3NPREl1T1RrMklERXVOekV6TERjd0xqUXlOU0JETVM0Mk9Ua3NOVGN1TnpjeElESXVOakEwTERVd0xqY3hPQ0F5TGpZeE15dzFNQzQyTkRnZ1F6TXVNek00TERRMkxqUXhOeUExTGpRME5TdzBOUzR6TVNBMUxqVXpOU3cwTlM0eU5qWWdUREV5TGpFMk15dzBNUzQwTXprZ1RERXpMakF6TXl3ME1TNHpNaUJNTVRrdU5EYzVMRE0zTGpVM09DQk1NVGt1TlRFekxETTNMakkwTkNCRE1Ua3VOVEkyTERNM0xqRXdOeUF4T1M0Mk5EY3NNemN1TURBNElERTVMamM0Tml3ek55NHdNakVnUXpFNUxqa3lNaXd6Tnk0d016UWdNakF1TURJekxETTNMakUxTmlBeU1DNHdNRGtzTXpjdU1qa3pJRXd4T1M0NU5Td3pOeTQ0T0RJZ1RERXpMakU1T0N3ME1TNDRNREVnVERFeUxqTXlPQ3cwTVM0NU1Ua2dURFV1TnpjeUxEUTFMamN3TkNCRE5TNDNOREVzTkRVdU56SWdNeTQzT0RJc05EWXVOemN5SURNdU1UQTJMRFV3TGpjeU1pQkRNeTR3T1Rrc05UQXVOemd5SURJdU1UazRMRFUzTGpnd09DQXlMakl4TWl3M01DNDBNalFnUXpJdU1qSTJMRGd5TGprMk15QXlMamd3T1N3NE55NDBNaUF6TGpNM015dzVNUzQzTWprZ1F6TXVORFkwTERreUxqUXlJRFF1TURZeUxEa3lMamc0TXlBMExqWTRNaXc1TXk0eE9ERWdRelF1TlRZMkxEa3lMams0TkNBMExqUTROaXc1TWk0M056WWdOQzQwTkRZc09USXVOVGN5SUVNekxqWTJOU3c0T0M0MU9EZ2dNeTR5T1RFc09EUXVNemNnTXk0eU56WXNOekV1TVRjeklFTXpMakkyTWl3MU9DNDFNaUEwTGpFMk55dzFNUzQwTmpZZ05DNHhOellzTlRFdU16azJJRU0wTGprd01TdzBOeTR4TmpVZ055NHdNRGdzTkRZdU1EVTVJRGN1TURrNExEUTJMakF4TkNCRE55NHdPVFFzTkRZdU1ERTFJRGd4TGpVME1pd3pMakF6TkNBNE1TNDVORFFzTWk0NE1ESWdURGd4TGprM01pd3lMamM0TlNCRE9ESXVPRGMyTERJdU1qUTNJRGd6TGpZNU1pd3lMakE1TnlBNE5DNHpNeklzTWk0ek5USWdRemcwTGpnNE55d3lMalUzTXlBNE5TNHlPREVzTXk0d09EVWdPRFV1TlRBMExETXVPRGN5SUVNNE55NDFNVGdzTVRFZ09EWXVPVFkwTERNMkxqQTVNU0E0TlM0M09EVXNORE11T0RVMUlFTTROUzR5Tnpnc05EY3VNVGsySURnMExqSXhMRFE1TGpNM0lEZ3lMall4TERVd0xqTXhOeUJNTnk0ek16VXNPVE11T0RZNUlFTTJMams1T1N3NU5DNHdOak1nTmk0Mk5UZ3NPVFF1TVRZeElEWXVNekUzTERrMExqRTJNU0JNTmk0ek1UY3NPVFF1TVRZeElGb2dUVFl1TVRjc09UTXVOalUwSUVNMkxqUTJNeXc1TXk0Mk9TQTJMamMzTkN3NU15NDJNVGNnTnk0d09EVXNPVE11TkRNM0lFdzRNaTR6TlRnc05Ea3VPRGcySUVNNE5DNHhPREVzTkRndU9EQTRJRGcwTGprMkxEUTFMamszTVNBNE5TNHlPVElzTkRNdU56Z2dRemcyTGpRMk5pd3pOaTR3TkRrZ09EY3VNREl6TERFeExqQTROU0E0TlM0d01qUXNOQzR3TURnZ1F6ZzBMamcwTml3ekxqTTNOeUE0TkM0MU5URXNNaTQ1TnpZZ09EUXVNVFE0TERJdU9ERTJJRU00TXk0Mk5qUXNNaTQyTWpNZ09ESXVPVGd5TERJdU56WTBJRGd5TGpJeU55d3pMakl4TXlCTU9ESXVNVGt6TERNdU1qTTBJRU00TVM0M09URXNNeTQwTmpZZ055NHpNelVzTkRZdU5EVXlJRGN1TXpNMUxEUTJMalExTWlCRE55NHpNRFFzTkRZdU5EWTVJRFV1TXpRMkxEUTNMalV5TVNBMExqWTJPU3cxTVM0ME56RWdRelF1TmpZeUxEVXhMalV6SURNdU56WXhMRFU0TGpVMU5pQXpMamMzTlN3M01TNHhOek1nUXpNdU56a3NPRFF1TXpJNElEUXVNVFl4TERnNExqVXlOQ0EwTGprek5pdzVNaTQwTnpZZ1F6VXVNREkyTERreUxqa3pOeUExTGpReE1pdzVNeTQwTlRrZ05TNDVOek1zT1RNdU5qRTFJRU0yTGpBNE55dzVNeTQyTkNBMkxqRTFPQ3c1TXk0Mk5USWdOaTR4Tmprc09UTXVOalUwSUV3MkxqRTNMRGt6TGpZMU5DQk1OaTR4Tnl3NU15NDJOVFFnV2lJZ2FXUTlJa1pwYkd3dE1USWlJR1pwYkd3OUlpTTBOVFZCTmpRaVBqd3ZjR0YwYUQ0S0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQThjR0YwYUNCa1BTSk5OeTR6TVRjc05qZ3VPVGd5SUVNM0xqZ3dOaXcyT0M0M01ERWdPQzR5TURJc05qZ3VPVEkySURndU1qQXlMRFk1TGpRNE55QkRPQzR5TURJc056QXVNRFEzSURjdU9EQTJMRGN3TGpjeklEY3VNekUzTERjeExqQXhNaUJETmk0NE1qa3NOekV1TWprMElEWXVORE16TERjeExqQTJPU0EyTGpRek15dzNNQzQxTURnZ1F6WXVORE16TERZNUxqazBPQ0EyTGpneU9TdzJPUzR5TmpVZ055NHpNVGNzTmpndU9UZ3lJaUJwWkQwaVJtbHNiQzB4TXlJZ1ptbHNiRDBpSTBaR1JrWkdSaUkrUEM5d1lYUm9QZ29nSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUR4d1lYUm9JR1E5SWswMkxqa3lMRGN4TGpFek15QkROaTQyTXpFc056RXVNVE16SURZdU5ETXpMRGN3TGprd05TQTJMalF6TXl3M01DNDFNRGdnUXpZdU5ETXpMRFk1TGprME9DQTJMamd5T1N3Mk9TNHlOalVnTnk0ek1UY3NOamd1T1RneUlFTTNMalEyTERZNExqa2dOeTQxT1RVc05qZ3VPRFl4SURjdU56RTBMRFk0TGpnMk1TQkRPQzR3TURNc05qZ3VPRFl4SURndU1qQXlMRFk1TGpBNUlEZ3VNakF5TERZNUxqUTROeUJET0M0eU1ESXNOekF1TURRM0lEY3VPREEyTERjd0xqY3pJRGN1TXpFM0xEY3hMakF4TWlCRE55NHhOelFzTnpFdU1EazBJRGN1TURNNUxEY3hMakV6TXlBMkxqa3lMRGN4TGpFek15Qk5OeTQzTVRRc05qZ3VOamMwSUVNM0xqVTFOeXcyT0M0Mk56UWdOeTR6T1RJc05qZ3VOekl6SURjdU1qSTBMRFk0TGpneU1TQkROaTQyTnpZc05qa3VNVE00SURZdU1qUTJMRFk1TGpnM09TQTJMakkwTml3M01DNDFNRGdnUXpZdU1qUTJMRGN3TGprNU5DQTJMalV4Tnl3M01TNHpNaUEyTGpreUxEY3hMak15SUVNM0xqQTNPQ3czTVM0ek1pQTNMakkwTXl3M01TNHlOekVnTnk0ME1URXNOekV1TVRjMElFTTNMamsxT1N3M01DNDROVGNnT0M0ek9Ea3NOekF1TVRFM0lEZ3VNemc1TERZNUxqUTROeUJET0M0ek9Ea3NOamt1TURBeElEZ3VNVEUzTERZNExqWTNOQ0EzTGpjeE5DdzJPQzQyTnpRaUlHbGtQU0pHYVd4c0xURTBJaUJtYVd4c1BTSWpPREE1TjBFeUlqNDhMM0JoZEdnK0NpQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdQSEJoZEdnZ1pEMGlUVFl1T1RJc056QXVPVFEzSUVNMkxqWTBPU3czTUM0NU5EY2dOaTQyTWpFc056QXVOalFnTmk0Mk1qRXNOekF1TlRBNElFTTJMall5TVN3M01DNHdNVGNnTmk0NU9ESXNOamt1TXpreUlEY3VOREV4TERZNUxqRTBOU0JETnk0MU1qRXNOamt1TURneUlEY3VOakkxTERZNUxqQTBPU0EzTGpjeE5DdzJPUzR3TkRrZ1F6Y3VPVGcyTERZNUxqQTBPU0E0TGpBeE5TdzJPUzR6TlRVZ09DNHdNVFVzTmprdU5EZzNJRU00TGpBeE5TdzJPUzQ1TnpnZ055NDJOVElzTnpBdU5qQXpJRGN1TWpJMExEY3dMamcxTVNCRE55NHhNVFVzTnpBdU9URTBJRGN1TURFc056QXVPVFEzSURZdU9USXNOekF1T1RRM0lFMDNMamN4TkN3Mk9DNDROakVnUXpjdU5UazFMRFk0TGpnMk1TQTNMalEyTERZNExqa2dOeTR6TVRjc05qZ3VPVGd5SUVNMkxqZ3lPU3cyT1M0eU5qVWdOaTQwTXpNc05qa3VPVFE0SURZdU5ETXpMRGN3TGpVd09DQkROaTQwTXpNc056QXVPVEExSURZdU5qTXhMRGN4TGpFek15QTJMamt5TERjeExqRXpNeUJETnk0d016a3NOekV1TVRNeklEY3VNVGMwTERjeExqQTVOQ0EzTGpNeE55dzNNUzR3TVRJZ1F6Y3VPREEyTERjd0xqY3pJRGd1TWpBeUxEY3dMakEwTnlBNExqSXdNaXcyT1M0ME9EY2dRemd1TWpBeUxEWTVMakE1SURndU1EQXpMRFk0TGpnMk1TQTNMamN4TkN3Mk9DNDROakVpSUdsa1BTSkdhV3hzTFRFMUlpQm1hV3hzUFNJak9EQTVOMEV5SWo0OEwzQmhkR2crQ2lBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ1BIQmhkR2dnWkQwaVRUY3VORFEwTERnMUxqTTFJRU0zTGpjd09DdzROUzR4T1RnZ055NDVNakVzT0RVdU16RTVJRGN1T1RJeExEZzFMall5TWlCRE55NDVNakVzT0RVdU9USTFJRGN1TnpBNExEZzJMakk1TWlBM0xqUTBOQ3c0Tmk0ME5EUWdRemN1TVRneExEZzJMalU1TnlBMkxqazJOeXc0Tmk0ME56VWdOaTQ1Tmpjc09EWXVNVGN6SUVNMkxqazJOeXc0TlM0NE56RWdOeTR4T0RFc09EVXVOVEF5SURjdU5EUTBMRGcxTGpNMUlpQnBaRDBpUm1sc2JDMHhOaUlnWm1sc2JEMGlJMFpHUmtaR1JpSStQQzl3WVhSb1Bnb2dJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJRHh3WVhSb0lHUTlJazAzTGpJekxEZzJMalV4SUVNM0xqQTNOQ3c0Tmk0MU1TQTJMamsyTnl3NE5pNHpPRGNnTmk0NU5qY3NPRFl1TVRjeklFTTJMamsyTnl3NE5TNDROekVnTnk0eE9ERXNPRFV1TlRBeUlEY3VORFEwTERnMUxqTTFJRU0zTGpVeU1TdzROUzR6TURVZ055NDFPVFFzT0RVdU1qZzBJRGN1TmpVNExEZzFMakk0TkNCRE55NDRNVFFzT0RVdU1qZzBJRGN1T1RJeExEZzFMalF3T0NBM0xqa3lNU3c0TlM0Mk1qSWdRemN1T1RJeExEZzFMamt5TlNBM0xqY3dPQ3c0Tmk0eU9USWdOeTQwTkRRc09EWXVORFEwSUVNM0xqTTJOeXc0Tmk0ME9Ea2dOeTR5T1RRc09EWXVOVEVnTnk0eU15dzROaTQxTVNCTk55NDJOVGdzT0RVdU1EazRJRU0zTGpVMU9DdzROUzR3T1RnZ055NDBOVFVzT0RVdU1USTNJRGN1TXpVeExEZzFMakU0T0NCRE55NHdNekVzT0RVdU16Y3pJRFl1TnpneExEZzFMamd3TmlBMkxqYzRNU3c0Tmk0eE56TWdRell1TnpneExEZzJMalE0TWlBMkxqazJOaXc0Tmk0Mk9UY2dOeTR5TXl3NE5pNDJPVGNnUXpjdU16TXNPRFl1TmprM0lEY3VORE16TERnMkxqWTJOaUEzTGpVek9DdzROaTQyTURjZ1F6Y3VPRFU0TERnMkxqUXlNaUE0TGpFd09DdzROUzQ1T0RrZ09DNHhNRGdzT0RVdU5qSXlJRU00TGpFd09DdzROUzR6TVRNZ055NDVNak1zT0RVdU1EazRJRGN1TmpVNExEZzFMakE1T0NJZ2FXUTlJa1pwYkd3dE1UY2lJR1pwYkd3OUlpTTRNRGszUVRJaVBqd3ZjR0YwYUQ0S0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQThjR0YwYUNCa1BTSk5OeTR5TXl3NE5pNHpNaklnVERjdU1UVTBMRGcyTGpFM015QkROeTR4TlRRc09EVXVPVE00SURjdU16TXpMRGcxTGpZeU9TQTNMalV6T0N3NE5TNDFNVElnVERjdU5qVTRMRGcxTGpRM01TQk1OeTQzTXpRc09EVXVOakl5SUVNM0xqY3pOQ3c0TlM0NE5UWWdOeTQxTlRVc09EWXVNVFkwSURjdU16VXhMRGcyTGpJNE1pQk1OeTR5TXl3NE5pNHpNaklnVFRjdU5qVTRMRGcxTGpJNE5DQkROeTQxT1RRc09EVXVNamcwSURjdU5USXhMRGcxTGpNd05TQTNMalEwTkN3NE5TNHpOU0JETnk0eE9ERXNPRFV1TlRBeUlEWXVPVFkzTERnMUxqZzNNU0EyTGprMk55dzROaTR4TnpNZ1F6WXVPVFkzTERnMkxqTTROeUEzTGpBM05DdzROaTQxTVNBM0xqSXpMRGcyTGpVeElFTTNMakk1TkN3NE5pNDFNU0EzTGpNMk55dzROaTQwT0RrZ055NDBORFFzT0RZdU5EUTBJRU0zTGpjd09DdzROaTR5T1RJZ055NDVNakVzT0RVdU9USTFJRGN1T1RJeExEZzFMall5TWlCRE55NDVNakVzT0RVdU5EQTRJRGN1T0RFMExEZzFMakk0TkNBM0xqWTFPQ3c0TlM0eU9EUWlJR2xrUFNKR2FXeHNMVEU0SWlCbWFXeHNQU0lqT0RBNU4wRXlJajQ4TDNCaGRHZytDaUFnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnUEhCaGRHZ2daRDBpVFRjM0xqSTNPQ3czTGpjMk9TQk1OemN1TWpjNExEVXhMalF6TmlCTU1UQXVNakE0TERrd0xqRTJJRXd4TUM0eU1EZ3NORFl1TkRreklFdzNOeTR5Tnpnc055NDNOamtpSUdsa1BTSkdhV3hzTFRFNUlpQm1hV3hzUFNJak5EVTFRVFkwSWo0OEwzQmhkR2crQ2lBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ1BIQmhkR2dnWkQwaVRURXdMakE0TXl3NU1DNHpOelVnVERFd0xqQTRNeXcwTmk0ME1qRWdUREV3TGpFME5pdzBOaTR6T0RVZ1REYzNMalF3TXl3M0xqVTFOQ0JNTnpjdU5EQXpMRFV4TGpVd09DQk1OemN1TXpReExEVXhMalUwTkNCTU1UQXVNRGd6TERrd0xqTTNOU0JNTVRBdU1EZ3pMRGt3TGpNM05TQmFJRTB4TUM0ek16TXNORFl1TlRZMElFd3hNQzR6TXpNc09Ea3VPVFEwSUV3M055NHhOVFFzTlRFdU16WTFJRXczTnk0eE5UUXNOeTQ1T0RVZ1RERXdMak16TXl3ME5pNDFOalFnVERFd0xqTXpNeXcwTmk0MU5qUWdXaUlnYVdROUlrWnBiR3d0TWpBaUlHWnBiR3c5SWlNMk1EZEVPRUlpUGp3dmNHRjBhRDRLSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJRHd2Wno0S0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUR4d1lYUm9JR1E5SWsweE1qVXVOek0zTERnNExqWTBOeUJNTVRFNExqQTVPQ3c1TVM0NU9ERWdUREV4T0M0d09UZ3NPRFFnVERFd05pNDJNemtzT0RndU56RXpJRXd4TURZdU5qTTVMRGsyTGprNE1pQk1PVGtzTVRBd0xqTXhOU0JNTVRFeUxqTTJPU3d4TURNdU9UWXhJRXd4TWpVdU56TTNMRGc0TGpZME55SWdhV1E5SWtsdGNHOXlkR1ZrTFV4aGVXVnljeTFEYjNCNUxUSWlJR1pwYkd3OUlpTTBOVFZCTmpRaUlITnJaWFJqYURwMGVYQmxQU0pOVTFOb1lYQmxSM0p2ZFhBaVBqd3ZjR0YwYUQ0S0lDQWdJQ0FnSUNBZ0lDQWdQQzluUGdvZ0lDQWdJQ0FnSUR3dlp6NEtJQ0FnSUR3dlp6NEtQQzl6ZG1jKycpO1xyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBSb3RhdGVJbnN0cnVjdGlvbnM7XHJcblxyXG59LHtcIi4vdXRpbC5qc1wiOjIyfV0sMTc6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xyXG4vKlxyXG4gKiBDb3B5cmlnaHQgMjAxNSBHb29nbGUgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcblxyXG52YXIgU2Vuc29yU2FtcGxlID0gX2RlcmVxXygnLi9zZW5zb3Itc2FtcGxlLmpzJyk7XHJcbnZhciBNYXRoVXRpbCA9IF9kZXJlcV8oJy4uL21hdGgtdXRpbC5qcycpO1xyXG52YXIgVXRpbCA9IF9kZXJlcV8oJy4uL3V0aWwuanMnKTtcclxuXHJcbnZhciBERUJVRyA9IGZhbHNlO1xyXG5cclxuLyoqXHJcbiAqIEFuIGltcGxlbWVudGF0aW9uIG9mIGEgc2ltcGxlIGNvbXBsZW1lbnRhcnkgZmlsdGVyLCB3aGljaCBmdXNlcyBneXJvc2NvcGUgYW5kXHJcbiAqIGFjY2VsZXJvbWV0ZXIgZGF0YSBmcm9tIHRoZSAnZGV2aWNlbW90aW9uJyBldmVudC5cclxuICpcclxuICogQWNjZWxlcm9tZXRlciBkYXRhIGlzIHZlcnkgbm9pc3ksIGJ1dCBzdGFibGUgb3ZlciB0aGUgbG9uZyB0ZXJtLlxyXG4gKiBHeXJvc2NvcGUgZGF0YSBpcyBzbW9vdGgsIGJ1dCB0ZW5kcyB0byBkcmlmdCBvdmVyIHRoZSBsb25nIHRlcm0uXHJcbiAqXHJcbiAqIFRoaXMgZnVzaW9uIGlzIHJlbGF0aXZlbHkgc2ltcGxlOlxyXG4gKiAxLiBHZXQgb3JpZW50YXRpb24gZXN0aW1hdGVzIGZyb20gYWNjZWxlcm9tZXRlciBieSBhcHBseWluZyBhIGxvdy1wYXNzIGZpbHRlclxyXG4gKiAgICBvbiB0aGF0IGRhdGEuXHJcbiAqIDIuIEdldCBvcmllbnRhdGlvbiBlc3RpbWF0ZXMgZnJvbSBneXJvc2NvcGUgYnkgaW50ZWdyYXRpbmcgb3ZlciB0aW1lLlxyXG4gKiAzLiBDb21iaW5lIHRoZSB0d28gZXN0aW1hdGVzLCB3ZWlnaGluZyAoMSkgaW4gdGhlIGxvbmcgdGVybSwgYnV0ICgyKSBmb3IgdGhlXHJcbiAqICAgIHNob3J0IHRlcm0uXHJcbiAqL1xyXG5mdW5jdGlvbiBDb21wbGVtZW50YXJ5RmlsdGVyKGtGaWx0ZXIpIHtcclxuICB0aGlzLmtGaWx0ZXIgPSBrRmlsdGVyO1xyXG5cclxuICAvLyBSYXcgc2Vuc29yIG1lYXN1cmVtZW50cy5cclxuICB0aGlzLmN1cnJlbnRBY2NlbE1lYXN1cmVtZW50ID0gbmV3IFNlbnNvclNhbXBsZSgpO1xyXG4gIHRoaXMuY3VycmVudEd5cm9NZWFzdXJlbWVudCA9IG5ldyBTZW5zb3JTYW1wbGUoKTtcclxuICB0aGlzLnByZXZpb3VzR3lyb01lYXN1cmVtZW50ID0gbmV3IFNlbnNvclNhbXBsZSgpO1xyXG5cclxuICAvLyBTZXQgZGVmYXVsdCBsb29rIGRpcmVjdGlvbiB0byBiZSBpbiB0aGUgY29ycmVjdCBkaXJlY3Rpb24uXHJcbiAgaWYgKFV0aWwuaXNJT1MoKSkge1xyXG4gICAgdGhpcy5maWx0ZXJRID0gbmV3IE1hdGhVdGlsLlF1YXRlcm5pb24oLTEsIDAsIDAsIDEpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICB0aGlzLmZpbHRlclEgPSBuZXcgTWF0aFV0aWwuUXVhdGVybmlvbigxLCAwLCAwLCAxKTtcclxuICB9XHJcbiAgdGhpcy5wcmV2aW91c0ZpbHRlclEgPSBuZXcgTWF0aFV0aWwuUXVhdGVybmlvbigpO1xyXG4gIHRoaXMucHJldmlvdXNGaWx0ZXJRLmNvcHkodGhpcy5maWx0ZXJRKTtcclxuXHJcbiAgLy8gT3JpZW50YXRpb24gYmFzZWQgb24gdGhlIGFjY2VsZXJvbWV0ZXIuXHJcbiAgdGhpcy5hY2NlbFEgPSBuZXcgTWF0aFV0aWwuUXVhdGVybmlvbigpO1xyXG4gIC8vIFdoZXRoZXIgb3Igbm90IHRoZSBvcmllbnRhdGlvbiBoYXMgYmVlbiBpbml0aWFsaXplZC5cclxuICB0aGlzLmlzT3JpZW50YXRpb25Jbml0aWFsaXplZCA9IGZhbHNlO1xyXG4gIC8vIFJ1bm5pbmcgZXN0aW1hdGUgb2YgZ3Jhdml0eSBiYXNlZCBvbiB0aGUgY3VycmVudCBvcmllbnRhdGlvbi5cclxuICB0aGlzLmVzdGltYXRlZEdyYXZpdHkgPSBuZXcgTWF0aFV0aWwuVmVjdG9yMygpO1xyXG4gIC8vIE1lYXN1cmVkIGdyYXZpdHkgYmFzZWQgb24gYWNjZWxlcm9tZXRlci5cclxuICB0aGlzLm1lYXN1cmVkR3Jhdml0eSA9IG5ldyBNYXRoVXRpbC5WZWN0b3IzKCk7XHJcblxyXG4gIC8vIERlYnVnIG9ubHkgcXVhdGVybmlvbiBvZiBneXJvLWJhc2VkIG9yaWVudGF0aW9uLlxyXG4gIHRoaXMuZ3lyb0ludGVncmFsUSA9IG5ldyBNYXRoVXRpbC5RdWF0ZXJuaW9uKCk7XHJcbn1cclxuXHJcbkNvbXBsZW1lbnRhcnlGaWx0ZXIucHJvdG90eXBlLmFkZEFjY2VsTWVhc3VyZW1lbnQgPSBmdW5jdGlvbih2ZWN0b3IsIHRpbWVzdGFtcFMpIHtcclxuICB0aGlzLmN1cnJlbnRBY2NlbE1lYXN1cmVtZW50LnNldCh2ZWN0b3IsIHRpbWVzdGFtcFMpO1xyXG59O1xyXG5cclxuQ29tcGxlbWVudGFyeUZpbHRlci5wcm90b3R5cGUuYWRkR3lyb01lYXN1cmVtZW50ID0gZnVuY3Rpb24odmVjdG9yLCB0aW1lc3RhbXBTKSB7XHJcbiAgdGhpcy5jdXJyZW50R3lyb01lYXN1cmVtZW50LnNldCh2ZWN0b3IsIHRpbWVzdGFtcFMpO1xyXG5cclxuICB2YXIgZGVsdGFUID0gdGltZXN0YW1wUyAtIHRoaXMucHJldmlvdXNHeXJvTWVhc3VyZW1lbnQudGltZXN0YW1wUztcclxuICBpZiAoVXRpbC5pc1RpbWVzdGFtcERlbHRhVmFsaWQoZGVsdGFUKSkge1xyXG4gICAgdGhpcy5ydW5fKCk7XHJcbiAgfVxyXG5cclxuICB0aGlzLnByZXZpb3VzR3lyb01lYXN1cmVtZW50LmNvcHkodGhpcy5jdXJyZW50R3lyb01lYXN1cmVtZW50KTtcclxufTtcclxuXHJcbkNvbXBsZW1lbnRhcnlGaWx0ZXIucHJvdG90eXBlLnJ1bl8gPSBmdW5jdGlvbigpIHtcclxuXHJcbiAgaWYgKCF0aGlzLmlzT3JpZW50YXRpb25Jbml0aWFsaXplZCkge1xyXG4gICAgdGhpcy5hY2NlbFEgPSB0aGlzLmFjY2VsVG9RdWF0ZXJuaW9uXyh0aGlzLmN1cnJlbnRBY2NlbE1lYXN1cmVtZW50LnNhbXBsZSk7XHJcbiAgICB0aGlzLnByZXZpb3VzRmlsdGVyUS5jb3B5KHRoaXMuYWNjZWxRKTtcclxuICAgIHRoaXMuaXNPcmllbnRhdGlvbkluaXRpYWxpemVkID0gdHJ1ZTtcclxuICAgIHJldHVybjtcclxuICB9XHJcblxyXG4gIHZhciBkZWx0YVQgPSB0aGlzLmN1cnJlbnRHeXJvTWVhc3VyZW1lbnQudGltZXN0YW1wUyAtXHJcbiAgICAgIHRoaXMucHJldmlvdXNHeXJvTWVhc3VyZW1lbnQudGltZXN0YW1wUztcclxuXHJcbiAgLy8gQ29udmVydCBneXJvIHJvdGF0aW9uIHZlY3RvciB0byBhIHF1YXRlcm5pb24gZGVsdGEuXHJcbiAgdmFyIGd5cm9EZWx0YVEgPSB0aGlzLmd5cm9Ub1F1YXRlcm5pb25EZWx0YV8odGhpcy5jdXJyZW50R3lyb01lYXN1cmVtZW50LnNhbXBsZSwgZGVsdGFUKTtcclxuICB0aGlzLmd5cm9JbnRlZ3JhbFEubXVsdGlwbHkoZ3lyb0RlbHRhUSk7XHJcblxyXG4gIC8vIGZpbHRlcl8xID0gSyAqIChmaWx0ZXJfMCArIGd5cm8gKiBkVCkgKyAoMSAtIEspICogYWNjZWwuXHJcbiAgdGhpcy5maWx0ZXJRLmNvcHkodGhpcy5wcmV2aW91c0ZpbHRlclEpO1xyXG4gIHRoaXMuZmlsdGVyUS5tdWx0aXBseShneXJvRGVsdGFRKTtcclxuXHJcbiAgLy8gQ2FsY3VsYXRlIHRoZSBkZWx0YSBiZXR3ZWVuIHRoZSBjdXJyZW50IGVzdGltYXRlZCBncmF2aXR5IGFuZCB0aGUgcmVhbFxyXG4gIC8vIGdyYXZpdHkgdmVjdG9yIGZyb20gYWNjZWxlcm9tZXRlci5cclxuICB2YXIgaW52RmlsdGVyUSA9IG5ldyBNYXRoVXRpbC5RdWF0ZXJuaW9uKCk7XHJcbiAgaW52RmlsdGVyUS5jb3B5KHRoaXMuZmlsdGVyUSk7XHJcbiAgaW52RmlsdGVyUS5pbnZlcnNlKCk7XHJcblxyXG4gIHRoaXMuZXN0aW1hdGVkR3Jhdml0eS5zZXQoMCwgMCwgLTEpO1xyXG4gIHRoaXMuZXN0aW1hdGVkR3Jhdml0eS5hcHBseVF1YXRlcm5pb24oaW52RmlsdGVyUSk7XHJcbiAgdGhpcy5lc3RpbWF0ZWRHcmF2aXR5Lm5vcm1hbGl6ZSgpO1xyXG5cclxuICB0aGlzLm1lYXN1cmVkR3Jhdml0eS5jb3B5KHRoaXMuY3VycmVudEFjY2VsTWVhc3VyZW1lbnQuc2FtcGxlKTtcclxuICB0aGlzLm1lYXN1cmVkR3Jhdml0eS5ub3JtYWxpemUoKTtcclxuXHJcbiAgLy8gQ29tcGFyZSBlc3RpbWF0ZWQgZ3Jhdml0eSB3aXRoIG1lYXN1cmVkIGdyYXZpdHksIGdldCB0aGUgZGVsdGEgcXVhdGVybmlvblxyXG4gIC8vIGJldHdlZW4gdGhlIHR3by5cclxuICB2YXIgZGVsdGFRID0gbmV3IE1hdGhVdGlsLlF1YXRlcm5pb24oKTtcclxuICBkZWx0YVEuc2V0RnJvbVVuaXRWZWN0b3JzKHRoaXMuZXN0aW1hdGVkR3Jhdml0eSwgdGhpcy5tZWFzdXJlZEdyYXZpdHkpO1xyXG4gIGRlbHRhUS5pbnZlcnNlKCk7XHJcblxyXG4gIGlmIChERUJVRykge1xyXG4gICAgY29uc29sZS5sb2coJ0RlbHRhOiAlZCBkZWcsIEdfZXN0OiAoJXMsICVzLCAlcyksIEdfbWVhczogKCVzLCAlcywgJXMpJyxcclxuICAgICAgICAgICAgICAgIE1hdGhVdGlsLnJhZFRvRGVnICogVXRpbC5nZXRRdWF0ZXJuaW9uQW5nbGUoZGVsdGFRKSxcclxuICAgICAgICAgICAgICAgICh0aGlzLmVzdGltYXRlZEdyYXZpdHkueCkudG9GaXhlZCgxKSxcclxuICAgICAgICAgICAgICAgICh0aGlzLmVzdGltYXRlZEdyYXZpdHkueSkudG9GaXhlZCgxKSxcclxuICAgICAgICAgICAgICAgICh0aGlzLmVzdGltYXRlZEdyYXZpdHkueikudG9GaXhlZCgxKSxcclxuICAgICAgICAgICAgICAgICh0aGlzLm1lYXN1cmVkR3Jhdml0eS54KS50b0ZpeGVkKDEpLFxyXG4gICAgICAgICAgICAgICAgKHRoaXMubWVhc3VyZWRHcmF2aXR5LnkpLnRvRml4ZWQoMSksXHJcbiAgICAgICAgICAgICAgICAodGhpcy5tZWFzdXJlZEdyYXZpdHkueikudG9GaXhlZCgxKSk7XHJcbiAgfVxyXG5cclxuICAvLyBDYWxjdWxhdGUgdGhlIFNMRVJQIHRhcmdldDogY3VycmVudCBvcmllbnRhdGlvbiBwbHVzIHRoZSBtZWFzdXJlZC1lc3RpbWF0ZWRcclxuICAvLyBxdWF0ZXJuaW9uIGRlbHRhLlxyXG4gIHZhciB0YXJnZXRRID0gbmV3IE1hdGhVdGlsLlF1YXRlcm5pb24oKTtcclxuICB0YXJnZXRRLmNvcHkodGhpcy5maWx0ZXJRKTtcclxuICB0YXJnZXRRLm11bHRpcGx5KGRlbHRhUSk7XHJcblxyXG4gIC8vIFNMRVJQIGZhY3RvcjogMCBpcyBwdXJlIGd5cm8sIDEgaXMgcHVyZSBhY2NlbC5cclxuICB0aGlzLmZpbHRlclEuc2xlcnAodGFyZ2V0USwgMSAtIHRoaXMua0ZpbHRlcik7XHJcblxyXG4gIHRoaXMucHJldmlvdXNGaWx0ZXJRLmNvcHkodGhpcy5maWx0ZXJRKTtcclxufTtcclxuXHJcbkNvbXBsZW1lbnRhcnlGaWx0ZXIucHJvdG90eXBlLmdldE9yaWVudGF0aW9uID0gZnVuY3Rpb24oKSB7XHJcbiAgcmV0dXJuIHRoaXMuZmlsdGVyUTtcclxufTtcclxuXHJcbkNvbXBsZW1lbnRhcnlGaWx0ZXIucHJvdG90eXBlLmFjY2VsVG9RdWF0ZXJuaW9uXyA9IGZ1bmN0aW9uKGFjY2VsKSB7XHJcbiAgdmFyIG5vcm1BY2NlbCA9IG5ldyBNYXRoVXRpbC5WZWN0b3IzKCk7XHJcbiAgbm9ybUFjY2VsLmNvcHkoYWNjZWwpO1xyXG4gIG5vcm1BY2NlbC5ub3JtYWxpemUoKTtcclxuICB2YXIgcXVhdCA9IG5ldyBNYXRoVXRpbC5RdWF0ZXJuaW9uKCk7XHJcbiAgcXVhdC5zZXRGcm9tVW5pdFZlY3RvcnMobmV3IE1hdGhVdGlsLlZlY3RvcjMoMCwgMCwgLTEpLCBub3JtQWNjZWwpO1xyXG4gIHF1YXQuaW52ZXJzZSgpO1xyXG4gIHJldHVybiBxdWF0O1xyXG59O1xyXG5cclxuQ29tcGxlbWVudGFyeUZpbHRlci5wcm90b3R5cGUuZ3lyb1RvUXVhdGVybmlvbkRlbHRhXyA9IGZ1bmN0aW9uKGd5cm8sIGR0KSB7XHJcbiAgLy8gRXh0cmFjdCBheGlzIGFuZCBhbmdsZSBmcm9tIHRoZSBneXJvc2NvcGUgZGF0YS5cclxuICB2YXIgcXVhdCA9IG5ldyBNYXRoVXRpbC5RdWF0ZXJuaW9uKCk7XHJcbiAgdmFyIGF4aXMgPSBuZXcgTWF0aFV0aWwuVmVjdG9yMygpO1xyXG4gIGF4aXMuY29weShneXJvKTtcclxuICBheGlzLm5vcm1hbGl6ZSgpO1xyXG4gIHF1YXQuc2V0RnJvbUF4aXNBbmdsZShheGlzLCBneXJvLmxlbmd0aCgpICogZHQpO1xyXG4gIHJldHVybiBxdWF0O1xyXG59O1xyXG5cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gQ29tcGxlbWVudGFyeUZpbHRlcjtcclxuXHJcbn0se1wiLi4vbWF0aC11dGlsLmpzXCI6MTQsXCIuLi91dGlsLmpzXCI6MjIsXCIuL3NlbnNvci1zYW1wbGUuanNcIjoyMH1dLDE4OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcclxuLypcclxuICogQ29weXJpZ2h0IDIwMTUgR29vZ2xlIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG52YXIgQ29tcGxlbWVudGFyeUZpbHRlciA9IF9kZXJlcV8oJy4vY29tcGxlbWVudGFyeS1maWx0ZXIuanMnKTtcclxudmFyIFBvc2VQcmVkaWN0b3IgPSBfZGVyZXFfKCcuL3Bvc2UtcHJlZGljdG9yLmpzJyk7XHJcbnZhciBUb3VjaFBhbm5lciA9IF9kZXJlcV8oJy4uL3RvdWNoLXBhbm5lci5qcycpO1xyXG52YXIgTWF0aFV0aWwgPSBfZGVyZXFfKCcuLi9tYXRoLXV0aWwuanMnKTtcclxudmFyIFV0aWwgPSBfZGVyZXFfKCcuLi91dGlsLmpzJyk7XHJcblxyXG4vKipcclxuICogVGhlIHBvc2Ugc2Vuc29yLCBpbXBsZW1lbnRlZCB1c2luZyBEZXZpY2VNb3Rpb24gQVBJcy5cclxuICovXHJcbmZ1bmN0aW9uIEZ1c2lvblBvc2VTZW5zb3IoKSB7XHJcbiAgdGhpcy5kZXZpY2VJZCA9ICd3ZWJ2ci1wb2x5ZmlsbDpmdXNlZCc7XHJcbiAgdGhpcy5kZXZpY2VOYW1lID0gJ1ZSIFBvc2l0aW9uIERldmljZSAod2VidnItcG9seWZpbGw6ZnVzZWQpJztcclxuXHJcbiAgdGhpcy5hY2NlbGVyb21ldGVyID0gbmV3IE1hdGhVdGlsLlZlY3RvcjMoKTtcclxuICB0aGlzLmd5cm9zY29wZSA9IG5ldyBNYXRoVXRpbC5WZWN0b3IzKCk7XHJcblxyXG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdkZXZpY2Vtb3Rpb24nLCB0aGlzLm9uRGV2aWNlTW90aW9uQ2hhbmdlXy5iaW5kKHRoaXMpKTtcclxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignb3JpZW50YXRpb25jaGFuZ2UnLCB0aGlzLm9uU2NyZWVuT3JpZW50YXRpb25DaGFuZ2VfLmJpbmQodGhpcykpO1xyXG5cclxuICB0aGlzLmZpbHRlciA9IG5ldyBDb21wbGVtZW50YXJ5RmlsdGVyKFdlYlZSQ29uZmlnLktfRklMVEVSKTtcclxuICB0aGlzLnBvc2VQcmVkaWN0b3IgPSBuZXcgUG9zZVByZWRpY3RvcihXZWJWUkNvbmZpZy5QUkVESUNUSU9OX1RJTUVfUyk7XHJcbiAgdGhpcy50b3VjaFBhbm5lciA9IG5ldyBUb3VjaFBhbm5lcigpO1xyXG5cclxuICB0aGlzLmZpbHRlclRvV29ybGRRID0gbmV3IE1hdGhVdGlsLlF1YXRlcm5pb24oKTtcclxuXHJcbiAgLy8gU2V0IHRoZSBmaWx0ZXIgdG8gd29ybGQgdHJhbnNmb3JtLCBkZXBlbmRpbmcgb24gT1MuXHJcbiAgaWYgKFV0aWwuaXNJT1MoKSkge1xyXG4gICAgdGhpcy5maWx0ZXJUb1dvcmxkUS5zZXRGcm9tQXhpc0FuZ2xlKG5ldyBNYXRoVXRpbC5WZWN0b3IzKDEsIDAsIDApLCBNYXRoLlBJIC8gMik7XHJcbiAgfSBlbHNlIHtcclxuICAgIHRoaXMuZmlsdGVyVG9Xb3JsZFEuc2V0RnJvbUF4aXNBbmdsZShuZXcgTWF0aFV0aWwuVmVjdG9yMygxLCAwLCAwKSwgLU1hdGguUEkgLyAyKTtcclxuICB9XHJcblxyXG4gIHRoaXMuaW52ZXJzZVdvcmxkVG9TY3JlZW5RID0gbmV3IE1hdGhVdGlsLlF1YXRlcm5pb24oKTtcclxuICB0aGlzLndvcmxkVG9TY3JlZW5RID0gbmV3IE1hdGhVdGlsLlF1YXRlcm5pb24oKTtcclxuICB0aGlzLm9yaWdpbmFsUG9zZUFkanVzdFEgPSBuZXcgTWF0aFV0aWwuUXVhdGVybmlvbigpO1xyXG4gIHRoaXMub3JpZ2luYWxQb3NlQWRqdXN0US5zZXRGcm9tQXhpc0FuZ2xlKG5ldyBNYXRoVXRpbC5WZWN0b3IzKDAsIDAsIDEpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLXdpbmRvdy5vcmllbnRhdGlvbiAqIE1hdGguUEkgLyAxODApO1xyXG5cclxuICB0aGlzLnNldFNjcmVlblRyYW5zZm9ybV8oKTtcclxuICAvLyBBZGp1c3QgdGhpcyBmaWx0ZXIgZm9yIGJlaW5nIGluIGxhbmRzY2FwZSBtb2RlLlxyXG4gIGlmIChVdGlsLmlzTGFuZHNjYXBlTW9kZSgpKSB7XHJcbiAgICB0aGlzLmZpbHRlclRvV29ybGRRLm11bHRpcGx5KHRoaXMuaW52ZXJzZVdvcmxkVG9TY3JlZW5RKTtcclxuICB9XHJcblxyXG4gIC8vIEtlZXAgdHJhY2sgb2YgYSByZXNldCB0cmFuc2Zvcm0gZm9yIHJlc2V0U2Vuc29yLlxyXG4gIHRoaXMucmVzZXRRID0gbmV3IE1hdGhVdGlsLlF1YXRlcm5pb24oKTtcclxuXHJcbiAgdGhpcy5pc0ZpcmVmb3hBbmRyb2lkID0gVXRpbC5pc0ZpcmVmb3hBbmRyb2lkKCk7XHJcbiAgdGhpcy5pc0lPUyA9IFV0aWwuaXNJT1MoKTtcclxuXHJcbiAgdGhpcy5vcmllbnRhdGlvbk91dF8gPSBuZXcgRmxvYXQzMkFycmF5KDQpO1xyXG59XHJcblxyXG5GdXNpb25Qb3NlU2Vuc29yLnByb3RvdHlwZS5nZXRQb3NpdGlvbiA9IGZ1bmN0aW9uKCkge1xyXG4gIC8vIFRoaXMgUG9zZVNlbnNvciBkb2Vzbid0IHN1cHBvcnQgcG9zaXRpb25cclxuICByZXR1cm4gbnVsbDtcclxufTtcclxuXHJcbkZ1c2lvblBvc2VTZW5zb3IucHJvdG90eXBlLmdldE9yaWVudGF0aW9uID0gZnVuY3Rpb24oKSB7XHJcbiAgLy8gQ29udmVydCBmcm9tIGZpbHRlciBzcGFjZSB0byB0aGUgdGhlIHNhbWUgc3lzdGVtIHVzZWQgYnkgdGhlXHJcbiAgLy8gZGV2aWNlb3JpZW50YXRpb24gZXZlbnQuXHJcbiAgdmFyIG9yaWVudGF0aW9uID0gdGhpcy5maWx0ZXIuZ2V0T3JpZW50YXRpb24oKTtcclxuXHJcbiAgLy8gUHJlZGljdCBvcmllbnRhdGlvbi5cclxuICB0aGlzLnByZWRpY3RlZFEgPSB0aGlzLnBvc2VQcmVkaWN0b3IuZ2V0UHJlZGljdGlvbihvcmllbnRhdGlvbiwgdGhpcy5neXJvc2NvcGUsIHRoaXMucHJldmlvdXNUaW1lc3RhbXBTKTtcclxuXHJcbiAgLy8gQ29udmVydCB0byBUSFJFRSBjb29yZGluYXRlIHN5c3RlbTogLVogZm9yd2FyZCwgWSB1cCwgWCByaWdodC5cclxuICB2YXIgb3V0ID0gbmV3IE1hdGhVdGlsLlF1YXRlcm5pb24oKTtcclxuICBvdXQuY29weSh0aGlzLmZpbHRlclRvV29ybGRRKTtcclxuICBvdXQubXVsdGlwbHkodGhpcy5yZXNldFEpO1xyXG4gIGlmICghV2ViVlJDb25maWcuVE9VQ0hfUEFOTkVSX0RJU0FCTEVEKSB7XHJcbiAgICBvdXQubXVsdGlwbHkodGhpcy50b3VjaFBhbm5lci5nZXRPcmllbnRhdGlvbigpKTtcclxuICB9XHJcbiAgb3V0Lm11bHRpcGx5KHRoaXMucHJlZGljdGVkUSk7XHJcbiAgb3V0Lm11bHRpcGx5KHRoaXMud29ybGRUb1NjcmVlblEpO1xyXG5cclxuICAvLyBIYW5kbGUgdGhlIHlhdy1vbmx5IGNhc2UuXHJcbiAgaWYgKFdlYlZSQ29uZmlnLllBV19PTkxZKSB7XHJcbiAgICAvLyBNYWtlIGEgcXVhdGVybmlvbiB0aGF0IG9ubHkgdHVybnMgYXJvdW5kIHRoZSBZLWF4aXMuXHJcbiAgICBvdXQueCA9IDA7XHJcbiAgICBvdXQueiA9IDA7XHJcbiAgICBvdXQubm9ybWFsaXplKCk7XHJcbiAgfVxyXG5cclxuICB0aGlzLm9yaWVudGF0aW9uT3V0X1swXSA9IG91dC54O1xyXG4gIHRoaXMub3JpZW50YXRpb25PdXRfWzFdID0gb3V0Lnk7XHJcbiAgdGhpcy5vcmllbnRhdGlvbk91dF9bMl0gPSBvdXQuejtcclxuICB0aGlzLm9yaWVudGF0aW9uT3V0X1szXSA9IG91dC53O1xyXG4gIHJldHVybiB0aGlzLm9yaWVudGF0aW9uT3V0XztcclxufTtcclxuXHJcbkZ1c2lvblBvc2VTZW5zb3IucHJvdG90eXBlLnJlc2V0UG9zZSA9IGZ1bmN0aW9uKCkge1xyXG4gIC8vIFJlZHVjZSB0byBpbnZlcnRlZCB5YXctb25seS5cclxuICB0aGlzLnJlc2V0US5jb3B5KHRoaXMuZmlsdGVyLmdldE9yaWVudGF0aW9uKCkpO1xyXG4gIHRoaXMucmVzZXRRLnggPSAwO1xyXG4gIHRoaXMucmVzZXRRLnkgPSAwO1xyXG4gIHRoaXMucmVzZXRRLnogKj0gLTE7XHJcbiAgdGhpcy5yZXNldFEubm9ybWFsaXplKCk7XHJcblxyXG4gIC8vIFRha2UgaW50byBhY2NvdW50IGV4dHJhIHRyYW5zZm9ybWF0aW9ucyBpbiBsYW5kc2NhcGUgbW9kZS5cclxuICBpZiAoVXRpbC5pc0xhbmRzY2FwZU1vZGUoKSkge1xyXG4gICAgdGhpcy5yZXNldFEubXVsdGlwbHkodGhpcy5pbnZlcnNlV29ybGRUb1NjcmVlblEpO1xyXG4gIH1cclxuXHJcbiAgLy8gVGFrZSBpbnRvIGFjY291bnQgb3JpZ2luYWwgcG9zZS5cclxuICB0aGlzLnJlc2V0US5tdWx0aXBseSh0aGlzLm9yaWdpbmFsUG9zZUFkanVzdFEpO1xyXG5cclxuICBpZiAoIVdlYlZSQ29uZmlnLlRPVUNIX1BBTk5FUl9ESVNBQkxFRCkge1xyXG4gICAgdGhpcy50b3VjaFBhbm5lci5yZXNldFNlbnNvcigpO1xyXG4gIH1cclxufTtcclxuXHJcbkZ1c2lvblBvc2VTZW5zb3IucHJvdG90eXBlLm9uRGV2aWNlTW90aW9uQ2hhbmdlXyA9IGZ1bmN0aW9uKGRldmljZU1vdGlvbikge1xyXG4gIHZhciBhY2NHcmF2aXR5ID0gZGV2aWNlTW90aW9uLmFjY2VsZXJhdGlvbkluY2x1ZGluZ0dyYXZpdHk7XHJcbiAgdmFyIHJvdFJhdGUgPSBkZXZpY2VNb3Rpb24ucm90YXRpb25SYXRlO1xyXG4gIHZhciB0aW1lc3RhbXBTID0gZGV2aWNlTW90aW9uLnRpbWVTdGFtcCAvIDEwMDA7XHJcblxyXG4gIC8vIEZpcmVmb3ggQW5kcm9pZCB0aW1lU3RhbXAgcmV0dXJucyBvbmUgdGhvdXNhbmR0aCBvZiBhIG1pbGxpc2Vjb25kLlxyXG4gIGlmICh0aGlzLmlzRmlyZWZveEFuZHJvaWQpIHtcclxuICAgIHRpbWVzdGFtcFMgLz0gMTAwMDtcclxuICB9XHJcblxyXG4gIHZhciBkZWx0YVMgPSB0aW1lc3RhbXBTIC0gdGhpcy5wcmV2aW91c1RpbWVzdGFtcFM7XHJcbiAgaWYgKGRlbHRhUyA8PSBVdGlsLk1JTl9USU1FU1RFUCB8fCBkZWx0YVMgPiBVdGlsLk1BWF9USU1FU1RFUCkge1xyXG4gICAgY29uc29sZS53YXJuKCdJbnZhbGlkIHRpbWVzdGFtcHMgZGV0ZWN0ZWQuIFRpbWUgc3RlcCBiZXR3ZWVuIHN1Y2Nlc3NpdmUgJyArXHJcbiAgICAgICAgICAgICAgICAgJ2d5cm9zY29wZSBzZW5zb3Igc2FtcGxlcyBpcyB2ZXJ5IHNtYWxsIG9yIG5vdCBtb25vdG9uaWMnKTtcclxuICAgIHRoaXMucHJldmlvdXNUaW1lc3RhbXBTID0gdGltZXN0YW1wUztcclxuICAgIHJldHVybjtcclxuICB9XHJcbiAgdGhpcy5hY2NlbGVyb21ldGVyLnNldCgtYWNjR3Jhdml0eS54LCAtYWNjR3Jhdml0eS55LCAtYWNjR3Jhdml0eS56KTtcclxuICB0aGlzLmd5cm9zY29wZS5zZXQocm90UmF0ZS5hbHBoYSwgcm90UmF0ZS5iZXRhLCByb3RSYXRlLmdhbW1hKTtcclxuXHJcbiAgLy8gV2l0aCBpT1MgYW5kIEZpcmVmb3ggQW5kcm9pZCwgcm90YXRpb25SYXRlIGlzIHJlcG9ydGVkIGluIGRlZ3JlZXMsXHJcbiAgLy8gc28gd2UgZmlyc3QgY29udmVydCB0byByYWRpYW5zLlxyXG4gIGlmICh0aGlzLmlzSU9TIHx8IHRoaXMuaXNGaXJlZm94QW5kcm9pZCkge1xyXG4gICAgdGhpcy5neXJvc2NvcGUubXVsdGlwbHlTY2FsYXIoTWF0aC5QSSAvIDE4MCk7XHJcbiAgfVxyXG5cclxuICB0aGlzLmZpbHRlci5hZGRBY2NlbE1lYXN1cmVtZW50KHRoaXMuYWNjZWxlcm9tZXRlciwgdGltZXN0YW1wUyk7XHJcbiAgdGhpcy5maWx0ZXIuYWRkR3lyb01lYXN1cmVtZW50KHRoaXMuZ3lyb3Njb3BlLCB0aW1lc3RhbXBTKTtcclxuXHJcbiAgdGhpcy5wcmV2aW91c1RpbWVzdGFtcFMgPSB0aW1lc3RhbXBTO1xyXG59O1xyXG5cclxuRnVzaW9uUG9zZVNlbnNvci5wcm90b3R5cGUub25TY3JlZW5PcmllbnRhdGlvbkNoYW5nZV8gPVxyXG4gICAgZnVuY3Rpb24oc2NyZWVuT3JpZW50YXRpb24pIHtcclxuICB0aGlzLnNldFNjcmVlblRyYW5zZm9ybV8oKTtcclxufTtcclxuXHJcbkZ1c2lvblBvc2VTZW5zb3IucHJvdG90eXBlLnNldFNjcmVlblRyYW5zZm9ybV8gPSBmdW5jdGlvbigpIHtcclxuICB0aGlzLndvcmxkVG9TY3JlZW5RLnNldCgwLCAwLCAwLCAxKTtcclxuICBzd2l0Y2ggKHdpbmRvdy5vcmllbnRhdGlvbikge1xyXG4gICAgY2FzZSAwOlxyXG4gICAgICBicmVhaztcclxuICAgIGNhc2UgOTA6XHJcbiAgICAgIHRoaXMud29ybGRUb1NjcmVlblEuc2V0RnJvbUF4aXNBbmdsZShuZXcgTWF0aFV0aWwuVmVjdG9yMygwLCAwLCAxKSwgLU1hdGguUEkgLyAyKTtcclxuICAgICAgYnJlYWs7XHJcbiAgICBjYXNlIC05MDpcclxuICAgICAgdGhpcy53b3JsZFRvU2NyZWVuUS5zZXRGcm9tQXhpc0FuZ2xlKG5ldyBNYXRoVXRpbC5WZWN0b3IzKDAsIDAsIDEpLCBNYXRoLlBJIC8gMik7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgY2FzZSAxODA6XHJcbiAgICAgIC8vIFRPRE8uXHJcbiAgICAgIGJyZWFrO1xyXG4gIH1cclxuICB0aGlzLmludmVyc2VXb3JsZFRvU2NyZWVuUS5jb3B5KHRoaXMud29ybGRUb1NjcmVlblEpO1xyXG4gIHRoaXMuaW52ZXJzZVdvcmxkVG9TY3JlZW5RLmludmVyc2UoKTtcclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gRnVzaW9uUG9zZVNlbnNvcjtcclxuXHJcbn0se1wiLi4vbWF0aC11dGlsLmpzXCI6MTQsXCIuLi90b3VjaC1wYW5uZXIuanNcIjoyMSxcIi4uL3V0aWwuanNcIjoyMixcIi4vY29tcGxlbWVudGFyeS1maWx0ZXIuanNcIjoxNyxcIi4vcG9zZS1wcmVkaWN0b3IuanNcIjoxOX1dLDE5OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcclxuLypcclxuICogQ29weXJpZ2h0IDIwMTUgR29vZ2xlIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG52YXIgTWF0aFV0aWwgPSBfZGVyZXFfKCcuLi9tYXRoLXV0aWwuanMnKTtcclxudmFyIERFQlVHID0gZmFsc2U7XHJcblxyXG4vKipcclxuICogR2l2ZW4gYW4gb3JpZW50YXRpb24gYW5kIHRoZSBneXJvc2NvcGUgZGF0YSwgcHJlZGljdHMgdGhlIGZ1dHVyZSBvcmllbnRhdGlvblxyXG4gKiBvZiB0aGUgaGVhZC4gVGhpcyBtYWtlcyByZW5kZXJpbmcgYXBwZWFyIGZhc3Rlci5cclxuICpcclxuICogQWxzbyBzZWU6IGh0dHA6Ly9tc2wuY3MudWl1Yy5lZHUvfmxhdmFsbGUvcGFwZXJzL0xhdlllckthdEFudDE0LnBkZlxyXG4gKlxyXG4gKiBAcGFyYW0ge051bWJlcn0gcHJlZGljdGlvblRpbWVTIHRpbWUgZnJvbSBoZWFkIG1vdmVtZW50IHRvIHRoZSBhcHBlYXJhbmNlIG9mXHJcbiAqIHRoZSBjb3JyZXNwb25kaW5nIGltYWdlLlxyXG4gKi9cclxuZnVuY3Rpb24gUG9zZVByZWRpY3RvcihwcmVkaWN0aW9uVGltZVMpIHtcclxuICB0aGlzLnByZWRpY3Rpb25UaW1lUyA9IHByZWRpY3Rpb25UaW1lUztcclxuXHJcbiAgLy8gVGhlIHF1YXRlcm5pb24gY29ycmVzcG9uZGluZyB0byB0aGUgcHJldmlvdXMgc3RhdGUuXHJcbiAgdGhpcy5wcmV2aW91c1EgPSBuZXcgTWF0aFV0aWwuUXVhdGVybmlvbigpO1xyXG4gIC8vIFByZXZpb3VzIHRpbWUgYSBwcmVkaWN0aW9uIG9jY3VycmVkLlxyXG4gIHRoaXMucHJldmlvdXNUaW1lc3RhbXBTID0gbnVsbDtcclxuXHJcbiAgLy8gVGhlIGRlbHRhIHF1YXRlcm5pb24gdGhhdCBhZGp1c3RzIHRoZSBjdXJyZW50IHBvc2UuXHJcbiAgdGhpcy5kZWx0YVEgPSBuZXcgTWF0aFV0aWwuUXVhdGVybmlvbigpO1xyXG4gIC8vIFRoZSBvdXRwdXQgcXVhdGVybmlvbi5cclxuICB0aGlzLm91dFEgPSBuZXcgTWF0aFV0aWwuUXVhdGVybmlvbigpO1xyXG59XHJcblxyXG5Qb3NlUHJlZGljdG9yLnByb3RvdHlwZS5nZXRQcmVkaWN0aW9uID0gZnVuY3Rpb24oY3VycmVudFEsIGd5cm8sIHRpbWVzdGFtcFMpIHtcclxuICBpZiAoIXRoaXMucHJldmlvdXNUaW1lc3RhbXBTKSB7XHJcbiAgICB0aGlzLnByZXZpb3VzUS5jb3B5KGN1cnJlbnRRKTtcclxuICAgIHRoaXMucHJldmlvdXNUaW1lc3RhbXBTID0gdGltZXN0YW1wUztcclxuICAgIHJldHVybiBjdXJyZW50UTtcclxuICB9XHJcblxyXG4gIC8vIENhbGN1bGF0ZSBheGlzIGFuZCBhbmdsZSBiYXNlZCBvbiBneXJvc2NvcGUgcm90YXRpb24gcmF0ZSBkYXRhLlxyXG4gIHZhciBheGlzID0gbmV3IE1hdGhVdGlsLlZlY3RvcjMoKTtcclxuICBheGlzLmNvcHkoZ3lybyk7XHJcbiAgYXhpcy5ub3JtYWxpemUoKTtcclxuXHJcbiAgdmFyIGFuZ3VsYXJTcGVlZCA9IGd5cm8ubGVuZ3RoKCk7XHJcblxyXG4gIC8vIElmIHdlJ3JlIHJvdGF0aW5nIHNsb3dseSwgZG9uJ3QgZG8gcHJlZGljdGlvbi5cclxuICBpZiAoYW5ndWxhclNwZWVkIDwgTWF0aFV0aWwuZGVnVG9SYWQgKiAyMCkge1xyXG4gICAgaWYgKERFQlVHKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdNb3Zpbmcgc2xvd2x5LCBhdCAlcyBkZWcvczogbm8gcHJlZGljdGlvbicsXHJcbiAgICAgICAgICAgICAgICAgIChNYXRoVXRpbC5yYWRUb0RlZyAqIGFuZ3VsYXJTcGVlZCkudG9GaXhlZCgxKSk7XHJcbiAgICB9XHJcbiAgICB0aGlzLm91dFEuY29weShjdXJyZW50USk7XHJcbiAgICB0aGlzLnByZXZpb3VzUS5jb3B5KGN1cnJlbnRRKTtcclxuICAgIHJldHVybiB0aGlzLm91dFE7XHJcbiAgfVxyXG5cclxuICAvLyBHZXQgdGhlIHByZWRpY3RlZCBhbmdsZSBiYXNlZCBvbiB0aGUgdGltZSBkZWx0YSBhbmQgbGF0ZW5jeS5cclxuICB2YXIgZGVsdGFUID0gdGltZXN0YW1wUyAtIHRoaXMucHJldmlvdXNUaW1lc3RhbXBTO1xyXG4gIHZhciBwcmVkaWN0QW5nbGUgPSBhbmd1bGFyU3BlZWQgKiB0aGlzLnByZWRpY3Rpb25UaW1lUztcclxuXHJcbiAgdGhpcy5kZWx0YVEuc2V0RnJvbUF4aXNBbmdsZShheGlzLCBwcmVkaWN0QW5nbGUpO1xyXG4gIHRoaXMub3V0US5jb3B5KHRoaXMucHJldmlvdXNRKTtcclxuICB0aGlzLm91dFEubXVsdGlwbHkodGhpcy5kZWx0YVEpO1xyXG5cclxuICB0aGlzLnByZXZpb3VzUS5jb3B5KGN1cnJlbnRRKTtcclxuXHJcbiAgcmV0dXJuIHRoaXMub3V0UTtcclxufTtcclxuXHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IFBvc2VQcmVkaWN0b3I7XHJcblxyXG59LHtcIi4uL21hdGgtdXRpbC5qc1wiOjE0fV0sMjA6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xyXG5mdW5jdGlvbiBTZW5zb3JTYW1wbGUoc2FtcGxlLCB0aW1lc3RhbXBTKSB7XHJcbiAgdGhpcy5zZXQoc2FtcGxlLCB0aW1lc3RhbXBTKTtcclxufTtcclxuXHJcblNlbnNvclNhbXBsZS5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24oc2FtcGxlLCB0aW1lc3RhbXBTKSB7XHJcbiAgdGhpcy5zYW1wbGUgPSBzYW1wbGU7XHJcbiAgdGhpcy50aW1lc3RhbXBTID0gdGltZXN0YW1wUztcclxufTtcclxuXHJcblNlbnNvclNhbXBsZS5wcm90b3R5cGUuY29weSA9IGZ1bmN0aW9uKHNlbnNvclNhbXBsZSkge1xyXG4gIHRoaXMuc2V0KHNlbnNvclNhbXBsZS5zYW1wbGUsIHNlbnNvclNhbXBsZS50aW1lc3RhbXBTKTtcclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gU2Vuc29yU2FtcGxlO1xyXG5cclxufSx7fV0sMjE6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xyXG4vKlxyXG4gKiBDb3B5cmlnaHQgMjAxNSBHb29nbGUgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBNYXRoVXRpbCA9IF9kZXJlcV8oJy4vbWF0aC11dGlsLmpzJyk7XHJcbnZhciBVdGlsID0gX2RlcmVxXygnLi91dGlsLmpzJyk7XHJcblxyXG52YXIgUk9UQVRFX1NQRUVEID0gMC41O1xyXG4vKipcclxuICogUHJvdmlkZXMgYSBxdWF0ZXJuaW9uIHJlc3BvbnNpYmxlIGZvciBwcmUtcGFubmluZyB0aGUgc2NlbmUgYmVmb3JlIGZ1cnRoZXJcclxuICogdHJhbnNmb3JtYXRpb25zIGR1ZSB0byBkZXZpY2Ugc2Vuc29ycy5cclxuICovXHJcbmZ1bmN0aW9uIFRvdWNoUGFubmVyKCkge1xyXG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgdGhpcy5vblRvdWNoU3RhcnRfLmJpbmQodGhpcykpO1xyXG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCB0aGlzLm9uVG91Y2hNb3ZlXy5iaW5kKHRoaXMpKTtcclxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCB0aGlzLm9uVG91Y2hFbmRfLmJpbmQodGhpcykpO1xyXG5cclxuICB0aGlzLmlzVG91Y2hpbmcgPSBmYWxzZTtcclxuICB0aGlzLnJvdGF0ZVN0YXJ0ID0gbmV3IE1hdGhVdGlsLlZlY3RvcjIoKTtcclxuICB0aGlzLnJvdGF0ZUVuZCA9IG5ldyBNYXRoVXRpbC5WZWN0b3IyKCk7XHJcbiAgdGhpcy5yb3RhdGVEZWx0YSA9IG5ldyBNYXRoVXRpbC5WZWN0b3IyKCk7XHJcblxyXG4gIHRoaXMudGhldGEgPSAwO1xyXG4gIHRoaXMub3JpZW50YXRpb24gPSBuZXcgTWF0aFV0aWwuUXVhdGVybmlvbigpO1xyXG59XHJcblxyXG5Ub3VjaFBhbm5lci5wcm90b3R5cGUuZ2V0T3JpZW50YXRpb24gPSBmdW5jdGlvbigpIHtcclxuICB0aGlzLm9yaWVudGF0aW9uLnNldEZyb21FdWxlclhZWigwLCAwLCB0aGlzLnRoZXRhKTtcclxuICByZXR1cm4gdGhpcy5vcmllbnRhdGlvbjtcclxufTtcclxuXHJcblRvdWNoUGFubmVyLnByb3RvdHlwZS5yZXNldFNlbnNvciA9IGZ1bmN0aW9uKCkge1xyXG4gIHRoaXMudGhldGEgPSAwO1xyXG59O1xyXG5cclxuVG91Y2hQYW5uZXIucHJvdG90eXBlLm9uVG91Y2hTdGFydF8gPSBmdW5jdGlvbihlKSB7XHJcbiAgLy8gT25seSByZXNwb25kIGlmIHRoZXJlIGlzIGV4YWN0bHkgb25lIHRvdWNoLlxyXG4gIGlmIChlLnRvdWNoZXMubGVuZ3RoICE9IDEpIHtcclxuICAgIHJldHVybjtcclxuICB9XHJcbiAgdGhpcy5yb3RhdGVTdGFydC5zZXQoZS50b3VjaGVzWzBdLnBhZ2VYLCBlLnRvdWNoZXNbMF0ucGFnZVkpO1xyXG4gIHRoaXMuaXNUb3VjaGluZyA9IHRydWU7XHJcbn07XHJcblxyXG5Ub3VjaFBhbm5lci5wcm90b3R5cGUub25Ub3VjaE1vdmVfID0gZnVuY3Rpb24oZSkge1xyXG4gIGlmICghdGhpcy5pc1RvdWNoaW5nKSB7XHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG4gIHRoaXMucm90YXRlRW5kLnNldChlLnRvdWNoZXNbMF0ucGFnZVgsIGUudG91Y2hlc1swXS5wYWdlWSk7XHJcbiAgdGhpcy5yb3RhdGVEZWx0YS5zdWJWZWN0b3JzKHRoaXMucm90YXRlRW5kLCB0aGlzLnJvdGF0ZVN0YXJ0KTtcclxuICB0aGlzLnJvdGF0ZVN0YXJ0LmNvcHkodGhpcy5yb3RhdGVFbmQpO1xyXG5cclxuICAvLyBPbiBpT1MsIGRpcmVjdGlvbiBpcyBpbnZlcnRlZC5cclxuICBpZiAoVXRpbC5pc0lPUygpKSB7XHJcbiAgICB0aGlzLnJvdGF0ZURlbHRhLnggKj0gLTE7XHJcbiAgfVxyXG5cclxuICB2YXIgZWxlbWVudCA9IGRvY3VtZW50LmJvZHk7XHJcbiAgdGhpcy50aGV0YSArPSAyICogTWF0aC5QSSAqIHRoaXMucm90YXRlRGVsdGEueCAvIGVsZW1lbnQuY2xpZW50V2lkdGggKiBST1RBVEVfU1BFRUQ7XHJcbn07XHJcblxyXG5Ub3VjaFBhbm5lci5wcm90b3R5cGUub25Ub3VjaEVuZF8gPSBmdW5jdGlvbihlKSB7XHJcbiAgdGhpcy5pc1RvdWNoaW5nID0gZmFsc2U7XHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IFRvdWNoUGFubmVyO1xyXG5cclxufSx7XCIuL21hdGgtdXRpbC5qc1wiOjE0LFwiLi91dGlsLmpzXCI6MjJ9XSwyMjpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XHJcbi8qXHJcbiAqIENvcHlyaWdodCAyMDE1IEdvb2dsZSBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuXHJcbnZhciBvYmplY3RBc3NpZ24gPSBfZGVyZXFfKCdvYmplY3QtYXNzaWduJyk7XHJcblxyXG52YXIgVXRpbCA9IHdpbmRvdy5VdGlsIHx8IHt9O1xyXG5cclxuVXRpbC5NSU5fVElNRVNURVAgPSAwLjAwMTtcclxuVXRpbC5NQVhfVElNRVNURVAgPSAxO1xyXG5cclxuVXRpbC5iYXNlNjQgPSBmdW5jdGlvbihtaW1lVHlwZSwgYmFzZTY0KSB7XHJcbiAgcmV0dXJuICdkYXRhOicgKyBtaW1lVHlwZSArICc7YmFzZTY0LCcgKyBiYXNlNjQ7XHJcbn07XHJcblxyXG5VdGlsLmNsYW1wID0gZnVuY3Rpb24odmFsdWUsIG1pbiwgbWF4KSB7XHJcbiAgcmV0dXJuIE1hdGgubWluKE1hdGgubWF4KG1pbiwgdmFsdWUpLCBtYXgpO1xyXG59O1xyXG5cclxuVXRpbC5sZXJwID0gZnVuY3Rpb24oYSwgYiwgdCkge1xyXG4gIHJldHVybiBhICsgKChiIC0gYSkgKiB0KTtcclxufTtcclxuXHJcblV0aWwuaXNJT1MgPSAoZnVuY3Rpb24oKSB7XHJcbiAgdmFyIGlzSU9TID0gL2lQYWR8aVBob25lfGlQb2QvLnRlc3QobmF2aWdhdG9yLnBsYXRmb3JtKTtcclxuICByZXR1cm4gZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gaXNJT1M7XHJcbiAgfTtcclxufSkoKTtcclxuXHJcblV0aWwuaXNTYWZhcmkgPSAoZnVuY3Rpb24oKSB7XHJcbiAgdmFyIGlzU2FmYXJpID0gL14oKD8hY2hyb21lfGFuZHJvaWQpLikqc2FmYXJpL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTtcclxuICByZXR1cm4gZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gaXNTYWZhcmk7XHJcbiAgfTtcclxufSkoKTtcclxuXHJcblV0aWwuaXNGaXJlZm94QW5kcm9pZCA9IChmdW5jdGlvbigpIHtcclxuICB2YXIgaXNGaXJlZm94QW5kcm9pZCA9IG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZignRmlyZWZveCcpICE9PSAtMSAmJlxyXG4gICAgICBuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoJ0FuZHJvaWQnKSAhPT0gLTE7XHJcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xyXG4gICAgcmV0dXJuIGlzRmlyZWZveEFuZHJvaWQ7XHJcbiAgfTtcclxufSkoKTtcclxuXHJcblV0aWwuaXNMYW5kc2NhcGVNb2RlID0gZnVuY3Rpb24oKSB7XHJcbiAgcmV0dXJuICh3aW5kb3cub3JpZW50YXRpb24gPT0gOTAgfHwgd2luZG93Lm9yaWVudGF0aW9uID09IC05MCk7XHJcbn07XHJcblxyXG4vLyBIZWxwZXIgbWV0aG9kIHRvIHZhbGlkYXRlIHRoZSB0aW1lIHN0ZXBzIG9mIHNlbnNvciB0aW1lc3RhbXBzLlxyXG5VdGlsLmlzVGltZXN0YW1wRGVsdGFWYWxpZCA9IGZ1bmN0aW9uKHRpbWVzdGFtcERlbHRhUykge1xyXG4gIGlmIChpc05hTih0aW1lc3RhbXBEZWx0YVMpKSB7XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfVxyXG4gIGlmICh0aW1lc3RhbXBEZWx0YVMgPD0gVXRpbC5NSU5fVElNRVNURVApIHtcclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9XHJcbiAgaWYgKHRpbWVzdGFtcERlbHRhUyA+IFV0aWwuTUFYX1RJTUVTVEVQKSB7XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfVxyXG4gIHJldHVybiB0cnVlO1xyXG59O1xyXG5cclxuVXRpbC5nZXRTY3JlZW5XaWR0aCA9IGZ1bmN0aW9uKCkge1xyXG4gIHJldHVybiBNYXRoLm1heCh3aW5kb3cuc2NyZWVuLndpZHRoLCB3aW5kb3cuc2NyZWVuLmhlaWdodCkgKlxyXG4gICAgICB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbztcclxufTtcclxuXHJcblV0aWwuZ2V0U2NyZWVuSGVpZ2h0ID0gZnVuY3Rpb24oKSB7XHJcbiAgcmV0dXJuIE1hdGgubWluKHdpbmRvdy5zY3JlZW4ud2lkdGgsIHdpbmRvdy5zY3JlZW4uaGVpZ2h0KSAqXHJcbiAgICAgIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvO1xyXG59O1xyXG5cclxuVXRpbC5yZXF1ZXN0RnVsbHNjcmVlbiA9IGZ1bmN0aW9uKGVsZW1lbnQpIHtcclxuICBpZiAoZWxlbWVudC5yZXF1ZXN0RnVsbHNjcmVlbikge1xyXG4gICAgZWxlbWVudC5yZXF1ZXN0RnVsbHNjcmVlbigpO1xyXG4gIH0gZWxzZSBpZiAoZWxlbWVudC53ZWJraXRSZXF1ZXN0RnVsbHNjcmVlbikge1xyXG4gICAgZWxlbWVudC53ZWJraXRSZXF1ZXN0RnVsbHNjcmVlbigpO1xyXG4gIH0gZWxzZSBpZiAoZWxlbWVudC5tb3pSZXF1ZXN0RnVsbFNjcmVlbikge1xyXG4gICAgZWxlbWVudC5tb3pSZXF1ZXN0RnVsbFNjcmVlbigpO1xyXG4gIH0gZWxzZSBpZiAoZWxlbWVudC5tc1JlcXVlc3RGdWxsc2NyZWVuKSB7XHJcbiAgICBlbGVtZW50Lm1zUmVxdWVzdEZ1bGxzY3JlZW4oKTtcclxuICB9IGVsc2Uge1xyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHRydWU7XHJcbn07XHJcblxyXG5VdGlsLmV4aXRGdWxsc2NyZWVuID0gZnVuY3Rpb24oKSB7XHJcbiAgaWYgKGRvY3VtZW50LmV4aXRGdWxsc2NyZWVuKSB7XHJcbiAgICBkb2N1bWVudC5leGl0RnVsbHNjcmVlbigpO1xyXG4gIH0gZWxzZSBpZiAoZG9jdW1lbnQud2Via2l0RXhpdEZ1bGxzY3JlZW4pIHtcclxuICAgIGRvY3VtZW50LndlYmtpdEV4aXRGdWxsc2NyZWVuKCk7XHJcbiAgfSBlbHNlIGlmIChkb2N1bWVudC5tb3pDYW5jZWxGdWxsU2NyZWVuKSB7XHJcbiAgICBkb2N1bWVudC5tb3pDYW5jZWxGdWxsU2NyZWVuKCk7XHJcbiAgfSBlbHNlIGlmIChkb2N1bWVudC5tc0V4aXRGdWxsc2NyZWVuKSB7XHJcbiAgICBkb2N1bWVudC5tc0V4aXRGdWxsc2NyZWVuKCk7XHJcbiAgfSBlbHNlIHtcclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9XHJcblxyXG4gIHJldHVybiB0cnVlO1xyXG59O1xyXG5cclxuVXRpbC5nZXRGdWxsc2NyZWVuRWxlbWVudCA9IGZ1bmN0aW9uKCkge1xyXG4gIHJldHVybiBkb2N1bWVudC5mdWxsc2NyZWVuRWxlbWVudCB8fFxyXG4gICAgICBkb2N1bWVudC53ZWJraXRGdWxsc2NyZWVuRWxlbWVudCB8fFxyXG4gICAgICBkb2N1bWVudC5tb3pGdWxsU2NyZWVuRWxlbWVudCB8fFxyXG4gICAgICBkb2N1bWVudC5tc0Z1bGxzY3JlZW5FbGVtZW50O1xyXG59O1xyXG5cclxuVXRpbC5saW5rUHJvZ3JhbSA9IGZ1bmN0aW9uKGdsLCB2ZXJ0ZXhTb3VyY2UsIGZyYWdtZW50U291cmNlLCBhdHRyaWJMb2NhdGlvbk1hcCkge1xyXG4gIC8vIE5vIGVycm9yIGNoZWNraW5nIGZvciBicmV2aXR5LlxyXG4gIHZhciB2ZXJ0ZXhTaGFkZXIgPSBnbC5jcmVhdGVTaGFkZXIoZ2wuVkVSVEVYX1NIQURFUik7XHJcbiAgZ2wuc2hhZGVyU291cmNlKHZlcnRleFNoYWRlciwgdmVydGV4U291cmNlKTtcclxuICBnbC5jb21waWxlU2hhZGVyKHZlcnRleFNoYWRlcik7XHJcblxyXG4gIHZhciBmcmFnbWVudFNoYWRlciA9IGdsLmNyZWF0ZVNoYWRlcihnbC5GUkFHTUVOVF9TSEFERVIpO1xyXG4gIGdsLnNoYWRlclNvdXJjZShmcmFnbWVudFNoYWRlciwgZnJhZ21lbnRTb3VyY2UpO1xyXG4gIGdsLmNvbXBpbGVTaGFkZXIoZnJhZ21lbnRTaGFkZXIpO1xyXG5cclxuICB2YXIgcHJvZ3JhbSA9IGdsLmNyZWF0ZVByb2dyYW0oKTtcclxuICBnbC5hdHRhY2hTaGFkZXIocHJvZ3JhbSwgdmVydGV4U2hhZGVyKTtcclxuICBnbC5hdHRhY2hTaGFkZXIocHJvZ3JhbSwgZnJhZ21lbnRTaGFkZXIpO1xyXG5cclxuICBmb3IgKHZhciBhdHRyaWJOYW1lIGluIGF0dHJpYkxvY2F0aW9uTWFwKVxyXG4gICAgZ2wuYmluZEF0dHJpYkxvY2F0aW9uKHByb2dyYW0sIGF0dHJpYkxvY2F0aW9uTWFwW2F0dHJpYk5hbWVdLCBhdHRyaWJOYW1lKTtcclxuXHJcbiAgZ2wubGlua1Byb2dyYW0ocHJvZ3JhbSk7XHJcblxyXG4gIGdsLmRlbGV0ZVNoYWRlcih2ZXJ0ZXhTaGFkZXIpO1xyXG4gIGdsLmRlbGV0ZVNoYWRlcihmcmFnbWVudFNoYWRlcik7XHJcblxyXG4gIHJldHVybiBwcm9ncmFtO1xyXG59O1xyXG5cclxuVXRpbC5nZXRQcm9ncmFtVW5pZm9ybXMgPSBmdW5jdGlvbihnbCwgcHJvZ3JhbSkge1xyXG4gIHZhciB1bmlmb3JtcyA9IHt9O1xyXG4gIHZhciB1bmlmb3JtQ291bnQgPSBnbC5nZXRQcm9ncmFtUGFyYW1ldGVyKHByb2dyYW0sIGdsLkFDVElWRV9VTklGT1JNUyk7XHJcbiAgdmFyIHVuaWZvcm1OYW1lID0gJyc7XHJcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCB1bmlmb3JtQ291bnQ7IGkrKykge1xyXG4gICAgdmFyIHVuaWZvcm1JbmZvID0gZ2wuZ2V0QWN0aXZlVW5pZm9ybShwcm9ncmFtLCBpKTtcclxuICAgIHVuaWZvcm1OYW1lID0gdW5pZm9ybUluZm8ubmFtZS5yZXBsYWNlKCdbMF0nLCAnJyk7XHJcbiAgICB1bmlmb3Jtc1t1bmlmb3JtTmFtZV0gPSBnbC5nZXRVbmlmb3JtTG9jYXRpb24ocHJvZ3JhbSwgdW5pZm9ybU5hbWUpO1xyXG4gIH1cclxuICByZXR1cm4gdW5pZm9ybXM7XHJcbn07XHJcblxyXG5VdGlsLm9ydGhvTWF0cml4ID0gZnVuY3Rpb24gKG91dCwgbGVmdCwgcmlnaHQsIGJvdHRvbSwgdG9wLCBuZWFyLCBmYXIpIHtcclxuICB2YXIgbHIgPSAxIC8gKGxlZnQgLSByaWdodCksXHJcbiAgICAgIGJ0ID0gMSAvIChib3R0b20gLSB0b3ApLFxyXG4gICAgICBuZiA9IDEgLyAobmVhciAtIGZhcik7XHJcbiAgb3V0WzBdID0gLTIgKiBscjtcclxuICBvdXRbMV0gPSAwO1xyXG4gIG91dFsyXSA9IDA7XHJcbiAgb3V0WzNdID0gMDtcclxuICBvdXRbNF0gPSAwO1xyXG4gIG91dFs1XSA9IC0yICogYnQ7XHJcbiAgb3V0WzZdID0gMDtcclxuICBvdXRbN10gPSAwO1xyXG4gIG91dFs4XSA9IDA7XHJcbiAgb3V0WzldID0gMDtcclxuICBvdXRbMTBdID0gMiAqIG5mO1xyXG4gIG91dFsxMV0gPSAwO1xyXG4gIG91dFsxMl0gPSAobGVmdCArIHJpZ2h0KSAqIGxyO1xyXG4gIG91dFsxM10gPSAodG9wICsgYm90dG9tKSAqIGJ0O1xyXG4gIG91dFsxNF0gPSAoZmFyICsgbmVhcikgKiBuZjtcclxuICBvdXRbMTVdID0gMTtcclxuICByZXR1cm4gb3V0O1xyXG59O1xyXG5cclxuVXRpbC5pc01vYmlsZSA9IGZ1bmN0aW9uKCkge1xyXG4gIHZhciBjaGVjayA9IGZhbHNlO1xyXG4gIChmdW5jdGlvbihhKXtpZigvKGFuZHJvaWR8YmJcXGQrfG1lZWdvKS4rbW9iaWxlfGF2YW50Z298YmFkYVxcL3xibGFja2JlcnJ5fGJsYXplcnxjb21wYWx8ZWxhaW5lfGZlbm5lY3xoaXB0b3B8aWVtb2JpbGV8aXAoaG9uZXxvZCl8aXJpc3xraW5kbGV8bGdlIHxtYWVtb3xtaWRwfG1tcHxtb2JpbGUuK2ZpcmVmb3h8bmV0ZnJvbnR8b3BlcmEgbShvYnxpbilpfHBhbG0oIG9zKT98cGhvbmV8cChpeGl8cmUpXFwvfHBsdWNrZXJ8cG9ja2V0fHBzcHxzZXJpZXMoNHw2KTB8c3ltYmlhbnx0cmVvfHVwXFwuKGJyb3dzZXJ8bGluayl8dm9kYWZvbmV8d2FwfHdpbmRvd3MgY2V8eGRhfHhpaW5vL2kudGVzdChhKXx8LzEyMDd8NjMxMHw2NTkwfDNnc298NHRocHw1MFsxLTZdaXw3NzBzfDgwMnN8YSB3YXxhYmFjfGFjKGVyfG9vfHNcXC0pfGFpKGtvfHJuKXxhbChhdnxjYXxjbyl8YW1vaXxhbihleHxueXx5dyl8YXB0dXxhcihjaHxnbyl8YXModGV8dXMpfGF0dHd8YXUoZGl8XFwtbXxyIHxzICl8YXZhbnxiZShja3xsbHxucSl8YmkobGJ8cmQpfGJsKGFjfGF6KXxicihlfHYpd3xidW1ifGJ3XFwtKG58dSl8YzU1XFwvfGNhcGl8Y2N3YXxjZG1cXC18Y2VsbHxjaHRtfGNsZGN8Y21kXFwtfGNvKG1wfG5kKXxjcmF3fGRhKGl0fGxsfG5nKXxkYnRlfGRjXFwtc3xkZXZpfGRpY2F8ZG1vYnxkbyhjfHApb3xkcygxMnxcXC1kKXxlbCg0OXxhaSl8ZW0obDJ8dWwpfGVyKGljfGswKXxlc2w4fGV6KFs0LTddMHxvc3x3YXx6ZSl8ZmV0Y3xmbHkoXFwtfF8pfGcxIHV8ZzU2MHxnZW5lfGdmXFwtNXxnXFwtbW98Z28oXFwud3xvZCl8Z3IoYWR8dW4pfGhhaWV8aGNpdHxoZFxcLShtfHB8dCl8aGVpXFwtfGhpKHB0fHRhKXxocCggaXxpcCl8aHNcXC1jfGh0KGMoXFwtfCB8X3xhfGd8cHxzfHQpfHRwKXxodShhd3x0Yyl8aVxcLSgyMHxnb3xtYSl8aTIzMHxpYWMoIHxcXC18XFwvKXxpYnJvfGlkZWF8aWcwMXxpa29tfGltMWt8aW5ub3xpcGFxfGlyaXN8amEodHx2KWF8amJyb3xqZW11fGppZ3N8a2RkaXxrZWppfGtndCggfFxcLyl8a2xvbnxrcHQgfGt3Y1xcLXxreW8oY3xrKXxsZShub3x4aSl8bGcoIGd8XFwvKGt8bHx1KXw1MHw1NHxcXC1bYS13XSl8bGlid3xseW54fG0xXFwtd3xtM2dhfG01MFxcL3xtYSh0ZXx1aXx4byl8bWMoMDF8MjF8Y2EpfG1cXC1jcnxtZShyY3xyaSl8bWkobzh8b2F8dHMpfG1tZWZ8bW8oMDF8MDJ8Yml8ZGV8ZG98dChcXC18IHxvfHYpfHp6KXxtdCg1MHxwMXx2ICl8bXdicHxteXdhfG4xMFswLTJdfG4yMFsyLTNdfG4zMCgwfDIpfG41MCgwfDJ8NSl8bjcoMCgwfDEpfDEwKXxuZSgoY3xtKVxcLXxvbnx0Znx3Znx3Z3x3dCl8bm9rKDZ8aSl8bnpwaHxvMmltfG9wKHRpfHd2KXxvcmFufG93ZzF8cDgwMHxwYW4oYXxkfHQpfHBkeGd8cGcoMTN8XFwtKFsxLThdfGMpKXxwaGlsfHBpcmV8cGwoYXl8dWMpfHBuXFwtMnxwbyhja3xydHxzZSl8cHJveHxwc2lvfHB0XFwtZ3xxYVxcLWF8cWMoMDd8MTJ8MjF8MzJ8NjB8XFwtWzItN118aVxcLSl8cXRla3xyMzgwfHI2MDB8cmFrc3xyaW05fHJvKHZlfHpvKXxzNTVcXC98c2EoZ2V8bWF8bW18bXN8bnl8dmEpfHNjKDAxfGhcXC18b298cFxcLSl8c2RrXFwvfHNlKGMoXFwtfDB8MSl8NDd8bWN8bmR8cmkpfHNnaFxcLXxzaGFyfHNpZShcXC18bSl8c2tcXC0wfHNsKDQ1fGlkKXxzbShhbHxhcnxiM3xpdHx0NSl8c28oZnR8bnkpfHNwKDAxfGhcXC18dlxcLXx2ICl8c3koMDF8bWIpfHQyKDE4fDUwKXx0NigwMHwxMHwxOCl8dGEoZ3R8bGspfHRjbFxcLXx0ZGdcXC18dGVsKGl8bSl8dGltXFwtfHRcXC1tb3x0byhwbHxzaCl8dHMoNzB8bVxcLXxtM3xtNSl8dHhcXC05fHVwKFxcLmJ8ZzF8c2kpfHV0c3R8djQwMHx2NzUwfHZlcml8dmkocmd8dGUpfHZrKDQwfDVbMC0zXXxcXC12KXx2bTQwfHZvZGF8dnVsY3x2eCg1Mnw1M3w2MHw2MXw3MHw4MHw4MXw4M3w4NXw5OCl8dzNjKFxcLXwgKXx3ZWJjfHdoaXR8d2koZyB8bmN8bncpfHdtbGJ8d29udXx4NzAwfHlhc1xcLXx5b3VyfHpldG98enRlXFwtL2kudGVzdChhLnN1YnN0cigwLDQpKSljaGVjayA9IHRydWV9KShuYXZpZ2F0b3IudXNlckFnZW50fHxuYXZpZ2F0b3IudmVuZG9yfHx3aW5kb3cub3BlcmEpO1xyXG4gIHJldHVybiBjaGVjaztcclxufTtcclxuXHJcblV0aWwuZXh0ZW5kID0gb2JqZWN0QXNzaWduO1xyXG5cclxuVXRpbC5zYWZhcmlDc3NTaXplV29ya2Fyb3VuZCA9IGZ1bmN0aW9uKGNhbnZhcykge1xyXG4gIC8vIFRPRE8oc211cyk6IFJlbW92ZSB0aGlzIHdvcmthcm91bmQgd2hlbiBTYWZhcmkgZm9yIGlPUyBpcyBmaXhlZC5cclxuICAvLyBpT1Mgb25seSB3b3JrYXJvdW5kIChmb3IgaHR0cHM6Ly9idWdzLndlYmtpdC5vcmcvc2hvd19idWcuY2dpP2lkPTE1MjU1NikuXHJcbiAgLy9cclxuICAvLyBcIlRvIHRoZSBsYXN0IEkgZ3JhcHBsZSB3aXRoIHRoZWU7XHJcbiAgLy8gIGZyb20gaGVsbCdzIGhlYXJ0IEkgc3RhYiBhdCB0aGVlO1xyXG4gIC8vICBmb3IgaGF0ZSdzIHNha2UgSSBzcGl0IG15IGxhc3QgYnJlYXRoIGF0IHRoZWUuXCJcclxuICAvLyAtLSBNb2J5IERpY2ssIGJ5IEhlcm1hbiBNZWx2aWxsZVxyXG4gIGlmIChVdGlsLmlzSU9TKCkpIHtcclxuICAgIHZhciB3aWR0aCA9IGNhbnZhcy5zdHlsZS53aWR0aDtcclxuICAgIHZhciBoZWlnaHQgPSBjYW52YXMuc3R5bGUuaGVpZ2h0O1xyXG4gICAgY2FudmFzLnN0eWxlLndpZHRoID0gKHBhcnNlSW50KHdpZHRoKSArIDEpICsgJ3B4JztcclxuICAgIGNhbnZhcy5zdHlsZS5oZWlnaHQgPSAocGFyc2VJbnQoaGVpZ2h0KSkgKyAncHgnO1xyXG4gICAgY29uc29sZS5sb2coJ1Jlc2V0dGluZyB3aWR0aCB0by4uLicsIHdpZHRoKTtcclxuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdEb25lLiBXaWR0aCBpcyBub3cnLCB3aWR0aCk7XHJcbiAgICAgIGNhbnZhcy5zdHlsZS53aWR0aCA9IHdpZHRoO1xyXG4gICAgICBjYW52YXMuc3R5bGUuaGVpZ2h0ID0gaGVpZ2h0O1xyXG4gICAgfSwgMTAwKTtcclxuICB9XHJcblxyXG4gIC8vIERlYnVnIG9ubHkuXHJcbiAgd2luZG93LlV0aWwgPSBVdGlsO1xyXG4gIHdpbmRvdy5jYW52YXMgPSBjYW52YXM7XHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IFV0aWw7XHJcblxyXG59LHtcIm9iamVjdC1hc3NpZ25cIjoxfV0sMjM6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xyXG4vKlxyXG4gKiBDb3B5cmlnaHQgMjAxNSBHb29nbGUgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcblxyXG52YXIgRW1pdHRlciA9IF9kZXJlcV8oJy4vZW1pdHRlci5qcycpO1xyXG52YXIgVXRpbCA9IF9kZXJlcV8oJy4vdXRpbC5qcycpO1xyXG52YXIgRGV2aWNlSW5mbyA9IF9kZXJlcV8oJy4vZGV2aWNlLWluZm8uanMnKTtcclxuXHJcbnZhciBERUZBVUxUX1ZJRVdFUiA9ICdDYXJkYm9hcmRWMSc7XHJcbnZhciBWSUVXRVJfS0VZID0gJ1dFQlZSX0NBUkRCT0FSRF9WSUVXRVInO1xyXG52YXIgQ0xBU1NfTkFNRSA9ICd3ZWJ2ci1wb2x5ZmlsbC12aWV3ZXItc2VsZWN0b3InO1xyXG5cclxuLyoqXHJcbiAqIENyZWF0ZXMgYSB2aWV3ZXIgc2VsZWN0b3Igd2l0aCB0aGUgb3B0aW9ucyBzcGVjaWZpZWQuIFN1cHBvcnRzIGJlaW5nIHNob3duXHJcbiAqIGFuZCBoaWRkZW4uIEdlbmVyYXRlcyBldmVudHMgd2hlbiB2aWV3ZXIgcGFyYW1ldGVycyBjaGFuZ2UuIEFsc28gc3VwcG9ydHNcclxuICogc2F2aW5nIHRoZSBjdXJyZW50bHkgc2VsZWN0ZWQgaW5kZXggaW4gbG9jYWxTdG9yYWdlLlxyXG4gKi9cclxuZnVuY3Rpb24gVmlld2VyU2VsZWN0b3IoKSB7XHJcbiAgLy8gVHJ5IHRvIGxvYWQgdGhlIHNlbGVjdGVkIGtleSBmcm9tIGxvY2FsIHN0b3JhZ2UuIElmIG5vbmUgZXhpc3RzLCB1c2UgdGhlXHJcbiAgLy8gZGVmYXVsdCBrZXkuXHJcbiAgdHJ5IHtcclxuICAgIHRoaXMuc2VsZWN0ZWRLZXkgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShWSUVXRVJfS0VZKSB8fCBERUZBVUxUX1ZJRVdFUjtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGxvYWQgdmlld2VyIHByb2ZpbGU6ICVzJywgZXJyb3IpO1xyXG4gIH1cclxuICB0aGlzLmRpYWxvZyA9IHRoaXMuY3JlYXRlRGlhbG9nXyhEZXZpY2VJbmZvLlZpZXdlcnMpO1xyXG4gIHRoaXMucm9vdCA9IG51bGw7XHJcbn1cclxuVmlld2VyU2VsZWN0b3IucHJvdG90eXBlID0gbmV3IEVtaXR0ZXIoKTtcclxuXHJcblZpZXdlclNlbGVjdG9yLnByb3RvdHlwZS5zaG93ID0gZnVuY3Rpb24ocm9vdCkge1xyXG4gIHRoaXMucm9vdCA9IHJvb3Q7XHJcblxyXG4gIHJvb3QuYXBwZW5kQ2hpbGQodGhpcy5kaWFsb2cpO1xyXG4gIC8vY29uc29sZS5sb2coJ1ZpZXdlclNlbGVjdG9yLnNob3cnKTtcclxuXHJcbiAgLy8gRW5zdXJlIHRoZSBjdXJyZW50bHkgc2VsZWN0ZWQgaXRlbSBpcyBjaGVja2VkLlxyXG4gIHZhciBzZWxlY3RlZCA9IHRoaXMuZGlhbG9nLnF1ZXJ5U2VsZWN0b3IoJyMnICsgdGhpcy5zZWxlY3RlZEtleSk7XHJcbiAgc2VsZWN0ZWQuY2hlY2tlZCA9IHRydWU7XHJcblxyXG4gIC8vIFNob3cgdGhlIFVJLlxyXG4gIHRoaXMuZGlhbG9nLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xyXG59O1xyXG5cclxuVmlld2VyU2VsZWN0b3IucHJvdG90eXBlLmhpZGUgPSBmdW5jdGlvbigpIHtcclxuICBpZiAodGhpcy5yb290ICYmIHRoaXMucm9vdC5jb250YWlucyh0aGlzLmRpYWxvZykpIHtcclxuICAgIHRoaXMucm9vdC5yZW1vdmVDaGlsZCh0aGlzLmRpYWxvZyk7XHJcbiAgfVxyXG4gIC8vY29uc29sZS5sb2coJ1ZpZXdlclNlbGVjdG9yLmhpZGUnKTtcclxuICB0aGlzLmRpYWxvZy5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG59O1xyXG5cclxuVmlld2VyU2VsZWN0b3IucHJvdG90eXBlLmdldEN1cnJlbnRWaWV3ZXIgPSBmdW5jdGlvbigpIHtcclxuICByZXR1cm4gRGV2aWNlSW5mby5WaWV3ZXJzW3RoaXMuc2VsZWN0ZWRLZXldO1xyXG59O1xyXG5cclxuVmlld2VyU2VsZWN0b3IucHJvdG90eXBlLmdldFNlbGVjdGVkS2V5XyA9IGZ1bmN0aW9uKCkge1xyXG4gIHZhciBpbnB1dCA9IHRoaXMuZGlhbG9nLnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W25hbWU9ZmllbGRdOmNoZWNrZWQnKTtcclxuICBpZiAoaW5wdXQpIHtcclxuICAgIHJldHVybiBpbnB1dC5pZDtcclxuICB9XHJcbiAgcmV0dXJuIG51bGw7XHJcbn07XHJcblxyXG5WaWV3ZXJTZWxlY3Rvci5wcm90b3R5cGUub25TYXZlXyA9IGZ1bmN0aW9uKCkge1xyXG4gIHRoaXMuc2VsZWN0ZWRLZXkgPSB0aGlzLmdldFNlbGVjdGVkS2V5XygpO1xyXG4gIGlmICghdGhpcy5zZWxlY3RlZEtleSB8fCAhRGV2aWNlSW5mby5WaWV3ZXJzW3RoaXMuc2VsZWN0ZWRLZXldKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdWaWV3ZXJTZWxlY3Rvci5vblNhdmVfOiB0aGlzIHNob3VsZCBuZXZlciBoYXBwZW4hJyk7XHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG5cclxuICB0aGlzLmVtaXQoJ2NoYW5nZScsIERldmljZUluZm8uVmlld2Vyc1t0aGlzLnNlbGVjdGVkS2V5XSk7XHJcblxyXG4gIC8vIEF0dGVtcHQgdG8gc2F2ZSB0aGUgdmlld2VyIHByb2ZpbGUsIGJ1dCBmYWlscyBpbiBwcml2YXRlIG1vZGUuXHJcbiAgdHJ5IHtcclxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFZJRVdFUl9LRVksIHRoaXMuc2VsZWN0ZWRLZXkpO1xyXG4gIH0gY2F0Y2goZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBzYXZlIHZpZXdlciBwcm9maWxlOiAlcycsIGVycm9yKTtcclxuICB9XHJcbiAgdGhpcy5oaWRlKCk7XHJcbn07XHJcblxyXG4vKipcclxuICogQ3JlYXRlcyB0aGUgZGlhbG9nLlxyXG4gKi9cclxuVmlld2VyU2VsZWN0b3IucHJvdG90eXBlLmNyZWF0ZURpYWxvZ18gPSBmdW5jdGlvbihvcHRpb25zKSB7XHJcbiAgdmFyIGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gIGNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKENMQVNTX05BTUUpO1xyXG4gIGNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gIC8vIENyZWF0ZSBhbiBvdmVybGF5IHRoYXQgZGltcyB0aGUgYmFja2dyb3VuZCwgYW5kIHdoaWNoIGdvZXMgYXdheSB3aGVuIHlvdVxyXG4gIC8vIHRhcCBpdC5cclxuICB2YXIgb3ZlcmxheSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gIHZhciBzID0gb3ZlcmxheS5zdHlsZTtcclxuICBzLnBvc2l0aW9uID0gJ2ZpeGVkJztcclxuICBzLmxlZnQgPSAwO1xyXG4gIHMudG9wID0gMDtcclxuICBzLndpZHRoID0gJzEwMCUnO1xyXG4gIHMuaGVpZ2h0ID0gJzEwMCUnO1xyXG4gIHMuYmFja2dyb3VuZCA9ICdyZ2JhKDAsIDAsIDAsIDAuMyknO1xyXG4gIG92ZXJsYXkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmhpZGUuYmluZCh0aGlzKSk7XHJcblxyXG4gIHZhciB3aWR0aCA9IDI4MDtcclxuICB2YXIgZGlhbG9nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgdmFyIHMgPSBkaWFsb2cuc3R5bGU7XHJcbiAgcy5ib3hTaXppbmcgPSAnYm9yZGVyLWJveCc7XHJcbiAgcy5wb3NpdGlvbiA9ICdmaXhlZCc7XHJcbiAgcy50b3AgPSAnMjRweCc7XHJcbiAgcy5sZWZ0ID0gJzUwJSc7XHJcbiAgcy5tYXJnaW5MZWZ0ID0gKC13aWR0aC8yKSArICdweCc7XHJcbiAgcy53aWR0aCA9IHdpZHRoICsgJ3B4JztcclxuICBzLnBhZGRpbmcgPSAnMjRweCc7XHJcbiAgcy5vdmVyZmxvdyA9ICdoaWRkZW4nO1xyXG4gIHMuYmFja2dyb3VuZCA9ICcjZmFmYWZhJztcclxuICBzLmZvbnRGYW1pbHkgPSBcIidSb2JvdG8nLCBzYW5zLXNlcmlmXCI7XHJcbiAgcy5ib3hTaGFkb3cgPSAnMHB4IDVweCAyMHB4ICM2NjYnO1xyXG5cclxuICBkaWFsb2cuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVIMV8oJ1NlbGVjdCB5b3VyIHZpZXdlcicpKTtcclxuICBmb3IgKHZhciBpZCBpbiBvcHRpb25zKSB7XHJcbiAgICBkaWFsb2cuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVDaG9pY2VfKGlkLCBvcHRpb25zW2lkXS5sYWJlbCkpO1xyXG4gIH1cclxuICBkaWFsb2cuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVCdXR0b25fKCdTYXZlJywgdGhpcy5vblNhdmVfLmJpbmQodGhpcykpKTtcclxuXHJcbiAgY29udGFpbmVyLmFwcGVuZENoaWxkKG92ZXJsYXkpO1xyXG4gIGNvbnRhaW5lci5hcHBlbmRDaGlsZChkaWFsb2cpO1xyXG5cclxuICByZXR1cm4gY29udGFpbmVyO1xyXG59O1xyXG5cclxuVmlld2VyU2VsZWN0b3IucHJvdG90eXBlLmNyZWF0ZUgxXyA9IGZ1bmN0aW9uKG5hbWUpIHtcclxuICB2YXIgaDEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoMScpO1xyXG4gIHZhciBzID0gaDEuc3R5bGU7XHJcbiAgcy5jb2xvciA9ICdibGFjayc7XHJcbiAgcy5mb250U2l6ZSA9ICcyMHB4JztcclxuICBzLmZvbnRXZWlnaHQgPSAnYm9sZCc7XHJcbiAgcy5tYXJnaW5Ub3AgPSAwO1xyXG4gIHMubWFyZ2luQm90dG9tID0gJzI0cHgnO1xyXG4gIGgxLmlubmVySFRNTCA9IG5hbWU7XHJcbiAgcmV0dXJuIGgxO1xyXG59O1xyXG5cclxuVmlld2VyU2VsZWN0b3IucHJvdG90eXBlLmNyZWF0ZUNob2ljZV8gPSBmdW5jdGlvbihpZCwgbmFtZSkge1xyXG4gIC8qXHJcbiAgPGRpdiBjbGFzcz1cImNob2ljZVwiPlxyXG4gIDxpbnB1dCBpZD1cInYxXCIgdHlwZT1cInJhZGlvXCIgbmFtZT1cImZpZWxkXCIgdmFsdWU9XCJ2MVwiPlxyXG4gIDxsYWJlbCBmb3I9XCJ2MVwiPkNhcmRib2FyZCBWMTwvbGFiZWw+XHJcbiAgPC9kaXY+XHJcbiAgKi9cclxuICB2YXIgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgZGl2LnN0eWxlLm1hcmdpblRvcCA9ICc4cHgnO1xyXG4gIGRpdi5zdHlsZS5jb2xvciA9ICdibGFjayc7XHJcblxyXG4gIHZhciBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XHJcbiAgaW5wdXQuc3R5bGUuZm9udFNpemUgPSAnMzBweCc7XHJcbiAgaW5wdXQuc2V0QXR0cmlidXRlKCdpZCcsIGlkKTtcclxuICBpbnB1dC5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAncmFkaW8nKTtcclxuICBpbnB1dC5zZXRBdHRyaWJ1dGUoJ3ZhbHVlJywgaWQpO1xyXG4gIGlucHV0LnNldEF0dHJpYnV0ZSgnbmFtZScsICdmaWVsZCcpO1xyXG5cclxuICB2YXIgbGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsYWJlbCcpO1xyXG4gIGxhYmVsLnN0eWxlLm1hcmdpbkxlZnQgPSAnNHB4JztcclxuICBsYWJlbC5zZXRBdHRyaWJ1dGUoJ2ZvcicsIGlkKTtcclxuICBsYWJlbC5pbm5lckhUTUwgPSBuYW1lO1xyXG5cclxuICBkaXYuYXBwZW5kQ2hpbGQoaW5wdXQpO1xyXG4gIGRpdi5hcHBlbmRDaGlsZChsYWJlbCk7XHJcblxyXG4gIHJldHVybiBkaXY7XHJcbn07XHJcblxyXG5WaWV3ZXJTZWxlY3Rvci5wcm90b3R5cGUuY3JlYXRlQnV0dG9uXyA9IGZ1bmN0aW9uKGxhYmVsLCBvbmNsaWNrKSB7XHJcbiAgdmFyIGJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xyXG4gIGJ1dHRvbi5pbm5lckhUTUwgPSBsYWJlbDtcclxuICB2YXIgcyA9IGJ1dHRvbi5zdHlsZTtcclxuICBzLmZsb2F0ID0gJ3JpZ2h0JztcclxuICBzLnRleHRUcmFuc2Zvcm0gPSAndXBwZXJjYXNlJztcclxuICBzLmNvbG9yID0gJyMxMDk0ZjcnO1xyXG4gIHMuZm9udFNpemUgPSAnMTRweCc7XHJcbiAgcy5sZXR0ZXJTcGFjaW5nID0gMDtcclxuICBzLmJvcmRlciA9IDA7XHJcbiAgcy5iYWNrZ3JvdW5kID0gJ25vbmUnO1xyXG4gIHMubWFyZ2luVG9wID0gJzE2cHgnO1xyXG5cclxuICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvbmNsaWNrKTtcclxuXHJcbiAgcmV0dXJuIGJ1dHRvbjtcclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gVmlld2VyU2VsZWN0b3I7XHJcblxyXG59LHtcIi4vZGV2aWNlLWluZm8uanNcIjo3LFwiLi9lbWl0dGVyLmpzXCI6MTIsXCIuL3V0aWwuanNcIjoyMn1dLDI0OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcclxuLypcclxuICogQ29weXJpZ2h0IDIwMTUgR29vZ2xlIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5cclxudmFyIFV0aWwgPSBfZGVyZXFfKCcuL3V0aWwuanMnKTtcclxuXHJcbi8qKlxyXG4gKiBBbmRyb2lkIGFuZCBpT1MgY29tcGF0aWJsZSB3YWtlbG9jayBpbXBsZW1lbnRhdGlvbi5cclxuICpcclxuICogUmVmYWN0b3JlZCB0aGFua3MgdG8gZGtvdmFsZXZALlxyXG4gKi9cclxuZnVuY3Rpb24gQW5kcm9pZFdha2VMb2NrKCkge1xyXG4gIHZhciB2aWRlbyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3ZpZGVvJyk7XHJcblxyXG4gIHZpZGVvLmFkZEV2ZW50TGlzdGVuZXIoJ2VuZGVkJywgZnVuY3Rpb24oKSB7XHJcbiAgICB2aWRlby5wbGF5KCk7XHJcbiAgfSk7XHJcblxyXG4gIHRoaXMucmVxdWVzdCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgaWYgKHZpZGVvLnBhdXNlZCkge1xyXG4gICAgICAvLyBCYXNlNjQgdmVyc2lvbiBvZiB2aWRlb3Nfc3JjL25vLXNsZWVwLTEyMHMubXA0LlxyXG4gICAgICB2aWRlby5zcmMgPSBVdGlsLmJhc2U2NCgndmlkZW8vbXA0JywgJ0FBQUFHR1owZVhCcGMyOXRBQUFBQUcxd05ERmhkbU14QUFBSUEyMXZiM1lBQUFCc2JYWm9aQUFBQUFEU2E5djYwbXZiK2dBQlg1QUFsdy9nQUFFQUFBRUFBQUFBQUFBQUFBQUFBQUFCQUFBQUFBQUFBQUFBQUFBQUFBQUFBUUFBQUFBQUFBQUFBQUFBQUFBQVFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUlBQUFka2RISmhhd0FBQUZ4MGEyaGtBQUFBQWRKcjIvclNhOXY2QUFBQUFRQUFBQUFBbHcvZ0FBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQkFBQUFBQUFBQUFBQUFBQUFBQUFBQVFBQUFBQUFBQUFBQUFBQUFBQUFRQUFBQUFBUUFBQUFIQUFBQUFBQUpHVmtkSE1BQUFBY1pXeHpkQUFBQUFBQUFBQUJBSmNQNEFBQUFBQUFBUUFBQUFBRzNHMWthV0VBQUFBZ2JXUm9aQUFBQUFEU2E5djYwbXZiK2dBUFFrQUdqbmVBRmNjQUFBQUFBQzFvWkd4eUFBQUFBQUFBQUFCMmFXUmxBQUFBQUFBQUFBQUFBQUFBVm1sa1pXOUlZVzVrYkdWeUFBQUFCb2R0YVc1bUFBQUFGSFp0YUdRQUFBQUJBQUFBQUFBQUFBQUFBQUFrWkdsdVpnQUFBQnhrY21WbUFBQUFBQUFBQUFFQUFBQU1kWEpzSUFBQUFBRUFBQVpIYzNSaWJBQUFBSmR6ZEhOa0FBQUFBQUFBQUFFQUFBQ0hZWFpqTVFBQUFBQUFBQUFCQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFNQUJ3QVNBQUFBRWdBQUFBQUFBQUFBUUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFCai8vd0FBQURGaGRtTkRBV1FBQy8vaEFCbG5aQUFMck5sZmxsdzRRQUFBQXdCQUFBQURBS1BGQ21XQUFRQUZhT3Zzc2l3QUFBQVljM1IwY3dBQUFBQUFBQUFCQUFBQWJnQVBRa0FBQUFBVWMzUnpjd0FBQUFBQUFBQUJBQUFBQVFBQUE0QmpkSFJ6QUFBQUFBQUFBRzRBQUFBQkFEMEpBQUFBQUFFQWVoSUFBQUFBQVFBOUNRQUFBQUFCQUFBQUFBQUFBQUVBRDBKQUFBQUFBUUJNUzBBQUFBQUJBQjZFZ0FBQUFBRUFBQUFBQUFBQUFRQVBRa0FBQUFBQkFFeExRQUFBQUFFQUhvU0FBQUFBQVFBQUFBQUFBQUFCQUE5Q1FBQUFBQUVBVEV0QUFBQUFBUUFlaElBQUFBQUJBQUFBQUFBQUFBRUFEMEpBQUFBQUFRQk1TMEFBQUFBQkFCNkVnQUFBQUFFQUFBQUFBQUFBQVFBUFFrQUFBQUFCQUV4TFFBQUFBQUVBSG9TQUFBQUFBUUFBQUFBQUFBQUJBQTlDUUFBQUFBRUFURXRBQUFBQUFRQWVoSUFBQUFBQkFBQUFBQUFBQUFFQUQwSkFBQUFBQVFCTVMwQUFBQUFCQUI2RWdBQUFBQUVBQUFBQUFBQUFBUUFQUWtBQUFBQUJBRXhMUUFBQUFBRUFIb1NBQUFBQUFRQUFBQUFBQUFBQkFBOUNRQUFBQUFFQVRFdEFBQUFBQVFBZWhJQUFBQUFCQUFBQUFBQUFBQUVBRDBKQUFBQUFBUUJNUzBBQUFBQUJBQjZFZ0FBQUFBRUFBQUFBQUFBQUFRQVBRa0FBQUFBQkFFeExRQUFBQUFFQUhvU0FBQUFBQVFBQUFBQUFBQUFCQUE5Q1FBQUFBQUVBVEV0QUFBQUFBUUFlaElBQUFBQUJBQUFBQUFBQUFBRUFEMEpBQUFBQUFRQk1TMEFBQUFBQkFCNkVnQUFBQUFFQUFBQUFBQUFBQVFBUFFrQUFBQUFCQUV4TFFBQUFBQUVBSG9TQUFBQUFBUUFBQUFBQUFBQUJBQTlDUUFBQUFBRUFURXRBQUFBQUFRQWVoSUFBQUFBQkFBQUFBQUFBQUFFQUQwSkFBQUFBQVFCTVMwQUFBQUFCQUI2RWdBQUFBQUVBQUFBQUFBQUFBUUFQUWtBQUFBQUJBRXhMUUFBQUFBRUFIb1NBQUFBQUFRQUFBQUFBQUFBQkFBOUNRQUFBQUFFQVRFdEFBQUFBQVFBZWhJQUFBQUFCQUFBQUFBQUFBQUVBRDBKQUFBQUFBUUJNUzBBQUFBQUJBQjZFZ0FBQUFBRUFBQUFBQUFBQUFRQVBRa0FBQUFBQkFFeExRQUFBQUFFQUhvU0FBQUFBQVFBQUFBQUFBQUFCQUE5Q1FBQUFBQUVBVEV0QUFBQUFBUUFlaElBQUFBQUJBQUFBQUFBQUFBRUFEMEpBQUFBQUFRQk1TMEFBQUFBQkFCNkVnQUFBQUFFQUFBQUFBQUFBQVFBUFFrQUFBQUFCQUV4TFFBQUFBQUVBSG9TQUFBQUFBUUFBQUFBQUFBQUJBQTlDUUFBQUFBRUFURXRBQUFBQUFRQWVoSUFBQUFBQkFBQUFBQUFBQUFFQUQwSkFBQUFBQVFCTVMwQUFBQUFCQUI2RWdBQUFBQUVBQUFBQUFBQUFBUUFQUWtBQUFBQUJBRXhMUUFBQUFBRUFIb1NBQUFBQUFRQUFBQUFBQUFBQkFBOUNRQUFBQUFFQUxjYkFBQUFBSEhOMGMyTUFBQUFBQUFBQUFRQUFBQUVBQUFCdUFBQUFBUUFBQWN4emRITjZBQUFBQUFBQUFBQUFBQUJ1QUFBRENRQUFBQmdBQUFBT0FBQUFEZ0FBQUF3QUFBQVNBQUFBRGdBQUFBd0FBQUFNQUFBQUVnQUFBQTRBQUFBTUFBQUFEQUFBQUJJQUFBQU9BQUFBREFBQUFBd0FBQUFTQUFBQURnQUFBQXdBQUFBTUFBQUFFZ0FBQUE0QUFBQU1BQUFBREFBQUFCSUFBQUFPQUFBQURBQUFBQXdBQUFBU0FBQUFEZ0FBQUF3QUFBQU1BQUFBRWdBQUFBNEFBQUFNQUFBQURBQUFBQklBQUFBT0FBQUFEQUFBQUF3QUFBQVNBQUFBRGdBQUFBd0FBQUFNQUFBQUVnQUFBQTRBQUFBTUFBQUFEQUFBQUJJQUFBQU9BQUFBREFBQUFBd0FBQUFTQUFBQURnQUFBQXdBQUFBTUFBQUFFZ0FBQUE0QUFBQU1BQUFBREFBQUFCSUFBQUFPQUFBQURBQUFBQXdBQUFBU0FBQUFEZ0FBQUF3QUFBQU1BQUFBRWdBQUFBNEFBQUFNQUFBQURBQUFBQklBQUFBT0FBQUFEQUFBQUF3QUFBQVNBQUFBRGdBQUFBd0FBQUFNQUFBQUVnQUFBQTRBQUFBTUFBQUFEQUFBQUJJQUFBQU9BQUFBREFBQUFBd0FBQUFTQUFBQURnQUFBQXdBQUFBTUFBQUFFZ0FBQUE0QUFBQU1BQUFBREFBQUFCSUFBQUFPQUFBQURBQUFBQXdBQUFBU0FBQUFEZ0FBQUF3QUFBQU1BQUFBRWdBQUFBNEFBQUFNQUFBQURBQUFBQk1BQUFBVWMzUmpid0FBQUFBQUFBQUJBQUFJS3dBQUFDdDFaSFJoQUFBQUk2bGxibU1BRndBQWRteGpJREl1TWk0eElITjBjbVZoYlNCdmRYUndkWFFBQUFBSWQybGtaUUFBQ1JSdFpHRjBBQUFDcmdYLy82dmNSZW05NXRsSXQ1WXMyQ0RaSSs3dmVESTJOQ0F0SUdOdmNtVWdNVFF5SUMwZ1NDNHlOalF2VFZCRlJ5MDBJRUZXUXlCamIyUmxZeUF0SUVOdmNIbHNaV1owSURJd01ETXRNakF4TkNBdElHaDBkSEE2THk5M2QzY3VkbWxrWlc5c1lXNHViM0puTDNneU5qUXVhSFJ0YkNBdElHOXdkR2x2Ym5NNklHTmhZbUZqUFRFZ2NtVm1QVE1nWkdWaWJHOWphejB4T2pBNk1DQmhibUZzZVhObFBUQjRNem93ZURFeklHMWxQV2hsZUNCemRXSnRaVDAzSUhCemVUMHhJSEJ6ZVY5eVpEMHhMakF3T2pBdU1EQWdiV2w0WldSZmNtVm1QVEVnYldWZmNtRnVaMlU5TVRZZ1kyaHliMjFoWDIxbFBURWdkSEpsYkd4cGN6MHhJRGg0T0dSamREMHhJR054YlQwd0lHUmxZV1I2YjI1bFBUSXhMREV4SUdaaGMzUmZjSE5yYVhBOU1TQmphSEp2YldGZmNYQmZiMlptYzJWMFBTMHlJSFJvY21WaFpITTlNVElnYkc5dmEyRm9aV0ZrWDNSb2NtVmhaSE05TVNCemJHbGpaV1JmZEdoeVpXRmtjejB3SUc1eVBUQWdaR1ZqYVcxaGRHVTlNU0JwYm5SbGNteGhZMlZrUFRBZ1lteDFjbUY1WDJOdmJYQmhkRDB3SUdOdmJuTjBjbUZwYm1Wa1gybHVkSEpoUFRBZ1ltWnlZVzFsY3oweklHSmZjSGx5WVcxcFpEMHlJR0pmWVdSaGNIUTlNU0JpWDJKcFlYTTlNQ0JrYVhKbFkzUTlNU0IzWldsbmFIUmlQVEVnYjNCbGJsOW5iM0E5TUNCM1pXbG5hSFJ3UFRJZ2EyVjVhVzUwUFRJMU1DQnJaWGxwYm5SZmJXbHVQVEVnYzJObGJtVmpkWFE5TkRBZ2FXNTBjbUZmY21WbWNtVnphRDB3SUhKalgyeHZiMnRoYUdWaFpEMDBNQ0J5WXoxaFluSWdiV0owY21WbFBURWdZbWwwY21GMFpUMHhNREFnY21GMFpYUnZiRDB4TGpBZ2NXTnZiWEE5TUM0Mk1DQnhjRzFwYmoweE1DQnhjRzFoZUQwMU1TQnhjSE4wWlhBOU5DQnBjRjl5WVhScGJ6MHhMalF3SUdGeFBURTZNUzR3TUFDQUFBQUFVMldJaEFBUS84bHRsT2UrY1RadUdrS2crYVJ0dWl2Y0RaMHBCc2ZzRWk5cC9pMXlVOUR4UzJscTRkWFRpblZpRjFVUkJLWGduektCZC9VaDFia2hIdE1yd3JSY09Kc2xEMDFVQitmeWFMNmVmK0RCQUFBQUZFR2FKR3hCRDVCK3YrYSs0UXFGM01nQlh6OU1BQUFBQ2tHZVFuaUgvKzk0cjZFQUFBQUtBWjVoZEVOLzhReXR3QUFBQUFnQm5tTnFRMy9FZ1FBQUFBNUJtbWhKcUVGb21Vd0lJZi8rNFFBQUFBcEJub1pGRVN3Ly83NkJBQUFBQ0FHZXBYUkRmOFNCQUFBQUNBR2VwMnBEZjhTQUFBQUFEa0dhckVtb1FXeVpUQWdoLy83Z0FBQUFDa0dleWtVVkxELy92b0VBQUFBSUFaN3BkRU4veElBQUFBQUlBWjdyYWtOL3hJQUFBQUFPUVpyd1NhaEJiSmxNQ0NILy91RUFBQUFLUVo4T1JSVXNQLysrZ1FBQUFBZ0JueTEwUTMvRWdRQUFBQWdCbnk5cVEzL0VnQUFBQUE1Qm16UkpxRUZzbVV3SUlmLys0QUFBQUFwQm4xSkZGU3cvLzc2QkFBQUFDQUdmY1hSRGY4U0FBQUFBQ0FHZmMycERmOFNBQUFBQURrR2JlRW1vUVd5WlRBZ2gvLzdoQUFBQUNrR2Zsa1VWTEQvL3ZvQUFBQUFJQVorMWRFTi94SUVBQUFBSUFaKzNha04veElFQUFBQU9RWnU4U2FoQmJKbE1DQ0gvL3VBQUFBQUtRWi9hUlJVc1AvKytnUUFBQUFnQm4vbDBRMy9FZ0FBQUFBZ0JuL3RxUTMvRWdRQUFBQTVCbStCSnFFRnNtVXdJSWYvKzRRQUFBQXBCbmg1RkZTdy8vNzZBQUFBQUNBR2VQWFJEZjhTQUFBQUFDQUdlUDJwRGY4U0JBQUFBRGtHYUpFbW9RV3laVEFnaC8vN2dBQUFBQ2tHZVFrVVZMRC8vdm9FQUFBQUlBWjVoZEVOL3hJQUFBQUFJQVo1amFrTi94SUVBQUFBT1FacG9TYWhCYkpsTUNDSC8vdUVBQUFBS1FaNkdSUlVzUC8rK2dRQUFBQWdCbnFWMFEzL0VnUUFBQUFnQm5xZHFRMy9FZ0FBQUFBNUJtcXhKcUVGc21Vd0lJZi8rNEFBQUFBcEJuc3BGRlN3Ly83NkJBQUFBQ0FHZTZYUkRmOFNBQUFBQUNBR2U2MnBEZjhTQUFBQUFEa0dhOEVtb1FXeVpUQWdoLy83aEFBQUFDa0dmRGtVVkxELy92b0VBQUFBSUFaOHRkRU4veElFQUFBQUlBWjh2YWtOL3hJQUFBQUFPUVpzMFNhaEJiSmxNQ0NILy91QUFBQUFLUVo5U1JSVXNQLysrZ1FBQUFBZ0JuM0YwUTMvRWdBQUFBQWdCbjNOcVEzL0VnQUFBQUE1Qm0zaEpxRUZzbVV3SUlmLys0UUFBQUFwQm41WkZGU3cvLzc2QUFBQUFDQUdmdFhSRGY4U0JBQUFBQ0FHZnQycERmOFNCQUFBQURrR2J2RW1vUVd5WlRBZ2gvLzdnQUFBQUNrR2Yya1VWTEQvL3ZvRUFBQUFJQVovNWRFTi94SUFBQUFBSUFaLzdha04veElFQUFBQU9RWnZnU2FoQmJKbE1DQ0gvL3VFQUFBQUtRWjRlUlJVc1AvKytnQUFBQUFnQm5qMTBRMy9FZ0FBQUFBZ0JuajlxUTMvRWdRQUFBQTVCbWlSSnFFRnNtVXdJSWYvKzRBQUFBQXBCbmtKRkZTdy8vNzZCQUFBQUNBR2VZWFJEZjhTQUFBQUFDQUdlWTJwRGY4U0JBQUFBRGtHYWFFbW9RV3laVEFnaC8vN2hBQUFBQ2tHZWhrVVZMRC8vdm9FQUFBQUlBWjZsZEVOL3hJRUFBQUFJQVo2bmFrTi94SUFBQUFBT1FacXNTYWhCYkpsTUNDSC8vdUFBQUFBS1FaN0tSUlVzUC8rK2dRQUFBQWdCbnVsMFEzL0VnQUFBQUFnQm51dHFRMy9FZ0FBQUFBNUJtdkJKcUVGc21Vd0lJZi8rNFFBQUFBcEJudzVGRlN3Ly83NkJBQUFBQ0FHZkxYUkRmOFNCQUFBQUNBR2ZMMnBEZjhTQUFBQUFEa0diTkVtb1FXeVpUQWdoLy83Z0FBQUFDa0dmVWtVVkxELy92b0VBQUFBSUFaOXhkRU4veElBQUFBQUlBWjl6YWtOL3hJQUFBQUFPUVp0NFNhaEJiSmxNQ0NILy91RUFBQUFLUVorV1JSVXNQLysrZ0FBQUFBZ0JuN1YwUTMvRWdRQUFBQWdCbjdkcVEzL0VnUUFBQUE1Qm03eEpxRUZzbVV3SUlmLys0QUFBQUFwQm45cEZGU3cvLzc2QkFBQUFDQUdmK1hSRGY4U0FBQUFBQ0FHZisycERmOFNCQUFBQURrR2I0RW1vUVd5WlRBZ2gvLzdoQUFBQUNrR2VIa1VWTEQvL3ZvQUFBQUFJQVo0OWRFTi94SUFBQUFBSUFaNC9ha04veElFQUFBQU9RWm9rU2FoQmJKbE1DQ0gvL3VBQUFBQUtRWjVDUlJVc1AvKytnUUFBQUFnQm5tRjBRMy9FZ0FBQUFBZ0JubU5xUTMvRWdRQUFBQTVCbW1oSnFFRnNtVXdJSWYvKzRRQUFBQXBCbm9aRkZTdy8vNzZCQUFBQUNBR2VwWFJEZjhTQkFBQUFDQUdlcDJwRGY4U0FBQUFBRGtHYXJFbW9RV3laVEFnaC8vN2dBQUFBQ2tHZXlrVVZMRC8vdm9FQUFBQUlBWjdwZEVOL3hJQUFBQUFJQVo3cmFrTi94SUFBQUFBUFFacnVTYWhCYkpsTUZFdzMvLzdCJyk7XHJcbiAgICAgIHZpZGVvLnBsYXkoKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICB0aGlzLnJlbGVhc2UgPSBmdW5jdGlvbigpIHtcclxuICAgIHZpZGVvLnBhdXNlKCk7XHJcbiAgICB2aWRlby5zcmMgPSAnJztcclxuICB9O1xyXG59XHJcblxyXG5mdW5jdGlvbiBpT1NXYWtlTG9jaygpIHtcclxuICB2YXIgdGltZXIgPSBudWxsO1xyXG5cclxuICB0aGlzLnJlcXVlc3QgPSBmdW5jdGlvbigpIHtcclxuICAgIGlmICghdGltZXIpIHtcclxuICAgICAgdGltZXIgPSBzZXRJbnRlcnZhbChmdW5jdGlvbigpIHtcclxuICAgICAgICB3aW5kb3cubG9jYXRpb24gPSB3aW5kb3cubG9jYXRpb247XHJcbiAgICAgICAgc2V0VGltZW91dCh3aW5kb3cuc3RvcCwgMCk7XHJcbiAgICAgIH0sIDMwMDAwKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHRoaXMucmVsZWFzZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgaWYgKHRpbWVyKSB7XHJcbiAgICAgIGNsZWFySW50ZXJ2YWwodGltZXIpO1xyXG4gICAgICB0aW1lciA9IG51bGw7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gZ2V0V2FrZUxvY2soKSB7XHJcbiAgdmFyIHVzZXJBZ2VudCA9IG5hdmlnYXRvci51c2VyQWdlbnQgfHwgbmF2aWdhdG9yLnZlbmRvciB8fCB3aW5kb3cub3BlcmE7XHJcbiAgaWYgKHVzZXJBZ2VudC5tYXRjaCgvaVBob25lL2kpIHx8IHVzZXJBZ2VudC5tYXRjaCgvaVBvZC9pKSkge1xyXG4gICAgcmV0dXJuIGlPU1dha2VMb2NrO1xyXG4gIH0gZWxzZSB7XHJcbiAgICByZXR1cm4gQW5kcm9pZFdha2VMb2NrO1xyXG4gIH1cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBnZXRXYWtlTG9jaygpO1xyXG59LHtcIi4vdXRpbC5qc1wiOjIyfV0sMjU6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xyXG4vKlxyXG4gKiBDb3B5cmlnaHQgMjAxNSBHb29nbGUgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcblxyXG52YXIgQ2FyZGJvYXJkVlJEaXNwbGF5ID0gX2RlcmVxXygnLi9jYXJkYm9hcmQtdnItZGlzcGxheS5qcycpO1xyXG52YXIgTW91c2VLZXlib2FyZFZSRGlzcGxheSA9IF9kZXJlcV8oJy4vbW91c2Uta2V5Ym9hcmQtdnItZGlzcGxheS5qcycpO1xyXG4vLyBVbmNvbW1lbnQgdG8gYWRkIHBvc2l0aW9uYWwgdHJhY2tpbmcgdmlhIHdlYmNhbS5cclxuLy92YXIgV2ViY2FtUG9zaXRpb25TZW5zb3JWUkRldmljZSA9IHJlcXVpcmUoJy4vd2ViY2FtLXBvc2l0aW9uLXNlbnNvci12ci1kZXZpY2UuanMnKTtcclxudmFyIFZSRGlzcGxheSA9IF9kZXJlcV8oJy4vYmFzZS5qcycpLlZSRGlzcGxheTtcclxudmFyIEhNRFZSRGV2aWNlID0gX2RlcmVxXygnLi9iYXNlLmpzJykuSE1EVlJEZXZpY2U7XHJcbnZhciBQb3NpdGlvblNlbnNvclZSRGV2aWNlID0gX2RlcmVxXygnLi9iYXNlLmpzJykuUG9zaXRpb25TZW5zb3JWUkRldmljZTtcclxudmFyIFZSRGlzcGxheUhNRERldmljZSA9IF9kZXJlcV8oJy4vZGlzcGxheS13cmFwcGVycy5qcycpLlZSRGlzcGxheUhNRERldmljZTtcclxudmFyIFZSRGlzcGxheVBvc2l0aW9uU2Vuc29yRGV2aWNlID0gX2RlcmVxXygnLi9kaXNwbGF5LXdyYXBwZXJzLmpzJykuVlJEaXNwbGF5UG9zaXRpb25TZW5zb3JEZXZpY2U7XHJcblxyXG5mdW5jdGlvbiBXZWJWUlBvbHlmaWxsKCkge1xyXG4gIHRoaXMuZGlzcGxheXMgPSBbXTtcclxuICB0aGlzLmRldmljZXMgPSBbXTsgLy8gRm9yIGRlcHJlY2F0ZWQgb2JqZWN0c1xyXG4gIHRoaXMuZGV2aWNlc1BvcHVsYXRlZCA9IGZhbHNlO1xyXG4gIHRoaXMubmF0aXZlV2ViVlJBdmFpbGFibGUgPSB0aGlzLmlzV2ViVlJBdmFpbGFibGUoKTtcclxuICB0aGlzLm5hdGl2ZUxlZ2FjeVdlYlZSQXZhaWxhYmxlID0gdGhpcy5pc0RlcHJlY2F0ZWRXZWJWUkF2YWlsYWJsZSgpO1xyXG5cclxuICBpZiAoIXRoaXMubmF0aXZlTGVnYWN5V2ViVlJBdmFpbGFibGUpIHtcclxuICAgIGlmICghdGhpcy5uYXRpdmVXZWJWUkF2YWlsYWJsZSkge1xyXG4gICAgICB0aGlzLmVuYWJsZVBvbHlmaWxsKCk7XHJcbiAgICB9XHJcbiAgICBpZiAoV2ViVlJDb25maWcuRU5BQkxFX0RFUFJFQ0FURURfQVBJKSB7XHJcbiAgICAgIHRoaXMuZW5hYmxlRGVwcmVjYXRlZFBvbHlmaWxsKCk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG5XZWJWUlBvbHlmaWxsLnByb3RvdHlwZS5pc1dlYlZSQXZhaWxhYmxlID0gZnVuY3Rpb24oKSB7XHJcbiAgcmV0dXJuICgnZ2V0VlJEaXNwbGF5cycgaW4gbmF2aWdhdG9yKTtcclxufTtcclxuXHJcbldlYlZSUG9seWZpbGwucHJvdG90eXBlLmlzRGVwcmVjYXRlZFdlYlZSQXZhaWxhYmxlID0gZnVuY3Rpb24oKSB7XHJcbiAgcmV0dXJuICgnZ2V0VlJEZXZpY2VzJyBpbiBuYXZpZ2F0b3IpIHx8ICgnbW96R2V0VlJEZXZpY2VzJyBpbiBuYXZpZ2F0b3IpO1xyXG59O1xyXG5cclxuV2ViVlJQb2x5ZmlsbC5wcm90b3R5cGUucG9wdWxhdGVEZXZpY2VzID0gZnVuY3Rpb24oKSB7XHJcbiAgaWYgKHRoaXMuZGV2aWNlc1BvcHVsYXRlZCkge1xyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuXHJcbiAgLy8gSW5pdGlhbGl6ZSBvdXIgdmlydHVhbCBWUiBkZXZpY2VzLlxyXG4gIHZhciB2ckRpc3BsYXkgPSBudWxsO1xyXG5cclxuICAvLyBBZGQgYSBDYXJkYm9hcmQgVlJEaXNwbGF5IG9uIGNvbXBhdGlibGUgbW9iaWxlIGRldmljZXNcclxuICBpZiAodGhpcy5pc0NhcmRib2FyZENvbXBhdGlibGUoKSkge1xyXG4gICAgdnJEaXNwbGF5ID0gbmV3IENhcmRib2FyZFZSRGlzcGxheSgpO1xyXG4gICAgdGhpcy5kaXNwbGF5cy5wdXNoKHZyRGlzcGxheSk7XHJcblxyXG4gICAgLy8gRm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5XHJcbiAgICBpZiAoV2ViVlJDb25maWcuRU5BQkxFX0RFUFJFQ0FURURfQVBJKSB7XHJcbiAgICAgIHRoaXMuZGV2aWNlcy5wdXNoKG5ldyBWUkRpc3BsYXlITUREZXZpY2UodnJEaXNwbGF5KSk7XHJcbiAgICAgIHRoaXMuZGV2aWNlcy5wdXNoKG5ldyBWUkRpc3BsYXlQb3NpdGlvblNlbnNvckRldmljZSh2ckRpc3BsYXkpKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIEFkZCBhIE1vdXNlIGFuZCBLZXlib2FyZCBkcml2ZW4gVlJEaXNwbGF5IGZvciBkZXNrdG9wcy9sYXB0b3BzXHJcbiAgaWYgKCF0aGlzLmlzTW9iaWxlKCkgJiYgIVdlYlZSQ29uZmlnLk1PVVNFX0tFWUJPQVJEX0NPTlRST0xTX0RJU0FCTEVEKSB7XHJcbiAgICB2ckRpc3BsYXkgPSBuZXcgTW91c2VLZXlib2FyZFZSRGlzcGxheSgpO1xyXG4gICAgdGhpcy5kaXNwbGF5cy5wdXNoKHZyRGlzcGxheSk7XHJcblxyXG4gICAgLy8gRm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5XHJcbiAgICBpZiAoV2ViVlJDb25maWcuRU5BQkxFX0RFUFJFQ0FURURfQVBJKSB7XHJcbiAgICAgIHRoaXMuZGV2aWNlcy5wdXNoKG5ldyBWUkRpc3BsYXlITUREZXZpY2UodnJEaXNwbGF5KSk7XHJcbiAgICAgIHRoaXMuZGV2aWNlcy5wdXNoKG5ldyBWUkRpc3BsYXlQb3NpdGlvblNlbnNvckRldmljZSh2ckRpc3BsYXkpKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIFVuY29tbWVudCB0byBhZGQgcG9zaXRpb25hbCB0cmFja2luZyB2aWEgd2ViY2FtLlxyXG4gIC8vaWYgKCF0aGlzLmlzTW9iaWxlKCkgJiYgV2ViVlJDb25maWcuRU5BQkxFX0RFUFJFQ0FURURfQVBJKSB7XHJcbiAgLy8gIHBvc2l0aW9uRGV2aWNlID0gbmV3IFdlYmNhbVBvc2l0aW9uU2Vuc29yVlJEZXZpY2UoKTtcclxuICAvLyAgdGhpcy5kZXZpY2VzLnB1c2gocG9zaXRpb25EZXZpY2UpO1xyXG4gIC8vfVxyXG5cclxuICB0aGlzLmRldmljZXNQb3B1bGF0ZWQgPSB0cnVlO1xyXG59O1xyXG5cclxuV2ViVlJQb2x5ZmlsbC5wcm90b3R5cGUuZW5hYmxlUG9seWZpbGwgPSBmdW5jdGlvbigpIHtcclxuICAvLyBQcm92aWRlIG5hdmlnYXRvci5nZXRWUkRpc3BsYXlzLlxyXG4gIG5hdmlnYXRvci5nZXRWUkRpc3BsYXlzID0gdGhpcy5nZXRWUkRpc3BsYXlzLmJpbmQodGhpcyk7XHJcblxyXG4gIC8vIFByb3ZpZGUgdGhlIFZSRGlzcGxheSBvYmplY3QuXHJcbiAgd2luZG93LlZSRGlzcGxheSA9IFZSRGlzcGxheTtcclxufTtcclxuXHJcbldlYlZSUG9seWZpbGwucHJvdG90eXBlLmVuYWJsZURlcHJlY2F0ZWRQb2x5ZmlsbCA9IGZ1bmN0aW9uKCkge1xyXG4gIC8vIFByb3ZpZGUgbmF2aWdhdG9yLmdldFZSRGV2aWNlcy5cclxuICBuYXZpZ2F0b3IuZ2V0VlJEZXZpY2VzID0gdGhpcy5nZXRWUkRldmljZXMuYmluZCh0aGlzKTtcclxuXHJcbiAgLy8gUHJvdmlkZSB0aGUgQ2FyZGJvYXJkSE1EVlJEZXZpY2UgYW5kIFBvc2l0aW9uU2Vuc29yVlJEZXZpY2Ugb2JqZWN0cy5cclxuICB3aW5kb3cuSE1EVlJEZXZpY2UgPSBITURWUkRldmljZTtcclxuICB3aW5kb3cuUG9zaXRpb25TZW5zb3JWUkRldmljZSA9IFBvc2l0aW9uU2Vuc29yVlJEZXZpY2U7XHJcbn07XHJcblxyXG5XZWJWUlBvbHlmaWxsLnByb3RvdHlwZS5nZXRWUkRpc3BsYXlzID0gZnVuY3Rpb24oKSB7XHJcbiAgdGhpcy5wb3B1bGF0ZURldmljZXMoKTtcclxuICB2YXIgZGlzcGxheXMgPSB0aGlzLmRpc3BsYXlzO1xyXG4gIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIHJlc29sdmUoZGlzcGxheXMpO1xyXG4gICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICByZWplY3QoZSk7XHJcbiAgICB9XHJcbiAgfSk7XHJcbn07XHJcblxyXG5XZWJWUlBvbHlmaWxsLnByb3RvdHlwZS5nZXRWUkRldmljZXMgPSBmdW5jdGlvbigpIHtcclxuICBjb25zb2xlLndhcm4oJ2dldFZSRGV2aWNlcyBpcyBkZXByZWNhdGVkLiBQbGVhc2UgdXBkYXRlIHlvdXIgY29kZSB0byB1c2UgZ2V0VlJEaXNwbGF5cyBpbnN0ZWFkLicpO1xyXG4gIHZhciBzZWxmID0gdGhpcztcclxuICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBpZiAoIXNlbGYuZGV2aWNlc1BvcHVsYXRlZCkge1xyXG4gICAgICAgIGlmIChzZWxmLm5hdGl2ZVdlYlZSQXZhaWxhYmxlKSB7XHJcbiAgICAgICAgICByZXR1cm4gbmF2aWdhdG9yLmdldFZSRGlzcGxheXMoZnVuY3Rpb24oZGlzcGxheXMpIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkaXNwbGF5cy5sZW5ndGg7ICsraSkge1xyXG4gICAgICAgICAgICAgIHNlbGYuZGV2aWNlcy5wdXNoKG5ldyBWUkRpc3BsYXlITUREZXZpY2UoZGlzcGxheXNbaV0pKTtcclxuICAgICAgICAgICAgICBzZWxmLmRldmljZXMucHVzaChuZXcgVlJEaXNwbGF5UG9zaXRpb25TZW5zb3JEZXZpY2UoZGlzcGxheXNbaV0pKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzZWxmLmRldmljZXNQb3B1bGF0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICByZXNvbHZlKHNlbGYuZGV2aWNlcyk7XHJcbiAgICAgICAgICB9LCByZWplY3QpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHNlbGYubmF0aXZlTGVnYWN5V2ViVlJBdmFpbGFibGUpIHtcclxuICAgICAgICAgIHJldHVybiAobmF2aWdhdG9yLmdldFZSRERldmljZXMgfHwgbmF2aWdhdG9yLm1vekdldFZSRGV2aWNlcykoZnVuY3Rpb24oZGV2aWNlcykge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRldmljZXMubGVuZ3RoOyArK2kpIHtcclxuICAgICAgICAgICAgICBpZiAoZGV2aWNlc1tpXSBpbnN0YW5jZW9mIEhNRFZSRGV2aWNlKSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLmRldmljZXMucHVzaChkZXZpY2VzW2ldKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgaWYgKGRldmljZXNbaV0gaW5zdGFuY2VvZiBQb3NpdGlvblNlbnNvclZSRGV2aWNlKSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLmRldmljZXMucHVzaChkZXZpY2VzW2ldKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc2VsZi5kZXZpY2VzUG9wdWxhdGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgcmVzb2x2ZShzZWxmLmRldmljZXMpO1xyXG4gICAgICAgICAgfSwgcmVqZWN0KTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHNlbGYucG9wdWxhdGVEZXZpY2VzKCk7XHJcbiAgICAgIHJlc29sdmUoc2VsZi5kZXZpY2VzKTtcclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgcmVqZWN0KGUpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIERldGVybWluZSBpZiBhIGRldmljZSBpcyBtb2JpbGUuXHJcbiAqL1xyXG5XZWJWUlBvbHlmaWxsLnByb3RvdHlwZS5pc01vYmlsZSA9IGZ1bmN0aW9uKCkge1xyXG4gIHJldHVybiAvQW5kcm9pZC9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkgfHxcclxuICAgICAgL2lQaG9uZXxpUGFkfGlQb2QvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpO1xyXG59O1xyXG5cclxuV2ViVlJQb2x5ZmlsbC5wcm90b3R5cGUuaXNDYXJkYm9hcmRDb21wYXRpYmxlID0gZnVuY3Rpb24oKSB7XHJcbiAgLy8gRm9yIG5vdywgc3VwcG9ydCBhbGwgaU9TIGFuZCBBbmRyb2lkIGRldmljZXMuXHJcbiAgLy8gQWxzbyBlbmFibGUgdGhlIFdlYlZSQ29uZmlnLkZPUkNFX1ZSIGZsYWcgZm9yIGRlYnVnZ2luZy5cclxuICByZXR1cm4gdGhpcy5pc01vYmlsZSgpIHx8IFdlYlZSQ29uZmlnLkZPUkNFX0VOQUJMRV9WUjtcclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gV2ViVlJQb2x5ZmlsbDtcclxuXHJcbn0se1wiLi9iYXNlLmpzXCI6MixcIi4vY2FyZGJvYXJkLXZyLWRpc3BsYXkuanNcIjo1LFwiLi9kaXNwbGF5LXdyYXBwZXJzLmpzXCI6OCxcIi4vbW91c2Uta2V5Ym9hcmQtdnItZGlzcGxheS5qc1wiOjE1fV19LHt9LFsxM10pO1xyXG4iLCJ2YXIgRXZlbnRFbWl0dGVyID0gcmVxdWlyZSgnZXZlbnRlbWl0dGVyMycpO1xyXG52YXIgc2hha2EgPSByZXF1aXJlKCdzaGFrYS1wbGF5ZXInKTtcclxuXHJcbnZhciBUeXBlcyA9IHtcclxuICBITFM6IDEsXHJcbiAgREFTSDogMixcclxuICBWSURFTzogM1xyXG59O1xyXG5cclxudmFyIERFRkFVTFRfQklUU19QRVJfU0VDT05EID0gMTAwMDAwMDtcclxuXHJcbi8qKlxyXG4gKiBTdXBwb3J0cyByZWd1bGFyIHZpZGVvIFVSTHMgKGVnLiBtcDQpLCBhcyB3ZWxsIGFzIGFkYXB0aXZlIG1hbmlmZXN0cyBsaWtlXHJcbiAqIERBU0ggKC5tcGQpIGFuZCBzb29uIEhMUyAoLm0zdTgpLlxyXG4gKlxyXG4gKiBFdmVudHM6XHJcbiAqICAgbG9hZCh2aWRlbyk6IFdoZW4gdGhlIHZpZGVvIGlzIGxvYWRlZC5cclxuICogICBlcnJvcihtZXNzYWdlKTogSWYgYW4gZXJyb3Igb2NjdXJzLlxyXG4gKlxyXG4gKiBUbyBwbGF5L3BhdXNlL3NlZWsvZXRjLCBwbGVhc2UgdXNlIHRoZSB1bmRlcmx5aW5nIHZpZGVvIGVsZW1lbnQuXHJcbiAqL1xyXG5mdW5jdGlvbiBBZGFwdGl2ZVBsYXllcigpIHtcclxuICB0aGlzLnZpZGVvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndmlkZW8nKTtcclxuICB0aGlzLnZpZGVvLmxvb3AgPSB0cnVlO1xyXG4gIC8vIEVuYWJsZSBpbmxpbmUgdmlkZW8gcGxheWJhY2sgaW4gaU9TIDEwKy5cclxuICB0aGlzLnZpZGVvLnNldEF0dHJpYnV0ZSgncGxheXNpbmxpbmUnLCB0cnVlKTtcclxuICB0aGlzLnZpZGVvLnNldEF0dHJpYnV0ZSgnY3Jvc3NvcmlnaW4nLCAnYW5vbnltb3VzJyk7XHJcbn1cclxuQWRhcHRpdmVQbGF5ZXIucHJvdG90eXBlID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG5cclxuQWRhcHRpdmVQbGF5ZXIucHJvdG90eXBlLmxvYWQgPSBmdW5jdGlvbih1cmwpIHtcclxuICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgLy8gVE9ETyhzbXVzKTogSW52ZXN0aWdhdGUgd2hldGhlciBvciBub3QgZGlmZmVyZW50aWF0aW9uIGlzIGJlc3QgZG9uZSBieVxyXG4gIC8vIG1pbWVUeXBlIGFmdGVyIGFsbC4gQ3Vyc29yeSByZXNlYXJjaCBzdWdnZXN0cyB0aGF0IGFkYXB0aXZlIHN0cmVhbWluZ1xyXG4gIC8vIG1hbmlmZXN0IG1pbWUgdHlwZXMgYXJlbid0IHByb3Blcmx5IHN1cHBvcnRlZC5cclxuICAvL1xyXG4gIC8vIEZvciBub3csIG1ha2UgZGV0ZXJtaW5hdGlvbiBiYXNlZCBvbiBleHRlbnNpb24uXHJcbiAgdmFyIGV4dGVuc2lvbiA9IFV0aWwuZ2V0RXh0ZW5zaW9uKHVybCk7XHJcbiAgc3dpdGNoIChleHRlbnNpb24pIHtcclxuICAgIGNhc2UgJ20zdTgnOiAvLyBITFNcclxuICAgICAgdGhpcy50eXBlID0gVHlwZXMuSExTO1xyXG4gICAgICBpZiAoVXRpbC5pc1NhZmFyaSgpKSB7XHJcbiAgICAgICAgdGhpcy5sb2FkVmlkZW9fKHVybCkudGhlbihmdW5jdGlvbigpIHtcclxuICAgICAgICAgIHNlbGYuZW1pdCgnbG9hZCcsIHNlbGYudmlkZW8pO1xyXG4gICAgICAgIH0pLmNhdGNoKHRoaXMub25FcnJvcl8uYmluZCh0aGlzKSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgc2VsZi5vbkVycm9yXygnSExTIGlzIG9ubHkgc3VwcG9ydGVkIG9uIFNhZmFyaS4nKTtcclxuICAgICAgfVxyXG4gICAgICBicmVhaztcclxuICAgIGNhc2UgJ21wZCc6IC8vIE1QRUctREFTSFxyXG4gICAgICB0aGlzLnR5cGUgPSBUeXBlcy5EQVNIO1xyXG4gICAgICB0aGlzLmxvYWRTaGFrYVZpZGVvXyh1cmwpLnRoZW4oZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ1RoZSB2aWRlbyBoYXMgbm93IGJlZW4gbG9hZGVkIScpO1xyXG4gICAgICAgIHNlbGYuZW1pdCgnbG9hZCcsIHNlbGYudmlkZW8pO1xyXG4gICAgICB9KS5jYXRjaCh0aGlzLm9uRXJyb3JfLmJpbmQodGhpcykpO1xyXG4gICAgICBicmVhaztcclxuICAgIGRlZmF1bHQ6IC8vIEEgcmVndWxhciB2aWRlbywgbm90IGFuIGFkYXB0aXZlIG1hbmlmZXN0LlxyXG4gICAgICB0aGlzLnR5cGUgPSBUeXBlcy5WSURFTztcclxuICAgICAgdGhpcy5sb2FkVmlkZW9fKHVybCkudGhlbihmdW5jdGlvbigpIHtcclxuICAgICAgICBzZWxmLmVtaXQoJ2xvYWQnLCBzZWxmLnZpZGVvKTtcclxuICAgICAgfSkuY2F0Y2godGhpcy5vbkVycm9yXy5iaW5kKHRoaXMpKTtcclxuICAgICAgYnJlYWs7XHJcbiAgfVxyXG59O1xyXG5cclxuQWRhcHRpdmVQbGF5ZXIucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbigpIHtcclxuICB0aGlzLnZpZGVvLnBhdXNlKCk7XHJcbiAgdGhpcy52aWRlby5zcmMgPSAnJztcclxuICB0aGlzLnZpZGVvID0gbnVsbDtcclxufTtcclxuXHJcbi8qKiogUFJJVkFURSBBUEkgKioqL1xyXG5cclxuQWRhcHRpdmVQbGF5ZXIucHJvdG90eXBlLm9uRXJyb3JfID0gZnVuY3Rpb24oZSkge1xyXG4gIGNvbnNvbGUuZXJyb3IoZSk7XHJcbiAgdGhpcy5lbWl0KCdlcnJvcicsIGUpO1xyXG59O1xyXG5cclxuQWRhcHRpdmVQbGF5ZXIucHJvdG90eXBlLmxvYWRWaWRlb18gPSBmdW5jdGlvbih1cmwpIHtcclxuICB2YXIgdmlkZW8gPSB0aGlzLnZpZGVvO1xyXG4gIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcclxuICAgIHZpZGVvLnNyYyA9IHVybDtcclxuICAgIHZpZGVvLmFkZEV2ZW50TGlzdGVuZXIoJ2NhbnBsYXl0aHJvdWdoJywgcmVzb2x2ZSk7XHJcbiAgICB2aWRlby5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIHJlamVjdCk7XHJcbiAgICB2aWRlby5sb2FkKCk7XHJcbiAgfSk7XHJcbn07XHJcblxyXG5BZGFwdGl2ZVBsYXllci5wcm90b3R5cGUuaW5pdFNoYWthXyA9IGZ1bmN0aW9uKCkge1xyXG4gIHRoaXMucGxheWVyID0gbmV3IHNoYWthLlBsYXllcih0aGlzLnZpZGVvKTtcclxuXHJcbiAgdGhpcy5wbGF5ZXIuY29uZmlndXJlKHtcclxuICAgIGFicjogeyBkZWZhdWx0QmFuZHdpZHRoRXN0aW1hdGU6IERFRkFVTFRfQklUU19QRVJfU0VDT05EIH1cclxuICB9KTtcclxuXHJcbiAgLy8gTGlzdGVuIGZvciBlcnJvciBldmVudHMuXHJcbiAgdGhpcy5wbGF5ZXIuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCB0aGlzLm9uRXJyb3JfKTtcclxufTtcclxuXHJcbkFkYXB0aXZlUGxheWVyLnByb3RvdHlwZS5sb2FkU2hha2FWaWRlb18gPSBmdW5jdGlvbih1cmwpIHtcclxuICAvLyBJbnN0YWxsIGJ1aWx0LWluIHBvbHlmaWxscyB0byBwYXRjaCBicm93c2VyIGluY29tcGF0aWJpbGl0aWVzLlxyXG4gIHNoYWthLnBvbHlmaWxsLmluc3RhbGxBbGwoKTtcclxuXHJcbiAgaWYgKCFzaGFrYS5QbGF5ZXIuaXNCcm93c2VyU3VwcG9ydGVkKCkpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ1NoYWthIGlzIG5vdCBzdXBwb3J0ZWQgb24gdGhpcyBicm93c2VyLicpO1xyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuXHJcbiAgdGhpcy5pbml0U2hha2FfKCk7XHJcbiAgcmV0dXJuIHRoaXMucGxheWVyLmxvYWQodXJsKTtcclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gQWRhcHRpdmVQbGF5ZXI7XHJcbiIsIi8qXHJcbiAqIENvcHlyaWdodCAyMDE1IEdvb2dsZSBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxudmFyIEV5ZXMgPSB7XHJcbiAgTEVGVDogMSxcclxuICBSSUdIVDogMlxyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBFeWVzO1xyXG4iLCIvKlxyXG4gKiBDb3B5cmlnaHQgMjAxNSBHb29nbGUgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBFdmVudEVtaXR0ZXIgPSByZXF1aXJlKCdldmVudGVtaXR0ZXIzJyk7XHJcbnZhciBUV0VFTiA9IHJlcXVpcmUoJ3R3ZWVuLmpzJyk7XHJcblxyXG4vLyBDb25zdGFudHMgZm9yIHRoZSBmb2N1cy9ibHVyIGFuaW1hdGlvbi5cclxudmFyIE5PUk1BTF9TQ0FMRSA9IG5ldyBUSFJFRS5WZWN0b3IzKDEsIDEsIDEpO1xyXG52YXIgRk9DVVNfU0NBTEUgPSBuZXcgVEhSRUUuVmVjdG9yMygxLjIsIDEuMiwgMS4yKTtcclxudmFyIEZPQ1VTX0RVUkFUSU9OID0gMjAwO1xyXG5cclxuLy8gQ29uc3RhbnRzIGZvciB0aGUgYWN0aXZlL2luYWN0aXZlIGFuaW1hdGlvbi5cclxudmFyIElOQUNUSVZFX0NPTE9SID0gbmV3IFRIUkVFLkNvbG9yKDEsIDEsIDEpO1xyXG52YXIgQUNUSVZFX0NPTE9SID0gbmV3IFRIUkVFLkNvbG9yKDAuOCwgMCwgMCk7XHJcbnZhciBBQ1RJVkVfRFVSQVRJT04gPSAxMDA7XHJcblxyXG4vLyBDb25zdGFudHMgZm9yIG9wYWNpdHkuXHJcbnZhciBNQVhfSU5ORVJfT1BBQ0lUWSA9IDAuODtcclxudmFyIE1BWF9PVVRFUl9PUEFDSVRZID0gMC41O1xyXG52YXIgRkFERV9TVEFSVF9BTkdMRV9ERUcgPSAzNTtcclxudmFyIEZBREVfRU5EX0FOR0xFX0RFRyA9IDYwO1xyXG4vKipcclxuICogUmVzcG9uc2libGUgZm9yIHJlY3Rhbmd1bGFyIGhvdCBzcG90cyB0aGF0IHRoZSB1c2VyIGNhbiBpbnRlcmFjdCB3aXRoLlxyXG4gKlxyXG4gKiBTcGVjaWZpYyBkdXRpZXM6XHJcbiAqICAgQWRkaW5nIGFuZCByZW1vdmluZyBob3RzcG90cy5cclxuICogICBSZW5kZXJpbmcgdGhlIGhvdHNwb3RzIChkZWJ1ZyBtb2RlIG9ubHkpLlxyXG4gKiAgIE5vdGlmeWluZyB3aGVuIGhvdHNwb3RzIGFyZSBpbnRlcmFjdGVkIHdpdGguXHJcbiAqIFxyXG4gKiBFbWl0cyB0aGUgZm9sbG93aW5nIGV2ZW50czpcclxuICogICBjbGljayAoaWQpOiBhIGhvdHNwb3QgaXMgY2xpY2tlZC5cclxuICogICBmb2N1cyAoaWQpOiBhIGhvdHNwb3QgaXMgZm9jdXNlZC5cclxuICogICBibHVyIChpZCk6IGEgaG90c3BvdCBpcyBubyBsb25nZXIgaG92ZXJlZCBvdmVyLlxyXG4gKi9cclxuZnVuY3Rpb24gSG90c3BvdFJlbmRlcmVyKHdvcmxkUmVuZGVyZXIpIHtcclxuICB0aGlzLndvcmxkUmVuZGVyZXIgPSB3b3JsZFJlbmRlcmVyO1xyXG4gIHRoaXMuc2NlbmUgPSB3b3JsZFJlbmRlcmVyLnNjZW5lO1xyXG5cclxuICAvLyBOb3RlOiB0aGlzIGV2ZW50IG11c3QgYmUgYWRkZWQgdG8gZG9jdW1lbnQuYm9keSBhbmQgbm90IHRvIHdpbmRvdyBmb3IgaXQgdG9cclxuICAvLyB3b3JrIGluc2lkZSBpT1MgaWZyYW1lcy5cclxuICB2YXIgYm9keSA9IGRvY3VtZW50LmJvZHk7XHJcbiAgLy8gQmluZCBldmVudHMgZm9yIGhvdHNwb3QgaW50ZXJhY3Rpb24uXHJcbiAgaWYgKCFVdGlsLmlzTW9iaWxlKCkpIHtcclxuICAgIC8vIE9ubHkgZW5hYmxlIG1vdXNlIGV2ZW50cyBvbiBkZXNrdG9wLlxyXG4gICAgYm9keS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCB0aGlzLm9uTW91c2VEb3duXy5iaW5kKHRoaXMpLCBmYWxzZSk7XHJcbiAgICBib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHRoaXMub25Nb3VzZU1vdmVfLmJpbmQodGhpcyksIGZhbHNlKTtcclxuICAgIGJvZHkuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHRoaXMub25Nb3VzZVVwXy5iaW5kKHRoaXMpLCBmYWxzZSk7XHJcbiAgfVxyXG4gIGJvZHkuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIHRoaXMub25Ub3VjaFN0YXJ0Xy5iaW5kKHRoaXMpLCBmYWxzZSk7XHJcbiAgYm9keS5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIHRoaXMub25Ub3VjaEVuZF8uYmluZCh0aGlzKSwgZmFsc2UpO1xyXG5cclxuICAvLyBBZGQgYSBwbGFjZWhvbGRlciBmb3IgaG90c3BvdHMuXHJcbiAgdGhpcy5ob3RzcG90Um9vdCA9IG5ldyBUSFJFRS5PYmplY3QzRCgpO1xyXG4gIC8vIEFsaWduIHRoZSBjZW50ZXIgd2l0aCB0aGUgY2VudGVyIG9mIHRoZSBjYW1lcmEgdG9vLlxyXG4gIHRoaXMuaG90c3BvdFJvb3Qucm90YXRpb24ueSA9IE1hdGguUEkgLyAyO1xyXG4gIHRoaXMuc2NlbmUuYWRkKHRoaXMuaG90c3BvdFJvb3QpO1xyXG5cclxuICAvLyBBbGwgaG90c3BvdCBJRHMuXHJcbiAgdGhpcy5ob3RzcG90cyA9IHt9O1xyXG5cclxuICAvLyBDdXJyZW50bHkgc2VsZWN0ZWQgaG90c3BvdHMuXHJcbiAgdGhpcy5zZWxlY3RlZEhvdHNwb3RzID0ge307XHJcblxyXG4gIC8vIEhvdHNwb3RzIHRoYXQgdGhlIGxhc3QgdG91Y2hzdGFydCAvIG1vdXNlZG93biBldmVudCBoYXBwZW5lZCBmb3IuXHJcbiAgdGhpcy5kb3duSG90c3BvdHMgPSB7fTtcclxuXHJcbiAgLy8gRm9yIHJheWNhc3RpbmcuIEluaXRpYWxpemUgbW91c2UgdG8gYmUgb2ZmIHNjcmVlbiBpbml0aWFsbHkuXHJcbiAgdGhpcy5wb2ludGVyID0gbmV3IFRIUkVFLlZlY3RvcjIoMSwgMSk7XHJcbiAgdGhpcy5yYXljYXN0ZXIgPSBuZXcgVEhSRUUuUmF5Y2FzdGVyKCk7XHJcbn1cclxuSG90c3BvdFJlbmRlcmVyLnByb3RvdHlwZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuXHJcbi8qKlxyXG4gKiBAcGFyYW0gcGl0Y2gge051bWJlcn0gVGhlIGxhdGl0dWRlIG9mIGNlbnRlciwgc3BlY2lmaWVkIGluIGRlZ3JlZXMsIGJldHdlZW5cclxuICogLTkwIGFuZCA5MCwgd2l0aCAwIGF0IHRoZSBob3Jpem9uLlxyXG4gKiBAcGFyYW0geWF3IHtOdW1iZXJ9IFRoZSBsb25naXR1ZGUgb2YgY2VudGVyLCBzcGVjaWZpZWQgaW4gZGVncmVlcywgYmV0d2VlblxyXG4gKiAtMTgwIGFuZCAxODAsIHdpdGggMCBhdCB0aGUgaW1hZ2UgY2VudGVyLlxyXG4gKiBAcGFyYW0gcmFkaXVzIHtOdW1iZXJ9IFRoZSByYWRpdXMgb2YgdGhlIGhvdHNwb3QsIHNwZWNpZmllZCBpbiBtZXRlcnMuXHJcbiAqIEBwYXJhbSBkaXN0YW5jZSB7TnVtYmVyfSBUaGUgZGlzdGFuY2Ugb2YgdGhlIGhvdHNwb3QgZnJvbSBjYW1lcmEsIHNwZWNpZmllZFxyXG4gKiBpbiBtZXRlcnMuXHJcbiAqIEBwYXJhbSBob3RzcG90SWQge1N0cmluZ30gVGhlIElEIG9mIHRoZSBob3RzcG90LlxyXG4gKi9cclxuSG90c3BvdFJlbmRlcmVyLnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbihwaXRjaCwgeWF3LCByYWRpdXMsIGRpc3RhbmNlLCBpZCwgaW1hZ2UsIGlzX3N0ZXJlbykge1xyXG4gIC8vY29uc29sZS5sb2coJ0hvdHNwb3RSZW5kZXJlci5hZGQnLCBwaXRjaCwgeWF3LCByYWRpdXMsIGRpc3RhbmNlLCBpZCwgaW1hZ2UpO1xyXG4gIC8vIElmIGEgaG90c3BvdCBhbHJlYWR5IGV4aXN0cyB3aXRoIHRoaXMgSUQsIHN0b3AuXHJcbiAgaWYgKHRoaXMuaG90c3BvdHNbaWRdKSB7XHJcbiAgICAvLyBUT0RPOiBQcm9wZXIgZXJyb3IgcmVwb3J0aW5nLlxyXG4gICAgY29uc29sZS5lcnJvcignQXR0ZW1wdCB0byBhZGQgaG90c3BvdCB3aXRoIGV4aXN0aW5nIGlkICVzLicsIGlkKTtcclxuICAgIHJldHVybjtcclxuICB9XHJcbiAgdmFyIGhvdHNwb3QgPSB0aGlzLmNyZWF0ZUhvdHNwb3RfKHJhZGl1cywgZGlzdGFuY2UsIGltYWdlLCBpc19zdGVyZW8pO1xyXG4gIGhvdHNwb3QubmFtZSA9IGlkO1xyXG5cclxuICAvLyBQb3NpdGlvbiB0aGUgaG90c3BvdCBiYXNlZCBvbiB0aGUgcGl0Y2ggYW5kIHlhdyBzcGVjaWZpZWQuXHJcbiAgdmFyIHF1YXQgPSBuZXcgVEhSRUUuUXVhdGVybmlvbigpO1xyXG4gIHF1YXQuc2V0RnJvbUV1bGVyKG5ldyBUSFJFRS5FdWxlcihUSFJFRS5NYXRoLmRlZ1RvUmFkKHBpdGNoKSwgVEhSRUUuTWF0aC5kZWdUb1JhZCh5YXcpLCAwKSk7XHJcbiAgaG90c3BvdC5wb3NpdGlvbi5hcHBseVF1YXRlcm5pb24ocXVhdCk7XHJcbiAgaG90c3BvdC5sb29rQXQobmV3IFRIUkVFLlZlY3RvcjMoKSk7XHJcbiAgXHJcbiAgdGhpcy5ob3RzcG90Um9vdC5hZGQoaG90c3BvdCk7XHJcbiAgdGhpcy5ob3RzcG90c1tpZF0gPSBob3RzcG90O1xyXG59XHJcblxyXG4vKipcclxuICogUmVtb3ZlcyBhIGhvdHNwb3QgYmFzZWQgb24gdGhlIElELlxyXG4gKlxyXG4gKiBAcGFyYW0gSUQge1N0cmluZ30gSWRlbnRpZmllciBvZiB0aGUgaG90c3BvdCB0byBiZSByZW1vdmVkLlxyXG4gKi9cclxuSG90c3BvdFJlbmRlcmVyLnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbihpZCkge1xyXG4gIC8vIElmIHRoZXJlJ3Mgbm8gaG90c3BvdCB3aXRoIHRoaXMgSUQsIGZhaWwuXHJcbiAgaWYgKCF0aGlzLmhvdHNwb3RzW2lkXSkgeyBcclxuICAgIC8vIFRPRE86IFByb3BlciBlcnJvciByZXBvcnRpbmcuXHJcbiAgICBjb25zb2xlLmVycm9yKCdBdHRlbXB0IHRvIHJlbW92ZSBub24tZXhpc3RpbmcgaG90c3BvdCB3aXRoIGlkICVzLicsIGlkKTtcclxuICAgIHJldHVybjtcclxuICB9XHJcbiAgLy8gUmVtb3ZlIHRoZSBtZXNoIGZyb20gdGhlIHNjZW5lLlxyXG4gIHRoaXMuaG90c3BvdFJvb3QucmVtb3ZlKHRoaXMuaG90c3BvdHNbaWRdKTtcclxuXHJcbiAgLy8gSWYgdGhpcyBob3RzcG90IHdhcyBzZWxlY3RlZCwgbWFrZSBzdXJlIGl0IGdldHMgdW5zZWxlY3RlZC5cclxuICBkZWxldGUgdGhpcy5zZWxlY3RlZEhvdHNwb3RzW2lkXTtcclxuICBkZWxldGUgdGhpcy5kb3duSG90c3BvdHNbaWRdO1xyXG4gIGRlbGV0ZSB0aGlzLmhvdHNwb3RzW2lkXTtcclxuICB0aGlzLmVtaXQoJ2JsdXInLCBpZCk7XHJcbn07XHJcblxyXG4vKipcclxuICogQ2xlYXJzIGFsbCBob3RzcG90cyBmcm9tIHRoZSBwYW5vLiBPZnRlbiBjYWxsZWQgd2hlbiBjaGFuZ2luZyBwYW5vcy5cclxuICovXHJcbkhvdHNwb3RSZW5kZXJlci5wcm90b3R5cGUuY2xlYXJBbGwgPSBmdW5jdGlvbigpIHtcclxuICBmb3IgKHZhciBpZCBpbiB0aGlzLmhvdHNwb3RzKSB7XHJcbiAgICB0aGlzLnJlbW92ZShpZCk7XHJcbiAgfVxyXG59O1xyXG5cclxuSG90c3BvdFJlbmRlcmVyLnByb3RvdHlwZS5nZXRDb3VudCA9IGZ1bmN0aW9uKCkge1xyXG4gIHZhciBjb3VudCA9IDA7XHJcbiAgZm9yICh2YXIgaWQgaW4gdGhpcy5ob3RzcG90cykge1xyXG4gICAgY291bnQgKz0gMTtcclxuICB9XHJcbiAgcmV0dXJuIGNvdW50O1xyXG59O1xyXG5cclxuSG90c3BvdFJlbmRlcmVyLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbihjYW1lcmEpIHtcclxuICBpZiAodGhpcy53b3JsZFJlbmRlcmVyLmlzVlJNb2RlKCkpIHtcclxuICAgIHRoaXMucG9pbnRlci5zZXQoMCwgMCk7XHJcbiAgfVxyXG4gIC8vIFVwZGF0ZSB0aGUgcGlja2luZyByYXkgd2l0aCB0aGUgY2FtZXJhIGFuZCBtb3VzZSBwb3NpdGlvbi5cclxuICB0aGlzLnJheWNhc3Rlci5zZXRGcm9tQ2FtZXJhKHRoaXMucG9pbnRlciwgY2FtZXJhKTtcdFxyXG5cclxuICAvLyBGYWRlIGhvdHNwb3RzIG91dCBpZiB0aGV5IGFyZSByZWFsbHkgZmFyIGZyb20gY2VudGVyIHRvIGF2b2lkIG92ZXJseVxyXG4gIC8vIGRpc3RvcnRlZCB2aXN1YWxzLlxyXG4gIHRoaXMuZmFkZU9mZkNlbnRlckhvdHNwb3RzXyhjYW1lcmEpO1xyXG5cclxuICB2YXIgaG90c3BvdHMgPSB0aGlzLmhvdHNwb3RSb290LmNoaWxkcmVuO1xyXG4gIFxyXG4gIC8vIEdvIHRocm91Z2ggYWxsIGhvdHNwb3RzIHRvIHNlZSBpZiB0aGV5IGFyZSBjdXJyZW50bHkgc2VsZWN0ZWQuXHJcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBob3RzcG90cy5sZW5ndGg7IGkrKykge1xyXG4gICAgdmFyIGhvdHNwb3QgPSBob3RzcG90c1tpXTtcclxuICAgIC8vaG90c3BvdC5sb29rQXQoY2FtZXJhLnBvc2l0aW9uKTtcclxuICAgIHZhciBpZCA9IGhvdHNwb3QubmFtZTtcclxuICAgIC8vIENoZWNrIGlmIGhvdHNwb3QgaXMgaW50ZXJzZWN0ZWQgd2l0aCB0aGUgcGlja2luZyByYXkuXHJcbiAgICB2YXIgaW50ZXJzZWN0cyA9IHRoaXMucmF5Y2FzdGVyLmludGVyc2VjdE9iamVjdHMoaG90c3BvdC5jaGlsZHJlbik7XHJcbiAgICB2YXIgaXNJbnRlcnNlY3RlZCA9IChpbnRlcnNlY3RzLmxlbmd0aCA+IDApO1xyXG5cclxuICAgIC8vIElmIG5ld2x5IHNlbGVjdGVkLCBlbWl0IGEgZm9jdXMgZXZlbnQuXHJcbiAgICBpZiAoaXNJbnRlcnNlY3RlZCAmJiAhdGhpcy5zZWxlY3RlZEhvdHNwb3RzW2lkXSkge1xyXG4gICAgICB0aGlzLmVtaXQoJ2ZvY3VzJywgaWQpO1xyXG4gICAgICB0aGlzLmZvY3VzXyhpZCk7XHJcbiAgICB9XHJcbiAgICAvLyBJZiBubyBsb25nZXIgc2VsZWN0ZWQsIGVtaXQgYSBibHVyIGV2ZW50LlxyXG4gICAgaWYgKCFpc0ludGVyc2VjdGVkICYmIHRoaXMuc2VsZWN0ZWRIb3RzcG90c1tpZF0pIHtcclxuICAgICAgdGhpcy5lbWl0KCdibHVyJywgaWQpO1xyXG4gICAgICB0aGlzLmJsdXJfKGlkKTtcclxuICAgIH1cclxuICAgIC8vIFVwZGF0ZSB0aGUgc2V0IG9mIHNlbGVjdGVkIGhvdHNwb3RzLlxyXG4gICAgaWYgKGlzSW50ZXJzZWN0ZWQpIHtcclxuICAgICAgdGhpcy5zZWxlY3RlZEhvdHNwb3RzW2lkXSA9IHRydWU7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBkZWxldGUgdGhpcy5zZWxlY3RlZEhvdHNwb3RzW2lkXTtcclxuICAgIH1cclxuICB9XHJcbn07XHJcblxyXG4vKipcclxuICogVG9nZ2xlIHdoZXRoZXIgb3Igbm90IGhvdHNwb3RzIGFyZSB2aXNpYmxlLlxyXG4gKi9cclxuSG90c3BvdFJlbmRlcmVyLnByb3RvdHlwZS5zZXRWaXNpYmlsaXR5ID0gZnVuY3Rpb24oaXNWaXNpYmxlKSB7XHJcbiAgdGhpcy5ob3RzcG90Um9vdC52aXNpYmxlID0gaXNWaXNpYmxlO1xyXG59O1xyXG5cclxuSG90c3BvdFJlbmRlcmVyLnByb3RvdHlwZS5vblRvdWNoU3RhcnRfID0gZnVuY3Rpb24oZSkge1xyXG4gIC8vIEluIFZSIG1vZGUsIGRvbid0IHRvdWNoIHRoZSBwb2ludGVyIHBvc2l0aW9uLlxyXG4gIGlmICghdGhpcy53b3JsZFJlbmRlcmVyLmlzVlJNb2RlKCkpIHtcclxuICAgIHRoaXMudXBkYXRlVG91Y2hfKGUpO1xyXG4gIH1cclxuXHJcbiAgLy8gRm9yY2UgYSBjYW1lcmEgdXBkYXRlIHRvIHNlZSBpZiBhbnkgaG90c3BvdHMgd2VyZSBzZWxlY3RlZC5cclxuICB0aGlzLnVwZGF0ZSh0aGlzLndvcmxkUmVuZGVyZXIuY2FtZXJhKTtcclxuXHJcbiAgdGhpcy5kb3duSG90c3BvdHMgPSB7fTtcclxuICBmb3IgKHZhciBpZCBpbiB0aGlzLnNlbGVjdGVkSG90c3BvdHMpIHtcclxuICAgIHRoaXMuZG93bkhvdHNwb3RzW2lkXSA9IHRydWU7XHJcbiAgICB0aGlzLmRvd25fKGlkKTtcclxuICB9XHJcbiAgcmV0dXJuIGZhbHNlO1xyXG59O1xyXG5cclxuSG90c3BvdFJlbmRlcmVyLnByb3RvdHlwZS5vblRvdWNoRW5kXyA9IGZ1bmN0aW9uKGUpIHtcclxuICAvLyBJZiBubyBob3RzcG90cyBhcmUgcHJlc3NlZCwgZW1pdCBhbiBlbXB0eSBjbGljayBldmVudC5cclxuICBpZiAoIXRoaXMuZG93bkhvdHNwb3RzKSB7XHJcbiAgICB0aGlzLmVtaXQoJ2NsaWNrJyk7XHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG5cclxuICAvLyBPbmx5IGVtaXQgYSBjbGljayBpZiB0aGUgZmluZ2VyIHdhcyBkb3duIG9uIHRoZSBzYW1lIGhvdHNwb3QgYmVmb3JlLlxyXG4gIGZvciAodmFyIGlkIGluIHRoaXMuZG93bkhvdHNwb3RzKSB7XHJcbiAgICB0aGlzLmVtaXQoJ2NsaWNrJywgaWQpO1xyXG4gICAgdGhpcy51cF8oaWQpO1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIH1cclxufTtcclxuXHJcbkhvdHNwb3RSZW5kZXJlci5wcm90b3R5cGUudXBkYXRlVG91Y2hfID0gZnVuY3Rpb24oZSkge1xyXG4gIHZhciBzaXplID0gdGhpcy5nZXRTaXplXygpO1xyXG4gIHZhciB0b3VjaCA9IGUudG91Y2hlc1swXTtcclxuXHR0aGlzLnBvaW50ZXIueCA9ICh0b3VjaC5jbGllbnRYIC8gc2l6ZS53aWR0aCkgKiAyIC0gMTtcclxuXHR0aGlzLnBvaW50ZXIueSA9IC0gKHRvdWNoLmNsaWVudFkgLyBzaXplLmhlaWdodCkgKiAyICsgMTtcdFxyXG59O1xyXG5cclxuSG90c3BvdFJlbmRlcmVyLnByb3RvdHlwZS5vbk1vdXNlRG93bl8gPSBmdW5jdGlvbihlKSB7XHJcbiAgdGhpcy51cGRhdGVNb3VzZV8oZSk7XHJcblxyXG4gIHRoaXMuZG93bkhvdHNwb3RzID0ge307XHJcbiAgZm9yICh2YXIgaWQgaW4gdGhpcy5zZWxlY3RlZEhvdHNwb3RzKSB7XHJcbiAgICB0aGlzLmRvd25Ib3RzcG90c1tpZF0gPSB0cnVlO1xyXG4gICAgdGhpcy5kb3duXyhpZCk7XHJcbiAgfVxyXG59O1xyXG5cclxuSG90c3BvdFJlbmRlcmVyLnByb3RvdHlwZS5vbk1vdXNlTW92ZV8gPSBmdW5jdGlvbihlKSB7XHJcbiAgdGhpcy51cGRhdGVNb3VzZV8oZSk7XHJcbn07XHJcblxyXG5Ib3RzcG90UmVuZGVyZXIucHJvdG90eXBlLm9uTW91c2VVcF8gPSBmdW5jdGlvbihlKSB7XHJcbiAgdGhpcy51cGRhdGVNb3VzZV8oZSk7XHJcblxyXG4gIC8vIElmIG5vIGhvdHNwb3RzIGFyZSBwcmVzc2VkLCBlbWl0IGFuIGVtcHR5IGNsaWNrIGV2ZW50LlxyXG4gIGlmICghdGhpcy5kb3duSG90c3BvdHMpIHtcclxuICAgIHRoaXMuZW1pdCgnY2xpY2snKTtcclxuICAgIHJldHVybjtcclxuICB9XHJcblxyXG4gIC8vIE9ubHkgZW1pdCBhIGNsaWNrIGlmIHRoZSBtb3VzZSB3YXMgZG93biBvbiB0aGUgc2FtZSBob3RzcG90IGJlZm9yZS5cclxuICBmb3IgKHZhciBpZCBpbiB0aGlzLnNlbGVjdGVkSG90c3BvdHMpIHtcclxuICAgIGlmIChpZCBpbiB0aGlzLmRvd25Ib3RzcG90cykge1xyXG4gICAgICB0aGlzLmVtaXQoJ2NsaWNrJywgaWQpO1xyXG4gICAgICB0aGlzLnVwXyhpZCk7XHJcbiAgICB9XHJcbiAgfVxyXG59O1xyXG5cclxuSG90c3BvdFJlbmRlcmVyLnByb3RvdHlwZS51cGRhdGVNb3VzZV8gPSBmdW5jdGlvbihlKSB7XHJcbiAgdmFyIHNpemUgPSB0aGlzLmdldFNpemVfKCk7XHJcblx0dGhpcy5wb2ludGVyLnggPSAoZS5jbGllbnRYIC8gc2l6ZS53aWR0aCkgKiAyIC0gMTtcclxuXHR0aGlzLnBvaW50ZXIueSA9IC0gKGUuY2xpZW50WSAvIHNpemUuaGVpZ2h0KSAqIDIgKyAxO1x0XHJcbn07XHJcblxyXG5Ib3RzcG90UmVuZGVyZXIucHJvdG90eXBlLmdldFNpemVfID0gZnVuY3Rpb24oKSB7XHJcbiAgdmFyIGNhbnZhcyA9IHRoaXMud29ybGRSZW5kZXJlci5yZW5kZXJlci5kb21FbGVtZW50O1xyXG4gIHJldHVybiB0aGlzLndvcmxkUmVuZGVyZXIucmVuZGVyZXIuZ2V0U2l6ZSgpO1xyXG59O1xyXG5cclxuSG90c3BvdFJlbmRlcmVyLnByb3RvdHlwZS5jcmVhdGVIb3RzcG90XyA9IGZ1bmN0aW9uKHJhZGl1cywgZGlzdGFuY2UsIGltYWdlLCBpc19zdGVyZW8pIHtcclxuICB2YXIgaW5uZXJHZW9tZXRyeSA9IG5ldyBUSFJFRS5DaXJjbGVHZW9tZXRyeShyYWRpdXMsIDMyKTtcclxuXHJcbiAgdmFyIGlubmVyTWF0ZXJpYWwgPSBuZXcgVEhSRUUuTWVzaEJhc2ljTWF0ZXJpYWwoe1xyXG4gICAgY29sb3I6IDB4ZmZmZmZmLCBzaWRlOiBUSFJFRS5Eb3VibGVTaWRlLCB0cmFuc3BhcmVudDogdHJ1ZSxcclxuICAgIG9wYWNpdHk6IE1BWF9JTk5FUl9PUEFDSVRZLCBkZXB0aFRlc3Q6IGZhbHNlXHJcbiAgfSk7XHJcbiAgaWYoaW1hZ2UmJmltYWdlIT1cIjBcIil7XHJcbiAgICB2YXIgbG9hZGVyID0gbmV3IFRIUkVFLlRleHR1cmVMb2FkZXIoKTtcclxuICAgIGxvYWRlci5jcm9zc09yaWdpbiA9ICdhbm9ueW1vdXMnO1xyXG4gICAgbG9hZGVyLmxvYWQoaW1hZ2UsIGZ1bmN0aW9uKHRleHR1cmUpe1xyXG4gICAgICB0ZXh0dXJlLndyYXBTID0gdGV4dHVyZS53cmFwVCA9IFRIUkVFLlJlcGVhdFdyYXBwaW5nO1xyXG4gICAgICBpZihpc19zdGVyZW8mJmlzX3N0ZXJlbyE9XCIwXCIpe1xyXG4gICAgICAgIHRleHR1cmUucmVwZWF0LnNldCgwLjUsIDAuNSk7XHJcbiAgICAgIH1lbHNle1xyXG4gICAgICAgIHRleHR1cmUucmVwZWF0LnNldCgwLjUsIDEpO1xyXG4gICAgICB9XHJcbiAgICAgIGlubmVyTWF0ZXJpYWwubWFwID0gdGV4dHVyZTtcclxuICAgICAgaW5uZXJNYXRlcmlhbC5tYXAubmVlZHNVcGRhdGUgPSB0cnVlO1xyXG4gICAgICBpbm5lck1hdGVyaWFsLm5lZWRzVXBkYXRlID0gdHJ1ZTtcclxuICAgIH0pO1xyXG4gIH1cclxuICB2YXIgaW5uZXIgPSBuZXcgVEhSRUUuTWVzaChpbm5lckdlb21ldHJ5LCBpbm5lck1hdGVyaWFsKTtcclxuICBpbm5lci5uYW1lID0gJ2lubmVyJztcclxuXHJcbiAgdmFyIG91dGVyTWF0ZXJpYWwgPSBuZXcgVEhSRUUuTWVzaEJhc2ljTWF0ZXJpYWwoe1xyXG4gICAgY29sb3I6IDB4ZmZmZmZmLCBzaWRlOiBUSFJFRS5Eb3VibGVTaWRlLCB0cmFuc3BhcmVudDogdHJ1ZSxcclxuICAgIG9wYWNpdHk6IE1BWF9PVVRFUl9PUEFDSVRZLCBkZXB0aFRlc3Q6IGZhbHNlXHJcbiAgfSk7XHJcbiAgdmFyIG91dGVyR2VvbWV0cnkgPSBuZXcgVEhSRUUuUmluZ0dlb21ldHJ5KHJhZGl1cyAqIDAuODUsIHJhZGl1cywgMzIpO1xyXG4gIHZhciBvdXRlciA9IG5ldyBUSFJFRS5NZXNoKG91dGVyR2VvbWV0cnksIG91dGVyTWF0ZXJpYWwpO1xyXG4gIG91dGVyLm5hbWUgPSAnb3V0ZXInO1xyXG5cclxuICAvLyBQb3NpdGlvbiBhdCB0aGUgZXh0cmVtZSBlbmQgb2YgdGhlIHNwaGVyZS5cclxuICB2YXIgaG90c3BvdCA9IG5ldyBUSFJFRS5PYmplY3QzRCgpO1xyXG4gIGhvdHNwb3QucG9zaXRpb24ueiA9IC1kaXN0YW5jZTtcclxuICBob3RzcG90LnNjYWxlLnNldChOT1JNQUxfU0NBTEUpO1xyXG5cclxuICBob3RzcG90LmFkZChpbm5lcik7XHJcbiAgaG90c3BvdC5hZGQob3V0ZXIpO1xyXG5cclxuICByZXR1cm4gaG90c3BvdDtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBMYXJnZSBhc3BlY3QgcmF0aW9zIHRlbmQgdG8gY2F1c2UgdmlzdWFsbHkgamFycmluZyBkaXN0b3J0aW9ucyBvbiB0aGUgc2lkZXMuXHJcbiAqIEhlcmUgd2UgZmFkZSBob3RzcG90cyBvdXQgdG8gYXZvaWQgdGhlbS5cclxuICovXHJcbkhvdHNwb3RSZW5kZXJlci5wcm90b3R5cGUuZmFkZU9mZkNlbnRlckhvdHNwb3RzXyA9IGZ1bmN0aW9uKGNhbWVyYSkge1xyXG4gIHZhciBsb29rQXQgPSBuZXcgVEhSRUUuVmVjdG9yMygxLCAwLCAwKTtcclxuICBsb29rQXQuYXBwbHlRdWF0ZXJuaW9uKGNhbWVyYS5xdWF0ZXJuaW9uKTtcclxuICAvLyBUYWtlIGludG8gYWNjb3VudCB0aGUgY2FtZXJhIHBhcmVudCB0b28uXHJcbiAgbG9va0F0LmFwcGx5UXVhdGVybmlvbihjYW1lcmEucGFyZW50LnF1YXRlcm5pb24pO1xyXG5cclxuICAvLyBHbyB0aHJvdWdoIGVhY2ggaG90c3BvdC4gQ2FsY3VsYXRlIGhvdyBmYXIgb2ZmIGNlbnRlciBpdCBpcy5cclxuICBmb3IgKHZhciBpZCBpbiB0aGlzLmhvdHNwb3RzKSB7XHJcbiAgICB2YXIgaG90c3BvdCA9IHRoaXMuaG90c3BvdHNbaWRdO1xyXG4gICAgdmFyIGFuZ2xlID0gaG90c3BvdC5wb3NpdGlvbi5hbmdsZVRvKGxvb2tBdCk7XHJcbiAgICB2YXIgYW5nbGVEZWcgPSBUSFJFRS5NYXRoLnJhZFRvRGVnKGFuZ2xlKTtcclxuICAgIHZhciBpc1Zpc2libGUgPSBhbmdsZURlZyA8IDQ1O1xyXG4gICAgdmFyIG9wYWNpdHk7XHJcbiAgICBpZiAoYW5nbGVEZWcgPCBGQURFX1NUQVJUX0FOR0xFX0RFRykge1xyXG4gICAgICBvcGFjaXR5ID0gMTtcclxuICAgIH0gZWxzZSBpZiAoYW5nbGVEZWcgPiBGQURFX0VORF9BTkdMRV9ERUcpIHtcclxuICAgICAgb3BhY2l0eSA9IDA7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAvLyBXZSBhcmUgaW4gdGhlIGNhc2UgU1RBUlQgPCBhbmdsZSA8IEVORC4gTGluZWFybHkgaW50ZXJwb2xhdGUuXHJcbiAgICAgIHZhciByYW5nZSA9IEZBREVfRU5EX0FOR0xFX0RFRyAtIEZBREVfU1RBUlRfQU5HTEVfREVHO1xyXG4gICAgICB2YXIgdmFsdWUgPSBGQURFX0VORF9BTkdMRV9ERUcgLSBhbmdsZURlZztcclxuICAgICAgb3BhY2l0eSA9IHZhbHVlIC8gcmFuZ2U7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gT3BhY2l0eSBhIGZ1bmN0aW9uIG9mIGFuZ2xlLiBJZiBhbmdsZSBpcyBsYXJnZSwgb3BhY2l0eSBpcyB6ZXJvLiBBdCBzb21lXHJcbiAgICAvLyBwb2ludCwgcmFtcCBvcGFjaXR5IGRvd24uXHJcbiAgICB0aGlzLnNldE9wYWNpdHlfKGlkLCBvcGFjaXR5KTtcclxuICB9XHJcbn07XHJcblxyXG5Ib3RzcG90UmVuZGVyZXIucHJvdG90eXBlLmZvY3VzXyA9IGZ1bmN0aW9uKGlkKSB7XHJcbiAgdmFyIGhvdHNwb3QgPSB0aGlzLmhvdHNwb3RzW2lkXTtcclxuXHJcbiAgLy8gVHdlZW4gc2NhbGUgb2YgaG90c3BvdC5cclxuICB0aGlzLnR3ZWVuID0gbmV3IFRXRUVOLlR3ZWVuKGhvdHNwb3Quc2NhbGUpLnRvKEZPQ1VTX1NDQUxFLCBGT0NVU19EVVJBVElPTilcclxuICAgICAgLmVhc2luZyhUV0VFTi5FYXNpbmcuUXVhZHJhdGljLkluT3V0KVxyXG4gICAgICAuc3RhcnQoKTtcclxufTtcclxuXHJcbkhvdHNwb3RSZW5kZXJlci5wcm90b3R5cGUuYmx1cl8gPSBmdW5jdGlvbihpZCkge1xyXG4gIHZhciBob3RzcG90ID0gdGhpcy5ob3RzcG90c1tpZF07XHJcblxyXG4gIHRoaXMudHdlZW4gPSBuZXcgVFdFRU4uVHdlZW4oaG90c3BvdC5zY2FsZSkudG8oTk9STUFMX1NDQUxFLCBGT0NVU19EVVJBVElPTilcclxuICAgICAgLmVhc2luZyhUV0VFTi5FYXNpbmcuUXVhZHJhdGljLkluT3V0KVxyXG4gICAgICAuc3RhcnQoKTtcclxufTtcclxuXHJcbkhvdHNwb3RSZW5kZXJlci5wcm90b3R5cGUuZG93bl8gPSBmdW5jdGlvbihpZCkge1xyXG4gIC8vIEJlY29tZSBhY3RpdmUuXHJcbiAgdmFyIGhvdHNwb3QgPSB0aGlzLmhvdHNwb3RzW2lkXTtcclxuICB2YXIgb3V0ZXIgPSBob3RzcG90LmdldE9iamVjdEJ5TmFtZSgnaW5uZXInKTtcclxuXHJcbiAgdGhpcy50d2VlbiA9IG5ldyBUV0VFTi5Ud2VlbihvdXRlci5tYXRlcmlhbC5jb2xvcikudG8oQUNUSVZFX0NPTE9SLCBBQ1RJVkVfRFVSQVRJT04pXHJcbiAgICAgIC5zdGFydCgpO1xyXG59O1xyXG5cclxuSG90c3BvdFJlbmRlcmVyLnByb3RvdHlwZS51cF8gPSBmdW5jdGlvbihpZCkge1xyXG4gIC8vIEJlY29tZSBpbmFjdGl2ZS5cclxuICB2YXIgaG90c3BvdCA9IHRoaXMuaG90c3BvdHNbaWRdO1xyXG4gIHZhciBvdXRlciA9IGhvdHNwb3QuZ2V0T2JqZWN0QnlOYW1lKCdpbm5lcicpO1xyXG5cclxuICB0aGlzLnR3ZWVuID0gbmV3IFRXRUVOLlR3ZWVuKG91dGVyLm1hdGVyaWFsLmNvbG9yKS50byhJTkFDVElWRV9DT0xPUiwgQUNUSVZFX0RVUkFUSU9OKVxyXG4gICAgICAuc3RhcnQoKTtcclxufTtcclxuXHJcbkhvdHNwb3RSZW5kZXJlci5wcm90b3R5cGUuc2V0T3BhY2l0eV8gPSBmdW5jdGlvbihpZCwgb3BhY2l0eSkge1xyXG4gIHZhciBob3RzcG90ID0gdGhpcy5ob3RzcG90c1tpZF07XHJcbiAgdmFyIG91dGVyID0gaG90c3BvdC5nZXRPYmplY3RCeU5hbWUoJ291dGVyJyk7XHJcbiAgdmFyIGlubmVyID0gaG90c3BvdC5nZXRPYmplY3RCeU5hbWUoJ2lubmVyJyk7XHJcblxyXG4gIG91dGVyLm1hdGVyaWFsLm9wYWNpdHkgPSBvcGFjaXR5ICogTUFYX09VVEVSX09QQUNJVFk7XHJcbiAgaW5uZXIubWF0ZXJpYWwub3BhY2l0eSA9IG9wYWNpdHkgKiBNQVhfSU5ORVJfT1BBQ0lUWTtcclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gSG90c3BvdFJlbmRlcmVyO1xyXG4iLCIvKlxyXG4gKiBDb3B5cmlnaHQgMjAxNSBHb29nbGUgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBFdmVudEVtaXR0ZXIgPSByZXF1aXJlKCdldmVudGVtaXR0ZXIzJyk7XHJcbnZhciBNZXNzYWdlID0gcmVxdWlyZSgnLi4vbWVzc2FnZScpO1xyXG5cclxuXHJcbi8qKlxyXG4gKiBTaXRzIGluIGFuIGVtYmVkZGVkIGlmcmFtZSwgcmVjZWl2aW5nIG1lc3NhZ2VzIGZyb20gYSBjb250YWluaW5nXHJcbiAqIGlGcmFtZS4gVGhpcyBmYWNpbGl0YXRlcyBhbiBBUEkgd2hpY2ggcHJvdmlkZXMgdGhlIGZvbGxvd2luZyBmZWF0dXJlczpcclxuICpcclxuICogICAgUGxheWluZyBhbmQgcGF1c2luZyBjb250ZW50LlxyXG4gKiAgICBBZGRpbmcgaG90c3BvdHMuXHJcbiAqICAgIFNlbmRpbmcgbWVzc2FnZXMgYmFjayB0byB0aGUgY29udGFpbmluZyBpZnJhbWUgd2hlbiBob3RzcG90IGlzIGNsaWNrZWRcclxuICogICAgU2VuZGluZyBhbmFseXRpY3MgZXZlbnRzIHRvIGNvbnRhaW5pbmcgaWZyYW1lLlxyXG4gKiAgICBSZWNlaXZpbmcgRGV2aWNlTW90aW9uIGV2ZW50cyBhbmQgcmVzeW50aGVzaXppbmcgdGhlbSBpbiB0aGlzIGlmcmFtZVxyXG4gKiAgICAgICAgKHdvcmthcm91bmQgZm9yIGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3dfYnVnLmNnaT9pZD0xNTAwNzIpLlxyXG4gKi9cclxuZnVuY3Rpb24gSUZyYW1lTWVzc2FnZVJlY2VpdmVyKCkge1xyXG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgdGhpcy5vbk1lc3NhZ2VfLmJpbmQodGhpcyksIGZhbHNlKTtcclxufVxyXG5JRnJhbWVNZXNzYWdlUmVjZWl2ZXIucHJvdG90eXBlID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG5cclxuSUZyYW1lTWVzc2FnZVJlY2VpdmVyLnByb3RvdHlwZS5vbk1lc3NhZ2VfID0gZnVuY3Rpb24oZXZlbnQpIHtcclxuICAvL2NvbnNvbGUubG9nKCdvbk1lc3NhZ2VfJywgZXZlbnQpO1xyXG5cclxuICB2YXIgbWVzc2FnZSA9IGV2ZW50LmRhdGE7XHJcbiAgdmFyIHR5cGUgPSBtZXNzYWdlLnR5cGUudG9Mb3dlckNhc2UoKTtcclxuICB2YXIgZGF0YSA9IG1lc3NhZ2UuZGF0YTtcclxuICBpZih0eXBlID09IE1lc3NhZ2UuU0VUX0NPTlRFTlQpe1xyXG4gICAgZGF0YS5jYWxsYmFjayA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgIFV0aWwuc2VuZFBhcmVudE1lc3NhZ2Uoe3R5cGU6dHlwZX0pO1xyXG4gICAgfTtcclxuICB9XHJcbiAgc3dpdGNoICh0eXBlKSB7XHJcbiAgICBjYXNlIE1lc3NhZ2UuREVWSUNFX01PVElPTjpcclxuICAgICAgLy8gU3ludGhlc2l6ZSBhIERldmljZU1vdGlvbiBldmVudC5cclxuICAgICAgdGhpcy5zeW50aGVzaXplRGV2aWNlTW90aW9uRXZlbnRfKG1lc3NhZ2UuZGV2aWNlTW90aW9uRXZlbnQpO1xyXG4gICAgICBicmVhaztcclxuICAgIGNhc2UgTWVzc2FnZS5TRVRfQ09OVEVOVDpcclxuICAgIGNhc2UgTWVzc2FnZS5TRVRfVk9MVU1FOlxyXG4gICAgY2FzZSBNZXNzYWdlLkFERF9IT1RTUE9UOlxyXG4gICAgY2FzZSBNZXNzYWdlLlBMQVk6XHJcbiAgICBjYXNlIE1lc3NhZ2UuUEFVU0U6XHJcbiAgICBjYXNlIE1lc3NhZ2UuU0VUVVBfTkFWSUdBVElPTjpcclxuICAgIGNhc2UgTWVzc2FnZS5FTkFCTEVfTVVMVElQTEFZRVJfTU9ERTpcclxuICAgIGNhc2UgTWVzc2FnZS5KT0lOX01VTFRJUExBWUVSX1JPT006XHJcbiAgICBjYXNlIE1lc3NhZ2UuTEVBVkVfTVVMVElQTEFZRVJfUk9PTTpcclxuICAgIGNhc2UgTWVzc2FnZS5TRVRfTVVMVElQTEFZRVJfTUU6XHJcbiAgICAgIC8vIFRPRE8oc211cyk6IEVtaXQgdGhlIGV2ZW50IFxyXG4gICAgICB0aGlzLmVtaXQodHlwZSwgZGF0YSk7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgZGVmYXVsdDpcclxuICAgICAgY29uc29sZS53YXJuKCdHb3QgdW5rbm93biBtZXNzYWdlIG9mIHR5cGUgJXMgZnJvbSAlcycsIHR5cGUsIE1lc3NhZ2UuU0VUX0NPTlRFTlQsIG1lc3NhZ2Uub3JpZ2luKTtcclxuICB9XHJcbn07XHJcblxyXG5JRnJhbWVNZXNzYWdlUmVjZWl2ZXIucHJvdG90eXBlLnN5bnRoZXNpemVEZXZpY2VNb3Rpb25FdmVudF8gPSBmdW5jdGlvbihldmVudERhdGEpIHtcclxuICB2YXIgdHlwZSA9ICdkZXZpY2Vtb3Rpb24taWZyYW1lJztcclxuICB2YXIgY2FuQnViYmxlID0gZmFsc2U7XHJcbiAgdmFyIGNhbmNlbGFibGUgPSBmYWxzZTtcclxuXHJcbiAgdmFyIGRtZSA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KCdEZXZpY2VNb3Rpb25FdmVudCcpO1xyXG4gIGRtZS5pbml0RGV2aWNlTW90aW9uRXZlbnQodHlwZSwgY2FuQnViYmxlLCBjYW5jZWxhYmxlLFxyXG4gICAgICBldmVudERhdGEuYWNjZWxlcmF0aW9uLFxyXG4gICAgICBldmVudERhdGEuYWNjZWxlcmF0aW9uSW5jbHVkaW5nR3Jhdml0eSxcclxuICAgICAgZXZlbnREYXRhLnJvdGF0aW9uUmF0ZSxcclxuICAgICAgZXZlbnREYXRhLmludGVydmFsKTtcclxuXHJcbiAgd2luZG93LmRpc3BhdGNoRXZlbnQoZG1lKTtcclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gSUZyYW1lTWVzc2FnZVJlY2VpdmVyO1xyXG4iLCIvKlxyXG4gKiBDb3B5cmlnaHQgMjAxNSBHb29nbGUgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcblxyXG4vKipcclxuICogU2hvd3MgYSAyRCBsb2FkaW5nIGluZGljYXRvciB3aGlsZSB2YXJpb3VzIHBpZWNlcyBvZiBFbWJlZFZSIGxvYWQuXHJcbiAqL1xyXG5mdW5jdGlvbiBMb2FkaW5nSW5kaWNhdG9yKCkge1xyXG4gIHRoaXMuZWwgPSB0aGlzLmJ1aWxkXygpO1xyXG4gIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGhpcy5lbCk7XHJcbiAgdGhpcy5zaG93KCk7XHJcbn1cclxuXHJcbkxvYWRpbmdJbmRpY2F0b3IucHJvdG90eXBlLmJ1aWxkXyA9IGZ1bmN0aW9uKCkge1xyXG4gIHZhciBvdmVybGF5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgdmFyIHMgPSBvdmVybGF5LnN0eWxlO1xyXG4gIHMucG9zaXRpb24gPSAnZml4ZWQnO1xyXG4gIHMudG9wID0gMDtcclxuICBzLmxlZnQgPSAwO1xyXG4gIHMud2lkdGggPSAnMTAwJSc7XHJcbiAgcy5oZWlnaHQgPSAnMTAwJSc7XHJcbiAgcy5iYWNrZ3JvdW5kID0gJyNlZWUnO1xyXG4gIHZhciBpbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcclxuICBpbWcuc3JjID0gJ2ltYWdlcy9sb2FkaW5nLmdpZic7XHJcbiAgdmFyIHMgPSBpbWcuc3R5bGU7XHJcbiAgcy5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XHJcbiAgcy50b3AgPSAnNTAlJztcclxuICBzLmxlZnQgPSAnNTAlJztcclxuICBzLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGUoLTUwJSwgLTUwJSknO1xyXG5cclxuICBvdmVybGF5LmFwcGVuZENoaWxkKGltZyk7XHJcbiAgcmV0dXJuIG92ZXJsYXk7XHJcbn07XHJcblxyXG5Mb2FkaW5nSW5kaWNhdG9yLnByb3RvdHlwZS5oaWRlID0gZnVuY3Rpb24oKSB7XHJcbiAgdGhpcy5lbC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG59O1xyXG5cclxuTG9hZGluZ0luZGljYXRvci5wcm90b3R5cGUuc2hvdyA9IGZ1bmN0aW9uKCkge1xyXG4gIHRoaXMuZWwuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IExvYWRpbmdJbmRpY2F0b3I7XHJcbiIsIi8qXHJcbiAqIENvcHlyaWdodCAyMDE1IEdvb2dsZSBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuXHJcbi8vIEluaXRpYWxpemUgdGhlIGxvYWRpbmcgaW5kaWNhdG9yIGFzIHF1aWNrbHkgYXMgcG9zc2libGUgdG8gZ2l2ZSB0aGUgdXNlclxyXG4vLyBpbW1lZGlhdGUgZmVlZGJhY2suXHJcbnZhciBMb2FkaW5nSW5kaWNhdG9yID0gcmVxdWlyZSgnLi9sb2FkaW5nLWluZGljYXRvcicpO1xyXG52YXIgbG9hZEluZGljYXRvciA9IG5ldyBMb2FkaW5nSW5kaWNhdG9yKCk7XHJcblxyXG52YXIgRVM2UHJvbWlzZSA9IHJlcXVpcmUoJ2VzNi1wcm9taXNlJyk7XHJcbi8vIFBvbHlmaWxsIEVTNiBwcm9taXNlcyBmb3IgSUUuXHJcbkVTNlByb21pc2UucG9seWZpbGwoKTtcclxuXHJcbnZhciBJRnJhbWVNZXNzYWdlUmVjZWl2ZXIgPSByZXF1aXJlKCcuL2lmcmFtZS1tZXNzYWdlLXJlY2VpdmVyJyk7XHJcbnZhciBNZXNzYWdlID0gcmVxdWlyZSgnLi4vbWVzc2FnZScpO1xyXG52YXIgU2NlbmVJbmZvID0gcmVxdWlyZSgnLi9zY2VuZS1pbmZvJyk7XHJcbnZhciBTdGF0cyA9IHJlcXVpcmUoJy4uLy4uL25vZGVfbW9kdWxlcy9zdGF0cy1qcy9idWlsZC9zdGF0cy5taW4nKTtcclxudmFyIFV0aWwgPSByZXF1aXJlKCcuLi91dGlsJyk7XHJcbnZhciBXZWJWUlBvbHlmaWxsID0gcmVxdWlyZSgnd2VidnItcG9seWZpbGwnKTtcclxudmFyIFdvcmxkUmVuZGVyZXIgPSByZXF1aXJlKCcuL3dvcmxkLXJlbmRlcmVyJyk7XHJcblxyXG52YXIgcmVjZWl2ZXIgPSBuZXcgSUZyYW1lTWVzc2FnZVJlY2VpdmVyKCk7XHJcbnJlY2VpdmVyLm9uKE1lc3NhZ2UuUExBWSwgb25QbGF5UmVxdWVzdCk7XHJcbnJlY2VpdmVyLm9uKE1lc3NhZ2UuUEFVU0UsIG9uUGF1c2VSZXF1ZXN0KTtcclxucmVjZWl2ZXIub24oTWVzc2FnZS5BRERfSE9UU1BPVCwgb25BZGRIb3RzcG90KTtcclxucmVjZWl2ZXIub24oTWVzc2FnZS5TRVRVUF9OQVZJR0FUSU9OLCBvbkFkZE5hdmlnYXRpb24pO1xyXG5yZWNlaXZlci5vbihNZXNzYWdlLkVOQUJMRV9NVUxUSVBMQVlFUl9NT0RFLCBlbmFibGVNdWx0aXBsYXllck1vZGUpO1xyXG5yZWNlaXZlci5vbihNZXNzYWdlLkpPSU5fTVVMVElQTEFZRVJfUk9PTSwgam9pbk11bHRpcGxheWVyUm9vbSk7XHJcbnJlY2VpdmVyLm9uKE1lc3NhZ2UuTEVBVkVfTVVMVElQTEFZRVJfUk9PTSwgbGVhdmVNdWx0aXBsYXllclJvb20pO1xyXG5yZWNlaXZlci5vbihNZXNzYWdlLlNFVF9NVUxUSVBMQVlFUl9NRSwgc2V0TXVsdGlwbGF5ZXJNZSk7XHJcbnJlY2VpdmVyLm9uKE1lc3NhZ2UuU0VUX0NPTlRFTlQsIG9uU2V0Q29udGVudCk7XHJcbnJlY2VpdmVyLm9uKE1lc3NhZ2UuU0VUX1ZPTFVNRSwgb25TZXRWb2x1bWUpO1xyXG5cclxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBvbkxvYWQpO1xyXG5cclxudmFyIHN0YXRzID0gbmV3IFN0YXRzKCk7XHJcblxyXG52YXIgd29ybGRSZW5kZXJlciA9IG5ldyBXb3JsZFJlbmRlcmVyKCk7XHJcbndvcmxkUmVuZGVyZXIub24oJ2Vycm9yJywgb25SZW5kZXJFcnJvcik7XHJcbndvcmxkUmVuZGVyZXIub24oJ2xvYWQnLCBvblJlbmRlckxvYWQpO1xyXG53b3JsZFJlbmRlcmVyLm9uKCdtb2RlY2hhbmdlJywgb25Nb2RlQ2hhbmdlKTtcclxud29ybGRSZW5kZXJlci5ob3RzcG90UmVuZGVyZXIub24oJ2NsaWNrJywgb25Ib3RzcG90Q2xpY2spO1xyXG5cclxud2luZG93LndvcmxkUmVuZGVyZXIgPSB3b3JsZFJlbmRlcmVyO1xyXG5cclxudmFyIGlzUmVhZHlTZW50ID0gZmFsc2U7XHJcblxyXG5mdW5jdGlvbiBvbkxvYWQoKSB7XHJcbiAgaWYgKCFVdGlsLmlzV2ViR0xFbmFibGVkKCkpIHtcclxuICAgIHNob3dFcnJvcignV2ViR0wgbm90IHN1cHBvcnRlZC4nKTtcclxuICAgIHJldHVybjtcclxuICB9XHJcblxyXG4gIC8vIExvYWQgdGhlIHNjZW5lLlxyXG4gIHZhciBzY2VuZSA9IFNjZW5lSW5mby5sb2FkRnJvbUdldFBhcmFtcygpO1xyXG4gIHdvcmxkUmVuZGVyZXIuc2V0U2NlbmUoc2NlbmUpO1xyXG5cclxuICBpZiAoc2NlbmUuaXNEZWJ1Zykge1xyXG4gICAgLy8gU2hvdyBzdGF0cy5cclxuICAgIHNob3dTdGF0cygpO1xyXG4gIH1cclxuXHJcbiAgaWYgKHNjZW5lLmlzWWF3T25seSkge1xyXG4gICAgV2ViVlJDb25maWcgPSB3aW5kb3cuV2ViVlJDb25maWcgfHwge307XHJcbiAgICBXZWJWUkNvbmZpZy5ZQVdfT05MWSA9IHRydWU7XHJcbiAgfVxyXG5cclxuICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUobG9vcCk7XHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBvblZpZGVvVGFwKCkge1xyXG4gIHdvcmxkUmVuZGVyZXIudmlkZW9Qcm94eS5wbGF5KCk7XHJcbiAgaGlkZVBsYXlCdXR0b24oKTtcclxuXHJcbiAgLy8gUHJldmVudCBtdWx0aXBsZSBwbGF5KCkgY2FsbHMgb24gdGhlIHZpZGVvIGVsZW1lbnQuXHJcbiAgZG9jdW1lbnQuYm9keS5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIG9uVmlkZW9UYXApO1xyXG59XHJcblxyXG5mdW5jdGlvbiBvblJlbmRlckxvYWQoZXZlbnQpIHtcclxuICBpZiAoZXZlbnQudmlkZW9FbGVtZW50KSB7XHJcbiAgICAvLyBPbiBtb2JpbGUsIHRlbGwgdGhlIHVzZXIgdGhleSBuZWVkIHRvIHRhcCB0byBzdGFydC4gT3RoZXJ3aXNlLCBhdXRvcGxheS5cclxuICAgIGlmIChVdGlsLmlzTW9iaWxlKCkpIHtcclxuICAgICAgLy8gVGVsbCB1c2VyIHRvIHRhcCB0byBzdGFydC5cclxuICAgICAgc2hvd1BsYXlCdXR0b24oKTtcclxuICAgICAgZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIG9uVmlkZW9UYXApO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgZXZlbnQudmlkZW9FbGVtZW50LnBsYXkoKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBBdHRhY2ggdG8gcGF1c2UgYW5kIHBsYXkgZXZlbnRzLCB0byBub3RpZnkgdGhlIEFQSS5cclxuICAgIGV2ZW50LnZpZGVvRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdwYXVzZScsIG9uUGF1c2UpO1xyXG4gICAgZXZlbnQudmlkZW9FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3BsYXknLCBvblBsYXkpO1xyXG4gIH1cclxuICAvLyBIaWRlIGxvYWRpbmcgaW5kaWNhdG9yLlxyXG4gIGxvYWRJbmRpY2F0b3IuaGlkZSgpO1xyXG5cclxuICAvLyBBdXRvcGFuIG9ubHkgb24gZGVza3RvcCwgZm9yIHBob3RvcyBvbmx5LCBhbmQgb25seSBpZiBhdXRvcGFuIGlzIGVuYWJsZWQuXHJcbiAgaWYgKCFVdGlsLmlzTW9iaWxlKCkgJiYgIXdvcmxkUmVuZGVyZXIuc2NlbmVJbmZvLnZpZGVvICYmXHJcbiAgICAgICF3b3JsZFJlbmRlcmVyLnNjZW5lSW5mby5pc0F1dG9wYW5PZmYpIHtcclxuICAgIHdvcmxkUmVuZGVyZXIuYXV0b3BhbigpO1xyXG4gIH1cclxuXHJcbiAgLy8gTm90aWZ5IHRoZSBBUEkgdGhhdCB3ZSBhcmUgcmVhZHksIGJ1dCBvbmx5IGRvIHRoaXMgb25jZS5cclxuICBpZiAoIWlzUmVhZHlTZW50KSB7XHJcbiAgICBVdGlsLnNlbmRQYXJlbnRNZXNzYWdlKHtcclxuICAgICAgdHlwZTogJ3JlYWR5JyBcclxuICAgIH0pO1xyXG4gICAgaXNSZWFkeVNlbnQgPSB0cnVlO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gb25QbGF5UmVxdWVzdCgpIHtcclxuICBpZiAoIXdvcmxkUmVuZGVyZXIudmlkZW9Qcm94eSkge1xyXG4gICAgb25BcGlFcnJvcignQXR0ZW1wdCB0byBwYXVzZSwgYnV0IG5vIHZpZGVvIGZvdW5kLicpO1xyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuICB3b3JsZFJlbmRlcmVyLnZpZGVvUHJveHkucGxheSgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBvblBhdXNlUmVxdWVzdCgpIHtcclxuICBpZiAoIXdvcmxkUmVuZGVyZXIudmlkZW9Qcm94eSkge1xyXG4gICAgb25BcGlFcnJvcignQXR0ZW1wdCB0byBwYXVzZSwgYnV0IG5vIHZpZGVvIGZvdW5kLicpO1xyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuICB3b3JsZFJlbmRlcmVyLnZpZGVvUHJveHkucGF1c2UoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gb25BZGRIb3RzcG90KGUpIHtcclxuICAvLyBjb25zb2xlLmxvZygnb25BZGRIb3RzcG90JywgZSk7XHJcbiAgLy8gVE9ETzogSW1wbGVtZW50IHNvbWUgdmFsaWRhdGlvbj9cclxuXHJcbiAgdmFyIHBpdGNoID0gcGFyc2VGbG9hdChlLnBpdGNoKTtcclxuICB2YXIgeWF3ID0gcGFyc2VGbG9hdChlLnlhdyk7XHJcbiAgdmFyIHJhZGl1cyA9IHBhcnNlRmxvYXQoZS5yYWRpdXMpO1xyXG4gIHZhciBkaXN0YW5jZSA9IHBhcnNlRmxvYXQoZS5kaXN0YW5jZSk7XHJcbiAgdmFyIGlkID0gZS5pZDtcclxuICB2YXIgaW1hZ2UgPSBlLmltYWdlO1xyXG4gIHZhciBpc19zdGVyZW8gPSBlLmlzX3N0ZXJlbztcclxuICB3b3JsZFJlbmRlcmVyLmhvdHNwb3RSZW5kZXJlci5hZGQocGl0Y2gsIHlhdywgcmFkaXVzLCBkaXN0YW5jZSwgaWQsIGltYWdlLCBpc19zdGVyZW8pO1xyXG4gIFxyXG59XHJcbmZ1bmN0aW9uIGVuYWJsZU11bHRpcGxheWVyTW9kZSgpe1xyXG4gIHdvcmxkUmVuZGVyZXIubXVsdGlwbGF5ZXJNb2RlLmVuYWJsZU11bHRpcGxheWVyTW9kZSgpO1xyXG59XHJcbmZ1bmN0aW9uIHNldE11bHRpcGxheWVyTWUoZSl7XHJcbiAgd29ybGRSZW5kZXJlci5tdWx0aXBsYXllck1vZGUuc2V0TWUoZSk7XHJcbn1cclxuZnVuY3Rpb24gam9pbk11bHRpcGxheWVyUm9vbShlKXtcclxuICB3b3JsZFJlbmRlcmVyLm11bHRpcGxheWVyTW9kZS5qb2luUm9vbShlLnJvb20pO1xyXG59XHJcbmZ1bmN0aW9uIGxlYXZlTXVsdGlwbGF5ZXJSb29tKCl7XHJcbiAgXHJcbn1cclxuZnVuY3Rpb24gb25BZGROYXZpZ2F0aW9uKGUpIHtcclxuICB3b3JsZFJlbmRlcmVyLm5hdmlnYXRpb25SZW5kZXJlci5zZXR1cChlKTtcclxufVxyXG5mdW5jdGlvbiBvblNldENvbnRlbnQoZSkge1xyXG4gIC8vIGNvbnNvbGUubG9nKCdvblNldENvbnRlbnQnLCBlKTtcclxuICAvLyBGYWRlIHRvIGJsYWNrLlxyXG4gIHdvcmxkUmVuZGVyZXIuc3BoZXJlUmVuZGVyZXIuc2V0T3BhY2l0eSgwLCA1MDApLnRoZW4oZnVuY3Rpb24oKSB7XHJcbiAgICAvLyBUaGVuIGxvYWQgdGhlIG5ldyBzY2VuZS5cclxuICAgIHZhciBzY2VuZSA9IFNjZW5lSW5mby5sb2FkRnJvbUFQSVBhcmFtcyhlLmNvbnRlbnRJbmZvKTtcclxuICAgIC8vIFJlbW92ZSBhbGwgb2YgdGhlIGhvdHNwb3RzLlxyXG4gICAgd29ybGRSZW5kZXJlci5ob3RzcG90UmVuZGVyZXIuY2xlYXJBbGwoKTtcclxuICAgIC8vIERlc3Ryb3kgdGhlIHdvcmxkXHJcbiAgICB3b3JsZFJlbmRlcmVyLmRlc3Ryb3koKTtcclxuICAgIC8vIFVwZGF0ZSB0aGUgVVJMIHRvIHJlZmxlY3QgdGhlIG5ldyBzY2VuZS4gVGhpcyBpcyBpbXBvcnRhbnQgcGFydGljdWxhcmlseVxyXG4gICAgLy8gb24gaU9TIHdoZXJlIHdlIHVzZSBhIGZha2UgZnVsbHNjcmVlbiBtb2RlLlxyXG4gICAgdmFyIHVybCA9IHNjZW5lLmdldEN1cnJlbnRVcmwoKTtcclxuICAgIC8vY29uc29sZS5sb2coJ1VwZGF0aW5nIHVybCB0byBiZSAlcycsIHVybCk7XHJcbiAgICB3aW5kb3cuaGlzdG9yeS5wdXNoU3RhdGUobnVsbCwgJ1ZSIFZpZXcnLCB1cmwpO1xyXG4gICAgZS5jYWxsYmFjaygpO1xyXG4gICAgLy8gQW5kIHNldCB0aGUgbmV3IHNjZW5lLlxyXG4gICAgcmV0dXJuIHdvcmxkUmVuZGVyZXIuc2V0U2NlbmUoc2NlbmUpO1xyXG4gIH0pLnRoZW4oZnVuY3Rpb24oKSB7XHJcbiAgICAvLyBUaGVuIGZhZGUgdGhlIHNjZW5lIGJhY2sgaW4uXHJcbiAgICB3b3JsZFJlbmRlcmVyLnNwaGVyZVJlbmRlcmVyLnNldE9wYWNpdHkoMSwgNTAwKTtcclxuICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gb25TZXRWb2x1bWUoZSkge1xyXG4gIC8vIE9ubHkgd29yayBmb3IgdmlkZW8uIElmIHRoZXJlJ3Mgbm8gdmlkZW8sIHNlbmQgYmFjayBhbiBlcnJvci5cclxuICBpZiAoIXdvcmxkUmVuZGVyZXIudmlkZW9Qcm94eSkge1xyXG4gICAgb25BcGlFcnJvcignQXR0ZW1wdCB0byBzZXQgdm9sdW1lLCBidXQgbm8gdmlkZW8gZm91bmQuJyk7XHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG4gIHdvcmxkUmVuZGVyZXIudmlkZW9Qcm94eS5zZXRWb2x1bWUoZS52b2x1bWVMZXZlbCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG9uQXBpRXJyb3IobWVzc2FnZSkge1xyXG4gIGNvbnNvbGUuZXJyb3IobWVzc2FnZSk7XHJcbiAgVXRpbC5zZW5kUGFyZW50TWVzc2FnZSh7XHJcbiAgICB0eXBlOiAnZXJyb3InLFxyXG4gICAgZGF0YToge21lc3NhZ2U6IG1lc3NhZ2V9XHJcbiAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG9uTW9kZUNoYW5nZShtb2RlKSB7XHJcbiAgVXRpbC5zZW5kUGFyZW50TWVzc2FnZSh7XHJcbiAgICB0eXBlOiAnbW9kZWNoYW5nZScsXHJcbiAgICBkYXRhOiB7bW9kZTogbW9kZX1cclxuICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gb25Ib3RzcG90Q2xpY2soaWQpIHtcclxuICBVdGlsLnNlbmRQYXJlbnRNZXNzYWdlKHtcclxuICAgIHR5cGU6ICdjbGljaycsXHJcbiAgICBkYXRhOiB7aWQ6IGlkfVxyXG4gIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBvblBsYXkoKSB7XHJcbiAgVXRpbC5zZW5kUGFyZW50TWVzc2FnZSh7XHJcbiAgICB0eXBlOiAncGF1c2VkJyxcclxuICAgIGRhdGE6IGZhbHNlXHJcbiAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG9uUGF1c2UoKSB7XHJcbiAgVXRpbC5zZW5kUGFyZW50TWVzc2FnZSh7XHJcbiAgICB0eXBlOiAncGF1c2VkJyxcclxuICAgIGRhdGE6IHRydWVcclxuICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gb25TY2VuZUVycm9yKG1lc3NhZ2UpIHtcclxuICBzaG93RXJyb3IoJ0xvYWRlcjogJyArIG1lc3NhZ2UpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBvblJlbmRlckVycm9yKG1lc3NhZ2UpIHtcclxuICBzaG93RXJyb3IoJ1JlbmRlcjogJyArIG1lc3NhZ2UpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzaG93RXJyb3IobWVzc2FnZSwgb3B0X3RpdGxlKSB7XHJcbiAgLy8gSGlkZSBsb2FkaW5nIGluZGljYXRvci5cclxuICBsb2FkSW5kaWNhdG9yLmhpZGUoKTtcclxuXHJcbiAgdmFyIGVycm9yID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2Vycm9yJyk7XHJcbiAgZXJyb3IuY2xhc3NMaXN0LmFkZCgndmlzaWJsZScpO1xyXG4gIGVycm9yLnF1ZXJ5U2VsZWN0b3IoJy5tZXNzYWdlJykuaW5uZXJIVE1MID0gbWVzc2FnZTtcclxuXHJcbiAgdmFyIHRpdGxlID0gKG9wdF90aXRsZSAhPT0gdW5kZWZpbmVkID8gb3B0X3RpdGxlIDogJ0Vycm9yJyk7XHJcbiAgZXJyb3IucXVlcnlTZWxlY3RvcignLnRpdGxlJykuaW5uZXJIVE1MID0gdGl0bGU7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhpZGVFcnJvcigpIHtcclxuICB2YXIgZXJyb3IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZXJyb3InKTtcclxuICBlcnJvci5jbGFzc0xpc3QucmVtb3ZlKCd2aXNpYmxlJyk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNob3dQbGF5QnV0dG9uKCkge1xyXG4gIHZhciBwbGF5QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3BsYXktb3ZlcmxheScpO1xyXG4gIHBsYXlCdXR0b24uY2xhc3NMaXN0LmFkZCgndmlzaWJsZScpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoaWRlUGxheUJ1dHRvbigpIHtcclxuICB2YXIgcGxheUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwbGF5LW92ZXJsYXknKTtcclxuICBwbGF5QnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ3Zpc2libGUnKTtcclxufVxyXG5cclxuZnVuY3Rpb24gc2hvd1N0YXRzKCkge1xyXG4gIHN0YXRzLnNldE1vZGUoMCk7IC8vIDA6IGZwcywgMTogbXNcclxuXHJcbiAgLy8gQWxpZ24gYm90dG9tLWxlZnQuXHJcbiAgc3RhdHMuZG9tRWxlbWVudC5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XHJcbiAgc3RhdHMuZG9tRWxlbWVudC5zdHlsZS5sZWZ0ID0gJzBweCc7XHJcbiAgc3RhdHMuZG9tRWxlbWVudC5zdHlsZS5ib3R0b20gPSAnMHB4JztcclxuICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHN0YXRzLmRvbUVsZW1lbnQpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBsb29wKHRpbWUpIHtcclxuICBzdGF0cy5iZWdpbigpO1xyXG4gIC8vIFVwZGF0ZSB0aGUgdmlkZW8gaWYgbmVlZGVkLlxyXG4gIGlmICh3b3JsZFJlbmRlcmVyLnZpZGVvUHJveHkpIHtcclxuICAgIHdvcmxkUmVuZGVyZXIudmlkZW9Qcm94eS51cGRhdGUodGltZSk7XHJcbiAgfVxyXG4gIHdvcmxkUmVuZGVyZXIucmVuZGVyKHRpbWUpO1xyXG4gIHN0YXRzLmVuZCgpO1xyXG4gIHJlcXVlc3RBbmltYXRpb25GcmFtZShsb29wKTtcclxufVxyXG4iLCJcclxudmFyIEV2ZW50RW1pdHRlciA9IHJlcXVpcmUoJ2V2ZW50ZW1pdHRlcjMnKTtcclxuXHJcblxyXG5mdW5jdGlvbiBNdWx0aXBsYXllck1vZGUod29ybGRSZW5kZXJlcikge1xyXG4gICAgdGhpcy53b3JsZFJlbmRlcmVyID0gd29ybGRSZW5kZXJlcjtcclxuICAgIHRoaXMuY2FtZXJhID0gdGhpcy53b3JsZFJlbmRlcmVyLmNhbWVyYTtcclxufVxyXG5NdWx0aXBsYXllck1vZGUucHJvdG90eXBlID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG5cclxuTXVsdGlwbGF5ZXJNb2RlLnByb3RvdHlwZS5lbmFibGVNdWx0aXBsYXllck1vZGUgPSBmdW5jdGlvbigpe1xyXG4gICAgdGhpcy5jYW1lcmEgPSB0aGlzLndvcmxkUmVuZGVyZXIuY2FtZXJhO1xyXG4gICAgdGhpcy5sZWFwTW90aW9uKCk7XHJcbiAgICBpZih0aGlzLm1lKXtcclxuICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5zb2NrZXQgPSBpbygpO1xyXG4gICAgICAgIHRoaXMuc29ja2V0Lm9uKFwicm9vbS1yZW5kZXItZGF0YVwiLGZ1bmN0aW9uKHJvb20pe1xyXG4gICAgICAgICAgICB0aGF0LnJlbmRlck1lKCk7XHJcbiAgICAgICAgICAgIHRoYXQucmVuZGVyUm9vbShyb29tKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLnNvY2tldC5vbihcInJvb20tam9pbmVkXCIsZnVuY3Rpb24oc29ja2V0SWQpe1xyXG4gICAgICAgICAgICB0aGF0LnNvY2tldElkID0gc29ja2V0SWQ7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn07XHJcblxyXG5NdWx0aXBsYXllck1vZGUucHJvdG90eXBlLmpvaW5Sb29tID0gZnVuY3Rpb24ocm9vbSl7XHJcbiAgICBpZih0aGlzLm1lKXtcclxuICAgICAgICB0aGlzLnJvb20gPSByb29tO1xyXG4gICAgICAgIHRoaXMuc29ja2V0LmVtaXQoXCJqb2luLXJvb21cIix7cm9vbTpyb29tLG1lOntuYW1lOnRoaXMubWUubWUubmFtZSxmYWNlOnRoaXMubWUubWUuZmFjZX0scG9zaXRpb246e3g6dGhpcy5jYW1lcmEucG9zaXRpb24ueCx5OnRoaXMuY2FtZXJhLnBvc2l0aW9uLnksejp0aGlzLmNhbWVyYS5wb3NpdGlvbi56fSxxdWF0ZXJuaW9uOnt3OnRoaXMuY2FtZXJhLnF1YXRlcm5pb24uX3cseDp0aGlzLmNhbWVyYS5xdWF0ZXJuaW9uLl94LHk6dGhpcy5jYW1lcmEucXVhdGVybmlvbi5feSx6OnRoaXMuY2FtZXJhLnF1YXRlcm5pb24uX3p9LGxlZnRIYW5kOltdLHJpZ2h0SGFuZDpbXX0pO1xyXG4gICAgfVxyXG59O1xyXG5cclxuTXVsdGlwbGF5ZXJNb2RlLnByb3RvdHlwZS5sZWF2ZVJvb20gPSBmdW5jdGlvbihyb29tKXtcclxuICAgIHRoaXMuc29ja2V0LmVtaXQoXCJsZWF2ZS1yb29tXCIse3Jvb206cm9vbSxtZTp7bmFtZTp0aGlzLm1lLm1lLm5hbWUsZmFjZTp0aGlzLm1lLm1lLmZhY2V9fSk7XHJcbn07XHJcblxyXG5NdWx0aXBsYXllck1vZGUucHJvdG90eXBlLnJlbmRlck1lID0gZnVuY3Rpb24oKXtcclxuICAgIHRoaXMubWUgPSB7cm9vbTp0aGlzLnJvb20sbWU6e25hbWU6dGhpcy5tZS5tZS5uYW1lLGZhY2U6dGhpcy5tZS5tZS5mYWNlfSxwb3NpdGlvbjp7eDp0aGlzLmNhbWVyYS5wb3NpdGlvbi54LHk6dGhpcy5jYW1lcmEucG9zaXRpb24ueSx6OnRoaXMuY2FtZXJhLnBvc2l0aW9uLnp9LHF1YXRlcm5pb246e3c6dGhpcy5jYW1lcmEucXVhdGVybmlvbi5fdyx4OnRoaXMuY2FtZXJhLnF1YXRlcm5pb24uX3gseTp0aGlzLmNhbWVyYS5xdWF0ZXJuaW9uLl95LHo6dGhpcy5jYW1lcmEucXVhdGVybmlvbi5fen0sbGVmdEhhbmQ6dGhpcy5tZS5sZWZ0SGFuZCxyaWdodEhhbmQ6dGhpcy5tZS5yaWdodEhhbmR9O1xyXG4gICAgdGhpcy5zb2NrZXQuZW1pdChcInJvb20tcmVuZGVyXCIsdGhpcy5tZSk7XHJcbn07XHJcbk11bHRpcGxheWVyTW9kZS5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24oKXtcclxuICAgIGZvcih2YXIgaWQgaW4gTXVsdGlwbGF5ZXJNb2RlLnByb3RvdHlwZS5wbGF5ZXJzKXtcclxuICAgICAgICB2YXIgcGxheWVyID0gTXVsdGlwbGF5ZXJNb2RlLnByb3RvdHlwZS5wbGF5ZXJzW2lkXTtcclxuICAgICAgICBwbGF5ZXIucXVhdGVybmlvbi5jb3B5KHBsYXllci5wZXJzb24ucXVhdGVybmlvbik7XHJcbiAgICAgICAgLy9wbGF5ZXIucm90YXRpb24uc2V0KC0ocGxheWVyLnBlcnNvbi5yb3RhdGlvbi56KSxwbGF5ZXIucGVyc29uLnJvdGF0aW9uLnkscGxheWVyLnBlcnNvbi5yb3RhdGlvbi54KTtcclxuICAgIH1cclxufTtcclxuTXVsdGlwbGF5ZXJNb2RlLnByb3RvdHlwZS5wbGF5ZXJzID0ge307XHJcbk11bHRpcGxheWVyTW9kZS5wcm90b3R5cGUucmVuZGVyUm9vbSA9IGZ1bmN0aW9uKHJvb20pe1xyXG4gICAgdmFyIHBlcnNvbkNvdW50ID0gMDtcclxuICAgIGZvcih2YXIgaWQgaW4gcm9vbS5wZW9wbGUpe1xyXG4gICAgICAgIHBlcnNvbkNvdW50Kys7XHJcbiAgICAgICAgdmFyIGFuZ2xlID0gMzYwKihyb29tLnBlb3BsZVtpZF0ubnVtYmVyLzIpO1xyXG4gICAgICAgIGlmKGlkIT10aGlzLm1lLm1lLm5hbWUpe1xyXG4gICAgICAgICAgICB2YXIgY3ViZTtcclxuICAgICAgICAgICAgdmFyIHBlcnNvbiA9IHJvb20ucGVvcGxlW2lkXTtcclxuICAgICAgICAgICAgaWYoISh0aGlzLnBsYXllcnNbcGVyc29uLm1lLm5hbWVdKSl7XHJcbiAgICAgICAgICAgICAgICB2YXIgZ2VvbWV0cnkgPSBuZXcgVEhSRUUuU3BoZXJlR2VvbWV0cnkoIDE1LCAyNCwgMjQgKTtcclxuICAgICAgICAgICAgICAgIHZhciBtYXRlcmlhbCA9IG5ldyBUSFJFRS5NZXNoUGhvbmdNYXRlcmlhbCgge2NvbG9yOiAweGVmZWZlZn0gKTtcclxuICAgICAgICAgICAgICAgIGdlb21ldHJ5LmFwcGx5TWF0cml4KCBuZXcgVEhSRUUuTWF0cml4NCgpLm1ha2VTY2FsZSggMS4wLCAxLjIsIDAuMiApICk7XHJcbiAgICAgICAgICAgICAgICBjdWJlID0gbmV3IFRIUkVFLkdyb3VwKCk7XHJcbiAgICAgICAgICAgICAgICBjdWJlLmN1YmUgPSBuZXcgVEhSRUUuTWVzaCggZ2VvbWV0cnksIG1hdGVyaWFsICk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGN1YmUuY3ViZS5yZW5kZXJPcmRlcj0tMTtcclxuICAgICAgICAgICAgICAgIGN1YmUuYWRkKGN1YmUuY3ViZSk7XHJcbiAgICAgICAgICAgICAgICBjdWJlLmxlZnRNZXNoZXM9W107XHJcbiAgICAgICAgICAgICAgICBjdWJlLnJpZ2h0TWVzaGVzPVtdO1xyXG4gICAgICAgICAgICAgICAgY3ViZS5vcmlnaW5hbFBvc2l0aW9uID0ge3g6MTAwKk1hdGguY29zKGFuZ2xlKSx6OjEwMCpNYXRoLnNpbihhbmdsZSl9O1xyXG4gICAgICAgICAgICAgICAgY3ViZS5wb3NpdGlvbi5zZXQoY3ViZS5vcmlnaW5hbFBvc2l0aW9uLngsMCxjdWJlLm9yaWdpbmFsUG9zaXRpb24ueik7XHJcbiAgICAgICAgICAgICAgICBjdWJlLnBlcnNvbiA9IHBlcnNvbjtcclxuICAgICAgICAgICAgICAgIHRoaXMucGxheWVyc1twZXJzb24ubWUubmFtZV0gPSBjdWJlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy53b3JsZFJlbmRlcmVyLnNjZW5lLmFkZCggY3ViZSApO1xyXG4gICAgICAgICAgICAgICAgdmFyIGxvYWRlciA9IG5ldyBUSFJFRS5UZXh0dXJlTG9hZGVyKCk7XHJcbiAgICAgICAgICAgICAgICBsb2FkZXIuY3Jvc3NPcmlnaW4gPSAnYW5vbnltb3VzJztcclxuICAgICAgICAgICAgICAgIGxvYWRlci5sb2FkKHBlcnNvbi5tZS5mYWNlLCBmdW5jdGlvbih0ZXh0dXJlKXtcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0dXJlLndyYXBTID0gdGV4dHVyZS53cmFwVCA9IFRIUkVFLlJlcGVhdFdyYXBwaW5nO1xyXG4gICAgICAgICAgICAgICAgICAgIHRleHR1cmUub2Zmc2V0LnggPSAwLjc1O1xyXG4gICAgICAgICAgICAgICAgICAgIGN1YmUuY3ViZS5tYXRlcmlhbC5tYXAgPSB0ZXh0dXJlO1xyXG4gICAgICAgICAgICAgICAgICAgIHRleHR1cmUubmVlZHNVcGRhdGU9dHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBjdWJlLmN1YmUubWF0ZXJpYWwubmVlZHNVcGRhdGU9dHJ1ZTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgIHRoaXMucGxheWVyc1twZXJzb24ubWUubmFtZV0ucGVyc29uID0gcGVyc29uO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJIYW5kcyh0aGlzLnBsYXllcnNbcGVyc29uLm1lLm5hbWVdLHBlcnNvbixmYWxzZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgdmFyIG9yaWdpbmFsUG9zaXRpb24gPSB7eDoxMDAqTWF0aC5jb3MoYW5nbGUpLHo6MTAwKk1hdGguc2luKGFuZ2xlKX07XHJcbiAgICAgICAgICAgIHRoaXMuY2FtZXJhLnBhcmVudC5wb3NpdGlvbi5zZXQob3JpZ2luYWxQb3NpdGlvbi54LDAsb3JpZ2luYWxQb3NpdGlvbi56KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBmb3IodmFyIGlkIGluIE11bHRpcGxheWVyTW9kZS5wcm90b3R5cGUucGxheWVycyl7XHJcbiAgICAgICAgaWYoIShpZCBpbiByb29tLnBlb3BsZSkpe1xyXG4gICAgICAgICAgICB0aGlzLndvcmxkUmVuZGVyZXIuc2NlbmUucmVtb3ZlKCBNdWx0aXBsYXllck1vZGUucHJvdG90eXBlLnBsYXllcnNbaWRdICk7XHJcbiAgICAgICAgICAgIGRlbGV0ZSBNdWx0aXBsYXllck1vZGUucHJvdG90eXBlLnBsYXllcnNbaWRdO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufTtcclxuXHJcbk11bHRpcGxheWVyTW9kZS5wcm90b3R5cGUuc2V0TWUgPSBmdW5jdGlvbihkYXRhKXtcclxuICAgIHRoaXMubWUgPSB7bWU6e25hbWU6ZGF0YS5uYW1lLGZhY2U6ZGF0YS5mYWNlfSxwb3NpdGlvbjp7eDp0aGlzLmNhbWVyYS5wb3NpdGlvbi54LHk6dGhpcy5jYW1lcmEucG9zaXRpb24ueSx6OnRoaXMuY2FtZXJhLnBvc2l0aW9uLnp9LHF1YXRlcm5pb246e3c6dGhpcy5jYW1lcmEucXVhdGVybmlvbi5fdyx4OnRoaXMuY2FtZXJhLnF1YXRlcm5pb24uX3gseTp0aGlzLmNhbWVyYS5xdWF0ZXJuaW9uLl95LHo6dGhpcy5jYW1lcmEucXVhdGVybmlvbi5fen0sbGVmdEhhbmQ6W10scmlnaHRIYW5kOltdfTtcclxufTtcclxuTXVsdGlwbGF5ZXJNb2RlLnByb3RvdHlwZS5yZW5kZXJIYW5kcyA9IGZ1bmN0aW9uKG9iamVjdCxmcmFtZSxpc0xlYXApe1xyXG4gICAgdmFyIGNvdW50Qm9uZXMgPSAwO1xyXG4gICAgdmFyIGNvdW50QXJtcyA9IDA7XHJcbiAgICBpZihpc0xlYXApe1xyXG4gICAgICAgIG9iamVjdC5hcm1NZXNoZXMuZm9yRWFjaCggZnVuY3Rpb24oIGl0ZW0gKSB7IG9iamVjdC5yZW1vdmUoIGl0ZW0gKTsgfSApO1xyXG4gICAgICAgIG9iamVjdC5ib25lTWVzaGVzLmZvckVhY2goIGZ1bmN0aW9uKCBpdGVtICkgeyBvYmplY3QucmVtb3ZlKCBpdGVtICk7IH0gKTtcclxuICAgICAgICB0aGlzLm1lLmxlZnRIYW5kPVtdO1xyXG4gICAgICAgIHRoaXMubWUucmlnaHRIYW5kPVtdO1xyXG4gICAgICAgIGZvciAoIHZhciBoYW5kIG9mIGZyYW1lLmhhbmRzICkge1xyXG4gICAgICAgICAgICBmb3IgKCB2YXIgZmluZ2VyIG9mIGhhbmQuZmluZ2VycyApIHtcclxuICAgICAgICAgICAgICAgIGZvciAoIHZhciBib25lIG9mIGZpbmdlci5ib25lcyApIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIGNvdW50Qm9uZXMrKyA9PT0gMCApIHsgY29udGludWU7IH1cclxuICAgICAgICAgICAgICAgICAgICBib25lLmNlbnRlcl8gPSBib25lLmNlbnRlcigpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJvbmUubWF0cml4XyA9IGJvbmUubWF0cml4KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJvbmVNZXNoID0gb2JqZWN0LmJvbmVNZXNoZXMgWyBjb3VudEJvbmVzIF0gfHwgdGhpcy5hZGRCb25lTWVzaCggb2JqZWN0LmJvbmVNZXNoZXMgKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUJvbmVNZXNoKCBib25lLCBib25lTWVzaCwgb2JqZWN0LCBpc0xlYXAgKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZEhhbmRUb01lKGhhbmQudHlwZSxib25lKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvL3ZhciBhcm0gPSBoYW5kLmFybTtcclxuICAgICAgICAgICAgLy9hcm0uY2VudGVyXyA9IGFybS5jZW50ZXIoKTtcclxuICAgICAgICAgICAgLy9hcm0ubWF0cml4XyA9IGFybS5tYXRyaXgoKTtcclxuICAgICAgICAgICAgLy92YXIgYXJtTWVzaCA9IG9iamVjdC5hcm1NZXNoZXMgWyBjb3VudEFybXMrKyBdIHx8IHRoaXMuYWRkQm9uZU1lc2goIG9iamVjdC5hcm1NZXNoZXMgKTtcclxuICAgICAgICAgICAgLy8vL3RoaXMuYWRkSGFuZFRvTWUoaGFuZC50eXBlLGFybSk7XHJcbiAgICAgICAgICAgIC8vdGhpcy51cGRhdGVCb25lTWVzaCggYXJtLCBhcm1NZXNoLCBvYmplY3QsIGlzTGVhcCApO1xyXG4gICAgICAgICAgICAvL2FybU1lc2guc2NhbGUuc2V0KCBhcm0ud2lkdGggLyA0LCBhcm0ud2lkdGggLyAyLCBhcm0ubGVuZ3RoICk7XHJcbiAgICAgICAgfVxyXG4gICAgfWVsc2V7XHJcbiAgICAgICAgb2JqZWN0LmxlZnRNZXNoZXMuZm9yRWFjaCggZnVuY3Rpb24oIGl0ZW0gKSB7IG9iamVjdC5yZW1vdmUoIGl0ZW0gKTsgfSApO1xyXG4gICAgICAgIG9iamVjdC5yaWdodE1lc2hlcy5mb3JFYWNoKCBmdW5jdGlvbiggaXRlbSApIHsgb2JqZWN0LnJlbW92ZSggaXRlbSApOyB9ICk7XHJcbiAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xyXG4gICAgICAgIGZyYW1lLmxlZnRIYW5kLmZvckVhY2goZnVuY3Rpb24oYm9uZSxpKXtcclxuICAgICAgICAgICAgdmFyIGJvbmVNZXNoID0gb2JqZWN0LmxlZnRNZXNoZXMgWyBpIF0gfHwgdGhhdC5hZGRCb25lTWVzaCggb2JqZWN0LmxlZnRNZXNoZXMgKTtcclxuICAgICAgICAgICAgdGhhdC51cGRhdGVCb25lTWVzaCggYm9uZSwgYm9uZU1lc2gsIG9iamVjdCwgaXNMZWFwICk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgZnJhbWUucmlnaHRIYW5kLmZvckVhY2goZnVuY3Rpb24oYm9uZSxpKXtcclxuICAgICAgICAgICAgdmFyIGJvbmVNZXNoID0gb2JqZWN0LnJpZ2h0TWVzaGVzIFsgaSBdIHx8IHRoYXQuYWRkQm9uZU1lc2goIG9iamVjdC5yaWdodE1lc2hlcyApO1xyXG4gICAgICAgICAgICB0aGF0LnVwZGF0ZUJvbmVNZXNoKCBib25lLCBib25lTWVzaCwgb2JqZWN0LCBpc0xlYXApO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59O1xyXG5cclxuTXVsdGlwbGF5ZXJNb2RlLnByb3RvdHlwZS5hZGRIYW5kVG9NZSA9IGZ1bmN0aW9uKCBzaWRlLCBib25lICkge1xyXG4gICAgdGhpcy5tZVtzaWRlK1wiSGFuZFwiXS5wdXNoKHtjZW50ZXJfOiBib25lLmNlbnRlcl99KTtcclxufTtcclxuXHJcbk11bHRpcGxheWVyTW9kZS5wcm90b3R5cGUuYWRkQm9uZU1lc2ggPSBmdW5jdGlvbiggbWVzaGVzICkge1xyXG4gICAgdmFyIGdlb21ldHJ5ID0gbmV3IFRIUkVFLlNwaGVyZUdlb21ldHJ5KCAxLCAyMCwgMjAgKTtcclxuICAgIHZhciBtYXRlcmlhbCA9IG5ldyBUSFJFRS5NZXNoUGhvbmdNYXRlcmlhbCgge2NvbG9yOiAweGVmZWZlZn0gKTtcclxuICAgIHZhciBtZXNoID0gbmV3IFRIUkVFLk1lc2goIGdlb21ldHJ5LCBtYXRlcmlhbCApO1xyXG4gICAgICAgIG1lc2gucmVuZGVyT3JkZXI9MTtcclxuICAgIG1lc2hlcy5wdXNoKCBtZXNoICk7XHJcbiAgICByZXR1cm4gbWVzaDtcclxufTtcclxuXHJcbk11bHRpcGxheWVyTW9kZS5wcm90b3R5cGUudXBkYXRlQm9uZU1lc2ggPSBmdW5jdGlvbiggYm9uZSwgbWVzaCwgcGFyZW50LCBpc0xlYXApIHtcclxuICAgICAgICBpZihpc0xlYXApe1xyXG4gICAgICAgICAgICBtZXNoLnNldFJvdGF0aW9uRnJvbU1hdHJpeCggbmV3IFRIUkVFLk1hdHJpeDQoKS5mcm9tQXJyYXkoIGJvbmUubWF0cml4XyApICk7XHJcbiAgICAgICAgICAgIG1lc2gucXVhdGVybmlvbi5tdWx0aXBseSggbmV3IFRIUkVFLlF1YXRlcm5pb24oKS5zZXRGcm9tRXVsZXIoIG5ldyBUSFJFRS5FdWxlciggMCwgMCwgTWF0aC5QSSAvIDIgKSApICk7XHJcbiAgICAgICAgICAgIG1lc2guc2NhbGUuc2V0KCBib25lLndpZHRoLzEwLCBib25lLndpZHRoLzEwLCBib25lLmxlbmd0aCowLjggKTtcclxuICAgICAgICAgICAgbWVzaC5wb3NpdGlvbi5zZXQoIGJvbmUuY2VudGVyX1swXSxib25lLmNlbnRlcl9bMV0sYm9uZS5jZW50ZXJfWzJdICk7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIG1lc2gucG9zaXRpb24uc2V0KCBib25lLmNlbnRlcl9bMF0sYm9uZS5jZW50ZXJfWzFdLGJvbmUuY2VudGVyX1syXSApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwYXJlbnQuYWRkKCBtZXNoICk7XHJcbn07XHJcblxyXG5NdWx0aXBsYXllck1vZGUucHJvdG90eXBlLmxlYXBNb3Rpb24gPSBmdW5jdGlvbigpe1xyXG4gICAgdmFyIHRoYXQgPSB0aGlzO1xyXG4gICAgdGhhdC5jYW1lcmEuYXJtTWVzaGVzID0gW107XHJcblx0dGhhdC5jYW1lcmEuYm9uZU1lc2hlcyA9IFtdO1xyXG4gICAgXHJcbiAgICBMZWFwLmxvb3Aoe2VuYWJsZUdlc3R1cmVzOnRydWUsb3B0aW1pemVITUQ6IHRydWUsYmFja2dyb3VuZDogdHJ1ZX0sIGZ1bmN0aW9uKGZyYW1lKXtcclxuICAgICAgICB0aGF0LnJlbmRlckhhbmRzKHRoYXQuY2FtZXJhLGZyYW1lLHRydWUpO1xyXG4gICAgfSkudXNlKCd0cmFuc2Zvcm0nLCB7XHJcbiAgICAgICAgcXVhdGVybmlvbjogbmV3IFRIUkVFLlF1YXRlcm5pb24oKS5zZXRGcm9tRXVsZXIobmV3IFRIUkVFLkV1bGVyKE1hdGguUEkgKiAtMC4zLCAwLCBNYXRoLlBJLCAnWlhZJykpLFxyXG4gICAgICAgIHBvc2l0aW9uOiBuZXcgVEhSRUUuVmVjdG9yMygwLCAwLDIwKSxcclxuICAgICAgICBzY2FsZTowLjE4LFxyXG4gICAgICAgIC8vZWZmZWN0aXZlUGFyZW50OnRoYXQuY2FtZXJhXHJcbiAgICB9KVxyXG4gICAgLyoudXNlKCdib25lSGFuZCcsIHtcclxuICAgICAgLy8gSWYgeW91IGFscmVhZHkgaGF2ZSBhIHNjZW5lIG9yIHdhbnQgdG8gY3JlYXRlIGl0IHlvdXJzZWxmLCB5b3UgY2FuIHBhc3MgaXQgaW4gaGVyZVxyXG4gICAgICAvLyBBbHRlcm5hdGl2ZWx5LCB5b3UgY2FuIHBhc3MgaXQgaW4gd2hlbmV2ZXIgeW91IHdhbnQgYnkgZG9pbmdcclxuICAgICAgLy8gTGVhcC5sb29wQ29udHJvbGxlci5wbHVnaW5zLmJvbmVIYW5kLnNjZW5lID0gbXlTY2VuZS5cclxuICAgICAgICBzY2VuZTogdGhpcy53b3JsZFJlbmRlcmVyLnNjZW5lLFxyXG4gICAgICAvLyBEaXNwbGF5IHRoZSBhcm1cclxuICAgICAgICBhcm06IHRydWVcclxuICAgIH0pKi87XHJcbn07XHJcbm1vZHVsZS5leHBvcnRzID0gTXVsdGlwbGF5ZXJNb2RlOyIsIlxyXG52YXIgRXllcyA9IHJlcXVpcmUoJy4vZXllcycpO1xyXG52YXIgVGVtcGxhdGVSZW5kZXJlciA9IHJlcXVpcmUoJy4vdGVtcGxhdGUtcmVuZGVyZXInKTtcclxuXHJcbnZhciBTY2VuZUluZm8gPSByZXF1aXJlKCcuL3NjZW5lLWluZm8nKTtcclxuXHJcbmZ1bmN0aW9uIE5hdmlnYXRpb25SZW5kZXJlcih3b3JsZFJlbmRlcmVyKSB7XHJcbiAgdGhpcy5zZXRXb3JsZCh3b3JsZFJlbmRlcmVyKTtcclxufVxyXG5cclxuTmF2aWdhdGlvblJlbmRlcmVyLnByb3RvdHlwZSA9IG5ldyBUZW1wbGF0ZVJlbmRlcmVyKCk7XHJcbk5hdmlnYXRpb25SZW5kZXJlci5wcm90b3R5cGUubmV4dF8gPSBmdW5jdGlvbigpe1xyXG4gIHZhciBrZXlzID0gT2JqZWN0LmtleXModGhpcy5kYXRhKTtcclxuICBpZih0aGlzLmN1cnJlbnQ8a2V5cy5sZW5ndGgtMSl7XHJcbiAgICB0aGlzLmN1cnJlbnQrKztcclxuICAgIHRoaXMuc2hvd0N1cnJlbnQoKTtcclxuICB9XHJcbn07XHJcblxyXG5OYXZpZ2F0aW9uUmVuZGVyZXIucHJvdG90eXBlLnByZXZfID0gZnVuY3Rpb24oKXtcclxuICBpZih0aGlzLmN1cnJlbnQ+MCl7XHJcbiAgICB0aGlzLmN1cnJlbnQtLTtcclxuICAgIHRoaXMuc2hvd0N1cnJlbnQoKTtcclxuICB9XHJcbn07XHJcbk5hdmlnYXRpb25SZW5kZXJlci5wcm90b3R5cGUuc2hvd0N1cnJlbnQgPSBmdW5jdGlvbigpe1xyXG4gIHZhciBjdXJyZW50ID0gdGhpcy5kYXRhW09iamVjdC5rZXlzKHRoaXMuZGF0YSlbdGhpcy5jdXJyZW50XV07XHJcbiAgdmFyIHRoYXQgPSB0aGlzO1xyXG4gIHZhciBsb2FkZXIgPSBuZXcgVEhSRUUuVGV4dHVyZUxvYWRlcigpO1xyXG4gIGxvYWRlci5jcm9zc09yaWdpbiA9ICdhbm9ueW1vdXMnO1xyXG4gIGxvYWRlci5sb2FkKGN1cnJlbnQuaW1hZ2UsIGZ1bmN0aW9uKHRleHR1cmUpe1xyXG4gICAgdmFyIGxlZnRUZXh0dXJlID0gdGV4dHVyZS5jbG9uZSgpO1xyXG4gICAgdmFyIHJpZ2h0VGV4dHVyZSA9IHRleHR1cmUuY2xvbmUoKTtcclxuICAgIHJpZ2h0VGV4dHVyZS53cmFwUyA9IHJpZ2h0VGV4dHVyZS53cmFwVCA9IGxlZnRUZXh0dXJlLndyYXBTID0gbGVmdFRleHR1cmUud3JhcFQgPSBUSFJFRS5SZXBlYXRXcmFwcGluZztcclxuICAgIGlmIChjdXJyZW50LmlzX3N0ZXJlbyl7XHJcbiAgICAgIGxlZnRUZXh0dXJlLnJlcGVhdC5zZXQoMC44LCAwLjQpO1xyXG4gICAgICByaWdodFRleHR1cmUucmVwZWF0LnNldCgwLjgsMC40KTtcclxuICAgICAgbGVmdFRleHR1cmUub2Zmc2V0LnNldCgwLjA1LDAuMDUpO1xyXG4gICAgICByaWdodFRleHR1cmUub2Zmc2V0LnNldCgwLjA1LDAuNTUpO1xyXG4gICAgfWVsc2V7XHJcbiAgICAgIGxlZnRUZXh0dXJlLnJlcGVhdC5zZXQoMC44LCAwLjgpO1xyXG4gICAgICByaWdodFRleHR1cmUucmVwZWF0LnNldCgwLjgsIDAuOCk7XHJcbiAgICAgIGxlZnRUZXh0dXJlLm9mZnNldC5zZXQoMC4xLDAuMSk7XHJcbiAgICAgIHJpZ2h0VGV4dHVyZS5vZmZzZXQuc2V0KDAuMSwwLjEpO1xyXG4gICAgfVxyXG4gICAgdGhhdC5wbGFuZUxlZnQubWF0ZXJpYWwubWFwID0gbGVmdFRleHR1cmU7XHJcbiAgICB0aGF0LnBsYW5lUmlnaHQubWF0ZXJpYWwubWFwID0gcmlnaHRUZXh0dXJlO1xyXG4gICAgdGhhdC5wbGFuZUxlZnQubWF0ZXJpYWwubmVlZHNVcGRhdGU9dHJ1ZTtcclxuICAgIHRoYXQucGxhbmVSaWdodC5tYXRlcmlhbC5uZWVkc1VwZGF0ZT10cnVlO1xyXG4gICAgdGhhdC5wbGFuZUxlZnQubWF0ZXJpYWwubWFwLm5lZWRzVXBkYXRlPXRydWU7XHJcbiAgICB0aGF0LnBsYW5lUmlnaHQubWF0ZXJpYWwubWFwLm5lZWRzVXBkYXRlPXRydWU7XHJcbiAgfSk7XHJcbn07XHJcblxyXG5OYXZpZ2F0aW9uUmVuZGVyZXIucHJvdG90eXBlLmNyZWF0ZU5hdmlnYXRpb25QbGFuZV8gPSBmdW5jdGlvbigpIHtcclxuICB2YXIgZ2VvbWV0cnkgPSAgbmV3IFRIUkVFLlBsYW5lR2VvbWV0cnkoIDAuMiwgMC4yLCAwLjAxKTtcclxuICB2YXIgbWF0ZXJpYWwgPSBuZXcgVEhSRUUuTWVzaEJhc2ljTWF0ZXJpYWwoe3RyYW5zcGFyZW50OiB0cnVlLCBvcGFjaXR5OiAwLjl9KTtcclxuICB2YXIgcGxhbmUgPSBuZXcgVEhSRUUuTWVzaCggZ2VvbWV0cnksIG1hdGVyaWFsICk7XHJcbiAgcGxhbmUucG9zaXRpb24uc2V0KDAsLTAuMSwtMC40KTtcclxuICBwbGFuZS5sb29rQXQodGhpcy53b3JsZFJlbmRlcmVyLmNhbWVyYS5wb3NpdGlvbik7XHJcbiAgcmV0dXJuIHBsYW5lO1xyXG59O1xyXG5cclxuTmF2aWdhdGlvblJlbmRlcmVyLnByb3RvdHlwZS5jcmVhdGVOYXZpZ2F0aW9uQnV0dG9uXyA9IGZ1bmN0aW9uKCkge1xyXG4gIHZhciBnZW9tZXRyeSA9ICBuZXcgVEhSRUUuQ3lsaW5kZXJHZW9tZXRyeSgwLCAwLjAzLCAwLjAzLCAzLCAyLCBmYWxzZSk7XHJcbiAgdmFyIG1hdGVyaWFsID0gbmV3IFRIUkVFLk1lc2hQaG9uZ01hdGVyaWFsKHsvKnRyYW5zcGFyZW50OiB0cnVlLCBvcGFjaXR5OiAwLjksKi8gY29sb3I6IDB4YjM4OGZmfSk7XHJcbiAgdmFyIGJ1dHRvbiA9IG5ldyBUSFJFRS5NZXNoKCBnZW9tZXRyeSwgbWF0ZXJpYWwgKTtcclxuIC8vIGJ1dHRvbi5sb29rQXQodGhpcy53b3JsZFJlbmRlcmVyLmNhbWVyYS5wb3NpdGlvbik7XHJcbiAgcmV0dXJuIGJ1dHRvbjtcclxufTtcclxuXHJcbk5hdmlnYXRpb25SZW5kZXJlci5wcm90b3R5cGUudXBkYXRlXyA9IGZ1bmN0aW9uKGNhbWVyYSkge1xyXG4gIGlmICh0aGlzLndvcmxkUmVuZGVyZXIuaXNWUk1vZGUoKSkge1xyXG4gICAgdGhpcy5wb2ludGVyLnNldCgwLCAwKTtcclxuICB9XHJcbiAgLy8gVXBkYXRlIHRoZSBwaWNraW5nIHJheSB3aXRoIHRoZSBjYW1lcmEgYW5kIG1vdXNlIHBvc2l0aW9uLlxyXG4gIHRoaXMucmF5Y2FzdGVyLnNldEZyb21DYW1lcmEodGhpcy5wb2ludGVyLCBjYW1lcmEpO1x0XHJcbiAgXHJcbiAgaWYodGhpcy51cGRhdGUmJnR5cGVvZiB0aGlzLnVwZGF0ZSA9PSBcImZ1bmN0aW9uXCIpdGhpcy51cGRhdGUoKTtcclxuICBcclxuICB2YXIgZWxlbWVudHMgPSB0aGlzLndvcmxkUmVuZGVyZXIuc2NlbmUuZ2V0T2JqZWN0QnlOYW1lKCduYXYnKS5jaGlsZHJlbjtcclxuICBcclxuICB2YXIgaW50ZXJzZWN0cyA9IHRoaXMucmF5Y2FzdGVyLmludGVyc2VjdE9iamVjdHMoZWxlbWVudHMpO1xyXG4gIHZhciBpc0ludGVyc2VjdGVkID0gKGludGVyc2VjdHMubGVuZ3RoID4gMCk7XHJcbiAgXHJcbiAgLy8gSWYgbmV3bHkgc2VsZWN0ZWQsIGVtaXQgYSBmb2N1cyBldmVudC5cclxuICBpZiAoaXNJbnRlcnNlY3RlZCkge1xyXG4gICAgdGhpcy5jdXJyZW50RWxlbWVudCA9IGludGVyc2VjdHNbMF0ub2JqZWN0O1xyXG4gIH1lbHNle1xyXG4gICAgdGhpcy5jdXJyZW50RWxlbWVudCA9IGZhbHNlO1xyXG4gIH1cclxufTtcclxuXHJcbk5hdmlnYXRpb25SZW5kZXJlci5wcm90b3R5cGUuc2V0dXAgPSBmdW5jdGlvbihkYXRhKSB7XHJcbiAgdGhpcy5kYXRhID0gZGF0YTtcclxuICB0aGlzLnBsYW5lTGVmdCA9IHRoaXMuY3JlYXRlTmF2aWdhdGlvblBsYW5lXygpO1xyXG4gIHRoaXMucGxhbmVSaWdodCA9IHRoaXMuY3JlYXRlTmF2aWdhdGlvblBsYW5lXygpO1xyXG4gIHRoaXMucGxhbmVMZWZ0Lm5hbWUgPSBcInBsYW5lTGVmdFwiO1xyXG4gIHRoaXMucGxhbmVSaWdodC5uYW1lID0gXCJwbGFuZVJpZ2h0XCI7XHJcbiAgdGhpcy5uYXZMZWZ0ID0gdGhpcy5jcmVhdGVOYXZpZ2F0aW9uQnV0dG9uXygpO1xyXG4gIHRoaXMubmF2UmlnaHQgPSB0aGlzLmNyZWF0ZU5hdmlnYXRpb25CdXR0b25fKCk7XHJcbiAgdGhpcy5uYXZMZWZ0Lm5hbWUgPSBcIm5hdkxlZnRcIjtcclxuICB0aGlzLm5hdlJpZ2h0Lm5hbWUgPSBcIm5hdlJpZ2h0XCI7XHJcbiAgdGhpcy5uYXZMZWZ0LnBvc2l0aW9uLnNldCgtMC4xLC0wLjA3NSwtMC4zKTtcclxuICB0aGlzLm5hdlJpZ2h0LnBvc2l0aW9uLnNldCgwLjEsLTAuMDc1LC0wLjMpO1xyXG4gIHRoaXMubmF2TGVmdC5yb3RhdGlvbi5zZXQoMCwtKE1hdGguUEkvNCksTWF0aC5QSS8yKTtcclxuICB0aGlzLm5hdlJpZ2h0LnJvdGF0aW9uLnNldCgwLE1hdGguUEkvNCwtKE1hdGguUEkvMikpO1xyXG4gIC8vdGhpcy5hZGRfKHRoaXMubmF2TGVmdCxcIm5hdkxlZnRcIik7XHJcbiAgLy90aGlzLmFkZF8odGhpcy5uYXZSaWdodCxcIm5hdlJpZ2h0XCIpO1xyXG4gIFxyXG4gIC8vIERpc3BsYXkgaW4gbGVmdCBhbmQgcmlnaHQgZXllIHJlc3BlY3RpdmVseS5cclxuICB0aGlzLnBsYW5lTGVmdC5sYXllcnMuc2V0KEV5ZXMuTEVGVCk7XHJcbiAgdGhpcy5wbGFuZUxlZnQuZXllID0gRXllcy5MRUZUO1xyXG4gIHRoaXMucGxhbmVSaWdodC5sYXllcnMuc2V0KEV5ZXMuUklHSFQpO1xyXG4gIHRoaXMucGxhbmVSaWdodC5leWUgPSBFeWVzLlJJR0hUO1xyXG4gIHRoaXMud29ybGRSZW5kZXJlci5zY2VuZS5nZXRPYmplY3RCeU5hbWUoJ25hdicpLmNoaWxkcmVuID0gW3RoaXMucGxhbmVMZWZ0LCB0aGlzLnBsYW5lUmlnaHQsdGhpcy5uYXZMZWZ0LHRoaXMubmF2UmlnaHRdO1xyXG4gIHRoaXMuY3VycmVudD0wO1xyXG4gIHRoaXMuc2hvd0N1cnJlbnQoKTtcclxufTtcclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcbk5hdmlnYXRpb25SZW5kZXJlci5wcm90b3R5cGUuZm9jdXMgPSBmdW5jdGlvbihpZCkge1xyXG4gIFxyXG59O1xyXG5cclxuTmF2aWdhdGlvblJlbmRlcmVyLnByb3RvdHlwZS5ibHVyID0gZnVuY3Rpb24oaWQpIHtcclxuICBcclxufTtcclxuXHJcbk5hdmlnYXRpb25SZW5kZXJlci5wcm90b3R5cGUuZG93biA9IGZ1bmN0aW9uKGlkKSB7XHJcbiAgLy9hbGVydChcInRoaXMgaXMgdGhlIGNsaWNrXCIpO1xyXG4gIC8vIEJlY29tZSBhY3RpdmUuXHJcbn07XHJcblxyXG5OYXZpZ2F0aW9uUmVuZGVyZXIucHJvdG90eXBlLnVwID0gZnVuY3Rpb24oaWQpIHtcclxuICBpZih0aGlzLmN1cnJlbnRFbGVtZW50JiZ0aGlzLmN1cnJlbnRFbGVtZW50Lm5hbWUpe1xyXG4gICAgaWYodGhpcy5jdXJyZW50RWxlbWVudC5uYW1lPT1cIm5hdkxlZnRcIil0aGlzLnByZXZfKCk7XHJcbiAgICBpZih0aGlzLmN1cnJlbnRFbGVtZW50Lm5hbWU9PVwibmF2UmlnaHRcIil0aGlzLm5leHRfKCk7XHJcbiAgICBpZih0aGlzLmN1cnJlbnRFbGVtZW50Lm5hbWU9PVwicGxhbmVMZWZ0XCIpe1xyXG4gICAgICB2YXIgdGhhdCA9IHRoaXM7XHJcbiAgICAgIHZhciBkYXRhID0gdGhpcy5kYXRhW09iamVjdC5rZXlzKHRoaXMuZGF0YSlbdGhpcy5jdXJyZW50XV07XHJcbiAgICAgIHRoaXMubmF2TGVmdC52aXNpYmxlID0gZmFsc2U7XHJcbiAgICAgIHRoaXMubmF2UmlnaHQudmlzaWJsZSA9IGZhbHNlOyBcclxuICAgICAgdGhpcy5wbGFuZVJpZ2h0LnZpc2libGUgPSBmYWxzZTsgXHJcbiAgICAgIHRoaXMucGxhbmVMZWZ0LnZpc2libGUgPSBmYWxzZTsgXHJcbiAgICAgIHRoaXMud29ybGRSZW5kZXJlci5zcGhlcmVSZW5kZXJlci5zZXRPcGFjaXR5KDAsIDUwMCkudGhlbihmdW5jdGlvbigpIHtcclxuICAgICAgICAvLyBUaGVuIGxvYWQgdGhlIG5ldyBzY2VuZS5cclxuICAgICAgICB2YXIgc2NlbmUgPSBTY2VuZUluZm8ubG9hZEZyb21BUElQYXJhbXMoe1xyXG4gICAgICAgICAgaW1hZ2U6IGRhdGEuaW1hZ2UsXHJcbiAgICAgICAgICBwcmV2aWV3OiBkYXRhLnByZXZpZXcsXHJcbiAgICAgICAgICBpc19zdGVyZW86IGRhdGEuaXNfc3RlcmVvLFxyXG4gICAgICAgICAgaXNfYXV0b3Bhbl9vZmY6IHRydWVcclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBSZW1vdmUgYWxsIG9mIHRoZSBob3RzcG90cy5cclxuICAgICAgICB0aGF0LndvcmxkUmVuZGVyZXIuaG90c3BvdFJlbmRlcmVyLmNsZWFyQWxsKCk7XHJcbiAgICAgICAgLy8gRGVzdHJveSB0aGUgd29ybGRcclxuICAgICAgICB0aGF0LndvcmxkUmVuZGVyZXIuZGVzdHJveSgpO1xyXG4gICAgICAgIC8vIFVwZGF0ZSB0aGUgVVJMIHRvIHJlZmxlY3QgdGhlIG5ldyBzY2VuZS4gVGhpcyBpcyBpbXBvcnRhbnQgcGFydGljdWxhcmlseVxyXG4gICAgICAgIC8vIG9uIGlPUyB3aGVyZSB3ZSB1c2UgYSBmYWtlIGZ1bGxzY3JlZW4gbW9kZS5cclxuICAgICAgICB2YXIgdXJsID0gc2NlbmUuZ2V0Q3VycmVudFVybCgpO1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coJ1VwZGF0aW5nIHVybCB0byBiZSAlcycsIHVybCk7XHJcbiAgICAgICAgd2luZG93Lmhpc3RvcnkucHVzaFN0YXRlKG51bGwsICdWUiBWaWV3JywgdXJsKTtcclxuICAgICAgICAvLyBBbmQgc2V0IHRoZSBuZXcgc2NlbmUuXHJcbiAgICAgICAgcmV0dXJuIHRoYXQud29ybGRSZW5kZXJlci5zZXRTY2VuZShzY2VuZSk7XHJcbiAgICAgIH0pLnRoZW4oZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgLy8gVGhlbiBmYWRlIHRoZSBzY2VuZSBiYWNrIGluLlxyXG4gICAgICAgIHRoYXQud29ybGRSZW5kZXJlci5zcGhlcmVSZW5kZXJlci5zZXRPcGFjaXR5KDEsIDUwMCkudGhlbihmdW5jdGlvbigpe1xyXG4gICAgICAgICAgdGhhdC5uYXZMZWZ0LnZpc2libGUgPSB0cnVlOyAgXHJcbiAgICAgICAgICB0aGF0Lm5hdlJpZ2h0LnZpc2libGUgPSB0cnVlOyAgXHJcbiAgICAgICAgICB0aGF0LnBsYW5lUmlnaHQudmlzaWJsZSA9IHRydWU7IFxyXG4gICAgICAgICAgdGhhdC5wbGFuZUxlZnQudmlzaWJsZSA9IHRydWU7IFxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcbiAgLy8gQmVjb21lIGluYWN0aXZlLlxyXG59O1xyXG5cclxuTmF2aWdhdGlvblJlbmRlcmVyLnByb3RvdHlwZS5zZXRPcGFjaXR5ID0gZnVuY3Rpb24ob3BhY2l0eSwgZHVyYXRpb24pIHtcclxuICBcclxufTtcclxuXHJcblxyXG5OYXZpZ2F0aW9uUmVuZGVyZXIucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uKCkge1xyXG4gIFxyXG4gIC8vIEZhZGUgaG90c3BvdHMgb3V0IGlmIHRoZXkgYXJlIHJlYWxseSBmYXIgZnJvbSBjZW50ZXIgdG8gYXZvaWQgb3Zlcmx5XHJcbiAgLy8gZGlzdG9ydGVkIHZpc3VhbHMuXHJcbiAgLy8gdGhpcy5mYWRlT2ZmQ2VudGVySG90c3BvdHNfKGNhbWVyYSk7XHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IE5hdmlnYXRpb25SZW5kZXJlcjsiLCJmdW5jdGlvbiBSZXRpY2xlUmVuZGVyZXIoY2FtZXJhKSB7XHJcbiAgdGhpcy5jYW1lcmEgPSBjYW1lcmE7XHJcblxyXG4gIHRoaXMucmV0aWNsZSA9IHRoaXMuY3JlYXRlUmV0aWNsZV8oKTtcclxuICAvLyBJbiBmcm9udCBvZiB0aGUgaG90c3BvdCBpdHNlbGYsIHdoaWNoIGlzIGF0IHI9MC45OS5cclxuICB0aGlzLnJldGljbGUucG9zaXRpb24ueiA9IC0wLjk3O1xyXG4gIGNhbWVyYS5hZGQodGhpcy5yZXRpY2xlKTtcclxuXHJcbiAgdGhpcy5zZXRWaXNpYmlsaXR5KGZhbHNlKTtcclxufVxyXG5cclxuUmV0aWNsZVJlbmRlcmVyLnByb3RvdHlwZS5zZXRWaXNpYmlsaXR5ID0gZnVuY3Rpb24oaXNWaXNpYmxlKSB7XHJcbiAgLy8gVE9ETzogVHdlZW4gdGhlIHRyYW5zaXRpb24uXHJcbiAgdGhpcy5yZXRpY2xlLnZpc2libGUgPSBpc1Zpc2libGU7XHJcbn07XHJcblxyXG5SZXRpY2xlUmVuZGVyZXIucHJvdG90eXBlLmNyZWF0ZVJldGljbGVfID0gZnVuY3Rpb24oKSB7XHJcbiAgLy8gTWFrZSBhIHRvcnVzLlxyXG4gIHZhciBnZW9tZXRyeSA9IG5ldyBUSFJFRS5Ub3J1c0dlb21ldHJ5KDAuMDIsIDAuMDA1LCAxMCwgMjApO1xyXG4gIHZhciBtYXRlcmlhbCA9IG5ldyBUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbCh7Y29sb3I6IDB4MDAwMDAwfSk7XHJcbiAgdmFyIHRvcnVzID0gbmV3IFRIUkVFLk1lc2goZ2VvbWV0cnksIG1hdGVyaWFsKTtcclxuXHJcbiAgcmV0dXJuIHRvcnVzO1xyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBSZXRpY2xlUmVuZGVyZXI7XHJcbiIsIi8qXHJcbiAqIENvcHlyaWdodCAyMDE1IEdvb2dsZSBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuXHJcbnZhciBDQU1FTF9UT19VTkRFUlNDT1JFID0ge1xyXG4gIHZpZGVvOiAndmlkZW8nLFxyXG4gIGltYWdlOiAnaW1hZ2UnLFxyXG4gIHByZXZpZXc6ICdwcmV2aWV3JyxcclxuICBpc1N0ZXJlbzogJ2lzX3N0ZXJlbycsXHJcbiAgZGVmYXVsdFlhdzogJ2RlZmF1bHRfeWF3JyxcclxuICBpc1lhd09ubHk6ICdpc195YXdfb25seScsXHJcbiAgaXNEZWJ1ZzogJ2lzX2RlYnVnJyxcclxuICBpc1ZST2ZmOiAnaXNfdnJfb2ZmJyxcclxuICBpc0F1dG9wYW5PZmY6ICdpc19hdXRvcGFuX29mZicsXHJcbn07XHJcblxyXG4vKipcclxuICogQ29udGFpbnMgYWxsIGluZm9ybWF0aW9uIGFib3V0IGEgZ2l2ZW4gc2NlbmUuXHJcbiAqL1xyXG5mdW5jdGlvbiBTY2VuZUluZm8ob3B0X3BhcmFtcykge1xyXG4gIHZhciBwYXJhbXMgPSBvcHRfcGFyYW1zIHx8IHt9O1xyXG5cclxuICB0aGlzLmltYWdlID0gcGFyYW1zLmltYWdlO1xyXG4gIHRoaXMucHJldmlldyA9IHBhcmFtcy5wcmV2aWV3O1xyXG4gIHRoaXMudmlkZW8gPSBwYXJhbXMudmlkZW87XHJcbiAgdGhpcy5kZWZhdWx0WWF3ID0gVEhSRUUuTWF0aC5kZWdUb1JhZChwYXJhbXMuZGVmYXVsdFlhdyB8fCAwKTtcclxuXHJcbiAgdGhpcy5pc1N0ZXJlbyA9IFV0aWwucGFyc2VCb29sZWFuKHBhcmFtcy5pc1N0ZXJlbyk7XHJcbiAgdGhpcy5pc1lhd09ubHkgPSBVdGlsLnBhcnNlQm9vbGVhbihwYXJhbXMuaXNZYXdPbmx5KTtcclxuICB0aGlzLmlzRGVidWcgPSBVdGlsLnBhcnNlQm9vbGVhbihwYXJhbXMuaXNEZWJ1Zyk7XHJcbiAgdGhpcy5pc1ZST2ZmID0gVXRpbC5wYXJzZUJvb2xlYW4ocGFyYW1zLmlzVlJPZmYpO1xyXG4gIHRoaXMuaXNBdXRvcGFuT2ZmID0gVXRpbC5wYXJzZUJvb2xlYW4ocGFyYW1zLmlzQXV0b3Bhbk9mZik7XHJcbn1cclxuXHJcblNjZW5lSW5mby5sb2FkRnJvbUdldFBhcmFtcyA9IGZ1bmN0aW9uKCkge1xyXG4gIHZhciBwYXJhbXMgPSB7fTtcclxuICBmb3IgKHZhciBjYW1lbENhc2UgaW4gQ0FNRUxfVE9fVU5ERVJTQ09SRSkge1xyXG4gICAgdmFyIHVuZGVyc2NvcmUgPSBDQU1FTF9UT19VTkRFUlNDT1JFW2NhbWVsQ2FzZV07XHJcbiAgICBwYXJhbXNbY2FtZWxDYXNlXSA9IFV0aWwuZ2V0UXVlcnlQYXJhbWV0ZXIodW5kZXJzY29yZSk7XHJcbiAgfVxyXG4gIHZhciBzY2VuZSA9IG5ldyBTY2VuZUluZm8ocGFyYW1zKTtcclxuICBpZiAoIXNjZW5lLmlzVmFsaWQoKSkge1xyXG4gICAgY29uc29sZS53YXJuKCdJbnZhbGlkIHNjZW5lOiAlcycsIHNjZW5lLmVycm9yTWVzc2FnZSk7XHJcbiAgfVxyXG4gIHJldHVybiBzY2VuZTtcclxufTtcclxuXHJcblNjZW5lSW5mby5sb2FkRnJvbUFQSVBhcmFtcyA9IGZ1bmN0aW9uKHVuZGVyc2NvcmVQYXJhbXMpIHtcclxuICB2YXIgcGFyYW1zID0ge307XHJcbiAgZm9yICh2YXIgY2FtZWxDYXNlIGluIENBTUVMX1RPX1VOREVSU0NPUkUpIHtcclxuICAgIHZhciB1bmRlcnNjb3JlID0gQ0FNRUxfVE9fVU5ERVJTQ09SRVtjYW1lbENhc2VdO1xyXG4gICAgaWYgKHVuZGVyc2NvcmVQYXJhbXNbdW5kZXJzY29yZV0pIHtcclxuICAgICAgcGFyYW1zW2NhbWVsQ2FzZV0gPSB1bmRlcnNjb3JlUGFyYW1zW3VuZGVyc2NvcmVdO1xyXG4gICAgfVxyXG4gIH1cclxuICB2YXIgc2NlbmUgPSBuZXcgU2NlbmVJbmZvKHBhcmFtcyk7XHJcbiAgaWYgKCFzY2VuZS5pc1ZhbGlkKCkpIHtcclxuICAgIGNvbnNvbGUud2FybignSW52YWxpZCBzY2VuZTogJXMnLCBzY2VuZS5lcnJvck1lc3NhZ2UpO1xyXG4gIH1cclxuICByZXR1cm4gc2NlbmU7XHJcbn07XHJcblxyXG5TY2VuZUluZm8ucHJvdG90eXBlLmlzVmFsaWQgPSBmdW5jdGlvbigpIHtcclxuICAvLyBFaXRoZXIgaXQncyBhbiBpbWFnZSBvciBhIHZpZGVvLlxyXG4gIGlmICghdGhpcy5pbWFnZSAmJiAhdGhpcy52aWRlbykge1xyXG4gICAgdGhpcy5lcnJvck1lc3NhZ2UgPSAnRWl0aGVyIGltYWdlIG9yIHZpZGVvIFVSTCBtdXN0IGJlIHNwZWNpZmllZC4nO1xyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH1cclxuICBpZiAodGhpcy5pbWFnZSAmJiB0aGlzLnZpZGVvKSB7XHJcbiAgICB0aGlzLmVycm9yTWVzc2FnZSA9ICdCb3RoIGltYWdlIGFuZCB2aWRlbyBVUkwgY2FuXFwndCBiZSBzcGVjaWZpZWQuJztcclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9XHJcbiAgaWYgKHRoaXMuaW1hZ2UgJiYgIXRoaXMuaXNWYWxpZEltYWdlXyh0aGlzLmltYWdlKSkge1xyXG4gICAgdGhpcy5lcnJvck1lc3NhZ2UgPSAnSW52YWxpZCBpbWFnZSBVUkw6ICcgKyB0aGlzLmltYWdlO1xyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH1cclxuICB0aGlzLmVycm9yTWVzc2FnZSA9IG51bGw7XHJcbiAgcmV0dXJuIHRydWU7XHJcbn07XHJcblxyXG4vKipcclxuICogR2VuZXJhdGVzIGEgVVJMIHRvIHJlZmxlY3QgdGhpcyBzY2VuZS5cclxuICovXHJcblNjZW5lSW5mby5wcm90b3R5cGUuZ2V0Q3VycmVudFVybCA9IGZ1bmN0aW9uKCkge1xyXG4gIHZhciB1cmwgPSBsb2NhdGlvbi5wcm90b2NvbCArICcvLycgKyBsb2NhdGlvbi5ob3N0ICsgbG9jYXRpb24ucGF0aG5hbWUgKyAnPyc7XHJcbiAgZm9yICh2YXIgY2FtZWxDYXNlIGluIENBTUVMX1RPX1VOREVSU0NPUkUpIHtcclxuICAgIHZhciB1bmRlcnNjb3JlID0gQ0FNRUxfVE9fVU5ERVJTQ09SRVtjYW1lbENhc2VdO1xyXG4gICAgdmFyIHZhbHVlID0gdGhpc1tjYW1lbENhc2VdO1xyXG4gICAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgdXJsICs9IHVuZGVyc2NvcmUgKyAnPScgKyB2YWx1ZSArICcmJztcclxuICAgIH1cclxuICB9XHJcbiAgLy8gQ2hvcCBvZmYgdGhlIHRyYWlsaW5nIGFtcGVyc2FuZC5cclxuICByZXR1cm4gdXJsLnN1YnN0cmluZygwLCB1cmwubGVuZ3RoIC0gMSk7XHJcbn07XHJcblxyXG5TY2VuZUluZm8ucHJvdG90eXBlLmlzVmFsaWRJbWFnZV8gPSBmdW5jdGlvbihpbWFnZVVybCkge1xyXG4gIHJldHVybiB0cnVlO1xyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBTY2VuZUluZm87XHJcbiIsIi8qXHJcbiAqIENvcHlyaWdodCAyMDE1IEdvb2dsZSBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuXHJcbnZhciBFeWVzID0gcmVxdWlyZSgnLi9leWVzJyk7XHJcbnZhciBUV0VFTiA9IHJlcXVpcmUoJ3R3ZWVuLmpzJyk7XHJcbnZhciBVdGlsID0gcmVxdWlyZSgnLi4vdXRpbCcpO1xyXG5cclxuZnVuY3Rpb24gU3BoZXJlUmVuZGVyZXIoc2NlbmUpIHtcclxuICB0aGlzLnNjZW5lID0gc2NlbmU7XHJcblxyXG4gIC8vIENyZWF0ZSBhIHRyYW5zcGFyZW50IG1hc2suXHJcbiAgdGhpcy5jcmVhdGVPcGFjaXR5TWFza18oKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFNldHMgdGhlIHBob3Rvc3BoZXJlIGJhc2VkIG9uIHRoZSBpbWFnZSBpbiB0aGUgc291cmNlLiBTdXBwb3J0cyBzdGVyZW8gYW5kXHJcbiAqIG1vbm8gcGhvdG9zcGhlcmVzLlxyXG4gKlxyXG4gKiBAcmV0dXJuIHtQcm9taXNlfVxyXG4gKi9cclxuU3BoZXJlUmVuZGVyZXIucHJvdG90eXBlLnNldFBob3Rvc3BoZXJlID0gZnVuY3Rpb24oc3JjLCBvcHRfcGFyYW1zKSB7XHJcbiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgdGhpcy5yZXNvbHZlID0gcmVzb2x2ZTtcclxuICAgIHRoaXMucmVqZWN0ID0gcmVqZWN0O1xyXG5cclxuICAgIHZhciBwYXJhbXMgPSBvcHRfcGFyYW1zIHx8IHt9O1xyXG5cclxuICAgIHRoaXMuaXNTdGVyZW8gPSAhIXBhcmFtcy5pc1N0ZXJlbztcclxuICAgIHRoaXMuc3JjID0gc3JjO1xyXG5cclxuICAgIC8vIExvYWQgdGV4dHVyZS5cclxuICAgIHZhciBsb2FkZXIgPSBuZXcgVEhSRUUuVGV4dHVyZUxvYWRlcigpO1xyXG4gICAgbG9hZGVyLmNyb3NzT3JpZ2luID0gJ2Fub255bW91cyc7XHJcbiAgICBsb2FkZXIubG9hZChzcmMsIHRoaXMub25UZXh0dXJlTG9hZGVkXy5iaW5kKHRoaXMpLCB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uVGV4dHVyZUVycm9yXy5iaW5kKHRoaXMpKTtcclxuICB9LmJpbmQodGhpcykpO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIEByZXR1cm4ge1Byb21pc2V9IFllYWguXHJcbiAqL1xyXG5TcGhlcmVSZW5kZXJlci5wcm90b3R5cGUuc2V0MzYwVmlkZW8gPSBmdW5jdGlvbih2aWRlb0VsZW1lbnQsIG9wdF9wYXJhbXMpIHtcclxuICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICB0aGlzLnJlc29sdmUgPSByZXNvbHZlO1xyXG4gICAgdGhpcy5yZWplY3QgPSByZWplY3Q7XHJcblxyXG4gICAgdmFyIHBhcmFtcyA9IG9wdF9wYXJhbXMgfHwge307XHJcblxyXG4gICAgdGhpcy5pc1N0ZXJlbyA9ICEhcGFyYW1zLmlzU3RlcmVvO1xyXG5cclxuICAgIC8vIExvYWQgdGhlIHZpZGVvIHRleHR1cmUuXHJcbiAgICB2YXIgdmlkZW9UZXh0dXJlID0gbmV3IFRIUkVFLlZpZGVvVGV4dHVyZSh2aWRlb0VsZW1lbnQpO1xyXG4gICAgdmlkZW9UZXh0dXJlLm1pbkZpbHRlciA9IFRIUkVFLk5lYXJlc3RGaWx0ZXI7XHJcbiAgICB2aWRlb1RleHR1cmUubWFnRmlsdGVyID0gVEhSRUUuTmVhcmVzdEZpbHRlcjtcclxuICAgIHZpZGVvVGV4dHVyZS5mb3JtYXQgPSBUSFJFRS5SR0JGb3JtYXQ7XHJcbiAgICB2aWRlb1RleHR1cmUuZ2VuZXJhdGVNaXBtYXBzID0gZmFsc2U7XHJcbiAgICB2aWRlb1RleHR1cmUubmVlZHNVcGRhdGUgPSB0cnVlO1xyXG5cclxuICAgIHRoaXMub25UZXh0dXJlTG9hZGVkXyh2aWRlb1RleHR1cmUpO1xyXG4gIH0uYmluZCh0aGlzKSk7XHJcbn07XHJcblxyXG4vKipcclxuICogU2V0IHRoZSBvcGFjaXR5IG9mIHRoZSBwYW5vcmFtYS5cclxuICpcclxuICogQHBhcmFtIHtOdW1iZXJ9IG9wYWNpdHkgSG93IG9wYXF1ZSB3ZSB3YW50IHRoZSBwYW5vcmFtYSB0byBiZS4gMCBtZWFucyBibGFjayxcclxuICogMSBtZWFucyBmdWxsIGNvbG9yLlxyXG4gKiBAcGFyYW0ge051bWJlcn0gZHVyYXRpb24gTnVtYmVyIG9mIG1pbGxpc2Vjb25kcyB0aGUgdHJhbnNpdGlvbiBzaG91bGQgdGFrZS5cclxuICpcclxuICogQHJldHVybiB7UHJvbWlzZX0gV2hlbiB0aGUgb3BhY2l0eSBjaGFuZ2UgaXMgY29tcGxldGUuXHJcbiAqL1xyXG5TcGhlcmVSZW5kZXJlci5wcm90b3R5cGUuc2V0T3BhY2l0eSA9IGZ1bmN0aW9uKG9wYWNpdHksIGR1cmF0aW9uKSB7XHJcbiAgdmFyIHNjZW5lID0gdGhpcy5zY2VuZTtcclxuICAvLyBJZiB3ZSB3YW50IHRoZSBvcGFjaXR5XHJcbiAgdmFyIG92ZXJsYXlPcGFjaXR5ID0gMSAtIG9wYWNpdHk7XHJcbiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgdmFyIG1hc2sgPSBzY2VuZS5nZXRPYmplY3RCeU5hbWUoJ29wYWNpdHlNYXNrJyk7XHJcbiAgICB2YXIgdHdlZW4gPSBuZXcgVFdFRU4uVHdlZW4oe29wYWNpdHk6IG1hc2subWF0ZXJpYWwub3BhY2l0eX0pXHJcbiAgICAgICAgLnRvKHtvcGFjaXR5OiBvdmVybGF5T3BhY2l0eX0sIGR1cmF0aW9uKVxyXG4gICAgICAgIC5lYXNpbmcoVFdFRU4uRWFzaW5nLlF1YWRyYXRpYy5Jbk91dCk7XHJcbiAgICB0d2Vlbi5vblVwZGF0ZShmdW5jdGlvbihlKSB7XHJcbiAgICAgIG1hc2subWF0ZXJpYWwub3BhY2l0eSA9IHRoaXMub3BhY2l0eTtcclxuICAgIH0pO1xyXG4gICAgdHdlZW4ub25Db21wbGV0ZShyZXNvbHZlKS5zdGFydCgpO1xyXG4gIH0pO1xyXG59O1xyXG5cclxuU3BoZXJlUmVuZGVyZXIucHJvdG90eXBlLm9uVGV4dHVyZUxvYWRlZF8gPSBmdW5jdGlvbih0ZXh0dXJlKSB7XHJcbiAgdmFyIHNwaGVyZUxlZnQ7XHJcbiAgdmFyIHNwaGVyZVJpZ2h0O1xyXG4gIGlmICh0aGlzLmlzU3RlcmVvKSB7XHJcbiAgICBzcGhlcmVMZWZ0ID0gdGhpcy5jcmVhdGVQaG90b3NwaGVyZV8odGV4dHVyZSwge29mZnNldFk6IDAuNSwgc2NhbGVZOiAwLjV9KTtcclxuICAgIHNwaGVyZVJpZ2h0ID0gdGhpcy5jcmVhdGVQaG90b3NwaGVyZV8odGV4dHVyZSwge29mZnNldFk6IDAsIHNjYWxlWTogMC41fSk7XHJcbiAgfSBlbHNlIHtcclxuICAgIHNwaGVyZUxlZnQgPSB0aGlzLmNyZWF0ZVBob3Rvc3BoZXJlXyh0ZXh0dXJlKTtcclxuICAgIHNwaGVyZVJpZ2h0ID0gdGhpcy5jcmVhdGVQaG90b3NwaGVyZV8odGV4dHVyZSk7XHJcbiAgfVxyXG5cclxuICAvLyBEaXNwbGF5IGluIGxlZnQgYW5kIHJpZ2h0IGV5ZSByZXNwZWN0aXZlbHkuXHJcbiAgc3BoZXJlTGVmdC5sYXllcnMuc2V0KEV5ZXMuTEVGVCk7XHJcbiAgc3BoZXJlTGVmdC5leWUgPSBFeWVzLkxFRlQ7XHJcbiAgc3BoZXJlUmlnaHQubGF5ZXJzLnNldChFeWVzLlJJR0hUKTtcclxuICBzcGhlcmVSaWdodC5leWUgPSBFeWVzLlJJR0hUO1xyXG5cclxuICB0aGlzLnNjZW5lLmdldE9iamVjdEJ5TmFtZSgncGhvdG8nKS5jaGlsZHJlbiA9IFtzcGhlcmVMZWZ0LCBzcGhlcmVSaWdodF07XHJcblxyXG4gIHRoaXMucmVzb2x2ZSgpO1xyXG59O1xyXG5cclxuU3BoZXJlUmVuZGVyZXIucHJvdG90eXBlLm9uVGV4dHVyZUVycm9yXyA9IGZ1bmN0aW9uKGVycm9yKSB7XHJcbiAgdGhpcy5yZWplY3QoJ1VuYWJsZSB0byBsb2FkIHRleHR1cmUgZnJvbSBcIicgKyB0aGlzLnNyYyArICdcIicpO1xyXG59O1xyXG5cclxuXHJcblNwaGVyZVJlbmRlcmVyLnByb3RvdHlwZS5jcmVhdGVQaG90b3NwaGVyZV8gPSBmdW5jdGlvbih0ZXh0dXJlLCBvcHRfcGFyYW1zKSB7XHJcbiAgdmFyIHAgPSBvcHRfcGFyYW1zIHx8IHt9O1xyXG4gIHAuc2NhbGVYID0gcC5zY2FsZVggfHwgMTtcclxuICBwLnNjYWxlWSA9IHAuc2NhbGVZIHx8IDE7XHJcbiAgcC5vZmZzZXRYID0gcC5vZmZzZXRYIHx8IDA7XHJcbiAgcC5vZmZzZXRZID0gcC5vZmZzZXRZIHx8IDA7XHJcbiAgcC5waGlTdGFydCA9IHAucGhpU3RhcnQgfHwgMDtcclxuICBwLnBoaUxlbmd0aCA9IHAucGhpTGVuZ3RoIHx8IE1hdGguUEkgKiAyO1xyXG4gIHAudGhldGFTdGFydCA9IHAudGhldGFTdGFydCB8fCAwO1xyXG4gIHAudGhldGFMZW5ndGggPSBwLnRoZXRhTGVuZ3RoIHx8IE1hdGguUEk7XHJcblxyXG4gIHZhciBnZW9tZXRyeSA9IG5ldyBUSFJFRS5TcGhlcmVHZW9tZXRyeSgxMDAwLCA0OCwgNDgsXHJcbiAgICAgIHAucGhpU3RhcnQsIHAucGhpTGVuZ3RoLCBwLnRoZXRhU3RhcnQsIHAudGhldGFMZW5ndGgpO1xyXG4gIGdlb21ldHJ5LmFwcGx5TWF0cml4KG5ldyBUSFJFRS5NYXRyaXg0KCkubWFrZVNjYWxlKC0xLCAxLCAxKSk7XHJcbiAgdmFyIHV2cyA9IGdlb21ldHJ5LmZhY2VWZXJ0ZXhVdnNbMF07XHJcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCB1dnMubGVuZ3RoOyBpICsrKSB7XHJcbiAgICBmb3IgKHZhciBqID0gMDsgaiA8IDM7IGogKyspIHtcclxuICAgICAgdXZzW2ldW2pdLnggKj0gcC5zY2FsZVg7XHJcbiAgICAgIHV2c1tpXVtqXS54ICs9IHAub2Zmc2V0WDtcclxuICAgICAgdXZzW2ldW2pdLnkgKj0gcC5zY2FsZVk7XHJcbiAgICAgIHV2c1tpXVtqXS55ICs9IHAub2Zmc2V0WTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHZhciBtYXRlcmlhbCA9IG5ldyBUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbCh7IG1hcDogdGV4dHVyZSB9KTtcclxuICB2YXIgb3V0ID0gbmV3IFRIUkVFLk1lc2goZ2VvbWV0cnksIG1hdGVyaWFsKTtcclxuICAvL291dC52aXNpYmxlID0gZmFsc2U7XHJcbiAgb3V0LnJlbmRlck9yZGVyID0gLTE7XHJcbiAgcmV0dXJuIG91dDtcclxufTtcclxuXHJcblNwaGVyZVJlbmRlcmVyLnByb3RvdHlwZS5jcmVhdGVPcGFjaXR5TWFza18gPSBmdW5jdGlvbigpIHtcclxuICB2YXIgZ2VvbWV0cnkgPSBuZXcgVEhSRUUuU3BoZXJlR2VvbWV0cnkoMC4yLCA0OCwgNDgpO1xyXG4gIHZhciBtYXRlcmlhbCA9IG5ldyBUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbCh7XHJcbiAgICBjb2xvcjogMHgwMDAwMDAsIHNpZGU6IFRIUkVFLkRvdWJsZVNpZGUsIG9wYWNpdHk6IDAsIHRyYW5zcGFyZW50OiB0cnVlfSk7XHJcbiAgdmFyIG9wYWNpdHlNYXNrID0gbmV3IFRIUkVFLk1lc2goZ2VvbWV0cnksIG1hdGVyaWFsKTtcclxuICBvcGFjaXR5TWFzay5uYW1lID0gJ29wYWNpdHlNYXNrJztcclxuICBvcGFjaXR5TWFzay5yZW5kZXJPcmRlciA9IDE7XHJcblxyXG4gIHRoaXMuc2NlbmUuYWRkKG9wYWNpdHlNYXNrKTtcclxuICByZXR1cm4gb3BhY2l0eU1hc2s7XHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IFNwaGVyZVJlbmRlcmVyO1xyXG4iLCJcclxudmFyIEV2ZW50RW1pdHRlciA9IHJlcXVpcmUoJ2V2ZW50ZW1pdHRlcjMnKTtcclxuXHJcblxyXG5mdW5jdGlvbiBUZW1wbGF0ZVJlbmRlcmVyKCkge1xyXG59XHJcblRlbXBsYXRlUmVuZGVyZXIucHJvdG90eXBlID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG5cclxuVGVtcGxhdGVSZW5kZXJlci5wcm90b3R5cGUuc2V0V29ybGQgPSBmdW5jdGlvbih3b3JsZFJlbmRlcmVyKXtcclxuICBcclxuICB0aGlzLndvcmxkUmVuZGVyZXIgPSB3b3JsZFJlbmRlcmVyO1xyXG4gIC8vIE5vdGU6IHRoaXMgZXZlbnQgbXVzdCBiZSBhZGRlZCB0byBkb2N1bWVudC5ib2R5IGFuZCBub3QgdG8gd2luZG93IGZvciBpdCB0b1xyXG4gIC8vIHdvcmsgaW5zaWRlIGlPUyBpZnJhbWVzLlxyXG4gIHZhciBib2R5ID0gZG9jdW1lbnQuYm9keTtcclxuICAvLyBCaW5kIGV2ZW50cyBmb3IgaG90c3BvdCBpbnRlcmFjdGlvbi5cclxuICBpZiAoIVV0aWwuaXNNb2JpbGUoKSkge1xyXG4gICAgLy8gT25seSBlbmFibGUgbW91c2UgZXZlbnRzIG9uIGRlc2t0b3AuXHJcbiAgICBib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHRoaXMub25Nb3VzZURvd25fLmJpbmQodGhpcyksIGZhbHNlKTtcclxuICAgIGJvZHkuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgdGhpcy5vbk1vdXNlTW92ZV8uYmluZCh0aGlzKSwgZmFsc2UpO1xyXG4gICAgYm9keS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgdGhpcy5vbk1vdXNlVXBfLmJpbmQodGhpcyksIGZhbHNlKTtcclxuICB9XHJcbiAgYm9keS5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgdGhpcy5vblRvdWNoU3RhcnRfLmJpbmQodGhpcyksIGZhbHNlKTtcclxuICBib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgdGhpcy5vblRvdWNoRW5kXy5iaW5kKHRoaXMpLCBmYWxzZSk7XHJcblxyXG4gIC8vIEFkZCBhIHBsYWNlaG9sZGVyIGZvciBob3RzcG90cy5cclxuICB0aGlzLnJvb3QgPSBuZXcgVEhSRUUuR3JvdXAoKTtcclxuICAvLyBBbGlnbiB0aGUgY2VudGVyIHdpdGggdGhlIGNlbnRlciBvZiB0aGUgY2FtZXJhIHRvby5cclxuICB0aGlzLnJvb3Qucm90YXRpb24ueSA9IE1hdGguUEkgLyAyO1xyXG4gIHRoaXMud29ybGRSZW5kZXJlci5zY2VuZS5hZGQodGhpcy5yb290KTtcclxuXHJcbiAgLy8gQWxsIGVsZW1lbnQgSURzLlxyXG4gIHRoaXMuZWxlbWVudHMgPSB7fTtcclxuXHJcbiAgLy8gQ3VycmVudGx5IHNlbGVjdGVkIGVsZW1lbnRzLlxyXG4gIHRoaXMuc2VsZWN0ZWRFbGVtZW50cyA9IHt9O1xyXG5cclxuICAvLyBFbGVtZW50cyB0aGF0IHRoZSBsYXN0IHRvdWNoc3RhcnQgLyBtb3VzZWRvd24gZXZlbnQgaGFwcGVuZWQgZm9yLlxyXG4gIHRoaXMuZG93bkVsZW1lbnRzID0ge307XHJcblxyXG4gIC8vIEZvciByYXljYXN0aW5nLiBJbml0aWFsaXplIG1vdXNlIHRvIGJlIG9mZiBzY3JlZW4gaW5pdGlhbGx5LlxyXG4gIHRoaXMucG9pbnRlciA9IG5ldyBUSFJFRS5WZWN0b3IyKDEsIDEpO1xyXG4gIHRoaXMucmF5Y2FzdGVyID0gbmV3IFRIUkVFLlJheWNhc3RlcigpO1xyXG4gIC8vIFRPRE86IFR3ZWVuIHRoaXMgYW5pbWF0aW9uLlxyXG4gIHRoaXMuc2V0VmlzaWJpbGl0eShmYWxzZSk7XHJcbn1cclxuXHJcblRlbXBsYXRlUmVuZGVyZXIucHJvdG90eXBlLnNldFZpc2liaWxpdHkgPSBmdW5jdGlvbihpc1Zpc2libGUpIHtcclxuICB0aGlzLnJvb3QudmlzaWJsZSA9IGlzVmlzaWJsZTtcclxufTtcclxuXHJcblRlbXBsYXRlUmVuZGVyZXIucHJvdG90eXBlLm9uVG91Y2hTdGFydF8gPSBmdW5jdGlvbihlKSB7XHJcbiAgLy8gSW4gVlIgbW9kZSwgZG9uJ3QgdG91Y2ggdGhlIHBvaW50ZXIgcG9zaXRpb24uXHJcbiAgaWYgKCF0aGlzLndvcmxkUmVuZGVyZXIuaXNWUk1vZGUoKSkge1xyXG4gICAgdGhpcy51cGRhdGVUb3VjaF8oZSk7XHJcbiAgfVxyXG5cclxuICAvLyBGb3JjZSBhIGNhbWVyYSB1cGRhdGUgdG8gc2VlIGlmIGFueSBob3RzcG90cyB3ZXJlIHNlbGVjdGVkLlxyXG4gIHRoaXMudXBkYXRlKHRoaXMud29ybGRSZW5kZXJlci5jYW1lcmEpO1xyXG5cclxuICB0aGlzLmRvd25FbGVtZW50cyA9IHt9O1xyXG4gIGZvciAodmFyIGlkIGluIHRoaXMuc2VsZWN0ZWRIb3RzcG90cykge1xyXG4gICAgdGhpcy5kb3duRWxlbWVudHNbaWRdID0gdHJ1ZTtcclxuICAgIGlmKHRoaXMuZG93biYmdHlwZW9mIHRoaXMuZG93biA9PSBcImZ1bmN0aW9uXCIpdGhpcy5kb3duKGlkKTtcclxuICB9XHJcbiAgcmV0dXJuIGZhbHNlO1xyXG59O1xyXG5cclxuVGVtcGxhdGVSZW5kZXJlci5wcm90b3R5cGUub25Ub3VjaEVuZF8gPSBmdW5jdGlvbihlKSB7XHJcbiAgLy8gSWYgbm8gaG90c3BvdHMgYXJlIHByZXNzZWQsIGVtaXQgYW4gZW1wdHkgY2xpY2sgZXZlbnQuXHJcbiAgXHJcbiAgICBpZih0aGlzLnVwJiZ0eXBlb2YgdGhpcy51cCA9PSBcImZ1bmN0aW9uXCIpdGhpcy51cCgpO1xyXG59O1xyXG5cclxuVGVtcGxhdGVSZW5kZXJlci5wcm90b3R5cGUudXBkYXRlVG91Y2hfID0gZnVuY3Rpb24oZSkge1xyXG4gIHZhciBzaXplID0gdGhpcy53b3JsZFJlbmRlcmVyLnJlbmRlcmVyLmdldFNpemUoKTtcclxuICB2YXIgdG91Y2ggPSBlLnRvdWNoZXNbMF07XHJcblx0dGhpcy5wb2ludGVyLnggPSAodG91Y2guY2xpZW50WCAvIHNpemUud2lkdGgpICogMiAtIDE7XHJcblx0dGhpcy5wb2ludGVyLnkgPSAtICh0b3VjaC5jbGllbnRZIC8gc2l6ZS5oZWlnaHQpICogMiArIDE7XHRcclxufTtcclxuXHJcblRlbXBsYXRlUmVuZGVyZXIucHJvdG90eXBlLm9uTW91c2VEb3duXyA9IGZ1bmN0aW9uKGUpIHtcclxuICB0aGlzLnVwZGF0ZU1vdXNlXyhlKTtcclxuICBpZih0aGlzLmRvd24mJnR5cGVvZiB0aGlzLmRvd24gPT0gXCJmdW5jdGlvblwiKXRoaXMuZG93bigpO1xyXG59O1xyXG5cclxuVGVtcGxhdGVSZW5kZXJlci5wcm90b3R5cGUub25Nb3VzZU1vdmVfID0gZnVuY3Rpb24oZSkge1xyXG4gIHRoaXMudXBkYXRlTW91c2VfKGUpO1xyXG59O1xyXG5cclxuVGVtcGxhdGVSZW5kZXJlci5wcm90b3R5cGUub25Nb3VzZVVwXyA9IGZ1bmN0aW9uKGUpIHtcclxuICB0aGlzLnVwZGF0ZU1vdXNlXyhlKTtcclxuICBpZih0aGlzLnVwJiZ0eXBlb2YgdGhpcy51cCA9PSBcImZ1bmN0aW9uXCIpdGhpcy51cCgpO1xyXG59O1xyXG5cclxuVGVtcGxhdGVSZW5kZXJlci5wcm90b3R5cGUudXBkYXRlTW91c2VfID0gZnVuY3Rpb24oZSkge1xyXG4gIHZhciBzaXplID0gdGhpcy53b3JsZFJlbmRlcmVyLnJlbmRlcmVyLmdldFNpemUoKTtcclxuXHR0aGlzLnBvaW50ZXIueCA9IChlLmNsaWVudFggLyBzaXplLndpZHRoKSAqIDIgLSAxO1xyXG5cdHRoaXMucG9pbnRlci55ID0gLSAoZS5jbGllbnRZIC8gc2l6ZS5oZWlnaHQpICogMiArIDE7XHRcclxufTtcclxuXHJcblRlbXBsYXRlUmVuZGVyZXIucHJvdG90eXBlLmFkZF8gPSBmdW5jdGlvbihlbGVtZW50LCBpZC8qLCBpbWFnZSwgaXNfc3RlcmVvKi8pIHtcclxuICAgIC8vIElmIGEgaG90c3BvdCBhbHJlYWR5IGV4aXN0cyB3aXRoIHRoaXMgSUQsIHN0b3AuXHJcbiAgICBpZiAodGhpcy5lbGVtZW50c1tpZF0pIHtcclxuICAgICAgLy8gVE9ETzogUHJvcGVyIGVycm9yIHJlcG9ydGluZy5cclxuICAgICAgY29uc29sZS5lcnJvcignQXR0ZW1wdCB0byBhZGQgZWxlbWVudCB3aXRoIGV4aXN0aW5nIGlkICVzLicsIGlkKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgaWYoZWxlbWVudCl7XHJcbiAgICAgICAgZWxlbWVudC5uYW1lID0gaWQ7XHJcbiAgICAgICAgdGhpcy5yb290LmFkZChlbGVtZW50KTtcclxuICAgICAgICB0aGlzLmVsZW1lbnRzW2lkXSA9IGVsZW1lbnQ7XHJcbiAgICB9XHJcbn07XHJcblxyXG5cclxuVGVtcGxhdGVSZW5kZXJlci5wcm90b3R5cGUucmVtb3ZlID0gZnVuY3Rpb24oaWQpIHtcclxuICAvLyBJZiB0aGVyZSdzIG5vIGhvdHNwb3Qgd2l0aCB0aGlzIElELCBmYWlsLlxyXG4gIGlmICghdGhpcy5lbGVtZW50c1tpZF0pIHsgXHJcbiAgICAvLyBUT0RPOiBQcm9wZXIgZXJyb3IgcmVwb3J0aW5nLlxyXG4gICAgY29uc29sZS5lcnJvcignQXR0ZW1wdCB0byByZW1vdmUgbm9uLWV4aXN0aW5nIGhvdHNwb3Qgd2l0aCBpZCAlcy4nLCBpZCk7XHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG4gIC8vIFJlbW92ZSB0aGUgbWVzaCBmcm9tIHRoZSBzY2VuZS5cclxuICB0aGlzLnJvb3QucmVtb3ZlKHRoaXMuZWxlbWVudHNbaWRdKTtcclxuXHJcbiAgLy8gSWYgdGhpcyBob3RzcG90IHdhcyBzZWxlY3RlZCwgbWFrZSBzdXJlIGl0IGdldHMgdW5zZWxlY3RlZC5cclxuICBkZWxldGUgdGhpcy5zZWxlY3RlZEVsZW1lbnRzW2lkXTtcclxuICBkZWxldGUgdGhpcy5kb3duRWxlbWVudHNbaWRdO1xyXG4gIGRlbGV0ZSB0aGlzLmVsZW1lbnRzW2lkXTtcclxuICB0aGlzLmVtaXQoJ2JsdXInLCBpZCk7XHJcbn07XHJcblxyXG4vKipcclxuICogQ2xlYXJzIGFsbCBob3RzcG90cyBmcm9tIHRoZSBwYW5vLiBPZnRlbiBjYWxsZWQgd2hlbiBjaGFuZ2luZyBwYW5vcy5cclxuICovXHJcblRlbXBsYXRlUmVuZGVyZXIucHJvdG90eXBlLmNsZWFyQWxsID0gZnVuY3Rpb24oKSB7XHJcbiAgZm9yICh2YXIgaWQgaW4gdGhpcy5lbGVtZW50cykge1xyXG4gICAgdGhpcy5yZW1vdmUoaWQpO1xyXG4gIH1cclxufTtcclxuXHJcblRlbXBsYXRlUmVuZGVyZXIucHJvdG90eXBlLmdldENvdW50ID0gZnVuY3Rpb24oKSB7XHJcbiAgdmFyIGNvdW50ID0gMDtcclxuICBmb3IgKHZhciBpZCBpbiB0aGlzLmVsZW1lbnRzKSB7XHJcbiAgICBjb3VudCArPSAxO1xyXG4gIH1cclxuICByZXR1cm4gY291bnQ7XHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IFRlbXBsYXRlUmVuZGVyZXI7IiwidmFyIFV0aWwgPSByZXF1aXJlKCcuLi91dGlsJyk7XHJcblxyXG4vKipcclxuICogQSBwcm94eSBjbGFzcyBmb3Igd29ya2luZyBhcm91bmQgdGhlIGZhY3QgdGhhdCBhcyBzb29uIGFzIGEgdmlkZW8gaXMgcGxheSgpZWRcclxuICogb24gaU9TLCBTYWZhcmkgYXV0by1mdWxsc2NyZWVucyB0aGUgdmlkZW8uXHJcbiAqXHJcbiAqIFRPRE8oc211cyk6IFRoZSBlbnRpcmUgcmFpc29uIGQnZXRyZSBmb3IgdGhpcyBjbGFzcyBpcyB0byB3b3JrIGFyb3VuZCB0aGlzXHJcbiAqIGlzc3VlLiBPbmNlIFNhZmFyaSBpbXBsZW1lbnRzIHNvbWUgd2F5IHRvIHN1cHByZXNzIHRoaXMgZnVsbHNjcmVlbiBwbGF5ZXIsIHdlXHJcbiAqIGNhbiByZW1vdmUgdGhpcyBjb2RlLlxyXG4gKi9cclxuZnVuY3Rpb24gVmlkZW9Qcm94eSh2aWRlb0VsZW1lbnQpIHtcclxuICB0aGlzLnZpZGVvRWxlbWVudCA9IHZpZGVvRWxlbWVudDtcclxuICAvLyBUcnVlIGlmIHdlJ3JlIGN1cnJlbnRseSBtYW51YWxseSBhZHZhbmNpbmcgdGhlIHBsYXloZWFkIChvbmx5IG9uIGlPUykuXHJcbiAgdGhpcy5pc0Zha2VQbGF5YmFjayA9IGZhbHNlO1xyXG5cclxuICAvLyBXaGVuIHRoZSB2aWRlbyBzdGFydGVkIHBsYXlpbmcuXHJcbiAgdGhpcy5zdGFydFRpbWUgPSBudWxsO1xyXG59XHJcblxyXG5WaWRlb1Byb3h5LnByb3RvdHlwZS5wbGF5ID0gZnVuY3Rpb24oKSB7XHJcbiAgaWYgKFV0aWwuaXNJT1M5T3JMZXNzKCkpIHtcclxuICAgIHRoaXMuc3RhcnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KCk7XHJcbiAgICB0aGlzLmlzRmFrZVBsYXliYWNrID0gdHJ1ZTtcclxuXHJcbiAgICAvLyBNYWtlIGFuIGF1ZGlvIGVsZW1lbnQgdG8gcGxheWJhY2sganVzdCB0aGUgYXVkaW8gcGFydC5cclxuICAgIHRoaXMuYXVkaW9FbGVtZW50ID0gbmV3IEF1ZGlvKCk7XHJcbiAgICB0aGlzLmF1ZGlvRWxlbWVudC5zcmMgPSB0aGlzLnZpZGVvRWxlbWVudC5zcmM7XHJcbiAgICB0aGlzLmF1ZGlvRWxlbWVudC5wbGF5KCk7XHJcbiAgfSBlbHNlIHtcclxuICAgIHRoaXMudmlkZW9FbGVtZW50LnBsYXkoKS50aGVuKGZ1bmN0aW9uKGUpIHtcclxuICAgICAgY29uc29sZS5sb2coJ1BsYXlpbmcgdmlkZW8uJywgZSk7XHJcbiAgICB9KTtcclxuICB9XHJcbn07XHJcblxyXG5WaWRlb1Byb3h5LnByb3RvdHlwZS5wYXVzZSA9IGZ1bmN0aW9uKCkge1xyXG4gIGlmIChVdGlsLmlzSU9TOU9yTGVzcygpICYmIHRoaXMuaXNGYWtlUGxheWJhY2spIHtcclxuICAgIHRoaXMuaXNGYWtlUGxheWJhY2sgPSB0cnVlO1xyXG5cclxuICAgIHRoaXMuYXVkaW9FbGVtZW50LnBhdXNlKCk7XHJcbiAgfSBlbHNlIHtcclxuICAgIHRoaXMudmlkZW9FbGVtZW50LnBhdXNlKCk7XHJcbiAgfVxyXG59O1xyXG5cclxuVmlkZW9Qcm94eS5wcm90b3R5cGUuc2V0Vm9sdW1lID0gZnVuY3Rpb24odm9sdW1lTGV2ZWwpIHtcclxuICBpZiAodGhpcy52aWRlb0VsZW1lbnQpIHtcclxuICAgIC8vIE9uIGlPUyAxMCwgdGhlIFZpZGVvRWxlbWVudC52b2x1bWUgcHJvcGVydHkgaXMgcmVhZC1vbmx5LiBTbyB3ZSBzcGVjaWFsXHJcbiAgICAvLyBjYXNlIG11dGluZyBhbmQgdW5tdXRpbmcuXHJcbiAgICBpZiAoVXRpbC5pc0lPUygpKSB7XHJcbiAgICAgIHRoaXMudmlkZW9FbGVtZW50Lm11dGVkID0gKHZvbHVtZUxldmVsID09PSAwKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMudmlkZW9FbGVtZW50LnZvbHVtZSA9IHZvbHVtZUxldmVsO1xyXG4gICAgfVxyXG4gIH1cclxuICBpZiAodGhpcy5hdWRpb0VsZW1lbnQpIHtcclxuICAgIHRoaXMuYXVkaW9FbGVtZW50LnZvbHVtZSA9IHZvbHVtZUxldmVsO1xyXG4gIH1cclxufTtcclxuXHJcbi8qKlxyXG4gKiBDYWxsZWQgb24gUkFGIHRvIHByb2dyZXNzIHBsYXliYWNrLlxyXG4gKi9cclxuVmlkZW9Qcm94eS5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24oKSB7XHJcbiAgLy8gRmFrZXMgcGxheWJhY2sgZm9yIGlPUyBvbmx5LlxyXG4gIGlmICghdGhpcy5pc0Zha2VQbGF5YmFjaykge1xyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuICB2YXIgZHVyYXRpb24gPSB0aGlzLnZpZGVvRWxlbWVudC5kdXJhdGlvbjtcclxuICB2YXIgbm93ID0gcGVyZm9ybWFuY2Uubm93KCk7XHJcbiAgdmFyIGRlbHRhID0gbm93IC0gdGhpcy5zdGFydFRpbWU7XHJcbiAgdmFyIGRlbHRhUyA9IGRlbHRhIC8gMTAwMDtcclxuICB0aGlzLnZpZGVvRWxlbWVudC5jdXJyZW50VGltZSA9IGRlbHRhUztcclxuXHJcbiAgLy8gTG9vcCB0aHJvdWdoIHRoZSB2aWRlb1xyXG4gIGlmIChkZWx0YVMgPiBkdXJhdGlvbikge1xyXG4gICAgdGhpcy5zdGFydFRpbWUgPSBub3c7XHJcbiAgICB0aGlzLnZpZGVvRWxlbWVudC5jdXJyZW50VGltZSA9IDA7XHJcbiAgICAvLyBBbHNvIHJlc3RhcnQgdGhlIGF1ZGlvLlxyXG4gICAgdGhpcy5hdWRpb0VsZW1lbnQuY3VycmVudFRpbWUgPSAwO1xyXG4gIH1cclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gVmlkZW9Qcm94eTtcclxuIiwiLypcclxuICogQ29weXJpZ2h0IDIwMTYgR29vZ2xlIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG52YXIgQWRhcHRpdmVQbGF5ZXIgPSByZXF1aXJlKCcuL2FkYXB0aXZlLXBsYXllcicpO1xyXG52YXIgRXZlbnRFbWl0dGVyID0gcmVxdWlyZSgnZXZlbnRlbWl0dGVyMycpO1xyXG52YXIgRXllcyA9IHJlcXVpcmUoJy4vZXllcycpO1xyXG52YXIgSG90c3BvdFJlbmRlcmVyID0gcmVxdWlyZSgnLi9ob3RzcG90LXJlbmRlcmVyJyk7XHJcbnZhciBSZXRpY2xlUmVuZGVyZXIgPSByZXF1aXJlKCcuL3JldGljbGUtcmVuZGVyZXInKTtcclxudmFyIE5hdmlnYXRpb25SZW5kZXJlciA9IHJlcXVpcmUoJy4vbmF2aWdhdGlvbi1yZW5kZXJlcicpO1xyXG52YXIgTXVsdGlwbGF5ZXJNb2RlID0gcmVxdWlyZSgnLi9tdWx0aXBsYXllci1tb2RlJyk7XHJcbnZhciBTcGhlcmVSZW5kZXJlciA9IHJlcXVpcmUoJy4vc3BoZXJlLXJlbmRlcmVyJyk7XHJcbnZhciBUV0VFTiA9IHJlcXVpcmUoJ3R3ZWVuLmpzJyk7XHJcbnZhciBVdGlsID0gcmVxdWlyZSgnLi4vdXRpbCcpO1xyXG52YXIgVmlkZW9Qcm94eSA9IHJlcXVpcmUoJy4vdmlkZW8tcHJveHknKTtcclxudmFyIFdlYlZSTWFuYWdlciA9IHJlcXVpcmUoJ3dlYnZyLWJvaWxlcnBsYXRlJyk7XHJcblxyXG52YXIgQVVUT1BBTl9EVVJBVElPTiA9IDMwMDA7XHJcbnZhciBBVVRPUEFOX0FOR0xFID0gMC40O1xyXG5cclxuXHJcbi8qKlxyXG4gKiBUaGUgbWFpbiBXZWJHTCByZW5kZXJpbmcgZW50cnkgcG9pbnQuIE1hbmFnZXMgdGhlIHNjZW5lLCBjYW1lcmEsIFZSLXJlbGF0ZWRcclxuICogcmVuZGVyaW5nIHVwZGF0ZXMuIEludGVyYWN0cyB3aXRoIHRoZSBXZWJWUk1hbmFnZXIuXHJcbiAqXHJcbiAqIENvb3JkaW5hdGVzIHRoZSBvdGhlciByZW5kZXJlcnM6IFNwaGVyZVJlbmRlcmVyLCBIb3RzcG90UmVuZGVyZXIsXHJcbiAqIFJldGljbGVSZW5kZXJlci5cclxuICpcclxuICogQWxzbyBtYW5hZ2VzIHRoZSBBZGFwdGl2ZVBsYXllciBhbmQgVmlkZW9Qcm94eS5cclxuICpcclxuICogRW1pdHMgdGhlIGZvbGxvd2luZyBldmVudHM6XHJcbiAqICAgbG9hZDogd2hlbiB0aGUgc2NlbmUgaXMgbG9hZGVkLlxyXG4gKiAgIGVycm9yOiBpZiB0aGVyZSBpcyBhbiBlcnJvciBsb2FkaW5nIHRoZSBzY2VuZS5cclxuICogICBtb2RlY2hhbmdlKEJvb2xlYW4gaXNWUik6IGlmIHRoZSBtb2RlIChlZy4gVlIsIGZ1bGxzY3JlZW4sIGV0YykgY2hhbmdlcy5cclxuICovXHJcbmZ1bmN0aW9uIFdvcmxkUmVuZGVyZXIoKSB7XHJcbiAgdGhpcy5pbml0XygpO1xyXG5cclxuICB0aGlzLnNwaGVyZVJlbmRlcmVyID0gbmV3IFNwaGVyZVJlbmRlcmVyKHRoaXMuc2NlbmUpO1xyXG4gIHRoaXMucmV0aWNsZVJlbmRlcmVyID0gbmV3IFJldGljbGVSZW5kZXJlcih0aGlzLmNhbWVyYSk7XHJcbiAgdGhpcy5ob3RzcG90UmVuZGVyZXIgPSBuZXcgSG90c3BvdFJlbmRlcmVyKHRoaXMpO1xyXG4gIHRoaXMubmF2aWdhdGlvblJlbmRlcmVyID0gbmV3IE5hdmlnYXRpb25SZW5kZXJlcih0aGlzKTtcclxuICB0aGlzLm11bHRpcGxheWVyTW9kZSA9IG5ldyBNdWx0aXBsYXllck1vZGUodGhpcyk7XHJcbiAgdGhpcy5ob3RzcG90UmVuZGVyZXIub24oJ2ZvY3VzJywgdGhpcy5vbkhvdHNwb3RGb2N1c18uYmluZCh0aGlzKSk7XHJcbiAgdGhpcy5ob3RzcG90UmVuZGVyZXIub24oJ2JsdXInLCB0aGlzLm9uSG90c3BvdEJsdXJfLmJpbmQodGhpcykpO1xyXG59XHJcbldvcmxkUmVuZGVyZXIucHJvdG90eXBlID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG5cclxuV29ybGRSZW5kZXJlci5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24odGltZSkge1xyXG4gIHRoaXMuY29udHJvbHMudXBkYXRlKCk7XHJcbiAgdGhpcy5ob3RzcG90UmVuZGVyZXIudXBkYXRlKHRoaXMuY2FtZXJhKTtcclxuICB0aGlzLm5hdmlnYXRpb25SZW5kZXJlci51cGRhdGVfKHRoaXMuY2FtZXJhKTtcclxuICB0aGlzLm11bHRpcGxheWVyTW9kZS51cGRhdGUoKTtcclxuICBUV0VFTi51cGRhdGUodGltZSk7XHJcbiAgdGhpcy5lZmZlY3QucmVuZGVyKHRoaXMuc2NlbmUsIHRoaXMuY2FtZXJhKTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBAcmV0dXJuIHtQcm9taXNlfSBXaGVuIHRoZSBzY2VuZSBpcyBmdWxseSBsb2FkZWQuXHJcbiAqL1xyXG5Xb3JsZFJlbmRlcmVyLnByb3RvdHlwZS5zZXRTY2VuZSA9IGZ1bmN0aW9uKHNjZW5lKSB7XHJcbiAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gIHZhciBwcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICBzZWxmLnNjZW5lUmVzb2x2ZSA9IHJlc29sdmU7XHJcbiAgICBzZWxmLnNjZW5lUmVqZWN0ID0gcmVqZWN0O1xyXG4gIH0pO1xyXG5cclxuICBpZiAoIXNjZW5lIHx8ICFzY2VuZS5pc1ZhbGlkKCkpIHtcclxuICAgIHRoaXMuZGlkTG9hZEZhaWxfKHNjZW5lLmVycm9yTWVzc2FnZSk7XHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG5cclxuICB2YXIgcGFyYW1zID0ge1xyXG4gICAgaXNTdGVyZW86IHNjZW5lLmlzU3RlcmVvLFxyXG4gIH07XHJcbiAgdGhpcy5zZXREZWZhdWx0WWF3XyhzY2VuZS5kZWZhdWx0WWF3IHx8IDApO1xyXG5cclxuICAvLyBEaXNhYmxlIFZSIG1vZGUgaWYgZXhwbGljaXRseSBkaXNhYmxlZCwgb3IgaWYgd2UncmUgbG9hZGluZyBhIHZpZGVvIG9uIGlPU1xyXG4gIC8vIDkgb3IgZWFybGllci5cclxuICBpZiAoc2NlbmUuaXNWUk9mZiB8fCAoc2NlbmUudmlkZW8gJiYgVXRpbC5pc0lPUzlPckxlc3MoKSkpIHtcclxuICAgIHRoaXMubWFuYWdlci5zZXRWUkNvbXBhdGlibGVPdmVycmlkZShmYWxzZSk7XHJcbiAgfVxyXG5cclxuICAvLyBTZXQgdmFyaW91cyBjYWxsYmFjayBvdmVycmlkZXMgaW4gaU9TLlxyXG4gIGlmIChVdGlsLmlzSU9TKCkpIHtcclxuICAgIHRoaXMubWFuYWdlci5zZXRGdWxsc2NyZWVuQ2FsbGJhY2soZnVuY3Rpb24oKSB7XHJcbiAgICAgIFV0aWwuc2VuZFBhcmVudE1lc3NhZ2Uoe3R5cGU6ICdlbnRlci1mdWxsc2NyZWVuJ30pO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLm1hbmFnZXIuc2V0RXhpdEZ1bGxzY3JlZW5DYWxsYmFjayhmdW5jdGlvbigpIHtcclxuICAgICAgVXRpbC5zZW5kUGFyZW50TWVzc2FnZSh7dHlwZTogJ2V4aXQtZnVsbHNjcmVlbid9KTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5tYW5hZ2VyLnNldFZSQ2FsbGJhY2soZnVuY3Rpb24oKSB7XHJcbiAgICAgIFV0aWwuc2VuZFBhcmVudE1lc3NhZ2Uoe3R5cGU6ICdlbnRlci12cid9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLy8gSWYgd2UncmUgZGVhbGluZyB3aXRoIGFuIGltYWdlLCBhbmQgbm90IGEgdmlkZW8uXHJcbiAgaWYgKHNjZW5lLmltYWdlICYmICFzY2VuZS52aWRlbykge1xyXG4gICAgaWYgKHNjZW5lLnByZXZpZXcpIHtcclxuICAgICAgLy8gRmlyc3QgbG9hZCB0aGUgcHJldmlldy5cclxuICAgICAgdGhpcy5zcGhlcmVSZW5kZXJlci5zZXRQaG90b3NwaGVyZShzY2VuZS5wcmV2aWV3LCBwYXJhbXMpLnRoZW4oZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgLy8gQXMgc29vbiBhcyBzb21ldGhpbmcgaXMgbG9hZGVkLCBlbWl0IHRoZSBsb2FkIGV2ZW50IHRvIGhpZGUgdGhlXHJcbiAgICAgICAgLy8gbG9hZGluZyBwcm9ncmVzcyBiYXIuXHJcbiAgICAgICAgc2VsZi5kaWRMb2FkXygpO1xyXG4gICAgICAgIC8vIFRoZW4gbG9hZCB0aGUgZnVsbCByZXNvbHV0aW9uIGltYWdlLlxyXG4gICAgICAgIHNlbGYuc3BoZXJlUmVuZGVyZXIuc2V0UGhvdG9zcGhlcmUoc2NlbmUuaW1hZ2UsIHBhcmFtcyk7XHJcbiAgICAgIH0pLmNhdGNoKHNlbGYuZGlkTG9hZEZhaWxfLmJpbmQoc2VsZikpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgLy8gTm8gcHJldmlldyAtLSBnbyBzdHJhaWdodCB0byByZW5kZXJpbmcgdGhlIGZ1bGwgaW1hZ2UuXHJcbiAgICAgIHRoaXMuc3BoZXJlUmVuZGVyZXIuc2V0UGhvdG9zcGhlcmUoc2NlbmUuaW1hZ2UsIHBhcmFtcykudGhlbihmdW5jdGlvbigpIHtcclxuICAgICAgICBzZWxmLmRpZExvYWRfKCk7XHJcbiAgICAgIH0pLmNhdGNoKHNlbGYuZGlkTG9hZEZhaWxfLmJpbmQoc2VsZikpO1xyXG4gICAgfVxyXG4gIH0gZWxzZSBpZiAoc2NlbmUudmlkZW8pIHtcclxuICAgIGlmIChVdGlsLmlzSUUxMSgpKSB7XHJcbiAgICAgIC8vIE9uIElFIDExLCBpZiBhbiAnaW1hZ2UnIHBhcmFtIGlzIHByb3ZpZGVkLCBsb2FkIGl0IGluc3RlYWQgb2Ygc2hvd2luZ1xyXG4gICAgICAvLyBhbiBlcnJvci5cclxuICAgICAgLy9cclxuICAgICAgLy8gVE9ETyhzbXVzKTogT25jZSB2aWRlbyB0ZXh0dXJlcyBhcmUgc3VwcG9ydGVkLCByZW1vdmUgdGhpcyBmYWxsYmFjay5cclxuICAgICAgaWYgKHNjZW5lLmltYWdlKSB7XHJcbiAgICAgICAgdGhpcy5zcGhlcmVSZW5kZXJlci5zZXRQaG90b3NwaGVyZShzY2VuZS5pbWFnZSwgcGFyYW1zKS50aGVuKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgc2VsZi5kaWRMb2FkXygpO1xyXG4gICAgICAgIH0pLmNhdGNoKHNlbGYuZGlkTG9hZEZhaWxfLmJpbmQoc2VsZikpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMuZGlkTG9hZEZhaWxfKCdWaWRlbyBpcyBub3Qgc3VwcG9ydGVkIG9uIElFMTEuJyk7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMucGxheWVyID0gbmV3IEFkYXB0aXZlUGxheWVyKCk7XHJcbiAgICAgIHRoaXMucGxheWVyLm9uKCdsb2FkJywgZnVuY3Rpb24odmlkZW9FbGVtZW50KSB7XHJcbiAgICAgICAgc2VsZi5zcGhlcmVSZW5kZXJlci5zZXQzNjBWaWRlbyh2aWRlb0VsZW1lbnQsIHBhcmFtcykudGhlbihmdW5jdGlvbigpIHtcclxuICAgICAgICAgIHNlbGYuZGlkTG9hZF8oe3ZpZGVvRWxlbWVudDogdmlkZW9FbGVtZW50fSk7XHJcbiAgICAgICAgfSkuY2F0Y2goc2VsZi5kaWRMb2FkRmFpbF8uYmluZChzZWxmKSk7XHJcbiAgICAgIH0pO1xyXG4gICAgICB0aGlzLnBsYXllci5vbignZXJyb3InLCBmdW5jdGlvbihlcnJvcikge1xyXG4gICAgICAgIHNlbGYuZGlkTG9hZEZhaWxfKCdWaWRlbyBsb2FkIGVycm9yOiAnICsgZXJyb3IpO1xyXG4gICAgICB9KTtcclxuICAgICAgdGhpcy5wbGF5ZXIubG9hZChzY2VuZS52aWRlbyk7XHJcblxyXG4gICAgICB0aGlzLnZpZGVvUHJveHkgPSBuZXcgVmlkZW9Qcm94eSh0aGlzLnBsYXllci52aWRlbyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICB0aGlzLnNjZW5lSW5mbyA9IHNjZW5lO1xyXG4gLy8gY29uc29sZS5sb2coJ0xvYWRlZCBzY2VuZScsIHNjZW5lKTtcclxuXHJcbiAgcmV0dXJuIHByb21pc2U7XHJcbn07XHJcblxyXG5Xb3JsZFJlbmRlcmVyLnByb3RvdHlwZS5pc1ZSTW9kZSA9IGZ1bmN0aW9uKCkge1xyXG4gIHJldHVybiAhIXRoaXMudnJEaXNwbGF5ICYmIHRoaXMudnJEaXNwbGF5LmlzUHJlc2VudGluZztcclxufTtcclxuXHJcbldvcmxkUmVuZGVyZXIucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbigpIHtcclxuICBpZiAodGhpcy5wbGF5ZXIpIHtcclxuICAgIHRoaXMucGxheWVyLnJlbW92ZUFsbExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5wbGF5ZXIuZGVzdHJveSgpO1xyXG4gICAgdGhpcy5wbGF5ZXIgPSBudWxsO1xyXG4gIH1cclxufVxyXG5cclxuV29ybGRSZW5kZXJlci5wcm90b3R5cGUuZGlkTG9hZF8gPSBmdW5jdGlvbihvcHRfZXZlbnQpIHtcclxuICB2YXIgZXZlbnQgPSBvcHRfZXZlbnQgfHwge307XHJcbiAgdGhpcy5lbWl0KCdsb2FkJywgZXZlbnQpO1xyXG4gIGlmICh0aGlzLnNjZW5lUmVzb2x2ZSkge1xyXG4gICAgdGhpcy5zY2VuZVJlc29sdmUoKTtcclxuICB9XHJcbn07XHJcblxyXG5Xb3JsZFJlbmRlcmVyLnByb3RvdHlwZS5kaWRMb2FkRmFpbF8gPSBmdW5jdGlvbihtZXNzYWdlKSB7XHJcbiAgdGhpcy5lbWl0KCdlcnJvcicsIG1lc3NhZ2UpO1xyXG4gIGlmICh0aGlzLnNjZW5lUmVqZWN0KSB7XHJcbiAgICB0aGlzLnNjZW5lUmVqZWN0KG1lc3NhZ2UpO1xyXG4gIH1cclxufTtcclxuXHJcbi8qKlxyXG4gKiBTZXRzIHRoZSBkZWZhdWx0IHlhdy5cclxuICogQHBhcmFtIHtOdW1iZXJ9IGFuZ2xlUmFkIFRoZSB5YXcgaW4gcmFkaWFucy5cclxuICovXHJcbldvcmxkUmVuZGVyZXIucHJvdG90eXBlLnNldERlZmF1bHRZYXdfID0gZnVuY3Rpb24oYW5nbGVSYWQpIHtcclxuICAvLyBSb3RhdGUgdGhlIGNhbWVyYSBwYXJlbnQgdG8gdGFrZSBpbnRvIGFjY291bnQgdGhlIHNjZW5lJ3Mgcm90YXRpb24uXHJcbiAgLy8gQnkgZGVmYXVsdCwgaXQgc2hvdWxkIGJlIGF0IHRoZSBjZW50ZXIgb2YgdGhlIGltYWdlLlxyXG4gIC8vdGhpcy5jYW1lcmEucGFyZW50LnJvdGF0aW9uLnkgPSAoTWF0aC5QSSAvIDIuMCkgKyBhbmdsZVJhZDtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBEbyB0aGUgaW5pdGlhbCBjYW1lcmEgdHdlZW4gdG8gcm90YXRlIHRoZSBjYW1lcmEsIGdpdmluZyBhbiBpbmRpY2F0aW9uIHRoYXRcclxuICogdGhlcmUgaXMgbGl2ZSBjb250ZW50IHRoZXJlIChvbiBkZXNrdG9wIG9ubHkpLlxyXG4gKi9cclxuV29ybGRSZW5kZXJlci5wcm90b3R5cGUuYXV0b3BhbiA9IGZ1bmN0aW9uKGR1cmF0aW9uKSB7XHJcbiAgdmFyIHRhcmdldFkgPSB0aGlzLmNhbWVyYS5wYXJlbnQucm90YXRpb24ueSAtIEFVVE9QQU5fQU5HTEU7XHJcbiAgdmFyIHR3ZWVuID0gbmV3IFRXRUVOLlR3ZWVuKHRoaXMuY2FtZXJhLnBhcmVudC5yb3RhdGlvbilcclxuICAgICAgLnRvKHt5OiB0YXJnZXRZfSwgQVVUT1BBTl9EVVJBVElPTilcclxuICAgICAgLmVhc2luZyhUV0VFTi5FYXNpbmcuUXVhZHJhdGljLk91dClcclxuICAgICAgLnN0YXJ0KCk7XHJcbn07XHJcblxyXG5Xb3JsZFJlbmRlcmVyLnByb3RvdHlwZS5pbml0XyA9IGZ1bmN0aW9uKCkge1xyXG4gIHZhciBjb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5Jyk7XHJcbiAgdmFyIGFzcGVjdCA9IHdpbmRvdy5pbm5lcldpZHRoIC8gd2luZG93LmlubmVySGVpZ2h0O1xyXG4gIHZhciBjYW1lcmEgPSBuZXcgVEhSRUUuUGVyc3BlY3RpdmVDYW1lcmEoNzUsIGFzcGVjdCwgMC4wMDAwMDAwMDEsIDUwMCk7XHJcbiAgY2FtZXJhLmxheWVycy5lbmFibGUoMSk7XHJcblxyXG4gIHZhciBjYW1lcmFEdW1teSA9IG5ldyBUSFJFRS5PYmplY3QzRCgpO1xyXG4gIGNhbWVyYUR1bW15LmFkZChjYW1lcmEpO1xyXG5cclxuICAvLyBBbnRpYWxpYXNpbmcgZGlzYWJsZWQgdG8gaW1wcm92ZSBwZXJmb3JtYW5jZS5cclxuICB2YXIgcmVuZGVyZXIgPSBuZXcgVEhSRUUuV2ViR0xSZW5kZXJlcih7YW50aWFsaWFzOiB0cnVlfSk7XHJcbiAgcmVuZGVyZXIuc2V0Q2xlYXJDb2xvcigweDAwMDAwMCwgMCk7XHJcbiAgcmVuZGVyZXIuc2V0U2l6ZSh3aW5kb3cuaW5uZXJXaWR0aCwgd2luZG93LmlubmVySGVpZ2h0KTtcclxuICByZW5kZXJlci5zZXRQaXhlbFJhdGlvKHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvKTtcclxuXHJcbiAgY29udGFpbmVyLmFwcGVuZENoaWxkKHJlbmRlcmVyLmRvbUVsZW1lbnQpO1xyXG5cclxuICB2YXIgY29udHJvbHMgPSBuZXcgVEhSRUUuVlJDb250cm9scyhjYW1lcmEpO1xyXG4gIHZhciBlZmZlY3QgPSBuZXcgVEhSRUUuVlJFZmZlY3QocmVuZGVyZXIpO1xyXG5cclxuICAvLyBEaXNhYmxlIGV5ZSBzZXBhcmF0aW9uLlxyXG4gIGVmZmVjdC5zY2FsZSA9IDA7XHJcbiAgZWZmZWN0LnNldFNpemUod2luZG93LmlubmVyV2lkdGgsIHdpbmRvdy5pbm5lckhlaWdodCk7XHJcblxyXG4gIHRoaXMuY2FtZXJhID0gY2FtZXJhO1xyXG4gIHRoaXMucmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICB0aGlzLmVmZmVjdCA9IGVmZmVjdDtcclxuICB0aGlzLmNvbnRyb2xzID0gY29udHJvbHM7XHJcbiAgdGhpcy5tYW5hZ2VyID0gbmV3IFdlYlZSTWFuYWdlcihyZW5kZXJlciwgZWZmZWN0LCB7cHJlZGlzdG9ydGVkOiBmYWxzZX0pO1xyXG5cclxuICB0aGlzLnNjZW5lID0gdGhpcy5jcmVhdGVTY2VuZV8oKTtcclxuICB0aGlzLnNjZW5lLmFkZCh0aGlzLmNhbWVyYS5wYXJlbnQpO1xyXG5cclxuXHJcbiAgLy8gV2F0Y2ggdGhlIHJlc2l6ZSBldmVudC5cclxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy5vblJlc2l6ZV8uYmluZCh0aGlzKSk7XHJcblxyXG4gIC8vIFByZXZlbnQgY29udGV4dCBtZW51LlxyXG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdjb250ZXh0bWVudScsIHRoaXMub25Db250ZXh0TWVudV8uYmluZCh0aGlzKSk7XHJcblxyXG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCd2cmRpc3BsYXlwcmVzZW50Y2hhbmdlJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9uVlJEaXNwbGF5UHJlc2VudENoYW5nZV8uYmluZCh0aGlzKSk7XHJcbn07XHJcblxyXG5Xb3JsZFJlbmRlcmVyLnByb3RvdHlwZS5vblJlc2l6ZV8gPSBmdW5jdGlvbigpIHtcclxuICB0aGlzLmVmZmVjdC5zZXRTaXplKHdpbmRvdy5pbm5lcldpZHRoLCB3aW5kb3cuaW5uZXJIZWlnaHQpO1xyXG4gIHRoaXMuY2FtZXJhLmFzcGVjdCA9IHdpbmRvdy5pbm5lcldpZHRoIC8gd2luZG93LmlubmVySGVpZ2h0O1xyXG4gIHRoaXMuY2FtZXJhLnVwZGF0ZVByb2plY3Rpb25NYXRyaXgoKTtcclxufTtcclxuXHJcbldvcmxkUmVuZGVyZXIucHJvdG90eXBlLm9uVlJEaXNwbGF5UHJlc2VudENoYW5nZV8gPSBmdW5jdGlvbihlKSB7XHJcbiAgY29uc29sZS5sb2coJ29uVlJEaXNwbGF5UHJlc2VudENoYW5nZV8nKTtcclxuICB0aGlzLnZyRGlzcGxheSA9IGUuZGV0YWlsLnZyZGlzcGxheTtcclxuICB2YXIgaXNWUiA9IHRoaXMuaXNWUk1vZGUoKTtcclxuXHJcbiAgLy8gSWYgdGhlIG1vZGUgY2hhbmdlZCB0byBWUiBhbmQgdGhlcmUgaXMgYXQgbGVhc3Qgb25lIGhvdHNwb3QsIHNob3cgcmV0aWNsZS5cclxuICAvL3ZhciBpc1JldGljbGVWaXNpYmxlID0gaXNWUjtcclxuICB0aGlzLnJldGljbGVSZW5kZXJlci5zZXRWaXNpYmlsaXR5KGlzVlIpO1xyXG4gIC8vY29uc29sZS5sb2coJ01vZGUgY2hhbmdlZCBhbmQgcmV0aWNsZSB2aXNpYmlsaXR5IGlzIG5vdzogJXMnLCBpc1JldGljbGVWaXNpYmxlKTtcclxuXHJcbiAgLy8gUmVzaXplIHRoZSByZW5kZXJlciBmb3IgZ29vZCBtZWFzdXJlLlxyXG4gIHRoaXMub25SZXNpemVfKCk7XHJcblxyXG4gIC8vIEFuYWx5dGljcy5cclxuICBpZiAod2luZG93LmFuYWx5dGljcykge1xyXG4gICAgYW5hbHl0aWNzLmxvZ01vZGVDaGFuZ2VkKGlzVlIpO1xyXG4gIH1cclxuXHJcbiAgLy8gV2hlbiBleGl0aW5nIFZSIG1vZGUsIG1ha2Ugc3VyZSB3ZSBlbWl0IGJhY2sgYW4gZXhpdC1mdWxsc2NyZWVuIGV2ZW50LlxyXG4gIGlmICghaXNWUiAmJiBVdGlsLmlzSU9TKCkpIHtcclxuICAgIFV0aWwuc2VuZFBhcmVudE1lc3NhZ2Uoe3R5cGU6ICdleGl0LWZ1bGxzY3JlZW4nfSk7XHJcbiAgfVxyXG5cclxuICAvLyBFbWl0IGEgbW9kZSBjaGFuZ2UgZXZlbnQgYmFjayB0byBhbnkgbGlzdGVuZXJzLlxyXG4gIHRoaXMuZW1pdCgnbW9kZWNoYW5nZScsIGlzVlIpO1xyXG59O1xyXG5cclxuV29ybGRSZW5kZXJlci5wcm90b3R5cGUuY3JlYXRlU2NlbmVfID0gZnVuY3Rpb24ob3B0X3BhcmFtcykge1xyXG4gIHZhciBzY2VuZSA9IG5ldyBUSFJFRS5TY2VuZSgpO1xyXG5cclxuICAvLyBBZGQgYSBncm91cCBmb3IgdGhlIHBob3Rvc3BoZXJlLlxyXG4gIHZhciBwaG90b0dyb3VwID0gbmV3IFRIUkVFLk9iamVjdDNEKCk7XHJcbiAgcGhvdG9Hcm91cC5uYW1lID0gJ3Bob3RvJztcclxuICBzY2VuZS5hZGQocGhvdG9Hcm91cCk7XHJcblxyXG4gIC8vIEFkZCBhIGdyb3VwIGZvciB0aGUgbmF2aWdhdGlvbi5cclxuICB2YXIgbmF2R3JvdXAgPSBuZXcgVEhSRUUuT2JqZWN0M0QoKTtcclxuICBuYXZHcm91cC5uYW1lID0gJ25hdic7XHJcbiAgc2NlbmUuYWRkKG5hdkdyb3VwKTtcclxuICBcclxuICBzY2VuZS5hZGQobmV3IFRIUkVFLkFtYmllbnRMaWdodCgweEZGRkZGRikpO1xyXG4gIHJldHVybiBzY2VuZTtcclxufTtcclxuXHJcbldvcmxkUmVuZGVyZXIucHJvdG90eXBlLm9uSG90c3BvdEZvY3VzXyA9IGZ1bmN0aW9uKGlkKSB7XHJcbiAgLy9jb25zb2xlLmxvZygnb25Ib3RzcG90Rm9jdXNfJywgaWQpO1xyXG4gIC8vIFNldCB0aGUgZGVmYXVsdCBjdXJzb3IgdG8gYmUgYSBwb2ludGVyLlxyXG4gIHRoaXMuc2V0Q3Vyc29yXygncG9pbnRlcicpO1xyXG59O1xyXG5cclxuV29ybGRSZW5kZXJlci5wcm90b3R5cGUub25Ib3RzcG90Qmx1cl8gPSBmdW5jdGlvbihpZCkge1xyXG4gIC8vY29uc29sZS5sb2coJ29uSG90c3BvdEJsdXJfJywgaWQpO1xyXG4gIC8vIFJlc2V0IHRoZSBkZWZhdWx0IGN1cnNvciB0byBiZSB0aGUgZGVmYXVsdCBvbmUuXHJcbiAgdGhpcy5zZXRDdXJzb3JfKCcnKTtcclxufTtcclxuXHJcbldvcmxkUmVuZGVyZXIucHJvdG90eXBlLnNldEN1cnNvcl8gPSBmdW5jdGlvbihjdXJzb3IpIHtcclxuICB0aGlzLnJlbmRlcmVyLmRvbUVsZW1lbnQuc3R5bGUuY3Vyc29yID0gY3Vyc29yO1xyXG59O1xyXG5cclxuV29ybGRSZW5kZXJlci5wcm90b3R5cGUub25Db250ZXh0TWVudV8gPSBmdW5jdGlvbihlKSB7XHJcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgcmV0dXJuIGZhbHNlO1xyXG59O1xyXG5cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gV29ybGRSZW5kZXJlcjtcclxuIiwiLyoqXHJcbiAqIE1lc3NhZ2VzIGZyb20gdGhlIEFQSSB0byB0aGUgZW1iZWQuXHJcbiAqL1xyXG52YXIgTWVzc2FnZSA9IHtcclxuICBQTEFZOiAncGxheScsXHJcbiAgUEFVU0U6ICdwYXVzZScsXHJcbiAgQUREX0hPVFNQT1Q6ICdhZGRob3RzcG90JyxcclxuICBTRVRfQ09OVEVOVDogJ3NldGltYWdlJyxcclxuICBTRVRfVk9MVU1FOiAnc2V0dm9sdW1lJyxcclxuICBERVZJQ0VfTU9USU9OOiAnZGV2aWNlbW90aW9uJyxcclxuICBTRVRVUF9OQVZJR0FUSU9OOiAnbmF2aWdhdGlvbicsXHJcbiAgRU5BQkxFX01VTFRJUExBWUVSX01PREU6ICdtdWx0aXBsYXllci1lbmFibGUnLFxyXG4gIEpPSU5fTVVMVElQTEFZRVJfUk9PTTogJ211bHRpcGxheWVyLWpvaW4nLFxyXG4gIExFQVZFX01VTFRJUExBWUVSX1JPT006ICdtdWx0aXBsYXllci1sZWF2ZScsXHJcbiAgU0VUX01VTFRJUExBWUVSX01FOiAnbXVsdGlwbGF5ZXItbWUnXHJcbn07XHJcbnZhciBDYWxsYmFja3MgPSB7fTtcclxuZm9yKHR5cGUgaW4gTWVzc2FnZSl7XHJcbiAgQ2FsbGJhY2tzW01lc3NhZ2VbdHlwZV1dID0gZnVuY3Rpb24oKXt9O1xyXG59XHJcbk1lc3NhZ2UuY2FsbGJhY2tzID0gQ2FsbGJhY2tzO1xyXG5tb2R1bGUuZXhwb3J0cyA9IE1lc3NhZ2U7XHJcbiIsIi8qXHJcbiAqIENvcHlyaWdodCAyMDE1IEdvb2dsZSBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuXHJcblV0aWwgPSB3aW5kb3cuVXRpbCB8fCB7fTtcclxuXHJcblV0aWwuaXNEYXRhVVJJID0gZnVuY3Rpb24oc3JjKSB7XHJcbiAgcmV0dXJuIHNyYyAmJiBzcmMuaW5kZXhPZignZGF0YTonKSA9PSAwO1xyXG59O1xyXG5cclxuVXRpbC5nZW5lcmF0ZVVVSUQgPSBmdW5jdGlvbigpIHtcclxuICBmdW5jdGlvbiBzNCgpIHtcclxuICAgIHJldHVybiBNYXRoLmZsb29yKCgxICsgTWF0aC5yYW5kb20oKSkgKiAweDEwMDAwKVxyXG4gICAgLnRvU3RyaW5nKDE2KVxyXG4gICAgLnN1YnN0cmluZygxKTtcclxuICB9XHJcbiAgcmV0dXJuIHM0KCkgKyBzNCgpICsgJy0nICsgczQoKSArICctJyArIHM0KCkgKyAnLScgK1xyXG4gICAgczQoKSArICctJyArIHM0KCkgKyBzNCgpICsgczQoKTtcclxufTtcclxuXHJcblV0aWwuaXNNb2JpbGUgPSBmdW5jdGlvbigpIHtcclxuICB2YXIgY2hlY2sgPSBmYWxzZTtcclxuICAoZnVuY3Rpb24oYSl7aWYoLyhhbmRyb2lkfGJiXFxkK3xtZWVnbykuK21vYmlsZXxhdmFudGdvfGJhZGFcXC98YmxhY2tiZXJyeXxibGF6ZXJ8Y29tcGFsfGVsYWluZXxmZW5uZWN8aGlwdG9wfGllbW9iaWxlfGlwKGhvbmV8b2QpfGlyaXN8a2luZGxlfGxnZSB8bWFlbW98bWlkcHxtbXB8bW9iaWxlLitmaXJlZm94fG5ldGZyb250fG9wZXJhIG0ob2J8aW4paXxwYWxtKCBvcyk/fHBob25lfHAoaXhpfHJlKVxcL3xwbHVja2VyfHBvY2tldHxwc3B8c2VyaWVzKDR8NikwfHN5bWJpYW58dHJlb3x1cFxcLihicm93c2VyfGxpbmspfHZvZGFmb25lfHdhcHx3aW5kb3dzIGNlfHhkYXx4aWluby9pLnRlc3QoYSl8fC8xMjA3fDYzMTB8NjU5MHwzZ3NvfDR0aHB8NTBbMS02XWl8Nzcwc3w4MDJzfGEgd2F8YWJhY3xhYyhlcnxvb3xzXFwtKXxhaShrb3xybil8YWwoYXZ8Y2F8Y28pfGFtb2l8YW4oZXh8bnl8eXcpfGFwdHV8YXIoY2h8Z28pfGFzKHRlfHVzKXxhdHR3fGF1KGRpfFxcLW18ciB8cyApfGF2YW58YmUoY2t8bGx8bnEpfGJpKGxifHJkKXxibChhY3xheil8YnIoZXx2KXd8YnVtYnxid1xcLShufHUpfGM1NVxcL3xjYXBpfGNjd2F8Y2RtXFwtfGNlbGx8Y2h0bXxjbGRjfGNtZFxcLXxjbyhtcHxuZCl8Y3Jhd3xkYShpdHxsbHxuZyl8ZGJ0ZXxkY1xcLXN8ZGV2aXxkaWNhfGRtb2J8ZG8oY3xwKW98ZHMoMTJ8XFwtZCl8ZWwoNDl8YWkpfGVtKGwyfHVsKXxlcihpY3xrMCl8ZXNsOHxleihbNC03XTB8b3N8d2F8emUpfGZldGN8Zmx5KFxcLXxfKXxnMSB1fGc1NjB8Z2VuZXxnZlxcLTV8Z1xcLW1vfGdvKFxcLnd8b2QpfGdyKGFkfHVuKXxoYWllfGhjaXR8aGRcXC0obXxwfHQpfGhlaVxcLXxoaShwdHx0YSl8aHAoIGl8aXApfGhzXFwtY3xodChjKFxcLXwgfF98YXxnfHB8c3x0KXx0cCl8aHUoYXd8dGMpfGlcXC0oMjB8Z298bWEpfGkyMzB8aWFjKCB8XFwtfFxcLyl8aWJyb3xpZGVhfGlnMDF8aWtvbXxpbTFrfGlubm98aXBhcXxpcmlzfGphKHR8dilhfGpicm98amVtdXxqaWdzfGtkZGl8a2VqaXxrZ3QoIHxcXC8pfGtsb258a3B0IHxrd2NcXC18a3lvKGN8ayl8bGUobm98eGkpfGxnKCBnfFxcLyhrfGx8dSl8NTB8NTR8XFwtW2Etd10pfGxpYnd8bHlueHxtMVxcLXd8bTNnYXxtNTBcXC98bWEodGV8dWl8eG8pfG1jKDAxfDIxfGNhKXxtXFwtY3J8bWUocmN8cmkpfG1pKG84fG9hfHRzKXxtbWVmfG1vKDAxfDAyfGJpfGRlfGRvfHQoXFwtfCB8b3x2KXx6eil8bXQoNTB8cDF8diApfG13YnB8bXl3YXxuMTBbMC0yXXxuMjBbMi0zXXxuMzAoMHwyKXxuNTAoMHwyfDUpfG43KDAoMHwxKXwxMCl8bmUoKGN8bSlcXC18b258dGZ8d2Z8d2d8d3QpfG5vayg2fGkpfG56cGh8bzJpbXxvcCh0aXx3dil8b3Jhbnxvd2cxfHA4MDB8cGFuKGF8ZHx0KXxwZHhnfHBnKDEzfFxcLShbMS04XXxjKSl8cGhpbHxwaXJlfHBsKGF5fHVjKXxwblxcLTJ8cG8oY2t8cnR8c2UpfHByb3h8cHNpb3xwdFxcLWd8cWFcXC1hfHFjKDA3fDEyfDIxfDMyfDYwfFxcLVsyLTddfGlcXC0pfHF0ZWt8cjM4MHxyNjAwfHJha3N8cmltOXxybyh2ZXx6byl8czU1XFwvfHNhKGdlfG1hfG1tfG1zfG55fHZhKXxzYygwMXxoXFwtfG9vfHBcXC0pfHNka1xcL3xzZShjKFxcLXwwfDEpfDQ3fG1jfG5kfHJpKXxzZ2hcXC18c2hhcnxzaWUoXFwtfG0pfHNrXFwtMHxzbCg0NXxpZCl8c20oYWx8YXJ8YjN8aXR8dDUpfHNvKGZ0fG55KXxzcCgwMXxoXFwtfHZcXC18diApfHN5KDAxfG1iKXx0MigxOHw1MCl8dDYoMDB8MTB8MTgpfHRhKGd0fGxrKXx0Y2xcXC18dGRnXFwtfHRlbChpfG0pfHRpbVxcLXx0XFwtbW98dG8ocGx8c2gpfHRzKDcwfG1cXC18bTN8bTUpfHR4XFwtOXx1cChcXC5ifGcxfHNpKXx1dHN0fHY0MDB8djc1MHx2ZXJpfHZpKHJnfHRlKXx2ayg0MHw1WzAtM118XFwtdil8dm00MHx2b2RhfHZ1bGN8dngoNTJ8NTN8NjB8NjF8NzB8ODB8ODF8ODN8ODV8OTgpfHczYyhcXC18ICl8d2ViY3x3aGl0fHdpKGcgfG5jfG53KXx3bWxifHdvbnV8eDcwMHx5YXNcXC18eW91cnx6ZXRvfHp0ZVxcLS9pLnRlc3QoYS5zdWJzdHIoMCw0KSkpY2hlY2sgPSB0cnVlfSkobmF2aWdhdG9yLnVzZXJBZ2VudHx8bmF2aWdhdG9yLnZlbmRvcnx8d2luZG93Lm9wZXJhKTtcclxuICByZXR1cm4gY2hlY2s7XHJcbn07XHJcblxyXG5VdGlsLmlzSU9TID0gZnVuY3Rpb24oKSB7XHJcbiAgcmV0dXJuIC8oaVBhZHxpUGhvbmV8aVBvZCkvZy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpO1xyXG59O1xyXG5cclxuVXRpbC5pc1NhZmFyaSA9IGZ1bmN0aW9uKCkge1xyXG4gIHJldHVybiAvXigoPyFjaHJvbWV8YW5kcm9pZCkuKSpzYWZhcmkvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpO1xyXG59O1xyXG5cclxuVXRpbC5jbG9uZU9iamVjdCA9IGZ1bmN0aW9uKG9iaikge1xyXG4gIHZhciBvdXQgPSB7fTtcclxuICBmb3IgKGtleSBpbiBvYmopIHtcclxuICAgIG91dFtrZXldID0gb2JqW2tleV07XHJcbiAgfVxyXG4gIHJldHVybiBvdXQ7XHJcbn07XHJcblxyXG5VdGlsLmhhc2hDb2RlID0gZnVuY3Rpb24ocykge1xyXG4gIHJldHVybiBzLnNwbGl0KFwiXCIpLnJlZHVjZShmdW5jdGlvbihhLGIpe2E9KChhPDw1KS1hKStiLmNoYXJDb2RlQXQoMCk7cmV0dXJuIGEmYX0sMCk7XHJcbn07XHJcblxyXG5VdGlsLmxvYWRUcmFja1NyYyA9IGZ1bmN0aW9uKGNvbnRleHQsIHNyYywgY2FsbGJhY2ssIG9wdF9wcm9ncmVzc0NhbGxiYWNrKSB7XHJcbiAgdmFyIHJlcXVlc3QgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuICByZXF1ZXN0Lm9wZW4oJ0dFVCcsIHNyYywgdHJ1ZSk7XHJcbiAgcmVxdWVzdC5yZXNwb25zZVR5cGUgPSAnYXJyYXlidWZmZXInO1xyXG5cclxuICAvLyBEZWNvZGUgYXN5bmNocm9ub3VzbHkuXHJcbiAgcmVxdWVzdC5vbmxvYWQgPSBmdW5jdGlvbigpIHtcclxuICAgIGNvbnRleHQuZGVjb2RlQXVkaW9EYXRhKHJlcXVlc3QucmVzcG9uc2UsIGZ1bmN0aW9uKGJ1ZmZlcikge1xyXG4gICAgICBjYWxsYmFjayhidWZmZXIpO1xyXG4gICAgfSwgZnVuY3Rpb24oZSkge1xyXG4gICAgICBjb25zb2xlLmVycm9yKGUpO1xyXG4gICAgfSk7XHJcbiAgfTtcclxuICBpZiAob3B0X3Byb2dyZXNzQ2FsbGJhY2spIHtcclxuICAgIHJlcXVlc3Qub25wcm9ncmVzcyA9IGZ1bmN0aW9uKGUpIHtcclxuICAgICAgdmFyIHBlcmNlbnQgPSBlLmxvYWRlZCAvIGUudG90YWw7XHJcbiAgICAgIG9wdF9wcm9ncmVzc0NhbGxiYWNrKHBlcmNlbnQpO1xyXG4gICAgfTtcclxuICB9XHJcbiAgcmVxdWVzdC5zZW5kKCk7XHJcbn07XHJcblxyXG5VdGlsLmlzUG93MiA9IGZ1bmN0aW9uKG4pIHtcclxuICByZXR1cm4gKG4gJiAobiAtIDEpKSA9PSAwO1xyXG59O1xyXG5cclxuVXRpbC5jYXBpdGFsaXplID0gZnVuY3Rpb24ocykge1xyXG4gIHJldHVybiBzLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgcy5zbGljZSgxKTtcclxufTtcclxuXHJcblV0aWwuaXNJRnJhbWUgPSBmdW5jdGlvbigpIHtcclxuICB0cnkge1xyXG4gICAgcmV0dXJuIHdpbmRvdy5zZWxmICE9PSB3aW5kb3cudG9wO1xyXG4gIH0gY2F0Y2ggKGUpIHtcclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH1cclxufTtcclxuXHJcbi8vIEZyb20gaHR0cDovL2dvby5nbC80V1gzdGdcclxuVXRpbC5nZXRRdWVyeVBhcmFtZXRlciA9IGZ1bmN0aW9uKG5hbWUpIHtcclxuICBuYW1lID0gbmFtZS5yZXBsYWNlKC9bXFxbXS8sIFwiXFxcXFtcIikucmVwbGFjZSgvW1xcXV0vLCBcIlxcXFxdXCIpO1xyXG4gIHZhciByZWdleCA9IG5ldyBSZWdFeHAoXCJbXFxcXD8mXVwiICsgbmFtZSArIFwiPShbXiYjXSopXCIpLFxyXG4gICAgICByZXN1bHRzID0gcmVnZXguZXhlYyhsb2NhdGlvbi5zZWFyY2gpO1xyXG4gIHJldHVybiByZXN1bHRzID09PSBudWxsID8gXCJcIiA6IGRlY29kZVVSSUNvbXBvbmVudChyZXN1bHRzWzFdLnJlcGxhY2UoL1xcKy9nLCBcIiBcIikpO1xyXG59O1xyXG5cclxuXHJcbi8vIEZyb20gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8xMTg3MTA3Ny9wcm9wZXItd2F5LXRvLWRldGVjdC13ZWJnbC1zdXBwb3J0LlxyXG5VdGlsLmlzV2ViR0xFbmFibGVkID0gZnVuY3Rpb24oKSB7XHJcbiAgdmFyIGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xyXG4gIHRyeSB7IGdsID0gY2FudmFzLmdldENvbnRleHQoXCJ3ZWJnbFwiKTsgfVxyXG4gIGNhdGNoICh4KSB7IGdsID0gbnVsbDsgfVxyXG5cclxuICBpZiAoZ2wgPT0gbnVsbCkge1xyXG4gICAgdHJ5IHsgZ2wgPSBjYW52YXMuZ2V0Q29udGV4dChcImV4cGVyaW1lbnRhbC13ZWJnbFwiKTsgZXhwZXJpbWVudGFsID0gdHJ1ZTsgfVxyXG4gICAgY2F0Y2ggKHgpIHsgZ2wgPSBudWxsOyB9XHJcbiAgfVxyXG4gIHJldHVybiAhIWdsO1xyXG59O1xyXG5cclxuVXRpbC5jbG9uZSA9IGZ1bmN0aW9uKG9iaikge1xyXG4gIHJldHVybiBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KG9iaikpO1xyXG59O1xyXG5cclxuLy8gRnJvbSBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzEwMTQwNjA0L2Zhc3Rlc3QtaHlwb3RlbnVzZS1pbi1qYXZhc2NyaXB0XHJcblV0aWwuaHlwb3QgPSBNYXRoLmh5cG90IHx8IGZ1bmN0aW9uKHgsIHkpIHtcclxuICByZXR1cm4gTWF0aC5zcXJ0KHgqeCArIHkqeSk7XHJcbn07XHJcblxyXG4vLyBGcm9tIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzE3NDQ3NzE4LzY5MzkzNFxyXG5VdGlsLmlzSUUxMSA9IGZ1bmN0aW9uKCkge1xyXG4gIHJldHVybiBuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9UcmlkZW50Lyk7XHJcbn07XHJcblxyXG5VdGlsLmdldFJlY3RDZW50ZXIgPSBmdW5jdGlvbihyZWN0KSB7XHJcbiAgcmV0dXJuIG5ldyBUSFJFRS5WZWN0b3IyKHJlY3QueCArIHJlY3Qud2lkdGgvMiwgcmVjdC55ICsgcmVjdC5oZWlnaHQvMik7XHJcbn07XHJcblxyXG5VdGlsLmdldFNjcmVlbldpZHRoID0gZnVuY3Rpb24oKSB7XHJcbiAgcmV0dXJuIE1hdGgubWF4KHdpbmRvdy5zY3JlZW4ud2lkdGgsIHdpbmRvdy5zY3JlZW4uaGVpZ2h0KSAqXHJcbiAgICAgIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvO1xyXG59O1xyXG5cclxuVXRpbC5nZXRTY3JlZW5IZWlnaHQgPSBmdW5jdGlvbigpIHtcclxuICByZXR1cm4gTWF0aC5taW4od2luZG93LnNjcmVlbi53aWR0aCwgd2luZG93LnNjcmVlbi5oZWlnaHQpICpcclxuICAgICAgd2luZG93LmRldmljZVBpeGVsUmF0aW87XHJcbn07XHJcblxyXG5VdGlsLmlzSU9TOU9yTGVzcyA9IGZ1bmN0aW9uKCkge1xyXG4gIGlmICghVXRpbC5pc0lPUygpKSB7XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfVxyXG4gIHZhciByZSA9IC8oaVBob25lfGlQYWR8aVBvZCkgT1MgKFtcXGRfXSspLztcclxuICB2YXIgaU9TVmVyc2lvbiA9IG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2gocmUpO1xyXG4gIGlmICghaU9TVmVyc2lvbikge1xyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH1cclxuICAvLyBHZXQgdGhlIGxhc3QgZ3JvdXAuXHJcbiAgdmFyIHZlcnNpb25TdHJpbmcgPSBpT1NWZXJzaW9uW2lPU1ZlcnNpb24ubGVuZ3RoIC0gMV07XHJcbiAgdmFyIG1ham9yVmVyc2lvbiA9IHBhcnNlRmxvYXQodmVyc2lvblN0cmluZyk7XHJcbiAgcmV0dXJuIG1ham9yVmVyc2lvbiA8PSA5O1xyXG59O1xyXG5cclxuVXRpbC5nZXRFeHRlbnNpb24gPSBmdW5jdGlvbih1cmwpIHtcclxuICByZXR1cm4gdXJsLnNwbGl0KCcuJykucG9wKCk7XHJcbn07XHJcblxyXG5VdGlsLmNyZWF0ZUdldFBhcmFtcyA9IGZ1bmN0aW9uKHBhcmFtcykge1xyXG4gIHZhciBvdXQgPSAnPyc7XHJcbiAgZm9yICh2YXIgayBpbiBwYXJhbXMpIHtcclxuICAgIHZhciBwYXJhbVN0cmluZyA9IGsgKyAnPScgKyBwYXJhbXNba10gKyAnJic7XHJcbiAgICBvdXQgKz0gcGFyYW1TdHJpbmc7XHJcbiAgfVxyXG4gIC8vIFJlbW92ZSB0aGUgdHJhaWxpbmcgYW1wZXJzYW5kLlxyXG4gIG91dC5zdWJzdHJpbmcoMCwgcGFyYW1zLmxlbmd0aCAtIDIpO1xyXG4gIHJldHVybiBvdXQ7XHJcbn07XHJcblxyXG5VdGlsLnNlbmRQYXJlbnRNZXNzYWdlID0gZnVuY3Rpb24obWVzc2FnZSkge1xyXG4gIGlmICh3aW5kb3cucGFyZW50KSB7XHJcbiAgICBwYXJlbnQucG9zdE1lc3NhZ2UobWVzc2FnZSwgJyonKTtcclxuICB9XHJcbn07XHJcblxyXG5VdGlsLnBhcnNlQm9vbGVhbiA9IGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgaWYgKHZhbHVlID09ICdmYWxzZScgfHwgdmFsdWUgPT0gMCkge1xyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH0gZWxzZSBpZiAodmFsdWUgPT0gJ3RydWUnIHx8IHZhbHVlID09IDEpIHtcclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH0gZWxzZSB7XHJcbiAgICByZXR1cm4gISF2YWx1ZTtcclxuICB9XHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IFV0aWw7XHJcbiJdfQ==
