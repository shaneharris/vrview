(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
// shim for using process in browser
var process = module.exports = {};

// cached from whatever global is present so that test runners that stub it
// don't break things.  But we need to wrap it in a try catch in case it is
// wrapped in strict mode code which doesn't define any globals.  It's inside a
// function because try/catches deoptimize in certain engines.

var cachedSetTimeout;
var cachedClearTimeout;

function defaultSetTimout() {
    throw new Error('setTimeout has not been defined');
}
function defaultClearTimeout () {
    throw new Error('clearTimeout has not been defined');
}
(function () {
    try {
        if (typeof setTimeout === 'function') {
            cachedSetTimeout = setTimeout;
        } else {
            cachedSetTimeout = defaultSetTimout;
        }
    } catch (e) {
        cachedSetTimeout = defaultSetTimout;
    }
    try {
        if (typeof clearTimeout === 'function') {
            cachedClearTimeout = clearTimeout;
        } else {
            cachedClearTimeout = defaultClearTimeout;
        }
    } catch (e) {
        cachedClearTimeout = defaultClearTimeout;
    }
} ())
function runTimeout(fun) {
    if (cachedSetTimeout === setTimeout) {
        //normal enviroments in sane situations
        return setTimeout(fun, 0);
    }
    // if setTimeout wasn't available but was latter defined
    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {
        cachedSetTimeout = setTimeout;
        return setTimeout(fun, 0);
    }
    try {
        // when when somebody has screwed with setTimeout but no I.E. maddness
        return cachedSetTimeout(fun, 0);
    } catch(e){
        try {
            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally
            return cachedSetTimeout.call(null, fun, 0);
        } catch(e){
            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error
            return cachedSetTimeout.call(this, fun, 0);
        }
    }


}
function runClearTimeout(marker) {
    if (cachedClearTimeout === clearTimeout) {
        //normal enviroments in sane situations
        return clearTimeout(marker);
    }
    // if clearTimeout wasn't available but was latter defined
    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {
        cachedClearTimeout = clearTimeout;
        return clearTimeout(marker);
    }
    try {
        // when when somebody has screwed with setTimeout but no I.E. maddness
        return cachedClearTimeout(marker);
    } catch (e){
        try {
            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally
            return cachedClearTimeout.call(null, marker);
        } catch (e){
            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.
            // Some versions of I.E. have different rules for clearTimeout vs setTimeout
            return cachedClearTimeout.call(this, marker);
        }
    }



}
var queue = [];
var draining = false;
var currentQueue;
var queueIndex = -1;

function cleanUpNextTick() {
    if (!draining || !currentQueue) {
        return;
    }
    draining = false;
    if (currentQueue.length) {
        queue = currentQueue.concat(queue);
    } else {
        queueIndex = -1;
    }
    if (queue.length) {
        drainQueue();
    }
}

function drainQueue() {
    if (draining) {
        return;
    }
    var timeout = runTimeout(cleanUpNextTick);
    draining = true;

    var len = queue.length;
    while(len) {
        currentQueue = queue;
        queue = [];
        while (++queueIndex < len) {
            if (currentQueue) {
                currentQueue[queueIndex].run();
            }
        }
        queueIndex = -1;
        len = queue.length;
    }
    currentQueue = null;
    draining = false;
    runClearTimeout(timeout);
}

process.nextTick = function (fun) {
    var args = new Array(arguments.length - 1);
    if (arguments.length > 1) {
        for (var i = 1; i < arguments.length; i++) {
            args[i - 1] = arguments[i];
        }
    }
    queue.push(new Item(fun, args));
    if (queue.length === 1 && !draining) {
        runTimeout(drainQueue);
    }
};

// v8 likes predictible objects
function Item(fun, array) {
    this.fun = fun;
    this.array = array;
}
Item.prototype.run = function () {
    this.fun.apply(null, this.array);
};
process.title = 'browser';
process.browser = true;
process.env = {};
process.argv = [];
process.version = ''; // empty string to avoid regexp issues
process.versions = {};

function noop() {}

process.on = noop;
process.addListener = noop;
process.once = noop;
process.off = noop;
process.removeListener = noop;
process.removeAllListeners = noop;
process.emit = noop;

process.binding = function (name) {
    throw new Error('process.binding is not supported');
};

process.cwd = function () { return '/' };
process.chdir = function (dir) {
    throw new Error('process.chdir is not supported');
};
process.umask = function() { return 0; };

},{}],2:[function(require,module,exports){
(function (process,global){
/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   3.3.1
 */

(function (global, factory) {
    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :
    typeof define === 'function' && define.amd ? define(factory) :
    (global.ES6Promise = factory());
}(this, (function () { 'use strict';

function objectOrFunction(x) {
  return typeof x === 'function' || typeof x === 'object' && x !== null;
}

function isFunction(x) {
  return typeof x === 'function';
}

var _isArray = undefined;
if (!Array.isArray) {
  _isArray = function (x) {
    return Object.prototype.toString.call(x) === '[object Array]';
  };
} else {
  _isArray = Array.isArray;
}

var isArray = _isArray;

var len = 0;
var vertxNext = undefined;
var customSchedulerFn = undefined;

var asap = function asap(callback, arg) {
  queue[len] = callback;
  queue[len + 1] = arg;
  len += 2;
  if (len === 2) {
    // If len is 2, that means that we need to schedule an async flush.
    // If additional callbacks are queued before the queue is flushed, they
    // will be processed by this flush that we are scheduling.
    if (customSchedulerFn) {
      customSchedulerFn(flush);
    } else {
      scheduleFlush();
    }
  }
};

function setScheduler(scheduleFn) {
  customSchedulerFn = scheduleFn;
}

function setAsap(asapFn) {
  asap = asapFn;
}

var browserWindow = typeof window !== 'undefined' ? window : undefined;
var browserGlobal = browserWindow || {};
var BrowserMutationObserver = browserGlobal.MutationObserver || browserGlobal.WebKitMutationObserver;
var isNode = typeof self === 'undefined' && typeof process !== 'undefined' && ({}).toString.call(process) === '[object process]';

// test for web worker but not in IE10
var isWorker = typeof Uint8ClampedArray !== 'undefined' && typeof importScripts !== 'undefined' && typeof MessageChannel !== 'undefined';

// node
function useNextTick() {
  // node version 0.10.x displays a deprecation warning when nextTick is used recursively
  // see https://github.com/cujojs/when/issues/410 for details
  return function () {
    return process.nextTick(flush);
  };
}

// vertx
function useVertxTimer() {
  return function () {
    vertxNext(flush);
  };
}

function useMutationObserver() {
  var iterations = 0;
  var observer = new BrowserMutationObserver(flush);
  var node = document.createTextNode('');
  observer.observe(node, { characterData: true });

  return function () {
    node.data = iterations = ++iterations % 2;
  };
}

// web worker
function useMessageChannel() {
  var channel = new MessageChannel();
  channel.port1.onmessage = flush;
  return function () {
    return channel.port2.postMessage(0);
  };
}

function useSetTimeout() {
  // Store setTimeout reference so es6-promise will be unaffected by
  // other code modifying setTimeout (like sinon.useFakeTimers())
  var globalSetTimeout = setTimeout;
  return function () {
    return globalSetTimeout(flush, 1);
  };
}

var queue = new Array(1000);
function flush() {
  for (var i = 0; i < len; i += 2) {
    var callback = queue[i];
    var arg = queue[i + 1];

    callback(arg);

    queue[i] = undefined;
    queue[i + 1] = undefined;
  }

  len = 0;
}

function attemptVertx() {
  try {
    var r = require;
    var vertx = r('vertx');
    vertxNext = vertx.runOnLoop || vertx.runOnContext;
    return useVertxTimer();
  } catch (e) {
    return useSetTimeout();
  }
}

var scheduleFlush = undefined;
// Decide what async method to use to triggering processing of queued callbacks:
if (isNode) {
  scheduleFlush = useNextTick();
} else if (BrowserMutationObserver) {
  scheduleFlush = useMutationObserver();
} else if (isWorker) {
  scheduleFlush = useMessageChannel();
} else if (browserWindow === undefined && typeof require === 'function') {
  scheduleFlush = attemptVertx();
} else {
  scheduleFlush = useSetTimeout();
}

function then(onFulfillment, onRejection) {
  var _arguments = arguments;

  var parent = this;

  var child = new this.constructor(noop);

  if (child[PROMISE_ID] === undefined) {
    makePromise(child);
  }

  var _state = parent._state;

  if (_state) {
    (function () {
      var callback = _arguments[_state - 1];
      asap(function () {
        return invokeCallback(_state, child, callback, parent._result);
      });
    })();
  } else {
    subscribe(parent, child, onFulfillment, onRejection);
  }

  return child;
}

/**
  `Promise.resolve` returns a promise that will become resolved with the
  passed `value`. It is shorthand for the following:

  ```javascript
  let promise = new Promise(function(resolve, reject){
    resolve(1);
  });

  promise.then(function(value){
    // value === 1
  });
  ```

  Instead of writing the above, your code now simply becomes the following:

  ```javascript
  let promise = Promise.resolve(1);

  promise.then(function(value){
    // value === 1
  });
  ```

  @method resolve
  @static
  @param {Any} value value that the returned promise will be resolved with
  Useful for tooling.
  @return {Promise} a promise that will become fulfilled with the given
  `value`
*/
function resolve(object) {
  /*jshint validthis:true */
  var Constructor = this;

  if (object && typeof object === 'object' && object.constructor === Constructor) {
    return object;
  }

  var promise = new Constructor(noop);
  _resolve(promise, object);
  return promise;
}

var PROMISE_ID = Math.random().toString(36).substring(16);

function noop() {}

var PENDING = void 0;
var FULFILLED = 1;
var REJECTED = 2;

var GET_THEN_ERROR = new ErrorObject();

function selfFulfillment() {
  return new TypeError("You cannot resolve a promise with itself");
}

function cannotReturnOwn() {
  return new TypeError('A promises callback cannot return that same promise.');
}

function getThen(promise) {
  try {
    return promise.then;
  } catch (error) {
    GET_THEN_ERROR.error = error;
    return GET_THEN_ERROR;
  }
}

function tryThen(then, value, fulfillmentHandler, rejectionHandler) {
  try {
    then.call(value, fulfillmentHandler, rejectionHandler);
  } catch (e) {
    return e;
  }
}

function handleForeignThenable(promise, thenable, then) {
  asap(function (promise) {
    var sealed = false;
    var error = tryThen(then, thenable, function (value) {
      if (sealed) {
        return;
      }
      sealed = true;
      if (thenable !== value) {
        _resolve(promise, value);
      } else {
        fulfill(promise, value);
      }
    }, function (reason) {
      if (sealed) {
        return;
      }
      sealed = true;

      _reject(promise, reason);
    }, 'Settle: ' + (promise._label || ' unknown promise'));

    if (!sealed && error) {
      sealed = true;
      _reject(promise, error);
    }
  }, promise);
}

function handleOwnThenable(promise, thenable) {
  if (thenable._state === FULFILLED) {
    fulfill(promise, thenable._result);
  } else if (thenable._state === REJECTED) {
    _reject(promise, thenable._result);
  } else {
    subscribe(thenable, undefined, function (value) {
      return _resolve(promise, value);
    }, function (reason) {
      return _reject(promise, reason);
    });
  }
}

function handleMaybeThenable(promise, maybeThenable, then$$) {
  if (maybeThenable.constructor === promise.constructor && then$$ === then && maybeThenable.constructor.resolve === resolve) {
    handleOwnThenable(promise, maybeThenable);
  } else {
    if (then$$ === GET_THEN_ERROR) {
      _reject(promise, GET_THEN_ERROR.error);
    } else if (then$$ === undefined) {
      fulfill(promise, maybeThenable);
    } else if (isFunction(then$$)) {
      handleForeignThenable(promise, maybeThenable, then$$);
    } else {
      fulfill(promise, maybeThenable);
    }
  }
}

function _resolve(promise, value) {
  if (promise === value) {
    _reject(promise, selfFulfillment());
  } else if (objectOrFunction(value)) {
    handleMaybeThenable(promise, value, getThen(value));
  } else {
    fulfill(promise, value);
  }
}

function publishRejection(promise) {
  if (promise._onerror) {
    promise._onerror(promise._result);
  }

  publish(promise);
}

function fulfill(promise, value) {
  if (promise._state !== PENDING) {
    return;
  }

  promise._result = value;
  promise._state = FULFILLED;

  if (promise._subscribers.length !== 0) {
    asap(publish, promise);
  }
}

function _reject(promise, reason) {
  if (promise._state !== PENDING) {
    return;
  }
  promise._state = REJECTED;
  promise._result = reason;

  asap(publishRejection, promise);
}

function subscribe(parent, child, onFulfillment, onRejection) {
  var _subscribers = parent._subscribers;
  var length = _subscribers.length;

  parent._onerror = null;

  _subscribers[length] = child;
  _subscribers[length + FULFILLED] = onFulfillment;
  _subscribers[length + REJECTED] = onRejection;

  if (length === 0 && parent._state) {
    asap(publish, parent);
  }
}

function publish(promise) {
  var subscribers = promise._subscribers;
  var settled = promise._state;

  if (subscribers.length === 0) {
    return;
  }

  var child = undefined,
      callback = undefined,
      detail = promise._result;

  for (var i = 0; i < subscribers.length; i += 3) {
    child = subscribers[i];
    callback = subscribers[i + settled];

    if (child) {
      invokeCallback(settled, child, callback, detail);
    } else {
      callback(detail);
    }
  }

  promise._subscribers.length = 0;
}

function ErrorObject() {
  this.error = null;
}

var TRY_CATCH_ERROR = new ErrorObject();

function tryCatch(callback, detail) {
  try {
    return callback(detail);
  } catch (e) {
    TRY_CATCH_ERROR.error = e;
    return TRY_CATCH_ERROR;
  }
}

function invokeCallback(settled, promise, callback, detail) {
  var hasCallback = isFunction(callback),
      value = undefined,
      error = undefined,
      succeeded = undefined,
      failed = undefined;

  if (hasCallback) {
    value = tryCatch(callback, detail);

    if (value === TRY_CATCH_ERROR) {
      failed = true;
      error = value.error;
      value = null;
    } else {
      succeeded = true;
    }

    if (promise === value) {
      _reject(promise, cannotReturnOwn());
      return;
    }
  } else {
    value = detail;
    succeeded = true;
  }

  if (promise._state !== PENDING) {
    // noop
  } else if (hasCallback && succeeded) {
      _resolve(promise, value);
    } else if (failed) {
      _reject(promise, error);
    } else if (settled === FULFILLED) {
      fulfill(promise, value);
    } else if (settled === REJECTED) {
      _reject(promise, value);
    }
}

function initializePromise(promise, resolver) {
  try {
    resolver(function resolvePromise(value) {
      _resolve(promise, value);
    }, function rejectPromise(reason) {
      _reject(promise, reason);
    });
  } catch (e) {
    _reject(promise, e);
  }
}

var id = 0;
function nextId() {
  return id++;
}

function makePromise(promise) {
  promise[PROMISE_ID] = id++;
  promise._state = undefined;
  promise._result = undefined;
  promise._subscribers = [];
}

function Enumerator(Constructor, input) {
  this._instanceConstructor = Constructor;
  this.promise = new Constructor(noop);

  if (!this.promise[PROMISE_ID]) {
    makePromise(this.promise);
  }

  if (isArray(input)) {
    this._input = input;
    this.length = input.length;
    this._remaining = input.length;

    this._result = new Array(this.length);

    if (this.length === 0) {
      fulfill(this.promise, this._result);
    } else {
      this.length = this.length || 0;
      this._enumerate();
      if (this._remaining === 0) {
        fulfill(this.promise, this._result);
      }
    }
  } else {
    _reject(this.promise, validationError());
  }
}

function validationError() {
  return new Error('Array Methods must be provided an Array');
};

Enumerator.prototype._enumerate = function () {
  var length = this.length;
  var _input = this._input;

  for (var i = 0; this._state === PENDING && i < length; i++) {
    this._eachEntry(_input[i], i);
  }
};

Enumerator.prototype._eachEntry = function (entry, i) {
  var c = this._instanceConstructor;
  var resolve$$ = c.resolve;

  if (resolve$$ === resolve) {
    var _then = getThen(entry);

    if (_then === then && entry._state !== PENDING) {
      this._settledAt(entry._state, i, entry._result);
    } else if (typeof _then !== 'function') {
      this._remaining--;
      this._result[i] = entry;
    } else if (c === Promise) {
      var promise = new c(noop);
      handleMaybeThenable(promise, entry, _then);
      this._willSettleAt(promise, i);
    } else {
      this._willSettleAt(new c(function (resolve$$) {
        return resolve$$(entry);
      }), i);
    }
  } else {
    this._willSettleAt(resolve$$(entry), i);
  }
};

Enumerator.prototype._settledAt = function (state, i, value) {
  var promise = this.promise;

  if (promise._state === PENDING) {
    this._remaining--;

    if (state === REJECTED) {
      _reject(promise, value);
    } else {
      this._result[i] = value;
    }
  }

  if (this._remaining === 0) {
    fulfill(promise, this._result);
  }
};

Enumerator.prototype._willSettleAt = function (promise, i) {
  var enumerator = this;

  subscribe(promise, undefined, function (value) {
    return enumerator._settledAt(FULFILLED, i, value);
  }, function (reason) {
    return enumerator._settledAt(REJECTED, i, reason);
  });
};

/**
  `Promise.all` accepts an array of promises, and returns a new promise which
  is fulfilled with an array of fulfillment values for the passed promises, or
  rejected with the reason of the first passed promise to be rejected. It casts all
  elements of the passed iterable to promises as it runs this algorithm.

  Example:

  ```javascript
  let promise1 = resolve(1);
  let promise2 = resolve(2);
  let promise3 = resolve(3);
  let promises = [ promise1, promise2, promise3 ];

  Promise.all(promises).then(function(array){
    // The array here would be [ 1, 2, 3 ];
  });
  ```

  If any of the `promises` given to `all` are rejected, the first promise
  that is rejected will be given as an argument to the returned promises's
  rejection handler. For example:

  Example:

  ```javascript
  let promise1 = resolve(1);
  let promise2 = reject(new Error("2"));
  let promise3 = reject(new Error("3"));
  let promises = [ promise1, promise2, promise3 ];

  Promise.all(promises).then(function(array){
    // Code here never runs because there are rejected promises!
  }, function(error) {
    // error.message === "2"
  });
  ```

  @method all
  @static
  @param {Array} entries array of promises
  @param {String} label optional string for labeling the promise.
  Useful for tooling.
  @return {Promise} promise that is fulfilled when all `promises` have been
  fulfilled, or rejected if any of them become rejected.
  @static
*/
function all(entries) {
  return new Enumerator(this, entries).promise;
}

/**
  `Promise.race` returns a new promise which is settled in the same way as the
  first passed promise to settle.

  Example:

  ```javascript
  let promise1 = new Promise(function(resolve, reject){
    setTimeout(function(){
      resolve('promise 1');
    }, 200);
  });

  let promise2 = new Promise(function(resolve, reject){
    setTimeout(function(){
      resolve('promise 2');
    }, 100);
  });

  Promise.race([promise1, promise2]).then(function(result){
    // result === 'promise 2' because it was resolved before promise1
    // was resolved.
  });
  ```

  `Promise.race` is deterministic in that only the state of the first
  settled promise matters. For example, even if other promises given to the
  `promises` array argument are resolved, but the first settled promise has
  become rejected before the other promises became fulfilled, the returned
  promise will become rejected:

  ```javascript
  let promise1 = new Promise(function(resolve, reject){
    setTimeout(function(){
      resolve('promise 1');
    }, 200);
  });

  let promise2 = new Promise(function(resolve, reject){
    setTimeout(function(){
      reject(new Error('promise 2'));
    }, 100);
  });

  Promise.race([promise1, promise2]).then(function(result){
    // Code here never runs
  }, function(reason){
    // reason.message === 'promise 2' because promise 2 became rejected before
    // promise 1 became fulfilled
  });
  ```

  An example real-world use case is implementing timeouts:

  ```javascript
  Promise.race([ajax('foo.json'), timeout(5000)])
  ```

  @method race
  @static
  @param {Array} promises array of promises to observe
  Useful for tooling.
  @return {Promise} a promise which settles in the same way as the first passed
  promise to settle.
*/
function race(entries) {
  /*jshint validthis:true */
  var Constructor = this;

  if (!isArray(entries)) {
    return new Constructor(function (_, reject) {
      return reject(new TypeError('You must pass an array to race.'));
    });
  } else {
    return new Constructor(function (resolve, reject) {
      var length = entries.length;
      for (var i = 0; i < length; i++) {
        Constructor.resolve(entries[i]).then(resolve, reject);
      }
    });
  }
}

/**
  `Promise.reject` returns a promise rejected with the passed `reason`.
  It is shorthand for the following:

  ```javascript
  let promise = new Promise(function(resolve, reject){
    reject(new Error('WHOOPS'));
  });

  promise.then(function(value){
    // Code here doesn't run because the promise is rejected!
  }, function(reason){
    // reason.message === 'WHOOPS'
  });
  ```

  Instead of writing the above, your code now simply becomes the following:

  ```javascript
  let promise = Promise.reject(new Error('WHOOPS'));

  promise.then(function(value){
    // Code here doesn't run because the promise is rejected!
  }, function(reason){
    // reason.message === 'WHOOPS'
  });
  ```

  @method reject
  @static
  @param {Any} reason value that the returned promise will be rejected with.
  Useful for tooling.
  @return {Promise} a promise rejected with the given `reason`.
*/
function reject(reason) {
  /*jshint validthis:true */
  var Constructor = this;
  var promise = new Constructor(noop);
  _reject(promise, reason);
  return promise;
}

function needsResolver() {
  throw new TypeError('You must pass a resolver function as the first argument to the promise constructor');
}

function needsNew() {
  throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");
}

/**
  Promise objects represent the eventual result of an asynchronous operation. The
  primary way of interacting with a promise is through its `then` method, which
  registers callbacks to receive either a promise's eventual value or the reason
  why the promise cannot be fulfilled.

  Terminology
  -----------

  - `promise` is an object or function with a `then` method whose behavior conforms to this specification.
  - `thenable` is an object or function that defines a `then` method.
  - `value` is any legal JavaScript value (including undefined, a thenable, or a promise).
  - `exception` is a value that is thrown using the throw statement.
  - `reason` is a value that indicates why a promise was rejected.
  - `settled` the final resting state of a promise, fulfilled or rejected.

  A promise can be in one of three states: pending, fulfilled, or rejected.

  Promises that are fulfilled have a fulfillment value and are in the fulfilled
  state.  Promises that are rejected have a rejection reason and are in the
  rejected state.  A fulfillment value is never a thenable.

  Promises can also be said to *resolve* a value.  If this value is also a
  promise, then the original promise's settled state will match the value's
  settled state.  So a promise that *resolves* a promise that rejects will
  itself reject, and a promise that *resolves* a promise that fulfills will
  itself fulfill.


  Basic Usage:
  ------------

  ```js
  let promise = new Promise(function(resolve, reject) {
    // on success
    resolve(value);

    // on failure
    reject(reason);
  });

  promise.then(function(value) {
    // on fulfillment
  }, function(reason) {
    // on rejection
  });
  ```

  Advanced Usage:
  ---------------

  Promises shine when abstracting away asynchronous interactions such as
  `XMLHttpRequest`s.

  ```js
  function getJSON(url) {
    return new Promise(function(resolve, reject){
      let xhr = new XMLHttpRequest();

      xhr.open('GET', url);
      xhr.onreadystatechange = handler;
      xhr.responseType = 'json';
      xhr.setRequestHeader('Accept', 'application/json');
      xhr.send();

      function handler() {
        if (this.readyState === this.DONE) {
          if (this.status === 200) {
            resolve(this.response);
          } else {
            reject(new Error('getJSON: `' + url + '` failed with status: [' + this.status + ']'));
          }
        }
      };
    });
  }

  getJSON('/posts.json').then(function(json) {
    // on fulfillment
  }, function(reason) {
    // on rejection
  });
  ```

  Unlike callbacks, promises are great composable primitives.

  ```js
  Promise.all([
    getJSON('/posts'),
    getJSON('/comments')
  ]).then(function(values){
    values[0] // => postsJSON
    values[1] // => commentsJSON

    return values;
  });
  ```

  @class Promise
  @param {function} resolver
  Useful for tooling.
  @constructor
*/
function Promise(resolver) {
  this[PROMISE_ID] = nextId();
  this._result = this._state = undefined;
  this._subscribers = [];

  if (noop !== resolver) {
    typeof resolver !== 'function' && needsResolver();
    this instanceof Promise ? initializePromise(this, resolver) : needsNew();
  }
}

Promise.all = all;
Promise.race = race;
Promise.resolve = resolve;
Promise.reject = reject;
Promise._setScheduler = setScheduler;
Promise._setAsap = setAsap;
Promise._asap = asap;

Promise.prototype = {
  constructor: Promise,

  /**
    The primary way of interacting with a promise is through its `then` method,
    which registers callbacks to receive either a promise's eventual value or the
    reason why the promise cannot be fulfilled.
  
    ```js
    findUser().then(function(user){
      // user is available
    }, function(reason){
      // user is unavailable, and you are given the reason why
    });
    ```
  
    Chaining
    --------
  
    The return value of `then` is itself a promise.  This second, 'downstream'
    promise is resolved with the return value of the first promise's fulfillment
    or rejection handler, or rejected if the handler throws an exception.
  
    ```js
    findUser().then(function (user) {
      return user.name;
    }, function (reason) {
      return 'default name';
    }).then(function (userName) {
      // If `findUser` fulfilled, `userName` will be the user's name, otherwise it
      // will be `'default name'`
    });
  
    findUser().then(function (user) {
      throw new Error('Found user, but still unhappy');
    }, function (reason) {
      throw new Error('`findUser` rejected and we're unhappy');
    }).then(function (value) {
      // never reached
    }, function (reason) {
      // if `findUser` fulfilled, `reason` will be 'Found user, but still unhappy'.
      // If `findUser` rejected, `reason` will be '`findUser` rejected and we're unhappy'.
    });
    ```
    If the downstream promise does not specify a rejection handler, rejection reasons will be propagated further downstream.
  
    ```js
    findUser().then(function (user) {
      throw new PedagogicalException('Upstream error');
    }).then(function (value) {
      // never reached
    }).then(function (value) {
      // never reached
    }, function (reason) {
      // The `PedgagocialException` is propagated all the way down to here
    });
    ```
  
    Assimilation
    ------------
  
    Sometimes the value you want to propagate to a downstream promise can only be
    retrieved asynchronously. This can be achieved by returning a promise in the
    fulfillment or rejection handler. The downstream promise will then be pending
    until the returned promise is settled. This is called *assimilation*.
  
    ```js
    findUser().then(function (user) {
      return findCommentsByAuthor(user);
    }).then(function (comments) {
      // The user's comments are now available
    });
    ```
  
    If the assimliated promise rejects, then the downstream promise will also reject.
  
    ```js
    findUser().then(function (user) {
      return findCommentsByAuthor(user);
    }).then(function (comments) {
      // If `findCommentsByAuthor` fulfills, we'll have the value here
    }, function (reason) {
      // If `findCommentsByAuthor` rejects, we'll have the reason here
    });
    ```
  
    Simple Example
    --------------
  
    Synchronous Example
  
    ```javascript
    let result;
  
    try {
      result = findResult();
      // success
    } catch(reason) {
      // failure
    }
    ```
  
    Errback Example
  
    ```js
    findResult(function(result, err){
      if (err) {
        // failure
      } else {
        // success
      }
    });
    ```
  
    Promise Example;
  
    ```javascript
    findResult().then(function(result){
      // success
    }, function(reason){
      // failure
    });
    ```
  
    Advanced Example
    --------------
  
    Synchronous Example
  
    ```javascript
    let author, books;
  
    try {
      author = findAuthor();
      books  = findBooksByAuthor(author);
      // success
    } catch(reason) {
      // failure
    }
    ```
  
    Errback Example
  
    ```js
  
    function foundBooks(books) {
  
    }
  
    function failure(reason) {
  
    }
  
    findAuthor(function(author, err){
      if (err) {
        failure(err);
        // failure
      } else {
        try {
          findBoooksByAuthor(author, function(books, err) {
            if (err) {
              failure(err);
            } else {
              try {
                foundBooks(books);
              } catch(reason) {
                failure(reason);
              }
            }
          });
        } catch(error) {
          failure(err);
        }
        // success
      }
    });
    ```
  
    Promise Example;
  
    ```javascript
    findAuthor().
      then(findBooksByAuthor).
      then(function(books){
        // found books
    }).catch(function(reason){
      // something went wrong
    });
    ```
  
    @method then
    @param {Function} onFulfilled
    @param {Function} onRejected
    Useful for tooling.
    @return {Promise}
  */
  then: then,

  /**
    `catch` is simply sugar for `then(undefined, onRejection)` which makes it the same
    as the catch block of a try/catch statement.
  
    ```js
    function findAuthor(){
      throw new Error('couldn't find that author');
    }
  
    // synchronous
    try {
      findAuthor();
    } catch(reason) {
      // something went wrong
    }
  
    // async with promises
    findAuthor().catch(function(reason){
      // something went wrong
    });
    ```
  
    @method catch
    @param {Function} onRejection
    Useful for tooling.
    @return {Promise}
  */
  'catch': function _catch(onRejection) {
    return this.then(null, onRejection);
  }
};

function polyfill() {
    var local = undefined;

    if (typeof global !== 'undefined') {
        local = global;
    } else if (typeof self !== 'undefined') {
        local = self;
    } else {
        try {
            local = Function('return this')();
        } catch (e) {
            throw new Error('polyfill failed because global object is unavailable in this environment');
        }
    }

    var P = local.Promise;

    if (P) {
        var promiseToString = null;
        try {
            promiseToString = Object.prototype.toString.call(P.resolve());
        } catch (e) {
            // silently ignored
        }

        if (promiseToString === '[object Promise]' && !P.cast) {
            return;
        }
    }

    local.Promise = Promise;
}

polyfill();
// Strange compat..
Promise.polyfill = polyfill;
Promise.Promise = Promise;

return Promise;

})));

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"_process":1}],3:[function(require,module,exports){
'use strict';

var has = Object.prototype.hasOwnProperty;

//
// We store our EE objects in a plain object whose properties are event names.
// If `Object.create(null)` is not supported we prefix the event names with a
// `~` to make sure that the built-in object properties are not overridden or
// used as an attack vector.
// We also assume that `Object.create(null)` is available when the event name
// is an ES6 Symbol.
//
var prefix = typeof Object.create !== 'function' ? '~' : false;

/**
 * Representation of a single EventEmitter function.
 *
 * @param {Function} fn Event handler to be called.
 * @param {Mixed} context Context for function execution.
 * @param {Boolean} [once=false] Only emit once
 * @api private
 */
function EE(fn, context, once) {
  this.fn = fn;
  this.context = context;
  this.once = once || false;
}

/**
 * Minimal EventEmitter interface that is molded against the Node.js
 * EventEmitter interface.
 *
 * @constructor
 * @api public
 */
function EventEmitter() { /* Nothing to set */ }

/**
 * Hold the assigned EventEmitters by name.
 *
 * @type {Object}
 * @private
 */
EventEmitter.prototype._events = undefined;

/**
 * Return an array listing the events for which the emitter has registered
 * listeners.
 *
 * @returns {Array}
 * @api public
 */
EventEmitter.prototype.eventNames = function eventNames() {
  var events = this._events
    , names = []
    , name;

  if (!events) return names;

  for (name in events) {
    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);
  }

  if (Object.getOwnPropertySymbols) {
    return names.concat(Object.getOwnPropertySymbols(events));
  }

  return names;
};

/**
 * Return a list of assigned event listeners.
 *
 * @param {String} event The events that should be listed.
 * @param {Boolean} exists We only need to know if there are listeners.
 * @returns {Array|Boolean}
 * @api public
 */
EventEmitter.prototype.listeners = function listeners(event, exists) {
  var evt = prefix ? prefix + event : event
    , available = this._events && this._events[evt];

  if (exists) return !!available;
  if (!available) return [];
  if (available.fn) return [available.fn];

  for (var i = 0, l = available.length, ee = new Array(l); i < l; i++) {
    ee[i] = available[i].fn;
  }

  return ee;
};

/**
 * Emit an event to all registered event listeners.
 *
 * @param {String} event The name of the event.
 * @returns {Boolean} Indication if we've emitted an event.
 * @api public
 */
EventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {
  var evt = prefix ? prefix + event : event;

  if (!this._events || !this._events[evt]) return false;

  var listeners = this._events[evt]
    , len = arguments.length
    , args
    , i;

  if ('function' === typeof listeners.fn) {
    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);

    switch (len) {
      case 1: return listeners.fn.call(listeners.context), true;
      case 2: return listeners.fn.call(listeners.context, a1), true;
      case 3: return listeners.fn.call(listeners.context, a1, a2), true;
      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;
      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;
      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;
    }

    for (i = 1, args = new Array(len -1); i < len; i++) {
      args[i - 1] = arguments[i];
    }

    listeners.fn.apply(listeners.context, args);
  } else {
    var length = listeners.length
      , j;

    for (i = 0; i < length; i++) {
      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);

      switch (len) {
        case 1: listeners[i].fn.call(listeners[i].context); break;
        case 2: listeners[i].fn.call(listeners[i].context, a1); break;
        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;
        default:
          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {
            args[j - 1] = arguments[j];
          }

          listeners[i].fn.apply(listeners[i].context, args);
      }
    }
  }

  return true;
};

/**
 * Register a new EventListener for the given event.
 *
 * @param {String} event Name of the event.
 * @param {Function} fn Callback function.
 * @param {Mixed} [context=this] The context of the function.
 * @api public
 */
EventEmitter.prototype.on = function on(event, fn, context) {
  var listener = new EE(fn, context || this)
    , evt = prefix ? prefix + event : event;

  if (!this._events) this._events = prefix ? {} : Object.create(null);
  if (!this._events[evt]) this._events[evt] = listener;
  else {
    if (!this._events[evt].fn) this._events[evt].push(listener);
    else this._events[evt] = [
      this._events[evt], listener
    ];
  }

  return this;
};

/**
 * Add an EventListener that's only called once.
 *
 * @param {String} event Name of the event.
 * @param {Function} fn Callback function.
 * @param {Mixed} [context=this] The context of the function.
 * @api public
 */
EventEmitter.prototype.once = function once(event, fn, context) {
  var listener = new EE(fn, context || this, true)
    , evt = prefix ? prefix + event : event;

  if (!this._events) this._events = prefix ? {} : Object.create(null);
  if (!this._events[evt]) this._events[evt] = listener;
  else {
    if (!this._events[evt].fn) this._events[evt].push(listener);
    else this._events[evt] = [
      this._events[evt], listener
    ];
  }

  return this;
};

/**
 * Remove event listeners.
 *
 * @param {String} event The event we want to remove.
 * @param {Function} fn The listener that we need to find.
 * @param {Mixed} context Only remove listeners matching this context.
 * @param {Boolean} once Only remove once listeners.
 * @api public
 */
EventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {
  var evt = prefix ? prefix + event : event;

  if (!this._events || !this._events[evt]) return this;

  var listeners = this._events[evt]
    , events = [];

  if (fn) {
    if (listeners.fn) {
      if (
           listeners.fn !== fn
        || (once && !listeners.once)
        || (context && listeners.context !== context)
      ) {
        events.push(listeners);
      }
    } else {
      for (var i = 0, length = listeners.length; i < length; i++) {
        if (
             listeners[i].fn !== fn
          || (once && !listeners[i].once)
          || (context && listeners[i].context !== context)
        ) {
          events.push(listeners[i]);
        }
      }
    }
  }

  //
  // Reset the array, or remove it completely if we have no more listeners.
  //
  if (events.length) {
    this._events[evt] = events.length === 1 ? events[0] : events;
  } else {
    delete this._events[evt];
  }

  return this;
};

/**
 * Remove all listeners or only the listeners for the specified event.
 *
 * @param {String} event The event want to remove all listeners for.
 * @api public
 */
EventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {
  if (!this._events) return this;

  if (event) delete this._events[prefix ? prefix + event : event];
  else this._events = prefix ? {} : Object.create(null);

  return this;
};

//
// Alias methods names because people roll like that.
//
EventEmitter.prototype.off = EventEmitter.prototype.removeListener;
EventEmitter.prototype.addListener = EventEmitter.prototype.on;

//
// This function doesn't apply anymore.
//
EventEmitter.prototype.setMaxListeners = function setMaxListeners() {
  return this;
};

//
// Expose the prefix.
//
EventEmitter.prefixed = prefix;

//
// Expose the module.
//
if ('undefined' !== typeof module) {
  module.exports = EventEmitter;
}

},{}],4:[function(require,module,exports){
(function(){var g={};
(function(window){var k,aa=this;aa.bd=!0;function l(a,b){var c=a.split("."),d=aa;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)c.length||void 0===b?d[e]?d=d[e]:d=d[e]={}:d[e]=b}function ba(a){var b=p;function c(){}c.prototype=b.prototype;a.jd=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.cd=function(a,c,f){return b.prototype[c].apply(a,Array.prototype.slice.call(arguments,2))}};/*

 Copyright 2016 Google Inc.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function ca(a){this.c=Math.exp(Math.log(.5)/a);this.a=this.b=0}function da(a,b,c){var d=Math.pow(a.c,b);a.b=c*(1-d)+d*a.b;a.a+=b}function ea(a){return a.b/(1-Math.pow(a.c,a.a))};function fa(){this.a=new ca(3);this.c=new ca(10);this.b=5E5}function ga(a){return.5>a.a.a?a.b:Math.min(ea(a.a),ea(a.c))};function ha(){}function ia(){};function ja(){this.h=null;this.f=!1;this.c=new fa;this.g={};this.a={};this.i=!1;this.b=null}l("shaka.abr.SimpleAbrManager",ja);k=ja.prototype;k.stop=function(){this.h=null;this.f=!1;this.g={};this.a={};this.b=null};k.init=function(a){this.h=a};
k.chooseStreams=function(a){for(var b in a)this.g[b]=a[b];b={};if("audio"in a){var c=ka(this);c?(b.audio=c,this.a.audio=c):delete this.a.audio}"video"in a&&((c=la(this))?(b.video=c,this.a.video=c):delete this.a.video);"text"in a&&(b.text=a.text.streams[0]);this.b=Date.now();return b};k.enable=function(){this.f=!0};k.disable=function(){this.f=!1};
k.segmentDownloaded=function(a,b,c){var d=this.c;a=b-a;65536>c||(a=Math.max(a,50),c=8E3*c/a,a/=1E3,da(d.a,a,c),da(d.c,a,c));if(null!=this.b&&this.f)a:{d=Date.now()-this.b;if(!this.i){if(4E3>d)break a;this.i=!0}else if(8E3>d)break a;d=this.a.video;c={};if(a=ka(this))c.audio=a,this.a.audio=a;if(a=la(this))c.video=a,this.a.video=a;this.b=Date.now();a=void 0;d&&c.video&&c.video.bandwidth>d.bandwidth&&(a=10);this.h(c,a)}};k.getBandwidthEstimate=function(){return ga(this.c)};
k.setDefaultEstimate=function(a){this.c.b=a};function ka(a){a=a.g.audio;if(!a)return null;a=ma(a);return a[Math.floor(a.length/2)]}function la(a){var b=a.g.video;if(!b)return null;var b=ma(b),c=a.a.audio,c=c&&c.bandwidth||0;a=ga(a.c);for(var d=b[0],e=0;e<b.length;++e){var f=b[e],g=e+1<b.length?b[e+1]:{bandwidth:Infinity};f.bandwidth&&(g=(g.bandwidth+c)/.85,a>=(f.bandwidth+c)/.95&&a<=g&&(d=f))}return d}
function ma(a){return a.streams.slice(0).filter(function(a){return a.allowedByApplication&&a.allowedByKeySystem}).sort(function(a,c){return a.bandwidth-c.bandwidth})};var na=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/;function oa(a){var b;a instanceof oa?(pa(this,a.R),this.la=a.la,this.T=a.T,qa(this,a.wa),this.O=a.O,ra(this,sa(a.a)),this.ea=a.ea):a&&(b=String(a).match(na))?(pa(this,b[1]||"",!0),this.la=ta(b[2]||""),this.T=ta(b[3]||"",!0),qa(this,b[4]),this.O=ta(b[5]||"",!0),ra(this,b[6]||"",!0),this.ea=ta(b[7]||"")):this.a=new ua(null)}k=oa.prototype;k.R="";k.la="";k.T="";k.wa=null;k.O="";k.ea="";
k.toString=function(){var a=[],b=this.R;b&&a.push(va(b,wa,!0),":");if(b=this.T){a.push("//");var c=this.la;c&&a.push(va(c,wa,!0),"@");a.push(encodeURIComponent(b).replace(/%25([0-9a-fA-F]{2})/g,"%$1"));b=this.wa;null!=b&&a.push(":",String(b))}if(b=this.O)this.T&&"/"!=b.charAt(0)&&a.push("/"),a.push(va(b,"/"==b.charAt(0)?xa:ya,!0));(b=this.a.toString())&&a.push("?",b);(b=this.ea)&&a.push("#",va(b,za));return a.join("")};
k.resolve=function(a){var b=new oa(this);"data"===b.R&&(b=new oa);var c=!!a.R;c?pa(b,a.R):c=!!a.la;c?b.la=a.la:c=!!a.T;c?b.T=a.T:c=null!=a.wa;var d=a.O;if(c)qa(b,a.wa);else if(c=!!a.O){if("/"!=d.charAt(0))if(this.T&&!this.O)d="/"+d;else{var e=b.O.lastIndexOf("/");-1!=e&&(d=b.O.substr(0,e+1)+d)}if(".."==d||"."==d)d="";else if(-1!=d.indexOf("./")||-1!=d.indexOf("/.")){for(var e=!d.lastIndexOf("/",0),d=d.split("/"),f=[],g=0;g<d.length;){var h=d[g++];"."==h?e&&g==d.length&&f.push(""):".."==h?((1<f.length||
1==f.length&&""!=f[0])&&f.pop(),e&&g==d.length&&f.push("")):(f.push(h),e=!0)}d=f.join("/")}}c?b.O=d:c=""!==a.a.toString();c?ra(b,sa(a.a)):c=!!a.ea;c&&(b.ea=a.ea);return b};function pa(a,b,c){a.R=c?ta(b,!0):b;a.R&&(a.R=a.R.replace(/:$/,""))}function qa(a,b){if(b){b=Number(b);if(isNaN(b)||0>b)throw Error("Bad port number "+b);a.wa=b}else a.wa=null}function ra(a,b,c){b instanceof ua?a.a=b:(c||(b=va(b,Aa)),a.a=new ua(b))}function ta(a,b){return a?b?decodeURI(a):decodeURIComponent(a):""}
function va(a,b,c){return"string"==typeof a?(a=encodeURI(a).replace(b,Ba),c&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function Ba(a){a=a.charCodeAt(0);return"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var wa=/[#\/\?@]/g,ya=/[\#\?:]/g,xa=/[\#\?]/g,Aa=/[\#\?@]/g,za=/#/g;function ua(a){this.b=a||null}ua.prototype.a=null;ua.prototype.c=null;
ua.prototype.toString=function(){if(this.b)return this.b;if(!this.a)return"";var a=[],b;for(b in this.a)for(var c=encodeURIComponent(b),d=this.a[b],e=0;e<d.length;e++){var f=c;""!==d[e]&&(f+="="+encodeURIComponent(d[e]));a.push(f)}return this.b=a.join("&")};function sa(a){var b=new ua;b.b=a.b;if(a.a){var c={},d;for(d in a.a)c[d]=a.a[d].concat();b.a=c;b.c=a.c}return b};function q(a,b,c){this.category=a;this.code=b;this.data=Array.prototype.slice.call(arguments,2)}l("shaka.util.Error",q);q.prototype.toString=function(){return"shaka.util.Error "+JSON.stringify(this,null,"  ")};q.Category={NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,CAST:8,STORAGE:9};
q.Code={UNSUPPORTED_SCHEME:1E3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,UNKNOWN_DATA_URI_ENCODING:1005,INVALID_TEXT_HEADER:2E3,INVALID_TEXT_CUE:2001,INVALID_TEXT_SETTINGS:2002,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_TTML:2006,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,BUFFER_READ_OUT_OF_BOUNDS:3E3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,EBML_BAD_FLOATING_POINT_SIZE:3003,MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,
MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,UNABLE_TO_GUESS_MANIFEST_TYPE:4E3,DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,
DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,UNPLAYABLE_PERIOD:4011,RESTRICTIONS_CANNOT_BE_MET:4012,INTERNAL_ERROR_KEY_STATUS:4013,INVALID_STREAMS_CHOSEN:5005,NO_RECOGNIZED_KEY_SYSTEMS:6E3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,
FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,LOAD_INTERRUPTED:7E3,CAST_API_UNAVAILABLE:8E3,NO_CAST_RECEIVERS:8001,ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,INDEXED_DB_NOT_SUPPORTED:9E3,INDEXED_DB_ERROR:9001,OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,
MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,STORE_ALREADY_IN_PROGRESS:9006,NO_INIT_DATA_FOR_OFFLINE:9007};function Ca(a,b){return a.reduce(function(a,b,e){return b["catch"](a.bind(null,e))}.bind(null,b),Promise.reject())}function t(a,b){return a.concat(b)}function v(){}function Da(a){return null!=a}function Ea(a){return function(b){return b!=a}};function w(){var a,b,c=new Promise(function(c,e){a=c;b=e});c.resolve=a;c.reject=b;return c};function y(a){this.f=!1;this.a=[];this.b=[];this.c=[];this.h=a||null}l("shaka.net.NetworkingEngine.RequestType",{MANIFEST:0,SEGMENT:1,LICENSE:2});var Fa={};l("shaka.net.NetworkingEngine.registerScheme",function(a,b){Fa[a]=b});l("shaka.net.NetworkingEngine.unregisterScheme",function(a){delete Fa[a]});y.prototype.vc=function(a){this.b.push(a)};y.prototype.registerRequestFilter=y.prototype.vc;y.prototype.Xc=function(a){var b=this.b;a=b.indexOf(a);0<=a&&b.splice(a,1)};
y.prototype.unregisterRequestFilter=y.prototype.Xc;y.prototype.Ob=function(){this.b=[]};y.prototype.clearAllRequestFilters=y.prototype.Ob;y.prototype.yb=function(a){this.c.push(a)};y.prototype.registerResponseFilter=y.prototype.yb;y.prototype.Jb=function(a){var b=this.c;a=b.indexOf(a);0<=a&&b.splice(a,1)};y.prototype.unregisterResponseFilter=y.prototype.Jb;y.prototype.Pb=function(){this.c=[]};y.prototype.clearAllResponseFilters=y.prototype.Pb;
function Ga(){return{maxAttempts:2,baseDelay:1E3,backoffFactor:2,fuzzFactor:.5,timeout:0}}function Ha(a,b){return{uris:a,method:"GET",body:null,headers:{},allowCrossSiteCredentials:!1,retryParameters:b}}y.prototype.o=function(){this.f=!0;this.b=[];this.c=[];for(var a=[],b=0;b<this.a.length;++b)a.push(this.a[b]["catch"](v));return Promise.all(a)};
y.prototype.request=function(a,b){if(this.f)return Promise.reject();for(var c=Date.now(),d=this.b,e=0;e<d.length;e++)try{d[e](a,b)}catch(m){return Promise.reject(m)}for(var e=b.retryParameters||{},d=e.maxAttempts||1,f=e.backoffFactor||2,g=null==e.baseDelay?1E3:e.baseDelay,h=this.g(a,b,0),e=1;e<d;e++)h=h["catch"](this.i.bind(this,a,b,g,e%b.uris.length)),g*=f;this.a.push(h);return h.then(function(b){this.a.splice(this.a.indexOf(h),1);var d=Date.now();this.h&&1==a&&this.h(c,d,b.data.byteLength);return b}.bind(this))["catch"](function(a){this.a.splice(this.a.indexOf(h),
1);return Promise.reject(a)}.bind(this))};y.prototype.request=y.prototype.request;y.prototype.g=function(a,b,c){if(this.f)return Promise.reject();var d=new oa(b.uris[c]),e=d.R;e||(e=location.protocol,e=e.slice(0,-1),pa(d,e),b.uris[c]=d.toString());return(e=Fa[e])?e(b.uris[c],b).then(function(b){for(var c=this.c,d=0;d<c.length;d++)c[d](a,b);return b}.bind(this)):Promise.reject(new q(1,1E3,d))};
y.prototype.i=function(a,b,c,d){var e=new w,f=b.retryParameters||{};window.setTimeout(e.resolve,c*(1+(2*Math.random()-1)*(null==f.fuzzFactor?.5:f.fuzzFactor)));return e.then(this.g.bind(this,a,b,d))};function Ia(a,b,c){for(var d=0;d<a.length;++d)if(c(a[d],b))return d;return-1};function Ja(){this.a={}}k=Ja.prototype;k.push=function(a,b){this.a.hasOwnProperty(a)?this.a[a].push(b):this.a[a]=[b]};k.set=function(a,b){this.a[a]=b};k.has=function(a){return this.a.hasOwnProperty(a)};k.get=function(a){return(a=this.a[a])?a.slice():null};k.remove=function(a,b){var c=this.a[a];if(c)for(var d=0;d<c.length;++d)c[d]==b&&(c.splice(d,1),--d)};k.keys=function(){var a=[],b;for(b in this.a)a.push(b);return a};k.clear=function(){this.a={}};function z(){this.a=new Ja}z.prototype.o=function(){Ka(this);this.a=null;return Promise.resolve()};function B(a,b,c,d){b=new La(b,c,d);a.a.push(c,b)}z.prototype.ka=function(a,b){for(var c=this.a.get(b)||[],d=0;d<c.length;++d){var e=c[d];e.target==a&&(e.ka(),this.a.remove(b,e))}};function Ka(a){var b=a.a,c=[],d;for(d in b.a)c.push.apply(c,b.a[d]);for(b=0;b<c.length;++b)c[b].ka();a.a.clear()}function La(a,b,c){this.target=a;this.type=b;this.a=c;this.target.addEventListener(b,c,!1)}
La.prototype.ka=function(){this.target&&(this.target.removeEventListener(this.type,this.a,!1),this.a=this.target=null)};function Ma(a){return!a||!Object.keys(a).length}function C(a){return Object.keys(a).map(function(b){return a[b]})}function Na(a,b){return Object.keys(a).reduce(function(c,d){c[d]=b(a[d],d);return c},{})}function Oa(a,b){return Object.keys(a).every(function(c){return b(c,a[c])})};function D(a){if(!a)return"";a=new Uint8Array(a);239==a[0]&&187==a[1]&&191==a[2]&&(a=a.subarray(3));a=escape(Pa(a));try{return decodeURIComponent(a)}catch(b){throw new q(2,2004);}}function Qa(a,b){if(!a)return"";if(a.byteLength%2)throw new q(2,2004);var c;if(a instanceof ArrayBuffer)c=a;else{var d=new Uint8Array(a.byteLength);d.set(new Uint8Array(a));c=d.buffer}var d=a.byteLength/2,e=new Uint16Array(d);c=new DataView(c);for(var f=0;f<d;f++)e[f]=c.getUint16(2*f,b);return Pa(e)}
function Ra(a){var b=new Uint8Array(a);if(239==b[0]&&187==b[1]&&191==b[2])return D(b);if(254==b[0]&&255==b[1])return Qa(b.subarray(2),!1);if(255==b[0]&&254==b[1])return Qa(b.subarray(2),!0);var c=function(a,b){return a.byteLength<=b||32<=a[b]&&126>=a[b]}.bind(null,b);if(b[0]||b[2]){if(!b[1]&&!b[3])return Qa(a,!0);if(c(0)&&c(1)&&c(2)&&c(3))return D(a)}else return Qa(a,!1);throw new q(2,2003);}
function Sa(a){a=unescape(encodeURIComponent(a));for(var b=new Uint8Array(a.length),c=0;c<a.length;++c)b[c]=a.charCodeAt(c);return b.buffer}function Pa(a){for(var b="",c=0;c<a.length;c+=16E3)b+=String.fromCharCode.apply(null,a.subarray(c,c+16E3));return b};function Ta(a){this.a=null;this.b=function(){this.a=null;a()}.bind(this)}function Ua(a){null!=a.a&&(clearTimeout(a.a),a.a=null)}function Va(a){Ua(a);a.a=setTimeout(a.b,100)};function Wa(a){return window.btoa(String.fromCharCode.apply(null,a)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=*$/,"")}function Xa(a){a=window.atob(a.replace(/-/g,"+").replace(/_/g,"/"));for(var b=new Uint8Array(a.length),c=0;c<a.length;++c)b[c]=a.charCodeAt(c);return b}function Ya(a){for(var b=new Uint8Array(a.length/2),c=0;c<a.length;c+=2)b[c/2]=window.parseInt(a.substr(c,2),16);return b}
function Za(a){for(var b="",c=0;c<a.length;++c){var d=a[c].toString(16);1==d.length&&(d="0"+d);b+=d}return b}function $a(a,b){if(!a&&!b)return!0;if(!a||!b||a.length!=b.length)return!1;for(var c=0;c<a.length;++c)if(a[c]!=b[c])return!1;return!0};function ab(a,b,c){this.l=this.h=this.m=null;this.A=!1;this.b=null;this.g=new z;this.a=[];this.s=[];this.j=new w;this.G=a;this.i=null;this.f=function(a){this.j.reject(a);b(a)}.bind(this);this.w={};this.J=c;this.v=new Ta(this.uc.bind(this));this.C=this.c=!1;this.j["catch"](function(){})}k=ab.prototype;
k.o=function(){this.c=!0;var a=this.a.map(function(a){a.ya.close()["catch"](v);return a.ya.closed});this.j.reject();this.g&&a.push(this.g.o());this.l&&a.push(this.l.setMediaKeys(null)["catch"](v));this.v&&Ua(this.v);this.g=this.l=this.h=this.m=this.b=this.v=null;this.a=[];this.s=[];this.f=this.i=this.G=null;return Promise.all(a)};k.configure=function(a){this.i=a};
k.init=function(a,b){var c={},d=[];this.C=b;this.s=a.offlineSessionIds;bb(this,a,b||0<a.offlineSessionIds.length,c,d);return d.length?cb(this,c,d):(this.A=!0,Promise.resolve())};
function db(a,b){if(!a.h)return B(a.g,b,"encrypted",function(){this.g.ka(b,"encrypted");this.f(new q(6,6010))}.bind(a)),Promise.resolve();a.l=b;var c=a.l.setMediaKeys(a.h),c=c["catch"](function(a){return Promise.reject(new q(6,6003,a.message))}),d=null;a.b.serverCertificate&&(d=a.h.setServerCertificate(a.b.serverCertificate),d=d["catch"](function(a){return Promise.reject(new q(6,6004,a.message))}));return Promise.all([c,d]).then(function(){if(this.c)return Promise.reject();eb(this);this.b.initData.length||
this.s.length||B(this.g,this.l,"encrypted",this.bc.bind(this))}.bind(a))["catch"](function(a){return this.c?Promise.resolve():Promise.reject(a)}.bind(a))}function fb(a,b){return Promise.all(b.map(function(a){return gb(this,a).then(function(a){if(a)return a.remove()})}.bind(a)))}function eb(a){var b=a.b?a.b.initData:[];b.forEach(function(a){hb(this,a.initDataType,a.initData)}.bind(a));a.s.forEach(function(a){gb(this,a)}.bind(a));b.length||a.s.length||a.j.resolve();return a.j}
k.keySystem=function(){return this.b?this.b.keySystem:""};function ib(a){return a.a.map(function(a){return a.ya.sessionId})}
function bb(a,b,c,d,e){var f=kb(a),g=0<=navigator.userAgent.indexOf("Edge/");b.periods.forEach(function(a){a.streamSets.forEach(function(a){"text"!=a.type&&(f&&(a.drmInfos=[f]),a.drmInfos.forEach(function(b){lb(this,b);var f=d[b.keySystem];f||(f={audioCapabilities:[],videoCapabilities:[],distinctiveIdentifier:"optional",persistentState:c?"required":"optional",sessionTypes:[c?"persistent-license":"temporary"],label:b.keySystem,drmInfos:[]},d[b.keySystem]=f,e.push(b.keySystem));f.drmInfos.push(b);b.distinctiveIdentifierRequired&&
(f.distinctiveIdentifier="required");b.persistentStateRequired&&(f.persistentState="required");var h="video"==a.type?f.videoCapabilities:f.audioCapabilities,A=("video"==a.type?b.videoRobustness:b.audioRobustness)||"";a.streams.forEach(function(a){var c=a.mimeType;a.codecs&&(c+='; codecs="'+a.codecs+'"');g&&"com.microsoft.playready"==b.keySystem&&h.length||h.push({robustness:A,contentType:c})}.bind(this))}.bind(this)))}.bind(this))}.bind(a))}
function cb(a,b,c){if(1==c.length&&""==c[0])return Promise.reject(new q(6,6E3));var d=new w,e=d;[!0,!1].forEach(function(a){c.forEach(function(c){var d=b[c];d.drmInfos.some(function(a){return!!a.licenseServerUri})==a&&(d.audioCapabilities.length||delete d.audioCapabilities,d.videoCapabilities.length||delete d.videoCapabilities,e=e["catch"](function(){return this.c?Promise.reject():navigator.requestMediaKeySystemAccess(c,[d])}.bind(this)))}.bind(this))}.bind(a));e=e["catch"](function(){return Promise.reject(new q(6,
6001))});e=e.then(function(a){if(this.c)return Promise.reject();var c=a.getConfiguration();this.m=(c.audioCapabilities||[]).concat(c.videoCapabilities||[]).map(function(a){return a.contentType});this.m.length||(this.m=null);c=b[a.keySystem];mb(this,a.keySystem,c,c.drmInfos);return this.b.licenseServerUri?a.createMediaKeys():Promise.reject(new q(6,6012))}.bind(a)).then(function(a){if(this.c)return Promise.reject();this.h=a;this.A=!0}.bind(a))["catch"](function(a){if(this.c)return Promise.resolve();
this.m=this.b=null;return a instanceof q?Promise.reject(a):Promise.reject(new q(6,6002,a.message))}.bind(a));d.reject();return e}
function lb(a,b){var c=b.keySystem;if(c){if(!b.licenseServerUri){var d=a.i.servers[c];d&&(b.licenseServerUri=d)}if(c=a.i.advanced[c])b.distinctiveIdentifierRequired||(b.distinctiveIdentifierRequired=c.distinctiveIdentifierRequired),b.persistentStateRequired||(b.persistentStateRequired=c.persistentStateRequired),b.videoRobustness||(b.videoRobustness=c.videoRobustness),b.audioRobustness||(b.audioRobustness=c.audioRobustness),b.serverCertificate||(b.serverCertificate=c.serverCertificate)}}
function kb(a){if(Ma(a.i.clearKeys))return null;var b=[],c=[],d;for(d in a.i.clearKeys){var e=a.i.clearKeys[d],f=Ya(d),e=Ya(e),f={kty:"oct",kid:Wa(f),k:Wa(e)};b.push(f);c.push(f.kid)}a=JSON.stringify({keys:b});c=JSON.stringify({kids:c});c=[{initData:new Uint8Array(Sa(c)),initDataType:"keyids"}];return{keySystem:"org.w3.clearkey",licenseServerUri:"data:application/json;base64,"+window.btoa(a),distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,
initData:c}}function mb(a,b,c,d){var e=[],f=[],g=[];nb(d,e,f,g);a.b={keySystem:b,licenseServerUri:e[0],distinctiveIdentifierRequired:"required"==c.distinctiveIdentifier,persistentStateRequired:"required"==c.persistentState,audioRobustness:c.audioCapabilities?c.audioCapabilities[0].robustness:"",videoRobustness:c.videoCapabilities?c.videoCapabilities[0].robustness:"",serverCertificate:f[0],initData:g}}
function nb(a,b,c,d){function e(a,b){return a.initDataType==b.initDataType&&$a(a.initData,b.initData)}a.forEach(function(a){-1==b.indexOf(a.licenseServerUri)&&b.push(a.licenseServerUri);a.serverCertificate&&-1==Ia(c,a.serverCertificate,$a)&&c.push(a.serverCertificate);a.initData&&a.initData.forEach(function(a){-1==Ia(d,a,e)&&d.push(a)})})}k.bc=function(a){for(var b=new Uint8Array(a.initData),c=0;c<this.a.length;++c)if($a(b,this.a[c].initData))return;hb(this,a.initDataType,b)};
function gb(a,b){var c;try{c=a.h.createSession("persistent-license")}catch(f){var d=new q(6,6005,f.message);a.f(d);return Promise.reject(d)}B(a.g,c,"message",a.vb.bind(a));B(a.g,c,"keystatuseschange",a.qb.bind(a));var e={initData:null,ya:c,loaded:!1};a.a.push(e);return c.load(b).then(function(a){if(!this.c){if(a)return e.loaded=!0,this.a.every(function(a){return a.loaded})&&this.j.resolve(),c;this.a.splice(this.a.indexOf(e),1);this.f(new q(6,6013))}}.bind(a),function(a){this.c||(this.a.splice(this.a.indexOf(e),
1),this.f(new q(6,6005,a.message)))}.bind(a))}function hb(a,b,c){var d;try{d=a.C?a.h.createSession("persistent-license"):a.h.createSession()}catch(e){a.f(new q(6,6005,e.message));return}B(a.g,d,"message",a.vb.bind(a));B(a.g,d,"keystatuseschange",a.qb.bind(a));a.a.push({initData:c,ya:d,loaded:!1});d.generateRequest(b,c.buffer)["catch"](function(a){if(!this.c){for(var b=0;b<this.a.length;++b)if(this.a[b].ya==d){this.a.splice(b,1);break}this.f(new q(6,6006,a.message))}}.bind(a))}
k.vb=function(a){var b=a.target,c=Ha([this.b.licenseServerUri],this.i.retryParameters);c.body=a.message;c.method="POST";"com.microsoft.playready"==this.b.keySystem&&pb(c);this.G.request(2,c).then(function(a){return this.c?Promise.reject():b.update(a.data)}.bind(this),function(a){if(this.c)return Promise.resolve();this.f(new q(6,6007,a))}.bind(this))["catch"](function(a){if(this.c)return Promise.resolve();this.f(new q(6,6008,a.message))}.bind(this))};
function pb(a){for(var b=Qa(a.body,!0),b=(new DOMParser).parseFromString(b,"application/xml"),c=b.getElementsByTagName("HttpHeader"),d=0;d<c.length;++d)a.headers[c[d].querySelector("name").textContent]=c[d].querySelector("value").textContent;a.body=Xa(b.querySelector("Challenge").textContent).buffer}
k.qb=function(a){a=a.target;var b;for(b=0;b<this.a.length&&this.a[b].ya!=a;++b);if(b!=this.a.length){var c=a.keyStatuses,d=!1;c.forEach||(c=[]);c.forEach(function(a,c){if("string"==typeof c){var g=c;c=a;a=g}if("com.microsoft.playready"==this.b.keySystem&&16==c.byteLength){var g=new DataView(c),h=g.getUint32(0,!0),m=g.getUint16(4,!0),n=g.getUint16(6,!0);g.setUint32(0,h,!1);g.setUint16(4,m,!1);g.setUint16(6,n,!1)}"com.microsoft.playready"==this.b.keySystem&&"status-pending"==a&&(a="usable");"status-pending"!=
a&&"internal-error"!=a&&(this.a[b].loaded=!0,this.a.every(function(a){return a.loaded})&&this.j.resolve());"expired"==a&&(d=!0);g=Za(new Uint8Array(c));"internal-error"==a&&this.f(new q(6,4013,g));this.w[g]=a}.bind(this));c=a.expiration-Date.now();if(0>c||d&&1E3>c)this.a.splice(b,1),a.close();Va(this.v)}};k.uc=function(){Oa(this.w,function(a,b){return"expired"==b})&&this.f(new q(6,6014));this.J(this.w)};
function qb(){var a=[],b=[{contentType:'video/mp4; codecs="avc1.42E01E"'}],c=[{videoCapabilities:b,persistentState:"required",sessionTypes:["persistent-license"]},{videoCapabilities:b}],d={};"org.w3.clearkey com.widevine.alpha com.microsoft.playready com.apple.fps.2_0 com.apple.fps.1_0 com.apple.fps com.adobe.primetime".split(" ").forEach(function(b){var f=navigator.requestMediaKeySystemAccess(b,c).then(function(a){return a.createMediaKeys()}).then(function(a){var c=!1;try{a.createSession("persistent-license"),
c=!0}catch(f){}d[b]={persistentState:c}},function(){d[b]=null});a.push(f)});return Promise.all(a).then(function(){return d})};var rb={},sb={};l("shaka.media.ManifestParser.registerParserByExtension",function(a,b){sb[a]=b});l("shaka.media.ManifestParser.registerParserByMime",function(a,b){rb[a]=b});function tb(){var a={},b;for(b in rb)a[b]=!0;for(b in sb)a[b]=!0;["application/dash+xml","application/x-mpegurl","application/vnd.apple.mpegurl","application/vnd.ms-sstr+xml"].forEach(function(b){a[b]=!!rb[b]});["mpd","m3u8","ism"].forEach(function(b){a[b]=!!sb[b]});return a}
function ub(a,b,c,d){var e=d;e||(d=(new oa(a)).O.split("/").pop().split("."),1<d.length&&(d=d.pop().toLowerCase(),e=sb[d]));if(e)return Promise.resolve(e);c=Ha([a],c);c.method="HEAD";return b.request(0,c).then(function(b){(b=b.headers["content-type"])&&(b=b.toLowerCase());return(e=rb[b])?e:Promise.reject(new q(4,4E3,a))},function(){return Promise.reject(new q(4,4E3,a))})};function vb(a,b){this.g=E[b];this.c=a;this.h=0;this.f=Infinity;this.a=this.b=null}var E={};l("shaka.media.TextEngine.registerParser",function(a,b){E[a]=b});l("shaka.media.TextEngine.unregisterParser",function(a){delete E[a]});function wb(a,b,c){return a>=b?null:new xb(a,b,c)}l("shaka.media.TextEngine.makeCue",wb);var xb=window.VTTCue||window.TextTrackCue;vb.prototype.o=function(){this.c&&yb(this,function(){return!0});this.c=this.g=null;return Promise.resolve()};
function zb(a,b,c,d){var e=a.h;return Promise.resolve().then(function(){var a=this.g(b,e,c,d);if(null!=c&&null!=d){for(var g=0;g<a.length&&!(a[g].startTime>=this.f);++g)this.c.addCue(a[g]);null==this.b&&(this.b=c);this.a=Math.min(d,this.f)}}.bind(a))}
vb.prototype.remove=function(a,b){return Promise.resolve().then(function(){yb(this,function(c){return c.startTime>=b||c.endTime<=a?!1:!0});null==this.b||b<=this.b||a>=this.a||(a<=this.b&&b>=this.a?this.b=this.a=null:a<=this.b&&b<this.a?this.b=b:a>this.b&&b>=this.a&&(this.a=a))}.bind(this))};function Ab(a,b){return null==a.a||a.a<b||b<a.b?0:a.a-b}function yb(a,b){for(var c=a.c.cues,d=[],e=0;e<c.length;++e)b(c[e])&&d.push(c[e]);for(e=0;e<d.length;++e)a.c.removeCue(d[e])};function Bb(a,b){var c=0;if(!a||1==a.length&&1E-6>a.end(0)-a.start(0))return c;for(var d=!1,e=0;e<a.length;++e)if(b+1E-4>=a.start(e)&&b<a.end(e))c+=a.end(e)-b,d=!0;else if(d&&.04>=a.start(e)-a.end(e-1))c+=a.end(e)-a.start(e),c+=a.start(e)-a.end(e-1);else if(0<e&&b+1E-4<a.start(e)&&b+1E-4>=a.end(e-1))if(.04>=a.start(e)-b)c+=a.end(e)-b,d=!0;else break;else d=!1;return c};function Cb(a,b,c){this.i=a;this.f=b;this.j=c;this.c={};this.b=null;this.a={};this.g=new z;this.h=!1}
function Db(){var a={};'video/mp4; codecs="avc1.42E01E",audio/mp4; codecs="mp4a.40.2",video/webm; codecs="vp8",video/webm; codecs="vp9",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="mp4a.40.2",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(",").forEach(function(b){a[b]=!!E[b]||MediaSource.isTypeSupported(b);var c=b.split(";")[0];a[c]=a[c]||a[b]});return a}k=Cb.prototype;
k.o=function(){this.h=!0;var a=[],b;for(b in this.a){var c=this.a[b],d=c[0];this.a[b]=c.slice(0,1);d&&a.push(d.p["catch"](v));for(d=1;d<c.length;++d)c[d].p["catch"](v),c[d].p.reject()}this.b&&a.push(this.b.o());return Promise.all(a).then(function(){this.g.o();this.b=this.j=this.f=this.i=this.g=null;this.c={};this.a={}}.bind(this))};
k.init=function(a){for(var b in a){var c=a[b];"text"==b?this.b=new vb(this.j,c):(c=this.f.addSourceBuffer(c),B(this.g,c,"error",this.Rc.bind(this,b)),B(this.g,c,"updateend",this.Fa.bind(this,b)),this.c[b]=c,this.a[b]=[])}};function Eb(a,b){var c;"text"==b?c=a.b.b:(c=Fb(a,b),c=!c||1==c.length&&1E-6>c.end(0)-c.start(0)?null:c.length?c.start(0):null);return c}function Gb(a,b,c){"text"==b?(b=Ab(a.b,c),b||(b=Ab(a.b,c+.1))&&(b+=.1)):(a=Fb(a,b),b=Bb(a,c),b||(b=Bb(a,c+.1))&&(b+=.1));return b}
function Fb(a,b){try{return a.c[b].buffered}catch(c){return null}}function Hb(a,b,c,d,e){return"text"==b?zb(a.b,c,d,e):Ib(a,b,a.Qc.bind(a,b,c))}k.remove=function(a,b,c){return"text"==a?this.b.remove(b,c):Promise.all([Ib(this,a,this.Ab.bind(this,a,b,c)),Ib(this,a,this.ib.bind(this,a))])};k.clear=function(a){return"text"==a?this.b.remove(0,Infinity):Ib(this,a,this.Ab.bind(this,a,0,this.f.duration))};function Jb(a,b,c){return"text"==b?(a.b.h=c,Promise.resolve()):Ib(a,b,a.Gc.bind(a,b,c))}
function Kb(a,b,c){return"text"==b?(a.b.f=c,Promise.resolve()):Promise.all([Ib(a,b,a.ib.bind(a,b)),Ib(a,b,a.Ec.bind(a,b,c))])}k.endOfStream=function(a){return Lb(this,function(){a?this.f.endOfStream(a):this.f.endOfStream()}.bind(this))};k.za=function(a){return Lb(this,function(){this.f.duration=a}.bind(this))};k.Z=function(){return this.f.duration};k.Qc=function(a,b){this.c[a].appendBuffer(b)};k.Ab=function(a,b,c){c<=b?this.Fa(a):this.c[a].remove(b,c)};
k.ib=function(a){var b=this.c[a].appendWindowEnd;this.c[a].abort();this.c[a].appendWindowEnd=b;this.Fa(a)};k.Gc=function(a,b){this.c[a].timestampOffset=b;this.Fa(a)};k.Ec=function(a,b){this.c[a].appendWindowEnd=b+.04;this.Fa(a)};k.Rc=function(a){this.a[a][0].p.reject(new q(3,3014,this.i.error?this.i.error.code:0))};k.Fa=function(a){var b=this.a[a][0];b&&(b.p.resolve(),Mb(this,a))};
function Ib(a,b,c){if(a.h)return Promise.reject();c={start:c,p:new w};a.a[b].push(c);if(1==a.a[b].length)try{c.start()}catch(d){"QuotaExceededError"==d.name?c.p.reject(new q(3,3017,b)):c.p.reject(new q(3,3015,d)),Mb(a,b)}return c.p}
function Lb(a,b){if(a.h)return Promise.reject();var c=[],d;for(d in a.c){var e=new w,f={start:function(a){a.resolve()}.bind(null,e),p:e};a.a[d].push(f);c.push(e);1==a.a[d].length&&f.start()}return Promise.all(c).then(function(){var a,c;try{b()}catch(d){c=Promise.reject(new q(3,3015,d))}for(a in this.c)Mb(this,a);return c}.bind(a),function(){return Promise.reject()}.bind(a))}function Mb(a,b){a.a[b].shift();var c=a.a[b][0];if(c)try{c.start()}catch(d){c.p.reject(new q(3,3015,d)),Mb(a,b)}};function F(a,b){this.j=a;this.i=b;this.c=this.a=Infinity;this.b=1;this.h=this.f=0;this.g=!0}l("shaka.media.PresentationTimeline",F);F.prototype.Z=function(){return this.a};F.prototype.getDuration=F.prototype.Z;F.prototype.za=function(a){this.a=a};F.prototype.setDuration=F.prototype.za;F.prototype.Eb=function(a){this.h=a};F.prototype.setClockOffset=F.prototype.Eb;F.prototype.Hb=function(a){this.g=a};F.prototype.setStatic=F.prototype.Hb;F.prototype.Ub=function(){return this.c};
F.prototype.getSegmentAvailabilityDuration=F.prototype.Ub;F.prototype.Gb=function(a){this.c=a};F.prototype.setSegmentAvailabilityDuration=F.prototype.Gb;F.prototype.Ea=function(a,b){b.length&&(this.b=b.reduce(function(a,b){return Math.max(a,b.endTime-b.startTime)},this.b),a||(this.f=Math.max(this.f,b[0].startTime)))};F.prototype.notifySegments=F.prototype.Ea;F.prototype.Xa=function(a){this.b=Math.max(this.b,a)};F.prototype.notifyMaxSegmentDuration=F.prototype.Xa;
F.prototype.U=function(){return Infinity==this.a&&!this.g};F.prototype.isLive=F.prototype.U;F.prototype.ga=function(){return Infinity!=this.a&&!this.g};F.prototype.isInProgress=F.prototype.ga;F.prototype.ra=function(){return Math.max(Math.min(this.f,this.fa()),this.sa())};F.prototype.getEarliestStart=F.prototype.ra;F.prototype.sa=function(){return Infinity==this.c?0:Math.max(0,this.fa()-this.c-this.i)};F.prototype.getSegmentAvailabilityStart=F.prototype.sa;
F.prototype.fa=function(){return this.U()||this.ga()?Math.min(Math.max(0,(Date.now()+this.h)/1E3-this.b-this.j),this.a):this.a};F.prototype.getSegmentAvailabilityEnd=F.prototype.fa;F.prototype.Ta=function(){return Math.max(0,this.fa()-(this.U()||this.ga()?this.i:0))};F.prototype.getSeekRangeEnd=F.prototype.Ta;function Nb(a,b,c,d,e,f){this.a=a;this.c=b;this.i=c;this.m=d;this.j=e;this.l=f;this.b=new z;this.h=!1;this.g=1;this.f=null;0<a.readyState?this.rb():B(this.b,a,"loadedmetadata",this.rb.bind(this));B(this.b,a,"ratechange",this.ic.bind(this))}k=Nb.prototype;k.o=function(){var a=this.b.o();this.b=null;null!=this.f&&(window.clearInterval(this.f),this.f=null);this.l=this.j=this.c=this.a=null;return a};function Ob(a){return 0<a.a.readyState?Pb(a,a.a.currentTime):Qb(a)}
function Qb(a){return a.m?Pb(a,a.m):Infinity>a.c.Z()?a.c.ra():Math.max(a.c.Ta(),a.c.ra())}function Rb(a,b){b!=a.h&&(a.h=b,Sb(a,a.g),a.j(b))}k.Sa=function(){return this.g};function Sb(a,b){null!=a.f&&(window.clearInterval(a.f),a.f=null);a.g=b;a.a.playbackRate=a.h||0>b?0:b;!a.h&&0>b&&(a.f=window.setInterval(function(){this.a.currentTime+=b/4}.bind(a),250))}k.ic=function(){this.a.playbackRate!=(this.h||0>this.g?0:this.g)&&Sb(this,this.a.playbackRate)};
k.rb=function(){this.b.ka(this.a,"loadedmetadata");var a=Qb(this);.001>Math.abs(this.a.currentTime-a)?(B(this.b,this.a,"seeking",this.tb.bind(this)),B(this.b,this.a,"playing",this.sb.bind(this))):(B(this.b,this.a,"seeking",this.kc.bind(this)),this.a.currentTime=a)};k.kc=function(){this.b.ka(this.a,"seeking");B(this.b,this.a,"seeking",this.tb.bind(this));B(this.b,this.a,"playing",this.sb.bind(this))};k.tb=function(){var a=this.a.currentTime,b=Tb(this,a);.001<Math.abs(b-a)?Ub(this,a,b):this.l()};
k.sb=function(){var a=this.a.currentTime,b=Tb(this,a);.001<Math.abs(b-a)&&Ub(this,a,b)};function Tb(a,b){var c=a.c,d=c.ra(),e=c.fa();if(!c.U()||Infinity==c.c)return b<d?d:b>e?e:b;c=d+1;d=c+a.i;return b>=d&&b<=e||Bb(a.a.buffered,b)&&b>=c&&b<=e?b:b>e?e:e<d&&b>=c&&b<=e?b:Math.min(d+2,e)}function Ub(a,b,c){a.a.currentTime=c;var d=0,e=function(){!this.a||10<=d++||this.a.currentTime!=b||(this.a.currentTime=c,setTimeout(e,100))}.bind(a);setTimeout(e,100)}
function Pb(a,b){var c=a.c.ra();if(b<c)return c;c=a.c.fa();return b>c?c:b};function Vb(a,b,c){this.a=a;this.L=b;this.D=c}l("shaka.media.InitSegmentReference",Vb);function G(a,b,c,d,e,f){this.position=a;this.startTime=b;this.endTime=c;this.a=d;this.L=e;this.D=f}l("shaka.media.SegmentReference",G);function Wb(a,b,c,d,e,f,g,h,m){this.i=a;this.c=b;this.S=c;this.a=d;this.J=e;this.w=f;this.l=g;this.A=h||null;this.C=m||null;this.g=null;this.j=1;this.G=Promise.resolve();this.h=[];this.m={};this.b={};this.f=this.s=this.v=!1}Wb.prototype.o=function(){for(var a in this.b)Xb(this.b[a]);this.g=this.b=this.m=this.h=this.C=this.A=this.l=this.w=this.J=this.G=this.a=this.S=this.c=this.i=null;this.f=!0;return Promise.resolve()};
Wb.prototype.configure=function(a){this.g=a;this.i.i=this.j*Math.max(this.a.minBufferTime||0,this.g.rebufferingGoal)};Wb.prototype.init=function(){var a=this.J(this.a.periods[Yb(this,Ob(this.i))]);return Ma(a)?Promise.reject(new q(5,5005)):Zb(this,a).then(function(){this.A&&this.A()}.bind(this))};function $b(a){return a.a.periods[Yb(a,Ob(a.i))]}function ac(a){return Na(a.b,function(a){return a.stream})}function bc(a,b){var c={};c.text=b;return Zb(a,c)}
function cc(a,b,c,d){var e=a.b[b];!e&&"text"==b&&a.g.ignoreTextStreamFailures?bc(a,c):e&&(b=a.h[dc(a,c)])&&b.xa&&(b=a.m[c.id])&&b.xa&&e.stream!=c&&(e.stream=c,e.La=!0,void 0==d||e.ca||e.da||(e.ha?ec(e,d):(Xb(e),fc(a,e,d))))}function ec(a,b){a.ca?a.Ka=Math.min(a.Ka,b):(a.ca=!0,a.Ka=b)}
function Zb(a,b){var c=Yb(a,Ob(a.i)),d=Na(b,function(a){return a.mimeType+(a.codecs?'; codecs="'+a.codecs+'"':"")});a.c.init(d);gc(a);d=C(b);return hc(a,d).then(function(){if(!this.f)for(var a in b){var d=b[a];this.b[a]||(this.b[a]={stream:d,type:a,ta:null,V:null,La:!0,va:!1,Ma:c,endOfStream:!1,ha:!1,ba:null,ca:!1,Ka:0,da:!1,ab:!1},ic(this,this.b[a],0))}}.bind(a))}
function jc(a,b){var c=a.h[b];if(c)return c.I;c={I:new w,xa:!1};a.h[b]=c;var d=a.a.periods[b].streamSets.map(function(a){return a.streams}).reduce(t,[]);a.G=a.G.then(function(){if(!this.f)return hc(this,d)}.bind(a)).then(function(){this.f||(this.h[b].I.resolve(),this.h[b].xa=!0)}.bind(a))["catch"](function(a){this.f||(this.h[b].I.reject(),delete this.h[b],this.l(a))}.bind(a));return c.I}
function hc(a,b){for(var c=[],d=0;d<b.length;++d){var e=b[d],f=a.m[e.id];f?c.push(f.I):(a.m[e.id]={I:new w,xa:!1},c.push(e.createSegmentIndex()))}return Promise.all(c).then(function(){if(!this.f)for(var a=0;a<b.length;++a){var c=this.m[b[a].id];c.xa||(c.I.resolve(),c.xa=!0)}}.bind(a))["catch"](function(a){if(!this.f)return this.m[e.id].I.reject(),delete this.m[e.id],Promise.reject(a)}.bind(a))}function gc(a){var b=a.a.presentationTimeline.Z();Infinity>b?a.c.za(b):a.c.za(Math.pow(2,32))}
Wb.prototype.X=function(a){if(!this.f&&!a.ha&&null!=a.ba&&!a.da)if(a.ba=null,a.ca)fc(this,a,a.Ka);else{try{var b=kc(this,a);null!=b&&ic(this,a,b)}catch(c){this.l(c);return}b=C(this.b);Rb(this.i,b.some(function(a){return a.va}));lc(this,a);b.every(function(a){return a.endOfStream})&&this.c.endOfStream()}};
function kc(a,b){var c=Ob(a.i),d;d=a.c;var e=b.type;"text"==e?d=d.b.a:(d=Fb(d,e),d=!d||1==d.length&&1E-6>d.end(0)-d.start(0)?null:d.length?d.end(d.length-1):null);var f=b.ta&&b.V?a.a.periods[dc(a,b.ta)].startTime+b.V.endTime:c,e=Yb(a,f),g=a.a.periods[e],h=mc(a,b,c,d,e),h=h?g.startTime+h.startTime-c:Gb(a.c,b.type,c),g=a.j*Math.max(a.a.minBufferTime||0,a.g.rebufferingGoal);if(h>=Math.max(g,a.j*a.g.bufferingGoal))return b.va=!1,.5;if(f>=a.a.presentationTimeline.Z())return b.va=!1,b.endOfStream=!0,null;
b.endOfStream=!1;!a.v&&h<g||1>=h?b.va=!0:h>=g&&(b.va=!1);f=dc(a,b.stream);if(e!=f)return b.Ma=e,null;h=mc(a,b,c,d,f);if(!h)return 1;nc(a,b,c,f,h);return null}
function mc(a,b,c,d,e){if(b.V&&b.stream==b.ta)return c=b.V.position+1,oc(a,b,e,c);c=b.V?b.stream.findSegmentPosition(Math.max(0,a.a.periods[dc(a,b.ta)].startTime+b.V.endTime-a.a.periods[e].startTime)):b.stream.findSegmentPosition(Math.max(0,(d||c)-a.a.periods[e].startTime));if(null==c)return null;var f=null;null==d&&(f=oc(a,b,e,Math.max(0,c-1)));return f||oc(a,b,e,c)}
function oc(a,b,c,d){c=a.a.periods[c];b=b.stream.getSegmentReference(d);if(!b)return null;a=a.a.presentationTimeline;d=a.fa();return c.startTime+b.endTime<a.sa()||c.startTime+b.startTime>d?null:b}
function nc(a,b,c,d,e){var f=a.a.periods[d],g=b.stream,h=a.a.periods[d+1],m=null,m=h?h.startTime:a.a.presentationTimeline.Z();d=pc(a,b,d,m);b.ha=!0;b.La=!1;h=qc(a,e);Promise.all([d,h]).then(function(a){if(!this.f&&!this.s)return rc(this,b,c,f,g,e,a[1])}.bind(a)).then(function(){this.f||this.s||(b.ha=!1,b.ab=!1,ic(this,b,0),sc(this,g))}.bind(a))["catch"](function(a){this.f||this.s||(b.ha=!1,1001==a.code||1002==a.code||1003==a.code?"text"==b.type&&this.g.ignoreTextStreamFailures&&1001==a.code?delete this.b.text:
(this.l(a),ic(this,b,4)):3017==a.code?tc(this,b,a):this.l(a))}.bind(a))}function tc(a,b,c){if(!C(a.b).some(function(a){return a!=b&&a.ab})){var d=Math.round(100*a.j);if(20<d)a.j-=.2;else if(4<d)a.j-=.04;else{a.s=!0;a.l(c);return}b.ab=!0}ic(a,b,b.va?0:4)}
function pc(a,b,c,d){if(!b.La)return Promise.resolve();c=Jb(a.c,b.type,a.a.periods[c].startTime-b.stream.presentationTimeOffset);d=null!=d?Kb(a.c,b.type,d):Promise.resolve();if(!b.stream.initSegmentReference)return Promise.all([c,d]);a=qc(a,b.stream.initSegmentReference).then(function(a){if(!this.f)return Hb(this.c,b.type,a,null,null)}.bind(a))["catch"](function(a){b.La=!0;return Promise.reject(a)});return Promise.all([c,d,a])}
function rc(a,b,c,d,e,f,g){return uc(a,b,c).then(function(){if(!this.f)return Hb(this.c,b.type,g,f.startTime+d.startTime,f.endTime+d.startTime)}.bind(a)).then(function(){if(!this.f)return b.ta=e,b.V=f,Promise.resolve()}.bind(a))}function uc(a,b,c){var d=Eb(a.c,b.type);if(null==d)return Promise.resolve();c=c-d-a.g.bufferBehind;return 0>=c?Promise.resolve():a.c.remove(b.type,d,d+c).then(function(){}.bind(a))}
function sc(a,b){if(!a.v&&(a.v=C(a.b).every(function(a){return!a.ca&&!a.da&&a.V}),a.v)){var c=dc(a,b);a.h[c]||jc(a,c).then(function(){this.w()}.bind(a))["catch"](v);for(c=0;c<a.a.periods.length;++c)jc(a,c)["catch"](v);a.C&&a.C()}}
function lc(a,b){if(b.Ma!=dc(a,b.stream)){var c=b.Ma,d=C(a.b);d.every(function(a){return a.Ma==c})&&d.every(vc)&&jc(a,c).then(function(){if(!this.f){var a=this.J(this.a.periods[c]),b;for(b in this.b)if(!a[b]){this.l(new q(5,5005));return}for(b in a)if(!(this.b[b]||"text"==b&&this.g.ignoreTextStreamFailures)){this.l(new q(5,5005));return}for(b in this.b){cc(this,b,a[b]);var d=this.b[b];vc(d)&&ic(this,d,0)}this.w()}}.bind(a))["catch"](v)}}function vc(a){return!a.ha&&null==a.ba&&!a.ca&&!a.da}
function Yb(a,b){for(var c=a.a.periods.length-1;0<c;--c)if(b>=a.a.periods[c].startTime)return c;return 0}function dc(a,b){for(var c=0;c<a.a.periods.length;++c)for(var d=a.a.periods[c],e=0;e<d.streamSets.length;++e)if(0<=d.streamSets[e].streams.indexOf(b))return c;return-1}function qc(a,b){var c=Ha(b.a(),a.g.retryParameters);if(b.L||null!=b.D){var d="bytes="+b.L+"-";null!=b.D&&(d+=b.D);c.headers.Range=d}return a.S.request(1,c).then(function(a){return a.data})}
function fc(a,b,c){b.ca=!1;b.da=!0;var d=Ob(a.i)+c,e=a.c.Z();(c?a.c.remove(b.type,d,e):a.c.clear(b.type)).then(function(){this.f||(b.ta=null,b.V=null,b.da=!1,ic(this,b,0))}.bind(a))}function ic(a,b,c){b.ba=window.setTimeout(a.X.bind(a,b),1E3*c)}function Xb(a){null!=a.ba&&(window.clearTimeout(a.ba),a.ba=null)};function wc(){this.a=Promise.resolve();this.c=this.b=this.f=!1;this.g=new Promise(function(a){this.h=a}.bind(this))}wc.prototype.then=function(a){this.a=this.a.then(a).then(function(a){return this.c?(this.h(),Promise.reject(this.i)):Promise.resolve(a)}.bind(this));return this};function xc(a){a.f||(a.a=a.a.then(function(a){this.b=!0;return Promise.resolve(a)}.bind(a),function(a){this.b=!0;return Promise.reject(a)}.bind(a)));a.f=!0;return a.a}
function yc(a,b){if(a.b)return Promise.resolve();a.c=!0;a.i=b;return a.g};function zc(a,b,c,d,e){var f=e in d,g;for(g in b){var h=e+"."+g,m=f?d[e]:c[g],n=!!{".abr.manager":!0}[h];if(f||g in a)void 0===b[g]?void 0===m||f?delete a[g]:a[g]=m:n?a[g]=b[g]:"object"==typeof a[g]&&"object"==typeof b[g]?zc(a[g],b[g],m,d,h):typeof b[g]==typeof m&&(a[g]=b[g])}};function H(a,b){var c=b||{},d;for(d in c)this[d]=c[d];this.defaultPrevented=this.cancelable=this.bubbles=!1;this.timeStamp=window.performance?window.performance.now():Date.now();this.type=a;this.isTrusted=!1;this.target=this.currentTarget=null;this.a=!1}H.prototype.preventDefault=function(){};H.prototype.stopImmediatePropagation=function(){this.a=!0};H.prototype.stopPropagation=function(){};function p(){this.Aa=new Ja;this.S=this}p.prototype.addEventListener=function(a,b){this.Aa.push(a,b)};p.prototype.removeEventListener=function(a,b){this.Aa.remove(a,b)};p.prototype.dispatchEvent=function(a){for(var b=this.Aa.get(a.type)||[],c=0;c<b.length;++c){a.target=this.S;a.currentTarget=this.S;var d=b[c];try{d.handleEvent?d.handleEvent(a):d.call(this,a)}catch(e){}if(a.a)break}return a.defaultPrevented};function Ac(a,b,c){return c==b||a>=Bc&&c==b.split("-")[0]||a>=Cc&&c.split("-")[0]==b.split("-")[0]?!0:!1}var Bc=1,Cc=2;function Dc(a){a=a.toLowerCase().split("-");var b=Ec[a[0]];b&&(a[0]=b);return a.join("-")}
var Ec={aar:"aa",abk:"ab",afr:"af",aka:"ak",alb:"sq",amh:"am",ara:"ar",arg:"an",arm:"hy",asm:"as",ava:"av",ave:"ae",aym:"ay",aze:"az",bak:"ba",bam:"bm",baq:"eu",bel:"be",ben:"bn",bih:"bh",bis:"bi",bod:"bo",bos:"bs",bre:"br",bul:"bg",bur:"my",cat:"ca",ces:"cs",cha:"ch",che:"ce",chi:"zh",chu:"cu",chv:"cv",cor:"kw",cos:"co",cre:"cr",cym:"cy",cze:"cs",dan:"da",deu:"de",div:"dv",dut:"nl",dzo:"dz",ell:"el",eng:"en",epo:"eo",est:"et",eus:"eu",ewe:"ee",fao:"fo",fas:"fa",fij:"fj",fin:"fi",fra:"fr",fre:"fr",
fry:"fy",ful:"ff",geo:"ka",ger:"de",gla:"gd",gle:"ga",glg:"gl",glv:"gv",gre:"el",grn:"gn",guj:"gu",hat:"ht",hau:"ha",heb:"he",her:"hz",hin:"hi",hmo:"ho",hrv:"hr",hun:"hu",hye:"hy",ibo:"ig",ice:"is",ido:"io",iii:"ii",iku:"iu",ile:"ie",ina:"ia",ind:"id",ipk:"ik",isl:"is",ita:"it",jav:"jv",jpn:"ja",kal:"kl",kan:"kn",kas:"ks",kat:"ka",kau:"kr",kaz:"kk",khm:"km",kik:"ki",kin:"rw",kir:"ky",kom:"kv",kon:"kg",kor:"ko",kua:"kj",kur:"ku",lao:"lo",lat:"la",lav:"lv",lim:"li",lin:"ln",lit:"lt",ltz:"lb",lub:"lu",
lug:"lg",mac:"mk",mah:"mh",mal:"ml",mao:"mi",mar:"mr",may:"ms",mkd:"mk",mlg:"mg",mlt:"mt",mon:"mn",mri:"mi",msa:"ms",mya:"my",nau:"na",nav:"nv",nbl:"nr",nde:"nd",ndo:"ng",nep:"ne",nld:"nl",nno:"nn",nob:"nb",nor:"no",nya:"ny",oci:"oc",oji:"oj",ori:"or",orm:"om",oss:"os",pan:"pa",per:"fa",pli:"pi",pol:"pl",por:"pt",pus:"ps",que:"qu",roh:"rm",ron:"ro",rum:"ro",run:"rn",rus:"ru",sag:"sg",san:"sa",sin:"si",slk:"sk",slo:"sk",slv:"sl",sme:"se",smo:"sm",sna:"sn",snd:"sd",som:"so",sot:"st",spa:"es",sqi:"sq",
srd:"sc",srp:"sr",ssw:"ss",sun:"su",swa:"sw",swe:"sv",tah:"ty",tam:"ta",tat:"tt",tel:"te",tgk:"tg",tgl:"tl",tha:"th",tib:"bo",tir:"ti",ton:"to",tsn:"tn",tso:"ts",tuk:"tk",tur:"tr",twi:"tw",uig:"ug",ukr:"uk",urd:"ur",uzb:"uz",ven:"ve",vie:"vi",vol:"vo",wel:"cy",wln:"wa",wol:"wo",xho:"xh",yid:"yi",yor:"yo",zha:"za",zho:"zh",zul:"zu"};function Fc(a,b,c){var d=!1;a.streamSets.forEach(function(a){a.streams.forEach(function(f){var g=f.allowedByApplication;f.allowedByApplication=!0;if("video"==a.type){if(f.width<b.minWidth||f.width>b.maxWidth||f.width>c.width||f.height<b.minHeight||f.height>b.maxHeight||f.height>c.height||f.width*f.height<b.minPixels||f.width*f.height>b.maxPixels||f.bandwidth<b.minVideoBandwidth||f.bandwidth>b.maxVideoBandwidth)f.allowedByApplication=!1}else"audio"==a.type&&(f.bandwidth<b.minAudioBandwidth||f.bandwidth>
b.maxAudioBandwidth)&&(f.allowedByApplication=!1);g!=f.allowedByApplication&&(d=!0)})});return d}
function Gc(a,b,c){var d="",e=null;a&&a.A&&(d=a.keySystem(),e=a.m);for(a=0;a<c.streamSets.length;++a){var f=c.streamSets[a];if(d&&f.drmInfos.length&&!f.drmInfos.some(function(a){return a.keySystem==d}))c.streamSets.splice(a,1),--a;else{for(var g=b[f.type],h=0;h<f.streams.length;++h){var m=f.streams[h],n=m.mimeType;m.codecs&&(n+='; codecs="'+m.codecs+'"');E[n]||MediaSource.isTypeSupported(n)?e&&m.encrypted&&0>e.indexOf(n)?(f.streams.splice(h,1),--h):!g||m.mimeType==g.mimeType&&m.codecs.split(".")[0]==
g.codecs.split(".")[0]||(f.streams.splice(h,1),--h):(f.streams.splice(h,1),--h)}f.streams.length||(c.streamSets.splice(a,1),--a)}}}function Hc(a,b){return a.streamSets.map(function(a){var d=b?b[a.type]:null;return a.streams.filter(function(a){return a.allowedByApplication&&a.allowedByKeySystem}).map(function(b){return{id:b.id,active:d==b,type:a.type,bandwidth:b.bandwidth,language:a.language,kind:b.kind||null,width:b.width||null,height:b.height||null}})}).reduce(t,[])}
function Ic(a,b){for(var c=0;c<a.streamSets.length;c++)for(var d=a.streamSets[c],e=0;e<d.streams.length;e++){var f=d.streams[e];if(f.id==b.id)return{stream:f,Tc:d}}return null}function Jc(a){return a.streams.some(function(a){return a.allowedByApplication&&a.allowedByKeySystem})}
function Kc(a,b,c){var d={};a.streamSets.forEach(function(a){!Jc(a)||a.type in d||(d[a.type]=a)});var e=0;a.streamSets.forEach(function(a){if(Jc(a)&&"video"==a.type){var b=Lc(a);b>e?(e=b,d.video=a):b==e&&Mc(a)<Mc(d.video)&&(d.video=a)}});a.streamSets.forEach(function(a){Jc(a)&&a.primary&&(d[a.type].primary?Mc(a)<Mc(d[a.type])&&(d[a.type]=a):d[a.type]=a)});[Cc,Bc,0].forEach(function(e){a.streamSets.forEach(function(a){if(Jc(a)){var h;"audio"==a.type?h=b.preferredAudioLanguage:"text"==a.type&&(h=b.preferredTextLanguage);
if(h){h=Dc(h);var m=Dc(a.language);Ac(e,h,m)&&(a.language==d[a.type].language?Mc(a)<Mc(d[a.type])&&(d[a.type]=a):d[a.type]=a,c&&(c[a.type]=!0))}}})});return d}function Mc(a){var b=0;if(!a||1>a.streams.length)return b;a.streams.forEach(function(a){b+=a.bandwidth});return b/a.streams.length}function Lc(a){var b=0;if(!a)return b;a.streams.forEach(function(a){a.height>b&&(b=a.height)});return b};function I(a,b){p.call(this);this.w=!1;this.f=a;this.m=null;this.v=new z;this.hb=new ja;this.na=this.c=this.l=this.b=this.i=this.oa=this.G=this.A=this.g=this.h=null;this.Kb=1E9;this.ma=[];this.Pa=!1;this.qa=!0;this.j=null;this.s={};this.a=Nc(this);this.Ba={width:Infinity,height:Infinity};this.C=[];this.X=this.J=this.pa=0;b&&b(this);this.h=new y(this.Lc.bind(this));this.oa=Oc(this);for(var c=0;c<this.f.textTracks.length;++c){var d=this.f.textTracks[c];d.mode="disabled";"Shaka Player TextTrack"==d.label&&
(this.m=d)}this.m||(this.m=this.f.addTextTrack("subtitles","Shaka Player TextTrack"));this.m.mode="hidden";B(this.v,this.f,"error",this.lc.bind(this))}ba(I);l("shaka.Player",I);I.prototype.o=function(){this.w=!0;var a=Promise.resolve();this.j&&(a=yc(this.j,new q(7,7E3)));return a.then(function(){var a=Promise.all([Pc(this),this.v?this.v.o():null,this.h?this.h.o():null]);this.a=this.h=this.hb=this.v=this.m=this.f=null;return a}.bind(this))};I.prototype.destroy=I.prototype.o;I.version="v2.0.0";
var Qc={};I.registerSupportPlugin=function(a,b){Qc[a]=b};I.isBrowserSupported=function(){return!!window.Promise&&!!window.Uint8Array&&!!Array.prototype.forEach&&!!window.MediaSource&&!!window.MediaKeys&&!!window.navigator&&!!window.navigator.requestMediaKeySystemAccess&&!!window.MediaKeySystemAccess&&!!window.MediaKeySystemAccess.prototype.getConfiguration};I.probeSupport=function(){return qb().then(function(a){var b=tb(),c=Db();a={manifest:b,media:c,drm:a};for(var d in Qc)a[d]=Qc[d]();return a})};
I.prototype.load=function(a,b,c){var d=this.gb(),e=new wc;this.j=e;this.dispatchEvent(new H("loading"));return xc(e.then(function(){return d}).then(function(){return ub(a,this.h,this.a.manifest.retryParameters,c)}.bind(this)).then(function(b){this.l=new b;this.l.configure(this.a.manifest);return this.l.start(a,this.h,this.Na.bind(this),this.aa.bind(this),this.Ic.bind(this))}.bind(this)).then(function(b){this.c=b;this.na=a;this.g=new ab(this.h,this.aa.bind(this),this.Jc.bind(this));this.g.configure(this.a.drm);
return this.g.init(b,!1)}.bind(this)).then(function(){this.c.periods.forEach(this.Na.bind(this));this.X=Date.now()/1E3;return Promise.all([db(this.g,this.f),this.oa])}.bind(this)).then(function(){this.i=new Nb(this.f,this.c.presentationTimeline,1*Math.max(this.c.minBufferTime||0,this.a.streaming.rebufferingGoal),b||null,this.Ib.bind(this),this.Kc.bind(this));this.G=new Cb(this.f,this.A,this.m);this.b=new Wb(this.i,this.G,this.h,this.c,this.Hc.bind(this),this.Mb.bind(this),this.aa.bind(this));this.b.configure(this.a.streaming);
return this.b.init()}.bind(this)).then(function(){this.c.periods.forEach(this.Na.bind(this));Rc(this);Sc(this);this.a.abr.manager.init(this.eb.bind(this));this.j=null}.bind(this)))["catch"](function(a){this.j==e&&(this.j=null,this.dispatchEvent(new H("unloading")));return Promise.reject(a)}.bind(this))};I.prototype.load=I.prototype.load;function Oc(a){a.A=new MediaSource;var b=new w;B(a.v,a.A,"sourceopen",b.resolve);a.f.src=window.URL.createObjectURL(a.A);return b}
I.prototype.configure=function(a){a.abr&&a.abr.manager&&a.abr.manager!=this.a.abr.manager&&(this.a.abr.manager.stop(),a.abr.manager.init(this.eb.bind(this)));zc(this.a,a,Nc(this),Tc(),"");Uc(this)};I.prototype.configure=I.prototype.configure;
function Uc(a){a.l&&a.l.configure(a.a.manifest);a.g&&a.g.configure(a.a.drm);a.b&&(a.b.configure(a.a.streaming),a.c.periods.forEach(a.Na.bind(a)),Vc(a,$b(a.b)));a.a.abr.enabled&&!a.qa?a.a.abr.manager.enable():a.a.abr.manager.disable();a.a.abr.manager.setDefaultEstimate(a.a.abr.defaultBandwidthEstimate)}I.prototype.getConfiguration=function(){var a=Nc(this);zc(a,this.a,Nc(this),Tc(),"");return a};I.prototype.getConfiguration=I.prototype.getConfiguration;
I.prototype.zc=function(){var a=Nc(this);a.abr&&a.abr.manager&&a.abr.manager!=this.a.abr.manager&&(this.a.abr.manager.stop(),a.abr.manager.init(this.eb.bind(this)));this.a=Nc(this);Uc(this)};I.prototype.resetConfiguration=I.prototype.zc;I.prototype.nb=function(){return this.h};I.prototype.getNetworkingEngine=I.prototype.nb;I.prototype.Sb=function(){return this.na};I.prototype.getManifestUri=I.prototype.Sb;I.prototype.U=function(){return this.c?this.c.presentationTimeline.U():!1};
I.prototype.isLive=I.prototype.U;I.prototype.ga=function(){return this.c?this.c.presentationTimeline.ga():!1};I.prototype.isInProgress=I.prototype.ga;I.prototype.Cc=function(){var a=0,b=0;this.c&&(b=this.c.presentationTimeline,a=b.sa(),b=b.Ta());return{start:a,end:b}};I.prototype.seekRange=I.prototype.Cc;I.prototype.keySystem=function(){return this.g?this.g.keySystem():""};I.prototype.keySystem=I.prototype.keySystem;I.prototype.drmInfo=function(){return this.g?this.g.b:null};I.prototype.drmInfo=I.prototype.drmInfo;
I.prototype.Wb=function(){return this.Pa};I.prototype.isBuffering=I.prototype.Wb;I.prototype.gb=function(){if(this.w)return Promise.resolve();this.dispatchEvent(new H("unloading"));if(this.j){var a=new q(7,7E3);return yc(this.j,a).then(this.Bb.bind(this))}return this.Bb()};I.prototype.unload=I.prototype.gb;I.prototype.Sa=function(){return this.i?this.i.Sa():0};I.prototype.getPlaybackRate=I.prototype.Sa;I.prototype.Wc=function(a){this.i&&Sb(this.i,a)};I.prototype.trickPlay=I.prototype.Wc;
I.prototype.Nb=function(){this.i&&Sb(this.i,1)};I.prototype.cancelTrickPlay=I.prototype.Nb;I.prototype.getTracks=function(){if(!this.b)return[];var a=ac(this.b);return Hc($b(this.b),a).filter(function(a){return 0>this.ma.indexOf(a.id)}.bind(this))};I.prototype.getTracks=I.prototype.getTracks;
I.prototype.Dc=function(a,b){if(this.b){var c=Ic($b(this.b),a);if(c&&(c=c.stream,c.allowedByApplication&&c.allowedByKeySystem)){this.C.push({timestamp:Date.now()/1E3,id:c.id,type:a.type,fromAdaptation:!1});"text"!=a.type&&this.configure({abr:{enabled:!1}});var d={};d[a.type]=c;Wc(this,d,b)}}};I.prototype.selectTrack=I.prototype.Dc;I.prototype.Zb=function(){return"showing"==this.m.mode};I.prototype.isTextTrackVisible=I.prototype.Zb;I.prototype.Fc=function(a){this.m.mode=a?"showing":"hidden";Xc(this)};
I.prototype.setTextTrackVisibility=I.prototype.Fc;
I.prototype.getStats=function(){Yc(this);var a={},b={},c=this.f&&this.f.getVideoPlaybackQuality?this.f.getVideoPlaybackQuality():{};this.b&&(b=ac(this.b),a=b.video||{},b=b.audio||{});return{width:a.width||0,height:a.height||0,streamBandwidth:a.bandwidth+b.bandwidth||0,decodedFrames:Number(c.totalVideoFrames),droppedFrames:Number(c.droppedVideoFrames),estimatedBandwidth:this.a.abr.manager.getBandwidthEstimate(),playTime:this.pa,bufferingTime:this.J,switchHistory:this.C.slice(0)}};
I.prototype.getStats=I.prototype.getStats;
I.prototype.addTextTrack=function(a,b,c,d,e){if(!this.b)return Promise.reject();for(var f=$b(this.b),g,h=0;h<this.c.periods.length;h++)if(this.c.periods[h]==f){if(h==this.c.periods.length-1){if(g=this.c.presentationTimeline.Z()-f.startTime,Infinity==g)return Promise.reject()}else g=this.c.periods[h+1].startTime-f.startTime;break}var m={id:this.Kb++,createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(){return 1},getSegmentReference:function(b){return 1!=b?null:new G(1,0,g,
function(){return[a]},0,null)},initSegmentReference:null,presentationTimeOffset:0,mimeType:d,codecs:e||"",bandwidth:0,kind:c,encrypted:!1,keyId:null,language:b,allowedByApplication:!0,allowedByKeySystem:!0};d={language:b,type:"text",primary:!1,drmInfos:[],streams:[m]};this.ma.push(m.id);f.streamSets.push(d);return bc(this.b,m).then(function(){if(!this.w)return this.ma.splice(this.ma.indexOf(m.id),1),Vc(this,f),Rc(this),{id:m.id,active:!1,type:"text",bandwidth:0,language:b,kind:c,width:null,height:null}}.bind(this))};
I.prototype.addTextTrack=I.prototype.addTextTrack;I.prototype.Fb=function(a,b){this.Ba.width=a;this.Ba.height=b};I.prototype.setMaxHardwareResolution=I.prototype.Fb;
function Pc(a){a.v&&a.v.ka(a.A,"sourceopen");a.f&&(a.f.removeAttribute("src"),a.f.load());var b=Promise.all([a.a?a.a.abr.manager.stop():null,a.g?a.g.o():null,a.G?a.G.o():null,a.i?a.i.o():null,a.b?a.b.o():null,a.l?a.l.stop():null]);a.g=null;a.G=null;a.i=null;a.b=null;a.l=null;a.c=null;a.na=null;a.oa=null;a.A=null;a.s={};a.C=[];a.pa=0;a.J=0;return b}k=I.prototype;k.Bb=function(){return this.l?Pc(this).then(function(){this.w||(this.Ib(!1),this.oa=Oc(this))}.bind(this)):Promise.resolve()};
function Tc(){return{".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:"",audioRobustness:"",serverCertificate:null}}}
function Nc(a){return{drm:{retryParameters:Ga(),servers:{},clearKeys:{},advanced:{}},manifest:{retryParameters:Ga(),dash:{customScheme:function(a){if(a)return null},clockSyncUri:""}},streaming:{retryParameters:Ga(),rebufferingGoal:2,bufferingGoal:30,bufferBehind:30,ignoreTextStreamFailures:!1},abr:{manager:a.hb,enabled:!0,defaultBandwidthEstimate:5E5},preferredAudioLanguage:"",preferredTextLanguage:"",restrictions:{minWidth:0,maxWidth:Infinity,minHeight:0,maxHeight:Infinity,minPixels:0,maxPixels:Infinity,
minAudioBandwidth:0,maxAudioBandwidth:Infinity,minVideoBandwidth:0,maxVideoBandwidth:Infinity}}}k.Na=function(a){var b=this.b?ac(this.b):{};Gc(this.g,b,a);b=a.streamSets.some(Jc);Fc(a,this.a.restrictions,this.Ba)&&!this.j&&Rc(this);a=!a.streamSets.some(Jc);b?a&&this.aa(new q(4,4012)):this.aa(new q(4,4011))};function Wc(a,b,c){for(var d in b){var e=b[d],f=c||"text"==d;a.qa?a.s[d]={stream:e,clear:f}:cc(a.b,d,e,f?0:void 0)}}
function Yc(a){if(a.c){var b=Date.now()/1E3;a.Pa?a.J+=b-a.X:a.pa+=b-a.X;a.X=b}}k.Lc=function(a,b,c){this.a.abr.manager.segmentDownloaded(a,b,c)};k.Ib=function(a){Yc(this);this.Pa=a;this.dispatchEvent(new H("buffering",{buffering:a}))};k.Kc=function(){if(this.b){var a=this.b,b;for(b in a.b){var c=a.b[b];c.da||0<Gb(a.c,b,Ob(a.i))||c.ca||(c.ha?ec(c,0):null==Eb(a.c,b)?null==c.ba&&ic(a,c,0):(Xb(c),fc(a,c,0)))}}};
function Zc(a,b,c){if(!C(b).some(Jc))return a.aa(new q(4,4012)),{};var d={};if(c)d=b;else{c=ac(a.b);for(var e in c){var f=c[e];f.allowedByApplication&&f.allowedByKeySystem&&b[e].language==f.language||(d[e]=b[e])}}if(Ma(d))return{};ia(Object.keys(d));var g=a.a.abr.manager.chooseStreams(d);return Oa(d,function(a){return!!g[a]})?g:(a.aa(new q(4,4012)),{})}
function Vc(a,b){var c={audio:!1,text:!1},d=Kc(b,a.a,c),e=Zc(a,d),f;for(f in e)a.C.push({timestamp:Date.now()/1E3,id:e[f].id,type:f,fromAdaptation:!0});Wc(a,e,!0);Sc(a);d.text&&d.audio&&c.text&&d.text.language!=d.audio.language&&(a.m.mode="showing",Xc(a))}k.Hc=function(a){this.qa=!0;this.a.abr.manager.disable();a=Kc(a,this.a);a=Zc(this,a,!0);for(var b in this.s)a[b]=this.s[b].stream;this.s={};for(b in a)this.C.push({timestamp:Date.now()/1E3,id:a[b].id,type:b,fromAdaptation:!0});this.j||Rc(this);return a};
k.Mb=function(){this.qa=!1;this.a.abr.enabled&&this.a.abr.manager.enable();for(var a in this.s){var b=this.s[a];cc(this.b,a,b.stream,b.clear?0:void 0)}this.s={}};k.eb=function(a,b){var c=ac(this.b),d;for(d in a){var e=a[d];c[d]!=e?this.C.push({timestamp:Date.now()/1E3,id:e.id,type:d,fromAdaptation:!0}):delete a[d]}if(!Ma(a)&&this.b){for(d in a)cc(this.b,d,a[d],"video"==d?b:void 0);Sc(this)}};
function Sc(a){Promise.resolve().then(function(){this.w||this.dispatchEvent(new H("adaptation"))}.bind(a))}function Rc(a){Promise.resolve().then(function(){this.w||this.dispatchEvent(new H("trackschanged"))}.bind(a))}function Xc(a){a.dispatchEvent(new H("texttrackvisibility"))}k.aa=function(a){this.dispatchEvent(new H("error",{detail:a}))};k.Ic=function(a){this.dispatchEvent(a)};
k.lc=function(){if(this.f.error){var a=this.f.error.code;if(1!=a){var b=this.f.error.msExtendedCode;b&&(0>b&&(b+=Math.pow(2,32)),b=b.toString(16));this.aa(new q(3,3016,a,b))}}};k.Jc=function(a){var b=$b(this.b),c=!1;b.streamSets.forEach(function(b){b.streams.forEach(function(b){var d=b.allowedByKeySystem;b.keyId&&b.keyId in a&&(b.allowedByKeySystem="output-restricted"!=a[b.keyId]);d!=b.allowedByKeySystem&&(c=!0)})});Vc(this,b);c&&Rc(this)};var $c="ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(" "),ad="buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(" "),cd=["loop","playbackRate"],dd=["pause","play"],ed=["adaptation","buffering","error","texttrackvisibility","trackschanged"],fd="getConfiguration getManifestUri getPlaybackRate getTracks getStats isBuffering isLive isTextTrackVisible seekRange".split(" "),gd=[["getConfiguration",
"configure"]],hd=[["isTextTrackVisible","setTextTrackVisibility"]],id="configure resetConfiguration trickPlay cancelTrickPlay selectTrack setTextTrackVisibility addTextTrack".split(" "),jd=["load","unload"];
function kd(a){return JSON.stringify(a,function(a,c){if("manager"!=a&&"function"!=typeof c){if(c instanceof Event||c instanceof H){var d={},e;for(e in c){var f=c[e];f&&"object"==typeof f||e in Event||(d[e]=f)}return d}if(c instanceof TimeRanges)for(d={__type__:"TimeRanges",length:c.length,start:[],end:[]},e=0;e<c.length;++e)d.start.push(c.start(e)),d.end.push(c.end(e));else d="number"==typeof c?isNaN(c)?"NaN":isFinite(c)?c:0>c?"-Infinity":"Infinity":c;return d}})}
function ld(a){return JSON.parse(a,function(a,c){return"NaN"==c?NaN:"-Infinity"==c?-Infinity:"Infinity"==c?Infinity:c&&"object"==typeof c&&"TimeRanges"==c.__type__?md(c):c})}function md(a){return{length:a.length,start:function(b){return a.start[b]},end:function(b){return a.end[b]}}};function nd(a,b,c,d,e){this.C=a;this.l=b;this.w=c;this.A=d;this.s=e;this.f=this.j=this.h=!1;this.v="";this.a=this.i=null;this.b={video:{},player:{}};this.m=0;this.c={};this.g=null}k=nd.prototype;k.o=function(){od(this);this.a&&(this.a.stop(function(){},function(){}),this.a=null);this.A=this.w=this.l=null;this.f=this.j=this.h=!1;this.g=this.c=this.b=this.a=this.i=null;return Promise.resolve()};k.N=function(){return this.f};k.$a=function(){return this.v};
k.init=function(){if(window.chrome&&chrome.cast&&chrome.cast.isAvailable){delete window.__onGCastApiAvailable;this.h=!0;this.l();var a=new chrome.cast.SessionRequest(this.C),a=new chrome.cast.ApiConfig(a,this.cc.bind(this),this.jc.bind(this),"origin_scoped");chrome.cast.initialize(a,function(){},function(){})}else window.__onGCastApiAvailable=function(a){a&&this.init()}.bind(this)};k.bb=function(a){this.i=a;this.f&&pd(this,{type:"appData",appData:this.i})};
k.cast=function(a){if(!this.h)return Promise.reject(new q(8,8E3));if(!this.j)return Promise.reject(new q(8,8001));if(this.f)return Promise.reject(new q(8,8002));this.g=new w;chrome.cast.requestSession(this.Ya.bind(this,a),this.ob.bind(this));return this.g};
k.get=function(a,b){if("video"==a){if(0<=dd.indexOf(b))return this.zb.bind(this,a,b)}else if("player"==a){if(0<=id.indexOf(b))return this.zb.bind(this,a,b);if(0<=jd.indexOf(b))return this.xc.bind(this,a,b);if(0<=fd.indexOf(b))return this.wb.bind(this,a,b)}return this.wb(a,b)};k.set=function(a,b,c){this.b[a][b]=c;pd(this,{type:"set",targetName:a,property:b,value:c})};
k.Ya=function(a,b){this.a=b;this.a.addUpdateListener(this.pb.bind(this));this.a.addMessageListener("urn:x-cast:com.google.shaka.v2",this.dc.bind(this));this.pb();pd(this,{type:"init",initState:a,appData:this.i});this.g.resolve()};k.ob=function(a){var b=8003;switch(a.code){case "cancel":b=8004;break;case "timeout":b=8005;break;case "receiver_unavailable":b=8006}this.g.reject(new q(8,b,a))};k.wb=function(a,b){return this.b[a][b]};
k.zb=function(a,b){pd(this,{type:"call",targetName:a,methodName:b,args:Array.prototype.slice.call(arguments,2)})};k.xc=function(a,b){var c=Array.prototype.slice.call(arguments,2),d=new w,e=this.m.toString();this.m++;this.c[e]=d;pd(this,{type:"asyncCall",targetName:a,methodName:b,args:c,id:e});return d};k.cc=function(a){var b=this.s();this.g=new w;this.Ya(b,a)};k.jc=function(a){this.j="available"==a;this.l()};
k.pb=function(){var a=this.a?"connected"==this.a.status:!1;if(this.f&&!a){this.A();for(var b in this.b)this.b[b]={};od(this)}this.v=(this.f=a)?this.a.receiver.friendlyName:"";this.l()};function od(a){for(var b in a.c){var c=a.c[b];delete a.c[b];c.reject(new q(7,7E3))}}
k.dc=function(a,b){var c=ld(b);switch(c.type){case "event":var d=c.targetName,e=c.event;this.w(d,new H(e.type,e));break;case "update":e=c.update;for(d in e){var c=this.b[d]||{},f;for(f in e[d])c[f]=e[d][f]}break;case "asyncComplete":if(d=c.id,f=c.error,c=this.c[d],delete this.c[d],c)if(f){d=new q(f.category,f.code);for(e in f)d[e]=f[e];c.reject(d)}else c.resolve()}};function pd(a,b){var c=kd(b);a.a.sendMessage("urn:x-cast:com.google.shaka.v2",c,function(){},ha)};function J(a,b,c){p.call(this);this.c=a;this.b=b;this.h=this.f=this.g=this.i=this.j=null;this.a=new nd(c,this.Mc.bind(this),this.Nc.bind(this),this.Oc.bind(this),this.mb.bind(this));qd(this)}ba(J);l("shaka.cast.CastProxy",J);J.prototype.o=function(){var a=[this.h?this.h.o():null,this.b?this.b.o():null,this.a?this.a.o():null];this.a=this.h=this.i=this.j=this.b=this.c=null;return Promise.all(a)};J.prototype.destroy=J.prototype.o;J.prototype.Vb=function(){return this.j};J.prototype.getVideo=J.prototype.Vb;
J.prototype.Tb=function(){return this.i};J.prototype.getPlayer=J.prototype.Tb;J.prototype.Lb=function(){return this.a?this.a.h&&this.a.j:!1};J.prototype.canCast=J.prototype.Lb;J.prototype.N=function(){return this.a?this.a.N():!1};J.prototype.isCasting=J.prototype.N;J.prototype.$a=function(){return this.a?this.a.$a():""};J.prototype.receiverName=J.prototype.$a;J.prototype.cast=function(){var a=this.mb();return this.a.cast(a).then(function(){return this.b.gb()}.bind(this))};J.prototype.cast=J.prototype.cast;
J.prototype.bb=function(a){this.a.bb(a)};J.prototype.setAppData=J.prototype.bb;J.prototype.Uc=function(){var a=this.a;if(a.f){var b=a.s();chrome.cast.requestSession(a.Ya.bind(a,b),a.ob.bind(a))}};J.prototype.suggestDisconnect=J.prototype.Uc;
function qd(a){a.a.init();a.h=new z;$c.forEach(function(a){B(this.h,this.c,a,this.$c.bind(this))}.bind(a));ed.forEach(function(a){B(this.h,this.b,a,this.tc.bind(this))}.bind(a));a.j={};for(var b in a.c)Object.defineProperty(a.j,b,{configurable:!1,enumerable:!0,get:a.Zc.bind(a,b),set:a.ad.bind(a,b)});a.i={};for(b in a.b)Object.defineProperty(a.i,b,{configurable:!1,enumerable:!0,get:a.sc.bind(a,b)});a.g=new p;a.g.S=a.j;a.f=new p;a.f.S=a.i}k=J.prototype;
k.mb=function(){var a={video:{},player:{},playerAfterLoad:{},manifest:this.b.na,startTime:null};this.c.pause();cd.forEach(function(b){a.video[b]=this.c[b]}.bind(this));this.c.ended||(a.startTime=this.c.currentTime);gd.forEach(function(b){var c=b[1];b=this.b[b[0]]();a.player[c]=b}.bind(this));hd.forEach(function(b){var c=b[1];b=this.b[b[0]]();a.playerAfterLoad[c]=b}.bind(this));return a};k.Mc=function(){this.dispatchEvent(new H("caststatuschanged"))};
k.Oc=function(){gd.forEach(function(a){var b=a[1];a=this.a.get("player",a[0])();this.b[b](a)}.bind(this));var a=this.a.get("player","getManifestUri")(),b=this.a.get("video","ended"),c=Promise.resolve(),d=this.c.autoplay,e=null;b||(e=this.a.get("video","currentTime"));a&&(this.c.autoplay=!1,c=this.b.load(a,e),c["catch"](function(a){this.b.dispatchEvent(new H("error",{detail:a}))}.bind(this)));var f={};cd.forEach(function(a){f[a]=this.a.get("video",a)}.bind(this));c.then(function(){cd.forEach(function(a){this.c[a]=
f[a]}.bind(this));hd.forEach(function(a){var b=a[1];a=this.a.get("player",a[0])();this.b[b](a)}.bind(this));this.c.autoplay=d;a&&this.c.play()}.bind(this))};
k.Zc=function(a){if("addEventListener"==a)return this.g.addEventListener.bind(this.g);if("removeEventListener"==a)return this.g.removeEventListener.bind(this.g);if(this.a.N()&&!Object.keys(this.a.b.video).length){var b=this.c[a];if("function"!=typeof b)return b}return this.a.N()?this.a.get("video",a):(b=this.c[a],"function"==typeof b&&(b=b.bind(this.c)),b)};k.ad=function(a,b){this.a.N()?this.a.set("video",a,b):this.c[a]=b};k.$c=function(a){this.a.N()||this.g.dispatchEvent(new H(a.type,a))};
k.sc=function(a){return"addEventListener"==a?this.f.addEventListener.bind(this.f):"removeEventListener"==a?this.f.removeEventListener.bind(this.f):"getNetworkingEngine"==a?this.b.nb.bind(this.b):this.a.N()&&!Object.keys(this.a.b.video).length&&0<=fd.indexOf(a)||!this.a.N()?(a=this.b[a],a.bind(this.b)):this.a.get("player",a)};k.tc=function(a){this.a.N()||this.f.dispatchEvent(a)};k.Nc=function(a,b){this.a.N()&&("video"==a?this.g.dispatchEvent(b):"player"==a&&this.f.dispatchEvent(b))};function L(a,b,c){p.call(this);this.b=a;this.a=b;this.i={video:a,player:b};this.j=c||function(){};this.h=!1;this.g=!0;this.c=this.f=null;rd(this)}ba(L);l("shaka.cast.CastReceiver",L);L.prototype.Xb=function(){return this.h};L.prototype.isConnected=L.prototype.Xb;L.prototype.Yb=function(){return this.g};L.prototype.isIdle=L.prototype.Yb;
L.prototype.o=function(){var a=this.a?this.a.o():Promise.resolve();null!=this.c&&window.clearTimeout(this.c);this.j=this.i=this.a=this.b=null;this.h=!1;this.g=!0;this.c=this.f=null;return a.then(function(){cast.receiver.CastReceiverManager.getInstance().stop()})};L.prototype.destroy=L.prototype.o;
function rd(a){var b=cast.receiver.CastReceiverManager.getInstance();b.onSenderConnected=a.ub.bind(a);b.onSenderDisconnected=a.ub.bind(a);b.onSystemVolumeChanged=a.Rb.bind(a);a.f=b.getCastMessageBus("urn:x-cast:com.google.shaka.v2");a.f.onMessage=a.ec.bind(a);b.start();$c.forEach(function(a){this.b.addEventListener(a,this.xb.bind(this,"video"))}.bind(a));ed.forEach(function(a){this.a.addEventListener(a,this.xb.bind(this,"player"))}.bind(a));a.a.Fb(1920,1080);a.a.addEventListener("loading",function(){this.g=
!1;sd(this)}.bind(a));a.a.addEventListener("unloading",function(){this.g=!0;sd(this)}.bind(a));a.b.addEventListener("ended",function(){window.setTimeout(function(){this.b&&this.b.ended&&(this.g=!0,sd(this))}.bind(this),5E3)}.bind(a))}k=L.prototype;k.ub=function(){this.h=!!cast.receiver.CastReceiverManager.getInstance().getSenders().length;sd(this)};function sd(a){Promise.resolve().then(function(){this.dispatchEvent(new H("caststatuschanged"))}.bind(a))}
function td(a,b,c){for(var d in b.player)a.a[d](b.player[d]);a.j(c);c=Promise.resolve();var e=a.b.autoplay;b.manifest&&(a.b.autoplay=!1,c=a.a.load(b.manifest,b.startTime),c["catch"](function(a){this.a.dispatchEvent(new H("error",{detail:a}))}.bind(a)));c.then(function(){for(var a in b.video){var c=b.video[a];this.b[a]=c}for(a in b.playerAfterLoad)c=b.playerAfterLoad[a],this.a[a](c);this.b.autoplay=e;b.manifest&&this.b.play()}.bind(a))}
k.xb=function(a,b){this.Za();ud(this,{type:"event",targetName:a,event:b})};k.Za=function(){null!=this.c&&window.clearTimeout(this.c);this.c=window.setTimeout(this.Za.bind(this),500);var a={video:{},player:{}};ad.forEach(function(b){a.video[b]=this.b[b]}.bind(this));fd.forEach(function(b){a.player[b]=this.a[b]()}.bind(this));var b=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();b&&(a.video.volume=b.level,a.video.muted=b.muted);ud(this,{type:"update",update:a})};
k.Rb=function(){var a=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();a&&ud(this,{type:"update",update:{video:{volume:a.level,muted:a.muted}}});ud(this,{type:"event",targetName:"video",event:{type:"volumechange"}})};
k.ec=function(a){var b=ld(a.data);switch(b.type){case "init":td(this,b.initState,b.appData);this.Za();break;case "appData":this.j(b.appData);break;case "set":var c=b.targetName,d=b.property,e=b.value;if("video"==c)if(b=cast.receiver.CastReceiverManager.getInstance(),"volume"==d){b.setSystemVolumeLevel(e);break}else if("muted"==d){b.setSystemVolumeMuted(e);break}this.i[c][d]=e;break;case "call":c=b.targetName;d=b.methodName;e=b.args;c=this.i[c];c[d].apply(c,e);break;case "asyncCall":c=b.targetName,
d=b.methodName,e=b.args,b=b.id,a=a.senderId,c=this.i[c],c[d].apply(c,e).then(this.Db.bind(this,a,b,null),this.Db.bind(this,a,b))}};k.Db=function(a,b,c){ud(this,{type:"asyncComplete",id:b,error:c},a)};function ud(a,b,c){a.h&&(b=kd(b),c?a.f.getCastChannel(c).send(b):a.f.broadcast(b))};function vd(a,b){var c=M(a,b);return 1!=c.length?null:c[0]}function M(a,b){return Array.prototype.filter.call(a.childNodes,function(a){return a.tagName==b})}function wd(a){return(a=a.firstChild)&&a.nodeType==Node.TEXT_NODE?a.nodeValue.trim():null}function N(a,b,c,d){var e=null;a=a.getAttribute(b);null!=a&&(e=c(a));return null==e?void 0!==d?d:null:e}function xd(a){if(!a)return null;a=Date.parse(a);return isNaN(a)?null:Math.floor(a/1E3)}
function O(a){if(!a)return null;a=/^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$/.exec(a);if(!a)return null;a=31536E3*Number(a[1]||null)+2592E3*Number(a[2]||null)+86400*Number(a[3]||null)+3600*Number(a[4]||null)+60*Number(a[5]||null)+Number(a[6]||null);return isFinite(a)?a:null}function yd(a){var b=/([0-9]+)-([0-9]+)/.exec(a);if(!b)return null;a=Number(b[1]);if(!isFinite(a))return null;b=Number(b[2]);return isFinite(b)?{start:a,end:b}:null}
function zd(a){a=Number(a);return a%1?null:a}function Ad(a){a=Number(a);return!(a%1)&&0<a?a:null}function Bd(a){a=Number(a);return!(a%1)&&0<=a?a:null};var Cd={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"};
function Dd(a,b){var c=Ed(a),d=null,e=c.filter(function(a){return"urn:mpeg:dash:mp4protection:2011"==a.Cb?(d=a.init||d,!1):!0}),f=c.map(function(a){return a.keyId}).filter(Da),g=null;if(0<f.length&&(g=f[0],f.some(Ea(g))))throw new q(4,4010);f=[];0<e.length?(f=Fd(d,b,e),f.length||(f=[Hd("",d)])):0<c.length&&(f=C(Cd).map(function(a){return Hd(a,d)}));return{kb:g,dd:d,drmInfos:f,lb:!0}}
function Id(a,b,c){var d=Dd(a,b);if(c.lb){a=1==c.drmInfos.length&&!c.drmInfos[0].keySystem;b=!d.drmInfos.length;if(!c.drmInfos.length||a&&!b)c.drmInfos=d.drmInfos;c.lb=!1}else if(0<d.drmInfos.length&&(c.drmInfos=c.drmInfos.filter(function(a){return d.drmInfos.some(function(b){return b.keySystem==a.keySystem})}),!c.drmInfos.length))throw new q(4,4008);return d.kb||c.kb}
function Hd(a,b){return{keySystem:a,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,initData:b||[]}}function Fd(a,b,c){return c.map(function(c){var e=Cd[c.Cb];return e?[Hd(e,c.init||a)]:b(c.node)||[]}).reduce(t,[])}
function Ed(a){return a.map(function(a){var c=a.getAttribute("schemeIdUri"),d=a.getAttribute("cenc:default_KID"),e=M(a,"cenc:pssh").map(wd);if(!c)return null;c=c.toLowerCase();if(d&&(d=d.replace(/-/g,"").toLowerCase(),0<=d.indexOf(" ")))throw new q(4,4009);var f=[];try{f=e.map(function(a){return{initDataType:"cenc",initData:Xa(a)}})}catch(g){throw new q(4,4007);}return{node:a,Cb:c,keyId:d,init:0<f.length?f:null}}).filter(Da)};var Jd=1/15;function Kd(a,b,c,d,e){null!==e&&(e=Math.round(e));var f={RepresentationID:b,Number:c,Bandwidth:d,Time:e};return a.replace(/\$(RepresentationID|Number|Bandwidth|Time)?(?:%0([0-9]+)d)?\$/g,function(a,b,c){if("$$"==a)return"$";var d=f[b];if(null==d)return a;"RepresentationID"==b&&c&&(c=void 0);a=d.toString();c=window.parseInt(c,10)||1;return Array(Math.max(0,c-a.length)+1).join("0")+a})}
function Ld(a,b,c){if(c.length){var d=c[0];d.startTime<=Jd&&(c[0]=new G(d.position,0,d.endTime,d.a,d.L,d.D));a||(a=c[c.length-1],a.startTime>b||(c[c.length-1]=new G(a.position,a.startTime,b,a.a,a.L,a.D)))}}function P(a,b){if(!b.length)return a;var c=b.map(function(a){return new oa(a)});return a.map(function(a){return new oa(a)}).map(function(a){return c.map(a.resolve.bind(a))}).reduce(t,[]).map(function(a){return a.toString()})}
function Md(a,b){var c=Q(a,b,"timescale"),d=1;c&&(d=Ad(c)||1);c=Q(a,b,"duration");(c=Ad(c||""))&&(c/=d);var e=Q(a,b,"startNumber"),f=Q(a,b,"presentationTimeOffset"),g=Bd(e||"");if(null==e||null==g)g=1;var h=Nd(a,b,"SegmentTimeline"),e=null;if(h){for(var e=d,m=Number(f),n=a.H.duration||Infinity,h=M(h,"S"),r=[],u=0,A=0;A<h.length;++A){var x=h[A],K=N(x,"t",Bd),jb=N(x,"d",Bd),x=N(x,"r",zd);null!=K&&(K-=m);if(!jb)break;K=null!=K?K:u;x=x||0;if(0>x)if(A+1<h.length){x=N(h[A+1],"t",Bd);if(null==x)break;else if(K>=
x)break;x=Math.ceil((x-K)/jb)-1}else{if(Infinity==n)break;else if(K/e>=n)break;x=Math.ceil((n*e-K)/jb)-1}0<r.length&&K!=u&&(r[r.length-1].end=K/e);for(var Gd=0;Gd<=x;++Gd)u=K+jb,r.push({start:K/e,end:u/e}),K=u}e=r}return{Ia:d,F:c,ia:g,presentationTimeOffset:Number(f)/d||0,B:e}}function Q(a,b,c){return[b(a.u),b(a.P),b(a.K)].filter(Da).map(function(a){return a.getAttribute(c)}).reduce(function(a,b){return a||b})}
function Nd(a,b,c){return[b(a.u),b(a.P),b(a.K)].filter(Da).map(function(a){return vd(a,c)}).reduce(function(a,b){return a||b})};function Od(a){this.b=a;this.c=0==Pd;this.a=0}var Pd=1;function Qd(a){return a.a<a.b.byteLength}function Rd(a){try{var b=a.b.getUint8(a.a)}catch(c){Sd()}a.a+=1;return b}function Td(a){try{var b=a.b.getUint16(a.a,a.c)}catch(c){Sd()}a.a+=2;return b}function R(a){try{var b=a.b.getUint32(a.a,a.c)}catch(c){Sd()}a.a+=4;return b}
function Ud(a){var b,c;try{a.c?(b=a.b.getUint32(a.a,!0),c=a.b.getUint32(a.a+4,!0)):(c=a.b.getUint32(a.a,!1),b=a.b.getUint32(a.a+4,!1))}catch(d){Sd()}if(2097151<c)throw new q(3,3001);a.a+=8;return c*Math.pow(2,32)+b}function Vd(a,b){a.a+b>a.b.byteLength&&Sd();var c=a.b.buffer.slice(a.a,a.a+b);a.a+=b;return new Uint8Array(c)}function S(a,b){a.a+b>a.b.byteLength&&Sd();a.a+=b}
function Wd(a){var b=a.a;try{for(;Qd(a)&&a.b.getUint8(a.a);)a.a+=1}catch(c){Sd()}b=a.b.buffer.slice(b,a.a);a.a+=1;return D(b)}function Sd(){throw new q(3,3E3);};function Xd(a,b){for(;Qd(b);){var c=b.a,d=R(b),e=R(b);1==d?d=Ud(b):d||(d=b.b.byteLength-c);if(e==a)return d;S(b,d-(b.a-c))}return-1}function Yd(a,b){for(var c=new Od(new DataView(a)),d=[[1836019574,0],[1953653099,0],[1835297121,0],[1835626086,0],[1937007212,0],[1937011556,8],[b,0]],e=-1,f=0;f<d.length;f++){var g=d[f][1],e=Xd(d[f][0],c);if(-1==e)return-1;S(c,g)}return e};function Zd(a,b,c,d){var e=[];a=new Od(new DataView(a));var f=Xd(1936286840,a);if(-1==f)throw new q(3,3004);var g=Rd(a);S(a,3);S(a,4);var h=R(a);if(!h)throw new q(3,3005);var m,n;g?(m=Ud(a),n=Ud(a)):(m=R(a),n=R(a));S(a,2);g=Td(a);d=m-d;b=b+f+n;for(f=0;f<g;f++){m=R(a);n=(m&2147483648)>>>31;m&=2147483647;var r=R(a);S(a,4);if(1==n)throw new q(3,3006);e.push(new G(e.length,d/h,(d+r)/h,function(){return c},b,b+m-1));d+=r;b+=m}return e};function T(a){this.a=a}l("shaka.media.SegmentIndex",T);T.prototype.o=function(){this.a=null;return Promise.resolve()};T.prototype.destroy=T.prototype.o;T.prototype.find=function(a){for(var b=this.a.length-1;0<=b;--b){var c=this.a[b];if(a>=c.startTime&&a<c.endTime)return c.position}return null};T.prototype.find=T.prototype.find;T.prototype.get=function(a){if(!this.a.length)return null;a-=this.a[0].position;return 0>a||a>=this.a.length?null:this.a[a]};T.prototype.get=T.prototype.get;
T.prototype.Wa=function(a){for(var b=[],c=0,d=0;c<this.a.length&&d<a.length;){var e=this.a[c],f=a[d];e.startTime<f.startTime?(b.push(e),c++):(e.startTime>f.startTime||(.1<Math.abs(e.endTime-f.endTime)?b.push(f):b.push(e),c++),d++)}for(;c<this.a.length;)b.push(this.a[c++]);if(b.length)for(c=b[b.length-1].position+1;d<a.length;)f=a[d++],f=new G(c++,f.startTime,f.endTime,f.a,f.L,f.D),b.push(f);else b=a;this.a=b};T.prototype.merge=T.prototype.Wa;
T.prototype.Ra=function(a){for(var b=0;b<this.a.length&&!(this.a[b].endTime>a);++b);this.a.splice(0,b)};T.prototype.evict=T.prototype.Ra;function $d(a){this.b=a;this.a=new Od(a);ae||(ae=[new Uint8Array([255]),new Uint8Array([127,255]),new Uint8Array([63,255,255]),new Uint8Array([31,255,255,255]),new Uint8Array([15,255,255,255,255]),new Uint8Array([7,255,255,255,255,255]),new Uint8Array([3,255,255,255,255,255,255]),new Uint8Array([1,255,255,255,255,255,255,255])])}var ae;
function be(a){var b;b=ce(a);if(7<b.length)throw new q(3,3002);for(var c=0,d=0;d<b.length;d++)c=256*c+b[d];b=c;c=ce(a);a:{for(d=0;d<ae.length;d++)if($a(c,ae[d])){d=!0;break a}d=!1}if(d)c=a.b.byteLength-a.a.a;else{if(8==c.length&&c[1]&224)throw new q(3,3001);for(var d=c[0]&(1<<8-c.length)-1,e=1;e<c.length;e++)d=256*d+c[e];c=d}c=a.a.a+c<=a.b.byteLength?c:a.b.byteLength-a.a.a;d=new DataView(a.b.buffer,a.b.byteOffset+a.a.a,c);S(a.a,c);return new de(b,d)}
function ce(a){var b=Rd(a.a),c;for(c=1;8>=c&&!(b&1<<8-c);c++);if(8<c)throw new q(3,3002);var d=new Uint8Array(c);d[0]=b;for(b=1;b<c;b++)d[b]=Rd(a.a);return d}function de(a,b){this.id=a;this.a=b}function ee(a){if(8<a.a.byteLength)throw new q(3,3002);if(8==a.a.byteLength&&a.a.getUint8(0)&224)throw new q(3,3001);for(var b=0,c=0;c<a.a.byteLength;c++)var d=a.a.getUint8(c),b=256*b+d;return b};function fe(a,b,c,d,e,f){function g(){return e}var h=[];a=new $d(a.a);for(var m=-1,n=-1;Qd(a.a);){var r=be(a);if(187==r.id){var u=ge(r);u&&(r=c*(u.Yc-f),u=b+u.wc,0<=m&&h.push(new G(h.length,m,r,g,n,u-1)),m=r,n=u)}}0<=m&&h.push(new G(h.length,m,d,g,n,null));return h}function ge(a){var b=new $d(a.a);a=be(b);if(179!=a.id)throw new q(3,3013);a=ee(a);b=be(b);if(183!=b.id)throw new q(3,3012);for(var b=new $d(b.a),c=0;Qd(b.a);){var d=be(b);if(241==d.id){c=ee(d);break}}return{Yc:a,wc:c}};function he(a,b){var c=Nd(a,b,"Initialization");if(!c)return null;var d=a.u.M,e=c.getAttribute("sourceURL");e&&(d=P(a.u.M,[e]));var e=0,f=null;if(c=N(c,"range",yd))e=c.start,f=c.end;return new Vb(function(){return d},e,f)}
function ie(a,b){var c=Q(a,je,"presentationTimeOffset"),d=he(a,je),e;e=Number(c);var f=a.u.mimeType.split("/")[1];if("text"!=a.u.contentType&&"mp4"!=f&&"webm"!=f)throw new q(4,4006);if("webm"==f&&!d)throw new q(4,4005);var g=Nd(a,je,"RepresentationIndex"),h=Q(a,je,"indexRange"),m=a.u.M,h=yd(h||"");if(g){var n=g.getAttribute("sourceURL");n&&(m=P(a.u.M,[n]));h=N(g,"range",yd,h)}if(!h)throw new q(4,4002);e=ke(a,b,d,m,h.start,h.end,f,e);return{createSegmentIndex:e.createSegmentIndex,findSegmentPosition:e.findSegmentPosition,
getSegmentReference:e.getSegmentReference,initSegmentReference:d,presentationTimeOffset:Number(c)||0}}
function ke(a,b,c,d,e,f,g,h){var m=a.presentationTimeline,n=a.H.start,r=a.H.duration,u=b,A=null;return{createSegmentIndex:function(){var b=[u(d,e,f),"webm"==g?u(c.a(),c.L,c.D):null];u=null;return Promise.all(b).then(function(b){var c,f=b[0];b=b[1]||null;if("mp4"==g)f=Zd(f,e,d,h);else{b=new $d(new DataView(b));if(440786851!=be(b).id)throw new q(3,3008);var u=be(b);if(408125543!=u.id)throw new q(3,3009);b=u.a.byteOffset;u=new $d(u.a);for(c=null;Qd(u.a);){var x=be(u);if(357149030==x.id){c=x;break}}if(!c)throw new q(3,
3010);u=new $d(c.a);c=1E6;for(x=null;Qd(u.a);){var ob=be(u);if(2807729==ob.id)c=ee(ob);else if(17545==ob.id)if(x=ob,4==x.a.byteLength)x=x.a.getFloat32(0);else if(8==x.a.byteLength)x=x.a.getFloat64(0);else throw new q(3,3003);}if(null==x)throw new q(3,3011);u=c/1E9;c=x*u;f=be(new $d(new DataView(f)));if(475249515!=f.id)throw new q(3,3007);f=fe(f,b,u,c,d,h)}Ld(a.Qa,r,f);m.Ea(n,f);A=new T(f)})},findSegmentPosition:function(a){return A.find(a)},getSegmentReference:function(a){return A.get(a)}}}
function je(a){return a.Ga};function le(a,b){var c=he(a,me),d;d=ne(a);var e=Md(a,me),f=e.ia;f||(f=1);var g=0;e.F?g=e.F*(f-1)-e.presentationTimeOffset:e.B&&0<e.B.length&&(g=e.B[0].start);d={F:e.F,startTime:g,ia:f,presentationTimeOffset:e.presentationTimeOffset,B:e.B,ua:d};if(!d.F&&!d.B&&1<d.ua.length)throw new q(4,4002);if(!d.F&&!a.H.duration&&!d.B&&1==d.ua.length)throw new q(4,4002);if(d.B&&!d.B.length)throw new q(4,4002);f=e=null;a.K.id&&a.u.id&&(f=a.K.id+","+a.u.id,e=b[f]);g=oe(a.H.duration,d.ia,a.u.M,d);Ld(a.Qa,a.H.duration,
g);e?(e.Wa(g),e.Ra(a.presentationTimeline.sa()-a.H.start)):(a.presentationTimeline.Ea(a.H.start,g),e=new T(g),f&&(b[f]=e));return{createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:e.find.bind(e),getSegmentReference:e.get.bind(e),initSegmentReference:c,presentationTimeOffset:d.presentationTimeOffset}}function me(a){return a.$}
function oe(a,b,c,d){var e=d.ua.length;d.B&&d.B.length!=d.ua.length&&(e=Math.min(d.B.length,d.ua.length));for(var f=[],g=d.startTime,h=0;h<e;h++){var m=d.ua[h],n=P(c,[m.ac]),r;r=null!=d.F?g+d.F:d.B?d.B[h].end:g+a;f.push(new G(h+b,g,r,function(a){return a}.bind(null,n),m.start,m.end));g=r}return f}
function ne(a){return[a.u.$,a.P.$,a.K.$].filter(Da).map(function(a){return M(a,"SegmentURL")}).reduce(function(a,c){return 0<a.length?a:c}).map(function(a){var c=a.getAttribute("media");a=N(a,"mediaRange",yd,{start:0,end:null});return{ac:c,start:a.start,end:a.end}})};function pe(a,b,c,d){var e=qe(a),f;f=Md(a,re);var g=Q(a,re,"media"),h=Q(a,re,"index");f={F:f.F,Ia:f.Ia,ia:f.ia,presentationTimeOffset:f.presentationTimeOffset,B:f.B,Va:g,Da:h};g=0+(f.Da?1:0);g+=f.B?1:0;g+=f.F?1:0;if(!g)throw new q(4,4002);1!=g&&(f.Da&&(f.B=null),f.F=null);if(!f.Da&&!f.Va)throw new q(4,4002);if(f.Da){c=a.u.mimeType.split("/")[1];if("mp4"!=c&&"webm"!=c)throw new q(4,4006);if("webm"==c&&!e)throw new q(4,4005);d=Kd(f.Da,a.u.id,null,a.bandwidth||null,null);d=P(a.u.M,[d]);a=ke(a,b,e,d,
0,null,c,f.presentationTimeOffset)}else f.F?(d||a.presentationTimeline.Xa(f.F),a=se(a,f)):(d=b=null,a.K.id&&a.u.id&&(d=a.K.id+","+a.u.id,b=c[d]),g=te(a,f),Ld(a.Qa,a.H.duration,g),b?(b.Wa(g),b.Ra(a.presentationTimeline.sa()-a.H.start)):(a.presentationTimeline.Ea(a.H.start,g),b=new T(g),d&&(c[d]=b)),a={createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:b.find.bind(b),getSegmentReference:b.get.bind(b)});return{createSegmentIndex:a.createSegmentIndex,findSegmentPosition:a.findSegmentPosition,
getSegmentReference:a.getSegmentReference,initSegmentReference:e,presentationTimeOffset:f.presentationTimeOffset}}function re(a){return a.Ha}function se(a,b){var c=a.H.duration,d=b.F,e=b.ia,f=b.Ia,g=b.Va,h=a.bandwidth||null,m=a.u.id,n=a.u.M;return{createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(a){return 0>a||c&&a>=c?null:Math.floor(a/d)},getSegmentReference:function(a){var b=a*d;return new G(a,b,b+d,function(){var c=Kd(g,m,a+e,h,b*f);return P(n,[c])},0,null)}}}
function te(a,b){for(var c=[],d=0;d<b.B.length;d++){var e=b.B[d].start,f=d+b.ia;c.push(new G(f,e,b.B[d].end,function(a,b,c,d,e,f){a=Kd(a,b,e,c,f);return P(d,[a]).map(function(a){return a.toString()})}.bind(null,b.Va,a.u.id,a.bandwidth||null,a.u.M,f,(e+b.presentationTimeOffset)*b.Ia),0,null))}return c}function qe(a){var b=Q(a,re,"initialization");if(!b)return null;var c=a.u.id,d=a.bandwidth||null,e=a.u.M;return new Vb(function(){var a=Kd(b,c,null,d,null);return P(e,[a])},0,null)};function ue(){this.m=this.l=this.j=this.c=this.a=null;this.g=[];this.b=null;this.h=[];this.v=1;this.i={};this.s=0;this.f=null;this.Ja=this.Ja.bind(this)}k=ue.prototype;k.configure=function(a){this.c=a};k.start=function(a,b,c,d,e){this.g=[a];this.a=b;this.j=c;this.l=d;this.m=e;return ve(this).then(function(){this.a&&we(this,0);return this.b}.bind(this))};
k.stop=function(){this.a&&this.a.Jb(this.Ja);this.c=this.m=this.l=this.j=this.a=null;this.g=[];this.b=null;this.h=[];this.i={};null!=this.f&&(window.clearTimeout(this.f),this.f=null);return Promise.resolve()};function ve(a){return a.a.request(0,Ha(a.g,a.c.retryParameters)).then(function(a){if(this.a)return xe(this,a.data,a.uri)}.bind(a))}
function xe(a,b,c){var d=D(b),e=new DOMParser,f=null;b=null;try{f=e.parseFromString(d,"text/xml")}catch(A){}f&&"MPD"==f.documentElement.tagName&&(b=f.documentElement);if(!b)throw new q(4,4001);c=[c];d=M(b,"Location").map(wd).filter(Da);0<d.length&&(c=a.g=d);d=M(b,"BaseURL").map(wd);c=P(c,d);var g=N(b,"minBufferTime",O);a.s=N(b,"minimumUpdatePeriod",O,-1);var h=N(b,"availabilityStartTime",xd),d=N(b,"timeShiftBufferDepth",O),m=N(b,"suggestedPresentationDelay",O),e=N(b,"maxSegmentDuration",O),f=b.getAttribute("type")||
"static",n;if(a.b)n=a.b.presentationTimeline;else{var r=Math.max(10,1.5*g);n=new F(h,null!=m?m:r)}var h=ye(a,{Qa:"static"!=f,presentationTimeline:n,K:null,H:null,P:null,u:null,bandwidth:void 0},c,b),m=h.duration,u=h.periods;n.Hb("static"==f);n.za(m||Infinity);n.Gb(null!=d?d:Infinity);n.Xa(e||1);if(a.b)return Promise.resolve();b=M(b,"UTCTiming");d=n.U();h.Y&&a.a.yb(a.Ja);return ze(a,c,b,d).then(function(a){this.a&&(n.Eb(a),this.b={presentationTimeline:n,periods:u,offlineSessionIds:[],minBufferTime:g||
0})}.bind(a))}
function ye(a,b,c,d){var e=N(d,"mediaPresentationDuration",O),f=[],g=0;d=M(d,"Period");for(var h=0;h<d.length;h++){var m=d[h],g=N(m,"start",O,g),n=N(m,"duration",O);if(null==n)if(h+1!=d.length){var r=N(d[h+1],"start",O);null!=r&&(n=r-g)}else null!=e&&(n=e-g);var m={start:g,duration:n,node:m,Y:!1},u=a,A=b,r=m;A.K=Ae(r.node,null,c);A.H=r;A.K.id||(A.K.id="__shaka_period_"+r.start);u=M(r.node,"AdaptationSet").map(u.qc.bind(u,A));if(!u.length)throw new q(4,4004);for(A=0;A<u.length;A++)u[A].Y&&(r.Y=!0);
u=Be(u);r={startTime:r.start,streamSets:u};f.push(r);u=b.K.id;a.h.every(Ea(u))&&(a.j(r),a.h.push(u),a.b&&a.b.periods.push(r));if(null==n){g=null;break}g+=n}return null!=e?{periods:f,duration:e,Y:m.Y}:{periods:f,duration:g,Y:m.Y}}
k.qc=function(a,b){a.P=Ae(b,a.K,null);var c=!1,d=M(b,"Role"),e=void 0;"text"==a.P.contentType&&(e="subtitle");for(var f=0;f<d.length;f++){var g=d[f].getAttribute("schemeIdUri");if(null==g||"urn:mpeg:dash:role:2011"==g)switch(g=d[f].getAttribute("value"),g){case "main":c=!0;break;case "caption":case "subtitle":e=g}}var d=!!vd(b,"InbandEventStream"),h=[];M(b,"SupplementalProperty").forEach(function(a){"http://dashif.org/descriptor/AdaptationSetSwitching"==a.getAttribute("schemeIdURI")&&(a=a.getAttribute("value"))&&
h.push.apply(h,a.split(","))});f=M(b,"ContentProtection");f=Dd(f,this.c.dash.customScheme);g=Dc(b.getAttribute("lang")||"und");e=M(b,"Representation").map(this.rc.bind(this,a,f,e,g)).filter(function(a){return!!a});if(!e.length)throw new q(4,4003);if(!a.P.contentType){var m=e[0].mimeType,n=e[0].codecs,r=m;n&&(r+='; codecs="'+n+'"');a.P.contentType=E[r]?"text":m.split("/")[0]}return{id:a.P.id||"__fake__"+this.v++,contentType:a.P.contentType,language:g,$b:c,streams:e,drmInfos:f.drmInfos,Vc:h,Y:d}};
k.rc=function(a,b,c,d,e){a.u=Ae(e,a.P,null);if(!Ce(a.u))return null;a.bandwidth=N(e,"bandwidth",Ad)||void 0;var f;f=this.yc.bind(this);if(a.u.Ga)f=ie(a,f);else if(a.u.$)f=le(a,this.i);else if(a.u.Ha)f=pe(a,f,this.i,!!this.b);else{var g=a.u.M,h=a.H.duration||0;f={createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(a){return 0<=a&&a<h?1:null},getSegmentReference:function(a){return 1!=a?null:new G(1,0,h,function(){return g},0,null)},initSegmentReference:null,presentationTimeOffset:0}}e=
M(e,"ContentProtection");e=Id(e,this.c.dash.customScheme,b);return{id:this.v++,createSegmentIndex:f.createSegmentIndex,findSegmentPosition:f.findSegmentPosition,getSegmentReference:f.getSegmentReference,initSegmentReference:f.initSegmentReference,presentationTimeOffset:f.presentationTimeOffset,mimeType:a.u.mimeType,codecs:a.u.codecs,bandwidth:a.bandwidth,width:a.u.width,height:a.u.height,kind:c,encrypted:0<b.drmInfos.length,keyId:e,language:d,allowedByApplication:!0,allowedByKeySystem:!0}};
k.Pc=function(){this.f=null;var a=Date.now();ve(this).then(function(){this.a&&we(this,(Date.now()-a)/1E3)}.bind(this))["catch"](function(a){this.l(a);this.a&&we(this,0)}.bind(this))};function we(a,b){0>a.s||(a.f=window.setTimeout(a.Pc.bind(a),1E3*Math.max(Math.max(3,a.s)-b,0)))}
function Ae(a,b,c){b=b||{contentType:"",mimeType:"",codecs:""};c=c||b.M;var d=M(a,"BaseURL").map(wd),e=a.getAttribute("contentType")||b.contentType,f=a.getAttribute("mimeType")||b.mimeType;e||(e=f.split("/")[0]);return{M:P(c,d),Ga:vd(a,"SegmentBase")||b.Ga,$:vd(a,"SegmentList")||b.$,Ha:vd(a,"SegmentTemplate")||b.Ha,width:N(a,"width",Bd)||b.width,height:N(a,"height",Bd)||b.height,contentType:e,mimeType:f,codecs:a.getAttribute("codecs")||b.codecs,id:a.getAttribute("id")}}
function Be(a){var b={};a.forEach(function(a){b[a.id]=[a]});a.forEach(function(a){var c=b[a.id];a.Vc.forEach(function(a){(a=b[a])&&a!=c&&(c.push.apply(c,a),a.forEach(function(a){b[a.id]=c}))})});var c=[],d=[];C(b).forEach(function(a){if(!(0<=d.indexOf(a))){d.push(a);var b=new Ja;a.forEach(function(a){b.push(a.contentType||"",a)});b.keys().forEach(function(a){var d=new Ja;b.get(a).forEach(function(a){d.push(a.language,a)});d.keys().forEach(function(b){var e=d.get(b);b={language:b,type:a,primary:e.some(function(a){return a.$b}),
drmInfos:e.map(function(a){return a.drmInfos}).reduce(t,[]),streams:e.map(function(a){return a.streams}).reduce(t,[])};c.push(b)})})}});return c}function Ce(a){var b;b=0+(a.Ga?1:0);b+=a.$?1:0;b+=a.Ha?1:0;if(!b)return"text"==a.contentType||"application"==a.contentType?!0:!1;1!=b&&(a.Ga&&(a.$=null),a.Ha=null);return!0}
function De(a,b,c,d){b=P(b,[c]);b=Ha(b,a.c.retryParameters);b.method=d;return a.a.request(0,b).then(function(a){if("HEAD"==d){if(!a.headers||!a.headers.date)return 0;a=a.headers.date}else a=D(a.data);a=Date.parse(a);return isNaN(a)?0:a-Date.now()})}
function ze(a,b,c,d){c=c.map(function(a){return{scheme:a.getAttribute("schemeIdUri"),value:a.getAttribute("value")}});var e=a.c.dash.clockSyncUri;d&&!c.length&&e&&c.push({scheme:"urn:mpeg:dash:utc:http-head:2014",value:e});return Ca(c,function(a){var c=a.value;switch(a.scheme){case "urn:mpeg:dash:utc:http-head:2014":case "urn:mpeg:dash:utc:http-head:2012":return De(this,b,c,"HEAD");case "urn:mpeg:dash:utc:http-xsdate:2014":case "urn:mpeg:dash:utc:http-iso:2014":case "urn:mpeg:dash:utc:http-xsdate:2012":case "urn:mpeg:dash:utc:http-iso:2012":return De(this,
b,c,"GET");case "urn:mpeg:dash:utc:direct:2014":case "urn:mpeg:dash:utc:direct:2012":return a=Date.parse(c),isNaN(a)?0:a-Date.now();case "urn:mpeg:dash:utc:http-ntp:2014":case "urn:mpeg:dash:utc:ntp:2014":case "urn:mpeg:dash:utc:sntp:2014":return Promise.reject();default:return Promise.reject()}}.bind(a))["catch"](function(){return 0})}k.yc=function(a,b,c){a=Ha(a,this.c.retryParameters);null!=b&&(a.headers.Range="bytes="+b+"-"+(null!=c?c:""));return this.a.request(1,a).then(function(a){return a.data})};
k.Ja=function(a,b){if(1==a){var c=new Od(new DataView(b.data)),d=Xd(1701671783,c);if(-1!=d){var e=c.a-8+d;S(c,4);d=Wd(c);if("urn:mpeg:dash:event:2012"==d)ve(this);else{var f=Wd(c),g=R(c),h=R(c),m=R(c),n=R(c),c=Vd(c,e-c.a);this.m(new H("emsg",{detail:{hd:d,value:f,Ia:g,gd:h,ed:m,id:n,fd:c}}))}}}};sb.mpd=ue;rb["application/dash+xml"]=ue;function U(a,b){var c=D(a),d=[],e=new DOMParser,f=null;try{f=e.parseFromString(c,"text/xml")}catch(n){throw new q(2,2005);}if(f){var g,h;if(c=f.getElementsByTagName("tt")[0])e=c.getAttribute("ttp:frameRate"),f=c.getAttribute("ttp:subFrameRate"),g=c.getAttribute("ttp:frameRateMultiplier"),h=c.getAttribute("ttp:tickRate");else throw new q(2,2006);e=new Ee(e,f,g,h);f=U.b(c.getElementsByTagName("styling")[0]);g=U.b(c.getElementsByTagName("layout")[0]);c=U.b(c.getElementsByTagName("body")[0]);for(h=0;h<
c.length;h++){var m=U.c(c[h],b,e,f,g);m&&d.push(m)}}return d}U.l=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/;U.s=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/;U.m=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d{2,})$/;U.v=/^(\d*\.?\d*)f$/;U.A=/^(\d*\.?\d*)t$/;U.w=/^(?:(\d*\.?\d*)h)?(?:(\d*\.?\d*)m)?(?:(\d*\.?\d*)s)?(?:(\d*\.?\d*)ms)?$/;U.j=/^(\d{1,2}|100)% (\d{1,2}|100)%$/;
U.b=function(a){var b=[];if(!a)return b;for(var c=a.childNodes,d=0;d<c.length;d++){var e="span"==c[d].nodeName&&"p"==a.nodeName;c[d].nodeType!=Node.ELEMENT_NODE||"br"==c[d].nodeName||e||(e=U.b(c[d]),b=b.concat(e))}b.length||b.push(a);return b};
U.c=function(a,b,c,d,e){if(!a.hasAttribute("begin")&&!a.hasAttribute("end")&&""==a.textContent)return null;var f=U.a(a.getAttribute("begin"),c),g=U.a(a.getAttribute("end"),c);c=U.a(a.getAttribute("dur"),c);var h=a.textContent;null==g&&null!=c&&(g=f+c);if(null==f||null==g)throw new q(2,2001);b=wb(f+b,g+b,h);if(!b)return null;e=U.h(a,"region",e);U.na(b,a,e,d);return b};
U.na=function(a,b,c,d){var e,f=U.f(b,c,d,"tts:textAlign");f&&(a.b=f);if(f=U.f(b,c,d,"tts:extent"))if(e=U.j.exec(f))a.size=Number(e[1]);e=U.f(b,c,d,"tts:writingMode");f=!0;"tb"==e||"tblr"==e?a.c="lr":"tbrl"==e?a.c="rl":f=!1;if(b=U.f(b,c,d,"tts:origin"))if(e=U.j.exec(b))f?(a.position=Number(e[2]),a.a=Number(e[1])):(a.position=Number(e[1]),a.a=Number(e[2]))};
U.f=function(a,b,c,d){for(var e=U.b(b),f=0;f<e.length;f++){var g=e[f].getAttribute(d);if(g)return g}e=U.h;return(a=e(b,"style",c)||e(a,"style",c))?a.getAttribute(d):null};U.h=function(a,b,c){if(!a||1>c.length)return null;var d=null;if(a=U.oa(a,b))for(b=0;b<c.length;b++)if(c[b].getAttribute("xml:id")==a){d=c[b];break}return d};U.oa=function(a,b){for(var c=null;a&&!(c=a.getAttribute(b));){var d=a.parentNode;if(d instanceof Element)a=d;else break}return c};
U.a=function(a,b){var c=null;U.l.test(a)?c=U.pa(b,a):U.s.test(a)?c=U.g(U.s,a):U.m.test(a)?c=U.g(U.m,a):U.v.test(a)?c=U.Aa(b,a):U.A.test(a)?c=U.Ba(b,a):U.w.test(a)&&(c=U.g(U.w,a));return c};U.Aa=function(a,b){var c=U.v.exec(b);return Number(c[1])/a.a};U.Ba=function(a,b){var c=U.A.exec(b);return Number(c[1])/a.b};U.pa=function(a,b){var c=U.l.exec(b),d=Number(c[1]),e=Number(c[2]),f=Number(c[3]),g=Number(c[4]),g=g+(Number(c[5])||0)/a.c,f=f+g/a.a;return f+60*e+3600*d};
U.g=function(a,b){var c=a.exec(b);return c&&""!=c[0]?(Number(c[4])||0)/1E3+(Number(c[3])||0)+60*(Number(c[2])||0)+3600*(Number(c[1])||0):null};function Ee(a,b,c,d){this.a=Number(a)||30;this.c=Number(b)||1;this.b=Number(d);this.b||(this.b=a?this.a*this.c:1);c&&(a=/^(\d+) (\d+)$/g.exec(c))&&(this.a*=a[1]/a[2])}E["application/ttml+xml"]=U;function Fe(a,b){var c=new Od(new DataView(a)),d=Xd(1835295092,c);if(-1!=d)return U(Vd(c,d-8).buffer,b);if(-1!=Yd(a,Fe.J))return[];throw new q(2,2007);}Fe.J=1937010800;E['application/mp4; codecs="stpp"']=Fe;function Ge(a){this.b=a;this.a=0}function He(a,b){var c;b.lastIndex=a.a;c=(c=b.exec(a.b))?{position:c.index,length:c[0].length,Bc:c}:null;if(a.a==a.b.length||!c||c.position!=a.a)return null;a.a+=c.length;return c.Bc}function Ie(a){return a.a==a.b.length?null:(a=He(a,/[^ \t\n]*/gm))?a[0]:null};function V(a,b){var c=D(a),c=c.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n"),c=c.split(/\n{2,}/m);if(!/^WEBVTT($|[ \t\n])/m.test(c[0]))throw new q(2,2E3);for(var d=[],e=1;e<c.length;e++){var f=V.c(c[e].split("\n"),b);f&&d.push(f)}return d}
V.c=function(a,b){if(1==a.length&&!a[0]||/^NOTE($|[ \t])/.test(a[0]))return null;var c=null;0>a[0].indexOf("--\x3e")&&(c=a[0],a.splice(0,1));var d=new Ge(a[0]),e=V.a(d),f=He(d,/[ \t]+--\x3e[ \t]+/g),g=V.a(d);if(null==e||!f||null==g)throw new q(2,2001);e=wb(e+b,g+b,a.slice(1).join("\n").trim());if(!e)return null;He(d,/[ \t]+/gm);for(f=Ie(d);f;){if(!V.i(e,f))throw new q(2,2002);He(d,/[ \t]+/gm);f=Ie(d)}null!=c&&(e.id=c);return e};
V.i=function(a,b){var c;if(c=/^align:(start|middle|end|left|right)$/.exec(b))a.align=c[1];else if(c=/^vertical:(lr|rl)$/.exec(b))a.c=c[1];else if(c=/^size:(\d{1,2}|100)%$/.exec(b))a.size=Number(c[1]);else if(c=/^position:(\d{1,2}|100)%(?:,(line-left|line-right|center|start|end))?$/.exec(b))a.position=Number(c[1]),c[2]&&(a.g=c[2]);else if(c=/^line:(\d{1,2}|100)%(?:,(start|end|center))?$/.exec(b))a.f=!1,a.a=Number(c[1]),c[2]&&(a.b=c[2]);else if(c=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(b))a.f=
!0,a.a=Number(c[1]),c[2]&&(a.b=c[2]);else return!1;return!0};V.a=function(a){a=He(a,/(?:(\d{2,}):)?(\d{2}):(\d{2})\.(\d{3})/g);if(!a)return null;var b=Number(a[2]),c=Number(a[3]);return 59<b||59<c?null:Number(a[4])/1E3+c+60*b+3600*(Number(a[1])||0)};E["text/vtt"]=V;E['text/vtt; codecs="vtt"']=V;function W(a,b,c,d){var e=new Od(new DataView(a)),f=Xd(1835295092,e);if(-1!=f)return W.qa(Vd(e,f-8).buffer,b,c,d);if(-1!=Yd(a,W.ma))return[];throw new q(2,2008);}W.qa=function(a,b,c,d){a=new Od(new DataView(a));c+=b;d+=b;for(b=[];Qd(a);){var e=Xd(W.X,a);if(-1==e)break;(e=W.c(Vd(a,e-8).buffer,c,d))&&b.push(e)}return b};
W.c=function(a,b,c){a=new Od(new DataView(a));for(var d,e,f;Qd(a);){var g=R(a),h=R(a),m=D(Vd(a,g-8).buffer);1==g&&Ud(a);switch(h){case W.G:d=m;break;case W.C:f=m;break;case W.S:e=m}}if(!d)throw new q(2,2008);b=wb(b,c,d);if(!b)return null;f&&(b.id=f);if(e)for(e=new Ge(e),f=Ie(e);f;){if(!V.i(b,f))throw new q(2,2002);He(e,/[ \t]+/gm);f=Ie(e)}return b};W.ma=2004251764;W.X=1987343459;W.G=1885436268;W.C=1768187247;W.S=1937011815;E['application/mp4; codecs="wvtt"']=W;Fa.data=function(a){return new Promise(function(b){var c=a.split(":");if(2>c.length||"data"!=c[0])throw new q(1,1004,a);c=c.slice(1).join(":").split(",");if(2>c.length)throw new q(1,1004,a);var d=c[0],c=window.decodeURIComponent(c.slice(1).join(",")),d=d.split(";"),e=null;1<d.length&&(e=d[1]);if("base64"==e)c=Xa(c).buffer;else{if(e)throw new q(1,1005,a);c=Sa(c)}b({uri:a,data:c,headers:{}})})};function Je(a,b){return new Promise(function(c,d){var e=new XMLHttpRequest;e.open(b.method,a,!0);e.responseType="arraybuffer";e.timeout=b.retryParameters.timeout;e.withCredentials=b.allowCrossSiteCredentials;e.onload=function(b){b=b.target;if(200<=b.status&&299>=b.status){var e=b.getAllResponseHeaders().split("\r\n").reduce(function(a,b){var c=b.split(": ");a[c[0].toLowerCase()]=c.slice(1).join(": ");return a},{});b.Ac&&(a=b.Ac);c({uri:a,data:b.response,headers:e})}else{e=null;try{e=Ra(b.response)}catch(f){}d(new q(1,
1001,a,b.status,e))}};e.onerror=function(){d(new q(1,1002,a))};e.ontimeout=function(){d(new q(1,1003,a))};for(var f in b.headers)e.setRequestHeader(f,b.headers[f]);e.send(b.body)})}Fa.http=Je;Fa.https=Je;function Ke(){this.a=null;this.c=[];this.b={}}k=Ke.prototype;
k.init=function(a){if(!window.indexedDB)return Promise.reject(new q(9,9E3));var b=window.indexedDB.open("shaka_offline_db",1),c=new w;b.onupgradeneeded=function(b){b=b.target.result;for(var c in a)b.createObjectStore(c,{keyPath:a[c]})};b.onsuccess=function(a){this.a=a.target.result;c.resolve()}.bind(this);b.onerror=Le.bind(null,b,c);return c.then(function(){var b=Object.keys(a);return Promise.all(b.map(function(a){return Me(this,a).then(function(b){this.b[a]=b}.bind(this))}.bind(this)))}.bind(this))};
k.o=function(){return Promise.all(this.c.map(function(a){try{a.transaction.abort()}catch(b){}return a.I["catch"](v)})).then(function(){this.a&&(this.a.close(),this.a=null)}.bind(this))};k.get=function(a,b){return Ne(this,a,"readonly",function(a){return a.get(b)})};k.forEach=function(a,b){return Ne(this,a,"readonly",function(a){return a.openCursor()},function(a){a&&(b(a.value),a["continue"]())})};function Oe(a,b,c){return Ne(a,b,"readwrite",function(a){return a.put(c)})}
k.remove=function(a,b){return Ne(this,a,"readwrite",function(a){return a["delete"](b)})};function Pe(a,b){var c=[];return Ne(a,"segment","readwrite",function(a){return a.openCursor()},function(a){if(a){if(b(a.value)){var e=a["delete"](),f=new w;e.onsuccess=f.resolve;e.onerror=Le.bind(null,e,f);c.push(f)}a["continue"]()}}).then(function(){return Promise.all(c)}).then(function(){return c.length})}
function Me(a,b){var c=0;return Ne(a,b,"readonly",function(a){return a.openCursor(null,"prev")},function(a){a&&(c=a.key+1)}).then(function(){return c})}
function Ne(a,b,c,d,e){c=a.a.transaction([b],c);var f=d(c.objectStore(b)),g=new w;e&&(f.onsuccess=function(a){e(a.target.result)});f.onerror=Le.bind(null,f,g);var h={transaction:c,I:g};a.c.push(h);var m=function(){this.c.splice(this.c.indexOf(h),1)}.bind(a);c.oncomplete=function(){m();g.resolve(f.result)};c.onerror=function(a){m();Le(f,g,a)};return g}function Le(a,b,c){"AbortError"==a.error.name?b.reject(new q(9,9002)):b.reject(new q(9,9001,a.error));c.preventDefault()};var Qe={manifest:"key",segment:"key"};function Re(a){return{offlineUri:"offline:"+a.key,originalManifestUri:a.originalManifestUri,duration:a.duration,size:a.size,tracks:a.periods[0].streams.map(function(a){return{id:a.id,active:!1,type:a.contentType,bandwidth:0,language:a.language,kind:a.kind||null,width:a.width,height:a.height}}),appMetadata:a.appMetadata}};function Se(){}Se.prototype.configure=function(){};Se.prototype.start=function(a){var b=/^offline:([0-9]+)$/.exec(a);if(!b)return Promise.reject(new q(1,9004,a));var c=Number(b[1]),d=new Ke;return d.init(Qe).then(function(){return d.get("manifest",c)}).then(function(a){if(!a)throw new q(9,9003,c);return Te(a)}).then(function(a){return d.o().then(function(){return a})},function(a){return d.o().then(function(){throw a;})})};Se.prototype.stop=function(){return Promise.resolve()};
function Te(a){var b=new F(null,0);b.za(a.duration);var c=a.drmInfo?[a.drmInfo]:[];return{presentationTimeline:b,minBufferTime:10,offlineSessionIds:a.sessionIds,periods:a.periods.map(function(a){return{startTime:a.startTime,streamSets:a.streams.map(function(e){var f=e.segments.map(function(a,b){return new G(b,a.startTime,a.endTime,function(){return[a.uri]},0,null)});b.Ea(a.startTime,f);f=new T(f);return{language:e.language,type:e.contentType,primary:e.primary,drmInfos:c,streams:[{id:e.id,createSegmentIndex:Promise.resolve.bind(Promise),
findSegmentPosition:f.find.bind(f),getSegmentReference:f.get.bind(f),initSegmentReference:e.initSegmentUri?new Vb(function(){return[e.initSegmentUri]},0,null):null,presentationTimeOffset:e.presentationTimeOffset,mimeType:e.mimeType,codecs:e.codecs,bandwidth:0,width:e.width||void 0,height:e.height||void 0,kind:e.kind,encrypted:e.encrypted,keyId:e.keyId,allowedByApplication:!0,allowedByKeySystem:!0}]}})}})}}rb["application/x-offline-manifest"]=Se;Fa.offline=function(a){if(/^offline:([0-9]+)$/.exec(a)){var b={uri:a,data:new ArrayBuffer(0),headers:{"content-type":"application/x-offline-manifest"}};return Promise.resolve(b)}if(b=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(a)){var c=Number(b[1]),d=new Ke;return d.init(Qe).then(function(){return d.get("segment",c)}).then(function(b){return d.o().then(function(){if(!b)throw new q(9,9003,c);return{uri:a,data:b.data,headers:{}}})})}return Promise.reject(new q(1,9004,a))};function Ue(a,b,c){this.b={};this.i=c;this.m=a;this.l=b;this.j=this.a=null;this.f=this.g=this.h=this.c=0}Ue.prototype.o=function(){var a=this.j||Promise.resolve();this.b={};this.j=this.a=this.l=this.m=this.i=null;return a};function Ve(a,b,c,d,e){a.b[b]=a.b[b]||[];a.b[b].push({uris:c.a(),L:c.L,D:c.D,jb:d,Ca:e})}
function We(a,b){a.c=0;a.h=0;a.g=0;a.f=0;C(a.b).forEach(function(a){a.forEach(function(a){null!=a.D?this.c+=a.D-a.L+1:this.g+=a.jb}.bind(this))}.bind(a));a.a=b;a.a.size=a.c;var c=C(a.b).map(function(a){var b=0,c=function(){if(!this.i)return Promise.reject(new q(9,9002));if(b>=a.length)return Promise.resolve();var g=a[b++];return Xe(this,g).then(c)}.bind(this);return c()}.bind(a));a.b={};return a.j=Promise.all(c)}
function Xe(a,b){var c=Ha(b.uris,a.l);if(b.L||null!=b.D)c.headers.Range="bytes="+b.L+"-"+(null==b.D?"":b.D);var d;return a.m.request(1,c).then(function(a){if(!this.a)return Promise.reject(new q(9,9002));d=a.data.byteLength;return b.Ca(a.data)}.bind(a)).then(function(){if(!this.a)return Promise.reject(new q(9,9002));null==b.D?(this.a.size+=d,this.f+=b.jb):this.h+=d;var a=(this.h+this.f)/(this.c+this.g),c=Re(this.a);this.i.progressCallback(c,a)}.bind(a))};function X(a){this.a=new Ke;this.c=a;this.j=Ye(this);this.g=null;this.v=!1;this.i=null;this.l=[];this.f=-1;this.m=0;this.b=null;this.h=new Ue(a.h,a.getConfiguration().streaming.retryParameters,this.j)}l("shaka.offline.Storage",X);function Ze(){return!!window.indexedDB}X.support=Ze;
X.prototype.o=function(){var a=this.l,b=this.a,c=this.h?this.h.o()["catch"](function(){}).then(function(){return Promise.all(a.map(function(a){return b.remove("segment",a)}))}).then(function(){return b.o()}):Promise.resolve();this.j=this.c=this.h=this.a=null;return c};X.prototype.destroy=X.prototype.o;X.prototype.configure=function(a){zc(this.j,a,Ye(this),{},"")};X.prototype.configure=X.prototype.configure;
X.prototype.Sc=function(a,b,c){function d(a){f=a}if(this.v)return Promise.reject(new q(9,9006));this.v=!0;var e,f=null;return $e(this).then(function(){Y(this);return af(this,a,d,c)}.bind(this)).then(function(c){Y(this);this.b=c.manifest;this.g=c.Qb;if(this.b.presentationTimeline.U()||this.b.presentationTimeline.ga())throw new q(9,9005,a);this.b.periods.forEach(this.s.bind(this));this.f=this.a.b.manifest++;this.m=0;c=this.b.periods.map(this.w.bind(this));var d=this.g.b,f=ib(this.g);if(d){if(!f.length)throw new q(9,
9007,a);d.initData=[]}e={key:this.f,originalManifestUri:a,duration:this.m,size:0,periods:c,sessionIds:f,drmInfo:d,appMetadata:b};return We(this.h,e)}.bind(this)).then(function(){Y(this);if(f)throw f;return Oe(this.a,"manifest",e)}.bind(this)).then(function(){return bf(this)}.bind(this)).then(function(){return Re(e)}.bind(this))["catch"](function(a){return bf(this)["catch"](v).then(function(){throw a;})}.bind(this))};X.prototype.store=X.prototype.Sc;
X.prototype.remove=function(a){function b(a){6013!=a.code&&(e=a)}var c=a.offlineUri,d=/^offline:([0-9]+)$/.exec(c);if(!d)return Promise.reject(new q(9,9004,c));var e=null,f,g,h=Number(d[1]);return $e(this).then(function(){Y(this);return this.a.get("manifest",h)}.bind(this)).then(function(a){Y(this);if(!a)throw new q(9,9003,c);f=a;a=Te(f);g=new ab(this.c.h,b,function(){});g.configure(this.c.getConfiguration().drm);return g.init(a,!0)}.bind(this)).then(function(){return fb(g,f.sessionIds)}.bind(this)).then(function(){return g.o()}.bind(this)).then(function(){Y(this);
if(e)throw e;var b=f.periods.map(function(a){return a.streams.map(function(a){var b=a.segments.map(function(a){return Number(/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(a.uri)[1])});a.initSegmentUri&&b.push(Number(/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(a.initSegmentUri)[1]));return b}).reduce(t,[])}).reduce(t,[]),c=0,d=b.length,g=this.j.progressCallback;return Pe(this.a,function(e){e=b.indexOf(e.key);0<=e&&(g(a,c/d),c++);return 0<=e}.bind(this))}.bind(this)).then(function(){Y(this);this.j.progressCallback(a,
1);return this.a.remove("manifest",h)}.bind(this))};X.prototype.remove=X.prototype.remove;X.prototype.list=function(){var a=[];return $e(this).then(function(){Y(this);return this.a.forEach("manifest",function(b){a.push(Re(b))})}.bind(this)).then(function(){return a})};X.prototype.list=X.prototype.list;
function af(a,b,c,d){function e(){}var f=a.c.h,g=a.c.getConfiguration(),h,m,n;return ub(b,f,g.manifest.retryParameters,d).then(function(a){Y(this);n=new a;n.configure(g.manifest);return n.start(b,f,this.s.bind(this),c)}.bind(a)).then(function(a){Y(this);h=a;m=new ab(f,c,e);m.configure(g.drm);return m.init(h,!0)}.bind(a)).then(function(){Y(this);return cf(h)}.bind(a)).then(function(){Y(this);return eb(m)}.bind(a)).then(function(){Y(this);return n.stop()}.bind(a)).then(function(){Y(this);return{manifest:h,
Qb:m}}.bind(a))["catch"](function(a){if(n)return n.stop().then(function(){throw a;});throw a;})}
X.prototype.A=function(a){var b=[],c=a.filter(function(a){return"video"==a.type&&480>=a.height});c.sort(function(a,b){return b.bandwidth-a.bandwidth});c.length&&b.push(c[0]);for(var d=Dc(this.c.getConfiguration().preferredAudioLanguage),c=[0,Bc,Cc],e=a.filter(function(a){return"audio"==a.type}),c=c.map(function(a){return e.filter(function(b){b=Dc(b.language);return Ac(a,d,b)})}),f=e,g=0;g<c.length;g++)c[g].length&&(f=c[g]);f.sort(function(a,b){return a.bandwidth-b.bandwidth});f.length&&b.push(f[Math.floor(f.length/
2)]);var c=Dc(this.c.getConfiguration().preferredTextLanguage),h=Ac.bind(null,Cc,c);b.push.apply(b,a.filter(function(a){var b=Dc(a.language);return"text"==a.type&&h(b)}));return b};function Ye(a){return{trackSelectionCallback:a.A.bind(a),progressCallback:function(a,c){if(a||c)return null}}}function $e(a){return a.a.a?Promise.resolve():a.a.init(Qe)}
X.prototype.s=function(a){function b(a,b,c){b=b.filter(function(a){return a.type==c});return 0==b.length?null:Ic(a,b[0]).stream}var c={};this.i&&(c={video:b(this.b.periods[0],this.i,"video"),audio:b(this.b.periods[0],this.i,"audio")});Gc(this.g,c,a);Fc(a,this.c.getConfiguration().restrictions,{width:Infinity,height:Infinity})};function bf(a){var b=a.g?a.g.o():Promise.resolve();a.g=null;a.b=null;a.v=!1;a.i=null;a.l=[];a.f=-1;return b}
function cf(a){a=a.periods.map(function(a){return a.streamSets}).reduce(t,[]).map(function(a){return a.streams}).reduce(t,[]);return Promise.all(a.map(function(a){return a.createSegmentIndex()}))}
X.prototype.w=function(a){var b=Hc(a,null),b=this.j.trackSelectionCallback(b);this.i||(this.i=b,this.b.periods.forEach(this.s.bind(this)));for(var c=b.length-1;0<c;--c){for(var d=!1,e=c-1;0<=e;--e)if(b[c].type==b[e].type&&b[c].kind==b[e].kind&&b[c].language==b[e].language){d=!0;break}if(d)break}b=b.map(function(b){b=Ic(a,b);return df(this,a,b.Tc,b.stream)}.bind(this));return{startTime:a.startTime,streams:b}};
function df(a,b,c,d){for(var e=[],f=a.b.presentationTimeline.ra(),g=f,h=d.findSegmentPosition(f),m=null!=h?d.getSegmentReference(h):null;m;){var n=a.a.b.segment++;Ve(a.h,c.type,m,(m.endTime-m.startTime)*d.bandwidth/8,function(a,b,c,d){b={key:a,data:d,manifestKey:this.f,streamNumber:c,segmentNumber:b};this.l.push(a);return Oe(this.a,"segment",b)}.bind(a,n,m.position,d.id));e.push({startTime:m.startTime,endTime:m.endTime,uri:"offline:"+a.f+"/"+d.id+"/"+n});g=m.endTime+b.startTime;m=d.getSegmentReference(++h)}a.m=
Math.max(a.m,g-f);b=null;d.initSegmentReference&&(n=a.a.b.segment++,b="offline:"+a.f+"/"+d.id+"/"+n,Ve(a.h,c.type,d.initSegmentReference,0,function(a,b){var c={key:n,data:b,manifestKey:this.f,streamNumber:a,segmentNumber:-1};this.l.push(n);return Oe(this.a,"segment",c)}.bind(a,d.id)));return{id:d.id,primary:c.primary,presentationTimeOffset:d.presentationTimeOffset||0,contentType:c.type,mimeType:d.mimeType,codecs:d.codecs,kind:d.kind,language:c.language,width:d.width||null,height:d.height||null,initSegmentUri:b,
encrypted:d.encrypted,keyId:d.keyId,segments:e}}function Y(a){if(!a.c)throw new q(9,9002);}Qc.offline=Ze;l("shaka.polyfill.installAll",function(){for(var a=0;a<ef.length;++a)ef[a]()});var ef=[];function ff(a){ef.push(a)}l("shaka.polyfill.register",ff);function gf(a){var b=a.type.replace(/^(webkit|moz|MS)/,"").toLowerCase(),b=new Event(b,a);a.target.dispatchEvent(b)}
ff(function(){if(window.Document){var a=Element.prototype;a.requestFullscreen=a.requestFullscreen||a.mozRequestFullScreen||a.msRequestFullscreen||a.webkitRequestFullscreen;a=Document.prototype;a.exitFullscreen=a.exitFullscreen||a.mozCancelFullScreen||a.msExitFullscreen||a.webkitExitFullscreen;"fullscreenElement"in document||Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement}});document.addEventListener("webkitfullscreenchange",
gf);document.addEventListener("webkitfullscreenerror",gf);document.addEventListener("mozfullscreenchange",gf);document.addEventListener("mozfullscreenerror",gf);document.addEventListener("MSFullscreenChange",gf);document.addEventListener("MSFullscreenError",gf)}});function hf(a){this.c=[];this.b=[];this.a=[];for(a=new Od(new DataView(a.buffer));Qd(a);){var b=Xd(1886614376,a);if(-1==b)break;var c=a.a-8,d=Rd(a);if(1<d)S(a,b-(a.a-c));else{S(a,3);var e=Za(Vd(a,16)),f=[];if(0<d)for(var d=R(a),g=0;g<d;++g){var h=Za(Vd(a,16));f.push(h)}d=R(a);S(a,d);this.b.push.apply(this.b,f);this.c.push(e);this.a.push({start:c,end:a.a-1});a.a!=c+b&&S(a,b-(a.a-c))}}};function jf(a,b){try{var c=new kf(a,b);return Promise.resolve(c)}catch(d){return Promise.reject(d)}}
function kf(a,b){this.keySystem=a;for(var c=!1,d=0;d<b.length;++d){var e=b[d],f={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:e.initDataTypes,sessionTypes:["temporary"],label:e.label},g=!1;if(e.audioCapabilities)for(var h=0;h<e.audioCapabilities.length;++h){var m=e.audioCapabilities[h];if(m.contentType){var g=!0,n=m.contentType.split(";")[0];MSMediaKeys.isTypeSupported(this.keySystem,n)&&(f.audioCapabilities.push(m),c=!0)}}if(e.videoCapabilities)for(h=
0;h<e.videoCapabilities.length;++h)m=e.videoCapabilities[h],m.contentType&&(g=!0,n=m.contentType.split(";")[0],MSMediaKeys.isTypeSupported(this.keySystem,n)&&(f.videoCapabilities.push(m),c=!0));g||(c=MSMediaKeys.isTypeSupported(this.keySystem,"video/mp4"));"required"==e.persistentState&&(f.persistentState="required",f.sessionTypes=["persistent-license"]);if(c){this.a=f;return}}c=Error("Unsupported keySystem");c.name="NotSupportedError";c.code=DOMException.NOT_SUPPORTED_ERR;throw c;}
kf.prototype.createMediaKeys=function(){var a=new lf(this.keySystem);return Promise.resolve(a)};kf.prototype.getConfiguration=function(){return this.a};function mf(a){var b=this.mediaKeys;b&&b!=a&&nf(b,null);delete this.mediaKeys;return(this.mediaKeys=a)?nf(a,this):Promise.resolve()}function lf(a){this.a=new MSMediaKeys(a);this.b=new z}lf.prototype.createSession=function(a){if("temporary"!=(a||"temporary"))throw new TypeError("Session type "+a+" is unsupported on this platform.");return new of(this.a)};
lf.prototype.setServerCertificate=function(){return Promise.reject(Error("setServerCertificate not supported on this platform."))};function nf(a,b){function c(){b.msSetMediaKeys(d.a);b.removeEventListener("loadedmetadata",c)}Ka(a.b);if(!b)return Promise.resolve();B(a.b,b,"msneedkey",pf);var d=a;try{return 1<=b.readyState?b.msSetMediaKeys(a.a):b.addEventListener("loadedmetadata",c),Promise.resolve()}catch(e){return Promise.reject(e)}}
function of(a){p.call(this);this.c=null;this.g=a;this.b=this.a=null;this.f=new z;this.sessionId="";this.expiration=NaN;this.closed=new w;this.keyStatuses=new qf}ba(of);k=of.prototype;k.generateRequest=function(a,b){this.a=new w;try{this.c=this.g.createSession("video/mp4",new Uint8Array(b),null),B(this.f,this.c,"mskeymessage",this.hc.bind(this)),B(this.f,this.c,"mskeyadded",this.fc.bind(this)),B(this.f,this.c,"mskeyerror",this.gc.bind(this)),rf(this,"status-pending")}catch(c){this.a.reject(c)}return this.a};
k.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))};k.update=function(a){this.b=new w;try{this.c.update(new Uint8Array(a))}catch(b){this.b.reject(b)}return this.b};k.close=function(){try{this.c.close(),this.closed.resolve(),Ka(this.f)}catch(a){this.closed.reject(a)}return this.closed};k.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))};
function pf(a){var b=document.createEvent("CustomEvent");b.initCustomEvent("encrypted",!1,!1,null);b.initDataType="cenc";if(a=a.initData){var c=new hf(a);if(!(1>=c.a.length)){for(var d=[],e=0;e<c.a.length;e++)d.push(a.subarray(c.a[e].start,c.a[e].end+1));e=sf;a=[];for(c=0;c<d.length;++c){for(var f=!1,g=0;g<a.length&&!(f=e?e(d[c],a[g]):d[c]===a[g]);++g);f||a.push(d[c])}for(e=d=0;e<a.length;e++)d+=a[e].length;d=new Uint8Array(d);for(e=c=0;e<a.length;e++)d.set(a[e],c),c+=a[e].length;a=d}}b.initData=
a;this.dispatchEvent(b)}function sf(a,b){return $a(a,b)}k.hc=function(a){this.a&&(this.a.resolve(),this.a=null);this.dispatchEvent(new H("message",{messageType:void 0==this.keyStatuses.Ua()?"licenserequest":"licenserenewal",message:a.message.buffer}))};k.fc=function(){this.a?(rf(this,"usable"),this.a.resolve(),this.a=null):this.b&&(rf(this,"usable"),this.b.resolve(),this.b=null)};
k.gc=function(){var a=Error("EME PatchedMediaKeysMs key error");a.errorCode=this.c.error;if(this.a)this.a.reject(a),this.a=null;else if(this.b)this.b.reject(a),this.b=null;else switch(this.c.error.code){case MSMediaKeyError.MS_MEDIA_KEYERR_OUTPUT:case MSMediaKeyError.MS_MEDIA_KEYERR_HARDWARECHANGE:rf(this,"output-not-allowed");default:rf(this,"internal-error")}};function rf(a,b){a.keyStatuses.cb(b);a.dispatchEvent(new H("keystatuseschange"))}function qf(){this.size=0;this.a=void 0}var tf;k=qf.prototype;
k.cb=function(a){this.size=void 0==a?0:1;this.a=a};k.Ua=function(){return this.a};k.forEach=function(a){this.a&&a(this.a,tf)};k.get=function(a){if(this.has(a))return this.a};k.has=function(a){var b=tf;return this.a&&$a(new Uint8Array(a),new Uint8Array(b))?!0:!1};function uf(){return Promise.reject(Error("The key system specified is not supported."))}function vf(a){return a?Promise.reject(Error("MediaKeys not supported.")):Promise.resolve()}function wf(){throw new TypeError("Illegal constructor.");}wf.prototype.createSession=function(){};wf.prototype.setServerCertificate=function(){};function xf(){throw new TypeError("Illegal constructor.");}xf.prototype.getConfiguration=function(){};xf.prototype.createMediaKeys=function(){};function yf(a,b){try{var c=new zf(a,b);return Promise.resolve(c)}catch(d){return Promise.reject(d)}}function Af(a){var b=this.mediaKeys;b&&b!=a&&Bf(b,null);delete this.mediaKeys;(this.mediaKeys=a)&&Bf(a,this);return Promise.resolve()}
function zf(a,b){this.a=this.keySystem=a;var c=!0;"org.w3.clearkey"==a&&(this.a="webkit-org.w3.clearkey",c=!1);var d=!1,e;e=document.getElementsByTagName("video");e=e.length?e[0]:document.createElement("video");for(var f=0;f<b.length;++f){var g=b[f],h={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:g.initDataTypes,sessionTypes:["temporary"],label:g.label},m=!1;if(g.audioCapabilities)for(var n=0;n<g.audioCapabilities.length;++n){var r=
g.audioCapabilities[n];r.contentType&&(m=!0,e.canPlayType(r.contentType.split(";")[0],this.a)&&(h.audioCapabilities.push(r),d=!0))}if(g.videoCapabilities)for(n=0;n<g.videoCapabilities.length;++n)r=g.videoCapabilities[n],r.contentType&&(m=!0,e.canPlayType(r.contentType,this.a)&&(h.videoCapabilities.push(r),d=!0));m||(d=e.canPlayType("video/mp4",this.a)||e.canPlayType("video/webm",this.a));"required"==g.persistentState&&(c?(h.persistentState="required",h.sessionTypes=["persistent-license"]):d=!1);if(d){this.b=
h;return}}c="Unsupported keySystem";if("org.w3.clearkey"==a||"com.widevine.alpha"==a)c="None of the requested configurations were supported.";c=Error(c);c.name="NotSupportedError";c.code=DOMException.NOT_SUPPORTED_ERR;throw c;}zf.prototype.createMediaKeys=function(){var a=new Cf(this.a);return Promise.resolve(a)};zf.prototype.getConfiguration=function(){return this.b};function Cf(a){this.g=a;this.b=null;this.a=new z;this.c=[];this.f={}}
function Bf(a,b){a.b=b;Ka(a.a);b&&(B(a.a,b,"webkitneedkey",a.pc.bind(a)),B(a.a,b,"webkitkeymessage",a.oc.bind(a)),B(a.a,b,"webkitkeyadded",a.mc.bind(a)),B(a.a,b,"webkitkeyerror",a.nc.bind(a)))}k=Cf.prototype;k.createSession=function(a){var b=a||"temporary";if("temporary"!=b&&"persistent-license"!=b)throw new TypeError("Session type "+a+" is unsupported on this platform.");a=this.b||document.createElement("video");a.src||(a.src="about:blank");b=new Df(a,this.g,b);this.c.push(b);return b};
k.setServerCertificate=function(){return Promise.reject(Error("setServerCertificate not supported on this platform."))};k.pc=function(a){this.b.dispatchEvent(new H("encrypted",{initDataType:"webm",initData:a.initData}))};k.oc=function(a){var b=Ef(this,a.sessionId);b&&(a=new H("message",{messageType:void 0==b.keyStatuses.Ua()?"licenserequest":"licenserenewal",message:a.message}),b.b&&(b.b.resolve(),b.b=null),b.dispatchEvent(a))};
k.mc=function(a){if(a=Ef(this,a.sessionId))Ff(a,"usable"),a.a&&a.a.resolve(),a.a=null};
k.nc=function(a){var b=Ef(this,a.sessionId);if(b){var c=Error("EME v0.1b key error");c.errorCode=a.errorCode;c.errorCode.systemCode=a.systemCode;!a.sessionId&&b.b?(c.method="generateRequest",45==a.systemCode&&(c.message="Unsupported session type."),b.b.reject(c),b.b=null):a.sessionId&&b.a?(c.method="update",b.a.reject(c),b.a=null):(c=a.systemCode,a.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?Ff(b,"output-restricted"):1==c?Ff(b,"expired"):Ff(b,"internal-error"))}};
function Ef(a,b){var c=a.f[b];return c?c:(c=a.c.shift())?(c.sessionId=b,a.f[b]=c):null}function Df(a,b,c){p.call(this);this.f=a;this.h=!1;this.a=this.b=null;this.c=b;this.g=c;this.sessionId="";this.expiration=NaN;this.closed=new w;this.keyStatuses=new Gf}ba(Df);
function Hf(a,b,c){if(a.h)return Promise.reject(Error("The session is already initialized."));a.h=!0;var d;try{if("persistent-license"==a.g)if(c)d=new Uint8Array(Sa("LOAD_SESSION|"+c));else{var e=Sa("PERSISTENT|"),f=new Uint8Array(e.byteLength+b.byteLength);f.set(new Uint8Array(e),0);f.set(new Uint8Array(b),e.byteLength);d=f}else d=new Uint8Array(b)}catch(g){return Promise.reject(g)}a.b=new w;try{a.f.webkitGenerateKeyRequest(a.c,d)}catch(g){if("InvalidStateError"!=g.name)return a.b=null,Promise.reject(g);
setTimeout(function(){try{this.f.webkitGenerateKeyRequest(this.c,d)}catch(a){this.b.reject(a),this.b=null}}.bind(a),10)}return a.b}k=Df.prototype;
k.fb=function(a,b){if(this.a)this.a.then(this.fb.bind(this,a,b))["catch"](this.fb.bind(this,a,b));else{this.a=a;var c,d;"webkit-org.w3.clearkey"==this.c?(c=D(b),d=JSON.parse(c),"oct"!=d.keys[0].kty&&(this.a.reject(Error("Response is not a valid JSON Web Key Set.")),this.a=null),c=Xa(d.keys[0].k),d=Xa(d.keys[0].kid)):(c=new Uint8Array(b),d=null);try{this.f.webkitAddKey(this.c,c,d,this.sessionId)}catch(e){this.a.reject(e),this.a=null}}};
function Ff(a,b){a.keyStatuses.cb(b);a.dispatchEvent(new H("keystatuseschange"))}k.generateRequest=function(a,b){return Hf(this,b,null)};k.load=function(a){return"persistent-license"==this.g?Hf(this,null,a):Promise.reject(Error("Not a persistent session."))};k.update=function(a){var b=new w;this.fb(b,a);return b};
k.close=function(){if("persistent-license"!=this.g){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;this.f.webkitCancelKeyRequest(this.c,this.sessionId)}this.closed.resolve();return this.closed};k.remove=function(){return"persistent-license"!=this.g?Promise.reject(Error("Not a persistent session.")):this.close()};function Gf(){this.size=0;this.a=void 0}var If;k=Gf.prototype;k.cb=function(a){this.size=void 0==a?0:1;this.a=a};k.Ua=function(){return this.a};
k.forEach=function(a){this.a&&a(this.a,If)};k.get=function(a){if(this.has(a))return this.a};k.has=function(a){var b=If;return this.a&&$a(new Uint8Array(a),new Uint8Array(b))?!0:!1};ff(function(){!window.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(HTMLMediaElement.prototype.webkitGenerateKeyRequest?(If=(new Uint8Array([0])).buffer,navigator.requestMediaKeySystemAccess=yf,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=Af,window.MediaKeys=Cf,window.MediaKeySystemAccess=zf):window.MSMediaKeys?(tf=(new Uint8Array([0])).buffer,delete HTMLMediaElement.prototype.mediaKeys,
HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=mf,window.MediaKeys=lf,window.MediaKeySystemAccess=kf,navigator.requestMediaKeySystemAccess=jf):(navigator.requestMediaKeySystemAccess=uf,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=vf,window.MediaKeys=wf,window.MediaKeySystemAccess=xf))});ff(function(){if(window.MediaSource){var a=navigator.vendor,b=navigator.appVersion;if(a&&b&&!(0>a.indexOf("Apple")))if(0<=b.indexOf("Version/8"))window.MediaSource=null;else{var c=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(){var a=c.apply(this,arguments);a.abort=function(){};return a}}}});function Z(a){this.c=[];this.b=[];this.ja=Jf;if(a)try{a(this.W.bind(this),this.a.bind(this))}catch(b){this.a(b)}}var Jf=0;function Kf(a){var b=new Z;b.W(a);return b}function Lf(a){var b=new Z;b.a(a);return b}function Mf(a){function b(a,b,c){a.ja==Jf&&(e[b]=c,d++,d==e.length&&a.W(e))}var c=new Z;if(!a.length)return c.W([]),c;for(var d=0,e=Array(a.length),f=c.a.bind(c),g=0;g<a.length;++g)a[g]&&a[g].then?a[g].then(b.bind(null,c,g),f):b(c,g,a[g]);return c}
function Nf(a){for(var b=new Z,c=b.W.bind(b),d=b.a.bind(b),e=0;e<a.length;++e)a[e]&&a[e].then?a[e].then(c,d):c(a[e]);return b}Z.prototype.then=function(a,b){var c=new Z;switch(this.ja){case 1:Of(this,c,a);break;case 2:Of(this,c,b);break;case Jf:this.c.push({I:c,Ca:a}),this.b.push({I:c,Ca:b})}return c};Z.prototype.then=Z.prototype.then;Z.prototype["catch"]=function(a){return this.then(void 0,a)};Z.prototype["catch"]=Z.prototype["catch"];
Z.prototype.W=function(a){if(this.ja==Jf){this.Oa=a;this.ja=1;for(a=0;a<this.c.length;++a)Of(this,this.c[a].I,this.c[a].Ca);this.c=[];this.b=[]}};Z.prototype.a=function(a){if(this.ja==Jf){this.Oa=a;this.ja=2;for(a=0;a<this.b.length;++a)Of(this,this.b[a].I,this.b[a].Ca);this.c=[];this.b=[]}};
function Of(a,b,c){Pf.push(function(){if(c&&"function"==typeof c){try{var a=c(this.Oa)}catch(f){b.a(f);return}var e;try{e=a&&a.then}catch(f){b.a(f);return}a instanceof Z?a==b?b.a(new TypeError("Chaining cycle detected")):a.then(b.W.bind(b),b.a.bind(b)):e?Qf(a,e,b):b.W(a)}else 1==this.ja?b.W(this.Oa):b.a(this.Oa)}.bind(a));null==Rf&&(Rf=Sf(Tf))}
function Qf(a,b,c){try{var d=!1;b.call(a,function(a){if(!d){d=!0;var b;try{b=a&&a.then}catch(g){c.a(g);return}b?Qf(a,b,c):c.W(a)}},c.a.bind(c))}catch(e){c.a(e)}}function Tf(){for(;Pf.length;){null!=Rf&&(Uf(Rf),Rf=null);var a=Pf;Pf=[];for(var b=0;b<a.length;++b)a[b]()}}function Sf(){return 0}function Uf(){}var Rf=null,Pf=[];
ff(function(a){window.setImmediate?(Sf=function(a){return window.setImmediate(a)},Uf=function(a){return window.clearImmediate(a)}):(Sf=function(a){return window.setTimeout(a,0)},Uf=function(a){return window.clearTimeout(a)});if(!window.Promise||a)window.Promise=Z,window.Promise.resolve=Kf,window.Promise.reject=Lf,window.Promise.all=Mf,window.Promise.race=Nf});function Vf(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}}ff(function(){if(window.HTMLVideoElement){var a=HTMLVideoElement.prototype;!a.getVideoPlaybackQuality&&"webkitDroppedFrameCount"in a&&(a.getVideoPlaybackQuality=Vf)}});}.call(g,this));
if (typeof(module)!="undefined"&&module.exports)module.exports=g.shaka;
else if (typeof(define)!="undefined" && define.amd)define(function(){return g.shaka});
else this.shaka=g.shaka;
})();


},{}],5:[function(require,module,exports){
// stats.js - http://github.com/mrdoob/stats.js
var Stats=function(){var l=Date.now(),m=l,g=0,n=Infinity,o=0,h=0,p=Infinity,q=0,r=0,s=0,f=document.createElement("div");f.id="stats";f.addEventListener("mousedown",function(b){b.preventDefault();t(++s%2)},!1);f.style.cssText="width:80px;opacity:0.9;cursor:pointer";var a=document.createElement("div");a.id="fps";a.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#002";f.appendChild(a);var i=document.createElement("div");i.id="fpsText";i.style.cssText="color:#0ff;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px";
i.innerHTML="FPS";a.appendChild(i);var c=document.createElement("div");c.id="fpsGraph";c.style.cssText="position:relative;width:74px;height:30px;background-color:#0ff";for(a.appendChild(c);74>c.children.length;){var j=document.createElement("span");j.style.cssText="width:1px;height:30px;float:left;background-color:#113";c.appendChild(j)}var d=document.createElement("div");d.id="ms";d.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#020;display:none";f.appendChild(d);var k=document.createElement("div");
k.id="msText";k.style.cssText="color:#0f0;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px";k.innerHTML="MS";d.appendChild(k);var e=document.createElement("div");e.id="msGraph";e.style.cssText="position:relative;width:74px;height:30px;background-color:#0f0";for(d.appendChild(e);74>e.children.length;)j=document.createElement("span"),j.style.cssText="width:1px;height:30px;float:left;background-color:#131",e.appendChild(j);var t=function(b){s=b;switch(s){case 0:a.style.display=
"block";d.style.display="none";break;case 1:a.style.display="none",d.style.display="block"}};return{REVISION:12,domElement:f,setMode:t,begin:function(){l=Date.now()},end:function(){var b=Date.now();g=b-l;n=Math.min(n,g);o=Math.max(o,g);k.textContent=g+" MS ("+n+"-"+o+")";var a=Math.min(30,30-30*(g/200));e.appendChild(e.firstChild).style.height=a+"px";r++;b>m+1E3&&(h=Math.round(1E3*r/(b-m)),p=Math.min(p,h),q=Math.max(q,h),i.textContent=h+" FPS ("+p+"-"+q+")",a=Math.min(30,30-30*(h/100)),c.appendChild(c.firstChild).style.height=
a+"px",m=b,r=0);return b},update:function(){l=this.end()}}};"object"===typeof module&&(module.exports=Stats);

},{}],6:[function(require,module,exports){
(function (process){
/**
 * Tween.js - Licensed under the MIT license
 * https://github.com/tweenjs/tween.js
 * ----------------------------------------------
 *
 * See https://github.com/tweenjs/tween.js/graphs/contributors for the full list of contributors.
 * Thank you all, you're awesome!
 */

var TWEEN = TWEEN || (function () {

	var _tweens = [];

	return {

		getAll: function () {

			return _tweens;

		},

		removeAll: function () {

			_tweens = [];

		},

		add: function (tween) {

			_tweens.push(tween);

		},

		remove: function (tween) {

			var i = _tweens.indexOf(tween);

			if (i !== -1) {
				_tweens.splice(i, 1);
			}

		},

		update: function (time, preserve) {

			if (_tweens.length === 0) {
				return false;
			}

			var i = 0;

			time = time !== undefined ? time : TWEEN.now();

			while (i < _tweens.length) {

				if (_tweens[i].update(time) || preserve) {
					i++;
				} else {
					_tweens.splice(i, 1);
				}

			}

			return true;

		}
	};

})();


// Include a performance.now polyfill
(function () {
	// In node.js, use process.hrtime.
	if (this.window === undefined && this.process !== undefined) {
		TWEEN.now = function () {
			var time = process.hrtime();

			// Convert [seconds, microseconds] to milliseconds.
			return time[0] * 1000 + time[1] / 1000;
		};
	}
	// In a browser, use window.performance.now if it is available.
	else if (this.window !== undefined &&
	         window.performance !== undefined &&
		 window.performance.now !== undefined) {

		// This must be bound, because directly assigning this function
		// leads to an invocation exception in Chrome.
		TWEEN.now = window.performance.now.bind(window.performance);
	}
	// Use Date.now if it is available.
	else if (Date.now !== undefined) {
		TWEEN.now = Date.now;
	}
	// Otherwise, use 'new Date().getTime()'.
	else {
		TWEEN.now = function () {
			return new Date().getTime();
		};
	}
})();


TWEEN.Tween = function (object) {

	var _object = object;
	var _valuesStart = {};
	var _valuesEnd = {};
	var _valuesStartRepeat = {};
	var _duration = 1000;
	var _repeat = 0;
	var _yoyo = false;
	var _isPlaying = false;
	var _reversed = false;
	var _delayTime = 0;
	var _startTime = null;
	var _easingFunction = TWEEN.Easing.Linear.None;
	var _interpolationFunction = TWEEN.Interpolation.Linear;
	var _chainedTweens = [];
	var _onStartCallback = null;
	var _onStartCallbackFired = false;
	var _onUpdateCallback = null;
	var _onCompleteCallback = null;
	var _onStopCallback = null;

	// Set all starting values present on the target object
	for (var field in object) {
		_valuesStart[field] = parseFloat(object[field], 10);
	}

	this.to = function (properties, duration) {

		if (duration !== undefined) {
			_duration = duration;
		}

		_valuesEnd = properties;

		return this;

	};

	this.start = function (time) {

		TWEEN.add(this);

		_isPlaying = true;

		_onStartCallbackFired = false;

		_startTime = time !== undefined ? time : TWEEN.now();
		_startTime += _delayTime;

		for (var property in _valuesEnd) {

			// Check if an Array was provided as property value
			if (_valuesEnd[property] instanceof Array) {

				if (_valuesEnd[property].length === 0) {
					continue;
				}

				// Create a local copy of the Array with the start value at the front
				_valuesEnd[property] = [_object[property]].concat(_valuesEnd[property]);

			}

			// If `to()` specifies a property that doesn't exist in the source object,
			// we should not set that property in the object
			if (_valuesStart[property] === undefined) {
				continue;
			}

			_valuesStart[property] = _object[property];

			if ((_valuesStart[property] instanceof Array) === false) {
				_valuesStart[property] *= 1.0; // Ensures we're using numbers, not strings
			}

			_valuesStartRepeat[property] = _valuesStart[property] || 0;

		}

		return this;

	};

	this.stop = function () {

		if (!_isPlaying) {
			return this;
		}

		TWEEN.remove(this);
		_isPlaying = false;

		if (_onStopCallback !== null) {
			_onStopCallback.call(_object);
		}

		this.stopChainedTweens();
		return this;

	};

	this.stopChainedTweens = function () {

		for (var i = 0, numChainedTweens = _chainedTweens.length; i < numChainedTweens; i++) {
			_chainedTweens[i].stop();
		}

	};

	this.delay = function (amount) {

		_delayTime = amount;
		return this;

	};

	this.repeat = function (times) {

		_repeat = times;
		return this;

	};

	this.yoyo = function (yoyo) {

		_yoyo = yoyo;
		return this;

	};


	this.easing = function (easing) {

		_easingFunction = easing;
		return this;

	};

	this.interpolation = function (interpolation) {

		_interpolationFunction = interpolation;
		return this;

	};

	this.chain = function () {

		_chainedTweens = arguments;
		return this;

	};

	this.onStart = function (callback) {

		_onStartCallback = callback;
		return this;

	};

	this.onUpdate = function (callback) {

		_onUpdateCallback = callback;
		return this;

	};

	this.onComplete = function (callback) {

		_onCompleteCallback = callback;
		return this;

	};

	this.onStop = function (callback) {

		_onStopCallback = callback;
		return this;

	};

	this.update = function (time) {

		var property;
		var elapsed;
		var value;

		if (time < _startTime) {
			return true;
		}

		if (_onStartCallbackFired === false) {

			if (_onStartCallback !== null) {
				_onStartCallback.call(_object);
			}

			_onStartCallbackFired = true;

		}

		elapsed = (time - _startTime) / _duration;
		elapsed = elapsed > 1 ? 1 : elapsed;

		value = _easingFunction(elapsed);

		for (property in _valuesEnd) {

			// Don't update properties that do not exist in the source object
			if (_valuesStart[property] === undefined) {
				continue;
			}

			var start = _valuesStart[property] || 0;
			var end = _valuesEnd[property];

			if (end instanceof Array) {

				_object[property] = _interpolationFunction(end, value);

			} else {

				// Parses relative end values with start as base (e.g.: +10, -3)
				if (typeof (end) === 'string') {

					if (end.charAt(0) === '+' || end.charAt(0) === '-') {
						end = start + parseFloat(end, 10);
					} else {
						end = parseFloat(end, 10);
					}
				}

				// Protect against non numeric properties.
				if (typeof (end) === 'number') {
					_object[property] = start + (end - start) * value;
				}

			}

		}

		if (_onUpdateCallback !== null) {
			_onUpdateCallback.call(_object, value);
		}

		if (elapsed === 1) {

			if (_repeat > 0) {

				if (isFinite(_repeat)) {
					_repeat--;
				}

				// Reassign starting values, restart by making startTime = now
				for (property in _valuesStartRepeat) {

					if (typeof (_valuesEnd[property]) === 'string') {
						_valuesStartRepeat[property] = _valuesStartRepeat[property] + parseFloat(_valuesEnd[property], 10);
					}

					if (_yoyo) {
						var tmp = _valuesStartRepeat[property];

						_valuesStartRepeat[property] = _valuesEnd[property];
						_valuesEnd[property] = tmp;
					}

					_valuesStart[property] = _valuesStartRepeat[property];

				}

				if (_yoyo) {
					_reversed = !_reversed;
				}

				_startTime = time + _delayTime;

				return true;

			} else {

				if (_onCompleteCallback !== null) {
					_onCompleteCallback.call(_object);
				}

				for (var i = 0, numChainedTweens = _chainedTweens.length; i < numChainedTweens; i++) {
					// Make the chained tweens start exactly at the time they should,
					// even if the `update()` method was called way past the duration of the tween
					_chainedTweens[i].start(_startTime + _duration);
				}

				return false;

			}

		}

		return true;

	};

};


TWEEN.Easing = {

	Linear: {

		None: function (k) {

			return k;

		}

	},

	Quadratic: {

		In: function (k) {

			return k * k;

		},

		Out: function (k) {

			return k * (2 - k);

		},

		InOut: function (k) {

			if ((k *= 2) < 1) {
				return 0.5 * k * k;
			}

			return - 0.5 * (--k * (k - 2) - 1);

		}

	},

	Cubic: {

		In: function (k) {

			return k * k * k;

		},

		Out: function (k) {

			return --k * k * k + 1;

		},

		InOut: function (k) {

			if ((k *= 2) < 1) {
				return 0.5 * k * k * k;
			}

			return 0.5 * ((k -= 2) * k * k + 2);

		}

	},

	Quartic: {

		In: function (k) {

			return k * k * k * k;

		},

		Out: function (k) {

			return 1 - (--k * k * k * k);

		},

		InOut: function (k) {

			if ((k *= 2) < 1) {
				return 0.5 * k * k * k * k;
			}

			return - 0.5 * ((k -= 2) * k * k * k - 2);

		}

	},

	Quintic: {

		In: function (k) {

			return k * k * k * k * k;

		},

		Out: function (k) {

			return --k * k * k * k * k + 1;

		},

		InOut: function (k) {

			if ((k *= 2) < 1) {
				return 0.5 * k * k * k * k * k;
			}

			return 0.5 * ((k -= 2) * k * k * k * k + 2);

		}

	},

	Sinusoidal: {

		In: function (k) {

			return 1 - Math.cos(k * Math.PI / 2);

		},

		Out: function (k) {

			return Math.sin(k * Math.PI / 2);

		},

		InOut: function (k) {

			return 0.5 * (1 - Math.cos(Math.PI * k));

		}

	},

	Exponential: {

		In: function (k) {

			return k === 0 ? 0 : Math.pow(1024, k - 1);

		},

		Out: function (k) {

			return k === 1 ? 1 : 1 - Math.pow(2, - 10 * k);

		},

		InOut: function (k) {

			if (k === 0) {
				return 0;
			}

			if (k === 1) {
				return 1;
			}

			if ((k *= 2) < 1) {
				return 0.5 * Math.pow(1024, k - 1);
			}

			return 0.5 * (- Math.pow(2, - 10 * (k - 1)) + 2);

		}

	},

	Circular: {

		In: function (k) {

			return 1 - Math.sqrt(1 - k * k);

		},

		Out: function (k) {

			return Math.sqrt(1 - (--k * k));

		},

		InOut: function (k) {

			if ((k *= 2) < 1) {
				return - 0.5 * (Math.sqrt(1 - k * k) - 1);
			}

			return 0.5 * (Math.sqrt(1 - (k -= 2) * k) + 1);

		}

	},

	Elastic: {

		In: function (k) {

			if (k === 0) {
				return 0;
			}

			if (k === 1) {
				return 1;
			}

			return -Math.pow(2, 10 * (k - 1)) * Math.sin((k - 1.1) * 5 * Math.PI);

		},

		Out: function (k) {

			if (k === 0) {
				return 0;
			}

			if (k === 1) {
				return 1;
			}

			return Math.pow(2, -10 * k) * Math.sin((k - 0.1) * 5 * Math.PI) + 1;

		},

		InOut: function (k) {

			if (k === 0) {
				return 0;
			}

			if (k === 1) {
				return 1;
			}

			k *= 2;

			if (k < 1) {
				return -0.5 * Math.pow(2, 10 * (k - 1)) * Math.sin((k - 1.1) * 5 * Math.PI);
			}

			return 0.5 * Math.pow(2, -10 * (k - 1)) * Math.sin((k - 1.1) * 5 * Math.PI) + 1;

		}

	},

	Back: {

		In: function (k) {

			var s = 1.70158;

			return k * k * ((s + 1) * k - s);

		},

		Out: function (k) {

			var s = 1.70158;

			return --k * k * ((s + 1) * k + s) + 1;

		},

		InOut: function (k) {

			var s = 1.70158 * 1.525;

			if ((k *= 2) < 1) {
				return 0.5 * (k * k * ((s + 1) * k - s));
			}

			return 0.5 * ((k -= 2) * k * ((s + 1) * k + s) + 2);

		}

	},

	Bounce: {

		In: function (k) {

			return 1 - TWEEN.Easing.Bounce.Out(1 - k);

		},

		Out: function (k) {

			if (k < (1 / 2.75)) {
				return 7.5625 * k * k;
			} else if (k < (2 / 2.75)) {
				return 7.5625 * (k -= (1.5 / 2.75)) * k + 0.75;
			} else if (k < (2.5 / 2.75)) {
				return 7.5625 * (k -= (2.25 / 2.75)) * k + 0.9375;
			} else {
				return 7.5625 * (k -= (2.625 / 2.75)) * k + 0.984375;
			}

		},

		InOut: function (k) {

			if (k < 0.5) {
				return TWEEN.Easing.Bounce.In(k * 2) * 0.5;
			}

			return TWEEN.Easing.Bounce.Out(k * 2 - 1) * 0.5 + 0.5;

		}

	}

};

TWEEN.Interpolation = {

	Linear: function (v, k) {

		var m = v.length - 1;
		var f = m * k;
		var i = Math.floor(f);
		var fn = TWEEN.Interpolation.Utils.Linear;

		if (k < 0) {
			return fn(v[0], v[1], f);
		}

		if (k > 1) {
			return fn(v[m], v[m - 1], m - f);
		}

		return fn(v[i], v[i + 1 > m ? m : i + 1], f - i);

	},

	Bezier: function (v, k) {

		var b = 0;
		var n = v.length - 1;
		var pw = Math.pow;
		var bn = TWEEN.Interpolation.Utils.Bernstein;

		for (var i = 0; i <= n; i++) {
			b += pw(1 - k, n - i) * pw(k, i) * v[i] * bn(n, i);
		}

		return b;

	},

	CatmullRom: function (v, k) {

		var m = v.length - 1;
		var f = m * k;
		var i = Math.floor(f);
		var fn = TWEEN.Interpolation.Utils.CatmullRom;

		if (v[0] === v[m]) {

			if (k < 0) {
				i = Math.floor(f = m * (1 + k));
			}

			return fn(v[(i - 1 + m) % m], v[i], v[(i + 1) % m], v[(i + 2) % m], f - i);

		} else {

			if (k < 0) {
				return v[0] - (fn(v[0], v[0], v[1], v[1], -f) - v[0]);
			}

			if (k > 1) {
				return v[m] - (fn(v[m], v[m], v[m - 1], v[m - 1], f - m) - v[m]);
			}

			return fn(v[i ? i - 1 : 0], v[i], v[m < i + 1 ? m : i + 1], v[m < i + 2 ? m : i + 2], f - i);

		}

	},

	Utils: {

		Linear: function (p0, p1, t) {

			return (p1 - p0) * t + p0;

		},

		Bernstein: function (n, i) {

			var fc = TWEEN.Interpolation.Utils.Factorial;

			return fc(n) / fc(i) / fc(n - i);

		},

		Factorial: (function () {

			var a = [1];

			return function (n) {

				var s = 1;

				if (a[n]) {
					return a[n];
				}

				for (var i = n; i > 1; i--) {
					s *= i;
				}

				a[n] = s;
				return s;

			};

		})(),

		CatmullRom: function (p0, p1, p2, p3, t) {

			var v0 = (p2 - p0) * 0.5;
			var v1 = (p3 - p1) * 0.5;
			var t2 = t * t;
			var t3 = t * t2;

			return (2 * p1 - 2 * p2 + v0 + v1) * t3 + (- 3 * p1 + 3 * p2 - 2 * v0 - v1) * t2 + v0 * t + p1;

		}

	}

};

// UMD (Universal Module Definition)
(function (root) {

	if (typeof define === 'function' && define.amd) {

		// AMD
		define([], function () {
			return TWEEN;
		});

	} else if (typeof module !== 'undefined' && typeof exports === 'object') {

		// Node.js
		module.exports = TWEEN;

	} else if (root !== undefined) {

		// Global variable
		root.TWEEN = TWEEN;

	}

})(this);

}).call(this,require('_process'))

},{"_process":1}],7:[function(require,module,exports){
(function (global){
(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.WebVRManager = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(_dereq_,module,exports){
/*
 * Copyright 2015 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

var Emitter = _dereq_('./emitter.js');
var Modes = _dereq_('./modes.js');
var Util = _dereq_('./util.js');

/**
 * Everything having to do with the WebVR button.
 * Emits a 'click' event when it's clicked.
 */
function ButtonManager(opt_root) {
  var root = opt_root || document.body;
  this.loadIcons_();

  // Make the fullscreen button.
  var fsButton = this.createButton();
  fsButton.src = this.ICONS.fullscreen;
  fsButton.title = 'Fullscreen mode';
  var s = fsButton.style;
  s.bottom = 0;
  s.right = 0;
  fsButton.addEventListener('click', this.createClickHandler_('fs'));
  root.appendChild(fsButton);
  this.fsButton = fsButton;

  // Make the VR button.
  var vrButton = this.createButton();
  vrButton.src = this.ICONS.cardboard;
  vrButton.title = 'Virtual reality mode';
  var s = vrButton.style;
  s.bottom = 0;
  s.right = '48px';
  vrButton.addEventListener('click', this.createClickHandler_('vr'));
  root.appendChild(vrButton);
  this.vrButton = vrButton;

  this.isVisible = true;

}
ButtonManager.prototype = new Emitter();

ButtonManager.prototype.createButton = function() {
  var button = document.createElement('img');
  button.className = 'webvr-button';
  var s = button.style;
  s.position = 'absolute';
  s.width = '24px'
  s.height = '24px';
  s.backgroundSize = 'cover';
  s.backgroundColor = 'transparent';
  s.border = 0;
  s.userSelect = 'none';
  s.webkitUserSelect = 'none';
  s.MozUserSelect = 'none';
  s.cursor = 'pointer';
  s.padding = '12px';
  s.zIndex = 1;
  s.display = 'none';
  s.boxSizing = 'content-box';

  // Prevent button from being selected and dragged.
  button.draggable = false;
  button.addEventListener('dragstart', function(e) {
    e.preventDefault();
  });

  // Style it on hover.
  button.addEventListener('mouseenter', function(e) {
    s.filter = s.webkitFilter = 'drop-shadow(0 0 5px rgba(255,255,255,1))';
  });
  button.addEventListener('mouseleave', function(e) {
    s.filter = s.webkitFilter = '';
  });
  return button;
};

ButtonManager.prototype.setMode = function(mode, isVRCompatible) {
  isVRCompatible = isVRCompatible || WebVRConfig.FORCE_ENABLE_VR;
  if (!this.isVisible) {
    return;
  }
  switch (mode) {
    case Modes.NORMAL:
      this.fsButton.style.display = 'block';
      this.fsButton.src = this.ICONS.fullscreen;
      this.vrButton.style.display = (isVRCompatible ? 'block' : 'none');
      break;
    case Modes.MAGIC_WINDOW:
      this.fsButton.style.display = 'block';
      this.fsButton.src = this.ICONS.exitFullscreen;
      this.vrButton.style.display = 'none';
      break;
    case Modes.VR:
      this.fsButton.style.display = 'none';
      this.vrButton.style.display = 'none';
      break;
  }

  // Hack for Safari Mac/iOS to force relayout (svg-specific issue)
  // http://goo.gl/hjgR6r
  var oldValue = this.fsButton.style.display;
  this.fsButton.style.display = 'inline-block';
  this.fsButton.offsetHeight;
  this.fsButton.style.display = oldValue;
};

ButtonManager.prototype.setVisibility = function(isVisible) {
  this.isVisible = isVisible;
  this.fsButton.style.display = isVisible ? 'block' : 'none';
  this.vrButton.style.display = isVisible ? 'block' : 'none';
};

ButtonManager.prototype.createClickHandler_ = function(eventName) {
  return function(e) {
    e.stopPropagation();
    e.preventDefault();
    this.emit(eventName);
  }.bind(this);
};

ButtonManager.prototype.loadIcons_ = function() {
  // Preload some hard-coded SVG.
  this.ICONS = {};
  this.ICONS.cardboard = Util.base64('image/svg+xml', 'PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNHB4IiBoZWlnaHQ9IjI0cHgiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0iI0ZGRkZGRiI+CiAgICA8cGF0aCBkPSJNMjAuNzQgNkgzLjIxQzIuNTUgNiAyIDYuNTcgMiA3LjI4djEwLjQ0YzAgLjcuNTUgMS4yOCAxLjIzIDEuMjhoNC43OWMuNTIgMCAuOTYtLjMzIDEuMTQtLjc5bDEuNC0zLjQ4Yy4yMy0uNTkuNzktMS4wMSAxLjQ0LTEuMDFzMS4yMS40MiAxLjQ1IDEuMDFsMS4zOSAzLjQ4Yy4xOS40Ni42My43OSAxLjExLjc5aDQuNzljLjcxIDAgMS4yNi0uNTcgMS4yNi0xLjI4VjcuMjhjMC0uNy0uNTUtMS4yOC0xLjI2LTEuMjh6TTcuNSAxNC42MmMtMS4xNyAwLTIuMTMtLjk1LTIuMTMtMi4xMiAwLTEuMTcuOTYtMi4xMyAyLjEzLTIuMTMgMS4xOCAwIDIuMTIuOTYgMi4xMiAyLjEzcy0uOTUgMi4xMi0yLjEyIDIuMTJ6bTkgMGMtMS4xNyAwLTIuMTMtLjk1LTIuMTMtMi4xMiAwLTEuMTcuOTYtMi4xMyAyLjEzLTIuMTNzMi4xMi45NiAyLjEyIDIuMTMtLjk1IDIuMTItMi4xMiAyLjEyeiIvPgogICAgPHBhdGggZmlsbD0ibm9uZSIgZD0iTTAgMGgyNHYyNEgwVjB6Ii8+Cjwvc3ZnPgo=');
  this.ICONS.fullscreen = Util.base64('image/svg+xml', 'PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNHB4IiBoZWlnaHQ9IjI0cHgiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0iI0ZGRkZGRiI+CiAgICA8cGF0aCBkPSJNMCAwaDI0djI0SDB6IiBmaWxsPSJub25lIi8+CiAgICA8cGF0aCBkPSJNNyAxNEg1djVoNXYtMkg3di0zem0tMi00aDJWN2gzVjVINXY1em0xMiA3aC0zdjJoNXYtNWgtMnYzek0xNCA1djJoM3YzaDJWNWgtNXoiLz4KPC9zdmc+Cg==');
  this.ICONS.exitFullscreen = Util.base64('image/svg+xml', 'PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNHB4IiBoZWlnaHQ9IjI0cHgiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0iI0ZGRkZGRiI+CiAgICA8cGF0aCBkPSJNMCAwaDI0djI0SDB6IiBmaWxsPSJub25lIi8+CiAgICA8cGF0aCBkPSJNNSAxNmgzdjNoMnYtNUg1djJ6bTMtOEg1djJoNVY1SDh2M3ptNiAxMWgydi0zaDN2LTJoLTV2NXptMi0xMVY1aC0ydjVoNVY4aC0zeiIvPgo8L3N2Zz4K');
  this.ICONS.settings = Util.base64('image/svg+xml', 'PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNHB4IiBoZWlnaHQ9IjI0cHgiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0iI0ZGRkZGRiI+CiAgICA8cGF0aCBkPSJNMCAwaDI0djI0SDB6IiBmaWxsPSJub25lIi8+CiAgICA8cGF0aCBkPSJNMTkuNDMgMTIuOThjLjA0LS4zMi4wNy0uNjQuMDctLjk4cy0uMDMtLjY2LS4wNy0uOThsMi4xMS0xLjY1Yy4xOS0uMTUuMjQtLjQyLjEyLS42NGwtMi0zLjQ2Yy0uMTItLjIyLS4zOS0uMy0uNjEtLjIybC0yLjQ5IDFjLS41Mi0uNC0xLjA4LS43My0xLjY5LS45OGwtLjM4LTIuNjVDMTQuNDYgMi4xOCAxNC4yNSAyIDE0IDJoLTRjLS4yNSAwLS40Ni4xOC0uNDkuNDJsLS4zOCAyLjY1Yy0uNjEuMjUtMS4xNy41OS0xLjY5Ljk4bC0yLjQ5LTFjLS4yMy0uMDktLjQ5IDAtLjYxLjIybC0yIDMuNDZjLS4xMy4yMi0uMDcuNDkuMTIuNjRsMi4xMSAxLjY1Yy0uMDQuMzItLjA3LjY1LS4wNy45OHMuMDMuNjYuMDcuOThsLTIuMTEgMS42NWMtLjE5LjE1LS4yNC40Mi0uMTIuNjRsMiAzLjQ2Yy4xMi4yMi4zOS4zLjYxLjIybDIuNDktMWMuNTIuNCAxLjA4LjczIDEuNjkuOThsLjM4IDIuNjVjLjAzLjI0LjI0LjQyLjQ5LjQyaDRjLjI1IDAgLjQ2LS4xOC40OS0uNDJsLjM4LTIuNjVjLjYxLS4yNSAxLjE3LS41OSAxLjY5LS45OGwyLjQ5IDFjLjIzLjA5LjQ5IDAgLjYxLS4yMmwyLTMuNDZjLjEyLS4yMi4wNy0uNDktLjEyLS42NGwtMi4xMS0xLjY1ek0xMiAxNS41Yy0xLjkzIDAtMy41LTEuNTctMy41LTMuNXMxLjU3LTMuNSAzLjUtMy41IDMuNSAxLjU3IDMuNSAzLjUtMS41NyAzLjUtMy41IDMuNXoiLz4KPC9zdmc+Cg==');
};

module.exports = ButtonManager;

},{"./emitter.js":2,"./modes.js":3,"./util.js":4}],2:[function(_dereq_,module,exports){
/*
 * Copyright 2015 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

function Emitter() {
  this.callbacks = {};
}

Emitter.prototype.emit = function(eventName) {
  var callbacks = this.callbacks[eventName];
  if (!callbacks) {
    //console.log('No valid callback specified.');
    return;
  }
  var args = [].slice.call(arguments);
  // Eliminate the first param (the callback).
  args.shift();
  for (var i = 0; i < callbacks.length; i++) {
    callbacks[i].apply(this, args);
  }
};

Emitter.prototype.on = function(eventName, callback) {
  if (eventName in this.callbacks) {
    this.callbacks[eventName].push(callback);
  } else {
    this.callbacks[eventName] = [callback];
  }
};

module.exports = Emitter;

},{}],3:[function(_dereq_,module,exports){
/*
 * Copyright 2015 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

var Modes = {
  UNKNOWN: 0,
  // Not fullscreen, just tracking.
  NORMAL: 1,
  // Magic window immersive mode.
  MAGIC_WINDOW: 2,
  // Full screen split screen VR mode.
  VR: 3,
};

module.exports = Modes;

},{}],4:[function(_dereq_,module,exports){
/*
 * Copyright 2015 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

var Util = {};

Util.base64 = function(mimeType, base64) {
  return 'data:' + mimeType + ';base64,' + base64;
};

Util.isMobile = function() {
  var check = false;
  (function(a){if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4)))check = true})(navigator.userAgent||navigator.vendor||window.opera);
  return check;
};

Util.isFirefox = function() {
  return /firefox/i.test(navigator.userAgent);
};

Util.isIOS = function() {
  return /(iPad|iPhone|iPod)/g.test(navigator.userAgent);
};

Util.isIFrame = function() {
  try {
    return window.self !== window.top;
  } catch (e) {
    return true;
  }
};

Util.appendQueryParameter = function(url, key, value) {
  // Determine delimiter based on if the URL already GET parameters in it.
  var delimiter = (url.indexOf('?') < 0 ? '?' : '&');
  url += delimiter + key + '=' + value;
  return url;
};

// From http://goo.gl/4WX3tg
Util.getQueryParameter = function(name) {
  var name = name.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
  var regex = new RegExp("[\\?&]" + name + "=([^&#]*)"),
      results = regex.exec(location.search);
  return results === null ? "" : decodeURIComponent(results[1].replace(/\+/g, " "));
};

Util.isLandscapeMode = function() {
  return (window.orientation == 90 || window.orientation == -90);
};

Util.getScreenWidth = function() {
  return Math.max(window.screen.width, window.screen.height) *
      window.devicePixelRatio;
};

Util.getScreenHeight = function() {
  return Math.min(window.screen.width, window.screen.height) *
      window.devicePixelRatio;
};

module.exports = Util;

},{}],5:[function(_dereq_,module,exports){
/*
 * Copyright 2015 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

var ButtonManager = _dereq_('./button-manager.js');
var Emitter = _dereq_('./emitter.js');
var Modes = _dereq_('./modes.js');
var Util = _dereq_('./util.js');

/**
 * Helper for getting in and out of VR mode.
 */
function WebVRManager(renderer, effect, params) {
  this.params = params || {};

  this.mode = Modes.UNKNOWN;

  // Set option to hide the button.
  this.hideButton = this.params.hideButton || false;
  // Whether or not the FOV should be distorted or un-distorted. By default, it
  // should be distorted, but in the case of vertex shader based distortion,
  // ensure that we use undistorted parameters.
  this.predistorted = !!this.params.predistorted;

  // Save the THREE.js renderer and effect for later.
  this.renderer = renderer;
  this.effect = effect;
  var polyfillWrapper = document.querySelector('.webvr-polyfill-fullscreen-wrapper');
  this.button = new ButtonManager(polyfillWrapper);

  this.isFullscreenDisabled = !!Util.getQueryParameter('no_fullscreen');
  this.startMode = Modes.NORMAL;
  var startModeParam = parseInt(Util.getQueryParameter('start_mode'));
  if (!isNaN(startModeParam)) {
    this.startMode = startModeParam;
  }

  if (this.hideButton) {
    this.button.setVisibility(false);
  }

  // Check if the browser is compatible with WebVR.
  this.getDeviceByType_(VRDisplay).then(function(hmd) {
    this.hmd = hmd;

    // Only enable VR mode if there's a VR device attached or we are running the
    // polyfill on mobile.
    if (!this.isVRCompatibleOverride) {
      this.isVRCompatible =  !hmd.isPolyfilled || Util.isMobile();
    }

    switch (this.startMode) {
      case Modes.MAGIC_WINDOW:
        this.setMode_(Modes.MAGIC_WINDOW);
        break;
      case Modes.VR:
        this.enterVRMode_();
        this.setMode_(Modes.VR);
        break;
      default:
        this.setMode_(Modes.NORMAL);
    }

    this.emit('initialized');
  }.bind(this));

  // Hook up button listeners.
  this.button.on('fs', this.onFSClick_.bind(this));
  this.button.on('vr', this.onVRClick_.bind(this));

  // Bind to fullscreen events.
  document.addEventListener('webkitfullscreenchange',
      this.onFullscreenChange_.bind(this));
  document.addEventListener('mozfullscreenchange',
      this.onFullscreenChange_.bind(this));
  document.addEventListener('msfullscreenchange',
      this.onFullscreenChange_.bind(this));

  // Bind to VR* specific events.
  window.addEventListener('vrdisplaypresentchange',
      this.onVRDisplayPresentChange_.bind(this));
  window.addEventListener('vrdisplaydeviceparamschange',
      this.onVRDisplayDeviceParamsChange_.bind(this));
}

WebVRManager.prototype = new Emitter();

// Expose these values externally.
WebVRManager.Modes = Modes;

WebVRManager.prototype.render = function(scene, camera, timestamp) {
  // Scene may be an array of two scenes, one for each eye.
  if (scene instanceof Array) {
    this.effect.render(scene[0], camera);
  } else {
    this.effect.render(scene, camera);
  }
};

WebVRManager.prototype.setVRCompatibleOverride = function(isVRCompatible) {
  this.isVRCompatible = isVRCompatible;
  this.isVRCompatibleOverride = true;

  // Don't actually change modes, just update the buttons.
  this.button.setMode(this.mode, this.isVRCompatible);
};

WebVRManager.prototype.setFullscreenCallback = function(callback) {
  this.fullscreenCallback = callback;
};

WebVRManager.prototype.setVRCallback = function(callback) {
  this.vrCallback = callback;
};

WebVRManager.prototype.setExitFullscreenCallback = function(callback) {
  this.exitFullscreenCallback = callback;
}

/**
 * Promise returns true if there is at least one HMD device available.
 */
WebVRManager.prototype.getDeviceByType_ = function(type) {
  return new Promise(function(resolve, reject) {
    navigator.getVRDisplays().then(function(displays) {
      // Promise succeeds, but check if there are any displays actually.
      for (var i = 0; i < displays.length; i++) {
        if (displays[i] instanceof type) {
          resolve(displays[i]);
          break;
        }
      }
      resolve(null);
    }, function() {
      // No displays are found.
      resolve(null);
    });
  });
};

/**
 * Helper for entering VR mode.
 */
WebVRManager.prototype.enterVRMode_ = function() {
  this.hmd.requestPresent([{
    source: this.renderer.domElement,
    predistorted: this.predistorted
  }]);
};

WebVRManager.prototype.setMode_ = function(mode) {
  var oldMode = this.mode;
  if (mode == this.mode) {
    console.warn('Not changing modes, already in %s', mode);
    return;
  }
  // console.log('Mode change: %s => %s', this.mode, mode);
  this.mode = mode;
  this.button.setMode(mode, this.isVRCompatible);

  // Emit an event indicating the mode changed.
  this.emit('modechange', mode, oldMode);
};

/**
 * Main button was clicked.
 */
WebVRManager.prototype.onFSClick_ = function() {
  switch (this.mode) {
    case Modes.NORMAL:
      // TODO: Remove this hack if/when iOS gets real fullscreen mode.
      // If this is an iframe on iOS, break out and open in no_fullscreen mode.
      if (Util.isIOS() && Util.isIFrame()) {
        if (this.fullscreenCallback) {
          this.fullscreenCallback();
        } else {
          var url = window.location.href;
          url = Util.appendQueryParameter(url, 'no_fullscreen', 'true');
          url = Util.appendQueryParameter(url, 'start_mode', Modes.MAGIC_WINDOW);
          top.location.href = url;
          return;
        }
      }
      this.setMode_(Modes.MAGIC_WINDOW);
      this.requestFullscreen_();
      break;
    case Modes.MAGIC_WINDOW:
      if (this.isFullscreenDisabled) {
        window.history.back();
        return;
      }
      if (this.exitFullscreenCallback) {
        this.exitFullscreenCallback();
      }
      this.setMode_(Modes.NORMAL);
      this.exitFullscreen_();
      break;
  }
};

/**
 * The VR button was clicked.
 */
WebVRManager.prototype.onVRClick_ = function() {
  // TODO: Remove this hack when iOS has fullscreen mode.
  // If this is an iframe on iOS, break out and open in no_fullscreen mode.
  if (this.mode == Modes.NORMAL && Util.isIOS() && Util.isIFrame()) {
    if (this.vrCallback) {
      this.vrCallback();
    } else {
      var url = window.location.href;
      url = Util.appendQueryParameter(url, 'no_fullscreen', 'true');
      url = Util.appendQueryParameter(url, 'start_mode', Modes.VR);
      top.location.href = url;
      return;
    }
  }
  this.enterVRMode_();
};

WebVRManager.prototype.requestFullscreen_ = function() {
  var canvas = document.body;
  //var canvas = this.renderer.domElement;
  if (canvas.requestFullscreen) {
    canvas.requestFullscreen();
  } else if (canvas.mozRequestFullScreen) {
    canvas.mozRequestFullScreen();
  } else if (canvas.webkitRequestFullscreen) {
    canvas.webkitRequestFullscreen();
  } else if (canvas.msRequestFullscreen) {
    canvas.msRequestFullscreen();
  }
};

WebVRManager.prototype.exitFullscreen_ = function() {
  if (document.exitFullscreen) {
    document.exitFullscreen();
  } else if (document.mozCancelFullScreen) {
    document.mozCancelFullScreen();
  } else if (document.webkitExitFullscreen) {
    document.webkitExitFullscreen();
  } else if (document.msExitFullscreen) {
    document.msExitFullscreen();
  }
};

WebVRManager.prototype.onVRDisplayPresentChange_ = function(e) {
  console.log('onVRDisplayPresentChange_', e);
  if (this.hmd.isPresenting) {
    this.setMode_(Modes.VR);
  } else {
    this.setMode_(Modes.NORMAL);
  }
};

WebVRManager.prototype.onVRDisplayDeviceParamsChange_ = function(e) {
  console.log('onVRDisplayDeviceParamsChange_', e);
};

WebVRManager.prototype.onFullscreenChange_ = function(e) {
  // If we leave full-screen, go back to normal mode.
  if (document.webkitFullscreenElement === null ||
      document.mozFullScreenElement === null) {
    this.setMode_(Modes.NORMAL);
  }
};

module.exports = WebVRManager;

},{"./button-manager.js":1,"./emitter.js":2,"./modes.js":3,"./util.js":4}]},{},[5])(5)
});
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],8:[function(require,module,exports){
(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(_dereq_,module,exports){
'use strict';
/* eslint-disable no-unused-vars */
var hasOwnProperty = Object.prototype.hasOwnProperty;
var propIsEnumerable = Object.prototype.propertyIsEnumerable;

function toObject(val) {
	if (val === null || val === undefined) {
		throw new TypeError('Object.assign cannot be called with null or undefined');
	}

	return Object(val);
}

function shouldUseNative() {
	try {
		if (!Object.assign) {
			return false;
		}

		// Detect buggy property enumeration order in older V8 versions.

		// https://bugs.chromium.org/p/v8/issues/detail?id=4118
		var test1 = new String('abc');  // eslint-disable-line
		test1[5] = 'de';
		if (Object.getOwnPropertyNames(test1)[0] === '5') {
			return false;
		}

		// https://bugs.chromium.org/p/v8/issues/detail?id=3056
		var test2 = {};
		for (var i = 0; i < 10; i++) {
			test2['_' + String.fromCharCode(i)] = i;
		}
		var order2 = Object.getOwnPropertyNames(test2).map(function (n) {
			return test2[n];
		});
		if (order2.join('') !== '0123456789') {
			return false;
		}

		// https://bugs.chromium.org/p/v8/issues/detail?id=3056
		var test3 = {};
		'abcdefghijklmnopqrst'.split('').forEach(function (letter) {
			test3[letter] = letter;
		});
		if (Object.keys(Object.assign({}, test3)).join('') !==
				'abcdefghijklmnopqrst') {
			return false;
		}

		return true;
	} catch (e) {
		// We don't expect any of the above to throw, but better to be safe.
		return false;
	}
}

module.exports = shouldUseNative() ? Object.assign : function (target, source) {
	var from;
	var to = toObject(target);
	var symbols;

	for (var s = 1; s < arguments.length; s++) {
		from = Object(arguments[s]);

		for (var key in from) {
			if (hasOwnProperty.call(from, key)) {
				to[key] = from[key];
			}
		}

		if (Object.getOwnPropertySymbols) {
			symbols = Object.getOwnPropertySymbols(from);
			for (var i = 0; i < symbols.length; i++) {
				if (propIsEnumerable.call(from, symbols[i])) {
					to[symbols[i]] = from[symbols[i]];
				}
			}
		}
	}

	return to;
};

},{}],2:[function(_dereq_,module,exports){
/*
 * Copyright 2015 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

var Util = _dereq_('./util.js');
var WakeLock = _dereq_('./wakelock.js');

// Start at a higher number to reduce chance of conflict.
var nextDisplayId = 1000;
var hasShowDeprecationWarning = false;

var defaultLeftBounds = [0, 0, 0.5, 1];
var defaultRightBounds = [0.5, 0, 0.5, 1];

/**
 * The base class for all VR displays.
 */
function VRDisplay() {
  this.isPolyfilled = true;
  this.displayId = nextDisplayId++;
  this.displayName = 'webvr-polyfill displayName';

  this.isConnected = true;
  this.isPresenting = false;
  this.capabilities = {
    hasPosition: false,
    hasOrientation: false,
    hasExternalDisplay: false,
    canPresent: false,
    maxLayers: 1
  };
  this.stageParameters = null;

  // "Private" members.
  this.waitingForPresent_ = false;
  this.layer_ = null;

  this.fullscreenElement_ = null;
  this.fullscreenWrapper_ = null;
  this.fullscreenElementCachedStyle_ = null;

  this.fullscreenEventTarget_ = null;
  this.fullscreenChangeHandler_ = null;
  this.fullscreenErrorHandler_ = null;

  this.wakelock_ = new WakeLock();
}

VRDisplay.prototype.getPose = function() {
  // TODO: Technically this should retain it's value for the duration of a frame
  // but I doubt that's practical to do in javascript.
  return this.getImmediatePose();
};

VRDisplay.prototype.requestAnimationFrame = function(callback) {
  return window.requestAnimationFrame(callback);
};

VRDisplay.prototype.cancelAnimationFrame = function(id) {
  return window.cancelAnimationFrame(id);
};

VRDisplay.prototype.wrapForFullscreen = function(element) {
  // Don't wrap in iOS.
  if (Util.isIOS()) {
    return element;
  }
  if (!this.fullscreenWrapper_) {
    this.fullscreenWrapper_ = document.createElement('div');
    var cssProperties = [
      'height: ' + Math.min(screen.height, screen.width) + 'px !important',
      'top: 0 !important',
      'left: 0 !important',
      'right: 0 !important',
      'border: 0',
      'margin: 0',
      'padding: 0',
      'z-index: 999999 !important',
      'position: fixed',
    ];
    this.fullscreenWrapper_.setAttribute('style', cssProperties.join('; ') + ';');
    this.fullscreenWrapper_.classList.add('webvr-polyfill-fullscreen-wrapper');
  }

  if (this.fullscreenElement_ == element) {
    return this.fullscreenWrapper_;
  }

  // Remove any previously applied wrappers
  this.removeFullscreenWrapper();

  this.fullscreenElement_ = element;
  var parent = this.fullscreenElement_.parentElement;
  parent.insertBefore(this.fullscreenWrapper_, this.fullscreenElement_);
  parent.removeChild(this.fullscreenElement_);
  this.fullscreenWrapper_.insertBefore(this.fullscreenElement_, this.fullscreenWrapper_.firstChild);
  this.fullscreenElementCachedStyle_ = this.fullscreenElement_.getAttribute('style');

  var self = this;
  function applyFullscreenElementStyle() {
    if (!self.fullscreenElement_) {
      return;
    }

    var cssProperties = [
      'position: absolute',
      'top: 0',
      'left: 0',
      'width: ' + Math.max(screen.width, screen.height) + 'px',
      'height: ' + Math.min(screen.height, screen.width) + 'px',
      'border: 0',
      'margin: 0',
      'padding: 0',
    ];
    self.fullscreenElement_.setAttribute('style', cssProperties.join('; ') + ';');
  }

  applyFullscreenElementStyle();

  return this.fullscreenWrapper_;
};

VRDisplay.prototype.removeFullscreenWrapper = function() {
  if (!this.fullscreenElement_) {
    return;
  }

  var element = this.fullscreenElement_;
  if (this.fullscreenElementCachedStyle_) {
    element.setAttribute('style', this.fullscreenElementCachedStyle_);
  } else {
    element.removeAttribute('style');
  }
  this.fullscreenElement_ = null;
  this.fullscreenElementCachedStyle_ = null;

  var parent = this.fullscreenWrapper_.parentElement;
  this.fullscreenWrapper_.removeChild(element);
  parent.insertBefore(element, this.fullscreenWrapper_);
  parent.removeChild(this.fullscreenWrapper_);

  return element;
};

VRDisplay.prototype.requestPresent = function(layers) {
  var wasPresenting = this.isPresenting;
  var self = this;

  if (!(layers instanceof Array)) {
    if (!hasShowDeprecationWarning) {
      console.warn("Using a deprecated form of requestPresent. Should pass in an array of VRLayers.");
      hasShowDeprecationWarning = true;
    }
    layers = [layers];
  }

  return new Promise(function(resolve, reject) {
    if (!self.capabilities.canPresent) {
      reject(new Error('VRDisplay is not capable of presenting.'));
      return;
    }

    if (layers.length == 0 || layers.length > self.capabilities.maxLayers) {
      reject(new Error('Invalid number of layers.'));
      return;
    }

    var incomingLayer = layers[0];
    if (!incomingLayer.source) {
      /*
      todo: figure out the correct behavior if the source is not provided.
      see https://github.com/w3c/webvr/issues/58
      */
      resolve();
      return;
    }

    var leftBounds = incomingLayer.leftBounds || defaultLeftBounds;
    var rightBounds = incomingLayer.rightBounds || defaultRightBounds;
    if (wasPresenting) {
      // Already presenting, just changing configuration
      var changed = false;
      var layer = self.layer_;
      if (layer.source !== incomingLayer.source) {
        layer.source = incomingLayer.source;
        changed = true;
      }

      for (var i = 0; i < 4; i++) {
        if (layer.leftBounds[i] !== leftBounds[i]) {
          layer.leftBounds[i] = leftBounds[i];
          changed = true;
        }
        if (layer.rightBounds[i] !== rightBounds[i]) {
          layer.rightBounds[i] = rightBounds[i];
          changed = true;
        }
      }

      if (changed) {
        self.fireVRDisplayPresentChange_();
      }
      resolve();
      return;
    }

    // Was not already presenting.
    self.layer_ = {
      predistorted: incomingLayer.predistorted,
      source: incomingLayer.source,
      leftBounds: leftBounds.slice(0),
      rightBounds: rightBounds.slice(0)
    };

    self.waitingForPresent_ = false;
    if (self.layer_ && self.layer_.source) {
      var fullscreenElement = self.wrapForFullscreen(self.layer_.source);

      function onFullscreenChange() {
        var actualFullscreenElement = Util.getFullscreenElement();

        self.isPresenting = (fullscreenElement === actualFullscreenElement);
        if (self.isPresenting) {
          if (screen.orientation && screen.orientation.lock) {
            screen.orientation.lock('landscape-primary').catch(function(error){
                    console.error('screen.orientation.lock() failed due to', error.message)
            });
          }
          self.waitingForPresent_ = false;
          self.beginPresent_();
          resolve();
        } else {
          if (screen.orientation && screen.orientation.unlock) {
            screen.orientation.unlock();
          }
          self.removeFullscreenWrapper();
          self.wakelock_.release();
          self.endPresent_();
          self.removeFullscreenListeners_();
        }
        self.fireVRDisplayPresentChange_();
      }
      function onFullscreenError() {
        if (!self.waitingForPresent_) {
          return;
        }

        self.removeFullscreenWrapper();
        self.removeFullscreenListeners_();

        self.wakelock_.release();
        self.waitingForPresent_ = false;
        self.isPresenting = false;

        reject(new Error('Unable to present.'));
      }

      self.addFullscreenListeners_(fullscreenElement,
          onFullscreenChange, onFullscreenError);

      if (Util.requestFullscreen(fullscreenElement)) {
        self.wakelock_.request();
        self.waitingForPresent_ = true;
      } else if (Util.isIOS()) {
        // *sigh* Just fake it.
        self.wakelock_.request();
        self.isPresenting = true;
        self.beginPresent_();
        self.fireVRDisplayPresentChange_();
        resolve();
      }
    }

    if (!self.waitingForPresent_ && !Util.isIOS()) {
      Util.exitFullscreen();
      reject(new Error('Unable to present.'));
    }
  });
};

VRDisplay.prototype.exitPresent = function() {
  var wasPresenting = this.isPresenting;
  var self = this;
  this.isPresenting = false;
  this.layer_ = null;
  this.wakelock_.release();

  return new Promise(function(resolve, reject) {
    if (wasPresenting) {
      if (!Util.exitFullscreen() && Util.isIOS()) {
        self.endPresent_();
        self.fireVRDisplayPresentChange_();
      }

      resolve();
    } else {
      reject(new Error('Was not presenting to VRDisplay.'));
    }
  });
};

VRDisplay.prototype.getLayers = function() {
  if (this.layer_) {
    return [this.layer_];
  }
  return [];
};

VRDisplay.prototype.fireVRDisplayPresentChange_ = function() {
  var event = new CustomEvent('vrdisplaypresentchange', {detail: {vrdisplay: this}});
  window.dispatchEvent(event);
};

VRDisplay.prototype.addFullscreenListeners_ = function(element, changeHandler, errorHandler) {
  this.removeFullscreenListeners_();

  this.fullscreenEventTarget_ = element;
  this.fullscreenChangeHandler_ = changeHandler;
  this.fullscreenErrorHandler_ = errorHandler;

  if (changeHandler) {
    element.addEventListener('fullscreenchange', changeHandler, false);
    element.addEventListener('webkitfullscreenchange', changeHandler, false);
    document.addEventListener('mozfullscreenchange', changeHandler, false);
    element.addEventListener('msfullscreenchange', changeHandler, false);
  }

  if (errorHandler) {
    element.addEventListener('fullscreenerror', errorHandler, false);
    element.addEventListener('webkitfullscreenerror', errorHandler, false);
    document.addEventListener('mozfullscreenerror', errorHandler, false);
    element.addEventListener('msfullscreenerror', errorHandler, false);
  }
};

VRDisplay.prototype.removeFullscreenListeners_ = function() {
  if (!this.fullscreenEventTarget_)
    return;

  var element = this.fullscreenEventTarget_;

  if (this.fullscreenChangeHandler_) {
    var changeHandler = this.fullscreenChangeHandler_;
    element.removeEventListener('fullscreenchange', changeHandler, false);
    element.removeEventListener('webkitfullscreenchange', changeHandler, false);
    document.removeEventListener('mozfullscreenchange', changeHandler, false);
    element.removeEventListener('msfullscreenchange', changeHandler, false);
  }

  if (this.fullscreenErrorHandler_) {
    var errorHandler = this.fullscreenErrorHandler_;
    element.removeEventListener('fullscreenerror', errorHandler, false);
    element.removeEventListener('webkitfullscreenerror', errorHandler, false);
    document.removeEventListener('mozfullscreenerror', errorHandler, false);
    element.removeEventListener('msfullscreenerror', errorHandler, false);
  }

  this.fullscreenEventTarget_ = null;
  this.fullscreenChangeHandler_ = null;
  this.fullscreenErrorHandler_ = null;
};

VRDisplay.prototype.beginPresent_ = function() {
  // Override to add custom behavior when presentation begins.
};

VRDisplay.prototype.endPresent_ = function() {
  // Override to add custom behavior when presentation ends.
};

VRDisplay.prototype.submitFrame = function(pose) {
  // Override to add custom behavior for frame submission.
};

VRDisplay.prototype.getEyeParameters = function(whichEye) {
  // Override to return accurate eye parameters if canPresent is true.
  return null;
};

/*
 * Deprecated classes
 */

/**
 * The base class for all VR devices. (Deprecated)
 */
function VRDevice() {
  this.isPolyfilled = true;
  this.hardwareUnitId = 'webvr-polyfill hardwareUnitId';
  this.deviceId = 'webvr-polyfill deviceId';
  this.deviceName = 'webvr-polyfill deviceName';
}

/**
 * The base class for all VR HMD devices. (Deprecated)
 */
function HMDVRDevice() {
}
HMDVRDevice.prototype = new VRDevice();

/**
 * The base class for all VR position sensor devices. (Deprecated)
 */
function PositionSensorVRDevice() {
}
PositionSensorVRDevice.prototype = new VRDevice();

module.exports.VRDisplay = VRDisplay;
module.exports.VRDevice = VRDevice;
module.exports.HMDVRDevice = HMDVRDevice;
module.exports.PositionSensorVRDevice = PositionSensorVRDevice;

},{"./util.js":22,"./wakelock.js":24}],3:[function(_dereq_,module,exports){
/*
 * Copyright 2016 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

var CardboardUI = _dereq_('./cardboard-ui.js');
var Util = _dereq_('./util.js');
var WGLUPreserveGLState = _dereq_('./deps/wglu-preserve-state.js');

var distortionVS = [
  'attribute vec2 position;',
  'attribute vec3 texCoord;',

  'varying vec2 vTexCoord;',

  'uniform vec4 viewportOffsetScale[2];',

  'void main() {',
  '  vec4 viewport = viewportOffsetScale[int(texCoord.z)];',
  '  vTexCoord = (texCoord.xy * viewport.zw) + viewport.xy;',
  '  gl_Position = vec4( position, 1.0, 1.0 );',
  '}',
].join('\n');

var distortionFS = [
  'precision mediump float;',
  'uniform sampler2D diffuse;',

  'varying vec2 vTexCoord;',

  'void main() {',
  '  gl_FragColor = texture2D(diffuse, vTexCoord);',
  '}',
].join('\n');

/**
 * A mesh-based distorter.
 */
function CardboardDistorter(gl) {
  this.gl = gl;
  this.ctxAttribs = gl.getContextAttributes();

  this.meshWidth = 20;
  this.meshHeight = 20;

  this.bufferScale = WebVRConfig.BUFFER_SCALE;

  this.bufferWidth = gl.drawingBufferWidth;
  this.bufferHeight = gl.drawingBufferHeight;

  // Patching support
  this.realBindFramebuffer = gl.bindFramebuffer;
  this.realEnable = gl.enable;
  this.realDisable = gl.disable;
  this.realColorMask = gl.colorMask;
  this.realClearColor = gl.clearColor;
  this.realViewport = gl.viewport;

  if (!Util.isIOS()) {
    this.realCanvasWidth = Object.getOwnPropertyDescriptor(gl.canvas.__proto__, 'width');
    this.realCanvasHeight = Object.getOwnPropertyDescriptor(gl.canvas.__proto__, 'height');
  }

  this.isPatched = false;

  // State tracking
  this.lastBoundFramebuffer = null;
  this.cullFace = false;
  this.depthTest = false;
  this.blend = false;
  this.scissorTest = false;
  this.stencilTest = false;
  this.viewport = [0, 0, 0, 0];
  this.colorMask = [true, true, true, true];
  this.clearColor = [0, 0, 0, 0];

  this.attribs = {
    position: 0,
    texCoord: 1
  };
  this.program = Util.linkProgram(gl, distortionVS, distortionFS, this.attribs);
  this.uniforms = Util.getProgramUniforms(gl, this.program);

  this.viewportOffsetScale = new Float32Array(8);
  this.setTextureBounds();

  this.vertexBuffer = gl.createBuffer();
  this.indexBuffer = gl.createBuffer();
  this.indexCount = 0;

  this.renderTarget = gl.createTexture();
  this.framebuffer = gl.createFramebuffer();

  this.depthStencilBuffer = null;
  this.depthBuffer = null;
  this.stencilBuffer = null;

  if (this.ctxAttribs.depth && this.ctxAttribs.stencil) {
    this.depthStencilBuffer = gl.createRenderbuffer();
  } else if (this.ctxAttribs.depth) {
    this.depthBuffer = gl.createRenderbuffer();
  } else if (this.ctxAttribs.stencil) {
    this.stencilBuffer = gl.createRenderbuffer();
  }

  this.patch();

  this.onResize();

  if (!WebVRConfig.CARDBOARD_UI_DISABLED) {
    this.cardboardUI = new CardboardUI(gl);
  }
};

/**
 * Tears down all the resources created by the distorter and removes any
 * patches.
 */
CardboardDistorter.prototype.destroy = function() {
  var gl = this.gl;

  this.unpatch();

  gl.deleteProgram(this.program);
  gl.deleteBuffer(this.vertexBuffer);
  gl.deleteBuffer(this.indexBuffer);
  gl.deleteTexture(this.renderTarget);
  gl.deleteFramebuffer(this.framebuffer);
  if (this.depthStencilBuffer) {
    gl.deleteRenderbuffer(this.depthStencilBuffer);
  }
  if (this.depthBuffer) {
    gl.deleteRenderbuffer(this.depthBuffer);
  }
  if (this.stencilBuffer) {
    gl.deleteRenderbuffer(this.stencilBuffer);
  }

  if (this.cardboardUI) {
    this.cardboardUI.destroy();
  }
};


/**
 * Resizes the backbuffer to match the canvas width and height.
 */
CardboardDistorter.prototype.onResize = function() {
  var gl = this.gl;
  var self = this;

  var glState = [
    gl.RENDERBUFFER_BINDING,
    gl.TEXTURE_BINDING_2D, gl.TEXTURE0
  ];

  WGLUPreserveGLState(gl, glState, function(gl) {
    // Bind real backbuffer and clear it once. We don't need to clear it again
    // after that because we're overwriting the same area every frame.
    self.realBindFramebuffer.call(gl, gl.FRAMEBUFFER, null);

    // Put things in a good state
    if (self.scissorTest) { self.realDisable.call(gl, gl.SCISSOR_TEST); }
    self.realColorMask.call(gl, true, true, true, true);
    self.realViewport.call(gl, 0, 0, gl.drawingBufferWidth, gl.drawingBufferHeight);
    self.realClearColor.call(gl, 0, 0, 0, 1);

    gl.clear(gl.COLOR_BUFFER_BIT);

    // Now bind and resize the fake backbuffer
    self.realBindFramebuffer.call(gl, gl.FRAMEBUFFER, self.framebuffer);

    gl.bindTexture(gl.TEXTURE_2D, self.renderTarget);
    gl.texImage2D(gl.TEXTURE_2D, 0, self.ctxAttribs.alpha ? gl.RGBA : gl.RGB,
        self.bufferWidth, self.bufferHeight, 0,
        self.ctxAttribs.alpha ? gl.RGBA : gl.RGB, gl.UNSIGNED_BYTE, null);
    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);
    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);
    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);
    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);
    gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, self.renderTarget, 0);

    if (self.ctxAttribs.depth && self.ctxAttribs.stencil) {
      gl.bindRenderbuffer(gl.RENDERBUFFER, self.depthStencilBuffer);
      gl.renderbufferStorage(gl.RENDERBUFFER, gl.DEPTH_STENCIL,
          self.bufferWidth, self.bufferHeight);
      gl.framebufferRenderbuffer(gl.FRAMEBUFFER, gl.DEPTH_STENCIL_ATTACHMENT,
          gl.RENDERBUFFER, self.depthStencilBuffer);
    } else if (self.ctxAttribs.depth) {
      gl.bindRenderbuffer(gl.RENDERBUFFER, self.depthBuffer);
      gl.renderbufferStorage(gl.RENDERBUFFER, gl.DEPTH_COMPONENT16,
          self.bufferWidth, self.bufferHeight);
      gl.framebufferRenderbuffer(gl.FRAMEBUFFER, gl.DEPTH_ATTACHMENT,
          gl.RENDERBUFFER, self.depthBuffer);
    } else if (self.ctxAttribs.stencil) {
      gl.bindRenderbuffer(gl.RENDERBUFFER, self.stencilBuffer);
      gl.renderbufferStorage(gl.RENDERBUFFER, gl.STENCIL_INDEX8,
          self.bufferWidth, self.bufferHeight);
      gl.framebufferRenderbuffer(gl.FRAMEBUFFER, gl.STENCIL_ATTACHMENT,
          gl.RENDERBUFFER, self.stencilBuffer);
    }

    if (!gl.checkFramebufferStatus(gl.FRAMEBUFFER) === gl.FRAMEBUFFER_COMPLETE) {
      console.error('Framebuffer incomplete!');
    }

    self.realBindFramebuffer.call(gl, gl.FRAMEBUFFER, self.lastBoundFramebuffer);

    if (self.scissorTest) { self.realEnable.call(gl, gl.SCISSOR_TEST); }

    self.realColorMask.apply(gl, self.colorMask);
    self.realViewport.apply(gl, self.viewport);
    self.realClearColor.apply(gl, self.clearColor);
  });

  if (this.cardboardUI) {
    this.cardboardUI.onResize();
  }
};

CardboardDistorter.prototype.patch = function() {
  if (this.isPatched) {
    return;
  }

  var self = this;
  var canvas = this.gl.canvas;
  var gl = this.gl;

  if (!Util.isIOS()) {
    canvas.width = Util.getScreenWidth() * this.bufferScale;
    canvas.height = Util.getScreenHeight() * this.bufferScale;

    Object.defineProperty(canvas, 'width', {
      configurable: true,
      enumerable: true,
      get: function() {
        return self.bufferWidth;
      },
      set: function(value) {
        self.bufferWidth = value;
        self.onResize();
      }
    });

    Object.defineProperty(canvas, 'height', {
      configurable: true,
      enumerable: true,
      get: function() {
        return self.bufferHeight;
      },
      set: function(value) {
        self.bufferHeight = value;
        self.onResize();
      }
    });
  }

  this.lastBoundFramebuffer = gl.getParameter(gl.FRAMEBUFFER_BINDING);

  if (this.lastBoundFramebuffer == null) {
    this.lastBoundFramebuffer = this.framebuffer;
    this.gl.bindFramebuffer(gl.FRAMEBUFFER, this.framebuffer);
  }

  this.gl.bindFramebuffer = function(target, framebuffer) {
    self.lastBoundFramebuffer = framebuffer ? framebuffer : self.framebuffer;
    // Silently make calls to bind the default framebuffer bind ours instead.
    self.realBindFramebuffer.call(gl, target, self.lastBoundFramebuffer);
  };

  this.cullFace = gl.getParameter(gl.CULL_FACE);
  this.depthTest = gl.getParameter(gl.DEPTH_TEST);
  this.blend = gl.getParameter(gl.BLEND);
  this.scissorTest = gl.getParameter(gl.SCISSOR_TEST);
  this.stencilTest = gl.getParameter(gl.STENCIL_TEST);

  gl.enable = function(pname) {
    switch (pname) {
      case gl.CULL_FACE: self.cullFace = true; break;
      case gl.DEPTH_TEST: self.depthTest = true; break;
      case gl.BLEND: self.blend = true; break;
      case gl.SCISSOR_TEST: self.scissorTest = true; break;
      case gl.STENCIL_TEST: self.stencilTest = true; break;
    }
    self.realEnable.call(gl, pname);
  };

  gl.disable = function(pname) {
    switch (pname) {
      case gl.CULL_FACE: self.cullFace = false; break;
      case gl.DEPTH_TEST: self.depthTest = false; break;
      case gl.BLEND: self.blend = false; break;
      case gl.SCISSOR_TEST: self.scissorTest = false; break;
      case gl.STENCIL_TEST: self.stencilTest = false; break;
    }
    self.realDisable.call(gl, pname);
  };

  this.colorMask = gl.getParameter(gl.COLOR_WRITEMASK);
  gl.colorMask = function(r, g, b, a) {
    self.colorMask[0] = r;
    self.colorMask[1] = g;
    self.colorMask[2] = b;
    self.colorMask[3] = a;
    self.realColorMask.call(gl, r, g, b, a);
  };

  this.clearColor = gl.getParameter(gl.COLOR_CLEAR_VALUE);
  gl.clearColor = function(r, g, b, a) {
    self.clearColor[0] = r;
    self.clearColor[1] = g;
    self.clearColor[2] = b;
    self.clearColor[3] = a;
    self.realClearColor.call(gl, r, g, b, a);
  };

  this.viewport = gl.getParameter(gl.VIEWPORT);
  gl.viewport = function(x, y, w, h) {
    self.viewport[0] = x;
    self.viewport[1] = y;
    self.viewport[2] = w;
    self.viewport[3] = h;
    self.realViewport.call(gl, x, y, w, h);
  };

  this.isPatched = true;
  Util.safariCssSizeWorkaround(canvas);
};

CardboardDistorter.prototype.unpatch = function() {
  if (!this.isPatched) {
    return;
  }

  var gl = this.gl;
  var canvas = this.gl.canvas;

  if (!Util.isIOS()) {
    Object.defineProperty(canvas, 'width', this.realCanvasWidth);
    Object.defineProperty(canvas, 'height', this.realCanvasHeight);
  }
  canvas.width = this.bufferWidth;
  canvas.height = this.bufferHeight;

  gl.bindFramebuffer = this.realBindFramebuffer;
  gl.enable = this.realEnable;
  gl.disable = this.realDisable;
  gl.colorMask = this.realColorMask;
  gl.clearColor = this.realClearColor;
  gl.viewport = this.realViewport;

  // Check to see if our fake backbuffer is bound and bind the real backbuffer
  // if that's the case.
  if (this.lastBoundFramebuffer == this.framebuffer) {
    gl.bindFramebuffer(gl.FRAMEBUFFER, null);
  }

  this.isPatched = false;

  setTimeout(function() {
    Util.safariCssSizeWorkaround(canvas);
  }, 1);
};

CardboardDistorter.prototype.setTextureBounds = function(leftBounds, rightBounds) {
  if (!leftBounds) {
    leftBounds = [0, 0, 0.5, 1];
  }

  if (!rightBounds) {
    rightBounds = [0.5, 0, 0.5, 1];
  }

  // Left eye
  this.viewportOffsetScale[0] = leftBounds[0]; // X
  this.viewportOffsetScale[1] = leftBounds[1]; // Y
  this.viewportOffsetScale[2] = leftBounds[2]; // Width
  this.viewportOffsetScale[3] = leftBounds[3]; // Height

  // Right eye
  this.viewportOffsetScale[4] = rightBounds[0]; // X
  this.viewportOffsetScale[5] = rightBounds[1]; // Y
  this.viewportOffsetScale[6] = rightBounds[2]; // Width
  this.viewportOffsetScale[7] = rightBounds[3]; // Height
};

/**
 * Performs distortion pass on the injected backbuffer, rendering it to the real
 * backbuffer.
 */
CardboardDistorter.prototype.submitFrame = function() {
  var gl = this.gl;
  var self = this;

  var glState = [];

  if (!WebVRConfig.DIRTY_SUBMIT_FRAME_BINDINGS) {
    glState.push(
      gl.CURRENT_PROGRAM,
      gl.ARRAY_BUFFER_BINDING,
      gl.ELEMENT_ARRAY_BUFFER_BINDING,
      gl.TEXTURE_BINDING_2D, gl.TEXTURE0
    );
  }

  WGLUPreserveGLState(gl, glState, function(gl) {
    // Bind the real default framebuffer
    self.realBindFramebuffer.call(gl, gl.FRAMEBUFFER, null);

    // Make sure the GL state is in a good place
    if (self.cullFace) { self.realDisable.call(gl, gl.CULL_FACE); }
    if (self.depthTest) { self.realDisable.call(gl, gl.DEPTH_TEST); }
    if (self.blend) { self.realDisable.call(gl, gl.BLEND); }
    if (self.scissorTest) { self.realDisable.call(gl, gl.SCISSOR_TEST); }
    if (self.stencilTest) { self.realDisable.call(gl, gl.STENCIL_TEST); }
    self.realColorMask.call(gl, true, true, true, true);
    self.realViewport.call(gl, 0, 0, gl.drawingBufferWidth, gl.drawingBufferHeight);

    // If the backbuffer has an alpha channel clear every frame so the page
    // doesn't show through.
    if (self.ctxAttribs.alpha || Util.isIOS()) {
      self.realClearColor.call(gl, 0, 0, 0, 1);
      gl.clear(gl.COLOR_BUFFER_BIT);
    }

    // Bind distortion program and mesh
    gl.useProgram(self.program);

    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, self.indexBuffer);

    gl.bindBuffer(gl.ARRAY_BUFFER, self.vertexBuffer);
    gl.enableVertexAttribArray(self.attribs.position);
    gl.enableVertexAttribArray(self.attribs.texCoord);
    gl.vertexAttribPointer(self.attribs.position, 2, gl.FLOAT, false, 20, 0);
    gl.vertexAttribPointer(self.attribs.texCoord, 3, gl.FLOAT, false, 20, 8);

    gl.activeTexture(gl.TEXTURE0);
    gl.uniform1i(self.uniforms.diffuse, 0);
    gl.bindTexture(gl.TEXTURE_2D, self.renderTarget);

    gl.uniform4fv(self.uniforms.viewportOffsetScale, self.viewportOffsetScale);

    // Draws both eyes
    gl.drawElements(gl.TRIANGLES, self.indexCount, gl.UNSIGNED_SHORT, 0);

    if (self.cardboardUI) {
      self.cardboardUI.renderNoState();
    }

    // Bind the fake default framebuffer again
    self.realBindFramebuffer.call(self.gl, gl.FRAMEBUFFER, self.framebuffer);

    // If preserveDrawingBuffer == false clear the framebuffer
    if (!self.ctxAttribs.preserveDrawingBuffer) {
      self.realClearColor.call(gl, 0, 0, 0, 0);
      gl.clear(gl.COLOR_BUFFER_BIT);
    }

    if (!WebVRConfig.DIRTY_SUBMIT_FRAME_BINDINGS) {
      self.realBindFramebuffer.call(gl, gl.FRAMEBUFFER, self.lastBoundFramebuffer);
    }

    // Restore state
    if (self.cullFace) { self.realEnable.call(gl, gl.CULL_FACE); }
    if (self.depthTest) { self.realEnable.call(gl, gl.DEPTH_TEST); }
    if (self.blend) { self.realEnable.call(gl, gl.BLEND); }
    if (self.scissorTest) { self.realEnable.call(gl, gl.SCISSOR_TEST); }
    if (self.stencilTest) { self.realEnable.call(gl, gl.STENCIL_TEST); }

    self.realColorMask.apply(gl, self.colorMask);
    self.realViewport.apply(gl, self.viewport);
    if (self.ctxAttribs.alpha || !self.ctxAttribs.preserveDrawingBuffer) {
      self.realClearColor.apply(gl, self.clearColor);
    }
  });

  // Workaround for the fact that Safari doesn't allow us to patch the canvas
  // width and height correctly. After each submit frame check to see what the
  // real backbuffer size has been set to and resize the fake backbuffer size
  // to match.
  if (Util.isIOS()) {
    var canvas = gl.canvas;
    if (canvas.width != self.bufferWidth || canvas.height != self.bufferHeight) {
      self.bufferWidth = canvas.width;
      self.bufferHeight = canvas.height;
      self.onResize();
    }
  }
};

/**
 * Call when the deviceInfo has changed. At this point we need
 * to re-calculate the distortion mesh.
 */
CardboardDistorter.prototype.updateDeviceInfo = function(deviceInfo) {
  var gl = this.gl;
  var self = this;

  var glState = [gl.ARRAY_BUFFER_BINDING, gl.ELEMENT_ARRAY_BUFFER_BINDING];
  WGLUPreserveGLState(gl, glState, function(gl) {
    var vertices = self.computeMeshVertices_(self.meshWidth, self.meshHeight, deviceInfo);
    gl.bindBuffer(gl.ARRAY_BUFFER, self.vertexBuffer);
    gl.bufferData(gl.ARRAY_BUFFER, vertices, gl.STATIC_DRAW);

    // Indices don't change based on device parameters, so only compute once.
    if (!self.indexCount) {
      var indices = self.computeMeshIndices_(self.meshWidth, self.meshHeight);
      gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, self.indexBuffer);
      gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, indices, gl.STATIC_DRAW);
      self.indexCount = indices.length;
    }
  });
};

/**
 * Build the distortion mesh vertices.
 * Based on code from the Unity cardboard plugin.
 */
CardboardDistorter.prototype.computeMeshVertices_ = function(width, height, deviceInfo) {
  var vertices = new Float32Array(2 * width * height * 5);

  var lensFrustum = deviceInfo.getLeftEyeVisibleTanAngles();
  var noLensFrustum = deviceInfo.getLeftEyeNoLensTanAngles();
  var viewport = deviceInfo.getLeftEyeVisibleScreenRect(noLensFrustum);
  var vidx = 0;
  var iidx = 0;
  for (var e = 0; e < 2; e++) {
    for (var j = 0; j < height; j++) {
      for (var i = 0; i < width; i++, vidx++) {
        var u = i / (width - 1);
        var v = j / (height - 1);

        // Grid points regularly spaced in StreoScreen, and barrel distorted in
        // the mesh.
        var s = u;
        var t = v;
        var x = Util.lerp(lensFrustum[0], lensFrustum[2], u);
        var y = Util.lerp(lensFrustum[3], lensFrustum[1], v);
        var d = Math.sqrt(x * x + y * y);
        var r = deviceInfo.distortion.distortInverse(d);
        var p = x * r / d;
        var q = y * r / d;
        u = (p - noLensFrustum[0]) / (noLensFrustum[2] - noLensFrustum[0]);
        v = (q - noLensFrustum[3]) / (noLensFrustum[1] - noLensFrustum[3]);

        // Convert u,v to mesh screen coordinates.
        var aspect = deviceInfo.device.widthMeters / deviceInfo.device.heightMeters;

        // FIXME: The original Unity plugin multiplied U by the aspect ratio
        // and didn't multiply either value by 2, but that seems to get it
        // really close to correct looking for me. I hate this kind of "Don't
        // know why it works" code though, and wold love a more logical
        // explanation of what needs to happen here.
        u = (viewport.x + u * viewport.width - 0.5) * 2.0; //* aspect;
        v = (viewport.y + v * viewport.height - 0.5) * 2.0;

        vertices[(vidx * 5) + 0] = u; // position.x
        vertices[(vidx * 5) + 1] = v; // position.y
        vertices[(vidx * 5) + 2] = s; // texCoord.x
        vertices[(vidx * 5) + 3] = t; // texCoord.y
        vertices[(vidx * 5) + 4] = e; // texCoord.z (viewport index)
      }
    }
    var w = lensFrustum[2] - lensFrustum[0];
    lensFrustum[0] = -(w + lensFrustum[0]);
    lensFrustum[2] = w - lensFrustum[2];
    w = noLensFrustum[2] - noLensFrustum[0];
    noLensFrustum[0] = -(w + noLensFrustum[0]);
    noLensFrustum[2] = w - noLensFrustum[2];
    viewport.x = 1 - (viewport.x + viewport.width);
  }
  return vertices;
}

/**
 * Build the distortion mesh indices.
 * Based on code from the Unity cardboard plugin.
 */
CardboardDistorter.prototype.computeMeshIndices_ = function(width, height) {
  var indices = new Uint16Array(2 * (width - 1) * (height - 1) * 6);
  var halfwidth = width / 2;
  var halfheight = height / 2;
  var vidx = 0;
  var iidx = 0;
  for (var e = 0; e < 2; e++) {
    for (var j = 0; j < height; j++) {
      for (var i = 0; i < width; i++, vidx++) {
        if (i == 0 || j == 0)
          continue;
        // Build a quad.  Lower right and upper left quadrants have quads with
        // the triangle diagonal flipped to get the vignette to interpolate
        // correctly.
        if ((i <= halfwidth) == (j <= halfheight)) {
          // Quad diagonal lower left to upper right.
          indices[iidx++] = vidx;
          indices[iidx++] = vidx - width - 1;
          indices[iidx++] = vidx - width;
          indices[iidx++] = vidx - width - 1;
          indices[iidx++] = vidx;
          indices[iidx++] = vidx - 1;
        } else {
          // Quad diagonal upper left to lower right.
          indices[iidx++] = vidx - 1;
          indices[iidx++] = vidx - width;
          indices[iidx++] = vidx;
          indices[iidx++] = vidx - width;
          indices[iidx++] = vidx - 1;
          indices[iidx++] = vidx - width - 1;
        }
      }
    }
  }
  return indices;
};

CardboardDistorter.prototype.getOwnPropertyDescriptor_ = function(proto, attrName) {
  var descriptor = Object.getOwnPropertyDescriptor(proto, attrName);
  // In some cases (ahem... Safari), the descriptor returns undefined get and
  // set fields. In this case, we need to create a synthetic property
  // descriptor. This works around some of the issues in
  // https://github.com/borismus/webvr-polyfill/issues/46
  if (descriptor.get === undefined || descriptor.set === undefined) {
    descriptor.configurable = true;
    descriptor.enumerable = true;
    descriptor.get = function() {
      return this.getAttribute(attrName);
    };
    descriptor.set = function(val) {
      this.setAttribute(attrName, val);
    };
  }
  return descriptor;
};

module.exports = CardboardDistorter;

},{"./cardboard-ui.js":4,"./deps/wglu-preserve-state.js":6,"./util.js":22}],4:[function(_dereq_,module,exports){
/*
 * Copyright 2016 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

var Util = _dereq_('./util.js');
var WGLUPreserveGLState = _dereq_('./deps/wglu-preserve-state.js');

var uiVS = [
  'attribute vec2 position;',

  'uniform mat4 projectionMat;',

  'void main() {',
  '  gl_Position = projectionMat * vec4( position, -1.0, 1.0 );',
  '}',
].join('\n');

var uiFS = [
  'precision mediump float;',

  'uniform vec4 color;',

  'void main() {',
  '  gl_FragColor = color;',
  '}',
].join('\n');

var DEG2RAD = Math.PI/180.0;

// The gear has 6 identical sections, each spanning 60 degrees.
var kAnglePerGearSection = 60;

// Half-angle of the span of the outer rim.
var kOuterRimEndAngle = 12;

// Angle between the middle of the outer rim and the start of the inner rim.
var kInnerRimBeginAngle = 20;

// Distance from center to outer rim, normalized so that the entire model
// fits in a [-1, 1] x [-1, 1] square.
var kOuterRadius = 1;

// Distance from center to depressed rim, in model units.
var kMiddleRadius = 0.75;

// Radius of the inner hollow circle, in model units.
var kInnerRadius = 0.3125;

// Center line thickness in DP.
var kCenterLineThicknessDp = 4;

// Button width in DP.
var kButtonWidthDp = 28;

// Factor to scale the touch area that responds to the touch.
var kTouchSlopFactor = 1.5;

var Angles = [
  0, kOuterRimEndAngle, kInnerRimBeginAngle,
  kAnglePerGearSection - kInnerRimBeginAngle,
  kAnglePerGearSection - kOuterRimEndAngle
];

/**
 * Renders the alignment line and "options" gear. It is assumed that the canvas
 * this is rendered into covers the entire screen (or close to it.)
 */
function CardboardUI(gl) {
  this.gl = gl;

  this.attribs = {
    position: 0
  };
  this.program = Util.linkProgram(gl, uiVS, uiFS, this.attribs);
  this.uniforms = Util.getProgramUniforms(gl, this.program);

  this.vertexBuffer = gl.createBuffer();
  this.gearOffset = 0;
  this.gearVertexCount = 0;
  this.arrowOffset = 0;
  this.arrowVertexCount = 0;

  this.projMat = new Float32Array(16);

  this.listener = null;

  this.onResize();
};

/**
 * Tears down all the resources created by the UI renderer.
 */
CardboardUI.prototype.destroy = function() {
  var gl = this.gl;

  if (this.listener) {
    gl.canvas.removeEventListener('click', this.listener, false);
  }

  gl.deleteProgram(this.program);
  gl.deleteBuffer(this.vertexBuffer);
};

/**
 * Adds a listener to clicks on the gear and back icons
 */
CardboardUI.prototype.listen = function(optionsCallback, backCallback) {
  var canvas = this.gl.canvas;
  this.listener = function(event) {
    var midline = canvas.clientWidth / 2;
    var buttonSize = kButtonWidthDp * kTouchSlopFactor;
    // Check to see if the user clicked on (or around) the gear icon
    if (event.clientX > midline - buttonSize &&
        event.clientX < midline + buttonSize &&
        event.clientY > canvas.clientHeight - buttonSize) {
      optionsCallback(event);
    }
    // Check to see if the user clicked on (or around) the back icon
    else if (event.clientX < buttonSize && event.clientY < buttonSize) {
      backCallback(event);
    }
  };
  canvas.addEventListener('click', this.listener, false);
};

/**
 * Builds the UI mesh.
 */
CardboardUI.prototype.onResize = function() {
  var gl = this.gl;
  var self = this;

  var glState = [
    gl.ARRAY_BUFFER_BINDING
  ];

  WGLUPreserveGLState(gl, glState, function(gl) {
    var vertices = [];

    var midline = gl.drawingBufferWidth / 2;

    // Assumes your canvas width and height is scaled proportionately.
    // TODO(smus): The following causes buttons to become huge on iOS, but seems
    // like the right thing to do. For now, added a hack. But really, investigate why.
    var dps = (gl.drawingBufferWidth / (screen.width * window.devicePixelRatio));
    if (!Util.isIOS()) {
      dps *= window.devicePixelRatio;
    }

    var lineWidth = kCenterLineThicknessDp * dps / 2;
    var buttonSize = kButtonWidthDp * kTouchSlopFactor * dps;
    var buttonScale = kButtonWidthDp * dps / 2;
    var buttonBorder = ((kButtonWidthDp * kTouchSlopFactor) - kButtonWidthDp) * dps;

    // Build centerline
    vertices.push(midline - lineWidth, buttonSize);
    vertices.push(midline - lineWidth, gl.drawingBufferHeight);
    vertices.push(midline + lineWidth, buttonSize);
    vertices.push(midline + lineWidth, gl.drawingBufferHeight);

    // Build gear
    self.gearOffset = (vertices.length / 2);

    function addGearSegment(theta, r) {
      var angle = (90 - theta) * DEG2RAD;
      var x = Math.cos(angle);
      var y = Math.sin(angle);
      vertices.push(kInnerRadius * x * buttonScale + midline, kInnerRadius * y * buttonScale + buttonScale);
      vertices.push(r * x * buttonScale + midline, r * y * buttonScale + buttonScale);
    }

    for (var i = 0; i <= 6; i++) {
      var segmentTheta = i * kAnglePerGearSection;

      addGearSegment(segmentTheta, kOuterRadius);
      addGearSegment(segmentTheta + kOuterRimEndAngle, kOuterRadius);
      addGearSegment(segmentTheta + kInnerRimBeginAngle, kMiddleRadius);
      addGearSegment(segmentTheta + (kAnglePerGearSection - kInnerRimBeginAngle), kMiddleRadius);
      addGearSegment(segmentTheta + (kAnglePerGearSection - kOuterRimEndAngle), kOuterRadius);
    }

    self.gearVertexCount = (vertices.length / 2) - self.gearOffset;

    // Build back arrow
    self.arrowOffset = (vertices.length / 2);

    function addArrowVertex(x, y) {
      vertices.push(buttonBorder + x, gl.drawingBufferHeight - buttonBorder - y);
    }

    var angledLineWidth = lineWidth / Math.sin(45 * DEG2RAD);

    addArrowVertex(0, buttonScale);
    addArrowVertex(buttonScale, 0);
    addArrowVertex(buttonScale + angledLineWidth, angledLineWidth);
    addArrowVertex(angledLineWidth, buttonScale + angledLineWidth);

    addArrowVertex(angledLineWidth, buttonScale - angledLineWidth);
    addArrowVertex(0, buttonScale);
    addArrowVertex(buttonScale, buttonScale * 2);
    addArrowVertex(buttonScale + angledLineWidth, (buttonScale * 2) - angledLineWidth);

    addArrowVertex(angledLineWidth, buttonScale - angledLineWidth);
    addArrowVertex(0, buttonScale);

    addArrowVertex(angledLineWidth, buttonScale - lineWidth);
    addArrowVertex(kButtonWidthDp * dps, buttonScale - lineWidth);
    addArrowVertex(angledLineWidth, buttonScale + lineWidth);
    addArrowVertex(kButtonWidthDp * dps, buttonScale + lineWidth);

    self.arrowVertexCount = (vertices.length / 2) - self.arrowOffset;

    // Buffer data
    gl.bindBuffer(gl.ARRAY_BUFFER, self.vertexBuffer);
    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(vertices), gl.STATIC_DRAW);
  });
};

/**
 * Performs distortion pass on the injected backbuffer, rendering it to the real
 * backbuffer.
 */
CardboardUI.prototype.render = function() {
  var gl = this.gl;
  var self = this;

  var glState = [
    gl.CULL_FACE,
    gl.DEPTH_TEST,
    gl.BLEND,
    gl.SCISSOR_TEST,
    gl.STENCIL_TEST,
    gl.COLOR_WRITEMASK,
    gl.VIEWPORT,

    gl.CURRENT_PROGRAM,
    gl.ARRAY_BUFFER_BINDING
  ];

  WGLUPreserveGLState(gl, glState, function(gl) {
    // Make sure the GL state is in a good place
    gl.disable(gl.CULL_FACE);
    gl.disable(gl.DEPTH_TEST);
    gl.disable(gl.BLEND);
    gl.disable(gl.SCISSOR_TEST);
    gl.disable(gl.STENCIL_TEST);
    gl.colorMask(true, true, true, true);
    gl.viewport(0, 0, gl.drawingBufferWidth, gl.drawingBufferHeight);

    self.renderNoState();
  });
};

CardboardUI.prototype.renderNoState = function() {
  var gl = this.gl;

  // Bind distortion program and mesh
  gl.useProgram(this.program);

  gl.bindBuffer(gl.ARRAY_BUFFER, this.vertexBuffer);
  gl.enableVertexAttribArray(this.attribs.position);
  gl.vertexAttribPointer(this.attribs.position, 2, gl.FLOAT, false, 8, 0);

  gl.uniform4f(this.uniforms.color, 1.0, 1.0, 1.0, 1.0);

  Util.orthoMatrix(this.projMat, 0, gl.drawingBufferWidth, 0, gl.drawingBufferHeight, 0.1, 1024.0);
  gl.uniformMatrix4fv(this.uniforms.projectionMat, false, this.projMat);

  // Draws UI element
  gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);
  gl.drawArrays(gl.TRIANGLE_STRIP, this.gearOffset, this.gearVertexCount);
  gl.drawArrays(gl.TRIANGLE_STRIP, this.arrowOffset, this.arrowVertexCount);
};

module.exports = CardboardUI;

},{"./deps/wglu-preserve-state.js":6,"./util.js":22}],5:[function(_dereq_,module,exports){
/*
 * Copyright 2016 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

var CardboardDistorter = _dereq_('./cardboard-distorter.js');
var CardboardUI = _dereq_('./cardboard-ui.js');
var DeviceInfo = _dereq_('./device-info.js');
var Dpdb = _dereq_('./dpdb/dpdb.js');
var FusionPoseSensor = _dereq_('./sensor-fusion/fusion-pose-sensor.js');
var RotateInstructions = _dereq_('./rotate-instructions.js');
var ViewerSelector = _dereq_('./viewer-selector.js');
var VRDisplay = _dereq_('./base.js').VRDisplay;
var Util = _dereq_('./util.js');

var Eye = {
  LEFT: 'left',
  RIGHT: 'right'
};

/**
 * VRDisplay based on mobile device parameters and DeviceMotion APIs.
 */
function CardboardVRDisplay() {
  this.displayName = 'Cardboard VRDisplay (webvr-polyfill)';

  this.capabilities.hasOrientation = true;
  this.capabilities.canPresent = true;

  // "Private" members.
  this.bufferScale_ = WebVRConfig.BUFFER_SCALE;
  this.poseSensor_ = new FusionPoseSensor();
  this.distorter_ = null;
  this.cardboardUI_ = null;

  this.dpdb_ = new Dpdb(true, this.onDeviceParamsUpdated_.bind(this));
  this.deviceInfo_ = new DeviceInfo(this.dpdb_.getDeviceParams());

  this.viewerSelector_ = new ViewerSelector();
  this.viewerSelector_.on('change', this.onViewerChanged_.bind(this));

  // Set the correct initial viewer.
  this.deviceInfo_.setViewer(this.viewerSelector_.getCurrentViewer());

  if (!WebVRConfig.ROTATE_INSTRUCTIONS_DISABLED) {
    this.rotateInstructions_ = new RotateInstructions();
  }

  if (Util.isIOS()) {
    // Listen for resize events to workaround this awful Safari bug.
    window.addEventListener('resize', this.onResize_.bind(this));
  }
}
CardboardVRDisplay.prototype = new VRDisplay();

CardboardVRDisplay.prototype.getImmediatePose = function() {
  return {
    position: this.poseSensor_.getPosition(),
    orientation: this.poseSensor_.getOrientation(),
    linearVelocity: null,
    linearAcceleration: null,
    angularVelocity: null,
    angularAcceleration: null
  };
};

CardboardVRDisplay.prototype.resetPose = function() {
  this.poseSensor_.resetPose();
};

CardboardVRDisplay.prototype.getEyeParameters = function(whichEye) {
  var offset = [this.deviceInfo_.viewer.interLensDistance * 0.5, 0.0, 0.0];
  var fieldOfView;

  // TODO: FoV can be a little expensive to compute. Cache when device params change.
  if (whichEye == Eye.LEFT) {
    offset[0] *= -1.0;
    fieldOfView = this.deviceInfo_.getFieldOfViewLeftEye();
  } else if (whichEye == Eye.RIGHT) {
    fieldOfView = this.deviceInfo_.getFieldOfViewRightEye();
  } else {
    console.error('Invalid eye provided: %s', whichEye);
    return null;
  }

  return {
    fieldOfView: fieldOfView,
    offset: offset,
    // TODO: Should be able to provide better values than these.
    renderWidth: this.deviceInfo_.device.width * 0.5 * this.bufferScale_,
    renderHeight: this.deviceInfo_.device.height * this.bufferScale_,
  };
};

CardboardVRDisplay.prototype.onDeviceParamsUpdated_ = function(newParams) {
  console.log('DPDB reported that device params were updated.');
  this.deviceInfo_.updateDeviceParams(newParams);

  if (this.distorter_) {
    this.distorter_.updateDeviceInfo(this.deviceInfo_);
  }
};

CardboardVRDisplay.prototype.updateBounds_ = function () {
  if (this.layer_ && this.distorter_ && (this.layer_.leftBounds || this.layer_.rightBounds)) {
    this.distorter_.setTextureBounds(this.layer_.leftBounds, this.layer_.rightBounds);
  }
};

CardboardVRDisplay.prototype.beginPresent_ = function() {
  var gl = this.layer_.source.getContext('webgl');
  if (!gl)
    gl = this.layer_.source.getContext('experimental-webgl');
  if (!gl)
    gl = this.layer_.source.getContext('webgl2');

  if (!gl)
    return; // Can't do distortion without a WebGL context.

  // Provides a way to opt out of distortion
  if (this.layer_.predistorted) {
    if (!WebVRConfig.CARDBOARD_UI_DISABLED) {
      gl.canvas.width = Util.getScreenWidth() * this.bufferScale_;
      gl.canvas.height = Util.getScreenHeight() * this.bufferScale_;
      this.cardboardUI_ = new CardboardUI(gl);
    }
  } else {
    // Create a new distorter for the target context
    this.distorter_ = new CardboardDistorter(gl);
    this.distorter_.updateDeviceInfo(this.deviceInfo_);
    this.cardboardUI_ = this.distorter_.cardboardUI;
  }

  if (this.cardboardUI_) {
    this.cardboardUI_.listen(function(e) {
      // Options clicked.
      this.viewerSelector_.show(this.layer_.source.parentElement);
      e.stopPropagation();
      e.preventDefault();
    }.bind(this), function(e) {
      // Back clicked.
      this.exitPresent();
      e.stopPropagation();
      e.preventDefault();
    }.bind(this));
  }

  if (this.rotateInstructions_) {
    if (Util.isLandscapeMode() && Util.isMobile()) {
      // In landscape mode, temporarily show the "put into Cardboard"
      // interstitial. Otherwise, do the default thing.
      this.rotateInstructions_.showTemporarily(3000, this.layer_.source.parentElement);
    } else {
      this.rotateInstructions_.update();
    }
  }

  // Listen for orientation change events in order to show interstitial.
  this.orientationHandler = this.onOrientationChange_.bind(this);
  window.addEventListener('orientationchange', this.orientationHandler);

  // Listen for present display change events in order to update distorter dimensions
  this.vrdisplaypresentchangeHandler = this.updateBounds_.bind(this);
  window.addEventListener('vrdisplaypresentchange', this.vrdisplaypresentchangeHandler);

  // Fire this event initially, to give geometry-distortion clients the chance
  // to do something custom.
  this.fireVRDisplayDeviceParamsChange_();
};

CardboardVRDisplay.prototype.endPresent_ = function() {
  if (this.distorter_) {
    this.distorter_.destroy();
    this.distorter_ = null;
  }
  if (this.cardboardUI_) {
    this.cardboardUI_.destroy();
    this.cardboardUI_ = null;
  }

  if (this.rotateInstructions_) {
    this.rotateInstructions_.hide();
  }
  this.viewerSelector_.hide();

  window.removeEventListener('orientationchange', this.orientationHandler);
  window.removeEventListener('vrdisplaypresentchange', this.vrdisplaypresentchangeHandler);
};

CardboardVRDisplay.prototype.submitFrame = function(pose) {
  if (this.distorter_) {
    this.distorter_.submitFrame();
  } else if (this.cardboardUI_ && this.layer_) {
    // Hack for predistorted: true.
    var canvas = this.layer_.source.getContext('webgl').canvas;
    if (canvas.width != this.lastWidth || canvas.height != this.lastHeight) {
      this.cardboardUI_.onResize();
    }
    this.lastWidth = canvas.width;
    this.lastHeight = canvas.height;

    // Render the Cardboard UI.
    this.cardboardUI_.render();
  }
};

CardboardVRDisplay.prototype.onOrientationChange_ = function(e) {
  console.log('onOrientationChange_');

  // Hide the viewer selector.
  this.viewerSelector_.hide();

  // Update the rotate instructions.
  if (this.rotateInstructions_) {
    this.rotateInstructions_.update();
  }

  this.onResize_();
};

CardboardVRDisplay.prototype.onResize_ = function(e) {
  if (this.layer_) {
    var gl = this.layer_.source.getContext('webgl');
    // Size the CSS canvas.
    // Added padding on right and bottom because iPhone 5 will not
    // hide the URL bar unless content is bigger than the screen.
    // This will not be visible as long as the container element (e.g. body)
    // is set to 'overflow: hidden'.
    var cssProperties = [
      'position: absolute',
      'top: 0',
      'left: 0',
      'width: ' + Math.max(screen.width, screen.height) + 'px',
      'height: ' + Math.min(screen.height, screen.width) + 'px',
      'border: 0',
      'margin: 0',
      'padding: 0 10px 10px 0',
    ];
    gl.canvas.setAttribute('style', cssProperties.join('; ') + ';');

    Util.safariCssSizeWorkaround(gl.canvas);
  }
};

CardboardVRDisplay.prototype.onViewerChanged_ = function(viewer) {
  this.deviceInfo_.setViewer(viewer);

  if (this.distorter_) {
    // Update the distortion appropriately.
    this.distorter_.updateDeviceInfo(this.deviceInfo_);
  }

  // Fire a new event containing viewer and device parameters for clients that
  // want to implement their own geometry-based distortion.
  this.fireVRDisplayDeviceParamsChange_();
};

CardboardVRDisplay.prototype.fireVRDisplayDeviceParamsChange_ = function() {
  var event = new CustomEvent('vrdisplaydeviceparamschange', {
    detail: {
      vrdisplay: this,
      deviceInfo: this.deviceInfo_,
    }
  });
  window.dispatchEvent(event);
};

module.exports = CardboardVRDisplay;

},{"./base.js":2,"./cardboard-distorter.js":3,"./cardboard-ui.js":4,"./device-info.js":7,"./dpdb/dpdb.js":11,"./rotate-instructions.js":16,"./sensor-fusion/fusion-pose-sensor.js":18,"./util.js":22,"./viewer-selector.js":23}],6:[function(_dereq_,module,exports){
/*
Copyright (c) 2016, Brandon Jones.

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.
*/

/*
Caches specified GL state, runs a callback, and restores the cached state when
done.

Example usage:

var savedState = [
  gl.ARRAY_BUFFER_BINDING,

  // TEXTURE_BINDING_2D or _CUBE_MAP must always be followed by the texure unit.
  gl.TEXTURE_BINDING_2D, gl.TEXTURE0,

  gl.CLEAR_COLOR,
];
// After this call the array buffer, texture unit 0, active texture, and clear
// color will be restored. The viewport will remain changed, however, because
// gl.VIEWPORT was not included in the savedState list.
WGLUPreserveGLState(gl, savedState, function(gl) {
  gl.viewport(0, 0, gl.drawingBufferWidth, gl.drawingBufferHeight);

  gl.bindBuffer(gl.ARRAY_BUFFER, buffer);
  gl.bufferData(gl.ARRAY_BUFFER, ....);

  gl.activeTexture(gl.TEXTURE0);
  gl.bindTexture(gl.TEXTURE_2D, texture);
  gl.texImage2D(gl.TEXTURE_2D, ...);

  gl.clearColor(1, 0, 0, 1);
  gl.clear(gl.COLOR_BUFFER_BIT);
});

Note that this is not intended to be fast. Managing state in your own code to
avoid redundant state setting and querying will always be faster. This function
is most useful for cases where you may not have full control over the WebGL
calls being made, such as tooling or effect injectors.
*/

function WGLUPreserveGLState(gl, bindings, callback) {
  if (!bindings) {
    callback(gl);
    return;
  }

  var boundValues = [];

  var activeTexture = null;
  for (var i = 0; i < bindings.length; ++i) {
    var binding = bindings[i];
    switch (binding) {
      case gl.TEXTURE_BINDING_2D:
      case gl.TEXTURE_BINDING_CUBE_MAP:
        var textureUnit = bindings[++i];
        if (textureUnit < gl.TEXTURE0 || textureUnit > gl.TEXTURE31) {
          console.error("TEXTURE_BINDING_2D or TEXTURE_BINDING_CUBE_MAP must be followed by a valid texture unit");
          boundValues.push(null, null);
          break;
        }
        if (!activeTexture) {
          activeTexture = gl.getParameter(gl.ACTIVE_TEXTURE);
        }
        gl.activeTexture(textureUnit);
        boundValues.push(gl.getParameter(binding), null);
        break;
      case gl.ACTIVE_TEXTURE:
        activeTexture = gl.getParameter(gl.ACTIVE_TEXTURE);
        boundValues.push(null);
        break;
      default:
        boundValues.push(gl.getParameter(binding));
        break;
    }
  }

  callback(gl);

  for (var i = 0; i < bindings.length; ++i) {
    var binding = bindings[i];
    var boundValue = boundValues[i];
    switch (binding) {
      case gl.ACTIVE_TEXTURE:
        break; // Ignore this binding, since we special-case it to happen last.
      case gl.ARRAY_BUFFER_BINDING:
        gl.bindBuffer(gl.ARRAY_BUFFER, boundValue);
        break;
      case gl.COLOR_CLEAR_VALUE:
        gl.clearColor(boundValue[0], boundValue[1], boundValue[2], boundValue[3]);
        break;
      case gl.COLOR_WRITEMASK:
        gl.colorMask(boundValue[0], boundValue[1], boundValue[2], boundValue[3]);
        break;
      case gl.CURRENT_PROGRAM:
        gl.useProgram(boundValue);
        break;
      case gl.ELEMENT_ARRAY_BUFFER_BINDING:
        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, boundValue);
        break;
      case gl.FRAMEBUFFER_BINDING:
        gl.bindFramebuffer(gl.FRAMEBUFFER, boundValue);
        break;
      case gl.RENDERBUFFER_BINDING:
        gl.bindRenderbuffer(gl.RENDERBUFFER, boundValue);
        break;
      case gl.TEXTURE_BINDING_2D:
        var textureUnit = bindings[++i];
        if (textureUnit < gl.TEXTURE0 || textureUnit > gl.TEXTURE31)
          break;
        gl.activeTexture(textureUnit);
        gl.bindTexture(gl.TEXTURE_2D, boundValue);
        break;
      case gl.TEXTURE_BINDING_CUBE_MAP:
        var textureUnit = bindings[++i];
        if (textureUnit < gl.TEXTURE0 || textureUnit > gl.TEXTURE31)
          break;
        gl.activeTexture(textureUnit);
        gl.bindTexture(gl.TEXTURE_CUBE_MAP, boundValue);
        break;
      case gl.VIEWPORT:
        gl.viewport(boundValue[0], boundValue[1], boundValue[2], boundValue[3]);
        break;
      case gl.BLEND:
      case gl.CULL_FACE:
      case gl.DEPTH_TEST:
      case gl.SCISSOR_TEST:
      case gl.STENCIL_TEST:
        if (boundValue) {
          gl.enable(binding);
        } else {
          gl.disable(binding);
        }
        break;
      default:
        console.log("No GL restore behavior for 0x" + binding.toString(16));
        break;
    }

    if (activeTexture) {
      gl.activeTexture(activeTexture);
    }
  }
}

module.exports = WGLUPreserveGLState;
},{}],7:[function(_dereq_,module,exports){
/*
 * Copyright 2015 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

var Distortion = _dereq_('./distortion/distortion.js');
var MathUtil = _dereq_('./math-util.js');
var Util = _dereq_('./util.js');

function Device(params) {
  this.width = params.width || Util.getScreenWidth();
  this.height = params.height || Util.getScreenHeight();
  this.widthMeters = params.widthMeters;
  this.heightMeters = params.heightMeters;
  this.bevelMeters = params.bevelMeters;
}


// Fallback Android device (based on Nexus 5 measurements) for use when
// we can't recognize an Android device.
var DEFAULT_ANDROID = new Device({
  widthMeters: 0.110,
  heightMeters: 0.062,
  bevelMeters: 0.004
});

// Fallback iOS device (based on iPhone6) for use when
// we can't recognize an Android device.
var DEFAULT_IOS = new Device({
  widthMeters: 0.1038,
  heightMeters: 0.0584,
  bevelMeters: 0.004
});


var Viewers = {
  CardboardV1: new CardboardViewer({
    id: 'CardboardV1',
    label: 'Cardboard I/O 2014',
    fov: 40,
    interLensDistance: 0.060,
    baselineLensDistance: 0.035,
    screenLensDistance: 0.042,
    distortionCoefficients: [0.441, 0.156],
    inverseCoefficients: [-0.4410035, 0.42756155, -0.4804439, 0.5460139,
      -0.58821183, 0.5733938, -0.48303202, 0.33299083, -0.17573841,
      0.0651772, -0.01488963, 0.001559834]
  }),
  CardboardV2: new CardboardViewer({
    id: 'CardboardV2',
    label: 'Cardboard I/O 2015',
    fov: 60,
    interLensDistance: 0.064,
    baselineLensDistance: 0.035,
    screenLensDistance: 0.039,
    distortionCoefficients: [0.34, 0.55],
    inverseCoefficients: [-0.33836704, -0.18162185, 0.862655, -1.2462051,
      1.0560602, -0.58208317, 0.21609078, -0.05444823, 0.009177956,
      -9.904169E-4, 6.183535E-5, -1.6981803E-6]
  })
};


var DEFAULT_LEFT_CENTER = {x: 0.5, y: 0.5};
var DEFAULT_RIGHT_CENTER = {x: 0.5, y: 0.5};

/**
 * Manages information about the device and the viewer.
 *
 * deviceParams indicates the parameters of the device to use (generally
 * obtained from dpdb.getDeviceParams()). Can be null to mean no device
 * params were found.
 */
function DeviceInfo(deviceParams) {
  this.viewer = Viewers.CardboardV2;
  this.updateDeviceParams(deviceParams);
  this.distortion = new Distortion(this.viewer.distortionCoefficients);
}

DeviceInfo.prototype.updateDeviceParams = function(deviceParams) {
  this.device = this.determineDevice_(deviceParams) || this.device;
};

DeviceInfo.prototype.getDevice = function() {
  return this.device;
};

DeviceInfo.prototype.setViewer = function(viewer) {
  this.viewer = viewer;
  this.distortion = new Distortion(this.viewer.distortionCoefficients);
};

DeviceInfo.prototype.determineDevice_ = function(deviceParams) {
  if (!deviceParams) {
    // No parameters, so use a default.
    if (Util.isIOS()) {
      console.warn('Using fallback iOS device measurements.');
      return DEFAULT_IOS;
    } else {
      console.warn('Using fallback Android device measurements.');
      return DEFAULT_ANDROID;
    }
  }

  // Compute device screen dimensions based on deviceParams.
  var METERS_PER_INCH = 0.0254;
  var metersPerPixelX = METERS_PER_INCH / deviceParams.xdpi;
  var metersPerPixelY = METERS_PER_INCH / deviceParams.ydpi;
  var width = Util.getScreenWidth();
  var height = Util.getScreenHeight();
  return new Device({
    widthMeters: metersPerPixelX * width,
    heightMeters: metersPerPixelY * height,
    bevelMeters: deviceParams.bevelMm * 0.001,
  });
};

/**
 * Calculates field of view for the left eye.
 */
DeviceInfo.prototype.getDistortedFieldOfViewLeftEye = function() {
  var viewer = this.viewer;
  var device = this.device;
  var distortion = this.distortion;

  // Device.height and device.width for device in portrait mode, so transpose.
  var eyeToScreenDistance = viewer.screenLensDistance;

  var outerDist = (device.widthMeters - viewer.interLensDistance) / 2;
  var innerDist = viewer.interLensDistance / 2;
  var bottomDist = viewer.baselineLensDistance - device.bevelMeters;
  var topDist = device.heightMeters - bottomDist;

  var outerAngle = MathUtil.radToDeg * Math.atan(
      distortion.distort(outerDist / eyeToScreenDistance));
  var innerAngle = MathUtil.radToDeg * Math.atan(
      distortion.distort(innerDist / eyeToScreenDistance));
  var bottomAngle = MathUtil.radToDeg * Math.atan(
      distortion.distort(bottomDist / eyeToScreenDistance));
  var topAngle = MathUtil.radToDeg * Math.atan(
      distortion.distort(topDist / eyeToScreenDistance));

  return {
    leftDegrees: Math.min(outerAngle, viewer.fov),
    rightDegrees: Math.min(innerAngle, viewer.fov),
    downDegrees: Math.min(bottomAngle, viewer.fov),
    upDegrees: Math.min(topAngle, viewer.fov)
  };
};

/**
 * Calculates the tan-angles from the maximum FOV for the left eye for the
 * current device and screen parameters.
 */
DeviceInfo.prototype.getLeftEyeVisibleTanAngles = function() {
  var viewer = this.viewer;
  var device = this.device;
  var distortion = this.distortion;

  // Tan-angles from the max FOV.
  var fovLeft = Math.tan(-MathUtil.degToRad * viewer.fov);
  var fovTop = Math.tan(MathUtil.degToRad * viewer.fov);
  var fovRight = Math.tan(MathUtil.degToRad * viewer.fov);
  var fovBottom = Math.tan(-MathUtil.degToRad * viewer.fov);
  // Viewport size.
  var halfWidth = device.widthMeters / 4;
  var halfHeight = device.heightMeters / 2;
  // Viewport center, measured from left lens position.
  var verticalLensOffset = (viewer.baselineLensDistance - device.bevelMeters - halfHeight);
  var centerX = viewer.interLensDistance / 2 - halfWidth;
  var centerY = -verticalLensOffset;
  var centerZ = viewer.screenLensDistance;
  // Tan-angles of the viewport edges, as seen through the lens.
  var screenLeft = distortion.distort((centerX - halfWidth) / centerZ);
  var screenTop = distortion.distort((centerY + halfHeight) / centerZ);
  var screenRight = distortion.distort((centerX + halfWidth) / centerZ);
  var screenBottom = distortion.distort((centerY - halfHeight) / centerZ);
  // Compare the two sets of tan-angles and take the value closer to zero on each side.
  var result = new Float32Array(4);
  result[0] = Math.max(fovLeft, screenLeft);
  result[1] = Math.min(fovTop, screenTop);
  result[2] = Math.min(fovRight, screenRight);
  result[3] = Math.max(fovBottom, screenBottom);
  return result;
};

/**
 * Calculates the tan-angles from the maximum FOV for the left eye for the
 * current device and screen parameters, assuming no lenses.
 */
DeviceInfo.prototype.getLeftEyeNoLensTanAngles = function() {
  var viewer = this.viewer;
  var device = this.device;
  var distortion = this.distortion;

  var result = new Float32Array(4);
  // Tan-angles from the max FOV.
  var fovLeft = distortion.distortInverse(Math.tan(-MathUtil.degToRad * viewer.fov));
  var fovTop = distortion.distortInverse(Math.tan(MathUtil.degToRad * viewer.fov));
  var fovRight = distortion.distortInverse(Math.tan(MathUtil.degToRad * viewer.fov));
  var fovBottom = distortion.distortInverse(Math.tan(-MathUtil.degToRad * viewer.fov));
  // Viewport size.
  var halfWidth = device.widthMeters / 4;
  var halfHeight = device.heightMeters / 2;
  // Viewport center, measured from left lens position.
  var verticalLensOffset = (viewer.baselineLensDistance - device.bevelMeters - halfHeight);
  var centerX = viewer.interLensDistance / 2 - halfWidth;
  var centerY = -verticalLensOffset;
  var centerZ = viewer.screenLensDistance;
  // Tan-angles of the viewport edges, as seen through the lens.
  var screenLeft = (centerX - halfWidth) / centerZ;
  var screenTop = (centerY + halfHeight) / centerZ;
  var screenRight = (centerX + halfWidth) / centerZ;
  var screenBottom = (centerY - halfHeight) / centerZ;
  // Compare the two sets of tan-angles and take the value closer to zero on each side.
  result[0] = Math.max(fovLeft, screenLeft);
  result[1] = Math.min(fovTop, screenTop);
  result[2] = Math.min(fovRight, screenRight);
  result[3] = Math.max(fovBottom, screenBottom);
  return result;
};

/**
 * Calculates the screen rectangle visible from the left eye for the
 * current device and screen parameters.
 */
DeviceInfo.prototype.getLeftEyeVisibleScreenRect = function(undistortedFrustum) {
  var viewer = this.viewer;
  var device = this.device;

  var dist = viewer.screenLensDistance;
  var eyeX = (device.widthMeters - viewer.interLensDistance) / 2;
  var eyeY = viewer.baselineLensDistance - device.bevelMeters;
  var left = (undistortedFrustum[0] * dist + eyeX) / device.widthMeters;
  var top = (undistortedFrustum[1] * dist + eyeY) / device.heightMeters;
  var right = (undistortedFrustum[2] * dist + eyeX) / device.widthMeters;
  var bottom = (undistortedFrustum[3] * dist + eyeY) / device.heightMeters;
  return {
    x: left,
    y: bottom,
    width: right - left,
    height: top - bottom
  };
};

DeviceInfo.prototype.getFieldOfViewLeftEye = function(opt_isUndistorted) {
  return opt_isUndistorted ? this.getUndistortedFieldOfViewLeftEye() :
      this.getDistortedFieldOfViewLeftEye();
};

DeviceInfo.prototype.getFieldOfViewRightEye = function(opt_isUndistorted) {
  var fov = this.getFieldOfViewLeftEye(opt_isUndistorted);
  return {
    leftDegrees: fov.rightDegrees,
    rightDegrees: fov.leftDegrees,
    upDegrees: fov.upDegrees,
    downDegrees: fov.downDegrees
  };
};

/**
 * Calculates undistorted field of view for the left eye.
 */
DeviceInfo.prototype.getUndistortedFieldOfViewLeftEye = function() {
  var p = this.getUndistortedParams_();

  return {
    leftDegrees: MathUtil.radToDeg * Math.atan(p.outerDist),
    rightDegrees: MathUtil.radToDeg * Math.atan(p.innerDist),
    downDegrees: MathUtil.radToDeg * Math.atan(p.bottomDist),
    upDegrees: MathUtil.radToDeg * Math.atan(p.topDist)
  };
};

DeviceInfo.prototype.getUndistortedViewportLeftEye = function() {
  var p = this.getUndistortedParams_();
  var viewer = this.viewer;
  var device = this.device;

  // Distances stored in local variables are in tan-angle units unless otherwise
  // noted.
  var eyeToScreenDistance = viewer.screenLensDistance;
  var screenWidth = device.widthMeters / eyeToScreenDistance;
  var screenHeight = device.heightMeters / eyeToScreenDistance;
  var xPxPerTanAngle = device.width / screenWidth;
  var yPxPerTanAngle = device.height / screenHeight;

  var x = Math.round((p.eyePosX - p.outerDist) * xPxPerTanAngle);
  var y = Math.round((p.eyePosY - p.bottomDist) * yPxPerTanAngle);
  return {
    x: x,
    y: y,
    width: Math.round((p.eyePosX + p.innerDist) * xPxPerTanAngle) - x,
    height: Math.round((p.eyePosY + p.topDist) * yPxPerTanAngle) - y
  };
};

DeviceInfo.prototype.getUndistortedParams_ = function() {
  var viewer = this.viewer;
  var device = this.device;
  var distortion = this.distortion;

  // Most of these variables in tan-angle units.
  var eyeToScreenDistance = viewer.screenLensDistance;
  var halfLensDistance = viewer.interLensDistance / 2 / eyeToScreenDistance;
  var screenWidth = device.widthMeters / eyeToScreenDistance;
  var screenHeight = device.heightMeters / eyeToScreenDistance;

  var eyePosX = screenWidth / 2 - halfLensDistance;
  var eyePosY = (viewer.baselineLensDistance - device.bevelMeters) / eyeToScreenDistance;

  var maxFov = viewer.fov;
  var viewerMax = distortion.distortInverse(Math.tan(MathUtil.degToRad * maxFov));
  var outerDist = Math.min(eyePosX, viewerMax);
  var innerDist = Math.min(halfLensDistance, viewerMax);
  var bottomDist = Math.min(eyePosY, viewerMax);
  var topDist = Math.min(screenHeight - eyePosY, viewerMax);

  return {
    outerDist: outerDist,
    innerDist: innerDist,
    topDist: topDist,
    bottomDist: bottomDist,
    eyePosX: eyePosX,
    eyePosY: eyePosY
  };
};


function CardboardViewer(params) {
  // A machine readable ID.
  this.id = params.id;
  // A human readable label.
  this.label = params.label;

  // Field of view in degrees (per side).
  this.fov = params.fov;

  // Distance between lens centers in meters.
  this.interLensDistance = params.interLensDistance;
  // Distance between viewer baseline and lens center in meters.
  this.baselineLensDistance = params.baselineLensDistance;
  // Screen-to-lens distance in meters.
  this.screenLensDistance = params.screenLensDistance;

  // Distortion coefficients.
  this.distortionCoefficients = params.distortionCoefficients;
  // Inverse distortion coefficients.
  // TODO: Calculate these from distortionCoefficients in the future.
  this.inverseCoefficients = params.inverseCoefficients;
}

// Export viewer information.
DeviceInfo.Viewers = Viewers;
module.exports = DeviceInfo;

},{"./distortion/distortion.js":9,"./math-util.js":14,"./util.js":22}],8:[function(_dereq_,module,exports){
/*
 * Copyright 2016 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var VRDisplay = _dereq_('./base.js').VRDisplay;
var HMDVRDevice = _dereq_('./base.js').HMDVRDevice;
var PositionSensorVRDevice = _dereq_('./base.js').PositionSensorVRDevice;

/**
 * Wraps a VRDisplay and exposes it as a HMDVRDevice
 */
function VRDisplayHMDDevice(display) {
  this.display = display;

  this.hardwareUnitId = display.displayId;
  this.deviceId = 'webvr-polyfill:HMD:' + display.displayId;
  this.deviceName = display.displayName + ' (HMD)';
}
VRDisplayHMDDevice.prototype = new HMDVRDevice();

VRDisplayHMDDevice.prototype.getEyeParameters = function(whichEye) {
  var eyeParameters = this.display.getEyeParameters(whichEye);

  return {
    currentFieldOfView: eyeParameters.fieldOfView,
    maximumFieldOfView: eyeParameters.fieldOfView,
    minimumFieldOfView: eyeParameters.fieldOfView,
    recommendedFieldOfView: eyeParameters.fieldOfView,
    eyeTranslation: { x: eyeParameters.offset[0], y: eyeParameters.offset[1], z: eyeParameters.offset[2] },
    renderRect: {
      x: (whichEye == 'right') ? eyeParameters.renderWidth : 0,
      y: 0,
      width: eyeParameters.renderWidth,
      height: eyeParameters.renderHeight
    }
  };
};

VRDisplayHMDDevice.prototype.setFieldOfView =
    function(opt_fovLeft, opt_fovRight, opt_zNear, opt_zFar) {
  // Not supported. getEyeParameters reports that the min, max, and recommended
  // FoV is all the same, so no adjustment can be made.
};

// TODO: Need to hook requestFullscreen to see if a wrapped VRDisplay was passed
// in as an option. If so we should prevent the default fullscreen behavior and
// call VRDisplay.requestPresent instead.

/**
 * Wraps a VRDisplay and exposes it as a PositionSensorVRDevice
 */
function VRDisplayPositionSensorDevice(display) {
  this.display = display;

  this.hardwareUnitId = display.displayId;
  this.deviceId = 'webvr-polyfill:PositionSensor: ' + display.displayId;
  this.deviceName = display.displayName + ' (PositionSensor)';
}
VRDisplayPositionSensorDevice.prototype = new PositionSensorVRDevice();

VRDisplayPositionSensorDevice.prototype.getState = function() {
  var pose = this.display.getPose();
  return {
    position: pose.position ? { x: pose.position[0], y: pose.position[1], z: pose.position[2] } : null,
    orientation: pose.orientation ? { x: pose.orientation[0], y: pose.orientation[1], z: pose.orientation[2], w: pose.orientation[3] } : null,
    linearVelocity: null,
    linearAcceleration: null,
    angularVelocity: null,
    angularAcceleration: null
  };
};

VRDisplayPositionSensorDevice.prototype.resetState = function() {
  return this.positionDevice.resetPose();
};


module.exports.VRDisplayHMDDevice = VRDisplayHMDDevice;
module.exports.VRDisplayPositionSensorDevice = VRDisplayPositionSensorDevice;


},{"./base.js":2}],9:[function(_dereq_,module,exports){
/**
 * TODO(smus): Implement coefficient inversion.
 */
function Distortion(coefficients) {
  this.coefficients = coefficients;
}

/**
 * Calculates the inverse distortion for a radius.
 * </p><p>
 * Allows to compute the original undistorted radius from a distorted one.
 * See also getApproximateInverseDistortion() for a faster but potentially
 * less accurate method.
 *
 * @param {Number} radius Distorted radius from the lens center in tan-angle units.
 * @return {Number} The undistorted radius in tan-angle units.
 */
Distortion.prototype.distortInverse = function(radius) {
  // Secant method.
  var r0 = 0;
  var r1 = 1;
  var dr0 = radius - this.distort(r0);
  while (Math.abs(r1 - r0) > 0.0001 /** 0.1mm */) {
    var dr1 = radius - this.distort(r1);
    var r2 = r1 - dr1 * ((r1 - r0) / (dr1 - dr0));
    r0 = r1;
    r1 = r2;
    dr0 = dr1;
  }
  return r1;
};

/**
 * Distorts a radius by its distortion factor from the center of the lenses.
 *
 * @param {Number} radius Radius from the lens center in tan-angle units.
 * @return {Number} The distorted radius in tan-angle units.
 */
Distortion.prototype.distort = function(radius) {
  var r2 = radius * radius;
  var ret = 0;
  for (var i = 0; i < this.coefficients.length; i++) {
    ret = r2 * (ret + this.coefficients[i]);
  }
  return (ret + 1) * radius;
};

// Functions below roughly ported from
// https://github.com/googlesamples/cardboard-unity/blob/master/Cardboard/Scripts/CardboardProfile.cs#L412

// Solves a small linear equation via destructive gaussian
// elimination and back substitution.  This isn't generic numeric
// code, it's just a quick hack to work with the generally
// well-behaved symmetric matrices for least-squares fitting.
// Not intended for reuse.
//
// @param a Input positive definite symmetrical matrix. Destroyed
//     during calculation.
// @param y Input right-hand-side values. Destroyed during calculation.
// @return Resulting x value vector.
//
Distortion.prototype.solveLinear_ = function(a, y) {
  var n = a.length;

  // Gaussian elimination (no row exchange) to triangular matrix.
  // The input matrix is a A^T A product which should be a positive
  // definite symmetrical matrix, and if I remember my linear
  // algebra right this implies that the pivots will be nonzero and
  // calculations sufficiently accurate without needing row
  // exchange.
  for (var j = 0; j < n - 1; ++j) {
    for (var k = j + 1; k < n; ++k) {
      var p = a[j][k] / a[j][j];
      for (var i = j + 1; i < n; ++i) {
        a[i][k] -= p * a[i][j];
      }
      y[k] -= p * y[j];
    }
  }
  // From this point on, only the matrix elements a[j][i] with i>=j are
  // valid. The elimination doesn't fill in eliminated 0 values.

  var x = new Array(n);

  // Back substitution.
  for (var j = n - 1; j >= 0; --j) {
    var v = y[j];
    for (var i = j + 1; i < n; ++i) {
      v -= a[i][j] * x[i];
    }
    x[j] = v / a[j][j];
  }

  return x;
};

// Solves a least-squares matrix equation.  Given the equation A * x = y, calculate the
// least-square fit x = inverse(A * transpose(A)) * transpose(A) * y.  The way this works
// is that, while A is typically not a square matrix (and hence not invertible), A * transpose(A)
// is always square.  That is:
//   A * x = y
//   transpose(A) * (A * x) = transpose(A) * y   <- multiply both sides by transpose(A)
//   (transpose(A) * A) * x = transpose(A) * y   <- associativity
//   x = inverse(transpose(A) * A) * transpose(A) * y  <- solve for x
// Matrix A's row count (first index) must match y's value count.  A's column count (second index)
// determines the length of the result vector x.
Distortion.prototype.solveLeastSquares_ = function(matA, vecY) {
  var i, j, k, sum;
  var numSamples = matA.length;
  var numCoefficients = matA[0].length;
  if (numSamples != vecY.Length) {
    throw new Error("Matrix / vector dimension mismatch");
  }

  // Calculate transpose(A) * A
  var matATA = new Array(numCoefficients);
  for (k = 0; k < numCoefficients; ++k) {
    matATA[k] = new Array(numCoefficients);
    for (j = 0; j < numCoefficients; ++j) {
      sum = 0;
      for (i = 0; i < numSamples; ++i) {
        sum += matA[j][i] * matA[k][i];
      }
      matATA[k][j] = sum;
    }
  }

  // Calculate transpose(A) * y
  var vecATY = new Array(numCoefficients);
  for (j = 0; j < numCoefficients; ++j) {
    sum = 0;
    for (i = 0; i < numSamples; ++i) {
      sum += matA[j][i] * vecY[i];
    }
    vecATY[j] = sum;
  }

  // Now solve (A * transpose(A)) * x = transpose(A) * y.
  return this.solveLinear_(matATA, vecATY);
};

/// Calculates an approximate inverse to the given radial distortion parameters.
Distortion.prototype.approximateInverse = function(maxRadius, numSamples) {
  maxRadius = maxRadius || 1;
  numSamples = numSamples || 100;
  var numCoefficients = 6;
  var i, j;

  // R + K1*R^3 + K2*R^5 = r, with R = rp = distort(r)
  // Repeating for numSamples:
  //   [ R0^3, R0^5 ] * [ K1 ] = [ r0 - R0 ]
  //   [ R1^3, R1^5 ]   [ K2 ]   [ r1 - R1 ]
  //   [ R2^3, R2^5 ]            [ r2 - R2 ]
  //   [ etc... ]                [ etc... ]
  // That is:
  //   matA * [K1, K2] = y
  // Solve:
  //   [K1, K2] = inverse(transpose(matA) * matA) * transpose(matA) * y
  var matA = new Array(numCoefficients);
  for (j = 0; j < numCoefficients; ++j) {
    matA[j] = new Array(numSamples);
  }
  var vecY = new Array(numSamples);

  for (i = 0; i < numSamples; ++i) {
    var r = maxRadius * (i + 1) / numSamples;
    var rp = this.distort(r);
    var v = rp;
    for (j = 0; j < numCoefficients; ++j) {
      v *= rp * rp;
      matA[j][i] = v;
    }
    vecY[i] = r - rp;
  }

  var inverseCoefficients = this.solveLeastSquares_(matA, vecY);

  return new Distortion(inverseCoefficients);
};

module.exports = Distortion;

},{}],10:[function(_dereq_,module,exports){
/*
 * Copyright 2015 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

/**
 * DPDB cache.
 */
var DPDB_CACHE = {
  "format": 1,
  "last_updated": "2016-01-20T00:18:35Z",
  "devices": [

  {
    "type": "android",
    "rules": [
      { "mdmh": "asus/*/Nexus 7/*" },
      { "ua": "Nexus 7" }
    ],
    "dpi": [ 320.8, 323.0 ],
    "bw": 3,
    "ac": 500
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "asus/*/ASUS_Z00AD/*" },
      { "ua": "ASUS_Z00AD" }
    ],
    "dpi": [ 403.0, 404.6 ],
    "bw": 3,
    "ac": 1000
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "HTC/*/HTC6435LVW/*" },
      { "ua": "HTC6435LVW" }
    ],
    "dpi": [ 449.7, 443.3 ],
    "bw": 3,
    "ac": 1000
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "HTC/*/HTC One XL/*" },
      { "ua": "HTC One XL" }
    ],
    "dpi": [ 315.3, 314.6 ],
    "bw": 3,
    "ac": 1000
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "htc/*/Nexus 9/*" },
      { "ua": "Nexus 9" }
    ],
    "dpi": 289.0,
    "bw": 3,
    "ac": 500
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "HTC/*/HTC One M9/*" },
      { "ua": "HTC One M9" }
    ],
    "dpi": [ 442.5, 443.3 ],
    "bw": 3,
    "ac": 500
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "HTC/*/HTC One_M8/*" },
      { "ua": "HTC One_M8" }
    ],
    "dpi": [ 449.7, 447.4 ],
    "bw": 3,
    "ac": 500
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "HTC/*/HTC One/*" },
      { "ua": "HTC One" }
    ],
    "dpi": 472.8,
    "bw": 3,
    "ac": 1000
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "Huawei/*/Nexus 6P/*" },
      { "ua": "Nexus 6P" }
    ],
    "dpi": [ 515.1, 518.0 ],
    "bw": 3,
    "ac": 1000
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "LGE/*/Nexus 5X/*" },
      { "ua": "Nexus 5X" }
    ],
    "dpi": [ 422.0, 419.9 ],
    "bw": 3,
    "ac": 1000
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "LGE/*/LGMS345/*" },
      { "ua": "LGMS345" }
    ],
    "dpi": [ 221.7, 219.1 ],
    "bw": 3,
    "ac": 500
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "LGE/*/LG-D800/*" },
      { "ua": "LG-D800" }
    ],
    "dpi": [ 422.0, 424.1 ],
    "bw": 3,
    "ac": 500
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "LGE/*/LG-D850/*" },
      { "ua": "LG-D850" }
    ],
    "dpi": [ 537.9, 541.9 ],
    "bw": 3,
    "ac": 500
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "LGE/*/VS985 4G/*" },
      { "ua": "VS985 4G" }
    ],
    "dpi": [ 537.9, 535.6 ],
    "bw": 3,
    "ac": 1000
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "LGE/*/Nexus 5/*" },
      { "ua": "Nexus 5 " }
    ],
    "dpi": [ 442.4, 444.8 ],
    "bw": 3,
    "ac": 1000
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "LGE/*/Nexus 4/*" },
      { "ua": "Nexus 4" }
    ],
    "dpi": [ 319.8, 318.4 ],
    "bw": 3,
    "ac": 1000
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "LGE/*/LG-P769/*" },
      { "ua": "LG-P769" }
    ],
    "dpi": [ 240.6, 247.5 ],
    "bw": 3,
    "ac": 1000
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "LGE/*/LGMS323/*" },
      { "ua": "LGMS323" }
    ],
    "dpi": [ 206.6, 204.6 ],
    "bw": 3,
    "ac": 1000
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "LGE/*/LGLS996/*" },
      { "ua": "LGLS996" }
    ],
    "dpi": [ 403.4, 401.5 ],
    "bw": 3,
    "ac": 1000
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "Micromax/*/4560MMX/*" },
      { "ua": "4560MMX" }
    ],
    "dpi": [ 240.0, 219.4 ],
    "bw": 3,
    "ac": 1000
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "Micromax/*/A250/*" },
      { "ua": "Micromax A250" }
    ],
    "dpi": [ 480.0, 446.4 ],
    "bw": 3,
    "ac": 1000
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "Micromax/*/Micromax AQ4501/*" },
      { "ua": "Micromax AQ4501" }
    ],
    "dpi": 240.0,
    "bw": 3,
    "ac": 500
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "motorola/*/DROID RAZR/*" },
      { "ua": "DROID RAZR" }
    ],
    "dpi": [ 368.1, 256.7 ],
    "bw": 3,
    "ac": 1000
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "motorola/*/XT830C/*" },
      { "ua": "XT830C" }
    ],
    "dpi": [ 254.0, 255.9 ],
    "bw": 3,
    "ac": 1000
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "motorola/*/XT1021/*" },
      { "ua": "XT1021" }
    ],
    "dpi": [ 254.0, 256.7 ],
    "bw": 3,
    "ac": 500
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "motorola/*/XT1023/*" },
      { "ua": "XT1023" }
    ],
    "dpi": [ 254.0, 256.7 ],
    "bw": 3,
    "ac": 500
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "motorola/*/XT1028/*" },
      { "ua": "XT1028" }
    ],
    "dpi": [ 326.6, 327.6 ],
    "bw": 3,
    "ac": 1000
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "motorola/*/XT1034/*" },
      { "ua": "XT1034" }
    ],
    "dpi": [ 326.6, 328.4 ],
    "bw": 3,
    "ac": 500
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "motorola/*/XT1053/*" },
      { "ua": "XT1053" }
    ],
    "dpi": [ 315.3, 316.1 ],
    "bw": 3,
    "ac": 1000
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "motorola/*/XT1562/*" },
      { "ua": "XT1562" }
    ],
    "dpi": [ 403.4, 402.7 ],
    "bw": 3,
    "ac": 1000
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "motorola/*/Nexus 6/*" },
      { "ua": "Nexus 6 " }
    ],
    "dpi": [ 494.3, 489.7 ],
    "bw": 3,
    "ac": 1000
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "motorola/*/XT1063/*" },
      { "ua": "XT1063" }
    ],
    "dpi": [ 295.0, 296.6 ],
    "bw": 3,
    "ac": 1000
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "motorola/*/XT1064/*" },
      { "ua": "XT1064" }
    ],
    "dpi": [ 295.0, 295.6 ],
    "bw": 3,
    "ac": 500
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "motorola/*/XT1092/*" },
      { "ua": "XT1092" }
    ],
    "dpi": [ 422.0, 424.1 ],
    "bw": 3,
    "ac": 500
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "motorola/*/XT1095/*" },
      { "ua": "XT1095" }
    ],
    "dpi": [ 422.0, 423.4 ],
    "bw": 3,
    "ac": 1000
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "OnePlus/*/A0001/*" },
      { "ua": "A0001" }
    ],
    "dpi": [ 403.4, 401.0 ],
    "bw": 3,
    "ac": 1000
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "OnePlus/*/ONE E1005/*" },
      { "ua": "ONE E1005" }
    ],
    "dpi": [ 442.4, 441.4 ],
    "bw": 3,
    "ac": 1000
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "OnePlus/*/ONE A2005/*" },
      { "ua": "ONE A2005" }
    ],
    "dpi": [ 391.9, 405.4 ],
    "bw": 3,
    "ac": 1000
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "OPPO/*/X909/*" },
      { "ua": "X909" }
    ],
    "dpi": [ 442.4, 444.1 ],
    "bw": 3,
    "ac": 1000
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "samsung/*/GT-I9082/*" },
      { "ua": "GT-I9082" }
    ],
    "dpi": [ 184.7, 185.4 ],
    "bw": 3,
    "ac": 1000
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "samsung/*/SM-G360P/*" },
      { "ua": "SM-G360P" }
    ],
    "dpi": [ 196.7, 205.4 ],
    "bw": 3,
    "ac": 1000
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "samsung/*/Nexus S/*" },
      { "ua": "Nexus S" }
    ],
    "dpi": [ 234.5, 229.8 ],
    "bw": 3,
    "ac": 1000
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "samsung/*/GT-I9300/*" },
      { "ua": "GT-I9300" }
    ],
    "dpi": [ 304.8, 303.9 ],
    "bw": 5,
    "ac": 500
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "samsung/*/SM-T230NU/*" },
      { "ua": "SM-T230NU" }
    ],
    "dpi": 216.0,
    "bw": 3,
    "ac": 500
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "samsung/*/SGH-T399/*" },
      { "ua": "SGH-T399" }
    ],
    "dpi": [ 217.7, 231.4 ],
    "bw": 3,
    "ac": 1000
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "samsung/*/SM-N9005/*" },
      { "ua": "SM-N9005" }
    ],
    "dpi": [ 386.4, 387.0 ],
    "bw": 3,
    "ac": 500
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "samsung/*/SAMSUNG-SM-N900A/*" },
      { "ua": "SAMSUNG-SM-N900A" }
    ],
    "dpi": [ 386.4, 387.7 ],
    "bw": 3,
    "ac": 1000
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "samsung/*/GT-I9500/*" },
      { "ua": "GT-I9500" }
    ],
    "dpi": [ 442.5, 443.3 ],
    "bw": 3,
    "ac": 500
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "samsung/*/GT-I9505/*" },
      { "ua": "GT-I9505" }
    ],
    "dpi": 439.4,
    "bw": 4,
    "ac": 1000
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "samsung/*/SM-G900F/*" },
      { "ua": "SM-G900F" }
    ],
    "dpi": [ 415.6, 431.6 ],
    "bw": 5,
    "ac": 1000
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "samsung/*/SM-G900M/*" },
      { "ua": "SM-G900M" }
    ],
    "dpi": [ 415.6, 431.6 ],
    "bw": 5,
    "ac": 1000
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "samsung/*/SM-G800F/*" },
      { "ua": "SM-G800F" }
    ],
    "dpi": 326.8,
    "bw": 3,
    "ac": 1000
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "samsung/*/SM-G906S/*" },
      { "ua": "SM-G906S" }
    ],
    "dpi": [ 562.7, 572.4 ],
    "bw": 3,
    "ac": 1000
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "samsung/*/GT-I9300/*" },
      { "ua": "GT-I9300" }
    ],
    "dpi": [ 306.7, 304.8 ],
    "bw": 5,
    "ac": 1000
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "samsung/*/SM-T535/*" },
      { "ua": "SM-T535" }
    ],
    "dpi": [ 142.6, 136.4 ],
    "bw": 3,
    "ac": 500
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "samsung/*/SM-N920C/*" },
      { "ua": "SM-N920C" }
    ],
    "dpi": [ 515.1, 518.4 ],
    "bw": 3,
    "ac": 1000
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "samsung/*/GT-I9300I/*" },
      { "ua": "GT-I9300I" }
    ],
    "dpi": [ 304.8, 305.8 ],
    "bw": 3,
    "ac": 1000
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "samsung/*/GT-I9195/*" },
      { "ua": "GT-I9195" }
    ],
    "dpi": [ 249.4, 256.7 ],
    "bw": 3,
    "ac": 500
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "samsung/*/SPH-L520/*" },
      { "ua": "SPH-L520" }
    ],
    "dpi": [ 249.4, 255.9 ],
    "bw": 3,
    "ac": 1000
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "samsung/*/SAMSUNG-SGH-I717/*" },
      { "ua": "SAMSUNG-SGH-I717" }
    ],
    "dpi": 285.8,
    "bw": 3,
    "ac": 1000
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "samsung/*/SPH-D710/*" },
      { "ua": "SPH-D710" }
    ],
    "dpi": [ 217.7, 204.2 ],
    "bw": 3,
    "ac": 1000
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "samsung/*/GT-N7100/*" },
      { "ua": "GT-N7100" }
    ],
    "dpi": 265.1,
    "bw": 3,
    "ac": 1000
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "samsung/*/SCH-I605/*" },
      { "ua": "SCH-I605" }
    ],
    "dpi": 265.1,
    "bw": 3,
    "ac": 1000
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "samsung/*/Galaxy Nexus/*" },
      { "ua": "Galaxy Nexus" }
    ],
    "dpi": [ 315.3, 314.2 ],
    "bw": 3,
    "ac": 1000
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "samsung/*/SM-N910H/*" },
      { "ua": "SM-N910H" }
    ],
    "dpi": [ 515.1, 518.0 ],
    "bw": 3,
    "ac": 1000
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "samsung/*/SM-N910C/*" },
      { "ua": "SM-N910C" }
    ],
    "dpi": [ 515.2, 520.2 ],
    "bw": 3,
    "ac": 500
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "samsung/*/SM-G130M/*" },
      { "ua": "SM-G130M" }
    ],
    "dpi": [ 165.9, 164.8 ],
    "bw": 3,
    "ac": 500
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "samsung/*/SM-G928I/*" },
      { "ua": "SM-G928I" }
    ],
    "dpi": [ 515.1, 518.4 ],
    "bw": 3,
    "ac": 1000
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "samsung/*/SM-G920F/*" },
      { "ua": "SM-G920F" }
    ],
    "dpi": 580.6,
    "bw": 3,
    "ac": 500
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "samsung/*/SM-G920P/*" },
      { "ua": "SM-G920P" }
    ],
    "dpi": [ 522.5, 577.0 ],
    "bw": 3,
    "ac": 1000
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "samsung/*/SM-G925F/*" },
      { "ua": "SM-G925F" }
    ],
    "dpi": 580.6,
    "bw": 3,
    "ac": 500
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "samsung/*/SM-G925V/*" },
      { "ua": "SM-G925V" }
    ],
    "dpi": [ 522.5, 576.6 ],
    "bw": 3,
    "ac": 1000
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "Sony/*/C6903/*" },
      { "ua": "C6903" }
    ],
    "dpi": [ 442.5, 443.3 ],
    "bw": 3,
    "ac": 500
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "Sony/*/D6653/*" },
      { "ua": "D6653" }
    ],
    "dpi": [ 428.6, 427.6 ],
    "bw": 3,
    "ac": 1000
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "Sony/*/E6653/*" },
      { "ua": "E6653" }
    ],
    "dpi": [ 428.6, 425.7 ],
    "bw": 3,
    "ac": 1000
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "Sony/*/E6853/*" },
      { "ua": "E6853" }
    ],
    "dpi": [ 403.4, 401.9 ],
    "bw": 3,
    "ac": 1000
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "Sony/*/SGP321/*" },
      { "ua": "SGP321" }
    ],
    "dpi": [ 224.7, 224.1 ],
    "bw": 3,
    "ac": 500
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "TCT/*/ALCATEL ONE TOUCH Fierce/*" },
      { "ua": "ALCATEL ONE TOUCH Fierce" }
    ],
    "dpi": [ 240.0, 247.5 ],
    "bw": 3,
    "ac": 1000
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "THL/*/thl 5000/*" },
      { "ua": "thl 5000" }
    ],
    "dpi": [ 480.0, 443.3 ],
    "bw": 3,
    "ac": 1000
  },

  {
    "type": "android",
    "rules": [
      { "mdmh": "ZTE/*/ZTE Blade L2/*" },
      { "ua": "ZTE Blade L2" }
    ],
    "dpi": 240.0,
    "bw": 3,
    "ac": 500
  },

  {
    "type": "ios",
    "rules": [ { "res": [ 640, 960 ] } ],
    "dpi": [ 325.1, 328.4 ],
    "bw": 4,
    "ac": 1000
  },

  {
    "type": "ios",
    "rules": [ { "res": [ 640, 960 ] } ],
    "dpi": [ 325.1, 328.4 ],
    "bw": 4,
    "ac": 1000
  },

  {
    "type": "ios",
    "rules": [ { "res": [ 640, 1136 ] } ],
    "dpi": [ 317.1, 320.2 ],
    "bw": 3,
    "ac": 1000
  },

  {
    "type": "ios",
    "rules": [ { "res": [ 640, 1136 ] } ],
    "dpi": [ 317.1, 320.2 ],
    "bw": 3,
    "ac": 1000
  },

  {
    "type": "ios",
    "rules": [ { "res": [ 750, 1334 ] } ],
    "dpi": 326.4,
    "bw": 4,
    "ac": 1000
  },

  {
    "type": "ios",
    "rules": [ { "res": [ 750, 1334 ] } ],
    "dpi": 326.4,
    "bw": 4,
    "ac": 1000
  },

  {
    "type": "ios",
    "rules": [ { "res": [ 1242, 2208 ] } ],
    "dpi": [ 453.6, 458.4 ],
    "bw": 4,
    "ac": 1000
  },

  {
    "type": "ios",
    "rules": [ { "res": [ 1242, 2208 ] } ],
    "dpi": [ 453.6, 458.4 ],
    "bw": 4,
    "ac": 1000
  }
]};

module.exports = DPDB_CACHE;

},{}],11:[function(_dereq_,module,exports){
/*
 * Copyright 2015 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

// Offline cache of the DPDB, to be used until we load the online one (and
// as a fallback in case we can't load the online one).
var DPDB_CACHE = _dereq_('./dpdb-cache.js');
var Util = _dereq_('../util.js');

// Online DPDB URL.
var ONLINE_DPDB_URL = 'https://storage.googleapis.com/cardboard-dpdb/dpdb.json';

/**
 * Calculates device parameters based on the DPDB (Device Parameter Database).
 * Initially, uses the cached DPDB values.
 *
 * If fetchOnline == true, then this object tries to fetch the online version
 * of the DPDB and updates the device info if a better match is found.
 * Calls the onDeviceParamsUpdated callback when there is an update to the
 * device information.
 */
function Dpdb(fetchOnline, onDeviceParamsUpdated) {
  // Start with the offline DPDB cache while we are loading the real one.
  this.dpdb = DPDB_CACHE;

  // Calculate device params based on the offline version of the DPDB.
  this.recalculateDeviceParams_();

  // XHR to fetch online DPDB file, if requested.
  if (fetchOnline) {
    // Set the callback.
    this.onDeviceParamsUpdated = onDeviceParamsUpdated;

    console.log('Fetching DPDB...');
    var xhr = new XMLHttpRequest();
    var obj = this;
    xhr.open('GET', ONLINE_DPDB_URL, true);
    xhr.addEventListener('load', function() {
      obj.loading = false;
      if (xhr.status >= 200 && xhr.status <= 299) {
        // Success.
        console.log('Successfully loaded online DPDB.');
        obj.dpdb = JSON.parse(xhr.response);
        obj.recalculateDeviceParams_();
      } else {
        // Error loading the DPDB.
        console.error('Error loading online DPDB!');
      }
    });
    xhr.send();
  }
}

// Returns the current device parameters.
Dpdb.prototype.getDeviceParams = function() {
  return this.deviceParams;
};

// Recalculates this device's parameters based on the DPDB.
Dpdb.prototype.recalculateDeviceParams_ = function() {
  console.log('Recalculating device params.');
  var newDeviceParams = this.calcDeviceParams_();
  console.log('New device parameters:');
  console.log(newDeviceParams);
  if (newDeviceParams) {
    this.deviceParams = newDeviceParams;
    // Invoke callback, if it is set.
    if (this.onDeviceParamsUpdated) {
      this.onDeviceParamsUpdated(this.deviceParams);
    }
  } else {
    console.error('Failed to recalculate device parameters.');
  }
};

// Returns a DeviceParams object that represents the best guess as to this
// device's parameters. Can return null if the device does not match any
// known devices.
Dpdb.prototype.calcDeviceParams_ = function() {
  var db = this.dpdb; // shorthand
  if (!db) {
    console.error('DPDB not available.');
    return null;
  }
  if (db.format != 1) {
    console.error('DPDB has unexpected format version.');
    return null;
  }
  if (!db.devices || !db.devices.length) {
    console.error('DPDB does not have a devices section.');
    return null;
  }

  // Get the actual user agent and screen dimensions in pixels.
  var userAgent = navigator.userAgent || navigator.vendor || window.opera;
  var width = Util.getScreenWidth();
  var height = Util.getScreenHeight();
  console.log('User agent: ' + userAgent);
  console.log('Pixel width: ' + width);
  console.log('Pixel height: ' + height);

  if (!db.devices) {
    console.error('DPDB has no devices section.');
    return null;
  }

  for (var i = 0; i < db.devices.length; i++) {
    var device = db.devices[i];
    if (!device.rules) {
      console.warn('Device[' + i + '] has no rules section.');
      continue;
    }

    if (device.type != 'ios' && device.type != 'android') {
      console.warn('Device[' + i + '] has invalid type.');
      continue;
    }

    // See if this device is of the appropriate type.
    if (Util.isIOS() != (device.type == 'ios')) continue;

    // See if this device matches any of the rules:
    var matched = false;
    for (var j = 0; j < device.rules.length; j++) {
      var rule = device.rules[j];
      if (this.matchRule_(rule, userAgent, width, height)) {
        console.log('Rule matched:');
        console.log(rule);
        matched = true;
        break;
      }
    }
    if (!matched) continue;

    // device.dpi might be an array of [ xdpi, ydpi] or just a scalar.
    var xdpi = device.dpi[0] || device.dpi;
    var ydpi = device.dpi[1] || device.dpi;

    return new DeviceParams({ xdpi: xdpi, ydpi: ydpi, bevelMm: device.bw });
  }

  console.warn('No DPDB device match.');
  return null;
};

Dpdb.prototype.matchRule_ = function(rule, ua, screenWidth, screenHeight) {
  // We can only match 'ua' and 'res' rules, not other types like 'mdmh'
  // (which are meant for native platforms).
  if (!rule.ua && !rule.res) return false;

  // If our user agent string doesn't contain the indicated user agent string,
  // the match fails.
  if (rule.ua && ua.indexOf(rule.ua) < 0) return false;

  // If the rule specifies screen dimensions that don't correspond to ours,
  // the match fails.
  if (rule.res) {
    if (!rule.res[0] || !rule.res[1]) return false;
    var resX = rule.res[0];
    var resY = rule.res[1];
    // Compare min and max so as to make the order not matter, i.e., it should
    // be true that 640x480 == 480x640.
    if (Math.min(screenWidth, screenHeight) != Math.min(resX, resY) ||
        (Math.max(screenWidth, screenHeight) != Math.max(resX, resY))) {
      return false;
    }
  }

  return true;
}

function DeviceParams(params) {
  this.xdpi = params.xdpi;
  this.ydpi = params.ydpi;
  this.bevelMm = params.bevelMm;
}

module.exports = Dpdb;
},{"../util.js":22,"./dpdb-cache.js":10}],12:[function(_dereq_,module,exports){
/*
 * Copyright 2015 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

function Emitter() {
  this.callbacks = {};
}

Emitter.prototype.emit = function(eventName) {
  var callbacks = this.callbacks[eventName];
  if (!callbacks) {
    //console.log('No valid callback specified.');
    return;
  }
  var args = [].slice.call(arguments);
  // Eliminate the first param (the callback).
  args.shift();
  for (var i = 0; i < callbacks.length; i++) {
    callbacks[i].apply(this, args);
  }
};

Emitter.prototype.on = function(eventName, callback) {
  if (eventName in this.callbacks) {
    this.callbacks[eventName].push(callback);
  } else {
    this.callbacks[eventName] = [callback];
  }
};

module.exports = Emitter;

},{}],13:[function(_dereq_,module,exports){
/*
 * Copyright 2015 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Util = _dereq_('./util.js');
var WebVRPolyfill = _dereq_('./webvr-polyfill.js');

// Initialize a WebVRConfig just in case.
window.WebVRConfig = Util.extend({
  // Forces availability of VR mode, even for non-mobile devices.
  FORCE_ENABLE_VR: false,

  // Complementary filter coefficient. 0 for accelerometer, 1 for gyro.
  K_FILTER: 0.98,

  // How far into the future to predict during fast motion (in seconds).
  PREDICTION_TIME_S: 0.040,

  // Flag to disable touch panner. In case you have your own touch controls.
  TOUCH_PANNER_DISABLED: false,

  // Flag to disabled the UI in VR Mode.
  CARDBOARD_UI_DISABLED: false, // Default: false

  // Flag to disable the instructions to rotate your device.
  ROTATE_INSTRUCTIONS_DISABLED: false, // Default: false.

  // Enable yaw panning only, disabling roll and pitch. This can be useful
  // for panoramas with nothing interesting above or below.
  YAW_ONLY: false,

  // To disable keyboard and mouse controls, if you want to use your own
  // implementation.
  MOUSE_KEYBOARD_CONTROLS_DISABLED: false,

  // Prevent the polyfill from initializing immediately. Requires the app
  // to call InitializeWebVRPolyfill() before it can be used.
  DEFER_INITIALIZATION: false,

  // Enable the deprecated version of the API (navigator.getVRDevices).
  ENABLE_DEPRECATED_API: false,

  // Scales the recommended buffer size reported by WebVR, which can improve
  // performance.
  // UPDATE(2016-05-03): Setting this to 0.5 by default since 1.0 does not
  // perform well on many mobile devices.
  BUFFER_SCALE: 0.5,

  // Allow VRDisplay.submitFrame to change gl bindings, which is more
  // efficient if the application code will re-bind its resources on the
  // next frame anyway. This has been seen to cause rendering glitches with
  // THREE.js.
  // Dirty bindings include: gl.FRAMEBUFFER_BINDING, gl.CURRENT_PROGRAM,
  // gl.ARRAY_BUFFER_BINDING, gl.ELEMENT_ARRAY_BUFFER_BINDING,
  // and gl.TEXTURE_BINDING_2D for texture unit 0.
  DIRTY_SUBMIT_FRAME_BINDINGS: false
}, window.WebVRConfig);

if (!window.WebVRConfig.DEFER_INITIALIZATION) {
  new WebVRPolyfill();
} else {
  window.InitializeWebVRPolyfill = function() {
    new WebVRPolyfill();
  }
}

},{"./util.js":22,"./webvr-polyfill.js":25}],14:[function(_dereq_,module,exports){
/*
 * Copyright 2016 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

var MathUtil = window.MathUtil || {};

MathUtil.degToRad = Math.PI / 180;
MathUtil.radToDeg = 180 / Math.PI;

// Some minimal math functionality borrowed from THREE.Math and stripped down
// for the purposes of this library.


MathUtil.Vector2 = function ( x, y ) {
  this.x = x || 0;
  this.y = y || 0;
};

MathUtil.Vector2.prototype = {
  constructor: MathUtil.Vector2,

  set: function ( x, y ) {
    this.x = x;
    this.y = y;

    return this;
  },

  copy: function ( v ) {
    this.x = v.x;
    this.y = v.y;

    return this;
  },

  subVectors: function ( a, b ) {
    this.x = a.x - b.x;
    this.y = a.y - b.y;

    return this;
  },
};

MathUtil.Vector3 = function ( x, y, z ) {
  this.x = x || 0;
  this.y = y || 0;
  this.z = z || 0;
};

MathUtil.Vector3.prototype = {
  constructor: MathUtil.Vector3,

  set: function ( x, y, z ) {
    this.x = x;
    this.y = y;
    this.z = z;

    return this;
  },

  copy: function ( v ) {
    this.x = v.x;
    this.y = v.y;
    this.z = v.z;

    return this;
  },

  length: function () {
    return Math.sqrt( this.x * this.x + this.y * this.y + this.z * this.z );
  },

  normalize: function () {
    var scalar = this.length();

    if ( scalar !== 0 ) {
      var invScalar = 1 / scalar;

      this.multiplyScalar(invScalar);
    } else {
      this.x = 0;
      this.y = 0;
      this.z = 0;
    }

    return this;
  },

  multiplyScalar: function ( scalar ) {
    this.x *= scalar;
    this.y *= scalar;
    this.z *= scalar;
  },

  applyQuaternion: function ( q ) {
    var x = this.x;
    var y = this.y;
    var z = this.z;

    var qx = q.x;
    var qy = q.y;
    var qz = q.z;
    var qw = q.w;

    // calculate quat * vector
    var ix =  qw * x + qy * z - qz * y;
    var iy =  qw * y + qz * x - qx * z;
    var iz =  qw * z + qx * y - qy * x;
    var iw = - qx * x - qy * y - qz * z;

    // calculate result * inverse quat
    this.x = ix * qw + iw * - qx + iy * - qz - iz * - qy;
    this.y = iy * qw + iw * - qy + iz * - qx - ix * - qz;
    this.z = iz * qw + iw * - qz + ix * - qy - iy * - qx;

    return this;
  },

  dot: function ( v ) {
    return this.x * v.x + this.y * v.y + this.z * v.z;
  },

  crossVectors: function ( a, b ) {
    var ax = a.x, ay = a.y, az = a.z;
    var bx = b.x, by = b.y, bz = b.z;

    this.x = ay * bz - az * by;
    this.y = az * bx - ax * bz;
    this.z = ax * by - ay * bx;

    return this;
  },
};

MathUtil.Quaternion = function ( x, y, z, w ) {
  this.x = x || 0;
  this.y = y || 0;
  this.z = z || 0;
  this.w = ( w !== undefined ) ? w : 1;
};

MathUtil.Quaternion.prototype = {
  constructor: MathUtil.Quaternion,

  set: function ( x, y, z, w ) {
    this.x = x;
    this.y = y;
    this.z = z;
    this.w = w;

    return this;
  },

  copy: function ( quaternion ) {
    this.x = quaternion.x;
    this.y = quaternion.y;
    this.z = quaternion.z;
    this.w = quaternion.w;

    return this;
  },

  setFromEulerXYZ: function( x, y, z ) {
    var c1 = Math.cos( x / 2 );
    var c2 = Math.cos( y / 2 );
    var c3 = Math.cos( z / 2 );
    var s1 = Math.sin( x / 2 );
    var s2 = Math.sin( y / 2 );
    var s3 = Math.sin( z / 2 );

    this.x = s1 * c2 * c3 + c1 * s2 * s3;
    this.y = c1 * s2 * c3 - s1 * c2 * s3;
    this.z = c1 * c2 * s3 + s1 * s2 * c3;
    this.w = c1 * c2 * c3 - s1 * s2 * s3;

    return this;
  },

  setFromEulerYXZ: function( x, y, z ) {
    var c1 = Math.cos( x / 2 );
    var c2 = Math.cos( y / 2 );
    var c3 = Math.cos( z / 2 );
    var s1 = Math.sin( x / 2 );
    var s2 = Math.sin( y / 2 );
    var s3 = Math.sin( z / 2 );

    this.x = s1 * c2 * c3 + c1 * s2 * s3;
    this.y = c1 * s2 * c3 - s1 * c2 * s3;
    this.z = c1 * c2 * s3 - s1 * s2 * c3;
    this.w = c1 * c2 * c3 + s1 * s2 * s3;

    return this;
  },

  setFromAxisAngle: function ( axis, angle ) {
    // http://www.euclideanspace.com/maths/geometry/rotations/conversions/angleToQuaternion/index.htm
    // assumes axis is normalized

    var halfAngle = angle / 2, s = Math.sin( halfAngle );

    this.x = axis.x * s;
    this.y = axis.y * s;
    this.z = axis.z * s;
    this.w = Math.cos( halfAngle );

    return this;
  },

  multiply: function ( q ) {
    return this.multiplyQuaternions( this, q );
  },

  multiplyQuaternions: function ( a, b ) {
    // from http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/code/index.htm

    var qax = a.x, qay = a.y, qaz = a.z, qaw = a.w;
    var qbx = b.x, qby = b.y, qbz = b.z, qbw = b.w;

    this.x = qax * qbw + qaw * qbx + qay * qbz - qaz * qby;
    this.y = qay * qbw + qaw * qby + qaz * qbx - qax * qbz;
    this.z = qaz * qbw + qaw * qbz + qax * qby - qay * qbx;
    this.w = qaw * qbw - qax * qbx - qay * qby - qaz * qbz;

    return this;
  },

  inverse: function () {
    this.x *= -1;
    this.y *= -1;
    this.z *= -1;

    this.normalize();

    return this;
  },

  normalize: function () {
    var l = Math.sqrt( this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w );

    if ( l === 0 ) {
      this.x = 0;
      this.y = 0;
      this.z = 0;
      this.w = 1;
    } else {
      l = 1 / l;

      this.x = this.x * l;
      this.y = this.y * l;
      this.z = this.z * l;
      this.w = this.w * l;
    }

    return this;
  },

  slerp: function ( qb, t ) {
    if ( t === 0 ) return this;
    if ( t === 1 ) return this.copy( qb );

    var x = this.x, y = this.y, z = this.z, w = this.w;

    // http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/slerp/

    var cosHalfTheta = w * qb.w + x * qb.x + y * qb.y + z * qb.z;

    if ( cosHalfTheta < 0 ) {
      this.w = - qb.w;
      this.x = - qb.x;
      this.y = - qb.y;
      this.z = - qb.z;

      cosHalfTheta = - cosHalfTheta;
    } else {
      this.copy( qb );
    }

    if ( cosHalfTheta >= 1.0 ) {
      this.w = w;
      this.x = x;
      this.y = y;
      this.z = z;

      return this;
    }

    var halfTheta = Math.acos( cosHalfTheta );
    var sinHalfTheta = Math.sqrt( 1.0 - cosHalfTheta * cosHalfTheta );

    if ( Math.abs( sinHalfTheta ) < 0.001 ) {
      this.w = 0.5 * ( w + this.w );
      this.x = 0.5 * ( x + this.x );
      this.y = 0.5 * ( y + this.y );
      this.z = 0.5 * ( z + this.z );

      return this;
    }

    var ratioA = Math.sin( ( 1 - t ) * halfTheta ) / sinHalfTheta,
    ratioB = Math.sin( t * halfTheta ) / sinHalfTheta;

    this.w = ( w * ratioA + this.w * ratioB );
    this.x = ( x * ratioA + this.x * ratioB );
    this.y = ( y * ratioA + this.y * ratioB );
    this.z = ( z * ratioA + this.z * ratioB );

    return this;
  },

  setFromUnitVectors: function () {
    // http://lolengine.net/blog/2014/02/24/quaternion-from-two-vectors-final
    // assumes direction vectors vFrom and vTo are normalized

    var v1, r;
    var EPS = 0.000001;

    return function ( vFrom, vTo ) {
      if ( v1 === undefined ) v1 = new MathUtil.Vector3();

      r = vFrom.dot( vTo ) + 1;

      if ( r < EPS ) {
        r = 0;

        if ( Math.abs( vFrom.x ) > Math.abs( vFrom.z ) ) {
          v1.set( - vFrom.y, vFrom.x, 0 );
        } else {
          v1.set( 0, - vFrom.z, vFrom.y );
        }
      } else {
        v1.crossVectors( vFrom, vTo );
      }

      this.x = v1.x;
      this.y = v1.y;
      this.z = v1.z;
      this.w = r;

      this.normalize();

      return this;
    }
  }(),
};

module.exports = MathUtil;

},{}],15:[function(_dereq_,module,exports){
/*
 * Copyright 2016 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

var VRDisplay = _dereq_('./base.js').VRDisplay;
var MathUtil = _dereq_('./math-util.js');
var Util = _dereq_('./util.js');

// How much to rotate per key stroke.
var KEY_SPEED = 0.15;
var KEY_ANIMATION_DURATION = 80;

// How much to rotate for mouse events.
var MOUSE_SPEED_X = 0.5;
var MOUSE_SPEED_Y = 0.3;

/**
 * VRDisplay based on mouse and keyboard input. Designed for desktops/laptops
 * where orientation events aren't supported. Cannot present.
 */
function MouseKeyboardVRDisplay() {
  this.displayName = 'Mouse and Keyboard VRDisplay (webvr-polyfill)';

  this.capabilities.hasOrientation = true;

  // Attach to mouse and keyboard events.
  window.addEventListener('keydown', this.onKeyDown_.bind(this));
  window.addEventListener('mousemove', this.onMouseMove_.bind(this));
  window.addEventListener('mousedown', this.onMouseDown_.bind(this));
  window.addEventListener('mouseup', this.onMouseUp_.bind(this));

  // "Private" members.
  this.phi_ = 0;
  this.theta_ = 0;

  // Variables for keyboard-based rotation animation.
  this.targetAngle_ = null;
  this.angleAnimation_ = null;

  // State variables for calculations.
  this.orientation_ = new MathUtil.Quaternion();

  // Variables for mouse-based rotation.
  this.rotateStart_ = new MathUtil.Vector2();
  this.rotateEnd_ = new MathUtil.Vector2();
  this.rotateDelta_ = new MathUtil.Vector2();
  this.isDragging_ = false;

  this.orientationOut_ = new Float32Array(4);
}
MouseKeyboardVRDisplay.prototype = new VRDisplay();

MouseKeyboardVRDisplay.prototype.getImmediatePose = function() {
  this.orientation_.setFromEulerYXZ(this.phi_, this.theta_, 0);

  this.orientationOut_[0] = this.orientation_.x;
  this.orientationOut_[1] = this.orientation_.y;
  this.orientationOut_[2] = this.orientation_.z;
  this.orientationOut_[3] = this.orientation_.w;

  return {
    position: null,
    orientation: this.orientationOut_,
    linearVelocity: null,
    linearAcceleration: null,
    angularVelocity: null,
    angularAcceleration: null
  };
};

MouseKeyboardVRDisplay.prototype.onKeyDown_ = function(e) {
  // Track WASD and arrow keys.
  if (e.keyCode == 38) { // Up key.
    this.animatePhi_(this.phi_ + KEY_SPEED);
  } else if (e.keyCode == 39) { // Right key.
    this.animateTheta_(this.theta_ - KEY_SPEED);
  } else if (e.keyCode == 40) { // Down key.
    this.animatePhi_(this.phi_ - KEY_SPEED);
  } else if (e.keyCode == 37) { // Left key.
    this.animateTheta_(this.theta_ + KEY_SPEED);
  }
};

MouseKeyboardVRDisplay.prototype.animateTheta_ = function(targetAngle) {
  this.animateKeyTransitions_('theta_', targetAngle);
};

MouseKeyboardVRDisplay.prototype.animatePhi_ = function(targetAngle) {
  // Prevent looking too far up or down.
  targetAngle = Util.clamp(targetAngle, -Math.PI/2, Math.PI/2);
  this.animateKeyTransitions_('phi_', targetAngle);
};

/**
 * Start an animation to transition an angle from one value to another.
 */
MouseKeyboardVRDisplay.prototype.animateKeyTransitions_ = function(angleName, targetAngle) {
  // If an animation is currently running, cancel it.
  if (this.angleAnimation_) {
    cancelAnimationFrame(this.angleAnimation_);
  }
  var startAngle = this[angleName];
  var startTime = new Date();
  // Set up an interval timer to perform the animation.
  this.angleAnimation_ = requestAnimationFrame(function animate() {
    // Once we're finished the animation, we're done.
    var elapsed = new Date() - startTime;
    if (elapsed >= KEY_ANIMATION_DURATION) {
      this[angleName] = targetAngle;
      cancelAnimationFrame(this.angleAnimation_);
      return;
    }
    // loop with requestAnimationFrame
    this.angleAnimation_ = requestAnimationFrame(animate.bind(this))
    // Linearly interpolate the angle some amount.
    var percent = elapsed / KEY_ANIMATION_DURATION;
    this[angleName] = startAngle + (targetAngle - startAngle) * percent;
  }.bind(this));
};

MouseKeyboardVRDisplay.prototype.onMouseDown_ = function(e) {
  this.rotateStart_.set(e.clientX, e.clientY);
  this.isDragging_ = true;
};

// Very similar to https://gist.github.com/mrflix/8351020
MouseKeyboardVRDisplay.prototype.onMouseMove_ = function(e) {
  if (!this.isDragging_ && !this.isPointerLocked_()) {
    return;
  }
  // Support pointer lock API.
  if (this.isPointerLocked_()) {
    var movementX = e.movementX || e.mozMovementX || 0;
    var movementY = e.movementY || e.mozMovementY || 0;
    this.rotateEnd_.set(this.rotateStart_.x - movementX, this.rotateStart_.y - movementY);
  } else {
    this.rotateEnd_.set(e.clientX, e.clientY);
  }
  // Calculate how much we moved in mouse space.
  this.rotateDelta_.subVectors(this.rotateEnd_, this.rotateStart_);
  this.rotateStart_.copy(this.rotateEnd_);

  // Keep track of the cumulative euler angles.
  this.phi_ += 2 * Math.PI * this.rotateDelta_.y / screen.height * MOUSE_SPEED_Y;
  this.theta_ += 2 * Math.PI * this.rotateDelta_.x / screen.width * MOUSE_SPEED_X;

  // Prevent looking too far up or down.
  this.phi_ = Util.clamp(this.phi_, -Math.PI/2, Math.PI/2);
};

MouseKeyboardVRDisplay.prototype.onMouseUp_ = function(e) {
  this.isDragging_ = false;
};

MouseKeyboardVRDisplay.prototype.isPointerLocked_ = function() {
  var el = document.pointerLockElement || document.mozPointerLockElement ||
      document.webkitPointerLockElement;
  return el !== undefined;
};

MouseKeyboardVRDisplay.prototype.resetPose = function() {
  this.phi_ = 0;
  this.theta_ = 0;
};

module.exports = MouseKeyboardVRDisplay;

},{"./base.js":2,"./math-util.js":14,"./util.js":22}],16:[function(_dereq_,module,exports){
/*
 * Copyright 2015 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

var Util = _dereq_('./util.js');

function RotateInstructions() {
  this.loadIcon_();

  var overlay = document.createElement('div');
  var s = overlay.style;
  s.position = 'fixed';
  s.top = 0;
  s.right = 0;
  s.bottom = 0;
  s.left = 0;
  s.backgroundColor = 'gray';
  s.fontFamily = 'sans-serif';
  // Force this to be above the fullscreen canvas, which is at zIndex: 999999.
  s.zIndex = 1000000;

  var img = document.createElement('img');
  img.src = this.icon;
  var s = img.style;
  s.marginLeft = '25%';
  s.marginTop = '25%';
  s.width = '50%';
  overlay.appendChild(img);

  var text = document.createElement('div');
  var s = text.style;
  s.textAlign = 'center';
  s.fontSize = '16px';
  s.lineHeight = '24px';
  s.margin = '24px 25%';
  s.width = '50%';
  text.innerHTML = 'Place your phone into your Cardboard viewer.';
  overlay.appendChild(text);

  var snackbar = document.createElement('div');
  var s = snackbar.style;
  s.backgroundColor = '#CFD8DC';
  s.position = 'fixed';
  s.bottom = 0;
  s.width = '100%';
  s.height = '48px';
  s.padding = '14px 24px';
  s.boxSizing = 'border-box';
  s.color = '#656A6B';
  overlay.appendChild(snackbar);

  var snackbarText = document.createElement('div');
  snackbarText.style.float = 'left';
  snackbarText.innerHTML = 'No Cardboard viewer?';

  var snackbarButton = document.createElement('a');
  snackbarButton.href = 'https://www.google.com/get/cardboard/get-cardboard/';
  snackbarButton.innerHTML = 'get one';
  snackbarButton.target = '_blank';
  var s = snackbarButton.style;
  s.float = 'right';
  s.fontWeight = 600;
  s.textTransform = 'uppercase';
  s.borderLeft = '1px solid gray';
  s.paddingLeft = '24px';
  s.textDecoration = 'none';
  s.color = '#656A6B';

  snackbar.appendChild(snackbarText);
  snackbar.appendChild(snackbarButton);

  this.overlay = overlay;
  this.text = text;

  this.hide();
}

RotateInstructions.prototype.show = function(parent) {
  if (!parent && !this.overlay.parentElement) {
    document.body.appendChild(this.overlay);
  } else if (parent) {
    if (this.overlay.parentElement && this.overlay.parentElement != parent)
      this.overlay.parentElement.removeChild(this.overlay);

    parent.appendChild(this.overlay);
  }

  this.overlay.style.display = 'block';

  var img = this.overlay.querySelector('img');
  var s = img.style;

  if (Util.isLandscapeMode()) {
    s.width = '20%';
    s.marginLeft = '40%';
    s.marginTop = '3%';
  } else {
    s.width = '50%';
    s.marginLeft = '25%';
    s.marginTop = '25%';
  }
};

RotateInstructions.prototype.hide = function() {
  this.overlay.style.display = 'none';
};

RotateInstructions.prototype.showTemporarily = function(ms, parent) {
  this.show(parent);
  this.timer = setTimeout(this.hide.bind(this), ms);
};

RotateInstructions.prototype.disableShowTemporarily = function() {
  clearTimeout(this.timer);
};

RotateInstructions.prototype.update = function() {
  this.disableShowTemporarily();
  // In portrait VR mode, tell the user to rotate to landscape. Otherwise, hide
  // the instructions.
  if (!Util.isLandscapeMode() && Util.isMobile()) {
    this.show();
  } else {
    this.hide();
  }
};

RotateInstructions.prototype.loadIcon_ = function() {
  // Encoded asset_src/rotate-instructions.svg
  this.icon = Util.base64('image/svg+xml', 'PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjE5OHB4IiBoZWlnaHQ9IjI0MHB4IiB2aWV3Qm94PSIwIDAgMTk4IDI0MCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4bWxuczpza2V0Y2g9Imh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaC9ucyI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDMuMy4zICgxMjA4MSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+dHJhbnNpdGlvbjwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxkZWZzPjwvZGVmcz4KICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHNrZXRjaDp0eXBlPSJNU1BhZ2UiPgogICAgICAgIDxnIGlkPSJ0cmFuc2l0aW9uIiBza2V0Y2g6dHlwZT0iTVNBcnRib2FyZEdyb3VwIj4KICAgICAgICAgICAgPGcgaWQ9IkltcG9ydGVkLUxheWVycy1Db3B5LTQtKy1JbXBvcnRlZC1MYXllcnMtQ29weS0rLUltcG9ydGVkLUxheWVycy1Db3B5LTItQ29weSIgc2tldGNoOnR5cGU9Ik1TTGF5ZXJHcm91cCI+CiAgICAgICAgICAgICAgICA8ZyBpZD0iSW1wb3J0ZWQtTGF5ZXJzLUNvcHktNCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC4wMDAwMDAsIDEwNy4wMDAwMDApIiBza2V0Y2g6dHlwZT0iTVNTaGFwZUdyb3VwIj4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTQ5LjYyNSwyLjUyNyBDMTQ5LjYyNSwyLjUyNyAxNTUuODA1LDYuMDk2IDE1Ni4zNjIsNi40MTggTDE1Ni4zNjIsNy4zMDQgQzE1Ni4zNjIsNy40ODEgMTU2LjM3NSw3LjY2NCAxNTYuNCw3Ljg1MyBDMTU2LjQxLDcuOTM0IDE1Ni40Miw4LjAxNSAxNTYuNDI3LDguMDk1IEMxNTYuNTY3LDkuNTEgMTU3LjQwMSwxMS4wOTMgMTU4LjUzMiwxMi4wOTQgTDE2NC4yNTIsMTcuMTU2IEwxNjQuMzMzLDE3LjA2NiBDMTY0LjMzMywxNy4wNjYgMTY4LjcxNSwxNC41MzYgMTY5LjU2OCwxNC4wNDIgQzE3MS4wMjUsMTQuODgzIDE5NS41MzgsMjkuMDM1IDE5NS41MzgsMjkuMDM1IEwxOTUuNTM4LDgzLjAzNiBDMTk1LjUzOCw4My44MDcgMTk1LjE1Miw4NC4yNTMgMTk0LjU5LDg0LjI1MyBDMTk0LjM1Nyw4NC4yNTMgMTk0LjA5NSw4NC4xNzcgMTkzLjgxOCw4NC4wMTcgTDE2OS44NTEsNzAuMTc5IEwxNjkuODM3LDcwLjIwMyBMMTQyLjUxNSw4NS45NzggTDE0MS42NjUsODQuNjU1IEMxMzYuOTM0LDgzLjEyNiAxMzEuOTE3LDgxLjkxNSAxMjYuNzE0LDgxLjA0NSBDMTI2LjcwOSw4MS4wNiAxMjYuNzA3LDgxLjA2OSAxMjYuNzA3LDgxLjA2OSBMMTIxLjY0LDk4LjAzIEwxMTMuNzQ5LDEwMi41ODYgTDExMy43MTIsMTAyLjUyMyBMMTEzLjcxMiwxMzAuMTEzIEMxMTMuNzEyLDEzMC44ODUgMTEzLjMyNiwxMzEuMzMgMTEyLjc2NCwxMzEuMzMgQzExMi41MzIsMTMxLjMzIDExMi4yNjksMTMxLjI1NCAxMTEuOTkyLDEzMS4wOTQgTDY5LjUxOSwxMDYuNTcyIEM2OC41NjksMTA2LjAyMyA2Ny43OTksMTA0LjY5NSA2Ny43OTksMTAzLjYwNSBMNjcuNzk5LDEwMi41NyBMNjcuNzc4LDEwMi42MTcgQzY3LjI3LDEwMi4zOTMgNjYuNjQ4LDEwMi4yNDkgNjUuOTYyLDEwMi4yMTggQzY1Ljg3NSwxMDIuMjE0IDY1Ljc4OCwxMDIuMjEyIDY1LjcwMSwxMDIuMjEyIEM2NS42MDYsMTAyLjIxMiA2NS41MTEsMTAyLjIxNSA2NS40MTYsMTAyLjIxOSBDNjUuMTk1LDEwMi4yMjkgNjQuOTc0LDEwMi4yMzUgNjQuNzU0LDEwMi4yMzUgQzY0LjMzMSwxMDIuMjM1IDYzLjkxMSwxMDIuMjE2IDYzLjQ5OCwxMDIuMTc4IEM2MS44NDMsMTAyLjAyNSA2MC4yOTgsMTAxLjU3OCA1OS4wOTQsMTAwLjg4MiBMMTIuNTE4LDczLjk5MiBMMTIuNTIzLDc0LjAwNCBMMi4yNDUsNTUuMjU0IEMxLjI0NCw1My40MjcgMi4wMDQsNTEuMDM4IDMuOTQzLDQ5LjkxOCBMNTkuOTU0LDE3LjU3MyBDNjAuNjI2LDE3LjE4NSA2MS4zNSwxNy4wMDEgNjIuMDUzLDE3LjAwMSBDNjMuMzc5LDE3LjAwMSA2NC42MjUsMTcuNjYgNjUuMjgsMTguODU0IEw2NS4yODUsMTguODUxIEw2NS41MTIsMTkuMjY0IEw2NS41MDYsMTkuMjY4IEM2NS45MDksMjAuMDAzIDY2LjQwNSwyMC42OCA2Ni45ODMsMjEuMjg2IEw2Ny4yNiwyMS41NTYgQzY5LjE3NCwyMy40MDYgNzEuNzI4LDI0LjM1NyA3NC4zNzMsMjQuMzU3IEM3Ni4zMjIsMjQuMzU3IDc4LjMyMSwyMy44NCA4MC4xNDgsMjIuNzg1IEM4MC4xNjEsMjIuNzg1IDg3LjQ2NywxOC41NjYgODcuNDY3LDE4LjU2NiBDODguMTM5LDE4LjE3OCA4OC44NjMsMTcuOTk0IDg5LjU2NiwxNy45OTQgQzkwLjg5MiwxNy45OTQgOTIuMTM4LDE4LjY1MiA5Mi43OTIsMTkuODQ3IEw5Ni4wNDIsMjUuNzc1IEw5Ni4wNjQsMjUuNzU3IEwxMDIuODQ5LDI5LjY3NCBMMTAyLjc0NCwyOS40OTIgTDE0OS42MjUsMi41MjcgTTE0OS42MjUsMC44OTIgQzE0OS4zNDMsMC44OTIgMTQ5LjA2MiwwLjk2NSAxNDguODEsMS4xMSBMMTAyLjY0MSwyNy42NjYgTDk3LjIzMSwyNC41NDIgTDk0LjIyNiwxOS4wNjEgQzkzLjMxMywxNy4zOTQgOTEuNTI3LDE2LjM1OSA4OS41NjYsMTYuMzU4IEM4OC41NTUsMTYuMzU4IDg3LjU0NiwxNi42MzIgODYuNjQ5LDE3LjE1IEM4My44NzgsMTguNzUgNzkuNjg3LDIxLjE2OSA3OS4zNzQsMjEuMzQ1IEM3OS4zNTksMjEuMzUzIDc5LjM0NSwyMS4zNjEgNzkuMzMsMjEuMzY5IEM3Ny43OTgsMjIuMjU0IDc2LjA4NCwyMi43MjIgNzQuMzczLDIyLjcyMiBDNzIuMDgxLDIyLjcyMiA2OS45NTksMjEuODkgNjguMzk3LDIwLjM4IEw2OC4xNDUsMjAuMTM1IEM2Ny43MDYsMTkuNjcyIDY3LjMyMywxOS4xNTYgNjcuMDA2LDE4LjYwMSBDNjYuOTg4LDE4LjU1OSA2Ni45NjgsMTguNTE5IDY2Ljk0NiwxOC40NzkgTDY2LjcxOSwxOC4wNjUgQzY2LjY5LDE4LjAxMiA2Ni42NTgsMTcuOTYgNjYuNjI0LDE3LjkxMSBDNjUuNjg2LDE2LjMzNyA2My45NTEsMTUuMzY2IDYyLjA1MywxNS4zNjYgQzYxLjA0MiwxNS4zNjYgNjAuMDMzLDE1LjY0IDU5LjEzNiwxNi4xNTggTDMuMTI1LDQ4LjUwMiBDMC40MjYsNTAuMDYxIC0wLjYxMyw1My40NDIgMC44MTEsNTYuMDQgTDExLjA4OSw3NC43OSBDMTEuMjY2LDc1LjExMyAxMS41MzcsNzUuMzUzIDExLjg1LDc1LjQ5NCBMNTguMjc2LDEwMi4yOTggQzU5LjY3OSwxMDMuMTA4IDYxLjQzMywxMDMuNjMgNjMuMzQ4LDEwMy44MDYgQzYzLjgxMiwxMDMuODQ4IDY0LjI4NSwxMDMuODcgNjQuNzU0LDEwMy44NyBDNjUsMTAzLjg3IDY1LjI0OSwxMDMuODY0IDY1LjQ5NCwxMDMuODUyIEM2NS41NjMsMTAzLjg0OSA2NS42MzIsMTAzLjg0NyA2NS43MDEsMTAzLjg0NyBDNjUuNzY0LDEwMy44NDcgNjUuODI4LDEwMy44NDkgNjUuODksMTAzLjg1MiBDNjUuOTg2LDEwMy44NTYgNjYuMDgsMTAzLjg2MyA2Ni4xNzMsMTAzLjg3NCBDNjYuMjgyLDEwNS40NjcgNjcuMzMyLDEwNy4xOTcgNjguNzAyLDEwNy45ODggTDExMS4xNzQsMTMyLjUxIEMxMTEuNjk4LDEzMi44MTIgMTEyLjIzMiwxMzIuOTY1IDExMi43NjQsMTMyLjk2NSBDMTE0LjI2MSwxMzIuOTY1IDExNS4zNDcsMTMxLjc2NSAxMTUuMzQ3LDEzMC4xMTMgTDExNS4zNDcsMTAzLjU1MSBMMTIyLjQ1OCw5OS40NDYgQzEyMi44MTksOTkuMjM3IDEyMy4wODcsOTguODk4IDEyMy4yMDcsOTguNDk4IEwxMjcuODY1LDgyLjkwNSBDMTMyLjI3OSw4My43MDIgMTM2LjU1Nyw4NC43NTMgMTQwLjYwNyw4Ni4wMzMgTDE0MS4xNCw4Ni44NjIgQzE0MS40NTEsODcuMzQ2IDE0MS45NzcsODcuNjEzIDE0Mi41MTYsODcuNjEzIEMxNDIuNzk0LDg3LjYxMyAxNDMuMDc2LDg3LjU0MiAxNDMuMzMzLDg3LjM5MyBMMTY5Ljg2NSw3Mi4wNzYgTDE5Myw4NS40MzMgQzE5My41MjMsODUuNzM1IDE5NC4wNTgsODUuODg4IDE5NC41OSw4NS44ODggQzE5Ni4wODcsODUuODg4IDE5Ny4xNzMsODQuNjg5IDE5Ny4xNzMsODMuMDM2IEwxOTcuMTczLDI5LjAzNSBDMTk3LjE3MywyOC40NTEgMTk2Ljg2MSwyNy45MTEgMTk2LjM1NSwyNy42MTkgQzE5Ni4zNTUsMjcuNjE5IDE3MS44NDMsMTMuNDY3IDE3MC4zODUsMTIuNjI2IEMxNzAuMTMyLDEyLjQ4IDE2OS44NSwxMi40MDcgMTY5LjU2OCwxMi40MDcgQzE2OS4yODUsMTIuNDA3IDE2OS4wMDIsMTIuNDgxIDE2OC43NDksMTIuNjI3IEMxNjguMTQzLDEyLjk3OCAxNjUuNzU2LDE0LjM1NyAxNjQuNDI0LDE1LjEyNSBMMTU5LjYxNSwxMC44NyBDMTU4Ljc5NiwxMC4xNDUgMTU4LjE1NCw4LjkzNyAxNTguMDU0LDcuOTM0IEMxNTguMDQ1LDcuODM3IDE1OC4wMzQsNy43MzkgMTU4LjAyMSw3LjY0IEMxNTguMDA1LDcuNTIzIDE1Ny45OTgsNy40MSAxNTcuOTk4LDcuMzA0IEwxNTcuOTk4LDYuNDE4IEMxNTcuOTk4LDUuODM0IDE1Ny42ODYsNS4yOTUgMTU3LjE4MSw1LjAwMiBDMTU2LjYyNCw0LjY4IDE1MC40NDIsMS4xMTEgMTUwLjQ0MiwxLjExMSBDMTUwLjE4OSwwLjk2NSAxNDkuOTA3LDAuODkyIDE0OS42MjUsMC44OTIiIGlkPSJGaWxsLTEiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOTYuMDI3LDI1LjYzNiBMMTQyLjYwMyw1Mi41MjcgQzE0My44MDcsNTMuMjIyIDE0NC41ODIsNTQuMTE0IDE0NC44NDUsNTUuMDY4IEwxNDQuODM1LDU1LjA3NSBMNjMuNDYxLDEwMi4wNTcgTDYzLjQ2LDEwMi4wNTcgQzYxLjgwNiwxMDEuOTA1IDYwLjI2MSwxMDEuNDU3IDU5LjA1NywxMDAuNzYyIEwxMi40ODEsNzMuODcxIEw5Ni4wMjcsMjUuNjM2IiBpZD0iRmlsbC0yIiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTYzLjQ2MSwxMDIuMTc0IEM2My40NTMsMTAyLjE3NCA2My40NDYsMTAyLjE3NCA2My40MzksMTAyLjE3MiBDNjEuNzQ2LDEwMi4wMTYgNjAuMjExLDEwMS41NjMgNTguOTk4LDEwMC44NjMgTDEyLjQyMiw3My45NzMgQzEyLjM4Niw3My45NTIgMTIuMzY0LDczLjkxNCAxMi4zNjQsNzMuODcxIEMxMi4zNjQsNzMuODMgMTIuMzg2LDczLjc5MSAxMi40MjIsNzMuNzcgTDk1Ljk2OCwyNS41MzUgQzk2LjAwNCwyNS41MTQgOTYuMDQ5LDI1LjUxNCA5Ni4wODUsMjUuNTM1IEwxNDIuNjYxLDUyLjQyNiBDMTQzLjg4OCw1My4xMzQgMTQ0LjY4Miw1NC4wMzggMTQ0Ljk1Nyw1NS4wMzcgQzE0NC45Nyw1NS4wODMgMTQ0Ljk1Myw1NS4xMzMgMTQ0LjkxNSw1NS4xNjEgQzE0NC45MTEsNTUuMTY1IDE0NC44OTgsNTUuMTc0IDE0NC44OTQsNTUuMTc3IEw2My41MTksMTAyLjE1OCBDNjMuNTAxLDEwMi4xNjkgNjMuNDgxLDEwMi4xNzQgNjMuNDYxLDEwMi4xNzQgTDYzLjQ2MSwxMDIuMTc0IFogTTEyLjcxNCw3My44NzEgTDU5LjExNSwxMDAuNjYxIEM2MC4yOTMsMTAxLjM0MSA2MS43ODYsMTAxLjc4MiA2My40MzUsMTAxLjkzNyBMMTQ0LjcwNyw1NS4wMTUgQzE0NC40MjgsNTQuMTA4IDE0My42ODIsNTMuMjg1IDE0Mi41NDQsNTIuNjI4IEw5Ni4wMjcsMjUuNzcxIEwxMi43MTQsNzMuODcxIEwxMi43MTQsNzMuODcxIFoiIGlkPSJGaWxsLTMiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTQ4LjMyNyw1OC40NzEgQzE0OC4xNDUsNTguNDggMTQ3Ljk2Miw1OC40OCAxNDcuNzgxLDU4LjQ3MiBDMTQ1Ljg4Nyw1OC4zODkgMTQ0LjQ3OSw1Ny40MzQgMTQ0LjYzNiw1Ni4zNCBDMTQ0LjY4OSw1NS45NjcgMTQ0LjY2NCw1NS41OTcgMTQ0LjU2NCw1NS4yMzUgTDYzLjQ2MSwxMDIuMDU3IEM2NC4wODksMTAyLjExNSA2NC43MzMsMTAyLjEzIDY1LjM3OSwxMDIuMDk5IEM2NS41NjEsMTAyLjA5IDY1Ljc0MywxMDIuMDkgNjUuOTI1LDEwMi4wOTggQzY3LjgxOSwxMDIuMTgxIDY5LjIyNywxMDMuMTM2IDY5LjA3LDEwNC4yMyBMMTQ4LjMyNyw1OC40NzEiIGlkPSJGaWxsLTQiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNjkuMDcsMTA0LjM0NyBDNjkuMDQ4LDEwNC4zNDcgNjkuMDI1LDEwNC4zNCA2OS4wMDUsMTA0LjMyNyBDNjguOTY4LDEwNC4zMDEgNjguOTQ4LDEwNC4yNTcgNjguOTU1LDEwNC4yMTMgQzY5LDEwMy44OTYgNjguODk4LDEwMy41NzYgNjguNjU4LDEwMy4yODggQzY4LjE1MywxMDIuNjc4IDY3LjEwMywxMDIuMjY2IDY1LjkyLDEwMi4yMTQgQzY1Ljc0MiwxMDIuMjA2IDY1LjU2MywxMDIuMjA3IDY1LjM4NSwxMDIuMjE1IEM2NC43NDIsMTAyLjI0NiA2NC4wODcsMTAyLjIzMiA2My40NSwxMDIuMTc0IEM2My4zOTksMTAyLjE2OSA2My4zNTgsMTAyLjEzMiA2My4zNDcsMTAyLjA4MiBDNjMuMzM2LDEwMi4wMzMgNjMuMzU4LDEwMS45ODEgNjMuNDAyLDEwMS45NTYgTDE0NC41MDYsNTUuMTM0IEMxNDQuNTM3LDU1LjExNiAxNDQuNTc1LDU1LjExMyAxNDQuNjA5LDU1LjEyNyBDMTQ0LjY0Miw1NS4xNDEgMTQ0LjY2OCw1NS4xNyAxNDQuNjc3LDU1LjIwNCBDMTQ0Ljc4MSw1NS41ODUgMTQ0LjgwNiw1NS45NzIgMTQ0Ljc1MSw1Ni4zNTcgQzE0NC43MDYsNTYuNjczIDE0NC44MDgsNTYuOTk0IDE0NS4wNDcsNTcuMjgyIEMxNDUuNTUzLDU3Ljg5MiAxNDYuNjAyLDU4LjMwMyAxNDcuNzg2LDU4LjM1NSBDMTQ3Ljk2NCw1OC4zNjMgMTQ4LjE0Myw1OC4zNjMgMTQ4LjMyMSw1OC4zNTQgQzE0OC4zNzcsNTguMzUyIDE0OC40MjQsNTguMzg3IDE0OC40MzksNTguNDM4IEMxNDguNDU0LDU4LjQ5IDE0OC40MzIsNTguNTQ1IDE0OC4zODUsNTguNTcyIEw2OS4xMjksMTA0LjMzMSBDNjkuMTExLDEwNC4zNDIgNjkuMDksMTA0LjM0NyA2OS4wNywxMDQuMzQ3IEw2OS4wNywxMDQuMzQ3IFogTTY1LjY2NSwxMDEuOTc1IEM2NS43NTQsMTAxLjk3NSA2NS44NDIsMTAxLjk3NyA2NS45MywxMDEuOTgxIEM2Ny4xOTYsMTAyLjAzNyA2OC4yODMsMTAyLjQ2OSA2OC44MzgsMTAzLjEzOSBDNjkuMDY1LDEwMy40MTMgNjkuMTg4LDEwMy43MTQgNjkuMTk4LDEwNC4wMjEgTDE0Ny44ODMsNTguNTkyIEMxNDcuODQ3LDU4LjU5MiAxNDcuODExLDU4LjU5MSAxNDcuNzc2LDU4LjU4OSBDMTQ2LjUwOSw1OC41MzMgMTQ1LjQyMiw1OC4xIDE0NC44NjcsNTcuNDMxIEMxNDQuNTg1LDU3LjA5MSAxNDQuNDY1LDU2LjcwNyAxNDQuNTIsNTYuMzI0IEMxNDQuNTYzLDU2LjAyMSAxNDQuNTUyLDU1LjcxNiAxNDQuNDg4LDU1LjQxNCBMNjMuODQ2LDEwMS45NyBDNjQuMzUzLDEwMi4wMDIgNjQuODY3LDEwMi4wMDYgNjUuMzc0LDEwMS45ODIgQzY1LjQ3MSwxMDEuOTc3IDY1LjU2OCwxMDEuOTc1IDY1LjY2NSwxMDEuOTc1IEw2NS42NjUsMTAxLjk3NSBaIiBpZD0iRmlsbC01IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTIuMjA4LDU1LjEzNCBDMS4yMDcsNTMuMzA3IDEuOTY3LDUwLjkxNyAzLjkwNiw0OS43OTcgTDU5LjkxNywxNy40NTMgQzYxLjg1NiwxNi4zMzMgNjQuMjQxLDE2LjkwNyA2NS4yNDMsMTguNzM0IEw2NS40NzUsMTkuMTQ0IEM2NS44NzIsMTkuODgyIDY2LjM2OCwyMC41NiA2Ni45NDUsMjEuMTY1IEw2Ny4yMjMsMjEuNDM1IEM3MC41NDgsMjQuNjQ5IDc1LjgwNiwyNS4xNTEgODAuMTExLDIyLjY2NSBMODcuNDMsMTguNDQ1IEM4OS4zNywxNy4zMjYgOTEuNzU0LDE3Ljg5OSA5Mi43NTUsMTkuNzI3IEw5Ni4wMDUsMjUuNjU1IEwxMi40ODYsNzMuODg0IEwyLjIwOCw1NS4xMzQgWiIgaWQ9IkZpbGwtNiIgZmlsbD0iI0ZBRkFGQSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMi40ODYsNzQuMDAxIEMxMi40NzYsNzQuMDAxIDEyLjQ2NSw3My45OTkgMTIuNDU1LDczLjk5NiBDMTIuNDI0LDczLjk4OCAxMi4zOTksNzMuOTY3IDEyLjM4NCw3My45NCBMMi4xMDYsNTUuMTkgQzEuMDc1LDUzLjMxIDEuODU3LDUwLjg0NSAzLjg0OCw0OS42OTYgTDU5Ljg1OCwxNy4zNTIgQzYwLjUyNSwxNi45NjcgNjEuMjcxLDE2Ljc2NCA2Mi4wMTYsMTYuNzY0IEM2My40MzEsMTYuNzY0IDY0LjY2NiwxNy40NjYgNjUuMzI3LDE4LjY0NiBDNjUuMzM3LDE4LjY1NCA2NS4zNDUsMTguNjYzIDY1LjM1MSwxOC42NzQgTDY1LjU3OCwxOS4wODggQzY1LjU4NCwxOS4xIDY1LjU4OSwxOS4xMTIgNjUuNTkxLDE5LjEyNiBDNjUuOTg1LDE5LjgzOCA2Ni40NjksMjAuNDk3IDY3LjAzLDIxLjA4NSBMNjcuMzA1LDIxLjM1MSBDNjkuMTUxLDIzLjEzNyA3MS42NDksMjQuMTIgNzQuMzM2LDI0LjEyIEM3Ni4zMTMsMjQuMTIgNzguMjksMjMuNTgyIDgwLjA1MywyMi41NjMgQzgwLjA2NCwyMi41NTcgODAuMDc2LDIyLjU1MyA4MC4wODgsMjIuNTUgTDg3LjM3MiwxOC4zNDQgQzg4LjAzOCwxNy45NTkgODguNzg0LDE3Ljc1NiA4OS41MjksMTcuNzU2IEM5MC45NTYsMTcuNzU2IDkyLjIwMSwxOC40NzIgOTIuODU4LDE5LjY3IEw5Ni4xMDcsMjUuNTk5IEM5Ni4xMzgsMjUuNjU0IDk2LjExOCwyNS43MjQgOTYuMDYzLDI1Ljc1NiBMMTIuNTQ1LDczLjk4NSBDMTIuNTI2LDczLjk5NiAxMi41MDYsNzQuMDAxIDEyLjQ4Niw3NC4wMDEgTDEyLjQ4Niw3NC4wMDEgWiBNNjIuMDE2LDE2Ljk5NyBDNjEuMzEyLDE2Ljk5NyA2MC42MDYsMTcuMTkgNTkuOTc1LDE3LjU1NCBMMy45NjUsNDkuODk5IEMyLjA4Myw1MC45ODUgMS4zNDEsNTMuMzA4IDIuMzEsNTUuMDc4IEwxMi41MzEsNzMuNzIzIEw5NS44NDgsMjUuNjExIEw5Mi42NTMsMTkuNzgyIEM5Mi4wMzgsMTguNjYgOTAuODcsMTcuOTkgODkuNTI5LDE3Ljk5IEM4OC44MjUsMTcuOTkgODguMTE5LDE4LjE4MiA4Ny40ODksMTguNTQ3IEw4MC4xNzIsMjIuNzcyIEM4MC4xNjEsMjIuNzc4IDgwLjE0OSwyMi43ODIgODAuMTM3LDIyLjc4NSBDNzguMzQ2LDIzLjgxMSA3Ni4zNDEsMjQuMzU0IDc0LjMzNiwyNC4zNTQgQzcxLjU4OCwyNC4zNTQgNjkuMDMzLDIzLjM0NyA2Ny4xNDIsMjEuNTE5IEw2Ni44NjQsMjEuMjQ5IEM2Ni4yNzcsMjAuNjM0IDY1Ljc3NCwxOS45NDcgNjUuMzY3LDE5LjIwMyBDNjUuMzYsMTkuMTkyIDY1LjM1NiwxOS4xNzkgNjUuMzU0LDE5LjE2NiBMNjUuMTYzLDE4LjgxOSBDNjUuMTU0LDE4LjgxMSA2NS4xNDYsMTguODAxIDY1LjE0LDE4Ljc5IEM2NC41MjUsMTcuNjY3IDYzLjM1NywxNi45OTcgNjIuMDE2LDE2Ljk5NyBMNjIuMDE2LDE2Ljk5NyBaIiBpZD0iRmlsbC03IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTQyLjQzNCw0OC44MDggTDQyLjQzNCw0OC44MDggQzM5LjkyNCw0OC44MDcgMzcuNzM3LDQ3LjU1IDM2LjU4Miw0NS40NDMgQzM0Ljc3MSw0Mi4xMzkgMzYuMTQ0LDM3LjgwOSAzOS42NDEsMzUuNzg5IEw1MS45MzIsMjguNjkxIEM1My4xMDMsMjguMDE1IDU0LjQxMywyNy42NTggNTUuNzIxLDI3LjY1OCBDNTguMjMxLDI3LjY1OCA2MC40MTgsMjguOTE2IDYxLjU3MywzMS4wMjMgQzYzLjM4NCwzNC4zMjcgNjIuMDEyLDM4LjY1NyA1OC41MTQsNDAuNjc3IEw0Ni4yMjMsNDcuNzc1IEM0NS4wNTMsNDguNDUgNDMuNzQyLDQ4LjgwOCA0Mi40MzQsNDguODA4IEw0Mi40MzQsNDguODA4IFogTTU1LjcyMSwyOC4xMjUgQzU0LjQ5NSwyOC4xMjUgNTMuMjY1LDI4LjQ2MSA1Mi4xNjYsMjkuMDk2IEwzOS44NzUsMzYuMTk0IEMzNi41OTYsMzguMDg3IDM1LjMwMiw0Mi4xMzYgMzYuOTkyLDQ1LjIxOCBDMzguMDYzLDQ3LjE3MyA0MC4wOTgsNDguMzQgNDIuNDM0LDQ4LjM0IEM0My42NjEsNDguMzQgNDQuODksNDguMDA1IDQ1Ljk5LDQ3LjM3IEw1OC4yODEsNDAuMjcyIEM2MS41NiwzOC4zNzkgNjIuODUzLDM0LjMzIDYxLjE2NCwzMS4yNDggQzYwLjA5MiwyOS4yOTMgNTguMDU4LDI4LjEyNSA1NS43MjEsMjguMTI1IEw1NS43MjEsMjguMTI1IFoiIGlkPSJGaWxsLTgiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTQ5LjU4OCwyLjQwNyBDMTQ5LjU4OCwyLjQwNyAxNTUuNzY4LDUuOTc1IDE1Ni4zMjUsNi4yOTcgTDE1Ni4zMjUsNy4xODQgQzE1Ni4zMjUsNy4zNiAxNTYuMzM4LDcuNTQ0IDE1Ni4zNjIsNy43MzMgQzE1Ni4zNzMsNy44MTQgMTU2LjM4Miw3Ljg5NCAxNTYuMzksNy45NzUgQzE1Ni41Myw5LjM5IDE1Ny4zNjMsMTAuOTczIDE1OC40OTUsMTEuOTc0IEwxNjUuODkxLDE4LjUxOSBDMTY2LjA2OCwxOC42NzUgMTY2LjI0OSwxOC44MTQgMTY2LjQzMiwxOC45MzQgQzE2OC4wMTEsMTkuOTc0IDE2OS4zODIsMTkuNCAxNjkuNDk0LDE3LjY1MiBDMTY5LjU0MywxNi44NjggMTY5LjU1MSwxNi4wNTcgMTY5LjUxNywxNS4yMjMgTDE2OS41MTQsMTUuMDYzIEwxNjkuNTE0LDEzLjkxMiBDMTcwLjc4LDE0LjY0MiAxOTUuNTAxLDI4LjkxNSAxOTUuNTAxLDI4LjkxNSBMMTk1LjUwMSw4Mi45MTUgQzE5NS41MDEsODQuMDA1IDE5NC43MzEsODQuNDQ1IDE5My43ODEsODMuODk3IEwxNTEuMzA4LDU5LjM3NCBDMTUwLjM1OCw1OC44MjYgMTQ5LjU4OCw1Ny40OTcgMTQ5LjU4OCw1Ni40MDggTDE0OS41ODgsMjIuMzc1IiBpZD0iRmlsbC05IiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE5NC41NTMsODQuMjUgQzE5NC4yOTYsODQuMjUgMTk0LjAxMyw4NC4xNjUgMTkzLjcyMiw4My45OTcgTDE1MS4yNSw1OS40NzYgQzE1MC4yNjksNTguOTA5IDE0OS40NzEsNTcuNTMzIDE0OS40NzEsNTYuNDA4IEwxNDkuNDcxLDIyLjM3NSBMMTQ5LjcwNSwyMi4zNzUgTDE0OS43MDUsNTYuNDA4IEMxNDkuNzA1LDU3LjQ1OSAxNTAuNDUsNTguNzQ0IDE1MS4zNjYsNTkuMjc0IEwxOTMuODM5LDgzLjc5NSBDMTk0LjI2Myw4NC4wNCAxOTQuNjU1LDg0LjA4MyAxOTQuOTQyLDgzLjkxNyBDMTk1LjIyNyw4My43NTMgMTk1LjM4NCw4My4zOTcgMTk1LjM4NCw4Mi45MTUgTDE5NS4zODQsMjguOTgyIEMxOTQuMTAyLDI4LjI0MiAxNzIuMTA0LDE1LjU0MiAxNjkuNjMxLDE0LjExNCBMMTY5LjYzNCwxNS4yMiBDMTY5LjY2OCwxNi4wNTIgMTY5LjY2LDE2Ljg3NCAxNjkuNjEsMTcuNjU5IEMxNjkuNTU2LDE4LjUwMyAxNjkuMjE0LDE5LjEyMyAxNjguNjQ3LDE5LjQwNSBDMTY4LjAyOCwxOS43MTQgMTY3LjE5NywxOS41NzggMTY2LjM2NywxOS4wMzIgQzE2Ni4xODEsMTguOTA5IDE2NS45OTUsMTguNzY2IDE2NS44MTQsMTguNjA2IEwxNTguNDE3LDEyLjA2MiBDMTU3LjI1OSwxMS4wMzYgMTU2LjQxOCw5LjQzNyAxNTYuMjc0LDcuOTg2IEMxNTYuMjY2LDcuOTA3IDE1Ni4yNTcsNy44MjcgMTU2LjI0Nyw3Ljc0OCBDMTU2LjIyMSw3LjU1NSAxNTYuMjA5LDcuMzY1IDE1Ni4yMDksNy4xODQgTDE1Ni4yMDksNi4zNjQgQzE1NS4zNzUsNS44ODMgMTQ5LjUyOSwyLjUwOCAxNDkuNTI5LDIuNTA4IEwxNDkuNjQ2LDIuMzA2IEMxNDkuNjQ2LDIuMzA2IDE1NS44MjcsNS44NzQgMTU2LjM4NCw2LjE5NiBMMTU2LjQ0Miw2LjIzIEwxNTYuNDQyLDcuMTg0IEMxNTYuNDQyLDcuMzU1IDE1Ni40NTQsNy41MzUgMTU2LjQ3OCw3LjcxNyBDMTU2LjQ4OSw3LjggMTU2LjQ5OSw3Ljg4MiAxNTYuNTA3LDcuOTYzIEMxNTYuNjQ1LDkuMzU4IDE1Ny40NTUsMTAuODk4IDE1OC41NzIsMTEuODg2IEwxNjUuOTY5LDE4LjQzMSBDMTY2LjE0MiwxOC41ODQgMTY2LjMxOSwxOC43MiAxNjYuNDk2LDE4LjgzNyBDMTY3LjI1NCwxOS4zMzYgMTY4LDE5LjQ2NyAxNjguNTQzLDE5LjE5NiBDMTY5LjAzMywxOC45NTMgMTY5LjMyOSwxOC40MDEgMTY5LjM3NywxNy42NDUgQzE2OS40MjcsMTYuODY3IDE2OS40MzQsMTYuMDU0IDE2OS40MDEsMTUuMjI4IEwxNjkuMzk3LDE1LjA2NSBMMTY5LjM5NywxMy43MSBMMTY5LjU3MiwxMy44MSBDMTcwLjgzOSwxNC41NDEgMTk1LjU1OSwyOC44MTQgMTk1LjU1OSwyOC44MTQgTDE5NS42MTgsMjguODQ3IEwxOTUuNjE4LDgyLjkxNSBDMTk1LjYxOCw4My40ODQgMTk1LjQyLDgzLjkxMSAxOTUuMDU5LDg0LjExOSBDMTk0LjkwOCw4NC4yMDYgMTk0LjczNyw4NC4yNSAxOTQuNTUzLDg0LjI1IiBpZD0iRmlsbC0xMCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNDUuNjg1LDU2LjE2MSBMMTY5LjgsNzAuMDgzIEwxNDMuODIyLDg1LjA4MSBMMTQyLjM2LDg0Ljc3NCBDMTM1LjgyNiw4Mi42MDQgMTI4LjczMiw4MS4wNDYgMTIxLjM0MSw4MC4xNTggQzExNi45NzYsNzkuNjM0IDExMi42NzgsODEuMjU0IDExMS43NDMsODMuNzc4IEMxMTEuNTA2LDg0LjQxNCAxMTEuNTAzLDg1LjA3MSAxMTEuNzMyLDg1LjcwNiBDMTEzLjI3LDg5Ljk3MyAxMTUuOTY4LDk0LjA2OSAxMTkuNzI3LDk3Ljg0MSBMMTIwLjI1OSw5OC42ODYgQzEyMC4yNiw5OC42ODUgOTQuMjgyLDExMy42ODMgOTQuMjgyLDExMy42ODMgTDcwLjE2Nyw5OS43NjEgTDE0NS42ODUsNTYuMTYxIiBpZD0iRmlsbC0xMSIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik05NC4yODIsMTEzLjgxOCBMOTQuMjIzLDExMy43ODUgTDY5LjkzMyw5OS43NjEgTDcwLjEwOCw5OS42NiBMMTQ1LjY4NSw1Ni4wMjYgTDE0NS43NDMsNTYuMDU5IEwxNzAuMDMzLDcwLjA4MyBMMTQzLjg0Miw4NS4yMDUgTDE0My43OTcsODUuMTk1IEMxNDMuNzcyLDg1LjE5IDE0Mi4zMzYsODQuODg4IDE0Mi4zMzYsODQuODg4IEMxMzUuNzg3LDgyLjcxNCAxMjguNzIzLDgxLjE2MyAxMjEuMzI3LDgwLjI3NCBDMTIwLjc4OCw4MC4yMDkgMTIwLjIzNiw4MC4xNzcgMTE5LjY4OSw4MC4xNzcgQzExNS45MzEsODAuMTc3IDExMi42MzUsODEuNzA4IDExMS44NTIsODMuODE5IEMxMTEuNjI0LDg0LjQzMiAxMTEuNjIxLDg1LjA1MyAxMTEuODQyLDg1LjY2NyBDMTEzLjM3Nyw4OS45MjUgMTE2LjA1OCw5My45OTMgMTE5LjgxLDk3Ljc1OCBMMTE5LjgyNiw5Ny43NzkgTDEyMC4zNTIsOTguNjE0IEMxMjAuMzU0LDk4LjYxNyAxMjAuMzU2LDk4LjYyIDEyMC4zNTgsOTguNjI0IEwxMjAuNDIyLDk4LjcyNiBMMTIwLjMxNyw5OC43ODcgQzEyMC4yNjQsOTguODE4IDk0LjU5OSwxMTMuNjM1IDk0LjM0LDExMy43ODUgTDk0LjI4MiwxMTMuODE4IEw5NC4yODIsMTEzLjgxOCBaIE03MC40MDEsOTkuNzYxIEw5NC4yODIsMTEzLjU0OSBMMTE5LjA4NCw5OS4yMjkgQzExOS42Myw5OC45MTQgMTE5LjkzLDk4Ljc0IDEyMC4xMDEsOTguNjU0IEwxMTkuNjM1LDk3LjkxNCBDMTE1Ljg2NCw5NC4xMjcgMTEzLjE2OCw5MC4wMzMgMTExLjYyMiw4NS43NDYgQzExMS4zODIsODUuMDc5IDExMS4zODYsODQuNDA0IDExMS42MzMsODMuNzM4IEMxMTIuNDQ4LDgxLjUzOSAxMTUuODM2LDc5Ljk0MyAxMTkuNjg5LDc5Ljk0MyBDMTIwLjI0Niw3OS45NDMgMTIwLjgwNiw3OS45NzYgMTIxLjM1NSw4MC4wNDIgQzEyOC43NjcsODAuOTMzIDEzNS44NDYsODIuNDg3IDE0Mi4zOTYsODQuNjYzIEMxNDMuMjMyLDg0LjgzOCAxNDMuNjExLDg0LjkxNyAxNDMuNzg2LDg0Ljk2NyBMMTY5LjU2Niw3MC4wODMgTDE0NS42ODUsNTYuMjk1IEw3MC40MDEsOTkuNzYxIEw3MC40MDEsOTkuNzYxIFoiIGlkPSJGaWxsLTEyIiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2Ny4yMywxOC45NzkgTDE2Ny4yMyw2OS44NSBMMTM5LjkwOSw4NS42MjMgTDEzMy40NDgsNzEuNDU2IEMxMzIuNTM4LDY5LjQ2IDEzMC4wMiw2OS43MTggMTI3LjgyNCw3Mi4wMyBDMTI2Ljc2OSw3My4xNCAxMjUuOTMxLDc0LjU4NSAxMjUuNDk0LDc2LjA0OCBMMTE5LjAzNCw5Ny42NzYgTDkxLjcxMiwxMTMuNDUgTDkxLjcxMiw2Mi41NzkgTDE2Ny4yMywxOC45NzkiIGlkPSJGaWxsLTEzIiBmaWxsPSIjRkZGRkZGIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTkxLjcxMiwxMTMuNTY3IEM5MS42OTIsMTEzLjU2NyA5MS42NzIsMTEzLjU2MSA5MS42NTMsMTEzLjU1MSBDOTEuNjE4LDExMy41MyA5MS41OTUsMTEzLjQ5MiA5MS41OTUsMTEzLjQ1IEw5MS41OTUsNjIuNTc5IEM5MS41OTUsNjIuNTM3IDkxLjYxOCw2Mi40OTkgOTEuNjUzLDYyLjQ3OCBMMTY3LjE3MiwxOC44NzggQzE2Ny4yMDgsMTguODU3IDE2Ny4yNTIsMTguODU3IDE2Ny4yODgsMTguODc4IEMxNjcuMzI0LDE4Ljg5OSAxNjcuMzQ3LDE4LjkzNyAxNjcuMzQ3LDE4Ljk3OSBMMTY3LjM0Nyw2OS44NSBDMTY3LjM0Nyw2OS44OTEgMTY3LjMyNCw2OS45MyAxNjcuMjg4LDY5Ljk1IEwxMzkuOTY3LDg1LjcyNSBDMTM5LjkzOSw4NS43NDEgMTM5LjkwNSw4NS43NDUgMTM5Ljg3Myw4NS43MzUgQzEzOS44NDIsODUuNzI1IDEzOS44MTYsODUuNzAyIDEzOS44MDIsODUuNjcyIEwxMzMuMzQyLDcxLjUwNCBDMTMyLjk2Nyw3MC42ODIgMTMyLjI4LDcwLjIyOSAxMzEuNDA4LDcwLjIyOSBDMTMwLjMxOSw3MC4yMjkgMTI5LjA0NCw3MC45MTUgMTI3LjkwOCw3Mi4xMSBDMTI2Ljg3NCw3My4yIDEyNi4wMzQsNzQuNjQ3IDEyNS42MDYsNzYuMDgyIEwxMTkuMTQ2LDk3LjcwOSBDMTE5LjEzNyw5Ny43MzggMTE5LjExOCw5Ny43NjIgMTE5LjA5Miw5Ny43NzcgTDkxLjc3LDExMy41NTEgQzkxLjc1MiwxMTMuNTYxIDkxLjczMiwxMTMuNTY3IDkxLjcxMiwxMTMuNTY3IEw5MS43MTIsMTEzLjU2NyBaIE05MS44MjksNjIuNjQ3IEw5MS44MjksMTEzLjI0OCBMMTE4LjkzNSw5Ny41OTggTDEyNS4zODIsNzYuMDE1IEMxMjUuODI3LDc0LjUyNSAxMjYuNjY0LDczLjA4MSAxMjcuNzM5LDcxLjk1IEMxMjguOTE5LDcwLjcwOCAxMzAuMjU2LDY5Ljk5NiAxMzEuNDA4LDY5Ljk5NiBDMTMyLjM3Nyw2OS45OTYgMTMzLjEzOSw3MC40OTcgMTMzLjU1NCw3MS40MDcgTDEzOS45NjEsODUuNDU4IEwxNjcuMTEzLDY5Ljc4MiBMMTY3LjExMywxOS4xODEgTDkxLjgyOSw2Mi42NDcgTDkxLjgyOSw2Mi42NDcgWiIgaWQ9IkZpbGwtMTQiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTY4LjU0MywxOS4yMTMgTDE2OC41NDMsNzAuMDgzIEwxNDEuMjIxLDg1Ljg1NyBMMTM0Ljc2MSw3MS42ODkgQzEzMy44NTEsNjkuNjk0IDEzMS4zMzMsNjkuOTUxIDEyOS4xMzcsNzIuMjYzIEMxMjguMDgyLDczLjM3NCAxMjcuMjQ0LDc0LjgxOSAxMjYuODA3LDc2LjI4MiBMMTIwLjM0Niw5Ny45MDkgTDkzLjAyNSwxMTMuNjgzIEw5My4wMjUsNjIuODEzIEwxNjguNTQzLDE5LjIxMyIgaWQ9IkZpbGwtMTUiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOTMuMDI1LDExMy44IEM5My4wMDUsMTEzLjggOTIuOTg0LDExMy43OTUgOTIuOTY2LDExMy43ODUgQzkyLjkzMSwxMTMuNzY0IDkyLjkwOCwxMTMuNzI1IDkyLjkwOCwxMTMuNjg0IEw5Mi45MDgsNjIuODEzIEM5Mi45MDgsNjIuNzcxIDkyLjkzMSw2Mi43MzMgOTIuOTY2LDYyLjcxMiBMMTY4LjQ4NCwxOS4xMTIgQzE2OC41MiwxOS4wOSAxNjguNTY1LDE5LjA5IDE2OC42MDEsMTkuMTEyIEMxNjguNjM3LDE5LjEzMiAxNjguNjYsMTkuMTcxIDE2OC42NiwxOS4yMTIgTDE2OC42Niw3MC4wODMgQzE2OC42Niw3MC4xMjUgMTY4LjYzNyw3MC4xNjQgMTY4LjYwMSw3MC4xODQgTDE0MS4yOCw4NS45NTggQzE0MS4yNTEsODUuOTc1IDE0MS4yMTcsODUuOTc5IDE0MS4xODYsODUuOTY4IEMxNDEuMTU0LDg1Ljk1OCAxNDEuMTI5LDg1LjkzNiAxNDEuMTE1LDg1LjkwNiBMMTM0LjY1NSw3MS43MzggQzEzNC4yOCw3MC45MTUgMTMzLjU5Myw3MC40NjMgMTMyLjcyLDcwLjQ2MyBDMTMxLjYzMiw3MC40NjMgMTMwLjM1Nyw3MS4xNDggMTI5LjIyMSw3Mi4zNDQgQzEyOC4xODYsNzMuNDMzIDEyNy4zNDcsNzQuODgxIDEyNi45MTksNzYuMzE1IEwxMjAuNDU4LDk3Ljk0MyBDMTIwLjQ1LDk3Ljk3MiAxMjAuNDMxLDk3Ljk5NiAxMjAuNDA1LDk4LjAxIEw5My4wODMsMTEzLjc4NSBDOTMuMDY1LDExMy43OTUgOTMuMDQ1LDExMy44IDkzLjAyNSwxMTMuOCBMOTMuMDI1LDExMy44IFogTTkzLjE0Miw2Mi44ODEgTDkzLjE0MiwxMTMuNDgxIEwxMjAuMjQ4LDk3LjgzMiBMMTI2LjY5NSw3Ni4yNDggQzEyNy4xNCw3NC43NTggMTI3Ljk3Nyw3My4zMTUgMTI5LjA1Miw3Mi4xODMgQzEzMC4yMzEsNzAuOTQyIDEzMS41NjgsNzAuMjI5IDEzMi43Miw3MC4yMjkgQzEzMy42ODksNzAuMjI5IDEzNC40NTIsNzAuNzMxIDEzNC44NjcsNzEuNjQxIEwxNDEuMjc0LDg1LjY5MiBMMTY4LjQyNiw3MC4wMTYgTDE2OC40MjYsMTkuNDE1IEw5My4xNDIsNjIuODgxIEw5My4xNDIsNjIuODgxIFoiIGlkPSJGaWxsLTE2IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2OS44LDcwLjA4MyBMMTQyLjQ3OCw4NS44NTcgTDEzNi4wMTgsNzEuNjg5IEMxMzUuMTA4LDY5LjY5NCAxMzIuNTksNjkuOTUxIDEzMC4zOTMsNzIuMjYzIEMxMjkuMzM5LDczLjM3NCAxMjguNSw3NC44MTkgMTI4LjA2NCw3Ni4yODIgTDEyMS42MDMsOTcuOTA5IEw5NC4yODIsMTEzLjY4MyBMOTQuMjgyLDYyLjgxMyBMMTY5LjgsMTkuMjEzIEwxNjkuOCw3MC4wODMgWiIgaWQ9IkZpbGwtMTciIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOTQuMjgyLDExMy45MTcgQzk0LjI0MSwxMTMuOTE3IDk0LjIwMSwxMTMuOTA3IDk0LjE2NSwxMTMuODg2IEM5NC4wOTMsMTEzLjg0NSA5NC4wNDgsMTEzLjc2NyA5NC4wNDgsMTEzLjY4NCBMOTQuMDQ4LDYyLjgxMyBDOTQuMDQ4LDYyLjczIDk0LjA5Myw2Mi42NTIgOTQuMTY1LDYyLjYxMSBMMTY5LjY4MywxOS4wMSBDMTY5Ljc1NSwxOC45NjkgMTY5Ljg0NCwxOC45NjkgMTY5LjkxNywxOS4wMSBDMTY5Ljk4OSwxOS4wNTIgMTcwLjAzMywxOS4xMjkgMTcwLjAzMywxOS4yMTIgTDE3MC4wMzMsNzAuMDgzIEMxNzAuMDMzLDcwLjE2NiAxNjkuOTg5LDcwLjI0NCAxNjkuOTE3LDcwLjI4NSBMMTQyLjU5NSw4Ni4wNiBDMTQyLjUzOCw4Ni4wOTIgMTQyLjQ2OSw4Ni4xIDE0Mi40MDcsODYuMDggQzE0Mi4zNDQsODYuMDYgMTQyLjI5Myw4Ni4wMTQgMTQyLjI2Niw4NS45NTQgTDEzNS44MDUsNzEuNzg2IEMxMzUuNDQ1LDcwLjk5NyAxMzQuODEzLDcwLjU4IDEzMy45NzcsNzAuNTggQzEzMi45MjEsNzAuNTggMTMxLjY3Niw3MS4yNTIgMTMwLjU2Miw3Mi40MjQgQzEyOS41NCw3My41MDEgMTI4LjcxMSw3NC45MzEgMTI4LjI4Nyw3Ni4zNDggTDEyMS44MjcsOTcuOTc2IEMxMjEuODEsOTguMDM0IDEyMS43NzEsOTguMDgyIDEyMS43Miw5OC4xMTIgTDk0LjM5OCwxMTMuODg2IEM5NC4zNjIsMTEzLjkwNyA5NC4zMjIsMTEzLjkxNyA5NC4yODIsMTEzLjkxNyBMOTQuMjgyLDExMy45MTcgWiBNOTQuNTE1LDYyLjk0OCBMOTQuNTE1LDExMy4yNzkgTDEyMS40MDYsOTcuNzU0IEwxMjcuODQsNzYuMjE1IEMxMjguMjksNzQuNzA4IDEyOS4xMzcsNzMuMjQ3IDEzMC4yMjQsNzIuMTAzIEMxMzEuNDI1LDcwLjgzOCAxMzIuNzkzLDcwLjExMiAxMzMuOTc3LDcwLjExMiBDMTM0Ljk5NSw3MC4xMTIgMTM1Ljc5NSw3MC42MzggMTM2LjIzLDcxLjU5MiBMMTQyLjU4NCw4NS41MjYgTDE2OS41NjYsNjkuOTQ4IEwxNjkuNTY2LDE5LjYxNyBMOTQuNTE1LDYyLjk0OCBMOTQuNTE1LDYyLjk0OCBaIiBpZD0iRmlsbC0xOCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMDkuODk0LDkyLjk0MyBMMTA5Ljg5NCw5Mi45NDMgQzEwOC4xMiw5Mi45NDMgMTA2LjY1Myw5Mi4yMTggMTA1LjY1LDkwLjgyMyBDMTA1LjU4Myw5MC43MzEgMTA1LjU5Myw5MC42MSAxMDUuNjczLDkwLjUyOSBDMTA1Ljc1Myw5MC40NDggMTA1Ljg4LDkwLjQ0IDEwNS45NzQsOTAuNTA2IEMxMDYuNzU0LDkxLjA1MyAxMDcuNjc5LDkxLjMzMyAxMDguNzI0LDkxLjMzMyBDMTEwLjA0Nyw5MS4zMzMgMTExLjQ3OCw5MC44OTQgMTEyLjk4LDkwLjAyNyBDMTE4LjI5MSw4Ni45NiAxMjIuNjExLDc5LjUwOSAxMjIuNjExLDczLjQxNiBDMTIyLjYxMSw3MS40ODkgMTIyLjE2OSw2OS44NTYgMTIxLjMzMyw2OC42OTIgQzEyMS4yNjYsNjguNiAxMjEuMjc2LDY4LjQ3MyAxMjEuMzU2LDY4LjM5MiBDMTIxLjQzNiw2OC4zMTEgMTIxLjU2Myw2OC4yOTkgMTIxLjY1Niw2OC4zNjUgQzEyMy4zMjcsNjkuNTM3IDEyNC4yNDcsNzEuNzQ2IDEyNC4yNDcsNzQuNTg0IEMxMjQuMjQ3LDgwLjgyNiAxMTkuODIxLDg4LjQ0NyAxMTQuMzgyLDkxLjU4NyBDMTEyLjgwOCw5Mi40OTUgMTExLjI5OCw5Mi45NDMgMTA5Ljg5NCw5Mi45NDMgTDEwOS44OTQsOTIuOTQzIFogTTEwNi45MjUsOTEuNDAxIEMxMDcuNzM4LDkyLjA1MiAxMDguNzQ1LDkyLjI3OCAxMDkuODkzLDkyLjI3OCBMMTA5Ljg5NCw5Mi4yNzggQzExMS4yMTUsOTIuMjc4IDExMi42NDcsOTEuOTUxIDExNC4xNDgsOTEuMDg0IEMxMTkuNDU5LDg4LjAxNyAxMjMuNzgsODAuNjIxIDEyMy43OCw3NC41MjggQzEyMy43OCw3Mi41NDkgMTIzLjMxNyw3MC45MjkgMTIyLjQ1NCw2OS43NjcgQzEyMi44NjUsNzAuODAyIDEyMy4wNzksNzIuMDQyIDEyMy4wNzksNzMuNDAyIEMxMjMuMDc5LDc5LjY0NSAxMTguNjUzLDg3LjI4NSAxMTMuMjE0LDkwLjQyNSBDMTExLjY0LDkxLjMzNCAxMTAuMTMsOTEuNzQyIDEwOC43MjQsOTEuNzQyIEMxMDguMDgzLDkxLjc0MiAxMDcuNDgxLDkxLjU5MyAxMDYuOTI1LDkxLjQwMSBMMTA2LjkyNSw5MS40MDEgWiIgaWQ9IkZpbGwtMTkiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEzLjA5Nyw5MC4yMyBDMTE4LjQ4MSw4Ny4xMjIgMTIyLjg0NSw3OS41OTQgMTIyLjg0NSw3My40MTYgQzEyMi44NDUsNzEuMzY1IDEyMi4zNjIsNjkuNzI0IDEyMS41MjIsNjguNTU2IEMxMTkuNzM4LDY3LjMwNCAxMTcuMTQ4LDY3LjM2MiAxMTQuMjY1LDY5LjAyNiBDMTA4Ljg4MSw3Mi4xMzQgMTA0LjUxNyw3OS42NjIgMTA0LjUxNyw4NS44NCBDMTA0LjUxNyw4Ny44OTEgMTA1LDg5LjUzMiAxMDUuODQsOTAuNyBDMTA3LjYyNCw5MS45NTIgMTEwLjIxNCw5MS44OTQgMTEzLjA5Nyw5MC4yMyIgaWQ9IkZpbGwtMjAiIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTA4LjcyNCw5MS42MTQgTDEwOC43MjQsOTEuNjE0IEMxMDcuNTgyLDkxLjYxNCAxMDYuNTY2LDkxLjQwMSAxMDUuNzA1LDkwLjc5NyBDMTA1LjY4NCw5MC43ODMgMTA1LjY2NSw5MC44MTEgMTA1LjY1LDkwLjc5IEMxMDQuNzU2LDg5LjU0NiAxMDQuMjgzLDg3Ljg0MiAxMDQuMjgzLDg1LjgxNyBDMTA0LjI4Myw3OS41NzUgMTA4LjcwOSw3MS45NTMgMTE0LjE0OCw2OC44MTIgQzExNS43MjIsNjcuOTA0IDExNy4yMzIsNjcuNDQ5IDExOC42MzgsNjcuNDQ5IEMxMTkuNzgsNjcuNDQ5IDEyMC43OTYsNjcuNzU4IDEyMS42NTYsNjguMzYyIEMxMjEuNjc4LDY4LjM3NyAxMjEuNjk3LDY4LjM5NyAxMjEuNzEyLDY4LjQxOCBDMTIyLjYwNiw2OS42NjIgMTIzLjA3OSw3MS4zOSAxMjMuMDc5LDczLjQxNSBDMTIzLjA3OSw3OS42NTggMTE4LjY1Myw4Ny4xOTggMTEzLjIxNCw5MC4zMzggQzExMS42NCw5MS4yNDcgMTEwLjEzLDkxLjYxNCAxMDguNzI0LDkxLjYxNCBMMTA4LjcyNCw5MS42MTQgWiBNMTA2LjAwNiw5MC41MDUgQzEwNi43OCw5MS4wMzcgMTA3LjY5NCw5MS4yODEgMTA4LjcyNCw5MS4yODEgQzExMC4wNDcsOTEuMjgxIDExMS40NzgsOTAuODY4IDExMi45OCw5MC4wMDEgQzExOC4yOTEsODYuOTM1IDEyMi42MTEsNzkuNDk2IDEyMi42MTEsNzMuNDAzIEMxMjIuNjExLDcxLjQ5NCAxMjIuMTc3LDY5Ljg4IDEyMS4zNTYsNjguNzE4IEMxMjAuNTgyLDY4LjE4NSAxMTkuNjY4LDY3LjkxOSAxMTguNjM4LDY3LjkxOSBDMTE3LjMxNSw2Ny45MTkgMTE1Ljg4Myw2OC4zNiAxMTQuMzgyLDY5LjIyNyBDMTA5LjA3MSw3Mi4yOTMgMTA0Ljc1MSw3OS43MzMgMTA0Ljc1MSw4NS44MjYgQzEwNC43NTEsODcuNzM1IDEwNS4xODUsODkuMzQzIDEwNi4wMDYsOTAuNTA1IEwxMDYuMDA2LDkwLjUwNSBaIiBpZD0iRmlsbC0yMSIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNDkuMzE4LDcuMjYyIEwxMzkuMzM0LDE2LjE0IEwxNTUuMjI3LDI3LjE3MSBMMTYwLjgxNiwyMS4wNTkgTDE0OS4zMTgsNy4yNjIiIGlkPSJGaWxsLTIyIiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2OS42NzYsMTMuODQgTDE1OS45MjgsMTkuNDY3IEMxNTYuMjg2LDIxLjU3IDE1MC40LDIxLjU4IDE0Ni43ODEsMTkuNDkxIEMxNDMuMTYxLDE3LjQwMiAxNDMuMTgsMTQuMDAzIDE0Ni44MjIsMTEuOSBMMTU2LjMxNyw2LjI5MiBMMTQ5LjU4OCwyLjQwNyBMNjcuNzUyLDQ5LjQ3OCBMMTEzLjY3NSw3NS45OTIgTDExNi43NTYsNzQuMjEzIEMxMTcuMzg3LDczLjg0OCAxMTcuNjI1LDczLjMxNSAxMTcuMzc0LDcyLjgyMyBDMTE1LjAxNyw2OC4xOTEgMTE0Ljc4MSw2My4yNzcgMTE2LjY5MSw1OC41NjEgQzEyMi4zMjksNDQuNjQxIDE0MS4yLDMzLjc0NiAxNjUuMzA5LDMwLjQ5MSBDMTczLjQ3OCwyOS4zODggMTgxLjk4OSwyOS41MjQgMTkwLjAxMywzMC44ODUgQzE5MC44NjUsMzEuMDMgMTkxLjc4OSwzMC44OTMgMTkyLjQyLDMwLjUyOCBMMTk1LjUwMSwyOC43NSBMMTY5LjY3NiwxMy44NCIgaWQ9IkZpbGwtMjMiIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEzLjY3NSw3Ni40NTkgQzExMy41OTQsNzYuNDU5IDExMy41MTQsNzYuNDM4IDExMy40NDIsNzYuMzk3IEw2Ny41MTgsNDkuODgyIEM2Ny4zNzQsNDkuNzk5IDY3LjI4NCw0OS42NDUgNjcuMjg1LDQ5LjQ3OCBDNjcuMjg1LDQ5LjMxMSA2Ny4zNzQsNDkuMTU3IDY3LjUxOSw0OS4wNzMgTDE0OS4zNTUsMi4wMDIgQzE0OS40OTksMS45MTkgMTQ5LjY3NywxLjkxOSAxNDkuODIxLDIuMDAyIEwxNTYuNTUsNS44ODcgQzE1Ni43NzQsNi4wMTcgMTU2Ljg1LDYuMzAyIDE1Ni43MjIsNi41MjYgQzE1Ni41OTIsNi43NDkgMTU2LjMwNyw2LjgyNiAxNTYuMDgzLDYuNjk2IEwxNDkuNTg3LDIuOTQ2IEw2OC42ODcsNDkuNDc5IEwxMTMuNjc1LDc1LjQ1MiBMMTE2LjUyMyw3My44MDggQzExNi43MTUsNzMuNjk3IDExNy4xNDMsNzMuMzk5IDExNi45NTgsNzMuMDM1IEMxMTQuNTQyLDY4LjI4NyAxMTQuMyw2My4yMjEgMTE2LjI1OCw1OC4zODUgQzExOS4wNjQsNTEuNDU4IDEyNS4xNDMsNDUuMTQzIDEzMy44NCw0MC4xMjIgQzE0Mi40OTcsMzUuMTI0IDE1My4zNTgsMzEuNjMzIDE2NS4yNDcsMzAuMDI4IEMxNzMuNDQ1LDI4LjkyMSAxODIuMDM3LDI5LjA1OCAxOTAuMDkxLDMwLjQyNSBDMTkwLjgzLDMwLjU1IDE5MS42NTIsMzAuNDMyIDE5Mi4xODYsMzAuMTI0IEwxOTQuNTY3LDI4Ljc1IEwxNjkuNDQyLDE0LjI0NCBDMTY5LjIxOSwxNC4xMTUgMTY5LjE0MiwxMy44MjkgMTY5LjI3MSwxMy42MDYgQzE2OS40LDEzLjM4MiAxNjkuNjg1LDEzLjMwNiAxNjkuOTA5LDEzLjQzNSBMMTk1LjczNCwyOC4zNDUgQzE5NS44NzksMjguNDI4IDE5NS45NjgsMjguNTgzIDE5NS45NjgsMjguNzUgQzE5NS45NjgsMjguOTE2IDE5NS44NzksMjkuMDcxIDE5NS43MzQsMjkuMTU0IEwxOTIuNjUzLDMwLjkzMyBDMTkxLjkzMiwzMS4zNSAxOTAuODksMzEuNTA4IDE4OS45MzUsMzEuMzQ2IEMxODEuOTcyLDI5Ljk5NSAxNzMuNDc4LDI5Ljg2IDE2NS4zNzIsMzAuOTU0IEMxNTMuNjAyLDMyLjU0MyAxNDIuODYsMzUuOTkzIDEzNC4zMDcsNDAuOTMxIEMxMjUuNzkzLDQ1Ljg0NyAxMTkuODUxLDUyLjAwNCAxMTcuMTI0LDU4LjczNiBDMTE1LjI3LDYzLjMxNCAxMTUuNTAxLDY4LjExMiAxMTcuNzksNzIuNjExIEMxMTguMTYsNzMuMzM2IDExNy44NDUsNzQuMTI0IDExNi45OSw3NC42MTcgTDExMy45MDksNzYuMzk3IEMxMTMuODM2LDc2LjQzOCAxMTMuNzU2LDc2LjQ1OSAxMTMuNjc1LDc2LjQ1OSIgaWQ9IkZpbGwtMjQiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTUzLjMxNiwyMS4yNzkgQzE1MC45MDMsMjEuMjc5IDE0OC40OTUsMjAuNzUxIDE0Ni42NjQsMTkuNjkzIEMxNDQuODQ2LDE4LjY0NCAxNDMuODQ0LDE3LjIzMiAxNDMuODQ0LDE1LjcxOCBDMTQzLjg0NCwxNC4xOTEgMTQ0Ljg2LDEyLjc2MyAxNDYuNzA1LDExLjY5OCBMMTU2LjE5OCw2LjA5MSBDMTU2LjMwOSw2LjAyNSAxNTYuNDUyLDYuMDYyIDE1Ni41MTgsNi4xNzMgQzE1Ni41ODMsNi4yODQgMTU2LjU0Nyw2LjQyNyAxNTYuNDM2LDYuNDkzIEwxNDYuOTQsMTIuMTAyIEMxNDUuMjQ0LDEzLjA4MSAxNDQuMzEyLDE0LjM2NSAxNDQuMzEyLDE1LjcxOCBDMTQ0LjMxMiwxNy4wNTggMTQ1LjIzLDE4LjMyNiAxNDYuODk3LDE5LjI4OSBDMTUwLjQ0NiwyMS4zMzggMTU2LjI0LDIxLjMyNyAxNTkuODExLDE5LjI2NSBMMTY5LjU1OSwxMy42MzcgQzE2OS42NywxMy41NzMgMTY5LjgxMywxMy42MTEgMTY5Ljg3OCwxMy43MjMgQzE2OS45NDMsMTMuODM0IDE2OS45MDQsMTMuOTc3IDE2OS43OTMsMTQuMDQyIEwxNjAuMDQ1LDE5LjY3IEMxNTguMTg3LDIwLjc0MiAxNTUuNzQ5LDIxLjI3OSAxNTMuMzE2LDIxLjI3OSIgaWQ9IkZpbGwtMjUiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEzLjY3NSw3NS45OTIgTDY3Ljc2Miw0OS40ODQiIGlkPSJGaWxsLTI2IiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTExMy42NzUsNzYuMzQyIEMxMTMuNjE1LDc2LjM0MiAxMTMuNTU1LDc2LjMyNyAxMTMuNSw3Ni4yOTUgTDY3LjU4Nyw0OS43ODcgQzY3LjQxOSw0OS42OSA2Ny4zNjIsNDkuNDc2IDY3LjQ1OSw0OS4zMDkgQzY3LjU1Niw0OS4xNDEgNjcuNzcsNDkuMDgzIDY3LjkzNyw0OS4xOCBMMTEzLjg1LDc1LjY4OCBDMTE0LjAxOCw3NS43ODUgMTE0LjA3NSw3NiAxMTMuOTc4LDc2LjE2NyBDMTEzLjkxNCw3Ni4yNzkgMTEzLjc5Niw3Ni4zNDIgMTEzLjY3NSw3Ni4zNDIiIGlkPSJGaWxsLTI3IiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTY3Ljc2Miw0OS40ODQgTDY3Ljc2MiwxMDMuNDg1IEM2Ny43NjIsMTA0LjU3NSA2OC41MzIsMTA1LjkwMyA2OS40ODIsMTA2LjQ1MiBMMTExLjk1NSwxMzAuOTczIEMxMTIuOTA1LDEzMS41MjIgMTEzLjY3NSwxMzEuMDgzIDExMy42NzUsMTI5Ljk5MyBMMTEzLjY3NSw3NS45OTIiIGlkPSJGaWxsLTI4IiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTExMi43MjcsMTMxLjU2MSBDMTEyLjQzLDEzMS41NjEgMTEyLjEwNywxMzEuNDY2IDExMS43OCwxMzEuMjc2IEw2OS4zMDcsMTA2Ljc1NSBDNjguMjQ0LDEwNi4xNDIgNjcuNDEyLDEwNC43MDUgNjcuNDEyLDEwMy40ODUgTDY3LjQxMiw0OS40ODQgQzY3LjQxMiw0OS4yOSA2Ny41NjksNDkuMTM0IDY3Ljc2Miw0OS4xMzQgQzY3Ljk1Niw0OS4xMzQgNjguMTEzLDQ5LjI5IDY4LjExMyw0OS40ODQgTDY4LjExMywxMDMuNDg1IEM2OC4xMTMsMTA0LjQ0NSA2OC44MiwxMDUuNjY1IDY5LjY1NywxMDYuMTQ4IEwxMTIuMTMsMTMwLjY3IEMxMTIuNDc0LDEzMC44NjggMTEyLjc5MSwxMzAuOTEzIDExMywxMzAuNzkyIEMxMTMuMjA2LDEzMC42NzMgMTEzLjMyNSwxMzAuMzgxIDExMy4zMjUsMTI5Ljk5MyBMMTEzLjMyNSw3NS45OTIgQzExMy4zMjUsNzUuNzk4IDExMy40ODIsNzUuNjQxIDExMy42NzUsNzUuNjQxIEMxMTMuODY5LDc1LjY0MSAxMTQuMDI1LDc1Ljc5OCAxMTQuMDI1LDc1Ljk5MiBMMTE0LjAyNSwxMjkuOTkzIEMxMTQuMDI1LDEzMC42NDggMTEzLjc4NiwxMzEuMTQ3IDExMy4zNSwxMzEuMzk5IEMxMTMuMTYyLDEzMS41MDcgMTEyLjk1MiwxMzEuNTYxIDExMi43MjcsMTMxLjU2MSIgaWQ9IkZpbGwtMjkiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEyLjg2LDQwLjUxMiBDMTEyLjg2LDQwLjUxMiAxMTIuODYsNDAuNTEyIDExMi44NTksNDAuNTEyIEMxMTAuNTQxLDQwLjUxMiAxMDguMzYsMzkuOTkgMTA2LjcxNywzOS4wNDEgQzEwNS4wMTIsMzguMDU3IDEwNC4wNzQsMzYuNzI2IDEwNC4wNzQsMzUuMjkyIEMxMDQuMDc0LDMzLjg0NyAxMDUuMDI2LDMyLjUwMSAxMDYuNzU0LDMxLjUwNCBMMTE4Ljc5NSwyNC41NTEgQzEyMC40NjMsMjMuNTg5IDEyMi42NjksMjMuMDU4IDEyNS4wMDcsMjMuMDU4IEMxMjcuMzI1LDIzLjA1OCAxMjkuNTA2LDIzLjU4MSAxMzEuMTUsMjQuNTMgQzEzMi44NTQsMjUuNTE0IDEzMy43OTMsMjYuODQ1IDEzMy43OTMsMjguMjc4IEMxMzMuNzkzLDI5LjcyNCAxMzIuODQxLDMxLjA2OSAxMzEuMTEzLDMyLjA2NyBMMTE5LjA3MSwzOS4wMTkgQzExNy40MDMsMzkuOTgyIDExNS4xOTcsNDAuNTEyIDExMi44Niw0MC41MTIgTDExMi44Niw0MC41MTIgWiBNMTI1LjAwNywyMy43NTkgQzEyMi43OSwyMy43NTkgMTIwLjcwOSwyNC4yNTYgMTE5LjE0NiwyNS4xNTggTDEwNy4xMDQsMzIuMTEgQzEwNS42MDIsMzIuOTc4IDEwNC43NzQsMzQuMTA4IDEwNC43NzQsMzUuMjkyIEMxMDQuNzc0LDM2LjQ2NSAxMDUuNTg5LDM3LjU4MSAxMDcuMDY3LDM4LjQzNCBDMTA4LjYwNSwzOS4zMjMgMTEwLjY2MywzOS44MTIgMTEyLjg1OSwzOS44MTIgTDExMi44NiwzOS44MTIgQzExNS4wNzYsMzkuODEyIDExNy4xNTgsMzkuMzE1IDExOC43MjEsMzguNDEzIEwxMzAuNzYyLDMxLjQ2IEMxMzIuMjY0LDMwLjU5MyAxMzMuMDkyLDI5LjQ2MyAxMzMuMDkyLDI4LjI3OCBDMTMzLjA5MiwyNy4xMDYgMTMyLjI3OCwyNS45OSAxMzAuOCwyNS4xMzYgQzEyOS4yNjEsMjQuMjQ4IDEyNy4yMDQsMjMuNzU5IDEyNS4wMDcsMjMuNzU5IEwxMjUuMDA3LDIzLjc1OSBaIiBpZD0iRmlsbC0zMCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNjUuNjMsMTYuMjE5IEwxNTkuODk2LDE5LjUzIEMxNTYuNzI5LDIxLjM1OCAxNTEuNjEsMjEuMzY3IDE0OC40NjMsMTkuNTUgQzE0NS4zMTYsMTcuNzMzIDE0NS4zMzIsMTQuNzc4IDE0OC40OTksMTIuOTQ5IEwxNTQuMjMzLDkuNjM5IEwxNjUuNjMsMTYuMjE5IiBpZD0iRmlsbC0zMSIgZmlsbD0iI0ZBRkFGQSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNTQuMjMzLDEwLjQ0OCBMMTY0LjIyOCwxNi4yMTkgTDE1OS41NDYsMTguOTIzIEMxNTguMTEyLDE5Ljc1IDE1Ni4xOTQsMjAuMjA2IDE1NC4xNDcsMjAuMjA2IEMxNTIuMTE4LDIwLjIwNiAxNTAuMjI0LDE5Ljc1NyAxNDguODE0LDE4Ljk0MyBDMTQ3LjUyNCwxOC4xOTkgMTQ2LjgxNCwxNy4yNDkgMTQ2LjgxNCwxNi4yNjkgQzE0Ni44MTQsMTUuMjc4IDE0Ny41MzcsMTQuMzE0IDE0OC44NSwxMy41NTYgTDE1NC4yMzMsMTAuNDQ4IE0xNTQuMjMzLDkuNjM5IEwxNDguNDk5LDEyLjk0OSBDMTQ1LjMzMiwxNC43NzggMTQ1LjMxNiwxNy43MzMgMTQ4LjQ2MywxOS41NSBDMTUwLjAzMSwyMC40NTUgMTUyLjA4NiwyMC45MDcgMTU0LjE0NywyMC45MDcgQzE1Ni4yMjQsMjAuOTA3IDE1OC4zMDYsMjAuNDQ3IDE1OS44OTYsMTkuNTMgTDE2NS42MywxNi4yMTkgTDE1NC4yMzMsOS42MzkiIGlkPSJGaWxsLTMyIiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0NS40NDUsNzIuNjY3IEwxNDUuNDQ1LDcyLjY2NyBDMTQzLjY3Miw3Mi42NjcgMTQyLjIwNCw3MS44MTcgMTQxLjIwMiw3MC40MjIgQzE0MS4xMzUsNzAuMzMgMTQxLjE0NSw3MC4xNDcgMTQxLjIyNSw3MC4wNjYgQzE0MS4zMDUsNjkuOTg1IDE0MS40MzIsNjkuOTQ2IDE0MS41MjUsNzAuMDExIEMxNDIuMzA2LDcwLjU1OSAxNDMuMjMxLDcwLjgyMyAxNDQuMjc2LDcwLjgyMiBDMTQ1LjU5OCw3MC44MjIgMTQ3LjAzLDcwLjM3NiAxNDguNTMyLDY5LjUwOSBDMTUzLjg0Miw2Ni40NDMgMTU4LjE2Myw1OC45ODcgMTU4LjE2Myw1Mi44OTQgQzE1OC4xNjMsNTAuOTY3IDE1Ny43MjEsNDkuMzMyIDE1Ni44ODQsNDguMTY4IEMxNTYuODE4LDQ4LjA3NiAxNTYuODI4LDQ3Ljk0OCAxNTYuOTA4LDQ3Ljg2NyBDMTU2Ljk4OCw0Ny43ODYgMTU3LjExNCw0Ny43NzQgMTU3LjIwOCw0Ny44NCBDMTU4Ljg3OCw0OS4wMTIgMTU5Ljc5OCw1MS4yMiAxNTkuNzk4LDU0LjA1OSBDMTU5Ljc5OCw2MC4zMDEgMTU1LjM3Myw2OC4wNDYgMTQ5LjkzMyw3MS4xODYgQzE0OC4zNiw3Mi4wOTQgMTQ2Ljg1LDcyLjY2NyAxNDUuNDQ1LDcyLjY2NyBMMTQ1LjQ0NSw3Mi42NjcgWiBNMTQyLjQ3Niw3MSBDMTQzLjI5LDcxLjY1MSAxNDQuMjk2LDcyLjAwMiAxNDUuNDQ1LDcyLjAwMiBDMTQ2Ljc2Nyw3Mi4wMDIgMTQ4LjE5OCw3MS41NSAxNDkuNyw3MC42ODIgQzE1NS4wMSw2Ny42MTcgMTU5LjMzMSw2MC4xNTkgMTU5LjMzMSw1NC4wNjUgQzE1OS4zMzEsNTIuMDg1IDE1OC44NjgsNTAuNDM1IDE1OC4wMDYsNDkuMjcyIEMxNTguNDE3LDUwLjMwNyAxNTguNjMsNTEuNTMyIDE1OC42Myw1Mi44OTIgQzE1OC42Myw1OS4xMzQgMTU0LjIwNSw2Ni43NjcgMTQ4Ljc2NSw2OS45MDcgQzE0Ny4xOTIsNzAuODE2IDE0NS42ODEsNzEuMjgzIDE0NC4yNzYsNzEuMjgzIEMxNDMuNjM0LDcxLjI4MyAxNDMuMDMzLDcxLjE5MiAxNDIuNDc2LDcxIEwxNDIuNDc2LDcxIFoiIGlkPSJGaWxsLTMzIiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0OC42NDgsNjkuNzA0IEMxNTQuMDMyLDY2LjU5NiAxNTguMzk2LDU5LjA2OCAxNTguMzk2LDUyLjg5MSBDMTU4LjM5Niw1MC44MzkgMTU3LjkxMyw0OS4xOTggMTU3LjA3NCw0OC4wMyBDMTU1LjI4OSw0Ni43NzggMTUyLjY5OSw0Ni44MzYgMTQ5LjgxNiw0OC41MDEgQzE0NC40MzMsNTEuNjA5IDE0MC4wNjgsNTkuMTM3IDE0MC4wNjgsNjUuMzE0IEMxNDAuMDY4LDY3LjM2NSAxNDAuNTUyLDY5LjAwNiAxNDEuMzkxLDcwLjE3NCBDMTQzLjE3Niw3MS40MjcgMTQ1Ljc2NSw3MS4zNjkgMTQ4LjY0OCw2OS43MDQiIGlkPSJGaWxsLTM0IiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0NC4yNzYsNzEuMjc2IEwxNDQuMjc2LDcxLjI3NiBDMTQzLjEzMyw3MS4yNzYgMTQyLjExOCw3MC45NjkgMTQxLjI1Nyw3MC4zNjUgQzE0MS4yMzYsNzAuMzUxIDE0MS4yMTcsNzAuMzMyIDE0MS4yMDIsNzAuMzExIEMxNDAuMzA3LDY5LjA2NyAxMzkuODM1LDY3LjMzOSAxMzkuODM1LDY1LjMxNCBDMTM5LjgzNSw1OS4wNzMgMTQ0LjI2LDUxLjQzOSAxNDkuNyw0OC4yOTggQzE1MS4yNzMsNDcuMzkgMTUyLjc4NCw0Ni45MjkgMTU0LjE4OSw0Ni45MjkgQzE1NS4zMzIsNDYuOTI5IDE1Ni4zNDcsNDcuMjM2IDE1Ny4yMDgsNDcuODM5IEMxNTcuMjI5LDQ3Ljg1NCAxNTcuMjQ4LDQ3Ljg3MyAxNTcuMjYzLDQ3Ljg5NCBDMTU4LjE1Nyw0OS4xMzggMTU4LjYzLDUwLjg2NSAxNTguNjMsNTIuODkxIEMxNTguNjMsNTkuMTMyIDE1NC4yMDUsNjYuNzY2IDE0OC43NjUsNjkuOTA3IEMxNDcuMTkyLDcwLjgxNSAxNDUuNjgxLDcxLjI3NiAxNDQuMjc2LDcxLjI3NiBMMTQ0LjI3Niw3MS4yNzYgWiBNMTQxLjU1OCw3MC4xMDQgQzE0Mi4zMzEsNzAuNjM3IDE0My4yNDUsNzEuMDA1IDE0NC4yNzYsNzEuMDA1IEMxNDUuNTk4LDcxLjAwNSAxNDcuMDMsNzAuNDY3IDE0OC41MzIsNjkuNiBDMTUzLjg0Miw2Ni41MzQgMTU4LjE2Myw1OS4wMzMgMTU4LjE2Myw1Mi45MzkgQzE1OC4xNjMsNTEuMDMxIDE1Ny43MjksNDkuMzg1IDE1Ni45MDcsNDguMjIzIEMxNTYuMTMzLDQ3LjY5MSAxNTUuMjE5LDQ3LjQwOSAxNTQuMTg5LDQ3LjQwOSBDMTUyLjg2Nyw0Ny40MDkgMTUxLjQzNSw0Ny44NDIgMTQ5LjkzMyw0OC43MDkgQzE0NC42MjMsNTEuNzc1IDE0MC4zMDIsNTkuMjczIDE0MC4zMDIsNjUuMzY2IEMxNDAuMzAyLDY3LjI3NiAxNDAuNzM2LDY4Ljk0MiAxNDEuNTU4LDcwLjEwNCBMMTQxLjU1OCw3MC4xMDQgWiIgaWQ9IkZpbGwtMzUiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTUwLjcyLDY1LjM2MSBMMTUwLjM1Nyw2NS4wNjYgQzE1MS4xNDcsNjQuMDkyIDE1MS44NjksNjMuMDQgMTUyLjUwNSw2MS45MzggQzE1My4zMTMsNjAuNTM5IDE1My45NzgsNTkuMDY3IDE1NC40ODIsNTcuNTYzIEwxNTQuOTI1LDU3LjcxMiBDMTU0LjQxMiw1OS4yNDUgMTUzLjczMyw2MC43NDUgMTUyLjkxLDYyLjE3MiBDMTUyLjI2Miw2My4yOTUgMTUxLjUyNSw2NC4zNjggMTUwLjcyLDY1LjM2MSIgaWQ9IkZpbGwtMzYiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTE1LjkxNyw4NC41MTQgTDExNS41NTQsODQuMjIgQzExNi4zNDQsODMuMjQ1IDExNy4wNjYsODIuMTk0IDExNy43MDIsODEuMDkyIEMxMTguNTEsNzkuNjkyIDExOS4xNzUsNzguMjIgMTE5LjY3OCw3Ni43MTcgTDEyMC4xMjEsNzYuODY1IEMxMTkuNjA4LDc4LjM5OCAxMTguOTMsNzkuODk5IDExOC4xMDYsODEuMzI2IEMxMTcuNDU4LDgyLjQ0OCAxMTYuNzIyLDgzLjUyMSAxMTUuOTE3LDg0LjUxNCIgaWQ9IkZpbGwtMzciIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTE0LDEzMC40NzYgTDExNCwxMzAuMDA4IEwxMTQsNzYuMDUyIEwxMTQsNzUuNTg0IEwxMTQsNzYuMDUyIEwxMTQsMTMwLjAwOCBMMTE0LDEzMC40NzYiIGlkPSJGaWxsLTM4IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICA8ZyBpZD0iSW1wb3J0ZWQtTGF5ZXJzLUNvcHkiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDYyLjAwMDAwMCwgMC4wMDAwMDApIiBza2V0Y2g6dHlwZT0iTVNTaGFwZUdyb3VwIj4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTkuODIyLDM3LjQ3NCBDMTkuODM5LDM3LjMzOSAxOS43NDcsMzcuMTk0IDE5LjU1NSwzNy4wODIgQzE5LjIyOCwzNi44OTQgMTguNzI5LDM2Ljg3MiAxOC40NDYsMzcuMDM3IEwxMi40MzQsNDAuNTA4IEMxMi4zMDMsNDAuNTg0IDEyLjI0LDQwLjY4NiAxMi4yNDMsNDAuNzkzIEMxMi4yNDUsNDAuOTI1IDEyLjI0NSw0MS4yNTQgMTIuMjQ1LDQxLjM3MSBMMTIuMjQ1LDQxLjQxNCBMMTIuMjM4LDQxLjU0MiBDOC4xNDgsNDMuODg3IDUuNjQ3LDQ1LjMyMSA1LjY0Nyw0NS4zMjEgQzUuNjQ2LDQ1LjMyMSAzLjU3LDQ2LjM2NyAyLjg2LDUwLjUxMyBDMi44Niw1MC41MTMgMS45NDgsNTcuNDc0IDEuOTYyLDcwLjI1OCBDMS45NzcsODIuODI4IDIuNTY4LDg3LjMyOCAzLjEyOSw5MS42MDkgQzMuMzQ5LDkzLjI5MyA2LjEzLDkzLjczNCA2LjEzLDkzLjczNCBDNi40NjEsOTMuNzc0IDYuODI4LDkzLjcwNyA3LjIxLDkzLjQ4NiBMODIuNDgzLDQ5LjkzNSBDODQuMjkxLDQ4Ljg2NiA4NS4xNSw0Ni4yMTYgODUuNTM5LDQzLjY1MSBDODYuNzUyLDM1LjY2MSA4Ny4yMTQsMTAuNjczIDg1LjI2NCwzLjc3MyBDODUuMDY4LDMuMDggODQuNzU0LDIuNjkgODQuMzk2LDIuNDkxIEw4Mi4zMSwxLjcwMSBDODEuNTgzLDEuNzI5IDgwLjg5NCwyLjE2OCA4MC43NzYsMi4yMzYgQzgwLjYzNiwyLjMxNyA0MS44MDcsMjQuNTg1IDIwLjAzMiwzNy4wNzIgTDE5LjgyMiwzNy40NzQiIGlkPSJGaWxsLTEiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNODIuMzExLDEuNzAxIEw4NC4zOTYsMi40OTEgQzg0Ljc1NCwyLjY5IDg1LjA2OCwzLjA4IDg1LjI2NCwzLjc3MyBDODcuMjEzLDEwLjY3MyA4Ni43NTEsMzUuNjYgODUuNTM5LDQzLjY1MSBDODUuMTQ5LDQ2LjIxNiA4NC4yOSw0OC44NjYgODIuNDgzLDQ5LjkzNSBMNy4yMSw5My40ODYgQzYuODk3LDkzLjY2NyA2LjU5NSw5My43NDQgNi4zMTQsOTMuNzQ0IEw2LjEzMSw5My43MzMgQzYuMTMxLDkzLjczNCAzLjM0OSw5My4yOTMgMy4xMjgsOTEuNjA5IEMyLjU2OCw4Ny4zMjcgMS45NzcsODIuODI4IDEuOTYzLDcwLjI1OCBDMS45NDgsNTcuNDc0IDIuODYsNTAuNTEzIDIuODYsNTAuNTEzIEMzLjU3LDQ2LjM2NyA1LjY0Nyw0NS4zMjEgNS42NDcsNDUuMzIxIEM1LjY0Nyw0NS4zMjEgOC4xNDgsNDMuODg3IDEyLjIzOCw0MS41NDIgTDEyLjI0NSw0MS40MTQgTDEyLjI0NSw0MS4zNzEgQzEyLjI0NSw0MS4yNTQgMTIuMjQ1LDQwLjkyNSAxMi4yNDMsNDAuNzkzIEMxMi4yNCw0MC42ODYgMTIuMzAyLDQwLjU4MyAxMi40MzQsNDAuNTA4IEwxOC40NDYsMzcuMDM2IEMxOC41NzQsMzYuOTYyIDE4Ljc0NiwzNi45MjYgMTguOTI3LDM2LjkyNiBDMTkuMTQ1LDM2LjkyNiAxOS4zNzYsMzYuOTc5IDE5LjU1NCwzNy4wODIgQzE5Ljc0NywzNy4xOTQgMTkuODM5LDM3LjM0IDE5LjgyMiwzNy40NzQgTDIwLjAzMywzNy4wNzIgQzQxLjgwNiwyNC41ODUgODAuNjM2LDIuMzE4IDgwLjc3NywyLjIzNiBDODAuODk0LDIuMTY4IDgxLjU4MywxLjcyOSA4Mi4zMTEsMS43MDEgTTgyLjMxMSwwLjcwNCBMODIuMjcyLDAuNzA1IEM4MS42NTQsMC43MjggODAuOTg5LDAuOTQ5IDgwLjI5OCwxLjM2MSBMODAuMjc3LDEuMzczIEM4MC4xMjksMS40NTggNTkuNzY4LDEzLjEzNSAxOS43NTgsMzYuMDc5IEMxOS41LDM1Ljk4MSAxOS4yMTQsMzUuOTI5IDE4LjkyNywzNS45MjkgQzE4LjU2MiwzNS45MjkgMTguMjIzLDM2LjAxMyAxNy45NDcsMzYuMTczIEwxMS45MzUsMzkuNjQ0IEMxMS40OTMsMzkuODk5IDExLjIzNiw0MC4zMzQgMTEuMjQ2LDQwLjgxIEwxMS4yNDcsNDAuOTYgTDUuMTY3LDQ0LjQ0NyBDNC43OTQsNDQuNjQ2IDIuNjI1LDQ1Ljk3OCAxLjg3Nyw1MC4zNDUgTDEuODcxLDUwLjM4NCBDMS44NjIsNTAuNDU0IDAuOTUxLDU3LjU1NyAwLjk2NSw3MC4yNTkgQzAuOTc5LDgyLjg3OSAxLjU2OCw4Ny4zNzUgMi4xMzcsOTEuNzI0IEwyLjEzOSw5MS43MzkgQzIuNDQ3LDk0LjA5NCA1LjYxNCw5NC42NjIgNS45NzUsOTQuNzE5IEw2LjAwOSw5NC43MjMgQzYuMTEsOTQuNzM2IDYuMjEzLDk0Ljc0MiA2LjMxNCw5NC43NDIgQzYuNzksOTQuNzQyIDcuMjYsOTQuNjEgNy43MSw5NC4zNSBMODIuOTgzLDUwLjc5OCBDODQuNzk0LDQ5LjcyNyA4NS45ODIsNDcuMzc1IDg2LjUyNSw0My44MDEgQzg3LjcxMSwzNS45ODcgODguMjU5LDEwLjcwNSA4Ni4yMjQsMy41MDIgQzg1Ljk3MSwyLjYwOSA4NS41MiwxLjk3NSA4NC44ODEsMS42MiBMODQuNzQ5LDEuNTU4IEw4Mi42NjQsMC43NjkgQzgyLjU1MSwwLjcyNSA4Mi40MzEsMC43MDQgODIuMzExLDAuNzA0IiBpZD0iRmlsbC0yIiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTY2LjI2NywxMS41NjUgTDY3Ljc2MiwxMS45OTkgTDExLjQyMyw0NC4zMjUiIGlkPSJGaWxsLTMiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTIuMjAyLDkwLjU0NSBDMTIuMDI5LDkwLjU0NSAxMS44NjIsOTAuNDU1IDExLjc2OSw5MC4yOTUgQzExLjYzMiw5MC4wNTcgMTEuNzEzLDg5Ljc1MiAxMS45NTIsODkuNjE0IEwzMC4zODksNzguOTY5IEMzMC42MjgsNzguODMxIDMwLjkzMyw3OC45MTMgMzEuMDcxLDc5LjE1MiBDMzEuMjA4LDc5LjM5IDMxLjEyNyw3OS42OTYgMzAuODg4LDc5LjgzMyBMMTIuNDUxLDkwLjQ3OCBMMTIuMjAyLDkwLjU0NSIgaWQ9IkZpbGwtNCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMy43NjQsNDIuNjU0IEwxMy42NTYsNDIuNTkyIEwxMy43MDIsNDIuNDIxIEwxOC44MzcsMzkuNDU3IEwxOS4wMDcsMzkuNTAyIEwxOC45NjIsMzkuNjczIEwxMy44MjcsNDIuNjM3IEwxMy43NjQsNDIuNjU0IiBpZD0iRmlsbC01IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTguNTIsOTAuMzc1IEw4LjUyLDQ2LjQyMSBMOC41ODMsNDYuMzg1IEw3NS44NCw3LjU1NCBMNzUuODQsNTEuNTA4IEw3NS43NzgsNTEuNTQ0IEw4LjUyLDkwLjM3NSBMOC41Miw5MC4zNzUgWiBNOC43Nyw0Ni41NjQgTDguNzcsODkuOTQ0IEw3NS41OTEsNTEuMzY1IEw3NS41OTEsNy45ODUgTDguNzcsNDYuNTY0IEw4Ljc3LDQ2LjU2NCBaIiBpZD0iRmlsbC02IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTI0Ljk4Niw4My4xODIgQzI0Ljc1Niw4My4zMzEgMjQuMzc0LDgzLjU2NiAyNC4xMzcsODMuNzA1IEwxMi42MzIsOTAuNDA2IEMxMi4zOTUsOTAuNTQ1IDEyLjQyNiw5MC42NTggMTIuNyw5MC42NTggTDEzLjI2NSw5MC42NTggQzEzLjU0LDkwLjY1OCAxMy45NTgsOTAuNTQ1IDE0LjE5NSw5MC40MDYgTDI1LjcsODMuNzA1IEMyNS45MzcsODMuNTY2IDI2LjEyOCw4My40NTIgMjYuMTI1LDgzLjQ0OSBDMjYuMTIyLDgzLjQ0NyAyNi4xMTksODMuMjIgMjYuMTE5LDgyLjk0NiBDMjYuMTE5LDgyLjY3MiAyNS45MzEsODIuNTY5IDI1LjcwMSw4Mi43MTkgTDI0Ljk4Niw4My4xODIiIGlkPSJGaWxsLTciIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTMuMjY2LDkwLjc4MiBMMTIuNyw5MC43ODIgQzEyLjUsOTAuNzgyIDEyLjM4NCw5MC43MjYgMTIuMzU0LDkwLjYxNiBDMTIuMzI0LDkwLjUwNiAxMi4zOTcsOTAuMzk5IDEyLjU2OSw5MC4yOTkgTDI0LjA3NCw4My41OTcgQzI0LjMxLDgzLjQ1OSAyNC42ODksODMuMjI2IDI0LjkxOCw4My4wNzggTDI1LjYzMyw4Mi42MTQgQzI1LjcyMyw4Mi41NTUgMjUuODEzLDgyLjUyNSAyNS44OTksODIuNTI1IEMyNi4wNzEsODIuNTI1IDI2LjI0NCw4Mi42NTUgMjYuMjQ0LDgyLjk0NiBDMjYuMjQ0LDgzLjE2IDI2LjI0NSw4My4zMDkgMjYuMjQ3LDgzLjM4MyBMMjYuMjUzLDgzLjM4NyBMMjYuMjQ5LDgzLjQ1NiBDMjYuMjQ2LDgzLjUzMSAyNi4yNDYsODMuNTMxIDI1Ljc2Myw4My44MTIgTDE0LjI1OCw5MC41MTQgQzE0LDkwLjY2NSAxMy41NjQsOTAuNzgyIDEzLjI2Niw5MC43ODIgTDEzLjI2Niw5MC43ODIgWiBNMTIuNjY2LDkwLjUzMiBMMTIuNyw5MC41MzMgTDEzLjI2Niw5MC41MzMgQzEzLjUxOCw5MC41MzMgMTMuOTE1LDkwLjQyNSAxNC4xMzIsOTAuMjk5IEwyNS42MzcsODMuNTk3IEMyNS44MDUsODMuNDk5IDI1LjkzMSw4My40MjQgMjUuOTk4LDgzLjM4MyBDMjUuOTk0LDgzLjI5OSAyNS45OTQsODMuMTY1IDI1Ljk5NCw4Mi45NDYgTDI1Ljg5OSw4Mi43NzUgTDI1Ljc2OCw4Mi44MjQgTDI1LjA1NCw4My4yODcgQzI0LjgyMiw4My40MzcgMjQuNDM4LDgzLjY3MyAyNC4yLDgzLjgxMiBMMTIuNjk1LDkwLjUxNCBMMTIuNjY2LDkwLjUzMiBMMTIuNjY2LDkwLjUzMiBaIiBpZD0iRmlsbC04IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTEzLjI2Niw4OS44NzEgTDEyLjcsODkuODcxIEMxMi41LDg5Ljg3MSAxMi4zODQsODkuODE1IDEyLjM1NCw4OS43MDUgQzEyLjMyNCw4OS41OTUgMTIuMzk3LDg5LjQ4OCAxMi41NjksODkuMzg4IEwyNC4wNzQsODIuNjg2IEMyNC4zMzIsODIuNTM1IDI0Ljc2OCw4Mi40MTggMjUuMDY3LDgyLjQxOCBMMjUuNjMyLDgyLjQxOCBDMjUuODMyLDgyLjQxOCAyNS45NDgsODIuNDc0IDI1Ljk3OCw4Mi41ODQgQzI2LjAwOCw4Mi42OTQgMjUuOTM1LDgyLjgwMSAyNS43NjMsODIuOTAxIEwxNC4yNTgsODkuNjAzIEMxNCw4OS43NTQgMTMuNTY0LDg5Ljg3MSAxMy4yNjYsODkuODcxIEwxMy4yNjYsODkuODcxIFogTTEyLjY2Niw4OS42MjEgTDEyLjcsODkuNjIyIEwxMy4yNjYsODkuNjIyIEMxMy41MTgsODkuNjIyIDEzLjkxNSw4OS41MTUgMTQuMTMyLDg5LjM4OCBMMjUuNjM3LDgyLjY4NiBMMjUuNjY3LDgyLjY2OCBMMjUuNjMyLDgyLjY2NyBMMjUuMDY3LDgyLjY2NyBDMjQuODE1LDgyLjY2NyAyNC40MTgsODIuNzc1IDI0LjIsODIuOTAxIEwxMi42OTUsODkuNjAzIEwxMi42NjYsODkuNjIxIEwxMi42NjYsODkuNjIxIFoiIGlkPSJGaWxsLTkiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTIuMzcsOTAuODAxIEwxMi4zNyw4OS41NTQgTDEyLjM3LDkwLjgwMSIgaWQ9IkZpbGwtMTAiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNi4xMyw5My45MDEgQzUuMzc5LDkzLjgwOCA0LjgxNiw5My4xNjQgNC42OTEsOTIuNTI1IEMzLjg2LDg4LjI4NyAzLjU0LDgzLjc0MyAzLjUyNiw3MS4xNzMgQzMuNTExLDU4LjM4OSA0LjQyMyw1MS40MjggNC40MjMsNTEuNDI4IEM1LjEzNCw0Ny4yODIgNy4yMSw0Ni4yMzYgNy4yMSw0Ni4yMzYgQzcuMjEsNDYuMjM2IDgxLjY2NywzLjI1IDgyLjA2OSwzLjAxNyBDODIuMjkyLDIuODg4IDg0LjU1NiwxLjQzMyA4NS4yNjQsMy45NCBDODcuMjE0LDEwLjg0IDg2Ljc1MiwzNS44MjcgODUuNTM5LDQzLjgxOCBDODUuMTUsNDYuMzgzIDg0LjI5MSw0OS4wMzMgODIuNDgzLDUwLjEwMSBMNy4yMSw5My42NTMgQzYuODI4LDkzLjg3NCA2LjQ2MSw5My45NDEgNi4xMyw5My45MDEgQzYuMTMsOTMuOTAxIDMuMzQ5LDkzLjQ2IDMuMTI5LDkxLjc3NiBDMi41NjgsODcuNDk1IDEuOTc3LDgyLjk5NSAxLjk2Miw3MC40MjUgQzEuOTQ4LDU3LjY0MSAyLjg2LDUwLjY4IDIuODYsNTAuNjggQzMuNTcsNDYuNTM0IDUuNjQ3LDQ1LjQ4OSA1LjY0Nyw0NS40ODkgQzUuNjQ2LDQ1LjQ4OSA4LjA2NSw0NC4wOTIgMTIuMjQ1LDQxLjY3OSBMMTMuMTE2LDQxLjU2IEwxOS43MTUsMzcuNzMgTDE5Ljc2MSwzNy4yNjkgTDYuMTMsOTMuOTAxIiBpZD0iRmlsbC0xMSIgZmlsbD0iI0ZBRkFGQSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik02LjMxNyw5NC4xNjEgTDYuMTAyLDk0LjE0OCBMNi4xMDEsOTQuMTQ4IEw1Ljg1Nyw5NC4xMDEgQzUuMTM4LDkzLjk0NSAzLjA4NSw5My4zNjUgMi44ODEsOTEuODA5IEMyLjMxMyw4Ny40NjkgMS43MjcsODIuOTk2IDEuNzEzLDcwLjQyNSBDMS42OTksNTcuNzcxIDIuNjA0LDUwLjcxOCAyLjYxMyw1MC42NDggQzMuMzM4LDQ2LjQxNyA1LjQ0NSw0NS4zMSA1LjUzNSw0NS4yNjYgTDEyLjE2Myw0MS40MzkgTDEzLjAzMyw0MS4zMiBMMTkuNDc5LDM3LjU3OCBMMTkuNTEzLDM3LjI0NCBDMTkuNTI2LDM3LjEwNyAxOS42NDcsMzcuMDA4IDE5Ljc4NiwzNy4wMjEgQzE5LjkyMiwzNy4wMzQgMjAuMDIzLDM3LjE1NiAyMC4wMDksMzcuMjkzIEwxOS45NSwzNy44ODIgTDEzLjE5OCw0MS44MDEgTDEyLjMyOCw0MS45MTkgTDUuNzcyLDQ1LjcwNCBDNS43NDEsNDUuNzIgMy43ODIsNDYuNzcyIDMuMTA2LDUwLjcyMiBDMy4wOTksNTAuNzgyIDIuMTk4LDU3LjgwOCAyLjIxMiw3MC40MjQgQzIuMjI2LDgyLjk2MyAyLjgwOSw4Ny40MiAzLjM3Myw5MS43MjkgQzMuNDY0LDkyLjQyIDQuMDYyLDkyLjg4MyA0LjY4Miw5My4xODEgQzQuNTY2LDkyLjk4NCA0LjQ4Niw5Mi43NzYgNC40NDYsOTIuNTcyIEMzLjY2NSw4OC41ODggMy4yOTEsODQuMzcgMy4yNzYsNzEuMTczIEMzLjI2Miw1OC41MiA0LjE2Nyw1MS40NjYgNC4xNzYsNTEuMzk2IEM0LjkwMSw0Ny4xNjUgNy4wMDgsNDYuMDU5IDcuMDk4LDQ2LjAxNCBDNy4wOTQsNDYuMDE1IDgxLjU0MiwzLjAzNCA4MS45NDQsMi44MDIgTDgxLjk3MiwyLjc4NSBDODIuODc2LDIuMjQ3IDgzLjY5MiwyLjA5NyA4NC4zMzIsMi4zNTIgQzg0Ljg4NywyLjU3MyA4NS4yODEsMy4wODUgODUuNTA0LDMuODcyIEM4Ny41MTgsMTEgODYuOTY0LDM2LjA5MSA4NS43ODUsNDMuODU1IEM4NS4yNzgsNDcuMTk2IDg0LjIxLDQ5LjM3IDgyLjYxLDUwLjMxNyBMNy4zMzUsOTMuODY5IEM2Ljk5OSw5NC4wNjMgNi42NTgsOTQuMTYxIDYuMzE3LDk0LjE2MSBMNi4zMTcsOTQuMTYxIFogTTYuMTcsOTMuNjU0IEM2LjQ2Myw5My42OSA2Ljc3NCw5My42MTcgNy4wODUsOTMuNDM3IEw4Mi4zNTgsNDkuODg2IEM4NC4xODEsNDguODA4IDg0Ljk2LDQ1Ljk3MSA4NS4yOTIsNDMuNzggQzg2LjQ2NiwzNi4wNDkgODcuMDIzLDExLjA4NSA4NS4wMjQsNC4wMDggQzg0Ljg0NiwzLjM3NyA4NC41NTEsMi45NzYgODQuMTQ4LDIuODE2IEM4My42NjQsMi42MjMgODIuOTgyLDIuNzY0IDgyLjIyNywzLjIxMyBMODIuMTkzLDMuMjM0IEM4MS43OTEsMy40NjYgNy4zMzUsNDYuNDUyIDcuMzM1LDQ2LjQ1MiBDNy4zMDQsNDYuNDY5IDUuMzQ2LDQ3LjUyMSA0LjY2OSw1MS40NzEgQzQuNjYyLDUxLjUzIDMuNzYxLDU4LjU1NiAzLjc3NSw3MS4xNzMgQzMuNzksODQuMzI4IDQuMTYxLDg4LjUyNCA0LjkzNiw5Mi40NzYgQzUuMDI2LDkyLjkzNyA1LjQxMiw5My40NTkgNS45NzMsOTMuNjE1IEM2LjA4Nyw5My42NCA2LjE1OCw5My42NTIgNi4xNjksOTMuNjU0IEw2LjE3LDkzLjY1NCBMNi4xNyw5My42NTQgWiIgaWQ9IkZpbGwtMTIiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNy4zMTcsNjguOTgyIEM3LjgwNiw2OC43MDEgOC4yMDIsNjguOTI2IDguMjAyLDY5LjQ4NyBDOC4yMDIsNzAuMDQ3IDcuODA2LDcwLjczIDcuMzE3LDcxLjAxMiBDNi44MjksNzEuMjk0IDYuNDMzLDcxLjA2OSA2LjQzMyw3MC41MDggQzYuNDMzLDY5Ljk0OCA2LjgyOSw2OS4yNjUgNy4zMTcsNjguOTgyIiBpZD0iRmlsbC0xMyIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik02LjkyLDcxLjEzMyBDNi42MzEsNzEuMTMzIDYuNDMzLDcwLjkwNSA2LjQzMyw3MC41MDggQzYuNDMzLDY5Ljk0OCA2LjgyOSw2OS4yNjUgNy4zMTcsNjguOTgyIEM3LjQ2LDY4LjkgNy41OTUsNjguODYxIDcuNzE0LDY4Ljg2MSBDOC4wMDMsNjguODYxIDguMjAyLDY5LjA5IDguMjAyLDY5LjQ4NyBDOC4yMDIsNzAuMDQ3IDcuODA2LDcwLjczIDcuMzE3LDcxLjAxMiBDNy4xNzQsNzEuMDk0IDcuMDM5LDcxLjEzMyA2LjkyLDcxLjEzMyBNNy43MTQsNjguNjc0IEM3LjU1Nyw2OC42NzQgNy4zOTIsNjguNzIzIDcuMjI0LDY4LjgyMSBDNi42NzYsNjkuMTM4IDYuMjQ2LDY5Ljg3OSA2LjI0Niw3MC41MDggQzYuMjQ2LDcwLjk5NCA2LjUxNyw3MS4zMiA2LjkyLDcxLjMyIEM3LjA3OCw3MS4zMiA3LjI0Myw3MS4yNzEgNy40MTEsNzEuMTc0IEM3Ljk1OSw3MC44NTcgOC4zODksNzAuMTE3IDguMzg5LDY5LjQ4NyBDOC4zODksNjkuMDAxIDguMTE3LDY4LjY3NCA3LjcxNCw2OC42NzQiIGlkPSJGaWxsLTE0IiBmaWxsPSIjODA5N0EyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTYuOTIsNzAuOTQ3IEM2LjY0OSw3MC45NDcgNi42MjEsNzAuNjQgNi42MjEsNzAuNTA4IEM2LjYyMSw3MC4wMTcgNi45ODIsNjkuMzkyIDcuNDExLDY5LjE0NSBDNy41MjEsNjkuMDgyIDcuNjI1LDY5LjA0OSA3LjcxNCw2OS4wNDkgQzcuOTg2LDY5LjA0OSA4LjAxNSw2OS4zNTUgOC4wMTUsNjkuNDg3IEM4LjAxNSw2OS45NzggNy42NTIsNzAuNjAzIDcuMjI0LDcwLjg1MSBDNy4xMTUsNzAuOTE0IDcuMDEsNzAuOTQ3IDYuOTIsNzAuOTQ3IE03LjcxNCw2OC44NjEgQzcuNTk1LDY4Ljg2MSA3LjQ2LDY4LjkgNy4zMTcsNjguOTgyIEM2LjgyOSw2OS4yNjUgNi40MzMsNjkuOTQ4IDYuNDMzLDcwLjUwOCBDNi40MzMsNzAuOTA1IDYuNjMxLDcxLjEzMyA2LjkyLDcxLjEzMyBDNy4wMzksNzEuMTMzIDcuMTc0LDcxLjA5NCA3LjMxNyw3MS4wMTIgQzcuODA2LDcwLjczIDguMjAyLDcwLjA0NyA4LjIwMiw2OS40ODcgQzguMjAyLDY5LjA5IDguMDAzLDY4Ljg2MSA3LjcxNCw2OC44NjEiIGlkPSJGaWxsLTE1IiBmaWxsPSIjODA5N0EyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTcuNDQ0LDg1LjM1IEM3LjcwOCw4NS4xOTggNy45MjEsODUuMzE5IDcuOTIxLDg1LjYyMiBDNy45MjEsODUuOTI1IDcuNzA4LDg2LjI5MiA3LjQ0NCw4Ni40NDQgQzcuMTgxLDg2LjU5NyA2Ljk2Nyw4Ni40NzUgNi45NjcsODYuMTczIEM2Ljk2Nyw4NS44NzEgNy4xODEsODUuNTAyIDcuNDQ0LDg1LjM1IiBpZD0iRmlsbC0xNiIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik03LjIzLDg2LjUxIEM3LjA3NCw4Ni41MSA2Ljk2Nyw4Ni4zODcgNi45NjcsODYuMTczIEM2Ljk2Nyw4NS44NzEgNy4xODEsODUuNTAyIDcuNDQ0LDg1LjM1IEM3LjUyMSw4NS4zMDUgNy41OTQsODUuMjg0IDcuNjU4LDg1LjI4NCBDNy44MTQsODUuMjg0IDcuOTIxLDg1LjQwOCA3LjkyMSw4NS42MjIgQzcuOTIxLDg1LjkyNSA3LjcwOCw4Ni4yOTIgNy40NDQsODYuNDQ0IEM3LjM2Nyw4Ni40ODkgNy4yOTQsODYuNTEgNy4yMyw4Ni41MSBNNy42NTgsODUuMDk4IEM3LjU1OCw4NS4wOTggNy40NTUsODUuMTI3IDcuMzUxLDg1LjE4OCBDNy4wMzEsODUuMzczIDYuNzgxLDg1LjgwNiA2Ljc4MSw4Ni4xNzMgQzYuNzgxLDg2LjQ4MiA2Ljk2Niw4Ni42OTcgNy4yMyw4Ni42OTcgQzcuMzMsODYuNjk3IDcuNDMzLDg2LjY2NiA3LjUzOCw4Ni42MDcgQzcuODU4LDg2LjQyMiA4LjEwOCw4NS45ODkgOC4xMDgsODUuNjIyIEM4LjEwOCw4NS4zMTMgNy45MjMsODUuMDk4IDcuNjU4LDg1LjA5OCIgaWQ9IkZpbGwtMTciIGZpbGw9IiM4MDk3QTIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNy4yMyw4Ni4zMjIgTDcuMTU0LDg2LjE3MyBDNy4xNTQsODUuOTM4IDcuMzMzLDg1LjYyOSA3LjUzOCw4NS41MTIgTDcuNjU4LDg1LjQ3MSBMNy43MzQsODUuNjIyIEM3LjczNCw4NS44NTYgNy41NTUsODYuMTY0IDcuMzUxLDg2LjI4MiBMNy4yMyw4Ni4zMjIgTTcuNjU4LDg1LjI4NCBDNy41OTQsODUuMjg0IDcuNTIxLDg1LjMwNSA3LjQ0NCw4NS4zNSBDNy4xODEsODUuNTAyIDYuOTY3LDg1Ljg3MSA2Ljk2Nyw4Ni4xNzMgQzYuOTY3LDg2LjM4NyA3LjA3NCw4Ni41MSA3LjIzLDg2LjUxIEM3LjI5NCw4Ni41MSA3LjM2Nyw4Ni40ODkgNy40NDQsODYuNDQ0IEM3LjcwOCw4Ni4yOTIgNy45MjEsODUuOTI1IDcuOTIxLDg1LjYyMiBDNy45MjEsODUuNDA4IDcuODE0LDg1LjI4NCA3LjY1OCw4NS4yODQiIGlkPSJGaWxsLTE4IiBmaWxsPSIjODA5N0EyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTc3LjI3OCw3Ljc2OSBMNzcuMjc4LDUxLjQzNiBMMTAuMjA4LDkwLjE2IEwxMC4yMDgsNDYuNDkzIEw3Ny4yNzgsNy43NjkiIGlkPSJGaWxsLTE5IiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTEwLjA4Myw5MC4zNzUgTDEwLjA4Myw0Ni40MjEgTDEwLjE0Niw0Ni4zODUgTDc3LjQwMyw3LjU1NCBMNzcuNDAzLDUxLjUwOCBMNzcuMzQxLDUxLjU0NCBMMTAuMDgzLDkwLjM3NSBMMTAuMDgzLDkwLjM3NSBaIE0xMC4zMzMsNDYuNTY0IEwxMC4zMzMsODkuOTQ0IEw3Ny4xNTQsNTEuMzY1IEw3Ny4xNTQsNy45ODUgTDEwLjMzMyw0Ni41NjQgTDEwLjMzMyw0Ni41NjQgWiIgaWQ9IkZpbGwtMjAiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMjUuNzM3LDg4LjY0NyBMMTE4LjA5OCw5MS45ODEgTDExOC4wOTgsODQgTDEwNi42MzksODguNzEzIEwxMDYuNjM5LDk2Ljk4MiBMOTksMTAwLjMxNSBMMTEyLjM2OSwxMDMuOTYxIEwxMjUuNzM3LDg4LjY0NyIgaWQ9IkltcG9ydGVkLUxheWVycy1Db3B5LTIiIGZpbGw9IiM0NTVBNjQiIHNrZXRjaDp0eXBlPSJNU1NoYXBlR3JvdXAiPjwvcGF0aD4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+');
};

module.exports = RotateInstructions;

},{"./util.js":22}],17:[function(_dereq_,module,exports){
/*
 * Copyright 2015 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

var SensorSample = _dereq_('./sensor-sample.js');
var MathUtil = _dereq_('../math-util.js');
var Util = _dereq_('../util.js');

var DEBUG = false;

/**
 * An implementation of a simple complementary filter, which fuses gyroscope and
 * accelerometer data from the 'devicemotion' event.
 *
 * Accelerometer data is very noisy, but stable over the long term.
 * Gyroscope data is smooth, but tends to drift over the long term.
 *
 * This fusion is relatively simple:
 * 1. Get orientation estimates from accelerometer by applying a low-pass filter
 *    on that data.
 * 2. Get orientation estimates from gyroscope by integrating over time.
 * 3. Combine the two estimates, weighing (1) in the long term, but (2) for the
 *    short term.
 */
function ComplementaryFilter(kFilter) {
  this.kFilter = kFilter;

  // Raw sensor measurements.
  this.currentAccelMeasurement = new SensorSample();
  this.currentGyroMeasurement = new SensorSample();
  this.previousGyroMeasurement = new SensorSample();

  // Set default look direction to be in the correct direction.
  if (Util.isIOS()) {
    this.filterQ = new MathUtil.Quaternion(-1, 0, 0, 1);
  } else {
    this.filterQ = new MathUtil.Quaternion(1, 0, 0, 1);
  }
  this.previousFilterQ = new MathUtil.Quaternion();
  this.previousFilterQ.copy(this.filterQ);

  // Orientation based on the accelerometer.
  this.accelQ = new MathUtil.Quaternion();
  // Whether or not the orientation has been initialized.
  this.isOrientationInitialized = false;
  // Running estimate of gravity based on the current orientation.
  this.estimatedGravity = new MathUtil.Vector3();
  // Measured gravity based on accelerometer.
  this.measuredGravity = new MathUtil.Vector3();

  // Debug only quaternion of gyro-based orientation.
  this.gyroIntegralQ = new MathUtil.Quaternion();
}

ComplementaryFilter.prototype.addAccelMeasurement = function(vector, timestampS) {
  this.currentAccelMeasurement.set(vector, timestampS);
};

ComplementaryFilter.prototype.addGyroMeasurement = function(vector, timestampS) {
  this.currentGyroMeasurement.set(vector, timestampS);

  var deltaT = timestampS - this.previousGyroMeasurement.timestampS;
  if (Util.isTimestampDeltaValid(deltaT)) {
    this.run_();
  }

  this.previousGyroMeasurement.copy(this.currentGyroMeasurement);
};

ComplementaryFilter.prototype.run_ = function() {

  if (!this.isOrientationInitialized) {
    this.accelQ = this.accelToQuaternion_(this.currentAccelMeasurement.sample);
    this.previousFilterQ.copy(this.accelQ);
    this.isOrientationInitialized = true;
    return;
  }

  var deltaT = this.currentGyroMeasurement.timestampS -
      this.previousGyroMeasurement.timestampS;

  // Convert gyro rotation vector to a quaternion delta.
  var gyroDeltaQ = this.gyroToQuaternionDelta_(this.currentGyroMeasurement.sample, deltaT);
  this.gyroIntegralQ.multiply(gyroDeltaQ);

  // filter_1 = K * (filter_0 + gyro * dT) + (1 - K) * accel.
  this.filterQ.copy(this.previousFilterQ);
  this.filterQ.multiply(gyroDeltaQ);

  // Calculate the delta between the current estimated gravity and the real
  // gravity vector from accelerometer.
  var invFilterQ = new MathUtil.Quaternion();
  invFilterQ.copy(this.filterQ);
  invFilterQ.inverse();

  this.estimatedGravity.set(0, 0, -1);
  this.estimatedGravity.applyQuaternion(invFilterQ);
  this.estimatedGravity.normalize();

  this.measuredGravity.copy(this.currentAccelMeasurement.sample);
  this.measuredGravity.normalize();

  // Compare estimated gravity with measured gravity, get the delta quaternion
  // between the two.
  var deltaQ = new MathUtil.Quaternion();
  deltaQ.setFromUnitVectors(this.estimatedGravity, this.measuredGravity);
  deltaQ.inverse();

  if (DEBUG) {
    console.log('Delta: %d deg, G_est: (%s, %s, %s), G_meas: (%s, %s, %s)',
                MathUtil.radToDeg * Util.getQuaternionAngle(deltaQ),
                (this.estimatedGravity.x).toFixed(1),
                (this.estimatedGravity.y).toFixed(1),
                (this.estimatedGravity.z).toFixed(1),
                (this.measuredGravity.x).toFixed(1),
                (this.measuredGravity.y).toFixed(1),
                (this.measuredGravity.z).toFixed(1));
  }

  // Calculate the SLERP target: current orientation plus the measured-estimated
  // quaternion delta.
  var targetQ = new MathUtil.Quaternion();
  targetQ.copy(this.filterQ);
  targetQ.multiply(deltaQ);

  // SLERP factor: 0 is pure gyro, 1 is pure accel.
  this.filterQ.slerp(targetQ, 1 - this.kFilter);

  this.previousFilterQ.copy(this.filterQ);
};

ComplementaryFilter.prototype.getOrientation = function() {
  return this.filterQ;
};

ComplementaryFilter.prototype.accelToQuaternion_ = function(accel) {
  var normAccel = new MathUtil.Vector3();
  normAccel.copy(accel);
  normAccel.normalize();
  var quat = new MathUtil.Quaternion();
  quat.setFromUnitVectors(new MathUtil.Vector3(0, 0, -1), normAccel);
  quat.inverse();
  return quat;
};

ComplementaryFilter.prototype.gyroToQuaternionDelta_ = function(gyro, dt) {
  // Extract axis and angle from the gyroscope data.
  var quat = new MathUtil.Quaternion();
  var axis = new MathUtil.Vector3();
  axis.copy(gyro);
  axis.normalize();
  quat.setFromAxisAngle(axis, gyro.length() * dt);
  return quat;
};


module.exports = ComplementaryFilter;

},{"../math-util.js":14,"../util.js":22,"./sensor-sample.js":20}],18:[function(_dereq_,module,exports){
/*
 * Copyright 2015 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ComplementaryFilter = _dereq_('./complementary-filter.js');
var PosePredictor = _dereq_('./pose-predictor.js');
var TouchPanner = _dereq_('../touch-panner.js');
var MathUtil = _dereq_('../math-util.js');
var Util = _dereq_('../util.js');

/**
 * The pose sensor, implemented using DeviceMotion APIs.
 */
function FusionPoseSensor() {
  this.deviceId = 'webvr-polyfill:fused';
  this.deviceName = 'VR Position Device (webvr-polyfill:fused)';

  this.accelerometer = new MathUtil.Vector3();
  this.gyroscope = new MathUtil.Vector3();

  window.addEventListener('devicemotion', this.onDeviceMotionChange_.bind(this));
  window.addEventListener('orientationchange', this.onScreenOrientationChange_.bind(this));

  this.filter = new ComplementaryFilter(WebVRConfig.K_FILTER);
  this.posePredictor = new PosePredictor(WebVRConfig.PREDICTION_TIME_S);
  this.touchPanner = new TouchPanner();

  this.filterToWorldQ = new MathUtil.Quaternion();

  // Set the filter to world transform, depending on OS.
  if (Util.isIOS()) {
    this.filterToWorldQ.setFromAxisAngle(new MathUtil.Vector3(1, 0, 0), Math.PI / 2);
  } else {
    this.filterToWorldQ.setFromAxisAngle(new MathUtil.Vector3(1, 0, 0), -Math.PI / 2);
  }

  this.inverseWorldToScreenQ = new MathUtil.Quaternion();
  this.worldToScreenQ = new MathUtil.Quaternion();
  this.originalPoseAdjustQ = new MathUtil.Quaternion();
  this.originalPoseAdjustQ.setFromAxisAngle(new MathUtil.Vector3(0, 0, 1),
                                           -window.orientation * Math.PI / 180);

  this.setScreenTransform_();
  // Adjust this filter for being in landscape mode.
  if (Util.isLandscapeMode()) {
    this.filterToWorldQ.multiply(this.inverseWorldToScreenQ);
  }

  // Keep track of a reset transform for resetSensor.
  this.resetQ = new MathUtil.Quaternion();

  this.isFirefoxAndroid = Util.isFirefoxAndroid();
  this.isIOS = Util.isIOS();

  this.orientationOut_ = new Float32Array(4);
}

FusionPoseSensor.prototype.getPosition = function() {
  // This PoseSensor doesn't support position
  return null;
};

FusionPoseSensor.prototype.getOrientation = function() {
  // Convert from filter space to the the same system used by the
  // deviceorientation event.
  var orientation = this.filter.getOrientation();

  // Predict orientation.
  this.predictedQ = this.posePredictor.getPrediction(orientation, this.gyroscope, this.previousTimestampS);

  // Convert to THREE coordinate system: -Z forward, Y up, X right.
  var out = new MathUtil.Quaternion();
  out.copy(this.filterToWorldQ);
  out.multiply(this.resetQ);
  if (!WebVRConfig.TOUCH_PANNER_DISABLED) {
    out.multiply(this.touchPanner.getOrientation());
  }
  out.multiply(this.predictedQ);
  out.multiply(this.worldToScreenQ);

  // Handle the yaw-only case.
  if (WebVRConfig.YAW_ONLY) {
    // Make a quaternion that only turns around the Y-axis.
    out.x = 0;
    out.z = 0;
    out.normalize();
  }

  this.orientationOut_[0] = out.x;
  this.orientationOut_[1] = out.y;
  this.orientationOut_[2] = out.z;
  this.orientationOut_[3] = out.w;
  return this.orientationOut_;
};

FusionPoseSensor.prototype.resetPose = function() {
  // Reduce to inverted yaw-only.
  this.resetQ.copy(this.filter.getOrientation());
  this.resetQ.x = 0;
  this.resetQ.y = 0;
  this.resetQ.z *= -1;
  this.resetQ.normalize();

  // Take into account extra transformations in landscape mode.
  if (Util.isLandscapeMode()) {
    this.resetQ.multiply(this.inverseWorldToScreenQ);
  }

  // Take into account original pose.
  this.resetQ.multiply(this.originalPoseAdjustQ);

  if (!WebVRConfig.TOUCH_PANNER_DISABLED) {
    this.touchPanner.resetSensor();
  }
};

FusionPoseSensor.prototype.onDeviceMotionChange_ = function(deviceMotion) {
  var accGravity = deviceMotion.accelerationIncludingGravity;
  var rotRate = deviceMotion.rotationRate;
  var timestampS = deviceMotion.timeStamp / 1000;

  // Firefox Android timeStamp returns one thousandth of a millisecond.
  if (this.isFirefoxAndroid) {
    timestampS /= 1000;
  }

  var deltaS = timestampS - this.previousTimestampS;
  if (deltaS <= Util.MIN_TIMESTEP || deltaS > Util.MAX_TIMESTEP) {
    console.warn('Invalid timestamps detected. Time step between successive ' +
                 'gyroscope sensor samples is very small or not monotonic');
    this.previousTimestampS = timestampS;
    return;
  }
  this.accelerometer.set(-accGravity.x, -accGravity.y, -accGravity.z);
  this.gyroscope.set(rotRate.alpha, rotRate.beta, rotRate.gamma);

  // With iOS and Firefox Android, rotationRate is reported in degrees,
  // so we first convert to radians.
  if (this.isIOS || this.isFirefoxAndroid) {
    this.gyroscope.multiplyScalar(Math.PI / 180);
  }

  this.filter.addAccelMeasurement(this.accelerometer, timestampS);
  this.filter.addGyroMeasurement(this.gyroscope, timestampS);

  this.previousTimestampS = timestampS;
};

FusionPoseSensor.prototype.onScreenOrientationChange_ =
    function(screenOrientation) {
  this.setScreenTransform_();
};

FusionPoseSensor.prototype.setScreenTransform_ = function() {
  this.worldToScreenQ.set(0, 0, 0, 1);
  switch (window.orientation) {
    case 0:
      break;
    case 90:
      this.worldToScreenQ.setFromAxisAngle(new MathUtil.Vector3(0, 0, 1), -Math.PI / 2);
      break;
    case -90:
      this.worldToScreenQ.setFromAxisAngle(new MathUtil.Vector3(0, 0, 1), Math.PI / 2);
      break;
    case 180:
      // TODO.
      break;
  }
  this.inverseWorldToScreenQ.copy(this.worldToScreenQ);
  this.inverseWorldToScreenQ.inverse();
};

module.exports = FusionPoseSensor;

},{"../math-util.js":14,"../touch-panner.js":21,"../util.js":22,"./complementary-filter.js":17,"./pose-predictor.js":19}],19:[function(_dereq_,module,exports){
/*
 * Copyright 2015 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var MathUtil = _dereq_('../math-util.js');
var DEBUG = false;

/**
 * Given an orientation and the gyroscope data, predicts the future orientation
 * of the head. This makes rendering appear faster.
 *
 * Also see: http://msl.cs.uiuc.edu/~lavalle/papers/LavYerKatAnt14.pdf
 *
 * @param {Number} predictionTimeS time from head movement to the appearance of
 * the corresponding image.
 */
function PosePredictor(predictionTimeS) {
  this.predictionTimeS = predictionTimeS;

  // The quaternion corresponding to the previous state.
  this.previousQ = new MathUtil.Quaternion();
  // Previous time a prediction occurred.
  this.previousTimestampS = null;

  // The delta quaternion that adjusts the current pose.
  this.deltaQ = new MathUtil.Quaternion();
  // The output quaternion.
  this.outQ = new MathUtil.Quaternion();
}

PosePredictor.prototype.getPrediction = function(currentQ, gyro, timestampS) {
  if (!this.previousTimestampS) {
    this.previousQ.copy(currentQ);
    this.previousTimestampS = timestampS;
    return currentQ;
  }

  // Calculate axis and angle based on gyroscope rotation rate data.
  var axis = new MathUtil.Vector3();
  axis.copy(gyro);
  axis.normalize();

  var angularSpeed = gyro.length();

  // If we're rotating slowly, don't do prediction.
  if (angularSpeed < MathUtil.degToRad * 20) {
    if (DEBUG) {
      console.log('Moving slowly, at %s deg/s: no prediction',
                  (MathUtil.radToDeg * angularSpeed).toFixed(1));
    }
    this.outQ.copy(currentQ);
    this.previousQ.copy(currentQ);
    return this.outQ;
  }

  // Get the predicted angle based on the time delta and latency.
  var deltaT = timestampS - this.previousTimestampS;
  var predictAngle = angularSpeed * this.predictionTimeS;

  this.deltaQ.setFromAxisAngle(axis, predictAngle);
  this.outQ.copy(this.previousQ);
  this.outQ.multiply(this.deltaQ);

  this.previousQ.copy(currentQ);

  return this.outQ;
};


module.exports = PosePredictor;

},{"../math-util.js":14}],20:[function(_dereq_,module,exports){
function SensorSample(sample, timestampS) {
  this.set(sample, timestampS);
};

SensorSample.prototype.set = function(sample, timestampS) {
  this.sample = sample;
  this.timestampS = timestampS;
};

SensorSample.prototype.copy = function(sensorSample) {
  this.set(sensorSample.sample, sensorSample.timestampS);
};

module.exports = SensorSample;

},{}],21:[function(_dereq_,module,exports){
/*
 * Copyright 2015 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var MathUtil = _dereq_('./math-util.js');
var Util = _dereq_('./util.js');

var ROTATE_SPEED = 0.5;
/**
 * Provides a quaternion responsible for pre-panning the scene before further
 * transformations due to device sensors.
 */
function TouchPanner() {
  window.addEventListener('touchstart', this.onTouchStart_.bind(this));
  window.addEventListener('touchmove', this.onTouchMove_.bind(this));
  window.addEventListener('touchend', this.onTouchEnd_.bind(this));

  this.isTouching = false;
  this.rotateStart = new MathUtil.Vector2();
  this.rotateEnd = new MathUtil.Vector2();
  this.rotateDelta = new MathUtil.Vector2();

  this.theta = 0;
  this.orientation = new MathUtil.Quaternion();
}

TouchPanner.prototype.getOrientation = function() {
  this.orientation.setFromEulerXYZ(0, 0, this.theta);
  return this.orientation;
};

TouchPanner.prototype.resetSensor = function() {
  this.theta = 0;
};

TouchPanner.prototype.onTouchStart_ = function(e) {
  // Only respond if there is exactly one touch.
  if (e.touches.length != 1) {
    return;
  }
  this.rotateStart.set(e.touches[0].pageX, e.touches[0].pageY);
  this.isTouching = true;
};

TouchPanner.prototype.onTouchMove_ = function(e) {
  if (!this.isTouching) {
    return;
  }
  this.rotateEnd.set(e.touches[0].pageX, e.touches[0].pageY);
  this.rotateDelta.subVectors(this.rotateEnd, this.rotateStart);
  this.rotateStart.copy(this.rotateEnd);

  // On iOS, direction is inverted.
  if (Util.isIOS()) {
    this.rotateDelta.x *= -1;
  }

  var element = document.body;
  this.theta += 2 * Math.PI * this.rotateDelta.x / element.clientWidth * ROTATE_SPEED;
};

TouchPanner.prototype.onTouchEnd_ = function(e) {
  this.isTouching = false;
};

module.exports = TouchPanner;

},{"./math-util.js":14,"./util.js":22}],22:[function(_dereq_,module,exports){
/*
 * Copyright 2015 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

var objectAssign = _dereq_('object-assign');

var Util = window.Util || {};

Util.MIN_TIMESTEP = 0.001;
Util.MAX_TIMESTEP = 1;

Util.base64 = function(mimeType, base64) {
  return 'data:' + mimeType + ';base64,' + base64;
};

Util.clamp = function(value, min, max) {
  return Math.min(Math.max(min, value), max);
};

Util.lerp = function(a, b, t) {
  return a + ((b - a) * t);
};

Util.isIOS = (function() {
  var isIOS = /iPad|iPhone|iPod/.test(navigator.platform);
  return function() {
    return isIOS;
  };
})();

Util.isSafari = (function() {
  var isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);
  return function() {
    return isSafari;
  };
})();

Util.isFirefoxAndroid = (function() {
  var isFirefoxAndroid = navigator.userAgent.indexOf('Firefox') !== -1 &&
      navigator.userAgent.indexOf('Android') !== -1;
  return function() {
    return isFirefoxAndroid;
  };
})();

Util.isLandscapeMode = function() {
  return (window.orientation == 90 || window.orientation == -90);
};

// Helper method to validate the time steps of sensor timestamps.
Util.isTimestampDeltaValid = function(timestampDeltaS) {
  if (isNaN(timestampDeltaS)) {
    return false;
  }
  if (timestampDeltaS <= Util.MIN_TIMESTEP) {
    return false;
  }
  if (timestampDeltaS > Util.MAX_TIMESTEP) {
    return false;
  }
  return true;
};

Util.getScreenWidth = function() {
  return Math.max(window.screen.width, window.screen.height) *
      window.devicePixelRatio;
};

Util.getScreenHeight = function() {
  return Math.min(window.screen.width, window.screen.height) *
      window.devicePixelRatio;
};

Util.requestFullscreen = function(element) {
  if (element.requestFullscreen) {
    element.requestFullscreen();
  } else if (element.webkitRequestFullscreen) {
    element.webkitRequestFullscreen();
  } else if (element.mozRequestFullScreen) {
    element.mozRequestFullScreen();
  } else if (element.msRequestFullscreen) {
    element.msRequestFullscreen();
  } else {
    return false;
  }

  return true;
};

Util.exitFullscreen = function() {
  if (document.exitFullscreen) {
    document.exitFullscreen();
  } else if (document.webkitExitFullscreen) {
    document.webkitExitFullscreen();
  } else if (document.mozCancelFullScreen) {
    document.mozCancelFullScreen();
  } else if (document.msExitFullscreen) {
    document.msExitFullscreen();
  } else {
    return false;
  }

  return true;
};

Util.getFullscreenElement = function() {
  return document.fullscreenElement ||
      document.webkitFullscreenElement ||
      document.mozFullScreenElement ||
      document.msFullscreenElement;
};

Util.linkProgram = function(gl, vertexSource, fragmentSource, attribLocationMap) {
  // No error checking for brevity.
  var vertexShader = gl.createShader(gl.VERTEX_SHADER);
  gl.shaderSource(vertexShader, vertexSource);
  gl.compileShader(vertexShader);

  var fragmentShader = gl.createShader(gl.FRAGMENT_SHADER);
  gl.shaderSource(fragmentShader, fragmentSource);
  gl.compileShader(fragmentShader);

  var program = gl.createProgram();
  gl.attachShader(program, vertexShader);
  gl.attachShader(program, fragmentShader);

  for (var attribName in attribLocationMap)
    gl.bindAttribLocation(program, attribLocationMap[attribName], attribName);

  gl.linkProgram(program);

  gl.deleteShader(vertexShader);
  gl.deleteShader(fragmentShader);

  return program;
};

Util.getProgramUniforms = function(gl, program) {
  var uniforms = {};
  var uniformCount = gl.getProgramParameter(program, gl.ACTIVE_UNIFORMS);
  var uniformName = '';
  for (var i = 0; i < uniformCount; i++) {
    var uniformInfo = gl.getActiveUniform(program, i);
    uniformName = uniformInfo.name.replace('[0]', '');
    uniforms[uniformName] = gl.getUniformLocation(program, uniformName);
  }
  return uniforms;
};

Util.orthoMatrix = function (out, left, right, bottom, top, near, far) {
  var lr = 1 / (left - right),
      bt = 1 / (bottom - top),
      nf = 1 / (near - far);
  out[0] = -2 * lr;
  out[1] = 0;
  out[2] = 0;
  out[3] = 0;
  out[4] = 0;
  out[5] = -2 * bt;
  out[6] = 0;
  out[7] = 0;
  out[8] = 0;
  out[9] = 0;
  out[10] = 2 * nf;
  out[11] = 0;
  out[12] = (left + right) * lr;
  out[13] = (top + bottom) * bt;
  out[14] = (far + near) * nf;
  out[15] = 1;
  return out;
};

Util.isMobile = function() {
  var check = false;
  (function(a){if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4)))check = true})(navigator.userAgent||navigator.vendor||window.opera);
  return check;
};

Util.extend = objectAssign;

Util.safariCssSizeWorkaround = function(canvas) {
  // TODO(smus): Remove this workaround when Safari for iOS is fixed.
  // iOS only workaround (for https://bugs.webkit.org/show_bug.cgi?id=152556).
  //
  // "To the last I grapple with thee;
  //  from hell's heart I stab at thee;
  //  for hate's sake I spit my last breath at thee."
  // -- Moby Dick, by Herman Melville
  if (Util.isIOS()) {
    var width = canvas.style.width;
    var height = canvas.style.height;
    canvas.style.width = (parseInt(width) + 1) + 'px';
    canvas.style.height = (parseInt(height)) + 'px';
    console.log('Resetting width to...', width);
    setTimeout(function() {
      console.log('Done. Width is now', width);
      canvas.style.width = width;
      canvas.style.height = height;
    }, 100);
  }

  // Debug only.
  window.Util = Util;
  window.canvas = canvas;
};

module.exports = Util;

},{"object-assign":1}],23:[function(_dereq_,module,exports){
/*
 * Copyright 2015 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

var Emitter = _dereq_('./emitter.js');
var Util = _dereq_('./util.js');
var DeviceInfo = _dereq_('./device-info.js');

var DEFAULT_VIEWER = 'CardboardV1';
var VIEWER_KEY = 'WEBVR_CARDBOARD_VIEWER';
var CLASS_NAME = 'webvr-polyfill-viewer-selector';

/**
 * Creates a viewer selector with the options specified. Supports being shown
 * and hidden. Generates events when viewer parameters change. Also supports
 * saving the currently selected index in localStorage.
 */
function ViewerSelector() {
  // Try to load the selected key from local storage. If none exists, use the
  // default key.
  try {
    this.selectedKey = localStorage.getItem(VIEWER_KEY) || DEFAULT_VIEWER;
  } catch (error) {
    console.error('Failed to load viewer profile: %s', error);
  }
  this.dialog = this.createDialog_(DeviceInfo.Viewers);
  this.root = null;
}
ViewerSelector.prototype = new Emitter();

ViewerSelector.prototype.show = function(root) {
  this.root = root;

  root.appendChild(this.dialog);
  //console.log('ViewerSelector.show');

  // Ensure the currently selected item is checked.
  var selected = this.dialog.querySelector('#' + this.selectedKey);
  selected.checked = true;

  // Show the UI.
  this.dialog.style.display = 'block';
};

ViewerSelector.prototype.hide = function() {
  if (this.root && this.root.contains(this.dialog)) {
    this.root.removeChild(this.dialog);
  }
  //console.log('ViewerSelector.hide');
  this.dialog.style.display = 'none';
};

ViewerSelector.prototype.getCurrentViewer = function() {
  return DeviceInfo.Viewers[this.selectedKey];
};

ViewerSelector.prototype.getSelectedKey_ = function() {
  var input = this.dialog.querySelector('input[name=field]:checked');
  if (input) {
    return input.id;
  }
  return null;
};

ViewerSelector.prototype.onSave_ = function() {
  this.selectedKey = this.getSelectedKey_();
  if (!this.selectedKey || !DeviceInfo.Viewers[this.selectedKey]) {
    console.error('ViewerSelector.onSave_: this should never happen!');
    return;
  }

  this.emit('change', DeviceInfo.Viewers[this.selectedKey]);

  // Attempt to save the viewer profile, but fails in private mode.
  try {
    localStorage.setItem(VIEWER_KEY, this.selectedKey);
  } catch(error) {
    console.error('Failed to save viewer profile: %s', error);
  }
  this.hide();
};

/**
 * Creates the dialog.
 */
ViewerSelector.prototype.createDialog_ = function(options) {
  var container = document.createElement('div');
  container.classList.add(CLASS_NAME);
  container.style.display = 'none';
  // Create an overlay that dims the background, and which goes away when you
  // tap it.
  var overlay = document.createElement('div');
  var s = overlay.style;
  s.position = 'fixed';
  s.left = 0;
  s.top = 0;
  s.width = '100%';
  s.height = '100%';
  s.background = 'rgba(0, 0, 0, 0.3)';
  overlay.addEventListener('click', this.hide.bind(this));

  var width = 280;
  var dialog = document.createElement('div');
  var s = dialog.style;
  s.boxSizing = 'border-box';
  s.position = 'fixed';
  s.top = '24px';
  s.left = '50%';
  s.marginLeft = (-width/2) + 'px';
  s.width = width + 'px';
  s.padding = '24px';
  s.overflow = 'hidden';
  s.background = '#fafafa';
  s.fontFamily = "'Roboto', sans-serif";
  s.boxShadow = '0px 5px 20px #666';

  dialog.appendChild(this.createH1_('Select your viewer'));
  for (var id in options) {
    dialog.appendChild(this.createChoice_(id, options[id].label));
  }
  dialog.appendChild(this.createButton_('Save', this.onSave_.bind(this)));

  container.appendChild(overlay);
  container.appendChild(dialog);

  return container;
};

ViewerSelector.prototype.createH1_ = function(name) {
  var h1 = document.createElement('h1');
  var s = h1.style;
  s.color = 'black';
  s.fontSize = '20px';
  s.fontWeight = 'bold';
  s.marginTop = 0;
  s.marginBottom = '24px';
  h1.innerHTML = name;
  return h1;
};

ViewerSelector.prototype.createChoice_ = function(id, name) {
  /*
  <div class="choice">
  <input id="v1" type="radio" name="field" value="v1">
  <label for="v1">Cardboard V1</label>
  </div>
  */
  var div = document.createElement('div');
  div.style.marginTop = '8px';
  div.style.color = 'black';

  var input = document.createElement('input');
  input.style.fontSize = '30px';
  input.setAttribute('id', id);
  input.setAttribute('type', 'radio');
  input.setAttribute('value', id);
  input.setAttribute('name', 'field');

  var label = document.createElement('label');
  label.style.marginLeft = '4px';
  label.setAttribute('for', id);
  label.innerHTML = name;

  div.appendChild(input);
  div.appendChild(label);

  return div;
};

ViewerSelector.prototype.createButton_ = function(label, onclick) {
  var button = document.createElement('button');
  button.innerHTML = label;
  var s = button.style;
  s.float = 'right';
  s.textTransform = 'uppercase';
  s.color = '#1094f7';
  s.fontSize = '14px';
  s.letterSpacing = 0;
  s.border = 0;
  s.background = 'none';
  s.marginTop = '16px';

  button.addEventListener('click', onclick);

  return button;
};

module.exports = ViewerSelector;

},{"./device-info.js":7,"./emitter.js":12,"./util.js":22}],24:[function(_dereq_,module,exports){
/*
 * Copyright 2015 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

var Util = _dereq_('./util.js');

/**
 * Android and iOS compatible wakelock implementation.
 *
 * Refactored thanks to dkovalev@.
 */
function AndroidWakeLock() {
  var video = document.createElement('video');

  video.addEventListener('ended', function() {
    video.play();
  });

  this.request = function() {
    if (video.paused) {
      // Base64 version of videos_src/no-sleep-120s.mp4.
      video.src = Util.base64('video/mp4', 'AAAAGGZ0eXBpc29tAAAAAG1wNDFhdmMxAAAIA21vb3YAAABsbXZoZAAAAADSa9v60mvb+gABX5AAlw/gAAEAAAEAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAdkdHJhawAAAFx0a2hkAAAAAdJr2/rSa9v6AAAAAQAAAAAAlw/gAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAQAAAAHAAAAAAAJGVkdHMAAAAcZWxzdAAAAAAAAAABAJcP4AAAAAAAAQAAAAAG3G1kaWEAAAAgbWRoZAAAAADSa9v60mvb+gAPQkAGjneAFccAAAAAAC1oZGxyAAAAAAAAAAB2aWRlAAAAAAAAAAAAAAAAVmlkZW9IYW5kbGVyAAAABodtaW5mAAAAFHZtaGQAAAABAAAAAAAAAAAAAAAkZGluZgAAABxkcmVmAAAAAAAAAAEAAAAMdXJsIAAAAAEAAAZHc3RibAAAAJdzdHNkAAAAAAAAAAEAAACHYXZjMQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAMABwASAAAAEgAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABj//wAAADFhdmNDAWQAC//hABlnZAALrNlfllw4QAAAAwBAAAADAKPFCmWAAQAFaOvssiwAAAAYc3R0cwAAAAAAAAABAAAAbgAPQkAAAAAUc3RzcwAAAAAAAAABAAAAAQAAA4BjdHRzAAAAAAAAAG4AAAABAD0JAAAAAAEAehIAAAAAAQA9CQAAAAABAAAAAAAAAAEAD0JAAAAAAQBMS0AAAAABAB6EgAAAAAEAAAAAAAAAAQAPQkAAAAABAExLQAAAAAEAHoSAAAAAAQAAAAAAAAABAA9CQAAAAAEATEtAAAAAAQAehIAAAAABAAAAAAAAAAEAD0JAAAAAAQBMS0AAAAABAB6EgAAAAAEAAAAAAAAAAQAPQkAAAAABAExLQAAAAAEAHoSAAAAAAQAAAAAAAAABAA9CQAAAAAEATEtAAAAAAQAehIAAAAABAAAAAAAAAAEAD0JAAAAAAQBMS0AAAAABAB6EgAAAAAEAAAAAAAAAAQAPQkAAAAABAExLQAAAAAEAHoSAAAAAAQAAAAAAAAABAA9CQAAAAAEATEtAAAAAAQAehIAAAAABAAAAAAAAAAEAD0JAAAAAAQBMS0AAAAABAB6EgAAAAAEAAAAAAAAAAQAPQkAAAAABAExLQAAAAAEAHoSAAAAAAQAAAAAAAAABAA9CQAAAAAEATEtAAAAAAQAehIAAAAABAAAAAAAAAAEAD0JAAAAAAQBMS0AAAAABAB6EgAAAAAEAAAAAAAAAAQAPQkAAAAABAExLQAAAAAEAHoSAAAAAAQAAAAAAAAABAA9CQAAAAAEATEtAAAAAAQAehIAAAAABAAAAAAAAAAEAD0JAAAAAAQBMS0AAAAABAB6EgAAAAAEAAAAAAAAAAQAPQkAAAAABAExLQAAAAAEAHoSAAAAAAQAAAAAAAAABAA9CQAAAAAEATEtAAAAAAQAehIAAAAABAAAAAAAAAAEAD0JAAAAAAQBMS0AAAAABAB6EgAAAAAEAAAAAAAAAAQAPQkAAAAABAExLQAAAAAEAHoSAAAAAAQAAAAAAAAABAA9CQAAAAAEATEtAAAAAAQAehIAAAAABAAAAAAAAAAEAD0JAAAAAAQBMS0AAAAABAB6EgAAAAAEAAAAAAAAAAQAPQkAAAAABAExLQAAAAAEAHoSAAAAAAQAAAAAAAAABAA9CQAAAAAEATEtAAAAAAQAehIAAAAABAAAAAAAAAAEAD0JAAAAAAQBMS0AAAAABAB6EgAAAAAEAAAAAAAAAAQAPQkAAAAABAExLQAAAAAEAHoSAAAAAAQAAAAAAAAABAA9CQAAAAAEALcbAAAAAHHN0c2MAAAAAAAAAAQAAAAEAAABuAAAAAQAAAcxzdHN6AAAAAAAAAAAAAABuAAADCQAAABgAAAAOAAAADgAAAAwAAAASAAAADgAAAAwAAAAMAAAAEgAAAA4AAAAMAAAADAAAABIAAAAOAAAADAAAAAwAAAASAAAADgAAAAwAAAAMAAAAEgAAAA4AAAAMAAAADAAAABIAAAAOAAAADAAAAAwAAAASAAAADgAAAAwAAAAMAAAAEgAAAA4AAAAMAAAADAAAABIAAAAOAAAADAAAAAwAAAASAAAADgAAAAwAAAAMAAAAEgAAAA4AAAAMAAAADAAAABIAAAAOAAAADAAAAAwAAAASAAAADgAAAAwAAAAMAAAAEgAAAA4AAAAMAAAADAAAABIAAAAOAAAADAAAAAwAAAASAAAADgAAAAwAAAAMAAAAEgAAAA4AAAAMAAAADAAAABIAAAAOAAAADAAAAAwAAAASAAAADgAAAAwAAAAMAAAAEgAAAA4AAAAMAAAADAAAABIAAAAOAAAADAAAAAwAAAASAAAADgAAAAwAAAAMAAAAEgAAAA4AAAAMAAAADAAAABIAAAAOAAAADAAAAAwAAAASAAAADgAAAAwAAAAMAAAAEgAAAA4AAAAMAAAADAAAABMAAAAUc3RjbwAAAAAAAAABAAAIKwAAACt1ZHRhAAAAI6llbmMAFwAAdmxjIDIuMi4xIHN0cmVhbSBvdXRwdXQAAAAId2lkZQAACRRtZGF0AAACrgX//6vcRem95tlIt5Ys2CDZI+7veDI2NCAtIGNvcmUgMTQyIC0gSC4yNjQvTVBFRy00IEFWQyBjb2RlYyAtIENvcHlsZWZ0IDIwMDMtMjAxNCAtIGh0dHA6Ly93d3cudmlkZW9sYW4ub3JnL3gyNjQuaHRtbCAtIG9wdGlvbnM6IGNhYmFjPTEgcmVmPTMgZGVibG9jaz0xOjA6MCBhbmFseXNlPTB4MzoweDEzIG1lPWhleCBzdWJtZT03IHBzeT0xIHBzeV9yZD0xLjAwOjAuMDAgbWl4ZWRfcmVmPTEgbWVfcmFuZ2U9MTYgY2hyb21hX21lPTEgdHJlbGxpcz0xIDh4OGRjdD0xIGNxbT0wIGRlYWR6b25lPTIxLDExIGZhc3RfcHNraXA9MSBjaHJvbWFfcXBfb2Zmc2V0PS0yIHRocmVhZHM9MTIgbG9va2FoZWFkX3RocmVhZHM9MSBzbGljZWRfdGhyZWFkcz0wIG5yPTAgZGVjaW1hdGU9MSBpbnRlcmxhY2VkPTAgYmx1cmF5X2NvbXBhdD0wIGNvbnN0cmFpbmVkX2ludHJhPTAgYmZyYW1lcz0zIGJfcHlyYW1pZD0yIGJfYWRhcHQ9MSBiX2JpYXM9MCBkaXJlY3Q9MSB3ZWlnaHRiPTEgb3Blbl9nb3A9MCB3ZWlnaHRwPTIga2V5aW50PTI1MCBrZXlpbnRfbWluPTEgc2NlbmVjdXQ9NDAgaW50cmFfcmVmcmVzaD0wIHJjX2xvb2thaGVhZD00MCByYz1hYnIgbWJ0cmVlPTEgYml0cmF0ZT0xMDAgcmF0ZXRvbD0xLjAgcWNvbXA9MC42MCBxcG1pbj0xMCBxcG1heD01MSBxcHN0ZXA9NCBpcF9yYXRpbz0xLjQwIGFxPTE6MS4wMACAAAAAU2WIhAAQ/8ltlOe+cTZuGkKg+aRtuivcDZ0pBsfsEi9p/i1yU9DxS2lq4dXTinViF1URBKXgnzKBd/Uh1bkhHtMrwrRcOJslD01UB+fyaL6ef+DBAAAAFEGaJGxBD5B+v+a+4QqF3MgBXz9MAAAACkGeQniH/+94r6EAAAAKAZ5hdEN/8QytwAAAAAgBnmNqQ3/EgQAAAA5BmmhJqEFomUwIIf/+4QAAAApBnoZFESw//76BAAAACAGepXRDf8SBAAAACAGep2pDf8SAAAAADkGarEmoQWyZTAgh//7gAAAACkGeykUVLD//voEAAAAIAZ7pdEN/xIAAAAAIAZ7rakN/xIAAAAAOQZrwSahBbJlMCCH//uEAAAAKQZ8ORRUsP/++gQAAAAgBny10Q3/EgQAAAAgBny9qQ3/EgAAAAA5BmzRJqEFsmUwIIf/+4AAAAApBn1JFFSw//76BAAAACAGfcXRDf8SAAAAACAGfc2pDf8SAAAAADkGbeEmoQWyZTAgh//7hAAAACkGflkUVLD//voAAAAAIAZ+1dEN/xIEAAAAIAZ+3akN/xIEAAAAOQZu8SahBbJlMCCH//uAAAAAKQZ/aRRUsP/++gQAAAAgBn/l0Q3/EgAAAAAgBn/tqQ3/EgQAAAA5Bm+BJqEFsmUwIIf/+4QAAAApBnh5FFSw//76AAAAACAGePXRDf8SAAAAACAGeP2pDf8SBAAAADkGaJEmoQWyZTAgh//7gAAAACkGeQkUVLD//voEAAAAIAZ5hdEN/xIAAAAAIAZ5jakN/xIEAAAAOQZpoSahBbJlMCCH//uEAAAAKQZ6GRRUsP/++gQAAAAgBnqV0Q3/EgQAAAAgBnqdqQ3/EgAAAAA5BmqxJqEFsmUwIIf/+4AAAAApBnspFFSw//76BAAAACAGe6XRDf8SAAAAACAGe62pDf8SAAAAADkGa8EmoQWyZTAgh//7hAAAACkGfDkUVLD//voEAAAAIAZ8tdEN/xIEAAAAIAZ8vakN/xIAAAAAOQZs0SahBbJlMCCH//uAAAAAKQZ9SRRUsP/++gQAAAAgBn3F0Q3/EgAAAAAgBn3NqQ3/EgAAAAA5Bm3hJqEFsmUwIIf/+4QAAAApBn5ZFFSw//76AAAAACAGftXRDf8SBAAAACAGft2pDf8SBAAAADkGbvEmoQWyZTAgh//7gAAAACkGf2kUVLD//voEAAAAIAZ/5dEN/xIAAAAAIAZ/7akN/xIEAAAAOQZvgSahBbJlMCCH//uEAAAAKQZ4eRRUsP/++gAAAAAgBnj10Q3/EgAAAAAgBnj9qQ3/EgQAAAA5BmiRJqEFsmUwIIf/+4AAAAApBnkJFFSw//76BAAAACAGeYXRDf8SAAAAACAGeY2pDf8SBAAAADkGaaEmoQWyZTAgh//7hAAAACkGehkUVLD//voEAAAAIAZ6ldEN/xIEAAAAIAZ6nakN/xIAAAAAOQZqsSahBbJlMCCH//uAAAAAKQZ7KRRUsP/++gQAAAAgBnul0Q3/EgAAAAAgBnutqQ3/EgAAAAA5BmvBJqEFsmUwIIf/+4QAAAApBnw5FFSw//76BAAAACAGfLXRDf8SBAAAACAGfL2pDf8SAAAAADkGbNEmoQWyZTAgh//7gAAAACkGfUkUVLD//voEAAAAIAZ9xdEN/xIAAAAAIAZ9zakN/xIAAAAAOQZt4SahBbJlMCCH//uEAAAAKQZ+WRRUsP/++gAAAAAgBn7V0Q3/EgQAAAAgBn7dqQ3/EgQAAAA5Bm7xJqEFsmUwIIf/+4AAAAApBn9pFFSw//76BAAAACAGf+XRDf8SAAAAACAGf+2pDf8SBAAAADkGb4EmoQWyZTAgh//7hAAAACkGeHkUVLD//voAAAAAIAZ49dEN/xIAAAAAIAZ4/akN/xIEAAAAOQZokSahBbJlMCCH//uAAAAAKQZ5CRRUsP/++gQAAAAgBnmF0Q3/EgAAAAAgBnmNqQ3/EgQAAAA5BmmhJqEFsmUwIIf/+4QAAAApBnoZFFSw//76BAAAACAGepXRDf8SBAAAACAGep2pDf8SAAAAADkGarEmoQWyZTAgh//7gAAAACkGeykUVLD//voEAAAAIAZ7pdEN/xIAAAAAIAZ7rakN/xIAAAAAPQZruSahBbJlMFEw3//7B');
      video.play();
    }
  };

  this.release = function() {
    video.pause();
    video.src = '';
  };
}

function iOSWakeLock() {
  var timer = null;

  this.request = function() {
    if (!timer) {
      timer = setInterval(function() {
        window.location = window.location;
        setTimeout(window.stop, 0);
      }, 30000);
    }
  }

  this.release = function() {
    if (timer) {
      clearInterval(timer);
      timer = null;
    }
  }
}


function getWakeLock() {
  var userAgent = navigator.userAgent || navigator.vendor || window.opera;
  if (userAgent.match(/iPhone/i) || userAgent.match(/iPod/i)) {
    return iOSWakeLock;
  } else {
    return AndroidWakeLock;
  }
}

module.exports = getWakeLock();
},{"./util.js":22}],25:[function(_dereq_,module,exports){
/*
 * Copyright 2015 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

var CardboardVRDisplay = _dereq_('./cardboard-vr-display.js');
var MouseKeyboardVRDisplay = _dereq_('./mouse-keyboard-vr-display.js');
// Uncomment to add positional tracking via webcam.
//var WebcamPositionSensorVRDevice = require('./webcam-position-sensor-vr-device.js');
var VRDisplay = _dereq_('./base.js').VRDisplay;
var HMDVRDevice = _dereq_('./base.js').HMDVRDevice;
var PositionSensorVRDevice = _dereq_('./base.js').PositionSensorVRDevice;
var VRDisplayHMDDevice = _dereq_('./display-wrappers.js').VRDisplayHMDDevice;
var VRDisplayPositionSensorDevice = _dereq_('./display-wrappers.js').VRDisplayPositionSensorDevice;

function WebVRPolyfill() {
  this.displays = [];
  this.devices = []; // For deprecated objects
  this.devicesPopulated = false;
  this.nativeWebVRAvailable = this.isWebVRAvailable();
  this.nativeLegacyWebVRAvailable = this.isDeprecatedWebVRAvailable();

  if (!this.nativeLegacyWebVRAvailable) {
    if (!this.nativeWebVRAvailable) {
      this.enablePolyfill();
    }
    if (WebVRConfig.ENABLE_DEPRECATED_API) {
      this.enableDeprecatedPolyfill();
    }
  }
}

WebVRPolyfill.prototype.isWebVRAvailable = function() {
  return ('getVRDisplays' in navigator);
};

WebVRPolyfill.prototype.isDeprecatedWebVRAvailable = function() {
  return ('getVRDevices' in navigator) || ('mozGetVRDevices' in navigator);
};

WebVRPolyfill.prototype.populateDevices = function() {
  if (this.devicesPopulated) {
    return;
  }

  // Initialize our virtual VR devices.
  var vrDisplay = null;

  // Add a Cardboard VRDisplay on compatible mobile devices
  if (this.isCardboardCompatible()) {
    vrDisplay = new CardboardVRDisplay();
    this.displays.push(vrDisplay);

    // For backwards compatibility
    if (WebVRConfig.ENABLE_DEPRECATED_API) {
      this.devices.push(new VRDisplayHMDDevice(vrDisplay));
      this.devices.push(new VRDisplayPositionSensorDevice(vrDisplay));
    }
  }

  // Add a Mouse and Keyboard driven VRDisplay for desktops/laptops
  if (!this.isMobile() && !WebVRConfig.MOUSE_KEYBOARD_CONTROLS_DISABLED) {
    vrDisplay = new MouseKeyboardVRDisplay();
    this.displays.push(vrDisplay);

    // For backwards compatibility
    if (WebVRConfig.ENABLE_DEPRECATED_API) {
      this.devices.push(new VRDisplayHMDDevice(vrDisplay));
      this.devices.push(new VRDisplayPositionSensorDevice(vrDisplay));
    }
  }

  // Uncomment to add positional tracking via webcam.
  //if (!this.isMobile() && WebVRConfig.ENABLE_DEPRECATED_API) {
  //  positionDevice = new WebcamPositionSensorVRDevice();
  //  this.devices.push(positionDevice);
  //}

  this.devicesPopulated = true;
};

WebVRPolyfill.prototype.enablePolyfill = function() {
  // Provide navigator.getVRDisplays.
  navigator.getVRDisplays = this.getVRDisplays.bind(this);

  // Provide the VRDisplay object.
  window.VRDisplay = VRDisplay;
};

WebVRPolyfill.prototype.enableDeprecatedPolyfill = function() {
  // Provide navigator.getVRDevices.
  navigator.getVRDevices = this.getVRDevices.bind(this);

  // Provide the CardboardHMDVRDevice and PositionSensorVRDevice objects.
  window.HMDVRDevice = HMDVRDevice;
  window.PositionSensorVRDevice = PositionSensorVRDevice;
};

WebVRPolyfill.prototype.getVRDisplays = function() {
  this.populateDevices();
  var displays = this.displays;
  return new Promise(function(resolve, reject) {
    try {
      resolve(displays);
    } catch (e) {
      reject(e);
    }
  });
};

WebVRPolyfill.prototype.getVRDevices = function() {
  console.warn('getVRDevices is deprecated. Please update your code to use getVRDisplays instead.');
  var self = this;
  return new Promise(function(resolve, reject) {
    try {
      if (!self.devicesPopulated) {
        if (self.nativeWebVRAvailable) {
          return navigator.getVRDisplays(function(displays) {
            for (var i = 0; i < displays.length; ++i) {
              self.devices.push(new VRDisplayHMDDevice(displays[i]));
              self.devices.push(new VRDisplayPositionSensorDevice(displays[i]));
            }
            self.devicesPopulated = true;
            resolve(self.devices);
          }, reject);
        }

        if (self.nativeLegacyWebVRAvailable) {
          return (navigator.getVRDDevices || navigator.mozGetVRDevices)(function(devices) {
            for (var i = 0; i < devices.length; ++i) {
              if (devices[i] instanceof HMDVRDevice) {
                self.devices.push(devices[i]);
              }
              if (devices[i] instanceof PositionSensorVRDevice) {
                self.devices.push(devices[i]);
              }
            }
            self.devicesPopulated = true;
            resolve(self.devices);
          }, reject);
        }
      }

      self.populateDevices();
      resolve(self.devices);
    } catch (e) {
      reject(e);
    }
  });
};

/**
 * Determine if a device is mobile.
 */
WebVRPolyfill.prototype.isMobile = function() {
  return /Android/i.test(navigator.userAgent) ||
      /iPhone|iPad|iPod/i.test(navigator.userAgent);
};

WebVRPolyfill.prototype.isCardboardCompatible = function() {
  // For now, support all iOS and Android devices.
  // Also enable the WebVRConfig.FORCE_VR flag for debugging.
  return this.isMobile() || WebVRConfig.FORCE_ENABLE_VR;
};

module.exports = WebVRPolyfill;

},{"./base.js":2,"./cardboard-vr-display.js":5,"./display-wrappers.js":8,"./mouse-keyboard-vr-display.js":15}]},{},[13]);

},{}],9:[function(require,module,exports){
var EventEmitter = require('eventemitter3');
var shaka = require('shaka-player');

var Types = {
  HLS: 1,
  DASH: 2,
  VIDEO: 3
};

var DEFAULT_BITS_PER_SECOND = 1000000;

/**
 * Supports regular video URLs (eg. mp4), as well as adaptive manifests like
 * DASH (.mpd) and soon HLS (.m3u8).
 *
 * Events:
 *   load(video): When the video is loaded.
 *   error(message): If an error occurs.
 *
 * To play/pause/seek/etc, please use the underlying video element.
 */
function AdaptivePlayer() {
  this.video = document.createElement('video');
  this.video.loop = true;
  // Enable inline video playback in iOS 10+.
  this.video.setAttribute('playsinline', true);
  this.video.setAttribute('crossorigin', 'anonymous');
}
AdaptivePlayer.prototype = new EventEmitter();

AdaptivePlayer.prototype.load = function(url) {
  var self = this;
  // TODO(smus): Investigate whether or not differentiation is best done by
  // mimeType after all. Cursory research suggests that adaptive streaming
  // manifest mime types aren't properly supported.
  //
  // For now, make determination based on extension.
  var extension = Util.getExtension(url);
  switch (extension) {
    case 'm3u8': // HLS
      this.type = Types.HLS;
      if (Util.isSafari()) {
        this.loadVideo_(url).then(function() {
          self.emit('load', self.video);
        }).catch(this.onError_.bind(this));
      } else {
        self.onError_('HLS is only supported on Safari.');
      }
      break;
    case 'mpd': // MPEG-DASH
      this.type = Types.DASH;
      this.loadShakaVideo_(url).then(function() {
        console.log('The video has now been loaded!');
        self.emit('load', self.video);
      }).catch(this.onError_.bind(this));
      break;
    default: // A regular video, not an adaptive manifest.
      this.type = Types.VIDEO;
      this.loadVideo_(url).then(function() {
        self.emit('load', self.video);
      }).catch(this.onError_.bind(this));
      break;
  }
};

AdaptivePlayer.prototype.destroy = function() {
  this.video.pause();
  this.video.src = '';
  this.video = null;
};

/*** PRIVATE API ***/

AdaptivePlayer.prototype.onError_ = function(e) {
  console.error(e);
  this.emit('error', e);
};

AdaptivePlayer.prototype.loadVideo_ = function(url) {
  var video = this.video;
  return new Promise(function(resolve, reject) {
    video.src = url;
    video.addEventListener('canplaythrough', resolve);
    video.addEventListener('error', reject);
    video.load();
  });
};

AdaptivePlayer.prototype.initShaka_ = function() {
  this.player = new shaka.Player(this.video);

  this.player.configure({
    abr: { defaultBandwidthEstimate: DEFAULT_BITS_PER_SECOND }
  });

  // Listen for error events.
  this.player.addEventListener('error', this.onError_);
};

AdaptivePlayer.prototype.loadShakaVideo_ = function(url) {
  // Install built-in polyfills to patch browser incompatibilities.
  shaka.polyfill.installAll();

  if (!shaka.Player.isBrowserSupported()) {
    console.error('Shaka is not supported on this browser.');
    return;
  }

  this.initShaka_();
  return this.player.load(url);
};

module.exports = AdaptivePlayer;

},{"eventemitter3":3,"shaka-player":4}],10:[function(require,module,exports){
/*
 * Copyright 2015 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Eyes = {
  LEFT: 1,
  RIGHT: 2
};

module.exports = Eyes;

},{}],11:[function(require,module,exports){
/*
 * Copyright 2015 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var EventEmitter = require('eventemitter3');
var TWEEN = require('tween.js');

// Constants for the focus/blur animation.
var NORMAL_SCALE = new THREE.Vector3(1, 1, 1);
var FOCUS_SCALE = new THREE.Vector3(1.2, 1.2, 1.2);
var FOCUS_DURATION = 200;

// Constants for the active/inactive animation.
var INACTIVE_COLOR = new THREE.Color(1, 1, 1);
var ACTIVE_COLOR = new THREE.Color(0.8, 0, 0);
var ACTIVE_DURATION = 100;

// Constants for opacity.
var MAX_INNER_OPACITY = 0.8;
var MAX_OUTER_OPACITY = 0.5;
var FADE_START_ANGLE_DEG = 35;
var FADE_END_ANGLE_DEG = 60;
/**
 * Responsible for rectangular hot spots that the user can interact with.
 *
 * Specific duties:
 *   Adding and removing hotspots.
 *   Rendering the hotspots (debug mode only).
 *   Notifying when hotspots are interacted with.
 * 
 * Emits the following events:
 *   click (id): a hotspot is clicked.
 *   focus (id): a hotspot is focused.
 *   blur (id): a hotspot is no longer hovered over.
 */
function HotspotRenderer(worldRenderer) {
  this.worldRenderer = worldRenderer;
  this.scene = worldRenderer.scene;

  // Note: this event must be added to document.body and not to window for it to
  // work inside iOS iframes.
  var body = document.body;
  // Bind events for hotspot interaction.
  if (!Util.isMobile()) {
    // Only enable mouse events on desktop.
    body.addEventListener('mousedown', this.onMouseDown_.bind(this), false);
    body.addEventListener('mousemove', this.onMouseMove_.bind(this), false);
    body.addEventListener('mouseup', this.onMouseUp_.bind(this), false);
  }
  body.addEventListener('touchstart', this.onTouchStart_.bind(this), false);
  body.addEventListener('touchend', this.onTouchEnd_.bind(this), false);

  // Add a placeholder for hotspots.
  this.hotspotRoot = new THREE.Object3D();
  // Align the center with the center of the camera too.
  this.hotspotRoot.rotation.y = Math.PI / 2;
  this.scene.add(this.hotspotRoot);

  // All hotspot IDs.
  this.hotspots = {};

  // Currently selected hotspots.
  this.selectedHotspots = {};

  // Hotspots that the last touchstart / mousedown event happened for.
  this.downHotspots = {};

  // For raycasting. Initialize mouse to be off screen initially.
  this.pointer = new THREE.Vector2(1, 1);
  this.raycaster = new THREE.Raycaster();
}
HotspotRenderer.prototype = new EventEmitter();

/**
 * @param pitch {Number} The latitude of center, specified in degrees, between
 * -90 and 90, with 0 at the horizon.
 * @param yaw {Number} The longitude of center, specified in degrees, between
 * -180 and 180, with 0 at the image center.
 * @param radius {Number} The radius of the hotspot, specified in meters.
 * @param distance {Number} The distance of the hotspot from camera, specified
 * in meters.
 * @param hotspotId {String} The ID of the hotspot.
 */
HotspotRenderer.prototype.add = function(pitch, yaw, radius, distance, id, image, is_stereo) {
  //console.log('HotspotRenderer.add', pitch, yaw, radius, distance, id, image);
  // If a hotspot already exists with this ID, stop.
  if (this.hotspots[id]) {
    // TODO: Proper error reporting.
    console.error('Attempt to add hotspot with existing id %s.', id);
    return;
  }
  var hotspot = this.createHotspot_(radius, distance, image, is_stereo);
  hotspot.name = id;

  // Position the hotspot based on the pitch and yaw specified.
  var quat = new THREE.Quaternion();
  quat.setFromEuler(new THREE.Euler(THREE.Math.degToRad(pitch), THREE.Math.degToRad(yaw), 0));
  hotspot.position.applyQuaternion(quat);
  hotspot.lookAt(new THREE.Vector3());
  
  this.hotspotRoot.add(hotspot);
  this.hotspots[id] = hotspot;
}

/**
 * Removes a hotspot based on the ID.
 *
 * @param ID {String} Identifier of the hotspot to be removed.
 */
HotspotRenderer.prototype.remove = function(id) {
  // If there's no hotspot with this ID, fail.
  if (!this.hotspots[id]) { 
    // TODO: Proper error reporting.
    console.error('Attempt to remove non-existing hotspot with id %s.', id);
    return;
  }
  // Remove the mesh from the scene.
  this.hotspotRoot.remove(this.hotspots[id]);

  // If this hotspot was selected, make sure it gets unselected.
  delete this.selectedHotspots[id];
  delete this.downHotspots[id];
  delete this.hotspots[id];
  this.emit('blur', id);
};

/**
 * Clears all hotspots from the pano. Often called when changing panos.
 */
HotspotRenderer.prototype.clearAll = function() {
  for (var id in this.hotspots) {
    this.remove(id);
  }
};

HotspotRenderer.prototype.getCount = function() {
  var count = 0;
  for (var id in this.hotspots) {
    count += 1;
  }
  return count;
};

HotspotRenderer.prototype.update = function(camera) {
  if (this.worldRenderer.isVRMode()) {
    this.pointer.set(0, 0);
  }
  // Update the picking ray with the camera and mouse position.
  this.raycaster.setFromCamera(this.pointer, camera);	

  // Fade hotspots out if they are really far from center to avoid overly
  // distorted visuals.
  this.fadeOffCenterHotspots_(camera);

  var hotspots = this.hotspotRoot.children;
  
  // Go through all hotspots to see if they are currently selected.
  for (var i = 0; i < hotspots.length; i++) {
    var hotspot = hotspots[i];
    //hotspot.lookAt(camera.position);
    var id = hotspot.name;
    // Check if hotspot is intersected with the picking ray.
    var intersects = this.raycaster.intersectObjects(hotspot.children);
    var isIntersected = (intersects.length > 0);

    // If newly selected, emit a focus event.
    if (isIntersected && !this.selectedHotspots[id]) {
      this.emit('focus', id);
      this.focus_(id);
    }
    // If no longer selected, emit a blur event.
    if (!isIntersected && this.selectedHotspots[id]) {
      this.emit('blur', id);
      this.blur_(id);
    }
    // Update the set of selected hotspots.
    if (isIntersected) {
      this.selectedHotspots[id] = true;
    } else {
      delete this.selectedHotspots[id];
    }
  }
};

/**
 * Toggle whether or not hotspots are visible.
 */
HotspotRenderer.prototype.setVisibility = function(isVisible) {
  this.hotspotRoot.visible = isVisible;
};

HotspotRenderer.prototype.onTouchStart_ = function(e) {
  // In VR mode, don't touch the pointer position.
  if (!this.worldRenderer.isVRMode()) {
    this.updateTouch_(e);
  }

  // Force a camera update to see if any hotspots were selected.
  this.update(this.worldRenderer.camera);

  this.downHotspots = {};
  for (var id in this.selectedHotspots) {
    this.downHotspots[id] = true;
    this.down_(id);
  }
  return false;
};

HotspotRenderer.prototype.onTouchEnd_ = function(e) {
  // If no hotspots are pressed, emit an empty click event.
  if (!this.downHotspots) {
    this.emit('click');
    return;
  }

  // Only emit a click if the finger was down on the same hotspot before.
  for (var id in this.downHotspots) {
    this.emit('click', id);
    this.up_(id);
    e.preventDefault();
  }
};

HotspotRenderer.prototype.updateTouch_ = function(e) {
  var size = this.getSize_();
  var touch = e.touches[0];
	this.pointer.x = (touch.clientX / size.width) * 2 - 1;
	this.pointer.y = - (touch.clientY / size.height) * 2 + 1;	
};

HotspotRenderer.prototype.onMouseDown_ = function(e) {
  this.updateMouse_(e);

  this.downHotspots = {};
  for (var id in this.selectedHotspots) {
    this.downHotspots[id] = true;
    this.down_(id);
  }
};

HotspotRenderer.prototype.onMouseMove_ = function(e) {
  this.updateMouse_(e);
};

HotspotRenderer.prototype.onMouseUp_ = function(e) {
  this.updateMouse_(e);

  // If no hotspots are pressed, emit an empty click event.
  if (!this.downHotspots) {
    this.emit('click');
    return;
  }

  // Only emit a click if the mouse was down on the same hotspot before.
  for (var id in this.selectedHotspots) {
    if (id in this.downHotspots) {
      this.emit('click', id);
      this.up_(id);
    }
  }
};

HotspotRenderer.prototype.updateMouse_ = function(e) {
  var size = this.getSize_();
	this.pointer.x = (e.clientX / size.width) * 2 - 1;
	this.pointer.y = - (e.clientY / size.height) * 2 + 1;	
};

HotspotRenderer.prototype.getSize_ = function() {
  var canvas = this.worldRenderer.renderer.domElement;
  return this.worldRenderer.renderer.getSize();
};

HotspotRenderer.prototype.createHotspot_ = function(radius, distance, image, is_stereo) {
  var innerGeometry = new THREE.CircleGeometry(radius, 32);

  var innerMaterial = new THREE.MeshBasicMaterial({
    color: 0xffffff, side: THREE.DoubleSide, transparent: true,
    opacity: MAX_INNER_OPACITY, depthTest: false
  });
  if(image&&image!="0"){
    var loader = new THREE.TextureLoader();
    loader.crossOrigin = 'anonymous';
    loader.load(image, function(texture){
      texture.wrapS = texture.wrapT = THREE.RepeatWrapping;
      if(is_stereo&&is_stereo!="0"){
        texture.repeat.set(0.5, 0.5);
      }else{
        texture.repeat.set(0.5, 1);
      }
      innerMaterial.map = texture;
      innerMaterial.map.needsUpdate = true;
      innerMaterial.needsUpdate = true;
    });
  }
  var inner = new THREE.Mesh(innerGeometry, innerMaterial);
  inner.name = 'inner';

  var outerMaterial = new THREE.MeshBasicMaterial({
    color: 0xffffff, side: THREE.DoubleSide, transparent: true,
    opacity: MAX_OUTER_OPACITY, depthTest: false
  });
  var outerGeometry = new THREE.RingGeometry(radius * 0.85, radius, 32);
  var outer = new THREE.Mesh(outerGeometry, outerMaterial);
  outer.name = 'outer';

  // Position at the extreme end of the sphere.
  var hotspot = new THREE.Object3D();
  hotspot.position.z = -distance;
  hotspot.scale.set(NORMAL_SCALE);

  hotspot.add(inner);
  hotspot.add(outer);

  return hotspot;
};

/**
 * Large aspect ratios tend to cause visually jarring distortions on the sides.
 * Here we fade hotspots out to avoid them.
 */
HotspotRenderer.prototype.fadeOffCenterHotspots_ = function(camera) {
  var lookAt = new THREE.Vector3(1, 0, 0);
  lookAt.applyQuaternion(camera.quaternion);
  // Take into account the camera parent too.
  lookAt.applyQuaternion(camera.parent.quaternion);

  // Go through each hotspot. Calculate how far off center it is.
  for (var id in this.hotspots) {
    var hotspot = this.hotspots[id];
    var angle = hotspot.position.angleTo(lookAt);
    var angleDeg = THREE.Math.radToDeg(angle);
    var isVisible = angleDeg < 45;
    var opacity;
    if (angleDeg < FADE_START_ANGLE_DEG) {
      opacity = 1;
    } else if (angleDeg > FADE_END_ANGLE_DEG) {
      opacity = 0;
    } else {
      // We are in the case START < angle < END. Linearly interpolate.
      var range = FADE_END_ANGLE_DEG - FADE_START_ANGLE_DEG;
      var value = FADE_END_ANGLE_DEG - angleDeg;
      opacity = value / range;
    }

    // Opacity a function of angle. If angle is large, opacity is zero. At some
    // point, ramp opacity down.
    this.setOpacity_(id, opacity);
  }
};

HotspotRenderer.prototype.focus_ = function(id) {
  var hotspot = this.hotspots[id];

  // Tween scale of hotspot.
  this.tween = new TWEEN.Tween(hotspot.scale).to(FOCUS_SCALE, FOCUS_DURATION)
      .easing(TWEEN.Easing.Quadratic.InOut)
      .start();
};

HotspotRenderer.prototype.blur_ = function(id) {
  var hotspot = this.hotspots[id];

  this.tween = new TWEEN.Tween(hotspot.scale).to(NORMAL_SCALE, FOCUS_DURATION)
      .easing(TWEEN.Easing.Quadratic.InOut)
      .start();
};

HotspotRenderer.prototype.down_ = function(id) {
  // Become active.
  var hotspot = this.hotspots[id];
  var outer = hotspot.getObjectByName('inner');

  this.tween = new TWEEN.Tween(outer.material.color).to(ACTIVE_COLOR, ACTIVE_DURATION)
      .start();
};

HotspotRenderer.prototype.up_ = function(id) {
  // Become inactive.
  var hotspot = this.hotspots[id];
  var outer = hotspot.getObjectByName('inner');

  this.tween = new TWEEN.Tween(outer.material.color).to(INACTIVE_COLOR, ACTIVE_DURATION)
      .start();
};

HotspotRenderer.prototype.setOpacity_ = function(id, opacity) {
  var hotspot = this.hotspots[id];
  var outer = hotspot.getObjectByName('outer');
  var inner = hotspot.getObjectByName('inner');

  outer.material.opacity = opacity * MAX_OUTER_OPACITY;
  inner.material.opacity = opacity * MAX_INNER_OPACITY;
};

module.exports = HotspotRenderer;

},{"eventemitter3":3,"tween.js":6}],12:[function(require,module,exports){
/*
 * Copyright 2015 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var EventEmitter = require('eventemitter3');
var Message = require('../message');


/**
 * Sits in an embedded iframe, receiving messages from a containing
 * iFrame. This facilitates an API which provides the following features:
 *
 *    Playing and pausing content.
 *    Adding hotspots.
 *    Sending messages back to the containing iframe when hotspot is clicked
 *    Sending analytics events to containing iframe.
 *    Receiving DeviceMotion events and resynthesizing them in this iframe
 *        (workaround for https://bugs.webkit.org/show_bug.cgi?id=150072).
 */
function IFrameMessageReceiver() {
  window.addEventListener('message', this.onMessage_.bind(this), false);
}
IFrameMessageReceiver.prototype = new EventEmitter();

IFrameMessageReceiver.prototype.onMessage_ = function(event) {
  //console.log('onMessage_', event);

  var message = event.data;
  var type = message.type.toLowerCase();
  var data = message.data;
  if(type == Message.SET_CONTENT){
    data.callback = function(){
      Util.sendParentMessage({type:type});
    };
  }
  switch (type) {
    case Message.DEVICE_MOTION:
      // Synthesize a DeviceMotion event.
      this.synthesizeDeviceMotionEvent_(message.deviceMotionEvent);
      break;
    case Message.SET_CONTENT:
    case Message.SET_VOLUME:
    case Message.ADD_HOTSPOT:
    case Message.PLAY:
    case Message.PAUSE:
    case Message.SETUP_NAVIGATION:
    case Message.ENABLE_MULTIPLAYER_MODE:
    case Message.JOIN_MULTIPLAYER_ROOM:
    case Message.LEAVE_MULTIPLAYER_ROOM:
    case Message.SET_MULTIPLAYER_ME:
      // TODO(smus): Emit the event 
      this.emit(type, data);
      break;
    default:
      console.warn('Got unknown message of type %s from %s', type, Message.SET_CONTENT, message.origin);
  }
};

IFrameMessageReceiver.prototype.synthesizeDeviceMotionEvent_ = function(eventData) {
  var type = 'devicemotion-iframe';
  var canBubble = false;
  var cancelable = false;

  var dme = document.createEvent('DeviceMotionEvent');
  dme.initDeviceMotionEvent(type, canBubble, cancelable,
      eventData.acceleration,
      eventData.accelerationIncludingGravity,
      eventData.rotationRate,
      eventData.interval);

  window.dispatchEvent(dme);
};

module.exports = IFrameMessageReceiver;

},{"../message":23,"eventemitter3":3}],13:[function(require,module,exports){
/*
 * Copyright 2015 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

/**
 * Shows a 2D loading indicator while various pieces of EmbedVR load.
 */
function LoadingIndicator() {
  this.el = this.build_();
  document.body.appendChild(this.el);
  this.show();
}

LoadingIndicator.prototype.build_ = function() {
  var overlay = document.createElement('div');
  var s = overlay.style;
  s.position = 'fixed';
  s.top = 0;
  s.left = 0;
  s.width = '100%';
  s.height = '100%';
  s.background = '#eee';
  var img = document.createElement('img');
  img.src = 'images/loading.gif';
  var s = img.style;
  s.position = 'absolute';
  s.top = '50%';
  s.left = '50%';
  s.transform = 'translate(-50%, -50%)';

  overlay.appendChild(img);
  return overlay;
};

LoadingIndicator.prototype.hide = function() {
  this.el.style.display = 'none';
};

LoadingIndicator.prototype.show = function() {
  this.el.style.display = 'block';
};

module.exports = LoadingIndicator;

},{}],14:[function(require,module,exports){
/*
 * Copyright 2015 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

// Initialize the loading indicator as quickly as possible to give the user
// immediate feedback.
var LoadingIndicator = require('./loading-indicator');
var loadIndicator = new LoadingIndicator();

var ES6Promise = require('es6-promise');
// Polyfill ES6 promises for IE.
ES6Promise.polyfill();

var IFrameMessageReceiver = require('./iframe-message-receiver');
var Message = require('../message');
var SceneInfo = require('./scene-info');
var Stats = require('../../node_modules/stats-js/build/stats.min');
var Util = require('../util');
var WebVRPolyfill = require('webvr-polyfill');
var WorldRenderer = require('./world-renderer');

var receiver = new IFrameMessageReceiver();
receiver.on(Message.PLAY, onPlayRequest);
receiver.on(Message.PAUSE, onPauseRequest);
receiver.on(Message.ADD_HOTSPOT, onAddHotspot);
receiver.on(Message.SETUP_NAVIGATION, onAddNavigation);
receiver.on(Message.ENABLE_MULTIPLAYER_MODE, enableMultiplayerMode);
receiver.on(Message.JOIN_MULTIPLAYER_ROOM, joinMultiplayerRoom);
receiver.on(Message.LEAVE_MULTIPLAYER_ROOM, leaveMultiplayerRoom);
receiver.on(Message.SET_MULTIPLAYER_ME, setMultiplayerMe);
receiver.on(Message.SET_CONTENT, onSetContent);
receiver.on(Message.SET_VOLUME, onSetVolume);

window.addEventListener('load', onLoad);

var stats = new Stats();

var worldRenderer = new WorldRenderer();
worldRenderer.on('error', onRenderError);
worldRenderer.on('load', onRenderLoad);
worldRenderer.on('modechange', onModeChange);
worldRenderer.hotspotRenderer.on('click', onHotspotClick);

window.worldRenderer = worldRenderer;

var isReadySent = false;

function onLoad() {
  if (!Util.isWebGLEnabled()) {
    showError('WebGL not supported.');
    return;
  }

  // Load the scene.
  var scene = SceneInfo.loadFromGetParams();
  worldRenderer.setScene(scene);

  if (scene.isDebug) {
    // Show stats.
    showStats();
  }

  if (scene.isYawOnly) {
    WebVRConfig = window.WebVRConfig || {};
    WebVRConfig.YAW_ONLY = true;
  }

  requestAnimationFrame(loop);
}


function onVideoTap() {
  worldRenderer.videoProxy.play();
  hidePlayButton();

  // Prevent multiple play() calls on the video element.
  document.body.removeEventListener('touchend', onVideoTap);
}

function onRenderLoad(event) {
  if (event.videoElement) {
    // On mobile, tell the user they need to tap to start. Otherwise, autoplay.
    if (Util.isMobile()) {
      // Tell user to tap to start.
      showPlayButton();
      document.body.addEventListener('touchend', onVideoTap);
    } else {
      event.videoElement.play();
    }

    // Attach to pause and play events, to notify the API.
    event.videoElement.addEventListener('pause', onPause);
    event.videoElement.addEventListener('play', onPlay);
  }
  // Hide loading indicator.
  loadIndicator.hide();

  // Autopan only on desktop, for photos only, and only if autopan is enabled.
  if (!Util.isMobile() && !worldRenderer.sceneInfo.video &&
      !worldRenderer.sceneInfo.isAutopanOff) {
    worldRenderer.autopan();
  }

  // Notify the API that we are ready, but only do this once.
  if (!isReadySent) {
    Util.sendParentMessage({
      type: 'ready' 
    });
    isReadySent = true;
  }
}

function onPlayRequest() {
  if (!worldRenderer.videoProxy) {
    onApiError('Attempt to pause, but no video found.');
    return;
  }
  worldRenderer.videoProxy.play();
}

function onPauseRequest() {
  if (!worldRenderer.videoProxy) {
    onApiError('Attempt to pause, but no video found.');
    return;
  }
  worldRenderer.videoProxy.pause();
}

function onAddHotspot(e) {
  // console.log('onAddHotspot', e);
  // TODO: Implement some validation?

  var pitch = parseFloat(e.pitch);
  var yaw = parseFloat(e.yaw);
  var radius = parseFloat(e.radius);
  var distance = parseFloat(e.distance);
  var id = e.id;
  var image = e.image;
  var is_stereo = e.is_stereo;
  worldRenderer.hotspotRenderer.add(pitch, yaw, radius, distance, id, image, is_stereo);
  
}
function enableMultiplayerMode(){
  worldRenderer.multiplayerMode.enableMultiplayerMode();
}
function setMultiplayerMe(e){
  worldRenderer.multiplayerMode.setMe(e);
}
function joinMultiplayerRoom(e){
  worldRenderer.multiplayerMode.joinRoom(e.room);
}
function leaveMultiplayerRoom(){
  
}
function onAddNavigation(e) {
  worldRenderer.navigationRenderer.setup(e);
}
function onSetContent(e) {
  // console.log('onSetContent', e);
  // Fade to black.
  worldRenderer.sphereRenderer.setOpacity(0, 500).then(function() {
    // Then load the new scene.
    var scene = SceneInfo.loadFromAPIParams(e.contentInfo);
    // Remove all of the hotspots.
    worldRenderer.hotspotRenderer.clearAll();
    // Destroy the world
    worldRenderer.destroy();
    // Update the URL to reflect the new scene. This is important particularily
    // on iOS where we use a fake fullscreen mode.
    var url = scene.getCurrentUrl();
    //console.log('Updating url to be %s', url);
    window.history.pushState(null, 'VR View', url);
    e.callback();
    // And set the new scene.
    return worldRenderer.setScene(scene);
  }).then(function() {
    // Then fade the scene back in.
    worldRenderer.sphereRenderer.setOpacity(1, 500);
  });
}

function onSetVolume(e) {
  // Only work for video. If there's no video, send back an error.
  if (!worldRenderer.videoProxy) {
    onApiError('Attempt to set volume, but no video found.');
    return;
  }
  worldRenderer.videoProxy.setVolume(e.volumeLevel);
}

function onApiError(message) {
  console.error(message);
  Util.sendParentMessage({
    type: 'error',
    data: {message: message}
  });
}

function onModeChange(mode) {
  Util.sendParentMessage({
    type: 'modechange',
    data: {mode: mode}
  });
}

function onHotspotClick(id) {
  Util.sendParentMessage({
    type: 'click',
    data: {id: id}
  });
}

function onPlay() {
  Util.sendParentMessage({
    type: 'paused',
    data: false
  });
}

function onPause() {
  Util.sendParentMessage({
    type: 'paused',
    data: true
  });
}

function onSceneError(message) {
  showError('Loader: ' + message);
}

function onRenderError(message) {
  showError('Render: ' + message);
}

function showError(message, opt_title) {
  // Hide loading indicator.
  loadIndicator.hide();

  var error = document.querySelector('#error');
  error.classList.add('visible');
  error.querySelector('.message').innerHTML = message;

  var title = (opt_title !== undefined ? opt_title : 'Error');
  error.querySelector('.title').innerHTML = title;
}

function hideError() {
  var error = document.querySelector('#error');
  error.classList.remove('visible');
}

function showPlayButton() {
  var playButton = document.querySelector('#play-overlay');
  playButton.classList.add('visible');
}

function hidePlayButton() {
  var playButton = document.querySelector('#play-overlay');
  playButton.classList.remove('visible');
}

function showStats() {
  stats.setMode(0); // 0: fps, 1: ms

  // Align bottom-left.
  stats.domElement.style.position = 'absolute';
  stats.domElement.style.left = '0px';
  stats.domElement.style.bottom = '0px';
  document.body.appendChild(stats.domElement);
}

function loop(time) {
  stats.begin();
  // Update the video if needed.
  if (worldRenderer.videoProxy) {
    worldRenderer.videoProxy.update(time);
  }
  worldRenderer.render(time);
  stats.end();
  requestAnimationFrame(loop);
}

},{"../../node_modules/stats-js/build/stats.min":5,"../message":23,"../util":24,"./iframe-message-receiver":12,"./loading-indicator":13,"./scene-info":18,"./world-renderer":22,"es6-promise":2,"webvr-polyfill":8}],15:[function(require,module,exports){

var EventEmitter = require('eventemitter3');


function MultiplayerMode(worldRenderer) {
    this.worldRenderer = worldRenderer;
    this.camera = this.worldRenderer.camera;
}
MultiplayerMode.prototype = new EventEmitter();

MultiplayerMode.prototype.enableMultiplayerMode = function(){
    this.camera = this.worldRenderer.camera;
    this.leapMotion();
    if(this.me){
        var that = this;
        this.socket = io();
        this.socket.on("room-render-data",function(room){
            that.renderMe();
            that.renderRoom(room);
        });
        this.socket.on("room-joined",function(socketId){
            that.socketId = socketId;
        });
    }
};

MultiplayerMode.prototype.joinRoom = function(room){
    if(this.me){
        this.room = room;
        this.socket.emit("join-room",{room:room,me:{name:this.me.me.name,face:this.me.me.face},position:{x:this.camera.position.x,y:this.camera.position.y,z:this.camera.position.z},quaternion:{w:this.camera.quaternion._w,x:this.camera.quaternion._x,y:this.camera.quaternion._y,z:this.camera.quaternion._z},leftHand:[],rightHand:[]});
    }
};

MultiplayerMode.prototype.leaveRoom = function(room){
    this.socket.emit("leave-room",{room:room,me:{name:this.me.me.name,face:this.me.me.face}});
};

MultiplayerMode.prototype.renderMe = function(){
    this.me = {room:this.room,me:{name:this.me.me.name,face:this.me.me.face},position:{x:this.camera.position.x,y:this.camera.position.y,z:this.camera.position.z},quaternion:{w:this.camera.quaternion._w,x:this.camera.quaternion._x,y:this.camera.quaternion._y,z:this.camera.quaternion._z},leftHand:this.me.leftHand,rightHand:this.me.rightHand};
    this.socket.emit("room-render",this.me);
};
MultiplayerMode.prototype.update = function(){
    for(var id in MultiplayerMode.prototype.players){
        var player = MultiplayerMode.prototype.players[id];
        player.quaternion.copy(player.person.quaternion);
        //player.rotation.set(-(player.person.rotation.z),player.person.rotation.y,player.person.rotation.x);
    }
};
MultiplayerMode.prototype.players = {};
MultiplayerMode.prototype.renderRoom = function(room){
    var personCount = 0;
    for(var id in room.people){
        personCount++;
        var angle = 360*(room.people[id].number/2);
        if(id!=this.me.me.name){
            var cube;
            var person = room.people[id];
            if(!(this.players[person.me.name])){
                var geometry = new THREE.SphereGeometry( 15, 24, 24 );
                var material = new THREE.MeshPhongMaterial( {color: 0xefefef} );
                geometry.applyMatrix( new THREE.Matrix4().makeScale( 1.0, 1.2, 0.2 ) );
                cube = new THREE.Group();
                cube.cube = new THREE.Mesh( geometry, material );
                
                cube.add(cube.cube);
                cube.leftMeshes=[];
                cube.rightMeshes=[];
                cube.originalPosition = {x:100*Math.cos(angle),z:100*Math.sin(angle)};
                cube.position.set(cube.originalPosition.x,0,cube.originalPosition.z);
                cube.person = person;
                this.players[person.me.name] = cube;
                this.worldRenderer.scene.add( cube );
                var loader = new THREE.TextureLoader();
                loader.crossOrigin = 'anonymous';
                loader.load(person.me.face, function(texture){
                    texture.wrapS = texture.wrapT = THREE.RepeatWrapping;
                    texture.offset.x = 0.75;
                    cube.cube.material.map = texture;
                    texture.needsUpdate=true;
                    cube.cube.material.needsUpdate=true;
                });
            }else{
                this.players[person.me.name].person = person;
                this.renderHands(this.players[person.me.name],person,false);
            }
        }else{
            var originalPosition = {x:100*Math.cos(angle),z:100*Math.sin(angle)};
            this.camera.parent.position.set(originalPosition.x,0,originalPosition.z);
        }
    }
    for(var id in MultiplayerMode.prototype.players){
        if(!(id in room.people)){
            this.worldRenderer.scene.remove( MultiplayerMode.prototype.players[id] );
            delete MultiplayerMode.prototype.players[id];
        }
    }
};

MultiplayerMode.prototype.setMe = function(data){
    this.me = {me:{name:data.name,face:data.face},position:{x:this.camera.position.x,y:this.camera.position.y,z:this.camera.position.z},quaternion:{w:this.camera.quaternion._w,x:this.camera.quaternion._x,y:this.camera.quaternion._y,z:this.camera.quaternion._z},leftHand:[],rightHand:[]};
};
MultiplayerMode.prototype.renderHands = function(object,frame,isLeap){
    var countBones = 0;
    //var countArms = 0;
    var that = this;
    if(isLeap){
        this.me.leftHand=[];
        this.me.rightHand=[];
        frame.hands.forEach(function(hand){
        //for ( var hand of frame.hands ) {
            hand.fingers.forEach(function(finger){
            //for ( var finger of hand.fingers ) {
                finger.bones.forEach(function(bone){
                //for ( var bone of finger.bones ) {
                    //if (  === 0 ) { continue; }
                    bone.center_ = bone.center();
                    bone.matrix_ = bone.matrix();
                    //var boneMesh = object.boneMeshes [ countBones ] || that.addBoneMesh( object.boneMeshes );
                    var boneMesh;
                    if(object.boneMeshes [ countBones ]){
                         boneMesh = object.boneMeshes [ countBones ];
                    }else{
                         boneMesh = that.addBoneMesh( object.boneMeshes );
                         object.add( boneMesh );
                    }
                    that.updateBoneMesh( bone, boneMesh, object, isLeap );
                    that.addHandToMe(hand.type,bone);
                    countBones++;
                });
            });
            //var arm = hand.arm;
            //arm.center_ = arm.center();
            //arm.matrix_ = arm.matrix();
            //var armMesh = object.armMeshes [ countArms++ ] || this.addBoneMesh( object.armMeshes );
            ////this.addHandToMe(hand.type,arm);
            //this.updateBoneMesh( arm, armMesh, object, isLeap );
            //armMesh.scale.set( arm.width / 4, arm.width / 2, arm.length );
        });
    }else{
        frame.leftHand.forEach(function(bone,i){
            var boneMesh;
            if(object.leftMeshes [ i ]){
                 boneMesh = object.leftMeshes [ i ];
            }else{
                 boneMesh = that.addBoneMesh( object.leftMeshes );
                 object.add( boneMesh );
            }
            that.updateBoneMesh( bone, boneMesh, object, isLeap );
        });
        frame.rightHand.forEach(function(bone,i){
             var boneMesh;
            if(object.rightMeshes [ i ]){
                 boneMesh = object.rightMeshes [ i ];
            }else{
                 boneMesh = that.addBoneMesh( object.rightMeshes );
                 object.add( boneMesh );
            }
            that.updateBoneMesh( bone, boneMesh, object, isLeap);
        });
    }
};

MultiplayerMode.prototype.addHandToMe = function( side, bone ) {
    this.me[side+"Hand"].push({center_: bone.center_});
};

MultiplayerMode.prototype.addBoneMesh = function( meshes ) {
    var geometry = new THREE.SphereGeometry( 0.4, 20, 20 );
    var material = new THREE.MeshPhongMaterial( {color: 0xefefef} );
    var mesh = new THREE.Mesh( geometry, material );
    meshes.push( mesh );
    return mesh;
};

MultiplayerMode.prototype.updateBoneMesh = function( bone, mesh, parent, isLeap) {
        if(isLeap){
            mesh.setRotationFromMatrix( new THREE.Matrix4().fromArray( bone.matrix_ ) );
            mesh.quaternion.multiply( new THREE.Quaternion().setFromEuler( new THREE.Euler( 0, 0, Math.PI / 2 ) ) );
            mesh.scale.set( bone.width/1000, bone.width/1000, bone.length);
            mesh.position.set( bone.center_[0],bone.center_[1],bone.center_[2]);
        }else{
            mesh.position.set( bone.center_[0],bone.center_[1],bone.center_[2]);
        }
};

MultiplayerMode.prototype.leapMotion = function(){
    var that = this;
    that.camera.armMeshes = [];
	that.camera.boneMeshes = [];
    
    Leap.loop({enableGestures:true,/*optimizeHMD: true,background: true*/}, function(frame){
        that.renderHands(that.camera,frame,true);
    }).use('transform', {
        //quaternion: new THREE.Quaternion().setFromEuler(new THREE.Euler((Math.PI * -0.3), 0, Math.PI, 'ZXY')),
        position: new THREE.Vector3(0, -50,-100),
        scale:100,
        vr: true,
        //effectiveParent:that.camera
    })
    /*.use('boneHand', {
      // If you already have a scene or want to create it yourself, you can pass it in here
      // Alternatively, you can pass it in whenever you want by doing
      // Leap.loopController.plugins.boneHand.scene = myScene.
        scene: this.worldRenderer.scene,
      // Display the arm
        arm: true
    })*/;
};
module.exports = MultiplayerMode;
},{"eventemitter3":3}],16:[function(require,module,exports){

var Eyes = require('./eyes');
var TemplateRenderer = require('./template-renderer');

var SceneInfo = require('./scene-info');

function NavigationRenderer(worldRenderer) {
  this.setWorld(worldRenderer);
}

NavigationRenderer.prototype = new TemplateRenderer();
NavigationRenderer.prototype.next_ = function(){
  var keys = Object.keys(this.data);
  if(this.current<keys.length-1){
    this.current++;
    this.showCurrent();
  }
};

NavigationRenderer.prototype.prev_ = function(){
  if(this.current>0){
    this.current--;
    this.showCurrent();
  }
};
NavigationRenderer.prototype.showCurrent = function(){
  var current = this.data[Object.keys(this.data)[this.current]];
  var that = this;
  var loader = new THREE.TextureLoader();
  loader.crossOrigin = 'anonymous';
  loader.load(current.image, function(texture){
    var leftTexture = texture.clone();
    var rightTexture = texture.clone();
    rightTexture.wrapS = rightTexture.wrapT = leftTexture.wrapS = leftTexture.wrapT = THREE.RepeatWrapping;
    if (current.is_stereo){
      leftTexture.repeat.set(0.8, 0.4);
      rightTexture.repeat.set(0.8,0.4);
      leftTexture.offset.set(0.05,0.05);
      rightTexture.offset.set(0.05,0.55);
    }else{
      leftTexture.repeat.set(0.8, 0.8);
      rightTexture.repeat.set(0.8, 0.8);
      leftTexture.offset.set(0.1,0.1);
      rightTexture.offset.set(0.1,0.1);
    }
    that.planeLeft.material.map = leftTexture;
    that.planeRight.material.map = rightTexture;
    that.planeLeft.material.needsUpdate=true;
    that.planeRight.material.needsUpdate=true;
    that.planeLeft.material.map.needsUpdate=true;
    that.planeRight.material.map.needsUpdate=true;
  });
};

NavigationRenderer.prototype.createNavigationPlane_ = function() {
  var geometry =  new THREE.PlaneGeometry( 0.2, 0.2, 0.01);
  var material = new THREE.MeshBasicMaterial({transparent: true, opacity: 0.9});
  var plane = new THREE.Mesh( geometry, material );
  plane.position.set(0,-0.1,-0.4);
  plane.lookAt(this.worldRenderer.camera.position);
  return plane;
};

NavigationRenderer.prototype.createNavigationButton_ = function() {
  var geometry =  new THREE.CylinderGeometry(0, 0.03, 0.03, 3, 2, false);
  var material = new THREE.MeshPhongMaterial({/*transparent: true, opacity: 0.9,*/ color: 0xb388ff});
  var button = new THREE.Mesh( geometry, material );
 // button.lookAt(this.worldRenderer.camera.position);
  return button;
};

NavigationRenderer.prototype.update_ = function(camera) {
  if (this.worldRenderer.isVRMode()) {
    this.pointer.set(0, 0);
  }
  // Update the picking ray with the camera and mouse position.
  this.raycaster.setFromCamera(this.pointer, camera);	
  
  if(this.update&&typeof this.update == "function")this.update();
  
  var elements = this.worldRenderer.scene.getObjectByName('nav').children;
  
  var intersects = this.raycaster.intersectObjects(elements);
  var isIntersected = (intersects.length > 0);
  
  // If newly selected, emit a focus event.
  if (isIntersected) {
    this.currentElement = intersects[0].object;
  }else{
    this.currentElement = false;
  }
};

NavigationRenderer.prototype.setup = function(data) {
  this.data = data;
  this.planeLeft = this.createNavigationPlane_();
  this.planeRight = this.createNavigationPlane_();
  this.planeLeft.name = "planeLeft";
  this.planeRight.name = "planeRight";
  this.navLeft = this.createNavigationButton_();
  this.navRight = this.createNavigationButton_();
  this.navLeft.name = "navLeft";
  this.navRight.name = "navRight";
  this.navLeft.position.set(-0.1,-0.075,-0.3);
  this.navRight.position.set(0.1,-0.075,-0.3);
  this.navLeft.rotation.set(0,-(Math.PI/4),Math.PI/2);
  this.navRight.rotation.set(0,Math.PI/4,-(Math.PI/2));
  //this.add_(this.navLeft,"navLeft");
  //this.add_(this.navRight,"navRight");
  
  // Display in left and right eye respectively.
  this.planeLeft.layers.set(Eyes.LEFT);
  this.planeLeft.eye = Eyes.LEFT;
  this.planeRight.layers.set(Eyes.RIGHT);
  this.planeRight.eye = Eyes.RIGHT;
  this.worldRenderer.scene.getObjectByName('nav').children = [this.planeLeft, this.planeRight,this.navLeft,this.navRight];
  this.current=0;
  this.showCurrent();
};































NavigationRenderer.prototype.focus = function(id) {
  
};

NavigationRenderer.prototype.blur = function(id) {
  
};

NavigationRenderer.prototype.down = function(id) {
  //alert("this is the click");
  // Become active.
};

NavigationRenderer.prototype.up = function(id) {
  if(this.currentElement&&this.currentElement.name){
    if(this.currentElement.name=="navLeft")this.prev_();
    if(this.currentElement.name=="navRight")this.next_();
    if(this.currentElement.name=="planeLeft"){
      var that = this;
      var data = this.data[Object.keys(this.data)[this.current]];
      this.navLeft.visible = false;
      this.navRight.visible = false; 
      this.planeRight.visible = false; 
      this.planeLeft.visible = false; 
      this.worldRenderer.sphereRenderer.setOpacity(0, 500).then(function() {
        // Then load the new scene.
        var scene = SceneInfo.loadFromAPIParams({
          image: data.image,
          preview: data.preview,
          is_stereo: data.is_stereo,
          is_autopan_off: true
        });
        // Remove all of the hotspots.
        that.worldRenderer.hotspotRenderer.clearAll();
        // Destroy the world
        that.worldRenderer.destroy();
        // Update the URL to reflect the new scene. This is important particularily
        // on iOS where we use a fake fullscreen mode.
        var url = scene.getCurrentUrl();
        //console.log('Updating url to be %s', url);
        window.history.pushState(null, 'VR View', url);
        // And set the new scene.
        return that.worldRenderer.setScene(scene);
      }).then(function() {
        // Then fade the scene back in.
        that.worldRenderer.sphereRenderer.setOpacity(1, 500).then(function(){
          that.navLeft.visible = true;  
          that.navRight.visible = true;  
          that.planeRight.visible = true; 
          that.planeLeft.visible = true; 
        });
      });
    }
  }
  // Become inactive.
};

NavigationRenderer.prototype.setOpacity = function(opacity, duration) {
  
};


NavigationRenderer.prototype.update = function() {
  
  // Fade hotspots out if they are really far from center to avoid overly
  // distorted visuals.
  // this.fadeOffCenterHotspots_(camera);
};

module.exports = NavigationRenderer;
},{"./eyes":10,"./scene-info":18,"./template-renderer":20}],17:[function(require,module,exports){
function ReticleRenderer(camera) {
  this.camera = camera;

  this.reticle = this.createReticle_();
  // In front of the hotspot itself, which is at r=0.99.
  this.reticle.position.z = -0.97;
  camera.add(this.reticle);

  this.setVisibility(false);
}

ReticleRenderer.prototype.setVisibility = function(isVisible) {
  // TODO: Tween the transition.
  this.reticle.visible = isVisible;
};

ReticleRenderer.prototype.createReticle_ = function() {
  // Make a torus.
  var geometry = new THREE.TorusGeometry(0.02, 0.005, 10, 20);
  var material = new THREE.MeshBasicMaterial({color: 0x000000});
  var torus = new THREE.Mesh(geometry, material);

  return torus;
};

module.exports = ReticleRenderer;

},{}],18:[function(require,module,exports){
/*
 * Copyright 2015 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

var CAMEL_TO_UNDERSCORE = {
  video: 'video',
  image: 'image',
  preview: 'preview',
  isStereo: 'is_stereo',
  defaultYaw: 'default_yaw',
  isYawOnly: 'is_yaw_only',
  isDebug: 'is_debug',
  isVROff: 'is_vr_off',
  isAutopanOff: 'is_autopan_off',
};

/**
 * Contains all information about a given scene.
 */
function SceneInfo(opt_params) {
  var params = opt_params || {};

  this.image = params.image;
  this.preview = params.preview;
  this.video = params.video;
  this.defaultYaw = THREE.Math.degToRad(params.defaultYaw || 0);

  this.isStereo = Util.parseBoolean(params.isStereo);
  this.isYawOnly = Util.parseBoolean(params.isYawOnly);
  this.isDebug = Util.parseBoolean(params.isDebug);
  this.isVROff = Util.parseBoolean(params.isVROff);
  this.isAutopanOff = Util.parseBoolean(params.isAutopanOff);
}

SceneInfo.loadFromGetParams = function() {
  var params = {};
  for (var camelCase in CAMEL_TO_UNDERSCORE) {
    var underscore = CAMEL_TO_UNDERSCORE[camelCase];
    params[camelCase] = Util.getQueryParameter(underscore);
  }
  var scene = new SceneInfo(params);
  if (!scene.isValid()) {
    console.warn('Invalid scene: %s', scene.errorMessage);
  }
  return scene;
};

SceneInfo.loadFromAPIParams = function(underscoreParams) {
  var params = {};
  for (var camelCase in CAMEL_TO_UNDERSCORE) {
    var underscore = CAMEL_TO_UNDERSCORE[camelCase];
    if (underscoreParams[underscore]) {
      params[camelCase] = underscoreParams[underscore];
    }
  }
  var scene = new SceneInfo(params);
  if (!scene.isValid()) {
    console.warn('Invalid scene: %s', scene.errorMessage);
  }
  return scene;
};

SceneInfo.prototype.isValid = function() {
  // Either it's an image or a video.
  if (!this.image && !this.video) {
    this.errorMessage = 'Either image or video URL must be specified.';
    return false;
  }
  if (this.image && this.video) {
    this.errorMessage = 'Both image and video URL can\'t be specified.';
    return false;
  }
  if (this.image && !this.isValidImage_(this.image)) {
    this.errorMessage = 'Invalid image URL: ' + this.image;
    return false;
  }
  this.errorMessage = null;
  return true;
};

/**
 * Generates a URL to reflect this scene.
 */
SceneInfo.prototype.getCurrentUrl = function() {
  var url = location.protocol + '//' + location.host + location.pathname + '?';
  for (var camelCase in CAMEL_TO_UNDERSCORE) {
    var underscore = CAMEL_TO_UNDERSCORE[camelCase];
    var value = this[camelCase];
    if (value !== undefined) {
      url += underscore + '=' + value + '&';
    }
  }
  // Chop off the trailing ampersand.
  return url.substring(0, url.length - 1);
};

SceneInfo.prototype.isValidImage_ = function(imageUrl) {
  return true;
};

module.exports = SceneInfo;

},{}],19:[function(require,module,exports){
/*
 * Copyright 2015 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

var Eyes = require('./eyes');
var TWEEN = require('tween.js');
var Util = require('../util');

function SphereRenderer(scene) {
  this.scene = scene;

  // Create a transparent mask.
  this.createOpacityMask_();
}

/**
 * Sets the photosphere based on the image in the source. Supports stereo and
 * mono photospheres.
 *
 * @return {Promise}
 */
SphereRenderer.prototype.setPhotosphere = function(src, opt_params) {
  return new Promise(function(resolve, reject) {
    this.resolve = resolve;
    this.reject = reject;

    var params = opt_params || {};

    this.isStereo = !!params.isStereo;
    this.src = src;

    // Load texture.
    var loader = new THREE.TextureLoader();
    loader.crossOrigin = 'anonymous';
    loader.load(src, this.onTextureLoaded_.bind(this), undefined,
                this.onTextureError_.bind(this));
  }.bind(this));
};

/**
 * @return {Promise} Yeah.
 */
SphereRenderer.prototype.set360Video = function(videoElement, opt_params) {
  return new Promise(function(resolve, reject) {
    this.resolve = resolve;
    this.reject = reject;

    var params = opt_params || {};

    this.isStereo = !!params.isStereo;

    // Load the video texture.
    var videoTexture = new THREE.VideoTexture(videoElement);
    videoTexture.minFilter = THREE.NearestFilter;
    videoTexture.magFilter = THREE.NearestFilter;
    videoTexture.format = THREE.RGBFormat;
    videoTexture.generateMipmaps = false;
    videoTexture.needsUpdate = true;

    this.onTextureLoaded_(videoTexture);
  }.bind(this));
};

/**
 * Set the opacity of the panorama.
 *
 * @param {Number} opacity How opaque we want the panorama to be. 0 means black,
 * 1 means full color.
 * @param {Number} duration Number of milliseconds the transition should take.
 *
 * @return {Promise} When the opacity change is complete.
 */
SphereRenderer.prototype.setOpacity = function(opacity, duration) {
  var scene = this.scene;
  // If we want the opacity
  var overlayOpacity = 1 - opacity;
  return new Promise(function(resolve, reject) {
    var mask = scene.getObjectByName('opacityMask');
    var tween = new TWEEN.Tween({opacity: mask.material.opacity})
        .to({opacity: overlayOpacity}, duration)
        .easing(TWEEN.Easing.Quadratic.InOut);
    tween.onUpdate(function(e) {
      mask.material.opacity = this.opacity;
    });
    tween.onComplete(resolve).start();
  });
};

SphereRenderer.prototype.onTextureLoaded_ = function(texture) {
  var sphereLeft;
  var sphereRight;
  if (this.isStereo) {
    sphereLeft = this.createPhotosphere_(texture, {offsetY: 0.5, scaleY: 0.5});
    sphereRight = this.createPhotosphere_(texture, {offsetY: 0, scaleY: 0.5});
  } else {
    sphereLeft = this.createPhotosphere_(texture);
    sphereRight = this.createPhotosphere_(texture);
  }

  // Display in left and right eye respectively.
  sphereLeft.layers.set(Eyes.LEFT);
  sphereLeft.eye = Eyes.LEFT;
  sphereRight.layers.set(Eyes.RIGHT);
  sphereRight.eye = Eyes.RIGHT;

  this.scene.getObjectByName('photo').children = [sphereLeft, sphereRight];

  this.resolve();
};

SphereRenderer.prototype.onTextureError_ = function(error) {
  this.reject('Unable to load texture from "' + this.src + '"');
};


SphereRenderer.prototype.createPhotosphere_ = function(texture, opt_params) {
  var p = opt_params || {};
  p.scaleX = p.scaleX || 1;
  p.scaleY = p.scaleY || 1;
  p.offsetX = p.offsetX || 0;
  p.offsetY = p.offsetY || 0;
  p.phiStart = p.phiStart || 0;
  p.phiLength = p.phiLength || Math.PI * 2;
  p.thetaStart = p.thetaStart || 0;
  p.thetaLength = p.thetaLength || Math.PI;

  var geometry = new THREE.SphereGeometry(1000, 48, 48,
      p.phiStart, p.phiLength, p.thetaStart, p.thetaLength);
  geometry.applyMatrix(new THREE.Matrix4().makeScale(-1, 1, 1));
  var uvs = geometry.faceVertexUvs[0];
  for (var i = 0; i < uvs.length; i ++) {
    for (var j = 0; j < 3; j ++) {
      uvs[i][j].x *= p.scaleX;
      uvs[i][j].x += p.offsetX;
      uvs[i][j].y *= p.scaleY;
      uvs[i][j].y += p.offsetY;
    }
  }

  var material = new THREE.MeshBasicMaterial({ map: texture });
  var out = new THREE.Mesh(geometry, material);
  //out.visible = false;
  //out.renderOrder = -1;
  return out;
};

SphereRenderer.prototype.createOpacityMask_ = function() {
  var geometry = new THREE.SphereGeometry(0.2, 48, 48);
  var material = new THREE.MeshBasicMaterial({
    color: 0x000000, side: THREE.DoubleSide, opacity: 0, transparent: true});
  var opacityMask = new THREE.Mesh(geometry, material);
  opacityMask.name = 'opacityMask';
  //opacityMask.renderOrder = 1;

  this.scene.add(opacityMask);
  return opacityMask;
};

module.exports = SphereRenderer;

},{"../util":24,"./eyes":10,"tween.js":6}],20:[function(require,module,exports){

var EventEmitter = require('eventemitter3');


function TemplateRenderer() {
}
TemplateRenderer.prototype = new EventEmitter();

TemplateRenderer.prototype.setWorld = function(worldRenderer){
  
  this.worldRenderer = worldRenderer;
  // Note: this event must be added to document.body and not to window for it to
  // work inside iOS iframes.
  var body = document.body;
  // Bind events for hotspot interaction.
  if (!Util.isMobile()) {
    // Only enable mouse events on desktop.
    body.addEventListener('mousedown', this.onMouseDown_.bind(this), false);
    body.addEventListener('mousemove', this.onMouseMove_.bind(this), false);
    body.addEventListener('mouseup', this.onMouseUp_.bind(this), false);
  }
  body.addEventListener('touchstart', this.onTouchStart_.bind(this), false);
  body.addEventListener('touchend', this.onTouchEnd_.bind(this), false);

  // Add a placeholder for hotspots.
  this.root = new THREE.Group();
  // Align the center with the center of the camera too.
  this.root.rotation.y = Math.PI / 2;
  this.worldRenderer.scene.add(this.root);

  // All element IDs.
  this.elements = {};

  // Currently selected elements.
  this.selectedElements = {};

  // Elements that the last touchstart / mousedown event happened for.
  this.downElements = {};

  // For raycasting. Initialize mouse to be off screen initially.
  this.pointer = new THREE.Vector2(1, 1);
  this.raycaster = new THREE.Raycaster();
  // TODO: Tween this animation.
  this.setVisibility(false);
}

TemplateRenderer.prototype.setVisibility = function(isVisible) {
  this.root.visible = isVisible;
};

TemplateRenderer.prototype.onTouchStart_ = function(e) {
  // In VR mode, don't touch the pointer position.
  if (!this.worldRenderer.isVRMode()) {
    this.updateTouch_(e);
  }

  // Force a camera update to see if any hotspots were selected.
  this.update(this.worldRenderer.camera);

  this.downElements = {};
  for (var id in this.selectedHotspots) {
    this.downElements[id] = true;
    if(this.down&&typeof this.down == "function")this.down(id);
  }
  return false;
};

TemplateRenderer.prototype.onTouchEnd_ = function(e) {
  // If no hotspots are pressed, emit an empty click event.
  
    if(this.up&&typeof this.up == "function")this.up();
};

TemplateRenderer.prototype.updateTouch_ = function(e) {
  var size = this.worldRenderer.renderer.getSize();
  var touch = e.touches[0];
	this.pointer.x = (touch.clientX / size.width) * 2 - 1;
	this.pointer.y = - (touch.clientY / size.height) * 2 + 1;	
};

TemplateRenderer.prototype.onMouseDown_ = function(e) {
  this.updateMouse_(e);
  if(this.down&&typeof this.down == "function")this.down();
};

TemplateRenderer.prototype.onMouseMove_ = function(e) {
  this.updateMouse_(e);
};

TemplateRenderer.prototype.onMouseUp_ = function(e) {
  this.updateMouse_(e);
  if(this.up&&typeof this.up == "function")this.up();
};

TemplateRenderer.prototype.updateMouse_ = function(e) {
  var size = this.worldRenderer.renderer.getSize();
	this.pointer.x = (e.clientX / size.width) * 2 - 1;
	this.pointer.y = - (e.clientY / size.height) * 2 + 1;	
};

TemplateRenderer.prototype.add_ = function(element, id/*, image, is_stereo*/) {
    // If a hotspot already exists with this ID, stop.
    if (this.elements[id]) {
      // TODO: Proper error reporting.
      console.error('Attempt to add element with existing id %s.', id);
      return;
    }
    if(element){
        element.name = id;
        this.root.add(element);
        this.elements[id] = element;
    }
};


TemplateRenderer.prototype.remove = function(id) {
  // If there's no hotspot with this ID, fail.
  if (!this.elements[id]) { 
    // TODO: Proper error reporting.
    console.error('Attempt to remove non-existing hotspot with id %s.', id);
    return;
  }
  // Remove the mesh from the scene.
  this.root.remove(this.elements[id]);

  // If this hotspot was selected, make sure it gets unselected.
  delete this.selectedElements[id];
  delete this.downElements[id];
  delete this.elements[id];
  this.emit('blur', id);
};

/**
 * Clears all hotspots from the pano. Often called when changing panos.
 */
TemplateRenderer.prototype.clearAll = function() {
  for (var id in this.elements) {
    this.remove(id);
  }
};

TemplateRenderer.prototype.getCount = function() {
  var count = 0;
  for (var id in this.elements) {
    count += 1;
  }
  return count;
};

module.exports = TemplateRenderer;
},{"eventemitter3":3}],21:[function(require,module,exports){
var Util = require('../util');

/**
 * A proxy class for working around the fact that as soon as a video is play()ed
 * on iOS, Safari auto-fullscreens the video.
 *
 * TODO(smus): The entire raison d'etre for this class is to work around this
 * issue. Once Safari implements some way to suppress this fullscreen player, we
 * can remove this code.
 */
function VideoProxy(videoElement) {
  this.videoElement = videoElement;
  // True if we're currently manually advancing the playhead (only on iOS).
  this.isFakePlayback = false;

  // When the video started playing.
  this.startTime = null;
}

VideoProxy.prototype.play = function() {
  if (Util.isIOS9OrLess()) {
    this.startTime = performance.now();
    this.isFakePlayback = true;

    // Make an audio element to playback just the audio part.
    this.audioElement = new Audio();
    this.audioElement.src = this.videoElement.src;
    this.audioElement.play();
  } else {
    this.videoElement.play().then(function(e) {
      console.log('Playing video.', e);
    });
  }
};

VideoProxy.prototype.pause = function() {
  if (Util.isIOS9OrLess() && this.isFakePlayback) {
    this.isFakePlayback = true;

    this.audioElement.pause();
  } else {
    this.videoElement.pause();
  }
};

VideoProxy.prototype.setVolume = function(volumeLevel) {
  if (this.videoElement) {
    // On iOS 10, the VideoElement.volume property is read-only. So we special
    // case muting and unmuting.
    if (Util.isIOS()) {
      this.videoElement.muted = (volumeLevel === 0);
    } else {
      this.videoElement.volume = volumeLevel;
    }
  }
  if (this.audioElement) {
    this.audioElement.volume = volumeLevel;
  }
};

/**
 * Called on RAF to progress playback.
 */
VideoProxy.prototype.update = function() {
  // Fakes playback for iOS only.
  if (!this.isFakePlayback) {
    return;
  }
  var duration = this.videoElement.duration;
  var now = performance.now();
  var delta = now - this.startTime;
  var deltaS = delta / 1000;
  this.videoElement.currentTime = deltaS;

  // Loop through the video
  if (deltaS > duration) {
    this.startTime = now;
    this.videoElement.currentTime = 0;
    // Also restart the audio.
    this.audioElement.currentTime = 0;
  }
};

module.exports = VideoProxy;

},{"../util":24}],22:[function(require,module,exports){
/*
 * Copyright 2016 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var AdaptivePlayer = require('./adaptive-player');
var EventEmitter = require('eventemitter3');
var Eyes = require('./eyes');
var HotspotRenderer = require('./hotspot-renderer');
var ReticleRenderer = require('./reticle-renderer');
var NavigationRenderer = require('./navigation-renderer');
var MultiplayerMode = require('./multiplayer-mode');
var SphereRenderer = require('./sphere-renderer');
var TWEEN = require('tween.js');
var Util = require('../util');
var VideoProxy = require('./video-proxy');
var WebVRManager = require('webvr-boilerplate');

var AUTOPAN_DURATION = 3000;
var AUTOPAN_ANGLE = 0.4;


/**
 * The main WebGL rendering entry point. Manages the scene, camera, VR-related
 * rendering updates. Interacts with the WebVRManager.
 *
 * Coordinates the other renderers: SphereRenderer, HotspotRenderer,
 * ReticleRenderer.
 *
 * Also manages the AdaptivePlayer and VideoProxy.
 *
 * Emits the following events:
 *   load: when the scene is loaded.
 *   error: if there is an error loading the scene.
 *   modechange(Boolean isVR): if the mode (eg. VR, fullscreen, etc) changes.
 */
function WorldRenderer() {
  this.init_();

  this.sphereRenderer = new SphereRenderer(this.scene);
  this.reticleRenderer = new ReticleRenderer(this.camera);
  this.hotspotRenderer = new HotspotRenderer(this);
  this.navigationRenderer = new NavigationRenderer(this);
  this.multiplayerMode = new MultiplayerMode(this);
  this.hotspotRenderer.on('focus', this.onHotspotFocus_.bind(this));
  this.hotspotRenderer.on('blur', this.onHotspotBlur_.bind(this));
}
WorldRenderer.prototype = new EventEmitter();

WorldRenderer.prototype.render = function(time) {
  this.controls.update();
  this.hotspotRenderer.update(this.camera);
  this.navigationRenderer.update_(this.camera);
  this.multiplayerMode.update();
  TWEEN.update(time);
  this.effect.render(this.scene, this.camera);
};

/**
 * @return {Promise} When the scene is fully loaded.
 */
WorldRenderer.prototype.setScene = function(scene) {
  var self = this;
  var promise = new Promise(function(resolve, reject) {
    self.sceneResolve = resolve;
    self.sceneReject = reject;
  });

  if (!scene || !scene.isValid()) {
    this.didLoadFail_(scene.errorMessage);
    return;
  }

  var params = {
    isStereo: scene.isStereo,
  };
  this.setDefaultYaw_(scene.defaultYaw || 0);

  // Disable VR mode if explicitly disabled, or if we're loading a video on iOS
  // 9 or earlier.
  if (scene.isVROff || (scene.video && Util.isIOS9OrLess())) {
    this.manager.setVRCompatibleOverride(false);
  }

  // Set various callback overrides in iOS.
  if (Util.isIOS()) {
    this.manager.setFullscreenCallback(function() {
      Util.sendParentMessage({type: 'enter-fullscreen'});
    });
    this.manager.setExitFullscreenCallback(function() {
      Util.sendParentMessage({type: 'exit-fullscreen'});
    });
    this.manager.setVRCallback(function() {
      Util.sendParentMessage({type: 'enter-vr'});
    });
  }

  // If we're dealing with an image, and not a video.
  if (scene.image && !scene.video) {
    if (scene.preview) {
      // First load the preview.
      this.sphereRenderer.setPhotosphere(scene.preview, params).then(function() {
        // As soon as something is loaded, emit the load event to hide the
        // loading progress bar.
        self.didLoad_();
        // Then load the full resolution image.
        self.sphereRenderer.setPhotosphere(scene.image, params);
      }).catch(self.didLoadFail_.bind(self));
    } else {
      // No preview -- go straight to rendering the full image.
      this.sphereRenderer.setPhotosphere(scene.image, params).then(function() {
        self.didLoad_();
      }).catch(self.didLoadFail_.bind(self));
    }
  } else if (scene.video) {
    if (Util.isIE11()) {
      // On IE 11, if an 'image' param is provided, load it instead of showing
      // an error.
      //
      // TODO(smus): Once video textures are supported, remove this fallback.
      if (scene.image) {
        this.sphereRenderer.setPhotosphere(scene.image, params).then(function() {
          self.didLoad_();
        }).catch(self.didLoadFail_.bind(self));
      } else {
        this.didLoadFail_('Video is not supported on IE11.');
      }
    } else {
      this.player = new AdaptivePlayer();
      this.player.on('load', function(videoElement) {
        self.sphereRenderer.set360Video(videoElement, params).then(function() {
          self.didLoad_({videoElement: videoElement});
        }).catch(self.didLoadFail_.bind(self));
      });
      this.player.on('error', function(error) {
        self.didLoadFail_('Video load error: ' + error);
      });
      this.player.load(scene.video);

      this.videoProxy = new VideoProxy(this.player.video);
    }
  }

  this.sceneInfo = scene;
 // console.log('Loaded scene', scene);

  return promise;
};

WorldRenderer.prototype.isVRMode = function() {
  return !!this.vrDisplay && this.vrDisplay.isPresenting;
};

WorldRenderer.prototype.destroy = function() {
  if (this.player) {
    this.player.removeAllListeners();
    this.player.destroy();
    this.player = null;
  }
}

WorldRenderer.prototype.didLoad_ = function(opt_event) {
  var event = opt_event || {};
  this.emit('load', event);
  if (this.sceneResolve) {
    this.sceneResolve();
  }
};

WorldRenderer.prototype.didLoadFail_ = function(message) {
  this.emit('error', message);
  if (this.sceneReject) {
    this.sceneReject(message);
  }
};

/**
 * Sets the default yaw.
 * @param {Number} angleRad The yaw in radians.
 */
WorldRenderer.prototype.setDefaultYaw_ = function(angleRad) {
  // Rotate the camera parent to take into account the scene's rotation.
  // By default, it should be at the center of the image.
  //this.camera.parent.rotation.y = (Math.PI / 2.0) + angleRad;
};

/**
 * Do the initial camera tween to rotate the camera, giving an indication that
 * there is live content there (on desktop only).
 */
WorldRenderer.prototype.autopan = function(duration) {
  var targetY = this.camera.parent.rotation.y - AUTOPAN_ANGLE;
  var tween = new TWEEN.Tween(this.camera.parent.rotation)
      .to({y: targetY}, AUTOPAN_DURATION)
      .easing(TWEEN.Easing.Quadratic.Out)
      .start();
};

WorldRenderer.prototype.init_ = function() {
  var container = document.querySelector('body');
  var aspect = window.innerWidth / window.innerHeight;
  var camera = new THREE.PerspectiveCamera(75, aspect, 0.000000001, 500);
  camera.layers.enable(1);

  var cameraDummy = new THREE.Object3D();
  cameraDummy.add(camera);

  // Antialiasing disabled to improve performance.
  var renderer = new THREE.WebGLRenderer({antialias: true});
  renderer.setClearColor(0x000000, 0);
  renderer.setSize(window.innerWidth, window.innerHeight);
  renderer.setPixelRatio(window.devicePixelRatio);

  container.appendChild(renderer.domElement);

  var controls = new THREE.VRControls(camera);
  var effect = new THREE.VREffect(renderer);

  // Disable eye separation.
  effect.scale = 0;
  effect.setSize(window.innerWidth, window.innerHeight);

  this.camera = camera;
  this.renderer = renderer;
  this.effect = effect;
  this.controls = controls;
  this.manager = new WebVRManager(renderer, effect, {predistorted: false});

  this.scene = this.createScene_();
  this.scene.add(this.camera.parent);


  // Watch the resize event.
  window.addEventListener('resize', this.onResize_.bind(this));

  // Prevent context menu.
  window.addEventListener('contextmenu', this.onContextMenu_.bind(this));

  window.addEventListener('vrdisplaypresentchange',
                          this.onVRDisplayPresentChange_.bind(this));
};

WorldRenderer.prototype.onResize_ = function() {
  this.effect.setSize(window.innerWidth, window.innerHeight);
  this.camera.aspect = window.innerWidth / window.innerHeight;
  this.camera.updateProjectionMatrix();
};

WorldRenderer.prototype.onVRDisplayPresentChange_ = function(e) {
  console.log('onVRDisplayPresentChange_');
  this.vrDisplay = e.detail.vrdisplay;
  var isVR = this.isVRMode();

  // If the mode changed to VR and there is at least one hotspot, show reticle.
  //var isReticleVisible = isVR;
  this.reticleRenderer.setVisibility(isVR);
  //console.log('Mode changed and reticle visibility is now: %s', isReticleVisible);

  // Resize the renderer for good measure.
  this.onResize_();

  // Analytics.
  if (window.analytics) {
    analytics.logModeChanged(isVR);
  }

  // When exiting VR mode, make sure we emit back an exit-fullscreen event.
  if (!isVR && Util.isIOS()) {
    Util.sendParentMessage({type: 'exit-fullscreen'});
  }

  // Emit a mode change event back to any listeners.
  this.emit('modechange', isVR);
};

WorldRenderer.prototype.createScene_ = function(opt_params) {
  var scene = new THREE.Scene();

  // Add a group for the photosphere.
  var photoGroup = new THREE.Object3D();
  photoGroup.name = 'photo';
  scene.add(photoGroup);

  // Add a group for the navigation.
  var navGroup = new THREE.Object3D();
  navGroup.name = 'nav';
  scene.add(navGroup);
  
  scene.add(new THREE.PointLight(0xFFFFFF));
  return scene;
};

WorldRenderer.prototype.onHotspotFocus_ = function(id) {
  //console.log('onHotspotFocus_', id);
  // Set the default cursor to be a pointer.
  this.setCursor_('pointer');
};

WorldRenderer.prototype.onHotspotBlur_ = function(id) {
  //console.log('onHotspotBlur_', id);
  // Reset the default cursor to be the default one.
  this.setCursor_('');
};

WorldRenderer.prototype.setCursor_ = function(cursor) {
  this.renderer.domElement.style.cursor = cursor;
};

WorldRenderer.prototype.onContextMenu_ = function(e) {
  e.preventDefault();
  e.stopPropagation();
  return false;
};


module.exports = WorldRenderer;

},{"../util":24,"./adaptive-player":9,"./eyes":10,"./hotspot-renderer":11,"./multiplayer-mode":15,"./navigation-renderer":16,"./reticle-renderer":17,"./sphere-renderer":19,"./video-proxy":21,"eventemitter3":3,"tween.js":6,"webvr-boilerplate":7}],23:[function(require,module,exports){
/**
 * Messages from the API to the embed.
 */
var Message = {
  PLAY: 'play',
  PAUSE: 'pause',
  ADD_HOTSPOT: 'addhotspot',
  SET_CONTENT: 'setimage',
  SET_VOLUME: 'setvolume',
  DEVICE_MOTION: 'devicemotion',
  SETUP_NAVIGATION: 'navigation',
  ENABLE_MULTIPLAYER_MODE: 'multiplayer-enable',
  JOIN_MULTIPLAYER_ROOM: 'multiplayer-join',
  LEAVE_MULTIPLAYER_ROOM: 'multiplayer-leave',
  SET_MULTIPLAYER_ME: 'multiplayer-me'
};
var Callbacks = {};
for(type in Message){
  Callbacks[Message[type]] = function(){};
}
Message.callbacks = Callbacks;
module.exports = Message;

},{}],24:[function(require,module,exports){
/*
 * Copyright 2015 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

Util = window.Util || {};

Util.isDataURI = function(src) {
  return src && src.indexOf('data:') == 0;
};

Util.generateUUID = function() {
  function s4() {
    return Math.floor((1 + Math.random()) * 0x10000)
    .toString(16)
    .substring(1);
  }
  return s4() + s4() + '-' + s4() + '-' + s4() + '-' +
    s4() + '-' + s4() + s4() + s4();
};

Util.isMobile = function() {
  var check = false;
  (function(a){if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4)))check = true})(navigator.userAgent||navigator.vendor||window.opera);
  return check;
};

Util.isIOS = function() {
  return /(iPad|iPhone|iPod)/g.test(navigator.userAgent);
};

Util.isSafari = function() {
  return /^((?!chrome|android).)*safari/i.test(navigator.userAgent);
};

Util.cloneObject = function(obj) {
  var out = {};
  for (key in obj) {
    out[key] = obj[key];
  }
  return out;
};

Util.hashCode = function(s) {
  return s.split("").reduce(function(a,b){a=((a<<5)-a)+b.charCodeAt(0);return a&a},0);
};

Util.loadTrackSrc = function(context, src, callback, opt_progressCallback) {
  var request = new XMLHttpRequest();
  request.open('GET', src, true);
  request.responseType = 'arraybuffer';

  // Decode asynchronously.
  request.onload = function() {
    context.decodeAudioData(request.response, function(buffer) {
      callback(buffer);
    }, function(e) {
      console.error(e);
    });
  };
  if (opt_progressCallback) {
    request.onprogress = function(e) {
      var percent = e.loaded / e.total;
      opt_progressCallback(percent);
    };
  }
  request.send();
};

Util.isPow2 = function(n) {
  return (n & (n - 1)) == 0;
};

Util.capitalize = function(s) {
  return s.charAt(0).toUpperCase() + s.slice(1);
};

Util.isIFrame = function() {
  try {
    return window.self !== window.top;
  } catch (e) {
    return true;
  }
};

// From http://goo.gl/4WX3tg
Util.getQueryParameter = function(name) {
  name = name.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
  var regex = new RegExp("[\\?&]" + name + "=([^&#]*)"),
      results = regex.exec(location.search);
  return results === null ? "" : decodeURIComponent(results[1].replace(/\+/g, " "));
};


// From http://stackoverflow.com/questions/11871077/proper-way-to-detect-webgl-support.
Util.isWebGLEnabled = function() {
  var canvas = document.createElement('canvas');
  try { gl = canvas.getContext("webgl"); }
  catch (x) { gl = null; }

  if (gl == null) {
    try { gl = canvas.getContext("experimental-webgl"); experimental = true; }
    catch (x) { gl = null; }
  }
  return !!gl;
};

Util.clone = function(obj) {
  return JSON.parse(JSON.stringify(obj));
};

// From http://stackoverflow.com/questions/10140604/fastest-hypotenuse-in-javascript
Util.hypot = Math.hypot || function(x, y) {
  return Math.sqrt(x*x + y*y);
};

// From http://stackoverflow.com/a/17447718/693934
Util.isIE11 = function() {
  return navigator.userAgent.match(/Trident/);
};

Util.getRectCenter = function(rect) {
  return new THREE.Vector2(rect.x + rect.width/2, rect.y + rect.height/2);
};

Util.getScreenWidth = function() {
  return Math.max(window.screen.width, window.screen.height) *
      window.devicePixelRatio;
};

Util.getScreenHeight = function() {
  return Math.min(window.screen.width, window.screen.height) *
      window.devicePixelRatio;
};

Util.isIOS9OrLess = function() {
  if (!Util.isIOS()) {
    return false;
  }
  var re = /(iPhone|iPad|iPod) OS ([\d_]+)/;
  var iOSVersion = navigator.userAgent.match(re);
  if (!iOSVersion) {
    return false;
  }
  // Get the last group.
  var versionString = iOSVersion[iOSVersion.length - 1];
  var majorVersion = parseFloat(versionString);
  return majorVersion <= 9;
};

Util.getExtension = function(url) {
  return url.split('.').pop();
};

Util.createGetParams = function(params) {
  var out = '?';
  for (var k in params) {
    var paramString = k + '=' + params[k] + '&';
    out += paramString;
  }
  // Remove the trailing ampersand.
  out.substring(0, params.length - 2);
  return out;
};

Util.sendParentMessage = function(message) {
  if (window.parent) {
    parent.postMessage(message, '*');
  }
};

Util.parseBoolean = function(value) {
  if (value == 'false' || value == 0) {
    return false;
  } else if (value == 'true' || value == 1) {
    return true;
  } else {
    return !!value;
  }
};

module.exports = Util;

},{}]},{},[14])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL0FwcERhdGEvUm9hbWluZy9ucG0vbm9kZV9tb2R1bGVzL3dhdGNoaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCIuLi8uLi9BcHBEYXRhL1JvYW1pbmcvbnBtL25vZGVfbW9kdWxlcy93YXRjaGlmeS9ub2RlX21vZHVsZXMvcHJvY2Vzcy9icm93c2VyLmpzIiwibm9kZV9tb2R1bGVzL2VzNi1wcm9taXNlL2Rpc3QvZXM2LXByb21pc2UuanMiLCJub2RlX21vZHVsZXMvZXZlbnRlbWl0dGVyMy9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy9zaGFrYS1wbGF5ZXIvZGlzdC9zaGFrYS1wbGF5ZXIuY29tcGlsZWQuanMiLCJub2RlX21vZHVsZXMvc3RhdHMtanMvYnVpbGQvc3RhdHMubWluLmpzIiwibm9kZV9tb2R1bGVzL3R3ZWVuLmpzL3NyYy9Ud2Vlbi5qcyIsIm5vZGVfbW9kdWxlcy93ZWJ2ci1ib2lsZXJwbGF0ZS9idWlsZC93ZWJ2ci1tYW5hZ2VyLmpzIiwibm9kZV9tb2R1bGVzL3dlYnZyLXBvbHlmaWxsL2J1aWxkL3dlYnZyLXBvbHlmaWxsLmpzIiwic3JjL2VtYmVkL2FkYXB0aXZlLXBsYXllci5qcyIsInNyYy9lbWJlZC9leWVzLmpzIiwic3JjL2VtYmVkL2hvdHNwb3QtcmVuZGVyZXIuanMiLCJzcmMvZW1iZWQvaWZyYW1lLW1lc3NhZ2UtcmVjZWl2ZXIuanMiLCJzcmMvZW1iZWQvbG9hZGluZy1pbmRpY2F0b3IuanMiLCJzcmMvZW1iZWQvbWFpbi5qcyIsInNyYy9lbWJlZC9tdWx0aXBsYXllci1tb2RlLmpzIiwic3JjL2VtYmVkL25hdmlnYXRpb24tcmVuZGVyZXIuanMiLCJzcmMvZW1iZWQvcmV0aWNsZS1yZW5kZXJlci5qcyIsInNyYy9lbWJlZC9zY2VuZS1pbmZvLmpzIiwic3JjL2VtYmVkL3NwaGVyZS1yZW5kZXJlci5qcyIsInNyYy9lbWJlZC90ZW1wbGF0ZS1yZW5kZXJlci5qcyIsInNyYy9lbWJlZC92aWRlby1wcm94eS5qcyIsInNyYy9lbWJlZC93b3JsZC1yZW5kZXJlci5qcyIsInNyYy9tZXNzYWdlLmpzIiwic3JjL3V0aWwuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDcExBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUNqb0NBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDalNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDM1JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNOQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUN0MkJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUM5akJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDeGtMQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDakhBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNwQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN0WkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDcEZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3REQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3BTQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2hOQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMzTkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzFCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2hIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDMUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNySkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDcEZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDclVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsIi8vIHNoaW0gZm9yIHVzaW5nIHByb2Nlc3MgaW4gYnJvd3NlclxudmFyIHByb2Nlc3MgPSBtb2R1bGUuZXhwb3J0cyA9IHt9O1xuXG4vLyBjYWNoZWQgZnJvbSB3aGF0ZXZlciBnbG9iYWwgaXMgcHJlc2VudCBzbyB0aGF0IHRlc3QgcnVubmVycyB0aGF0IHN0dWIgaXRcbi8vIGRvbid0IGJyZWFrIHRoaW5ncy4gIEJ1dCB3ZSBuZWVkIHRvIHdyYXAgaXQgaW4gYSB0cnkgY2F0Y2ggaW4gY2FzZSBpdCBpc1xuLy8gd3JhcHBlZCBpbiBzdHJpY3QgbW9kZSBjb2RlIHdoaWNoIGRvZXNuJ3QgZGVmaW5lIGFueSBnbG9iYWxzLiAgSXQncyBpbnNpZGUgYVxuLy8gZnVuY3Rpb24gYmVjYXVzZSB0cnkvY2F0Y2hlcyBkZW9wdGltaXplIGluIGNlcnRhaW4gZW5naW5lcy5cblxudmFyIGNhY2hlZFNldFRpbWVvdXQ7XG52YXIgY2FjaGVkQ2xlYXJUaW1lb3V0O1xuXG5mdW5jdGlvbiBkZWZhdWx0U2V0VGltb3V0KCkge1xuICAgIHRocm93IG5ldyBFcnJvcignc2V0VGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xufVxuZnVuY3Rpb24gZGVmYXVsdENsZWFyVGltZW91dCAoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdjbGVhclRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTtcbn1cbihmdW5jdGlvbiAoKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBzZXRUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBjbGVhclRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG4gICAgfVxufSAoKSlcbmZ1bmN0aW9uIHJ1blRpbWVvdXQoZnVuKSB7XG4gICAgaWYgKGNhY2hlZFNldFRpbWVvdXQgPT09IHNldFRpbWVvdXQpIHtcbiAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG4gICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfVxuICAgIC8vIGlmIHNldFRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkXG4gICAgaWYgKChjYWNoZWRTZXRUaW1lb3V0ID09PSBkZWZhdWx0U2V0VGltb3V0IHx8ICFjYWNoZWRTZXRUaW1lb3V0KSAmJiBzZXRUaW1lb3V0KSB7XG4gICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXG4gICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfSBjYXRjaChlKXtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbChudWxsLCBmdW4sIDApO1xuICAgICAgICB9IGNhdGNoKGUpe1xuICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3JcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwodGhpcywgZnVuLCAwKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG59XG5mdW5jdGlvbiBydW5DbGVhclRpbWVvdXQobWFya2VyKSB7XG4gICAgaWYgKGNhY2hlZENsZWFyVGltZW91dCA9PT0gY2xlYXJUaW1lb3V0KSB7XG4gICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfVxuICAgIC8vIGlmIGNsZWFyVGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcbiAgICBpZiAoKGNhY2hlZENsZWFyVGltZW91dCA9PT0gZGVmYXVsdENsZWFyVGltZW91dCB8fCAhY2FjaGVkQ2xlYXJUaW1lb3V0KSAmJiBjbGVhclRpbWVvdXQpIHtcbiAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3NcbiAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH0gY2F0Y2ggKGUpe1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0ICB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKG51bGwsIG1hcmtlcik7XG4gICAgICAgIH0gY2F0Y2ggKGUpe1xuICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3IuXG4gICAgICAgICAgICAvLyBTb21lIHZlcnNpb25zIG9mIEkuRS4gaGF2ZSBkaWZmZXJlbnQgcnVsZXMgZm9yIGNsZWFyVGltZW91dCB2cyBzZXRUaW1lb3V0XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwodGhpcywgbWFya2VyKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG5cbn1cbnZhciBxdWV1ZSA9IFtdO1xudmFyIGRyYWluaW5nID0gZmFsc2U7XG52YXIgY3VycmVudFF1ZXVlO1xudmFyIHF1ZXVlSW5kZXggPSAtMTtcblxuZnVuY3Rpb24gY2xlYW5VcE5leHRUaWNrKCkge1xuICAgIGlmICghZHJhaW5pbmcgfHwgIWN1cnJlbnRRdWV1ZSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgaWYgKGN1cnJlbnRRdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgcXVldWUgPSBjdXJyZW50UXVldWUuY29uY2F0KHF1ZXVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgfVxuICAgIGlmIChxdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgZHJhaW5RdWV1ZSgpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZHJhaW5RdWV1ZSgpIHtcbiAgICBpZiAoZHJhaW5pbmcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgdGltZW91dCA9IHJ1blRpbWVvdXQoY2xlYW5VcE5leHRUaWNrKTtcbiAgICBkcmFpbmluZyA9IHRydWU7XG5cbiAgICB2YXIgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIHdoaWxlKGxlbikge1xuICAgICAgICBjdXJyZW50UXVldWUgPSBxdWV1ZTtcbiAgICAgICAgcXVldWUgPSBbXTtcbiAgICAgICAgd2hpbGUgKCsrcXVldWVJbmRleCA8IGxlbikge1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRRdWV1ZSkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRRdWV1ZVtxdWV1ZUluZGV4XS5ydW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgICAgIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB9XG4gICAgY3VycmVudFF1ZXVlID0gbnVsbDtcbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIHJ1bkNsZWFyVGltZW91dCh0aW1lb3V0KTtcbn1cblxucHJvY2Vzcy5uZXh0VGljayA9IGZ1bmN0aW9uIChmdW4pIHtcbiAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoIC0gMSk7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBhcmdzW2kgLSAxXSA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBxdWV1ZS5wdXNoKG5ldyBJdGVtKGZ1biwgYXJncykpO1xuICAgIGlmIChxdWV1ZS5sZW5ndGggPT09IDEgJiYgIWRyYWluaW5nKSB7XG4gICAgICAgIHJ1blRpbWVvdXQoZHJhaW5RdWV1ZSk7XG4gICAgfVxufTtcblxuLy8gdjggbGlrZXMgcHJlZGljdGlibGUgb2JqZWN0c1xuZnVuY3Rpb24gSXRlbShmdW4sIGFycmF5KSB7XG4gICAgdGhpcy5mdW4gPSBmdW47XG4gICAgdGhpcy5hcnJheSA9IGFycmF5O1xufVxuSXRlbS5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuZnVuLmFwcGx5KG51bGwsIHRoaXMuYXJyYXkpO1xufTtcbnByb2Nlc3MudGl0bGUgPSAnYnJvd3Nlcic7XG5wcm9jZXNzLmJyb3dzZXIgPSB0cnVlO1xucHJvY2Vzcy5lbnYgPSB7fTtcbnByb2Nlc3MuYXJndiA9IFtdO1xucHJvY2Vzcy52ZXJzaW9uID0gJyc7IC8vIGVtcHR5IHN0cmluZyB0byBhdm9pZCByZWdleHAgaXNzdWVzXG5wcm9jZXNzLnZlcnNpb25zID0ge307XG5cbmZ1bmN0aW9uIG5vb3AoKSB7fVxuXG5wcm9jZXNzLm9uID0gbm9vcDtcbnByb2Nlc3MuYWRkTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5vbmNlID0gbm9vcDtcbnByb2Nlc3Mub2ZmID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBub29wO1xucHJvY2Vzcy5lbWl0ID0gbm9vcDtcblxucHJvY2Vzcy5iaW5kaW5nID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuYmluZGluZyBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xuXG5wcm9jZXNzLmN3ZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICcvJyB9O1xucHJvY2Vzcy5jaGRpciA9IGZ1bmN0aW9uIChkaXIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuY2hkaXIgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcbnByb2Nlc3MudW1hc2sgPSBmdW5jdGlvbigpIHsgcmV0dXJuIDA7IH07XG4iLCIvKiFcclxuICogQG92ZXJ2aWV3IGVzNi1wcm9taXNlIC0gYSB0aW55IGltcGxlbWVudGF0aW9uIG9mIFByb21pc2VzL0ErLlxyXG4gKiBAY29weXJpZ2h0IENvcHlyaWdodCAoYykgMjAxNCBZZWh1ZGEgS2F0eiwgVG9tIERhbGUsIFN0ZWZhbiBQZW5uZXIgYW5kIGNvbnRyaWJ1dG9ycyAoQ29udmVyc2lvbiB0byBFUzYgQVBJIGJ5IEpha2UgQXJjaGliYWxkKVxyXG4gKiBAbGljZW5zZSAgIExpY2Vuc2VkIHVuZGVyIE1JVCBsaWNlbnNlXHJcbiAqICAgICAgICAgICAgU2VlIGh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9zdGVmYW5wZW5uZXIvZXM2LXByb21pc2UvbWFzdGVyL0xJQ0VOU0VcclxuICogQHZlcnNpb24gICAzLjMuMVxyXG4gKi9cclxuXHJcbihmdW5jdGlvbiAoZ2xvYmFsLCBmYWN0b3J5KSB7XHJcbiAgICB0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgPyBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKSA6XHJcbiAgICB0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQgPyBkZWZpbmUoZmFjdG9yeSkgOlxyXG4gICAgKGdsb2JhbC5FUzZQcm9taXNlID0gZmFjdG9yeSgpKTtcclxufSh0aGlzLCAoZnVuY3Rpb24gKCkgeyAndXNlIHN0cmljdCc7XHJcblxyXG5mdW5jdGlvbiBvYmplY3RPckZ1bmN0aW9uKHgpIHtcclxuICByZXR1cm4gdHlwZW9mIHggPT09ICdmdW5jdGlvbicgfHwgdHlwZW9mIHggPT09ICdvYmplY3QnICYmIHggIT09IG51bGw7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGlzRnVuY3Rpb24oeCkge1xyXG4gIHJldHVybiB0eXBlb2YgeCA9PT0gJ2Z1bmN0aW9uJztcclxufVxyXG5cclxudmFyIF9pc0FycmF5ID0gdW5kZWZpbmVkO1xyXG5pZiAoIUFycmF5LmlzQXJyYXkpIHtcclxuICBfaXNBcnJheSA9IGZ1bmN0aW9uICh4KSB7XHJcbiAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHgpID09PSAnW29iamVjdCBBcnJheV0nO1xyXG4gIH07XHJcbn0gZWxzZSB7XHJcbiAgX2lzQXJyYXkgPSBBcnJheS5pc0FycmF5O1xyXG59XHJcblxyXG52YXIgaXNBcnJheSA9IF9pc0FycmF5O1xyXG5cclxudmFyIGxlbiA9IDA7XHJcbnZhciB2ZXJ0eE5leHQgPSB1bmRlZmluZWQ7XHJcbnZhciBjdXN0b21TY2hlZHVsZXJGbiA9IHVuZGVmaW5lZDtcclxuXHJcbnZhciBhc2FwID0gZnVuY3Rpb24gYXNhcChjYWxsYmFjaywgYXJnKSB7XHJcbiAgcXVldWVbbGVuXSA9IGNhbGxiYWNrO1xyXG4gIHF1ZXVlW2xlbiArIDFdID0gYXJnO1xyXG4gIGxlbiArPSAyO1xyXG4gIGlmIChsZW4gPT09IDIpIHtcclxuICAgIC8vIElmIGxlbiBpcyAyLCB0aGF0IG1lYW5zIHRoYXQgd2UgbmVlZCB0byBzY2hlZHVsZSBhbiBhc3luYyBmbHVzaC5cclxuICAgIC8vIElmIGFkZGl0aW9uYWwgY2FsbGJhY2tzIGFyZSBxdWV1ZWQgYmVmb3JlIHRoZSBxdWV1ZSBpcyBmbHVzaGVkLCB0aGV5XHJcbiAgICAvLyB3aWxsIGJlIHByb2Nlc3NlZCBieSB0aGlzIGZsdXNoIHRoYXQgd2UgYXJlIHNjaGVkdWxpbmcuXHJcbiAgICBpZiAoY3VzdG9tU2NoZWR1bGVyRm4pIHtcclxuICAgICAgY3VzdG9tU2NoZWR1bGVyRm4oZmx1c2gpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgc2NoZWR1bGVGbHVzaCgpO1xyXG4gICAgfVxyXG4gIH1cclxufTtcclxuXHJcbmZ1bmN0aW9uIHNldFNjaGVkdWxlcihzY2hlZHVsZUZuKSB7XHJcbiAgY3VzdG9tU2NoZWR1bGVyRm4gPSBzY2hlZHVsZUZuO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzZXRBc2FwKGFzYXBGbikge1xyXG4gIGFzYXAgPSBhc2FwRm47XHJcbn1cclxuXHJcbnZhciBicm93c2VyV2luZG93ID0gdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgPyB3aW5kb3cgOiB1bmRlZmluZWQ7XHJcbnZhciBicm93c2VyR2xvYmFsID0gYnJvd3NlcldpbmRvdyB8fCB7fTtcclxudmFyIEJyb3dzZXJNdXRhdGlvbk9ic2VydmVyID0gYnJvd3Nlckdsb2JhbC5NdXRhdGlvbk9ic2VydmVyIHx8IGJyb3dzZXJHbG9iYWwuV2ViS2l0TXV0YXRpb25PYnNlcnZlcjtcclxudmFyIGlzTm9kZSA9IHR5cGVvZiBzZWxmID09PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgcHJvY2VzcyAhPT0gJ3VuZGVmaW5lZCcgJiYgKHt9KS50b1N0cmluZy5jYWxsKHByb2Nlc3MpID09PSAnW29iamVjdCBwcm9jZXNzXSc7XHJcblxyXG4vLyB0ZXN0IGZvciB3ZWIgd29ya2VyIGJ1dCBub3QgaW4gSUUxMFxyXG52YXIgaXNXb3JrZXIgPSB0eXBlb2YgVWludDhDbGFtcGVkQXJyYXkgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBpbXBvcnRTY3JpcHRzICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgTWVzc2FnZUNoYW5uZWwgIT09ICd1bmRlZmluZWQnO1xyXG5cclxuLy8gbm9kZVxyXG5mdW5jdGlvbiB1c2VOZXh0VGljaygpIHtcclxuICAvLyBub2RlIHZlcnNpb24gMC4xMC54IGRpc3BsYXlzIGEgZGVwcmVjYXRpb24gd2FybmluZyB3aGVuIG5leHRUaWNrIGlzIHVzZWQgcmVjdXJzaXZlbHlcclxuICAvLyBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2N1am9qcy93aGVuL2lzc3Vlcy80MTAgZm9yIGRldGFpbHNcclxuICByZXR1cm4gZnVuY3Rpb24gKCkge1xyXG4gICAgcmV0dXJuIHByb2Nlc3MubmV4dFRpY2soZmx1c2gpO1xyXG4gIH07XHJcbn1cclxuXHJcbi8vIHZlcnR4XHJcbmZ1bmN0aW9uIHVzZVZlcnR4VGltZXIoKSB7XHJcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcclxuICAgIHZlcnR4TmV4dChmbHVzaCk7XHJcbiAgfTtcclxufVxyXG5cclxuZnVuY3Rpb24gdXNlTXV0YXRpb25PYnNlcnZlcigpIHtcclxuICB2YXIgaXRlcmF0aW9ucyA9IDA7XHJcbiAgdmFyIG9ic2VydmVyID0gbmV3IEJyb3dzZXJNdXRhdGlvbk9ic2VydmVyKGZsdXNoKTtcclxuICB2YXIgbm9kZSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCcnKTtcclxuICBvYnNlcnZlci5vYnNlcnZlKG5vZGUsIHsgY2hhcmFjdGVyRGF0YTogdHJ1ZSB9KTtcclxuXHJcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcclxuICAgIG5vZGUuZGF0YSA9IGl0ZXJhdGlvbnMgPSArK2l0ZXJhdGlvbnMgJSAyO1xyXG4gIH07XHJcbn1cclxuXHJcbi8vIHdlYiB3b3JrZXJcclxuZnVuY3Rpb24gdXNlTWVzc2FnZUNoYW5uZWwoKSB7XHJcbiAgdmFyIGNoYW5uZWwgPSBuZXcgTWVzc2FnZUNoYW5uZWwoKTtcclxuICBjaGFubmVsLnBvcnQxLm9ubWVzc2FnZSA9IGZsdXNoO1xyXG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XHJcbiAgICByZXR1cm4gY2hhbm5lbC5wb3J0Mi5wb3N0TWVzc2FnZSgwKTtcclxuICB9O1xyXG59XHJcblxyXG5mdW5jdGlvbiB1c2VTZXRUaW1lb3V0KCkge1xyXG4gIC8vIFN0b3JlIHNldFRpbWVvdXQgcmVmZXJlbmNlIHNvIGVzNi1wcm9taXNlIHdpbGwgYmUgdW5hZmZlY3RlZCBieVxyXG4gIC8vIG90aGVyIGNvZGUgbW9kaWZ5aW5nIHNldFRpbWVvdXQgKGxpa2Ugc2lub24udXNlRmFrZVRpbWVycygpKVxyXG4gIHZhciBnbG9iYWxTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcclxuICByZXR1cm4gZnVuY3Rpb24gKCkge1xyXG4gICAgcmV0dXJuIGdsb2JhbFNldFRpbWVvdXQoZmx1c2gsIDEpO1xyXG4gIH07XHJcbn1cclxuXHJcbnZhciBxdWV1ZSA9IG5ldyBBcnJheSgxMDAwKTtcclxuZnVuY3Rpb24gZmx1c2goKSB7XHJcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkgKz0gMikge1xyXG4gICAgdmFyIGNhbGxiYWNrID0gcXVldWVbaV07XHJcbiAgICB2YXIgYXJnID0gcXVldWVbaSArIDFdO1xyXG5cclxuICAgIGNhbGxiYWNrKGFyZyk7XHJcblxyXG4gICAgcXVldWVbaV0gPSB1bmRlZmluZWQ7XHJcbiAgICBxdWV1ZVtpICsgMV0gPSB1bmRlZmluZWQ7XHJcbiAgfVxyXG5cclxuICBsZW4gPSAwO1xyXG59XHJcblxyXG5mdW5jdGlvbiBhdHRlbXB0VmVydHgoKSB7XHJcbiAgdHJ5IHtcclxuICAgIHZhciByID0gcmVxdWlyZTtcclxuICAgIHZhciB2ZXJ0eCA9IHIoJ3ZlcnR4Jyk7XHJcbiAgICB2ZXJ0eE5leHQgPSB2ZXJ0eC5ydW5Pbkxvb3AgfHwgdmVydHgucnVuT25Db250ZXh0O1xyXG4gICAgcmV0dXJuIHVzZVZlcnR4VGltZXIoKTtcclxuICB9IGNhdGNoIChlKSB7XHJcbiAgICByZXR1cm4gdXNlU2V0VGltZW91dCgpO1xyXG4gIH1cclxufVxyXG5cclxudmFyIHNjaGVkdWxlRmx1c2ggPSB1bmRlZmluZWQ7XHJcbi8vIERlY2lkZSB3aGF0IGFzeW5jIG1ldGhvZCB0byB1c2UgdG8gdHJpZ2dlcmluZyBwcm9jZXNzaW5nIG9mIHF1ZXVlZCBjYWxsYmFja3M6XHJcbmlmIChpc05vZGUpIHtcclxuICBzY2hlZHVsZUZsdXNoID0gdXNlTmV4dFRpY2soKTtcclxufSBlbHNlIGlmIChCcm93c2VyTXV0YXRpb25PYnNlcnZlcikge1xyXG4gIHNjaGVkdWxlRmx1c2ggPSB1c2VNdXRhdGlvbk9ic2VydmVyKCk7XHJcbn0gZWxzZSBpZiAoaXNXb3JrZXIpIHtcclxuICBzY2hlZHVsZUZsdXNoID0gdXNlTWVzc2FnZUNoYW5uZWwoKTtcclxufSBlbHNlIGlmIChicm93c2VyV2luZG93ID09PSB1bmRlZmluZWQgJiYgdHlwZW9mIHJlcXVpcmUgPT09ICdmdW5jdGlvbicpIHtcclxuICBzY2hlZHVsZUZsdXNoID0gYXR0ZW1wdFZlcnR4KCk7XHJcbn0gZWxzZSB7XHJcbiAgc2NoZWR1bGVGbHVzaCA9IHVzZVNldFRpbWVvdXQoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gdGhlbihvbkZ1bGZpbGxtZW50LCBvblJlamVjdGlvbikge1xyXG4gIHZhciBfYXJndW1lbnRzID0gYXJndW1lbnRzO1xyXG5cclxuICB2YXIgcGFyZW50ID0gdGhpcztcclxuXHJcbiAgdmFyIGNoaWxkID0gbmV3IHRoaXMuY29uc3RydWN0b3Iobm9vcCk7XHJcblxyXG4gIGlmIChjaGlsZFtQUk9NSVNFX0lEXSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICBtYWtlUHJvbWlzZShjaGlsZCk7XHJcbiAgfVxyXG5cclxuICB2YXIgX3N0YXRlID0gcGFyZW50Ll9zdGF0ZTtcclxuXHJcbiAgaWYgKF9zdGF0ZSkge1xyXG4gICAgKGZ1bmN0aW9uICgpIHtcclxuICAgICAgdmFyIGNhbGxiYWNrID0gX2FyZ3VtZW50c1tfc3RhdGUgLSAxXTtcclxuICAgICAgYXNhcChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIGludm9rZUNhbGxiYWNrKF9zdGF0ZSwgY2hpbGQsIGNhbGxiYWNrLCBwYXJlbnQuX3Jlc3VsdCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSkoKTtcclxuICB9IGVsc2Uge1xyXG4gICAgc3Vic2NyaWJlKHBhcmVudCwgY2hpbGQsIG9uRnVsZmlsbG1lbnQsIG9uUmVqZWN0aW9uKTtcclxuICB9XHJcblxyXG4gIHJldHVybiBjaGlsZDtcclxufVxyXG5cclxuLyoqXHJcbiAgYFByb21pc2UucmVzb2x2ZWAgcmV0dXJucyBhIHByb21pc2UgdGhhdCB3aWxsIGJlY29tZSByZXNvbHZlZCB3aXRoIHRoZVxyXG4gIHBhc3NlZCBgdmFsdWVgLiBJdCBpcyBzaG9ydGhhbmQgZm9yIHRoZSBmb2xsb3dpbmc6XHJcblxyXG4gIGBgYGphdmFzY3JpcHRcclxuICBsZXQgcHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCl7XHJcbiAgICByZXNvbHZlKDEpO1xyXG4gIH0pO1xyXG5cclxuICBwcm9taXNlLnRoZW4oZnVuY3Rpb24odmFsdWUpe1xyXG4gICAgLy8gdmFsdWUgPT09IDFcclxuICB9KTtcclxuICBgYGBcclxuXHJcbiAgSW5zdGVhZCBvZiB3cml0aW5nIHRoZSBhYm92ZSwgeW91ciBjb2RlIG5vdyBzaW1wbHkgYmVjb21lcyB0aGUgZm9sbG93aW5nOlxyXG5cclxuICBgYGBqYXZhc2NyaXB0XHJcbiAgbGV0IHByb21pc2UgPSBQcm9taXNlLnJlc29sdmUoMSk7XHJcblxyXG4gIHByb21pc2UudGhlbihmdW5jdGlvbih2YWx1ZSl7XHJcbiAgICAvLyB2YWx1ZSA9PT0gMVxyXG4gIH0pO1xyXG4gIGBgYFxyXG5cclxuICBAbWV0aG9kIHJlc29sdmVcclxuICBAc3RhdGljXHJcbiAgQHBhcmFtIHtBbnl9IHZhbHVlIHZhbHVlIHRoYXQgdGhlIHJldHVybmVkIHByb21pc2Ugd2lsbCBiZSByZXNvbHZlZCB3aXRoXHJcbiAgVXNlZnVsIGZvciB0b29saW5nLlxyXG4gIEByZXR1cm4ge1Byb21pc2V9IGEgcHJvbWlzZSB0aGF0IHdpbGwgYmVjb21lIGZ1bGZpbGxlZCB3aXRoIHRoZSBnaXZlblxyXG4gIGB2YWx1ZWBcclxuKi9cclxuZnVuY3Rpb24gcmVzb2x2ZShvYmplY3QpIHtcclxuICAvKmpzaGludCB2YWxpZHRoaXM6dHJ1ZSAqL1xyXG4gIHZhciBDb25zdHJ1Y3RvciA9IHRoaXM7XHJcblxyXG4gIGlmIChvYmplY3QgJiYgdHlwZW9mIG9iamVjdCA9PT0gJ29iamVjdCcgJiYgb2JqZWN0LmNvbnN0cnVjdG9yID09PSBDb25zdHJ1Y3Rvcikge1xyXG4gICAgcmV0dXJuIG9iamVjdDtcclxuICB9XHJcblxyXG4gIHZhciBwcm9taXNlID0gbmV3IENvbnN0cnVjdG9yKG5vb3ApO1xyXG4gIF9yZXNvbHZlKHByb21pc2UsIG9iamVjdCk7XHJcbiAgcmV0dXJuIHByb21pc2U7XHJcbn1cclxuXHJcbnZhciBQUk9NSVNFX0lEID0gTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyaW5nKDE2KTtcclxuXHJcbmZ1bmN0aW9uIG5vb3AoKSB7fVxyXG5cclxudmFyIFBFTkRJTkcgPSB2b2lkIDA7XHJcbnZhciBGVUxGSUxMRUQgPSAxO1xyXG52YXIgUkVKRUNURUQgPSAyO1xyXG5cclxudmFyIEdFVF9USEVOX0VSUk9SID0gbmV3IEVycm9yT2JqZWN0KCk7XHJcblxyXG5mdW5jdGlvbiBzZWxmRnVsZmlsbG1lbnQoKSB7XHJcbiAgcmV0dXJuIG5ldyBUeXBlRXJyb3IoXCJZb3UgY2Fubm90IHJlc29sdmUgYSBwcm9taXNlIHdpdGggaXRzZWxmXCIpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjYW5ub3RSZXR1cm5Pd24oKSB7XHJcbiAgcmV0dXJuIG5ldyBUeXBlRXJyb3IoJ0EgcHJvbWlzZXMgY2FsbGJhY2sgY2Fubm90IHJldHVybiB0aGF0IHNhbWUgcHJvbWlzZS4nKTtcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0VGhlbihwcm9taXNlKSB7XHJcbiAgdHJ5IHtcclxuICAgIHJldHVybiBwcm9taXNlLnRoZW47XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIEdFVF9USEVOX0VSUk9SLmVycm9yID0gZXJyb3I7XHJcbiAgICByZXR1cm4gR0VUX1RIRU5fRVJST1I7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiB0cnlUaGVuKHRoZW4sIHZhbHVlLCBmdWxmaWxsbWVudEhhbmRsZXIsIHJlamVjdGlvbkhhbmRsZXIpIHtcclxuICB0cnkge1xyXG4gICAgdGhlbi5jYWxsKHZhbHVlLCBmdWxmaWxsbWVudEhhbmRsZXIsIHJlamVjdGlvbkhhbmRsZXIpO1xyXG4gIH0gY2F0Y2ggKGUpIHtcclxuICAgIHJldHVybiBlO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlRm9yZWlnblRoZW5hYmxlKHByb21pc2UsIHRoZW5hYmxlLCB0aGVuKSB7XHJcbiAgYXNhcChmdW5jdGlvbiAocHJvbWlzZSkge1xyXG4gICAgdmFyIHNlYWxlZCA9IGZhbHNlO1xyXG4gICAgdmFyIGVycm9yID0gdHJ5VGhlbih0aGVuLCB0aGVuYWJsZSwgZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgIGlmIChzZWFsZWQpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgc2VhbGVkID0gdHJ1ZTtcclxuICAgICAgaWYgKHRoZW5hYmxlICE9PSB2YWx1ZSkge1xyXG4gICAgICAgIF9yZXNvbHZlKHByb21pc2UsIHZhbHVlKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBmdWxmaWxsKHByb21pc2UsIHZhbHVlKTtcclxuICAgICAgfVxyXG4gICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xyXG4gICAgICBpZiAoc2VhbGVkKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIHNlYWxlZCA9IHRydWU7XHJcblxyXG4gICAgICBfcmVqZWN0KHByb21pc2UsIHJlYXNvbik7XHJcbiAgICB9LCAnU2V0dGxlOiAnICsgKHByb21pc2UuX2xhYmVsIHx8ICcgdW5rbm93biBwcm9taXNlJykpO1xyXG5cclxuICAgIGlmICghc2VhbGVkICYmIGVycm9yKSB7XHJcbiAgICAgIHNlYWxlZCA9IHRydWU7XHJcbiAgICAgIF9yZWplY3QocHJvbWlzZSwgZXJyb3IpO1xyXG4gICAgfVxyXG4gIH0sIHByb21pc2UpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVPd25UaGVuYWJsZShwcm9taXNlLCB0aGVuYWJsZSkge1xyXG4gIGlmICh0aGVuYWJsZS5fc3RhdGUgPT09IEZVTEZJTExFRCkge1xyXG4gICAgZnVsZmlsbChwcm9taXNlLCB0aGVuYWJsZS5fcmVzdWx0KTtcclxuICB9IGVsc2UgaWYgKHRoZW5hYmxlLl9zdGF0ZSA9PT0gUkVKRUNURUQpIHtcclxuICAgIF9yZWplY3QocHJvbWlzZSwgdGhlbmFibGUuX3Jlc3VsdCk7XHJcbiAgfSBlbHNlIHtcclxuICAgIHN1YnNjcmliZSh0aGVuYWJsZSwgdW5kZWZpbmVkLCBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgcmV0dXJuIF9yZXNvbHZlKHByb21pc2UsIHZhbHVlKTtcclxuICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcclxuICAgICAgcmV0dXJuIF9yZWplY3QocHJvbWlzZSwgcmVhc29uKTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlTWF5YmVUaGVuYWJsZShwcm9taXNlLCBtYXliZVRoZW5hYmxlLCB0aGVuJCQpIHtcclxuICBpZiAobWF5YmVUaGVuYWJsZS5jb25zdHJ1Y3RvciA9PT0gcHJvbWlzZS5jb25zdHJ1Y3RvciAmJiB0aGVuJCQgPT09IHRoZW4gJiYgbWF5YmVUaGVuYWJsZS5jb25zdHJ1Y3Rvci5yZXNvbHZlID09PSByZXNvbHZlKSB7XHJcbiAgICBoYW5kbGVPd25UaGVuYWJsZShwcm9taXNlLCBtYXliZVRoZW5hYmxlKTtcclxuICB9IGVsc2Uge1xyXG4gICAgaWYgKHRoZW4kJCA9PT0gR0VUX1RIRU5fRVJST1IpIHtcclxuICAgICAgX3JlamVjdChwcm9taXNlLCBHRVRfVEhFTl9FUlJPUi5lcnJvcik7XHJcbiAgICB9IGVsc2UgaWYgKHRoZW4kJCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgIGZ1bGZpbGwocHJvbWlzZSwgbWF5YmVUaGVuYWJsZSk7XHJcbiAgICB9IGVsc2UgaWYgKGlzRnVuY3Rpb24odGhlbiQkKSkge1xyXG4gICAgICBoYW5kbGVGb3JlaWduVGhlbmFibGUocHJvbWlzZSwgbWF5YmVUaGVuYWJsZSwgdGhlbiQkKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGZ1bGZpbGwocHJvbWlzZSwgbWF5YmVUaGVuYWJsZSk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBfcmVzb2x2ZShwcm9taXNlLCB2YWx1ZSkge1xyXG4gIGlmIChwcm9taXNlID09PSB2YWx1ZSkge1xyXG4gICAgX3JlamVjdChwcm9taXNlLCBzZWxmRnVsZmlsbG1lbnQoKSk7XHJcbiAgfSBlbHNlIGlmIChvYmplY3RPckZ1bmN0aW9uKHZhbHVlKSkge1xyXG4gICAgaGFuZGxlTWF5YmVUaGVuYWJsZShwcm9taXNlLCB2YWx1ZSwgZ2V0VGhlbih2YWx1ZSkpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBmdWxmaWxsKHByb21pc2UsIHZhbHVlKTtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHB1Ymxpc2hSZWplY3Rpb24ocHJvbWlzZSkge1xyXG4gIGlmIChwcm9taXNlLl9vbmVycm9yKSB7XHJcbiAgICBwcm9taXNlLl9vbmVycm9yKHByb21pc2UuX3Jlc3VsdCk7XHJcbiAgfVxyXG5cclxuICBwdWJsaXNoKHByb21pc2UpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBmdWxmaWxsKHByb21pc2UsIHZhbHVlKSB7XHJcbiAgaWYgKHByb21pc2UuX3N0YXRlICE9PSBQRU5ESU5HKSB7XHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG5cclxuICBwcm9taXNlLl9yZXN1bHQgPSB2YWx1ZTtcclxuICBwcm9taXNlLl9zdGF0ZSA9IEZVTEZJTExFRDtcclxuXHJcbiAgaWYgKHByb21pc2UuX3N1YnNjcmliZXJzLmxlbmd0aCAhPT0gMCkge1xyXG4gICAgYXNhcChwdWJsaXNoLCBwcm9taXNlKTtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIF9yZWplY3QocHJvbWlzZSwgcmVhc29uKSB7XHJcbiAgaWYgKHByb21pc2UuX3N0YXRlICE9PSBQRU5ESU5HKSB7XHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG4gIHByb21pc2UuX3N0YXRlID0gUkVKRUNURUQ7XHJcbiAgcHJvbWlzZS5fcmVzdWx0ID0gcmVhc29uO1xyXG5cclxuICBhc2FwKHB1Ymxpc2hSZWplY3Rpb24sIHByb21pc2UpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzdWJzY3JpYmUocGFyZW50LCBjaGlsZCwgb25GdWxmaWxsbWVudCwgb25SZWplY3Rpb24pIHtcclxuICB2YXIgX3N1YnNjcmliZXJzID0gcGFyZW50Ll9zdWJzY3JpYmVycztcclxuICB2YXIgbGVuZ3RoID0gX3N1YnNjcmliZXJzLmxlbmd0aDtcclxuXHJcbiAgcGFyZW50Ll9vbmVycm9yID0gbnVsbDtcclxuXHJcbiAgX3N1YnNjcmliZXJzW2xlbmd0aF0gPSBjaGlsZDtcclxuICBfc3Vic2NyaWJlcnNbbGVuZ3RoICsgRlVMRklMTEVEXSA9IG9uRnVsZmlsbG1lbnQ7XHJcbiAgX3N1YnNjcmliZXJzW2xlbmd0aCArIFJFSkVDVEVEXSA9IG9uUmVqZWN0aW9uO1xyXG5cclxuICBpZiAobGVuZ3RoID09PSAwICYmIHBhcmVudC5fc3RhdGUpIHtcclxuICAgIGFzYXAocHVibGlzaCwgcGFyZW50KTtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHB1Ymxpc2gocHJvbWlzZSkge1xyXG4gIHZhciBzdWJzY3JpYmVycyA9IHByb21pc2UuX3N1YnNjcmliZXJzO1xyXG4gIHZhciBzZXR0bGVkID0gcHJvbWlzZS5fc3RhdGU7XHJcblxyXG4gIGlmIChzdWJzY3JpYmVycy5sZW5ndGggPT09IDApIHtcclxuICAgIHJldHVybjtcclxuICB9XHJcblxyXG4gIHZhciBjaGlsZCA9IHVuZGVmaW5lZCxcclxuICAgICAgY2FsbGJhY2sgPSB1bmRlZmluZWQsXHJcbiAgICAgIGRldGFpbCA9IHByb21pc2UuX3Jlc3VsdDtcclxuXHJcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdWJzY3JpYmVycy5sZW5ndGg7IGkgKz0gMykge1xyXG4gICAgY2hpbGQgPSBzdWJzY3JpYmVyc1tpXTtcclxuICAgIGNhbGxiYWNrID0gc3Vic2NyaWJlcnNbaSArIHNldHRsZWRdO1xyXG5cclxuICAgIGlmIChjaGlsZCkge1xyXG4gICAgICBpbnZva2VDYWxsYmFjayhzZXR0bGVkLCBjaGlsZCwgY2FsbGJhY2ssIGRldGFpbCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjYWxsYmFjayhkZXRhaWwpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJvbWlzZS5fc3Vic2NyaWJlcnMubGVuZ3RoID0gMDtcclxufVxyXG5cclxuZnVuY3Rpb24gRXJyb3JPYmplY3QoKSB7XHJcbiAgdGhpcy5lcnJvciA9IG51bGw7XHJcbn1cclxuXHJcbnZhciBUUllfQ0FUQ0hfRVJST1IgPSBuZXcgRXJyb3JPYmplY3QoKTtcclxuXHJcbmZ1bmN0aW9uIHRyeUNhdGNoKGNhbGxiYWNrLCBkZXRhaWwpIHtcclxuICB0cnkge1xyXG4gICAgcmV0dXJuIGNhbGxiYWNrKGRldGFpbCk7XHJcbiAgfSBjYXRjaCAoZSkge1xyXG4gICAgVFJZX0NBVENIX0VSUk9SLmVycm9yID0gZTtcclxuICAgIHJldHVybiBUUllfQ0FUQ0hfRVJST1I7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBpbnZva2VDYWxsYmFjayhzZXR0bGVkLCBwcm9taXNlLCBjYWxsYmFjaywgZGV0YWlsKSB7XHJcbiAgdmFyIGhhc0NhbGxiYWNrID0gaXNGdW5jdGlvbihjYWxsYmFjayksXHJcbiAgICAgIHZhbHVlID0gdW5kZWZpbmVkLFxyXG4gICAgICBlcnJvciA9IHVuZGVmaW5lZCxcclxuICAgICAgc3VjY2VlZGVkID0gdW5kZWZpbmVkLFxyXG4gICAgICBmYWlsZWQgPSB1bmRlZmluZWQ7XHJcblxyXG4gIGlmIChoYXNDYWxsYmFjaykge1xyXG4gICAgdmFsdWUgPSB0cnlDYXRjaChjYWxsYmFjaywgZGV0YWlsKTtcclxuXHJcbiAgICBpZiAodmFsdWUgPT09IFRSWV9DQVRDSF9FUlJPUikge1xyXG4gICAgICBmYWlsZWQgPSB0cnVlO1xyXG4gICAgICBlcnJvciA9IHZhbHVlLmVycm9yO1xyXG4gICAgICB2YWx1ZSA9IG51bGw7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBzdWNjZWVkZWQgPSB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChwcm9taXNlID09PSB2YWx1ZSkge1xyXG4gICAgICBfcmVqZWN0KHByb21pc2UsIGNhbm5vdFJldHVybk93bigpKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gIH0gZWxzZSB7XHJcbiAgICB2YWx1ZSA9IGRldGFpbDtcclxuICAgIHN1Y2NlZWRlZCA9IHRydWU7XHJcbiAgfVxyXG5cclxuICBpZiAocHJvbWlzZS5fc3RhdGUgIT09IFBFTkRJTkcpIHtcclxuICAgIC8vIG5vb3BcclxuICB9IGVsc2UgaWYgKGhhc0NhbGxiYWNrICYmIHN1Y2NlZWRlZCkge1xyXG4gICAgICBfcmVzb2x2ZShwcm9taXNlLCB2YWx1ZSk7XHJcbiAgICB9IGVsc2UgaWYgKGZhaWxlZCkge1xyXG4gICAgICBfcmVqZWN0KHByb21pc2UsIGVycm9yKTtcclxuICAgIH0gZWxzZSBpZiAoc2V0dGxlZCA9PT0gRlVMRklMTEVEKSB7XHJcbiAgICAgIGZ1bGZpbGwocHJvbWlzZSwgdmFsdWUpO1xyXG4gICAgfSBlbHNlIGlmIChzZXR0bGVkID09PSBSRUpFQ1RFRCkge1xyXG4gICAgICBfcmVqZWN0KHByb21pc2UsIHZhbHVlKTtcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gaW5pdGlhbGl6ZVByb21pc2UocHJvbWlzZSwgcmVzb2x2ZXIpIHtcclxuICB0cnkge1xyXG4gICAgcmVzb2x2ZXIoZnVuY3Rpb24gcmVzb2x2ZVByb21pc2UodmFsdWUpIHtcclxuICAgICAgX3Jlc29sdmUocHJvbWlzZSwgdmFsdWUpO1xyXG4gICAgfSwgZnVuY3Rpb24gcmVqZWN0UHJvbWlzZShyZWFzb24pIHtcclxuICAgICAgX3JlamVjdChwcm9taXNlLCByZWFzb24pO1xyXG4gICAgfSk7XHJcbiAgfSBjYXRjaCAoZSkge1xyXG4gICAgX3JlamVjdChwcm9taXNlLCBlKTtcclxuICB9XHJcbn1cclxuXHJcbnZhciBpZCA9IDA7XHJcbmZ1bmN0aW9uIG5leHRJZCgpIHtcclxuICByZXR1cm4gaWQrKztcclxufVxyXG5cclxuZnVuY3Rpb24gbWFrZVByb21pc2UocHJvbWlzZSkge1xyXG4gIHByb21pc2VbUFJPTUlTRV9JRF0gPSBpZCsrO1xyXG4gIHByb21pc2UuX3N0YXRlID0gdW5kZWZpbmVkO1xyXG4gIHByb21pc2UuX3Jlc3VsdCA9IHVuZGVmaW5lZDtcclxuICBwcm9taXNlLl9zdWJzY3JpYmVycyA9IFtdO1xyXG59XHJcblxyXG5mdW5jdGlvbiBFbnVtZXJhdG9yKENvbnN0cnVjdG9yLCBpbnB1dCkge1xyXG4gIHRoaXMuX2luc3RhbmNlQ29uc3RydWN0b3IgPSBDb25zdHJ1Y3RvcjtcclxuICB0aGlzLnByb21pc2UgPSBuZXcgQ29uc3RydWN0b3Iobm9vcCk7XHJcblxyXG4gIGlmICghdGhpcy5wcm9taXNlW1BST01JU0VfSURdKSB7XHJcbiAgICBtYWtlUHJvbWlzZSh0aGlzLnByb21pc2UpO1xyXG4gIH1cclxuXHJcbiAgaWYgKGlzQXJyYXkoaW5wdXQpKSB7XHJcbiAgICB0aGlzLl9pbnB1dCA9IGlucHV0O1xyXG4gICAgdGhpcy5sZW5ndGggPSBpbnB1dC5sZW5ndGg7XHJcbiAgICB0aGlzLl9yZW1haW5pbmcgPSBpbnB1dC5sZW5ndGg7XHJcblxyXG4gICAgdGhpcy5fcmVzdWx0ID0gbmV3IEFycmF5KHRoaXMubGVuZ3RoKTtcclxuXHJcbiAgICBpZiAodGhpcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgZnVsZmlsbCh0aGlzLnByb21pc2UsIHRoaXMuX3Jlc3VsdCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmxlbmd0aCA9IHRoaXMubGVuZ3RoIHx8IDA7XHJcbiAgICAgIHRoaXMuX2VudW1lcmF0ZSgpO1xyXG4gICAgICBpZiAodGhpcy5fcmVtYWluaW5nID09PSAwKSB7XHJcbiAgICAgICAgZnVsZmlsbCh0aGlzLnByb21pc2UsIHRoaXMuX3Jlc3VsdCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9IGVsc2Uge1xyXG4gICAgX3JlamVjdCh0aGlzLnByb21pc2UsIHZhbGlkYXRpb25FcnJvcigpKTtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHZhbGlkYXRpb25FcnJvcigpIHtcclxuICByZXR1cm4gbmV3IEVycm9yKCdBcnJheSBNZXRob2RzIG11c3QgYmUgcHJvdmlkZWQgYW4gQXJyYXknKTtcclxufTtcclxuXHJcbkVudW1lcmF0b3IucHJvdG90eXBlLl9lbnVtZXJhdGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgdmFyIGxlbmd0aCA9IHRoaXMubGVuZ3RoO1xyXG4gIHZhciBfaW5wdXQgPSB0aGlzLl9pbnB1dDtcclxuXHJcbiAgZm9yICh2YXIgaSA9IDA7IHRoaXMuX3N0YXRlID09PSBQRU5ESU5HICYmIGkgPCBsZW5ndGg7IGkrKykge1xyXG4gICAgdGhpcy5fZWFjaEVudHJ5KF9pbnB1dFtpXSwgaSk7XHJcbiAgfVxyXG59O1xyXG5cclxuRW51bWVyYXRvci5wcm90b3R5cGUuX2VhY2hFbnRyeSA9IGZ1bmN0aW9uIChlbnRyeSwgaSkge1xyXG4gIHZhciBjID0gdGhpcy5faW5zdGFuY2VDb25zdHJ1Y3RvcjtcclxuICB2YXIgcmVzb2x2ZSQkID0gYy5yZXNvbHZlO1xyXG5cclxuICBpZiAocmVzb2x2ZSQkID09PSByZXNvbHZlKSB7XHJcbiAgICB2YXIgX3RoZW4gPSBnZXRUaGVuKGVudHJ5KTtcclxuXHJcbiAgICBpZiAoX3RoZW4gPT09IHRoZW4gJiYgZW50cnkuX3N0YXRlICE9PSBQRU5ESU5HKSB7XHJcbiAgICAgIHRoaXMuX3NldHRsZWRBdChlbnRyeS5fc3RhdGUsIGksIGVudHJ5Ll9yZXN1bHQpO1xyXG4gICAgfSBlbHNlIGlmICh0eXBlb2YgX3RoZW4gIT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgdGhpcy5fcmVtYWluaW5nLS07XHJcbiAgICAgIHRoaXMuX3Jlc3VsdFtpXSA9IGVudHJ5O1xyXG4gICAgfSBlbHNlIGlmIChjID09PSBQcm9taXNlKSB7XHJcbiAgICAgIHZhciBwcm9taXNlID0gbmV3IGMobm9vcCk7XHJcbiAgICAgIGhhbmRsZU1heWJlVGhlbmFibGUocHJvbWlzZSwgZW50cnksIF90aGVuKTtcclxuICAgICAgdGhpcy5fd2lsbFNldHRsZUF0KHByb21pc2UsIGkpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fd2lsbFNldHRsZUF0KG5ldyBjKGZ1bmN0aW9uIChyZXNvbHZlJCQpIHtcclxuICAgICAgICByZXR1cm4gcmVzb2x2ZSQkKGVudHJ5KTtcclxuICAgICAgfSksIGkpO1xyXG4gICAgfVxyXG4gIH0gZWxzZSB7XHJcbiAgICB0aGlzLl93aWxsU2V0dGxlQXQocmVzb2x2ZSQkKGVudHJ5KSwgaSk7XHJcbiAgfVxyXG59O1xyXG5cclxuRW51bWVyYXRvci5wcm90b3R5cGUuX3NldHRsZWRBdCA9IGZ1bmN0aW9uIChzdGF0ZSwgaSwgdmFsdWUpIHtcclxuICB2YXIgcHJvbWlzZSA9IHRoaXMucHJvbWlzZTtcclxuXHJcbiAgaWYgKHByb21pc2UuX3N0YXRlID09PSBQRU5ESU5HKSB7XHJcbiAgICB0aGlzLl9yZW1haW5pbmctLTtcclxuXHJcbiAgICBpZiAoc3RhdGUgPT09IFJFSkVDVEVEKSB7XHJcbiAgICAgIF9yZWplY3QocHJvbWlzZSwgdmFsdWUpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fcmVzdWx0W2ldID0gdmFsdWU7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBpZiAodGhpcy5fcmVtYWluaW5nID09PSAwKSB7XHJcbiAgICBmdWxmaWxsKHByb21pc2UsIHRoaXMuX3Jlc3VsdCk7XHJcbiAgfVxyXG59O1xyXG5cclxuRW51bWVyYXRvci5wcm90b3R5cGUuX3dpbGxTZXR0bGVBdCA9IGZ1bmN0aW9uIChwcm9taXNlLCBpKSB7XHJcbiAgdmFyIGVudW1lcmF0b3IgPSB0aGlzO1xyXG5cclxuICBzdWJzY3JpYmUocHJvbWlzZSwgdW5kZWZpbmVkLCBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgIHJldHVybiBlbnVtZXJhdG9yLl9zZXR0bGVkQXQoRlVMRklMTEVELCBpLCB2YWx1ZSk7XHJcbiAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xyXG4gICAgcmV0dXJuIGVudW1lcmF0b3IuX3NldHRsZWRBdChSRUpFQ1RFRCwgaSwgcmVhc29uKTtcclxuICB9KTtcclxufTtcclxuXHJcbi8qKlxyXG4gIGBQcm9taXNlLmFsbGAgYWNjZXB0cyBhbiBhcnJheSBvZiBwcm9taXNlcywgYW5kIHJldHVybnMgYSBuZXcgcHJvbWlzZSB3aGljaFxyXG4gIGlzIGZ1bGZpbGxlZCB3aXRoIGFuIGFycmF5IG9mIGZ1bGZpbGxtZW50IHZhbHVlcyBmb3IgdGhlIHBhc3NlZCBwcm9taXNlcywgb3JcclxuICByZWplY3RlZCB3aXRoIHRoZSByZWFzb24gb2YgdGhlIGZpcnN0IHBhc3NlZCBwcm9taXNlIHRvIGJlIHJlamVjdGVkLiBJdCBjYXN0cyBhbGxcclxuICBlbGVtZW50cyBvZiB0aGUgcGFzc2VkIGl0ZXJhYmxlIHRvIHByb21pc2VzIGFzIGl0IHJ1bnMgdGhpcyBhbGdvcml0aG0uXHJcblxyXG4gIEV4YW1wbGU6XHJcblxyXG4gIGBgYGphdmFzY3JpcHRcclxuICBsZXQgcHJvbWlzZTEgPSByZXNvbHZlKDEpO1xyXG4gIGxldCBwcm9taXNlMiA9IHJlc29sdmUoMik7XHJcbiAgbGV0IHByb21pc2UzID0gcmVzb2x2ZSgzKTtcclxuICBsZXQgcHJvbWlzZXMgPSBbIHByb21pc2UxLCBwcm9taXNlMiwgcHJvbWlzZTMgXTtcclxuXHJcbiAgUHJvbWlzZS5hbGwocHJvbWlzZXMpLnRoZW4oZnVuY3Rpb24oYXJyYXkpe1xyXG4gICAgLy8gVGhlIGFycmF5IGhlcmUgd291bGQgYmUgWyAxLCAyLCAzIF07XHJcbiAgfSk7XHJcbiAgYGBgXHJcblxyXG4gIElmIGFueSBvZiB0aGUgYHByb21pc2VzYCBnaXZlbiB0byBgYWxsYCBhcmUgcmVqZWN0ZWQsIHRoZSBmaXJzdCBwcm9taXNlXHJcbiAgdGhhdCBpcyByZWplY3RlZCB3aWxsIGJlIGdpdmVuIGFzIGFuIGFyZ3VtZW50IHRvIHRoZSByZXR1cm5lZCBwcm9taXNlcydzXHJcbiAgcmVqZWN0aW9uIGhhbmRsZXIuIEZvciBleGFtcGxlOlxyXG5cclxuICBFeGFtcGxlOlxyXG5cclxuICBgYGBqYXZhc2NyaXB0XHJcbiAgbGV0IHByb21pc2UxID0gcmVzb2x2ZSgxKTtcclxuICBsZXQgcHJvbWlzZTIgPSByZWplY3QobmV3IEVycm9yKFwiMlwiKSk7XHJcbiAgbGV0IHByb21pc2UzID0gcmVqZWN0KG5ldyBFcnJvcihcIjNcIikpO1xyXG4gIGxldCBwcm9taXNlcyA9IFsgcHJvbWlzZTEsIHByb21pc2UyLCBwcm9taXNlMyBdO1xyXG5cclxuICBQcm9taXNlLmFsbChwcm9taXNlcykudGhlbihmdW5jdGlvbihhcnJheSl7XHJcbiAgICAvLyBDb2RlIGhlcmUgbmV2ZXIgcnVucyBiZWNhdXNlIHRoZXJlIGFyZSByZWplY3RlZCBwcm9taXNlcyFcclxuICB9LCBmdW5jdGlvbihlcnJvcikge1xyXG4gICAgLy8gZXJyb3IubWVzc2FnZSA9PT0gXCIyXCJcclxuICB9KTtcclxuICBgYGBcclxuXHJcbiAgQG1ldGhvZCBhbGxcclxuICBAc3RhdGljXHJcbiAgQHBhcmFtIHtBcnJheX0gZW50cmllcyBhcnJheSBvZiBwcm9taXNlc1xyXG4gIEBwYXJhbSB7U3RyaW5nfSBsYWJlbCBvcHRpb25hbCBzdHJpbmcgZm9yIGxhYmVsaW5nIHRoZSBwcm9taXNlLlxyXG4gIFVzZWZ1bCBmb3IgdG9vbGluZy5cclxuICBAcmV0dXJuIHtQcm9taXNlfSBwcm9taXNlIHRoYXQgaXMgZnVsZmlsbGVkIHdoZW4gYWxsIGBwcm9taXNlc2AgaGF2ZSBiZWVuXHJcbiAgZnVsZmlsbGVkLCBvciByZWplY3RlZCBpZiBhbnkgb2YgdGhlbSBiZWNvbWUgcmVqZWN0ZWQuXHJcbiAgQHN0YXRpY1xyXG4qL1xyXG5mdW5jdGlvbiBhbGwoZW50cmllcykge1xyXG4gIHJldHVybiBuZXcgRW51bWVyYXRvcih0aGlzLCBlbnRyaWVzKS5wcm9taXNlO1xyXG59XHJcblxyXG4vKipcclxuICBgUHJvbWlzZS5yYWNlYCByZXR1cm5zIGEgbmV3IHByb21pc2Ugd2hpY2ggaXMgc2V0dGxlZCBpbiB0aGUgc2FtZSB3YXkgYXMgdGhlXHJcbiAgZmlyc3QgcGFzc2VkIHByb21pc2UgdG8gc2V0dGxlLlxyXG5cclxuICBFeGFtcGxlOlxyXG5cclxuICBgYGBqYXZhc2NyaXB0XHJcbiAgbGV0IHByb21pc2UxID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KXtcclxuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuICAgICAgcmVzb2x2ZSgncHJvbWlzZSAxJyk7XHJcbiAgICB9LCAyMDApO1xyXG4gIH0pO1xyXG5cclxuICBsZXQgcHJvbWlzZTIgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3Qpe1xyXG4gICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xyXG4gICAgICByZXNvbHZlKCdwcm9taXNlIDInKTtcclxuICAgIH0sIDEwMCk7XHJcbiAgfSk7XHJcblxyXG4gIFByb21pc2UucmFjZShbcHJvbWlzZTEsIHByb21pc2UyXSkudGhlbihmdW5jdGlvbihyZXN1bHQpe1xyXG4gICAgLy8gcmVzdWx0ID09PSAncHJvbWlzZSAyJyBiZWNhdXNlIGl0IHdhcyByZXNvbHZlZCBiZWZvcmUgcHJvbWlzZTFcclxuICAgIC8vIHdhcyByZXNvbHZlZC5cclxuICB9KTtcclxuICBgYGBcclxuXHJcbiAgYFByb21pc2UucmFjZWAgaXMgZGV0ZXJtaW5pc3RpYyBpbiB0aGF0IG9ubHkgdGhlIHN0YXRlIG9mIHRoZSBmaXJzdFxyXG4gIHNldHRsZWQgcHJvbWlzZSBtYXR0ZXJzLiBGb3IgZXhhbXBsZSwgZXZlbiBpZiBvdGhlciBwcm9taXNlcyBnaXZlbiB0byB0aGVcclxuICBgcHJvbWlzZXNgIGFycmF5IGFyZ3VtZW50IGFyZSByZXNvbHZlZCwgYnV0IHRoZSBmaXJzdCBzZXR0bGVkIHByb21pc2UgaGFzXHJcbiAgYmVjb21lIHJlamVjdGVkIGJlZm9yZSB0aGUgb3RoZXIgcHJvbWlzZXMgYmVjYW1lIGZ1bGZpbGxlZCwgdGhlIHJldHVybmVkXHJcbiAgcHJvbWlzZSB3aWxsIGJlY29tZSByZWplY3RlZDpcclxuXHJcbiAgYGBgamF2YXNjcmlwdFxyXG4gIGxldCBwcm9taXNlMSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCl7XHJcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcbiAgICAgIHJlc29sdmUoJ3Byb21pc2UgMScpO1xyXG4gICAgfSwgMjAwKTtcclxuICB9KTtcclxuXHJcbiAgbGV0IHByb21pc2UyID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KXtcclxuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuICAgICAgcmVqZWN0KG5ldyBFcnJvcigncHJvbWlzZSAyJykpO1xyXG4gICAgfSwgMTAwKTtcclxuICB9KTtcclxuXHJcbiAgUHJvbWlzZS5yYWNlKFtwcm9taXNlMSwgcHJvbWlzZTJdKS50aGVuKGZ1bmN0aW9uKHJlc3VsdCl7XHJcbiAgICAvLyBDb2RlIGhlcmUgbmV2ZXIgcnVuc1xyXG4gIH0sIGZ1bmN0aW9uKHJlYXNvbil7XHJcbiAgICAvLyByZWFzb24ubWVzc2FnZSA9PT0gJ3Byb21pc2UgMicgYmVjYXVzZSBwcm9taXNlIDIgYmVjYW1lIHJlamVjdGVkIGJlZm9yZVxyXG4gICAgLy8gcHJvbWlzZSAxIGJlY2FtZSBmdWxmaWxsZWRcclxuICB9KTtcclxuICBgYGBcclxuXHJcbiAgQW4gZXhhbXBsZSByZWFsLXdvcmxkIHVzZSBjYXNlIGlzIGltcGxlbWVudGluZyB0aW1lb3V0czpcclxuXHJcbiAgYGBgamF2YXNjcmlwdFxyXG4gIFByb21pc2UucmFjZShbYWpheCgnZm9vLmpzb24nKSwgdGltZW91dCg1MDAwKV0pXHJcbiAgYGBgXHJcblxyXG4gIEBtZXRob2QgcmFjZVxyXG4gIEBzdGF0aWNcclxuICBAcGFyYW0ge0FycmF5fSBwcm9taXNlcyBhcnJheSBvZiBwcm9taXNlcyB0byBvYnNlcnZlXHJcbiAgVXNlZnVsIGZvciB0b29saW5nLlxyXG4gIEByZXR1cm4ge1Byb21pc2V9IGEgcHJvbWlzZSB3aGljaCBzZXR0bGVzIGluIHRoZSBzYW1lIHdheSBhcyB0aGUgZmlyc3QgcGFzc2VkXHJcbiAgcHJvbWlzZSB0byBzZXR0bGUuXHJcbiovXHJcbmZ1bmN0aW9uIHJhY2UoZW50cmllcykge1xyXG4gIC8qanNoaW50IHZhbGlkdGhpczp0cnVlICovXHJcbiAgdmFyIENvbnN0cnVjdG9yID0gdGhpcztcclxuXHJcbiAgaWYgKCFpc0FycmF5KGVudHJpZXMpKSB7XHJcbiAgICByZXR1cm4gbmV3IENvbnN0cnVjdG9yKGZ1bmN0aW9uIChfLCByZWplY3QpIHtcclxuICAgICAgcmV0dXJuIHJlamVjdChuZXcgVHlwZUVycm9yKCdZb3UgbXVzdCBwYXNzIGFuIGFycmF5IHRvIHJhY2UuJykpO1xyXG4gICAgfSk7XHJcbiAgfSBlbHNlIHtcclxuICAgIHJldHVybiBuZXcgQ29uc3RydWN0b3IoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICB2YXIgbGVuZ3RoID0gZW50cmllcy5sZW5ndGg7XHJcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBDb25zdHJ1Y3Rvci5yZXNvbHZlKGVudHJpZXNbaV0pLnRoZW4ocmVzb2x2ZSwgcmVqZWN0KTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICBgUHJvbWlzZS5yZWplY3RgIHJldHVybnMgYSBwcm9taXNlIHJlamVjdGVkIHdpdGggdGhlIHBhc3NlZCBgcmVhc29uYC5cclxuICBJdCBpcyBzaG9ydGhhbmQgZm9yIHRoZSBmb2xsb3dpbmc6XHJcblxyXG4gIGBgYGphdmFzY3JpcHRcclxuICBsZXQgcHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCl7XHJcbiAgICByZWplY3QobmV3IEVycm9yKCdXSE9PUFMnKSk7XHJcbiAgfSk7XHJcblxyXG4gIHByb21pc2UudGhlbihmdW5jdGlvbih2YWx1ZSl7XHJcbiAgICAvLyBDb2RlIGhlcmUgZG9lc24ndCBydW4gYmVjYXVzZSB0aGUgcHJvbWlzZSBpcyByZWplY3RlZCFcclxuICB9LCBmdW5jdGlvbihyZWFzb24pe1xyXG4gICAgLy8gcmVhc29uLm1lc3NhZ2UgPT09ICdXSE9PUFMnXHJcbiAgfSk7XHJcbiAgYGBgXHJcblxyXG4gIEluc3RlYWQgb2Ygd3JpdGluZyB0aGUgYWJvdmUsIHlvdXIgY29kZSBub3cgc2ltcGx5IGJlY29tZXMgdGhlIGZvbGxvd2luZzpcclxuXHJcbiAgYGBgamF2YXNjcmlwdFxyXG4gIGxldCBwcm9taXNlID0gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCdXSE9PUFMnKSk7XHJcblxyXG4gIHByb21pc2UudGhlbihmdW5jdGlvbih2YWx1ZSl7XHJcbiAgICAvLyBDb2RlIGhlcmUgZG9lc24ndCBydW4gYmVjYXVzZSB0aGUgcHJvbWlzZSBpcyByZWplY3RlZCFcclxuICB9LCBmdW5jdGlvbihyZWFzb24pe1xyXG4gICAgLy8gcmVhc29uLm1lc3NhZ2UgPT09ICdXSE9PUFMnXHJcbiAgfSk7XHJcbiAgYGBgXHJcblxyXG4gIEBtZXRob2QgcmVqZWN0XHJcbiAgQHN0YXRpY1xyXG4gIEBwYXJhbSB7QW55fSByZWFzb24gdmFsdWUgdGhhdCB0aGUgcmV0dXJuZWQgcHJvbWlzZSB3aWxsIGJlIHJlamVjdGVkIHdpdGguXHJcbiAgVXNlZnVsIGZvciB0b29saW5nLlxyXG4gIEByZXR1cm4ge1Byb21pc2V9IGEgcHJvbWlzZSByZWplY3RlZCB3aXRoIHRoZSBnaXZlbiBgcmVhc29uYC5cclxuKi9cclxuZnVuY3Rpb24gcmVqZWN0KHJlYXNvbikge1xyXG4gIC8qanNoaW50IHZhbGlkdGhpczp0cnVlICovXHJcbiAgdmFyIENvbnN0cnVjdG9yID0gdGhpcztcclxuICB2YXIgcHJvbWlzZSA9IG5ldyBDb25zdHJ1Y3Rvcihub29wKTtcclxuICBfcmVqZWN0KHByb21pc2UsIHJlYXNvbik7XHJcbiAgcmV0dXJuIHByb21pc2U7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG5lZWRzUmVzb2x2ZXIoKSB7XHJcbiAgdGhyb3cgbmV3IFR5cGVFcnJvcignWW91IG11c3QgcGFzcyBhIHJlc29sdmVyIGZ1bmN0aW9uIGFzIHRoZSBmaXJzdCBhcmd1bWVudCB0byB0aGUgcHJvbWlzZSBjb25zdHJ1Y3RvcicpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBuZWVkc05ldygpIHtcclxuICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiRmFpbGVkIHRvIGNvbnN0cnVjdCAnUHJvbWlzZSc6IFBsZWFzZSB1c2UgdGhlICduZXcnIG9wZXJhdG9yLCB0aGlzIG9iamVjdCBjb25zdHJ1Y3RvciBjYW5ub3QgYmUgY2FsbGVkIGFzIGEgZnVuY3Rpb24uXCIpO1xyXG59XHJcblxyXG4vKipcclxuICBQcm9taXNlIG9iamVjdHMgcmVwcmVzZW50IHRoZSBldmVudHVhbCByZXN1bHQgb2YgYW4gYXN5bmNocm9ub3VzIG9wZXJhdGlvbi4gVGhlXHJcbiAgcHJpbWFyeSB3YXkgb2YgaW50ZXJhY3Rpbmcgd2l0aCBhIHByb21pc2UgaXMgdGhyb3VnaCBpdHMgYHRoZW5gIG1ldGhvZCwgd2hpY2hcclxuICByZWdpc3RlcnMgY2FsbGJhY2tzIHRvIHJlY2VpdmUgZWl0aGVyIGEgcHJvbWlzZSdzIGV2ZW50dWFsIHZhbHVlIG9yIHRoZSByZWFzb25cclxuICB3aHkgdGhlIHByb21pc2UgY2Fubm90IGJlIGZ1bGZpbGxlZC5cclxuXHJcbiAgVGVybWlub2xvZ3lcclxuICAtLS0tLS0tLS0tLVxyXG5cclxuICAtIGBwcm9taXNlYCBpcyBhbiBvYmplY3Qgb3IgZnVuY3Rpb24gd2l0aCBhIGB0aGVuYCBtZXRob2Qgd2hvc2UgYmVoYXZpb3IgY29uZm9ybXMgdG8gdGhpcyBzcGVjaWZpY2F0aW9uLlxyXG4gIC0gYHRoZW5hYmxlYCBpcyBhbiBvYmplY3Qgb3IgZnVuY3Rpb24gdGhhdCBkZWZpbmVzIGEgYHRoZW5gIG1ldGhvZC5cclxuICAtIGB2YWx1ZWAgaXMgYW55IGxlZ2FsIEphdmFTY3JpcHQgdmFsdWUgKGluY2x1ZGluZyB1bmRlZmluZWQsIGEgdGhlbmFibGUsIG9yIGEgcHJvbWlzZSkuXHJcbiAgLSBgZXhjZXB0aW9uYCBpcyBhIHZhbHVlIHRoYXQgaXMgdGhyb3duIHVzaW5nIHRoZSB0aHJvdyBzdGF0ZW1lbnQuXHJcbiAgLSBgcmVhc29uYCBpcyBhIHZhbHVlIHRoYXQgaW5kaWNhdGVzIHdoeSBhIHByb21pc2Ugd2FzIHJlamVjdGVkLlxyXG4gIC0gYHNldHRsZWRgIHRoZSBmaW5hbCByZXN0aW5nIHN0YXRlIG9mIGEgcHJvbWlzZSwgZnVsZmlsbGVkIG9yIHJlamVjdGVkLlxyXG5cclxuICBBIHByb21pc2UgY2FuIGJlIGluIG9uZSBvZiB0aHJlZSBzdGF0ZXM6IHBlbmRpbmcsIGZ1bGZpbGxlZCwgb3IgcmVqZWN0ZWQuXHJcblxyXG4gIFByb21pc2VzIHRoYXQgYXJlIGZ1bGZpbGxlZCBoYXZlIGEgZnVsZmlsbG1lbnQgdmFsdWUgYW5kIGFyZSBpbiB0aGUgZnVsZmlsbGVkXHJcbiAgc3RhdGUuICBQcm9taXNlcyB0aGF0IGFyZSByZWplY3RlZCBoYXZlIGEgcmVqZWN0aW9uIHJlYXNvbiBhbmQgYXJlIGluIHRoZVxyXG4gIHJlamVjdGVkIHN0YXRlLiAgQSBmdWxmaWxsbWVudCB2YWx1ZSBpcyBuZXZlciBhIHRoZW5hYmxlLlxyXG5cclxuICBQcm9taXNlcyBjYW4gYWxzbyBiZSBzYWlkIHRvICpyZXNvbHZlKiBhIHZhbHVlLiAgSWYgdGhpcyB2YWx1ZSBpcyBhbHNvIGFcclxuICBwcm9taXNlLCB0aGVuIHRoZSBvcmlnaW5hbCBwcm9taXNlJ3Mgc2V0dGxlZCBzdGF0ZSB3aWxsIG1hdGNoIHRoZSB2YWx1ZSdzXHJcbiAgc2V0dGxlZCBzdGF0ZS4gIFNvIGEgcHJvbWlzZSB0aGF0ICpyZXNvbHZlcyogYSBwcm9taXNlIHRoYXQgcmVqZWN0cyB3aWxsXHJcbiAgaXRzZWxmIHJlamVjdCwgYW5kIGEgcHJvbWlzZSB0aGF0ICpyZXNvbHZlcyogYSBwcm9taXNlIHRoYXQgZnVsZmlsbHMgd2lsbFxyXG4gIGl0c2VsZiBmdWxmaWxsLlxyXG5cclxuXHJcbiAgQmFzaWMgVXNhZ2U6XHJcbiAgLS0tLS0tLS0tLS0tXHJcblxyXG4gIGBgYGpzXHJcbiAgbGV0IHByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcclxuICAgIC8vIG9uIHN1Y2Nlc3NcclxuICAgIHJlc29sdmUodmFsdWUpO1xyXG5cclxuICAgIC8vIG9uIGZhaWx1cmVcclxuICAgIHJlamVjdChyZWFzb24pO1xyXG4gIH0pO1xyXG5cclxuICBwcm9taXNlLnRoZW4oZnVuY3Rpb24odmFsdWUpIHtcclxuICAgIC8vIG9uIGZ1bGZpbGxtZW50XHJcbiAgfSwgZnVuY3Rpb24ocmVhc29uKSB7XHJcbiAgICAvLyBvbiByZWplY3Rpb25cclxuICB9KTtcclxuICBgYGBcclxuXHJcbiAgQWR2YW5jZWQgVXNhZ2U6XHJcbiAgLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gIFByb21pc2VzIHNoaW5lIHdoZW4gYWJzdHJhY3RpbmcgYXdheSBhc3luY2hyb25vdXMgaW50ZXJhY3Rpb25zIHN1Y2ggYXNcclxuICBgWE1MSHR0cFJlcXVlc3Rgcy5cclxuXHJcbiAgYGBganNcclxuICBmdW5jdGlvbiBnZXRKU09OKHVybCkge1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCl7XHJcbiAgICAgIGxldCB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuXHJcbiAgICAgIHhoci5vcGVuKCdHRVQnLCB1cmwpO1xyXG4gICAgICB4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gaGFuZGxlcjtcclxuICAgICAgeGhyLnJlc3BvbnNlVHlwZSA9ICdqc29uJztcclxuICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoJ0FjY2VwdCcsICdhcHBsaWNhdGlvbi9qc29uJyk7XHJcbiAgICAgIHhoci5zZW5kKCk7XHJcblxyXG4gICAgICBmdW5jdGlvbiBoYW5kbGVyKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnJlYWR5U3RhdGUgPT09IHRoaXMuRE9ORSkge1xyXG4gICAgICAgICAgaWYgKHRoaXMuc3RhdHVzID09PSAyMDApIHtcclxuICAgICAgICAgICAgcmVzb2x2ZSh0aGlzLnJlc3BvbnNlKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoJ2dldEpTT046IGAnICsgdXJsICsgJ2AgZmFpbGVkIHdpdGggc3RhdHVzOiBbJyArIHRoaXMuc3RhdHVzICsgJ10nKSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9O1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBnZXRKU09OKCcvcG9zdHMuanNvbicpLnRoZW4oZnVuY3Rpb24oanNvbikge1xyXG4gICAgLy8gb24gZnVsZmlsbG1lbnRcclxuICB9LCBmdW5jdGlvbihyZWFzb24pIHtcclxuICAgIC8vIG9uIHJlamVjdGlvblxyXG4gIH0pO1xyXG4gIGBgYFxyXG5cclxuICBVbmxpa2UgY2FsbGJhY2tzLCBwcm9taXNlcyBhcmUgZ3JlYXQgY29tcG9zYWJsZSBwcmltaXRpdmVzLlxyXG5cclxuICBgYGBqc1xyXG4gIFByb21pc2UuYWxsKFtcclxuICAgIGdldEpTT04oJy9wb3N0cycpLFxyXG4gICAgZ2V0SlNPTignL2NvbW1lbnRzJylcclxuICBdKS50aGVuKGZ1bmN0aW9uKHZhbHVlcyl7XHJcbiAgICB2YWx1ZXNbMF0gLy8gPT4gcG9zdHNKU09OXHJcbiAgICB2YWx1ZXNbMV0gLy8gPT4gY29tbWVudHNKU09OXHJcblxyXG4gICAgcmV0dXJuIHZhbHVlcztcclxuICB9KTtcclxuICBgYGBcclxuXHJcbiAgQGNsYXNzIFByb21pc2VcclxuICBAcGFyYW0ge2Z1bmN0aW9ufSByZXNvbHZlclxyXG4gIFVzZWZ1bCBmb3IgdG9vbGluZy5cclxuICBAY29uc3RydWN0b3JcclxuKi9cclxuZnVuY3Rpb24gUHJvbWlzZShyZXNvbHZlcikge1xyXG4gIHRoaXNbUFJPTUlTRV9JRF0gPSBuZXh0SWQoKTtcclxuICB0aGlzLl9yZXN1bHQgPSB0aGlzLl9zdGF0ZSA9IHVuZGVmaW5lZDtcclxuICB0aGlzLl9zdWJzY3JpYmVycyA9IFtdO1xyXG5cclxuICBpZiAobm9vcCAhPT0gcmVzb2x2ZXIpIHtcclxuICAgIHR5cGVvZiByZXNvbHZlciAhPT0gJ2Z1bmN0aW9uJyAmJiBuZWVkc1Jlc29sdmVyKCk7XHJcbiAgICB0aGlzIGluc3RhbmNlb2YgUHJvbWlzZSA/IGluaXRpYWxpemVQcm9taXNlKHRoaXMsIHJlc29sdmVyKSA6IG5lZWRzTmV3KCk7XHJcbiAgfVxyXG59XHJcblxyXG5Qcm9taXNlLmFsbCA9IGFsbDtcclxuUHJvbWlzZS5yYWNlID0gcmFjZTtcclxuUHJvbWlzZS5yZXNvbHZlID0gcmVzb2x2ZTtcclxuUHJvbWlzZS5yZWplY3QgPSByZWplY3Q7XHJcblByb21pc2UuX3NldFNjaGVkdWxlciA9IHNldFNjaGVkdWxlcjtcclxuUHJvbWlzZS5fc2V0QXNhcCA9IHNldEFzYXA7XHJcblByb21pc2UuX2FzYXAgPSBhc2FwO1xyXG5cclxuUHJvbWlzZS5wcm90b3R5cGUgPSB7XHJcbiAgY29uc3RydWN0b3I6IFByb21pc2UsXHJcblxyXG4gIC8qKlxyXG4gICAgVGhlIHByaW1hcnkgd2F5IG9mIGludGVyYWN0aW5nIHdpdGggYSBwcm9taXNlIGlzIHRocm91Z2ggaXRzIGB0aGVuYCBtZXRob2QsXHJcbiAgICB3aGljaCByZWdpc3RlcnMgY2FsbGJhY2tzIHRvIHJlY2VpdmUgZWl0aGVyIGEgcHJvbWlzZSdzIGV2ZW50dWFsIHZhbHVlIG9yIHRoZVxyXG4gICAgcmVhc29uIHdoeSB0aGUgcHJvbWlzZSBjYW5ub3QgYmUgZnVsZmlsbGVkLlxyXG4gIFxyXG4gICAgYGBganNcclxuICAgIGZpbmRVc2VyKCkudGhlbihmdW5jdGlvbih1c2VyKXtcclxuICAgICAgLy8gdXNlciBpcyBhdmFpbGFibGVcclxuICAgIH0sIGZ1bmN0aW9uKHJlYXNvbil7XHJcbiAgICAgIC8vIHVzZXIgaXMgdW5hdmFpbGFibGUsIGFuZCB5b3UgYXJlIGdpdmVuIHRoZSByZWFzb24gd2h5XHJcbiAgICB9KTtcclxuICAgIGBgYFxyXG4gIFxyXG4gICAgQ2hhaW5pbmdcclxuICAgIC0tLS0tLS0tXHJcbiAgXHJcbiAgICBUaGUgcmV0dXJuIHZhbHVlIG9mIGB0aGVuYCBpcyBpdHNlbGYgYSBwcm9taXNlLiAgVGhpcyBzZWNvbmQsICdkb3duc3RyZWFtJ1xyXG4gICAgcHJvbWlzZSBpcyByZXNvbHZlZCB3aXRoIHRoZSByZXR1cm4gdmFsdWUgb2YgdGhlIGZpcnN0IHByb21pc2UncyBmdWxmaWxsbWVudFxyXG4gICAgb3IgcmVqZWN0aW9uIGhhbmRsZXIsIG9yIHJlamVjdGVkIGlmIHRoZSBoYW5kbGVyIHRocm93cyBhbiBleGNlcHRpb24uXHJcbiAgXHJcbiAgICBgYGBqc1xyXG4gICAgZmluZFVzZXIoKS50aGVuKGZ1bmN0aW9uICh1c2VyKSB7XHJcbiAgICAgIHJldHVybiB1c2VyLm5hbWU7XHJcbiAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XHJcbiAgICAgIHJldHVybiAnZGVmYXVsdCBuYW1lJztcclxuICAgIH0pLnRoZW4oZnVuY3Rpb24gKHVzZXJOYW1lKSB7XHJcbiAgICAgIC8vIElmIGBmaW5kVXNlcmAgZnVsZmlsbGVkLCBgdXNlck5hbWVgIHdpbGwgYmUgdGhlIHVzZXIncyBuYW1lLCBvdGhlcndpc2UgaXRcclxuICAgICAgLy8gd2lsbCBiZSBgJ2RlZmF1bHQgbmFtZSdgXHJcbiAgICB9KTtcclxuICBcclxuICAgIGZpbmRVc2VyKCkudGhlbihmdW5jdGlvbiAodXNlcikge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZvdW5kIHVzZXIsIGJ1dCBzdGlsbCB1bmhhcHB5Jyk7XHJcbiAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignYGZpbmRVc2VyYCByZWplY3RlZCBhbmQgd2UncmUgdW5oYXBweScpO1xyXG4gICAgfSkudGhlbihmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgLy8gbmV2ZXIgcmVhY2hlZFxyXG4gICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xyXG4gICAgICAvLyBpZiBgZmluZFVzZXJgIGZ1bGZpbGxlZCwgYHJlYXNvbmAgd2lsbCBiZSAnRm91bmQgdXNlciwgYnV0IHN0aWxsIHVuaGFwcHknLlxyXG4gICAgICAvLyBJZiBgZmluZFVzZXJgIHJlamVjdGVkLCBgcmVhc29uYCB3aWxsIGJlICdgZmluZFVzZXJgIHJlamVjdGVkIGFuZCB3ZSdyZSB1bmhhcHB5Jy5cclxuICAgIH0pO1xyXG4gICAgYGBgXHJcbiAgICBJZiB0aGUgZG93bnN0cmVhbSBwcm9taXNlIGRvZXMgbm90IHNwZWNpZnkgYSByZWplY3Rpb24gaGFuZGxlciwgcmVqZWN0aW9uIHJlYXNvbnMgd2lsbCBiZSBwcm9wYWdhdGVkIGZ1cnRoZXIgZG93bnN0cmVhbS5cclxuICBcclxuICAgIGBgYGpzXHJcbiAgICBmaW5kVXNlcigpLnRoZW4oZnVuY3Rpb24gKHVzZXIpIHtcclxuICAgICAgdGhyb3cgbmV3IFBlZGFnb2dpY2FsRXhjZXB0aW9uKCdVcHN0cmVhbSBlcnJvcicpO1xyXG4gICAgfSkudGhlbihmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgLy8gbmV2ZXIgcmVhY2hlZFxyXG4gICAgfSkudGhlbihmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgLy8gbmV2ZXIgcmVhY2hlZFxyXG4gICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xyXG4gICAgICAvLyBUaGUgYFBlZGdhZ29jaWFsRXhjZXB0aW9uYCBpcyBwcm9wYWdhdGVkIGFsbCB0aGUgd2F5IGRvd24gdG8gaGVyZVxyXG4gICAgfSk7XHJcbiAgICBgYGBcclxuICBcclxuICAgIEFzc2ltaWxhdGlvblxyXG4gICAgLS0tLS0tLS0tLS0tXHJcbiAgXHJcbiAgICBTb21ldGltZXMgdGhlIHZhbHVlIHlvdSB3YW50IHRvIHByb3BhZ2F0ZSB0byBhIGRvd25zdHJlYW0gcHJvbWlzZSBjYW4gb25seSBiZVxyXG4gICAgcmV0cmlldmVkIGFzeW5jaHJvbm91c2x5LiBUaGlzIGNhbiBiZSBhY2hpZXZlZCBieSByZXR1cm5pbmcgYSBwcm9taXNlIGluIHRoZVxyXG4gICAgZnVsZmlsbG1lbnQgb3IgcmVqZWN0aW9uIGhhbmRsZXIuIFRoZSBkb3duc3RyZWFtIHByb21pc2Ugd2lsbCB0aGVuIGJlIHBlbmRpbmdcclxuICAgIHVudGlsIHRoZSByZXR1cm5lZCBwcm9taXNlIGlzIHNldHRsZWQuIFRoaXMgaXMgY2FsbGVkICphc3NpbWlsYXRpb24qLlxyXG4gIFxyXG4gICAgYGBganNcclxuICAgIGZpbmRVc2VyKCkudGhlbihmdW5jdGlvbiAodXNlcikge1xyXG4gICAgICByZXR1cm4gZmluZENvbW1lbnRzQnlBdXRob3IodXNlcik7XHJcbiAgICB9KS50aGVuKGZ1bmN0aW9uIChjb21tZW50cykge1xyXG4gICAgICAvLyBUaGUgdXNlcidzIGNvbW1lbnRzIGFyZSBub3cgYXZhaWxhYmxlXHJcbiAgICB9KTtcclxuICAgIGBgYFxyXG4gIFxyXG4gICAgSWYgdGhlIGFzc2ltbGlhdGVkIHByb21pc2UgcmVqZWN0cywgdGhlbiB0aGUgZG93bnN0cmVhbSBwcm9taXNlIHdpbGwgYWxzbyByZWplY3QuXHJcbiAgXHJcbiAgICBgYGBqc1xyXG4gICAgZmluZFVzZXIoKS50aGVuKGZ1bmN0aW9uICh1c2VyKSB7XHJcbiAgICAgIHJldHVybiBmaW5kQ29tbWVudHNCeUF1dGhvcih1c2VyKTtcclxuICAgIH0pLnRoZW4oZnVuY3Rpb24gKGNvbW1lbnRzKSB7XHJcbiAgICAgIC8vIElmIGBmaW5kQ29tbWVudHNCeUF1dGhvcmAgZnVsZmlsbHMsIHdlJ2xsIGhhdmUgdGhlIHZhbHVlIGhlcmVcclxuICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcclxuICAgICAgLy8gSWYgYGZpbmRDb21tZW50c0J5QXV0aG9yYCByZWplY3RzLCB3ZSdsbCBoYXZlIHRoZSByZWFzb24gaGVyZVxyXG4gICAgfSk7XHJcbiAgICBgYGBcclxuICBcclxuICAgIFNpbXBsZSBFeGFtcGxlXHJcbiAgICAtLS0tLS0tLS0tLS0tLVxyXG4gIFxyXG4gICAgU3luY2hyb25vdXMgRXhhbXBsZVxyXG4gIFxyXG4gICAgYGBgamF2YXNjcmlwdFxyXG4gICAgbGV0IHJlc3VsdDtcclxuICBcclxuICAgIHRyeSB7XHJcbiAgICAgIHJlc3VsdCA9IGZpbmRSZXN1bHQoKTtcclxuICAgICAgLy8gc3VjY2Vzc1xyXG4gICAgfSBjYXRjaChyZWFzb24pIHtcclxuICAgICAgLy8gZmFpbHVyZVxyXG4gICAgfVxyXG4gICAgYGBgXHJcbiAgXHJcbiAgICBFcnJiYWNrIEV4YW1wbGVcclxuICBcclxuICAgIGBgYGpzXHJcbiAgICBmaW5kUmVzdWx0KGZ1bmN0aW9uKHJlc3VsdCwgZXJyKXtcclxuICAgICAgaWYgKGVycikge1xyXG4gICAgICAgIC8vIGZhaWx1cmVcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAvLyBzdWNjZXNzXHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgYGBgXHJcbiAgXHJcbiAgICBQcm9taXNlIEV4YW1wbGU7XHJcbiAgXHJcbiAgICBgYGBqYXZhc2NyaXB0XHJcbiAgICBmaW5kUmVzdWx0KCkudGhlbihmdW5jdGlvbihyZXN1bHQpe1xyXG4gICAgICAvLyBzdWNjZXNzXHJcbiAgICB9LCBmdW5jdGlvbihyZWFzb24pe1xyXG4gICAgICAvLyBmYWlsdXJlXHJcbiAgICB9KTtcclxuICAgIGBgYFxyXG4gIFxyXG4gICAgQWR2YW5jZWQgRXhhbXBsZVxyXG4gICAgLS0tLS0tLS0tLS0tLS1cclxuICBcclxuICAgIFN5bmNocm9ub3VzIEV4YW1wbGVcclxuICBcclxuICAgIGBgYGphdmFzY3JpcHRcclxuICAgIGxldCBhdXRob3IsIGJvb2tzO1xyXG4gIFxyXG4gICAgdHJ5IHtcclxuICAgICAgYXV0aG9yID0gZmluZEF1dGhvcigpO1xyXG4gICAgICBib29rcyAgPSBmaW5kQm9va3NCeUF1dGhvcihhdXRob3IpO1xyXG4gICAgICAvLyBzdWNjZXNzXHJcbiAgICB9IGNhdGNoKHJlYXNvbikge1xyXG4gICAgICAvLyBmYWlsdXJlXHJcbiAgICB9XHJcbiAgICBgYGBcclxuICBcclxuICAgIEVycmJhY2sgRXhhbXBsZVxyXG4gIFxyXG4gICAgYGBganNcclxuICBcclxuICAgIGZ1bmN0aW9uIGZvdW5kQm9va3MoYm9va3MpIHtcclxuICBcclxuICAgIH1cclxuICBcclxuICAgIGZ1bmN0aW9uIGZhaWx1cmUocmVhc29uKSB7XHJcbiAgXHJcbiAgICB9XHJcbiAgXHJcbiAgICBmaW5kQXV0aG9yKGZ1bmN0aW9uKGF1dGhvciwgZXJyKXtcclxuICAgICAgaWYgKGVycikge1xyXG4gICAgICAgIGZhaWx1cmUoZXJyKTtcclxuICAgICAgICAvLyBmYWlsdXJlXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIGZpbmRCb29va3NCeUF1dGhvcihhdXRob3IsIGZ1bmN0aW9uKGJvb2tzLCBlcnIpIHtcclxuICAgICAgICAgICAgaWYgKGVycikge1xyXG4gICAgICAgICAgICAgIGZhaWx1cmUoZXJyKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgZm91bmRCb29rcyhib29rcyk7XHJcbiAgICAgICAgICAgICAgfSBjYXRjaChyZWFzb24pIHtcclxuICAgICAgICAgICAgICAgIGZhaWx1cmUocmVhc29uKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gY2F0Y2goZXJyb3IpIHtcclxuICAgICAgICAgIGZhaWx1cmUoZXJyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gc3VjY2Vzc1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICAgIGBgYFxyXG4gIFxyXG4gICAgUHJvbWlzZSBFeGFtcGxlO1xyXG4gIFxyXG4gICAgYGBgamF2YXNjcmlwdFxyXG4gICAgZmluZEF1dGhvcigpLlxyXG4gICAgICB0aGVuKGZpbmRCb29rc0J5QXV0aG9yKS5cclxuICAgICAgdGhlbihmdW5jdGlvbihib29rcyl7XHJcbiAgICAgICAgLy8gZm91bmQgYm9va3NcclxuICAgIH0pLmNhdGNoKGZ1bmN0aW9uKHJlYXNvbil7XHJcbiAgICAgIC8vIHNvbWV0aGluZyB3ZW50IHdyb25nXHJcbiAgICB9KTtcclxuICAgIGBgYFxyXG4gIFxyXG4gICAgQG1ldGhvZCB0aGVuXHJcbiAgICBAcGFyYW0ge0Z1bmN0aW9ufSBvbkZ1bGZpbGxlZFxyXG4gICAgQHBhcmFtIHtGdW5jdGlvbn0gb25SZWplY3RlZFxyXG4gICAgVXNlZnVsIGZvciB0b29saW5nLlxyXG4gICAgQHJldHVybiB7UHJvbWlzZX1cclxuICAqL1xyXG4gIHRoZW46IHRoZW4sXHJcblxyXG4gIC8qKlxyXG4gICAgYGNhdGNoYCBpcyBzaW1wbHkgc3VnYXIgZm9yIGB0aGVuKHVuZGVmaW5lZCwgb25SZWplY3Rpb24pYCB3aGljaCBtYWtlcyBpdCB0aGUgc2FtZVxyXG4gICAgYXMgdGhlIGNhdGNoIGJsb2NrIG9mIGEgdHJ5L2NhdGNoIHN0YXRlbWVudC5cclxuICBcclxuICAgIGBgYGpzXHJcbiAgICBmdW5jdGlvbiBmaW5kQXV0aG9yKCl7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignY291bGRuJ3QgZmluZCB0aGF0IGF1dGhvcicpO1xyXG4gICAgfVxyXG4gIFxyXG4gICAgLy8gc3luY2hyb25vdXNcclxuICAgIHRyeSB7XHJcbiAgICAgIGZpbmRBdXRob3IoKTtcclxuICAgIH0gY2F0Y2gocmVhc29uKSB7XHJcbiAgICAgIC8vIHNvbWV0aGluZyB3ZW50IHdyb25nXHJcbiAgICB9XHJcbiAgXHJcbiAgICAvLyBhc3luYyB3aXRoIHByb21pc2VzXHJcbiAgICBmaW5kQXV0aG9yKCkuY2F0Y2goZnVuY3Rpb24ocmVhc29uKXtcclxuICAgICAgLy8gc29tZXRoaW5nIHdlbnQgd3JvbmdcclxuICAgIH0pO1xyXG4gICAgYGBgXHJcbiAgXHJcbiAgICBAbWV0aG9kIGNhdGNoXHJcbiAgICBAcGFyYW0ge0Z1bmN0aW9ufSBvblJlamVjdGlvblxyXG4gICAgVXNlZnVsIGZvciB0b29saW5nLlxyXG4gICAgQHJldHVybiB7UHJvbWlzZX1cclxuICAqL1xyXG4gICdjYXRjaCc6IGZ1bmN0aW9uIF9jYXRjaChvblJlamVjdGlvbikge1xyXG4gICAgcmV0dXJuIHRoaXMudGhlbihudWxsLCBvblJlamVjdGlvbik7XHJcbiAgfVxyXG59O1xyXG5cclxuZnVuY3Rpb24gcG9seWZpbGwoKSB7XHJcbiAgICB2YXIgbG9jYWwgPSB1bmRlZmluZWQ7XHJcblxyXG4gICAgaWYgKHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgbG9jYWwgPSBnbG9iYWw7XHJcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgIGxvY2FsID0gc2VsZjtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgbG9jYWwgPSBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdwb2x5ZmlsbCBmYWlsZWQgYmVjYXVzZSBnbG9iYWwgb2JqZWN0IGlzIHVuYXZhaWxhYmxlIGluIHRoaXMgZW52aXJvbm1lbnQnKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIFAgPSBsb2NhbC5Qcm9taXNlO1xyXG5cclxuICAgIGlmIChQKSB7XHJcbiAgICAgICAgdmFyIHByb21pc2VUb1N0cmluZyA9IG51bGw7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgcHJvbWlzZVRvU3RyaW5nID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKFAucmVzb2x2ZSgpKTtcclxuICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIC8vIHNpbGVudGx5IGlnbm9yZWRcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChwcm9taXNlVG9TdHJpbmcgPT09ICdbb2JqZWN0IFByb21pc2VdJyAmJiAhUC5jYXN0KSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgbG9jYWwuUHJvbWlzZSA9IFByb21pc2U7XHJcbn1cclxuXHJcbnBvbHlmaWxsKCk7XHJcbi8vIFN0cmFuZ2UgY29tcGF0Li5cclxuUHJvbWlzZS5wb2x5ZmlsbCA9IHBvbHlmaWxsO1xyXG5Qcm9taXNlLlByb21pc2UgPSBQcm9taXNlO1xyXG5cclxucmV0dXJuIFByb21pc2U7XHJcblxyXG59KSkpO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1lczYtcHJvbWlzZS5tYXAiLCIndXNlIHN0cmljdCc7XHJcblxyXG52YXIgaGFzID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcclxuXHJcbi8vXHJcbi8vIFdlIHN0b3JlIG91ciBFRSBvYmplY3RzIGluIGEgcGxhaW4gb2JqZWN0IHdob3NlIHByb3BlcnRpZXMgYXJlIGV2ZW50IG5hbWVzLlxyXG4vLyBJZiBgT2JqZWN0LmNyZWF0ZShudWxsKWAgaXMgbm90IHN1cHBvcnRlZCB3ZSBwcmVmaXggdGhlIGV2ZW50IG5hbWVzIHdpdGggYVxyXG4vLyBgfmAgdG8gbWFrZSBzdXJlIHRoYXQgdGhlIGJ1aWx0LWluIG9iamVjdCBwcm9wZXJ0aWVzIGFyZSBub3Qgb3ZlcnJpZGRlbiBvclxyXG4vLyB1c2VkIGFzIGFuIGF0dGFjayB2ZWN0b3IuXHJcbi8vIFdlIGFsc28gYXNzdW1lIHRoYXQgYE9iamVjdC5jcmVhdGUobnVsbClgIGlzIGF2YWlsYWJsZSB3aGVuIHRoZSBldmVudCBuYW1lXHJcbi8vIGlzIGFuIEVTNiBTeW1ib2wuXHJcbi8vXHJcbnZhciBwcmVmaXggPSB0eXBlb2YgT2JqZWN0LmNyZWF0ZSAhPT0gJ2Z1bmN0aW9uJyA/ICd+JyA6IGZhbHNlO1xyXG5cclxuLyoqXHJcbiAqIFJlcHJlc2VudGF0aW9uIG9mIGEgc2luZ2xlIEV2ZW50RW1pdHRlciBmdW5jdGlvbi5cclxuICpcclxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gRXZlbnQgaGFuZGxlciB0byBiZSBjYWxsZWQuXHJcbiAqIEBwYXJhbSB7TWl4ZWR9IGNvbnRleHQgQ29udGV4dCBmb3IgZnVuY3Rpb24gZXhlY3V0aW9uLlxyXG4gKiBAcGFyYW0ge0Jvb2xlYW59IFtvbmNlPWZhbHNlXSBPbmx5IGVtaXQgb25jZVxyXG4gKiBAYXBpIHByaXZhdGVcclxuICovXHJcbmZ1bmN0aW9uIEVFKGZuLCBjb250ZXh0LCBvbmNlKSB7XHJcbiAgdGhpcy5mbiA9IGZuO1xyXG4gIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XHJcbiAgdGhpcy5vbmNlID0gb25jZSB8fCBmYWxzZTtcclxufVxyXG5cclxuLyoqXHJcbiAqIE1pbmltYWwgRXZlbnRFbWl0dGVyIGludGVyZmFjZSB0aGF0IGlzIG1vbGRlZCBhZ2FpbnN0IHRoZSBOb2RlLmpzXHJcbiAqIEV2ZW50RW1pdHRlciBpbnRlcmZhY2UuXHJcbiAqXHJcbiAqIEBjb25zdHJ1Y3RvclxyXG4gKiBAYXBpIHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gRXZlbnRFbWl0dGVyKCkgeyAvKiBOb3RoaW5nIHRvIHNldCAqLyB9XHJcblxyXG4vKipcclxuICogSG9sZCB0aGUgYXNzaWduZWQgRXZlbnRFbWl0dGVycyBieSBuYW1lLlxyXG4gKlxyXG4gKiBAdHlwZSB7T2JqZWN0fVxyXG4gKiBAcHJpdmF0ZVxyXG4gKi9cclxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5fZXZlbnRzID0gdW5kZWZpbmVkO1xyXG5cclxuLyoqXHJcbiAqIFJldHVybiBhbiBhcnJheSBsaXN0aW5nIHRoZSBldmVudHMgZm9yIHdoaWNoIHRoZSBlbWl0dGVyIGhhcyByZWdpc3RlcmVkXHJcbiAqIGxpc3RlbmVycy5cclxuICpcclxuICogQHJldHVybnMge0FycmF5fVxyXG4gKiBAYXBpIHB1YmxpY1xyXG4gKi9cclxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5ldmVudE5hbWVzID0gZnVuY3Rpb24gZXZlbnROYW1lcygpIHtcclxuICB2YXIgZXZlbnRzID0gdGhpcy5fZXZlbnRzXHJcbiAgICAsIG5hbWVzID0gW11cclxuICAgICwgbmFtZTtcclxuXHJcbiAgaWYgKCFldmVudHMpIHJldHVybiBuYW1lcztcclxuXHJcbiAgZm9yIChuYW1lIGluIGV2ZW50cykge1xyXG4gICAgaWYgKGhhcy5jYWxsKGV2ZW50cywgbmFtZSkpIG5hbWVzLnB1c2gocHJlZml4ID8gbmFtZS5zbGljZSgxKSA6IG5hbWUpO1xyXG4gIH1cclxuXHJcbiAgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHtcclxuICAgIHJldHVybiBuYW1lcy5jb25jYXQoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhldmVudHMpKTtcclxuICB9XHJcblxyXG4gIHJldHVybiBuYW1lcztcclxufTtcclxuXHJcbi8qKlxyXG4gKiBSZXR1cm4gYSBsaXN0IG9mIGFzc2lnbmVkIGV2ZW50IGxpc3RlbmVycy5cclxuICpcclxuICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50IFRoZSBldmVudHMgdGhhdCBzaG91bGQgYmUgbGlzdGVkLlxyXG4gKiBAcGFyYW0ge0Jvb2xlYW59IGV4aXN0cyBXZSBvbmx5IG5lZWQgdG8ga25vdyBpZiB0aGVyZSBhcmUgbGlzdGVuZXJzLlxyXG4gKiBAcmV0dXJucyB7QXJyYXl8Qm9vbGVhbn1cclxuICogQGFwaSBwdWJsaWNcclxuICovXHJcbkV2ZW50RW1pdHRlci5wcm90b3R5cGUubGlzdGVuZXJzID0gZnVuY3Rpb24gbGlzdGVuZXJzKGV2ZW50LCBleGlzdHMpIHtcclxuICB2YXIgZXZ0ID0gcHJlZml4ID8gcHJlZml4ICsgZXZlbnQgOiBldmVudFxyXG4gICAgLCBhdmFpbGFibGUgPSB0aGlzLl9ldmVudHMgJiYgdGhpcy5fZXZlbnRzW2V2dF07XHJcblxyXG4gIGlmIChleGlzdHMpIHJldHVybiAhIWF2YWlsYWJsZTtcclxuICBpZiAoIWF2YWlsYWJsZSkgcmV0dXJuIFtdO1xyXG4gIGlmIChhdmFpbGFibGUuZm4pIHJldHVybiBbYXZhaWxhYmxlLmZuXTtcclxuXHJcbiAgZm9yICh2YXIgaSA9IDAsIGwgPSBhdmFpbGFibGUubGVuZ3RoLCBlZSA9IG5ldyBBcnJheShsKTsgaSA8IGw7IGkrKykge1xyXG4gICAgZWVbaV0gPSBhdmFpbGFibGVbaV0uZm47XHJcbiAgfVxyXG5cclxuICByZXR1cm4gZWU7XHJcbn07XHJcblxyXG4vKipcclxuICogRW1pdCBhbiBldmVudCB0byBhbGwgcmVnaXN0ZXJlZCBldmVudCBsaXN0ZW5lcnMuXHJcbiAqXHJcbiAqIEBwYXJhbSB7U3RyaW5nfSBldmVudCBUaGUgbmFtZSBvZiB0aGUgZXZlbnQuXHJcbiAqIEByZXR1cm5zIHtCb29sZWFufSBJbmRpY2F0aW9uIGlmIHdlJ3ZlIGVtaXR0ZWQgYW4gZXZlbnQuXHJcbiAqIEBhcGkgcHVibGljXHJcbiAqL1xyXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmVtaXQgPSBmdW5jdGlvbiBlbWl0KGV2ZW50LCBhMSwgYTIsIGEzLCBhNCwgYTUpIHtcclxuICB2YXIgZXZ0ID0gcHJlZml4ID8gcHJlZml4ICsgZXZlbnQgOiBldmVudDtcclxuXHJcbiAgaWYgKCF0aGlzLl9ldmVudHMgfHwgIXRoaXMuX2V2ZW50c1tldnRdKSByZXR1cm4gZmFsc2U7XHJcblxyXG4gIHZhciBsaXN0ZW5lcnMgPSB0aGlzLl9ldmVudHNbZXZ0XVxyXG4gICAgLCBsZW4gPSBhcmd1bWVudHMubGVuZ3RoXHJcbiAgICAsIGFyZ3NcclxuICAgICwgaTtcclxuXHJcbiAgaWYgKCdmdW5jdGlvbicgPT09IHR5cGVvZiBsaXN0ZW5lcnMuZm4pIHtcclxuICAgIGlmIChsaXN0ZW5lcnMub25jZSkgdGhpcy5yZW1vdmVMaXN0ZW5lcihldmVudCwgbGlzdGVuZXJzLmZuLCB1bmRlZmluZWQsIHRydWUpO1xyXG5cclxuICAgIHN3aXRjaCAobGVuKSB7XHJcbiAgICAgIGNhc2UgMTogcmV0dXJuIGxpc3RlbmVycy5mbi5jYWxsKGxpc3RlbmVycy5jb250ZXh0KSwgdHJ1ZTtcclxuICAgICAgY2FzZSAyOiByZXR1cm4gbGlzdGVuZXJzLmZuLmNhbGwobGlzdGVuZXJzLmNvbnRleHQsIGExKSwgdHJ1ZTtcclxuICAgICAgY2FzZSAzOiByZXR1cm4gbGlzdGVuZXJzLmZuLmNhbGwobGlzdGVuZXJzLmNvbnRleHQsIGExLCBhMiksIHRydWU7XHJcbiAgICAgIGNhc2UgNDogcmV0dXJuIGxpc3RlbmVycy5mbi5jYWxsKGxpc3RlbmVycy5jb250ZXh0LCBhMSwgYTIsIGEzKSwgdHJ1ZTtcclxuICAgICAgY2FzZSA1OiByZXR1cm4gbGlzdGVuZXJzLmZuLmNhbGwobGlzdGVuZXJzLmNvbnRleHQsIGExLCBhMiwgYTMsIGE0KSwgdHJ1ZTtcclxuICAgICAgY2FzZSA2OiByZXR1cm4gbGlzdGVuZXJzLmZuLmNhbGwobGlzdGVuZXJzLmNvbnRleHQsIGExLCBhMiwgYTMsIGE0LCBhNSksIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgZm9yIChpID0gMSwgYXJncyA9IG5ldyBBcnJheShsZW4gLTEpOyBpIDwgbGVuOyBpKyspIHtcclxuICAgICAgYXJnc1tpIC0gMV0gPSBhcmd1bWVudHNbaV07XHJcbiAgICB9XHJcblxyXG4gICAgbGlzdGVuZXJzLmZuLmFwcGx5KGxpc3RlbmVycy5jb250ZXh0LCBhcmdzKTtcclxuICB9IGVsc2Uge1xyXG4gICAgdmFyIGxlbmd0aCA9IGxpc3RlbmVycy5sZW5ndGhcclxuICAgICAgLCBqO1xyXG5cclxuICAgIGZvciAoaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xyXG4gICAgICBpZiAobGlzdGVuZXJzW2ldLm9uY2UpIHRoaXMucmVtb3ZlTGlzdGVuZXIoZXZlbnQsIGxpc3RlbmVyc1tpXS5mbiwgdW5kZWZpbmVkLCB0cnVlKTtcclxuXHJcbiAgICAgIHN3aXRjaCAobGVuKSB7XHJcbiAgICAgICAgY2FzZSAxOiBsaXN0ZW5lcnNbaV0uZm4uY2FsbChsaXN0ZW5lcnNbaV0uY29udGV4dCk7IGJyZWFrO1xyXG4gICAgICAgIGNhc2UgMjogbGlzdGVuZXJzW2ldLmZuLmNhbGwobGlzdGVuZXJzW2ldLmNvbnRleHQsIGExKTsgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAzOiBsaXN0ZW5lcnNbaV0uZm4uY2FsbChsaXN0ZW5lcnNbaV0uY29udGV4dCwgYTEsIGEyKTsgYnJlYWs7XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgIGlmICghYXJncykgZm9yIChqID0gMSwgYXJncyA9IG5ldyBBcnJheShsZW4gLTEpOyBqIDwgbGVuOyBqKyspIHtcclxuICAgICAgICAgICAgYXJnc1tqIC0gMV0gPSBhcmd1bWVudHNbal07XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgbGlzdGVuZXJzW2ldLmZuLmFwcGx5KGxpc3RlbmVyc1tpXS5jb250ZXh0LCBhcmdzKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHRydWU7XHJcbn07XHJcblxyXG4vKipcclxuICogUmVnaXN0ZXIgYSBuZXcgRXZlbnRMaXN0ZW5lciBmb3IgdGhlIGdpdmVuIGV2ZW50LlxyXG4gKlxyXG4gKiBAcGFyYW0ge1N0cmluZ30gZXZlbnQgTmFtZSBvZiB0aGUgZXZlbnQuXHJcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIENhbGxiYWNrIGZ1bmN0aW9uLlxyXG4gKiBAcGFyYW0ge01peGVkfSBbY29udGV4dD10aGlzXSBUaGUgY29udGV4dCBvZiB0aGUgZnVuY3Rpb24uXHJcbiAqIEBhcGkgcHVibGljXHJcbiAqL1xyXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLm9uID0gZnVuY3Rpb24gb24oZXZlbnQsIGZuLCBjb250ZXh0KSB7XHJcbiAgdmFyIGxpc3RlbmVyID0gbmV3IEVFKGZuLCBjb250ZXh0IHx8IHRoaXMpXHJcbiAgICAsIGV2dCA9IHByZWZpeCA/IHByZWZpeCArIGV2ZW50IDogZXZlbnQ7XHJcblxyXG4gIGlmICghdGhpcy5fZXZlbnRzKSB0aGlzLl9ldmVudHMgPSBwcmVmaXggPyB7fSA6IE9iamVjdC5jcmVhdGUobnVsbCk7XHJcbiAgaWYgKCF0aGlzLl9ldmVudHNbZXZ0XSkgdGhpcy5fZXZlbnRzW2V2dF0gPSBsaXN0ZW5lcjtcclxuICBlbHNlIHtcclxuICAgIGlmICghdGhpcy5fZXZlbnRzW2V2dF0uZm4pIHRoaXMuX2V2ZW50c1tldnRdLnB1c2gobGlzdGVuZXIpO1xyXG4gICAgZWxzZSB0aGlzLl9ldmVudHNbZXZ0XSA9IFtcclxuICAgICAgdGhpcy5fZXZlbnRzW2V2dF0sIGxpc3RlbmVyXHJcbiAgICBdO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHRoaXM7XHJcbn07XHJcblxyXG4vKipcclxuICogQWRkIGFuIEV2ZW50TGlzdGVuZXIgdGhhdCdzIG9ubHkgY2FsbGVkIG9uY2UuXHJcbiAqXHJcbiAqIEBwYXJhbSB7U3RyaW5nfSBldmVudCBOYW1lIG9mIHRoZSBldmVudC5cclxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gQ2FsbGJhY2sgZnVuY3Rpb24uXHJcbiAqIEBwYXJhbSB7TWl4ZWR9IFtjb250ZXh0PXRoaXNdIFRoZSBjb250ZXh0IG9mIHRoZSBmdW5jdGlvbi5cclxuICogQGFwaSBwdWJsaWNcclxuICovXHJcbkV2ZW50RW1pdHRlci5wcm90b3R5cGUub25jZSA9IGZ1bmN0aW9uIG9uY2UoZXZlbnQsIGZuLCBjb250ZXh0KSB7XHJcbiAgdmFyIGxpc3RlbmVyID0gbmV3IEVFKGZuLCBjb250ZXh0IHx8IHRoaXMsIHRydWUpXHJcbiAgICAsIGV2dCA9IHByZWZpeCA/IHByZWZpeCArIGV2ZW50IDogZXZlbnQ7XHJcblxyXG4gIGlmICghdGhpcy5fZXZlbnRzKSB0aGlzLl9ldmVudHMgPSBwcmVmaXggPyB7fSA6IE9iamVjdC5jcmVhdGUobnVsbCk7XHJcbiAgaWYgKCF0aGlzLl9ldmVudHNbZXZ0XSkgdGhpcy5fZXZlbnRzW2V2dF0gPSBsaXN0ZW5lcjtcclxuICBlbHNlIHtcclxuICAgIGlmICghdGhpcy5fZXZlbnRzW2V2dF0uZm4pIHRoaXMuX2V2ZW50c1tldnRdLnB1c2gobGlzdGVuZXIpO1xyXG4gICAgZWxzZSB0aGlzLl9ldmVudHNbZXZ0XSA9IFtcclxuICAgICAgdGhpcy5fZXZlbnRzW2V2dF0sIGxpc3RlbmVyXHJcbiAgICBdO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHRoaXM7XHJcbn07XHJcblxyXG4vKipcclxuICogUmVtb3ZlIGV2ZW50IGxpc3RlbmVycy5cclxuICpcclxuICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50IFRoZSBldmVudCB3ZSB3YW50IHRvIHJlbW92ZS5cclxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGxpc3RlbmVyIHRoYXQgd2UgbmVlZCB0byBmaW5kLlxyXG4gKiBAcGFyYW0ge01peGVkfSBjb250ZXh0IE9ubHkgcmVtb3ZlIGxpc3RlbmVycyBtYXRjaGluZyB0aGlzIGNvbnRleHQuXHJcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gb25jZSBPbmx5IHJlbW92ZSBvbmNlIGxpc3RlbmVycy5cclxuICogQGFwaSBwdWJsaWNcclxuICovXHJcbkV2ZW50RW1pdHRlci5wcm90b3R5cGUucmVtb3ZlTGlzdGVuZXIgPSBmdW5jdGlvbiByZW1vdmVMaXN0ZW5lcihldmVudCwgZm4sIGNvbnRleHQsIG9uY2UpIHtcclxuICB2YXIgZXZ0ID0gcHJlZml4ID8gcHJlZml4ICsgZXZlbnQgOiBldmVudDtcclxuXHJcbiAgaWYgKCF0aGlzLl9ldmVudHMgfHwgIXRoaXMuX2V2ZW50c1tldnRdKSByZXR1cm4gdGhpcztcclxuXHJcbiAgdmFyIGxpc3RlbmVycyA9IHRoaXMuX2V2ZW50c1tldnRdXHJcbiAgICAsIGV2ZW50cyA9IFtdO1xyXG5cclxuICBpZiAoZm4pIHtcclxuICAgIGlmIChsaXN0ZW5lcnMuZm4pIHtcclxuICAgICAgaWYgKFxyXG4gICAgICAgICAgIGxpc3RlbmVycy5mbiAhPT0gZm5cclxuICAgICAgICB8fCAob25jZSAmJiAhbGlzdGVuZXJzLm9uY2UpXHJcbiAgICAgICAgfHwgKGNvbnRleHQgJiYgbGlzdGVuZXJzLmNvbnRleHQgIT09IGNvbnRleHQpXHJcbiAgICAgICkge1xyXG4gICAgICAgIGV2ZW50cy5wdXNoKGxpc3RlbmVycyk7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGggPSBsaXN0ZW5lcnMubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICBsaXN0ZW5lcnNbaV0uZm4gIT09IGZuXHJcbiAgICAgICAgICB8fCAob25jZSAmJiAhbGlzdGVuZXJzW2ldLm9uY2UpXHJcbiAgICAgICAgICB8fCAoY29udGV4dCAmJiBsaXN0ZW5lcnNbaV0uY29udGV4dCAhPT0gY29udGV4dClcclxuICAgICAgICApIHtcclxuICAgICAgICAgIGV2ZW50cy5wdXNoKGxpc3RlbmVyc1tpXSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvL1xyXG4gIC8vIFJlc2V0IHRoZSBhcnJheSwgb3IgcmVtb3ZlIGl0IGNvbXBsZXRlbHkgaWYgd2UgaGF2ZSBubyBtb3JlIGxpc3RlbmVycy5cclxuICAvL1xyXG4gIGlmIChldmVudHMubGVuZ3RoKSB7XHJcbiAgICB0aGlzLl9ldmVudHNbZXZ0XSA9IGV2ZW50cy5sZW5ndGggPT09IDEgPyBldmVudHNbMF0gOiBldmVudHM7XHJcbiAgfSBlbHNlIHtcclxuICAgIGRlbGV0ZSB0aGlzLl9ldmVudHNbZXZ0XTtcclxuICB9XHJcblxyXG4gIHJldHVybiB0aGlzO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIFJlbW92ZSBhbGwgbGlzdGVuZXJzIG9yIG9ubHkgdGhlIGxpc3RlbmVycyBmb3IgdGhlIHNwZWNpZmllZCBldmVudC5cclxuICpcclxuICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50IFRoZSBldmVudCB3YW50IHRvIHJlbW92ZSBhbGwgbGlzdGVuZXJzIGZvci5cclxuICogQGFwaSBwdWJsaWNcclxuICovXHJcbkV2ZW50RW1pdHRlci5wcm90b3R5cGUucmVtb3ZlQWxsTGlzdGVuZXJzID0gZnVuY3Rpb24gcmVtb3ZlQWxsTGlzdGVuZXJzKGV2ZW50KSB7XHJcbiAgaWYgKCF0aGlzLl9ldmVudHMpIHJldHVybiB0aGlzO1xyXG5cclxuICBpZiAoZXZlbnQpIGRlbGV0ZSB0aGlzLl9ldmVudHNbcHJlZml4ID8gcHJlZml4ICsgZXZlbnQgOiBldmVudF07XHJcbiAgZWxzZSB0aGlzLl9ldmVudHMgPSBwcmVmaXggPyB7fSA6IE9iamVjdC5jcmVhdGUobnVsbCk7XHJcblxyXG4gIHJldHVybiB0aGlzO1xyXG59O1xyXG5cclxuLy9cclxuLy8gQWxpYXMgbWV0aG9kcyBuYW1lcyBiZWNhdXNlIHBlb3BsZSByb2xsIGxpa2UgdGhhdC5cclxuLy9cclxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vZmYgPSBFdmVudEVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyO1xyXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmFkZExpc3RlbmVyID0gRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vbjtcclxuXHJcbi8vXHJcbi8vIFRoaXMgZnVuY3Rpb24gZG9lc24ndCBhcHBseSBhbnltb3JlLlxyXG4vL1xyXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLnNldE1heExpc3RlbmVycyA9IGZ1bmN0aW9uIHNldE1heExpc3RlbmVycygpIHtcclxuICByZXR1cm4gdGhpcztcclxufTtcclxuXHJcbi8vXHJcbi8vIEV4cG9zZSB0aGUgcHJlZml4LlxyXG4vL1xyXG5FdmVudEVtaXR0ZXIucHJlZml4ZWQgPSBwcmVmaXg7XHJcblxyXG4vL1xyXG4vLyBFeHBvc2UgdGhlIG1vZHVsZS5cclxuLy9cclxuaWYgKCd1bmRlZmluZWQnICE9PSB0eXBlb2YgbW9kdWxlKSB7XHJcbiAgbW9kdWxlLmV4cG9ydHMgPSBFdmVudEVtaXR0ZXI7XHJcbn1cclxuIiwiKGZ1bmN0aW9uKCl7dmFyIGc9e307XHJcbihmdW5jdGlvbih3aW5kb3cpe3ZhciBrLGFhPXRoaXM7YWEuYmQ9ITA7ZnVuY3Rpb24gbChhLGIpe3ZhciBjPWEuc3BsaXQoXCIuXCIpLGQ9YWE7Y1swXWluIGR8fCFkLmV4ZWNTY3JpcHR8fGQuZXhlY1NjcmlwdChcInZhciBcIitjWzBdKTtmb3IodmFyIGU7Yy5sZW5ndGgmJihlPWMuc2hpZnQoKSk7KWMubGVuZ3RofHx2b2lkIDA9PT1iP2RbZV0/ZD1kW2VdOmQ9ZFtlXT17fTpkW2VdPWJ9ZnVuY3Rpb24gYmEoYSl7dmFyIGI9cDtmdW5jdGlvbiBjKCl7fWMucHJvdG90eXBlPWIucHJvdG90eXBlO2EuamQ9Yi5wcm90b3R5cGU7YS5wcm90b3R5cGU9bmV3IGM7YS5wcm90b3R5cGUuY29uc3RydWN0b3I9YTthLmNkPWZ1bmN0aW9uKGEsYyxmKXtyZXR1cm4gYi5wcm90b3R5cGVbY10uYXBwbHkoYSxBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMikpfX07LypcclxuXHJcbiBDb3B5cmlnaHQgMjAxNiBHb29nbGUgSW5jLlxyXG5cclxuIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuXHJcbiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcblxyXG4gVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuKi9cclxuZnVuY3Rpb24gY2EoYSl7dGhpcy5jPU1hdGguZXhwKE1hdGgubG9nKC41KS9hKTt0aGlzLmE9dGhpcy5iPTB9ZnVuY3Rpb24gZGEoYSxiLGMpe3ZhciBkPU1hdGgucG93KGEuYyxiKTthLmI9YyooMS1kKStkKmEuYjthLmErPWJ9ZnVuY3Rpb24gZWEoYSl7cmV0dXJuIGEuYi8oMS1NYXRoLnBvdyhhLmMsYS5hKSl9O2Z1bmN0aW9uIGZhKCl7dGhpcy5hPW5ldyBjYSgzKTt0aGlzLmM9bmV3IGNhKDEwKTt0aGlzLmI9NUU1fWZ1bmN0aW9uIGdhKGEpe3JldHVybi41PmEuYS5hP2EuYjpNYXRoLm1pbihlYShhLmEpLGVhKGEuYykpfTtmdW5jdGlvbiBoYSgpe31mdW5jdGlvbiBpYSgpe307ZnVuY3Rpb24gamEoKXt0aGlzLmg9bnVsbDt0aGlzLmY9ITE7dGhpcy5jPW5ldyBmYTt0aGlzLmc9e307dGhpcy5hPXt9O3RoaXMuaT0hMTt0aGlzLmI9bnVsbH1sKFwic2hha2EuYWJyLlNpbXBsZUFick1hbmFnZXJcIixqYSk7az1qYS5wcm90b3R5cGU7ay5zdG9wPWZ1bmN0aW9uKCl7dGhpcy5oPW51bGw7dGhpcy5mPSExO3RoaXMuZz17fTt0aGlzLmE9e307dGhpcy5iPW51bGx9O2suaW5pdD1mdW5jdGlvbihhKXt0aGlzLmg9YX07XHJcbmsuY2hvb3NlU3RyZWFtcz1mdW5jdGlvbihhKXtmb3IodmFyIGIgaW4gYSl0aGlzLmdbYl09YVtiXTtiPXt9O2lmKFwiYXVkaW9cImluIGEpe3ZhciBjPWthKHRoaXMpO2M/KGIuYXVkaW89Yyx0aGlzLmEuYXVkaW89Yyk6ZGVsZXRlIHRoaXMuYS5hdWRpb31cInZpZGVvXCJpbiBhJiYoKGM9bGEodGhpcykpPyhiLnZpZGVvPWMsdGhpcy5hLnZpZGVvPWMpOmRlbGV0ZSB0aGlzLmEudmlkZW8pO1widGV4dFwiaW4gYSYmKGIudGV4dD1hLnRleHQuc3RyZWFtc1swXSk7dGhpcy5iPURhdGUubm93KCk7cmV0dXJuIGJ9O2suZW5hYmxlPWZ1bmN0aW9uKCl7dGhpcy5mPSEwfTtrLmRpc2FibGU9ZnVuY3Rpb24oKXt0aGlzLmY9ITF9O1xyXG5rLnNlZ21lbnREb3dubG9hZGVkPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD10aGlzLmM7YT1iLWE7NjU1MzY+Y3x8KGE9TWF0aC5tYXgoYSw1MCksYz04RTMqYy9hLGEvPTFFMyxkYShkLmEsYSxjKSxkYShkLmMsYSxjKSk7aWYobnVsbCE9dGhpcy5iJiZ0aGlzLmYpYTp7ZD1EYXRlLm5vdygpLXRoaXMuYjtpZighdGhpcy5pKXtpZig0RTM+ZClicmVhayBhO3RoaXMuaT0hMH1lbHNlIGlmKDhFMz5kKWJyZWFrIGE7ZD10aGlzLmEudmlkZW87Yz17fTtpZihhPWthKHRoaXMpKWMuYXVkaW89YSx0aGlzLmEuYXVkaW89YTtpZihhPWxhKHRoaXMpKWMudmlkZW89YSx0aGlzLmEudmlkZW89YTt0aGlzLmI9RGF0ZS5ub3coKTthPXZvaWQgMDtkJiZjLnZpZGVvJiZjLnZpZGVvLmJhbmR3aWR0aD5kLmJhbmR3aWR0aCYmKGE9MTApO3RoaXMuaChjLGEpfX07ay5nZXRCYW5kd2lkdGhFc3RpbWF0ZT1mdW5jdGlvbigpe3JldHVybiBnYSh0aGlzLmMpfTtcclxuay5zZXREZWZhdWx0RXN0aW1hdGU9ZnVuY3Rpb24oYSl7dGhpcy5jLmI9YX07ZnVuY3Rpb24ga2EoYSl7YT1hLmcuYXVkaW87aWYoIWEpcmV0dXJuIG51bGw7YT1tYShhKTtyZXR1cm4gYVtNYXRoLmZsb29yKGEubGVuZ3RoLzIpXX1mdW5jdGlvbiBsYShhKXt2YXIgYj1hLmcudmlkZW87aWYoIWIpcmV0dXJuIG51bGw7dmFyIGI9bWEoYiksYz1hLmEuYXVkaW8sYz1jJiZjLmJhbmR3aWR0aHx8MDthPWdhKGEuYyk7Zm9yKHZhciBkPWJbMF0sZT0wO2U8Yi5sZW5ndGg7KytlKXt2YXIgZj1iW2VdLGc9ZSsxPGIubGVuZ3RoP2JbZSsxXTp7YmFuZHdpZHRoOkluZmluaXR5fTtmLmJhbmR3aWR0aCYmKGc9KGcuYmFuZHdpZHRoK2MpLy44NSxhPj0oZi5iYW5kd2lkdGgrYykvLjk1JiZhPD1nJiYoZD1mKSl9cmV0dXJuIGR9XHJcbmZ1bmN0aW9uIG1hKGEpe3JldHVybiBhLnN0cmVhbXMuc2xpY2UoMCkuZmlsdGVyKGZ1bmN0aW9uKGEpe3JldHVybiBhLmFsbG93ZWRCeUFwcGxpY2F0aW9uJiZhLmFsbG93ZWRCeUtleVN5c3RlbX0pLnNvcnQoZnVuY3Rpb24oYSxjKXtyZXR1cm4gYS5iYW5kd2lkdGgtYy5iYW5kd2lkdGh9KX07dmFyIG5hPS9eKD86KFteOi8/Iy5dKyk6KT8oPzpcXC9cXC8oPzooW14vPyNdKilAKT8oW14vIz9dKj8pKD86OihbMC05XSspKT8oPz1bLyM/XXwkKSk/KFtePyNdKyk/KD86XFw/KFteI10qKSk/KD86IyguKikpPyQvO2Z1bmN0aW9uIG9hKGEpe3ZhciBiO2EgaW5zdGFuY2VvZiBvYT8ocGEodGhpcyxhLlIpLHRoaXMubGE9YS5sYSx0aGlzLlQ9YS5ULHFhKHRoaXMsYS53YSksdGhpcy5PPWEuTyxyYSh0aGlzLHNhKGEuYSkpLHRoaXMuZWE9YS5lYSk6YSYmKGI9U3RyaW5nKGEpLm1hdGNoKG5hKSk/KHBhKHRoaXMsYlsxXXx8XCJcIiwhMCksdGhpcy5sYT10YShiWzJdfHxcIlwiKSx0aGlzLlQ9dGEoYlszXXx8XCJcIiwhMCkscWEodGhpcyxiWzRdKSx0aGlzLk89dGEoYls1XXx8XCJcIiwhMCkscmEodGhpcyxiWzZdfHxcIlwiLCEwKSx0aGlzLmVhPXRhKGJbN118fFwiXCIpKTp0aGlzLmE9bmV3IHVhKG51bGwpfWs9b2EucHJvdG90eXBlO2suUj1cIlwiO2subGE9XCJcIjtrLlQ9XCJcIjtrLndhPW51bGw7ay5PPVwiXCI7ay5lYT1cIlwiO1xyXG5rLnRvU3RyaW5nPWZ1bmN0aW9uKCl7dmFyIGE9W10sYj10aGlzLlI7YiYmYS5wdXNoKHZhKGIsd2EsITApLFwiOlwiKTtpZihiPXRoaXMuVCl7YS5wdXNoKFwiLy9cIik7dmFyIGM9dGhpcy5sYTtjJiZhLnB1c2godmEoYyx3YSwhMCksXCJAXCIpO2EucHVzaChlbmNvZGVVUklDb21wb25lbnQoYikucmVwbGFjZSgvJTI1KFswLTlhLWZBLUZdezJ9KS9nLFwiJSQxXCIpKTtiPXRoaXMud2E7bnVsbCE9YiYmYS5wdXNoKFwiOlwiLFN0cmluZyhiKSl9aWYoYj10aGlzLk8pdGhpcy5UJiZcIi9cIiE9Yi5jaGFyQXQoMCkmJmEucHVzaChcIi9cIiksYS5wdXNoKHZhKGIsXCIvXCI9PWIuY2hhckF0KDApP3hhOnlhLCEwKSk7KGI9dGhpcy5hLnRvU3RyaW5nKCkpJiZhLnB1c2goXCI/XCIsYik7KGI9dGhpcy5lYSkmJmEucHVzaChcIiNcIix2YShiLHphKSk7cmV0dXJuIGEuam9pbihcIlwiKX07XHJcbmsucmVzb2x2ZT1mdW5jdGlvbihhKXt2YXIgYj1uZXcgb2EodGhpcyk7XCJkYXRhXCI9PT1iLlImJihiPW5ldyBvYSk7dmFyIGM9ISFhLlI7Yz9wYShiLGEuUik6Yz0hIWEubGE7Yz9iLmxhPWEubGE6Yz0hIWEuVDtjP2IuVD1hLlQ6Yz1udWxsIT1hLndhO3ZhciBkPWEuTztpZihjKXFhKGIsYS53YSk7ZWxzZSBpZihjPSEhYS5PKXtpZihcIi9cIiE9ZC5jaGFyQXQoMCkpaWYodGhpcy5UJiYhdGhpcy5PKWQ9XCIvXCIrZDtlbHNle3ZhciBlPWIuTy5sYXN0SW5kZXhPZihcIi9cIik7LTEhPWUmJihkPWIuTy5zdWJzdHIoMCxlKzEpK2QpfWlmKFwiLi5cIj09ZHx8XCIuXCI9PWQpZD1cIlwiO2Vsc2UgaWYoLTEhPWQuaW5kZXhPZihcIi4vXCIpfHwtMSE9ZC5pbmRleE9mKFwiLy5cIikpe2Zvcih2YXIgZT0hZC5sYXN0SW5kZXhPZihcIi9cIiwwKSxkPWQuc3BsaXQoXCIvXCIpLGY9W10sZz0wO2c8ZC5sZW5ndGg7KXt2YXIgaD1kW2crK107XCIuXCI9PWg/ZSYmZz09ZC5sZW5ndGgmJmYucHVzaChcIlwiKTpcIi4uXCI9PWg/KCgxPGYubGVuZ3RofHxcclxuMT09Zi5sZW5ndGgmJlwiXCIhPWZbMF0pJiZmLnBvcCgpLGUmJmc9PWQubGVuZ3RoJiZmLnB1c2goXCJcIikpOihmLnB1c2goaCksZT0hMCl9ZD1mLmpvaW4oXCIvXCIpfX1jP2IuTz1kOmM9XCJcIiE9PWEuYS50b1N0cmluZygpO2M/cmEoYixzYShhLmEpKTpjPSEhYS5lYTtjJiYoYi5lYT1hLmVhKTtyZXR1cm4gYn07ZnVuY3Rpb24gcGEoYSxiLGMpe2EuUj1jP3RhKGIsITApOmI7YS5SJiYoYS5SPWEuUi5yZXBsYWNlKC86JC8sXCJcIikpfWZ1bmN0aW9uIHFhKGEsYil7aWYoYil7Yj1OdW1iZXIoYik7aWYoaXNOYU4oYil8fDA+Yil0aHJvdyBFcnJvcihcIkJhZCBwb3J0IG51bWJlciBcIitiKTthLndhPWJ9ZWxzZSBhLndhPW51bGx9ZnVuY3Rpb24gcmEoYSxiLGMpe2IgaW5zdGFuY2VvZiB1YT9hLmE9YjooY3x8KGI9dmEoYixBYSkpLGEuYT1uZXcgdWEoYikpfWZ1bmN0aW9uIHRhKGEsYil7cmV0dXJuIGE/Yj9kZWNvZGVVUkkoYSk6ZGVjb2RlVVJJQ29tcG9uZW50KGEpOlwiXCJ9XHJcbmZ1bmN0aW9uIHZhKGEsYixjKXtyZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgYT8oYT1lbmNvZGVVUkkoYSkucmVwbGFjZShiLEJhKSxjJiYoYT1hLnJlcGxhY2UoLyUyNShbMC05YS1mQS1GXXsyfSkvZyxcIiUkMVwiKSksYSk6bnVsbH1mdW5jdGlvbiBCYShhKXthPWEuY2hhckNvZGVBdCgwKTtyZXR1cm5cIiVcIisoYT4+NCYxNSkudG9TdHJpbmcoMTYpKyhhJjE1KS50b1N0cmluZygxNil9dmFyIHdhPS9bI1xcL1xcP0BdL2cseWE9L1tcXCNcXD86XS9nLHhhPS9bXFwjXFw/XS9nLEFhPS9bXFwjXFw/QF0vZyx6YT0vIy9nO2Z1bmN0aW9uIHVhKGEpe3RoaXMuYj1hfHxudWxsfXVhLnByb3RvdHlwZS5hPW51bGw7dWEucHJvdG90eXBlLmM9bnVsbDtcclxudWEucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7aWYodGhpcy5iKXJldHVybiB0aGlzLmI7aWYoIXRoaXMuYSlyZXR1cm5cIlwiO3ZhciBhPVtdLGI7Zm9yKGIgaW4gdGhpcy5hKWZvcih2YXIgYz1lbmNvZGVVUklDb21wb25lbnQoYiksZD10aGlzLmFbYl0sZT0wO2U8ZC5sZW5ndGg7ZSsrKXt2YXIgZj1jO1wiXCIhPT1kW2VdJiYoZis9XCI9XCIrZW5jb2RlVVJJQ29tcG9uZW50KGRbZV0pKTthLnB1c2goZil9cmV0dXJuIHRoaXMuYj1hLmpvaW4oXCImXCIpfTtmdW5jdGlvbiBzYShhKXt2YXIgYj1uZXcgdWE7Yi5iPWEuYjtpZihhLmEpe3ZhciBjPXt9LGQ7Zm9yKGQgaW4gYS5hKWNbZF09YS5hW2RdLmNvbmNhdCgpO2IuYT1jO2IuYz1hLmN9cmV0dXJuIGJ9O2Z1bmN0aW9uIHEoYSxiLGMpe3RoaXMuY2F0ZWdvcnk9YTt0aGlzLmNvZGU9Yjt0aGlzLmRhdGE9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDIpfWwoXCJzaGFrYS51dGlsLkVycm9yXCIscSk7cS5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm5cInNoYWthLnV0aWwuRXJyb3IgXCIrSlNPTi5zdHJpbmdpZnkodGhpcyxudWxsLFwiICBcIil9O3EuQ2F0ZWdvcnk9e05FVFdPUks6MSxURVhUOjIsTUVESUE6MyxNQU5JRkVTVDo0LFNUUkVBTUlORzo1LERSTTo2LFBMQVlFUjo3LENBU1Q6OCxTVE9SQUdFOjl9O1xyXG5xLkNvZGU9e1VOU1VQUE9SVEVEX1NDSEVNRToxRTMsQkFEX0hUVFBfU1RBVFVTOjEwMDEsSFRUUF9FUlJPUjoxMDAyLFRJTUVPVVQ6MTAwMyxNQUxGT1JNRURfREFUQV9VUkk6MTAwNCxVTktOT1dOX0RBVEFfVVJJX0VOQ09ESU5HOjEwMDUsSU5WQUxJRF9URVhUX0hFQURFUjoyRTMsSU5WQUxJRF9URVhUX0NVRToyMDAxLElOVkFMSURfVEVYVF9TRVRUSU5HUzoyMDAyLFVOQUJMRV9UT19ERVRFQ1RfRU5DT0RJTkc6MjAwMyxCQURfRU5DT0RJTkc6MjAwNCxJTlZBTElEX1hNTDoyMDA1LElOVkFMSURfVFRNTDoyMDA2LElOVkFMSURfTVA0X1RUTUw6MjAwNyxJTlZBTElEX01QNF9WVFQ6MjAwOCxCVUZGRVJfUkVBRF9PVVRfT0ZfQk9VTkRTOjNFMyxKU19JTlRFR0VSX09WRVJGTE9XOjMwMDEsRUJNTF9PVkVSRkxPVzozMDAyLEVCTUxfQkFEX0ZMT0FUSU5HX1BPSU5UX1NJWkU6MzAwMyxNUDRfU0lEWF9XUk9OR19CT1hfVFlQRTozMDA0LE1QNF9TSURYX0lOVkFMSURfVElNRVNDQUxFOjMwMDUsXHJcbk1QNF9TSURYX1RZUEVfTk9UX1NVUFBPUlRFRDozMDA2LFdFQk1fQ1VFU19FTEVNRU5UX01JU1NJTkc6MzAwNyxXRUJNX0VCTUxfSEVBREVSX0VMRU1FTlRfTUlTU0lORzozMDA4LFdFQk1fU0VHTUVOVF9FTEVNRU5UX01JU1NJTkc6MzAwOSxXRUJNX0lORk9fRUxFTUVOVF9NSVNTSU5HOjMwMTAsV0VCTV9EVVJBVElPTl9FTEVNRU5UX01JU1NJTkc6MzAxMSxXRUJNX0NVRV9UUkFDS19QT1NJVElPTlNfRUxFTUVOVF9NSVNTSU5HOjMwMTIsV0VCTV9DVUVfVElNRV9FTEVNRU5UX01JU1NJTkc6MzAxMyxNRURJQV9TT1VSQ0VfT1BFUkFUSU9OX0ZBSUxFRDozMDE0LE1FRElBX1NPVVJDRV9PUEVSQVRJT05fVEhSRVc6MzAxNSxWSURFT19FUlJPUjozMDE2LFFVT1RBX0VYQ0VFREVEX0VSUk9SOjMwMTcsVU5BQkxFX1RPX0dVRVNTX01BTklGRVNUX1RZUEU6NEUzLERBU0hfSU5WQUxJRF9YTUw6NDAwMSxEQVNIX05PX1NFR01FTlRfSU5GTzo0MDAyLERBU0hfRU1QVFlfQURBUFRBVElPTl9TRVQ6NDAwMyxcclxuREFTSF9FTVBUWV9QRVJJT0Q6NDAwNCxEQVNIX1dFQk1fTUlTU0lOR19JTklUOjQwMDUsREFTSF9VTlNVUFBPUlRFRF9DT05UQUlORVI6NDAwNixEQVNIX1BTU0hfQkFEX0VOQ09ESU5HOjQwMDcsREFTSF9OT19DT01NT05fS0VZX1NZU1RFTTo0MDA4LERBU0hfTVVMVElQTEVfS0VZX0lEU19OT1RfU1VQUE9SVEVEOjQwMDksREFTSF9DT05GTElDVElOR19LRVlfSURTOjQwMTAsVU5QTEFZQUJMRV9QRVJJT0Q6NDAxMSxSRVNUUklDVElPTlNfQ0FOTk9UX0JFX01FVDo0MDEyLElOVEVSTkFMX0VSUk9SX0tFWV9TVEFUVVM6NDAxMyxJTlZBTElEX1NUUkVBTVNfQ0hPU0VOOjUwMDUsTk9fUkVDT0dOSVpFRF9LRVlfU1lTVEVNUzo2RTMsUkVRVUVTVEVEX0tFWV9TWVNURU1fQ09ORklHX1VOQVZBSUxBQkxFOjYwMDEsRkFJTEVEX1RPX0NSRUFURV9DRE06NjAwMixGQUlMRURfVE9fQVRUQUNIX1RPX1ZJREVPOjYwMDMsSU5WQUxJRF9TRVJWRVJfQ0VSVElGSUNBVEU6NjAwNCxGQUlMRURfVE9fQ1JFQVRFX1NFU1NJT046NjAwNSxcclxuRkFJTEVEX1RPX0dFTkVSQVRFX0xJQ0VOU0VfUkVRVUVTVDo2MDA2LExJQ0VOU0VfUkVRVUVTVF9GQUlMRUQ6NjAwNyxMSUNFTlNFX1JFU1BPTlNFX1JFSkVDVEVEOjYwMDgsRU5DUllQVEVEX0NPTlRFTlRfV0lUSE9VVF9EUk1fSU5GTzo2MDEwLE5PX0xJQ0VOU0VfU0VSVkVSX0dJVkVOOjYwMTIsT0ZGTElORV9TRVNTSU9OX1JFTU9WRUQ6NjAxMyxFWFBJUkVEOjYwMTQsTE9BRF9JTlRFUlJVUFRFRDo3RTMsQ0FTVF9BUElfVU5BVkFJTEFCTEU6OEUzLE5PX0NBU1RfUkVDRUlWRVJTOjgwMDEsQUxSRUFEWV9DQVNUSU5HOjgwMDIsVU5FWFBFQ1RFRF9DQVNUX0VSUk9SOjgwMDMsQ0FTVF9DQU5DRUxFRF9CWV9VU0VSOjgwMDQsQ0FTVF9DT05ORUNUSU9OX1RJTUVEX09VVDo4MDA1LENBU1RfUkVDRUlWRVJfQVBQX1VOQVZBSUxBQkxFOjgwMDYsSU5ERVhFRF9EQl9OT1RfU1VQUE9SVEVEOjlFMyxJTkRFWEVEX0RCX0VSUk9SOjkwMDEsT1BFUkFUSU9OX0FCT1JURUQ6OTAwMixSRVFVRVNURURfSVRFTV9OT1RfRk9VTkQ6OTAwMyxcclxuTUFMRk9STUVEX09GRkxJTkVfVVJJOjkwMDQsQ0FOTk9UX1NUT1JFX0xJVkVfT0ZGTElORTo5MDA1LFNUT1JFX0FMUkVBRFlfSU5fUFJPR1JFU1M6OTAwNixOT19JTklUX0RBVEFfRk9SX09GRkxJTkU6OTAwN307ZnVuY3Rpb24gQ2EoYSxiKXtyZXR1cm4gYS5yZWR1Y2UoZnVuY3Rpb24oYSxiLGUpe3JldHVybiBiW1wiY2F0Y2hcIl0oYS5iaW5kKG51bGwsZSkpfS5iaW5kKG51bGwsYiksUHJvbWlzZS5yZWplY3QoKSl9ZnVuY3Rpb24gdChhLGIpe3JldHVybiBhLmNvbmNhdChiKX1mdW5jdGlvbiB2KCl7fWZ1bmN0aW9uIERhKGEpe3JldHVybiBudWxsIT1hfWZ1bmN0aW9uIEVhKGEpe3JldHVybiBmdW5jdGlvbihiKXtyZXR1cm4gYiE9YX19O2Z1bmN0aW9uIHcoKXt2YXIgYSxiLGM9bmV3IFByb21pc2UoZnVuY3Rpb24oYyxlKXthPWM7Yj1lfSk7Yy5yZXNvbHZlPWE7Yy5yZWplY3Q9YjtyZXR1cm4gY307ZnVuY3Rpb24geShhKXt0aGlzLmY9ITE7dGhpcy5hPVtdO3RoaXMuYj1bXTt0aGlzLmM9W107dGhpcy5oPWF8fG51bGx9bChcInNoYWthLm5ldC5OZXR3b3JraW5nRW5naW5lLlJlcXVlc3RUeXBlXCIse01BTklGRVNUOjAsU0VHTUVOVDoxLExJQ0VOU0U6Mn0pO3ZhciBGYT17fTtsKFwic2hha2EubmV0Lk5ldHdvcmtpbmdFbmdpbmUucmVnaXN0ZXJTY2hlbWVcIixmdW5jdGlvbihhLGIpe0ZhW2FdPWJ9KTtsKFwic2hha2EubmV0Lk5ldHdvcmtpbmdFbmdpbmUudW5yZWdpc3RlclNjaGVtZVwiLGZ1bmN0aW9uKGEpe2RlbGV0ZSBGYVthXX0pO3kucHJvdG90eXBlLnZjPWZ1bmN0aW9uKGEpe3RoaXMuYi5wdXNoKGEpfTt5LnByb3RvdHlwZS5yZWdpc3RlclJlcXVlc3RGaWx0ZXI9eS5wcm90b3R5cGUudmM7eS5wcm90b3R5cGUuWGM9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5iO2E9Yi5pbmRleE9mKGEpOzA8PWEmJmIuc3BsaWNlKGEsMSl9O1xyXG55LnByb3RvdHlwZS51bnJlZ2lzdGVyUmVxdWVzdEZpbHRlcj15LnByb3RvdHlwZS5YYzt5LnByb3RvdHlwZS5PYj1mdW5jdGlvbigpe3RoaXMuYj1bXX07eS5wcm90b3R5cGUuY2xlYXJBbGxSZXF1ZXN0RmlsdGVycz15LnByb3RvdHlwZS5PYjt5LnByb3RvdHlwZS55Yj1mdW5jdGlvbihhKXt0aGlzLmMucHVzaChhKX07eS5wcm90b3R5cGUucmVnaXN0ZXJSZXNwb25zZUZpbHRlcj15LnByb3RvdHlwZS55Yjt5LnByb3RvdHlwZS5KYj1mdW5jdGlvbihhKXt2YXIgYj10aGlzLmM7YT1iLmluZGV4T2YoYSk7MDw9YSYmYi5zcGxpY2UoYSwxKX07eS5wcm90b3R5cGUudW5yZWdpc3RlclJlc3BvbnNlRmlsdGVyPXkucHJvdG90eXBlLkpiO3kucHJvdG90eXBlLlBiPWZ1bmN0aW9uKCl7dGhpcy5jPVtdfTt5LnByb3RvdHlwZS5jbGVhckFsbFJlc3BvbnNlRmlsdGVycz15LnByb3RvdHlwZS5QYjtcclxuZnVuY3Rpb24gR2EoKXtyZXR1cm57bWF4QXR0ZW1wdHM6MixiYXNlRGVsYXk6MUUzLGJhY2tvZmZGYWN0b3I6MixmdXp6RmFjdG9yOi41LHRpbWVvdXQ6MH19ZnVuY3Rpb24gSGEoYSxiKXtyZXR1cm57dXJpczphLG1ldGhvZDpcIkdFVFwiLGJvZHk6bnVsbCxoZWFkZXJzOnt9LGFsbG93Q3Jvc3NTaXRlQ3JlZGVudGlhbHM6ITEscmV0cnlQYXJhbWV0ZXJzOmJ9fXkucHJvdG90eXBlLm89ZnVuY3Rpb24oKXt0aGlzLmY9ITA7dGhpcy5iPVtdO3RoaXMuYz1bXTtmb3IodmFyIGE9W10sYj0wO2I8dGhpcy5hLmxlbmd0aDsrK2IpYS5wdXNoKHRoaXMuYVtiXVtcImNhdGNoXCJdKHYpKTtyZXR1cm4gUHJvbWlzZS5hbGwoYSl9O1xyXG55LnByb3RvdHlwZS5yZXF1ZXN0PWZ1bmN0aW9uKGEsYil7aWYodGhpcy5mKXJldHVybiBQcm9taXNlLnJlamVjdCgpO2Zvcih2YXIgYz1EYXRlLm5vdygpLGQ9dGhpcy5iLGU9MDtlPGQubGVuZ3RoO2UrKyl0cnl7ZFtlXShhLGIpfWNhdGNoKG0pe3JldHVybiBQcm9taXNlLnJlamVjdChtKX1mb3IodmFyIGU9Yi5yZXRyeVBhcmFtZXRlcnN8fHt9LGQ9ZS5tYXhBdHRlbXB0c3x8MSxmPWUuYmFja29mZkZhY3Rvcnx8MixnPW51bGw9PWUuYmFzZURlbGF5PzFFMzplLmJhc2VEZWxheSxoPXRoaXMuZyhhLGIsMCksZT0xO2U8ZDtlKyspaD1oW1wiY2F0Y2hcIl0odGhpcy5pLmJpbmQodGhpcyxhLGIsZyxlJWIudXJpcy5sZW5ndGgpKSxnKj1mO3RoaXMuYS5wdXNoKGgpO3JldHVybiBoLnRoZW4oZnVuY3Rpb24oYil7dGhpcy5hLnNwbGljZSh0aGlzLmEuaW5kZXhPZihoKSwxKTt2YXIgZD1EYXRlLm5vdygpO3RoaXMuaCYmMT09YSYmdGhpcy5oKGMsZCxiLmRhdGEuYnl0ZUxlbmd0aCk7cmV0dXJuIGJ9LmJpbmQodGhpcykpW1wiY2F0Y2hcIl0oZnVuY3Rpb24oYSl7dGhpcy5hLnNwbGljZSh0aGlzLmEuaW5kZXhPZihoKSxcclxuMSk7cmV0dXJuIFByb21pc2UucmVqZWN0KGEpfS5iaW5kKHRoaXMpKX07eS5wcm90b3R5cGUucmVxdWVzdD15LnByb3RvdHlwZS5yZXF1ZXN0O3kucHJvdG90eXBlLmc9ZnVuY3Rpb24oYSxiLGMpe2lmKHRoaXMuZilyZXR1cm4gUHJvbWlzZS5yZWplY3QoKTt2YXIgZD1uZXcgb2EoYi51cmlzW2NdKSxlPWQuUjtlfHwoZT1sb2NhdGlvbi5wcm90b2NvbCxlPWUuc2xpY2UoMCwtMSkscGEoZCxlKSxiLnVyaXNbY109ZC50b1N0cmluZygpKTtyZXR1cm4oZT1GYVtlXSk/ZShiLnVyaXNbY10sYikudGhlbihmdW5jdGlvbihiKXtmb3IodmFyIGM9dGhpcy5jLGQ9MDtkPGMubGVuZ3RoO2QrKyljW2RdKGEsYik7cmV0dXJuIGJ9LmJpbmQodGhpcykpOlByb21pc2UucmVqZWN0KG5ldyBxKDEsMUUzLGQpKX07XHJcbnkucHJvdG90eXBlLmk9ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9bmV3IHcsZj1iLnJldHJ5UGFyYW1ldGVyc3x8e307d2luZG93LnNldFRpbWVvdXQoZS5yZXNvbHZlLGMqKDErKDIqTWF0aC5yYW5kb20oKS0xKSoobnVsbD09Zi5mdXp6RmFjdG9yPy41OmYuZnV6ekZhY3RvcikpKTtyZXR1cm4gZS50aGVuKHRoaXMuZy5iaW5kKHRoaXMsYSxiLGQpKX07ZnVuY3Rpb24gSWEoYSxiLGMpe2Zvcih2YXIgZD0wO2Q8YS5sZW5ndGg7KytkKWlmKGMoYVtkXSxiKSlyZXR1cm4gZDtyZXR1cm4tMX07ZnVuY3Rpb24gSmEoKXt0aGlzLmE9e319az1KYS5wcm90b3R5cGU7ay5wdXNoPWZ1bmN0aW9uKGEsYil7dGhpcy5hLmhhc093blByb3BlcnR5KGEpP3RoaXMuYVthXS5wdXNoKGIpOnRoaXMuYVthXT1bYl19O2suc2V0PWZ1bmN0aW9uKGEsYil7dGhpcy5hW2FdPWJ9O2suaGFzPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmEuaGFzT3duUHJvcGVydHkoYSl9O2suZ2V0PWZ1bmN0aW9uKGEpe3JldHVybihhPXRoaXMuYVthXSk/YS5zbGljZSgpOm51bGx9O2sucmVtb3ZlPWZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5hW2FdO2lmKGMpZm9yKHZhciBkPTA7ZDxjLmxlbmd0aDsrK2QpY1tkXT09YiYmKGMuc3BsaWNlKGQsMSksLS1kKX07ay5rZXlzPWZ1bmN0aW9uKCl7dmFyIGE9W10sYjtmb3IoYiBpbiB0aGlzLmEpYS5wdXNoKGIpO3JldHVybiBhfTtrLmNsZWFyPWZ1bmN0aW9uKCl7dGhpcy5hPXt9fTtmdW5jdGlvbiB6KCl7dGhpcy5hPW5ldyBKYX16LnByb3RvdHlwZS5vPWZ1bmN0aW9uKCl7S2EodGhpcyk7dGhpcy5hPW51bGw7cmV0dXJuIFByb21pc2UucmVzb2x2ZSgpfTtmdW5jdGlvbiBCKGEsYixjLGQpe2I9bmV3IExhKGIsYyxkKTthLmEucHVzaChjLGIpfXoucHJvdG90eXBlLmthPWZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPXRoaXMuYS5nZXQoYil8fFtdLGQ9MDtkPGMubGVuZ3RoOysrZCl7dmFyIGU9Y1tkXTtlLnRhcmdldD09YSYmKGUua2EoKSx0aGlzLmEucmVtb3ZlKGIsZSkpfX07ZnVuY3Rpb24gS2EoYSl7dmFyIGI9YS5hLGM9W10sZDtmb3IoZCBpbiBiLmEpYy5wdXNoLmFwcGx5KGMsYi5hW2RdKTtmb3IoYj0wO2I8Yy5sZW5ndGg7KytiKWNbYl0ua2EoKTthLmEuY2xlYXIoKX1mdW5jdGlvbiBMYShhLGIsYyl7dGhpcy50YXJnZXQ9YTt0aGlzLnR5cGU9Yjt0aGlzLmE9Yzt0aGlzLnRhcmdldC5hZGRFdmVudExpc3RlbmVyKGIsYywhMSl9XHJcbkxhLnByb3RvdHlwZS5rYT1mdW5jdGlvbigpe3RoaXMudGFyZ2V0JiYodGhpcy50YXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcih0aGlzLnR5cGUsdGhpcy5hLCExKSx0aGlzLmE9dGhpcy50YXJnZXQ9bnVsbCl9O2Z1bmN0aW9uIE1hKGEpe3JldHVybiFhfHwhT2JqZWN0LmtleXMoYSkubGVuZ3RofWZ1bmN0aW9uIEMoYSl7cmV0dXJuIE9iamVjdC5rZXlzKGEpLm1hcChmdW5jdGlvbihiKXtyZXR1cm4gYVtiXX0pfWZ1bmN0aW9uIE5hKGEsYil7cmV0dXJuIE9iamVjdC5rZXlzKGEpLnJlZHVjZShmdW5jdGlvbihjLGQpe2NbZF09YihhW2RdLGQpO3JldHVybiBjfSx7fSl9ZnVuY3Rpb24gT2EoYSxiKXtyZXR1cm4gT2JqZWN0LmtleXMoYSkuZXZlcnkoZnVuY3Rpb24oYyl7cmV0dXJuIGIoYyxhW2NdKX0pfTtmdW5jdGlvbiBEKGEpe2lmKCFhKXJldHVyblwiXCI7YT1uZXcgVWludDhBcnJheShhKTsyMzk9PWFbMF0mJjE4Nz09YVsxXSYmMTkxPT1hWzJdJiYoYT1hLnN1YmFycmF5KDMpKTthPWVzY2FwZShQYShhKSk7dHJ5e3JldHVybiBkZWNvZGVVUklDb21wb25lbnQoYSl9Y2F0Y2goYil7dGhyb3cgbmV3IHEoMiwyMDA0KTt9fWZ1bmN0aW9uIFFhKGEsYil7aWYoIWEpcmV0dXJuXCJcIjtpZihhLmJ5dGVMZW5ndGglMil0aHJvdyBuZXcgcSgyLDIwMDQpO3ZhciBjO2lmKGEgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlciljPWE7ZWxzZXt2YXIgZD1uZXcgVWludDhBcnJheShhLmJ5dGVMZW5ndGgpO2Quc2V0KG5ldyBVaW50OEFycmF5KGEpKTtjPWQuYnVmZmVyfXZhciBkPWEuYnl0ZUxlbmd0aC8yLGU9bmV3IFVpbnQxNkFycmF5KGQpO2M9bmV3IERhdGFWaWV3KGMpO2Zvcih2YXIgZj0wO2Y8ZDtmKyspZVtmXT1jLmdldFVpbnQxNigyKmYsYik7cmV0dXJuIFBhKGUpfVxyXG5mdW5jdGlvbiBSYShhKXt2YXIgYj1uZXcgVWludDhBcnJheShhKTtpZigyMzk9PWJbMF0mJjE4Nz09YlsxXSYmMTkxPT1iWzJdKXJldHVybiBEKGIpO2lmKDI1ND09YlswXSYmMjU1PT1iWzFdKXJldHVybiBRYShiLnN1YmFycmF5KDIpLCExKTtpZigyNTU9PWJbMF0mJjI1ND09YlsxXSlyZXR1cm4gUWEoYi5zdWJhcnJheSgyKSwhMCk7dmFyIGM9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYS5ieXRlTGVuZ3RoPD1ifHwzMjw9YVtiXSYmMTI2Pj1hW2JdfS5iaW5kKG51bGwsYik7aWYoYlswXXx8YlsyXSl7aWYoIWJbMV0mJiFiWzNdKXJldHVybiBRYShhLCEwKTtpZihjKDApJiZjKDEpJiZjKDIpJiZjKDMpKXJldHVybiBEKGEpfWVsc2UgcmV0dXJuIFFhKGEsITEpO3Rocm93IG5ldyBxKDIsMjAwMyk7fVxyXG5mdW5jdGlvbiBTYShhKXthPXVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChhKSk7Zm9yKHZhciBiPW5ldyBVaW50OEFycmF5KGEubGVuZ3RoKSxjPTA7YzxhLmxlbmd0aDsrK2MpYltjXT1hLmNoYXJDb2RlQXQoYyk7cmV0dXJuIGIuYnVmZmVyfWZ1bmN0aW9uIFBhKGEpe2Zvcih2YXIgYj1cIlwiLGM9MDtjPGEubGVuZ3RoO2MrPTE2RTMpYis9U3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLGEuc3ViYXJyYXkoYyxjKzE2RTMpKTtyZXR1cm4gYn07ZnVuY3Rpb24gVGEoYSl7dGhpcy5hPW51bGw7dGhpcy5iPWZ1bmN0aW9uKCl7dGhpcy5hPW51bGw7YSgpfS5iaW5kKHRoaXMpfWZ1bmN0aW9uIFVhKGEpe251bGwhPWEuYSYmKGNsZWFyVGltZW91dChhLmEpLGEuYT1udWxsKX1mdW5jdGlvbiBWYShhKXtVYShhKTthLmE9c2V0VGltZW91dChhLmIsMTAwKX07ZnVuY3Rpb24gV2EoYSl7cmV0dXJuIHdpbmRvdy5idG9hKFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCxhKSkucmVwbGFjZSgvXFwrL2csXCItXCIpLnJlcGxhY2UoL1xcLy9nLFwiX1wiKS5yZXBsYWNlKC89KiQvLFwiXCIpfWZ1bmN0aW9uIFhhKGEpe2E9d2luZG93LmF0b2IoYS5yZXBsYWNlKC8tL2csXCIrXCIpLnJlcGxhY2UoL18vZyxcIi9cIikpO2Zvcih2YXIgYj1uZXcgVWludDhBcnJheShhLmxlbmd0aCksYz0wO2M8YS5sZW5ndGg7KytjKWJbY109YS5jaGFyQ29kZUF0KGMpO3JldHVybiBifWZ1bmN0aW9uIFlhKGEpe2Zvcih2YXIgYj1uZXcgVWludDhBcnJheShhLmxlbmd0aC8yKSxjPTA7YzxhLmxlbmd0aDtjKz0yKWJbYy8yXT13aW5kb3cucGFyc2VJbnQoYS5zdWJzdHIoYywyKSwxNik7cmV0dXJuIGJ9XHJcbmZ1bmN0aW9uIFphKGEpe2Zvcih2YXIgYj1cIlwiLGM9MDtjPGEubGVuZ3RoOysrYyl7dmFyIGQ9YVtjXS50b1N0cmluZygxNik7MT09ZC5sZW5ndGgmJihkPVwiMFwiK2QpO2IrPWR9cmV0dXJuIGJ9ZnVuY3Rpb24gJGEoYSxiKXtpZighYSYmIWIpcmV0dXJuITA7aWYoIWF8fCFifHxhLmxlbmd0aCE9Yi5sZW5ndGgpcmV0dXJuITE7Zm9yKHZhciBjPTA7YzxhLmxlbmd0aDsrK2MpaWYoYVtjXSE9YltjXSlyZXR1cm4hMTtyZXR1cm4hMH07ZnVuY3Rpb24gYWIoYSxiLGMpe3RoaXMubD10aGlzLmg9dGhpcy5tPW51bGw7dGhpcy5BPSExO3RoaXMuYj1udWxsO3RoaXMuZz1uZXcgejt0aGlzLmE9W107dGhpcy5zPVtdO3RoaXMuaj1uZXcgdzt0aGlzLkc9YTt0aGlzLmk9bnVsbDt0aGlzLmY9ZnVuY3Rpb24oYSl7dGhpcy5qLnJlamVjdChhKTtiKGEpfS5iaW5kKHRoaXMpO3RoaXMudz17fTt0aGlzLko9Yzt0aGlzLnY9bmV3IFRhKHRoaXMudWMuYmluZCh0aGlzKSk7dGhpcy5DPXRoaXMuYz0hMTt0aGlzLmpbXCJjYXRjaFwiXShmdW5jdGlvbigpe30pfWs9YWIucHJvdG90eXBlO1xyXG5rLm89ZnVuY3Rpb24oKXt0aGlzLmM9ITA7dmFyIGE9dGhpcy5hLm1hcChmdW5jdGlvbihhKXthLnlhLmNsb3NlKClbXCJjYXRjaFwiXSh2KTtyZXR1cm4gYS55YS5jbG9zZWR9KTt0aGlzLmoucmVqZWN0KCk7dGhpcy5nJiZhLnB1c2godGhpcy5nLm8oKSk7dGhpcy5sJiZhLnB1c2godGhpcy5sLnNldE1lZGlhS2V5cyhudWxsKVtcImNhdGNoXCJdKHYpKTt0aGlzLnYmJlVhKHRoaXMudik7dGhpcy5nPXRoaXMubD10aGlzLmg9dGhpcy5tPXRoaXMuYj10aGlzLnY9bnVsbDt0aGlzLmE9W107dGhpcy5zPVtdO3RoaXMuZj10aGlzLmk9dGhpcy5HPW51bGw7cmV0dXJuIFByb21pc2UuYWxsKGEpfTtrLmNvbmZpZ3VyZT1mdW5jdGlvbihhKXt0aGlzLmk9YX07XHJcbmsuaW5pdD1mdW5jdGlvbihhLGIpe3ZhciBjPXt9LGQ9W107dGhpcy5DPWI7dGhpcy5zPWEub2ZmbGluZVNlc3Npb25JZHM7YmIodGhpcyxhLGJ8fDA8YS5vZmZsaW5lU2Vzc2lvbklkcy5sZW5ndGgsYyxkKTtyZXR1cm4gZC5sZW5ndGg/Y2IodGhpcyxjLGQpOih0aGlzLkE9ITAsUHJvbWlzZS5yZXNvbHZlKCkpfTtcclxuZnVuY3Rpb24gZGIoYSxiKXtpZighYS5oKXJldHVybiBCKGEuZyxiLFwiZW5jcnlwdGVkXCIsZnVuY3Rpb24oKXt0aGlzLmcua2EoYixcImVuY3J5cHRlZFwiKTt0aGlzLmYobmV3IHEoNiw2MDEwKSl9LmJpbmQoYSkpLFByb21pc2UucmVzb2x2ZSgpO2EubD1iO3ZhciBjPWEubC5zZXRNZWRpYUtleXMoYS5oKSxjPWNbXCJjYXRjaFwiXShmdW5jdGlvbihhKXtyZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IHEoNiw2MDAzLGEubWVzc2FnZSkpfSksZD1udWxsO2EuYi5zZXJ2ZXJDZXJ0aWZpY2F0ZSYmKGQ9YS5oLnNldFNlcnZlckNlcnRpZmljYXRlKGEuYi5zZXJ2ZXJDZXJ0aWZpY2F0ZSksZD1kW1wiY2F0Y2hcIl0oZnVuY3Rpb24oYSl7cmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBxKDYsNjAwNCxhLm1lc3NhZ2UpKX0pKTtyZXR1cm4gUHJvbWlzZS5hbGwoW2MsZF0pLnRoZW4oZnVuY3Rpb24oKXtpZih0aGlzLmMpcmV0dXJuIFByb21pc2UucmVqZWN0KCk7ZWIodGhpcyk7dGhpcy5iLmluaXREYXRhLmxlbmd0aHx8XHJcbnRoaXMucy5sZW5ndGh8fEIodGhpcy5nLHRoaXMubCxcImVuY3J5cHRlZFwiLHRoaXMuYmMuYmluZCh0aGlzKSl9LmJpbmQoYSkpW1wiY2F0Y2hcIl0oZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuYz9Qcm9taXNlLnJlc29sdmUoKTpQcm9taXNlLnJlamVjdChhKX0uYmluZChhKSl9ZnVuY3Rpb24gZmIoYSxiKXtyZXR1cm4gUHJvbWlzZS5hbGwoYi5tYXAoZnVuY3Rpb24oYSl7cmV0dXJuIGdiKHRoaXMsYSkudGhlbihmdW5jdGlvbihhKXtpZihhKXJldHVybiBhLnJlbW92ZSgpfSl9LmJpbmQoYSkpKX1mdW5jdGlvbiBlYihhKXt2YXIgYj1hLmI/YS5iLmluaXREYXRhOltdO2IuZm9yRWFjaChmdW5jdGlvbihhKXtoYih0aGlzLGEuaW5pdERhdGFUeXBlLGEuaW5pdERhdGEpfS5iaW5kKGEpKTthLnMuZm9yRWFjaChmdW5jdGlvbihhKXtnYih0aGlzLGEpfS5iaW5kKGEpKTtiLmxlbmd0aHx8YS5zLmxlbmd0aHx8YS5qLnJlc29sdmUoKTtyZXR1cm4gYS5qfVxyXG5rLmtleVN5c3RlbT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmI/dGhpcy5iLmtleVN5c3RlbTpcIlwifTtmdW5jdGlvbiBpYihhKXtyZXR1cm4gYS5hLm1hcChmdW5jdGlvbihhKXtyZXR1cm4gYS55YS5zZXNzaW9uSWR9KX1cclxuZnVuY3Rpb24gYmIoYSxiLGMsZCxlKXt2YXIgZj1rYihhKSxnPTA8PW5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZihcIkVkZ2UvXCIpO2IucGVyaW9kcy5mb3JFYWNoKGZ1bmN0aW9uKGEpe2Euc3RyZWFtU2V0cy5mb3JFYWNoKGZ1bmN0aW9uKGEpe1widGV4dFwiIT1hLnR5cGUmJihmJiYoYS5kcm1JbmZvcz1bZl0pLGEuZHJtSW5mb3MuZm9yRWFjaChmdW5jdGlvbihiKXtsYih0aGlzLGIpO3ZhciBmPWRbYi5rZXlTeXN0ZW1dO2Z8fChmPXthdWRpb0NhcGFiaWxpdGllczpbXSx2aWRlb0NhcGFiaWxpdGllczpbXSxkaXN0aW5jdGl2ZUlkZW50aWZpZXI6XCJvcHRpb25hbFwiLHBlcnNpc3RlbnRTdGF0ZTpjP1wicmVxdWlyZWRcIjpcIm9wdGlvbmFsXCIsc2Vzc2lvblR5cGVzOltjP1wicGVyc2lzdGVudC1saWNlbnNlXCI6XCJ0ZW1wb3JhcnlcIl0sbGFiZWw6Yi5rZXlTeXN0ZW0sZHJtSW5mb3M6W119LGRbYi5rZXlTeXN0ZW1dPWYsZS5wdXNoKGIua2V5U3lzdGVtKSk7Zi5kcm1JbmZvcy5wdXNoKGIpO2IuZGlzdGluY3RpdmVJZGVudGlmaWVyUmVxdWlyZWQmJlxyXG4oZi5kaXN0aW5jdGl2ZUlkZW50aWZpZXI9XCJyZXF1aXJlZFwiKTtiLnBlcnNpc3RlbnRTdGF0ZVJlcXVpcmVkJiYoZi5wZXJzaXN0ZW50U3RhdGU9XCJyZXF1aXJlZFwiKTt2YXIgaD1cInZpZGVvXCI9PWEudHlwZT9mLnZpZGVvQ2FwYWJpbGl0aWVzOmYuYXVkaW9DYXBhYmlsaXRpZXMsQT0oXCJ2aWRlb1wiPT1hLnR5cGU/Yi52aWRlb1JvYnVzdG5lc3M6Yi5hdWRpb1JvYnVzdG5lc3MpfHxcIlwiO2Euc3RyZWFtcy5mb3JFYWNoKGZ1bmN0aW9uKGEpe3ZhciBjPWEubWltZVR5cGU7YS5jb2RlY3MmJihjKz0nOyBjb2RlY3M9XCInK2EuY29kZWNzKydcIicpO2cmJlwiY29tLm1pY3Jvc29mdC5wbGF5cmVhZHlcIj09Yi5rZXlTeXN0ZW0mJmgubGVuZ3RofHxoLnB1c2goe3JvYnVzdG5lc3M6QSxjb250ZW50VHlwZTpjfSl9LmJpbmQodGhpcykpfS5iaW5kKHRoaXMpKSl9LmJpbmQodGhpcykpfS5iaW5kKGEpKX1cclxuZnVuY3Rpb24gY2IoYSxiLGMpe2lmKDE9PWMubGVuZ3RoJiZcIlwiPT1jWzBdKXJldHVybiBQcm9taXNlLnJlamVjdChuZXcgcSg2LDZFMykpO3ZhciBkPW5ldyB3LGU9ZDtbITAsITFdLmZvckVhY2goZnVuY3Rpb24oYSl7Yy5mb3JFYWNoKGZ1bmN0aW9uKGMpe3ZhciBkPWJbY107ZC5kcm1JbmZvcy5zb21lKGZ1bmN0aW9uKGEpe3JldHVybiEhYS5saWNlbnNlU2VydmVyVXJpfSk9PWEmJihkLmF1ZGlvQ2FwYWJpbGl0aWVzLmxlbmd0aHx8ZGVsZXRlIGQuYXVkaW9DYXBhYmlsaXRpZXMsZC52aWRlb0NhcGFiaWxpdGllcy5sZW5ndGh8fGRlbGV0ZSBkLnZpZGVvQ2FwYWJpbGl0aWVzLGU9ZVtcImNhdGNoXCJdKGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYz9Qcm9taXNlLnJlamVjdCgpOm5hdmlnYXRvci5yZXF1ZXN0TWVkaWFLZXlTeXN0ZW1BY2Nlc3MoYyxbZF0pfS5iaW5kKHRoaXMpKSl9LmJpbmQodGhpcykpfS5iaW5kKGEpKTtlPWVbXCJjYXRjaFwiXShmdW5jdGlvbigpe3JldHVybiBQcm9taXNlLnJlamVjdChuZXcgcSg2LFxyXG42MDAxKSl9KTtlPWUudGhlbihmdW5jdGlvbihhKXtpZih0aGlzLmMpcmV0dXJuIFByb21pc2UucmVqZWN0KCk7dmFyIGM9YS5nZXRDb25maWd1cmF0aW9uKCk7dGhpcy5tPShjLmF1ZGlvQ2FwYWJpbGl0aWVzfHxbXSkuY29uY2F0KGMudmlkZW9DYXBhYmlsaXRpZXN8fFtdKS5tYXAoZnVuY3Rpb24oYSl7cmV0dXJuIGEuY29udGVudFR5cGV9KTt0aGlzLm0ubGVuZ3RofHwodGhpcy5tPW51bGwpO2M9YlthLmtleVN5c3RlbV07bWIodGhpcyxhLmtleVN5c3RlbSxjLGMuZHJtSW5mb3MpO3JldHVybiB0aGlzLmIubGljZW5zZVNlcnZlclVyaT9hLmNyZWF0ZU1lZGlhS2V5cygpOlByb21pc2UucmVqZWN0KG5ldyBxKDYsNjAxMikpfS5iaW5kKGEpKS50aGVuKGZ1bmN0aW9uKGEpe2lmKHRoaXMuYylyZXR1cm4gUHJvbWlzZS5yZWplY3QoKTt0aGlzLmg9YTt0aGlzLkE9ITB9LmJpbmQoYSkpW1wiY2F0Y2hcIl0oZnVuY3Rpb24oYSl7aWYodGhpcy5jKXJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcclxudGhpcy5tPXRoaXMuYj1udWxsO3JldHVybiBhIGluc3RhbmNlb2YgcT9Qcm9taXNlLnJlamVjdChhKTpQcm9taXNlLnJlamVjdChuZXcgcSg2LDYwMDIsYS5tZXNzYWdlKSl9LmJpbmQoYSkpO2QucmVqZWN0KCk7cmV0dXJuIGV9XHJcbmZ1bmN0aW9uIGxiKGEsYil7dmFyIGM9Yi5rZXlTeXN0ZW07aWYoYyl7aWYoIWIubGljZW5zZVNlcnZlclVyaSl7dmFyIGQ9YS5pLnNlcnZlcnNbY107ZCYmKGIubGljZW5zZVNlcnZlclVyaT1kKX1pZihjPWEuaS5hZHZhbmNlZFtjXSliLmRpc3RpbmN0aXZlSWRlbnRpZmllclJlcXVpcmVkfHwoYi5kaXN0aW5jdGl2ZUlkZW50aWZpZXJSZXF1aXJlZD1jLmRpc3RpbmN0aXZlSWRlbnRpZmllclJlcXVpcmVkKSxiLnBlcnNpc3RlbnRTdGF0ZVJlcXVpcmVkfHwoYi5wZXJzaXN0ZW50U3RhdGVSZXF1aXJlZD1jLnBlcnNpc3RlbnRTdGF0ZVJlcXVpcmVkKSxiLnZpZGVvUm9idXN0bmVzc3x8KGIudmlkZW9Sb2J1c3RuZXNzPWMudmlkZW9Sb2J1c3RuZXNzKSxiLmF1ZGlvUm9idXN0bmVzc3x8KGIuYXVkaW9Sb2J1c3RuZXNzPWMuYXVkaW9Sb2J1c3RuZXNzKSxiLnNlcnZlckNlcnRpZmljYXRlfHwoYi5zZXJ2ZXJDZXJ0aWZpY2F0ZT1jLnNlcnZlckNlcnRpZmljYXRlKX19XHJcbmZ1bmN0aW9uIGtiKGEpe2lmKE1hKGEuaS5jbGVhcktleXMpKXJldHVybiBudWxsO3ZhciBiPVtdLGM9W10sZDtmb3IoZCBpbiBhLmkuY2xlYXJLZXlzKXt2YXIgZT1hLmkuY2xlYXJLZXlzW2RdLGY9WWEoZCksZT1ZYShlKSxmPXtrdHk6XCJvY3RcIixraWQ6V2EoZiksazpXYShlKX07Yi5wdXNoKGYpO2MucHVzaChmLmtpZCl9YT1KU09OLnN0cmluZ2lmeSh7a2V5czpifSk7Yz1KU09OLnN0cmluZ2lmeSh7a2lkczpjfSk7Yz1be2luaXREYXRhOm5ldyBVaW50OEFycmF5KFNhKGMpKSxpbml0RGF0YVR5cGU6XCJrZXlpZHNcIn1dO3JldHVybntrZXlTeXN0ZW06XCJvcmcudzMuY2xlYXJrZXlcIixsaWNlbnNlU2VydmVyVXJpOlwiZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxcIit3aW5kb3cuYnRvYShhKSxkaXN0aW5jdGl2ZUlkZW50aWZpZXJSZXF1aXJlZDohMSxwZXJzaXN0ZW50U3RhdGVSZXF1aXJlZDohMSxhdWRpb1JvYnVzdG5lc3M6XCJcIix2aWRlb1JvYnVzdG5lc3M6XCJcIixzZXJ2ZXJDZXJ0aWZpY2F0ZTpudWxsLFxyXG5pbml0RGF0YTpjfX1mdW5jdGlvbiBtYihhLGIsYyxkKXt2YXIgZT1bXSxmPVtdLGc9W107bmIoZCxlLGYsZyk7YS5iPXtrZXlTeXN0ZW06YixsaWNlbnNlU2VydmVyVXJpOmVbMF0sZGlzdGluY3RpdmVJZGVudGlmaWVyUmVxdWlyZWQ6XCJyZXF1aXJlZFwiPT1jLmRpc3RpbmN0aXZlSWRlbnRpZmllcixwZXJzaXN0ZW50U3RhdGVSZXF1aXJlZDpcInJlcXVpcmVkXCI9PWMucGVyc2lzdGVudFN0YXRlLGF1ZGlvUm9idXN0bmVzczpjLmF1ZGlvQ2FwYWJpbGl0aWVzP2MuYXVkaW9DYXBhYmlsaXRpZXNbMF0ucm9idXN0bmVzczpcIlwiLHZpZGVvUm9idXN0bmVzczpjLnZpZGVvQ2FwYWJpbGl0aWVzP2MudmlkZW9DYXBhYmlsaXRpZXNbMF0ucm9idXN0bmVzczpcIlwiLHNlcnZlckNlcnRpZmljYXRlOmZbMF0saW5pdERhdGE6Z319XHJcbmZ1bmN0aW9uIG5iKGEsYixjLGQpe2Z1bmN0aW9uIGUoYSxiKXtyZXR1cm4gYS5pbml0RGF0YVR5cGU9PWIuaW5pdERhdGFUeXBlJiYkYShhLmluaXREYXRhLGIuaW5pdERhdGEpfWEuZm9yRWFjaChmdW5jdGlvbihhKXstMT09Yi5pbmRleE9mKGEubGljZW5zZVNlcnZlclVyaSkmJmIucHVzaChhLmxpY2Vuc2VTZXJ2ZXJVcmkpO2Euc2VydmVyQ2VydGlmaWNhdGUmJi0xPT1JYShjLGEuc2VydmVyQ2VydGlmaWNhdGUsJGEpJiZjLnB1c2goYS5zZXJ2ZXJDZXJ0aWZpY2F0ZSk7YS5pbml0RGF0YSYmYS5pbml0RGF0YS5mb3JFYWNoKGZ1bmN0aW9uKGEpey0xPT1JYShkLGEsZSkmJmQucHVzaChhKX0pfSl9ay5iYz1mdW5jdGlvbihhKXtmb3IodmFyIGI9bmV3IFVpbnQ4QXJyYXkoYS5pbml0RGF0YSksYz0wO2M8dGhpcy5hLmxlbmd0aDsrK2MpaWYoJGEoYix0aGlzLmFbY10uaW5pdERhdGEpKXJldHVybjtoYih0aGlzLGEuaW5pdERhdGFUeXBlLGIpfTtcclxuZnVuY3Rpb24gZ2IoYSxiKXt2YXIgYzt0cnl7Yz1hLmguY3JlYXRlU2Vzc2lvbihcInBlcnNpc3RlbnQtbGljZW5zZVwiKX1jYXRjaChmKXt2YXIgZD1uZXcgcSg2LDYwMDUsZi5tZXNzYWdlKTthLmYoZCk7cmV0dXJuIFByb21pc2UucmVqZWN0KGQpfUIoYS5nLGMsXCJtZXNzYWdlXCIsYS52Yi5iaW5kKGEpKTtCKGEuZyxjLFwia2V5c3RhdHVzZXNjaGFuZ2VcIixhLnFiLmJpbmQoYSkpO3ZhciBlPXtpbml0RGF0YTpudWxsLHlhOmMsbG9hZGVkOiExfTthLmEucHVzaChlKTtyZXR1cm4gYy5sb2FkKGIpLnRoZW4oZnVuY3Rpb24oYSl7aWYoIXRoaXMuYyl7aWYoYSlyZXR1cm4gZS5sb2FkZWQ9ITAsdGhpcy5hLmV2ZXJ5KGZ1bmN0aW9uKGEpe3JldHVybiBhLmxvYWRlZH0pJiZ0aGlzLmoucmVzb2x2ZSgpLGM7dGhpcy5hLnNwbGljZSh0aGlzLmEuaW5kZXhPZihlKSwxKTt0aGlzLmYobmV3IHEoNiw2MDEzKSl9fS5iaW5kKGEpLGZ1bmN0aW9uKGEpe3RoaXMuY3x8KHRoaXMuYS5zcGxpY2UodGhpcy5hLmluZGV4T2YoZSksXHJcbjEpLHRoaXMuZihuZXcgcSg2LDYwMDUsYS5tZXNzYWdlKSkpfS5iaW5kKGEpKX1mdW5jdGlvbiBoYihhLGIsYyl7dmFyIGQ7dHJ5e2Q9YS5DP2EuaC5jcmVhdGVTZXNzaW9uKFwicGVyc2lzdGVudC1saWNlbnNlXCIpOmEuaC5jcmVhdGVTZXNzaW9uKCl9Y2F0Y2goZSl7YS5mKG5ldyBxKDYsNjAwNSxlLm1lc3NhZ2UpKTtyZXR1cm59QihhLmcsZCxcIm1lc3NhZ2VcIixhLnZiLmJpbmQoYSkpO0IoYS5nLGQsXCJrZXlzdGF0dXNlc2NoYW5nZVwiLGEucWIuYmluZChhKSk7YS5hLnB1c2goe2luaXREYXRhOmMseWE6ZCxsb2FkZWQ6ITF9KTtkLmdlbmVyYXRlUmVxdWVzdChiLGMuYnVmZmVyKVtcImNhdGNoXCJdKGZ1bmN0aW9uKGEpe2lmKCF0aGlzLmMpe2Zvcih2YXIgYj0wO2I8dGhpcy5hLmxlbmd0aDsrK2IpaWYodGhpcy5hW2JdLnlhPT1kKXt0aGlzLmEuc3BsaWNlKGIsMSk7YnJlYWt9dGhpcy5mKG5ldyBxKDYsNjAwNixhLm1lc3NhZ2UpKX19LmJpbmQoYSkpfVxyXG5rLnZiPWZ1bmN0aW9uKGEpe3ZhciBiPWEudGFyZ2V0LGM9SGEoW3RoaXMuYi5saWNlbnNlU2VydmVyVXJpXSx0aGlzLmkucmV0cnlQYXJhbWV0ZXJzKTtjLmJvZHk9YS5tZXNzYWdlO2MubWV0aG9kPVwiUE9TVFwiO1wiY29tLm1pY3Jvc29mdC5wbGF5cmVhZHlcIj09dGhpcy5iLmtleVN5c3RlbSYmcGIoYyk7dGhpcy5HLnJlcXVlc3QoMixjKS50aGVuKGZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmM/UHJvbWlzZS5yZWplY3QoKTpiLnVwZGF0ZShhLmRhdGEpfS5iaW5kKHRoaXMpLGZ1bmN0aW9uKGEpe2lmKHRoaXMuYylyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7dGhpcy5mKG5ldyBxKDYsNjAwNyxhKSl9LmJpbmQodGhpcykpW1wiY2F0Y2hcIl0oZnVuY3Rpb24oYSl7aWYodGhpcy5jKXJldHVybiBQcm9taXNlLnJlc29sdmUoKTt0aGlzLmYobmV3IHEoNiw2MDA4LGEubWVzc2FnZSkpfS5iaW5kKHRoaXMpKX07XHJcbmZ1bmN0aW9uIHBiKGEpe2Zvcih2YXIgYj1RYShhLmJvZHksITApLGI9KG5ldyBET01QYXJzZXIpLnBhcnNlRnJvbVN0cmluZyhiLFwiYXBwbGljYXRpb24veG1sXCIpLGM9Yi5nZXRFbGVtZW50c0J5VGFnTmFtZShcIkh0dHBIZWFkZXJcIiksZD0wO2Q8Yy5sZW5ndGg7KytkKWEuaGVhZGVyc1tjW2RdLnF1ZXJ5U2VsZWN0b3IoXCJuYW1lXCIpLnRleHRDb250ZW50XT1jW2RdLnF1ZXJ5U2VsZWN0b3IoXCJ2YWx1ZVwiKS50ZXh0Q29udGVudDthLmJvZHk9WGEoYi5xdWVyeVNlbGVjdG9yKFwiQ2hhbGxlbmdlXCIpLnRleHRDb250ZW50KS5idWZmZXJ9XHJcbmsucWI9ZnVuY3Rpb24oYSl7YT1hLnRhcmdldDt2YXIgYjtmb3IoYj0wO2I8dGhpcy5hLmxlbmd0aCYmdGhpcy5hW2JdLnlhIT1hOysrYik7aWYoYiE9dGhpcy5hLmxlbmd0aCl7dmFyIGM9YS5rZXlTdGF0dXNlcyxkPSExO2MuZm9yRWFjaHx8KGM9W10pO2MuZm9yRWFjaChmdW5jdGlvbihhLGMpe2lmKFwic3RyaW5nXCI9PXR5cGVvZiBjKXt2YXIgZz1jO2M9YTthPWd9aWYoXCJjb20ubWljcm9zb2Z0LnBsYXlyZWFkeVwiPT10aGlzLmIua2V5U3lzdGVtJiYxNj09Yy5ieXRlTGVuZ3RoKXt2YXIgZz1uZXcgRGF0YVZpZXcoYyksaD1nLmdldFVpbnQzMigwLCEwKSxtPWcuZ2V0VWludDE2KDQsITApLG49Zy5nZXRVaW50MTYoNiwhMCk7Zy5zZXRVaW50MzIoMCxoLCExKTtnLnNldFVpbnQxNig0LG0sITEpO2cuc2V0VWludDE2KDYsbiwhMSl9XCJjb20ubWljcm9zb2Z0LnBsYXlyZWFkeVwiPT10aGlzLmIua2V5U3lzdGVtJiZcInN0YXR1cy1wZW5kaW5nXCI9PWEmJihhPVwidXNhYmxlXCIpO1wic3RhdHVzLXBlbmRpbmdcIiE9XHJcbmEmJlwiaW50ZXJuYWwtZXJyb3JcIiE9YSYmKHRoaXMuYVtiXS5sb2FkZWQ9ITAsdGhpcy5hLmV2ZXJ5KGZ1bmN0aW9uKGEpe3JldHVybiBhLmxvYWRlZH0pJiZ0aGlzLmoucmVzb2x2ZSgpKTtcImV4cGlyZWRcIj09YSYmKGQ9ITApO2c9WmEobmV3IFVpbnQ4QXJyYXkoYykpO1wiaW50ZXJuYWwtZXJyb3JcIj09YSYmdGhpcy5mKG5ldyBxKDYsNDAxMyxnKSk7dGhpcy53W2ddPWF9LmJpbmQodGhpcykpO2M9YS5leHBpcmF0aW9uLURhdGUubm93KCk7aWYoMD5jfHxkJiYxRTM+Yyl0aGlzLmEuc3BsaWNlKGIsMSksYS5jbG9zZSgpO1ZhKHRoaXMudil9fTtrLnVjPWZ1bmN0aW9uKCl7T2EodGhpcy53LGZ1bmN0aW9uKGEsYil7cmV0dXJuXCJleHBpcmVkXCI9PWJ9KSYmdGhpcy5mKG5ldyBxKDYsNjAxNCkpO3RoaXMuSih0aGlzLncpfTtcclxuZnVuY3Rpb24gcWIoKXt2YXIgYT1bXSxiPVt7Y29udGVudFR5cGU6J3ZpZGVvL21wNDsgY29kZWNzPVwiYXZjMS40MkUwMUVcIid9XSxjPVt7dmlkZW9DYXBhYmlsaXRpZXM6YixwZXJzaXN0ZW50U3RhdGU6XCJyZXF1aXJlZFwiLHNlc3Npb25UeXBlczpbXCJwZXJzaXN0ZW50LWxpY2Vuc2VcIl19LHt2aWRlb0NhcGFiaWxpdGllczpifV0sZD17fTtcIm9yZy53My5jbGVhcmtleSBjb20ud2lkZXZpbmUuYWxwaGEgY29tLm1pY3Jvc29mdC5wbGF5cmVhZHkgY29tLmFwcGxlLmZwcy4yXzAgY29tLmFwcGxlLmZwcy4xXzAgY29tLmFwcGxlLmZwcyBjb20uYWRvYmUucHJpbWV0aW1lXCIuc3BsaXQoXCIgXCIpLmZvckVhY2goZnVuY3Rpb24oYil7dmFyIGY9bmF2aWdhdG9yLnJlcXVlc3RNZWRpYUtleVN5c3RlbUFjY2VzcyhiLGMpLnRoZW4oZnVuY3Rpb24oYSl7cmV0dXJuIGEuY3JlYXRlTWVkaWFLZXlzKCl9KS50aGVuKGZ1bmN0aW9uKGEpe3ZhciBjPSExO3RyeXthLmNyZWF0ZVNlc3Npb24oXCJwZXJzaXN0ZW50LWxpY2Vuc2VcIiksXHJcbmM9ITB9Y2F0Y2goZil7fWRbYl09e3BlcnNpc3RlbnRTdGF0ZTpjfX0sZnVuY3Rpb24oKXtkW2JdPW51bGx9KTthLnB1c2goZil9KTtyZXR1cm4gUHJvbWlzZS5hbGwoYSkudGhlbihmdW5jdGlvbigpe3JldHVybiBkfSl9O3ZhciByYj17fSxzYj17fTtsKFwic2hha2EubWVkaWEuTWFuaWZlc3RQYXJzZXIucmVnaXN0ZXJQYXJzZXJCeUV4dGVuc2lvblwiLGZ1bmN0aW9uKGEsYil7c2JbYV09Yn0pO2woXCJzaGFrYS5tZWRpYS5NYW5pZmVzdFBhcnNlci5yZWdpc3RlclBhcnNlckJ5TWltZVwiLGZ1bmN0aW9uKGEsYil7cmJbYV09Yn0pO2Z1bmN0aW9uIHRiKCl7dmFyIGE9e30sYjtmb3IoYiBpbiByYilhW2JdPSEwO2ZvcihiIGluIHNiKWFbYl09ITA7W1wiYXBwbGljYXRpb24vZGFzaCt4bWxcIixcImFwcGxpY2F0aW9uL3gtbXBlZ3VybFwiLFwiYXBwbGljYXRpb24vdm5kLmFwcGxlLm1wZWd1cmxcIixcImFwcGxpY2F0aW9uL3ZuZC5tcy1zc3RyK3htbFwiXS5mb3JFYWNoKGZ1bmN0aW9uKGIpe2FbYl09ISFyYltiXX0pO1tcIm1wZFwiLFwibTN1OFwiLFwiaXNtXCJdLmZvckVhY2goZnVuY3Rpb24oYil7YVtiXT0hIXNiW2JdfSk7cmV0dXJuIGF9XHJcbmZ1bmN0aW9uIHViKGEsYixjLGQpe3ZhciBlPWQ7ZXx8KGQ9KG5ldyBvYShhKSkuTy5zcGxpdChcIi9cIikucG9wKCkuc3BsaXQoXCIuXCIpLDE8ZC5sZW5ndGgmJihkPWQucG9wKCkudG9Mb3dlckNhc2UoKSxlPXNiW2RdKSk7aWYoZSlyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGUpO2M9SGEoW2FdLGMpO2MubWV0aG9kPVwiSEVBRFwiO3JldHVybiBiLnJlcXVlc3QoMCxjKS50aGVuKGZ1bmN0aW9uKGIpeyhiPWIuaGVhZGVyc1tcImNvbnRlbnQtdHlwZVwiXSkmJihiPWIudG9Mb3dlckNhc2UoKSk7cmV0dXJuKGU9cmJbYl0pP2U6UHJvbWlzZS5yZWplY3QobmV3IHEoNCw0RTMsYSkpfSxmdW5jdGlvbigpe3JldHVybiBQcm9taXNlLnJlamVjdChuZXcgcSg0LDRFMyxhKSl9KX07ZnVuY3Rpb24gdmIoYSxiKXt0aGlzLmc9RVtiXTt0aGlzLmM9YTt0aGlzLmg9MDt0aGlzLmY9SW5maW5pdHk7dGhpcy5hPXRoaXMuYj1udWxsfXZhciBFPXt9O2woXCJzaGFrYS5tZWRpYS5UZXh0RW5naW5lLnJlZ2lzdGVyUGFyc2VyXCIsZnVuY3Rpb24oYSxiKXtFW2FdPWJ9KTtsKFwic2hha2EubWVkaWEuVGV4dEVuZ2luZS51bnJlZ2lzdGVyUGFyc2VyXCIsZnVuY3Rpb24oYSl7ZGVsZXRlIEVbYV19KTtmdW5jdGlvbiB3YihhLGIsYyl7cmV0dXJuIGE+PWI/bnVsbDpuZXcgeGIoYSxiLGMpfWwoXCJzaGFrYS5tZWRpYS5UZXh0RW5naW5lLm1ha2VDdWVcIix3Yik7dmFyIHhiPXdpbmRvdy5WVFRDdWV8fHdpbmRvdy5UZXh0VHJhY2tDdWU7dmIucHJvdG90eXBlLm89ZnVuY3Rpb24oKXt0aGlzLmMmJnliKHRoaXMsZnVuY3Rpb24oKXtyZXR1cm4hMH0pO3RoaXMuYz10aGlzLmc9bnVsbDtyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCl9O1xyXG5mdW5jdGlvbiB6YihhLGIsYyxkKXt2YXIgZT1hLmg7cmV0dXJuIFByb21pc2UucmVzb2x2ZSgpLnRoZW4oZnVuY3Rpb24oKXt2YXIgYT10aGlzLmcoYixlLGMsZCk7aWYobnVsbCE9YyYmbnVsbCE9ZCl7Zm9yKHZhciBnPTA7ZzxhLmxlbmd0aCYmIShhW2ddLnN0YXJ0VGltZT49dGhpcy5mKTsrK2cpdGhpcy5jLmFkZEN1ZShhW2ddKTtudWxsPT10aGlzLmImJih0aGlzLmI9Yyk7dGhpcy5hPU1hdGgubWluKGQsdGhpcy5mKX19LmJpbmQoYSkpfVxyXG52Yi5wcm90b3R5cGUucmVtb3ZlPWZ1bmN0aW9uKGEsYil7cmV0dXJuIFByb21pc2UucmVzb2x2ZSgpLnRoZW4oZnVuY3Rpb24oKXt5Yih0aGlzLGZ1bmN0aW9uKGMpe3JldHVybiBjLnN0YXJ0VGltZT49Ynx8Yy5lbmRUaW1lPD1hPyExOiEwfSk7bnVsbD09dGhpcy5ifHxiPD10aGlzLmJ8fGE+PXRoaXMuYXx8KGE8PXRoaXMuYiYmYj49dGhpcy5hP3RoaXMuYj10aGlzLmE9bnVsbDphPD10aGlzLmImJmI8dGhpcy5hP3RoaXMuYj1iOmE+dGhpcy5iJiZiPj10aGlzLmEmJih0aGlzLmE9YSkpfS5iaW5kKHRoaXMpKX07ZnVuY3Rpb24gQWIoYSxiKXtyZXR1cm4gbnVsbD09YS5hfHxhLmE8Ynx8YjxhLmI/MDphLmEtYn1mdW5jdGlvbiB5YihhLGIpe2Zvcih2YXIgYz1hLmMuY3VlcyxkPVtdLGU9MDtlPGMubGVuZ3RoOysrZSliKGNbZV0pJiZkLnB1c2goY1tlXSk7Zm9yKGU9MDtlPGQubGVuZ3RoOysrZSlhLmMucmVtb3ZlQ3VlKGRbZV0pfTtmdW5jdGlvbiBCYihhLGIpe3ZhciBjPTA7aWYoIWF8fDE9PWEubGVuZ3RoJiYxRS02PmEuZW5kKDApLWEuc3RhcnQoMCkpcmV0dXJuIGM7Zm9yKHZhciBkPSExLGU9MDtlPGEubGVuZ3RoOysrZSlpZihiKzFFLTQ+PWEuc3RhcnQoZSkmJmI8YS5lbmQoZSkpYys9YS5lbmQoZSktYixkPSEwO2Vsc2UgaWYoZCYmLjA0Pj1hLnN0YXJ0KGUpLWEuZW5kKGUtMSkpYys9YS5lbmQoZSktYS5zdGFydChlKSxjKz1hLnN0YXJ0KGUpLWEuZW5kKGUtMSk7ZWxzZSBpZigwPGUmJmIrMUUtNDxhLnN0YXJ0KGUpJiZiKzFFLTQ+PWEuZW5kKGUtMSkpaWYoLjA0Pj1hLnN0YXJ0KGUpLWIpYys9YS5lbmQoZSktYixkPSEwO2Vsc2UgYnJlYWs7ZWxzZSBkPSExO3JldHVybiBjfTtmdW5jdGlvbiBDYihhLGIsYyl7dGhpcy5pPWE7dGhpcy5mPWI7dGhpcy5qPWM7dGhpcy5jPXt9O3RoaXMuYj1udWxsO3RoaXMuYT17fTt0aGlzLmc9bmV3IHo7dGhpcy5oPSExfVxyXG5mdW5jdGlvbiBEYigpe3ZhciBhPXt9Oyd2aWRlby9tcDQ7IGNvZGVjcz1cImF2YzEuNDJFMDFFXCIsYXVkaW8vbXA0OyBjb2RlY3M9XCJtcDRhLjQwLjJcIix2aWRlby93ZWJtOyBjb2RlY3M9XCJ2cDhcIix2aWRlby93ZWJtOyBjb2RlY3M9XCJ2cDlcIixhdWRpby93ZWJtOyBjb2RlY3M9XCJ2b3JiaXNcIixhdWRpby93ZWJtOyBjb2RlY3M9XCJvcHVzXCIsdmlkZW8vbXAydDsgY29kZWNzPVwiYXZjMS40MkUwMUVcIix2aWRlby9tcDJ0OyBjb2RlY3M9XCJtcDRhLjQwLjJcIix0ZXh0L3Z0dCxhcHBsaWNhdGlvbi9tcDQ7IGNvZGVjcz1cInd2dHRcIixhcHBsaWNhdGlvbi90dG1sK3htbCxhcHBsaWNhdGlvbi9tcDQ7IGNvZGVjcz1cInN0cHBcIicuc3BsaXQoXCIsXCIpLmZvckVhY2goZnVuY3Rpb24oYil7YVtiXT0hIUVbYl18fE1lZGlhU291cmNlLmlzVHlwZVN1cHBvcnRlZChiKTt2YXIgYz1iLnNwbGl0KFwiO1wiKVswXTthW2NdPWFbY118fGFbYl19KTtyZXR1cm4gYX1rPUNiLnByb3RvdHlwZTtcclxuay5vPWZ1bmN0aW9uKCl7dGhpcy5oPSEwO3ZhciBhPVtdLGI7Zm9yKGIgaW4gdGhpcy5hKXt2YXIgYz10aGlzLmFbYl0sZD1jWzBdO3RoaXMuYVtiXT1jLnNsaWNlKDAsMSk7ZCYmYS5wdXNoKGQucFtcImNhdGNoXCJdKHYpKTtmb3IoZD0xO2Q8Yy5sZW5ndGg7KytkKWNbZF0ucFtcImNhdGNoXCJdKHYpLGNbZF0ucC5yZWplY3QoKX10aGlzLmImJmEucHVzaCh0aGlzLmIubygpKTtyZXR1cm4gUHJvbWlzZS5hbGwoYSkudGhlbihmdW5jdGlvbigpe3RoaXMuZy5vKCk7dGhpcy5iPXRoaXMuaj10aGlzLmY9dGhpcy5pPXRoaXMuZz1udWxsO3RoaXMuYz17fTt0aGlzLmE9e319LmJpbmQodGhpcykpfTtcclxuay5pbml0PWZ1bmN0aW9uKGEpe2Zvcih2YXIgYiBpbiBhKXt2YXIgYz1hW2JdO1widGV4dFwiPT1iP3RoaXMuYj1uZXcgdmIodGhpcy5qLGMpOihjPXRoaXMuZi5hZGRTb3VyY2VCdWZmZXIoYyksQih0aGlzLmcsYyxcImVycm9yXCIsdGhpcy5SYy5iaW5kKHRoaXMsYikpLEIodGhpcy5nLGMsXCJ1cGRhdGVlbmRcIix0aGlzLkZhLmJpbmQodGhpcyxiKSksdGhpcy5jW2JdPWMsdGhpcy5hW2JdPVtdKX19O2Z1bmN0aW9uIEViKGEsYil7dmFyIGM7XCJ0ZXh0XCI9PWI/Yz1hLmIuYjooYz1GYihhLGIpLGM9IWN8fDE9PWMubGVuZ3RoJiYxRS02PmMuZW5kKDApLWMuc3RhcnQoMCk/bnVsbDpjLmxlbmd0aD9jLnN0YXJ0KDApOm51bGwpO3JldHVybiBjfWZ1bmN0aW9uIEdiKGEsYixjKXtcInRleHRcIj09Yj8oYj1BYihhLmIsYyksYnx8KGI9QWIoYS5iLGMrLjEpKSYmKGIrPS4xKSk6KGE9RmIoYSxiKSxiPUJiKGEsYyksYnx8KGI9QmIoYSxjKy4xKSkmJihiKz0uMSkpO3JldHVybiBifVxyXG5mdW5jdGlvbiBGYihhLGIpe3RyeXtyZXR1cm4gYS5jW2JdLmJ1ZmZlcmVkfWNhdGNoKGMpe3JldHVybiBudWxsfX1mdW5jdGlvbiBIYihhLGIsYyxkLGUpe3JldHVyblwidGV4dFwiPT1iP3piKGEuYixjLGQsZSk6SWIoYSxiLGEuUWMuYmluZChhLGIsYykpfWsucmVtb3ZlPWZ1bmN0aW9uKGEsYixjKXtyZXR1cm5cInRleHRcIj09YT90aGlzLmIucmVtb3ZlKGIsYyk6UHJvbWlzZS5hbGwoW0liKHRoaXMsYSx0aGlzLkFiLmJpbmQodGhpcyxhLGIsYykpLEliKHRoaXMsYSx0aGlzLmliLmJpbmQodGhpcyxhKSldKX07ay5jbGVhcj1mdW5jdGlvbihhKXtyZXR1cm5cInRleHRcIj09YT90aGlzLmIucmVtb3ZlKDAsSW5maW5pdHkpOkliKHRoaXMsYSx0aGlzLkFiLmJpbmQodGhpcyxhLDAsdGhpcy5mLmR1cmF0aW9uKSl9O2Z1bmN0aW9uIEpiKGEsYixjKXtyZXR1cm5cInRleHRcIj09Yj8oYS5iLmg9YyxQcm9taXNlLnJlc29sdmUoKSk6SWIoYSxiLGEuR2MuYmluZChhLGIsYykpfVxyXG5mdW5jdGlvbiBLYihhLGIsYyl7cmV0dXJuXCJ0ZXh0XCI9PWI/KGEuYi5mPWMsUHJvbWlzZS5yZXNvbHZlKCkpOlByb21pc2UuYWxsKFtJYihhLGIsYS5pYi5iaW5kKGEsYikpLEliKGEsYixhLkVjLmJpbmQoYSxiLGMpKV0pfWsuZW5kT2ZTdHJlYW09ZnVuY3Rpb24oYSl7cmV0dXJuIExiKHRoaXMsZnVuY3Rpb24oKXthP3RoaXMuZi5lbmRPZlN0cmVhbShhKTp0aGlzLmYuZW5kT2ZTdHJlYW0oKX0uYmluZCh0aGlzKSl9O2suemE9ZnVuY3Rpb24oYSl7cmV0dXJuIExiKHRoaXMsZnVuY3Rpb24oKXt0aGlzLmYuZHVyYXRpb249YX0uYmluZCh0aGlzKSl9O2suWj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmYuZHVyYXRpb259O2suUWM9ZnVuY3Rpb24oYSxiKXt0aGlzLmNbYV0uYXBwZW5kQnVmZmVyKGIpfTtrLkFiPWZ1bmN0aW9uKGEsYixjKXtjPD1iP3RoaXMuRmEoYSk6dGhpcy5jW2FdLnJlbW92ZShiLGMpfTtcclxuay5pYj1mdW5jdGlvbihhKXt2YXIgYj10aGlzLmNbYV0uYXBwZW5kV2luZG93RW5kO3RoaXMuY1thXS5hYm9ydCgpO3RoaXMuY1thXS5hcHBlbmRXaW5kb3dFbmQ9Yjt0aGlzLkZhKGEpfTtrLkdjPWZ1bmN0aW9uKGEsYil7dGhpcy5jW2FdLnRpbWVzdGFtcE9mZnNldD1iO3RoaXMuRmEoYSl9O2suRWM9ZnVuY3Rpb24oYSxiKXt0aGlzLmNbYV0uYXBwZW5kV2luZG93RW5kPWIrLjA0O3RoaXMuRmEoYSl9O2suUmM9ZnVuY3Rpb24oYSl7dGhpcy5hW2FdWzBdLnAucmVqZWN0KG5ldyBxKDMsMzAxNCx0aGlzLmkuZXJyb3I/dGhpcy5pLmVycm9yLmNvZGU6MCkpfTtrLkZhPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuYVthXVswXTtiJiYoYi5wLnJlc29sdmUoKSxNYih0aGlzLGEpKX07XHJcbmZ1bmN0aW9uIEliKGEsYixjKXtpZihhLmgpcmV0dXJuIFByb21pc2UucmVqZWN0KCk7Yz17c3RhcnQ6YyxwOm5ldyB3fTthLmFbYl0ucHVzaChjKTtpZigxPT1hLmFbYl0ubGVuZ3RoKXRyeXtjLnN0YXJ0KCl9Y2F0Y2goZCl7XCJRdW90YUV4Y2VlZGVkRXJyb3JcIj09ZC5uYW1lP2MucC5yZWplY3QobmV3IHEoMywzMDE3LGIpKTpjLnAucmVqZWN0KG5ldyBxKDMsMzAxNSxkKSksTWIoYSxiKX1yZXR1cm4gYy5wfVxyXG5mdW5jdGlvbiBMYihhLGIpe2lmKGEuaClyZXR1cm4gUHJvbWlzZS5yZWplY3QoKTt2YXIgYz1bXSxkO2ZvcihkIGluIGEuYyl7dmFyIGU9bmV3IHcsZj17c3RhcnQ6ZnVuY3Rpb24oYSl7YS5yZXNvbHZlKCl9LmJpbmQobnVsbCxlKSxwOmV9O2EuYVtkXS5wdXNoKGYpO2MucHVzaChlKTsxPT1hLmFbZF0ubGVuZ3RoJiZmLnN0YXJ0KCl9cmV0dXJuIFByb21pc2UuYWxsKGMpLnRoZW4oZnVuY3Rpb24oKXt2YXIgYSxjO3RyeXtiKCl9Y2F0Y2goZCl7Yz1Qcm9taXNlLnJlamVjdChuZXcgcSgzLDMwMTUsZCkpfWZvcihhIGluIHRoaXMuYylNYih0aGlzLGEpO3JldHVybiBjfS5iaW5kKGEpLGZ1bmN0aW9uKCl7cmV0dXJuIFByb21pc2UucmVqZWN0KCl9LmJpbmQoYSkpfWZ1bmN0aW9uIE1iKGEsYil7YS5hW2JdLnNoaWZ0KCk7dmFyIGM9YS5hW2JdWzBdO2lmKGMpdHJ5e2Muc3RhcnQoKX1jYXRjaChkKXtjLnAucmVqZWN0KG5ldyBxKDMsMzAxNSxkKSksTWIoYSxiKX19O2Z1bmN0aW9uIEYoYSxiKXt0aGlzLmo9YTt0aGlzLmk9Yjt0aGlzLmM9dGhpcy5hPUluZmluaXR5O3RoaXMuYj0xO3RoaXMuaD10aGlzLmY9MDt0aGlzLmc9ITB9bChcInNoYWthLm1lZGlhLlByZXNlbnRhdGlvblRpbWVsaW5lXCIsRik7Ri5wcm90b3R5cGUuWj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmF9O0YucHJvdG90eXBlLmdldER1cmF0aW9uPUYucHJvdG90eXBlLlo7Ri5wcm90b3R5cGUuemE9ZnVuY3Rpb24oYSl7dGhpcy5hPWF9O0YucHJvdG90eXBlLnNldER1cmF0aW9uPUYucHJvdG90eXBlLnphO0YucHJvdG90eXBlLkViPWZ1bmN0aW9uKGEpe3RoaXMuaD1hfTtGLnByb3RvdHlwZS5zZXRDbG9ja09mZnNldD1GLnByb3RvdHlwZS5FYjtGLnByb3RvdHlwZS5IYj1mdW5jdGlvbihhKXt0aGlzLmc9YX07Ri5wcm90b3R5cGUuc2V0U3RhdGljPUYucHJvdG90eXBlLkhiO0YucHJvdG90eXBlLlViPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY307XHJcbkYucHJvdG90eXBlLmdldFNlZ21lbnRBdmFpbGFiaWxpdHlEdXJhdGlvbj1GLnByb3RvdHlwZS5VYjtGLnByb3RvdHlwZS5HYj1mdW5jdGlvbihhKXt0aGlzLmM9YX07Ri5wcm90b3R5cGUuc2V0U2VnbWVudEF2YWlsYWJpbGl0eUR1cmF0aW9uPUYucHJvdG90eXBlLkdiO0YucHJvdG90eXBlLkVhPWZ1bmN0aW9uKGEsYil7Yi5sZW5ndGgmJih0aGlzLmI9Yi5yZWR1Y2UoZnVuY3Rpb24oYSxiKXtyZXR1cm4gTWF0aC5tYXgoYSxiLmVuZFRpbWUtYi5zdGFydFRpbWUpfSx0aGlzLmIpLGF8fCh0aGlzLmY9TWF0aC5tYXgodGhpcy5mLGJbMF0uc3RhcnRUaW1lKSkpfTtGLnByb3RvdHlwZS5ub3RpZnlTZWdtZW50cz1GLnByb3RvdHlwZS5FYTtGLnByb3RvdHlwZS5YYT1mdW5jdGlvbihhKXt0aGlzLmI9TWF0aC5tYXgodGhpcy5iLGEpfTtGLnByb3RvdHlwZS5ub3RpZnlNYXhTZWdtZW50RHVyYXRpb249Ri5wcm90b3R5cGUuWGE7XHJcbkYucHJvdG90eXBlLlU9ZnVuY3Rpb24oKXtyZXR1cm4gSW5maW5pdHk9PXRoaXMuYSYmIXRoaXMuZ307Ri5wcm90b3R5cGUuaXNMaXZlPUYucHJvdG90eXBlLlU7Ri5wcm90b3R5cGUuZ2E9ZnVuY3Rpb24oKXtyZXR1cm4gSW5maW5pdHkhPXRoaXMuYSYmIXRoaXMuZ307Ri5wcm90b3R5cGUuaXNJblByb2dyZXNzPUYucHJvdG90eXBlLmdhO0YucHJvdG90eXBlLnJhPWZ1bmN0aW9uKCl7cmV0dXJuIE1hdGgubWF4KE1hdGgubWluKHRoaXMuZix0aGlzLmZhKCkpLHRoaXMuc2EoKSl9O0YucHJvdG90eXBlLmdldEVhcmxpZXN0U3RhcnQ9Ri5wcm90b3R5cGUucmE7Ri5wcm90b3R5cGUuc2E9ZnVuY3Rpb24oKXtyZXR1cm4gSW5maW5pdHk9PXRoaXMuYz8wOk1hdGgubWF4KDAsdGhpcy5mYSgpLXRoaXMuYy10aGlzLmkpfTtGLnByb3RvdHlwZS5nZXRTZWdtZW50QXZhaWxhYmlsaXR5U3RhcnQ9Ri5wcm90b3R5cGUuc2E7XHJcbkYucHJvdG90eXBlLmZhPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuVSgpfHx0aGlzLmdhKCk/TWF0aC5taW4oTWF0aC5tYXgoMCwoRGF0ZS5ub3coKSt0aGlzLmgpLzFFMy10aGlzLmItdGhpcy5qKSx0aGlzLmEpOnRoaXMuYX07Ri5wcm90b3R5cGUuZ2V0U2VnbWVudEF2YWlsYWJpbGl0eUVuZD1GLnByb3RvdHlwZS5mYTtGLnByb3RvdHlwZS5UYT1mdW5jdGlvbigpe3JldHVybiBNYXRoLm1heCgwLHRoaXMuZmEoKS0odGhpcy5VKCl8fHRoaXMuZ2EoKT90aGlzLmk6MCkpfTtGLnByb3RvdHlwZS5nZXRTZWVrUmFuZ2VFbmQ9Ri5wcm90b3R5cGUuVGE7ZnVuY3Rpb24gTmIoYSxiLGMsZCxlLGYpe3RoaXMuYT1hO3RoaXMuYz1iO3RoaXMuaT1jO3RoaXMubT1kO3RoaXMuaj1lO3RoaXMubD1mO3RoaXMuYj1uZXcgejt0aGlzLmg9ITE7dGhpcy5nPTE7dGhpcy5mPW51bGw7MDxhLnJlYWR5U3RhdGU/dGhpcy5yYigpOkIodGhpcy5iLGEsXCJsb2FkZWRtZXRhZGF0YVwiLHRoaXMucmIuYmluZCh0aGlzKSk7Qih0aGlzLmIsYSxcInJhdGVjaGFuZ2VcIix0aGlzLmljLmJpbmQodGhpcykpfWs9TmIucHJvdG90eXBlO2subz1mdW5jdGlvbigpe3ZhciBhPXRoaXMuYi5vKCk7dGhpcy5iPW51bGw7bnVsbCE9dGhpcy5mJiYod2luZG93LmNsZWFySW50ZXJ2YWwodGhpcy5mKSx0aGlzLmY9bnVsbCk7dGhpcy5sPXRoaXMuaj10aGlzLmM9dGhpcy5hPW51bGw7cmV0dXJuIGF9O2Z1bmN0aW9uIE9iKGEpe3JldHVybiAwPGEuYS5yZWFkeVN0YXRlP1BiKGEsYS5hLmN1cnJlbnRUaW1lKTpRYihhKX1cclxuZnVuY3Rpb24gUWIoYSl7cmV0dXJuIGEubT9QYihhLGEubSk6SW5maW5pdHk+YS5jLlooKT9hLmMucmEoKTpNYXRoLm1heChhLmMuVGEoKSxhLmMucmEoKSl9ZnVuY3Rpb24gUmIoYSxiKXtiIT1hLmgmJihhLmg9YixTYihhLGEuZyksYS5qKGIpKX1rLlNhPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ307ZnVuY3Rpb24gU2IoYSxiKXtudWxsIT1hLmYmJih3aW5kb3cuY2xlYXJJbnRlcnZhbChhLmYpLGEuZj1udWxsKTthLmc9YjthLmEucGxheWJhY2tSYXRlPWEuaHx8MD5iPzA6YjshYS5oJiYwPmImJihhLmY9d2luZG93LnNldEludGVydmFsKGZ1bmN0aW9uKCl7dGhpcy5hLmN1cnJlbnRUaW1lKz1iLzR9LmJpbmQoYSksMjUwKSl9ay5pYz1mdW5jdGlvbigpe3RoaXMuYS5wbGF5YmFja1JhdGUhPSh0aGlzLmh8fDA+dGhpcy5nPzA6dGhpcy5nKSYmU2IodGhpcyx0aGlzLmEucGxheWJhY2tSYXRlKX07XHJcbmsucmI9ZnVuY3Rpb24oKXt0aGlzLmIua2EodGhpcy5hLFwibG9hZGVkbWV0YWRhdGFcIik7dmFyIGE9UWIodGhpcyk7LjAwMT5NYXRoLmFicyh0aGlzLmEuY3VycmVudFRpbWUtYSk/KEIodGhpcy5iLHRoaXMuYSxcInNlZWtpbmdcIix0aGlzLnRiLmJpbmQodGhpcykpLEIodGhpcy5iLHRoaXMuYSxcInBsYXlpbmdcIix0aGlzLnNiLmJpbmQodGhpcykpKTooQih0aGlzLmIsdGhpcy5hLFwic2Vla2luZ1wiLHRoaXMua2MuYmluZCh0aGlzKSksdGhpcy5hLmN1cnJlbnRUaW1lPWEpfTtrLmtjPWZ1bmN0aW9uKCl7dGhpcy5iLmthKHRoaXMuYSxcInNlZWtpbmdcIik7Qih0aGlzLmIsdGhpcy5hLFwic2Vla2luZ1wiLHRoaXMudGIuYmluZCh0aGlzKSk7Qih0aGlzLmIsdGhpcy5hLFwicGxheWluZ1wiLHRoaXMuc2IuYmluZCh0aGlzKSl9O2sudGI9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmEuY3VycmVudFRpbWUsYj1UYih0aGlzLGEpOy4wMDE8TWF0aC5hYnMoYi1hKT9VYih0aGlzLGEsYik6dGhpcy5sKCl9O1xyXG5rLnNiPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5hLmN1cnJlbnRUaW1lLGI9VGIodGhpcyxhKTsuMDAxPE1hdGguYWJzKGItYSkmJlViKHRoaXMsYSxiKX07ZnVuY3Rpb24gVGIoYSxiKXt2YXIgYz1hLmMsZD1jLnJhKCksZT1jLmZhKCk7aWYoIWMuVSgpfHxJbmZpbml0eT09Yy5jKXJldHVybiBiPGQ/ZDpiPmU/ZTpiO2M9ZCsxO2Q9YythLmk7cmV0dXJuIGI+PWQmJmI8PWV8fEJiKGEuYS5idWZmZXJlZCxiKSYmYj49YyYmYjw9ZT9iOmI+ZT9lOmU8ZCYmYj49YyYmYjw9ZT9iOk1hdGgubWluKGQrMixlKX1mdW5jdGlvbiBVYihhLGIsYyl7YS5hLmN1cnJlbnRUaW1lPWM7dmFyIGQ9MCxlPWZ1bmN0aW9uKCl7IXRoaXMuYXx8MTA8PWQrK3x8dGhpcy5hLmN1cnJlbnRUaW1lIT1ifHwodGhpcy5hLmN1cnJlbnRUaW1lPWMsc2V0VGltZW91dChlLDEwMCkpfS5iaW5kKGEpO3NldFRpbWVvdXQoZSwxMDApfVxyXG5mdW5jdGlvbiBQYihhLGIpe3ZhciBjPWEuYy5yYSgpO2lmKGI8YylyZXR1cm4gYztjPWEuYy5mYSgpO3JldHVybiBiPmM/YzpifTtmdW5jdGlvbiBWYihhLGIsYyl7dGhpcy5hPWE7dGhpcy5MPWI7dGhpcy5EPWN9bChcInNoYWthLm1lZGlhLkluaXRTZWdtZW50UmVmZXJlbmNlXCIsVmIpO2Z1bmN0aW9uIEcoYSxiLGMsZCxlLGYpe3RoaXMucG9zaXRpb249YTt0aGlzLnN0YXJ0VGltZT1iO3RoaXMuZW5kVGltZT1jO3RoaXMuYT1kO3RoaXMuTD1lO3RoaXMuRD1mfWwoXCJzaGFrYS5tZWRpYS5TZWdtZW50UmVmZXJlbmNlXCIsRyk7ZnVuY3Rpb24gV2IoYSxiLGMsZCxlLGYsZyxoLG0pe3RoaXMuaT1hO3RoaXMuYz1iO3RoaXMuUz1jO3RoaXMuYT1kO3RoaXMuSj1lO3RoaXMudz1mO3RoaXMubD1nO3RoaXMuQT1ofHxudWxsO3RoaXMuQz1tfHxudWxsO3RoaXMuZz1udWxsO3RoaXMuaj0xO3RoaXMuRz1Qcm9taXNlLnJlc29sdmUoKTt0aGlzLmg9W107dGhpcy5tPXt9O3RoaXMuYj17fTt0aGlzLmY9dGhpcy5zPXRoaXMudj0hMX1XYi5wcm90b3R5cGUubz1mdW5jdGlvbigpe2Zvcih2YXIgYSBpbiB0aGlzLmIpWGIodGhpcy5iW2FdKTt0aGlzLmc9dGhpcy5iPXRoaXMubT10aGlzLmg9dGhpcy5DPXRoaXMuQT10aGlzLmw9dGhpcy53PXRoaXMuSj10aGlzLkc9dGhpcy5hPXRoaXMuUz10aGlzLmM9dGhpcy5pPW51bGw7dGhpcy5mPSEwO3JldHVybiBQcm9taXNlLnJlc29sdmUoKX07XHJcbldiLnByb3RvdHlwZS5jb25maWd1cmU9ZnVuY3Rpb24oYSl7dGhpcy5nPWE7dGhpcy5pLmk9dGhpcy5qKk1hdGgubWF4KHRoaXMuYS5taW5CdWZmZXJUaW1lfHwwLHRoaXMuZy5yZWJ1ZmZlcmluZ0dvYWwpfTtXYi5wcm90b3R5cGUuaW5pdD1mdW5jdGlvbigpe3ZhciBhPXRoaXMuSih0aGlzLmEucGVyaW9kc1tZYih0aGlzLE9iKHRoaXMuaSkpXSk7cmV0dXJuIE1hKGEpP1Byb21pc2UucmVqZWN0KG5ldyBxKDUsNTAwNSkpOlpiKHRoaXMsYSkudGhlbihmdW5jdGlvbigpe3RoaXMuQSYmdGhpcy5BKCl9LmJpbmQodGhpcykpfTtmdW5jdGlvbiAkYihhKXtyZXR1cm4gYS5hLnBlcmlvZHNbWWIoYSxPYihhLmkpKV19ZnVuY3Rpb24gYWMoYSl7cmV0dXJuIE5hKGEuYixmdW5jdGlvbihhKXtyZXR1cm4gYS5zdHJlYW19KX1mdW5jdGlvbiBiYyhhLGIpe3ZhciBjPXt9O2MudGV4dD1iO3JldHVybiBaYihhLGMpfVxyXG5mdW5jdGlvbiBjYyhhLGIsYyxkKXt2YXIgZT1hLmJbYl07IWUmJlwidGV4dFwiPT1iJiZhLmcuaWdub3JlVGV4dFN0cmVhbUZhaWx1cmVzP2JjKGEsYyk6ZSYmKGI9YS5oW2RjKGEsYyldKSYmYi54YSYmKGI9YS5tW2MuaWRdKSYmYi54YSYmZS5zdHJlYW0hPWMmJihlLnN0cmVhbT1jLGUuTGE9ITAsdm9pZCAwPT1kfHxlLmNhfHxlLmRhfHwoZS5oYT9lYyhlLGQpOihYYihlKSxmYyhhLGUsZCkpKSl9ZnVuY3Rpb24gZWMoYSxiKXthLmNhP2EuS2E9TWF0aC5taW4oYS5LYSxiKTooYS5jYT0hMCxhLkthPWIpfVxyXG5mdW5jdGlvbiBaYihhLGIpe3ZhciBjPVliKGEsT2IoYS5pKSksZD1OYShiLGZ1bmN0aW9uKGEpe3JldHVybiBhLm1pbWVUeXBlKyhhLmNvZGVjcz8nOyBjb2RlY3M9XCInK2EuY29kZWNzKydcIic6XCJcIil9KTthLmMuaW5pdChkKTtnYyhhKTtkPUMoYik7cmV0dXJuIGhjKGEsZCkudGhlbihmdW5jdGlvbigpe2lmKCF0aGlzLmYpZm9yKHZhciBhIGluIGIpe3ZhciBkPWJbYV07dGhpcy5iW2FdfHwodGhpcy5iW2FdPXtzdHJlYW06ZCx0eXBlOmEsdGE6bnVsbCxWOm51bGwsTGE6ITAsdmE6ITEsTWE6YyxlbmRPZlN0cmVhbTohMSxoYTohMSxiYTpudWxsLGNhOiExLEthOjAsZGE6ITEsYWI6ITF9LGljKHRoaXMsdGhpcy5iW2FdLDApKX19LmJpbmQoYSkpfVxyXG5mdW5jdGlvbiBqYyhhLGIpe3ZhciBjPWEuaFtiXTtpZihjKXJldHVybiBjLkk7Yz17STpuZXcgdyx4YTohMX07YS5oW2JdPWM7dmFyIGQ9YS5hLnBlcmlvZHNbYl0uc3RyZWFtU2V0cy5tYXAoZnVuY3Rpb24oYSl7cmV0dXJuIGEuc3RyZWFtc30pLnJlZHVjZSh0LFtdKTthLkc9YS5HLnRoZW4oZnVuY3Rpb24oKXtpZighdGhpcy5mKXJldHVybiBoYyh0aGlzLGQpfS5iaW5kKGEpKS50aGVuKGZ1bmN0aW9uKCl7dGhpcy5mfHwodGhpcy5oW2JdLkkucmVzb2x2ZSgpLHRoaXMuaFtiXS54YT0hMCl9LmJpbmQoYSkpW1wiY2F0Y2hcIl0oZnVuY3Rpb24oYSl7dGhpcy5mfHwodGhpcy5oW2JdLkkucmVqZWN0KCksZGVsZXRlIHRoaXMuaFtiXSx0aGlzLmwoYSkpfS5iaW5kKGEpKTtyZXR1cm4gYy5JfVxyXG5mdW5jdGlvbiBoYyhhLGIpe2Zvcih2YXIgYz1bXSxkPTA7ZDxiLmxlbmd0aDsrK2Qpe3ZhciBlPWJbZF0sZj1hLm1bZS5pZF07Zj9jLnB1c2goZi5JKTooYS5tW2UuaWRdPXtJOm5ldyB3LHhhOiExfSxjLnB1c2goZS5jcmVhdGVTZWdtZW50SW5kZXgoKSkpfXJldHVybiBQcm9taXNlLmFsbChjKS50aGVuKGZ1bmN0aW9uKCl7aWYoIXRoaXMuZilmb3IodmFyIGE9MDthPGIubGVuZ3RoOysrYSl7dmFyIGM9dGhpcy5tW2JbYV0uaWRdO2MueGF8fChjLkkucmVzb2x2ZSgpLGMueGE9ITApfX0uYmluZChhKSlbXCJjYXRjaFwiXShmdW5jdGlvbihhKXtpZighdGhpcy5mKXJldHVybiB0aGlzLm1bZS5pZF0uSS5yZWplY3QoKSxkZWxldGUgdGhpcy5tW2UuaWRdLFByb21pc2UucmVqZWN0KGEpfS5iaW5kKGEpKX1mdW5jdGlvbiBnYyhhKXt2YXIgYj1hLmEucHJlc2VudGF0aW9uVGltZWxpbmUuWigpO0luZmluaXR5PmI/YS5jLnphKGIpOmEuYy56YShNYXRoLnBvdygyLDMyKSl9XHJcbldiLnByb3RvdHlwZS5YPWZ1bmN0aW9uKGEpe2lmKCF0aGlzLmYmJiFhLmhhJiZudWxsIT1hLmJhJiYhYS5kYSlpZihhLmJhPW51bGwsYS5jYSlmYyh0aGlzLGEsYS5LYSk7ZWxzZXt0cnl7dmFyIGI9a2ModGhpcyxhKTtudWxsIT1iJiZpYyh0aGlzLGEsYil9Y2F0Y2goYyl7dGhpcy5sKGMpO3JldHVybn1iPUModGhpcy5iKTtSYih0aGlzLmksYi5zb21lKGZ1bmN0aW9uKGEpe3JldHVybiBhLnZhfSkpO2xjKHRoaXMsYSk7Yi5ldmVyeShmdW5jdGlvbihhKXtyZXR1cm4gYS5lbmRPZlN0cmVhbX0pJiZ0aGlzLmMuZW5kT2ZTdHJlYW0oKX19O1xyXG5mdW5jdGlvbiBrYyhhLGIpe3ZhciBjPU9iKGEuaSksZDtkPWEuYzt2YXIgZT1iLnR5cGU7XCJ0ZXh0XCI9PWU/ZD1kLmIuYTooZD1GYihkLGUpLGQ9IWR8fDE9PWQubGVuZ3RoJiYxRS02PmQuZW5kKDApLWQuc3RhcnQoMCk/bnVsbDpkLmxlbmd0aD9kLmVuZChkLmxlbmd0aC0xKTpudWxsKTt2YXIgZj1iLnRhJiZiLlY/YS5hLnBlcmlvZHNbZGMoYSxiLnRhKV0uc3RhcnRUaW1lK2IuVi5lbmRUaW1lOmMsZT1ZYihhLGYpLGc9YS5hLnBlcmlvZHNbZV0saD1tYyhhLGIsYyxkLGUpLGg9aD9nLnN0YXJ0VGltZStoLnN0YXJ0VGltZS1jOkdiKGEuYyxiLnR5cGUsYyksZz1hLmoqTWF0aC5tYXgoYS5hLm1pbkJ1ZmZlclRpbWV8fDAsYS5nLnJlYnVmZmVyaW5nR29hbCk7aWYoaD49TWF0aC5tYXgoZyxhLmoqYS5nLmJ1ZmZlcmluZ0dvYWwpKXJldHVybiBiLnZhPSExLC41O2lmKGY+PWEuYS5wcmVzZW50YXRpb25UaW1lbGluZS5aKCkpcmV0dXJuIGIudmE9ITEsYi5lbmRPZlN0cmVhbT0hMCxudWxsO1xyXG5iLmVuZE9mU3RyZWFtPSExOyFhLnYmJmg8Z3x8MT49aD9iLnZhPSEwOmg+PWcmJihiLnZhPSExKTtmPWRjKGEsYi5zdHJlYW0pO2lmKGUhPWYpcmV0dXJuIGIuTWE9ZSxudWxsO2g9bWMoYSxiLGMsZCxmKTtpZighaClyZXR1cm4gMTtuYyhhLGIsYyxmLGgpO3JldHVybiBudWxsfVxyXG5mdW5jdGlvbiBtYyhhLGIsYyxkLGUpe2lmKGIuViYmYi5zdHJlYW09PWIudGEpcmV0dXJuIGM9Yi5WLnBvc2l0aW9uKzEsb2MoYSxiLGUsYyk7Yz1iLlY/Yi5zdHJlYW0uZmluZFNlZ21lbnRQb3NpdGlvbihNYXRoLm1heCgwLGEuYS5wZXJpb2RzW2RjKGEsYi50YSldLnN0YXJ0VGltZStiLlYuZW5kVGltZS1hLmEucGVyaW9kc1tlXS5zdGFydFRpbWUpKTpiLnN0cmVhbS5maW5kU2VnbWVudFBvc2l0aW9uKE1hdGgubWF4KDAsKGR8fGMpLWEuYS5wZXJpb2RzW2VdLnN0YXJ0VGltZSkpO2lmKG51bGw9PWMpcmV0dXJuIG51bGw7dmFyIGY9bnVsbDtudWxsPT1kJiYoZj1vYyhhLGIsZSxNYXRoLm1heCgwLGMtMSkpKTtyZXR1cm4gZnx8b2MoYSxiLGUsYyl9XHJcbmZ1bmN0aW9uIG9jKGEsYixjLGQpe2M9YS5hLnBlcmlvZHNbY107Yj1iLnN0cmVhbS5nZXRTZWdtZW50UmVmZXJlbmNlKGQpO2lmKCFiKXJldHVybiBudWxsO2E9YS5hLnByZXNlbnRhdGlvblRpbWVsaW5lO2Q9YS5mYSgpO3JldHVybiBjLnN0YXJ0VGltZStiLmVuZFRpbWU8YS5zYSgpfHxjLnN0YXJ0VGltZStiLnN0YXJ0VGltZT5kP251bGw6Yn1cclxuZnVuY3Rpb24gbmMoYSxiLGMsZCxlKXt2YXIgZj1hLmEucGVyaW9kc1tkXSxnPWIuc3RyZWFtLGg9YS5hLnBlcmlvZHNbZCsxXSxtPW51bGwsbT1oP2guc3RhcnRUaW1lOmEuYS5wcmVzZW50YXRpb25UaW1lbGluZS5aKCk7ZD1wYyhhLGIsZCxtKTtiLmhhPSEwO2IuTGE9ITE7aD1xYyhhLGUpO1Byb21pc2UuYWxsKFtkLGhdKS50aGVuKGZ1bmN0aW9uKGEpe2lmKCF0aGlzLmYmJiF0aGlzLnMpcmV0dXJuIHJjKHRoaXMsYixjLGYsZyxlLGFbMV0pfS5iaW5kKGEpKS50aGVuKGZ1bmN0aW9uKCl7dGhpcy5mfHx0aGlzLnN8fChiLmhhPSExLGIuYWI9ITEsaWModGhpcyxiLDApLHNjKHRoaXMsZykpfS5iaW5kKGEpKVtcImNhdGNoXCJdKGZ1bmN0aW9uKGEpe3RoaXMuZnx8dGhpcy5zfHwoYi5oYT0hMSwxMDAxPT1hLmNvZGV8fDEwMDI9PWEuY29kZXx8MTAwMz09YS5jb2RlP1widGV4dFwiPT1iLnR5cGUmJnRoaXMuZy5pZ25vcmVUZXh0U3RyZWFtRmFpbHVyZXMmJjEwMDE9PWEuY29kZT9kZWxldGUgdGhpcy5iLnRleHQ6XHJcbih0aGlzLmwoYSksaWModGhpcyxiLDQpKTozMDE3PT1hLmNvZGU/dGModGhpcyxiLGEpOnRoaXMubChhKSl9LmJpbmQoYSkpfWZ1bmN0aW9uIHRjKGEsYixjKXtpZighQyhhLmIpLnNvbWUoZnVuY3Rpb24oYSl7cmV0dXJuIGEhPWImJmEuYWJ9KSl7dmFyIGQ9TWF0aC5yb3VuZCgxMDAqYS5qKTtpZigyMDxkKWEuai09LjI7ZWxzZSBpZig0PGQpYS5qLT0uMDQ7ZWxzZXthLnM9ITA7YS5sKGMpO3JldHVybn1iLmFiPSEwfWljKGEsYixiLnZhPzA6NCl9XHJcbmZ1bmN0aW9uIHBjKGEsYixjLGQpe2lmKCFiLkxhKXJldHVybiBQcm9taXNlLnJlc29sdmUoKTtjPUpiKGEuYyxiLnR5cGUsYS5hLnBlcmlvZHNbY10uc3RhcnRUaW1lLWIuc3RyZWFtLnByZXNlbnRhdGlvblRpbWVPZmZzZXQpO2Q9bnVsbCE9ZD9LYihhLmMsYi50eXBlLGQpOlByb21pc2UucmVzb2x2ZSgpO2lmKCFiLnN0cmVhbS5pbml0U2VnbWVudFJlZmVyZW5jZSlyZXR1cm4gUHJvbWlzZS5hbGwoW2MsZF0pO2E9cWMoYSxiLnN0cmVhbS5pbml0U2VnbWVudFJlZmVyZW5jZSkudGhlbihmdW5jdGlvbihhKXtpZighdGhpcy5mKXJldHVybiBIYih0aGlzLmMsYi50eXBlLGEsbnVsbCxudWxsKX0uYmluZChhKSlbXCJjYXRjaFwiXShmdW5jdGlvbihhKXtiLkxhPSEwO3JldHVybiBQcm9taXNlLnJlamVjdChhKX0pO3JldHVybiBQcm9taXNlLmFsbChbYyxkLGFdKX1cclxuZnVuY3Rpb24gcmMoYSxiLGMsZCxlLGYsZyl7cmV0dXJuIHVjKGEsYixjKS50aGVuKGZ1bmN0aW9uKCl7aWYoIXRoaXMuZilyZXR1cm4gSGIodGhpcy5jLGIudHlwZSxnLGYuc3RhcnRUaW1lK2Quc3RhcnRUaW1lLGYuZW5kVGltZStkLnN0YXJ0VGltZSl9LmJpbmQoYSkpLnRoZW4oZnVuY3Rpb24oKXtpZighdGhpcy5mKXJldHVybiBiLnRhPWUsYi5WPWYsUHJvbWlzZS5yZXNvbHZlKCl9LmJpbmQoYSkpfWZ1bmN0aW9uIHVjKGEsYixjKXt2YXIgZD1FYihhLmMsYi50eXBlKTtpZihudWxsPT1kKXJldHVybiBQcm9taXNlLnJlc29sdmUoKTtjPWMtZC1hLmcuYnVmZmVyQmVoaW5kO3JldHVybiAwPj1jP1Byb21pc2UucmVzb2x2ZSgpOmEuYy5yZW1vdmUoYi50eXBlLGQsZCtjKS50aGVuKGZ1bmN0aW9uKCl7fS5iaW5kKGEpKX1cclxuZnVuY3Rpb24gc2MoYSxiKXtpZighYS52JiYoYS52PUMoYS5iKS5ldmVyeShmdW5jdGlvbihhKXtyZXR1cm4hYS5jYSYmIWEuZGEmJmEuVn0pLGEudikpe3ZhciBjPWRjKGEsYik7YS5oW2NdfHxqYyhhLGMpLnRoZW4oZnVuY3Rpb24oKXt0aGlzLncoKX0uYmluZChhKSlbXCJjYXRjaFwiXSh2KTtmb3IoYz0wO2M8YS5hLnBlcmlvZHMubGVuZ3RoOysrYylqYyhhLGMpW1wiY2F0Y2hcIl0odik7YS5DJiZhLkMoKX19XHJcbmZ1bmN0aW9uIGxjKGEsYil7aWYoYi5NYSE9ZGMoYSxiLnN0cmVhbSkpe3ZhciBjPWIuTWEsZD1DKGEuYik7ZC5ldmVyeShmdW5jdGlvbihhKXtyZXR1cm4gYS5NYT09Y30pJiZkLmV2ZXJ5KHZjKSYmamMoYSxjKS50aGVuKGZ1bmN0aW9uKCl7aWYoIXRoaXMuZil7dmFyIGE9dGhpcy5KKHRoaXMuYS5wZXJpb2RzW2NdKSxiO2ZvcihiIGluIHRoaXMuYilpZighYVtiXSl7dGhpcy5sKG5ldyBxKDUsNTAwNSkpO3JldHVybn1mb3IoYiBpbiBhKWlmKCEodGhpcy5iW2JdfHxcInRleHRcIj09YiYmdGhpcy5nLmlnbm9yZVRleHRTdHJlYW1GYWlsdXJlcykpe3RoaXMubChuZXcgcSg1LDUwMDUpKTtyZXR1cm59Zm9yKGIgaW4gdGhpcy5iKXtjYyh0aGlzLGIsYVtiXSk7dmFyIGQ9dGhpcy5iW2JdO3ZjKGQpJiZpYyh0aGlzLGQsMCl9dGhpcy53KCl9fS5iaW5kKGEpKVtcImNhdGNoXCJdKHYpfX1mdW5jdGlvbiB2YyhhKXtyZXR1cm4hYS5oYSYmbnVsbD09YS5iYSYmIWEuY2EmJiFhLmRhfVxyXG5mdW5jdGlvbiBZYihhLGIpe2Zvcih2YXIgYz1hLmEucGVyaW9kcy5sZW5ndGgtMTswPGM7LS1jKWlmKGI+PWEuYS5wZXJpb2RzW2NdLnN0YXJ0VGltZSlyZXR1cm4gYztyZXR1cm4gMH1mdW5jdGlvbiBkYyhhLGIpe2Zvcih2YXIgYz0wO2M8YS5hLnBlcmlvZHMubGVuZ3RoOysrYylmb3IodmFyIGQ9YS5hLnBlcmlvZHNbY10sZT0wO2U8ZC5zdHJlYW1TZXRzLmxlbmd0aDsrK2UpaWYoMDw9ZC5zdHJlYW1TZXRzW2VdLnN0cmVhbXMuaW5kZXhPZihiKSlyZXR1cm4gYztyZXR1cm4tMX1mdW5jdGlvbiBxYyhhLGIpe3ZhciBjPUhhKGIuYSgpLGEuZy5yZXRyeVBhcmFtZXRlcnMpO2lmKGIuTHx8bnVsbCE9Yi5EKXt2YXIgZD1cImJ5dGVzPVwiK2IuTCtcIi1cIjtudWxsIT1iLkQmJihkKz1iLkQpO2MuaGVhZGVycy5SYW5nZT1kfXJldHVybiBhLlMucmVxdWVzdCgxLGMpLnRoZW4oZnVuY3Rpb24oYSl7cmV0dXJuIGEuZGF0YX0pfVxyXG5mdW5jdGlvbiBmYyhhLGIsYyl7Yi5jYT0hMTtiLmRhPSEwO3ZhciBkPU9iKGEuaSkrYyxlPWEuYy5aKCk7KGM/YS5jLnJlbW92ZShiLnR5cGUsZCxlKTphLmMuY2xlYXIoYi50eXBlKSkudGhlbihmdW5jdGlvbigpe3RoaXMuZnx8KGIudGE9bnVsbCxiLlY9bnVsbCxiLmRhPSExLGljKHRoaXMsYiwwKSl9LmJpbmQoYSkpfWZ1bmN0aW9uIGljKGEsYixjKXtiLmJhPXdpbmRvdy5zZXRUaW1lb3V0KGEuWC5iaW5kKGEsYiksMUUzKmMpfWZ1bmN0aW9uIFhiKGEpe251bGwhPWEuYmEmJih3aW5kb3cuY2xlYXJUaW1lb3V0KGEuYmEpLGEuYmE9bnVsbCl9O2Z1bmN0aW9uIHdjKCl7dGhpcy5hPVByb21pc2UucmVzb2x2ZSgpO3RoaXMuYz10aGlzLmI9dGhpcy5mPSExO3RoaXMuZz1uZXcgUHJvbWlzZShmdW5jdGlvbihhKXt0aGlzLmg9YX0uYmluZCh0aGlzKSl9d2MucHJvdG90eXBlLnRoZW49ZnVuY3Rpb24oYSl7dGhpcy5hPXRoaXMuYS50aGVuKGEpLnRoZW4oZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuYz8odGhpcy5oKCksUHJvbWlzZS5yZWplY3QodGhpcy5pKSk6UHJvbWlzZS5yZXNvbHZlKGEpfS5iaW5kKHRoaXMpKTtyZXR1cm4gdGhpc307ZnVuY3Rpb24geGMoYSl7YS5mfHwoYS5hPWEuYS50aGVuKGZ1bmN0aW9uKGEpe3RoaXMuYj0hMDtyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGEpfS5iaW5kKGEpLGZ1bmN0aW9uKGEpe3RoaXMuYj0hMDtyZXR1cm4gUHJvbWlzZS5yZWplY3QoYSl9LmJpbmQoYSkpKTthLmY9ITA7cmV0dXJuIGEuYX1cclxuZnVuY3Rpb24geWMoYSxiKXtpZihhLmIpcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO2EuYz0hMDthLmk9YjtyZXR1cm4gYS5nfTtmdW5jdGlvbiB6YyhhLGIsYyxkLGUpe3ZhciBmPWUgaW4gZCxnO2ZvcihnIGluIGIpe3ZhciBoPWUrXCIuXCIrZyxtPWY/ZFtlXTpjW2ddLG49ISF7XCIuYWJyLm1hbmFnZXJcIjohMH1baF07aWYoZnx8ZyBpbiBhKXZvaWQgMD09PWJbZ10/dm9pZCAwPT09bXx8Zj9kZWxldGUgYVtnXTphW2ddPW06bj9hW2ddPWJbZ106XCJvYmplY3RcIj09dHlwZW9mIGFbZ10mJlwib2JqZWN0XCI9PXR5cGVvZiBiW2ddP3pjKGFbZ10sYltnXSxtLGQsaCk6dHlwZW9mIGJbZ109PXR5cGVvZiBtJiYoYVtnXT1iW2ddKX19O2Z1bmN0aW9uIEgoYSxiKXt2YXIgYz1ifHx7fSxkO2ZvcihkIGluIGMpdGhpc1tkXT1jW2RdO3RoaXMuZGVmYXVsdFByZXZlbnRlZD10aGlzLmNhbmNlbGFibGU9dGhpcy5idWJibGVzPSExO3RoaXMudGltZVN0YW1wPXdpbmRvdy5wZXJmb3JtYW5jZT93aW5kb3cucGVyZm9ybWFuY2Uubm93KCk6RGF0ZS5ub3coKTt0aGlzLnR5cGU9YTt0aGlzLmlzVHJ1c3RlZD0hMTt0aGlzLnRhcmdldD10aGlzLmN1cnJlbnRUYXJnZXQ9bnVsbDt0aGlzLmE9ITF9SC5wcm90b3R5cGUucHJldmVudERlZmF1bHQ9ZnVuY3Rpb24oKXt9O0gucHJvdG90eXBlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbj1mdW5jdGlvbigpe3RoaXMuYT0hMH07SC5wcm90b3R5cGUuc3RvcFByb3BhZ2F0aW9uPWZ1bmN0aW9uKCl7fTtmdW5jdGlvbiBwKCl7dGhpcy5BYT1uZXcgSmE7dGhpcy5TPXRoaXN9cC5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lcj1mdW5jdGlvbihhLGIpe3RoaXMuQWEucHVzaChhLGIpfTtwLnByb3RvdHlwZS5yZW1vdmVFdmVudExpc3RlbmVyPWZ1bmN0aW9uKGEsYil7dGhpcy5BYS5yZW1vdmUoYSxiKX07cC5wcm90b3R5cGUuZGlzcGF0Y2hFdmVudD1mdW5jdGlvbihhKXtmb3IodmFyIGI9dGhpcy5BYS5nZXQoYS50eXBlKXx8W10sYz0wO2M8Yi5sZW5ndGg7KytjKXthLnRhcmdldD10aGlzLlM7YS5jdXJyZW50VGFyZ2V0PXRoaXMuUzt2YXIgZD1iW2NdO3RyeXtkLmhhbmRsZUV2ZW50P2QuaGFuZGxlRXZlbnQoYSk6ZC5jYWxsKHRoaXMsYSl9Y2F0Y2goZSl7fWlmKGEuYSlicmVha31yZXR1cm4gYS5kZWZhdWx0UHJldmVudGVkfTtmdW5jdGlvbiBBYyhhLGIsYyl7cmV0dXJuIGM9PWJ8fGE+PUJjJiZjPT1iLnNwbGl0KFwiLVwiKVswXXx8YT49Q2MmJmMuc3BsaXQoXCItXCIpWzBdPT1iLnNwbGl0KFwiLVwiKVswXT8hMDohMX12YXIgQmM9MSxDYz0yO2Z1bmN0aW9uIERjKGEpe2E9YS50b0xvd2VyQ2FzZSgpLnNwbGl0KFwiLVwiKTt2YXIgYj1FY1thWzBdXTtiJiYoYVswXT1iKTtyZXR1cm4gYS5qb2luKFwiLVwiKX1cclxudmFyIEVjPXthYXI6XCJhYVwiLGFiazpcImFiXCIsYWZyOlwiYWZcIixha2E6XCJha1wiLGFsYjpcInNxXCIsYW1oOlwiYW1cIixhcmE6XCJhclwiLGFyZzpcImFuXCIsYXJtOlwiaHlcIixhc206XCJhc1wiLGF2YTpcImF2XCIsYXZlOlwiYWVcIixheW06XCJheVwiLGF6ZTpcImF6XCIsYmFrOlwiYmFcIixiYW06XCJibVwiLGJhcTpcImV1XCIsYmVsOlwiYmVcIixiZW46XCJiblwiLGJpaDpcImJoXCIsYmlzOlwiYmlcIixib2Q6XCJib1wiLGJvczpcImJzXCIsYnJlOlwiYnJcIixidWw6XCJiZ1wiLGJ1cjpcIm15XCIsY2F0OlwiY2FcIixjZXM6XCJjc1wiLGNoYTpcImNoXCIsY2hlOlwiY2VcIixjaGk6XCJ6aFwiLGNodTpcImN1XCIsY2h2OlwiY3ZcIixjb3I6XCJrd1wiLGNvczpcImNvXCIsY3JlOlwiY3JcIixjeW06XCJjeVwiLGN6ZTpcImNzXCIsZGFuOlwiZGFcIixkZXU6XCJkZVwiLGRpdjpcImR2XCIsZHV0OlwibmxcIixkem86XCJkelwiLGVsbDpcImVsXCIsZW5nOlwiZW5cIixlcG86XCJlb1wiLGVzdDpcImV0XCIsZXVzOlwiZXVcIixld2U6XCJlZVwiLGZhbzpcImZvXCIsZmFzOlwiZmFcIixmaWo6XCJmalwiLGZpbjpcImZpXCIsZnJhOlwiZnJcIixmcmU6XCJmclwiLFxyXG5mcnk6XCJmeVwiLGZ1bDpcImZmXCIsZ2VvOlwia2FcIixnZXI6XCJkZVwiLGdsYTpcImdkXCIsZ2xlOlwiZ2FcIixnbGc6XCJnbFwiLGdsdjpcImd2XCIsZ3JlOlwiZWxcIixncm46XCJnblwiLGd1ajpcImd1XCIsaGF0OlwiaHRcIixoYXU6XCJoYVwiLGhlYjpcImhlXCIsaGVyOlwiaHpcIixoaW46XCJoaVwiLGhtbzpcImhvXCIsaHJ2OlwiaHJcIixodW46XCJodVwiLGh5ZTpcImh5XCIsaWJvOlwiaWdcIixpY2U6XCJpc1wiLGlkbzpcImlvXCIsaWlpOlwiaWlcIixpa3U6XCJpdVwiLGlsZTpcImllXCIsaW5hOlwiaWFcIixpbmQ6XCJpZFwiLGlwazpcImlrXCIsaXNsOlwiaXNcIixpdGE6XCJpdFwiLGphdjpcImp2XCIsanBuOlwiamFcIixrYWw6XCJrbFwiLGthbjpcImtuXCIsa2FzOlwia3NcIixrYXQ6XCJrYVwiLGthdTpcImtyXCIsa2F6Olwia2tcIixraG06XCJrbVwiLGtpazpcImtpXCIsa2luOlwicndcIixraXI6XCJreVwiLGtvbTpcImt2XCIsa29uOlwia2dcIixrb3I6XCJrb1wiLGt1YTpcImtqXCIsa3VyOlwia3VcIixsYW86XCJsb1wiLGxhdDpcImxhXCIsbGF2OlwibHZcIixsaW06XCJsaVwiLGxpbjpcImxuXCIsbGl0OlwibHRcIixsdHo6XCJsYlwiLGx1YjpcImx1XCIsXHJcbmx1ZzpcImxnXCIsbWFjOlwibWtcIixtYWg6XCJtaFwiLG1hbDpcIm1sXCIsbWFvOlwibWlcIixtYXI6XCJtclwiLG1heTpcIm1zXCIsbWtkOlwibWtcIixtbGc6XCJtZ1wiLG1sdDpcIm10XCIsbW9uOlwibW5cIixtcmk6XCJtaVwiLG1zYTpcIm1zXCIsbXlhOlwibXlcIixuYXU6XCJuYVwiLG5hdjpcIm52XCIsbmJsOlwibnJcIixuZGU6XCJuZFwiLG5kbzpcIm5nXCIsbmVwOlwibmVcIixubGQ6XCJubFwiLG5ubzpcIm5uXCIsbm9iOlwibmJcIixub3I6XCJub1wiLG55YTpcIm55XCIsb2NpOlwib2NcIixvamk6XCJvalwiLG9yaTpcIm9yXCIsb3JtOlwib21cIixvc3M6XCJvc1wiLHBhbjpcInBhXCIscGVyOlwiZmFcIixwbGk6XCJwaVwiLHBvbDpcInBsXCIscG9yOlwicHRcIixwdXM6XCJwc1wiLHF1ZTpcInF1XCIscm9oOlwicm1cIixyb246XCJyb1wiLHJ1bTpcInJvXCIscnVuOlwicm5cIixydXM6XCJydVwiLHNhZzpcInNnXCIsc2FuOlwic2FcIixzaW46XCJzaVwiLHNsazpcInNrXCIsc2xvOlwic2tcIixzbHY6XCJzbFwiLHNtZTpcInNlXCIsc21vOlwic21cIixzbmE6XCJzblwiLHNuZDpcInNkXCIsc29tOlwic29cIixzb3Q6XCJzdFwiLHNwYTpcImVzXCIsc3FpOlwic3FcIixcclxuc3JkOlwic2NcIixzcnA6XCJzclwiLHNzdzpcInNzXCIsc3VuOlwic3VcIixzd2E6XCJzd1wiLHN3ZTpcInN2XCIsdGFoOlwidHlcIix0YW06XCJ0YVwiLHRhdDpcInR0XCIsdGVsOlwidGVcIix0Z2s6XCJ0Z1wiLHRnbDpcInRsXCIsdGhhOlwidGhcIix0aWI6XCJib1wiLHRpcjpcInRpXCIsdG9uOlwidG9cIix0c246XCJ0blwiLHRzbzpcInRzXCIsdHVrOlwidGtcIix0dXI6XCJ0clwiLHR3aTpcInR3XCIsdWlnOlwidWdcIix1a3I6XCJ1a1wiLHVyZDpcInVyXCIsdXpiOlwidXpcIix2ZW46XCJ2ZVwiLHZpZTpcInZpXCIsdm9sOlwidm9cIix3ZWw6XCJjeVwiLHdsbjpcIndhXCIsd29sOlwid29cIix4aG86XCJ4aFwiLHlpZDpcInlpXCIseW9yOlwieW9cIix6aGE6XCJ6YVwiLHpobzpcInpoXCIsenVsOlwienVcIn07ZnVuY3Rpb24gRmMoYSxiLGMpe3ZhciBkPSExO2Euc3RyZWFtU2V0cy5mb3JFYWNoKGZ1bmN0aW9uKGEpe2Euc3RyZWFtcy5mb3JFYWNoKGZ1bmN0aW9uKGYpe3ZhciBnPWYuYWxsb3dlZEJ5QXBwbGljYXRpb247Zi5hbGxvd2VkQnlBcHBsaWNhdGlvbj0hMDtpZihcInZpZGVvXCI9PWEudHlwZSl7aWYoZi53aWR0aDxiLm1pbldpZHRofHxmLndpZHRoPmIubWF4V2lkdGh8fGYud2lkdGg+Yy53aWR0aHx8Zi5oZWlnaHQ8Yi5taW5IZWlnaHR8fGYuaGVpZ2h0PmIubWF4SGVpZ2h0fHxmLmhlaWdodD5jLmhlaWdodHx8Zi53aWR0aCpmLmhlaWdodDxiLm1pblBpeGVsc3x8Zi53aWR0aCpmLmhlaWdodD5iLm1heFBpeGVsc3x8Zi5iYW5kd2lkdGg8Yi5taW5WaWRlb0JhbmR3aWR0aHx8Zi5iYW5kd2lkdGg+Yi5tYXhWaWRlb0JhbmR3aWR0aClmLmFsbG93ZWRCeUFwcGxpY2F0aW9uPSExfWVsc2VcImF1ZGlvXCI9PWEudHlwZSYmKGYuYmFuZHdpZHRoPGIubWluQXVkaW9CYW5kd2lkdGh8fGYuYmFuZHdpZHRoPlxyXG5iLm1heEF1ZGlvQmFuZHdpZHRoKSYmKGYuYWxsb3dlZEJ5QXBwbGljYXRpb249ITEpO2chPWYuYWxsb3dlZEJ5QXBwbGljYXRpb24mJihkPSEwKX0pfSk7cmV0dXJuIGR9XHJcbmZ1bmN0aW9uIEdjKGEsYixjKXt2YXIgZD1cIlwiLGU9bnVsbDthJiZhLkEmJihkPWEua2V5U3lzdGVtKCksZT1hLm0pO2ZvcihhPTA7YTxjLnN0cmVhbVNldHMubGVuZ3RoOysrYSl7dmFyIGY9Yy5zdHJlYW1TZXRzW2FdO2lmKGQmJmYuZHJtSW5mb3MubGVuZ3RoJiYhZi5kcm1JbmZvcy5zb21lKGZ1bmN0aW9uKGEpe3JldHVybiBhLmtleVN5c3RlbT09ZH0pKWMuc3RyZWFtU2V0cy5zcGxpY2UoYSwxKSwtLWE7ZWxzZXtmb3IodmFyIGc9YltmLnR5cGVdLGg9MDtoPGYuc3RyZWFtcy5sZW5ndGg7KytoKXt2YXIgbT1mLnN0cmVhbXNbaF0sbj1tLm1pbWVUeXBlO20uY29kZWNzJiYobis9JzsgY29kZWNzPVwiJyttLmNvZGVjcysnXCInKTtFW25dfHxNZWRpYVNvdXJjZS5pc1R5cGVTdXBwb3J0ZWQobik/ZSYmbS5lbmNyeXB0ZWQmJjA+ZS5pbmRleE9mKG4pPyhmLnN0cmVhbXMuc3BsaWNlKGgsMSksLS1oKTohZ3x8bS5taW1lVHlwZT09Zy5taW1lVHlwZSYmbS5jb2RlY3Muc3BsaXQoXCIuXCIpWzBdPT1cclxuZy5jb2RlY3Muc3BsaXQoXCIuXCIpWzBdfHwoZi5zdHJlYW1zLnNwbGljZShoLDEpLC0taCk6KGYuc3RyZWFtcy5zcGxpY2UoaCwxKSwtLWgpfWYuc3RyZWFtcy5sZW5ndGh8fChjLnN0cmVhbVNldHMuc3BsaWNlKGEsMSksLS1hKX19fWZ1bmN0aW9uIEhjKGEsYil7cmV0dXJuIGEuc3RyZWFtU2V0cy5tYXAoZnVuY3Rpb24oYSl7dmFyIGQ9Yj9iW2EudHlwZV06bnVsbDtyZXR1cm4gYS5zdHJlYW1zLmZpbHRlcihmdW5jdGlvbihhKXtyZXR1cm4gYS5hbGxvd2VkQnlBcHBsaWNhdGlvbiYmYS5hbGxvd2VkQnlLZXlTeXN0ZW19KS5tYXAoZnVuY3Rpb24oYil7cmV0dXJue2lkOmIuaWQsYWN0aXZlOmQ9PWIsdHlwZTphLnR5cGUsYmFuZHdpZHRoOmIuYmFuZHdpZHRoLGxhbmd1YWdlOmEubGFuZ3VhZ2Usa2luZDpiLmtpbmR8fG51bGwsd2lkdGg6Yi53aWR0aHx8bnVsbCxoZWlnaHQ6Yi5oZWlnaHR8fG51bGx9fSl9KS5yZWR1Y2UodCxbXSl9XHJcbmZ1bmN0aW9uIEljKGEsYil7Zm9yKHZhciBjPTA7YzxhLnN0cmVhbVNldHMubGVuZ3RoO2MrKylmb3IodmFyIGQ9YS5zdHJlYW1TZXRzW2NdLGU9MDtlPGQuc3RyZWFtcy5sZW5ndGg7ZSsrKXt2YXIgZj1kLnN0cmVhbXNbZV07aWYoZi5pZD09Yi5pZClyZXR1cm57c3RyZWFtOmYsVGM6ZH19cmV0dXJuIG51bGx9ZnVuY3Rpb24gSmMoYSl7cmV0dXJuIGEuc3RyZWFtcy5zb21lKGZ1bmN0aW9uKGEpe3JldHVybiBhLmFsbG93ZWRCeUFwcGxpY2F0aW9uJiZhLmFsbG93ZWRCeUtleVN5c3RlbX0pfVxyXG5mdW5jdGlvbiBLYyhhLGIsYyl7dmFyIGQ9e307YS5zdHJlYW1TZXRzLmZvckVhY2goZnVuY3Rpb24oYSl7IUpjKGEpfHxhLnR5cGUgaW4gZHx8KGRbYS50eXBlXT1hKX0pO3ZhciBlPTA7YS5zdHJlYW1TZXRzLmZvckVhY2goZnVuY3Rpb24oYSl7aWYoSmMoYSkmJlwidmlkZW9cIj09YS50eXBlKXt2YXIgYj1MYyhhKTtiPmU/KGU9YixkLnZpZGVvPWEpOmI9PWUmJk1jKGEpPE1jKGQudmlkZW8pJiYoZC52aWRlbz1hKX19KTthLnN0cmVhbVNldHMuZm9yRWFjaChmdW5jdGlvbihhKXtKYyhhKSYmYS5wcmltYXJ5JiYoZFthLnR5cGVdLnByaW1hcnk/TWMoYSk8TWMoZFthLnR5cGVdKSYmKGRbYS50eXBlXT1hKTpkW2EudHlwZV09YSl9KTtbQ2MsQmMsMF0uZm9yRWFjaChmdW5jdGlvbihlKXthLnN0cmVhbVNldHMuZm9yRWFjaChmdW5jdGlvbihhKXtpZihKYyhhKSl7dmFyIGg7XCJhdWRpb1wiPT1hLnR5cGU/aD1iLnByZWZlcnJlZEF1ZGlvTGFuZ3VhZ2U6XCJ0ZXh0XCI9PWEudHlwZSYmKGg9Yi5wcmVmZXJyZWRUZXh0TGFuZ3VhZ2UpO1xyXG5pZihoKXtoPURjKGgpO3ZhciBtPURjKGEubGFuZ3VhZ2UpO0FjKGUsaCxtKSYmKGEubGFuZ3VhZ2U9PWRbYS50eXBlXS5sYW5ndWFnZT9NYyhhKTxNYyhkW2EudHlwZV0pJiYoZFthLnR5cGVdPWEpOmRbYS50eXBlXT1hLGMmJihjW2EudHlwZV09ITApKX19fSl9KTtyZXR1cm4gZH1mdW5jdGlvbiBNYyhhKXt2YXIgYj0wO2lmKCFhfHwxPmEuc3RyZWFtcy5sZW5ndGgpcmV0dXJuIGI7YS5zdHJlYW1zLmZvckVhY2goZnVuY3Rpb24oYSl7Yis9YS5iYW5kd2lkdGh9KTtyZXR1cm4gYi9hLnN0cmVhbXMubGVuZ3RofWZ1bmN0aW9uIExjKGEpe3ZhciBiPTA7aWYoIWEpcmV0dXJuIGI7YS5zdHJlYW1zLmZvckVhY2goZnVuY3Rpb24oYSl7YS5oZWlnaHQ+YiYmKGI9YS5oZWlnaHQpfSk7cmV0dXJuIGJ9O2Z1bmN0aW9uIEkoYSxiKXtwLmNhbGwodGhpcyk7dGhpcy53PSExO3RoaXMuZj1hO3RoaXMubT1udWxsO3RoaXMudj1uZXcgejt0aGlzLmhiPW5ldyBqYTt0aGlzLm5hPXRoaXMuYz10aGlzLmw9dGhpcy5iPXRoaXMuaT10aGlzLm9hPXRoaXMuRz10aGlzLkE9dGhpcy5nPXRoaXMuaD1udWxsO3RoaXMuS2I9MUU5O3RoaXMubWE9W107dGhpcy5QYT0hMTt0aGlzLnFhPSEwO3RoaXMuaj1udWxsO3RoaXMucz17fTt0aGlzLmE9TmModGhpcyk7dGhpcy5CYT17d2lkdGg6SW5maW5pdHksaGVpZ2h0OkluZmluaXR5fTt0aGlzLkM9W107dGhpcy5YPXRoaXMuSj10aGlzLnBhPTA7YiYmYih0aGlzKTt0aGlzLmg9bmV3IHkodGhpcy5MYy5iaW5kKHRoaXMpKTt0aGlzLm9hPU9jKHRoaXMpO2Zvcih2YXIgYz0wO2M8dGhpcy5mLnRleHRUcmFja3MubGVuZ3RoOysrYyl7dmFyIGQ9dGhpcy5mLnRleHRUcmFja3NbY107ZC5tb2RlPVwiZGlzYWJsZWRcIjtcIlNoYWthIFBsYXllciBUZXh0VHJhY2tcIj09ZC5sYWJlbCYmXHJcbih0aGlzLm09ZCl9dGhpcy5tfHwodGhpcy5tPXRoaXMuZi5hZGRUZXh0VHJhY2soXCJzdWJ0aXRsZXNcIixcIlNoYWthIFBsYXllciBUZXh0VHJhY2tcIikpO3RoaXMubS5tb2RlPVwiaGlkZGVuXCI7Qih0aGlzLnYsdGhpcy5mLFwiZXJyb3JcIix0aGlzLmxjLmJpbmQodGhpcykpfWJhKEkpO2woXCJzaGFrYS5QbGF5ZXJcIixJKTtJLnByb3RvdHlwZS5vPWZ1bmN0aW9uKCl7dGhpcy53PSEwO3ZhciBhPVByb21pc2UucmVzb2x2ZSgpO3RoaXMuaiYmKGE9eWModGhpcy5qLG5ldyBxKDcsN0UzKSkpO3JldHVybiBhLnRoZW4oZnVuY3Rpb24oKXt2YXIgYT1Qcm9taXNlLmFsbChbUGModGhpcyksdGhpcy52P3RoaXMudi5vKCk6bnVsbCx0aGlzLmg/dGhpcy5oLm8oKTpudWxsXSk7dGhpcy5hPXRoaXMuaD10aGlzLmhiPXRoaXMudj10aGlzLm09dGhpcy5mPW51bGw7cmV0dXJuIGF9LmJpbmQodGhpcykpfTtJLnByb3RvdHlwZS5kZXN0cm95PUkucHJvdG90eXBlLm87SS52ZXJzaW9uPVwidjIuMC4wXCI7XHJcbnZhciBRYz17fTtJLnJlZ2lzdGVyU3VwcG9ydFBsdWdpbj1mdW5jdGlvbihhLGIpe1FjW2FdPWJ9O0kuaXNCcm93c2VyU3VwcG9ydGVkPWZ1bmN0aW9uKCl7cmV0dXJuISF3aW5kb3cuUHJvbWlzZSYmISF3aW5kb3cuVWludDhBcnJheSYmISFBcnJheS5wcm90b3R5cGUuZm9yRWFjaCYmISF3aW5kb3cuTWVkaWFTb3VyY2UmJiEhd2luZG93Lk1lZGlhS2V5cyYmISF3aW5kb3cubmF2aWdhdG9yJiYhIXdpbmRvdy5uYXZpZ2F0b3IucmVxdWVzdE1lZGlhS2V5U3lzdGVtQWNjZXNzJiYhIXdpbmRvdy5NZWRpYUtleVN5c3RlbUFjY2VzcyYmISF3aW5kb3cuTWVkaWFLZXlTeXN0ZW1BY2Nlc3MucHJvdG90eXBlLmdldENvbmZpZ3VyYXRpb259O0kucHJvYmVTdXBwb3J0PWZ1bmN0aW9uKCl7cmV0dXJuIHFiKCkudGhlbihmdW5jdGlvbihhKXt2YXIgYj10YigpLGM9RGIoKTthPXttYW5pZmVzdDpiLG1lZGlhOmMsZHJtOmF9O2Zvcih2YXIgZCBpbiBRYylhW2RdPVFjW2RdKCk7cmV0dXJuIGF9KX07XHJcbkkucHJvdG90eXBlLmxvYWQ9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXRoaXMuZ2IoKSxlPW5ldyB3Yzt0aGlzLmo9ZTt0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEgoXCJsb2FkaW5nXCIpKTtyZXR1cm4geGMoZS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIGR9KS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIHViKGEsdGhpcy5oLHRoaXMuYS5tYW5pZmVzdC5yZXRyeVBhcmFtZXRlcnMsYyl9LmJpbmQodGhpcykpLnRoZW4oZnVuY3Rpb24oYil7dGhpcy5sPW5ldyBiO3RoaXMubC5jb25maWd1cmUodGhpcy5hLm1hbmlmZXN0KTtyZXR1cm4gdGhpcy5sLnN0YXJ0KGEsdGhpcy5oLHRoaXMuTmEuYmluZCh0aGlzKSx0aGlzLmFhLmJpbmQodGhpcyksdGhpcy5JYy5iaW5kKHRoaXMpKX0uYmluZCh0aGlzKSkudGhlbihmdW5jdGlvbihiKXt0aGlzLmM9Yjt0aGlzLm5hPWE7dGhpcy5nPW5ldyBhYih0aGlzLmgsdGhpcy5hYS5iaW5kKHRoaXMpLHRoaXMuSmMuYmluZCh0aGlzKSk7dGhpcy5nLmNvbmZpZ3VyZSh0aGlzLmEuZHJtKTtcclxucmV0dXJuIHRoaXMuZy5pbml0KGIsITEpfS5iaW5kKHRoaXMpKS50aGVuKGZ1bmN0aW9uKCl7dGhpcy5jLnBlcmlvZHMuZm9yRWFjaCh0aGlzLk5hLmJpbmQodGhpcykpO3RoaXMuWD1EYXRlLm5vdygpLzFFMztyZXR1cm4gUHJvbWlzZS5hbGwoW2RiKHRoaXMuZyx0aGlzLmYpLHRoaXMub2FdKX0uYmluZCh0aGlzKSkudGhlbihmdW5jdGlvbigpe3RoaXMuaT1uZXcgTmIodGhpcy5mLHRoaXMuYy5wcmVzZW50YXRpb25UaW1lbGluZSwxKk1hdGgubWF4KHRoaXMuYy5taW5CdWZmZXJUaW1lfHwwLHRoaXMuYS5zdHJlYW1pbmcucmVidWZmZXJpbmdHb2FsKSxifHxudWxsLHRoaXMuSWIuYmluZCh0aGlzKSx0aGlzLktjLmJpbmQodGhpcykpO3RoaXMuRz1uZXcgQ2IodGhpcy5mLHRoaXMuQSx0aGlzLm0pO3RoaXMuYj1uZXcgV2IodGhpcy5pLHRoaXMuRyx0aGlzLmgsdGhpcy5jLHRoaXMuSGMuYmluZCh0aGlzKSx0aGlzLk1iLmJpbmQodGhpcyksdGhpcy5hYS5iaW5kKHRoaXMpKTt0aGlzLmIuY29uZmlndXJlKHRoaXMuYS5zdHJlYW1pbmcpO1xyXG5yZXR1cm4gdGhpcy5iLmluaXQoKX0uYmluZCh0aGlzKSkudGhlbihmdW5jdGlvbigpe3RoaXMuYy5wZXJpb2RzLmZvckVhY2godGhpcy5OYS5iaW5kKHRoaXMpKTtSYyh0aGlzKTtTYyh0aGlzKTt0aGlzLmEuYWJyLm1hbmFnZXIuaW5pdCh0aGlzLmViLmJpbmQodGhpcykpO3RoaXMuaj1udWxsfS5iaW5kKHRoaXMpKSlbXCJjYXRjaFwiXShmdW5jdGlvbihhKXt0aGlzLmo9PWUmJih0aGlzLmo9bnVsbCx0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEgoXCJ1bmxvYWRpbmdcIikpKTtyZXR1cm4gUHJvbWlzZS5yZWplY3QoYSl9LmJpbmQodGhpcykpfTtJLnByb3RvdHlwZS5sb2FkPUkucHJvdG90eXBlLmxvYWQ7ZnVuY3Rpb24gT2MoYSl7YS5BPW5ldyBNZWRpYVNvdXJjZTt2YXIgYj1uZXcgdztCKGEudixhLkEsXCJzb3VyY2VvcGVuXCIsYi5yZXNvbHZlKTthLmYuc3JjPXdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKGEuQSk7cmV0dXJuIGJ9XHJcbkkucHJvdG90eXBlLmNvbmZpZ3VyZT1mdW5jdGlvbihhKXthLmFiciYmYS5hYnIubWFuYWdlciYmYS5hYnIubWFuYWdlciE9dGhpcy5hLmFici5tYW5hZ2VyJiYodGhpcy5hLmFici5tYW5hZ2VyLnN0b3AoKSxhLmFici5tYW5hZ2VyLmluaXQodGhpcy5lYi5iaW5kKHRoaXMpKSk7emModGhpcy5hLGEsTmModGhpcyksVGMoKSxcIlwiKTtVYyh0aGlzKX07SS5wcm90b3R5cGUuY29uZmlndXJlPUkucHJvdG90eXBlLmNvbmZpZ3VyZTtcclxuZnVuY3Rpb24gVWMoYSl7YS5sJiZhLmwuY29uZmlndXJlKGEuYS5tYW5pZmVzdCk7YS5nJiZhLmcuY29uZmlndXJlKGEuYS5kcm0pO2EuYiYmKGEuYi5jb25maWd1cmUoYS5hLnN0cmVhbWluZyksYS5jLnBlcmlvZHMuZm9yRWFjaChhLk5hLmJpbmQoYSkpLFZjKGEsJGIoYS5iKSkpO2EuYS5hYnIuZW5hYmxlZCYmIWEucWE/YS5hLmFici5tYW5hZ2VyLmVuYWJsZSgpOmEuYS5hYnIubWFuYWdlci5kaXNhYmxlKCk7YS5hLmFici5tYW5hZ2VyLnNldERlZmF1bHRFc3RpbWF0ZShhLmEuYWJyLmRlZmF1bHRCYW5kd2lkdGhFc3RpbWF0ZSl9SS5wcm90b3R5cGUuZ2V0Q29uZmlndXJhdGlvbj1mdW5jdGlvbigpe3ZhciBhPU5jKHRoaXMpO3pjKGEsdGhpcy5hLE5jKHRoaXMpLFRjKCksXCJcIik7cmV0dXJuIGF9O0kucHJvdG90eXBlLmdldENvbmZpZ3VyYXRpb249SS5wcm90b3R5cGUuZ2V0Q29uZmlndXJhdGlvbjtcclxuSS5wcm90b3R5cGUuemM9ZnVuY3Rpb24oKXt2YXIgYT1OYyh0aGlzKTthLmFiciYmYS5hYnIubWFuYWdlciYmYS5hYnIubWFuYWdlciE9dGhpcy5hLmFici5tYW5hZ2VyJiYodGhpcy5hLmFici5tYW5hZ2VyLnN0b3AoKSxhLmFici5tYW5hZ2VyLmluaXQodGhpcy5lYi5iaW5kKHRoaXMpKSk7dGhpcy5hPU5jKHRoaXMpO1VjKHRoaXMpfTtJLnByb3RvdHlwZS5yZXNldENvbmZpZ3VyYXRpb249SS5wcm90b3R5cGUuemM7SS5wcm90b3R5cGUubmI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ofTtJLnByb3RvdHlwZS5nZXROZXR3b3JraW5nRW5naW5lPUkucHJvdG90eXBlLm5iO0kucHJvdG90eXBlLlNiPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubmF9O0kucHJvdG90eXBlLmdldE1hbmlmZXN0VXJpPUkucHJvdG90eXBlLlNiO0kucHJvdG90eXBlLlU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jP3RoaXMuYy5wcmVzZW50YXRpb25UaW1lbGluZS5VKCk6ITF9O1xyXG5JLnByb3RvdHlwZS5pc0xpdmU9SS5wcm90b3R5cGUuVTtJLnByb3RvdHlwZS5nYT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmM/dGhpcy5jLnByZXNlbnRhdGlvblRpbWVsaW5lLmdhKCk6ITF9O0kucHJvdG90eXBlLmlzSW5Qcm9ncmVzcz1JLnByb3RvdHlwZS5nYTtJLnByb3RvdHlwZS5DYz1mdW5jdGlvbigpe3ZhciBhPTAsYj0wO3RoaXMuYyYmKGI9dGhpcy5jLnByZXNlbnRhdGlvblRpbWVsaW5lLGE9Yi5zYSgpLGI9Yi5UYSgpKTtyZXR1cm57c3RhcnQ6YSxlbmQ6Yn19O0kucHJvdG90eXBlLnNlZWtSYW5nZT1JLnByb3RvdHlwZS5DYztJLnByb3RvdHlwZS5rZXlTeXN0ZW09ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nP3RoaXMuZy5rZXlTeXN0ZW0oKTpcIlwifTtJLnByb3RvdHlwZS5rZXlTeXN0ZW09SS5wcm90b3R5cGUua2V5U3lzdGVtO0kucHJvdG90eXBlLmRybUluZm89ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nP3RoaXMuZy5iOm51bGx9O0kucHJvdG90eXBlLmRybUluZm89SS5wcm90b3R5cGUuZHJtSW5mbztcclxuSS5wcm90b3R5cGUuV2I9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5QYX07SS5wcm90b3R5cGUuaXNCdWZmZXJpbmc9SS5wcm90b3R5cGUuV2I7SS5wcm90b3R5cGUuZ2I9ZnVuY3Rpb24oKXtpZih0aGlzLncpcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO3RoaXMuZGlzcGF0Y2hFdmVudChuZXcgSChcInVubG9hZGluZ1wiKSk7aWYodGhpcy5qKXt2YXIgYT1uZXcgcSg3LDdFMyk7cmV0dXJuIHljKHRoaXMuaixhKS50aGVuKHRoaXMuQmIuYmluZCh0aGlzKSl9cmV0dXJuIHRoaXMuQmIoKX07SS5wcm90b3R5cGUudW5sb2FkPUkucHJvdG90eXBlLmdiO0kucHJvdG90eXBlLlNhPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaT90aGlzLmkuU2EoKTowfTtJLnByb3RvdHlwZS5nZXRQbGF5YmFja1JhdGU9SS5wcm90b3R5cGUuU2E7SS5wcm90b3R5cGUuV2M9ZnVuY3Rpb24oYSl7dGhpcy5pJiZTYih0aGlzLmksYSl9O0kucHJvdG90eXBlLnRyaWNrUGxheT1JLnByb3RvdHlwZS5XYztcclxuSS5wcm90b3R5cGUuTmI9ZnVuY3Rpb24oKXt0aGlzLmkmJlNiKHRoaXMuaSwxKX07SS5wcm90b3R5cGUuY2FuY2VsVHJpY2tQbGF5PUkucHJvdG90eXBlLk5iO0kucHJvdG90eXBlLmdldFRyYWNrcz1mdW5jdGlvbigpe2lmKCF0aGlzLmIpcmV0dXJuW107dmFyIGE9YWModGhpcy5iKTtyZXR1cm4gSGMoJGIodGhpcy5iKSxhKS5maWx0ZXIoZnVuY3Rpb24oYSl7cmV0dXJuIDA+dGhpcy5tYS5pbmRleE9mKGEuaWQpfS5iaW5kKHRoaXMpKX07SS5wcm90b3R5cGUuZ2V0VHJhY2tzPUkucHJvdG90eXBlLmdldFRyYWNrcztcclxuSS5wcm90b3R5cGUuRGM9ZnVuY3Rpb24oYSxiKXtpZih0aGlzLmIpe3ZhciBjPUljKCRiKHRoaXMuYiksYSk7aWYoYyYmKGM9Yy5zdHJlYW0sYy5hbGxvd2VkQnlBcHBsaWNhdGlvbiYmYy5hbGxvd2VkQnlLZXlTeXN0ZW0pKXt0aGlzLkMucHVzaCh7dGltZXN0YW1wOkRhdGUubm93KCkvMUUzLGlkOmMuaWQsdHlwZTphLnR5cGUsZnJvbUFkYXB0YXRpb246ITF9KTtcInRleHRcIiE9YS50eXBlJiZ0aGlzLmNvbmZpZ3VyZSh7YWJyOntlbmFibGVkOiExfX0pO3ZhciBkPXt9O2RbYS50eXBlXT1jO1djKHRoaXMsZCxiKX19fTtJLnByb3RvdHlwZS5zZWxlY3RUcmFjaz1JLnByb3RvdHlwZS5EYztJLnByb3RvdHlwZS5aYj1mdW5jdGlvbigpe3JldHVyblwic2hvd2luZ1wiPT10aGlzLm0ubW9kZX07SS5wcm90b3R5cGUuaXNUZXh0VHJhY2tWaXNpYmxlPUkucHJvdG90eXBlLlpiO0kucHJvdG90eXBlLkZjPWZ1bmN0aW9uKGEpe3RoaXMubS5tb2RlPWE/XCJzaG93aW5nXCI6XCJoaWRkZW5cIjtYYyh0aGlzKX07XHJcbkkucHJvdG90eXBlLnNldFRleHRUcmFja1Zpc2liaWxpdHk9SS5wcm90b3R5cGUuRmM7XHJcbkkucHJvdG90eXBlLmdldFN0YXRzPWZ1bmN0aW9uKCl7WWModGhpcyk7dmFyIGE9e30sYj17fSxjPXRoaXMuZiYmdGhpcy5mLmdldFZpZGVvUGxheWJhY2tRdWFsaXR5P3RoaXMuZi5nZXRWaWRlb1BsYXliYWNrUXVhbGl0eSgpOnt9O3RoaXMuYiYmKGI9YWModGhpcy5iKSxhPWIudmlkZW98fHt9LGI9Yi5hdWRpb3x8e30pO3JldHVybnt3aWR0aDphLndpZHRofHwwLGhlaWdodDphLmhlaWdodHx8MCxzdHJlYW1CYW5kd2lkdGg6YS5iYW5kd2lkdGgrYi5iYW5kd2lkdGh8fDAsZGVjb2RlZEZyYW1lczpOdW1iZXIoYy50b3RhbFZpZGVvRnJhbWVzKSxkcm9wcGVkRnJhbWVzOk51bWJlcihjLmRyb3BwZWRWaWRlb0ZyYW1lcyksZXN0aW1hdGVkQmFuZHdpZHRoOnRoaXMuYS5hYnIubWFuYWdlci5nZXRCYW5kd2lkdGhFc3RpbWF0ZSgpLHBsYXlUaW1lOnRoaXMucGEsYnVmZmVyaW5nVGltZTp0aGlzLkosc3dpdGNoSGlzdG9yeTp0aGlzLkMuc2xpY2UoMCl9fTtcclxuSS5wcm90b3R5cGUuZ2V0U3RhdHM9SS5wcm90b3R5cGUuZ2V0U3RhdHM7XHJcbkkucHJvdG90eXBlLmFkZFRleHRUcmFjaz1mdW5jdGlvbihhLGIsYyxkLGUpe2lmKCF0aGlzLmIpcmV0dXJuIFByb21pc2UucmVqZWN0KCk7Zm9yKHZhciBmPSRiKHRoaXMuYiksZyxoPTA7aDx0aGlzLmMucGVyaW9kcy5sZW5ndGg7aCsrKWlmKHRoaXMuYy5wZXJpb2RzW2hdPT1mKXtpZihoPT10aGlzLmMucGVyaW9kcy5sZW5ndGgtMSl7aWYoZz10aGlzLmMucHJlc2VudGF0aW9uVGltZWxpbmUuWigpLWYuc3RhcnRUaW1lLEluZmluaXR5PT1nKXJldHVybiBQcm9taXNlLnJlamVjdCgpfWVsc2UgZz10aGlzLmMucGVyaW9kc1toKzFdLnN0YXJ0VGltZS1mLnN0YXJ0VGltZTticmVha312YXIgbT17aWQ6dGhpcy5LYisrLGNyZWF0ZVNlZ21lbnRJbmRleDpQcm9taXNlLnJlc29sdmUuYmluZChQcm9taXNlKSxmaW5kU2VnbWVudFBvc2l0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIDF9LGdldFNlZ21lbnRSZWZlcmVuY2U6ZnVuY3Rpb24oYil7cmV0dXJuIDEhPWI/bnVsbDpuZXcgRygxLDAsZyxcclxuZnVuY3Rpb24oKXtyZXR1cm5bYV19LDAsbnVsbCl9LGluaXRTZWdtZW50UmVmZXJlbmNlOm51bGwscHJlc2VudGF0aW9uVGltZU9mZnNldDowLG1pbWVUeXBlOmQsY29kZWNzOmV8fFwiXCIsYmFuZHdpZHRoOjAsa2luZDpjLGVuY3J5cHRlZDohMSxrZXlJZDpudWxsLGxhbmd1YWdlOmIsYWxsb3dlZEJ5QXBwbGljYXRpb246ITAsYWxsb3dlZEJ5S2V5U3lzdGVtOiEwfTtkPXtsYW5ndWFnZTpiLHR5cGU6XCJ0ZXh0XCIscHJpbWFyeTohMSxkcm1JbmZvczpbXSxzdHJlYW1zOlttXX07dGhpcy5tYS5wdXNoKG0uaWQpO2Yuc3RyZWFtU2V0cy5wdXNoKGQpO3JldHVybiBiYyh0aGlzLmIsbSkudGhlbihmdW5jdGlvbigpe2lmKCF0aGlzLncpcmV0dXJuIHRoaXMubWEuc3BsaWNlKHRoaXMubWEuaW5kZXhPZihtLmlkKSwxKSxWYyh0aGlzLGYpLFJjKHRoaXMpLHtpZDptLmlkLGFjdGl2ZTohMSx0eXBlOlwidGV4dFwiLGJhbmR3aWR0aDowLGxhbmd1YWdlOmIsa2luZDpjLHdpZHRoOm51bGwsaGVpZ2h0Om51bGx9fS5iaW5kKHRoaXMpKX07XHJcbkkucHJvdG90eXBlLmFkZFRleHRUcmFjaz1JLnByb3RvdHlwZS5hZGRUZXh0VHJhY2s7SS5wcm90b3R5cGUuRmI9ZnVuY3Rpb24oYSxiKXt0aGlzLkJhLndpZHRoPWE7dGhpcy5CYS5oZWlnaHQ9Yn07SS5wcm90b3R5cGUuc2V0TWF4SGFyZHdhcmVSZXNvbHV0aW9uPUkucHJvdG90eXBlLkZiO1xyXG5mdW5jdGlvbiBQYyhhKXthLnYmJmEudi5rYShhLkEsXCJzb3VyY2VvcGVuXCIpO2EuZiYmKGEuZi5yZW1vdmVBdHRyaWJ1dGUoXCJzcmNcIiksYS5mLmxvYWQoKSk7dmFyIGI9UHJvbWlzZS5hbGwoW2EuYT9hLmEuYWJyLm1hbmFnZXIuc3RvcCgpOm51bGwsYS5nP2EuZy5vKCk6bnVsbCxhLkc/YS5HLm8oKTpudWxsLGEuaT9hLmkubygpOm51bGwsYS5iP2EuYi5vKCk6bnVsbCxhLmw/YS5sLnN0b3AoKTpudWxsXSk7YS5nPW51bGw7YS5HPW51bGw7YS5pPW51bGw7YS5iPW51bGw7YS5sPW51bGw7YS5jPW51bGw7YS5uYT1udWxsO2Eub2E9bnVsbDthLkE9bnVsbDthLnM9e307YS5DPVtdO2EucGE9MDthLko9MDtyZXR1cm4gYn1rPUkucHJvdG90eXBlO2suQmI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sP1BjKHRoaXMpLnRoZW4oZnVuY3Rpb24oKXt0aGlzLnd8fCh0aGlzLkliKCExKSx0aGlzLm9hPU9jKHRoaXMpKX0uYmluZCh0aGlzKSk6UHJvbWlzZS5yZXNvbHZlKCl9O1xyXG5mdW5jdGlvbiBUYygpe3JldHVybntcIi5kcm0uc2VydmVyc1wiOlwiXCIsXCIuZHJtLmNsZWFyS2V5c1wiOlwiXCIsXCIuZHJtLmFkdmFuY2VkXCI6e2Rpc3RpbmN0aXZlSWRlbnRpZmllclJlcXVpcmVkOiExLHBlcnNpc3RlbnRTdGF0ZVJlcXVpcmVkOiExLHZpZGVvUm9idXN0bmVzczpcIlwiLGF1ZGlvUm9idXN0bmVzczpcIlwiLHNlcnZlckNlcnRpZmljYXRlOm51bGx9fX1cclxuZnVuY3Rpb24gTmMoYSl7cmV0dXJue2RybTp7cmV0cnlQYXJhbWV0ZXJzOkdhKCksc2VydmVyczp7fSxjbGVhcktleXM6e30sYWR2YW5jZWQ6e319LG1hbmlmZXN0OntyZXRyeVBhcmFtZXRlcnM6R2EoKSxkYXNoOntjdXN0b21TY2hlbWU6ZnVuY3Rpb24oYSl7aWYoYSlyZXR1cm4gbnVsbH0sY2xvY2tTeW5jVXJpOlwiXCJ9fSxzdHJlYW1pbmc6e3JldHJ5UGFyYW1ldGVyczpHYSgpLHJlYnVmZmVyaW5nR29hbDoyLGJ1ZmZlcmluZ0dvYWw6MzAsYnVmZmVyQmVoaW5kOjMwLGlnbm9yZVRleHRTdHJlYW1GYWlsdXJlczohMX0sYWJyOnttYW5hZ2VyOmEuaGIsZW5hYmxlZDohMCxkZWZhdWx0QmFuZHdpZHRoRXN0aW1hdGU6NUU1fSxwcmVmZXJyZWRBdWRpb0xhbmd1YWdlOlwiXCIscHJlZmVycmVkVGV4dExhbmd1YWdlOlwiXCIscmVzdHJpY3Rpb25zOnttaW5XaWR0aDowLG1heFdpZHRoOkluZmluaXR5LG1pbkhlaWdodDowLG1heEhlaWdodDpJbmZpbml0eSxtaW5QaXhlbHM6MCxtYXhQaXhlbHM6SW5maW5pdHksXHJcbm1pbkF1ZGlvQmFuZHdpZHRoOjAsbWF4QXVkaW9CYW5kd2lkdGg6SW5maW5pdHksbWluVmlkZW9CYW5kd2lkdGg6MCxtYXhWaWRlb0JhbmR3aWR0aDpJbmZpbml0eX19fWsuTmE9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5iP2FjKHRoaXMuYik6e307R2ModGhpcy5nLGIsYSk7Yj1hLnN0cmVhbVNldHMuc29tZShKYyk7RmMoYSx0aGlzLmEucmVzdHJpY3Rpb25zLHRoaXMuQmEpJiYhdGhpcy5qJiZSYyh0aGlzKTthPSFhLnN0cmVhbVNldHMuc29tZShKYyk7Yj9hJiZ0aGlzLmFhKG5ldyBxKDQsNDAxMikpOnRoaXMuYWEobmV3IHEoNCw0MDExKSl9O2Z1bmN0aW9uIFdjKGEsYixjKXtmb3IodmFyIGQgaW4gYil7dmFyIGU9YltkXSxmPWN8fFwidGV4dFwiPT1kO2EucWE/YS5zW2RdPXtzdHJlYW06ZSxjbGVhcjpmfTpjYyhhLmIsZCxlLGY/MDp2b2lkIDApfX1cclxuZnVuY3Rpb24gWWMoYSl7aWYoYS5jKXt2YXIgYj1EYXRlLm5vdygpLzFFMzthLlBhP2EuSis9Yi1hLlg6YS5wYSs9Yi1hLlg7YS5YPWJ9fWsuTGM9ZnVuY3Rpb24oYSxiLGMpe3RoaXMuYS5hYnIubWFuYWdlci5zZWdtZW50RG93bmxvYWRlZChhLGIsYyl9O2suSWI9ZnVuY3Rpb24oYSl7WWModGhpcyk7dGhpcy5QYT1hO3RoaXMuZGlzcGF0Y2hFdmVudChuZXcgSChcImJ1ZmZlcmluZ1wiLHtidWZmZXJpbmc6YX0pKX07ay5LYz1mdW5jdGlvbigpe2lmKHRoaXMuYil7dmFyIGE9dGhpcy5iLGI7Zm9yKGIgaW4gYS5iKXt2YXIgYz1hLmJbYl07Yy5kYXx8MDxHYihhLmMsYixPYihhLmkpKXx8Yy5jYXx8KGMuaGE/ZWMoYywwKTpudWxsPT1FYihhLmMsYik/bnVsbD09Yy5iYSYmaWMoYSxjLDApOihYYihjKSxmYyhhLGMsMCkpKX19fTtcclxuZnVuY3Rpb24gWmMoYSxiLGMpe2lmKCFDKGIpLnNvbWUoSmMpKXJldHVybiBhLmFhKG5ldyBxKDQsNDAxMikpLHt9O3ZhciBkPXt9O2lmKGMpZD1iO2Vsc2V7Yz1hYyhhLmIpO2Zvcih2YXIgZSBpbiBjKXt2YXIgZj1jW2VdO2YuYWxsb3dlZEJ5QXBwbGljYXRpb24mJmYuYWxsb3dlZEJ5S2V5U3lzdGVtJiZiW2VdLmxhbmd1YWdlPT1mLmxhbmd1YWdlfHwoZFtlXT1iW2VdKX19aWYoTWEoZCkpcmV0dXJue307aWEoT2JqZWN0LmtleXMoZCkpO3ZhciBnPWEuYS5hYnIubWFuYWdlci5jaG9vc2VTdHJlYW1zKGQpO3JldHVybiBPYShkLGZ1bmN0aW9uKGEpe3JldHVybiEhZ1thXX0pP2c6KGEuYWEobmV3IHEoNCw0MDEyKSkse30pfVxyXG5mdW5jdGlvbiBWYyhhLGIpe3ZhciBjPXthdWRpbzohMSx0ZXh0OiExfSxkPUtjKGIsYS5hLGMpLGU9WmMoYSxkKSxmO2ZvcihmIGluIGUpYS5DLnB1c2goe3RpbWVzdGFtcDpEYXRlLm5vdygpLzFFMyxpZDplW2ZdLmlkLHR5cGU6Zixmcm9tQWRhcHRhdGlvbjohMH0pO1djKGEsZSwhMCk7U2MoYSk7ZC50ZXh0JiZkLmF1ZGlvJiZjLnRleHQmJmQudGV4dC5sYW5ndWFnZSE9ZC5hdWRpby5sYW5ndWFnZSYmKGEubS5tb2RlPVwic2hvd2luZ1wiLFhjKGEpKX1rLkhjPWZ1bmN0aW9uKGEpe3RoaXMucWE9ITA7dGhpcy5hLmFici5tYW5hZ2VyLmRpc2FibGUoKTthPUtjKGEsdGhpcy5hKTthPVpjKHRoaXMsYSwhMCk7Zm9yKHZhciBiIGluIHRoaXMucylhW2JdPXRoaXMuc1tiXS5zdHJlYW07dGhpcy5zPXt9O2ZvcihiIGluIGEpdGhpcy5DLnB1c2goe3RpbWVzdGFtcDpEYXRlLm5vdygpLzFFMyxpZDphW2JdLmlkLHR5cGU6Yixmcm9tQWRhcHRhdGlvbjohMH0pO3RoaXMuanx8UmModGhpcyk7cmV0dXJuIGF9O1xyXG5rLk1iPWZ1bmN0aW9uKCl7dGhpcy5xYT0hMTt0aGlzLmEuYWJyLmVuYWJsZWQmJnRoaXMuYS5hYnIubWFuYWdlci5lbmFibGUoKTtmb3IodmFyIGEgaW4gdGhpcy5zKXt2YXIgYj10aGlzLnNbYV07Y2ModGhpcy5iLGEsYi5zdHJlYW0sYi5jbGVhcj8wOnZvaWQgMCl9dGhpcy5zPXt9fTtrLmViPWZ1bmN0aW9uKGEsYil7dmFyIGM9YWModGhpcy5iKSxkO2ZvcihkIGluIGEpe3ZhciBlPWFbZF07Y1tkXSE9ZT90aGlzLkMucHVzaCh7dGltZXN0YW1wOkRhdGUubm93KCkvMUUzLGlkOmUuaWQsdHlwZTpkLGZyb21BZGFwdGF0aW9uOiEwfSk6ZGVsZXRlIGFbZF19aWYoIU1hKGEpJiZ0aGlzLmIpe2ZvcihkIGluIGEpY2ModGhpcy5iLGQsYVtkXSxcInZpZGVvXCI9PWQ/Yjp2b2lkIDApO1NjKHRoaXMpfX07XHJcbmZ1bmN0aW9uIFNjKGEpe1Byb21pc2UucmVzb2x2ZSgpLnRoZW4oZnVuY3Rpb24oKXt0aGlzLnd8fHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgSChcImFkYXB0YXRpb25cIikpfS5iaW5kKGEpKX1mdW5jdGlvbiBSYyhhKXtQcm9taXNlLnJlc29sdmUoKS50aGVuKGZ1bmN0aW9uKCl7dGhpcy53fHx0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEgoXCJ0cmFja3NjaGFuZ2VkXCIpKX0uYmluZChhKSl9ZnVuY3Rpb24gWGMoYSl7YS5kaXNwYXRjaEV2ZW50KG5ldyBIKFwidGV4dHRyYWNrdmlzaWJpbGl0eVwiKSl9ay5hYT1mdW5jdGlvbihhKXt0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEgoXCJlcnJvclwiLHtkZXRhaWw6YX0pKX07ay5JYz1mdW5jdGlvbihhKXt0aGlzLmRpc3BhdGNoRXZlbnQoYSl9O1xyXG5rLmxjPWZ1bmN0aW9uKCl7aWYodGhpcy5mLmVycm9yKXt2YXIgYT10aGlzLmYuZXJyb3IuY29kZTtpZigxIT1hKXt2YXIgYj10aGlzLmYuZXJyb3IubXNFeHRlbmRlZENvZGU7YiYmKDA+YiYmKGIrPU1hdGgucG93KDIsMzIpKSxiPWIudG9TdHJpbmcoMTYpKTt0aGlzLmFhKG5ldyBxKDMsMzAxNixhLGIpKX19fTtrLkpjPWZ1bmN0aW9uKGEpe3ZhciBiPSRiKHRoaXMuYiksYz0hMTtiLnN0cmVhbVNldHMuZm9yRWFjaChmdW5jdGlvbihiKXtiLnN0cmVhbXMuZm9yRWFjaChmdW5jdGlvbihiKXt2YXIgZD1iLmFsbG93ZWRCeUtleVN5c3RlbTtiLmtleUlkJiZiLmtleUlkIGluIGEmJihiLmFsbG93ZWRCeUtleVN5c3RlbT1cIm91dHB1dC1yZXN0cmljdGVkXCIhPWFbYi5rZXlJZF0pO2QhPWIuYWxsb3dlZEJ5S2V5U3lzdGVtJiYoYz0hMCl9KX0pO1ZjKHRoaXMsYik7YyYmUmModGhpcyl9O3ZhciAkYz1cImVuZGVkIHBsYXkgcGxheWluZyBwYXVzZSBwYXVzaW5nIHJhdGVjaGFuZ2Ugc2Vla2VkIHNlZWtpbmcgdGltZXVwZGF0ZSB2b2x1bWVjaGFuZ2VcIi5zcGxpdChcIiBcIiksYWQ9XCJidWZmZXJlZCBjdXJyZW50VGltZSBkdXJhdGlvbiBlbmRlZCBsb29wIG11dGVkIHBhdXNlZCBwbGF5YmFja1JhdGUgc2Vla2luZyB2aWRlb0hlaWdodCB2aWRlb1dpZHRoIHZvbHVtZVwiLnNwbGl0KFwiIFwiKSxjZD1bXCJsb29wXCIsXCJwbGF5YmFja1JhdGVcIl0sZGQ9W1wicGF1c2VcIixcInBsYXlcIl0sZWQ9W1wiYWRhcHRhdGlvblwiLFwiYnVmZmVyaW5nXCIsXCJlcnJvclwiLFwidGV4dHRyYWNrdmlzaWJpbGl0eVwiLFwidHJhY2tzY2hhbmdlZFwiXSxmZD1cImdldENvbmZpZ3VyYXRpb24gZ2V0TWFuaWZlc3RVcmkgZ2V0UGxheWJhY2tSYXRlIGdldFRyYWNrcyBnZXRTdGF0cyBpc0J1ZmZlcmluZyBpc0xpdmUgaXNUZXh0VHJhY2tWaXNpYmxlIHNlZWtSYW5nZVwiLnNwbGl0KFwiIFwiKSxnZD1bW1wiZ2V0Q29uZmlndXJhdGlvblwiLFxyXG5cImNvbmZpZ3VyZVwiXV0saGQ9W1tcImlzVGV4dFRyYWNrVmlzaWJsZVwiLFwic2V0VGV4dFRyYWNrVmlzaWJpbGl0eVwiXV0saWQ9XCJjb25maWd1cmUgcmVzZXRDb25maWd1cmF0aW9uIHRyaWNrUGxheSBjYW5jZWxUcmlja1BsYXkgc2VsZWN0VHJhY2sgc2V0VGV4dFRyYWNrVmlzaWJpbGl0eSBhZGRUZXh0VHJhY2tcIi5zcGxpdChcIiBcIiksamQ9W1wibG9hZFwiLFwidW5sb2FkXCJdO1xyXG5mdW5jdGlvbiBrZChhKXtyZXR1cm4gSlNPTi5zdHJpbmdpZnkoYSxmdW5jdGlvbihhLGMpe2lmKFwibWFuYWdlclwiIT1hJiZcImZ1bmN0aW9uXCIhPXR5cGVvZiBjKXtpZihjIGluc3RhbmNlb2YgRXZlbnR8fGMgaW5zdGFuY2VvZiBIKXt2YXIgZD17fSxlO2ZvcihlIGluIGMpe3ZhciBmPWNbZV07ZiYmXCJvYmplY3RcIj09dHlwZW9mIGZ8fGUgaW4gRXZlbnR8fChkW2VdPWYpfXJldHVybiBkfWlmKGMgaW5zdGFuY2VvZiBUaW1lUmFuZ2VzKWZvcihkPXtfX3R5cGVfXzpcIlRpbWVSYW5nZXNcIixsZW5ndGg6Yy5sZW5ndGgsc3RhcnQ6W10sZW5kOltdfSxlPTA7ZTxjLmxlbmd0aDsrK2UpZC5zdGFydC5wdXNoKGMuc3RhcnQoZSkpLGQuZW5kLnB1c2goYy5lbmQoZSkpO2Vsc2UgZD1cIm51bWJlclwiPT10eXBlb2YgYz9pc05hTihjKT9cIk5hTlwiOmlzRmluaXRlKGMpP2M6MD5jP1wiLUluZmluaXR5XCI6XCJJbmZpbml0eVwiOmM7cmV0dXJuIGR9fSl9XHJcbmZ1bmN0aW9uIGxkKGEpe3JldHVybiBKU09OLnBhcnNlKGEsZnVuY3Rpb24oYSxjKXtyZXR1cm5cIk5hTlwiPT1jP05hTjpcIi1JbmZpbml0eVwiPT1jPy1JbmZpbml0eTpcIkluZmluaXR5XCI9PWM/SW5maW5pdHk6YyYmXCJvYmplY3RcIj09dHlwZW9mIGMmJlwiVGltZVJhbmdlc1wiPT1jLl9fdHlwZV9fP21kKGMpOmN9KX1mdW5jdGlvbiBtZChhKXtyZXR1cm57bGVuZ3RoOmEubGVuZ3RoLHN0YXJ0OmZ1bmN0aW9uKGIpe3JldHVybiBhLnN0YXJ0W2JdfSxlbmQ6ZnVuY3Rpb24oYil7cmV0dXJuIGEuZW5kW2JdfX19O2Z1bmN0aW9uIG5kKGEsYixjLGQsZSl7dGhpcy5DPWE7dGhpcy5sPWI7dGhpcy53PWM7dGhpcy5BPWQ7dGhpcy5zPWU7dGhpcy5mPXRoaXMuaj10aGlzLmg9ITE7dGhpcy52PVwiXCI7dGhpcy5hPXRoaXMuaT1udWxsO3RoaXMuYj17dmlkZW86e30scGxheWVyOnt9fTt0aGlzLm09MDt0aGlzLmM9e307dGhpcy5nPW51bGx9az1uZC5wcm90b3R5cGU7ay5vPWZ1bmN0aW9uKCl7b2QodGhpcyk7dGhpcy5hJiYodGhpcy5hLnN0b3AoZnVuY3Rpb24oKXt9LGZ1bmN0aW9uKCl7fSksdGhpcy5hPW51bGwpO3RoaXMuQT10aGlzLnc9dGhpcy5sPW51bGw7dGhpcy5mPXRoaXMuaj10aGlzLmg9ITE7dGhpcy5nPXRoaXMuYz10aGlzLmI9dGhpcy5hPXRoaXMuaT1udWxsO3JldHVybiBQcm9taXNlLnJlc29sdmUoKX07ay5OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZn07ay4kYT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnZ9O1xyXG5rLmluaXQ9ZnVuY3Rpb24oKXtpZih3aW5kb3cuY2hyb21lJiZjaHJvbWUuY2FzdCYmY2hyb21lLmNhc3QuaXNBdmFpbGFibGUpe2RlbGV0ZSB3aW5kb3cuX19vbkdDYXN0QXBpQXZhaWxhYmxlO3RoaXMuaD0hMDt0aGlzLmwoKTt2YXIgYT1uZXcgY2hyb21lLmNhc3QuU2Vzc2lvblJlcXVlc3QodGhpcy5DKSxhPW5ldyBjaHJvbWUuY2FzdC5BcGlDb25maWcoYSx0aGlzLmNjLmJpbmQodGhpcyksdGhpcy5qYy5iaW5kKHRoaXMpLFwib3JpZ2luX3Njb3BlZFwiKTtjaHJvbWUuY2FzdC5pbml0aWFsaXplKGEsZnVuY3Rpb24oKXt9LGZ1bmN0aW9uKCl7fSl9ZWxzZSB3aW5kb3cuX19vbkdDYXN0QXBpQXZhaWxhYmxlPWZ1bmN0aW9uKGEpe2EmJnRoaXMuaW5pdCgpfS5iaW5kKHRoaXMpfTtrLmJiPWZ1bmN0aW9uKGEpe3RoaXMuaT1hO3RoaXMuZiYmcGQodGhpcyx7dHlwZTpcImFwcERhdGFcIixhcHBEYXRhOnRoaXMuaX0pfTtcclxuay5jYXN0PWZ1bmN0aW9uKGEpe2lmKCF0aGlzLmgpcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBxKDgsOEUzKSk7aWYoIXRoaXMuailyZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IHEoOCw4MDAxKSk7aWYodGhpcy5mKXJldHVybiBQcm9taXNlLnJlamVjdChuZXcgcSg4LDgwMDIpKTt0aGlzLmc9bmV3IHc7Y2hyb21lLmNhc3QucmVxdWVzdFNlc3Npb24odGhpcy5ZYS5iaW5kKHRoaXMsYSksdGhpcy5vYi5iaW5kKHRoaXMpKTtyZXR1cm4gdGhpcy5nfTtcclxuay5nZXQ9ZnVuY3Rpb24oYSxiKXtpZihcInZpZGVvXCI9PWEpe2lmKDA8PWRkLmluZGV4T2YoYikpcmV0dXJuIHRoaXMuemIuYmluZCh0aGlzLGEsYil9ZWxzZSBpZihcInBsYXllclwiPT1hKXtpZigwPD1pZC5pbmRleE9mKGIpKXJldHVybiB0aGlzLnpiLmJpbmQodGhpcyxhLGIpO2lmKDA8PWpkLmluZGV4T2YoYikpcmV0dXJuIHRoaXMueGMuYmluZCh0aGlzLGEsYik7aWYoMDw9ZmQuaW5kZXhPZihiKSlyZXR1cm4gdGhpcy53Yi5iaW5kKHRoaXMsYSxiKX1yZXR1cm4gdGhpcy53YihhLGIpfTtrLnNldD1mdW5jdGlvbihhLGIsYyl7dGhpcy5iW2FdW2JdPWM7cGQodGhpcyx7dHlwZTpcInNldFwiLHRhcmdldE5hbWU6YSxwcm9wZXJ0eTpiLHZhbHVlOmN9KX07XHJcbmsuWWE9ZnVuY3Rpb24oYSxiKXt0aGlzLmE9Yjt0aGlzLmEuYWRkVXBkYXRlTGlzdGVuZXIodGhpcy5wYi5iaW5kKHRoaXMpKTt0aGlzLmEuYWRkTWVzc2FnZUxpc3RlbmVyKFwidXJuOngtY2FzdDpjb20uZ29vZ2xlLnNoYWthLnYyXCIsdGhpcy5kYy5iaW5kKHRoaXMpKTt0aGlzLnBiKCk7cGQodGhpcyx7dHlwZTpcImluaXRcIixpbml0U3RhdGU6YSxhcHBEYXRhOnRoaXMuaX0pO3RoaXMuZy5yZXNvbHZlKCl9O2sub2I9ZnVuY3Rpb24oYSl7dmFyIGI9ODAwMztzd2l0Y2goYS5jb2RlKXtjYXNlIFwiY2FuY2VsXCI6Yj04MDA0O2JyZWFrO2Nhc2UgXCJ0aW1lb3V0XCI6Yj04MDA1O2JyZWFrO2Nhc2UgXCJyZWNlaXZlcl91bmF2YWlsYWJsZVwiOmI9ODAwNn10aGlzLmcucmVqZWN0KG5ldyBxKDgsYixhKSl9O2sud2I9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5iW2FdW2JdfTtcclxuay56Yj1mdW5jdGlvbihhLGIpe3BkKHRoaXMse3R5cGU6XCJjYWxsXCIsdGFyZ2V0TmFtZTphLG1ldGhvZE5hbWU6YixhcmdzOkFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywyKX0pfTtrLnhjPWZ1bmN0aW9uKGEsYil7dmFyIGM9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDIpLGQ9bmV3IHcsZT10aGlzLm0udG9TdHJpbmcoKTt0aGlzLm0rKzt0aGlzLmNbZV09ZDtwZCh0aGlzLHt0eXBlOlwiYXN5bmNDYWxsXCIsdGFyZ2V0TmFtZTphLG1ldGhvZE5hbWU6YixhcmdzOmMsaWQ6ZX0pO3JldHVybiBkfTtrLmNjPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMucygpO3RoaXMuZz1uZXcgdzt0aGlzLllhKGIsYSl9O2suamM9ZnVuY3Rpb24oYSl7dGhpcy5qPVwiYXZhaWxhYmxlXCI9PWE7dGhpcy5sKCl9O1xyXG5rLnBiPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5hP1wiY29ubmVjdGVkXCI9PXRoaXMuYS5zdGF0dXM6ITE7aWYodGhpcy5mJiYhYSl7dGhpcy5BKCk7Zm9yKHZhciBiIGluIHRoaXMuYil0aGlzLmJbYl09e307b2QodGhpcyl9dGhpcy52PSh0aGlzLmY9YSk/dGhpcy5hLnJlY2VpdmVyLmZyaWVuZGx5TmFtZTpcIlwiO3RoaXMubCgpfTtmdW5jdGlvbiBvZChhKXtmb3IodmFyIGIgaW4gYS5jKXt2YXIgYz1hLmNbYl07ZGVsZXRlIGEuY1tiXTtjLnJlamVjdChuZXcgcSg3LDdFMykpfX1cclxuay5kYz1mdW5jdGlvbihhLGIpe3ZhciBjPWxkKGIpO3N3aXRjaChjLnR5cGUpe2Nhc2UgXCJldmVudFwiOnZhciBkPWMudGFyZ2V0TmFtZSxlPWMuZXZlbnQ7dGhpcy53KGQsbmV3IEgoZS50eXBlLGUpKTticmVhaztjYXNlIFwidXBkYXRlXCI6ZT1jLnVwZGF0ZTtmb3IoZCBpbiBlKXt2YXIgYz10aGlzLmJbZF18fHt9LGY7Zm9yKGYgaW4gZVtkXSljW2ZdPWVbZF1bZl19YnJlYWs7Y2FzZSBcImFzeW5jQ29tcGxldGVcIjppZihkPWMuaWQsZj1jLmVycm9yLGM9dGhpcy5jW2RdLGRlbGV0ZSB0aGlzLmNbZF0sYylpZihmKXtkPW5ldyBxKGYuY2F0ZWdvcnksZi5jb2RlKTtmb3IoZSBpbiBmKWRbZV09ZltlXTtjLnJlamVjdChkKX1lbHNlIGMucmVzb2x2ZSgpfX07ZnVuY3Rpb24gcGQoYSxiKXt2YXIgYz1rZChiKTthLmEuc2VuZE1lc3NhZ2UoXCJ1cm46eC1jYXN0OmNvbS5nb29nbGUuc2hha2EudjJcIixjLGZ1bmN0aW9uKCl7fSxoYSl9O2Z1bmN0aW9uIEooYSxiLGMpe3AuY2FsbCh0aGlzKTt0aGlzLmM9YTt0aGlzLmI9Yjt0aGlzLmg9dGhpcy5mPXRoaXMuZz10aGlzLmk9dGhpcy5qPW51bGw7dGhpcy5hPW5ldyBuZChjLHRoaXMuTWMuYmluZCh0aGlzKSx0aGlzLk5jLmJpbmQodGhpcyksdGhpcy5PYy5iaW5kKHRoaXMpLHRoaXMubWIuYmluZCh0aGlzKSk7cWQodGhpcyl9YmEoSik7bChcInNoYWthLmNhc3QuQ2FzdFByb3h5XCIsSik7Si5wcm90b3R5cGUubz1mdW5jdGlvbigpe3ZhciBhPVt0aGlzLmg/dGhpcy5oLm8oKTpudWxsLHRoaXMuYj90aGlzLmIubygpOm51bGwsdGhpcy5hP3RoaXMuYS5vKCk6bnVsbF07dGhpcy5hPXRoaXMuaD10aGlzLmk9dGhpcy5qPXRoaXMuYj10aGlzLmM9bnVsbDtyZXR1cm4gUHJvbWlzZS5hbGwoYSl9O0oucHJvdG90eXBlLmRlc3Ryb3k9Si5wcm90b3R5cGUubztKLnByb3RvdHlwZS5WYj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmp9O0oucHJvdG90eXBlLmdldFZpZGVvPUoucHJvdG90eXBlLlZiO1xyXG5KLnByb3RvdHlwZS5UYj1mdW5jdGlvbigpe3JldHVybiB0aGlzLml9O0oucHJvdG90eXBlLmdldFBsYXllcj1KLnByb3RvdHlwZS5UYjtKLnByb3RvdHlwZS5MYj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmE/dGhpcy5hLmgmJnRoaXMuYS5qOiExfTtKLnByb3RvdHlwZS5jYW5DYXN0PUoucHJvdG90eXBlLkxiO0oucHJvdG90eXBlLk49ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hP3RoaXMuYS5OKCk6ITF9O0oucHJvdG90eXBlLmlzQ2FzdGluZz1KLnByb3RvdHlwZS5OO0oucHJvdG90eXBlLiRhPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYT90aGlzLmEuJGEoKTpcIlwifTtKLnByb3RvdHlwZS5yZWNlaXZlck5hbWU9Si5wcm90b3R5cGUuJGE7Si5wcm90b3R5cGUuY2FzdD1mdW5jdGlvbigpe3ZhciBhPXRoaXMubWIoKTtyZXR1cm4gdGhpcy5hLmNhc3QoYSkudGhlbihmdW5jdGlvbigpe3JldHVybiB0aGlzLmIuZ2IoKX0uYmluZCh0aGlzKSl9O0oucHJvdG90eXBlLmNhc3Q9Si5wcm90b3R5cGUuY2FzdDtcclxuSi5wcm90b3R5cGUuYmI9ZnVuY3Rpb24oYSl7dGhpcy5hLmJiKGEpfTtKLnByb3RvdHlwZS5zZXRBcHBEYXRhPUoucHJvdG90eXBlLmJiO0oucHJvdG90eXBlLlVjPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5hO2lmKGEuZil7dmFyIGI9YS5zKCk7Y2hyb21lLmNhc3QucmVxdWVzdFNlc3Npb24oYS5ZYS5iaW5kKGEsYiksYS5vYi5iaW5kKGEpKX19O0oucHJvdG90eXBlLnN1Z2dlc3REaXNjb25uZWN0PUoucHJvdG90eXBlLlVjO1xyXG5mdW5jdGlvbiBxZChhKXthLmEuaW5pdCgpO2EuaD1uZXcgejskYy5mb3JFYWNoKGZ1bmN0aW9uKGEpe0IodGhpcy5oLHRoaXMuYyxhLHRoaXMuJGMuYmluZCh0aGlzKSl9LmJpbmQoYSkpO2VkLmZvckVhY2goZnVuY3Rpb24oYSl7Qih0aGlzLmgsdGhpcy5iLGEsdGhpcy50Yy5iaW5kKHRoaXMpKX0uYmluZChhKSk7YS5qPXt9O2Zvcih2YXIgYiBpbiBhLmMpT2JqZWN0LmRlZmluZVByb3BlcnR5KGEuaixiLHtjb25maWd1cmFibGU6ITEsZW51bWVyYWJsZTohMCxnZXQ6YS5aYy5iaW5kKGEsYiksc2V0OmEuYWQuYmluZChhLGIpfSk7YS5pPXt9O2ZvcihiIGluIGEuYilPYmplY3QuZGVmaW5lUHJvcGVydHkoYS5pLGIse2NvbmZpZ3VyYWJsZTohMSxlbnVtZXJhYmxlOiEwLGdldDphLnNjLmJpbmQoYSxiKX0pO2EuZz1uZXcgcDthLmcuUz1hLmo7YS5mPW5ldyBwO2EuZi5TPWEuaX1rPUoucHJvdG90eXBlO1xyXG5rLm1iPWZ1bmN0aW9uKCl7dmFyIGE9e3ZpZGVvOnt9LHBsYXllcjp7fSxwbGF5ZXJBZnRlckxvYWQ6e30sbWFuaWZlc3Q6dGhpcy5iLm5hLHN0YXJ0VGltZTpudWxsfTt0aGlzLmMucGF1c2UoKTtjZC5mb3JFYWNoKGZ1bmN0aW9uKGIpe2EudmlkZW9bYl09dGhpcy5jW2JdfS5iaW5kKHRoaXMpKTt0aGlzLmMuZW5kZWR8fChhLnN0YXJ0VGltZT10aGlzLmMuY3VycmVudFRpbWUpO2dkLmZvckVhY2goZnVuY3Rpb24oYil7dmFyIGM9YlsxXTtiPXRoaXMuYltiWzBdXSgpO2EucGxheWVyW2NdPWJ9LmJpbmQodGhpcykpO2hkLmZvckVhY2goZnVuY3Rpb24oYil7dmFyIGM9YlsxXTtiPXRoaXMuYltiWzBdXSgpO2EucGxheWVyQWZ0ZXJMb2FkW2NdPWJ9LmJpbmQodGhpcykpO3JldHVybiBhfTtrLk1jPWZ1bmN0aW9uKCl7dGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBIKFwiY2FzdHN0YXR1c2NoYW5nZWRcIikpfTtcclxuay5PYz1mdW5jdGlvbigpe2dkLmZvckVhY2goZnVuY3Rpb24oYSl7dmFyIGI9YVsxXTthPXRoaXMuYS5nZXQoXCJwbGF5ZXJcIixhWzBdKSgpO3RoaXMuYltiXShhKX0uYmluZCh0aGlzKSk7dmFyIGE9dGhpcy5hLmdldChcInBsYXllclwiLFwiZ2V0TWFuaWZlc3RVcmlcIikoKSxiPXRoaXMuYS5nZXQoXCJ2aWRlb1wiLFwiZW5kZWRcIiksYz1Qcm9taXNlLnJlc29sdmUoKSxkPXRoaXMuYy5hdXRvcGxheSxlPW51bGw7Ynx8KGU9dGhpcy5hLmdldChcInZpZGVvXCIsXCJjdXJyZW50VGltZVwiKSk7YSYmKHRoaXMuYy5hdXRvcGxheT0hMSxjPXRoaXMuYi5sb2FkKGEsZSksY1tcImNhdGNoXCJdKGZ1bmN0aW9uKGEpe3RoaXMuYi5kaXNwYXRjaEV2ZW50KG5ldyBIKFwiZXJyb3JcIix7ZGV0YWlsOmF9KSl9LmJpbmQodGhpcykpKTt2YXIgZj17fTtjZC5mb3JFYWNoKGZ1bmN0aW9uKGEpe2ZbYV09dGhpcy5hLmdldChcInZpZGVvXCIsYSl9LmJpbmQodGhpcykpO2MudGhlbihmdW5jdGlvbigpe2NkLmZvckVhY2goZnVuY3Rpb24oYSl7dGhpcy5jW2FdPVxyXG5mW2FdfS5iaW5kKHRoaXMpKTtoZC5mb3JFYWNoKGZ1bmN0aW9uKGEpe3ZhciBiPWFbMV07YT10aGlzLmEuZ2V0KFwicGxheWVyXCIsYVswXSkoKTt0aGlzLmJbYl0oYSl9LmJpbmQodGhpcykpO3RoaXMuYy5hdXRvcGxheT1kO2EmJnRoaXMuYy5wbGF5KCl9LmJpbmQodGhpcykpfTtcclxuay5aYz1mdW5jdGlvbihhKXtpZihcImFkZEV2ZW50TGlzdGVuZXJcIj09YSlyZXR1cm4gdGhpcy5nLmFkZEV2ZW50TGlzdGVuZXIuYmluZCh0aGlzLmcpO2lmKFwicmVtb3ZlRXZlbnRMaXN0ZW5lclwiPT1hKXJldHVybiB0aGlzLmcucmVtb3ZlRXZlbnRMaXN0ZW5lci5iaW5kKHRoaXMuZyk7aWYodGhpcy5hLk4oKSYmIU9iamVjdC5rZXlzKHRoaXMuYS5iLnZpZGVvKS5sZW5ndGgpe3ZhciBiPXRoaXMuY1thXTtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBiKXJldHVybiBifXJldHVybiB0aGlzLmEuTigpP3RoaXMuYS5nZXQoXCJ2aWRlb1wiLGEpOihiPXRoaXMuY1thXSxcImZ1bmN0aW9uXCI9PXR5cGVvZiBiJiYoYj1iLmJpbmQodGhpcy5jKSksYil9O2suYWQ9ZnVuY3Rpb24oYSxiKXt0aGlzLmEuTigpP3RoaXMuYS5zZXQoXCJ2aWRlb1wiLGEsYik6dGhpcy5jW2FdPWJ9O2suJGM9ZnVuY3Rpb24oYSl7dGhpcy5hLk4oKXx8dGhpcy5nLmRpc3BhdGNoRXZlbnQobmV3IEgoYS50eXBlLGEpKX07XHJcbmsuc2M9ZnVuY3Rpb24oYSl7cmV0dXJuXCJhZGRFdmVudExpc3RlbmVyXCI9PWE/dGhpcy5mLmFkZEV2ZW50TGlzdGVuZXIuYmluZCh0aGlzLmYpOlwicmVtb3ZlRXZlbnRMaXN0ZW5lclwiPT1hP3RoaXMuZi5yZW1vdmVFdmVudExpc3RlbmVyLmJpbmQodGhpcy5mKTpcImdldE5ldHdvcmtpbmdFbmdpbmVcIj09YT90aGlzLmIubmIuYmluZCh0aGlzLmIpOnRoaXMuYS5OKCkmJiFPYmplY3Qua2V5cyh0aGlzLmEuYi52aWRlbykubGVuZ3RoJiYwPD1mZC5pbmRleE9mKGEpfHwhdGhpcy5hLk4oKT8oYT10aGlzLmJbYV0sYS5iaW5kKHRoaXMuYikpOnRoaXMuYS5nZXQoXCJwbGF5ZXJcIixhKX07ay50Yz1mdW5jdGlvbihhKXt0aGlzLmEuTigpfHx0aGlzLmYuZGlzcGF0Y2hFdmVudChhKX07ay5OYz1mdW5jdGlvbihhLGIpe3RoaXMuYS5OKCkmJihcInZpZGVvXCI9PWE/dGhpcy5nLmRpc3BhdGNoRXZlbnQoYik6XCJwbGF5ZXJcIj09YSYmdGhpcy5mLmRpc3BhdGNoRXZlbnQoYikpfTtmdW5jdGlvbiBMKGEsYixjKXtwLmNhbGwodGhpcyk7dGhpcy5iPWE7dGhpcy5hPWI7dGhpcy5pPXt2aWRlbzphLHBsYXllcjpifTt0aGlzLmo9Y3x8ZnVuY3Rpb24oKXt9O3RoaXMuaD0hMTt0aGlzLmc9ITA7dGhpcy5jPXRoaXMuZj1udWxsO3JkKHRoaXMpfWJhKEwpO2woXCJzaGFrYS5jYXN0LkNhc3RSZWNlaXZlclwiLEwpO0wucHJvdG90eXBlLlhiPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaH07TC5wcm90b3R5cGUuaXNDb25uZWN0ZWQ9TC5wcm90b3R5cGUuWGI7TC5wcm90b3R5cGUuWWI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nfTtMLnByb3RvdHlwZS5pc0lkbGU9TC5wcm90b3R5cGUuWWI7XHJcbkwucHJvdG90eXBlLm89ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmE/dGhpcy5hLm8oKTpQcm9taXNlLnJlc29sdmUoKTtudWxsIT10aGlzLmMmJndpbmRvdy5jbGVhclRpbWVvdXQodGhpcy5jKTt0aGlzLmo9dGhpcy5pPXRoaXMuYT10aGlzLmI9bnVsbDt0aGlzLmg9ITE7dGhpcy5nPSEwO3RoaXMuYz10aGlzLmY9bnVsbDtyZXR1cm4gYS50aGVuKGZ1bmN0aW9uKCl7Y2FzdC5yZWNlaXZlci5DYXN0UmVjZWl2ZXJNYW5hZ2VyLmdldEluc3RhbmNlKCkuc3RvcCgpfSl9O0wucHJvdG90eXBlLmRlc3Ryb3k9TC5wcm90b3R5cGUubztcclxuZnVuY3Rpb24gcmQoYSl7dmFyIGI9Y2FzdC5yZWNlaXZlci5DYXN0UmVjZWl2ZXJNYW5hZ2VyLmdldEluc3RhbmNlKCk7Yi5vblNlbmRlckNvbm5lY3RlZD1hLnViLmJpbmQoYSk7Yi5vblNlbmRlckRpc2Nvbm5lY3RlZD1hLnViLmJpbmQoYSk7Yi5vblN5c3RlbVZvbHVtZUNoYW5nZWQ9YS5SYi5iaW5kKGEpO2EuZj1iLmdldENhc3RNZXNzYWdlQnVzKFwidXJuOngtY2FzdDpjb20uZ29vZ2xlLnNoYWthLnYyXCIpO2EuZi5vbk1lc3NhZ2U9YS5lYy5iaW5kKGEpO2Iuc3RhcnQoKTskYy5mb3JFYWNoKGZ1bmN0aW9uKGEpe3RoaXMuYi5hZGRFdmVudExpc3RlbmVyKGEsdGhpcy54Yi5iaW5kKHRoaXMsXCJ2aWRlb1wiKSl9LmJpbmQoYSkpO2VkLmZvckVhY2goZnVuY3Rpb24oYSl7dGhpcy5hLmFkZEV2ZW50TGlzdGVuZXIoYSx0aGlzLnhiLmJpbmQodGhpcyxcInBsYXllclwiKSl9LmJpbmQoYSkpO2EuYS5GYigxOTIwLDEwODApO2EuYS5hZGRFdmVudExpc3RlbmVyKFwibG9hZGluZ1wiLGZ1bmN0aW9uKCl7dGhpcy5nPVxyXG4hMTtzZCh0aGlzKX0uYmluZChhKSk7YS5hLmFkZEV2ZW50TGlzdGVuZXIoXCJ1bmxvYWRpbmdcIixmdW5jdGlvbigpe3RoaXMuZz0hMDtzZCh0aGlzKX0uYmluZChhKSk7YS5iLmFkZEV2ZW50TGlzdGVuZXIoXCJlbmRlZFwiLGZ1bmN0aW9uKCl7d2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKXt0aGlzLmImJnRoaXMuYi5lbmRlZCYmKHRoaXMuZz0hMCxzZCh0aGlzKSl9LmJpbmQodGhpcyksNUUzKX0uYmluZChhKSl9az1MLnByb3RvdHlwZTtrLnViPWZ1bmN0aW9uKCl7dGhpcy5oPSEhY2FzdC5yZWNlaXZlci5DYXN0UmVjZWl2ZXJNYW5hZ2VyLmdldEluc3RhbmNlKCkuZ2V0U2VuZGVycygpLmxlbmd0aDtzZCh0aGlzKX07ZnVuY3Rpb24gc2QoYSl7UHJvbWlzZS5yZXNvbHZlKCkudGhlbihmdW5jdGlvbigpe3RoaXMuZGlzcGF0Y2hFdmVudChuZXcgSChcImNhc3RzdGF0dXNjaGFuZ2VkXCIpKX0uYmluZChhKSl9XHJcbmZ1bmN0aW9uIHRkKGEsYixjKXtmb3IodmFyIGQgaW4gYi5wbGF5ZXIpYS5hW2RdKGIucGxheWVyW2RdKTthLmooYyk7Yz1Qcm9taXNlLnJlc29sdmUoKTt2YXIgZT1hLmIuYXV0b3BsYXk7Yi5tYW5pZmVzdCYmKGEuYi5hdXRvcGxheT0hMSxjPWEuYS5sb2FkKGIubWFuaWZlc3QsYi5zdGFydFRpbWUpLGNbXCJjYXRjaFwiXShmdW5jdGlvbihhKXt0aGlzLmEuZGlzcGF0Y2hFdmVudChuZXcgSChcImVycm9yXCIse2RldGFpbDphfSkpfS5iaW5kKGEpKSk7Yy50aGVuKGZ1bmN0aW9uKCl7Zm9yKHZhciBhIGluIGIudmlkZW8pe3ZhciBjPWIudmlkZW9bYV07dGhpcy5iW2FdPWN9Zm9yKGEgaW4gYi5wbGF5ZXJBZnRlckxvYWQpYz1iLnBsYXllckFmdGVyTG9hZFthXSx0aGlzLmFbYV0oYyk7dGhpcy5iLmF1dG9wbGF5PWU7Yi5tYW5pZmVzdCYmdGhpcy5iLnBsYXkoKX0uYmluZChhKSl9XHJcbmsueGI9ZnVuY3Rpb24oYSxiKXt0aGlzLlphKCk7dWQodGhpcyx7dHlwZTpcImV2ZW50XCIsdGFyZ2V0TmFtZTphLGV2ZW50OmJ9KX07ay5aYT1mdW5jdGlvbigpe251bGwhPXRoaXMuYyYmd2luZG93LmNsZWFyVGltZW91dCh0aGlzLmMpO3RoaXMuYz13aW5kb3cuc2V0VGltZW91dCh0aGlzLlphLmJpbmQodGhpcyksNTAwKTt2YXIgYT17dmlkZW86e30scGxheWVyOnt9fTthZC5mb3JFYWNoKGZ1bmN0aW9uKGIpe2EudmlkZW9bYl09dGhpcy5iW2JdfS5iaW5kKHRoaXMpKTtmZC5mb3JFYWNoKGZ1bmN0aW9uKGIpe2EucGxheWVyW2JdPXRoaXMuYVtiXSgpfS5iaW5kKHRoaXMpKTt2YXIgYj1jYXN0LnJlY2VpdmVyLkNhc3RSZWNlaXZlck1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5nZXRTeXN0ZW1Wb2x1bWUoKTtiJiYoYS52aWRlby52b2x1bWU9Yi5sZXZlbCxhLnZpZGVvLm11dGVkPWIubXV0ZWQpO3VkKHRoaXMse3R5cGU6XCJ1cGRhdGVcIix1cGRhdGU6YX0pfTtcclxuay5SYj1mdW5jdGlvbigpe3ZhciBhPWNhc3QucmVjZWl2ZXIuQ2FzdFJlY2VpdmVyTWFuYWdlci5nZXRJbnN0YW5jZSgpLmdldFN5c3RlbVZvbHVtZSgpO2EmJnVkKHRoaXMse3R5cGU6XCJ1cGRhdGVcIix1cGRhdGU6e3ZpZGVvOnt2b2x1bWU6YS5sZXZlbCxtdXRlZDphLm11dGVkfX19KTt1ZCh0aGlzLHt0eXBlOlwiZXZlbnRcIix0YXJnZXROYW1lOlwidmlkZW9cIixldmVudDp7dHlwZTpcInZvbHVtZWNoYW5nZVwifX0pfTtcclxuay5lYz1mdW5jdGlvbihhKXt2YXIgYj1sZChhLmRhdGEpO3N3aXRjaChiLnR5cGUpe2Nhc2UgXCJpbml0XCI6dGQodGhpcyxiLmluaXRTdGF0ZSxiLmFwcERhdGEpO3RoaXMuWmEoKTticmVhaztjYXNlIFwiYXBwRGF0YVwiOnRoaXMuaihiLmFwcERhdGEpO2JyZWFrO2Nhc2UgXCJzZXRcIjp2YXIgYz1iLnRhcmdldE5hbWUsZD1iLnByb3BlcnR5LGU9Yi52YWx1ZTtpZihcInZpZGVvXCI9PWMpaWYoYj1jYXN0LnJlY2VpdmVyLkNhc3RSZWNlaXZlck1hbmFnZXIuZ2V0SW5zdGFuY2UoKSxcInZvbHVtZVwiPT1kKXtiLnNldFN5c3RlbVZvbHVtZUxldmVsKGUpO2JyZWFrfWVsc2UgaWYoXCJtdXRlZFwiPT1kKXtiLnNldFN5c3RlbVZvbHVtZU11dGVkKGUpO2JyZWFrfXRoaXMuaVtjXVtkXT1lO2JyZWFrO2Nhc2UgXCJjYWxsXCI6Yz1iLnRhcmdldE5hbWU7ZD1iLm1ldGhvZE5hbWU7ZT1iLmFyZ3M7Yz10aGlzLmlbY107Y1tkXS5hcHBseShjLGUpO2JyZWFrO2Nhc2UgXCJhc3luY0NhbGxcIjpjPWIudGFyZ2V0TmFtZSxcclxuZD1iLm1ldGhvZE5hbWUsZT1iLmFyZ3MsYj1iLmlkLGE9YS5zZW5kZXJJZCxjPXRoaXMuaVtjXSxjW2RdLmFwcGx5KGMsZSkudGhlbih0aGlzLkRiLmJpbmQodGhpcyxhLGIsbnVsbCksdGhpcy5EYi5iaW5kKHRoaXMsYSxiKSl9fTtrLkRiPWZ1bmN0aW9uKGEsYixjKXt1ZCh0aGlzLHt0eXBlOlwiYXN5bmNDb21wbGV0ZVwiLGlkOmIsZXJyb3I6Y30sYSl9O2Z1bmN0aW9uIHVkKGEsYixjKXthLmgmJihiPWtkKGIpLGM/YS5mLmdldENhc3RDaGFubmVsKGMpLnNlbmQoYik6YS5mLmJyb2FkY2FzdChiKSl9O2Z1bmN0aW9uIHZkKGEsYil7dmFyIGM9TShhLGIpO3JldHVybiAxIT1jLmxlbmd0aD9udWxsOmNbMF19ZnVuY3Rpb24gTShhLGIpe3JldHVybiBBcnJheS5wcm90b3R5cGUuZmlsdGVyLmNhbGwoYS5jaGlsZE5vZGVzLGZ1bmN0aW9uKGEpe3JldHVybiBhLnRhZ05hbWU9PWJ9KX1mdW5jdGlvbiB3ZChhKXtyZXR1cm4oYT1hLmZpcnN0Q2hpbGQpJiZhLm5vZGVUeXBlPT1Ob2RlLlRFWFRfTk9ERT9hLm5vZGVWYWx1ZS50cmltKCk6bnVsbH1mdW5jdGlvbiBOKGEsYixjLGQpe3ZhciBlPW51bGw7YT1hLmdldEF0dHJpYnV0ZShiKTtudWxsIT1hJiYoZT1jKGEpKTtyZXR1cm4gbnVsbD09ZT92b2lkIDAhPT1kP2Q6bnVsbDplfWZ1bmN0aW9uIHhkKGEpe2lmKCFhKXJldHVybiBudWxsO2E9RGF0ZS5wYXJzZShhKTtyZXR1cm4gaXNOYU4oYSk/bnVsbDpNYXRoLmZsb29yKGEvMUUzKX1cclxuZnVuY3Rpb24gTyhhKXtpZighYSlyZXR1cm4gbnVsbDthPS9eUCg/OihbMC05XSopWSk/KD86KFswLTldKilNKT8oPzooWzAtOV0qKUQpPyg/OlQoPzooWzAtOV0qKUgpPyg/OihbMC05XSopTSk/KD86KFswLTkuXSopUyk/KT8kLy5leGVjKGEpO2lmKCFhKXJldHVybiBudWxsO2E9MzE1MzZFMypOdW1iZXIoYVsxXXx8bnVsbCkrMjU5MkUzKk51bWJlcihhWzJdfHxudWxsKSs4NjQwMCpOdW1iZXIoYVszXXx8bnVsbCkrMzYwMCpOdW1iZXIoYVs0XXx8bnVsbCkrNjAqTnVtYmVyKGFbNV18fG51bGwpK051bWJlcihhWzZdfHxudWxsKTtyZXR1cm4gaXNGaW5pdGUoYSk/YTpudWxsfWZ1bmN0aW9uIHlkKGEpe3ZhciBiPS8oWzAtOV0rKS0oWzAtOV0rKS8uZXhlYyhhKTtpZighYilyZXR1cm4gbnVsbDthPU51bWJlcihiWzFdKTtpZighaXNGaW5pdGUoYSkpcmV0dXJuIG51bGw7Yj1OdW1iZXIoYlsyXSk7cmV0dXJuIGlzRmluaXRlKGIpP3tzdGFydDphLGVuZDpifTpudWxsfVxyXG5mdW5jdGlvbiB6ZChhKXthPU51bWJlcihhKTtyZXR1cm4gYSUxP251bGw6YX1mdW5jdGlvbiBBZChhKXthPU51bWJlcihhKTtyZXR1cm4hKGElMSkmJjA8YT9hOm51bGx9ZnVuY3Rpb24gQmQoYSl7YT1OdW1iZXIoYSk7cmV0dXJuIShhJTEpJiYwPD1hP2E6bnVsbH07dmFyIENkPXtcInVybjp1dWlkOjEwNzdlZmVjLWMwYjItNGQwMi1hY2UzLTNjMWU1MmUyZmI0YlwiOlwib3JnLnczLmNsZWFya2V5XCIsXCJ1cm46dXVpZDplZGVmOGJhOS03OWQ2LTRhY2UtYTNjOC0yN2RjZDUxZDIxZWRcIjpcImNvbS53aWRldmluZS5hbHBoYVwiLFwidXJuOnV1aWQ6OWEwNGYwNzktOTg0MC00Mjg2LWFiOTItZTY1YmUwODg1Zjk1XCI6XCJjb20ubWljcm9zb2Z0LnBsYXlyZWFkeVwiLFwidXJuOnV1aWQ6ZjIzOWU3NjktZWZhMy00ODUwLTljMTYtYTkwM2M2OTMyZWZiXCI6XCJjb20uYWRvYmUucHJpbWV0aW1lXCJ9O1xyXG5mdW5jdGlvbiBEZChhLGIpe3ZhciBjPUVkKGEpLGQ9bnVsbCxlPWMuZmlsdGVyKGZ1bmN0aW9uKGEpe3JldHVyblwidXJuOm1wZWc6ZGFzaDptcDRwcm90ZWN0aW9uOjIwMTFcIj09YS5DYj8oZD1hLmluaXR8fGQsITEpOiEwfSksZj1jLm1hcChmdW5jdGlvbihhKXtyZXR1cm4gYS5rZXlJZH0pLmZpbHRlcihEYSksZz1udWxsO2lmKDA8Zi5sZW5ndGgmJihnPWZbMF0sZi5zb21lKEVhKGcpKSkpdGhyb3cgbmV3IHEoNCw0MDEwKTtmPVtdOzA8ZS5sZW5ndGg/KGY9RmQoZCxiLGUpLGYubGVuZ3RofHwoZj1bSGQoXCJcIixkKV0pKTowPGMubGVuZ3RoJiYoZj1DKENkKS5tYXAoZnVuY3Rpb24oYSl7cmV0dXJuIEhkKGEsZCl9KSk7cmV0dXJue2tiOmcsZGQ6ZCxkcm1JbmZvczpmLGxiOiEwfX1cclxuZnVuY3Rpb24gSWQoYSxiLGMpe3ZhciBkPURkKGEsYik7aWYoYy5sYil7YT0xPT1jLmRybUluZm9zLmxlbmd0aCYmIWMuZHJtSW5mb3NbMF0ua2V5U3lzdGVtO2I9IWQuZHJtSW5mb3MubGVuZ3RoO2lmKCFjLmRybUluZm9zLmxlbmd0aHx8YSYmIWIpYy5kcm1JbmZvcz1kLmRybUluZm9zO2MubGI9ITF9ZWxzZSBpZigwPGQuZHJtSW5mb3MubGVuZ3RoJiYoYy5kcm1JbmZvcz1jLmRybUluZm9zLmZpbHRlcihmdW5jdGlvbihhKXtyZXR1cm4gZC5kcm1JbmZvcy5zb21lKGZ1bmN0aW9uKGIpe3JldHVybiBiLmtleVN5c3RlbT09YS5rZXlTeXN0ZW19KX0pLCFjLmRybUluZm9zLmxlbmd0aCkpdGhyb3cgbmV3IHEoNCw0MDA4KTtyZXR1cm4gZC5rYnx8Yy5rYn1cclxuZnVuY3Rpb24gSGQoYSxiKXtyZXR1cm57a2V5U3lzdGVtOmEsbGljZW5zZVNlcnZlclVyaTpcIlwiLGRpc3RpbmN0aXZlSWRlbnRpZmllclJlcXVpcmVkOiExLHBlcnNpc3RlbnRTdGF0ZVJlcXVpcmVkOiExLGF1ZGlvUm9idXN0bmVzczpcIlwiLHZpZGVvUm9idXN0bmVzczpcIlwiLHNlcnZlckNlcnRpZmljYXRlOm51bGwsaW5pdERhdGE6Ynx8W119fWZ1bmN0aW9uIEZkKGEsYixjKXtyZXR1cm4gYy5tYXAoZnVuY3Rpb24oYyl7dmFyIGU9Q2RbYy5DYl07cmV0dXJuIGU/W0hkKGUsYy5pbml0fHxhKV06YihjLm5vZGUpfHxbXX0pLnJlZHVjZSh0LFtdKX1cclxuZnVuY3Rpb24gRWQoYSl7cmV0dXJuIGEubWFwKGZ1bmN0aW9uKGEpe3ZhciBjPWEuZ2V0QXR0cmlidXRlKFwic2NoZW1lSWRVcmlcIiksZD1hLmdldEF0dHJpYnV0ZShcImNlbmM6ZGVmYXVsdF9LSURcIiksZT1NKGEsXCJjZW5jOnBzc2hcIikubWFwKHdkKTtpZighYylyZXR1cm4gbnVsbDtjPWMudG9Mb3dlckNhc2UoKTtpZihkJiYoZD1kLnJlcGxhY2UoLy0vZyxcIlwiKS50b0xvd2VyQ2FzZSgpLDA8PWQuaW5kZXhPZihcIiBcIikpKXRocm93IG5ldyBxKDQsNDAwOSk7dmFyIGY9W107dHJ5e2Y9ZS5tYXAoZnVuY3Rpb24oYSl7cmV0dXJue2luaXREYXRhVHlwZTpcImNlbmNcIixpbml0RGF0YTpYYShhKX19KX1jYXRjaChnKXt0aHJvdyBuZXcgcSg0LDQwMDcpO31yZXR1cm57bm9kZTphLENiOmMsa2V5SWQ6ZCxpbml0OjA8Zi5sZW5ndGg/ZjpudWxsfX0pLmZpbHRlcihEYSl9O3ZhciBKZD0xLzE1O2Z1bmN0aW9uIEtkKGEsYixjLGQsZSl7bnVsbCE9PWUmJihlPU1hdGgucm91bmQoZSkpO3ZhciBmPXtSZXByZXNlbnRhdGlvbklEOmIsTnVtYmVyOmMsQmFuZHdpZHRoOmQsVGltZTplfTtyZXR1cm4gYS5yZXBsYWNlKC9cXCQoUmVwcmVzZW50YXRpb25JRHxOdW1iZXJ8QmFuZHdpZHRofFRpbWUpPyg/OiUwKFswLTldKylkKT9cXCQvZyxmdW5jdGlvbihhLGIsYyl7aWYoXCIkJFwiPT1hKXJldHVyblwiJFwiO3ZhciBkPWZbYl07aWYobnVsbD09ZClyZXR1cm4gYTtcIlJlcHJlc2VudGF0aW9uSURcIj09YiYmYyYmKGM9dm9pZCAwKTthPWQudG9TdHJpbmcoKTtjPXdpbmRvdy5wYXJzZUludChjLDEwKXx8MTtyZXR1cm4gQXJyYXkoTWF0aC5tYXgoMCxjLWEubGVuZ3RoKSsxKS5qb2luKFwiMFwiKSthfSl9XHJcbmZ1bmN0aW9uIExkKGEsYixjKXtpZihjLmxlbmd0aCl7dmFyIGQ9Y1swXTtkLnN0YXJ0VGltZTw9SmQmJihjWzBdPW5ldyBHKGQucG9zaXRpb24sMCxkLmVuZFRpbWUsZC5hLGQuTCxkLkQpKTthfHwoYT1jW2MubGVuZ3RoLTFdLGEuc3RhcnRUaW1lPmJ8fChjW2MubGVuZ3RoLTFdPW5ldyBHKGEucG9zaXRpb24sYS5zdGFydFRpbWUsYixhLmEsYS5MLGEuRCkpKX19ZnVuY3Rpb24gUChhLGIpe2lmKCFiLmxlbmd0aClyZXR1cm4gYTt2YXIgYz1iLm1hcChmdW5jdGlvbihhKXtyZXR1cm4gbmV3IG9hKGEpfSk7cmV0dXJuIGEubWFwKGZ1bmN0aW9uKGEpe3JldHVybiBuZXcgb2EoYSl9KS5tYXAoZnVuY3Rpb24oYSl7cmV0dXJuIGMubWFwKGEucmVzb2x2ZS5iaW5kKGEpKX0pLnJlZHVjZSh0LFtdKS5tYXAoZnVuY3Rpb24oYSl7cmV0dXJuIGEudG9TdHJpbmcoKX0pfVxyXG5mdW5jdGlvbiBNZChhLGIpe3ZhciBjPVEoYSxiLFwidGltZXNjYWxlXCIpLGQ9MTtjJiYoZD1BZChjKXx8MSk7Yz1RKGEsYixcImR1cmF0aW9uXCIpOyhjPUFkKGN8fFwiXCIpKSYmKGMvPWQpO3ZhciBlPVEoYSxiLFwic3RhcnROdW1iZXJcIiksZj1RKGEsYixcInByZXNlbnRhdGlvblRpbWVPZmZzZXRcIiksZz1CZChlfHxcIlwiKTtpZihudWxsPT1lfHxudWxsPT1nKWc9MTt2YXIgaD1OZChhLGIsXCJTZWdtZW50VGltZWxpbmVcIiksZT1udWxsO2lmKGgpe2Zvcih2YXIgZT1kLG09TnVtYmVyKGYpLG49YS5ILmR1cmF0aW9ufHxJbmZpbml0eSxoPU0oaCxcIlNcIikscj1bXSx1PTAsQT0wO0E8aC5sZW5ndGg7KytBKXt2YXIgeD1oW0FdLEs9Tih4LFwidFwiLEJkKSxqYj1OKHgsXCJkXCIsQmQpLHg9Tih4LFwiclwiLHpkKTtudWxsIT1LJiYoSy09bSk7aWYoIWpiKWJyZWFrO0s9bnVsbCE9Sz9LOnU7eD14fHwwO2lmKDA+eClpZihBKzE8aC5sZW5ndGgpe3g9TihoW0ErMV0sXCJ0XCIsQmQpO2lmKG51bGw9PXgpYnJlYWs7ZWxzZSBpZihLPj1cclxueClicmVhazt4PU1hdGguY2VpbCgoeC1LKS9qYiktMX1lbHNle2lmKEluZmluaXR5PT1uKWJyZWFrO2Vsc2UgaWYoSy9lPj1uKWJyZWFrO3g9TWF0aC5jZWlsKChuKmUtSykvamIpLTF9MDxyLmxlbmd0aCYmSyE9dSYmKHJbci5sZW5ndGgtMV0uZW5kPUsvZSk7Zm9yKHZhciBHZD0wO0dkPD14OysrR2QpdT1LK2piLHIucHVzaCh7c3RhcnQ6Sy9lLGVuZDp1L2V9KSxLPXV9ZT1yfXJldHVybntJYTpkLEY6YyxpYTpnLHByZXNlbnRhdGlvblRpbWVPZmZzZXQ6TnVtYmVyKGYpL2R8fDAsQjplfX1mdW5jdGlvbiBRKGEsYixjKXtyZXR1cm5bYihhLnUpLGIoYS5QKSxiKGEuSyldLmZpbHRlcihEYSkubWFwKGZ1bmN0aW9uKGEpe3JldHVybiBhLmdldEF0dHJpYnV0ZShjKX0pLnJlZHVjZShmdW5jdGlvbihhLGIpe3JldHVybiBhfHxifSl9XHJcbmZ1bmN0aW9uIE5kKGEsYixjKXtyZXR1cm5bYihhLnUpLGIoYS5QKSxiKGEuSyldLmZpbHRlcihEYSkubWFwKGZ1bmN0aW9uKGEpe3JldHVybiB2ZChhLGMpfSkucmVkdWNlKGZ1bmN0aW9uKGEsYil7cmV0dXJuIGF8fGJ9KX07ZnVuY3Rpb24gT2QoYSl7dGhpcy5iPWE7dGhpcy5jPTA9PVBkO3RoaXMuYT0wfXZhciBQZD0xO2Z1bmN0aW9uIFFkKGEpe3JldHVybiBhLmE8YS5iLmJ5dGVMZW5ndGh9ZnVuY3Rpb24gUmQoYSl7dHJ5e3ZhciBiPWEuYi5nZXRVaW50OChhLmEpfWNhdGNoKGMpe1NkKCl9YS5hKz0xO3JldHVybiBifWZ1bmN0aW9uIFRkKGEpe3RyeXt2YXIgYj1hLmIuZ2V0VWludDE2KGEuYSxhLmMpfWNhdGNoKGMpe1NkKCl9YS5hKz0yO3JldHVybiBifWZ1bmN0aW9uIFIoYSl7dHJ5e3ZhciBiPWEuYi5nZXRVaW50MzIoYS5hLGEuYyl9Y2F0Y2goYyl7U2QoKX1hLmErPTQ7cmV0dXJuIGJ9XHJcbmZ1bmN0aW9uIFVkKGEpe3ZhciBiLGM7dHJ5e2EuYz8oYj1hLmIuZ2V0VWludDMyKGEuYSwhMCksYz1hLmIuZ2V0VWludDMyKGEuYSs0LCEwKSk6KGM9YS5iLmdldFVpbnQzMihhLmEsITEpLGI9YS5iLmdldFVpbnQzMihhLmErNCwhMSkpfWNhdGNoKGQpe1NkKCl9aWYoMjA5NzE1MTxjKXRocm93IG5ldyBxKDMsMzAwMSk7YS5hKz04O3JldHVybiBjKk1hdGgucG93KDIsMzIpK2J9ZnVuY3Rpb24gVmQoYSxiKXthLmErYj5hLmIuYnl0ZUxlbmd0aCYmU2QoKTt2YXIgYz1hLmIuYnVmZmVyLnNsaWNlKGEuYSxhLmErYik7YS5hKz1iO3JldHVybiBuZXcgVWludDhBcnJheShjKX1mdW5jdGlvbiBTKGEsYil7YS5hK2I+YS5iLmJ5dGVMZW5ndGgmJlNkKCk7YS5hKz1ifVxyXG5mdW5jdGlvbiBXZChhKXt2YXIgYj1hLmE7dHJ5e2Zvcig7UWQoYSkmJmEuYi5nZXRVaW50OChhLmEpOylhLmErPTF9Y2F0Y2goYyl7U2QoKX1iPWEuYi5idWZmZXIuc2xpY2UoYixhLmEpO2EuYSs9MTtyZXR1cm4gRChiKX1mdW5jdGlvbiBTZCgpe3Rocm93IG5ldyBxKDMsM0UzKTt9O2Z1bmN0aW9uIFhkKGEsYil7Zm9yKDtRZChiKTspe3ZhciBjPWIuYSxkPVIoYiksZT1SKGIpOzE9PWQ/ZD1VZChiKTpkfHwoZD1iLmIuYnl0ZUxlbmd0aC1jKTtpZihlPT1hKXJldHVybiBkO1MoYixkLShiLmEtYykpfXJldHVybi0xfWZ1bmN0aW9uIFlkKGEsYil7Zm9yKHZhciBjPW5ldyBPZChuZXcgRGF0YVZpZXcoYSkpLGQ9W1sxODM2MDE5NTc0LDBdLFsxOTUzNjUzMDk5LDBdLFsxODM1Mjk3MTIxLDBdLFsxODM1NjI2MDg2LDBdLFsxOTM3MDA3MjEyLDBdLFsxOTM3MDExNTU2LDhdLFtiLDBdXSxlPS0xLGY9MDtmPGQubGVuZ3RoO2YrKyl7dmFyIGc9ZFtmXVsxXSxlPVhkKGRbZl1bMF0sYyk7aWYoLTE9PWUpcmV0dXJuLTE7UyhjLGcpfXJldHVybiBlfTtmdW5jdGlvbiBaZChhLGIsYyxkKXt2YXIgZT1bXTthPW5ldyBPZChuZXcgRGF0YVZpZXcoYSkpO3ZhciBmPVhkKDE5MzYyODY4NDAsYSk7aWYoLTE9PWYpdGhyb3cgbmV3IHEoMywzMDA0KTt2YXIgZz1SZChhKTtTKGEsMyk7UyhhLDQpO3ZhciBoPVIoYSk7aWYoIWgpdGhyb3cgbmV3IHEoMywzMDA1KTt2YXIgbSxuO2c/KG09VWQoYSksbj1VZChhKSk6KG09UihhKSxuPVIoYSkpO1MoYSwyKTtnPVRkKGEpO2Q9bS1kO2I9YitmK247Zm9yKGY9MDtmPGc7ZisrKXttPVIoYSk7bj0obSYyMTQ3NDgzNjQ4KT4+PjMxO20mPTIxNDc0ODM2NDc7dmFyIHI9UihhKTtTKGEsNCk7aWYoMT09bil0aHJvdyBuZXcgcSgzLDMwMDYpO2UucHVzaChuZXcgRyhlLmxlbmd0aCxkL2gsKGQrcikvaCxmdW5jdGlvbigpe3JldHVybiBjfSxiLGIrbS0xKSk7ZCs9cjtiKz1tfXJldHVybiBlfTtmdW5jdGlvbiBUKGEpe3RoaXMuYT1hfWwoXCJzaGFrYS5tZWRpYS5TZWdtZW50SW5kZXhcIixUKTtULnByb3RvdHlwZS5vPWZ1bmN0aW9uKCl7dGhpcy5hPW51bGw7cmV0dXJuIFByb21pc2UucmVzb2x2ZSgpfTtULnByb3RvdHlwZS5kZXN0cm95PVQucHJvdG90eXBlLm87VC5wcm90b3R5cGUuZmluZD1mdW5jdGlvbihhKXtmb3IodmFyIGI9dGhpcy5hLmxlbmd0aC0xOzA8PWI7LS1iKXt2YXIgYz10aGlzLmFbYl07aWYoYT49Yy5zdGFydFRpbWUmJmE8Yy5lbmRUaW1lKXJldHVybiBjLnBvc2l0aW9ufXJldHVybiBudWxsfTtULnByb3RvdHlwZS5maW5kPVQucHJvdG90eXBlLmZpbmQ7VC5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKGEpe2lmKCF0aGlzLmEubGVuZ3RoKXJldHVybiBudWxsO2EtPXRoaXMuYVswXS5wb3NpdGlvbjtyZXR1cm4gMD5hfHxhPj10aGlzLmEubGVuZ3RoP251bGw6dGhpcy5hW2FdfTtULnByb3RvdHlwZS5nZXQ9VC5wcm90b3R5cGUuZ2V0O1xyXG5ULnByb3RvdHlwZS5XYT1mdW5jdGlvbihhKXtmb3IodmFyIGI9W10sYz0wLGQ9MDtjPHRoaXMuYS5sZW5ndGgmJmQ8YS5sZW5ndGg7KXt2YXIgZT10aGlzLmFbY10sZj1hW2RdO2Uuc3RhcnRUaW1lPGYuc3RhcnRUaW1lPyhiLnB1c2goZSksYysrKTooZS5zdGFydFRpbWU+Zi5zdGFydFRpbWV8fCguMTxNYXRoLmFicyhlLmVuZFRpbWUtZi5lbmRUaW1lKT9iLnB1c2goZik6Yi5wdXNoKGUpLGMrKyksZCsrKX1mb3IoO2M8dGhpcy5hLmxlbmd0aDspYi5wdXNoKHRoaXMuYVtjKytdKTtpZihiLmxlbmd0aClmb3IoYz1iW2IubGVuZ3RoLTFdLnBvc2l0aW9uKzE7ZDxhLmxlbmd0aDspZj1hW2QrK10sZj1uZXcgRyhjKyssZi5zdGFydFRpbWUsZi5lbmRUaW1lLGYuYSxmLkwsZi5EKSxiLnB1c2goZik7ZWxzZSBiPWE7dGhpcy5hPWJ9O1QucHJvdG90eXBlLm1lcmdlPVQucHJvdG90eXBlLldhO1xyXG5ULnByb3RvdHlwZS5SYT1mdW5jdGlvbihhKXtmb3IodmFyIGI9MDtiPHRoaXMuYS5sZW5ndGgmJiEodGhpcy5hW2JdLmVuZFRpbWU+YSk7KytiKTt0aGlzLmEuc3BsaWNlKDAsYil9O1QucHJvdG90eXBlLmV2aWN0PVQucHJvdG90eXBlLlJhO2Z1bmN0aW9uICRkKGEpe3RoaXMuYj1hO3RoaXMuYT1uZXcgT2QoYSk7YWV8fChhZT1bbmV3IFVpbnQ4QXJyYXkoWzI1NV0pLG5ldyBVaW50OEFycmF5KFsxMjcsMjU1XSksbmV3IFVpbnQ4QXJyYXkoWzYzLDI1NSwyNTVdKSxuZXcgVWludDhBcnJheShbMzEsMjU1LDI1NSwyNTVdKSxuZXcgVWludDhBcnJheShbMTUsMjU1LDI1NSwyNTUsMjU1XSksbmV3IFVpbnQ4QXJyYXkoWzcsMjU1LDI1NSwyNTUsMjU1LDI1NV0pLG5ldyBVaW50OEFycmF5KFszLDI1NSwyNTUsMjU1LDI1NSwyNTUsMjU1XSksbmV3IFVpbnQ4QXJyYXkoWzEsMjU1LDI1NSwyNTUsMjU1LDI1NSwyNTUsMjU1XSldKX12YXIgYWU7XHJcbmZ1bmN0aW9uIGJlKGEpe3ZhciBiO2I9Y2UoYSk7aWYoNzxiLmxlbmd0aCl0aHJvdyBuZXcgcSgzLDMwMDIpO2Zvcih2YXIgYz0wLGQ9MDtkPGIubGVuZ3RoO2QrKyljPTI1NipjK2JbZF07Yj1jO2M9Y2UoYSk7YTp7Zm9yKGQ9MDtkPGFlLmxlbmd0aDtkKyspaWYoJGEoYyxhZVtkXSkpe2Q9ITA7YnJlYWsgYX1kPSExfWlmKGQpYz1hLmIuYnl0ZUxlbmd0aC1hLmEuYTtlbHNle2lmKDg9PWMubGVuZ3RoJiZjWzFdJjIyNCl0aHJvdyBuZXcgcSgzLDMwMDEpO2Zvcih2YXIgZD1jWzBdJigxPDw4LWMubGVuZ3RoKS0xLGU9MTtlPGMubGVuZ3RoO2UrKylkPTI1NipkK2NbZV07Yz1kfWM9YS5hLmErYzw9YS5iLmJ5dGVMZW5ndGg/YzphLmIuYnl0ZUxlbmd0aC1hLmEuYTtkPW5ldyBEYXRhVmlldyhhLmIuYnVmZmVyLGEuYi5ieXRlT2Zmc2V0K2EuYS5hLGMpO1MoYS5hLGMpO3JldHVybiBuZXcgZGUoYixkKX1cclxuZnVuY3Rpb24gY2UoYSl7dmFyIGI9UmQoYS5hKSxjO2ZvcihjPTE7OD49YyYmIShiJjE8PDgtYyk7YysrKTtpZig4PGMpdGhyb3cgbmV3IHEoMywzMDAyKTt2YXIgZD1uZXcgVWludDhBcnJheShjKTtkWzBdPWI7Zm9yKGI9MTtiPGM7YisrKWRbYl09UmQoYS5hKTtyZXR1cm4gZH1mdW5jdGlvbiBkZShhLGIpe3RoaXMuaWQ9YTt0aGlzLmE9Yn1mdW5jdGlvbiBlZShhKXtpZig4PGEuYS5ieXRlTGVuZ3RoKXRocm93IG5ldyBxKDMsMzAwMik7aWYoOD09YS5hLmJ5dGVMZW5ndGgmJmEuYS5nZXRVaW50OCgwKSYyMjQpdGhyb3cgbmV3IHEoMywzMDAxKTtmb3IodmFyIGI9MCxjPTA7YzxhLmEuYnl0ZUxlbmd0aDtjKyspdmFyIGQ9YS5hLmdldFVpbnQ4KGMpLGI9MjU2KmIrZDtyZXR1cm4gYn07ZnVuY3Rpb24gZmUoYSxiLGMsZCxlLGYpe2Z1bmN0aW9uIGcoKXtyZXR1cm4gZX12YXIgaD1bXTthPW5ldyAkZChhLmEpO2Zvcih2YXIgbT0tMSxuPS0xO1FkKGEuYSk7KXt2YXIgcj1iZShhKTtpZigxODc9PXIuaWQpe3ZhciB1PWdlKHIpO3UmJihyPWMqKHUuWWMtZiksdT1iK3Uud2MsMDw9bSYmaC5wdXNoKG5ldyBHKGgubGVuZ3RoLG0scixnLG4sdS0xKSksbT1yLG49dSl9fTA8PW0mJmgucHVzaChuZXcgRyhoLmxlbmd0aCxtLGQsZyxuLG51bGwpKTtyZXR1cm4gaH1mdW5jdGlvbiBnZShhKXt2YXIgYj1uZXcgJGQoYS5hKTthPWJlKGIpO2lmKDE3OSE9YS5pZCl0aHJvdyBuZXcgcSgzLDMwMTMpO2E9ZWUoYSk7Yj1iZShiKTtpZigxODMhPWIuaWQpdGhyb3cgbmV3IHEoMywzMDEyKTtmb3IodmFyIGI9bmV3ICRkKGIuYSksYz0wO1FkKGIuYSk7KXt2YXIgZD1iZShiKTtpZigyNDE9PWQuaWQpe2M9ZWUoZCk7YnJlYWt9fXJldHVybntZYzphLHdjOmN9fTtmdW5jdGlvbiBoZShhLGIpe3ZhciBjPU5kKGEsYixcIkluaXRpYWxpemF0aW9uXCIpO2lmKCFjKXJldHVybiBudWxsO3ZhciBkPWEudS5NLGU9Yy5nZXRBdHRyaWJ1dGUoXCJzb3VyY2VVUkxcIik7ZSYmKGQ9UChhLnUuTSxbZV0pKTt2YXIgZT0wLGY9bnVsbDtpZihjPU4oYyxcInJhbmdlXCIseWQpKWU9Yy5zdGFydCxmPWMuZW5kO3JldHVybiBuZXcgVmIoZnVuY3Rpb24oKXtyZXR1cm4gZH0sZSxmKX1cclxuZnVuY3Rpb24gaWUoYSxiKXt2YXIgYz1RKGEsamUsXCJwcmVzZW50YXRpb25UaW1lT2Zmc2V0XCIpLGQ9aGUoYSxqZSksZTtlPU51bWJlcihjKTt2YXIgZj1hLnUubWltZVR5cGUuc3BsaXQoXCIvXCIpWzFdO2lmKFwidGV4dFwiIT1hLnUuY29udGVudFR5cGUmJlwibXA0XCIhPWYmJlwid2VibVwiIT1mKXRocm93IG5ldyBxKDQsNDAwNik7aWYoXCJ3ZWJtXCI9PWYmJiFkKXRocm93IG5ldyBxKDQsNDAwNSk7dmFyIGc9TmQoYSxqZSxcIlJlcHJlc2VudGF0aW9uSW5kZXhcIiksaD1RKGEsamUsXCJpbmRleFJhbmdlXCIpLG09YS51Lk0saD15ZChofHxcIlwiKTtpZihnKXt2YXIgbj1nLmdldEF0dHJpYnV0ZShcInNvdXJjZVVSTFwiKTtuJiYobT1QKGEudS5NLFtuXSkpO2g9TihnLFwicmFuZ2VcIix5ZCxoKX1pZighaCl0aHJvdyBuZXcgcSg0LDQwMDIpO2U9a2UoYSxiLGQsbSxoLnN0YXJ0LGguZW5kLGYsZSk7cmV0dXJue2NyZWF0ZVNlZ21lbnRJbmRleDplLmNyZWF0ZVNlZ21lbnRJbmRleCxmaW5kU2VnbWVudFBvc2l0aW9uOmUuZmluZFNlZ21lbnRQb3NpdGlvbixcclxuZ2V0U2VnbWVudFJlZmVyZW5jZTplLmdldFNlZ21lbnRSZWZlcmVuY2UsaW5pdFNlZ21lbnRSZWZlcmVuY2U6ZCxwcmVzZW50YXRpb25UaW1lT2Zmc2V0Ok51bWJlcihjKXx8MH19XHJcbmZ1bmN0aW9uIGtlKGEsYixjLGQsZSxmLGcsaCl7dmFyIG09YS5wcmVzZW50YXRpb25UaW1lbGluZSxuPWEuSC5zdGFydCxyPWEuSC5kdXJhdGlvbix1PWIsQT1udWxsO3JldHVybntjcmVhdGVTZWdtZW50SW5kZXg6ZnVuY3Rpb24oKXt2YXIgYj1bdShkLGUsZiksXCJ3ZWJtXCI9PWc/dShjLmEoKSxjLkwsYy5EKTpudWxsXTt1PW51bGw7cmV0dXJuIFByb21pc2UuYWxsKGIpLnRoZW4oZnVuY3Rpb24oYil7dmFyIGMsZj1iWzBdO2I9YlsxXXx8bnVsbDtpZihcIm1wNFwiPT1nKWY9WmQoZixlLGQsaCk7ZWxzZXtiPW5ldyAkZChuZXcgRGF0YVZpZXcoYikpO2lmKDQ0MDc4Njg1MSE9YmUoYikuaWQpdGhyb3cgbmV3IHEoMywzMDA4KTt2YXIgdT1iZShiKTtpZig0MDgxMjU1NDMhPXUuaWQpdGhyb3cgbmV3IHEoMywzMDA5KTtiPXUuYS5ieXRlT2Zmc2V0O3U9bmV3ICRkKHUuYSk7Zm9yKGM9bnVsbDtRZCh1LmEpOyl7dmFyIHg9YmUodSk7aWYoMzU3MTQ5MDMwPT14LmlkKXtjPXg7YnJlYWt9fWlmKCFjKXRocm93IG5ldyBxKDMsXHJcbjMwMTApO3U9bmV3ICRkKGMuYSk7Yz0xRTY7Zm9yKHg9bnVsbDtRZCh1LmEpOyl7dmFyIG9iPWJlKHUpO2lmKDI4MDc3Mjk9PW9iLmlkKWM9ZWUob2IpO2Vsc2UgaWYoMTc1NDU9PW9iLmlkKWlmKHg9b2IsND09eC5hLmJ5dGVMZW5ndGgpeD14LmEuZ2V0RmxvYXQzMigwKTtlbHNlIGlmKDg9PXguYS5ieXRlTGVuZ3RoKXg9eC5hLmdldEZsb2F0NjQoMCk7ZWxzZSB0aHJvdyBuZXcgcSgzLDMwMDMpO31pZihudWxsPT14KXRocm93IG5ldyBxKDMsMzAxMSk7dT1jLzFFOTtjPXgqdTtmPWJlKG5ldyAkZChuZXcgRGF0YVZpZXcoZikpKTtpZig0NzUyNDk1MTUhPWYuaWQpdGhyb3cgbmV3IHEoMywzMDA3KTtmPWZlKGYsYix1LGMsZCxoKX1MZChhLlFhLHIsZik7bS5FYShuLGYpO0E9bmV3IFQoZil9KX0sZmluZFNlZ21lbnRQb3NpdGlvbjpmdW5jdGlvbihhKXtyZXR1cm4gQS5maW5kKGEpfSxnZXRTZWdtZW50UmVmZXJlbmNlOmZ1bmN0aW9uKGEpe3JldHVybiBBLmdldChhKX19fVxyXG5mdW5jdGlvbiBqZShhKXtyZXR1cm4gYS5HYX07ZnVuY3Rpb24gbGUoYSxiKXt2YXIgYz1oZShhLG1lKSxkO2Q9bmUoYSk7dmFyIGU9TWQoYSxtZSksZj1lLmlhO2Z8fChmPTEpO3ZhciBnPTA7ZS5GP2c9ZS5GKihmLTEpLWUucHJlc2VudGF0aW9uVGltZU9mZnNldDplLkImJjA8ZS5CLmxlbmd0aCYmKGc9ZS5CWzBdLnN0YXJ0KTtkPXtGOmUuRixzdGFydFRpbWU6ZyxpYTpmLHByZXNlbnRhdGlvblRpbWVPZmZzZXQ6ZS5wcmVzZW50YXRpb25UaW1lT2Zmc2V0LEI6ZS5CLHVhOmR9O2lmKCFkLkYmJiFkLkImJjE8ZC51YS5sZW5ndGgpdGhyb3cgbmV3IHEoNCw0MDAyKTtpZighZC5GJiYhYS5ILmR1cmF0aW9uJiYhZC5CJiYxPT1kLnVhLmxlbmd0aCl0aHJvdyBuZXcgcSg0LDQwMDIpO2lmKGQuQiYmIWQuQi5sZW5ndGgpdGhyb3cgbmV3IHEoNCw0MDAyKTtmPWU9bnVsbDthLksuaWQmJmEudS5pZCYmKGY9YS5LLmlkK1wiLFwiK2EudS5pZCxlPWJbZl0pO2c9b2UoYS5ILmR1cmF0aW9uLGQuaWEsYS51Lk0sZCk7TGQoYS5RYSxhLkguZHVyYXRpb24sXHJcbmcpO2U/KGUuV2EoZyksZS5SYShhLnByZXNlbnRhdGlvblRpbWVsaW5lLnNhKCktYS5ILnN0YXJ0KSk6KGEucHJlc2VudGF0aW9uVGltZWxpbmUuRWEoYS5ILnN0YXJ0LGcpLGU9bmV3IFQoZyksZiYmKGJbZl09ZSkpO3JldHVybntjcmVhdGVTZWdtZW50SW5kZXg6UHJvbWlzZS5yZXNvbHZlLmJpbmQoUHJvbWlzZSksZmluZFNlZ21lbnRQb3NpdGlvbjplLmZpbmQuYmluZChlKSxnZXRTZWdtZW50UmVmZXJlbmNlOmUuZ2V0LmJpbmQoZSksaW5pdFNlZ21lbnRSZWZlcmVuY2U6YyxwcmVzZW50YXRpb25UaW1lT2Zmc2V0OmQucHJlc2VudGF0aW9uVGltZU9mZnNldH19ZnVuY3Rpb24gbWUoYSl7cmV0dXJuIGEuJH1cclxuZnVuY3Rpb24gb2UoYSxiLGMsZCl7dmFyIGU9ZC51YS5sZW5ndGg7ZC5CJiZkLkIubGVuZ3RoIT1kLnVhLmxlbmd0aCYmKGU9TWF0aC5taW4oZC5CLmxlbmd0aCxkLnVhLmxlbmd0aCkpO2Zvcih2YXIgZj1bXSxnPWQuc3RhcnRUaW1lLGg9MDtoPGU7aCsrKXt2YXIgbT1kLnVhW2hdLG49UChjLFttLmFjXSkscjtyPW51bGwhPWQuRj9nK2QuRjpkLkI/ZC5CW2hdLmVuZDpnK2E7Zi5wdXNoKG5ldyBHKGgrYixnLHIsZnVuY3Rpb24oYSl7cmV0dXJuIGF9LmJpbmQobnVsbCxuKSxtLnN0YXJ0LG0uZW5kKSk7Zz1yfXJldHVybiBmfVxyXG5mdW5jdGlvbiBuZShhKXtyZXR1cm5bYS51LiQsYS5QLiQsYS5LLiRdLmZpbHRlcihEYSkubWFwKGZ1bmN0aW9uKGEpe3JldHVybiBNKGEsXCJTZWdtZW50VVJMXCIpfSkucmVkdWNlKGZ1bmN0aW9uKGEsYyl7cmV0dXJuIDA8YS5sZW5ndGg/YTpjfSkubWFwKGZ1bmN0aW9uKGEpe3ZhciBjPWEuZ2V0QXR0cmlidXRlKFwibWVkaWFcIik7YT1OKGEsXCJtZWRpYVJhbmdlXCIseWQse3N0YXJ0OjAsZW5kOm51bGx9KTtyZXR1cm57YWM6YyxzdGFydDphLnN0YXJ0LGVuZDphLmVuZH19KX07ZnVuY3Rpb24gcGUoYSxiLGMsZCl7dmFyIGU9cWUoYSksZjtmPU1kKGEscmUpO3ZhciBnPVEoYSxyZSxcIm1lZGlhXCIpLGg9UShhLHJlLFwiaW5kZXhcIik7Zj17RjpmLkYsSWE6Zi5JYSxpYTpmLmlhLHByZXNlbnRhdGlvblRpbWVPZmZzZXQ6Zi5wcmVzZW50YXRpb25UaW1lT2Zmc2V0LEI6Zi5CLFZhOmcsRGE6aH07Zz0wKyhmLkRhPzE6MCk7Zys9Zi5CPzE6MDtnKz1mLkY/MTowO2lmKCFnKXRocm93IG5ldyBxKDQsNDAwMik7MSE9ZyYmKGYuRGEmJihmLkI9bnVsbCksZi5GPW51bGwpO2lmKCFmLkRhJiYhZi5WYSl0aHJvdyBuZXcgcSg0LDQwMDIpO2lmKGYuRGEpe2M9YS51Lm1pbWVUeXBlLnNwbGl0KFwiL1wiKVsxXTtpZihcIm1wNFwiIT1jJiZcIndlYm1cIiE9Yyl0aHJvdyBuZXcgcSg0LDQwMDYpO2lmKFwid2VibVwiPT1jJiYhZSl0aHJvdyBuZXcgcSg0LDQwMDUpO2Q9S2QoZi5EYSxhLnUuaWQsbnVsbCxhLmJhbmR3aWR0aHx8bnVsbCxudWxsKTtkPVAoYS51Lk0sW2RdKTthPWtlKGEsYixlLGQsXHJcbjAsbnVsbCxjLGYucHJlc2VudGF0aW9uVGltZU9mZnNldCl9ZWxzZSBmLkY/KGR8fGEucHJlc2VudGF0aW9uVGltZWxpbmUuWGEoZi5GKSxhPXNlKGEsZikpOihkPWI9bnVsbCxhLksuaWQmJmEudS5pZCYmKGQ9YS5LLmlkK1wiLFwiK2EudS5pZCxiPWNbZF0pLGc9dGUoYSxmKSxMZChhLlFhLGEuSC5kdXJhdGlvbixnKSxiPyhiLldhKGcpLGIuUmEoYS5wcmVzZW50YXRpb25UaW1lbGluZS5zYSgpLWEuSC5zdGFydCkpOihhLnByZXNlbnRhdGlvblRpbWVsaW5lLkVhKGEuSC5zdGFydCxnKSxiPW5ldyBUKGcpLGQmJihjW2RdPWIpKSxhPXtjcmVhdGVTZWdtZW50SW5kZXg6UHJvbWlzZS5yZXNvbHZlLmJpbmQoUHJvbWlzZSksZmluZFNlZ21lbnRQb3NpdGlvbjpiLmZpbmQuYmluZChiKSxnZXRTZWdtZW50UmVmZXJlbmNlOmIuZ2V0LmJpbmQoYil9KTtyZXR1cm57Y3JlYXRlU2VnbWVudEluZGV4OmEuY3JlYXRlU2VnbWVudEluZGV4LGZpbmRTZWdtZW50UG9zaXRpb246YS5maW5kU2VnbWVudFBvc2l0aW9uLFxyXG5nZXRTZWdtZW50UmVmZXJlbmNlOmEuZ2V0U2VnbWVudFJlZmVyZW5jZSxpbml0U2VnbWVudFJlZmVyZW5jZTplLHByZXNlbnRhdGlvblRpbWVPZmZzZXQ6Zi5wcmVzZW50YXRpb25UaW1lT2Zmc2V0fX1mdW5jdGlvbiByZShhKXtyZXR1cm4gYS5IYX1mdW5jdGlvbiBzZShhLGIpe3ZhciBjPWEuSC5kdXJhdGlvbixkPWIuRixlPWIuaWEsZj1iLklhLGc9Yi5WYSxoPWEuYmFuZHdpZHRofHxudWxsLG09YS51LmlkLG49YS51Lk07cmV0dXJue2NyZWF0ZVNlZ21lbnRJbmRleDpQcm9taXNlLnJlc29sdmUuYmluZChQcm9taXNlKSxmaW5kU2VnbWVudFBvc2l0aW9uOmZ1bmN0aW9uKGEpe3JldHVybiAwPmF8fGMmJmE+PWM/bnVsbDpNYXRoLmZsb29yKGEvZCl9LGdldFNlZ21lbnRSZWZlcmVuY2U6ZnVuY3Rpb24oYSl7dmFyIGI9YSpkO3JldHVybiBuZXcgRyhhLGIsYitkLGZ1bmN0aW9uKCl7dmFyIGM9S2QoZyxtLGErZSxoLGIqZik7cmV0dXJuIFAobixbY10pfSwwLG51bGwpfX19XHJcbmZ1bmN0aW9uIHRlKGEsYil7Zm9yKHZhciBjPVtdLGQ9MDtkPGIuQi5sZW5ndGg7ZCsrKXt2YXIgZT1iLkJbZF0uc3RhcnQsZj1kK2IuaWE7Yy5wdXNoKG5ldyBHKGYsZSxiLkJbZF0uZW5kLGZ1bmN0aW9uKGEsYixjLGQsZSxmKXthPUtkKGEsYixlLGMsZik7cmV0dXJuIFAoZCxbYV0pLm1hcChmdW5jdGlvbihhKXtyZXR1cm4gYS50b1N0cmluZygpfSl9LmJpbmQobnVsbCxiLlZhLGEudS5pZCxhLmJhbmR3aWR0aHx8bnVsbCxhLnUuTSxmLChlK2IucHJlc2VudGF0aW9uVGltZU9mZnNldCkqYi5JYSksMCxudWxsKSl9cmV0dXJuIGN9ZnVuY3Rpb24gcWUoYSl7dmFyIGI9UShhLHJlLFwiaW5pdGlhbGl6YXRpb25cIik7aWYoIWIpcmV0dXJuIG51bGw7dmFyIGM9YS51LmlkLGQ9YS5iYW5kd2lkdGh8fG51bGwsZT1hLnUuTTtyZXR1cm4gbmV3IFZiKGZ1bmN0aW9uKCl7dmFyIGE9S2QoYixjLG51bGwsZCxudWxsKTtyZXR1cm4gUChlLFthXSl9LDAsbnVsbCl9O2Z1bmN0aW9uIHVlKCl7dGhpcy5tPXRoaXMubD10aGlzLmo9dGhpcy5jPXRoaXMuYT1udWxsO3RoaXMuZz1bXTt0aGlzLmI9bnVsbDt0aGlzLmg9W107dGhpcy52PTE7dGhpcy5pPXt9O3RoaXMucz0wO3RoaXMuZj1udWxsO3RoaXMuSmE9dGhpcy5KYS5iaW5kKHRoaXMpfWs9dWUucHJvdG90eXBlO2suY29uZmlndXJlPWZ1bmN0aW9uKGEpe3RoaXMuYz1hfTtrLnN0YXJ0PWZ1bmN0aW9uKGEsYixjLGQsZSl7dGhpcy5nPVthXTt0aGlzLmE9Yjt0aGlzLmo9Yzt0aGlzLmw9ZDt0aGlzLm09ZTtyZXR1cm4gdmUodGhpcykudGhlbihmdW5jdGlvbigpe3RoaXMuYSYmd2UodGhpcywwKTtyZXR1cm4gdGhpcy5ifS5iaW5kKHRoaXMpKX07XHJcbmsuc3RvcD1mdW5jdGlvbigpe3RoaXMuYSYmdGhpcy5hLkpiKHRoaXMuSmEpO3RoaXMuYz10aGlzLm09dGhpcy5sPXRoaXMuaj10aGlzLmE9bnVsbDt0aGlzLmc9W107dGhpcy5iPW51bGw7dGhpcy5oPVtdO3RoaXMuaT17fTtudWxsIT10aGlzLmYmJih3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMuZiksdGhpcy5mPW51bGwpO3JldHVybiBQcm9taXNlLnJlc29sdmUoKX07ZnVuY3Rpb24gdmUoYSl7cmV0dXJuIGEuYS5yZXF1ZXN0KDAsSGEoYS5nLGEuYy5yZXRyeVBhcmFtZXRlcnMpKS50aGVuKGZ1bmN0aW9uKGEpe2lmKHRoaXMuYSlyZXR1cm4geGUodGhpcyxhLmRhdGEsYS51cmkpfS5iaW5kKGEpKX1cclxuZnVuY3Rpb24geGUoYSxiLGMpe3ZhciBkPUQoYiksZT1uZXcgRE9NUGFyc2VyLGY9bnVsbDtiPW51bGw7dHJ5e2Y9ZS5wYXJzZUZyb21TdHJpbmcoZCxcInRleHQveG1sXCIpfWNhdGNoKEEpe31mJiZcIk1QRFwiPT1mLmRvY3VtZW50RWxlbWVudC50YWdOYW1lJiYoYj1mLmRvY3VtZW50RWxlbWVudCk7aWYoIWIpdGhyb3cgbmV3IHEoNCw0MDAxKTtjPVtjXTtkPU0oYixcIkxvY2F0aW9uXCIpLm1hcCh3ZCkuZmlsdGVyKERhKTswPGQubGVuZ3RoJiYoYz1hLmc9ZCk7ZD1NKGIsXCJCYXNlVVJMXCIpLm1hcCh3ZCk7Yz1QKGMsZCk7dmFyIGc9TihiLFwibWluQnVmZmVyVGltZVwiLE8pO2Eucz1OKGIsXCJtaW5pbXVtVXBkYXRlUGVyaW9kXCIsTywtMSk7dmFyIGg9TihiLFwiYXZhaWxhYmlsaXR5U3RhcnRUaW1lXCIseGQpLGQ9TihiLFwidGltZVNoaWZ0QnVmZmVyRGVwdGhcIixPKSxtPU4oYixcInN1Z2dlc3RlZFByZXNlbnRhdGlvbkRlbGF5XCIsTyksZT1OKGIsXCJtYXhTZWdtZW50RHVyYXRpb25cIixPKSxmPWIuZ2V0QXR0cmlidXRlKFwidHlwZVwiKXx8XHJcblwic3RhdGljXCIsbjtpZihhLmIpbj1hLmIucHJlc2VudGF0aW9uVGltZWxpbmU7ZWxzZXt2YXIgcj1NYXRoLm1heCgxMCwxLjUqZyk7bj1uZXcgRihoLG51bGwhPW0/bTpyKX12YXIgaD15ZShhLHtRYTpcInN0YXRpY1wiIT1mLHByZXNlbnRhdGlvblRpbWVsaW5lOm4sSzpudWxsLEg6bnVsbCxQOm51bGwsdTpudWxsLGJhbmR3aWR0aDp2b2lkIDB9LGMsYiksbT1oLmR1cmF0aW9uLHU9aC5wZXJpb2RzO24uSGIoXCJzdGF0aWNcIj09Zik7bi56YShtfHxJbmZpbml0eSk7bi5HYihudWxsIT1kP2Q6SW5maW5pdHkpO24uWGEoZXx8MSk7aWYoYS5iKXJldHVybiBQcm9taXNlLnJlc29sdmUoKTtiPU0oYixcIlVUQ1RpbWluZ1wiKTtkPW4uVSgpO2guWSYmYS5hLnliKGEuSmEpO3JldHVybiB6ZShhLGMsYixkKS50aGVuKGZ1bmN0aW9uKGEpe3RoaXMuYSYmKG4uRWIoYSksdGhpcy5iPXtwcmVzZW50YXRpb25UaW1lbGluZTpuLHBlcmlvZHM6dSxvZmZsaW5lU2Vzc2lvbklkczpbXSxtaW5CdWZmZXJUaW1lOmd8fFxyXG4wfSl9LmJpbmQoYSkpfVxyXG5mdW5jdGlvbiB5ZShhLGIsYyxkKXt2YXIgZT1OKGQsXCJtZWRpYVByZXNlbnRhdGlvbkR1cmF0aW9uXCIsTyksZj1bXSxnPTA7ZD1NKGQsXCJQZXJpb2RcIik7Zm9yKHZhciBoPTA7aDxkLmxlbmd0aDtoKyspe3ZhciBtPWRbaF0sZz1OKG0sXCJzdGFydFwiLE8sZyksbj1OKG0sXCJkdXJhdGlvblwiLE8pO2lmKG51bGw9PW4paWYoaCsxIT1kLmxlbmd0aCl7dmFyIHI9TihkW2grMV0sXCJzdGFydFwiLE8pO251bGwhPXImJihuPXItZyl9ZWxzZSBudWxsIT1lJiYobj1lLWcpO3ZhciBtPXtzdGFydDpnLGR1cmF0aW9uOm4sbm9kZTptLFk6ITF9LHU9YSxBPWIscj1tO0EuSz1BZShyLm5vZGUsbnVsbCxjKTtBLkg9cjtBLksuaWR8fChBLksuaWQ9XCJfX3NoYWthX3BlcmlvZF9cIityLnN0YXJ0KTt1PU0oci5ub2RlLFwiQWRhcHRhdGlvblNldFwiKS5tYXAodS5xYy5iaW5kKHUsQSkpO2lmKCF1Lmxlbmd0aCl0aHJvdyBuZXcgcSg0LDQwMDQpO2ZvcihBPTA7QTx1Lmxlbmd0aDtBKyspdVtBXS5ZJiYoci5ZPSEwKTtcclxudT1CZSh1KTtyPXtzdGFydFRpbWU6ci5zdGFydCxzdHJlYW1TZXRzOnV9O2YucHVzaChyKTt1PWIuSy5pZDthLmguZXZlcnkoRWEodSkpJiYoYS5qKHIpLGEuaC5wdXNoKHUpLGEuYiYmYS5iLnBlcmlvZHMucHVzaChyKSk7aWYobnVsbD09bil7Zz1udWxsO2JyZWFrfWcrPW59cmV0dXJuIG51bGwhPWU/e3BlcmlvZHM6ZixkdXJhdGlvbjplLFk6bS5ZfTp7cGVyaW9kczpmLGR1cmF0aW9uOmcsWTptLll9fVxyXG5rLnFjPWZ1bmN0aW9uKGEsYil7YS5QPUFlKGIsYS5LLG51bGwpO3ZhciBjPSExLGQ9TShiLFwiUm9sZVwiKSxlPXZvaWQgMDtcInRleHRcIj09YS5QLmNvbnRlbnRUeXBlJiYoZT1cInN1YnRpdGxlXCIpO2Zvcih2YXIgZj0wO2Y8ZC5sZW5ndGg7ZisrKXt2YXIgZz1kW2ZdLmdldEF0dHJpYnV0ZShcInNjaGVtZUlkVXJpXCIpO2lmKG51bGw9PWd8fFwidXJuOm1wZWc6ZGFzaDpyb2xlOjIwMTFcIj09Zylzd2l0Y2goZz1kW2ZdLmdldEF0dHJpYnV0ZShcInZhbHVlXCIpLGcpe2Nhc2UgXCJtYWluXCI6Yz0hMDticmVhaztjYXNlIFwiY2FwdGlvblwiOmNhc2UgXCJzdWJ0aXRsZVwiOmU9Z319dmFyIGQ9ISF2ZChiLFwiSW5iYW5kRXZlbnRTdHJlYW1cIiksaD1bXTtNKGIsXCJTdXBwbGVtZW50YWxQcm9wZXJ0eVwiKS5mb3JFYWNoKGZ1bmN0aW9uKGEpe1wiaHR0cDovL2Rhc2hpZi5vcmcvZGVzY3JpcHRvci9BZGFwdGF0aW9uU2V0U3dpdGNoaW5nXCI9PWEuZ2V0QXR0cmlidXRlKFwic2NoZW1lSWRVUklcIikmJihhPWEuZ2V0QXR0cmlidXRlKFwidmFsdWVcIikpJiZcclxuaC5wdXNoLmFwcGx5KGgsYS5zcGxpdChcIixcIikpfSk7Zj1NKGIsXCJDb250ZW50UHJvdGVjdGlvblwiKTtmPURkKGYsdGhpcy5jLmRhc2guY3VzdG9tU2NoZW1lKTtnPURjKGIuZ2V0QXR0cmlidXRlKFwibGFuZ1wiKXx8XCJ1bmRcIik7ZT1NKGIsXCJSZXByZXNlbnRhdGlvblwiKS5tYXAodGhpcy5yYy5iaW5kKHRoaXMsYSxmLGUsZykpLmZpbHRlcihmdW5jdGlvbihhKXtyZXR1cm4hIWF9KTtpZighZS5sZW5ndGgpdGhyb3cgbmV3IHEoNCw0MDAzKTtpZighYS5QLmNvbnRlbnRUeXBlKXt2YXIgbT1lWzBdLm1pbWVUeXBlLG49ZVswXS5jb2RlY3Mscj1tO24mJihyKz0nOyBjb2RlY3M9XCInK24rJ1wiJyk7YS5QLmNvbnRlbnRUeXBlPUVbcl0/XCJ0ZXh0XCI6bS5zcGxpdChcIi9cIilbMF19cmV0dXJue2lkOmEuUC5pZHx8XCJfX2Zha2VfX1wiK3RoaXMudisrLGNvbnRlbnRUeXBlOmEuUC5jb250ZW50VHlwZSxsYW5ndWFnZTpnLCRiOmMsc3RyZWFtczplLGRybUluZm9zOmYuZHJtSW5mb3MsVmM6aCxZOmR9fTtcclxuay5yYz1mdW5jdGlvbihhLGIsYyxkLGUpe2EudT1BZShlLGEuUCxudWxsKTtpZighQ2UoYS51KSlyZXR1cm4gbnVsbDthLmJhbmR3aWR0aD1OKGUsXCJiYW5kd2lkdGhcIixBZCl8fHZvaWQgMDt2YXIgZjtmPXRoaXMueWMuYmluZCh0aGlzKTtpZihhLnUuR2EpZj1pZShhLGYpO2Vsc2UgaWYoYS51LiQpZj1sZShhLHRoaXMuaSk7ZWxzZSBpZihhLnUuSGEpZj1wZShhLGYsdGhpcy5pLCEhdGhpcy5iKTtlbHNle3ZhciBnPWEudS5NLGg9YS5ILmR1cmF0aW9ufHwwO2Y9e2NyZWF0ZVNlZ21lbnRJbmRleDpQcm9taXNlLnJlc29sdmUuYmluZChQcm9taXNlKSxmaW5kU2VnbWVudFBvc2l0aW9uOmZ1bmN0aW9uKGEpe3JldHVybiAwPD1hJiZhPGg/MTpudWxsfSxnZXRTZWdtZW50UmVmZXJlbmNlOmZ1bmN0aW9uKGEpe3JldHVybiAxIT1hP251bGw6bmV3IEcoMSwwLGgsZnVuY3Rpb24oKXtyZXR1cm4gZ30sMCxudWxsKX0saW5pdFNlZ21lbnRSZWZlcmVuY2U6bnVsbCxwcmVzZW50YXRpb25UaW1lT2Zmc2V0OjB9fWU9XHJcbk0oZSxcIkNvbnRlbnRQcm90ZWN0aW9uXCIpO2U9SWQoZSx0aGlzLmMuZGFzaC5jdXN0b21TY2hlbWUsYik7cmV0dXJue2lkOnRoaXMudisrLGNyZWF0ZVNlZ21lbnRJbmRleDpmLmNyZWF0ZVNlZ21lbnRJbmRleCxmaW5kU2VnbWVudFBvc2l0aW9uOmYuZmluZFNlZ21lbnRQb3NpdGlvbixnZXRTZWdtZW50UmVmZXJlbmNlOmYuZ2V0U2VnbWVudFJlZmVyZW5jZSxpbml0U2VnbWVudFJlZmVyZW5jZTpmLmluaXRTZWdtZW50UmVmZXJlbmNlLHByZXNlbnRhdGlvblRpbWVPZmZzZXQ6Zi5wcmVzZW50YXRpb25UaW1lT2Zmc2V0LG1pbWVUeXBlOmEudS5taW1lVHlwZSxjb2RlY3M6YS51LmNvZGVjcyxiYW5kd2lkdGg6YS5iYW5kd2lkdGgsd2lkdGg6YS51LndpZHRoLGhlaWdodDphLnUuaGVpZ2h0LGtpbmQ6YyxlbmNyeXB0ZWQ6MDxiLmRybUluZm9zLmxlbmd0aCxrZXlJZDplLGxhbmd1YWdlOmQsYWxsb3dlZEJ5QXBwbGljYXRpb246ITAsYWxsb3dlZEJ5S2V5U3lzdGVtOiEwfX07XHJcbmsuUGM9ZnVuY3Rpb24oKXt0aGlzLmY9bnVsbDt2YXIgYT1EYXRlLm5vdygpO3ZlKHRoaXMpLnRoZW4oZnVuY3Rpb24oKXt0aGlzLmEmJndlKHRoaXMsKERhdGUubm93KCktYSkvMUUzKX0uYmluZCh0aGlzKSlbXCJjYXRjaFwiXShmdW5jdGlvbihhKXt0aGlzLmwoYSk7dGhpcy5hJiZ3ZSh0aGlzLDApfS5iaW5kKHRoaXMpKX07ZnVuY3Rpb24gd2UoYSxiKXswPmEuc3x8KGEuZj13aW5kb3cuc2V0VGltZW91dChhLlBjLmJpbmQoYSksMUUzKk1hdGgubWF4KE1hdGgubWF4KDMsYS5zKS1iLDApKSl9XHJcbmZ1bmN0aW9uIEFlKGEsYixjKXtiPWJ8fHtjb250ZW50VHlwZTpcIlwiLG1pbWVUeXBlOlwiXCIsY29kZWNzOlwiXCJ9O2M9Y3x8Yi5NO3ZhciBkPU0oYSxcIkJhc2VVUkxcIikubWFwKHdkKSxlPWEuZ2V0QXR0cmlidXRlKFwiY29udGVudFR5cGVcIil8fGIuY29udGVudFR5cGUsZj1hLmdldEF0dHJpYnV0ZShcIm1pbWVUeXBlXCIpfHxiLm1pbWVUeXBlO2V8fChlPWYuc3BsaXQoXCIvXCIpWzBdKTtyZXR1cm57TTpQKGMsZCksR2E6dmQoYSxcIlNlZ21lbnRCYXNlXCIpfHxiLkdhLCQ6dmQoYSxcIlNlZ21lbnRMaXN0XCIpfHxiLiQsSGE6dmQoYSxcIlNlZ21lbnRUZW1wbGF0ZVwiKXx8Yi5IYSx3aWR0aDpOKGEsXCJ3aWR0aFwiLEJkKXx8Yi53aWR0aCxoZWlnaHQ6TihhLFwiaGVpZ2h0XCIsQmQpfHxiLmhlaWdodCxjb250ZW50VHlwZTplLG1pbWVUeXBlOmYsY29kZWNzOmEuZ2V0QXR0cmlidXRlKFwiY29kZWNzXCIpfHxiLmNvZGVjcyxpZDphLmdldEF0dHJpYnV0ZShcImlkXCIpfX1cclxuZnVuY3Rpb24gQmUoYSl7dmFyIGI9e307YS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2JbYS5pZF09W2FdfSk7YS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3ZhciBjPWJbYS5pZF07YS5WYy5mb3JFYWNoKGZ1bmN0aW9uKGEpeyhhPWJbYV0pJiZhIT1jJiYoYy5wdXNoLmFwcGx5KGMsYSksYS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2JbYS5pZF09Y30pKX0pfSk7dmFyIGM9W10sZD1bXTtDKGIpLmZvckVhY2goZnVuY3Rpb24oYSl7aWYoISgwPD1kLmluZGV4T2YoYSkpKXtkLnB1c2goYSk7dmFyIGI9bmV3IEphO2EuZm9yRWFjaChmdW5jdGlvbihhKXtiLnB1c2goYS5jb250ZW50VHlwZXx8XCJcIixhKX0pO2Iua2V5cygpLmZvckVhY2goZnVuY3Rpb24oYSl7dmFyIGQ9bmV3IEphO2IuZ2V0KGEpLmZvckVhY2goZnVuY3Rpb24oYSl7ZC5wdXNoKGEubGFuZ3VhZ2UsYSl9KTtkLmtleXMoKS5mb3JFYWNoKGZ1bmN0aW9uKGIpe3ZhciBlPWQuZ2V0KGIpO2I9e2xhbmd1YWdlOmIsdHlwZTphLHByaW1hcnk6ZS5zb21lKGZ1bmN0aW9uKGEpe3JldHVybiBhLiRifSksXHJcbmRybUluZm9zOmUubWFwKGZ1bmN0aW9uKGEpe3JldHVybiBhLmRybUluZm9zfSkucmVkdWNlKHQsW10pLHN0cmVhbXM6ZS5tYXAoZnVuY3Rpb24oYSl7cmV0dXJuIGEuc3RyZWFtc30pLnJlZHVjZSh0LFtdKX07Yy5wdXNoKGIpfSl9KX19KTtyZXR1cm4gY31mdW5jdGlvbiBDZShhKXt2YXIgYjtiPTArKGEuR2E/MTowKTtiKz1hLiQ/MTowO2IrPWEuSGE/MTowO2lmKCFiKXJldHVyblwidGV4dFwiPT1hLmNvbnRlbnRUeXBlfHxcImFwcGxpY2F0aW9uXCI9PWEuY29udGVudFR5cGU/ITA6ITE7MSE9YiYmKGEuR2EmJihhLiQ9bnVsbCksYS5IYT1udWxsKTtyZXR1cm4hMH1cclxuZnVuY3Rpb24gRGUoYSxiLGMsZCl7Yj1QKGIsW2NdKTtiPUhhKGIsYS5jLnJldHJ5UGFyYW1ldGVycyk7Yi5tZXRob2Q9ZDtyZXR1cm4gYS5hLnJlcXVlc3QoMCxiKS50aGVuKGZ1bmN0aW9uKGEpe2lmKFwiSEVBRFwiPT1kKXtpZighYS5oZWFkZXJzfHwhYS5oZWFkZXJzLmRhdGUpcmV0dXJuIDA7YT1hLmhlYWRlcnMuZGF0ZX1lbHNlIGE9RChhLmRhdGEpO2E9RGF0ZS5wYXJzZShhKTtyZXR1cm4gaXNOYU4oYSk/MDphLURhdGUubm93KCl9KX1cclxuZnVuY3Rpb24gemUoYSxiLGMsZCl7Yz1jLm1hcChmdW5jdGlvbihhKXtyZXR1cm57c2NoZW1lOmEuZ2V0QXR0cmlidXRlKFwic2NoZW1lSWRVcmlcIiksdmFsdWU6YS5nZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiKX19KTt2YXIgZT1hLmMuZGFzaC5jbG9ja1N5bmNVcmk7ZCYmIWMubGVuZ3RoJiZlJiZjLnB1c2goe3NjaGVtZTpcInVybjptcGVnOmRhc2g6dXRjOmh0dHAtaGVhZDoyMDE0XCIsdmFsdWU6ZX0pO3JldHVybiBDYShjLGZ1bmN0aW9uKGEpe3ZhciBjPWEudmFsdWU7c3dpdGNoKGEuc2NoZW1lKXtjYXNlIFwidXJuOm1wZWc6ZGFzaDp1dGM6aHR0cC1oZWFkOjIwMTRcIjpjYXNlIFwidXJuOm1wZWc6ZGFzaDp1dGM6aHR0cC1oZWFkOjIwMTJcIjpyZXR1cm4gRGUodGhpcyxiLGMsXCJIRUFEXCIpO2Nhc2UgXCJ1cm46bXBlZzpkYXNoOnV0YzpodHRwLXhzZGF0ZToyMDE0XCI6Y2FzZSBcInVybjptcGVnOmRhc2g6dXRjOmh0dHAtaXNvOjIwMTRcIjpjYXNlIFwidXJuOm1wZWc6ZGFzaDp1dGM6aHR0cC14c2RhdGU6MjAxMlwiOmNhc2UgXCJ1cm46bXBlZzpkYXNoOnV0YzpodHRwLWlzbzoyMDEyXCI6cmV0dXJuIERlKHRoaXMsXHJcbmIsYyxcIkdFVFwiKTtjYXNlIFwidXJuOm1wZWc6ZGFzaDp1dGM6ZGlyZWN0OjIwMTRcIjpjYXNlIFwidXJuOm1wZWc6ZGFzaDp1dGM6ZGlyZWN0OjIwMTJcIjpyZXR1cm4gYT1EYXRlLnBhcnNlKGMpLGlzTmFOKGEpPzA6YS1EYXRlLm5vdygpO2Nhc2UgXCJ1cm46bXBlZzpkYXNoOnV0YzpodHRwLW50cDoyMDE0XCI6Y2FzZSBcInVybjptcGVnOmRhc2g6dXRjOm50cDoyMDE0XCI6Y2FzZSBcInVybjptcGVnOmRhc2g6dXRjOnNudHA6MjAxNFwiOnJldHVybiBQcm9taXNlLnJlamVjdCgpO2RlZmF1bHQ6cmV0dXJuIFByb21pc2UucmVqZWN0KCl9fS5iaW5kKGEpKVtcImNhdGNoXCJdKGZ1bmN0aW9uKCl7cmV0dXJuIDB9KX1rLnljPWZ1bmN0aW9uKGEsYixjKXthPUhhKGEsdGhpcy5jLnJldHJ5UGFyYW1ldGVycyk7bnVsbCE9YiYmKGEuaGVhZGVycy5SYW5nZT1cImJ5dGVzPVwiK2IrXCItXCIrKG51bGwhPWM/YzpcIlwiKSk7cmV0dXJuIHRoaXMuYS5yZXF1ZXN0KDEsYSkudGhlbihmdW5jdGlvbihhKXtyZXR1cm4gYS5kYXRhfSl9O1xyXG5rLkphPWZ1bmN0aW9uKGEsYil7aWYoMT09YSl7dmFyIGM9bmV3IE9kKG5ldyBEYXRhVmlldyhiLmRhdGEpKSxkPVhkKDE3MDE2NzE3ODMsYyk7aWYoLTEhPWQpe3ZhciBlPWMuYS04K2Q7UyhjLDQpO2Q9V2QoYyk7aWYoXCJ1cm46bXBlZzpkYXNoOmV2ZW50OjIwMTJcIj09ZCl2ZSh0aGlzKTtlbHNle3ZhciBmPVdkKGMpLGc9UihjKSxoPVIoYyksbT1SKGMpLG49UihjKSxjPVZkKGMsZS1jLmEpO3RoaXMubShuZXcgSChcImVtc2dcIix7ZGV0YWlsOntoZDpkLHZhbHVlOmYsSWE6ZyxnZDpoLGVkOm0saWQ6bixmZDpjfX0pKX19fX07c2IubXBkPXVlO3JiW1wiYXBwbGljYXRpb24vZGFzaCt4bWxcIl09dWU7ZnVuY3Rpb24gVShhLGIpe3ZhciBjPUQoYSksZD1bXSxlPW5ldyBET01QYXJzZXIsZj1udWxsO3RyeXtmPWUucGFyc2VGcm9tU3RyaW5nKGMsXCJ0ZXh0L3htbFwiKX1jYXRjaChuKXt0aHJvdyBuZXcgcSgyLDIwMDUpO31pZihmKXt2YXIgZyxoO2lmKGM9Zi5nZXRFbGVtZW50c0J5VGFnTmFtZShcInR0XCIpWzBdKWU9Yy5nZXRBdHRyaWJ1dGUoXCJ0dHA6ZnJhbWVSYXRlXCIpLGY9Yy5nZXRBdHRyaWJ1dGUoXCJ0dHA6c3ViRnJhbWVSYXRlXCIpLGc9Yy5nZXRBdHRyaWJ1dGUoXCJ0dHA6ZnJhbWVSYXRlTXVsdGlwbGllclwiKSxoPWMuZ2V0QXR0cmlidXRlKFwidHRwOnRpY2tSYXRlXCIpO2Vsc2UgdGhyb3cgbmV3IHEoMiwyMDA2KTtlPW5ldyBFZShlLGYsZyxoKTtmPVUuYihjLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwic3R5bGluZ1wiKVswXSk7Zz1VLmIoYy5nZXRFbGVtZW50c0J5VGFnTmFtZShcImxheW91dFwiKVswXSk7Yz1VLmIoYy5nZXRFbGVtZW50c0J5VGFnTmFtZShcImJvZHlcIilbMF0pO2ZvcihoPTA7aDxcclxuYy5sZW5ndGg7aCsrKXt2YXIgbT1VLmMoY1toXSxiLGUsZixnKTttJiZkLnB1c2gobSl9fXJldHVybiBkfVUubD0vXihcXGR7Mix9KTooXFxkezJ9KTooXFxkezJ9KTooXFxkezJ9KVxcLj8oXFxkKyk/JC87VS5zPS9eKD86KFxcZHsyLH0pOik/KFxcZHsyfSk6KFxcZHsyfSkkLztVLm09L14oPzooXFxkezIsfSk6KT8oXFxkezJ9KTooXFxkezJ9XFwuXFxkezIsfSkkLztVLnY9L14oXFxkKlxcLj9cXGQqKWYkLztVLkE9L14oXFxkKlxcLj9cXGQqKXQkLztVLnc9L14oPzooXFxkKlxcLj9cXGQqKWgpPyg/OihcXGQqXFwuP1xcZCopbSk/KD86KFxcZCpcXC4/XFxkKilzKT8oPzooXFxkKlxcLj9cXGQqKW1zKT8kLztVLmo9L14oXFxkezEsMn18MTAwKSUgKFxcZHsxLDJ9fDEwMCklJC87XHJcblUuYj1mdW5jdGlvbihhKXt2YXIgYj1bXTtpZighYSlyZXR1cm4gYjtmb3IodmFyIGM9YS5jaGlsZE5vZGVzLGQ9MDtkPGMubGVuZ3RoO2QrKyl7dmFyIGU9XCJzcGFuXCI9PWNbZF0ubm9kZU5hbWUmJlwicFwiPT1hLm5vZGVOYW1lO2NbZF0ubm9kZVR5cGUhPU5vZGUuRUxFTUVOVF9OT0RFfHxcImJyXCI9PWNbZF0ubm9kZU5hbWV8fGV8fChlPVUuYihjW2RdKSxiPWIuY29uY2F0KGUpKX1iLmxlbmd0aHx8Yi5wdXNoKGEpO3JldHVybiBifTtcclxuVS5jPWZ1bmN0aW9uKGEsYixjLGQsZSl7aWYoIWEuaGFzQXR0cmlidXRlKFwiYmVnaW5cIikmJiFhLmhhc0F0dHJpYnV0ZShcImVuZFwiKSYmXCJcIj09YS50ZXh0Q29udGVudClyZXR1cm4gbnVsbDt2YXIgZj1VLmEoYS5nZXRBdHRyaWJ1dGUoXCJiZWdpblwiKSxjKSxnPVUuYShhLmdldEF0dHJpYnV0ZShcImVuZFwiKSxjKTtjPVUuYShhLmdldEF0dHJpYnV0ZShcImR1clwiKSxjKTt2YXIgaD1hLnRleHRDb250ZW50O251bGw9PWcmJm51bGwhPWMmJihnPWYrYyk7aWYobnVsbD09Znx8bnVsbD09Zyl0aHJvdyBuZXcgcSgyLDIwMDEpO2I9d2IoZitiLGcrYixoKTtpZighYilyZXR1cm4gbnVsbDtlPVUuaChhLFwicmVnaW9uXCIsZSk7VS5uYShiLGEsZSxkKTtyZXR1cm4gYn07XHJcblUubmE9ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGUsZj1VLmYoYixjLGQsXCJ0dHM6dGV4dEFsaWduXCIpO2YmJihhLmI9Zik7aWYoZj1VLmYoYixjLGQsXCJ0dHM6ZXh0ZW50XCIpKWlmKGU9VS5qLmV4ZWMoZikpYS5zaXplPU51bWJlcihlWzFdKTtlPVUuZihiLGMsZCxcInR0czp3cml0aW5nTW9kZVwiKTtmPSEwO1widGJcIj09ZXx8XCJ0YmxyXCI9PWU/YS5jPVwibHJcIjpcInRicmxcIj09ZT9hLmM9XCJybFwiOmY9ITE7aWYoYj1VLmYoYixjLGQsXCJ0dHM6b3JpZ2luXCIpKWlmKGU9VS5qLmV4ZWMoYikpZj8oYS5wb3NpdGlvbj1OdW1iZXIoZVsyXSksYS5hPU51bWJlcihlWzFdKSk6KGEucG9zaXRpb249TnVtYmVyKGVbMV0pLGEuYT1OdW1iZXIoZVsyXSkpfTtcclxuVS5mPWZ1bmN0aW9uKGEsYixjLGQpe2Zvcih2YXIgZT1VLmIoYiksZj0wO2Y8ZS5sZW5ndGg7ZisrKXt2YXIgZz1lW2ZdLmdldEF0dHJpYnV0ZShkKTtpZihnKXJldHVybiBnfWU9VS5oO3JldHVybihhPWUoYixcInN0eWxlXCIsYyl8fGUoYSxcInN0eWxlXCIsYykpP2EuZ2V0QXR0cmlidXRlKGQpOm51bGx9O1UuaD1mdW5jdGlvbihhLGIsYyl7aWYoIWF8fDE+Yy5sZW5ndGgpcmV0dXJuIG51bGw7dmFyIGQ9bnVsbDtpZihhPVUub2EoYSxiKSlmb3IoYj0wO2I8Yy5sZW5ndGg7YisrKWlmKGNbYl0uZ2V0QXR0cmlidXRlKFwieG1sOmlkXCIpPT1hKXtkPWNbYl07YnJlYWt9cmV0dXJuIGR9O1Uub2E9ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9bnVsbDthJiYhKGM9YS5nZXRBdHRyaWJ1dGUoYikpOyl7dmFyIGQ9YS5wYXJlbnROb2RlO2lmKGQgaW5zdGFuY2VvZiBFbGVtZW50KWE9ZDtlbHNlIGJyZWFrfXJldHVybiBjfTtcclxuVS5hPWZ1bmN0aW9uKGEsYil7dmFyIGM9bnVsbDtVLmwudGVzdChhKT9jPVUucGEoYixhKTpVLnMudGVzdChhKT9jPVUuZyhVLnMsYSk6VS5tLnRlc3QoYSk/Yz1VLmcoVS5tLGEpOlUudi50ZXN0KGEpP2M9VS5BYShiLGEpOlUuQS50ZXN0KGEpP2M9VS5CYShiLGEpOlUudy50ZXN0KGEpJiYoYz1VLmcoVS53LGEpKTtyZXR1cm4gY307VS5BYT1mdW5jdGlvbihhLGIpe3ZhciBjPVUudi5leGVjKGIpO3JldHVybiBOdW1iZXIoY1sxXSkvYS5hfTtVLkJhPWZ1bmN0aW9uKGEsYil7dmFyIGM9VS5BLmV4ZWMoYik7cmV0dXJuIE51bWJlcihjWzFdKS9hLmJ9O1UucGE9ZnVuY3Rpb24oYSxiKXt2YXIgYz1VLmwuZXhlYyhiKSxkPU51bWJlcihjWzFdKSxlPU51bWJlcihjWzJdKSxmPU51bWJlcihjWzNdKSxnPU51bWJlcihjWzRdKSxnPWcrKE51bWJlcihjWzVdKXx8MCkvYS5jLGY9ZitnL2EuYTtyZXR1cm4gZis2MCplKzM2MDAqZH07XHJcblUuZz1mdW5jdGlvbihhLGIpe3ZhciBjPWEuZXhlYyhiKTtyZXR1cm4gYyYmXCJcIiE9Y1swXT8oTnVtYmVyKGNbNF0pfHwwKS8xRTMrKE51bWJlcihjWzNdKXx8MCkrNjAqKE51bWJlcihjWzJdKXx8MCkrMzYwMCooTnVtYmVyKGNbMV0pfHwwKTpudWxsfTtmdW5jdGlvbiBFZShhLGIsYyxkKXt0aGlzLmE9TnVtYmVyKGEpfHwzMDt0aGlzLmM9TnVtYmVyKGIpfHwxO3RoaXMuYj1OdW1iZXIoZCk7dGhpcy5ifHwodGhpcy5iPWE/dGhpcy5hKnRoaXMuYzoxKTtjJiYoYT0vXihcXGQrKSAoXFxkKykkL2cuZXhlYyhjKSkmJih0aGlzLmEqPWFbMV0vYVsyXSl9RVtcImFwcGxpY2F0aW9uL3R0bWwreG1sXCJdPVU7ZnVuY3Rpb24gRmUoYSxiKXt2YXIgYz1uZXcgT2QobmV3IERhdGFWaWV3KGEpKSxkPVhkKDE4MzUyOTUwOTIsYyk7aWYoLTEhPWQpcmV0dXJuIFUoVmQoYyxkLTgpLmJ1ZmZlcixiKTtpZigtMSE9WWQoYSxGZS5KKSlyZXR1cm5bXTt0aHJvdyBuZXcgcSgyLDIwMDcpO31GZS5KPTE5MzcwMTA4MDA7RVsnYXBwbGljYXRpb24vbXA0OyBjb2RlY3M9XCJzdHBwXCInXT1GZTtmdW5jdGlvbiBHZShhKXt0aGlzLmI9YTt0aGlzLmE9MH1mdW5jdGlvbiBIZShhLGIpe3ZhciBjO2IubGFzdEluZGV4PWEuYTtjPShjPWIuZXhlYyhhLmIpKT97cG9zaXRpb246Yy5pbmRleCxsZW5ndGg6Y1swXS5sZW5ndGgsQmM6Y306bnVsbDtpZihhLmE9PWEuYi5sZW5ndGh8fCFjfHxjLnBvc2l0aW9uIT1hLmEpcmV0dXJuIG51bGw7YS5hKz1jLmxlbmd0aDtyZXR1cm4gYy5CY31mdW5jdGlvbiBJZShhKXtyZXR1cm4gYS5hPT1hLmIubGVuZ3RoP251bGw6KGE9SGUoYSwvW14gXFx0XFxuXSovZ20pKT9hWzBdOm51bGx9O2Z1bmN0aW9uIFYoYSxiKXt2YXIgYz1EKGEpLGM9Yy5yZXBsYWNlKC9cXHJcXG58XFxyKD89W15cXG5dfCQpL2dtLFwiXFxuXCIpLGM9Yy5zcGxpdCgvXFxuezIsfS9tKTtpZighL15XRUJWVFQoJHxbIFxcdFxcbl0pL20udGVzdChjWzBdKSl0aHJvdyBuZXcgcSgyLDJFMyk7Zm9yKHZhciBkPVtdLGU9MTtlPGMubGVuZ3RoO2UrKyl7dmFyIGY9Vi5jKGNbZV0uc3BsaXQoXCJcXG5cIiksYik7ZiYmZC5wdXNoKGYpfXJldHVybiBkfVxyXG5WLmM9ZnVuY3Rpb24oYSxiKXtpZigxPT1hLmxlbmd0aCYmIWFbMF18fC9eTk9URSgkfFsgXFx0XSkvLnRlc3QoYVswXSkpcmV0dXJuIG51bGw7dmFyIGM9bnVsbDswPmFbMF0uaW5kZXhPZihcIi0tXFx4M2VcIikmJihjPWFbMF0sYS5zcGxpY2UoMCwxKSk7dmFyIGQ9bmV3IEdlKGFbMF0pLGU9Vi5hKGQpLGY9SGUoZCwvWyBcXHRdKy0tXFx4M2VbIFxcdF0rL2cpLGc9Vi5hKGQpO2lmKG51bGw9PWV8fCFmfHxudWxsPT1nKXRocm93IG5ldyBxKDIsMjAwMSk7ZT13YihlK2IsZytiLGEuc2xpY2UoMSkuam9pbihcIlxcblwiKS50cmltKCkpO2lmKCFlKXJldHVybiBudWxsO0hlKGQsL1sgXFx0XSsvZ20pO2ZvcihmPUllKGQpO2Y7KXtpZighVi5pKGUsZikpdGhyb3cgbmV3IHEoMiwyMDAyKTtIZShkLC9bIFxcdF0rL2dtKTtmPUllKGQpfW51bGwhPWMmJihlLmlkPWMpO3JldHVybiBlfTtcclxuVi5pPWZ1bmN0aW9uKGEsYil7dmFyIGM7aWYoYz0vXmFsaWduOihzdGFydHxtaWRkbGV8ZW5kfGxlZnR8cmlnaHQpJC8uZXhlYyhiKSlhLmFsaWduPWNbMV07ZWxzZSBpZihjPS9edmVydGljYWw6KGxyfHJsKSQvLmV4ZWMoYikpYS5jPWNbMV07ZWxzZSBpZihjPS9ec2l6ZTooXFxkezEsMn18MTAwKSUkLy5leGVjKGIpKWEuc2l6ZT1OdW1iZXIoY1sxXSk7ZWxzZSBpZihjPS9ecG9zaXRpb246KFxcZHsxLDJ9fDEwMCklKD86LChsaW5lLWxlZnR8bGluZS1yaWdodHxjZW50ZXJ8c3RhcnR8ZW5kKSk/JC8uZXhlYyhiKSlhLnBvc2l0aW9uPU51bWJlcihjWzFdKSxjWzJdJiYoYS5nPWNbMl0pO2Vsc2UgaWYoYz0vXmxpbmU6KFxcZHsxLDJ9fDEwMCklKD86LChzdGFydHxlbmR8Y2VudGVyKSk/JC8uZXhlYyhiKSlhLmY9ITEsYS5hPU51bWJlcihjWzFdKSxjWzJdJiYoYS5iPWNbMl0pO2Vsc2UgaWYoYz0vXmxpbmU6KC0/XFxkKykoPzosKHN0YXJ0fGVuZHxjZW50ZXIpKT8kLy5leGVjKGIpKWEuZj1cclxuITAsYS5hPU51bWJlcihjWzFdKSxjWzJdJiYoYS5iPWNbMl0pO2Vsc2UgcmV0dXJuITE7cmV0dXJuITB9O1YuYT1mdW5jdGlvbihhKXthPUhlKGEsLyg/OihcXGR7Mix9KTopPyhcXGR7Mn0pOihcXGR7Mn0pXFwuKFxcZHszfSkvZyk7aWYoIWEpcmV0dXJuIG51bGw7dmFyIGI9TnVtYmVyKGFbMl0pLGM9TnVtYmVyKGFbM10pO3JldHVybiA1OTxifHw1OTxjP251bGw6TnVtYmVyKGFbNF0pLzFFMytjKzYwKmIrMzYwMCooTnVtYmVyKGFbMV0pfHwwKX07RVtcInRleHQvdnR0XCJdPVY7RVsndGV4dC92dHQ7IGNvZGVjcz1cInZ0dFwiJ109VjtmdW5jdGlvbiBXKGEsYixjLGQpe3ZhciBlPW5ldyBPZChuZXcgRGF0YVZpZXcoYSkpLGY9WGQoMTgzNTI5NTA5MixlKTtpZigtMSE9ZilyZXR1cm4gVy5xYShWZChlLGYtOCkuYnVmZmVyLGIsYyxkKTtpZigtMSE9WWQoYSxXLm1hKSlyZXR1cm5bXTt0aHJvdyBuZXcgcSgyLDIwMDgpO31XLnFhPWZ1bmN0aW9uKGEsYixjLGQpe2E9bmV3IE9kKG5ldyBEYXRhVmlldyhhKSk7Yys9YjtkKz1iO2ZvcihiPVtdO1FkKGEpOyl7dmFyIGU9WGQoVy5YLGEpO2lmKC0xPT1lKWJyZWFrOyhlPVcuYyhWZChhLGUtOCkuYnVmZmVyLGMsZCkpJiZiLnB1c2goZSl9cmV0dXJuIGJ9O1xyXG5XLmM9ZnVuY3Rpb24oYSxiLGMpe2E9bmV3IE9kKG5ldyBEYXRhVmlldyhhKSk7Zm9yKHZhciBkLGUsZjtRZChhKTspe3ZhciBnPVIoYSksaD1SKGEpLG09RChWZChhLGctOCkuYnVmZmVyKTsxPT1nJiZVZChhKTtzd2l0Y2goaCl7Y2FzZSBXLkc6ZD1tO2JyZWFrO2Nhc2UgVy5DOmY9bTticmVhaztjYXNlIFcuUzplPW19fWlmKCFkKXRocm93IG5ldyBxKDIsMjAwOCk7Yj13YihiLGMsZCk7aWYoIWIpcmV0dXJuIG51bGw7ZiYmKGIuaWQ9Zik7aWYoZSlmb3IoZT1uZXcgR2UoZSksZj1JZShlKTtmOyl7aWYoIVYuaShiLGYpKXRocm93IG5ldyBxKDIsMjAwMik7SGUoZSwvWyBcXHRdKy9nbSk7Zj1JZShlKX1yZXR1cm4gYn07Vy5tYT0yMDA0MjUxNzY0O1cuWD0xOTg3MzQzNDU5O1cuRz0xODg1NDM2MjY4O1cuQz0xNzY4MTg3MjQ3O1cuUz0xOTM3MDExODE1O0VbJ2FwcGxpY2F0aW9uL21wNDsgY29kZWNzPVwid3Z0dFwiJ109VztGYS5kYXRhPWZ1bmN0aW9uKGEpe3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihiKXt2YXIgYz1hLnNwbGl0KFwiOlwiKTtpZigyPmMubGVuZ3RofHxcImRhdGFcIiE9Y1swXSl0aHJvdyBuZXcgcSgxLDEwMDQsYSk7Yz1jLnNsaWNlKDEpLmpvaW4oXCI6XCIpLnNwbGl0KFwiLFwiKTtpZigyPmMubGVuZ3RoKXRocm93IG5ldyBxKDEsMTAwNCxhKTt2YXIgZD1jWzBdLGM9d2luZG93LmRlY29kZVVSSUNvbXBvbmVudChjLnNsaWNlKDEpLmpvaW4oXCIsXCIpKSxkPWQuc3BsaXQoXCI7XCIpLGU9bnVsbDsxPGQubGVuZ3RoJiYoZT1kWzFdKTtpZihcImJhc2U2NFwiPT1lKWM9WGEoYykuYnVmZmVyO2Vsc2V7aWYoZSl0aHJvdyBuZXcgcSgxLDEwMDUsYSk7Yz1TYShjKX1iKHt1cmk6YSxkYXRhOmMsaGVhZGVyczp7fX0pfSl9O2Z1bmN0aW9uIEplKGEsYil7cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKGMsZCl7dmFyIGU9bmV3IFhNTEh0dHBSZXF1ZXN0O2Uub3BlbihiLm1ldGhvZCxhLCEwKTtlLnJlc3BvbnNlVHlwZT1cImFycmF5YnVmZmVyXCI7ZS50aW1lb3V0PWIucmV0cnlQYXJhbWV0ZXJzLnRpbWVvdXQ7ZS53aXRoQ3JlZGVudGlhbHM9Yi5hbGxvd0Nyb3NzU2l0ZUNyZWRlbnRpYWxzO2Uub25sb2FkPWZ1bmN0aW9uKGIpe2I9Yi50YXJnZXQ7aWYoMjAwPD1iLnN0YXR1cyYmMjk5Pj1iLnN0YXR1cyl7dmFyIGU9Yi5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKS5zcGxpdChcIlxcclxcblwiKS5yZWR1Y2UoZnVuY3Rpb24oYSxiKXt2YXIgYz1iLnNwbGl0KFwiOiBcIik7YVtjWzBdLnRvTG93ZXJDYXNlKCldPWMuc2xpY2UoMSkuam9pbihcIjogXCIpO3JldHVybiBhfSx7fSk7Yi5BYyYmKGE9Yi5BYyk7Yyh7dXJpOmEsZGF0YTpiLnJlc3BvbnNlLGhlYWRlcnM6ZX0pfWVsc2V7ZT1udWxsO3RyeXtlPVJhKGIucmVzcG9uc2UpfWNhdGNoKGYpe31kKG5ldyBxKDEsXHJcbjEwMDEsYSxiLnN0YXR1cyxlKSl9fTtlLm9uZXJyb3I9ZnVuY3Rpb24oKXtkKG5ldyBxKDEsMTAwMixhKSl9O2Uub250aW1lb3V0PWZ1bmN0aW9uKCl7ZChuZXcgcSgxLDEwMDMsYSkpfTtmb3IodmFyIGYgaW4gYi5oZWFkZXJzKWUuc2V0UmVxdWVzdEhlYWRlcihmLGIuaGVhZGVyc1tmXSk7ZS5zZW5kKGIuYm9keSl9KX1GYS5odHRwPUplO0ZhLmh0dHBzPUplO2Z1bmN0aW9uIEtlKCl7dGhpcy5hPW51bGw7dGhpcy5jPVtdO3RoaXMuYj17fX1rPUtlLnByb3RvdHlwZTtcclxuay5pbml0PWZ1bmN0aW9uKGEpe2lmKCF3aW5kb3cuaW5kZXhlZERCKXJldHVybiBQcm9taXNlLnJlamVjdChuZXcgcSg5LDlFMykpO3ZhciBiPXdpbmRvdy5pbmRleGVkREIub3BlbihcInNoYWthX29mZmxpbmVfZGJcIiwxKSxjPW5ldyB3O2Iub251cGdyYWRlbmVlZGVkPWZ1bmN0aW9uKGIpe2I9Yi50YXJnZXQucmVzdWx0O2Zvcih2YXIgYyBpbiBhKWIuY3JlYXRlT2JqZWN0U3RvcmUoYyx7a2V5UGF0aDphW2NdfSl9O2Iub25zdWNjZXNzPWZ1bmN0aW9uKGEpe3RoaXMuYT1hLnRhcmdldC5yZXN1bHQ7Yy5yZXNvbHZlKCl9LmJpbmQodGhpcyk7Yi5vbmVycm9yPUxlLmJpbmQobnVsbCxiLGMpO3JldHVybiBjLnRoZW4oZnVuY3Rpb24oKXt2YXIgYj1PYmplY3Qua2V5cyhhKTtyZXR1cm4gUHJvbWlzZS5hbGwoYi5tYXAoZnVuY3Rpb24oYSl7cmV0dXJuIE1lKHRoaXMsYSkudGhlbihmdW5jdGlvbihiKXt0aGlzLmJbYV09Yn0uYmluZCh0aGlzKSl9LmJpbmQodGhpcykpKX0uYmluZCh0aGlzKSl9O1xyXG5rLm89ZnVuY3Rpb24oKXtyZXR1cm4gUHJvbWlzZS5hbGwodGhpcy5jLm1hcChmdW5jdGlvbihhKXt0cnl7YS50cmFuc2FjdGlvbi5hYm9ydCgpfWNhdGNoKGIpe31yZXR1cm4gYS5JW1wiY2F0Y2hcIl0odil9KSkudGhlbihmdW5jdGlvbigpe3RoaXMuYSYmKHRoaXMuYS5jbG9zZSgpLHRoaXMuYT1udWxsKX0uYmluZCh0aGlzKSl9O2suZ2V0PWZ1bmN0aW9uKGEsYil7cmV0dXJuIE5lKHRoaXMsYSxcInJlYWRvbmx5XCIsZnVuY3Rpb24oYSl7cmV0dXJuIGEuZ2V0KGIpfSl9O2suZm9yRWFjaD1mdW5jdGlvbihhLGIpe3JldHVybiBOZSh0aGlzLGEsXCJyZWFkb25seVwiLGZ1bmN0aW9uKGEpe3JldHVybiBhLm9wZW5DdXJzb3IoKX0sZnVuY3Rpb24oYSl7YSYmKGIoYS52YWx1ZSksYVtcImNvbnRpbnVlXCJdKCkpfSl9O2Z1bmN0aW9uIE9lKGEsYixjKXtyZXR1cm4gTmUoYSxiLFwicmVhZHdyaXRlXCIsZnVuY3Rpb24oYSl7cmV0dXJuIGEucHV0KGMpfSl9XHJcbmsucmVtb3ZlPWZ1bmN0aW9uKGEsYil7cmV0dXJuIE5lKHRoaXMsYSxcInJlYWR3cml0ZVwiLGZ1bmN0aW9uKGEpe3JldHVybiBhW1wiZGVsZXRlXCJdKGIpfSl9O2Z1bmN0aW9uIFBlKGEsYil7dmFyIGM9W107cmV0dXJuIE5lKGEsXCJzZWdtZW50XCIsXCJyZWFkd3JpdGVcIixmdW5jdGlvbihhKXtyZXR1cm4gYS5vcGVuQ3Vyc29yKCl9LGZ1bmN0aW9uKGEpe2lmKGEpe2lmKGIoYS52YWx1ZSkpe3ZhciBlPWFbXCJkZWxldGVcIl0oKSxmPW5ldyB3O2Uub25zdWNjZXNzPWYucmVzb2x2ZTtlLm9uZXJyb3I9TGUuYmluZChudWxsLGUsZik7Yy5wdXNoKGYpfWFbXCJjb250aW51ZVwiXSgpfX0pLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gUHJvbWlzZS5hbGwoYyl9KS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIGMubGVuZ3RofSl9XHJcbmZ1bmN0aW9uIE1lKGEsYil7dmFyIGM9MDtyZXR1cm4gTmUoYSxiLFwicmVhZG9ubHlcIixmdW5jdGlvbihhKXtyZXR1cm4gYS5vcGVuQ3Vyc29yKG51bGwsXCJwcmV2XCIpfSxmdW5jdGlvbihhKXthJiYoYz1hLmtleSsxKX0pLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gY30pfVxyXG5mdW5jdGlvbiBOZShhLGIsYyxkLGUpe2M9YS5hLnRyYW5zYWN0aW9uKFtiXSxjKTt2YXIgZj1kKGMub2JqZWN0U3RvcmUoYikpLGc9bmV3IHc7ZSYmKGYub25zdWNjZXNzPWZ1bmN0aW9uKGEpe2UoYS50YXJnZXQucmVzdWx0KX0pO2Yub25lcnJvcj1MZS5iaW5kKG51bGwsZixnKTt2YXIgaD17dHJhbnNhY3Rpb246YyxJOmd9O2EuYy5wdXNoKGgpO3ZhciBtPWZ1bmN0aW9uKCl7dGhpcy5jLnNwbGljZSh0aGlzLmMuaW5kZXhPZihoKSwxKX0uYmluZChhKTtjLm9uY29tcGxldGU9ZnVuY3Rpb24oKXttKCk7Zy5yZXNvbHZlKGYucmVzdWx0KX07Yy5vbmVycm9yPWZ1bmN0aW9uKGEpe20oKTtMZShmLGcsYSl9O3JldHVybiBnfWZ1bmN0aW9uIExlKGEsYixjKXtcIkFib3J0RXJyb3JcIj09YS5lcnJvci5uYW1lP2IucmVqZWN0KG5ldyBxKDksOTAwMikpOmIucmVqZWN0KG5ldyBxKDksOTAwMSxhLmVycm9yKSk7Yy5wcmV2ZW50RGVmYXVsdCgpfTt2YXIgUWU9e21hbmlmZXN0Olwia2V5XCIsc2VnbWVudDpcImtleVwifTtmdW5jdGlvbiBSZShhKXtyZXR1cm57b2ZmbGluZVVyaTpcIm9mZmxpbmU6XCIrYS5rZXksb3JpZ2luYWxNYW5pZmVzdFVyaTphLm9yaWdpbmFsTWFuaWZlc3RVcmksZHVyYXRpb246YS5kdXJhdGlvbixzaXplOmEuc2l6ZSx0cmFja3M6YS5wZXJpb2RzWzBdLnN0cmVhbXMubWFwKGZ1bmN0aW9uKGEpe3JldHVybntpZDphLmlkLGFjdGl2ZTohMSx0eXBlOmEuY29udGVudFR5cGUsYmFuZHdpZHRoOjAsbGFuZ3VhZ2U6YS5sYW5ndWFnZSxraW5kOmEua2luZHx8bnVsbCx3aWR0aDphLndpZHRoLGhlaWdodDphLmhlaWdodH19KSxhcHBNZXRhZGF0YTphLmFwcE1ldGFkYXRhfX07ZnVuY3Rpb24gU2UoKXt9U2UucHJvdG90eXBlLmNvbmZpZ3VyZT1mdW5jdGlvbigpe307U2UucHJvdG90eXBlLnN0YXJ0PWZ1bmN0aW9uKGEpe3ZhciBiPS9eb2ZmbGluZTooWzAtOV0rKSQvLmV4ZWMoYSk7aWYoIWIpcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBxKDEsOTAwNCxhKSk7dmFyIGM9TnVtYmVyKGJbMV0pLGQ9bmV3IEtlO3JldHVybiBkLmluaXQoUWUpLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gZC5nZXQoXCJtYW5pZmVzdFwiLGMpfSkudGhlbihmdW5jdGlvbihhKXtpZighYSl0aHJvdyBuZXcgcSg5LDkwMDMsYyk7cmV0dXJuIFRlKGEpfSkudGhlbihmdW5jdGlvbihhKXtyZXR1cm4gZC5vKCkudGhlbihmdW5jdGlvbigpe3JldHVybiBhfSl9LGZ1bmN0aW9uKGEpe3JldHVybiBkLm8oKS50aGVuKGZ1bmN0aW9uKCl7dGhyb3cgYTt9KX0pfTtTZS5wcm90b3R5cGUuc3RvcD1mdW5jdGlvbigpe3JldHVybiBQcm9taXNlLnJlc29sdmUoKX07XHJcbmZ1bmN0aW9uIFRlKGEpe3ZhciBiPW5ldyBGKG51bGwsMCk7Yi56YShhLmR1cmF0aW9uKTt2YXIgYz1hLmRybUluZm8/W2EuZHJtSW5mb106W107cmV0dXJue3ByZXNlbnRhdGlvblRpbWVsaW5lOmIsbWluQnVmZmVyVGltZToxMCxvZmZsaW5lU2Vzc2lvbklkczphLnNlc3Npb25JZHMscGVyaW9kczphLnBlcmlvZHMubWFwKGZ1bmN0aW9uKGEpe3JldHVybntzdGFydFRpbWU6YS5zdGFydFRpbWUsc3RyZWFtU2V0czphLnN0cmVhbXMubWFwKGZ1bmN0aW9uKGUpe3ZhciBmPWUuc2VnbWVudHMubWFwKGZ1bmN0aW9uKGEsYil7cmV0dXJuIG5ldyBHKGIsYS5zdGFydFRpbWUsYS5lbmRUaW1lLGZ1bmN0aW9uKCl7cmV0dXJuW2EudXJpXX0sMCxudWxsKX0pO2IuRWEoYS5zdGFydFRpbWUsZik7Zj1uZXcgVChmKTtyZXR1cm57bGFuZ3VhZ2U6ZS5sYW5ndWFnZSx0eXBlOmUuY29udGVudFR5cGUscHJpbWFyeTplLnByaW1hcnksZHJtSW5mb3M6YyxzdHJlYW1zOlt7aWQ6ZS5pZCxjcmVhdGVTZWdtZW50SW5kZXg6UHJvbWlzZS5yZXNvbHZlLmJpbmQoUHJvbWlzZSksXHJcbmZpbmRTZWdtZW50UG9zaXRpb246Zi5maW5kLmJpbmQoZiksZ2V0U2VnbWVudFJlZmVyZW5jZTpmLmdldC5iaW5kKGYpLGluaXRTZWdtZW50UmVmZXJlbmNlOmUuaW5pdFNlZ21lbnRVcmk/bmV3IFZiKGZ1bmN0aW9uKCl7cmV0dXJuW2UuaW5pdFNlZ21lbnRVcmldfSwwLG51bGwpOm51bGwscHJlc2VudGF0aW9uVGltZU9mZnNldDplLnByZXNlbnRhdGlvblRpbWVPZmZzZXQsbWltZVR5cGU6ZS5taW1lVHlwZSxjb2RlY3M6ZS5jb2RlY3MsYmFuZHdpZHRoOjAsd2lkdGg6ZS53aWR0aHx8dm9pZCAwLGhlaWdodDplLmhlaWdodHx8dm9pZCAwLGtpbmQ6ZS5raW5kLGVuY3J5cHRlZDplLmVuY3J5cHRlZCxrZXlJZDplLmtleUlkLGFsbG93ZWRCeUFwcGxpY2F0aW9uOiEwLGFsbG93ZWRCeUtleVN5c3RlbTohMH1dfX0pfX0pfX1yYltcImFwcGxpY2F0aW9uL3gtb2ZmbGluZS1tYW5pZmVzdFwiXT1TZTtGYS5vZmZsaW5lPWZ1bmN0aW9uKGEpe2lmKC9eb2ZmbGluZTooWzAtOV0rKSQvLmV4ZWMoYSkpe3ZhciBiPXt1cmk6YSxkYXRhOm5ldyBBcnJheUJ1ZmZlcigwKSxoZWFkZXJzOntcImNvbnRlbnQtdHlwZVwiOlwiYXBwbGljYXRpb24veC1vZmZsaW5lLW1hbmlmZXN0XCJ9fTtyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGIpfWlmKGI9L15vZmZsaW5lOlswLTldK1xcL1swLTldK1xcLyhbMC05XSspJC8uZXhlYyhhKSl7dmFyIGM9TnVtYmVyKGJbMV0pLGQ9bmV3IEtlO3JldHVybiBkLmluaXQoUWUpLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gZC5nZXQoXCJzZWdtZW50XCIsYyl9KS50aGVuKGZ1bmN0aW9uKGIpe3JldHVybiBkLm8oKS50aGVuKGZ1bmN0aW9uKCl7aWYoIWIpdGhyb3cgbmV3IHEoOSw5MDAzLGMpO3JldHVybnt1cmk6YSxkYXRhOmIuZGF0YSxoZWFkZXJzOnt9fX0pfSl9cmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBxKDEsOTAwNCxhKSl9O2Z1bmN0aW9uIFVlKGEsYixjKXt0aGlzLmI9e307dGhpcy5pPWM7dGhpcy5tPWE7dGhpcy5sPWI7dGhpcy5qPXRoaXMuYT1udWxsO3RoaXMuZj10aGlzLmc9dGhpcy5oPXRoaXMuYz0wfVVlLnByb3RvdHlwZS5vPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5qfHxQcm9taXNlLnJlc29sdmUoKTt0aGlzLmI9e307dGhpcy5qPXRoaXMuYT10aGlzLmw9dGhpcy5tPXRoaXMuaT1udWxsO3JldHVybiBhfTtmdW5jdGlvbiBWZShhLGIsYyxkLGUpe2EuYltiXT1hLmJbYl18fFtdO2EuYltiXS5wdXNoKHt1cmlzOmMuYSgpLEw6Yy5MLEQ6Yy5ELGpiOmQsQ2E6ZX0pfVxyXG5mdW5jdGlvbiBXZShhLGIpe2EuYz0wO2EuaD0wO2EuZz0wO2EuZj0wO0MoYS5iKS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2EuZm9yRWFjaChmdW5jdGlvbihhKXtudWxsIT1hLkQ/dGhpcy5jKz1hLkQtYS5MKzE6dGhpcy5nKz1hLmpifS5iaW5kKHRoaXMpKX0uYmluZChhKSk7YS5hPWI7YS5hLnNpemU9YS5jO3ZhciBjPUMoYS5iKS5tYXAoZnVuY3Rpb24oYSl7dmFyIGI9MCxjPWZ1bmN0aW9uKCl7aWYoIXRoaXMuaSlyZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IHEoOSw5MDAyKSk7aWYoYj49YS5sZW5ndGgpcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO3ZhciBnPWFbYisrXTtyZXR1cm4gWGUodGhpcyxnKS50aGVuKGMpfS5iaW5kKHRoaXMpO3JldHVybiBjKCl9LmJpbmQoYSkpO2EuYj17fTtyZXR1cm4gYS5qPVByb21pc2UuYWxsKGMpfVxyXG5mdW5jdGlvbiBYZShhLGIpe3ZhciBjPUhhKGIudXJpcyxhLmwpO2lmKGIuTHx8bnVsbCE9Yi5EKWMuaGVhZGVycy5SYW5nZT1cImJ5dGVzPVwiK2IuTCtcIi1cIisobnVsbD09Yi5EP1wiXCI6Yi5EKTt2YXIgZDtyZXR1cm4gYS5tLnJlcXVlc3QoMSxjKS50aGVuKGZ1bmN0aW9uKGEpe2lmKCF0aGlzLmEpcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBxKDksOTAwMikpO2Q9YS5kYXRhLmJ5dGVMZW5ndGg7cmV0dXJuIGIuQ2EoYS5kYXRhKX0uYmluZChhKSkudGhlbihmdW5jdGlvbigpe2lmKCF0aGlzLmEpcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBxKDksOTAwMikpO251bGw9PWIuRD8odGhpcy5hLnNpemUrPWQsdGhpcy5mKz1iLmpiKTp0aGlzLmgrPWQ7dmFyIGE9KHRoaXMuaCt0aGlzLmYpLyh0aGlzLmMrdGhpcy5nKSxjPVJlKHRoaXMuYSk7dGhpcy5pLnByb2dyZXNzQ2FsbGJhY2soYyxhKX0uYmluZChhKSl9O2Z1bmN0aW9uIFgoYSl7dGhpcy5hPW5ldyBLZTt0aGlzLmM9YTt0aGlzLmo9WWUodGhpcyk7dGhpcy5nPW51bGw7dGhpcy52PSExO3RoaXMuaT1udWxsO3RoaXMubD1bXTt0aGlzLmY9LTE7dGhpcy5tPTA7dGhpcy5iPW51bGw7dGhpcy5oPW5ldyBVZShhLmgsYS5nZXRDb25maWd1cmF0aW9uKCkuc3RyZWFtaW5nLnJldHJ5UGFyYW1ldGVycyx0aGlzLmopfWwoXCJzaGFrYS5vZmZsaW5lLlN0b3JhZ2VcIixYKTtmdW5jdGlvbiBaZSgpe3JldHVybiEhd2luZG93LmluZGV4ZWREQn1YLnN1cHBvcnQ9WmU7XHJcblgucHJvdG90eXBlLm89ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmwsYj10aGlzLmEsYz10aGlzLmg/dGhpcy5oLm8oKVtcImNhdGNoXCJdKGZ1bmN0aW9uKCl7fSkudGhlbihmdW5jdGlvbigpe3JldHVybiBQcm9taXNlLmFsbChhLm1hcChmdW5jdGlvbihhKXtyZXR1cm4gYi5yZW1vdmUoXCJzZWdtZW50XCIsYSl9KSl9KS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIGIubygpfSk6UHJvbWlzZS5yZXNvbHZlKCk7dGhpcy5qPXRoaXMuYz10aGlzLmg9dGhpcy5hPW51bGw7cmV0dXJuIGN9O1gucHJvdG90eXBlLmRlc3Ryb3k9WC5wcm90b3R5cGUubztYLnByb3RvdHlwZS5jb25maWd1cmU9ZnVuY3Rpb24oYSl7emModGhpcy5qLGEsWWUodGhpcykse30sXCJcIil9O1gucHJvdG90eXBlLmNvbmZpZ3VyZT1YLnByb3RvdHlwZS5jb25maWd1cmU7XHJcblgucHJvdG90eXBlLlNjPWZ1bmN0aW9uKGEsYixjKXtmdW5jdGlvbiBkKGEpe2Y9YX1pZih0aGlzLnYpcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBxKDksOTAwNikpO3RoaXMudj0hMDt2YXIgZSxmPW51bGw7cmV0dXJuICRlKHRoaXMpLnRoZW4oZnVuY3Rpb24oKXtZKHRoaXMpO3JldHVybiBhZih0aGlzLGEsZCxjKX0uYmluZCh0aGlzKSkudGhlbihmdW5jdGlvbihjKXtZKHRoaXMpO3RoaXMuYj1jLm1hbmlmZXN0O3RoaXMuZz1jLlFiO2lmKHRoaXMuYi5wcmVzZW50YXRpb25UaW1lbGluZS5VKCl8fHRoaXMuYi5wcmVzZW50YXRpb25UaW1lbGluZS5nYSgpKXRocm93IG5ldyBxKDksOTAwNSxhKTt0aGlzLmIucGVyaW9kcy5mb3JFYWNoKHRoaXMucy5iaW5kKHRoaXMpKTt0aGlzLmY9dGhpcy5hLmIubWFuaWZlc3QrKzt0aGlzLm09MDtjPXRoaXMuYi5wZXJpb2RzLm1hcCh0aGlzLncuYmluZCh0aGlzKSk7dmFyIGQ9dGhpcy5nLmIsZj1pYih0aGlzLmcpO2lmKGQpe2lmKCFmLmxlbmd0aCl0aHJvdyBuZXcgcSg5LFxyXG45MDA3LGEpO2QuaW5pdERhdGE9W119ZT17a2V5OnRoaXMuZixvcmlnaW5hbE1hbmlmZXN0VXJpOmEsZHVyYXRpb246dGhpcy5tLHNpemU6MCxwZXJpb2RzOmMsc2Vzc2lvbklkczpmLGRybUluZm86ZCxhcHBNZXRhZGF0YTpifTtyZXR1cm4gV2UodGhpcy5oLGUpfS5iaW5kKHRoaXMpKS50aGVuKGZ1bmN0aW9uKCl7WSh0aGlzKTtpZihmKXRocm93IGY7cmV0dXJuIE9lKHRoaXMuYSxcIm1hbmlmZXN0XCIsZSl9LmJpbmQodGhpcykpLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gYmYodGhpcyl9LmJpbmQodGhpcykpLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gUmUoZSl9LmJpbmQodGhpcykpW1wiY2F0Y2hcIl0oZnVuY3Rpb24oYSl7cmV0dXJuIGJmKHRoaXMpW1wiY2F0Y2hcIl0odikudGhlbihmdW5jdGlvbigpe3Rocm93IGE7fSl9LmJpbmQodGhpcykpfTtYLnByb3RvdHlwZS5zdG9yZT1YLnByb3RvdHlwZS5TYztcclxuWC5wcm90b3R5cGUucmVtb3ZlPWZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7NjAxMyE9YS5jb2RlJiYoZT1hKX12YXIgYz1hLm9mZmxpbmVVcmksZD0vXm9mZmxpbmU6KFswLTldKykkLy5leGVjKGMpO2lmKCFkKXJldHVybiBQcm9taXNlLnJlamVjdChuZXcgcSg5LDkwMDQsYykpO3ZhciBlPW51bGwsZixnLGg9TnVtYmVyKGRbMV0pO3JldHVybiAkZSh0aGlzKS50aGVuKGZ1bmN0aW9uKCl7WSh0aGlzKTtyZXR1cm4gdGhpcy5hLmdldChcIm1hbmlmZXN0XCIsaCl9LmJpbmQodGhpcykpLnRoZW4oZnVuY3Rpb24oYSl7WSh0aGlzKTtpZighYSl0aHJvdyBuZXcgcSg5LDkwMDMsYyk7Zj1hO2E9VGUoZik7Zz1uZXcgYWIodGhpcy5jLmgsYixmdW5jdGlvbigpe30pO2cuY29uZmlndXJlKHRoaXMuYy5nZXRDb25maWd1cmF0aW9uKCkuZHJtKTtyZXR1cm4gZy5pbml0KGEsITApfS5iaW5kKHRoaXMpKS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIGZiKGcsZi5zZXNzaW9uSWRzKX0uYmluZCh0aGlzKSkudGhlbihmdW5jdGlvbigpe3JldHVybiBnLm8oKX0uYmluZCh0aGlzKSkudGhlbihmdW5jdGlvbigpe1kodGhpcyk7XHJcbmlmKGUpdGhyb3cgZTt2YXIgYj1mLnBlcmlvZHMubWFwKGZ1bmN0aW9uKGEpe3JldHVybiBhLnN0cmVhbXMubWFwKGZ1bmN0aW9uKGEpe3ZhciBiPWEuc2VnbWVudHMubWFwKGZ1bmN0aW9uKGEpe3JldHVybiBOdW1iZXIoL15vZmZsaW5lOlswLTldK1xcL1swLTldK1xcLyhbMC05XSspJC8uZXhlYyhhLnVyaSlbMV0pfSk7YS5pbml0U2VnbWVudFVyaSYmYi5wdXNoKE51bWJlcigvXm9mZmxpbmU6WzAtOV0rXFwvWzAtOV0rXFwvKFswLTldKykkLy5leGVjKGEuaW5pdFNlZ21lbnRVcmkpWzFdKSk7cmV0dXJuIGJ9KS5yZWR1Y2UodCxbXSl9KS5yZWR1Y2UodCxbXSksYz0wLGQ9Yi5sZW5ndGgsZz10aGlzLmoucHJvZ3Jlc3NDYWxsYmFjaztyZXR1cm4gUGUodGhpcy5hLGZ1bmN0aW9uKGUpe2U9Yi5pbmRleE9mKGUua2V5KTswPD1lJiYoZyhhLGMvZCksYysrKTtyZXR1cm4gMDw9ZX0uYmluZCh0aGlzKSl9LmJpbmQodGhpcykpLnRoZW4oZnVuY3Rpb24oKXtZKHRoaXMpO3RoaXMuai5wcm9ncmVzc0NhbGxiYWNrKGEsXHJcbjEpO3JldHVybiB0aGlzLmEucmVtb3ZlKFwibWFuaWZlc3RcIixoKX0uYmluZCh0aGlzKSl9O1gucHJvdG90eXBlLnJlbW92ZT1YLnByb3RvdHlwZS5yZW1vdmU7WC5wcm90b3R5cGUubGlzdD1mdW5jdGlvbigpe3ZhciBhPVtdO3JldHVybiAkZSh0aGlzKS50aGVuKGZ1bmN0aW9uKCl7WSh0aGlzKTtyZXR1cm4gdGhpcy5hLmZvckVhY2goXCJtYW5pZmVzdFwiLGZ1bmN0aW9uKGIpe2EucHVzaChSZShiKSl9KX0uYmluZCh0aGlzKSkudGhlbihmdW5jdGlvbigpe3JldHVybiBhfSl9O1gucHJvdG90eXBlLmxpc3Q9WC5wcm90b3R5cGUubGlzdDtcclxuZnVuY3Rpb24gYWYoYSxiLGMsZCl7ZnVuY3Rpb24gZSgpe312YXIgZj1hLmMuaCxnPWEuYy5nZXRDb25maWd1cmF0aW9uKCksaCxtLG47cmV0dXJuIHViKGIsZixnLm1hbmlmZXN0LnJldHJ5UGFyYW1ldGVycyxkKS50aGVuKGZ1bmN0aW9uKGEpe1kodGhpcyk7bj1uZXcgYTtuLmNvbmZpZ3VyZShnLm1hbmlmZXN0KTtyZXR1cm4gbi5zdGFydChiLGYsdGhpcy5zLmJpbmQodGhpcyksYyl9LmJpbmQoYSkpLnRoZW4oZnVuY3Rpb24oYSl7WSh0aGlzKTtoPWE7bT1uZXcgYWIoZixjLGUpO20uY29uZmlndXJlKGcuZHJtKTtyZXR1cm4gbS5pbml0KGgsITApfS5iaW5kKGEpKS50aGVuKGZ1bmN0aW9uKCl7WSh0aGlzKTtyZXR1cm4gY2YoaCl9LmJpbmQoYSkpLnRoZW4oZnVuY3Rpb24oKXtZKHRoaXMpO3JldHVybiBlYihtKX0uYmluZChhKSkudGhlbihmdW5jdGlvbigpe1kodGhpcyk7cmV0dXJuIG4uc3RvcCgpfS5iaW5kKGEpKS50aGVuKGZ1bmN0aW9uKCl7WSh0aGlzKTtyZXR1cm57bWFuaWZlc3Q6aCxcclxuUWI6bX19LmJpbmQoYSkpW1wiY2F0Y2hcIl0oZnVuY3Rpb24oYSl7aWYobilyZXR1cm4gbi5zdG9wKCkudGhlbihmdW5jdGlvbigpe3Rocm93IGE7fSk7dGhyb3cgYTt9KX1cclxuWC5wcm90b3R5cGUuQT1mdW5jdGlvbihhKXt2YXIgYj1bXSxjPWEuZmlsdGVyKGZ1bmN0aW9uKGEpe3JldHVyblwidmlkZW9cIj09YS50eXBlJiY0ODA+PWEuaGVpZ2h0fSk7Yy5zb3J0KGZ1bmN0aW9uKGEsYil7cmV0dXJuIGIuYmFuZHdpZHRoLWEuYmFuZHdpZHRofSk7Yy5sZW5ndGgmJmIucHVzaChjWzBdKTtmb3IodmFyIGQ9RGModGhpcy5jLmdldENvbmZpZ3VyYXRpb24oKS5wcmVmZXJyZWRBdWRpb0xhbmd1YWdlKSxjPVswLEJjLENjXSxlPWEuZmlsdGVyKGZ1bmN0aW9uKGEpe3JldHVyblwiYXVkaW9cIj09YS50eXBlfSksYz1jLm1hcChmdW5jdGlvbihhKXtyZXR1cm4gZS5maWx0ZXIoZnVuY3Rpb24oYil7Yj1EYyhiLmxhbmd1YWdlKTtyZXR1cm4gQWMoYSxkLGIpfSl9KSxmPWUsZz0wO2c8Yy5sZW5ndGg7ZysrKWNbZ10ubGVuZ3RoJiYoZj1jW2ddKTtmLnNvcnQoZnVuY3Rpb24oYSxiKXtyZXR1cm4gYS5iYW5kd2lkdGgtYi5iYW5kd2lkdGh9KTtmLmxlbmd0aCYmYi5wdXNoKGZbTWF0aC5mbG9vcihmLmxlbmd0aC9cclxuMildKTt2YXIgYz1EYyh0aGlzLmMuZ2V0Q29uZmlndXJhdGlvbigpLnByZWZlcnJlZFRleHRMYW5ndWFnZSksaD1BYy5iaW5kKG51bGwsQ2MsYyk7Yi5wdXNoLmFwcGx5KGIsYS5maWx0ZXIoZnVuY3Rpb24oYSl7dmFyIGI9RGMoYS5sYW5ndWFnZSk7cmV0dXJuXCJ0ZXh0XCI9PWEudHlwZSYmaChiKX0pKTtyZXR1cm4gYn07ZnVuY3Rpb24gWWUoYSl7cmV0dXJue3RyYWNrU2VsZWN0aW9uQ2FsbGJhY2s6YS5BLmJpbmQoYSkscHJvZ3Jlc3NDYWxsYmFjazpmdW5jdGlvbihhLGMpe2lmKGF8fGMpcmV0dXJuIG51bGx9fX1mdW5jdGlvbiAkZShhKXtyZXR1cm4gYS5hLmE/UHJvbWlzZS5yZXNvbHZlKCk6YS5hLmluaXQoUWUpfVxyXG5YLnByb3RvdHlwZS5zPWZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSxiLGMpe2I9Yi5maWx0ZXIoZnVuY3Rpb24oYSl7cmV0dXJuIGEudHlwZT09Y30pO3JldHVybiAwPT1iLmxlbmd0aD9udWxsOkljKGEsYlswXSkuc3RyZWFtfXZhciBjPXt9O3RoaXMuaSYmKGM9e3ZpZGVvOmIodGhpcy5iLnBlcmlvZHNbMF0sdGhpcy5pLFwidmlkZW9cIiksYXVkaW86Yih0aGlzLmIucGVyaW9kc1swXSx0aGlzLmksXCJhdWRpb1wiKX0pO0djKHRoaXMuZyxjLGEpO0ZjKGEsdGhpcy5jLmdldENvbmZpZ3VyYXRpb24oKS5yZXN0cmljdGlvbnMse3dpZHRoOkluZmluaXR5LGhlaWdodDpJbmZpbml0eX0pfTtmdW5jdGlvbiBiZihhKXt2YXIgYj1hLmc/YS5nLm8oKTpQcm9taXNlLnJlc29sdmUoKTthLmc9bnVsbDthLmI9bnVsbDthLnY9ITE7YS5pPW51bGw7YS5sPVtdO2EuZj0tMTtyZXR1cm4gYn1cclxuZnVuY3Rpb24gY2YoYSl7YT1hLnBlcmlvZHMubWFwKGZ1bmN0aW9uKGEpe3JldHVybiBhLnN0cmVhbVNldHN9KS5yZWR1Y2UodCxbXSkubWFwKGZ1bmN0aW9uKGEpe3JldHVybiBhLnN0cmVhbXN9KS5yZWR1Y2UodCxbXSk7cmV0dXJuIFByb21pc2UuYWxsKGEubWFwKGZ1bmN0aW9uKGEpe3JldHVybiBhLmNyZWF0ZVNlZ21lbnRJbmRleCgpfSkpfVxyXG5YLnByb3RvdHlwZS53PWZ1bmN0aW9uKGEpe3ZhciBiPUhjKGEsbnVsbCksYj10aGlzLmoudHJhY2tTZWxlY3Rpb25DYWxsYmFjayhiKTt0aGlzLml8fCh0aGlzLmk9Yix0aGlzLmIucGVyaW9kcy5mb3JFYWNoKHRoaXMucy5iaW5kKHRoaXMpKSk7Zm9yKHZhciBjPWIubGVuZ3RoLTE7MDxjOy0tYyl7Zm9yKHZhciBkPSExLGU9Yy0xOzA8PWU7LS1lKWlmKGJbY10udHlwZT09YltlXS50eXBlJiZiW2NdLmtpbmQ9PWJbZV0ua2luZCYmYltjXS5sYW5ndWFnZT09YltlXS5sYW5ndWFnZSl7ZD0hMDticmVha31pZihkKWJyZWFrfWI9Yi5tYXAoZnVuY3Rpb24oYil7Yj1JYyhhLGIpO3JldHVybiBkZih0aGlzLGEsYi5UYyxiLnN0cmVhbSl9LmJpbmQodGhpcykpO3JldHVybntzdGFydFRpbWU6YS5zdGFydFRpbWUsc3RyZWFtczpifX07XHJcbmZ1bmN0aW9uIGRmKGEsYixjLGQpe2Zvcih2YXIgZT1bXSxmPWEuYi5wcmVzZW50YXRpb25UaW1lbGluZS5yYSgpLGc9ZixoPWQuZmluZFNlZ21lbnRQb3NpdGlvbihmKSxtPW51bGwhPWg/ZC5nZXRTZWdtZW50UmVmZXJlbmNlKGgpOm51bGw7bTspe3ZhciBuPWEuYS5iLnNlZ21lbnQrKztWZShhLmgsYy50eXBlLG0sKG0uZW5kVGltZS1tLnN0YXJ0VGltZSkqZC5iYW5kd2lkdGgvOCxmdW5jdGlvbihhLGIsYyxkKXtiPXtrZXk6YSxkYXRhOmQsbWFuaWZlc3RLZXk6dGhpcy5mLHN0cmVhbU51bWJlcjpjLHNlZ21lbnROdW1iZXI6Yn07dGhpcy5sLnB1c2goYSk7cmV0dXJuIE9lKHRoaXMuYSxcInNlZ21lbnRcIixiKX0uYmluZChhLG4sbS5wb3NpdGlvbixkLmlkKSk7ZS5wdXNoKHtzdGFydFRpbWU6bS5zdGFydFRpbWUsZW5kVGltZTptLmVuZFRpbWUsdXJpOlwib2ZmbGluZTpcIithLmYrXCIvXCIrZC5pZCtcIi9cIitufSk7Zz1tLmVuZFRpbWUrYi5zdGFydFRpbWU7bT1kLmdldFNlZ21lbnRSZWZlcmVuY2UoKytoKX1hLm09XHJcbk1hdGgubWF4KGEubSxnLWYpO2I9bnVsbDtkLmluaXRTZWdtZW50UmVmZXJlbmNlJiYobj1hLmEuYi5zZWdtZW50KyssYj1cIm9mZmxpbmU6XCIrYS5mK1wiL1wiK2QuaWQrXCIvXCIrbixWZShhLmgsYy50eXBlLGQuaW5pdFNlZ21lbnRSZWZlcmVuY2UsMCxmdW5jdGlvbihhLGIpe3ZhciBjPXtrZXk6bixkYXRhOmIsbWFuaWZlc3RLZXk6dGhpcy5mLHN0cmVhbU51bWJlcjphLHNlZ21lbnROdW1iZXI6LTF9O3RoaXMubC5wdXNoKG4pO3JldHVybiBPZSh0aGlzLmEsXCJzZWdtZW50XCIsYyl9LmJpbmQoYSxkLmlkKSkpO3JldHVybntpZDpkLmlkLHByaW1hcnk6Yy5wcmltYXJ5LHByZXNlbnRhdGlvblRpbWVPZmZzZXQ6ZC5wcmVzZW50YXRpb25UaW1lT2Zmc2V0fHwwLGNvbnRlbnRUeXBlOmMudHlwZSxtaW1lVHlwZTpkLm1pbWVUeXBlLGNvZGVjczpkLmNvZGVjcyxraW5kOmQua2luZCxsYW5ndWFnZTpjLmxhbmd1YWdlLHdpZHRoOmQud2lkdGh8fG51bGwsaGVpZ2h0OmQuaGVpZ2h0fHxudWxsLGluaXRTZWdtZW50VXJpOmIsXHJcbmVuY3J5cHRlZDpkLmVuY3J5cHRlZCxrZXlJZDpkLmtleUlkLHNlZ21lbnRzOmV9fWZ1bmN0aW9uIFkoYSl7aWYoIWEuYyl0aHJvdyBuZXcgcSg5LDkwMDIpO31RYy5vZmZsaW5lPVplO2woXCJzaGFrYS5wb2x5ZmlsbC5pbnN0YWxsQWxsXCIsZnVuY3Rpb24oKXtmb3IodmFyIGE9MDthPGVmLmxlbmd0aDsrK2EpZWZbYV0oKX0pO3ZhciBlZj1bXTtmdW5jdGlvbiBmZihhKXtlZi5wdXNoKGEpfWwoXCJzaGFrYS5wb2x5ZmlsbC5yZWdpc3RlclwiLGZmKTtmdW5jdGlvbiBnZihhKXt2YXIgYj1hLnR5cGUucmVwbGFjZSgvXih3ZWJraXR8bW96fE1TKS8sXCJcIikudG9Mb3dlckNhc2UoKSxiPW5ldyBFdmVudChiLGEpO2EudGFyZ2V0LmRpc3BhdGNoRXZlbnQoYil9XHJcbmZmKGZ1bmN0aW9uKCl7aWYod2luZG93LkRvY3VtZW50KXt2YXIgYT1FbGVtZW50LnByb3RvdHlwZTthLnJlcXVlc3RGdWxsc2NyZWVuPWEucmVxdWVzdEZ1bGxzY3JlZW58fGEubW96UmVxdWVzdEZ1bGxTY3JlZW58fGEubXNSZXF1ZXN0RnVsbHNjcmVlbnx8YS53ZWJraXRSZXF1ZXN0RnVsbHNjcmVlbjthPURvY3VtZW50LnByb3RvdHlwZTthLmV4aXRGdWxsc2NyZWVuPWEuZXhpdEZ1bGxzY3JlZW58fGEubW96Q2FuY2VsRnVsbFNjcmVlbnx8YS5tc0V4aXRGdWxsc2NyZWVufHxhLndlYmtpdEV4aXRGdWxsc2NyZWVuO1wiZnVsbHNjcmVlbkVsZW1lbnRcImluIGRvY3VtZW50fHxPYmplY3QuZGVmaW5lUHJvcGVydHkoZG9jdW1lbnQsXCJmdWxsc2NyZWVuRWxlbWVudFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gZG9jdW1lbnQubW96RnVsbFNjcmVlbkVsZW1lbnR8fGRvY3VtZW50Lm1zRnVsbHNjcmVlbkVsZW1lbnR8fGRvY3VtZW50LndlYmtpdEZ1bGxzY3JlZW5FbGVtZW50fX0pO2RvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJ3ZWJraXRmdWxsc2NyZWVuY2hhbmdlXCIsXHJcbmdmKTtkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwid2Via2l0ZnVsbHNjcmVlbmVycm9yXCIsZ2YpO2RvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3pmdWxsc2NyZWVuY2hhbmdlXCIsZ2YpO2RvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3pmdWxsc2NyZWVuZXJyb3JcIixnZik7ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIk1TRnVsbHNjcmVlbkNoYW5nZVwiLGdmKTtkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiTVNGdWxsc2NyZWVuRXJyb3JcIixnZil9fSk7ZnVuY3Rpb24gaGYoYSl7dGhpcy5jPVtdO3RoaXMuYj1bXTt0aGlzLmE9W107Zm9yKGE9bmV3IE9kKG5ldyBEYXRhVmlldyhhLmJ1ZmZlcikpO1FkKGEpOyl7dmFyIGI9WGQoMTg4NjYxNDM3NixhKTtpZigtMT09YilicmVhazt2YXIgYz1hLmEtOCxkPVJkKGEpO2lmKDE8ZClTKGEsYi0oYS5hLWMpKTtlbHNle1MoYSwzKTt2YXIgZT1aYShWZChhLDE2KSksZj1bXTtpZigwPGQpZm9yKHZhciBkPVIoYSksZz0wO2c8ZDsrK2cpe3ZhciBoPVphKFZkKGEsMTYpKTtmLnB1c2goaCl9ZD1SKGEpO1MoYSxkKTt0aGlzLmIucHVzaC5hcHBseSh0aGlzLmIsZik7dGhpcy5jLnB1c2goZSk7dGhpcy5hLnB1c2goe3N0YXJ0OmMsZW5kOmEuYS0xfSk7YS5hIT1jK2ImJlMoYSxiLShhLmEtYykpfX19O2Z1bmN0aW9uIGpmKGEsYil7dHJ5e3ZhciBjPW5ldyBrZihhLGIpO3JldHVybiBQcm9taXNlLnJlc29sdmUoYyl9Y2F0Y2goZCl7cmV0dXJuIFByb21pc2UucmVqZWN0KGQpfX1cclxuZnVuY3Rpb24ga2YoYSxiKXt0aGlzLmtleVN5c3RlbT1hO2Zvcih2YXIgYz0hMSxkPTA7ZDxiLmxlbmd0aDsrK2Qpe3ZhciBlPWJbZF0sZj17YXVkaW9DYXBhYmlsaXRpZXM6W10sdmlkZW9DYXBhYmlsaXRpZXM6W10scGVyc2lzdGVudFN0YXRlOlwib3B0aW9uYWxcIixkaXN0aW5jdGl2ZUlkZW50aWZpZXI6XCJvcHRpb25hbFwiLGluaXREYXRhVHlwZXM6ZS5pbml0RGF0YVR5cGVzLHNlc3Npb25UeXBlczpbXCJ0ZW1wb3JhcnlcIl0sbGFiZWw6ZS5sYWJlbH0sZz0hMTtpZihlLmF1ZGlvQ2FwYWJpbGl0aWVzKWZvcih2YXIgaD0wO2g8ZS5hdWRpb0NhcGFiaWxpdGllcy5sZW5ndGg7KytoKXt2YXIgbT1lLmF1ZGlvQ2FwYWJpbGl0aWVzW2hdO2lmKG0uY29udGVudFR5cGUpe3ZhciBnPSEwLG49bS5jb250ZW50VHlwZS5zcGxpdChcIjtcIilbMF07TVNNZWRpYUtleXMuaXNUeXBlU3VwcG9ydGVkKHRoaXMua2V5U3lzdGVtLG4pJiYoZi5hdWRpb0NhcGFiaWxpdGllcy5wdXNoKG0pLGM9ITApfX1pZihlLnZpZGVvQ2FwYWJpbGl0aWVzKWZvcihoPVxyXG4wO2g8ZS52aWRlb0NhcGFiaWxpdGllcy5sZW5ndGg7KytoKW09ZS52aWRlb0NhcGFiaWxpdGllc1toXSxtLmNvbnRlbnRUeXBlJiYoZz0hMCxuPW0uY29udGVudFR5cGUuc3BsaXQoXCI7XCIpWzBdLE1TTWVkaWFLZXlzLmlzVHlwZVN1cHBvcnRlZCh0aGlzLmtleVN5c3RlbSxuKSYmKGYudmlkZW9DYXBhYmlsaXRpZXMucHVzaChtKSxjPSEwKSk7Z3x8KGM9TVNNZWRpYUtleXMuaXNUeXBlU3VwcG9ydGVkKHRoaXMua2V5U3lzdGVtLFwidmlkZW8vbXA0XCIpKTtcInJlcXVpcmVkXCI9PWUucGVyc2lzdGVudFN0YXRlJiYoZi5wZXJzaXN0ZW50U3RhdGU9XCJyZXF1aXJlZFwiLGYuc2Vzc2lvblR5cGVzPVtcInBlcnNpc3RlbnQtbGljZW5zZVwiXSk7aWYoYyl7dGhpcy5hPWY7cmV0dXJufX1jPUVycm9yKFwiVW5zdXBwb3J0ZWQga2V5U3lzdGVtXCIpO2MubmFtZT1cIk5vdFN1cHBvcnRlZEVycm9yXCI7Yy5jb2RlPURPTUV4Y2VwdGlvbi5OT1RfU1VQUE9SVEVEX0VSUjt0aHJvdyBjO31cclxua2YucHJvdG90eXBlLmNyZWF0ZU1lZGlhS2V5cz1mdW5jdGlvbigpe3ZhciBhPW5ldyBsZih0aGlzLmtleVN5c3RlbSk7cmV0dXJuIFByb21pc2UucmVzb2x2ZShhKX07a2YucHJvdG90eXBlLmdldENvbmZpZ3VyYXRpb249ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hfTtmdW5jdGlvbiBtZihhKXt2YXIgYj10aGlzLm1lZGlhS2V5cztiJiZiIT1hJiZuZihiLG51bGwpO2RlbGV0ZSB0aGlzLm1lZGlhS2V5cztyZXR1cm4odGhpcy5tZWRpYUtleXM9YSk/bmYoYSx0aGlzKTpQcm9taXNlLnJlc29sdmUoKX1mdW5jdGlvbiBsZihhKXt0aGlzLmE9bmV3IE1TTWVkaWFLZXlzKGEpO3RoaXMuYj1uZXcgen1sZi5wcm90b3R5cGUuY3JlYXRlU2Vzc2lvbj1mdW5jdGlvbihhKXtpZihcInRlbXBvcmFyeVwiIT0oYXx8XCJ0ZW1wb3JhcnlcIikpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlNlc3Npb24gdHlwZSBcIithK1wiIGlzIHVuc3VwcG9ydGVkIG9uIHRoaXMgcGxhdGZvcm0uXCIpO3JldHVybiBuZXcgb2YodGhpcy5hKX07XHJcbmxmLnByb3RvdHlwZS5zZXRTZXJ2ZXJDZXJ0aWZpY2F0ZT1mdW5jdGlvbigpe3JldHVybiBQcm9taXNlLnJlamVjdChFcnJvcihcInNldFNlcnZlckNlcnRpZmljYXRlIG5vdCBzdXBwb3J0ZWQgb24gdGhpcyBwbGF0Zm9ybS5cIikpfTtmdW5jdGlvbiBuZihhLGIpe2Z1bmN0aW9uIGMoKXtiLm1zU2V0TWVkaWFLZXlzKGQuYSk7Yi5yZW1vdmVFdmVudExpc3RlbmVyKFwibG9hZGVkbWV0YWRhdGFcIixjKX1LYShhLmIpO2lmKCFiKXJldHVybiBQcm9taXNlLnJlc29sdmUoKTtCKGEuYixiLFwibXNuZWVka2V5XCIscGYpO3ZhciBkPWE7dHJ5e3JldHVybiAxPD1iLnJlYWR5U3RhdGU/Yi5tc1NldE1lZGlhS2V5cyhhLmEpOmIuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRlZG1ldGFkYXRhXCIsYyksUHJvbWlzZS5yZXNvbHZlKCl9Y2F0Y2goZSl7cmV0dXJuIFByb21pc2UucmVqZWN0KGUpfX1cclxuZnVuY3Rpb24gb2YoYSl7cC5jYWxsKHRoaXMpO3RoaXMuYz1udWxsO3RoaXMuZz1hO3RoaXMuYj10aGlzLmE9bnVsbDt0aGlzLmY9bmV3IHo7dGhpcy5zZXNzaW9uSWQ9XCJcIjt0aGlzLmV4cGlyYXRpb249TmFOO3RoaXMuY2xvc2VkPW5ldyB3O3RoaXMua2V5U3RhdHVzZXM9bmV3IHFmfWJhKG9mKTtrPW9mLnByb3RvdHlwZTtrLmdlbmVyYXRlUmVxdWVzdD1mdW5jdGlvbihhLGIpe3RoaXMuYT1uZXcgdzt0cnl7dGhpcy5jPXRoaXMuZy5jcmVhdGVTZXNzaW9uKFwidmlkZW8vbXA0XCIsbmV3IFVpbnQ4QXJyYXkoYiksbnVsbCksQih0aGlzLmYsdGhpcy5jLFwibXNrZXltZXNzYWdlXCIsdGhpcy5oYy5iaW5kKHRoaXMpKSxCKHRoaXMuZix0aGlzLmMsXCJtc2tleWFkZGVkXCIsdGhpcy5mYy5iaW5kKHRoaXMpKSxCKHRoaXMuZix0aGlzLmMsXCJtc2tleWVycm9yXCIsdGhpcy5nYy5iaW5kKHRoaXMpKSxyZih0aGlzLFwic3RhdHVzLXBlbmRpbmdcIil9Y2F0Y2goYyl7dGhpcy5hLnJlamVjdChjKX1yZXR1cm4gdGhpcy5hfTtcclxuay5sb2FkPWZ1bmN0aW9uKCl7cmV0dXJuIFByb21pc2UucmVqZWN0KEVycm9yKFwiTWVkaWFLZXlTZXNzaW9uLmxvYWQgbm90IHlldCBzdXBwb3J0ZWRcIikpfTtrLnVwZGF0ZT1mdW5jdGlvbihhKXt0aGlzLmI9bmV3IHc7dHJ5e3RoaXMuYy51cGRhdGUobmV3IFVpbnQ4QXJyYXkoYSkpfWNhdGNoKGIpe3RoaXMuYi5yZWplY3QoYil9cmV0dXJuIHRoaXMuYn07ay5jbG9zZT1mdW5jdGlvbigpe3RyeXt0aGlzLmMuY2xvc2UoKSx0aGlzLmNsb3NlZC5yZXNvbHZlKCksS2EodGhpcy5mKX1jYXRjaChhKXt0aGlzLmNsb3NlZC5yZWplY3QoYSl9cmV0dXJuIHRoaXMuY2xvc2VkfTtrLnJlbW92ZT1mdW5jdGlvbigpe3JldHVybiBQcm9taXNlLnJlamVjdChFcnJvcihcIk1lZGlhS2V5U2Vzc2lvbi5yZW1vdmUgaXMgb25seSBhcHBsaWNhYmxlIGZvciBwZXJzaXN0ZW50IGxpY2Vuc2VzLCB3aGljaCBhcmUgbm90IHN1cHBvcnRlZCBvbiB0aGlzIHBsYXRmb3JtXCIpKX07XHJcbmZ1bmN0aW9uIHBmKGEpe3ZhciBiPWRvY3VtZW50LmNyZWF0ZUV2ZW50KFwiQ3VzdG9tRXZlbnRcIik7Yi5pbml0Q3VzdG9tRXZlbnQoXCJlbmNyeXB0ZWRcIiwhMSwhMSxudWxsKTtiLmluaXREYXRhVHlwZT1cImNlbmNcIjtpZihhPWEuaW5pdERhdGEpe3ZhciBjPW5ldyBoZihhKTtpZighKDE+PWMuYS5sZW5ndGgpKXtmb3IodmFyIGQ9W10sZT0wO2U8Yy5hLmxlbmd0aDtlKyspZC5wdXNoKGEuc3ViYXJyYXkoYy5hW2VdLnN0YXJ0LGMuYVtlXS5lbmQrMSkpO2U9c2Y7YT1bXTtmb3IoYz0wO2M8ZC5sZW5ndGg7KytjKXtmb3IodmFyIGY9ITEsZz0wO2c8YS5sZW5ndGgmJiEoZj1lP2UoZFtjXSxhW2ddKTpkW2NdPT09YVtnXSk7KytnKTtmfHxhLnB1c2goZFtjXSl9Zm9yKGU9ZD0wO2U8YS5sZW5ndGg7ZSsrKWQrPWFbZV0ubGVuZ3RoO2Q9bmV3IFVpbnQ4QXJyYXkoZCk7Zm9yKGU9Yz0wO2U8YS5sZW5ndGg7ZSsrKWQuc2V0KGFbZV0sYyksYys9YVtlXS5sZW5ndGg7YT1kfX1iLmluaXREYXRhPVxyXG5hO3RoaXMuZGlzcGF0Y2hFdmVudChiKX1mdW5jdGlvbiBzZihhLGIpe3JldHVybiAkYShhLGIpfWsuaGM9ZnVuY3Rpb24oYSl7dGhpcy5hJiYodGhpcy5hLnJlc29sdmUoKSx0aGlzLmE9bnVsbCk7dGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBIKFwibWVzc2FnZVwiLHttZXNzYWdlVHlwZTp2b2lkIDA9PXRoaXMua2V5U3RhdHVzZXMuVWEoKT9cImxpY2Vuc2VyZXF1ZXN0XCI6XCJsaWNlbnNlcmVuZXdhbFwiLG1lc3NhZ2U6YS5tZXNzYWdlLmJ1ZmZlcn0pKX07ay5mYz1mdW5jdGlvbigpe3RoaXMuYT8ocmYodGhpcyxcInVzYWJsZVwiKSx0aGlzLmEucmVzb2x2ZSgpLHRoaXMuYT1udWxsKTp0aGlzLmImJihyZih0aGlzLFwidXNhYmxlXCIpLHRoaXMuYi5yZXNvbHZlKCksdGhpcy5iPW51bGwpfTtcclxuay5nYz1mdW5jdGlvbigpe3ZhciBhPUVycm9yKFwiRU1FIFBhdGNoZWRNZWRpYUtleXNNcyBrZXkgZXJyb3JcIik7YS5lcnJvckNvZGU9dGhpcy5jLmVycm9yO2lmKHRoaXMuYSl0aGlzLmEucmVqZWN0KGEpLHRoaXMuYT1udWxsO2Vsc2UgaWYodGhpcy5iKXRoaXMuYi5yZWplY3QoYSksdGhpcy5iPW51bGw7ZWxzZSBzd2l0Y2godGhpcy5jLmVycm9yLmNvZGUpe2Nhc2UgTVNNZWRpYUtleUVycm9yLk1TX01FRElBX0tFWUVSUl9PVVRQVVQ6Y2FzZSBNU01lZGlhS2V5RXJyb3IuTVNfTUVESUFfS0VZRVJSX0hBUkRXQVJFQ0hBTkdFOnJmKHRoaXMsXCJvdXRwdXQtbm90LWFsbG93ZWRcIik7ZGVmYXVsdDpyZih0aGlzLFwiaW50ZXJuYWwtZXJyb3JcIil9fTtmdW5jdGlvbiByZihhLGIpe2Eua2V5U3RhdHVzZXMuY2IoYik7YS5kaXNwYXRjaEV2ZW50KG5ldyBIKFwia2V5c3RhdHVzZXNjaGFuZ2VcIikpfWZ1bmN0aW9uIHFmKCl7dGhpcy5zaXplPTA7dGhpcy5hPXZvaWQgMH12YXIgdGY7az1xZi5wcm90b3R5cGU7XHJcbmsuY2I9ZnVuY3Rpb24oYSl7dGhpcy5zaXplPXZvaWQgMD09YT8wOjE7dGhpcy5hPWF9O2suVWE9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hfTtrLmZvckVhY2g9ZnVuY3Rpb24oYSl7dGhpcy5hJiZhKHRoaXMuYSx0Zil9O2suZ2V0PWZ1bmN0aW9uKGEpe2lmKHRoaXMuaGFzKGEpKXJldHVybiB0aGlzLmF9O2suaGFzPWZ1bmN0aW9uKGEpe3ZhciBiPXRmO3JldHVybiB0aGlzLmEmJiRhKG5ldyBVaW50OEFycmF5KGEpLG5ldyBVaW50OEFycmF5KGIpKT8hMDohMX07ZnVuY3Rpb24gdWYoKXtyZXR1cm4gUHJvbWlzZS5yZWplY3QoRXJyb3IoXCJUaGUga2V5IHN5c3RlbSBzcGVjaWZpZWQgaXMgbm90IHN1cHBvcnRlZC5cIikpfWZ1bmN0aW9uIHZmKGEpe3JldHVybiBhP1Byb21pc2UucmVqZWN0KEVycm9yKFwiTWVkaWFLZXlzIG5vdCBzdXBwb3J0ZWQuXCIpKTpQcm9taXNlLnJlc29sdmUoKX1mdW5jdGlvbiB3Zigpe3Rocm93IG5ldyBUeXBlRXJyb3IoXCJJbGxlZ2FsIGNvbnN0cnVjdG9yLlwiKTt9d2YucHJvdG90eXBlLmNyZWF0ZVNlc3Npb249ZnVuY3Rpb24oKXt9O3dmLnByb3RvdHlwZS5zZXRTZXJ2ZXJDZXJ0aWZpY2F0ZT1mdW5jdGlvbigpe307ZnVuY3Rpb24geGYoKXt0aHJvdyBuZXcgVHlwZUVycm9yKFwiSWxsZWdhbCBjb25zdHJ1Y3Rvci5cIik7fXhmLnByb3RvdHlwZS5nZXRDb25maWd1cmF0aW9uPWZ1bmN0aW9uKCl7fTt4Zi5wcm90b3R5cGUuY3JlYXRlTWVkaWFLZXlzPWZ1bmN0aW9uKCl7fTtmdW5jdGlvbiB5ZihhLGIpe3RyeXt2YXIgYz1uZXcgemYoYSxiKTtyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGMpfWNhdGNoKGQpe3JldHVybiBQcm9taXNlLnJlamVjdChkKX19ZnVuY3Rpb24gQWYoYSl7dmFyIGI9dGhpcy5tZWRpYUtleXM7YiYmYiE9YSYmQmYoYixudWxsKTtkZWxldGUgdGhpcy5tZWRpYUtleXM7KHRoaXMubWVkaWFLZXlzPWEpJiZCZihhLHRoaXMpO3JldHVybiBQcm9taXNlLnJlc29sdmUoKX1cclxuZnVuY3Rpb24gemYoYSxiKXt0aGlzLmE9dGhpcy5rZXlTeXN0ZW09YTt2YXIgYz0hMDtcIm9yZy53My5jbGVhcmtleVwiPT1hJiYodGhpcy5hPVwid2Via2l0LW9yZy53My5jbGVhcmtleVwiLGM9ITEpO3ZhciBkPSExLGU7ZT1kb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcInZpZGVvXCIpO2U9ZS5sZW5ndGg/ZVswXTpkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidmlkZW9cIik7Zm9yKHZhciBmPTA7ZjxiLmxlbmd0aDsrK2Ype3ZhciBnPWJbZl0saD17YXVkaW9DYXBhYmlsaXRpZXM6W10sdmlkZW9DYXBhYmlsaXRpZXM6W10scGVyc2lzdGVudFN0YXRlOlwib3B0aW9uYWxcIixkaXN0aW5jdGl2ZUlkZW50aWZpZXI6XCJvcHRpb25hbFwiLGluaXREYXRhVHlwZXM6Zy5pbml0RGF0YVR5cGVzLHNlc3Npb25UeXBlczpbXCJ0ZW1wb3JhcnlcIl0sbGFiZWw6Zy5sYWJlbH0sbT0hMTtpZihnLmF1ZGlvQ2FwYWJpbGl0aWVzKWZvcih2YXIgbj0wO248Zy5hdWRpb0NhcGFiaWxpdGllcy5sZW5ndGg7KytuKXt2YXIgcj1cclxuZy5hdWRpb0NhcGFiaWxpdGllc1tuXTtyLmNvbnRlbnRUeXBlJiYobT0hMCxlLmNhblBsYXlUeXBlKHIuY29udGVudFR5cGUuc3BsaXQoXCI7XCIpWzBdLHRoaXMuYSkmJihoLmF1ZGlvQ2FwYWJpbGl0aWVzLnB1c2gociksZD0hMCkpfWlmKGcudmlkZW9DYXBhYmlsaXRpZXMpZm9yKG49MDtuPGcudmlkZW9DYXBhYmlsaXRpZXMubGVuZ3RoOysrbilyPWcudmlkZW9DYXBhYmlsaXRpZXNbbl0sci5jb250ZW50VHlwZSYmKG09ITAsZS5jYW5QbGF5VHlwZShyLmNvbnRlbnRUeXBlLHRoaXMuYSkmJihoLnZpZGVvQ2FwYWJpbGl0aWVzLnB1c2gociksZD0hMCkpO218fChkPWUuY2FuUGxheVR5cGUoXCJ2aWRlby9tcDRcIix0aGlzLmEpfHxlLmNhblBsYXlUeXBlKFwidmlkZW8vd2VibVwiLHRoaXMuYSkpO1wicmVxdWlyZWRcIj09Zy5wZXJzaXN0ZW50U3RhdGUmJihjPyhoLnBlcnNpc3RlbnRTdGF0ZT1cInJlcXVpcmVkXCIsaC5zZXNzaW9uVHlwZXM9W1wicGVyc2lzdGVudC1saWNlbnNlXCJdKTpkPSExKTtpZihkKXt0aGlzLmI9XHJcbmg7cmV0dXJufX1jPVwiVW5zdXBwb3J0ZWQga2V5U3lzdGVtXCI7aWYoXCJvcmcudzMuY2xlYXJrZXlcIj09YXx8XCJjb20ud2lkZXZpbmUuYWxwaGFcIj09YSljPVwiTm9uZSBvZiB0aGUgcmVxdWVzdGVkIGNvbmZpZ3VyYXRpb25zIHdlcmUgc3VwcG9ydGVkLlwiO2M9RXJyb3IoYyk7Yy5uYW1lPVwiTm90U3VwcG9ydGVkRXJyb3JcIjtjLmNvZGU9RE9NRXhjZXB0aW9uLk5PVF9TVVBQT1JURURfRVJSO3Rocm93IGM7fXpmLnByb3RvdHlwZS5jcmVhdGVNZWRpYUtleXM9ZnVuY3Rpb24oKXt2YXIgYT1uZXcgQ2YodGhpcy5hKTtyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGEpfTt6Zi5wcm90b3R5cGUuZ2V0Q29uZmlndXJhdGlvbj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmJ9O2Z1bmN0aW9uIENmKGEpe3RoaXMuZz1hO3RoaXMuYj1udWxsO3RoaXMuYT1uZXcgejt0aGlzLmM9W107dGhpcy5mPXt9fVxyXG5mdW5jdGlvbiBCZihhLGIpe2EuYj1iO0thKGEuYSk7YiYmKEIoYS5hLGIsXCJ3ZWJraXRuZWVka2V5XCIsYS5wYy5iaW5kKGEpKSxCKGEuYSxiLFwid2Via2l0a2V5bWVzc2FnZVwiLGEub2MuYmluZChhKSksQihhLmEsYixcIndlYmtpdGtleWFkZGVkXCIsYS5tYy5iaW5kKGEpKSxCKGEuYSxiLFwid2Via2l0a2V5ZXJyb3JcIixhLm5jLmJpbmQoYSkpKX1rPUNmLnByb3RvdHlwZTtrLmNyZWF0ZVNlc3Npb249ZnVuY3Rpb24oYSl7dmFyIGI9YXx8XCJ0ZW1wb3JhcnlcIjtpZihcInRlbXBvcmFyeVwiIT1iJiZcInBlcnNpc3RlbnQtbGljZW5zZVwiIT1iKXRocm93IG5ldyBUeXBlRXJyb3IoXCJTZXNzaW9uIHR5cGUgXCIrYStcIiBpcyB1bnN1cHBvcnRlZCBvbiB0aGlzIHBsYXRmb3JtLlwiKTthPXRoaXMuYnx8ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInZpZGVvXCIpO2Euc3JjfHwoYS5zcmM9XCJhYm91dDpibGFua1wiKTtiPW5ldyBEZihhLHRoaXMuZyxiKTt0aGlzLmMucHVzaChiKTtyZXR1cm4gYn07XHJcbmsuc2V0U2VydmVyQ2VydGlmaWNhdGU9ZnVuY3Rpb24oKXtyZXR1cm4gUHJvbWlzZS5yZWplY3QoRXJyb3IoXCJzZXRTZXJ2ZXJDZXJ0aWZpY2F0ZSBub3Qgc3VwcG9ydGVkIG9uIHRoaXMgcGxhdGZvcm0uXCIpKX07ay5wYz1mdW5jdGlvbihhKXt0aGlzLmIuZGlzcGF0Y2hFdmVudChuZXcgSChcImVuY3J5cHRlZFwiLHtpbml0RGF0YVR5cGU6XCJ3ZWJtXCIsaW5pdERhdGE6YS5pbml0RGF0YX0pKX07ay5vYz1mdW5jdGlvbihhKXt2YXIgYj1FZih0aGlzLGEuc2Vzc2lvbklkKTtiJiYoYT1uZXcgSChcIm1lc3NhZ2VcIix7bWVzc2FnZVR5cGU6dm9pZCAwPT1iLmtleVN0YXR1c2VzLlVhKCk/XCJsaWNlbnNlcmVxdWVzdFwiOlwibGljZW5zZXJlbmV3YWxcIixtZXNzYWdlOmEubWVzc2FnZX0pLGIuYiYmKGIuYi5yZXNvbHZlKCksYi5iPW51bGwpLGIuZGlzcGF0Y2hFdmVudChhKSl9O1xyXG5rLm1jPWZ1bmN0aW9uKGEpe2lmKGE9RWYodGhpcyxhLnNlc3Npb25JZCkpRmYoYSxcInVzYWJsZVwiKSxhLmEmJmEuYS5yZXNvbHZlKCksYS5hPW51bGx9O1xyXG5rLm5jPWZ1bmN0aW9uKGEpe3ZhciBiPUVmKHRoaXMsYS5zZXNzaW9uSWQpO2lmKGIpe3ZhciBjPUVycm9yKFwiRU1FIHYwLjFiIGtleSBlcnJvclwiKTtjLmVycm9yQ29kZT1hLmVycm9yQ29kZTtjLmVycm9yQ29kZS5zeXN0ZW1Db2RlPWEuc3lzdGVtQ29kZTshYS5zZXNzaW9uSWQmJmIuYj8oYy5tZXRob2Q9XCJnZW5lcmF0ZVJlcXVlc3RcIiw0NT09YS5zeXN0ZW1Db2RlJiYoYy5tZXNzYWdlPVwiVW5zdXBwb3J0ZWQgc2Vzc2lvbiB0eXBlLlwiKSxiLmIucmVqZWN0KGMpLGIuYj1udWxsKTphLnNlc3Npb25JZCYmYi5hPyhjLm1ldGhvZD1cInVwZGF0ZVwiLGIuYS5yZWplY3QoYyksYi5hPW51bGwpOihjPWEuc3lzdGVtQ29kZSxhLmVycm9yQ29kZS5jb2RlPT1NZWRpYUtleUVycm9yLk1FRElBX0tFWUVSUl9PVVRQVVQ/RmYoYixcIm91dHB1dC1yZXN0cmljdGVkXCIpOjE9PWM/RmYoYixcImV4cGlyZWRcIik6RmYoYixcImludGVybmFsLWVycm9yXCIpKX19O1xyXG5mdW5jdGlvbiBFZihhLGIpe3ZhciBjPWEuZltiXTtyZXR1cm4gYz9jOihjPWEuYy5zaGlmdCgpKT8oYy5zZXNzaW9uSWQ9YixhLmZbYl09Yyk6bnVsbH1mdW5jdGlvbiBEZihhLGIsYyl7cC5jYWxsKHRoaXMpO3RoaXMuZj1hO3RoaXMuaD0hMTt0aGlzLmE9dGhpcy5iPW51bGw7dGhpcy5jPWI7dGhpcy5nPWM7dGhpcy5zZXNzaW9uSWQ9XCJcIjt0aGlzLmV4cGlyYXRpb249TmFOO3RoaXMuY2xvc2VkPW5ldyB3O3RoaXMua2V5U3RhdHVzZXM9bmV3IEdmfWJhKERmKTtcclxuZnVuY3Rpb24gSGYoYSxiLGMpe2lmKGEuaClyZXR1cm4gUHJvbWlzZS5yZWplY3QoRXJyb3IoXCJUaGUgc2Vzc2lvbiBpcyBhbHJlYWR5IGluaXRpYWxpemVkLlwiKSk7YS5oPSEwO3ZhciBkO3RyeXtpZihcInBlcnNpc3RlbnQtbGljZW5zZVwiPT1hLmcpaWYoYylkPW5ldyBVaW50OEFycmF5KFNhKFwiTE9BRF9TRVNTSU9OfFwiK2MpKTtlbHNle3ZhciBlPVNhKFwiUEVSU0lTVEVOVHxcIiksZj1uZXcgVWludDhBcnJheShlLmJ5dGVMZW5ndGgrYi5ieXRlTGVuZ3RoKTtmLnNldChuZXcgVWludDhBcnJheShlKSwwKTtmLnNldChuZXcgVWludDhBcnJheShiKSxlLmJ5dGVMZW5ndGgpO2Q9Zn1lbHNlIGQ9bmV3IFVpbnQ4QXJyYXkoYil9Y2F0Y2goZyl7cmV0dXJuIFByb21pc2UucmVqZWN0KGcpfWEuYj1uZXcgdzt0cnl7YS5mLndlYmtpdEdlbmVyYXRlS2V5UmVxdWVzdChhLmMsZCl9Y2F0Y2goZyl7aWYoXCJJbnZhbGlkU3RhdGVFcnJvclwiIT1nLm5hbWUpcmV0dXJuIGEuYj1udWxsLFByb21pc2UucmVqZWN0KGcpO1xyXG5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dHJ5e3RoaXMuZi53ZWJraXRHZW5lcmF0ZUtleVJlcXVlc3QodGhpcy5jLGQpfWNhdGNoKGEpe3RoaXMuYi5yZWplY3QoYSksdGhpcy5iPW51bGx9fS5iaW5kKGEpLDEwKX1yZXR1cm4gYS5ifWs9RGYucHJvdG90eXBlO1xyXG5rLmZiPWZ1bmN0aW9uKGEsYil7aWYodGhpcy5hKXRoaXMuYS50aGVuKHRoaXMuZmIuYmluZCh0aGlzLGEsYikpW1wiY2F0Y2hcIl0odGhpcy5mYi5iaW5kKHRoaXMsYSxiKSk7ZWxzZXt0aGlzLmE9YTt2YXIgYyxkO1wid2Via2l0LW9yZy53My5jbGVhcmtleVwiPT10aGlzLmM/KGM9RChiKSxkPUpTT04ucGFyc2UoYyksXCJvY3RcIiE9ZC5rZXlzWzBdLmt0eSYmKHRoaXMuYS5yZWplY3QoRXJyb3IoXCJSZXNwb25zZSBpcyBub3QgYSB2YWxpZCBKU09OIFdlYiBLZXkgU2V0LlwiKSksdGhpcy5hPW51bGwpLGM9WGEoZC5rZXlzWzBdLmspLGQ9WGEoZC5rZXlzWzBdLmtpZCkpOihjPW5ldyBVaW50OEFycmF5KGIpLGQ9bnVsbCk7dHJ5e3RoaXMuZi53ZWJraXRBZGRLZXkodGhpcy5jLGMsZCx0aGlzLnNlc3Npb25JZCl9Y2F0Y2goZSl7dGhpcy5hLnJlamVjdChlKSx0aGlzLmE9bnVsbH19fTtcclxuZnVuY3Rpb24gRmYoYSxiKXthLmtleVN0YXR1c2VzLmNiKGIpO2EuZGlzcGF0Y2hFdmVudChuZXcgSChcImtleXN0YXR1c2VzY2hhbmdlXCIpKX1rLmdlbmVyYXRlUmVxdWVzdD1mdW5jdGlvbihhLGIpe3JldHVybiBIZih0aGlzLGIsbnVsbCl9O2subG9hZD1mdW5jdGlvbihhKXtyZXR1cm5cInBlcnNpc3RlbnQtbGljZW5zZVwiPT10aGlzLmc/SGYodGhpcyxudWxsLGEpOlByb21pc2UucmVqZWN0KEVycm9yKFwiTm90IGEgcGVyc2lzdGVudCBzZXNzaW9uLlwiKSl9O2sudXBkYXRlPWZ1bmN0aW9uKGEpe3ZhciBiPW5ldyB3O3RoaXMuZmIoYixhKTtyZXR1cm4gYn07XHJcbmsuY2xvc2U9ZnVuY3Rpb24oKXtpZihcInBlcnNpc3RlbnQtbGljZW5zZVwiIT10aGlzLmcpe2lmKCF0aGlzLnNlc3Npb25JZClyZXR1cm4gdGhpcy5jbG9zZWQucmVqZWN0KEVycm9yKFwiVGhlIHNlc3Npb24gaXMgbm90IGNhbGxhYmxlLlwiKSksdGhpcy5jbG9zZWQ7dGhpcy5mLndlYmtpdENhbmNlbEtleVJlcXVlc3QodGhpcy5jLHRoaXMuc2Vzc2lvbklkKX10aGlzLmNsb3NlZC5yZXNvbHZlKCk7cmV0dXJuIHRoaXMuY2xvc2VkfTtrLnJlbW92ZT1mdW5jdGlvbigpe3JldHVyblwicGVyc2lzdGVudC1saWNlbnNlXCIhPXRoaXMuZz9Qcm9taXNlLnJlamVjdChFcnJvcihcIk5vdCBhIHBlcnNpc3RlbnQgc2Vzc2lvbi5cIikpOnRoaXMuY2xvc2UoKX07ZnVuY3Rpb24gR2YoKXt0aGlzLnNpemU9MDt0aGlzLmE9dm9pZCAwfXZhciBJZjtrPUdmLnByb3RvdHlwZTtrLmNiPWZ1bmN0aW9uKGEpe3RoaXMuc2l6ZT12b2lkIDA9PWE/MDoxO3RoaXMuYT1hfTtrLlVhPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYX07XHJcbmsuZm9yRWFjaD1mdW5jdGlvbihhKXt0aGlzLmEmJmEodGhpcy5hLElmKX07ay5nZXQ9ZnVuY3Rpb24oYSl7aWYodGhpcy5oYXMoYSkpcmV0dXJuIHRoaXMuYX07ay5oYXM9ZnVuY3Rpb24oYSl7dmFyIGI9SWY7cmV0dXJuIHRoaXMuYSYmJGEobmV3IFVpbnQ4QXJyYXkoYSksbmV3IFVpbnQ4QXJyYXkoYikpPyEwOiExfTtmZihmdW5jdGlvbigpeyF3aW5kb3cuSFRNTFZpZGVvRWxlbWVudHx8bmF2aWdhdG9yLnJlcXVlc3RNZWRpYUtleVN5c3RlbUFjY2VzcyYmTWVkaWFLZXlTeXN0ZW1BY2Nlc3MucHJvdG90eXBlLmdldENvbmZpZ3VyYXRpb258fChIVE1MTWVkaWFFbGVtZW50LnByb3RvdHlwZS53ZWJraXRHZW5lcmF0ZUtleVJlcXVlc3Q/KElmPShuZXcgVWludDhBcnJheShbMF0pKS5idWZmZXIsbmF2aWdhdG9yLnJlcXVlc3RNZWRpYUtleVN5c3RlbUFjY2Vzcz15ZixkZWxldGUgSFRNTE1lZGlhRWxlbWVudC5wcm90b3R5cGUubWVkaWFLZXlzLEhUTUxNZWRpYUVsZW1lbnQucHJvdG90eXBlLm1lZGlhS2V5cz1udWxsLEhUTUxNZWRpYUVsZW1lbnQucHJvdG90eXBlLnNldE1lZGlhS2V5cz1BZix3aW5kb3cuTWVkaWFLZXlzPUNmLHdpbmRvdy5NZWRpYUtleVN5c3RlbUFjY2Vzcz16Zik6d2luZG93Lk1TTWVkaWFLZXlzPyh0Zj0obmV3IFVpbnQ4QXJyYXkoWzBdKSkuYnVmZmVyLGRlbGV0ZSBIVE1MTWVkaWFFbGVtZW50LnByb3RvdHlwZS5tZWRpYUtleXMsXHJcbkhUTUxNZWRpYUVsZW1lbnQucHJvdG90eXBlLm1lZGlhS2V5cz1udWxsLEhUTUxNZWRpYUVsZW1lbnQucHJvdG90eXBlLnNldE1lZGlhS2V5cz1tZix3aW5kb3cuTWVkaWFLZXlzPWxmLHdpbmRvdy5NZWRpYUtleVN5c3RlbUFjY2Vzcz1rZixuYXZpZ2F0b3IucmVxdWVzdE1lZGlhS2V5U3lzdGVtQWNjZXNzPWpmKToobmF2aWdhdG9yLnJlcXVlc3RNZWRpYUtleVN5c3RlbUFjY2Vzcz11ZixkZWxldGUgSFRNTE1lZGlhRWxlbWVudC5wcm90b3R5cGUubWVkaWFLZXlzLEhUTUxNZWRpYUVsZW1lbnQucHJvdG90eXBlLm1lZGlhS2V5cz1udWxsLEhUTUxNZWRpYUVsZW1lbnQucHJvdG90eXBlLnNldE1lZGlhS2V5cz12Zix3aW5kb3cuTWVkaWFLZXlzPXdmLHdpbmRvdy5NZWRpYUtleVN5c3RlbUFjY2Vzcz14ZikpfSk7ZmYoZnVuY3Rpb24oKXtpZih3aW5kb3cuTWVkaWFTb3VyY2Upe3ZhciBhPW5hdmlnYXRvci52ZW5kb3IsYj1uYXZpZ2F0b3IuYXBwVmVyc2lvbjtpZihhJiZiJiYhKDA+YS5pbmRleE9mKFwiQXBwbGVcIikpKWlmKDA8PWIuaW5kZXhPZihcIlZlcnNpb24vOFwiKSl3aW5kb3cuTWVkaWFTb3VyY2U9bnVsbDtlbHNle3ZhciBjPU1lZGlhU291cmNlLnByb3RvdHlwZS5hZGRTb3VyY2VCdWZmZXI7TWVkaWFTb3VyY2UucHJvdG90eXBlLmFkZFNvdXJjZUJ1ZmZlcj1mdW5jdGlvbigpe3ZhciBhPWMuYXBwbHkodGhpcyxhcmd1bWVudHMpO2EuYWJvcnQ9ZnVuY3Rpb24oKXt9O3JldHVybiBhfX19fSk7ZnVuY3Rpb24gWihhKXt0aGlzLmM9W107dGhpcy5iPVtdO3RoaXMuamE9SmY7aWYoYSl0cnl7YSh0aGlzLlcuYmluZCh0aGlzKSx0aGlzLmEuYmluZCh0aGlzKSl9Y2F0Y2goYil7dGhpcy5hKGIpfX12YXIgSmY9MDtmdW5jdGlvbiBLZihhKXt2YXIgYj1uZXcgWjtiLlcoYSk7cmV0dXJuIGJ9ZnVuY3Rpb24gTGYoYSl7dmFyIGI9bmV3IFo7Yi5hKGEpO3JldHVybiBifWZ1bmN0aW9uIE1mKGEpe2Z1bmN0aW9uIGIoYSxiLGMpe2EuamE9PUpmJiYoZVtiXT1jLGQrKyxkPT1lLmxlbmd0aCYmYS5XKGUpKX12YXIgYz1uZXcgWjtpZighYS5sZW5ndGgpcmV0dXJuIGMuVyhbXSksYztmb3IodmFyIGQ9MCxlPUFycmF5KGEubGVuZ3RoKSxmPWMuYS5iaW5kKGMpLGc9MDtnPGEubGVuZ3RoOysrZylhW2ddJiZhW2ddLnRoZW4/YVtnXS50aGVuKGIuYmluZChudWxsLGMsZyksZik6YihjLGcsYVtnXSk7cmV0dXJuIGN9XHJcbmZ1bmN0aW9uIE5mKGEpe2Zvcih2YXIgYj1uZXcgWixjPWIuVy5iaW5kKGIpLGQ9Yi5hLmJpbmQoYiksZT0wO2U8YS5sZW5ndGg7KytlKWFbZV0mJmFbZV0udGhlbj9hW2VdLnRoZW4oYyxkKTpjKGFbZV0pO3JldHVybiBifVoucHJvdG90eXBlLnRoZW49ZnVuY3Rpb24oYSxiKXt2YXIgYz1uZXcgWjtzd2l0Y2godGhpcy5qYSl7Y2FzZSAxOk9mKHRoaXMsYyxhKTticmVhaztjYXNlIDI6T2YodGhpcyxjLGIpO2JyZWFrO2Nhc2UgSmY6dGhpcy5jLnB1c2goe0k6YyxDYTphfSksdGhpcy5iLnB1c2goe0k6YyxDYTpifSl9cmV0dXJuIGN9O1oucHJvdG90eXBlLnRoZW49Wi5wcm90b3R5cGUudGhlbjtaLnByb3RvdHlwZVtcImNhdGNoXCJdPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnRoZW4odm9pZCAwLGEpfTtaLnByb3RvdHlwZVtcImNhdGNoXCJdPVoucHJvdG90eXBlW1wiY2F0Y2hcIl07XHJcbloucHJvdG90eXBlLlc9ZnVuY3Rpb24oYSl7aWYodGhpcy5qYT09SmYpe3RoaXMuT2E9YTt0aGlzLmphPTE7Zm9yKGE9MDthPHRoaXMuYy5sZW5ndGg7KythKU9mKHRoaXMsdGhpcy5jW2FdLkksdGhpcy5jW2FdLkNhKTt0aGlzLmM9W107dGhpcy5iPVtdfX07Wi5wcm90b3R5cGUuYT1mdW5jdGlvbihhKXtpZih0aGlzLmphPT1KZil7dGhpcy5PYT1hO3RoaXMuamE9Mjtmb3IoYT0wO2E8dGhpcy5iLmxlbmd0aDsrK2EpT2YodGhpcyx0aGlzLmJbYV0uSSx0aGlzLmJbYV0uQ2EpO3RoaXMuYz1bXTt0aGlzLmI9W119fTtcclxuZnVuY3Rpb24gT2YoYSxiLGMpe1BmLnB1c2goZnVuY3Rpb24oKXtpZihjJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBjKXt0cnl7dmFyIGE9Yyh0aGlzLk9hKX1jYXRjaChmKXtiLmEoZik7cmV0dXJufXZhciBlO3RyeXtlPWEmJmEudGhlbn1jYXRjaChmKXtiLmEoZik7cmV0dXJufWEgaW5zdGFuY2VvZiBaP2E9PWI/Yi5hKG5ldyBUeXBlRXJyb3IoXCJDaGFpbmluZyBjeWNsZSBkZXRlY3RlZFwiKSk6YS50aGVuKGIuVy5iaW5kKGIpLGIuYS5iaW5kKGIpKTplP1FmKGEsZSxiKTpiLlcoYSl9ZWxzZSAxPT10aGlzLmphP2IuVyh0aGlzLk9hKTpiLmEodGhpcy5PYSl9LmJpbmQoYSkpO251bGw9PVJmJiYoUmY9U2YoVGYpKX1cclxuZnVuY3Rpb24gUWYoYSxiLGMpe3RyeXt2YXIgZD0hMTtiLmNhbGwoYSxmdW5jdGlvbihhKXtpZighZCl7ZD0hMDt2YXIgYjt0cnl7Yj1hJiZhLnRoZW59Y2F0Y2goZyl7Yy5hKGcpO3JldHVybn1iP1FmKGEsYixjKTpjLlcoYSl9fSxjLmEuYmluZChjKSl9Y2F0Y2goZSl7Yy5hKGUpfX1mdW5jdGlvbiBUZigpe2Zvcig7UGYubGVuZ3RoOyl7bnVsbCE9UmYmJihVZihSZiksUmY9bnVsbCk7dmFyIGE9UGY7UGY9W107Zm9yKHZhciBiPTA7YjxhLmxlbmd0aDsrK2IpYVtiXSgpfX1mdW5jdGlvbiBTZigpe3JldHVybiAwfWZ1bmN0aW9uIFVmKCl7fXZhciBSZj1udWxsLFBmPVtdO1xyXG5mZihmdW5jdGlvbihhKXt3aW5kb3cuc2V0SW1tZWRpYXRlPyhTZj1mdW5jdGlvbihhKXtyZXR1cm4gd2luZG93LnNldEltbWVkaWF0ZShhKX0sVWY9ZnVuY3Rpb24oYSl7cmV0dXJuIHdpbmRvdy5jbGVhckltbWVkaWF0ZShhKX0pOihTZj1mdW5jdGlvbihhKXtyZXR1cm4gd2luZG93LnNldFRpbWVvdXQoYSwwKX0sVWY9ZnVuY3Rpb24oYSl7cmV0dXJuIHdpbmRvdy5jbGVhclRpbWVvdXQoYSl9KTtpZighd2luZG93LlByb21pc2V8fGEpd2luZG93LlByb21pc2U9Wix3aW5kb3cuUHJvbWlzZS5yZXNvbHZlPUtmLHdpbmRvdy5Qcm9taXNlLnJlamVjdD1MZix3aW5kb3cuUHJvbWlzZS5hbGw9TWYsd2luZG93LlByb21pc2UucmFjZT1OZn0pO2Z1bmN0aW9uIFZmKCl7cmV0dXJue2Ryb3BwZWRWaWRlb0ZyYW1lczp0aGlzLndlYmtpdERyb3BwZWRGcmFtZUNvdW50LHRvdGFsVmlkZW9GcmFtZXM6dGhpcy53ZWJraXREZWNvZGVkRnJhbWVDb3VudCxjb3JydXB0ZWRWaWRlb0ZyYW1lczowLGNyZWF0aW9uVGltZTpOYU4sdG90YWxGcmFtZURlbGF5OjB9fWZmKGZ1bmN0aW9uKCl7aWYod2luZG93LkhUTUxWaWRlb0VsZW1lbnQpe3ZhciBhPUhUTUxWaWRlb0VsZW1lbnQucHJvdG90eXBlOyFhLmdldFZpZGVvUGxheWJhY2tRdWFsaXR5JiZcIndlYmtpdERyb3BwZWRGcmFtZUNvdW50XCJpbiBhJiYoYS5nZXRWaWRlb1BsYXliYWNrUXVhbGl0eT1WZil9fSk7fS5jYWxsKGcsdGhpcykpO1xyXG5pZiAodHlwZW9mKG1vZHVsZSkhPVwidW5kZWZpbmVkXCImJm1vZHVsZS5leHBvcnRzKW1vZHVsZS5leHBvcnRzPWcuc2hha2E7XHJcbmVsc2UgaWYgKHR5cGVvZihkZWZpbmUpIT1cInVuZGVmaW5lZFwiICYmIGRlZmluZS5hbWQpZGVmaW5lKGZ1bmN0aW9uKCl7cmV0dXJuIGcuc2hha2F9KTtcclxuZWxzZSB0aGlzLnNoYWthPWcuc2hha2E7XHJcbn0pKCk7XHJcblxyXG4iLCIvLyBzdGF0cy5qcyAtIGh0dHA6Ly9naXRodWIuY29tL21yZG9vYi9zdGF0cy5qc1xyXG52YXIgU3RhdHM9ZnVuY3Rpb24oKXt2YXIgbD1EYXRlLm5vdygpLG09bCxnPTAsbj1JbmZpbml0eSxvPTAsaD0wLHA9SW5maW5pdHkscT0wLHI9MCxzPTAsZj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2YuaWQ9XCJzdGF0c1wiO2YuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLGZ1bmN0aW9uKGIpe2IucHJldmVudERlZmF1bHQoKTt0KCsrcyUyKX0sITEpO2Yuc3R5bGUuY3NzVGV4dD1cIndpZHRoOjgwcHg7b3BhY2l0eTowLjk7Y3Vyc29yOnBvaW50ZXJcIjt2YXIgYT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2EuaWQ9XCJmcHNcIjthLnN0eWxlLmNzc1RleHQ9XCJwYWRkaW5nOjAgMCAzcHggM3B4O3RleHQtYWxpZ246bGVmdDtiYWNrZ3JvdW5kLWNvbG9yOiMwMDJcIjtmLmFwcGVuZENoaWxkKGEpO3ZhciBpPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7aS5pZD1cImZwc1RleHRcIjtpLnN0eWxlLmNzc1RleHQ9XCJjb2xvcjojMGZmO2ZvbnQtZmFtaWx5OkhlbHZldGljYSxBcmlhbCxzYW5zLXNlcmlmO2ZvbnQtc2l6ZTo5cHg7Zm9udC13ZWlnaHQ6Ym9sZDtsaW5lLWhlaWdodDoxNXB4XCI7XHJcbmkuaW5uZXJIVE1MPVwiRlBTXCI7YS5hcHBlbmRDaGlsZChpKTt2YXIgYz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2MuaWQ9XCJmcHNHcmFwaFwiO2Muc3R5bGUuY3NzVGV4dD1cInBvc2l0aW9uOnJlbGF0aXZlO3dpZHRoOjc0cHg7aGVpZ2h0OjMwcHg7YmFja2dyb3VuZC1jb2xvcjojMGZmXCI7Zm9yKGEuYXBwZW5kQ2hpbGQoYyk7NzQ+Yy5jaGlsZHJlbi5sZW5ndGg7KXt2YXIgaj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtqLnN0eWxlLmNzc1RleHQ9XCJ3aWR0aDoxcHg7aGVpZ2h0OjMwcHg7ZmxvYXQ6bGVmdDtiYWNrZ3JvdW5kLWNvbG9yOiMxMTNcIjtjLmFwcGVuZENoaWxkKGopfXZhciBkPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7ZC5pZD1cIm1zXCI7ZC5zdHlsZS5jc3NUZXh0PVwicGFkZGluZzowIDAgM3B4IDNweDt0ZXh0LWFsaWduOmxlZnQ7YmFja2dyb3VuZC1jb2xvcjojMDIwO2Rpc3BsYXk6bm9uZVwiO2YuYXBwZW5kQ2hpbGQoZCk7dmFyIGs9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuay5pZD1cIm1zVGV4dFwiO2suc3R5bGUuY3NzVGV4dD1cImNvbG9yOiMwZjA7Zm9udC1mYW1pbHk6SGVsdmV0aWNhLEFyaWFsLHNhbnMtc2VyaWY7Zm9udC1zaXplOjlweDtmb250LXdlaWdodDpib2xkO2xpbmUtaGVpZ2h0OjE1cHhcIjtrLmlubmVySFRNTD1cIk1TXCI7ZC5hcHBlbmRDaGlsZChrKTt2YXIgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2UuaWQ9XCJtc0dyYXBoXCI7ZS5zdHlsZS5jc3NUZXh0PVwicG9zaXRpb246cmVsYXRpdmU7d2lkdGg6NzRweDtoZWlnaHQ6MzBweDtiYWNrZ3JvdW5kLWNvbG9yOiMwZjBcIjtmb3IoZC5hcHBlbmRDaGlsZChlKTs3ND5lLmNoaWxkcmVuLmxlbmd0aDspaj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKSxqLnN0eWxlLmNzc1RleHQ9XCJ3aWR0aDoxcHg7aGVpZ2h0OjMwcHg7ZmxvYXQ6bGVmdDtiYWNrZ3JvdW5kLWNvbG9yOiMxMzFcIixlLmFwcGVuZENoaWxkKGopO3ZhciB0PWZ1bmN0aW9uKGIpe3M9Yjtzd2l0Y2gocyl7Y2FzZSAwOmEuc3R5bGUuZGlzcGxheT1cclxuXCJibG9ja1wiO2Quc3R5bGUuZGlzcGxheT1cIm5vbmVcIjticmVhaztjYXNlIDE6YS5zdHlsZS5kaXNwbGF5PVwibm9uZVwiLGQuc3R5bGUuZGlzcGxheT1cImJsb2NrXCJ9fTtyZXR1cm57UkVWSVNJT046MTIsZG9tRWxlbWVudDpmLHNldE1vZGU6dCxiZWdpbjpmdW5jdGlvbigpe2w9RGF0ZS5ub3coKX0sZW5kOmZ1bmN0aW9uKCl7dmFyIGI9RGF0ZS5ub3coKTtnPWItbDtuPU1hdGgubWluKG4sZyk7bz1NYXRoLm1heChvLGcpO2sudGV4dENvbnRlbnQ9ZytcIiBNUyAoXCIrbitcIi1cIitvK1wiKVwiO3ZhciBhPU1hdGgubWluKDMwLDMwLTMwKihnLzIwMCkpO2UuYXBwZW5kQ2hpbGQoZS5maXJzdENoaWxkKS5zdHlsZS5oZWlnaHQ9YStcInB4XCI7cisrO2I+bSsxRTMmJihoPU1hdGgucm91bmQoMUUzKnIvKGItbSkpLHA9TWF0aC5taW4ocCxoKSxxPU1hdGgubWF4KHEsaCksaS50ZXh0Q29udGVudD1oK1wiIEZQUyAoXCIrcCtcIi1cIitxK1wiKVwiLGE9TWF0aC5taW4oMzAsMzAtMzAqKGgvMTAwKSksYy5hcHBlbmRDaGlsZChjLmZpcnN0Q2hpbGQpLnN0eWxlLmhlaWdodD1cclxuYStcInB4XCIsbT1iLHI9MCk7cmV0dXJuIGJ9LHVwZGF0ZTpmdW5jdGlvbigpe2w9dGhpcy5lbmQoKX19fTtcIm9iamVjdFwiPT09dHlwZW9mIG1vZHVsZSYmKG1vZHVsZS5leHBvcnRzPVN0YXRzKTtcclxuIiwiLyoqXHJcbiAqIFR3ZWVuLmpzIC0gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlXHJcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS90d2VlbmpzL3R3ZWVuLmpzXHJcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICpcclxuICogU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS90d2VlbmpzL3R3ZWVuLmpzL2dyYXBocy9jb250cmlidXRvcnMgZm9yIHRoZSBmdWxsIGxpc3Qgb2YgY29udHJpYnV0b3JzLlxyXG4gKiBUaGFuayB5b3UgYWxsLCB5b3UncmUgYXdlc29tZSFcclxuICovXHJcblxyXG52YXIgVFdFRU4gPSBUV0VFTiB8fCAoZnVuY3Rpb24gKCkge1xyXG5cclxuXHR2YXIgX3R3ZWVucyA9IFtdO1xyXG5cclxuXHRyZXR1cm4ge1xyXG5cclxuXHRcdGdldEFsbDogZnVuY3Rpb24gKCkge1xyXG5cclxuXHRcdFx0cmV0dXJuIF90d2VlbnM7XHJcblxyXG5cdFx0fSxcclxuXHJcblx0XHRyZW1vdmVBbGw6IGZ1bmN0aW9uICgpIHtcclxuXHJcblx0XHRcdF90d2VlbnMgPSBbXTtcclxuXHJcblx0XHR9LFxyXG5cclxuXHRcdGFkZDogZnVuY3Rpb24gKHR3ZWVuKSB7XHJcblxyXG5cdFx0XHRfdHdlZW5zLnB1c2godHdlZW4pO1xyXG5cclxuXHRcdH0sXHJcblxyXG5cdFx0cmVtb3ZlOiBmdW5jdGlvbiAodHdlZW4pIHtcclxuXHJcblx0XHRcdHZhciBpID0gX3R3ZWVucy5pbmRleE9mKHR3ZWVuKTtcclxuXHJcblx0XHRcdGlmIChpICE9PSAtMSkge1xyXG5cdFx0XHRcdF90d2VlbnMuc3BsaWNlKGksIDEpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0fSxcclxuXHJcblx0XHR1cGRhdGU6IGZ1bmN0aW9uICh0aW1lLCBwcmVzZXJ2ZSkge1xyXG5cclxuXHRcdFx0aWYgKF90d2VlbnMubGVuZ3RoID09PSAwKSB7XHJcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHR2YXIgaSA9IDA7XHJcblxyXG5cdFx0XHR0aW1lID0gdGltZSAhPT0gdW5kZWZpbmVkID8gdGltZSA6IFRXRUVOLm5vdygpO1xyXG5cclxuXHRcdFx0d2hpbGUgKGkgPCBfdHdlZW5zLmxlbmd0aCkge1xyXG5cclxuXHRcdFx0XHRpZiAoX3R3ZWVuc1tpXS51cGRhdGUodGltZSkgfHwgcHJlc2VydmUpIHtcclxuXHRcdFx0XHRcdGkrKztcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0X3R3ZWVucy5zcGxpY2UoaSwgMSk7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0cmV0dXJuIHRydWU7XHJcblxyXG5cdFx0fVxyXG5cdH07XHJcblxyXG59KSgpO1xyXG5cclxuXHJcbi8vIEluY2x1ZGUgYSBwZXJmb3JtYW5jZS5ub3cgcG9seWZpbGxcclxuKGZ1bmN0aW9uICgpIHtcclxuXHQvLyBJbiBub2RlLmpzLCB1c2UgcHJvY2Vzcy5ocnRpbWUuXHJcblx0aWYgKHRoaXMud2luZG93ID09PSB1bmRlZmluZWQgJiYgdGhpcy5wcm9jZXNzICE9PSB1bmRlZmluZWQpIHtcclxuXHRcdFRXRUVOLm5vdyA9IGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0dmFyIHRpbWUgPSBwcm9jZXNzLmhydGltZSgpO1xyXG5cclxuXHRcdFx0Ly8gQ29udmVydCBbc2Vjb25kcywgbWljcm9zZWNvbmRzXSB0byBtaWxsaXNlY29uZHMuXHJcblx0XHRcdHJldHVybiB0aW1lWzBdICogMTAwMCArIHRpbWVbMV0gLyAxMDAwO1xyXG5cdFx0fTtcclxuXHR9XHJcblx0Ly8gSW4gYSBicm93c2VyLCB1c2Ugd2luZG93LnBlcmZvcm1hbmNlLm5vdyBpZiBpdCBpcyBhdmFpbGFibGUuXHJcblx0ZWxzZSBpZiAodGhpcy53aW5kb3cgIT09IHVuZGVmaW5lZCAmJlxyXG5cdCAgICAgICAgIHdpbmRvdy5wZXJmb3JtYW5jZSAhPT0gdW5kZWZpbmVkICYmXHJcblx0XHQgd2luZG93LnBlcmZvcm1hbmNlLm5vdyAhPT0gdW5kZWZpbmVkKSB7XHJcblxyXG5cdFx0Ly8gVGhpcyBtdXN0IGJlIGJvdW5kLCBiZWNhdXNlIGRpcmVjdGx5IGFzc2lnbmluZyB0aGlzIGZ1bmN0aW9uXHJcblx0XHQvLyBsZWFkcyB0byBhbiBpbnZvY2F0aW9uIGV4Y2VwdGlvbiBpbiBDaHJvbWUuXHJcblx0XHRUV0VFTi5ub3cgPSB3aW5kb3cucGVyZm9ybWFuY2Uubm93LmJpbmQod2luZG93LnBlcmZvcm1hbmNlKTtcclxuXHR9XHJcblx0Ly8gVXNlIERhdGUubm93IGlmIGl0IGlzIGF2YWlsYWJsZS5cclxuXHRlbHNlIGlmIChEYXRlLm5vdyAhPT0gdW5kZWZpbmVkKSB7XHJcblx0XHRUV0VFTi5ub3cgPSBEYXRlLm5vdztcclxuXHR9XHJcblx0Ly8gT3RoZXJ3aXNlLCB1c2UgJ25ldyBEYXRlKCkuZ2V0VGltZSgpJy5cclxuXHRlbHNlIHtcclxuXHRcdFRXRUVOLm5vdyA9IGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0cmV0dXJuIG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xyXG5cdFx0fTtcclxuXHR9XHJcbn0pKCk7XHJcblxyXG5cclxuVFdFRU4uVHdlZW4gPSBmdW5jdGlvbiAob2JqZWN0KSB7XHJcblxyXG5cdHZhciBfb2JqZWN0ID0gb2JqZWN0O1xyXG5cdHZhciBfdmFsdWVzU3RhcnQgPSB7fTtcclxuXHR2YXIgX3ZhbHVlc0VuZCA9IHt9O1xyXG5cdHZhciBfdmFsdWVzU3RhcnRSZXBlYXQgPSB7fTtcclxuXHR2YXIgX2R1cmF0aW9uID0gMTAwMDtcclxuXHR2YXIgX3JlcGVhdCA9IDA7XHJcblx0dmFyIF95b3lvID0gZmFsc2U7XHJcblx0dmFyIF9pc1BsYXlpbmcgPSBmYWxzZTtcclxuXHR2YXIgX3JldmVyc2VkID0gZmFsc2U7XHJcblx0dmFyIF9kZWxheVRpbWUgPSAwO1xyXG5cdHZhciBfc3RhcnRUaW1lID0gbnVsbDtcclxuXHR2YXIgX2Vhc2luZ0Z1bmN0aW9uID0gVFdFRU4uRWFzaW5nLkxpbmVhci5Ob25lO1xyXG5cdHZhciBfaW50ZXJwb2xhdGlvbkZ1bmN0aW9uID0gVFdFRU4uSW50ZXJwb2xhdGlvbi5MaW5lYXI7XHJcblx0dmFyIF9jaGFpbmVkVHdlZW5zID0gW107XHJcblx0dmFyIF9vblN0YXJ0Q2FsbGJhY2sgPSBudWxsO1xyXG5cdHZhciBfb25TdGFydENhbGxiYWNrRmlyZWQgPSBmYWxzZTtcclxuXHR2YXIgX29uVXBkYXRlQ2FsbGJhY2sgPSBudWxsO1xyXG5cdHZhciBfb25Db21wbGV0ZUNhbGxiYWNrID0gbnVsbDtcclxuXHR2YXIgX29uU3RvcENhbGxiYWNrID0gbnVsbDtcclxuXHJcblx0Ly8gU2V0IGFsbCBzdGFydGluZyB2YWx1ZXMgcHJlc2VudCBvbiB0aGUgdGFyZ2V0IG9iamVjdFxyXG5cdGZvciAodmFyIGZpZWxkIGluIG9iamVjdCkge1xyXG5cdFx0X3ZhbHVlc1N0YXJ0W2ZpZWxkXSA9IHBhcnNlRmxvYXQob2JqZWN0W2ZpZWxkXSwgMTApO1xyXG5cdH1cclxuXHJcblx0dGhpcy50byA9IGZ1bmN0aW9uIChwcm9wZXJ0aWVzLCBkdXJhdGlvbikge1xyXG5cclxuXHRcdGlmIChkdXJhdGlvbiAhPT0gdW5kZWZpbmVkKSB7XHJcblx0XHRcdF9kdXJhdGlvbiA9IGR1cmF0aW9uO1xyXG5cdFx0fVxyXG5cclxuXHRcdF92YWx1ZXNFbmQgPSBwcm9wZXJ0aWVzO1xyXG5cclxuXHRcdHJldHVybiB0aGlzO1xyXG5cclxuXHR9O1xyXG5cclxuXHR0aGlzLnN0YXJ0ID0gZnVuY3Rpb24gKHRpbWUpIHtcclxuXHJcblx0XHRUV0VFTi5hZGQodGhpcyk7XHJcblxyXG5cdFx0X2lzUGxheWluZyA9IHRydWU7XHJcblxyXG5cdFx0X29uU3RhcnRDYWxsYmFja0ZpcmVkID0gZmFsc2U7XHJcblxyXG5cdFx0X3N0YXJ0VGltZSA9IHRpbWUgIT09IHVuZGVmaW5lZCA/IHRpbWUgOiBUV0VFTi5ub3coKTtcclxuXHRcdF9zdGFydFRpbWUgKz0gX2RlbGF5VGltZTtcclxuXHJcblx0XHRmb3IgKHZhciBwcm9wZXJ0eSBpbiBfdmFsdWVzRW5kKSB7XHJcblxyXG5cdFx0XHQvLyBDaGVjayBpZiBhbiBBcnJheSB3YXMgcHJvdmlkZWQgYXMgcHJvcGVydHkgdmFsdWVcclxuXHRcdFx0aWYgKF92YWx1ZXNFbmRbcHJvcGVydHldIGluc3RhbmNlb2YgQXJyYXkpIHtcclxuXHJcblx0XHRcdFx0aWYgKF92YWx1ZXNFbmRbcHJvcGVydHldLmxlbmd0aCA9PT0gMCkge1xyXG5cdFx0XHRcdFx0Y29udGludWU7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHQvLyBDcmVhdGUgYSBsb2NhbCBjb3B5IG9mIHRoZSBBcnJheSB3aXRoIHRoZSBzdGFydCB2YWx1ZSBhdCB0aGUgZnJvbnRcclxuXHRcdFx0XHRfdmFsdWVzRW5kW3Byb3BlcnR5XSA9IFtfb2JqZWN0W3Byb3BlcnR5XV0uY29uY2F0KF92YWx1ZXNFbmRbcHJvcGVydHldKTtcclxuXHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIElmIGB0bygpYCBzcGVjaWZpZXMgYSBwcm9wZXJ0eSB0aGF0IGRvZXNuJ3QgZXhpc3QgaW4gdGhlIHNvdXJjZSBvYmplY3QsXHJcblx0XHRcdC8vIHdlIHNob3VsZCBub3Qgc2V0IHRoYXQgcHJvcGVydHkgaW4gdGhlIG9iamVjdFxyXG5cdFx0XHRpZiAoX3ZhbHVlc1N0YXJ0W3Byb3BlcnR5XSA9PT0gdW5kZWZpbmVkKSB7XHJcblx0XHRcdFx0Y29udGludWU7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdF92YWx1ZXNTdGFydFtwcm9wZXJ0eV0gPSBfb2JqZWN0W3Byb3BlcnR5XTtcclxuXHJcblx0XHRcdGlmICgoX3ZhbHVlc1N0YXJ0W3Byb3BlcnR5XSBpbnN0YW5jZW9mIEFycmF5KSA9PT0gZmFsc2UpIHtcclxuXHRcdFx0XHRfdmFsdWVzU3RhcnRbcHJvcGVydHldICo9IDEuMDsgLy8gRW5zdXJlcyB3ZSdyZSB1c2luZyBudW1iZXJzLCBub3Qgc3RyaW5nc1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRfdmFsdWVzU3RhcnRSZXBlYXRbcHJvcGVydHldID0gX3ZhbHVlc1N0YXJ0W3Byb3BlcnR5XSB8fCAwO1xyXG5cclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHJcblx0fTtcclxuXHJcblx0dGhpcy5zdG9wID0gZnVuY3Rpb24gKCkge1xyXG5cclxuXHRcdGlmICghX2lzUGxheWluZykge1xyXG5cdFx0XHRyZXR1cm4gdGhpcztcclxuXHRcdH1cclxuXHJcblx0XHRUV0VFTi5yZW1vdmUodGhpcyk7XHJcblx0XHRfaXNQbGF5aW5nID0gZmFsc2U7XHJcblxyXG5cdFx0aWYgKF9vblN0b3BDYWxsYmFjayAhPT0gbnVsbCkge1xyXG5cdFx0XHRfb25TdG9wQ2FsbGJhY2suY2FsbChfb2JqZWN0KTtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLnN0b3BDaGFpbmVkVHdlZW5zKCk7XHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHJcblx0fTtcclxuXHJcblx0dGhpcy5zdG9wQ2hhaW5lZFR3ZWVucyA9IGZ1bmN0aW9uICgpIHtcclxuXHJcblx0XHRmb3IgKHZhciBpID0gMCwgbnVtQ2hhaW5lZFR3ZWVucyA9IF9jaGFpbmVkVHdlZW5zLmxlbmd0aDsgaSA8IG51bUNoYWluZWRUd2VlbnM7IGkrKykge1xyXG5cdFx0XHRfY2hhaW5lZFR3ZWVuc1tpXS5zdG9wKCk7XHJcblx0XHR9XHJcblxyXG5cdH07XHJcblxyXG5cdHRoaXMuZGVsYXkgPSBmdW5jdGlvbiAoYW1vdW50KSB7XHJcblxyXG5cdFx0X2RlbGF5VGltZSA9IGFtb3VudDtcclxuXHRcdHJldHVybiB0aGlzO1xyXG5cclxuXHR9O1xyXG5cclxuXHR0aGlzLnJlcGVhdCA9IGZ1bmN0aW9uICh0aW1lcykge1xyXG5cclxuXHRcdF9yZXBlYXQgPSB0aW1lcztcclxuXHRcdHJldHVybiB0aGlzO1xyXG5cclxuXHR9O1xyXG5cclxuXHR0aGlzLnlveW8gPSBmdW5jdGlvbiAoeW95bykge1xyXG5cclxuXHRcdF95b3lvID0geW95bztcclxuXHRcdHJldHVybiB0aGlzO1xyXG5cclxuXHR9O1xyXG5cclxuXHJcblx0dGhpcy5lYXNpbmcgPSBmdW5jdGlvbiAoZWFzaW5nKSB7XHJcblxyXG5cdFx0X2Vhc2luZ0Z1bmN0aW9uID0gZWFzaW5nO1xyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblxyXG5cdH07XHJcblxyXG5cdHRoaXMuaW50ZXJwb2xhdGlvbiA9IGZ1bmN0aW9uIChpbnRlcnBvbGF0aW9uKSB7XHJcblxyXG5cdFx0X2ludGVycG9sYXRpb25GdW5jdGlvbiA9IGludGVycG9sYXRpb247XHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHJcblx0fTtcclxuXHJcblx0dGhpcy5jaGFpbiA9IGZ1bmN0aW9uICgpIHtcclxuXHJcblx0XHRfY2hhaW5lZFR3ZWVucyA9IGFyZ3VtZW50cztcclxuXHRcdHJldHVybiB0aGlzO1xyXG5cclxuXHR9O1xyXG5cclxuXHR0aGlzLm9uU3RhcnQgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcclxuXHJcblx0XHRfb25TdGFydENhbGxiYWNrID0gY2FsbGJhY2s7XHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHJcblx0fTtcclxuXHJcblx0dGhpcy5vblVwZGF0ZSA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xyXG5cclxuXHRcdF9vblVwZGF0ZUNhbGxiYWNrID0gY2FsbGJhY2s7XHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHJcblx0fTtcclxuXHJcblx0dGhpcy5vbkNvbXBsZXRlID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XHJcblxyXG5cdFx0X29uQ29tcGxldGVDYWxsYmFjayA9IGNhbGxiYWNrO1xyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblxyXG5cdH07XHJcblxyXG5cdHRoaXMub25TdG9wID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XHJcblxyXG5cdFx0X29uU3RvcENhbGxiYWNrID0gY2FsbGJhY2s7XHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHJcblx0fTtcclxuXHJcblx0dGhpcy51cGRhdGUgPSBmdW5jdGlvbiAodGltZSkge1xyXG5cclxuXHRcdHZhciBwcm9wZXJ0eTtcclxuXHRcdHZhciBlbGFwc2VkO1xyXG5cdFx0dmFyIHZhbHVlO1xyXG5cclxuXHRcdGlmICh0aW1lIDwgX3N0YXJ0VGltZSkge1xyXG5cdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoX29uU3RhcnRDYWxsYmFja0ZpcmVkID09PSBmYWxzZSkge1xyXG5cclxuXHRcdFx0aWYgKF9vblN0YXJ0Q2FsbGJhY2sgIT09IG51bGwpIHtcclxuXHRcdFx0XHRfb25TdGFydENhbGxiYWNrLmNhbGwoX29iamVjdCk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdF9vblN0YXJ0Q2FsbGJhY2tGaXJlZCA9IHRydWU7XHJcblxyXG5cdFx0fVxyXG5cclxuXHRcdGVsYXBzZWQgPSAodGltZSAtIF9zdGFydFRpbWUpIC8gX2R1cmF0aW9uO1xyXG5cdFx0ZWxhcHNlZCA9IGVsYXBzZWQgPiAxID8gMSA6IGVsYXBzZWQ7XHJcblxyXG5cdFx0dmFsdWUgPSBfZWFzaW5nRnVuY3Rpb24oZWxhcHNlZCk7XHJcblxyXG5cdFx0Zm9yIChwcm9wZXJ0eSBpbiBfdmFsdWVzRW5kKSB7XHJcblxyXG5cdFx0XHQvLyBEb24ndCB1cGRhdGUgcHJvcGVydGllcyB0aGF0IGRvIG5vdCBleGlzdCBpbiB0aGUgc291cmNlIG9iamVjdFxyXG5cdFx0XHRpZiAoX3ZhbHVlc1N0YXJ0W3Byb3BlcnR5XSA9PT0gdW5kZWZpbmVkKSB7XHJcblx0XHRcdFx0Y29udGludWU7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHZhciBzdGFydCA9IF92YWx1ZXNTdGFydFtwcm9wZXJ0eV0gfHwgMDtcclxuXHRcdFx0dmFyIGVuZCA9IF92YWx1ZXNFbmRbcHJvcGVydHldO1xyXG5cclxuXHRcdFx0aWYgKGVuZCBpbnN0YW5jZW9mIEFycmF5KSB7XHJcblxyXG5cdFx0XHRcdF9vYmplY3RbcHJvcGVydHldID0gX2ludGVycG9sYXRpb25GdW5jdGlvbihlbmQsIHZhbHVlKTtcclxuXHJcblx0XHRcdH0gZWxzZSB7XHJcblxyXG5cdFx0XHRcdC8vIFBhcnNlcyByZWxhdGl2ZSBlbmQgdmFsdWVzIHdpdGggc3RhcnQgYXMgYmFzZSAoZS5nLjogKzEwLCAtMylcclxuXHRcdFx0XHRpZiAodHlwZW9mIChlbmQpID09PSAnc3RyaW5nJykge1xyXG5cclxuXHRcdFx0XHRcdGlmIChlbmQuY2hhckF0KDApID09PSAnKycgfHwgZW5kLmNoYXJBdCgwKSA9PT0gJy0nKSB7XHJcblx0XHRcdFx0XHRcdGVuZCA9IHN0YXJ0ICsgcGFyc2VGbG9hdChlbmQsIDEwKTtcclxuXHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdGVuZCA9IHBhcnNlRmxvYXQoZW5kLCAxMCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHQvLyBQcm90ZWN0IGFnYWluc3Qgbm9uIG51bWVyaWMgcHJvcGVydGllcy5cclxuXHRcdFx0XHRpZiAodHlwZW9mIChlbmQpID09PSAnbnVtYmVyJykge1xyXG5cdFx0XHRcdFx0X29iamVjdFtwcm9wZXJ0eV0gPSBzdGFydCArIChlbmQgLSBzdGFydCkgKiB2YWx1ZTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHR9XHJcblxyXG5cdFx0fVxyXG5cclxuXHRcdGlmIChfb25VcGRhdGVDYWxsYmFjayAhPT0gbnVsbCkge1xyXG5cdFx0XHRfb25VcGRhdGVDYWxsYmFjay5jYWxsKF9vYmplY3QsIHZhbHVlKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoZWxhcHNlZCA9PT0gMSkge1xyXG5cclxuXHRcdFx0aWYgKF9yZXBlYXQgPiAwKSB7XHJcblxyXG5cdFx0XHRcdGlmIChpc0Zpbml0ZShfcmVwZWF0KSkge1xyXG5cdFx0XHRcdFx0X3JlcGVhdC0tO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Ly8gUmVhc3NpZ24gc3RhcnRpbmcgdmFsdWVzLCByZXN0YXJ0IGJ5IG1ha2luZyBzdGFydFRpbWUgPSBub3dcclxuXHRcdFx0XHRmb3IgKHByb3BlcnR5IGluIF92YWx1ZXNTdGFydFJlcGVhdCkge1xyXG5cclxuXHRcdFx0XHRcdGlmICh0eXBlb2YgKF92YWx1ZXNFbmRbcHJvcGVydHldKSA9PT0gJ3N0cmluZycpIHtcclxuXHRcdFx0XHRcdFx0X3ZhbHVlc1N0YXJ0UmVwZWF0W3Byb3BlcnR5XSA9IF92YWx1ZXNTdGFydFJlcGVhdFtwcm9wZXJ0eV0gKyBwYXJzZUZsb2F0KF92YWx1ZXNFbmRbcHJvcGVydHldLCAxMCk7XHJcblx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0aWYgKF95b3lvKSB7XHJcblx0XHRcdFx0XHRcdHZhciB0bXAgPSBfdmFsdWVzU3RhcnRSZXBlYXRbcHJvcGVydHldO1xyXG5cclxuXHRcdFx0XHRcdFx0X3ZhbHVlc1N0YXJ0UmVwZWF0W3Byb3BlcnR5XSA9IF92YWx1ZXNFbmRbcHJvcGVydHldO1xyXG5cdFx0XHRcdFx0XHRfdmFsdWVzRW5kW3Byb3BlcnR5XSA9IHRtcDtcclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHRfdmFsdWVzU3RhcnRbcHJvcGVydHldID0gX3ZhbHVlc1N0YXJ0UmVwZWF0W3Byb3BlcnR5XTtcclxuXHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRpZiAoX3lveW8pIHtcclxuXHRcdFx0XHRcdF9yZXZlcnNlZCA9ICFfcmV2ZXJzZWQ7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRfc3RhcnRUaW1lID0gdGltZSArIF9kZWxheVRpbWU7XHJcblxyXG5cdFx0XHRcdHJldHVybiB0cnVlO1xyXG5cclxuXHRcdFx0fSBlbHNlIHtcclxuXHJcblx0XHRcdFx0aWYgKF9vbkNvbXBsZXRlQ2FsbGJhY2sgIT09IG51bGwpIHtcclxuXHRcdFx0XHRcdF9vbkNvbXBsZXRlQ2FsbGJhY2suY2FsbChfb2JqZWN0KTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdGZvciAodmFyIGkgPSAwLCBudW1DaGFpbmVkVHdlZW5zID0gX2NoYWluZWRUd2VlbnMubGVuZ3RoOyBpIDwgbnVtQ2hhaW5lZFR3ZWVuczsgaSsrKSB7XHJcblx0XHRcdFx0XHQvLyBNYWtlIHRoZSBjaGFpbmVkIHR3ZWVucyBzdGFydCBleGFjdGx5IGF0IHRoZSB0aW1lIHRoZXkgc2hvdWxkLFxyXG5cdFx0XHRcdFx0Ly8gZXZlbiBpZiB0aGUgYHVwZGF0ZSgpYCBtZXRob2Qgd2FzIGNhbGxlZCB3YXkgcGFzdCB0aGUgZHVyYXRpb24gb2YgdGhlIHR3ZWVuXHJcblx0XHRcdFx0XHRfY2hhaW5lZFR3ZWVuc1tpXS5zdGFydChfc3RhcnRUaW1lICsgX2R1cmF0aW9uKTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHJcblx0XHRcdH1cclxuXHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHRydWU7XHJcblxyXG5cdH07XHJcblxyXG59O1xyXG5cclxuXHJcblRXRUVOLkVhc2luZyA9IHtcclxuXHJcblx0TGluZWFyOiB7XHJcblxyXG5cdFx0Tm9uZTogZnVuY3Rpb24gKGspIHtcclxuXHJcblx0XHRcdHJldHVybiBrO1xyXG5cclxuXHRcdH1cclxuXHJcblx0fSxcclxuXHJcblx0UXVhZHJhdGljOiB7XHJcblxyXG5cdFx0SW46IGZ1bmN0aW9uIChrKSB7XHJcblxyXG5cdFx0XHRyZXR1cm4gayAqIGs7XHJcblxyXG5cdFx0fSxcclxuXHJcblx0XHRPdXQ6IGZ1bmN0aW9uIChrKSB7XHJcblxyXG5cdFx0XHRyZXR1cm4gayAqICgyIC0gayk7XHJcblxyXG5cdFx0fSxcclxuXHJcblx0XHRJbk91dDogZnVuY3Rpb24gKGspIHtcclxuXHJcblx0XHRcdGlmICgoayAqPSAyKSA8IDEpIHtcclxuXHRcdFx0XHRyZXR1cm4gMC41ICogayAqIGs7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHJldHVybiAtIDAuNSAqICgtLWsgKiAoayAtIDIpIC0gMSk7XHJcblxyXG5cdFx0fVxyXG5cclxuXHR9LFxyXG5cclxuXHRDdWJpYzoge1xyXG5cclxuXHRcdEluOiBmdW5jdGlvbiAoaykge1xyXG5cclxuXHRcdFx0cmV0dXJuIGsgKiBrICogaztcclxuXHJcblx0XHR9LFxyXG5cclxuXHRcdE91dDogZnVuY3Rpb24gKGspIHtcclxuXHJcblx0XHRcdHJldHVybiAtLWsgKiBrICogayArIDE7XHJcblxyXG5cdFx0fSxcclxuXHJcblx0XHRJbk91dDogZnVuY3Rpb24gKGspIHtcclxuXHJcblx0XHRcdGlmICgoayAqPSAyKSA8IDEpIHtcclxuXHRcdFx0XHRyZXR1cm4gMC41ICogayAqIGsgKiBrO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRyZXR1cm4gMC41ICogKChrIC09IDIpICogayAqIGsgKyAyKTtcclxuXHJcblx0XHR9XHJcblxyXG5cdH0sXHJcblxyXG5cdFF1YXJ0aWM6IHtcclxuXHJcblx0XHRJbjogZnVuY3Rpb24gKGspIHtcclxuXHJcblx0XHRcdHJldHVybiBrICogayAqIGsgKiBrO1xyXG5cclxuXHRcdH0sXHJcblxyXG5cdFx0T3V0OiBmdW5jdGlvbiAoaykge1xyXG5cclxuXHRcdFx0cmV0dXJuIDEgLSAoLS1rICogayAqIGsgKiBrKTtcclxuXHJcblx0XHR9LFxyXG5cclxuXHRcdEluT3V0OiBmdW5jdGlvbiAoaykge1xyXG5cclxuXHRcdFx0aWYgKChrICo9IDIpIDwgMSkge1xyXG5cdFx0XHRcdHJldHVybiAwLjUgKiBrICogayAqIGsgKiBrO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRyZXR1cm4gLSAwLjUgKiAoKGsgLT0gMikgKiBrICogayAqIGsgLSAyKTtcclxuXHJcblx0XHR9XHJcblxyXG5cdH0sXHJcblxyXG5cdFF1aW50aWM6IHtcclxuXHJcblx0XHRJbjogZnVuY3Rpb24gKGspIHtcclxuXHJcblx0XHRcdHJldHVybiBrICogayAqIGsgKiBrICogaztcclxuXHJcblx0XHR9LFxyXG5cclxuXHRcdE91dDogZnVuY3Rpb24gKGspIHtcclxuXHJcblx0XHRcdHJldHVybiAtLWsgKiBrICogayAqIGsgKiBrICsgMTtcclxuXHJcblx0XHR9LFxyXG5cclxuXHRcdEluT3V0OiBmdW5jdGlvbiAoaykge1xyXG5cclxuXHRcdFx0aWYgKChrICo9IDIpIDwgMSkge1xyXG5cdFx0XHRcdHJldHVybiAwLjUgKiBrICogayAqIGsgKiBrICogaztcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0cmV0dXJuIDAuNSAqICgoayAtPSAyKSAqIGsgKiBrICogayAqIGsgKyAyKTtcclxuXHJcblx0XHR9XHJcblxyXG5cdH0sXHJcblxyXG5cdFNpbnVzb2lkYWw6IHtcclxuXHJcblx0XHRJbjogZnVuY3Rpb24gKGspIHtcclxuXHJcblx0XHRcdHJldHVybiAxIC0gTWF0aC5jb3MoayAqIE1hdGguUEkgLyAyKTtcclxuXHJcblx0XHR9LFxyXG5cclxuXHRcdE91dDogZnVuY3Rpb24gKGspIHtcclxuXHJcblx0XHRcdHJldHVybiBNYXRoLnNpbihrICogTWF0aC5QSSAvIDIpO1xyXG5cclxuXHRcdH0sXHJcblxyXG5cdFx0SW5PdXQ6IGZ1bmN0aW9uIChrKSB7XHJcblxyXG5cdFx0XHRyZXR1cm4gMC41ICogKDEgLSBNYXRoLmNvcyhNYXRoLlBJICogaykpO1xyXG5cclxuXHRcdH1cclxuXHJcblx0fSxcclxuXHJcblx0RXhwb25lbnRpYWw6IHtcclxuXHJcblx0XHRJbjogZnVuY3Rpb24gKGspIHtcclxuXHJcblx0XHRcdHJldHVybiBrID09PSAwID8gMCA6IE1hdGgucG93KDEwMjQsIGsgLSAxKTtcclxuXHJcblx0XHR9LFxyXG5cclxuXHRcdE91dDogZnVuY3Rpb24gKGspIHtcclxuXHJcblx0XHRcdHJldHVybiBrID09PSAxID8gMSA6IDEgLSBNYXRoLnBvdygyLCAtIDEwICogayk7XHJcblxyXG5cdFx0fSxcclxuXHJcblx0XHRJbk91dDogZnVuY3Rpb24gKGspIHtcclxuXHJcblx0XHRcdGlmIChrID09PSAwKSB7XHJcblx0XHRcdFx0cmV0dXJuIDA7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmIChrID09PSAxKSB7XHJcblx0XHRcdFx0cmV0dXJuIDE7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmICgoayAqPSAyKSA8IDEpIHtcclxuXHRcdFx0XHRyZXR1cm4gMC41ICogTWF0aC5wb3coMTAyNCwgayAtIDEpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRyZXR1cm4gMC41ICogKC0gTWF0aC5wb3coMiwgLSAxMCAqIChrIC0gMSkpICsgMik7XHJcblxyXG5cdFx0fVxyXG5cclxuXHR9LFxyXG5cclxuXHRDaXJjdWxhcjoge1xyXG5cclxuXHRcdEluOiBmdW5jdGlvbiAoaykge1xyXG5cclxuXHRcdFx0cmV0dXJuIDEgLSBNYXRoLnNxcnQoMSAtIGsgKiBrKTtcclxuXHJcblx0XHR9LFxyXG5cclxuXHRcdE91dDogZnVuY3Rpb24gKGspIHtcclxuXHJcblx0XHRcdHJldHVybiBNYXRoLnNxcnQoMSAtICgtLWsgKiBrKSk7XHJcblxyXG5cdFx0fSxcclxuXHJcblx0XHRJbk91dDogZnVuY3Rpb24gKGspIHtcclxuXHJcblx0XHRcdGlmICgoayAqPSAyKSA8IDEpIHtcclxuXHRcdFx0XHRyZXR1cm4gLSAwLjUgKiAoTWF0aC5zcXJ0KDEgLSBrICogaykgLSAxKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0cmV0dXJuIDAuNSAqIChNYXRoLnNxcnQoMSAtIChrIC09IDIpICogaykgKyAxKTtcclxuXHJcblx0XHR9XHJcblxyXG5cdH0sXHJcblxyXG5cdEVsYXN0aWM6IHtcclxuXHJcblx0XHRJbjogZnVuY3Rpb24gKGspIHtcclxuXHJcblx0XHRcdGlmIChrID09PSAwKSB7XHJcblx0XHRcdFx0cmV0dXJuIDA7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmIChrID09PSAxKSB7XHJcblx0XHRcdFx0cmV0dXJuIDE7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHJldHVybiAtTWF0aC5wb3coMiwgMTAgKiAoayAtIDEpKSAqIE1hdGguc2luKChrIC0gMS4xKSAqIDUgKiBNYXRoLlBJKTtcclxuXHJcblx0XHR9LFxyXG5cclxuXHRcdE91dDogZnVuY3Rpb24gKGspIHtcclxuXHJcblx0XHRcdGlmIChrID09PSAwKSB7XHJcblx0XHRcdFx0cmV0dXJuIDA7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmIChrID09PSAxKSB7XHJcblx0XHRcdFx0cmV0dXJuIDE7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHJldHVybiBNYXRoLnBvdygyLCAtMTAgKiBrKSAqIE1hdGguc2luKChrIC0gMC4xKSAqIDUgKiBNYXRoLlBJKSArIDE7XHJcblxyXG5cdFx0fSxcclxuXHJcblx0XHRJbk91dDogZnVuY3Rpb24gKGspIHtcclxuXHJcblx0XHRcdGlmIChrID09PSAwKSB7XHJcblx0XHRcdFx0cmV0dXJuIDA7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmIChrID09PSAxKSB7XHJcblx0XHRcdFx0cmV0dXJuIDE7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGsgKj0gMjtcclxuXHJcblx0XHRcdGlmIChrIDwgMSkge1xyXG5cdFx0XHRcdHJldHVybiAtMC41ICogTWF0aC5wb3coMiwgMTAgKiAoayAtIDEpKSAqIE1hdGguc2luKChrIC0gMS4xKSAqIDUgKiBNYXRoLlBJKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0cmV0dXJuIDAuNSAqIE1hdGgucG93KDIsIC0xMCAqIChrIC0gMSkpICogTWF0aC5zaW4oKGsgLSAxLjEpICogNSAqIE1hdGguUEkpICsgMTtcclxuXHJcblx0XHR9XHJcblxyXG5cdH0sXHJcblxyXG5cdEJhY2s6IHtcclxuXHJcblx0XHRJbjogZnVuY3Rpb24gKGspIHtcclxuXHJcblx0XHRcdHZhciBzID0gMS43MDE1ODtcclxuXHJcblx0XHRcdHJldHVybiBrICogayAqICgocyArIDEpICogayAtIHMpO1xyXG5cclxuXHRcdH0sXHJcblxyXG5cdFx0T3V0OiBmdW5jdGlvbiAoaykge1xyXG5cclxuXHRcdFx0dmFyIHMgPSAxLjcwMTU4O1xyXG5cclxuXHRcdFx0cmV0dXJuIC0tayAqIGsgKiAoKHMgKyAxKSAqIGsgKyBzKSArIDE7XHJcblxyXG5cdFx0fSxcclxuXHJcblx0XHRJbk91dDogZnVuY3Rpb24gKGspIHtcclxuXHJcblx0XHRcdHZhciBzID0gMS43MDE1OCAqIDEuNTI1O1xyXG5cclxuXHRcdFx0aWYgKChrICo9IDIpIDwgMSkge1xyXG5cdFx0XHRcdHJldHVybiAwLjUgKiAoayAqIGsgKiAoKHMgKyAxKSAqIGsgLSBzKSk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHJldHVybiAwLjUgKiAoKGsgLT0gMikgKiBrICogKChzICsgMSkgKiBrICsgcykgKyAyKTtcclxuXHJcblx0XHR9XHJcblxyXG5cdH0sXHJcblxyXG5cdEJvdW5jZToge1xyXG5cclxuXHRcdEluOiBmdW5jdGlvbiAoaykge1xyXG5cclxuXHRcdFx0cmV0dXJuIDEgLSBUV0VFTi5FYXNpbmcuQm91bmNlLk91dCgxIC0gayk7XHJcblxyXG5cdFx0fSxcclxuXHJcblx0XHRPdXQ6IGZ1bmN0aW9uIChrKSB7XHJcblxyXG5cdFx0XHRpZiAoayA8ICgxIC8gMi43NSkpIHtcclxuXHRcdFx0XHRyZXR1cm4gNy41NjI1ICogayAqIGs7XHJcblx0XHRcdH0gZWxzZSBpZiAoayA8ICgyIC8gMi43NSkpIHtcclxuXHRcdFx0XHRyZXR1cm4gNy41NjI1ICogKGsgLT0gKDEuNSAvIDIuNzUpKSAqIGsgKyAwLjc1O1xyXG5cdFx0XHR9IGVsc2UgaWYgKGsgPCAoMi41IC8gMi43NSkpIHtcclxuXHRcdFx0XHRyZXR1cm4gNy41NjI1ICogKGsgLT0gKDIuMjUgLyAyLjc1KSkgKiBrICsgMC45Mzc1O1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdHJldHVybiA3LjU2MjUgKiAoayAtPSAoMi42MjUgLyAyLjc1KSkgKiBrICsgMC45ODQzNzU7XHJcblx0XHRcdH1cclxuXHJcblx0XHR9LFxyXG5cclxuXHRcdEluT3V0OiBmdW5jdGlvbiAoaykge1xyXG5cclxuXHRcdFx0aWYgKGsgPCAwLjUpIHtcclxuXHRcdFx0XHRyZXR1cm4gVFdFRU4uRWFzaW5nLkJvdW5jZS5JbihrICogMikgKiAwLjU7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHJldHVybiBUV0VFTi5FYXNpbmcuQm91bmNlLk91dChrICogMiAtIDEpICogMC41ICsgMC41O1xyXG5cclxuXHRcdH1cclxuXHJcblx0fVxyXG5cclxufTtcclxuXHJcblRXRUVOLkludGVycG9sYXRpb24gPSB7XHJcblxyXG5cdExpbmVhcjogZnVuY3Rpb24gKHYsIGspIHtcclxuXHJcblx0XHR2YXIgbSA9IHYubGVuZ3RoIC0gMTtcclxuXHRcdHZhciBmID0gbSAqIGs7XHJcblx0XHR2YXIgaSA9IE1hdGguZmxvb3IoZik7XHJcblx0XHR2YXIgZm4gPSBUV0VFTi5JbnRlcnBvbGF0aW9uLlV0aWxzLkxpbmVhcjtcclxuXHJcblx0XHRpZiAoayA8IDApIHtcclxuXHRcdFx0cmV0dXJuIGZuKHZbMF0sIHZbMV0sIGYpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmIChrID4gMSkge1xyXG5cdFx0XHRyZXR1cm4gZm4odlttXSwgdlttIC0gMV0sIG0gLSBmKTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gZm4odltpXSwgdltpICsgMSA+IG0gPyBtIDogaSArIDFdLCBmIC0gaSk7XHJcblxyXG5cdH0sXHJcblxyXG5cdEJlemllcjogZnVuY3Rpb24gKHYsIGspIHtcclxuXHJcblx0XHR2YXIgYiA9IDA7XHJcblx0XHR2YXIgbiA9IHYubGVuZ3RoIC0gMTtcclxuXHRcdHZhciBwdyA9IE1hdGgucG93O1xyXG5cdFx0dmFyIGJuID0gVFdFRU4uSW50ZXJwb2xhdGlvbi5VdGlscy5CZXJuc3RlaW47XHJcblxyXG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPD0gbjsgaSsrKSB7XHJcblx0XHRcdGIgKz0gcHcoMSAtIGssIG4gLSBpKSAqIHB3KGssIGkpICogdltpXSAqIGJuKG4sIGkpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiBiO1xyXG5cclxuXHR9LFxyXG5cclxuXHRDYXRtdWxsUm9tOiBmdW5jdGlvbiAodiwgaykge1xyXG5cclxuXHRcdHZhciBtID0gdi5sZW5ndGggLSAxO1xyXG5cdFx0dmFyIGYgPSBtICogaztcclxuXHRcdHZhciBpID0gTWF0aC5mbG9vcihmKTtcclxuXHRcdHZhciBmbiA9IFRXRUVOLkludGVycG9sYXRpb24uVXRpbHMuQ2F0bXVsbFJvbTtcclxuXHJcblx0XHRpZiAodlswXSA9PT0gdlttXSkge1xyXG5cclxuXHRcdFx0aWYgKGsgPCAwKSB7XHJcblx0XHRcdFx0aSA9IE1hdGguZmxvb3IoZiA9IG0gKiAoMSArIGspKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0cmV0dXJuIGZuKHZbKGkgLSAxICsgbSkgJSBtXSwgdltpXSwgdlsoaSArIDEpICUgbV0sIHZbKGkgKyAyKSAlIG1dLCBmIC0gaSk7XHJcblxyXG5cdFx0fSBlbHNlIHtcclxuXHJcblx0XHRcdGlmIChrIDwgMCkge1xyXG5cdFx0XHRcdHJldHVybiB2WzBdIC0gKGZuKHZbMF0sIHZbMF0sIHZbMV0sIHZbMV0sIC1mKSAtIHZbMF0pO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpZiAoayA+IDEpIHtcclxuXHRcdFx0XHRyZXR1cm4gdlttXSAtIChmbih2W21dLCB2W21dLCB2W20gLSAxXSwgdlttIC0gMV0sIGYgLSBtKSAtIHZbbV0pO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRyZXR1cm4gZm4odltpID8gaSAtIDEgOiAwXSwgdltpXSwgdlttIDwgaSArIDEgPyBtIDogaSArIDFdLCB2W20gPCBpICsgMiA/IG0gOiBpICsgMl0sIGYgLSBpKTtcclxuXHJcblx0XHR9XHJcblxyXG5cdH0sXHJcblxyXG5cdFV0aWxzOiB7XHJcblxyXG5cdFx0TGluZWFyOiBmdW5jdGlvbiAocDAsIHAxLCB0KSB7XHJcblxyXG5cdFx0XHRyZXR1cm4gKHAxIC0gcDApICogdCArIHAwO1xyXG5cclxuXHRcdH0sXHJcblxyXG5cdFx0QmVybnN0ZWluOiBmdW5jdGlvbiAobiwgaSkge1xyXG5cclxuXHRcdFx0dmFyIGZjID0gVFdFRU4uSW50ZXJwb2xhdGlvbi5VdGlscy5GYWN0b3JpYWw7XHJcblxyXG5cdFx0XHRyZXR1cm4gZmMobikgLyBmYyhpKSAvIGZjKG4gLSBpKTtcclxuXHJcblx0XHR9LFxyXG5cclxuXHRcdEZhY3RvcmlhbDogKGZ1bmN0aW9uICgpIHtcclxuXHJcblx0XHRcdHZhciBhID0gWzFdO1xyXG5cclxuXHRcdFx0cmV0dXJuIGZ1bmN0aW9uIChuKSB7XHJcblxyXG5cdFx0XHRcdHZhciBzID0gMTtcclxuXHJcblx0XHRcdFx0aWYgKGFbbl0pIHtcclxuXHRcdFx0XHRcdHJldHVybiBhW25dO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Zm9yICh2YXIgaSA9IG47IGkgPiAxOyBpLS0pIHtcclxuXHRcdFx0XHRcdHMgKj0gaTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdGFbbl0gPSBzO1xyXG5cdFx0XHRcdHJldHVybiBzO1xyXG5cclxuXHRcdFx0fTtcclxuXHJcblx0XHR9KSgpLFxyXG5cclxuXHRcdENhdG11bGxSb206IGZ1bmN0aW9uIChwMCwgcDEsIHAyLCBwMywgdCkge1xyXG5cclxuXHRcdFx0dmFyIHYwID0gKHAyIC0gcDApICogMC41O1xyXG5cdFx0XHR2YXIgdjEgPSAocDMgLSBwMSkgKiAwLjU7XHJcblx0XHRcdHZhciB0MiA9IHQgKiB0O1xyXG5cdFx0XHR2YXIgdDMgPSB0ICogdDI7XHJcblxyXG5cdFx0XHRyZXR1cm4gKDIgKiBwMSAtIDIgKiBwMiArIHYwICsgdjEpICogdDMgKyAoLSAzICogcDEgKyAzICogcDIgLSAyICogdjAgLSB2MSkgKiB0MiArIHYwICogdCArIHAxO1xyXG5cclxuXHRcdH1cclxuXHJcblx0fVxyXG5cclxufTtcclxuXHJcbi8vIFVNRCAoVW5pdmVyc2FsIE1vZHVsZSBEZWZpbml0aW9uKVxyXG4oZnVuY3Rpb24gKHJvb3QpIHtcclxuXHJcblx0aWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkge1xyXG5cclxuXHRcdC8vIEFNRFxyXG5cdFx0ZGVmaW5lKFtdLCBmdW5jdGlvbiAoKSB7XHJcblx0XHRcdHJldHVybiBUV0VFTjtcclxuXHRcdH0pO1xyXG5cclxuXHR9IGVsc2UgaWYgKHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jykge1xyXG5cclxuXHRcdC8vIE5vZGUuanNcclxuXHRcdG1vZHVsZS5leHBvcnRzID0gVFdFRU47XHJcblxyXG5cdH0gZWxzZSBpZiAocm9vdCAhPT0gdW5kZWZpbmVkKSB7XHJcblxyXG5cdFx0Ly8gR2xvYmFsIHZhcmlhYmxlXHJcblx0XHRyb290LlRXRUVOID0gVFdFRU47XHJcblxyXG5cdH1cclxuXHJcbn0pKHRoaXMpO1xyXG4iLCIoZnVuY3Rpb24oZil7aWYodHlwZW9mIGV4cG9ydHM9PT1cIm9iamVjdFwiJiZ0eXBlb2YgbW9kdWxlIT09XCJ1bmRlZmluZWRcIil7bW9kdWxlLmV4cG9ydHM9ZigpfWVsc2UgaWYodHlwZW9mIGRlZmluZT09PVwiZnVuY3Rpb25cIiYmZGVmaW5lLmFtZCl7ZGVmaW5lKFtdLGYpfWVsc2V7dmFyIGc7aWYodHlwZW9mIHdpbmRvdyE9PVwidW5kZWZpbmVkXCIpe2c9d2luZG93fWVsc2UgaWYodHlwZW9mIGdsb2JhbCE9PVwidW5kZWZpbmVkXCIpe2c9Z2xvYmFsfWVsc2UgaWYodHlwZW9mIHNlbGYhPT1cInVuZGVmaW5lZFwiKXtnPXNlbGZ9ZWxzZXtnPXRoaXN9Zy5XZWJWUk1hbmFnZXIgPSBmKCl9fSkoZnVuY3Rpb24oKXt2YXIgZGVmaW5lLG1vZHVsZSxleHBvcnRzO3JldHVybiAoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSh7MTpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XHJcbi8qXHJcbiAqIENvcHlyaWdodCAyMDE1IEdvb2dsZSBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuXHJcbnZhciBFbWl0dGVyID0gX2RlcmVxXygnLi9lbWl0dGVyLmpzJyk7XHJcbnZhciBNb2RlcyA9IF9kZXJlcV8oJy4vbW9kZXMuanMnKTtcclxudmFyIFV0aWwgPSBfZGVyZXFfKCcuL3V0aWwuanMnKTtcclxuXHJcbi8qKlxyXG4gKiBFdmVyeXRoaW5nIGhhdmluZyB0byBkbyB3aXRoIHRoZSBXZWJWUiBidXR0b24uXHJcbiAqIEVtaXRzIGEgJ2NsaWNrJyBldmVudCB3aGVuIGl0J3MgY2xpY2tlZC5cclxuICovXHJcbmZ1bmN0aW9uIEJ1dHRvbk1hbmFnZXIob3B0X3Jvb3QpIHtcclxuICB2YXIgcm9vdCA9IG9wdF9yb290IHx8IGRvY3VtZW50LmJvZHk7XHJcbiAgdGhpcy5sb2FkSWNvbnNfKCk7XHJcblxyXG4gIC8vIE1ha2UgdGhlIGZ1bGxzY3JlZW4gYnV0dG9uLlxyXG4gIHZhciBmc0J1dHRvbiA9IHRoaXMuY3JlYXRlQnV0dG9uKCk7XHJcbiAgZnNCdXR0b24uc3JjID0gdGhpcy5JQ09OUy5mdWxsc2NyZWVuO1xyXG4gIGZzQnV0dG9uLnRpdGxlID0gJ0Z1bGxzY3JlZW4gbW9kZSc7XHJcbiAgdmFyIHMgPSBmc0J1dHRvbi5zdHlsZTtcclxuICBzLmJvdHRvbSA9IDA7XHJcbiAgcy5yaWdodCA9IDA7XHJcbiAgZnNCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmNyZWF0ZUNsaWNrSGFuZGxlcl8oJ2ZzJykpO1xyXG4gIHJvb3QuYXBwZW5kQ2hpbGQoZnNCdXR0b24pO1xyXG4gIHRoaXMuZnNCdXR0b24gPSBmc0J1dHRvbjtcclxuXHJcbiAgLy8gTWFrZSB0aGUgVlIgYnV0dG9uLlxyXG4gIHZhciB2ckJ1dHRvbiA9IHRoaXMuY3JlYXRlQnV0dG9uKCk7XHJcbiAgdnJCdXR0b24uc3JjID0gdGhpcy5JQ09OUy5jYXJkYm9hcmQ7XHJcbiAgdnJCdXR0b24udGl0bGUgPSAnVmlydHVhbCByZWFsaXR5IG1vZGUnO1xyXG4gIHZhciBzID0gdnJCdXR0b24uc3R5bGU7XHJcbiAgcy5ib3R0b20gPSAwO1xyXG4gIHMucmlnaHQgPSAnNDhweCc7XHJcbiAgdnJCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmNyZWF0ZUNsaWNrSGFuZGxlcl8oJ3ZyJykpO1xyXG4gIHJvb3QuYXBwZW5kQ2hpbGQodnJCdXR0b24pO1xyXG4gIHRoaXMudnJCdXR0b24gPSB2ckJ1dHRvbjtcclxuXHJcbiAgdGhpcy5pc1Zpc2libGUgPSB0cnVlO1xyXG5cclxufVxyXG5CdXR0b25NYW5hZ2VyLnByb3RvdHlwZSA9IG5ldyBFbWl0dGVyKCk7XHJcblxyXG5CdXR0b25NYW5hZ2VyLnByb3RvdHlwZS5jcmVhdGVCdXR0b24gPSBmdW5jdGlvbigpIHtcclxuICB2YXIgYnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XHJcbiAgYnV0dG9uLmNsYXNzTmFtZSA9ICd3ZWJ2ci1idXR0b24nO1xyXG4gIHZhciBzID0gYnV0dG9uLnN0eWxlO1xyXG4gIHMucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xyXG4gIHMud2lkdGggPSAnMjRweCdcclxuICBzLmhlaWdodCA9ICcyNHB4JztcclxuICBzLmJhY2tncm91bmRTaXplID0gJ2NvdmVyJztcclxuICBzLmJhY2tncm91bmRDb2xvciA9ICd0cmFuc3BhcmVudCc7XHJcbiAgcy5ib3JkZXIgPSAwO1xyXG4gIHMudXNlclNlbGVjdCA9ICdub25lJztcclxuICBzLndlYmtpdFVzZXJTZWxlY3QgPSAnbm9uZSc7XHJcbiAgcy5Nb3pVc2VyU2VsZWN0ID0gJ25vbmUnO1xyXG4gIHMuY3Vyc29yID0gJ3BvaW50ZXInO1xyXG4gIHMucGFkZGluZyA9ICcxMnB4JztcclxuICBzLnpJbmRleCA9IDE7XHJcbiAgcy5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gIHMuYm94U2l6aW5nID0gJ2NvbnRlbnQtYm94JztcclxuXHJcbiAgLy8gUHJldmVudCBidXR0b24gZnJvbSBiZWluZyBzZWxlY3RlZCBhbmQgZHJhZ2dlZC5cclxuICBidXR0b24uZHJhZ2dhYmxlID0gZmFsc2U7XHJcbiAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdzdGFydCcsIGZ1bmN0aW9uKGUpIHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICB9KTtcclxuXHJcbiAgLy8gU3R5bGUgaXQgb24gaG92ZXIuXHJcbiAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZW50ZXInLCBmdW5jdGlvbihlKSB7XHJcbiAgICBzLmZpbHRlciA9IHMud2Via2l0RmlsdGVyID0gJ2Ryb3Atc2hhZG93KDAgMCA1cHggcmdiYSgyNTUsMjU1LDI1NSwxKSknO1xyXG4gIH0pO1xyXG4gIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgZnVuY3Rpb24oZSkge1xyXG4gICAgcy5maWx0ZXIgPSBzLndlYmtpdEZpbHRlciA9ICcnO1xyXG4gIH0pO1xyXG4gIHJldHVybiBidXR0b247XHJcbn07XHJcblxyXG5CdXR0b25NYW5hZ2VyLnByb3RvdHlwZS5zZXRNb2RlID0gZnVuY3Rpb24obW9kZSwgaXNWUkNvbXBhdGlibGUpIHtcclxuICBpc1ZSQ29tcGF0aWJsZSA9IGlzVlJDb21wYXRpYmxlIHx8IFdlYlZSQ29uZmlnLkZPUkNFX0VOQUJMRV9WUjtcclxuICBpZiAoIXRoaXMuaXNWaXNpYmxlKSB7XHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG4gIHN3aXRjaCAobW9kZSkge1xyXG4gICAgY2FzZSBNb2Rlcy5OT1JNQUw6XHJcbiAgICAgIHRoaXMuZnNCdXR0b24uc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XHJcbiAgICAgIHRoaXMuZnNCdXR0b24uc3JjID0gdGhpcy5JQ09OUy5mdWxsc2NyZWVuO1xyXG4gICAgICB0aGlzLnZyQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSAoaXNWUkNvbXBhdGlibGUgPyAnYmxvY2snIDogJ25vbmUnKTtcclxuICAgICAgYnJlYWs7XHJcbiAgICBjYXNlIE1vZGVzLk1BR0lDX1dJTkRPVzpcclxuICAgICAgdGhpcy5mc0J1dHRvbi5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcclxuICAgICAgdGhpcy5mc0J1dHRvbi5zcmMgPSB0aGlzLklDT05TLmV4aXRGdWxsc2NyZWVuO1xyXG4gICAgICB0aGlzLnZyQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgY2FzZSBNb2Rlcy5WUjpcclxuICAgICAgdGhpcy5mc0J1dHRvbi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgICB0aGlzLnZyQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICAgIGJyZWFrO1xyXG4gIH1cclxuXHJcbiAgLy8gSGFjayBmb3IgU2FmYXJpIE1hYy9pT1MgdG8gZm9yY2UgcmVsYXlvdXQgKHN2Zy1zcGVjaWZpYyBpc3N1ZSlcclxuICAvLyBodHRwOi8vZ29vLmdsL2hqZ1I2clxyXG4gIHZhciBvbGRWYWx1ZSA9IHRoaXMuZnNCdXR0b24uc3R5bGUuZGlzcGxheTtcclxuICB0aGlzLmZzQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSAnaW5saW5lLWJsb2NrJztcclxuICB0aGlzLmZzQnV0dG9uLm9mZnNldEhlaWdodDtcclxuICB0aGlzLmZzQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSBvbGRWYWx1ZTtcclxufTtcclxuXHJcbkJ1dHRvbk1hbmFnZXIucHJvdG90eXBlLnNldFZpc2liaWxpdHkgPSBmdW5jdGlvbihpc1Zpc2libGUpIHtcclxuICB0aGlzLmlzVmlzaWJsZSA9IGlzVmlzaWJsZTtcclxuICB0aGlzLmZzQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSBpc1Zpc2libGUgPyAnYmxvY2snIDogJ25vbmUnO1xyXG4gIHRoaXMudnJCdXR0b24uc3R5bGUuZGlzcGxheSA9IGlzVmlzaWJsZSA/ICdibG9jaycgOiAnbm9uZSc7XHJcbn07XHJcblxyXG5CdXR0b25NYW5hZ2VyLnByb3RvdHlwZS5jcmVhdGVDbGlja0hhbmRsZXJfID0gZnVuY3Rpb24oZXZlbnROYW1lKSB7XHJcbiAgcmV0dXJuIGZ1bmN0aW9uKGUpIHtcclxuICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB0aGlzLmVtaXQoZXZlbnROYW1lKTtcclxuICB9LmJpbmQodGhpcyk7XHJcbn07XHJcblxyXG5CdXR0b25NYW5hZ2VyLnByb3RvdHlwZS5sb2FkSWNvbnNfID0gZnVuY3Rpb24oKSB7XHJcbiAgLy8gUHJlbG9hZCBzb21lIGhhcmQtY29kZWQgU1ZHLlxyXG4gIHRoaXMuSUNPTlMgPSB7fTtcclxuICB0aGlzLklDT05TLmNhcmRib2FyZCA9IFV0aWwuYmFzZTY0KCdpbWFnZS9zdmcreG1sJywgJ1BITjJaeUI0Yld4dWN6MGlhSFIwY0RvdkwzZDNkeTUzTXk1dmNtY3ZNakF3TUM5emRtY2lJSGRwWkhSb1BTSXlOSEI0SWlCb1pXbG5hSFE5SWpJMGNIZ2lJSFpwWlhkQ2IzZzlJakFnTUNBeU5DQXlOQ0lnWm1sc2JEMGlJMFpHUmtaR1JpSStDaUFnSUNBOGNHRjBhQ0JrUFNKTk1qQXVOelFnTmtnekxqSXhRekl1TlRVZ05pQXlJRFl1TlRjZ01pQTNMakk0ZGpFd0xqUTBZekFnTGpjdU5UVWdNUzR5T0NBeExqSXpJREV1TWpob05DNDNPV011TlRJZ01DQXVPVFl0TGpNeklERXVNVFF0TGpjNWJERXVOQzB6TGpRNFl5NHlNeTB1TlRrdU56a3RNUzR3TVNBeExqUTBMVEV1TURGek1TNHlNUzQwTWlBeExqUTFJREV1TURGc01TNHpPU0F6TGpRNFl5NHhPUzQwTmk0Mk15NDNPU0F4TGpFeExqYzVhRFF1TnpsakxqY3hJREFnTVM0eU5pMHVOVGNnTVM0eU5pMHhMakk0VmpjdU1qaGpNQzB1TnkwdU5UVXRNUzR5T0MweExqSTJMVEV1TWpoNlRUY3VOU0F4TkM0Mk1tTXRNUzR4TnlBd0xUSXVNVE10TGprMUxUSXVNVE10TWk0eE1pQXdMVEV1TVRjdU9UWXRNaTR4TXlBeUxqRXpMVEl1TVRNZ01TNHhPQ0F3SURJdU1USXVPVFlnTWk0eE1pQXlMakV6Y3kwdU9UVWdNaTR4TWkweUxqRXlJREl1TVRKNmJUa2dNR010TVM0eE55QXdMVEl1TVRNdExqazFMVEl1TVRNdE1pNHhNaUF3TFRFdU1UY3VPVFl0TWk0eE15QXlMakV6TFRJdU1UTnpNaTR4TWk0NU5pQXlMakV5SURJdU1UTXRMamsxSURJdU1USXRNaTR4TWlBeUxqRXllaUl2UGdvZ0lDQWdQSEJoZEdnZ1ptbHNiRDBpYm05dVpTSWdaRDBpVFRBZ01HZ3lOSFl5TkVnd1ZqQjZJaTgrQ2p3dmMzWm5QZ289Jyk7XHJcbiAgdGhpcy5JQ09OUy5mdWxsc2NyZWVuID0gVXRpbC5iYXNlNjQoJ2ltYWdlL3N2Zyt4bWwnLCAnUEhOMlp5QjRiV3h1Y3owaWFIUjBjRG92TDNkM2R5NTNNeTV2Y21jdk1qQXdNQzl6ZG1jaUlIZHBaSFJvUFNJeU5IQjRJaUJvWldsbmFIUTlJakkwY0hnaUlIWnBaWGRDYjNnOUlqQWdNQ0F5TkNBeU5DSWdabWxzYkQwaUkwWkdSa1pHUmlJK0NpQWdJQ0E4Y0dGMGFDQmtQU0pOTUNBd2FESTBkakkwU0RCNklpQm1hV3hzUFNKdWIyNWxJaTgrQ2lBZ0lDQThjR0YwYUNCa1BTSk5OeUF4TkVnMWRqVm9OWFl0TWtnM2RpMHplbTB0TWkwMGFESldOMmd6VmpWSU5YWTFlbTB4TWlBM2FDMHpkakpvTlhZdE5XZ3RNbll6ZWsweE5DQTFkakpvTTNZemFESldOV2d0TlhvaUx6NEtQQzl6ZG1jK0NnPT0nKTtcclxuICB0aGlzLklDT05TLmV4aXRGdWxsc2NyZWVuID0gVXRpbC5iYXNlNjQoJ2ltYWdlL3N2Zyt4bWwnLCAnUEhOMlp5QjRiV3h1Y3owaWFIUjBjRG92TDNkM2R5NTNNeTV2Y21jdk1qQXdNQzl6ZG1jaUlIZHBaSFJvUFNJeU5IQjRJaUJvWldsbmFIUTlJakkwY0hnaUlIWnBaWGRDYjNnOUlqQWdNQ0F5TkNBeU5DSWdabWxzYkQwaUkwWkdSa1pHUmlJK0NpQWdJQ0E4Y0dGMGFDQmtQU0pOTUNBd2FESTBkakkwU0RCNklpQm1hV3hzUFNKdWIyNWxJaTgrQ2lBZ0lDQThjR0YwYUNCa1BTSk5OU0F4Tm1nemRqTm9Nbll0TlVnMWRqSjZiVE10T0VnMWRqSm9OVlkxU0RoMk0zcHROaUF4TVdneWRpMHphRE4yTFRKb0xUVjJOWHB0TWkweE1WWTFhQzB5ZGpWb05WWTRhQzB6ZWlJdlBnbzhMM04yWno0SycpO1xyXG4gIHRoaXMuSUNPTlMuc2V0dGluZ3MgPSBVdGlsLmJhc2U2NCgnaW1hZ2Uvc3ZnK3htbCcsICdQSE4yWnlCNGJXeHVjejBpYUhSMGNEb3ZMM2QzZHk1M015NXZjbWN2TWpBd01DOXpkbWNpSUhkcFpIUm9QU0l5TkhCNElpQm9aV2xuYUhROUlqSTBjSGdpSUhacFpYZENiM2c5SWpBZ01DQXlOQ0F5TkNJZ1ptbHNiRDBpSTBaR1JrWkdSaUkrQ2lBZ0lDQThjR0YwYUNCa1BTSk5NQ0F3YURJMGRqSTBTREI2SWlCbWFXeHNQU0p1YjI1bElpOCtDaUFnSUNBOGNHRjBhQ0JrUFNKTk1Ua3VORE1nTVRJdU9UaGpMakEwTFM0ek1pNHdOeTB1TmpRdU1EY3RMams0Y3kwdU1ETXRMalkyTFM0d055MHVPVGhzTWk0eE1TMHhMalkxWXk0eE9TMHVNVFV1TWpRdExqUXlMakV5TFM0Mk5Hd3RNaTB6TGpRMll5MHVNVEl0TGpJeUxTNHpPUzB1TXkwdU5qRXRMakl5YkMweUxqUTVJREZqTFM0MU1pMHVOQzB4TGpBNExTNDNNeTB4TGpZNUxTNDVPR3d0TGpNNExUSXVOalZETVRRdU5EWWdNaTR4T0NBeE5DNHlOU0F5SURFMElESm9MVFJqTFM0eU5TQXdMUzQwTmk0eE9DMHVORGt1TkRKc0xTNHpPQ0F5TGpZMVl5MHVOakV1TWpVdE1TNHhOeTQxT1MweExqWTVMams0YkMweUxqUTVMVEZqTFM0eU15MHVNRGt0TGpRNUlEQXRMall4TGpJeWJDMHlJRE11TkRaakxTNHhNeTR5TWkwdU1EY3VORGt1TVRJdU5qUnNNaTR4TVNBeExqWTFZeTB1TURRdU16SXRMakEzTGpZMUxTNHdOeTQ1T0hNdU1ETXVOall1TURjdU9UaHNMVEl1TVRFZ01TNDJOV010TGpFNUxqRTFMUzR5TkM0ME1pMHVNVEl1TmpSc01pQXpMalEyWXk0eE1pNHlNaTR6T1M0ekxqWXhMakl5YkRJdU5Ea3RNV011TlRJdU5DQXhMakE0TGpjeklERXVOamt1T1Roc0xqTTRJREl1TmpWakxqQXpMakkwTGpJMExqUXlMalE1TGpReWFEUmpMakkxSURBZ0xqUTJMUzR4T0M0ME9TMHVOREpzTGpNNExUSXVOalZqTGpZeExTNHlOU0F4TGpFM0xTNDFPU0F4TGpZNUxTNDVPR3d5TGpRNUlERmpMakl6TGpBNUxqUTVJREFnTGpZeExTNHlNbXd5TFRNdU5EWmpMakV5TFM0eU1pNHdOeTB1TkRrdExqRXlMUzQyTkd3dE1pNHhNUzB4TGpZMWVrMHhNaUF4TlM0MVl5MHhMamt6SURBdE15NDFMVEV1TlRjdE15NDFMVE11TlhNeExqVTNMVE11TlNBekxqVXRNeTQxSURNdU5TQXhMalUzSURNdU5TQXpMalV0TVM0MU55QXpMalV0TXk0MUlETXVOWG9pTHo0S1BDOXpkbWMrQ2c9PScpO1xyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBCdXR0b25NYW5hZ2VyO1xyXG5cclxufSx7XCIuL2VtaXR0ZXIuanNcIjoyLFwiLi9tb2Rlcy5qc1wiOjMsXCIuL3V0aWwuanNcIjo0fV0sMjpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XHJcbi8qXHJcbiAqIENvcHlyaWdodCAyMDE1IEdvb2dsZSBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuXHJcbmZ1bmN0aW9uIEVtaXR0ZXIoKSB7XHJcbiAgdGhpcy5jYWxsYmFja3MgPSB7fTtcclxufVxyXG5cclxuRW1pdHRlci5wcm90b3R5cGUuZW1pdCA9IGZ1bmN0aW9uKGV2ZW50TmFtZSkge1xyXG4gIHZhciBjYWxsYmFja3MgPSB0aGlzLmNhbGxiYWNrc1tldmVudE5hbWVdO1xyXG4gIGlmICghY2FsbGJhY2tzKSB7XHJcbiAgICAvL2NvbnNvbGUubG9nKCdObyB2YWxpZCBjYWxsYmFjayBzcGVjaWZpZWQuJyk7XHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG4gIHZhciBhcmdzID0gW10uc2xpY2UuY2FsbChhcmd1bWVudHMpO1xyXG4gIC8vIEVsaW1pbmF0ZSB0aGUgZmlyc3QgcGFyYW0gKHRoZSBjYWxsYmFjaykuXHJcbiAgYXJncy5zaGlmdCgpO1xyXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgY2FsbGJhY2tzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICBjYWxsYmFja3NbaV0uYXBwbHkodGhpcywgYXJncyk7XHJcbiAgfVxyXG59O1xyXG5cclxuRW1pdHRlci5wcm90b3R5cGUub24gPSBmdW5jdGlvbihldmVudE5hbWUsIGNhbGxiYWNrKSB7XHJcbiAgaWYgKGV2ZW50TmFtZSBpbiB0aGlzLmNhbGxiYWNrcykge1xyXG4gICAgdGhpcy5jYWxsYmFja3NbZXZlbnROYW1lXS5wdXNoKGNhbGxiYWNrKTtcclxuICB9IGVsc2Uge1xyXG4gICAgdGhpcy5jYWxsYmFja3NbZXZlbnROYW1lXSA9IFtjYWxsYmFja107XHJcbiAgfVxyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBFbWl0dGVyO1xyXG5cclxufSx7fV0sMzpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XHJcbi8qXHJcbiAqIENvcHlyaWdodCAyMDE1IEdvb2dsZSBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuXHJcbnZhciBNb2RlcyA9IHtcclxuICBVTktOT1dOOiAwLFxyXG4gIC8vIE5vdCBmdWxsc2NyZWVuLCBqdXN0IHRyYWNraW5nLlxyXG4gIE5PUk1BTDogMSxcclxuICAvLyBNYWdpYyB3aW5kb3cgaW1tZXJzaXZlIG1vZGUuXHJcbiAgTUFHSUNfV0lORE9XOiAyLFxyXG4gIC8vIEZ1bGwgc2NyZWVuIHNwbGl0IHNjcmVlbiBWUiBtb2RlLlxyXG4gIFZSOiAzLFxyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBNb2RlcztcclxuXHJcbn0se31dLDQ6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xyXG4vKlxyXG4gKiBDb3B5cmlnaHQgMjAxNSBHb29nbGUgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcblxyXG52YXIgVXRpbCA9IHt9O1xyXG5cclxuVXRpbC5iYXNlNjQgPSBmdW5jdGlvbihtaW1lVHlwZSwgYmFzZTY0KSB7XHJcbiAgcmV0dXJuICdkYXRhOicgKyBtaW1lVHlwZSArICc7YmFzZTY0LCcgKyBiYXNlNjQ7XHJcbn07XHJcblxyXG5VdGlsLmlzTW9iaWxlID0gZnVuY3Rpb24oKSB7XHJcbiAgdmFyIGNoZWNrID0gZmFsc2U7XHJcbiAgKGZ1bmN0aW9uKGEpe2lmKC8oYW5kcm9pZHxiYlxcZCt8bWVlZ28pLittb2JpbGV8YXZhbnRnb3xiYWRhXFwvfGJsYWNrYmVycnl8YmxhemVyfGNvbXBhbHxlbGFpbmV8ZmVubmVjfGhpcHRvcHxpZW1vYmlsZXxpcChob25lfG9kKXxpcmlzfGtpbmRsZXxsZ2UgfG1hZW1vfG1pZHB8bW1wfG1vYmlsZS4rZmlyZWZveHxuZXRmcm9udHxvcGVyYSBtKG9ifGluKWl8cGFsbSggb3MpP3xwaG9uZXxwKGl4aXxyZSlcXC98cGx1Y2tlcnxwb2NrZXR8cHNwfHNlcmllcyg0fDYpMHxzeW1iaWFufHRyZW98dXBcXC4oYnJvd3NlcnxsaW5rKXx2b2RhZm9uZXx3YXB8d2luZG93cyBjZXx4ZGF8eGlpbm8vaS50ZXN0KGEpfHwvMTIwN3w2MzEwfDY1OTB8M2dzb3w0dGhwfDUwWzEtNl1pfDc3MHN8ODAyc3xhIHdhfGFiYWN8YWMoZXJ8b298c1xcLSl8YWkoa298cm4pfGFsKGF2fGNhfGNvKXxhbW9pfGFuKGV4fG55fHl3KXxhcHR1fGFyKGNofGdvKXxhcyh0ZXx1cyl8YXR0d3xhdShkaXxcXC1tfHIgfHMgKXxhdmFufGJlKGNrfGxsfG5xKXxiaShsYnxyZCl8YmwoYWN8YXopfGJyKGV8dil3fGJ1bWJ8YndcXC0obnx1KXxjNTVcXC98Y2FwaXxjY3dhfGNkbVxcLXxjZWxsfGNodG18Y2xkY3xjbWRcXC18Y28obXB8bmQpfGNyYXd8ZGEoaXR8bGx8bmcpfGRidGV8ZGNcXC1zfGRldml8ZGljYXxkbW9ifGRvKGN8cClvfGRzKDEyfFxcLWQpfGVsKDQ5fGFpKXxlbShsMnx1bCl8ZXIoaWN8azApfGVzbDh8ZXooWzQtN10wfG9zfHdhfHplKXxmZXRjfGZseShcXC18Xyl8ZzEgdXxnNTYwfGdlbmV8Z2ZcXC01fGdcXC1tb3xnbyhcXC53fG9kKXxncihhZHx1bil8aGFpZXxoY2l0fGhkXFwtKG18cHx0KXxoZWlcXC18aGkocHR8dGEpfGhwKCBpfGlwKXxoc1xcLWN8aHQoYyhcXC18IHxffGF8Z3xwfHN8dCl8dHApfGh1KGF3fHRjKXxpXFwtKDIwfGdvfG1hKXxpMjMwfGlhYyggfFxcLXxcXC8pfGlicm98aWRlYXxpZzAxfGlrb218aW0xa3xpbm5vfGlwYXF8aXJpc3xqYSh0fHYpYXxqYnJvfGplbXV8amlnc3xrZGRpfGtlaml8a2d0KCB8XFwvKXxrbG9ufGtwdCB8a3djXFwtfGt5byhjfGspfGxlKG5vfHhpKXxsZyggZ3xcXC8oa3xsfHUpfDUwfDU0fFxcLVthLXddKXxsaWJ3fGx5bnh8bTFcXC13fG0zZ2F8bTUwXFwvfG1hKHRlfHVpfHhvKXxtYygwMXwyMXxjYSl8bVxcLWNyfG1lKHJjfHJpKXxtaShvOHxvYXx0cyl8bW1lZnxtbygwMXwwMnxiaXxkZXxkb3x0KFxcLXwgfG98dil8enopfG10KDUwfHAxfHYgKXxtd2JwfG15d2F8bjEwWzAtMl18bjIwWzItM118bjMwKDB8Mil8bjUwKDB8Mnw1KXxuNygwKDB8MSl8MTApfG5lKChjfG0pXFwtfG9ufHRmfHdmfHdnfHd0KXxub2soNnxpKXxuenBofG8yaW18b3AodGl8d3YpfG9yYW58b3dnMXxwODAwfHBhbihhfGR8dCl8cGR4Z3xwZygxM3xcXC0oWzEtOF18YykpfHBoaWx8cGlyZXxwbChheXx1Yyl8cG5cXC0yfHBvKGNrfHJ0fHNlKXxwcm94fHBzaW98cHRcXC1nfHFhXFwtYXxxYygwN3wxMnwyMXwzMnw2MHxcXC1bMi03XXxpXFwtKXxxdGVrfHIzODB8cjYwMHxyYWtzfHJpbTl8cm8odmV8em8pfHM1NVxcL3xzYShnZXxtYXxtbXxtc3xueXx2YSl8c2MoMDF8aFxcLXxvb3xwXFwtKXxzZGtcXC98c2UoYyhcXC18MHwxKXw0N3xtY3xuZHxyaSl8c2doXFwtfHNoYXJ8c2llKFxcLXxtKXxza1xcLTB8c2woNDV8aWQpfHNtKGFsfGFyfGIzfGl0fHQ1KXxzbyhmdHxueSl8c3AoMDF8aFxcLXx2XFwtfHYgKXxzeSgwMXxtYil8dDIoMTh8NTApfHQ2KDAwfDEwfDE4KXx0YShndHxsayl8dGNsXFwtfHRkZ1xcLXx0ZWwoaXxtKXx0aW1cXC18dFxcLW1vfHRvKHBsfHNoKXx0cyg3MHxtXFwtfG0zfG01KXx0eFxcLTl8dXAoXFwuYnxnMXxzaSl8dXRzdHx2NDAwfHY3NTB8dmVyaXx2aShyZ3x0ZSl8dmsoNDB8NVswLTNdfFxcLXYpfHZtNDB8dm9kYXx2dWxjfHZ4KDUyfDUzfDYwfDYxfDcwfDgwfDgxfDgzfDg1fDk4KXx3M2MoXFwtfCApfHdlYmN8d2hpdHx3aShnIHxuY3xudyl8d21sYnx3b251fHg3MDB8eWFzXFwtfHlvdXJ8emV0b3x6dGVcXC0vaS50ZXN0KGEuc3Vic3RyKDAsNCkpKWNoZWNrID0gdHJ1ZX0pKG5hdmlnYXRvci51c2VyQWdlbnR8fG5hdmlnYXRvci52ZW5kb3J8fHdpbmRvdy5vcGVyYSk7XHJcbiAgcmV0dXJuIGNoZWNrO1xyXG59O1xyXG5cclxuVXRpbC5pc0ZpcmVmb3ggPSBmdW5jdGlvbigpIHtcclxuICByZXR1cm4gL2ZpcmVmb3gvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpO1xyXG59O1xyXG5cclxuVXRpbC5pc0lPUyA9IGZ1bmN0aW9uKCkge1xyXG4gIHJldHVybiAvKGlQYWR8aVBob25lfGlQb2QpL2cudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTtcclxufTtcclxuXHJcblV0aWwuaXNJRnJhbWUgPSBmdW5jdGlvbigpIHtcclxuICB0cnkge1xyXG4gICAgcmV0dXJuIHdpbmRvdy5zZWxmICE9PSB3aW5kb3cudG9wO1xyXG4gIH0gY2F0Y2ggKGUpIHtcclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH1cclxufTtcclxuXHJcblV0aWwuYXBwZW5kUXVlcnlQYXJhbWV0ZXIgPSBmdW5jdGlvbih1cmwsIGtleSwgdmFsdWUpIHtcclxuICAvLyBEZXRlcm1pbmUgZGVsaW1pdGVyIGJhc2VkIG9uIGlmIHRoZSBVUkwgYWxyZWFkeSBHRVQgcGFyYW1ldGVycyBpbiBpdC5cclxuICB2YXIgZGVsaW1pdGVyID0gKHVybC5pbmRleE9mKCc/JykgPCAwID8gJz8nIDogJyYnKTtcclxuICB1cmwgKz0gZGVsaW1pdGVyICsga2V5ICsgJz0nICsgdmFsdWU7XHJcbiAgcmV0dXJuIHVybDtcclxufTtcclxuXHJcbi8vIEZyb20gaHR0cDovL2dvby5nbC80V1gzdGdcclxuVXRpbC5nZXRRdWVyeVBhcmFtZXRlciA9IGZ1bmN0aW9uKG5hbWUpIHtcclxuICB2YXIgbmFtZSA9IG5hbWUucmVwbGFjZSgvW1xcW10vLCBcIlxcXFxbXCIpLnJlcGxhY2UoL1tcXF1dLywgXCJcXFxcXVwiKTtcclxuICB2YXIgcmVnZXggPSBuZXcgUmVnRXhwKFwiW1xcXFw/Jl1cIiArIG5hbWUgKyBcIj0oW14mI10qKVwiKSxcclxuICAgICAgcmVzdWx0cyA9IHJlZ2V4LmV4ZWMobG9jYXRpb24uc2VhcmNoKTtcclxuICByZXR1cm4gcmVzdWx0cyA9PT0gbnVsbCA/IFwiXCIgOiBkZWNvZGVVUklDb21wb25lbnQocmVzdWx0c1sxXS5yZXBsYWNlKC9cXCsvZywgXCIgXCIpKTtcclxufTtcclxuXHJcblV0aWwuaXNMYW5kc2NhcGVNb2RlID0gZnVuY3Rpb24oKSB7XHJcbiAgcmV0dXJuICh3aW5kb3cub3JpZW50YXRpb24gPT0gOTAgfHwgd2luZG93Lm9yaWVudGF0aW9uID09IC05MCk7XHJcbn07XHJcblxyXG5VdGlsLmdldFNjcmVlbldpZHRoID0gZnVuY3Rpb24oKSB7XHJcbiAgcmV0dXJuIE1hdGgubWF4KHdpbmRvdy5zY3JlZW4ud2lkdGgsIHdpbmRvdy5zY3JlZW4uaGVpZ2h0KSAqXHJcbiAgICAgIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvO1xyXG59O1xyXG5cclxuVXRpbC5nZXRTY3JlZW5IZWlnaHQgPSBmdW5jdGlvbigpIHtcclxuICByZXR1cm4gTWF0aC5taW4od2luZG93LnNjcmVlbi53aWR0aCwgd2luZG93LnNjcmVlbi5oZWlnaHQpICpcclxuICAgICAgd2luZG93LmRldmljZVBpeGVsUmF0aW87XHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IFV0aWw7XHJcblxyXG59LHt9XSw1OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcclxuLypcclxuICogQ29weXJpZ2h0IDIwMTUgR29vZ2xlIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5cclxudmFyIEJ1dHRvbk1hbmFnZXIgPSBfZGVyZXFfKCcuL2J1dHRvbi1tYW5hZ2VyLmpzJyk7XHJcbnZhciBFbWl0dGVyID0gX2RlcmVxXygnLi9lbWl0dGVyLmpzJyk7XHJcbnZhciBNb2RlcyA9IF9kZXJlcV8oJy4vbW9kZXMuanMnKTtcclxudmFyIFV0aWwgPSBfZGVyZXFfKCcuL3V0aWwuanMnKTtcclxuXHJcbi8qKlxyXG4gKiBIZWxwZXIgZm9yIGdldHRpbmcgaW4gYW5kIG91dCBvZiBWUiBtb2RlLlxyXG4gKi9cclxuZnVuY3Rpb24gV2ViVlJNYW5hZ2VyKHJlbmRlcmVyLCBlZmZlY3QsIHBhcmFtcykge1xyXG4gIHRoaXMucGFyYW1zID0gcGFyYW1zIHx8IHt9O1xyXG5cclxuICB0aGlzLm1vZGUgPSBNb2Rlcy5VTktOT1dOO1xyXG5cclxuICAvLyBTZXQgb3B0aW9uIHRvIGhpZGUgdGhlIGJ1dHRvbi5cclxuICB0aGlzLmhpZGVCdXR0b24gPSB0aGlzLnBhcmFtcy5oaWRlQnV0dG9uIHx8IGZhbHNlO1xyXG4gIC8vIFdoZXRoZXIgb3Igbm90IHRoZSBGT1Ygc2hvdWxkIGJlIGRpc3RvcnRlZCBvciB1bi1kaXN0b3J0ZWQuIEJ5IGRlZmF1bHQsIGl0XHJcbiAgLy8gc2hvdWxkIGJlIGRpc3RvcnRlZCwgYnV0IGluIHRoZSBjYXNlIG9mIHZlcnRleCBzaGFkZXIgYmFzZWQgZGlzdG9ydGlvbixcclxuICAvLyBlbnN1cmUgdGhhdCB3ZSB1c2UgdW5kaXN0b3J0ZWQgcGFyYW1ldGVycy5cclxuICB0aGlzLnByZWRpc3RvcnRlZCA9ICEhdGhpcy5wYXJhbXMucHJlZGlzdG9ydGVkO1xyXG5cclxuICAvLyBTYXZlIHRoZSBUSFJFRS5qcyByZW5kZXJlciBhbmQgZWZmZWN0IGZvciBsYXRlci5cclxuICB0aGlzLnJlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgdGhpcy5lZmZlY3QgPSBlZmZlY3Q7XHJcbiAgdmFyIHBvbHlmaWxsV3JhcHBlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy53ZWJ2ci1wb2x5ZmlsbC1mdWxsc2NyZWVuLXdyYXBwZXInKTtcclxuICB0aGlzLmJ1dHRvbiA9IG5ldyBCdXR0b25NYW5hZ2VyKHBvbHlmaWxsV3JhcHBlcik7XHJcblxyXG4gIHRoaXMuaXNGdWxsc2NyZWVuRGlzYWJsZWQgPSAhIVV0aWwuZ2V0UXVlcnlQYXJhbWV0ZXIoJ25vX2Z1bGxzY3JlZW4nKTtcclxuICB0aGlzLnN0YXJ0TW9kZSA9IE1vZGVzLk5PUk1BTDtcclxuICB2YXIgc3RhcnRNb2RlUGFyYW0gPSBwYXJzZUludChVdGlsLmdldFF1ZXJ5UGFyYW1ldGVyKCdzdGFydF9tb2RlJykpO1xyXG4gIGlmICghaXNOYU4oc3RhcnRNb2RlUGFyYW0pKSB7XHJcbiAgICB0aGlzLnN0YXJ0TW9kZSA9IHN0YXJ0TW9kZVBhcmFtO1xyXG4gIH1cclxuXHJcbiAgaWYgKHRoaXMuaGlkZUJ1dHRvbikge1xyXG4gICAgdGhpcy5idXR0b24uc2V0VmlzaWJpbGl0eShmYWxzZSk7XHJcbiAgfVxyXG5cclxuICAvLyBDaGVjayBpZiB0aGUgYnJvd3NlciBpcyBjb21wYXRpYmxlIHdpdGggV2ViVlIuXHJcbiAgdGhpcy5nZXREZXZpY2VCeVR5cGVfKFZSRGlzcGxheSkudGhlbihmdW5jdGlvbihobWQpIHtcclxuICAgIHRoaXMuaG1kID0gaG1kO1xyXG5cclxuICAgIC8vIE9ubHkgZW5hYmxlIFZSIG1vZGUgaWYgdGhlcmUncyBhIFZSIGRldmljZSBhdHRhY2hlZCBvciB3ZSBhcmUgcnVubmluZyB0aGVcclxuICAgIC8vIHBvbHlmaWxsIG9uIG1vYmlsZS5cclxuICAgIGlmICghdGhpcy5pc1ZSQ29tcGF0aWJsZU92ZXJyaWRlKSB7XHJcbiAgICAgIHRoaXMuaXNWUkNvbXBhdGlibGUgPSAgIWhtZC5pc1BvbHlmaWxsZWQgfHwgVXRpbC5pc01vYmlsZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHN3aXRjaCAodGhpcy5zdGFydE1vZGUpIHtcclxuICAgICAgY2FzZSBNb2Rlcy5NQUdJQ19XSU5ET1c6XHJcbiAgICAgICAgdGhpcy5zZXRNb2RlXyhNb2Rlcy5NQUdJQ19XSU5ET1cpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIE1vZGVzLlZSOlxyXG4gICAgICAgIHRoaXMuZW50ZXJWUk1vZGVfKCk7XHJcbiAgICAgICAgdGhpcy5zZXRNb2RlXyhNb2Rlcy5WUik7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgdGhpcy5zZXRNb2RlXyhNb2Rlcy5OT1JNQUwpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuZW1pdCgnaW5pdGlhbGl6ZWQnKTtcclxuICB9LmJpbmQodGhpcykpO1xyXG5cclxuICAvLyBIb29rIHVwIGJ1dHRvbiBsaXN0ZW5lcnMuXHJcbiAgdGhpcy5idXR0b24ub24oJ2ZzJywgdGhpcy5vbkZTQ2xpY2tfLmJpbmQodGhpcykpO1xyXG4gIHRoaXMuYnV0dG9uLm9uKCd2cicsIHRoaXMub25WUkNsaWNrXy5iaW5kKHRoaXMpKTtcclxuXHJcbiAgLy8gQmluZCB0byBmdWxsc2NyZWVuIGV2ZW50cy5cclxuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCd3ZWJraXRmdWxsc2NyZWVuY2hhbmdlJyxcclxuICAgICAgdGhpcy5vbkZ1bGxzY3JlZW5DaGFuZ2VfLmJpbmQodGhpcykpO1xyXG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vemZ1bGxzY3JlZW5jaGFuZ2UnLFxyXG4gICAgICB0aGlzLm9uRnVsbHNjcmVlbkNoYW5nZV8uYmluZCh0aGlzKSk7XHJcbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbXNmdWxsc2NyZWVuY2hhbmdlJyxcclxuICAgICAgdGhpcy5vbkZ1bGxzY3JlZW5DaGFuZ2VfLmJpbmQodGhpcykpO1xyXG5cclxuICAvLyBCaW5kIHRvIFZSKiBzcGVjaWZpYyBldmVudHMuXHJcbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3ZyZGlzcGxheXByZXNlbnRjaGFuZ2UnLFxyXG4gICAgICB0aGlzLm9uVlJEaXNwbGF5UHJlc2VudENoYW5nZV8uYmluZCh0aGlzKSk7XHJcbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3ZyZGlzcGxheWRldmljZXBhcmFtc2NoYW5nZScsXHJcbiAgICAgIHRoaXMub25WUkRpc3BsYXlEZXZpY2VQYXJhbXNDaGFuZ2VfLmJpbmQodGhpcykpO1xyXG59XHJcblxyXG5XZWJWUk1hbmFnZXIucHJvdG90eXBlID0gbmV3IEVtaXR0ZXIoKTtcclxuXHJcbi8vIEV4cG9zZSB0aGVzZSB2YWx1ZXMgZXh0ZXJuYWxseS5cclxuV2ViVlJNYW5hZ2VyLk1vZGVzID0gTW9kZXM7XHJcblxyXG5XZWJWUk1hbmFnZXIucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uKHNjZW5lLCBjYW1lcmEsIHRpbWVzdGFtcCkge1xyXG4gIC8vIFNjZW5lIG1heSBiZSBhbiBhcnJheSBvZiB0d28gc2NlbmVzLCBvbmUgZm9yIGVhY2ggZXllLlxyXG4gIGlmIChzY2VuZSBpbnN0YW5jZW9mIEFycmF5KSB7XHJcbiAgICB0aGlzLmVmZmVjdC5yZW5kZXIoc2NlbmVbMF0sIGNhbWVyYSk7XHJcbiAgfSBlbHNlIHtcclxuICAgIHRoaXMuZWZmZWN0LnJlbmRlcihzY2VuZSwgY2FtZXJhKTtcclxuICB9XHJcbn07XHJcblxyXG5XZWJWUk1hbmFnZXIucHJvdG90eXBlLnNldFZSQ29tcGF0aWJsZU92ZXJyaWRlID0gZnVuY3Rpb24oaXNWUkNvbXBhdGlibGUpIHtcclxuICB0aGlzLmlzVlJDb21wYXRpYmxlID0gaXNWUkNvbXBhdGlibGU7XHJcbiAgdGhpcy5pc1ZSQ29tcGF0aWJsZU92ZXJyaWRlID0gdHJ1ZTtcclxuXHJcbiAgLy8gRG9uJ3QgYWN0dWFsbHkgY2hhbmdlIG1vZGVzLCBqdXN0IHVwZGF0ZSB0aGUgYnV0dG9ucy5cclxuICB0aGlzLmJ1dHRvbi5zZXRNb2RlKHRoaXMubW9kZSwgdGhpcy5pc1ZSQ29tcGF0aWJsZSk7XHJcbn07XHJcblxyXG5XZWJWUk1hbmFnZXIucHJvdG90eXBlLnNldEZ1bGxzY3JlZW5DYWxsYmFjayA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XHJcbiAgdGhpcy5mdWxsc2NyZWVuQ2FsbGJhY2sgPSBjYWxsYmFjaztcclxufTtcclxuXHJcbldlYlZSTWFuYWdlci5wcm90b3R5cGUuc2V0VlJDYWxsYmFjayA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XHJcbiAgdGhpcy52ckNhbGxiYWNrID0gY2FsbGJhY2s7XHJcbn07XHJcblxyXG5XZWJWUk1hbmFnZXIucHJvdG90eXBlLnNldEV4aXRGdWxsc2NyZWVuQ2FsbGJhY2sgPSBmdW5jdGlvbihjYWxsYmFjaykge1xyXG4gIHRoaXMuZXhpdEZ1bGxzY3JlZW5DYWxsYmFjayA9IGNhbGxiYWNrO1xyXG59XHJcblxyXG4vKipcclxuICogUHJvbWlzZSByZXR1cm5zIHRydWUgaWYgdGhlcmUgaXMgYXQgbGVhc3Qgb25lIEhNRCBkZXZpY2UgYXZhaWxhYmxlLlxyXG4gKi9cclxuV2ViVlJNYW5hZ2VyLnByb3RvdHlwZS5nZXREZXZpY2VCeVR5cGVfID0gZnVuY3Rpb24odHlwZSkge1xyXG4gIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcclxuICAgIG5hdmlnYXRvci5nZXRWUkRpc3BsYXlzKCkudGhlbihmdW5jdGlvbihkaXNwbGF5cykge1xyXG4gICAgICAvLyBQcm9taXNlIHN1Y2NlZWRzLCBidXQgY2hlY2sgaWYgdGhlcmUgYXJlIGFueSBkaXNwbGF5cyBhY3R1YWxseS5cclxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkaXNwbGF5cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGlmIChkaXNwbGF5c1tpXSBpbnN0YW5jZW9mIHR5cGUpIHtcclxuICAgICAgICAgIHJlc29sdmUoZGlzcGxheXNbaV0pO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIHJlc29sdmUobnVsbCk7XHJcbiAgICB9LCBmdW5jdGlvbigpIHtcclxuICAgICAgLy8gTm8gZGlzcGxheXMgYXJlIGZvdW5kLlxyXG4gICAgICByZXNvbHZlKG51bGwpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcbn07XHJcblxyXG4vKipcclxuICogSGVscGVyIGZvciBlbnRlcmluZyBWUiBtb2RlLlxyXG4gKi9cclxuV2ViVlJNYW5hZ2VyLnByb3RvdHlwZS5lbnRlclZSTW9kZV8gPSBmdW5jdGlvbigpIHtcclxuICB0aGlzLmhtZC5yZXF1ZXN0UHJlc2VudChbe1xyXG4gICAgc291cmNlOiB0aGlzLnJlbmRlcmVyLmRvbUVsZW1lbnQsXHJcbiAgICBwcmVkaXN0b3J0ZWQ6IHRoaXMucHJlZGlzdG9ydGVkXHJcbiAgfV0pO1xyXG59O1xyXG5cclxuV2ViVlJNYW5hZ2VyLnByb3RvdHlwZS5zZXRNb2RlXyA9IGZ1bmN0aW9uKG1vZGUpIHtcclxuICB2YXIgb2xkTW9kZSA9IHRoaXMubW9kZTtcclxuICBpZiAobW9kZSA9PSB0aGlzLm1vZGUpIHtcclxuICAgIGNvbnNvbGUud2FybignTm90IGNoYW5naW5nIG1vZGVzLCBhbHJlYWR5IGluICVzJywgbW9kZSk7XHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG4gIC8vIGNvbnNvbGUubG9nKCdNb2RlIGNoYW5nZTogJXMgPT4gJXMnLCB0aGlzLm1vZGUsIG1vZGUpO1xyXG4gIHRoaXMubW9kZSA9IG1vZGU7XHJcbiAgdGhpcy5idXR0b24uc2V0TW9kZShtb2RlLCB0aGlzLmlzVlJDb21wYXRpYmxlKTtcclxuXHJcbiAgLy8gRW1pdCBhbiBldmVudCBpbmRpY2F0aW5nIHRoZSBtb2RlIGNoYW5nZWQuXHJcbiAgdGhpcy5lbWl0KCdtb2RlY2hhbmdlJywgbW9kZSwgb2xkTW9kZSk7XHJcbn07XHJcblxyXG4vKipcclxuICogTWFpbiBidXR0b24gd2FzIGNsaWNrZWQuXHJcbiAqL1xyXG5XZWJWUk1hbmFnZXIucHJvdG90eXBlLm9uRlNDbGlja18gPSBmdW5jdGlvbigpIHtcclxuICBzd2l0Y2ggKHRoaXMubW9kZSkge1xyXG4gICAgY2FzZSBNb2Rlcy5OT1JNQUw6XHJcbiAgICAgIC8vIFRPRE86IFJlbW92ZSB0aGlzIGhhY2sgaWYvd2hlbiBpT1MgZ2V0cyByZWFsIGZ1bGxzY3JlZW4gbW9kZS5cclxuICAgICAgLy8gSWYgdGhpcyBpcyBhbiBpZnJhbWUgb24gaU9TLCBicmVhayBvdXQgYW5kIG9wZW4gaW4gbm9fZnVsbHNjcmVlbiBtb2RlLlxyXG4gICAgICBpZiAoVXRpbC5pc0lPUygpICYmIFV0aWwuaXNJRnJhbWUoKSkge1xyXG4gICAgICAgIGlmICh0aGlzLmZ1bGxzY3JlZW5DYWxsYmFjaykge1xyXG4gICAgICAgICAgdGhpcy5mdWxsc2NyZWVuQ2FsbGJhY2soKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgdmFyIHVybCA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmO1xyXG4gICAgICAgICAgdXJsID0gVXRpbC5hcHBlbmRRdWVyeVBhcmFtZXRlcih1cmwsICdub19mdWxsc2NyZWVuJywgJ3RydWUnKTtcclxuICAgICAgICAgIHVybCA9IFV0aWwuYXBwZW5kUXVlcnlQYXJhbWV0ZXIodXJsLCAnc3RhcnRfbW9kZScsIE1vZGVzLk1BR0lDX1dJTkRPVyk7XHJcbiAgICAgICAgICB0b3AubG9jYXRpb24uaHJlZiA9IHVybDtcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5zZXRNb2RlXyhNb2Rlcy5NQUdJQ19XSU5ET1cpO1xyXG4gICAgICB0aGlzLnJlcXVlc3RGdWxsc2NyZWVuXygpO1xyXG4gICAgICBicmVhaztcclxuICAgIGNhc2UgTW9kZXMuTUFHSUNfV0lORE9XOlxyXG4gICAgICBpZiAodGhpcy5pc0Z1bGxzY3JlZW5EaXNhYmxlZCkge1xyXG4gICAgICAgIHdpbmRvdy5oaXN0b3J5LmJhY2soKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHRoaXMuZXhpdEZ1bGxzY3JlZW5DYWxsYmFjaykge1xyXG4gICAgICAgIHRoaXMuZXhpdEZ1bGxzY3JlZW5DYWxsYmFjaygpO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMuc2V0TW9kZV8oTW9kZXMuTk9STUFMKTtcclxuICAgICAgdGhpcy5leGl0RnVsbHNjcmVlbl8oKTtcclxuICAgICAgYnJlYWs7XHJcbiAgfVxyXG59O1xyXG5cclxuLyoqXHJcbiAqIFRoZSBWUiBidXR0b24gd2FzIGNsaWNrZWQuXHJcbiAqL1xyXG5XZWJWUk1hbmFnZXIucHJvdG90eXBlLm9uVlJDbGlja18gPSBmdW5jdGlvbigpIHtcclxuICAvLyBUT0RPOiBSZW1vdmUgdGhpcyBoYWNrIHdoZW4gaU9TIGhhcyBmdWxsc2NyZWVuIG1vZGUuXHJcbiAgLy8gSWYgdGhpcyBpcyBhbiBpZnJhbWUgb24gaU9TLCBicmVhayBvdXQgYW5kIG9wZW4gaW4gbm9fZnVsbHNjcmVlbiBtb2RlLlxyXG4gIGlmICh0aGlzLm1vZGUgPT0gTW9kZXMuTk9STUFMICYmIFV0aWwuaXNJT1MoKSAmJiBVdGlsLmlzSUZyYW1lKCkpIHtcclxuICAgIGlmICh0aGlzLnZyQ2FsbGJhY2spIHtcclxuICAgICAgdGhpcy52ckNhbGxiYWNrKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB2YXIgdXJsID0gd2luZG93LmxvY2F0aW9uLmhyZWY7XHJcbiAgICAgIHVybCA9IFV0aWwuYXBwZW5kUXVlcnlQYXJhbWV0ZXIodXJsLCAnbm9fZnVsbHNjcmVlbicsICd0cnVlJyk7XHJcbiAgICAgIHVybCA9IFV0aWwuYXBwZW5kUXVlcnlQYXJhbWV0ZXIodXJsLCAnc3RhcnRfbW9kZScsIE1vZGVzLlZSKTtcclxuICAgICAgdG9wLmxvY2F0aW9uLmhyZWYgPSB1cmw7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICB9XHJcbiAgdGhpcy5lbnRlclZSTW9kZV8oKTtcclxufTtcclxuXHJcbldlYlZSTWFuYWdlci5wcm90b3R5cGUucmVxdWVzdEZ1bGxzY3JlZW5fID0gZnVuY3Rpb24oKSB7XHJcbiAgdmFyIGNhbnZhcyA9IGRvY3VtZW50LmJvZHk7XHJcbiAgLy92YXIgY2FudmFzID0gdGhpcy5yZW5kZXJlci5kb21FbGVtZW50O1xyXG4gIGlmIChjYW52YXMucmVxdWVzdEZ1bGxzY3JlZW4pIHtcclxuICAgIGNhbnZhcy5yZXF1ZXN0RnVsbHNjcmVlbigpO1xyXG4gIH0gZWxzZSBpZiAoY2FudmFzLm1velJlcXVlc3RGdWxsU2NyZWVuKSB7XHJcbiAgICBjYW52YXMubW96UmVxdWVzdEZ1bGxTY3JlZW4oKTtcclxuICB9IGVsc2UgaWYgKGNhbnZhcy53ZWJraXRSZXF1ZXN0RnVsbHNjcmVlbikge1xyXG4gICAgY2FudmFzLndlYmtpdFJlcXVlc3RGdWxsc2NyZWVuKCk7XHJcbiAgfSBlbHNlIGlmIChjYW52YXMubXNSZXF1ZXN0RnVsbHNjcmVlbikge1xyXG4gICAgY2FudmFzLm1zUmVxdWVzdEZ1bGxzY3JlZW4oKTtcclxuICB9XHJcbn07XHJcblxyXG5XZWJWUk1hbmFnZXIucHJvdG90eXBlLmV4aXRGdWxsc2NyZWVuXyA9IGZ1bmN0aW9uKCkge1xyXG4gIGlmIChkb2N1bWVudC5leGl0RnVsbHNjcmVlbikge1xyXG4gICAgZG9jdW1lbnQuZXhpdEZ1bGxzY3JlZW4oKTtcclxuICB9IGVsc2UgaWYgKGRvY3VtZW50Lm1vekNhbmNlbEZ1bGxTY3JlZW4pIHtcclxuICAgIGRvY3VtZW50Lm1vekNhbmNlbEZ1bGxTY3JlZW4oKTtcclxuICB9IGVsc2UgaWYgKGRvY3VtZW50LndlYmtpdEV4aXRGdWxsc2NyZWVuKSB7XHJcbiAgICBkb2N1bWVudC53ZWJraXRFeGl0RnVsbHNjcmVlbigpO1xyXG4gIH0gZWxzZSBpZiAoZG9jdW1lbnQubXNFeGl0RnVsbHNjcmVlbikge1xyXG4gICAgZG9jdW1lbnQubXNFeGl0RnVsbHNjcmVlbigpO1xyXG4gIH1cclxufTtcclxuXHJcbldlYlZSTWFuYWdlci5wcm90b3R5cGUub25WUkRpc3BsYXlQcmVzZW50Q2hhbmdlXyA9IGZ1bmN0aW9uKGUpIHtcclxuICBjb25zb2xlLmxvZygnb25WUkRpc3BsYXlQcmVzZW50Q2hhbmdlXycsIGUpO1xyXG4gIGlmICh0aGlzLmhtZC5pc1ByZXNlbnRpbmcpIHtcclxuICAgIHRoaXMuc2V0TW9kZV8oTW9kZXMuVlIpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICB0aGlzLnNldE1vZGVfKE1vZGVzLk5PUk1BTCk7XHJcbiAgfVxyXG59O1xyXG5cclxuV2ViVlJNYW5hZ2VyLnByb3RvdHlwZS5vblZSRGlzcGxheURldmljZVBhcmFtc0NoYW5nZV8gPSBmdW5jdGlvbihlKSB7XHJcbiAgY29uc29sZS5sb2coJ29uVlJEaXNwbGF5RGV2aWNlUGFyYW1zQ2hhbmdlXycsIGUpO1xyXG59O1xyXG5cclxuV2ViVlJNYW5hZ2VyLnByb3RvdHlwZS5vbkZ1bGxzY3JlZW5DaGFuZ2VfID0gZnVuY3Rpb24oZSkge1xyXG4gIC8vIElmIHdlIGxlYXZlIGZ1bGwtc2NyZWVuLCBnbyBiYWNrIHRvIG5vcm1hbCBtb2RlLlxyXG4gIGlmIChkb2N1bWVudC53ZWJraXRGdWxsc2NyZWVuRWxlbWVudCA9PT0gbnVsbCB8fFxyXG4gICAgICBkb2N1bWVudC5tb3pGdWxsU2NyZWVuRWxlbWVudCA9PT0gbnVsbCkge1xyXG4gICAgdGhpcy5zZXRNb2RlXyhNb2Rlcy5OT1JNQUwpO1xyXG4gIH1cclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gV2ViVlJNYW5hZ2VyO1xyXG5cclxufSx7XCIuL2J1dHRvbi1tYW5hZ2VyLmpzXCI6MSxcIi4vZW1pdHRlci5qc1wiOjIsXCIuL21vZGVzLmpzXCI6MyxcIi4vdXRpbC5qc1wiOjR9XX0se30sWzVdKSg1KVxyXG59KTsiLCIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSh7MTpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XHJcbid1c2Ugc3RyaWN0JztcclxuLyogZXNsaW50LWRpc2FibGUgbm8tdW51c2VkLXZhcnMgKi9cclxudmFyIGhhc093blByb3BlcnR5ID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcclxudmFyIHByb3BJc0VudW1lcmFibGUgPSBPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlO1xyXG5cclxuZnVuY3Rpb24gdG9PYmplY3QodmFsKSB7XHJcblx0aWYgKHZhbCA9PT0gbnVsbCB8fCB2YWwgPT09IHVuZGVmaW5lZCkge1xyXG5cdFx0dGhyb3cgbmV3IFR5cGVFcnJvcignT2JqZWN0LmFzc2lnbiBjYW5ub3QgYmUgY2FsbGVkIHdpdGggbnVsbCBvciB1bmRlZmluZWQnKTtcclxuXHR9XHJcblxyXG5cdHJldHVybiBPYmplY3QodmFsKTtcclxufVxyXG5cclxuZnVuY3Rpb24gc2hvdWxkVXNlTmF0aXZlKCkge1xyXG5cdHRyeSB7XHJcblx0XHRpZiAoIU9iamVjdC5hc3NpZ24pIHtcclxuXHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIERldGVjdCBidWdneSBwcm9wZXJ0eSBlbnVtZXJhdGlvbiBvcmRlciBpbiBvbGRlciBWOCB2ZXJzaW9ucy5cclxuXHJcblx0XHQvLyBodHRwczovL2J1Z3MuY2hyb21pdW0ub3JnL3AvdjgvaXNzdWVzL2RldGFpbD9pZD00MTE4XHJcblx0XHR2YXIgdGVzdDEgPSBuZXcgU3RyaW5nKCdhYmMnKTsgIC8vIGVzbGludC1kaXNhYmxlLWxpbmVcclxuXHRcdHRlc3QxWzVdID0gJ2RlJztcclxuXHRcdGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh0ZXN0MSlbMF0gPT09ICc1Jykge1xyXG5cdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gaHR0cHM6Ly9idWdzLmNocm9taXVtLm9yZy9wL3Y4L2lzc3Vlcy9kZXRhaWw/aWQ9MzA1NlxyXG5cdFx0dmFyIHRlc3QyID0ge307XHJcblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IDEwOyBpKyspIHtcclxuXHRcdFx0dGVzdDJbJ18nICsgU3RyaW5nLmZyb21DaGFyQ29kZShpKV0gPSBpO1xyXG5cdFx0fVxyXG5cdFx0dmFyIG9yZGVyMiA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHRlc3QyKS5tYXAoZnVuY3Rpb24gKG4pIHtcclxuXHRcdFx0cmV0dXJuIHRlc3QyW25dO1xyXG5cdFx0fSk7XHJcblx0XHRpZiAob3JkZXIyLmpvaW4oJycpICE9PSAnMDEyMzQ1Njc4OScpIHtcclxuXHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIGh0dHBzOi8vYnVncy5jaHJvbWl1bS5vcmcvcC92OC9pc3N1ZXMvZGV0YWlsP2lkPTMwNTZcclxuXHRcdHZhciB0ZXN0MyA9IHt9O1xyXG5cdFx0J2FiY2RlZmdoaWprbG1ub3BxcnN0Jy5zcGxpdCgnJykuZm9yRWFjaChmdW5jdGlvbiAobGV0dGVyKSB7XHJcblx0XHRcdHRlc3QzW2xldHRlcl0gPSBsZXR0ZXI7XHJcblx0XHR9KTtcclxuXHRcdGlmIChPYmplY3Qua2V5cyhPYmplY3QuYXNzaWduKHt9LCB0ZXN0MykpLmpvaW4oJycpICE9PVxyXG5cdFx0XHRcdCdhYmNkZWZnaGlqa2xtbm9wcXJzdCcpIHtcclxuXHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiB0cnVlO1xyXG5cdH0gY2F0Y2ggKGUpIHtcclxuXHRcdC8vIFdlIGRvbid0IGV4cGVjdCBhbnkgb2YgdGhlIGFib3ZlIHRvIHRocm93LCBidXQgYmV0dGVyIHRvIGJlIHNhZmUuXHJcblx0XHRyZXR1cm4gZmFsc2U7XHJcblx0fVxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHNob3VsZFVzZU5hdGl2ZSgpID8gT2JqZWN0LmFzc2lnbiA6IGZ1bmN0aW9uICh0YXJnZXQsIHNvdXJjZSkge1xyXG5cdHZhciBmcm9tO1xyXG5cdHZhciB0byA9IHRvT2JqZWN0KHRhcmdldCk7XHJcblx0dmFyIHN5bWJvbHM7XHJcblxyXG5cdGZvciAodmFyIHMgPSAxOyBzIDwgYXJndW1lbnRzLmxlbmd0aDsgcysrKSB7XHJcblx0XHRmcm9tID0gT2JqZWN0KGFyZ3VtZW50c1tzXSk7XHJcblxyXG5cdFx0Zm9yICh2YXIga2V5IGluIGZyb20pIHtcclxuXHRcdFx0aWYgKGhhc093blByb3BlcnR5LmNhbGwoZnJvbSwga2V5KSkge1xyXG5cdFx0XHRcdHRvW2tleV0gPSBmcm9tW2tleV07XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykge1xyXG5cdFx0XHRzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhmcm9tKTtcclxuXHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBzeW1ib2xzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdFx0aWYgKHByb3BJc0VudW1lcmFibGUuY2FsbChmcm9tLCBzeW1ib2xzW2ldKSkge1xyXG5cdFx0XHRcdFx0dG9bc3ltYm9sc1tpXV0gPSBmcm9tW3N5bWJvbHNbaV1dO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0cmV0dXJuIHRvO1xyXG59O1xyXG5cclxufSx7fV0sMjpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XHJcbi8qXHJcbiAqIENvcHlyaWdodCAyMDE1IEdvb2dsZSBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuXHJcbnZhciBVdGlsID0gX2RlcmVxXygnLi91dGlsLmpzJyk7XHJcbnZhciBXYWtlTG9jayA9IF9kZXJlcV8oJy4vd2FrZWxvY2suanMnKTtcclxuXHJcbi8vIFN0YXJ0IGF0IGEgaGlnaGVyIG51bWJlciB0byByZWR1Y2UgY2hhbmNlIG9mIGNvbmZsaWN0LlxyXG52YXIgbmV4dERpc3BsYXlJZCA9IDEwMDA7XHJcbnZhciBoYXNTaG93RGVwcmVjYXRpb25XYXJuaW5nID0gZmFsc2U7XHJcblxyXG52YXIgZGVmYXVsdExlZnRCb3VuZHMgPSBbMCwgMCwgMC41LCAxXTtcclxudmFyIGRlZmF1bHRSaWdodEJvdW5kcyA9IFswLjUsIDAsIDAuNSwgMV07XHJcblxyXG4vKipcclxuICogVGhlIGJhc2UgY2xhc3MgZm9yIGFsbCBWUiBkaXNwbGF5cy5cclxuICovXHJcbmZ1bmN0aW9uIFZSRGlzcGxheSgpIHtcclxuICB0aGlzLmlzUG9seWZpbGxlZCA9IHRydWU7XHJcbiAgdGhpcy5kaXNwbGF5SWQgPSBuZXh0RGlzcGxheUlkKys7XHJcbiAgdGhpcy5kaXNwbGF5TmFtZSA9ICd3ZWJ2ci1wb2x5ZmlsbCBkaXNwbGF5TmFtZSc7XHJcblxyXG4gIHRoaXMuaXNDb25uZWN0ZWQgPSB0cnVlO1xyXG4gIHRoaXMuaXNQcmVzZW50aW5nID0gZmFsc2U7XHJcbiAgdGhpcy5jYXBhYmlsaXRpZXMgPSB7XHJcbiAgICBoYXNQb3NpdGlvbjogZmFsc2UsXHJcbiAgICBoYXNPcmllbnRhdGlvbjogZmFsc2UsXHJcbiAgICBoYXNFeHRlcm5hbERpc3BsYXk6IGZhbHNlLFxyXG4gICAgY2FuUHJlc2VudDogZmFsc2UsXHJcbiAgICBtYXhMYXllcnM6IDFcclxuICB9O1xyXG4gIHRoaXMuc3RhZ2VQYXJhbWV0ZXJzID0gbnVsbDtcclxuXHJcbiAgLy8gXCJQcml2YXRlXCIgbWVtYmVycy5cclxuICB0aGlzLndhaXRpbmdGb3JQcmVzZW50XyA9IGZhbHNlO1xyXG4gIHRoaXMubGF5ZXJfID0gbnVsbDtcclxuXHJcbiAgdGhpcy5mdWxsc2NyZWVuRWxlbWVudF8gPSBudWxsO1xyXG4gIHRoaXMuZnVsbHNjcmVlbldyYXBwZXJfID0gbnVsbDtcclxuICB0aGlzLmZ1bGxzY3JlZW5FbGVtZW50Q2FjaGVkU3R5bGVfID0gbnVsbDtcclxuXHJcbiAgdGhpcy5mdWxsc2NyZWVuRXZlbnRUYXJnZXRfID0gbnVsbDtcclxuICB0aGlzLmZ1bGxzY3JlZW5DaGFuZ2VIYW5kbGVyXyA9IG51bGw7XHJcbiAgdGhpcy5mdWxsc2NyZWVuRXJyb3JIYW5kbGVyXyA9IG51bGw7XHJcblxyXG4gIHRoaXMud2FrZWxvY2tfID0gbmV3IFdha2VMb2NrKCk7XHJcbn1cclxuXHJcblZSRGlzcGxheS5wcm90b3R5cGUuZ2V0UG9zZSA9IGZ1bmN0aW9uKCkge1xyXG4gIC8vIFRPRE86IFRlY2huaWNhbGx5IHRoaXMgc2hvdWxkIHJldGFpbiBpdCdzIHZhbHVlIGZvciB0aGUgZHVyYXRpb24gb2YgYSBmcmFtZVxyXG4gIC8vIGJ1dCBJIGRvdWJ0IHRoYXQncyBwcmFjdGljYWwgdG8gZG8gaW4gamF2YXNjcmlwdC5cclxuICByZXR1cm4gdGhpcy5nZXRJbW1lZGlhdGVQb3NlKCk7XHJcbn07XHJcblxyXG5WUkRpc3BsYXkucHJvdG90eXBlLnJlcXVlc3RBbmltYXRpb25GcmFtZSA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XHJcbiAgcmV0dXJuIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoY2FsbGJhY2spO1xyXG59O1xyXG5cclxuVlJEaXNwbGF5LnByb3RvdHlwZS5jYW5jZWxBbmltYXRpb25GcmFtZSA9IGZ1bmN0aW9uKGlkKSB7XHJcbiAgcmV0dXJuIHdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZShpZCk7XHJcbn07XHJcblxyXG5WUkRpc3BsYXkucHJvdG90eXBlLndyYXBGb3JGdWxsc2NyZWVuID0gZnVuY3Rpb24oZWxlbWVudCkge1xyXG4gIC8vIERvbid0IHdyYXAgaW4gaU9TLlxyXG4gIGlmIChVdGlsLmlzSU9TKCkpIHtcclxuICAgIHJldHVybiBlbGVtZW50O1xyXG4gIH1cclxuICBpZiAoIXRoaXMuZnVsbHNjcmVlbldyYXBwZXJfKSB7XHJcbiAgICB0aGlzLmZ1bGxzY3JlZW5XcmFwcGVyXyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgdmFyIGNzc1Byb3BlcnRpZXMgPSBbXHJcbiAgICAgICdoZWlnaHQ6ICcgKyBNYXRoLm1pbihzY3JlZW4uaGVpZ2h0LCBzY3JlZW4ud2lkdGgpICsgJ3B4ICFpbXBvcnRhbnQnLFxyXG4gICAgICAndG9wOiAwICFpbXBvcnRhbnQnLFxyXG4gICAgICAnbGVmdDogMCAhaW1wb3J0YW50JyxcclxuICAgICAgJ3JpZ2h0OiAwICFpbXBvcnRhbnQnLFxyXG4gICAgICAnYm9yZGVyOiAwJyxcclxuICAgICAgJ21hcmdpbjogMCcsXHJcbiAgICAgICdwYWRkaW5nOiAwJyxcclxuICAgICAgJ3otaW5kZXg6IDk5OTk5OSAhaW1wb3J0YW50JyxcclxuICAgICAgJ3Bvc2l0aW9uOiBmaXhlZCcsXHJcbiAgICBdO1xyXG4gICAgdGhpcy5mdWxsc2NyZWVuV3JhcHBlcl8uc2V0QXR0cmlidXRlKCdzdHlsZScsIGNzc1Byb3BlcnRpZXMuam9pbignOyAnKSArICc7Jyk7XHJcbiAgICB0aGlzLmZ1bGxzY3JlZW5XcmFwcGVyXy5jbGFzc0xpc3QuYWRkKCd3ZWJ2ci1wb2x5ZmlsbC1mdWxsc2NyZWVuLXdyYXBwZXInKTtcclxuICB9XHJcblxyXG4gIGlmICh0aGlzLmZ1bGxzY3JlZW5FbGVtZW50XyA9PSBlbGVtZW50KSB7XHJcbiAgICByZXR1cm4gdGhpcy5mdWxsc2NyZWVuV3JhcHBlcl87XHJcbiAgfVxyXG5cclxuICAvLyBSZW1vdmUgYW55IHByZXZpb3VzbHkgYXBwbGllZCB3cmFwcGVyc1xyXG4gIHRoaXMucmVtb3ZlRnVsbHNjcmVlbldyYXBwZXIoKTtcclxuXHJcbiAgdGhpcy5mdWxsc2NyZWVuRWxlbWVudF8gPSBlbGVtZW50O1xyXG4gIHZhciBwYXJlbnQgPSB0aGlzLmZ1bGxzY3JlZW5FbGVtZW50Xy5wYXJlbnRFbGVtZW50O1xyXG4gIHBhcmVudC5pbnNlcnRCZWZvcmUodGhpcy5mdWxsc2NyZWVuV3JhcHBlcl8sIHRoaXMuZnVsbHNjcmVlbkVsZW1lbnRfKTtcclxuICBwYXJlbnQucmVtb3ZlQ2hpbGQodGhpcy5mdWxsc2NyZWVuRWxlbWVudF8pO1xyXG4gIHRoaXMuZnVsbHNjcmVlbldyYXBwZXJfLmluc2VydEJlZm9yZSh0aGlzLmZ1bGxzY3JlZW5FbGVtZW50XywgdGhpcy5mdWxsc2NyZWVuV3JhcHBlcl8uZmlyc3RDaGlsZCk7XHJcbiAgdGhpcy5mdWxsc2NyZWVuRWxlbWVudENhY2hlZFN0eWxlXyA9IHRoaXMuZnVsbHNjcmVlbkVsZW1lbnRfLmdldEF0dHJpYnV0ZSgnc3R5bGUnKTtcclxuXHJcbiAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gIGZ1bmN0aW9uIGFwcGx5RnVsbHNjcmVlbkVsZW1lbnRTdHlsZSgpIHtcclxuICAgIGlmICghc2VsZi5mdWxsc2NyZWVuRWxlbWVudF8pIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBjc3NQcm9wZXJ0aWVzID0gW1xyXG4gICAgICAncG9zaXRpb246IGFic29sdXRlJyxcclxuICAgICAgJ3RvcDogMCcsXHJcbiAgICAgICdsZWZ0OiAwJyxcclxuICAgICAgJ3dpZHRoOiAnICsgTWF0aC5tYXgoc2NyZWVuLndpZHRoLCBzY3JlZW4uaGVpZ2h0KSArICdweCcsXHJcbiAgICAgICdoZWlnaHQ6ICcgKyBNYXRoLm1pbihzY3JlZW4uaGVpZ2h0LCBzY3JlZW4ud2lkdGgpICsgJ3B4JyxcclxuICAgICAgJ2JvcmRlcjogMCcsXHJcbiAgICAgICdtYXJnaW46IDAnLFxyXG4gICAgICAncGFkZGluZzogMCcsXHJcbiAgICBdO1xyXG4gICAgc2VsZi5mdWxsc2NyZWVuRWxlbWVudF8uc2V0QXR0cmlidXRlKCdzdHlsZScsIGNzc1Byb3BlcnRpZXMuam9pbignOyAnKSArICc7Jyk7XHJcbiAgfVxyXG5cclxuICBhcHBseUZ1bGxzY3JlZW5FbGVtZW50U3R5bGUoKTtcclxuXHJcbiAgcmV0dXJuIHRoaXMuZnVsbHNjcmVlbldyYXBwZXJfO1xyXG59O1xyXG5cclxuVlJEaXNwbGF5LnByb3RvdHlwZS5yZW1vdmVGdWxsc2NyZWVuV3JhcHBlciA9IGZ1bmN0aW9uKCkge1xyXG4gIGlmICghdGhpcy5mdWxsc2NyZWVuRWxlbWVudF8pIHtcclxuICAgIHJldHVybjtcclxuICB9XHJcblxyXG4gIHZhciBlbGVtZW50ID0gdGhpcy5mdWxsc2NyZWVuRWxlbWVudF87XHJcbiAgaWYgKHRoaXMuZnVsbHNjcmVlbkVsZW1lbnRDYWNoZWRTdHlsZV8pIHtcclxuICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCdzdHlsZScsIHRoaXMuZnVsbHNjcmVlbkVsZW1lbnRDYWNoZWRTdHlsZV8pO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBlbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSgnc3R5bGUnKTtcclxuICB9XHJcbiAgdGhpcy5mdWxsc2NyZWVuRWxlbWVudF8gPSBudWxsO1xyXG4gIHRoaXMuZnVsbHNjcmVlbkVsZW1lbnRDYWNoZWRTdHlsZV8gPSBudWxsO1xyXG5cclxuICB2YXIgcGFyZW50ID0gdGhpcy5mdWxsc2NyZWVuV3JhcHBlcl8ucGFyZW50RWxlbWVudDtcclxuICB0aGlzLmZ1bGxzY3JlZW5XcmFwcGVyXy5yZW1vdmVDaGlsZChlbGVtZW50KTtcclxuICBwYXJlbnQuaW5zZXJ0QmVmb3JlKGVsZW1lbnQsIHRoaXMuZnVsbHNjcmVlbldyYXBwZXJfKTtcclxuICBwYXJlbnQucmVtb3ZlQ2hpbGQodGhpcy5mdWxsc2NyZWVuV3JhcHBlcl8pO1xyXG5cclxuICByZXR1cm4gZWxlbWVudDtcclxufTtcclxuXHJcblZSRGlzcGxheS5wcm90b3R5cGUucmVxdWVzdFByZXNlbnQgPSBmdW5jdGlvbihsYXllcnMpIHtcclxuICB2YXIgd2FzUHJlc2VudGluZyA9IHRoaXMuaXNQcmVzZW50aW5nO1xyXG4gIHZhciBzZWxmID0gdGhpcztcclxuXHJcbiAgaWYgKCEobGF5ZXJzIGluc3RhbmNlb2YgQXJyYXkpKSB7XHJcbiAgICBpZiAoIWhhc1Nob3dEZXByZWNhdGlvbldhcm5pbmcpIHtcclxuICAgICAgY29uc29sZS53YXJuKFwiVXNpbmcgYSBkZXByZWNhdGVkIGZvcm0gb2YgcmVxdWVzdFByZXNlbnQuIFNob3VsZCBwYXNzIGluIGFuIGFycmF5IG9mIFZSTGF5ZXJzLlwiKTtcclxuICAgICAgaGFzU2hvd0RlcHJlY2F0aW9uV2FybmluZyA9IHRydWU7XHJcbiAgICB9XHJcbiAgICBsYXllcnMgPSBbbGF5ZXJzXTtcclxuICB9XHJcblxyXG4gIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcclxuICAgIGlmICghc2VsZi5jYXBhYmlsaXRpZXMuY2FuUHJlc2VudCkge1xyXG4gICAgICByZWplY3QobmV3IEVycm9yKCdWUkRpc3BsYXkgaXMgbm90IGNhcGFibGUgb2YgcHJlc2VudGluZy4nKSk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBpZiAobGF5ZXJzLmxlbmd0aCA9PSAwIHx8IGxheWVycy5sZW5ndGggPiBzZWxmLmNhcGFiaWxpdGllcy5tYXhMYXllcnMpIHtcclxuICAgICAgcmVqZWN0KG5ldyBFcnJvcignSW52YWxpZCBudW1iZXIgb2YgbGF5ZXJzLicpKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBpbmNvbWluZ0xheWVyID0gbGF5ZXJzWzBdO1xyXG4gICAgaWYgKCFpbmNvbWluZ0xheWVyLnNvdXJjZSkge1xyXG4gICAgICAvKlxyXG4gICAgICB0b2RvOiBmaWd1cmUgb3V0IHRoZSBjb3JyZWN0IGJlaGF2aW9yIGlmIHRoZSBzb3VyY2UgaXMgbm90IHByb3ZpZGVkLlxyXG4gICAgICBzZWUgaHR0cHM6Ly9naXRodWIuY29tL3czYy93ZWJ2ci9pc3N1ZXMvNThcclxuICAgICAgKi9cclxuICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIGxlZnRCb3VuZHMgPSBpbmNvbWluZ0xheWVyLmxlZnRCb3VuZHMgfHwgZGVmYXVsdExlZnRCb3VuZHM7XHJcbiAgICB2YXIgcmlnaHRCb3VuZHMgPSBpbmNvbWluZ0xheWVyLnJpZ2h0Qm91bmRzIHx8IGRlZmF1bHRSaWdodEJvdW5kcztcclxuICAgIGlmICh3YXNQcmVzZW50aW5nKSB7XHJcbiAgICAgIC8vIEFscmVhZHkgcHJlc2VudGluZywganVzdCBjaGFuZ2luZyBjb25maWd1cmF0aW9uXHJcbiAgICAgIHZhciBjaGFuZ2VkID0gZmFsc2U7XHJcbiAgICAgIHZhciBsYXllciA9IHNlbGYubGF5ZXJfO1xyXG4gICAgICBpZiAobGF5ZXIuc291cmNlICE9PSBpbmNvbWluZ0xheWVyLnNvdXJjZSkge1xyXG4gICAgICAgIGxheWVyLnNvdXJjZSA9IGluY29taW5nTGF5ZXIuc291cmNlO1xyXG4gICAgICAgIGNoYW5nZWQgPSB0cnVlO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDQ7IGkrKykge1xyXG4gICAgICAgIGlmIChsYXllci5sZWZ0Qm91bmRzW2ldICE9PSBsZWZ0Qm91bmRzW2ldKSB7XHJcbiAgICAgICAgICBsYXllci5sZWZ0Qm91bmRzW2ldID0gbGVmdEJvdW5kc1tpXTtcclxuICAgICAgICAgIGNoYW5nZWQgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobGF5ZXIucmlnaHRCb3VuZHNbaV0gIT09IHJpZ2h0Qm91bmRzW2ldKSB7XHJcbiAgICAgICAgICBsYXllci5yaWdodEJvdW5kc1tpXSA9IHJpZ2h0Qm91bmRzW2ldO1xyXG4gICAgICAgICAgY2hhbmdlZCA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoY2hhbmdlZCkge1xyXG4gICAgICAgIHNlbGYuZmlyZVZSRGlzcGxheVByZXNlbnRDaGFuZ2VfKCk7XHJcbiAgICAgIH1cclxuICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgLy8gV2FzIG5vdCBhbHJlYWR5IHByZXNlbnRpbmcuXHJcbiAgICBzZWxmLmxheWVyXyA9IHtcclxuICAgICAgcHJlZGlzdG9ydGVkOiBpbmNvbWluZ0xheWVyLnByZWRpc3RvcnRlZCxcclxuICAgICAgc291cmNlOiBpbmNvbWluZ0xheWVyLnNvdXJjZSxcclxuICAgICAgbGVmdEJvdW5kczogbGVmdEJvdW5kcy5zbGljZSgwKSxcclxuICAgICAgcmlnaHRCb3VuZHM6IHJpZ2h0Qm91bmRzLnNsaWNlKDApXHJcbiAgICB9O1xyXG5cclxuICAgIHNlbGYud2FpdGluZ0ZvclByZXNlbnRfID0gZmFsc2U7XHJcbiAgICBpZiAoc2VsZi5sYXllcl8gJiYgc2VsZi5sYXllcl8uc291cmNlKSB7XHJcbiAgICAgIHZhciBmdWxsc2NyZWVuRWxlbWVudCA9IHNlbGYud3JhcEZvckZ1bGxzY3JlZW4oc2VsZi5sYXllcl8uc291cmNlKTtcclxuXHJcbiAgICAgIGZ1bmN0aW9uIG9uRnVsbHNjcmVlbkNoYW5nZSgpIHtcclxuICAgICAgICB2YXIgYWN0dWFsRnVsbHNjcmVlbkVsZW1lbnQgPSBVdGlsLmdldEZ1bGxzY3JlZW5FbGVtZW50KCk7XHJcblxyXG4gICAgICAgIHNlbGYuaXNQcmVzZW50aW5nID0gKGZ1bGxzY3JlZW5FbGVtZW50ID09PSBhY3R1YWxGdWxsc2NyZWVuRWxlbWVudCk7XHJcbiAgICAgICAgaWYgKHNlbGYuaXNQcmVzZW50aW5nKSB7XHJcbiAgICAgICAgICBpZiAoc2NyZWVuLm9yaWVudGF0aW9uICYmIHNjcmVlbi5vcmllbnRhdGlvbi5sb2NrKSB7XHJcbiAgICAgICAgICAgIHNjcmVlbi5vcmllbnRhdGlvbi5sb2NrKCdsYW5kc2NhcGUtcHJpbWFyeScpLmNhdGNoKGZ1bmN0aW9uKGVycm9yKXtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdzY3JlZW4ub3JpZW50YXRpb24ubG9jaygpIGZhaWxlZCBkdWUgdG8nLCBlcnJvci5tZXNzYWdlKVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHNlbGYud2FpdGluZ0ZvclByZXNlbnRfID0gZmFsc2U7XHJcbiAgICAgICAgICBzZWxmLmJlZ2luUHJlc2VudF8oKTtcclxuICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgaWYgKHNjcmVlbi5vcmllbnRhdGlvbiAmJiBzY3JlZW4ub3JpZW50YXRpb24udW5sb2NrKSB7XHJcbiAgICAgICAgICAgIHNjcmVlbi5vcmllbnRhdGlvbi51bmxvY2soKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHNlbGYucmVtb3ZlRnVsbHNjcmVlbldyYXBwZXIoKTtcclxuICAgICAgICAgIHNlbGYud2FrZWxvY2tfLnJlbGVhc2UoKTtcclxuICAgICAgICAgIHNlbGYuZW5kUHJlc2VudF8oKTtcclxuICAgICAgICAgIHNlbGYucmVtb3ZlRnVsbHNjcmVlbkxpc3RlbmVyc18oKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgc2VsZi5maXJlVlJEaXNwbGF5UHJlc2VudENoYW5nZV8oKTtcclxuICAgICAgfVxyXG4gICAgICBmdW5jdGlvbiBvbkZ1bGxzY3JlZW5FcnJvcigpIHtcclxuICAgICAgICBpZiAoIXNlbGYud2FpdGluZ0ZvclByZXNlbnRfKSB7XHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzZWxmLnJlbW92ZUZ1bGxzY3JlZW5XcmFwcGVyKCk7XHJcbiAgICAgICAgc2VsZi5yZW1vdmVGdWxsc2NyZWVuTGlzdGVuZXJzXygpO1xyXG5cclxuICAgICAgICBzZWxmLndha2Vsb2NrXy5yZWxlYXNlKCk7XHJcbiAgICAgICAgc2VsZi53YWl0aW5nRm9yUHJlc2VudF8gPSBmYWxzZTtcclxuICAgICAgICBzZWxmLmlzUHJlc2VudGluZyA9IGZhbHNlO1xyXG5cclxuICAgICAgICByZWplY3QobmV3IEVycm9yKCdVbmFibGUgdG8gcHJlc2VudC4nKSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHNlbGYuYWRkRnVsbHNjcmVlbkxpc3RlbmVyc18oZnVsbHNjcmVlbkVsZW1lbnQsXHJcbiAgICAgICAgICBvbkZ1bGxzY3JlZW5DaGFuZ2UsIG9uRnVsbHNjcmVlbkVycm9yKTtcclxuXHJcbiAgICAgIGlmIChVdGlsLnJlcXVlc3RGdWxsc2NyZWVuKGZ1bGxzY3JlZW5FbGVtZW50KSkge1xyXG4gICAgICAgIHNlbGYud2FrZWxvY2tfLnJlcXVlc3QoKTtcclxuICAgICAgICBzZWxmLndhaXRpbmdGb3JQcmVzZW50XyA9IHRydWU7XHJcbiAgICAgIH0gZWxzZSBpZiAoVXRpbC5pc0lPUygpKSB7XHJcbiAgICAgICAgLy8gKnNpZ2gqIEp1c3QgZmFrZSBpdC5cclxuICAgICAgICBzZWxmLndha2Vsb2NrXy5yZXF1ZXN0KCk7XHJcbiAgICAgICAgc2VsZi5pc1ByZXNlbnRpbmcgPSB0cnVlO1xyXG4gICAgICAgIHNlbGYuYmVnaW5QcmVzZW50XygpO1xyXG4gICAgICAgIHNlbGYuZmlyZVZSRGlzcGxheVByZXNlbnRDaGFuZ2VfKCk7XHJcbiAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCFzZWxmLndhaXRpbmdGb3JQcmVzZW50XyAmJiAhVXRpbC5pc0lPUygpKSB7XHJcbiAgICAgIFV0aWwuZXhpdEZ1bGxzY3JlZW4oKTtcclxuICAgICAgcmVqZWN0KG5ldyBFcnJvcignVW5hYmxlIHRvIHByZXNlbnQuJykpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG59O1xyXG5cclxuVlJEaXNwbGF5LnByb3RvdHlwZS5leGl0UHJlc2VudCA9IGZ1bmN0aW9uKCkge1xyXG4gIHZhciB3YXNQcmVzZW50aW5nID0gdGhpcy5pc1ByZXNlbnRpbmc7XHJcbiAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gIHRoaXMuaXNQcmVzZW50aW5nID0gZmFsc2U7XHJcbiAgdGhpcy5sYXllcl8gPSBudWxsO1xyXG4gIHRoaXMud2FrZWxvY2tfLnJlbGVhc2UoKTtcclxuXHJcbiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgaWYgKHdhc1ByZXNlbnRpbmcpIHtcclxuICAgICAgaWYgKCFVdGlsLmV4aXRGdWxsc2NyZWVuKCkgJiYgVXRpbC5pc0lPUygpKSB7XHJcbiAgICAgICAgc2VsZi5lbmRQcmVzZW50XygpO1xyXG4gICAgICAgIHNlbGYuZmlyZVZSRGlzcGxheVByZXNlbnRDaGFuZ2VfKCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJlc29sdmUoKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJlamVjdChuZXcgRXJyb3IoJ1dhcyBub3QgcHJlc2VudGluZyB0byBWUkRpc3BsYXkuJykpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG59O1xyXG5cclxuVlJEaXNwbGF5LnByb3RvdHlwZS5nZXRMYXllcnMgPSBmdW5jdGlvbigpIHtcclxuICBpZiAodGhpcy5sYXllcl8pIHtcclxuICAgIHJldHVybiBbdGhpcy5sYXllcl9dO1xyXG4gIH1cclxuICByZXR1cm4gW107XHJcbn07XHJcblxyXG5WUkRpc3BsYXkucHJvdG90eXBlLmZpcmVWUkRpc3BsYXlQcmVzZW50Q2hhbmdlXyA9IGZ1bmN0aW9uKCkge1xyXG4gIHZhciBldmVudCA9IG5ldyBDdXN0b21FdmVudCgndnJkaXNwbGF5cHJlc2VudGNoYW5nZScsIHtkZXRhaWw6IHt2cmRpc3BsYXk6IHRoaXN9fSk7XHJcbiAgd2luZG93LmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xyXG59O1xyXG5cclxuVlJEaXNwbGF5LnByb3RvdHlwZS5hZGRGdWxsc2NyZWVuTGlzdGVuZXJzXyA9IGZ1bmN0aW9uKGVsZW1lbnQsIGNoYW5nZUhhbmRsZXIsIGVycm9ySGFuZGxlcikge1xyXG4gIHRoaXMucmVtb3ZlRnVsbHNjcmVlbkxpc3RlbmVyc18oKTtcclxuXHJcbiAgdGhpcy5mdWxsc2NyZWVuRXZlbnRUYXJnZXRfID0gZWxlbWVudDtcclxuICB0aGlzLmZ1bGxzY3JlZW5DaGFuZ2VIYW5kbGVyXyA9IGNoYW5nZUhhbmRsZXI7XHJcbiAgdGhpcy5mdWxsc2NyZWVuRXJyb3JIYW5kbGVyXyA9IGVycm9ySGFuZGxlcjtcclxuXHJcbiAgaWYgKGNoYW5nZUhhbmRsZXIpIHtcclxuICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignZnVsbHNjcmVlbmNoYW5nZScsIGNoYW5nZUhhbmRsZXIsIGZhbHNlKTtcclxuICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignd2Via2l0ZnVsbHNjcmVlbmNoYW5nZScsIGNoYW5nZUhhbmRsZXIsIGZhbHNlKTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vemZ1bGxzY3JlZW5jaGFuZ2UnLCBjaGFuZ2VIYW5kbGVyLCBmYWxzZSk7XHJcbiAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21zZnVsbHNjcmVlbmNoYW5nZScsIGNoYW5nZUhhbmRsZXIsIGZhbHNlKTtcclxuICB9XHJcblxyXG4gIGlmIChlcnJvckhhbmRsZXIpIHtcclxuICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignZnVsbHNjcmVlbmVycm9yJywgZXJyb3JIYW5kbGVyLCBmYWxzZSk7XHJcbiAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3dlYmtpdGZ1bGxzY3JlZW5lcnJvcicsIGVycm9ySGFuZGxlciwgZmFsc2UpO1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW96ZnVsbHNjcmVlbmVycm9yJywgZXJyb3JIYW5kbGVyLCBmYWxzZSk7XHJcbiAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21zZnVsbHNjcmVlbmVycm9yJywgZXJyb3JIYW5kbGVyLCBmYWxzZSk7XHJcbiAgfVxyXG59O1xyXG5cclxuVlJEaXNwbGF5LnByb3RvdHlwZS5yZW1vdmVGdWxsc2NyZWVuTGlzdGVuZXJzXyA9IGZ1bmN0aW9uKCkge1xyXG4gIGlmICghdGhpcy5mdWxsc2NyZWVuRXZlbnRUYXJnZXRfKVxyXG4gICAgcmV0dXJuO1xyXG5cclxuICB2YXIgZWxlbWVudCA9IHRoaXMuZnVsbHNjcmVlbkV2ZW50VGFyZ2V0XztcclxuXHJcbiAgaWYgKHRoaXMuZnVsbHNjcmVlbkNoYW5nZUhhbmRsZXJfKSB7XHJcbiAgICB2YXIgY2hhbmdlSGFuZGxlciA9IHRoaXMuZnVsbHNjcmVlbkNoYW5nZUhhbmRsZXJfO1xyXG4gICAgZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdmdWxsc2NyZWVuY2hhbmdlJywgY2hhbmdlSGFuZGxlciwgZmFsc2UpO1xyXG4gICAgZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCd3ZWJraXRmdWxsc2NyZWVuY2hhbmdlJywgY2hhbmdlSGFuZGxlciwgZmFsc2UpO1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW96ZnVsbHNjcmVlbmNoYW5nZScsIGNoYW5nZUhhbmRsZXIsIGZhbHNlKTtcclxuICAgIGVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbXNmdWxsc2NyZWVuY2hhbmdlJywgY2hhbmdlSGFuZGxlciwgZmFsc2UpO1xyXG4gIH1cclxuXHJcbiAgaWYgKHRoaXMuZnVsbHNjcmVlbkVycm9ySGFuZGxlcl8pIHtcclxuICAgIHZhciBlcnJvckhhbmRsZXIgPSB0aGlzLmZ1bGxzY3JlZW5FcnJvckhhbmRsZXJfO1xyXG4gICAgZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdmdWxsc2NyZWVuZXJyb3InLCBlcnJvckhhbmRsZXIsIGZhbHNlKTtcclxuICAgIGVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignd2Via2l0ZnVsbHNjcmVlbmVycm9yJywgZXJyb3JIYW5kbGVyLCBmYWxzZSk7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3pmdWxsc2NyZWVuZXJyb3InLCBlcnJvckhhbmRsZXIsIGZhbHNlKTtcclxuICAgIGVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbXNmdWxsc2NyZWVuZXJyb3InLCBlcnJvckhhbmRsZXIsIGZhbHNlKTtcclxuICB9XHJcblxyXG4gIHRoaXMuZnVsbHNjcmVlbkV2ZW50VGFyZ2V0XyA9IG51bGw7XHJcbiAgdGhpcy5mdWxsc2NyZWVuQ2hhbmdlSGFuZGxlcl8gPSBudWxsO1xyXG4gIHRoaXMuZnVsbHNjcmVlbkVycm9ySGFuZGxlcl8gPSBudWxsO1xyXG59O1xyXG5cclxuVlJEaXNwbGF5LnByb3RvdHlwZS5iZWdpblByZXNlbnRfID0gZnVuY3Rpb24oKSB7XHJcbiAgLy8gT3ZlcnJpZGUgdG8gYWRkIGN1c3RvbSBiZWhhdmlvciB3aGVuIHByZXNlbnRhdGlvbiBiZWdpbnMuXHJcbn07XHJcblxyXG5WUkRpc3BsYXkucHJvdG90eXBlLmVuZFByZXNlbnRfID0gZnVuY3Rpb24oKSB7XHJcbiAgLy8gT3ZlcnJpZGUgdG8gYWRkIGN1c3RvbSBiZWhhdmlvciB3aGVuIHByZXNlbnRhdGlvbiBlbmRzLlxyXG59O1xyXG5cclxuVlJEaXNwbGF5LnByb3RvdHlwZS5zdWJtaXRGcmFtZSA9IGZ1bmN0aW9uKHBvc2UpIHtcclxuICAvLyBPdmVycmlkZSB0byBhZGQgY3VzdG9tIGJlaGF2aW9yIGZvciBmcmFtZSBzdWJtaXNzaW9uLlxyXG59O1xyXG5cclxuVlJEaXNwbGF5LnByb3RvdHlwZS5nZXRFeWVQYXJhbWV0ZXJzID0gZnVuY3Rpb24od2hpY2hFeWUpIHtcclxuICAvLyBPdmVycmlkZSB0byByZXR1cm4gYWNjdXJhdGUgZXllIHBhcmFtZXRlcnMgaWYgY2FuUHJlc2VudCBpcyB0cnVlLlxyXG4gIHJldHVybiBudWxsO1xyXG59O1xyXG5cclxuLypcclxuICogRGVwcmVjYXRlZCBjbGFzc2VzXHJcbiAqL1xyXG5cclxuLyoqXHJcbiAqIFRoZSBiYXNlIGNsYXNzIGZvciBhbGwgVlIgZGV2aWNlcy4gKERlcHJlY2F0ZWQpXHJcbiAqL1xyXG5mdW5jdGlvbiBWUkRldmljZSgpIHtcclxuICB0aGlzLmlzUG9seWZpbGxlZCA9IHRydWU7XHJcbiAgdGhpcy5oYXJkd2FyZVVuaXRJZCA9ICd3ZWJ2ci1wb2x5ZmlsbCBoYXJkd2FyZVVuaXRJZCc7XHJcbiAgdGhpcy5kZXZpY2VJZCA9ICd3ZWJ2ci1wb2x5ZmlsbCBkZXZpY2VJZCc7XHJcbiAgdGhpcy5kZXZpY2VOYW1lID0gJ3dlYnZyLXBvbHlmaWxsIGRldmljZU5hbWUnO1xyXG59XHJcblxyXG4vKipcclxuICogVGhlIGJhc2UgY2xhc3MgZm9yIGFsbCBWUiBITUQgZGV2aWNlcy4gKERlcHJlY2F0ZWQpXHJcbiAqL1xyXG5mdW5jdGlvbiBITURWUkRldmljZSgpIHtcclxufVxyXG5ITURWUkRldmljZS5wcm90b3R5cGUgPSBuZXcgVlJEZXZpY2UoKTtcclxuXHJcbi8qKlxyXG4gKiBUaGUgYmFzZSBjbGFzcyBmb3IgYWxsIFZSIHBvc2l0aW9uIHNlbnNvciBkZXZpY2VzLiAoRGVwcmVjYXRlZClcclxuICovXHJcbmZ1bmN0aW9uIFBvc2l0aW9uU2Vuc29yVlJEZXZpY2UoKSB7XHJcbn1cclxuUG9zaXRpb25TZW5zb3JWUkRldmljZS5wcm90b3R5cGUgPSBuZXcgVlJEZXZpY2UoKTtcclxuXHJcbm1vZHVsZS5leHBvcnRzLlZSRGlzcGxheSA9IFZSRGlzcGxheTtcclxubW9kdWxlLmV4cG9ydHMuVlJEZXZpY2UgPSBWUkRldmljZTtcclxubW9kdWxlLmV4cG9ydHMuSE1EVlJEZXZpY2UgPSBITURWUkRldmljZTtcclxubW9kdWxlLmV4cG9ydHMuUG9zaXRpb25TZW5zb3JWUkRldmljZSA9IFBvc2l0aW9uU2Vuc29yVlJEZXZpY2U7XHJcblxyXG59LHtcIi4vdXRpbC5qc1wiOjIyLFwiLi93YWtlbG9jay5qc1wiOjI0fV0sMzpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XHJcbi8qXHJcbiAqIENvcHlyaWdodCAyMDE2IEdvb2dsZSBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuXHJcbnZhciBDYXJkYm9hcmRVSSA9IF9kZXJlcV8oJy4vY2FyZGJvYXJkLXVpLmpzJyk7XHJcbnZhciBVdGlsID0gX2RlcmVxXygnLi91dGlsLmpzJyk7XHJcbnZhciBXR0xVUHJlc2VydmVHTFN0YXRlID0gX2RlcmVxXygnLi9kZXBzL3dnbHUtcHJlc2VydmUtc3RhdGUuanMnKTtcclxuXHJcbnZhciBkaXN0b3J0aW9uVlMgPSBbXHJcbiAgJ2F0dHJpYnV0ZSB2ZWMyIHBvc2l0aW9uOycsXHJcbiAgJ2F0dHJpYnV0ZSB2ZWMzIHRleENvb3JkOycsXHJcblxyXG4gICd2YXJ5aW5nIHZlYzIgdlRleENvb3JkOycsXHJcblxyXG4gICd1bmlmb3JtIHZlYzQgdmlld3BvcnRPZmZzZXRTY2FsZVsyXTsnLFxyXG5cclxuICAndm9pZCBtYWluKCkgeycsXHJcbiAgJyAgdmVjNCB2aWV3cG9ydCA9IHZpZXdwb3J0T2Zmc2V0U2NhbGVbaW50KHRleENvb3JkLnopXTsnLFxyXG4gICcgIHZUZXhDb29yZCA9ICh0ZXhDb29yZC54eSAqIHZpZXdwb3J0Lnp3KSArIHZpZXdwb3J0Lnh5OycsXHJcbiAgJyAgZ2xfUG9zaXRpb24gPSB2ZWM0KCBwb3NpdGlvbiwgMS4wLCAxLjAgKTsnLFxyXG4gICd9JyxcclxuXS5qb2luKCdcXG4nKTtcclxuXHJcbnZhciBkaXN0b3J0aW9uRlMgPSBbXHJcbiAgJ3ByZWNpc2lvbiBtZWRpdW1wIGZsb2F0OycsXHJcbiAgJ3VuaWZvcm0gc2FtcGxlcjJEIGRpZmZ1c2U7JyxcclxuXHJcbiAgJ3ZhcnlpbmcgdmVjMiB2VGV4Q29vcmQ7JyxcclxuXHJcbiAgJ3ZvaWQgbWFpbigpIHsnLFxyXG4gICcgIGdsX0ZyYWdDb2xvciA9IHRleHR1cmUyRChkaWZmdXNlLCB2VGV4Q29vcmQpOycsXHJcbiAgJ30nLFxyXG5dLmpvaW4oJ1xcbicpO1xyXG5cclxuLyoqXHJcbiAqIEEgbWVzaC1iYXNlZCBkaXN0b3J0ZXIuXHJcbiAqL1xyXG5mdW5jdGlvbiBDYXJkYm9hcmREaXN0b3J0ZXIoZ2wpIHtcclxuICB0aGlzLmdsID0gZ2w7XHJcbiAgdGhpcy5jdHhBdHRyaWJzID0gZ2wuZ2V0Q29udGV4dEF0dHJpYnV0ZXMoKTtcclxuXHJcbiAgdGhpcy5tZXNoV2lkdGggPSAyMDtcclxuICB0aGlzLm1lc2hIZWlnaHQgPSAyMDtcclxuXHJcbiAgdGhpcy5idWZmZXJTY2FsZSA9IFdlYlZSQ29uZmlnLkJVRkZFUl9TQ0FMRTtcclxuXHJcbiAgdGhpcy5idWZmZXJXaWR0aCA9IGdsLmRyYXdpbmdCdWZmZXJXaWR0aDtcclxuICB0aGlzLmJ1ZmZlckhlaWdodCA9IGdsLmRyYXdpbmdCdWZmZXJIZWlnaHQ7XHJcblxyXG4gIC8vIFBhdGNoaW5nIHN1cHBvcnRcclxuICB0aGlzLnJlYWxCaW5kRnJhbWVidWZmZXIgPSBnbC5iaW5kRnJhbWVidWZmZXI7XHJcbiAgdGhpcy5yZWFsRW5hYmxlID0gZ2wuZW5hYmxlO1xyXG4gIHRoaXMucmVhbERpc2FibGUgPSBnbC5kaXNhYmxlO1xyXG4gIHRoaXMucmVhbENvbG9yTWFzayA9IGdsLmNvbG9yTWFzaztcclxuICB0aGlzLnJlYWxDbGVhckNvbG9yID0gZ2wuY2xlYXJDb2xvcjtcclxuICB0aGlzLnJlYWxWaWV3cG9ydCA9IGdsLnZpZXdwb3J0O1xyXG5cclxuICBpZiAoIVV0aWwuaXNJT1MoKSkge1xyXG4gICAgdGhpcy5yZWFsQ2FudmFzV2lkdGggPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGdsLmNhbnZhcy5fX3Byb3RvX18sICd3aWR0aCcpO1xyXG4gICAgdGhpcy5yZWFsQ2FudmFzSGVpZ2h0ID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihnbC5jYW52YXMuX19wcm90b19fLCAnaGVpZ2h0Jyk7XHJcbiAgfVxyXG5cclxuICB0aGlzLmlzUGF0Y2hlZCA9IGZhbHNlO1xyXG5cclxuICAvLyBTdGF0ZSB0cmFja2luZ1xyXG4gIHRoaXMubGFzdEJvdW5kRnJhbWVidWZmZXIgPSBudWxsO1xyXG4gIHRoaXMuY3VsbEZhY2UgPSBmYWxzZTtcclxuICB0aGlzLmRlcHRoVGVzdCA9IGZhbHNlO1xyXG4gIHRoaXMuYmxlbmQgPSBmYWxzZTtcclxuICB0aGlzLnNjaXNzb3JUZXN0ID0gZmFsc2U7XHJcbiAgdGhpcy5zdGVuY2lsVGVzdCA9IGZhbHNlO1xyXG4gIHRoaXMudmlld3BvcnQgPSBbMCwgMCwgMCwgMF07XHJcbiAgdGhpcy5jb2xvck1hc2sgPSBbdHJ1ZSwgdHJ1ZSwgdHJ1ZSwgdHJ1ZV07XHJcbiAgdGhpcy5jbGVhckNvbG9yID0gWzAsIDAsIDAsIDBdO1xyXG5cclxuICB0aGlzLmF0dHJpYnMgPSB7XHJcbiAgICBwb3NpdGlvbjogMCxcclxuICAgIHRleENvb3JkOiAxXHJcbiAgfTtcclxuICB0aGlzLnByb2dyYW0gPSBVdGlsLmxpbmtQcm9ncmFtKGdsLCBkaXN0b3J0aW9uVlMsIGRpc3RvcnRpb25GUywgdGhpcy5hdHRyaWJzKTtcclxuICB0aGlzLnVuaWZvcm1zID0gVXRpbC5nZXRQcm9ncmFtVW5pZm9ybXMoZ2wsIHRoaXMucHJvZ3JhbSk7XHJcblxyXG4gIHRoaXMudmlld3BvcnRPZmZzZXRTY2FsZSA9IG5ldyBGbG9hdDMyQXJyYXkoOCk7XHJcbiAgdGhpcy5zZXRUZXh0dXJlQm91bmRzKCk7XHJcblxyXG4gIHRoaXMudmVydGV4QnVmZmVyID0gZ2wuY3JlYXRlQnVmZmVyKCk7XHJcbiAgdGhpcy5pbmRleEJ1ZmZlciA9IGdsLmNyZWF0ZUJ1ZmZlcigpO1xyXG4gIHRoaXMuaW5kZXhDb3VudCA9IDA7XHJcblxyXG4gIHRoaXMucmVuZGVyVGFyZ2V0ID0gZ2wuY3JlYXRlVGV4dHVyZSgpO1xyXG4gIHRoaXMuZnJhbWVidWZmZXIgPSBnbC5jcmVhdGVGcmFtZWJ1ZmZlcigpO1xyXG5cclxuICB0aGlzLmRlcHRoU3RlbmNpbEJ1ZmZlciA9IG51bGw7XHJcbiAgdGhpcy5kZXB0aEJ1ZmZlciA9IG51bGw7XHJcbiAgdGhpcy5zdGVuY2lsQnVmZmVyID0gbnVsbDtcclxuXHJcbiAgaWYgKHRoaXMuY3R4QXR0cmlicy5kZXB0aCAmJiB0aGlzLmN0eEF0dHJpYnMuc3RlbmNpbCkge1xyXG4gICAgdGhpcy5kZXB0aFN0ZW5jaWxCdWZmZXIgPSBnbC5jcmVhdGVSZW5kZXJidWZmZXIoKTtcclxuICB9IGVsc2UgaWYgKHRoaXMuY3R4QXR0cmlicy5kZXB0aCkge1xyXG4gICAgdGhpcy5kZXB0aEJ1ZmZlciA9IGdsLmNyZWF0ZVJlbmRlcmJ1ZmZlcigpO1xyXG4gIH0gZWxzZSBpZiAodGhpcy5jdHhBdHRyaWJzLnN0ZW5jaWwpIHtcclxuICAgIHRoaXMuc3RlbmNpbEJ1ZmZlciA9IGdsLmNyZWF0ZVJlbmRlcmJ1ZmZlcigpO1xyXG4gIH1cclxuXHJcbiAgdGhpcy5wYXRjaCgpO1xyXG5cclxuICB0aGlzLm9uUmVzaXplKCk7XHJcblxyXG4gIGlmICghV2ViVlJDb25maWcuQ0FSREJPQVJEX1VJX0RJU0FCTEVEKSB7XHJcbiAgICB0aGlzLmNhcmRib2FyZFVJID0gbmV3IENhcmRib2FyZFVJKGdsKTtcclxuICB9XHJcbn07XHJcblxyXG4vKipcclxuICogVGVhcnMgZG93biBhbGwgdGhlIHJlc291cmNlcyBjcmVhdGVkIGJ5IHRoZSBkaXN0b3J0ZXIgYW5kIHJlbW92ZXMgYW55XHJcbiAqIHBhdGNoZXMuXHJcbiAqL1xyXG5DYXJkYm9hcmREaXN0b3J0ZXIucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbigpIHtcclxuICB2YXIgZ2wgPSB0aGlzLmdsO1xyXG5cclxuICB0aGlzLnVucGF0Y2goKTtcclxuXHJcbiAgZ2wuZGVsZXRlUHJvZ3JhbSh0aGlzLnByb2dyYW0pO1xyXG4gIGdsLmRlbGV0ZUJ1ZmZlcih0aGlzLnZlcnRleEJ1ZmZlcik7XHJcbiAgZ2wuZGVsZXRlQnVmZmVyKHRoaXMuaW5kZXhCdWZmZXIpO1xyXG4gIGdsLmRlbGV0ZVRleHR1cmUodGhpcy5yZW5kZXJUYXJnZXQpO1xyXG4gIGdsLmRlbGV0ZUZyYW1lYnVmZmVyKHRoaXMuZnJhbWVidWZmZXIpO1xyXG4gIGlmICh0aGlzLmRlcHRoU3RlbmNpbEJ1ZmZlcikge1xyXG4gICAgZ2wuZGVsZXRlUmVuZGVyYnVmZmVyKHRoaXMuZGVwdGhTdGVuY2lsQnVmZmVyKTtcclxuICB9XHJcbiAgaWYgKHRoaXMuZGVwdGhCdWZmZXIpIHtcclxuICAgIGdsLmRlbGV0ZVJlbmRlcmJ1ZmZlcih0aGlzLmRlcHRoQnVmZmVyKTtcclxuICB9XHJcbiAgaWYgKHRoaXMuc3RlbmNpbEJ1ZmZlcikge1xyXG4gICAgZ2wuZGVsZXRlUmVuZGVyYnVmZmVyKHRoaXMuc3RlbmNpbEJ1ZmZlcik7XHJcbiAgfVxyXG5cclxuICBpZiAodGhpcy5jYXJkYm9hcmRVSSkge1xyXG4gICAgdGhpcy5jYXJkYm9hcmRVSS5kZXN0cm95KCk7XHJcbiAgfVxyXG59O1xyXG5cclxuXHJcbi8qKlxyXG4gKiBSZXNpemVzIHRoZSBiYWNrYnVmZmVyIHRvIG1hdGNoIHRoZSBjYW52YXMgd2lkdGggYW5kIGhlaWdodC5cclxuICovXHJcbkNhcmRib2FyZERpc3RvcnRlci5wcm90b3R5cGUub25SZXNpemUgPSBmdW5jdGlvbigpIHtcclxuICB2YXIgZ2wgPSB0aGlzLmdsO1xyXG4gIHZhciBzZWxmID0gdGhpcztcclxuXHJcbiAgdmFyIGdsU3RhdGUgPSBbXHJcbiAgICBnbC5SRU5ERVJCVUZGRVJfQklORElORyxcclxuICAgIGdsLlRFWFRVUkVfQklORElOR18yRCwgZ2wuVEVYVFVSRTBcclxuICBdO1xyXG5cclxuICBXR0xVUHJlc2VydmVHTFN0YXRlKGdsLCBnbFN0YXRlLCBmdW5jdGlvbihnbCkge1xyXG4gICAgLy8gQmluZCByZWFsIGJhY2tidWZmZXIgYW5kIGNsZWFyIGl0IG9uY2UuIFdlIGRvbid0IG5lZWQgdG8gY2xlYXIgaXQgYWdhaW5cclxuICAgIC8vIGFmdGVyIHRoYXQgYmVjYXVzZSB3ZSdyZSBvdmVyd3JpdGluZyB0aGUgc2FtZSBhcmVhIGV2ZXJ5IGZyYW1lLlxyXG4gICAgc2VsZi5yZWFsQmluZEZyYW1lYnVmZmVyLmNhbGwoZ2wsIGdsLkZSQU1FQlVGRkVSLCBudWxsKTtcclxuXHJcbiAgICAvLyBQdXQgdGhpbmdzIGluIGEgZ29vZCBzdGF0ZVxyXG4gICAgaWYgKHNlbGYuc2Npc3NvclRlc3QpIHsgc2VsZi5yZWFsRGlzYWJsZS5jYWxsKGdsLCBnbC5TQ0lTU09SX1RFU1QpOyB9XHJcbiAgICBzZWxmLnJlYWxDb2xvck1hc2suY2FsbChnbCwgdHJ1ZSwgdHJ1ZSwgdHJ1ZSwgdHJ1ZSk7XHJcbiAgICBzZWxmLnJlYWxWaWV3cG9ydC5jYWxsKGdsLCAwLCAwLCBnbC5kcmF3aW5nQnVmZmVyV2lkdGgsIGdsLmRyYXdpbmdCdWZmZXJIZWlnaHQpO1xyXG4gICAgc2VsZi5yZWFsQ2xlYXJDb2xvci5jYWxsKGdsLCAwLCAwLCAwLCAxKTtcclxuXHJcbiAgICBnbC5jbGVhcihnbC5DT0xPUl9CVUZGRVJfQklUKTtcclxuXHJcbiAgICAvLyBOb3cgYmluZCBhbmQgcmVzaXplIHRoZSBmYWtlIGJhY2tidWZmZXJcclxuICAgIHNlbGYucmVhbEJpbmRGcmFtZWJ1ZmZlci5jYWxsKGdsLCBnbC5GUkFNRUJVRkZFUiwgc2VsZi5mcmFtZWJ1ZmZlcik7XHJcblxyXG4gICAgZ2wuYmluZFRleHR1cmUoZ2wuVEVYVFVSRV8yRCwgc2VsZi5yZW5kZXJUYXJnZXQpO1xyXG4gICAgZ2wudGV4SW1hZ2UyRChnbC5URVhUVVJFXzJELCAwLCBzZWxmLmN0eEF0dHJpYnMuYWxwaGEgPyBnbC5SR0JBIDogZ2wuUkdCLFxyXG4gICAgICAgIHNlbGYuYnVmZmVyV2lkdGgsIHNlbGYuYnVmZmVySGVpZ2h0LCAwLFxyXG4gICAgICAgIHNlbGYuY3R4QXR0cmlicy5hbHBoYSA/IGdsLlJHQkEgOiBnbC5SR0IsIGdsLlVOU0lHTkVEX0JZVEUsIG51bGwpO1xyXG4gICAgZ2wudGV4UGFyYW1ldGVyaShnbC5URVhUVVJFXzJELCBnbC5URVhUVVJFX01BR19GSUxURVIsIGdsLkxJTkVBUik7XHJcbiAgICBnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkQsIGdsLlRFWFRVUkVfTUlOX0ZJTFRFUiwgZ2wuTElORUFSKTtcclxuICAgIGdsLnRleFBhcmFtZXRlcmkoZ2wuVEVYVFVSRV8yRCwgZ2wuVEVYVFVSRV9XUkFQX1MsIGdsLkNMQU1QX1RPX0VER0UpO1xyXG4gICAgZ2wudGV4UGFyYW1ldGVyaShnbC5URVhUVVJFXzJELCBnbC5URVhUVVJFX1dSQVBfVCwgZ2wuQ0xBTVBfVE9fRURHRSk7XHJcbiAgICBnbC5mcmFtZWJ1ZmZlclRleHR1cmUyRChnbC5GUkFNRUJVRkZFUiwgZ2wuQ09MT1JfQVRUQUNITUVOVDAsIGdsLlRFWFRVUkVfMkQsIHNlbGYucmVuZGVyVGFyZ2V0LCAwKTtcclxuXHJcbiAgICBpZiAoc2VsZi5jdHhBdHRyaWJzLmRlcHRoICYmIHNlbGYuY3R4QXR0cmlicy5zdGVuY2lsKSB7XHJcbiAgICAgIGdsLmJpbmRSZW5kZXJidWZmZXIoZ2wuUkVOREVSQlVGRkVSLCBzZWxmLmRlcHRoU3RlbmNpbEJ1ZmZlcik7XHJcbiAgICAgIGdsLnJlbmRlcmJ1ZmZlclN0b3JhZ2UoZ2wuUkVOREVSQlVGRkVSLCBnbC5ERVBUSF9TVEVOQ0lMLFxyXG4gICAgICAgICAgc2VsZi5idWZmZXJXaWR0aCwgc2VsZi5idWZmZXJIZWlnaHQpO1xyXG4gICAgICBnbC5mcmFtZWJ1ZmZlclJlbmRlcmJ1ZmZlcihnbC5GUkFNRUJVRkZFUiwgZ2wuREVQVEhfU1RFTkNJTF9BVFRBQ0hNRU5ULFxyXG4gICAgICAgICAgZ2wuUkVOREVSQlVGRkVSLCBzZWxmLmRlcHRoU3RlbmNpbEJ1ZmZlcik7XHJcbiAgICB9IGVsc2UgaWYgKHNlbGYuY3R4QXR0cmlicy5kZXB0aCkge1xyXG4gICAgICBnbC5iaW5kUmVuZGVyYnVmZmVyKGdsLlJFTkRFUkJVRkZFUiwgc2VsZi5kZXB0aEJ1ZmZlcik7XHJcbiAgICAgIGdsLnJlbmRlcmJ1ZmZlclN0b3JhZ2UoZ2wuUkVOREVSQlVGRkVSLCBnbC5ERVBUSF9DT01QT05FTlQxNixcclxuICAgICAgICAgIHNlbGYuYnVmZmVyV2lkdGgsIHNlbGYuYnVmZmVySGVpZ2h0KTtcclxuICAgICAgZ2wuZnJhbWVidWZmZXJSZW5kZXJidWZmZXIoZ2wuRlJBTUVCVUZGRVIsIGdsLkRFUFRIX0FUVEFDSE1FTlQsXHJcbiAgICAgICAgICBnbC5SRU5ERVJCVUZGRVIsIHNlbGYuZGVwdGhCdWZmZXIpO1xyXG4gICAgfSBlbHNlIGlmIChzZWxmLmN0eEF0dHJpYnMuc3RlbmNpbCkge1xyXG4gICAgICBnbC5iaW5kUmVuZGVyYnVmZmVyKGdsLlJFTkRFUkJVRkZFUiwgc2VsZi5zdGVuY2lsQnVmZmVyKTtcclxuICAgICAgZ2wucmVuZGVyYnVmZmVyU3RvcmFnZShnbC5SRU5ERVJCVUZGRVIsIGdsLlNURU5DSUxfSU5ERVg4LFxyXG4gICAgICAgICAgc2VsZi5idWZmZXJXaWR0aCwgc2VsZi5idWZmZXJIZWlnaHQpO1xyXG4gICAgICBnbC5mcmFtZWJ1ZmZlclJlbmRlcmJ1ZmZlcihnbC5GUkFNRUJVRkZFUiwgZ2wuU1RFTkNJTF9BVFRBQ0hNRU5ULFxyXG4gICAgICAgICAgZ2wuUkVOREVSQlVGRkVSLCBzZWxmLnN0ZW5jaWxCdWZmZXIpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICghZ2wuY2hlY2tGcmFtZWJ1ZmZlclN0YXR1cyhnbC5GUkFNRUJVRkZFUikgPT09IGdsLkZSQU1FQlVGRkVSX0NPTVBMRVRFKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZyYW1lYnVmZmVyIGluY29tcGxldGUhJyk7XHJcbiAgICB9XHJcblxyXG4gICAgc2VsZi5yZWFsQmluZEZyYW1lYnVmZmVyLmNhbGwoZ2wsIGdsLkZSQU1FQlVGRkVSLCBzZWxmLmxhc3RCb3VuZEZyYW1lYnVmZmVyKTtcclxuXHJcbiAgICBpZiAoc2VsZi5zY2lzc29yVGVzdCkgeyBzZWxmLnJlYWxFbmFibGUuY2FsbChnbCwgZ2wuU0NJU1NPUl9URVNUKTsgfVxyXG5cclxuICAgIHNlbGYucmVhbENvbG9yTWFzay5hcHBseShnbCwgc2VsZi5jb2xvck1hc2spO1xyXG4gICAgc2VsZi5yZWFsVmlld3BvcnQuYXBwbHkoZ2wsIHNlbGYudmlld3BvcnQpO1xyXG4gICAgc2VsZi5yZWFsQ2xlYXJDb2xvci5hcHBseShnbCwgc2VsZi5jbGVhckNvbG9yKTtcclxuICB9KTtcclxuXHJcbiAgaWYgKHRoaXMuY2FyZGJvYXJkVUkpIHtcclxuICAgIHRoaXMuY2FyZGJvYXJkVUkub25SZXNpemUoKTtcclxuICB9XHJcbn07XHJcblxyXG5DYXJkYm9hcmREaXN0b3J0ZXIucHJvdG90eXBlLnBhdGNoID0gZnVuY3Rpb24oKSB7XHJcbiAgaWYgKHRoaXMuaXNQYXRjaGVkKSB7XHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG5cclxuICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgdmFyIGNhbnZhcyA9IHRoaXMuZ2wuY2FudmFzO1xyXG4gIHZhciBnbCA9IHRoaXMuZ2w7XHJcblxyXG4gIGlmICghVXRpbC5pc0lPUygpKSB7XHJcbiAgICBjYW52YXMud2lkdGggPSBVdGlsLmdldFNjcmVlbldpZHRoKCkgKiB0aGlzLmJ1ZmZlclNjYWxlO1xyXG4gICAgY2FudmFzLmhlaWdodCA9IFV0aWwuZ2V0U2NyZWVuSGVpZ2h0KCkgKiB0aGlzLmJ1ZmZlclNjYWxlO1xyXG5cclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjYW52YXMsICd3aWR0aCcsIHtcclxuICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxyXG4gICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiBzZWxmLmJ1ZmZlcldpZHRoO1xyXG4gICAgICB9LFxyXG4gICAgICBzZXQ6IGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICAgICAgc2VsZi5idWZmZXJXaWR0aCA9IHZhbHVlO1xyXG4gICAgICAgIHNlbGYub25SZXNpemUoKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGNhbnZhcywgJ2hlaWdodCcsIHtcclxuICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxyXG4gICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiBzZWxmLmJ1ZmZlckhlaWdodDtcclxuICAgICAgfSxcclxuICAgICAgc2V0OiBmdW5jdGlvbih2YWx1ZSkge1xyXG4gICAgICAgIHNlbGYuYnVmZmVySGVpZ2h0ID0gdmFsdWU7XHJcbiAgICAgICAgc2VsZi5vblJlc2l6ZSgpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHRoaXMubGFzdEJvdW5kRnJhbWVidWZmZXIgPSBnbC5nZXRQYXJhbWV0ZXIoZ2wuRlJBTUVCVUZGRVJfQklORElORyk7XHJcblxyXG4gIGlmICh0aGlzLmxhc3RCb3VuZEZyYW1lYnVmZmVyID09IG51bGwpIHtcclxuICAgIHRoaXMubGFzdEJvdW5kRnJhbWVidWZmZXIgPSB0aGlzLmZyYW1lYnVmZmVyO1xyXG4gICAgdGhpcy5nbC5iaW5kRnJhbWVidWZmZXIoZ2wuRlJBTUVCVUZGRVIsIHRoaXMuZnJhbWVidWZmZXIpO1xyXG4gIH1cclxuXHJcbiAgdGhpcy5nbC5iaW5kRnJhbWVidWZmZXIgPSBmdW5jdGlvbih0YXJnZXQsIGZyYW1lYnVmZmVyKSB7XHJcbiAgICBzZWxmLmxhc3RCb3VuZEZyYW1lYnVmZmVyID0gZnJhbWVidWZmZXIgPyBmcmFtZWJ1ZmZlciA6IHNlbGYuZnJhbWVidWZmZXI7XHJcbiAgICAvLyBTaWxlbnRseSBtYWtlIGNhbGxzIHRvIGJpbmQgdGhlIGRlZmF1bHQgZnJhbWVidWZmZXIgYmluZCBvdXJzIGluc3RlYWQuXHJcbiAgICBzZWxmLnJlYWxCaW5kRnJhbWVidWZmZXIuY2FsbChnbCwgdGFyZ2V0LCBzZWxmLmxhc3RCb3VuZEZyYW1lYnVmZmVyKTtcclxuICB9O1xyXG5cclxuICB0aGlzLmN1bGxGYWNlID0gZ2wuZ2V0UGFyYW1ldGVyKGdsLkNVTExfRkFDRSk7XHJcbiAgdGhpcy5kZXB0aFRlc3QgPSBnbC5nZXRQYXJhbWV0ZXIoZ2wuREVQVEhfVEVTVCk7XHJcbiAgdGhpcy5ibGVuZCA9IGdsLmdldFBhcmFtZXRlcihnbC5CTEVORCk7XHJcbiAgdGhpcy5zY2lzc29yVGVzdCA9IGdsLmdldFBhcmFtZXRlcihnbC5TQ0lTU09SX1RFU1QpO1xyXG4gIHRoaXMuc3RlbmNpbFRlc3QgPSBnbC5nZXRQYXJhbWV0ZXIoZ2wuU1RFTkNJTF9URVNUKTtcclxuXHJcbiAgZ2wuZW5hYmxlID0gZnVuY3Rpb24ocG5hbWUpIHtcclxuICAgIHN3aXRjaCAocG5hbWUpIHtcclxuICAgICAgY2FzZSBnbC5DVUxMX0ZBQ0U6IHNlbGYuY3VsbEZhY2UgPSB0cnVlOyBicmVhaztcclxuICAgICAgY2FzZSBnbC5ERVBUSF9URVNUOiBzZWxmLmRlcHRoVGVzdCA9IHRydWU7IGJyZWFrO1xyXG4gICAgICBjYXNlIGdsLkJMRU5EOiBzZWxmLmJsZW5kID0gdHJ1ZTsgYnJlYWs7XHJcbiAgICAgIGNhc2UgZ2wuU0NJU1NPUl9URVNUOiBzZWxmLnNjaXNzb3JUZXN0ID0gdHJ1ZTsgYnJlYWs7XHJcbiAgICAgIGNhc2UgZ2wuU1RFTkNJTF9URVNUOiBzZWxmLnN0ZW5jaWxUZXN0ID0gdHJ1ZTsgYnJlYWs7XHJcbiAgICB9XHJcbiAgICBzZWxmLnJlYWxFbmFibGUuY2FsbChnbCwgcG5hbWUpO1xyXG4gIH07XHJcblxyXG4gIGdsLmRpc2FibGUgPSBmdW5jdGlvbihwbmFtZSkge1xyXG4gICAgc3dpdGNoIChwbmFtZSkge1xyXG4gICAgICBjYXNlIGdsLkNVTExfRkFDRTogc2VsZi5jdWxsRmFjZSA9IGZhbHNlOyBicmVhaztcclxuICAgICAgY2FzZSBnbC5ERVBUSF9URVNUOiBzZWxmLmRlcHRoVGVzdCA9IGZhbHNlOyBicmVhaztcclxuICAgICAgY2FzZSBnbC5CTEVORDogc2VsZi5ibGVuZCA9IGZhbHNlOyBicmVhaztcclxuICAgICAgY2FzZSBnbC5TQ0lTU09SX1RFU1Q6IHNlbGYuc2Npc3NvclRlc3QgPSBmYWxzZTsgYnJlYWs7XHJcbiAgICAgIGNhc2UgZ2wuU1RFTkNJTF9URVNUOiBzZWxmLnN0ZW5jaWxUZXN0ID0gZmFsc2U7IGJyZWFrO1xyXG4gICAgfVxyXG4gICAgc2VsZi5yZWFsRGlzYWJsZS5jYWxsKGdsLCBwbmFtZSk7XHJcbiAgfTtcclxuXHJcbiAgdGhpcy5jb2xvck1hc2sgPSBnbC5nZXRQYXJhbWV0ZXIoZ2wuQ09MT1JfV1JJVEVNQVNLKTtcclxuICBnbC5jb2xvck1hc2sgPSBmdW5jdGlvbihyLCBnLCBiLCBhKSB7XHJcbiAgICBzZWxmLmNvbG9yTWFza1swXSA9IHI7XHJcbiAgICBzZWxmLmNvbG9yTWFza1sxXSA9IGc7XHJcbiAgICBzZWxmLmNvbG9yTWFza1syXSA9IGI7XHJcbiAgICBzZWxmLmNvbG9yTWFza1szXSA9IGE7XHJcbiAgICBzZWxmLnJlYWxDb2xvck1hc2suY2FsbChnbCwgciwgZywgYiwgYSk7XHJcbiAgfTtcclxuXHJcbiAgdGhpcy5jbGVhckNvbG9yID0gZ2wuZ2V0UGFyYW1ldGVyKGdsLkNPTE9SX0NMRUFSX1ZBTFVFKTtcclxuICBnbC5jbGVhckNvbG9yID0gZnVuY3Rpb24ociwgZywgYiwgYSkge1xyXG4gICAgc2VsZi5jbGVhckNvbG9yWzBdID0gcjtcclxuICAgIHNlbGYuY2xlYXJDb2xvclsxXSA9IGc7XHJcbiAgICBzZWxmLmNsZWFyQ29sb3JbMl0gPSBiO1xyXG4gICAgc2VsZi5jbGVhckNvbG9yWzNdID0gYTtcclxuICAgIHNlbGYucmVhbENsZWFyQ29sb3IuY2FsbChnbCwgciwgZywgYiwgYSk7XHJcbiAgfTtcclxuXHJcbiAgdGhpcy52aWV3cG9ydCA9IGdsLmdldFBhcmFtZXRlcihnbC5WSUVXUE9SVCk7XHJcbiAgZ2wudmlld3BvcnQgPSBmdW5jdGlvbih4LCB5LCB3LCBoKSB7XHJcbiAgICBzZWxmLnZpZXdwb3J0WzBdID0geDtcclxuICAgIHNlbGYudmlld3BvcnRbMV0gPSB5O1xyXG4gICAgc2VsZi52aWV3cG9ydFsyXSA9IHc7XHJcbiAgICBzZWxmLnZpZXdwb3J0WzNdID0gaDtcclxuICAgIHNlbGYucmVhbFZpZXdwb3J0LmNhbGwoZ2wsIHgsIHksIHcsIGgpO1xyXG4gIH07XHJcblxyXG4gIHRoaXMuaXNQYXRjaGVkID0gdHJ1ZTtcclxuICBVdGlsLnNhZmFyaUNzc1NpemVXb3JrYXJvdW5kKGNhbnZhcyk7XHJcbn07XHJcblxyXG5DYXJkYm9hcmREaXN0b3J0ZXIucHJvdG90eXBlLnVucGF0Y2ggPSBmdW5jdGlvbigpIHtcclxuICBpZiAoIXRoaXMuaXNQYXRjaGVkKSB7XHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG5cclxuICB2YXIgZ2wgPSB0aGlzLmdsO1xyXG4gIHZhciBjYW52YXMgPSB0aGlzLmdsLmNhbnZhcztcclxuXHJcbiAgaWYgKCFVdGlsLmlzSU9TKCkpIHtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjYW52YXMsICd3aWR0aCcsIHRoaXMucmVhbENhbnZhc1dpZHRoKTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjYW52YXMsICdoZWlnaHQnLCB0aGlzLnJlYWxDYW52YXNIZWlnaHQpO1xyXG4gIH1cclxuICBjYW52YXMud2lkdGggPSB0aGlzLmJ1ZmZlcldpZHRoO1xyXG4gIGNhbnZhcy5oZWlnaHQgPSB0aGlzLmJ1ZmZlckhlaWdodDtcclxuXHJcbiAgZ2wuYmluZEZyYW1lYnVmZmVyID0gdGhpcy5yZWFsQmluZEZyYW1lYnVmZmVyO1xyXG4gIGdsLmVuYWJsZSA9IHRoaXMucmVhbEVuYWJsZTtcclxuICBnbC5kaXNhYmxlID0gdGhpcy5yZWFsRGlzYWJsZTtcclxuICBnbC5jb2xvck1hc2sgPSB0aGlzLnJlYWxDb2xvck1hc2s7XHJcbiAgZ2wuY2xlYXJDb2xvciA9IHRoaXMucmVhbENsZWFyQ29sb3I7XHJcbiAgZ2wudmlld3BvcnQgPSB0aGlzLnJlYWxWaWV3cG9ydDtcclxuXHJcbiAgLy8gQ2hlY2sgdG8gc2VlIGlmIG91ciBmYWtlIGJhY2tidWZmZXIgaXMgYm91bmQgYW5kIGJpbmQgdGhlIHJlYWwgYmFja2J1ZmZlclxyXG4gIC8vIGlmIHRoYXQncyB0aGUgY2FzZS5cclxuICBpZiAodGhpcy5sYXN0Qm91bmRGcmFtZWJ1ZmZlciA9PSB0aGlzLmZyYW1lYnVmZmVyKSB7XHJcbiAgICBnbC5iaW5kRnJhbWVidWZmZXIoZ2wuRlJBTUVCVUZGRVIsIG51bGwpO1xyXG4gIH1cclxuXHJcbiAgdGhpcy5pc1BhdGNoZWQgPSBmYWxzZTtcclxuXHJcbiAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuICAgIFV0aWwuc2FmYXJpQ3NzU2l6ZVdvcmthcm91bmQoY2FudmFzKTtcclxuICB9LCAxKTtcclxufTtcclxuXHJcbkNhcmRib2FyZERpc3RvcnRlci5wcm90b3R5cGUuc2V0VGV4dHVyZUJvdW5kcyA9IGZ1bmN0aW9uKGxlZnRCb3VuZHMsIHJpZ2h0Qm91bmRzKSB7XHJcbiAgaWYgKCFsZWZ0Qm91bmRzKSB7XHJcbiAgICBsZWZ0Qm91bmRzID0gWzAsIDAsIDAuNSwgMV07XHJcbiAgfVxyXG5cclxuICBpZiAoIXJpZ2h0Qm91bmRzKSB7XHJcbiAgICByaWdodEJvdW5kcyA9IFswLjUsIDAsIDAuNSwgMV07XHJcbiAgfVxyXG5cclxuICAvLyBMZWZ0IGV5ZVxyXG4gIHRoaXMudmlld3BvcnRPZmZzZXRTY2FsZVswXSA9IGxlZnRCb3VuZHNbMF07IC8vIFhcclxuICB0aGlzLnZpZXdwb3J0T2Zmc2V0U2NhbGVbMV0gPSBsZWZ0Qm91bmRzWzFdOyAvLyBZXHJcbiAgdGhpcy52aWV3cG9ydE9mZnNldFNjYWxlWzJdID0gbGVmdEJvdW5kc1syXTsgLy8gV2lkdGhcclxuICB0aGlzLnZpZXdwb3J0T2Zmc2V0U2NhbGVbM10gPSBsZWZ0Qm91bmRzWzNdOyAvLyBIZWlnaHRcclxuXHJcbiAgLy8gUmlnaHQgZXllXHJcbiAgdGhpcy52aWV3cG9ydE9mZnNldFNjYWxlWzRdID0gcmlnaHRCb3VuZHNbMF07IC8vIFhcclxuICB0aGlzLnZpZXdwb3J0T2Zmc2V0U2NhbGVbNV0gPSByaWdodEJvdW5kc1sxXTsgLy8gWVxyXG4gIHRoaXMudmlld3BvcnRPZmZzZXRTY2FsZVs2XSA9IHJpZ2h0Qm91bmRzWzJdOyAvLyBXaWR0aFxyXG4gIHRoaXMudmlld3BvcnRPZmZzZXRTY2FsZVs3XSA9IHJpZ2h0Qm91bmRzWzNdOyAvLyBIZWlnaHRcclxufTtcclxuXHJcbi8qKlxyXG4gKiBQZXJmb3JtcyBkaXN0b3J0aW9uIHBhc3Mgb24gdGhlIGluamVjdGVkIGJhY2tidWZmZXIsIHJlbmRlcmluZyBpdCB0byB0aGUgcmVhbFxyXG4gKiBiYWNrYnVmZmVyLlxyXG4gKi9cclxuQ2FyZGJvYXJkRGlzdG9ydGVyLnByb3RvdHlwZS5zdWJtaXRGcmFtZSA9IGZ1bmN0aW9uKCkge1xyXG4gIHZhciBnbCA9IHRoaXMuZ2w7XHJcbiAgdmFyIHNlbGYgPSB0aGlzO1xyXG5cclxuICB2YXIgZ2xTdGF0ZSA9IFtdO1xyXG5cclxuICBpZiAoIVdlYlZSQ29uZmlnLkRJUlRZX1NVQk1JVF9GUkFNRV9CSU5ESU5HUykge1xyXG4gICAgZ2xTdGF0ZS5wdXNoKFxyXG4gICAgICBnbC5DVVJSRU5UX1BST0dSQU0sXHJcbiAgICAgIGdsLkFSUkFZX0JVRkZFUl9CSU5ESU5HLFxyXG4gICAgICBnbC5FTEVNRU5UX0FSUkFZX0JVRkZFUl9CSU5ESU5HLFxyXG4gICAgICBnbC5URVhUVVJFX0JJTkRJTkdfMkQsIGdsLlRFWFRVUkUwXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgV0dMVVByZXNlcnZlR0xTdGF0ZShnbCwgZ2xTdGF0ZSwgZnVuY3Rpb24oZ2wpIHtcclxuICAgIC8vIEJpbmQgdGhlIHJlYWwgZGVmYXVsdCBmcmFtZWJ1ZmZlclxyXG4gICAgc2VsZi5yZWFsQmluZEZyYW1lYnVmZmVyLmNhbGwoZ2wsIGdsLkZSQU1FQlVGRkVSLCBudWxsKTtcclxuXHJcbiAgICAvLyBNYWtlIHN1cmUgdGhlIEdMIHN0YXRlIGlzIGluIGEgZ29vZCBwbGFjZVxyXG4gICAgaWYgKHNlbGYuY3VsbEZhY2UpIHsgc2VsZi5yZWFsRGlzYWJsZS5jYWxsKGdsLCBnbC5DVUxMX0ZBQ0UpOyB9XHJcbiAgICBpZiAoc2VsZi5kZXB0aFRlc3QpIHsgc2VsZi5yZWFsRGlzYWJsZS5jYWxsKGdsLCBnbC5ERVBUSF9URVNUKTsgfVxyXG4gICAgaWYgKHNlbGYuYmxlbmQpIHsgc2VsZi5yZWFsRGlzYWJsZS5jYWxsKGdsLCBnbC5CTEVORCk7IH1cclxuICAgIGlmIChzZWxmLnNjaXNzb3JUZXN0KSB7IHNlbGYucmVhbERpc2FibGUuY2FsbChnbCwgZ2wuU0NJU1NPUl9URVNUKTsgfVxyXG4gICAgaWYgKHNlbGYuc3RlbmNpbFRlc3QpIHsgc2VsZi5yZWFsRGlzYWJsZS5jYWxsKGdsLCBnbC5TVEVOQ0lMX1RFU1QpOyB9XHJcbiAgICBzZWxmLnJlYWxDb2xvck1hc2suY2FsbChnbCwgdHJ1ZSwgdHJ1ZSwgdHJ1ZSwgdHJ1ZSk7XHJcbiAgICBzZWxmLnJlYWxWaWV3cG9ydC5jYWxsKGdsLCAwLCAwLCBnbC5kcmF3aW5nQnVmZmVyV2lkdGgsIGdsLmRyYXdpbmdCdWZmZXJIZWlnaHQpO1xyXG5cclxuICAgIC8vIElmIHRoZSBiYWNrYnVmZmVyIGhhcyBhbiBhbHBoYSBjaGFubmVsIGNsZWFyIGV2ZXJ5IGZyYW1lIHNvIHRoZSBwYWdlXHJcbiAgICAvLyBkb2Vzbid0IHNob3cgdGhyb3VnaC5cclxuICAgIGlmIChzZWxmLmN0eEF0dHJpYnMuYWxwaGEgfHwgVXRpbC5pc0lPUygpKSB7XHJcbiAgICAgIHNlbGYucmVhbENsZWFyQ29sb3IuY2FsbChnbCwgMCwgMCwgMCwgMSk7XHJcbiAgICAgIGdsLmNsZWFyKGdsLkNPTE9SX0JVRkZFUl9CSVQpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEJpbmQgZGlzdG9ydGlvbiBwcm9ncmFtIGFuZCBtZXNoXHJcbiAgICBnbC51c2VQcm9ncmFtKHNlbGYucHJvZ3JhbSk7XHJcblxyXG4gICAgZ2wuYmluZEJ1ZmZlcihnbC5FTEVNRU5UX0FSUkFZX0JVRkZFUiwgc2VsZi5pbmRleEJ1ZmZlcik7XHJcblxyXG4gICAgZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIHNlbGYudmVydGV4QnVmZmVyKTtcclxuICAgIGdsLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KHNlbGYuYXR0cmlicy5wb3NpdGlvbik7XHJcbiAgICBnbC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheShzZWxmLmF0dHJpYnMudGV4Q29vcmQpO1xyXG4gICAgZ2wudmVydGV4QXR0cmliUG9pbnRlcihzZWxmLmF0dHJpYnMucG9zaXRpb24sIDIsIGdsLkZMT0FULCBmYWxzZSwgMjAsIDApO1xyXG4gICAgZ2wudmVydGV4QXR0cmliUG9pbnRlcihzZWxmLmF0dHJpYnMudGV4Q29vcmQsIDMsIGdsLkZMT0FULCBmYWxzZSwgMjAsIDgpO1xyXG5cclxuICAgIGdsLmFjdGl2ZVRleHR1cmUoZ2wuVEVYVFVSRTApO1xyXG4gICAgZ2wudW5pZm9ybTFpKHNlbGYudW5pZm9ybXMuZGlmZnVzZSwgMCk7XHJcbiAgICBnbC5iaW5kVGV4dHVyZShnbC5URVhUVVJFXzJELCBzZWxmLnJlbmRlclRhcmdldCk7XHJcblxyXG4gICAgZ2wudW5pZm9ybTRmdihzZWxmLnVuaWZvcm1zLnZpZXdwb3J0T2Zmc2V0U2NhbGUsIHNlbGYudmlld3BvcnRPZmZzZXRTY2FsZSk7XHJcblxyXG4gICAgLy8gRHJhd3MgYm90aCBleWVzXHJcbiAgICBnbC5kcmF3RWxlbWVudHMoZ2wuVFJJQU5HTEVTLCBzZWxmLmluZGV4Q291bnQsIGdsLlVOU0lHTkVEX1NIT1JULCAwKTtcclxuXHJcbiAgICBpZiAoc2VsZi5jYXJkYm9hcmRVSSkge1xyXG4gICAgICBzZWxmLmNhcmRib2FyZFVJLnJlbmRlck5vU3RhdGUoKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBCaW5kIHRoZSBmYWtlIGRlZmF1bHQgZnJhbWVidWZmZXIgYWdhaW5cclxuICAgIHNlbGYucmVhbEJpbmRGcmFtZWJ1ZmZlci5jYWxsKHNlbGYuZ2wsIGdsLkZSQU1FQlVGRkVSLCBzZWxmLmZyYW1lYnVmZmVyKTtcclxuXHJcbiAgICAvLyBJZiBwcmVzZXJ2ZURyYXdpbmdCdWZmZXIgPT0gZmFsc2UgY2xlYXIgdGhlIGZyYW1lYnVmZmVyXHJcbiAgICBpZiAoIXNlbGYuY3R4QXR0cmlicy5wcmVzZXJ2ZURyYXdpbmdCdWZmZXIpIHtcclxuICAgICAgc2VsZi5yZWFsQ2xlYXJDb2xvci5jYWxsKGdsLCAwLCAwLCAwLCAwKTtcclxuICAgICAgZ2wuY2xlYXIoZ2wuQ09MT1JfQlVGRkVSX0JJVCk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCFXZWJWUkNvbmZpZy5ESVJUWV9TVUJNSVRfRlJBTUVfQklORElOR1MpIHtcclxuICAgICAgc2VsZi5yZWFsQmluZEZyYW1lYnVmZmVyLmNhbGwoZ2wsIGdsLkZSQU1FQlVGRkVSLCBzZWxmLmxhc3RCb3VuZEZyYW1lYnVmZmVyKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBSZXN0b3JlIHN0YXRlXHJcbiAgICBpZiAoc2VsZi5jdWxsRmFjZSkgeyBzZWxmLnJlYWxFbmFibGUuY2FsbChnbCwgZ2wuQ1VMTF9GQUNFKTsgfVxyXG4gICAgaWYgKHNlbGYuZGVwdGhUZXN0KSB7IHNlbGYucmVhbEVuYWJsZS5jYWxsKGdsLCBnbC5ERVBUSF9URVNUKTsgfVxyXG4gICAgaWYgKHNlbGYuYmxlbmQpIHsgc2VsZi5yZWFsRW5hYmxlLmNhbGwoZ2wsIGdsLkJMRU5EKTsgfVxyXG4gICAgaWYgKHNlbGYuc2Npc3NvclRlc3QpIHsgc2VsZi5yZWFsRW5hYmxlLmNhbGwoZ2wsIGdsLlNDSVNTT1JfVEVTVCk7IH1cclxuICAgIGlmIChzZWxmLnN0ZW5jaWxUZXN0KSB7IHNlbGYucmVhbEVuYWJsZS5jYWxsKGdsLCBnbC5TVEVOQ0lMX1RFU1QpOyB9XHJcblxyXG4gICAgc2VsZi5yZWFsQ29sb3JNYXNrLmFwcGx5KGdsLCBzZWxmLmNvbG9yTWFzayk7XHJcbiAgICBzZWxmLnJlYWxWaWV3cG9ydC5hcHBseShnbCwgc2VsZi52aWV3cG9ydCk7XHJcbiAgICBpZiAoc2VsZi5jdHhBdHRyaWJzLmFscGhhIHx8ICFzZWxmLmN0eEF0dHJpYnMucHJlc2VydmVEcmF3aW5nQnVmZmVyKSB7XHJcbiAgICAgIHNlbGYucmVhbENsZWFyQ29sb3IuYXBwbHkoZ2wsIHNlbGYuY2xlYXJDb2xvcik7XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gIC8vIFdvcmthcm91bmQgZm9yIHRoZSBmYWN0IHRoYXQgU2FmYXJpIGRvZXNuJ3QgYWxsb3cgdXMgdG8gcGF0Y2ggdGhlIGNhbnZhc1xyXG4gIC8vIHdpZHRoIGFuZCBoZWlnaHQgY29ycmVjdGx5LiBBZnRlciBlYWNoIHN1Ym1pdCBmcmFtZSBjaGVjayB0byBzZWUgd2hhdCB0aGVcclxuICAvLyByZWFsIGJhY2tidWZmZXIgc2l6ZSBoYXMgYmVlbiBzZXQgdG8gYW5kIHJlc2l6ZSB0aGUgZmFrZSBiYWNrYnVmZmVyIHNpemVcclxuICAvLyB0byBtYXRjaC5cclxuICBpZiAoVXRpbC5pc0lPUygpKSB7XHJcbiAgICB2YXIgY2FudmFzID0gZ2wuY2FudmFzO1xyXG4gICAgaWYgKGNhbnZhcy53aWR0aCAhPSBzZWxmLmJ1ZmZlcldpZHRoIHx8IGNhbnZhcy5oZWlnaHQgIT0gc2VsZi5idWZmZXJIZWlnaHQpIHtcclxuICAgICAgc2VsZi5idWZmZXJXaWR0aCA9IGNhbnZhcy53aWR0aDtcclxuICAgICAgc2VsZi5idWZmZXJIZWlnaHQgPSBjYW52YXMuaGVpZ2h0O1xyXG4gICAgICBzZWxmLm9uUmVzaXplKCk7XHJcbiAgICB9XHJcbiAgfVxyXG59O1xyXG5cclxuLyoqXHJcbiAqIENhbGwgd2hlbiB0aGUgZGV2aWNlSW5mbyBoYXMgY2hhbmdlZC4gQXQgdGhpcyBwb2ludCB3ZSBuZWVkXHJcbiAqIHRvIHJlLWNhbGN1bGF0ZSB0aGUgZGlzdG9ydGlvbiBtZXNoLlxyXG4gKi9cclxuQ2FyZGJvYXJkRGlzdG9ydGVyLnByb3RvdHlwZS51cGRhdGVEZXZpY2VJbmZvID0gZnVuY3Rpb24oZGV2aWNlSW5mbykge1xyXG4gIHZhciBnbCA9IHRoaXMuZ2w7XHJcbiAgdmFyIHNlbGYgPSB0aGlzO1xyXG5cclxuICB2YXIgZ2xTdGF0ZSA9IFtnbC5BUlJBWV9CVUZGRVJfQklORElORywgZ2wuRUxFTUVOVF9BUlJBWV9CVUZGRVJfQklORElOR107XHJcbiAgV0dMVVByZXNlcnZlR0xTdGF0ZShnbCwgZ2xTdGF0ZSwgZnVuY3Rpb24oZ2wpIHtcclxuICAgIHZhciB2ZXJ0aWNlcyA9IHNlbGYuY29tcHV0ZU1lc2hWZXJ0aWNlc18oc2VsZi5tZXNoV2lkdGgsIHNlbGYubWVzaEhlaWdodCwgZGV2aWNlSW5mbyk7XHJcbiAgICBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgc2VsZi52ZXJ0ZXhCdWZmZXIpO1xyXG4gICAgZ2wuYnVmZmVyRGF0YShnbC5BUlJBWV9CVUZGRVIsIHZlcnRpY2VzLCBnbC5TVEFUSUNfRFJBVyk7XHJcblxyXG4gICAgLy8gSW5kaWNlcyBkb24ndCBjaGFuZ2UgYmFzZWQgb24gZGV2aWNlIHBhcmFtZXRlcnMsIHNvIG9ubHkgY29tcHV0ZSBvbmNlLlxyXG4gICAgaWYgKCFzZWxmLmluZGV4Q291bnQpIHtcclxuICAgICAgdmFyIGluZGljZXMgPSBzZWxmLmNvbXB1dGVNZXNoSW5kaWNlc18oc2VsZi5tZXNoV2lkdGgsIHNlbGYubWVzaEhlaWdodCk7XHJcbiAgICAgIGdsLmJpbmRCdWZmZXIoZ2wuRUxFTUVOVF9BUlJBWV9CVUZGRVIsIHNlbGYuaW5kZXhCdWZmZXIpO1xyXG4gICAgICBnbC5idWZmZXJEYXRhKGdsLkVMRU1FTlRfQVJSQVlfQlVGRkVSLCBpbmRpY2VzLCBnbC5TVEFUSUNfRFJBVyk7XHJcbiAgICAgIHNlbGYuaW5kZXhDb3VudCA9IGluZGljZXMubGVuZ3RoO1xyXG4gICAgfVxyXG4gIH0pO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIEJ1aWxkIHRoZSBkaXN0b3J0aW9uIG1lc2ggdmVydGljZXMuXHJcbiAqIEJhc2VkIG9uIGNvZGUgZnJvbSB0aGUgVW5pdHkgY2FyZGJvYXJkIHBsdWdpbi5cclxuICovXHJcbkNhcmRib2FyZERpc3RvcnRlci5wcm90b3R5cGUuY29tcHV0ZU1lc2hWZXJ0aWNlc18gPSBmdW5jdGlvbih3aWR0aCwgaGVpZ2h0LCBkZXZpY2VJbmZvKSB7XHJcbiAgdmFyIHZlcnRpY2VzID0gbmV3IEZsb2F0MzJBcnJheSgyICogd2lkdGggKiBoZWlnaHQgKiA1KTtcclxuXHJcbiAgdmFyIGxlbnNGcnVzdHVtID0gZGV2aWNlSW5mby5nZXRMZWZ0RXllVmlzaWJsZVRhbkFuZ2xlcygpO1xyXG4gIHZhciBub0xlbnNGcnVzdHVtID0gZGV2aWNlSW5mby5nZXRMZWZ0RXllTm9MZW5zVGFuQW5nbGVzKCk7XHJcbiAgdmFyIHZpZXdwb3J0ID0gZGV2aWNlSW5mby5nZXRMZWZ0RXllVmlzaWJsZVNjcmVlblJlY3Qobm9MZW5zRnJ1c3R1bSk7XHJcbiAgdmFyIHZpZHggPSAwO1xyXG4gIHZhciBpaWR4ID0gMDtcclxuICBmb3IgKHZhciBlID0gMDsgZSA8IDI7IGUrKykge1xyXG4gICAgZm9yICh2YXIgaiA9IDA7IGogPCBoZWlnaHQ7IGorKykge1xyXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHdpZHRoOyBpKyssIHZpZHgrKykge1xyXG4gICAgICAgIHZhciB1ID0gaSAvICh3aWR0aCAtIDEpO1xyXG4gICAgICAgIHZhciB2ID0gaiAvIChoZWlnaHQgLSAxKTtcclxuXHJcbiAgICAgICAgLy8gR3JpZCBwb2ludHMgcmVndWxhcmx5IHNwYWNlZCBpbiBTdHJlb1NjcmVlbiwgYW5kIGJhcnJlbCBkaXN0b3J0ZWQgaW5cclxuICAgICAgICAvLyB0aGUgbWVzaC5cclxuICAgICAgICB2YXIgcyA9IHU7XHJcbiAgICAgICAgdmFyIHQgPSB2O1xyXG4gICAgICAgIHZhciB4ID0gVXRpbC5sZXJwKGxlbnNGcnVzdHVtWzBdLCBsZW5zRnJ1c3R1bVsyXSwgdSk7XHJcbiAgICAgICAgdmFyIHkgPSBVdGlsLmxlcnAobGVuc0ZydXN0dW1bM10sIGxlbnNGcnVzdHVtWzFdLCB2KTtcclxuICAgICAgICB2YXIgZCA9IE1hdGguc3FydCh4ICogeCArIHkgKiB5KTtcclxuICAgICAgICB2YXIgciA9IGRldmljZUluZm8uZGlzdG9ydGlvbi5kaXN0b3J0SW52ZXJzZShkKTtcclxuICAgICAgICB2YXIgcCA9IHggKiByIC8gZDtcclxuICAgICAgICB2YXIgcSA9IHkgKiByIC8gZDtcclxuICAgICAgICB1ID0gKHAgLSBub0xlbnNGcnVzdHVtWzBdKSAvIChub0xlbnNGcnVzdHVtWzJdIC0gbm9MZW5zRnJ1c3R1bVswXSk7XHJcbiAgICAgICAgdiA9IChxIC0gbm9MZW5zRnJ1c3R1bVszXSkgLyAobm9MZW5zRnJ1c3R1bVsxXSAtIG5vTGVuc0ZydXN0dW1bM10pO1xyXG5cclxuICAgICAgICAvLyBDb252ZXJ0IHUsdiB0byBtZXNoIHNjcmVlbiBjb29yZGluYXRlcy5cclxuICAgICAgICB2YXIgYXNwZWN0ID0gZGV2aWNlSW5mby5kZXZpY2Uud2lkdGhNZXRlcnMgLyBkZXZpY2VJbmZvLmRldmljZS5oZWlnaHRNZXRlcnM7XHJcblxyXG4gICAgICAgIC8vIEZJWE1FOiBUaGUgb3JpZ2luYWwgVW5pdHkgcGx1Z2luIG11bHRpcGxpZWQgVSBieSB0aGUgYXNwZWN0IHJhdGlvXHJcbiAgICAgICAgLy8gYW5kIGRpZG4ndCBtdWx0aXBseSBlaXRoZXIgdmFsdWUgYnkgMiwgYnV0IHRoYXQgc2VlbXMgdG8gZ2V0IGl0XHJcbiAgICAgICAgLy8gcmVhbGx5IGNsb3NlIHRvIGNvcnJlY3QgbG9va2luZyBmb3IgbWUuIEkgaGF0ZSB0aGlzIGtpbmQgb2YgXCJEb24ndFxyXG4gICAgICAgIC8vIGtub3cgd2h5IGl0IHdvcmtzXCIgY29kZSB0aG91Z2gsIGFuZCB3b2xkIGxvdmUgYSBtb3JlIGxvZ2ljYWxcclxuICAgICAgICAvLyBleHBsYW5hdGlvbiBvZiB3aGF0IG5lZWRzIHRvIGhhcHBlbiBoZXJlLlxyXG4gICAgICAgIHUgPSAodmlld3BvcnQueCArIHUgKiB2aWV3cG9ydC53aWR0aCAtIDAuNSkgKiAyLjA7IC8vKiBhc3BlY3Q7XHJcbiAgICAgICAgdiA9ICh2aWV3cG9ydC55ICsgdiAqIHZpZXdwb3J0LmhlaWdodCAtIDAuNSkgKiAyLjA7XHJcblxyXG4gICAgICAgIHZlcnRpY2VzWyh2aWR4ICogNSkgKyAwXSA9IHU7IC8vIHBvc2l0aW9uLnhcclxuICAgICAgICB2ZXJ0aWNlc1sodmlkeCAqIDUpICsgMV0gPSB2OyAvLyBwb3NpdGlvbi55XHJcbiAgICAgICAgdmVydGljZXNbKHZpZHggKiA1KSArIDJdID0gczsgLy8gdGV4Q29vcmQueFxyXG4gICAgICAgIHZlcnRpY2VzWyh2aWR4ICogNSkgKyAzXSA9IHQ7IC8vIHRleENvb3JkLnlcclxuICAgICAgICB2ZXJ0aWNlc1sodmlkeCAqIDUpICsgNF0gPSBlOyAvLyB0ZXhDb29yZC56ICh2aWV3cG9ydCBpbmRleClcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgdmFyIHcgPSBsZW5zRnJ1c3R1bVsyXSAtIGxlbnNGcnVzdHVtWzBdO1xyXG4gICAgbGVuc0ZydXN0dW1bMF0gPSAtKHcgKyBsZW5zRnJ1c3R1bVswXSk7XHJcbiAgICBsZW5zRnJ1c3R1bVsyXSA9IHcgLSBsZW5zRnJ1c3R1bVsyXTtcclxuICAgIHcgPSBub0xlbnNGcnVzdHVtWzJdIC0gbm9MZW5zRnJ1c3R1bVswXTtcclxuICAgIG5vTGVuc0ZydXN0dW1bMF0gPSAtKHcgKyBub0xlbnNGcnVzdHVtWzBdKTtcclxuICAgIG5vTGVuc0ZydXN0dW1bMl0gPSB3IC0gbm9MZW5zRnJ1c3R1bVsyXTtcclxuICAgIHZpZXdwb3J0LnggPSAxIC0gKHZpZXdwb3J0LnggKyB2aWV3cG9ydC53aWR0aCk7XHJcbiAgfVxyXG4gIHJldHVybiB2ZXJ0aWNlcztcclxufVxyXG5cclxuLyoqXHJcbiAqIEJ1aWxkIHRoZSBkaXN0b3J0aW9uIG1lc2ggaW5kaWNlcy5cclxuICogQmFzZWQgb24gY29kZSBmcm9tIHRoZSBVbml0eSBjYXJkYm9hcmQgcGx1Z2luLlxyXG4gKi9cclxuQ2FyZGJvYXJkRGlzdG9ydGVyLnByb3RvdHlwZS5jb21wdXRlTWVzaEluZGljZXNfID0gZnVuY3Rpb24od2lkdGgsIGhlaWdodCkge1xyXG4gIHZhciBpbmRpY2VzID0gbmV3IFVpbnQxNkFycmF5KDIgKiAod2lkdGggLSAxKSAqIChoZWlnaHQgLSAxKSAqIDYpO1xyXG4gIHZhciBoYWxmd2lkdGggPSB3aWR0aCAvIDI7XHJcbiAgdmFyIGhhbGZoZWlnaHQgPSBoZWlnaHQgLyAyO1xyXG4gIHZhciB2aWR4ID0gMDtcclxuICB2YXIgaWlkeCA9IDA7XHJcbiAgZm9yICh2YXIgZSA9IDA7IGUgPCAyOyBlKyspIHtcclxuICAgIGZvciAodmFyIGogPSAwOyBqIDwgaGVpZ2h0OyBqKyspIHtcclxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB3aWR0aDsgaSsrLCB2aWR4KyspIHtcclxuICAgICAgICBpZiAoaSA9PSAwIHx8IGogPT0gMClcclxuICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIC8vIEJ1aWxkIGEgcXVhZC4gIExvd2VyIHJpZ2h0IGFuZCB1cHBlciBsZWZ0IHF1YWRyYW50cyBoYXZlIHF1YWRzIHdpdGhcclxuICAgICAgICAvLyB0aGUgdHJpYW5nbGUgZGlhZ29uYWwgZmxpcHBlZCB0byBnZXQgdGhlIHZpZ25ldHRlIHRvIGludGVycG9sYXRlXHJcbiAgICAgICAgLy8gY29ycmVjdGx5LlxyXG4gICAgICAgIGlmICgoaSA8PSBoYWxmd2lkdGgpID09IChqIDw9IGhhbGZoZWlnaHQpKSB7XHJcbiAgICAgICAgICAvLyBRdWFkIGRpYWdvbmFsIGxvd2VyIGxlZnQgdG8gdXBwZXIgcmlnaHQuXHJcbiAgICAgICAgICBpbmRpY2VzW2lpZHgrK10gPSB2aWR4O1xyXG4gICAgICAgICAgaW5kaWNlc1tpaWR4KytdID0gdmlkeCAtIHdpZHRoIC0gMTtcclxuICAgICAgICAgIGluZGljZXNbaWlkeCsrXSA9IHZpZHggLSB3aWR0aDtcclxuICAgICAgICAgIGluZGljZXNbaWlkeCsrXSA9IHZpZHggLSB3aWR0aCAtIDE7XHJcbiAgICAgICAgICBpbmRpY2VzW2lpZHgrK10gPSB2aWR4O1xyXG4gICAgICAgICAgaW5kaWNlc1tpaWR4KytdID0gdmlkeCAtIDE7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIC8vIFF1YWQgZGlhZ29uYWwgdXBwZXIgbGVmdCB0byBsb3dlciByaWdodC5cclxuICAgICAgICAgIGluZGljZXNbaWlkeCsrXSA9IHZpZHggLSAxO1xyXG4gICAgICAgICAgaW5kaWNlc1tpaWR4KytdID0gdmlkeCAtIHdpZHRoO1xyXG4gICAgICAgICAgaW5kaWNlc1tpaWR4KytdID0gdmlkeDtcclxuICAgICAgICAgIGluZGljZXNbaWlkeCsrXSA9IHZpZHggLSB3aWR0aDtcclxuICAgICAgICAgIGluZGljZXNbaWlkeCsrXSA9IHZpZHggLSAxO1xyXG4gICAgICAgICAgaW5kaWNlc1tpaWR4KytdID0gdmlkeCAtIHdpZHRoIC0gMTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbiAgcmV0dXJuIGluZGljZXM7XHJcbn07XHJcblxyXG5DYXJkYm9hcmREaXN0b3J0ZXIucHJvdG90eXBlLmdldE93blByb3BlcnR5RGVzY3JpcHRvcl8gPSBmdW5jdGlvbihwcm90bywgYXR0ck5hbWUpIHtcclxuICB2YXIgZGVzY3JpcHRvciA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IocHJvdG8sIGF0dHJOYW1lKTtcclxuICAvLyBJbiBzb21lIGNhc2VzIChhaGVtLi4uIFNhZmFyaSksIHRoZSBkZXNjcmlwdG9yIHJldHVybnMgdW5kZWZpbmVkIGdldCBhbmRcclxuICAvLyBzZXQgZmllbGRzLiBJbiB0aGlzIGNhc2UsIHdlIG5lZWQgdG8gY3JlYXRlIGEgc3ludGhldGljIHByb3BlcnR5XHJcbiAgLy8gZGVzY3JpcHRvci4gVGhpcyB3b3JrcyBhcm91bmQgc29tZSBvZiB0aGUgaXNzdWVzIGluXHJcbiAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2JvcmlzbXVzL3dlYnZyLXBvbHlmaWxsL2lzc3Vlcy80NlxyXG4gIGlmIChkZXNjcmlwdG9yLmdldCA9PT0gdW5kZWZpbmVkIHx8IGRlc2NyaXB0b3Iuc2V0ID09PSB1bmRlZmluZWQpIHtcclxuICAgIGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTtcclxuICAgIGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IHRydWU7XHJcbiAgICBkZXNjcmlwdG9yLmdldCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICByZXR1cm4gdGhpcy5nZXRBdHRyaWJ1dGUoYXR0ck5hbWUpO1xyXG4gICAgfTtcclxuICAgIGRlc2NyaXB0b3Iuc2V0ID0gZnVuY3Rpb24odmFsKSB7XHJcbiAgICAgIHRoaXMuc2V0QXR0cmlidXRlKGF0dHJOYW1lLCB2YWwpO1xyXG4gICAgfTtcclxuICB9XHJcbiAgcmV0dXJuIGRlc2NyaXB0b3I7XHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IENhcmRib2FyZERpc3RvcnRlcjtcclxuXHJcbn0se1wiLi9jYXJkYm9hcmQtdWkuanNcIjo0LFwiLi9kZXBzL3dnbHUtcHJlc2VydmUtc3RhdGUuanNcIjo2LFwiLi91dGlsLmpzXCI6MjJ9XSw0OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcclxuLypcclxuICogQ29weXJpZ2h0IDIwMTYgR29vZ2xlIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5cclxudmFyIFV0aWwgPSBfZGVyZXFfKCcuL3V0aWwuanMnKTtcclxudmFyIFdHTFVQcmVzZXJ2ZUdMU3RhdGUgPSBfZGVyZXFfKCcuL2RlcHMvd2dsdS1wcmVzZXJ2ZS1zdGF0ZS5qcycpO1xyXG5cclxudmFyIHVpVlMgPSBbXHJcbiAgJ2F0dHJpYnV0ZSB2ZWMyIHBvc2l0aW9uOycsXHJcblxyXG4gICd1bmlmb3JtIG1hdDQgcHJvamVjdGlvbk1hdDsnLFxyXG5cclxuICAndm9pZCBtYWluKCkgeycsXHJcbiAgJyAgZ2xfUG9zaXRpb24gPSBwcm9qZWN0aW9uTWF0ICogdmVjNCggcG9zaXRpb24sIC0xLjAsIDEuMCApOycsXHJcbiAgJ30nLFxyXG5dLmpvaW4oJ1xcbicpO1xyXG5cclxudmFyIHVpRlMgPSBbXHJcbiAgJ3ByZWNpc2lvbiBtZWRpdW1wIGZsb2F0OycsXHJcblxyXG4gICd1bmlmb3JtIHZlYzQgY29sb3I7JyxcclxuXHJcbiAgJ3ZvaWQgbWFpbigpIHsnLFxyXG4gICcgIGdsX0ZyYWdDb2xvciA9IGNvbG9yOycsXHJcbiAgJ30nLFxyXG5dLmpvaW4oJ1xcbicpO1xyXG5cclxudmFyIERFRzJSQUQgPSBNYXRoLlBJLzE4MC4wO1xyXG5cclxuLy8gVGhlIGdlYXIgaGFzIDYgaWRlbnRpY2FsIHNlY3Rpb25zLCBlYWNoIHNwYW5uaW5nIDYwIGRlZ3JlZXMuXHJcbnZhciBrQW5nbGVQZXJHZWFyU2VjdGlvbiA9IDYwO1xyXG5cclxuLy8gSGFsZi1hbmdsZSBvZiB0aGUgc3BhbiBvZiB0aGUgb3V0ZXIgcmltLlxyXG52YXIga091dGVyUmltRW5kQW5nbGUgPSAxMjtcclxuXHJcbi8vIEFuZ2xlIGJldHdlZW4gdGhlIG1pZGRsZSBvZiB0aGUgb3V0ZXIgcmltIGFuZCB0aGUgc3RhcnQgb2YgdGhlIGlubmVyIHJpbS5cclxudmFyIGtJbm5lclJpbUJlZ2luQW5nbGUgPSAyMDtcclxuXHJcbi8vIERpc3RhbmNlIGZyb20gY2VudGVyIHRvIG91dGVyIHJpbSwgbm9ybWFsaXplZCBzbyB0aGF0IHRoZSBlbnRpcmUgbW9kZWxcclxuLy8gZml0cyBpbiBhIFstMSwgMV0geCBbLTEsIDFdIHNxdWFyZS5cclxudmFyIGtPdXRlclJhZGl1cyA9IDE7XHJcblxyXG4vLyBEaXN0YW5jZSBmcm9tIGNlbnRlciB0byBkZXByZXNzZWQgcmltLCBpbiBtb2RlbCB1bml0cy5cclxudmFyIGtNaWRkbGVSYWRpdXMgPSAwLjc1O1xyXG5cclxuLy8gUmFkaXVzIG9mIHRoZSBpbm5lciBob2xsb3cgY2lyY2xlLCBpbiBtb2RlbCB1bml0cy5cclxudmFyIGtJbm5lclJhZGl1cyA9IDAuMzEyNTtcclxuXHJcbi8vIENlbnRlciBsaW5lIHRoaWNrbmVzcyBpbiBEUC5cclxudmFyIGtDZW50ZXJMaW5lVGhpY2tuZXNzRHAgPSA0O1xyXG5cclxuLy8gQnV0dG9uIHdpZHRoIGluIERQLlxyXG52YXIga0J1dHRvbldpZHRoRHAgPSAyODtcclxuXHJcbi8vIEZhY3RvciB0byBzY2FsZSB0aGUgdG91Y2ggYXJlYSB0aGF0IHJlc3BvbmRzIHRvIHRoZSB0b3VjaC5cclxudmFyIGtUb3VjaFNsb3BGYWN0b3IgPSAxLjU7XHJcblxyXG52YXIgQW5nbGVzID0gW1xyXG4gIDAsIGtPdXRlclJpbUVuZEFuZ2xlLCBrSW5uZXJSaW1CZWdpbkFuZ2xlLFxyXG4gIGtBbmdsZVBlckdlYXJTZWN0aW9uIC0ga0lubmVyUmltQmVnaW5BbmdsZSxcclxuICBrQW5nbGVQZXJHZWFyU2VjdGlvbiAtIGtPdXRlclJpbUVuZEFuZ2xlXHJcbl07XHJcblxyXG4vKipcclxuICogUmVuZGVycyB0aGUgYWxpZ25tZW50IGxpbmUgYW5kIFwib3B0aW9uc1wiIGdlYXIuIEl0IGlzIGFzc3VtZWQgdGhhdCB0aGUgY2FudmFzXHJcbiAqIHRoaXMgaXMgcmVuZGVyZWQgaW50byBjb3ZlcnMgdGhlIGVudGlyZSBzY3JlZW4gKG9yIGNsb3NlIHRvIGl0LilcclxuICovXHJcbmZ1bmN0aW9uIENhcmRib2FyZFVJKGdsKSB7XHJcbiAgdGhpcy5nbCA9IGdsO1xyXG5cclxuICB0aGlzLmF0dHJpYnMgPSB7XHJcbiAgICBwb3NpdGlvbjogMFxyXG4gIH07XHJcbiAgdGhpcy5wcm9ncmFtID0gVXRpbC5saW5rUHJvZ3JhbShnbCwgdWlWUywgdWlGUywgdGhpcy5hdHRyaWJzKTtcclxuICB0aGlzLnVuaWZvcm1zID0gVXRpbC5nZXRQcm9ncmFtVW5pZm9ybXMoZ2wsIHRoaXMucHJvZ3JhbSk7XHJcblxyXG4gIHRoaXMudmVydGV4QnVmZmVyID0gZ2wuY3JlYXRlQnVmZmVyKCk7XHJcbiAgdGhpcy5nZWFyT2Zmc2V0ID0gMDtcclxuICB0aGlzLmdlYXJWZXJ0ZXhDb3VudCA9IDA7XHJcbiAgdGhpcy5hcnJvd09mZnNldCA9IDA7XHJcbiAgdGhpcy5hcnJvd1ZlcnRleENvdW50ID0gMDtcclxuXHJcbiAgdGhpcy5wcm9qTWF0ID0gbmV3IEZsb2F0MzJBcnJheSgxNik7XHJcblxyXG4gIHRoaXMubGlzdGVuZXIgPSBudWxsO1xyXG5cclxuICB0aGlzLm9uUmVzaXplKCk7XHJcbn07XHJcblxyXG4vKipcclxuICogVGVhcnMgZG93biBhbGwgdGhlIHJlc291cmNlcyBjcmVhdGVkIGJ5IHRoZSBVSSByZW5kZXJlci5cclxuICovXHJcbkNhcmRib2FyZFVJLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24oKSB7XHJcbiAgdmFyIGdsID0gdGhpcy5nbDtcclxuXHJcbiAgaWYgKHRoaXMubGlzdGVuZXIpIHtcclxuICAgIGdsLmNhbnZhcy5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMubGlzdGVuZXIsIGZhbHNlKTtcclxuICB9XHJcblxyXG4gIGdsLmRlbGV0ZVByb2dyYW0odGhpcy5wcm9ncmFtKTtcclxuICBnbC5kZWxldGVCdWZmZXIodGhpcy52ZXJ0ZXhCdWZmZXIpO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIEFkZHMgYSBsaXN0ZW5lciB0byBjbGlja3Mgb24gdGhlIGdlYXIgYW5kIGJhY2sgaWNvbnNcclxuICovXHJcbkNhcmRib2FyZFVJLnByb3RvdHlwZS5saXN0ZW4gPSBmdW5jdGlvbihvcHRpb25zQ2FsbGJhY2ssIGJhY2tDYWxsYmFjaykge1xyXG4gIHZhciBjYW52YXMgPSB0aGlzLmdsLmNhbnZhcztcclxuICB0aGlzLmxpc3RlbmVyID0gZnVuY3Rpb24oZXZlbnQpIHtcclxuICAgIHZhciBtaWRsaW5lID0gY2FudmFzLmNsaWVudFdpZHRoIC8gMjtcclxuICAgIHZhciBidXR0b25TaXplID0ga0J1dHRvbldpZHRoRHAgKiBrVG91Y2hTbG9wRmFjdG9yO1xyXG4gICAgLy8gQ2hlY2sgdG8gc2VlIGlmIHRoZSB1c2VyIGNsaWNrZWQgb24gKG9yIGFyb3VuZCkgdGhlIGdlYXIgaWNvblxyXG4gICAgaWYgKGV2ZW50LmNsaWVudFggPiBtaWRsaW5lIC0gYnV0dG9uU2l6ZSAmJlxyXG4gICAgICAgIGV2ZW50LmNsaWVudFggPCBtaWRsaW5lICsgYnV0dG9uU2l6ZSAmJlxyXG4gICAgICAgIGV2ZW50LmNsaWVudFkgPiBjYW52YXMuY2xpZW50SGVpZ2h0IC0gYnV0dG9uU2l6ZSkge1xyXG4gICAgICBvcHRpb25zQ2FsbGJhY2soZXZlbnQpO1xyXG4gICAgfVxyXG4gICAgLy8gQ2hlY2sgdG8gc2VlIGlmIHRoZSB1c2VyIGNsaWNrZWQgb24gKG9yIGFyb3VuZCkgdGhlIGJhY2sgaWNvblxyXG4gICAgZWxzZSBpZiAoZXZlbnQuY2xpZW50WCA8IGJ1dHRvblNpemUgJiYgZXZlbnQuY2xpZW50WSA8IGJ1dHRvblNpemUpIHtcclxuICAgICAgYmFja0NhbGxiYWNrKGV2ZW50KTtcclxuICAgIH1cclxuICB9O1xyXG4gIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMubGlzdGVuZXIsIGZhbHNlKTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBCdWlsZHMgdGhlIFVJIG1lc2guXHJcbiAqL1xyXG5DYXJkYm9hcmRVSS5wcm90b3R5cGUub25SZXNpemUgPSBmdW5jdGlvbigpIHtcclxuICB2YXIgZ2wgPSB0aGlzLmdsO1xyXG4gIHZhciBzZWxmID0gdGhpcztcclxuXHJcbiAgdmFyIGdsU3RhdGUgPSBbXHJcbiAgICBnbC5BUlJBWV9CVUZGRVJfQklORElOR1xyXG4gIF07XHJcblxyXG4gIFdHTFVQcmVzZXJ2ZUdMU3RhdGUoZ2wsIGdsU3RhdGUsIGZ1bmN0aW9uKGdsKSB7XHJcbiAgICB2YXIgdmVydGljZXMgPSBbXTtcclxuXHJcbiAgICB2YXIgbWlkbGluZSA9IGdsLmRyYXdpbmdCdWZmZXJXaWR0aCAvIDI7XHJcblxyXG4gICAgLy8gQXNzdW1lcyB5b3VyIGNhbnZhcyB3aWR0aCBhbmQgaGVpZ2h0IGlzIHNjYWxlZCBwcm9wb3J0aW9uYXRlbHkuXHJcbiAgICAvLyBUT0RPKHNtdXMpOiBUaGUgZm9sbG93aW5nIGNhdXNlcyBidXR0b25zIHRvIGJlY29tZSBodWdlIG9uIGlPUywgYnV0IHNlZW1zXHJcbiAgICAvLyBsaWtlIHRoZSByaWdodCB0aGluZyB0byBkby4gRm9yIG5vdywgYWRkZWQgYSBoYWNrLiBCdXQgcmVhbGx5LCBpbnZlc3RpZ2F0ZSB3aHkuXHJcbiAgICB2YXIgZHBzID0gKGdsLmRyYXdpbmdCdWZmZXJXaWR0aCAvIChzY3JlZW4ud2lkdGggKiB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbykpO1xyXG4gICAgaWYgKCFVdGlsLmlzSU9TKCkpIHtcclxuICAgICAgZHBzICo9IHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBsaW5lV2lkdGggPSBrQ2VudGVyTGluZVRoaWNrbmVzc0RwICogZHBzIC8gMjtcclxuICAgIHZhciBidXR0b25TaXplID0ga0J1dHRvbldpZHRoRHAgKiBrVG91Y2hTbG9wRmFjdG9yICogZHBzO1xyXG4gICAgdmFyIGJ1dHRvblNjYWxlID0ga0J1dHRvbldpZHRoRHAgKiBkcHMgLyAyO1xyXG4gICAgdmFyIGJ1dHRvbkJvcmRlciA9ICgoa0J1dHRvbldpZHRoRHAgKiBrVG91Y2hTbG9wRmFjdG9yKSAtIGtCdXR0b25XaWR0aERwKSAqIGRwcztcclxuXHJcbiAgICAvLyBCdWlsZCBjZW50ZXJsaW5lXHJcbiAgICB2ZXJ0aWNlcy5wdXNoKG1pZGxpbmUgLSBsaW5lV2lkdGgsIGJ1dHRvblNpemUpO1xyXG4gICAgdmVydGljZXMucHVzaChtaWRsaW5lIC0gbGluZVdpZHRoLCBnbC5kcmF3aW5nQnVmZmVySGVpZ2h0KTtcclxuICAgIHZlcnRpY2VzLnB1c2gobWlkbGluZSArIGxpbmVXaWR0aCwgYnV0dG9uU2l6ZSk7XHJcbiAgICB2ZXJ0aWNlcy5wdXNoKG1pZGxpbmUgKyBsaW5lV2lkdGgsIGdsLmRyYXdpbmdCdWZmZXJIZWlnaHQpO1xyXG5cclxuICAgIC8vIEJ1aWxkIGdlYXJcclxuICAgIHNlbGYuZ2Vhck9mZnNldCA9ICh2ZXJ0aWNlcy5sZW5ndGggLyAyKTtcclxuXHJcbiAgICBmdW5jdGlvbiBhZGRHZWFyU2VnbWVudCh0aGV0YSwgcikge1xyXG4gICAgICB2YXIgYW5nbGUgPSAoOTAgLSB0aGV0YSkgKiBERUcyUkFEO1xyXG4gICAgICB2YXIgeCA9IE1hdGguY29zKGFuZ2xlKTtcclxuICAgICAgdmFyIHkgPSBNYXRoLnNpbihhbmdsZSk7XHJcbiAgICAgIHZlcnRpY2VzLnB1c2goa0lubmVyUmFkaXVzICogeCAqIGJ1dHRvblNjYWxlICsgbWlkbGluZSwga0lubmVyUmFkaXVzICogeSAqIGJ1dHRvblNjYWxlICsgYnV0dG9uU2NhbGUpO1xyXG4gICAgICB2ZXJ0aWNlcy5wdXNoKHIgKiB4ICogYnV0dG9uU2NhbGUgKyBtaWRsaW5lLCByICogeSAqIGJ1dHRvblNjYWxlICsgYnV0dG9uU2NhbGUpO1xyXG4gICAgfVxyXG5cclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDw9IDY7IGkrKykge1xyXG4gICAgICB2YXIgc2VnbWVudFRoZXRhID0gaSAqIGtBbmdsZVBlckdlYXJTZWN0aW9uO1xyXG5cclxuICAgICAgYWRkR2VhclNlZ21lbnQoc2VnbWVudFRoZXRhLCBrT3V0ZXJSYWRpdXMpO1xyXG4gICAgICBhZGRHZWFyU2VnbWVudChzZWdtZW50VGhldGEgKyBrT3V0ZXJSaW1FbmRBbmdsZSwga091dGVyUmFkaXVzKTtcclxuICAgICAgYWRkR2VhclNlZ21lbnQoc2VnbWVudFRoZXRhICsga0lubmVyUmltQmVnaW5BbmdsZSwga01pZGRsZVJhZGl1cyk7XHJcbiAgICAgIGFkZEdlYXJTZWdtZW50KHNlZ21lbnRUaGV0YSArIChrQW5nbGVQZXJHZWFyU2VjdGlvbiAtIGtJbm5lclJpbUJlZ2luQW5nbGUpLCBrTWlkZGxlUmFkaXVzKTtcclxuICAgICAgYWRkR2VhclNlZ21lbnQoc2VnbWVudFRoZXRhICsgKGtBbmdsZVBlckdlYXJTZWN0aW9uIC0ga091dGVyUmltRW5kQW5nbGUpLCBrT3V0ZXJSYWRpdXMpO1xyXG4gICAgfVxyXG5cclxuICAgIHNlbGYuZ2VhclZlcnRleENvdW50ID0gKHZlcnRpY2VzLmxlbmd0aCAvIDIpIC0gc2VsZi5nZWFyT2Zmc2V0O1xyXG5cclxuICAgIC8vIEJ1aWxkIGJhY2sgYXJyb3dcclxuICAgIHNlbGYuYXJyb3dPZmZzZXQgPSAodmVydGljZXMubGVuZ3RoIC8gMik7XHJcblxyXG4gICAgZnVuY3Rpb24gYWRkQXJyb3dWZXJ0ZXgoeCwgeSkge1xyXG4gICAgICB2ZXJ0aWNlcy5wdXNoKGJ1dHRvbkJvcmRlciArIHgsIGdsLmRyYXdpbmdCdWZmZXJIZWlnaHQgLSBidXR0b25Cb3JkZXIgLSB5KTtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgYW5nbGVkTGluZVdpZHRoID0gbGluZVdpZHRoIC8gTWF0aC5zaW4oNDUgKiBERUcyUkFEKTtcclxuXHJcbiAgICBhZGRBcnJvd1ZlcnRleCgwLCBidXR0b25TY2FsZSk7XHJcbiAgICBhZGRBcnJvd1ZlcnRleChidXR0b25TY2FsZSwgMCk7XHJcbiAgICBhZGRBcnJvd1ZlcnRleChidXR0b25TY2FsZSArIGFuZ2xlZExpbmVXaWR0aCwgYW5nbGVkTGluZVdpZHRoKTtcclxuICAgIGFkZEFycm93VmVydGV4KGFuZ2xlZExpbmVXaWR0aCwgYnV0dG9uU2NhbGUgKyBhbmdsZWRMaW5lV2lkdGgpO1xyXG5cclxuICAgIGFkZEFycm93VmVydGV4KGFuZ2xlZExpbmVXaWR0aCwgYnV0dG9uU2NhbGUgLSBhbmdsZWRMaW5lV2lkdGgpO1xyXG4gICAgYWRkQXJyb3dWZXJ0ZXgoMCwgYnV0dG9uU2NhbGUpO1xyXG4gICAgYWRkQXJyb3dWZXJ0ZXgoYnV0dG9uU2NhbGUsIGJ1dHRvblNjYWxlICogMik7XHJcbiAgICBhZGRBcnJvd1ZlcnRleChidXR0b25TY2FsZSArIGFuZ2xlZExpbmVXaWR0aCwgKGJ1dHRvblNjYWxlICogMikgLSBhbmdsZWRMaW5lV2lkdGgpO1xyXG5cclxuICAgIGFkZEFycm93VmVydGV4KGFuZ2xlZExpbmVXaWR0aCwgYnV0dG9uU2NhbGUgLSBhbmdsZWRMaW5lV2lkdGgpO1xyXG4gICAgYWRkQXJyb3dWZXJ0ZXgoMCwgYnV0dG9uU2NhbGUpO1xyXG5cclxuICAgIGFkZEFycm93VmVydGV4KGFuZ2xlZExpbmVXaWR0aCwgYnV0dG9uU2NhbGUgLSBsaW5lV2lkdGgpO1xyXG4gICAgYWRkQXJyb3dWZXJ0ZXgoa0J1dHRvbldpZHRoRHAgKiBkcHMsIGJ1dHRvblNjYWxlIC0gbGluZVdpZHRoKTtcclxuICAgIGFkZEFycm93VmVydGV4KGFuZ2xlZExpbmVXaWR0aCwgYnV0dG9uU2NhbGUgKyBsaW5lV2lkdGgpO1xyXG4gICAgYWRkQXJyb3dWZXJ0ZXgoa0J1dHRvbldpZHRoRHAgKiBkcHMsIGJ1dHRvblNjYWxlICsgbGluZVdpZHRoKTtcclxuXHJcbiAgICBzZWxmLmFycm93VmVydGV4Q291bnQgPSAodmVydGljZXMubGVuZ3RoIC8gMikgLSBzZWxmLmFycm93T2Zmc2V0O1xyXG5cclxuICAgIC8vIEJ1ZmZlciBkYXRhXHJcbiAgICBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgc2VsZi52ZXJ0ZXhCdWZmZXIpO1xyXG4gICAgZ2wuYnVmZmVyRGF0YShnbC5BUlJBWV9CVUZGRVIsIG5ldyBGbG9hdDMyQXJyYXkodmVydGljZXMpLCBnbC5TVEFUSUNfRFJBVyk7XHJcbiAgfSk7XHJcbn07XHJcblxyXG4vKipcclxuICogUGVyZm9ybXMgZGlzdG9ydGlvbiBwYXNzIG9uIHRoZSBpbmplY3RlZCBiYWNrYnVmZmVyLCByZW5kZXJpbmcgaXQgdG8gdGhlIHJlYWxcclxuICogYmFja2J1ZmZlci5cclxuICovXHJcbkNhcmRib2FyZFVJLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbigpIHtcclxuICB2YXIgZ2wgPSB0aGlzLmdsO1xyXG4gIHZhciBzZWxmID0gdGhpcztcclxuXHJcbiAgdmFyIGdsU3RhdGUgPSBbXHJcbiAgICBnbC5DVUxMX0ZBQ0UsXHJcbiAgICBnbC5ERVBUSF9URVNULFxyXG4gICAgZ2wuQkxFTkQsXHJcbiAgICBnbC5TQ0lTU09SX1RFU1QsXHJcbiAgICBnbC5TVEVOQ0lMX1RFU1QsXHJcbiAgICBnbC5DT0xPUl9XUklURU1BU0ssXHJcbiAgICBnbC5WSUVXUE9SVCxcclxuXHJcbiAgICBnbC5DVVJSRU5UX1BST0dSQU0sXHJcbiAgICBnbC5BUlJBWV9CVUZGRVJfQklORElOR1xyXG4gIF07XHJcblxyXG4gIFdHTFVQcmVzZXJ2ZUdMU3RhdGUoZ2wsIGdsU3RhdGUsIGZ1bmN0aW9uKGdsKSB7XHJcbiAgICAvLyBNYWtlIHN1cmUgdGhlIEdMIHN0YXRlIGlzIGluIGEgZ29vZCBwbGFjZVxyXG4gICAgZ2wuZGlzYWJsZShnbC5DVUxMX0ZBQ0UpO1xyXG4gICAgZ2wuZGlzYWJsZShnbC5ERVBUSF9URVNUKTtcclxuICAgIGdsLmRpc2FibGUoZ2wuQkxFTkQpO1xyXG4gICAgZ2wuZGlzYWJsZShnbC5TQ0lTU09SX1RFU1QpO1xyXG4gICAgZ2wuZGlzYWJsZShnbC5TVEVOQ0lMX1RFU1QpO1xyXG4gICAgZ2wuY29sb3JNYXNrKHRydWUsIHRydWUsIHRydWUsIHRydWUpO1xyXG4gICAgZ2wudmlld3BvcnQoMCwgMCwgZ2wuZHJhd2luZ0J1ZmZlcldpZHRoLCBnbC5kcmF3aW5nQnVmZmVySGVpZ2h0KTtcclxuXHJcbiAgICBzZWxmLnJlbmRlck5vU3RhdGUoKTtcclxuICB9KTtcclxufTtcclxuXHJcbkNhcmRib2FyZFVJLnByb3RvdHlwZS5yZW5kZXJOb1N0YXRlID0gZnVuY3Rpb24oKSB7XHJcbiAgdmFyIGdsID0gdGhpcy5nbDtcclxuXHJcbiAgLy8gQmluZCBkaXN0b3J0aW9uIHByb2dyYW0gYW5kIG1lc2hcclxuICBnbC51c2VQcm9ncmFtKHRoaXMucHJvZ3JhbSk7XHJcblxyXG4gIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCB0aGlzLnZlcnRleEJ1ZmZlcik7XHJcbiAgZ2wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkodGhpcy5hdHRyaWJzLnBvc2l0aW9uKTtcclxuICBnbC52ZXJ0ZXhBdHRyaWJQb2ludGVyKHRoaXMuYXR0cmlicy5wb3NpdGlvbiwgMiwgZ2wuRkxPQVQsIGZhbHNlLCA4LCAwKTtcclxuXHJcbiAgZ2wudW5pZm9ybTRmKHRoaXMudW5pZm9ybXMuY29sb3IsIDEuMCwgMS4wLCAxLjAsIDEuMCk7XHJcblxyXG4gIFV0aWwub3J0aG9NYXRyaXgodGhpcy5wcm9qTWF0LCAwLCBnbC5kcmF3aW5nQnVmZmVyV2lkdGgsIDAsIGdsLmRyYXdpbmdCdWZmZXJIZWlnaHQsIDAuMSwgMTAyNC4wKTtcclxuICBnbC51bmlmb3JtTWF0cml4NGZ2KHRoaXMudW5pZm9ybXMucHJvamVjdGlvbk1hdCwgZmFsc2UsIHRoaXMucHJvak1hdCk7XHJcblxyXG4gIC8vIERyYXdzIFVJIGVsZW1lbnRcclxuICBnbC5kcmF3QXJyYXlzKGdsLlRSSUFOR0xFX1NUUklQLCAwLCA0KTtcclxuICBnbC5kcmF3QXJyYXlzKGdsLlRSSUFOR0xFX1NUUklQLCB0aGlzLmdlYXJPZmZzZXQsIHRoaXMuZ2VhclZlcnRleENvdW50KTtcclxuICBnbC5kcmF3QXJyYXlzKGdsLlRSSUFOR0xFX1NUUklQLCB0aGlzLmFycm93T2Zmc2V0LCB0aGlzLmFycm93VmVydGV4Q291bnQpO1xyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBDYXJkYm9hcmRVSTtcclxuXHJcbn0se1wiLi9kZXBzL3dnbHUtcHJlc2VydmUtc3RhdGUuanNcIjo2LFwiLi91dGlsLmpzXCI6MjJ9XSw1OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcclxuLypcclxuICogQ29weXJpZ2h0IDIwMTYgR29vZ2xlIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5cclxudmFyIENhcmRib2FyZERpc3RvcnRlciA9IF9kZXJlcV8oJy4vY2FyZGJvYXJkLWRpc3RvcnRlci5qcycpO1xyXG52YXIgQ2FyZGJvYXJkVUkgPSBfZGVyZXFfKCcuL2NhcmRib2FyZC11aS5qcycpO1xyXG52YXIgRGV2aWNlSW5mbyA9IF9kZXJlcV8oJy4vZGV2aWNlLWluZm8uanMnKTtcclxudmFyIERwZGIgPSBfZGVyZXFfKCcuL2RwZGIvZHBkYi5qcycpO1xyXG52YXIgRnVzaW9uUG9zZVNlbnNvciA9IF9kZXJlcV8oJy4vc2Vuc29yLWZ1c2lvbi9mdXNpb24tcG9zZS1zZW5zb3IuanMnKTtcclxudmFyIFJvdGF0ZUluc3RydWN0aW9ucyA9IF9kZXJlcV8oJy4vcm90YXRlLWluc3RydWN0aW9ucy5qcycpO1xyXG52YXIgVmlld2VyU2VsZWN0b3IgPSBfZGVyZXFfKCcuL3ZpZXdlci1zZWxlY3Rvci5qcycpO1xyXG52YXIgVlJEaXNwbGF5ID0gX2RlcmVxXygnLi9iYXNlLmpzJykuVlJEaXNwbGF5O1xyXG52YXIgVXRpbCA9IF9kZXJlcV8oJy4vdXRpbC5qcycpO1xyXG5cclxudmFyIEV5ZSA9IHtcclxuICBMRUZUOiAnbGVmdCcsXHJcbiAgUklHSFQ6ICdyaWdodCdcclxufTtcclxuXHJcbi8qKlxyXG4gKiBWUkRpc3BsYXkgYmFzZWQgb24gbW9iaWxlIGRldmljZSBwYXJhbWV0ZXJzIGFuZCBEZXZpY2VNb3Rpb24gQVBJcy5cclxuICovXHJcbmZ1bmN0aW9uIENhcmRib2FyZFZSRGlzcGxheSgpIHtcclxuICB0aGlzLmRpc3BsYXlOYW1lID0gJ0NhcmRib2FyZCBWUkRpc3BsYXkgKHdlYnZyLXBvbHlmaWxsKSc7XHJcblxyXG4gIHRoaXMuY2FwYWJpbGl0aWVzLmhhc09yaWVudGF0aW9uID0gdHJ1ZTtcclxuICB0aGlzLmNhcGFiaWxpdGllcy5jYW5QcmVzZW50ID0gdHJ1ZTtcclxuXHJcbiAgLy8gXCJQcml2YXRlXCIgbWVtYmVycy5cclxuICB0aGlzLmJ1ZmZlclNjYWxlXyA9IFdlYlZSQ29uZmlnLkJVRkZFUl9TQ0FMRTtcclxuICB0aGlzLnBvc2VTZW5zb3JfID0gbmV3IEZ1c2lvblBvc2VTZW5zb3IoKTtcclxuICB0aGlzLmRpc3RvcnRlcl8gPSBudWxsO1xyXG4gIHRoaXMuY2FyZGJvYXJkVUlfID0gbnVsbDtcclxuXHJcbiAgdGhpcy5kcGRiXyA9IG5ldyBEcGRiKHRydWUsIHRoaXMub25EZXZpY2VQYXJhbXNVcGRhdGVkXy5iaW5kKHRoaXMpKTtcclxuICB0aGlzLmRldmljZUluZm9fID0gbmV3IERldmljZUluZm8odGhpcy5kcGRiXy5nZXREZXZpY2VQYXJhbXMoKSk7XHJcblxyXG4gIHRoaXMudmlld2VyU2VsZWN0b3JfID0gbmV3IFZpZXdlclNlbGVjdG9yKCk7XHJcbiAgdGhpcy52aWV3ZXJTZWxlY3Rvcl8ub24oJ2NoYW5nZScsIHRoaXMub25WaWV3ZXJDaGFuZ2VkXy5iaW5kKHRoaXMpKTtcclxuXHJcbiAgLy8gU2V0IHRoZSBjb3JyZWN0IGluaXRpYWwgdmlld2VyLlxyXG4gIHRoaXMuZGV2aWNlSW5mb18uc2V0Vmlld2VyKHRoaXMudmlld2VyU2VsZWN0b3JfLmdldEN1cnJlbnRWaWV3ZXIoKSk7XHJcblxyXG4gIGlmICghV2ViVlJDb25maWcuUk9UQVRFX0lOU1RSVUNUSU9OU19ESVNBQkxFRCkge1xyXG4gICAgdGhpcy5yb3RhdGVJbnN0cnVjdGlvbnNfID0gbmV3IFJvdGF0ZUluc3RydWN0aW9ucygpO1xyXG4gIH1cclxuXHJcbiAgaWYgKFV0aWwuaXNJT1MoKSkge1xyXG4gICAgLy8gTGlzdGVuIGZvciByZXNpemUgZXZlbnRzIHRvIHdvcmthcm91bmQgdGhpcyBhd2Z1bCBTYWZhcmkgYnVnLlxyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMub25SZXNpemVfLmJpbmQodGhpcykpO1xyXG4gIH1cclxufVxyXG5DYXJkYm9hcmRWUkRpc3BsYXkucHJvdG90eXBlID0gbmV3IFZSRGlzcGxheSgpO1xyXG5cclxuQ2FyZGJvYXJkVlJEaXNwbGF5LnByb3RvdHlwZS5nZXRJbW1lZGlhdGVQb3NlID0gZnVuY3Rpb24oKSB7XHJcbiAgcmV0dXJuIHtcclxuICAgIHBvc2l0aW9uOiB0aGlzLnBvc2VTZW5zb3JfLmdldFBvc2l0aW9uKCksXHJcbiAgICBvcmllbnRhdGlvbjogdGhpcy5wb3NlU2Vuc29yXy5nZXRPcmllbnRhdGlvbigpLFxyXG4gICAgbGluZWFyVmVsb2NpdHk6IG51bGwsXHJcbiAgICBsaW5lYXJBY2NlbGVyYXRpb246IG51bGwsXHJcbiAgICBhbmd1bGFyVmVsb2NpdHk6IG51bGwsXHJcbiAgICBhbmd1bGFyQWNjZWxlcmF0aW9uOiBudWxsXHJcbiAgfTtcclxufTtcclxuXHJcbkNhcmRib2FyZFZSRGlzcGxheS5wcm90b3R5cGUucmVzZXRQb3NlID0gZnVuY3Rpb24oKSB7XHJcbiAgdGhpcy5wb3NlU2Vuc29yXy5yZXNldFBvc2UoKTtcclxufTtcclxuXHJcbkNhcmRib2FyZFZSRGlzcGxheS5wcm90b3R5cGUuZ2V0RXllUGFyYW1ldGVycyA9IGZ1bmN0aW9uKHdoaWNoRXllKSB7XHJcbiAgdmFyIG9mZnNldCA9IFt0aGlzLmRldmljZUluZm9fLnZpZXdlci5pbnRlckxlbnNEaXN0YW5jZSAqIDAuNSwgMC4wLCAwLjBdO1xyXG4gIHZhciBmaWVsZE9mVmlldztcclxuXHJcbiAgLy8gVE9ETzogRm9WIGNhbiBiZSBhIGxpdHRsZSBleHBlbnNpdmUgdG8gY29tcHV0ZS4gQ2FjaGUgd2hlbiBkZXZpY2UgcGFyYW1zIGNoYW5nZS5cclxuICBpZiAod2hpY2hFeWUgPT0gRXllLkxFRlQpIHtcclxuICAgIG9mZnNldFswXSAqPSAtMS4wO1xyXG4gICAgZmllbGRPZlZpZXcgPSB0aGlzLmRldmljZUluZm9fLmdldEZpZWxkT2ZWaWV3TGVmdEV5ZSgpO1xyXG4gIH0gZWxzZSBpZiAod2hpY2hFeWUgPT0gRXllLlJJR0hUKSB7XHJcbiAgICBmaWVsZE9mVmlldyA9IHRoaXMuZGV2aWNlSW5mb18uZ2V0RmllbGRPZlZpZXdSaWdodEV5ZSgpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdJbnZhbGlkIGV5ZSBwcm92aWRlZDogJXMnLCB3aGljaEV5ZSk7XHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9XHJcblxyXG4gIHJldHVybiB7XHJcbiAgICBmaWVsZE9mVmlldzogZmllbGRPZlZpZXcsXHJcbiAgICBvZmZzZXQ6IG9mZnNldCxcclxuICAgIC8vIFRPRE86IFNob3VsZCBiZSBhYmxlIHRvIHByb3ZpZGUgYmV0dGVyIHZhbHVlcyB0aGFuIHRoZXNlLlxyXG4gICAgcmVuZGVyV2lkdGg6IHRoaXMuZGV2aWNlSW5mb18uZGV2aWNlLndpZHRoICogMC41ICogdGhpcy5idWZmZXJTY2FsZV8sXHJcbiAgICByZW5kZXJIZWlnaHQ6IHRoaXMuZGV2aWNlSW5mb18uZGV2aWNlLmhlaWdodCAqIHRoaXMuYnVmZmVyU2NhbGVfLFxyXG4gIH07XHJcbn07XHJcblxyXG5DYXJkYm9hcmRWUkRpc3BsYXkucHJvdG90eXBlLm9uRGV2aWNlUGFyYW1zVXBkYXRlZF8gPSBmdW5jdGlvbihuZXdQYXJhbXMpIHtcclxuICBjb25zb2xlLmxvZygnRFBEQiByZXBvcnRlZCB0aGF0IGRldmljZSBwYXJhbXMgd2VyZSB1cGRhdGVkLicpO1xyXG4gIHRoaXMuZGV2aWNlSW5mb18udXBkYXRlRGV2aWNlUGFyYW1zKG5ld1BhcmFtcyk7XHJcblxyXG4gIGlmICh0aGlzLmRpc3RvcnRlcl8pIHtcclxuICAgIHRoaXMuZGlzdG9ydGVyXy51cGRhdGVEZXZpY2VJbmZvKHRoaXMuZGV2aWNlSW5mb18pO1xyXG4gIH1cclxufTtcclxuXHJcbkNhcmRib2FyZFZSRGlzcGxheS5wcm90b3R5cGUudXBkYXRlQm91bmRzXyA9IGZ1bmN0aW9uICgpIHtcclxuICBpZiAodGhpcy5sYXllcl8gJiYgdGhpcy5kaXN0b3J0ZXJfICYmICh0aGlzLmxheWVyXy5sZWZ0Qm91bmRzIHx8IHRoaXMubGF5ZXJfLnJpZ2h0Qm91bmRzKSkge1xyXG4gICAgdGhpcy5kaXN0b3J0ZXJfLnNldFRleHR1cmVCb3VuZHModGhpcy5sYXllcl8ubGVmdEJvdW5kcywgdGhpcy5sYXllcl8ucmlnaHRCb3VuZHMpO1xyXG4gIH1cclxufTtcclxuXHJcbkNhcmRib2FyZFZSRGlzcGxheS5wcm90b3R5cGUuYmVnaW5QcmVzZW50XyA9IGZ1bmN0aW9uKCkge1xyXG4gIHZhciBnbCA9IHRoaXMubGF5ZXJfLnNvdXJjZS5nZXRDb250ZXh0KCd3ZWJnbCcpO1xyXG4gIGlmICghZ2wpXHJcbiAgICBnbCA9IHRoaXMubGF5ZXJfLnNvdXJjZS5nZXRDb250ZXh0KCdleHBlcmltZW50YWwtd2ViZ2wnKTtcclxuICBpZiAoIWdsKVxyXG4gICAgZ2wgPSB0aGlzLmxheWVyXy5zb3VyY2UuZ2V0Q29udGV4dCgnd2ViZ2wyJyk7XHJcblxyXG4gIGlmICghZ2wpXHJcbiAgICByZXR1cm47IC8vIENhbid0IGRvIGRpc3RvcnRpb24gd2l0aG91dCBhIFdlYkdMIGNvbnRleHQuXHJcblxyXG4gIC8vIFByb3ZpZGVzIGEgd2F5IHRvIG9wdCBvdXQgb2YgZGlzdG9ydGlvblxyXG4gIGlmICh0aGlzLmxheWVyXy5wcmVkaXN0b3J0ZWQpIHtcclxuICAgIGlmICghV2ViVlJDb25maWcuQ0FSREJPQVJEX1VJX0RJU0FCTEVEKSB7XHJcbiAgICAgIGdsLmNhbnZhcy53aWR0aCA9IFV0aWwuZ2V0U2NyZWVuV2lkdGgoKSAqIHRoaXMuYnVmZmVyU2NhbGVfO1xyXG4gICAgICBnbC5jYW52YXMuaGVpZ2h0ID0gVXRpbC5nZXRTY3JlZW5IZWlnaHQoKSAqIHRoaXMuYnVmZmVyU2NhbGVfO1xyXG4gICAgICB0aGlzLmNhcmRib2FyZFVJXyA9IG5ldyBDYXJkYm9hcmRVSShnbCk7XHJcbiAgICB9XHJcbiAgfSBlbHNlIHtcclxuICAgIC8vIENyZWF0ZSBhIG5ldyBkaXN0b3J0ZXIgZm9yIHRoZSB0YXJnZXQgY29udGV4dFxyXG4gICAgdGhpcy5kaXN0b3J0ZXJfID0gbmV3IENhcmRib2FyZERpc3RvcnRlcihnbCk7XHJcbiAgICB0aGlzLmRpc3RvcnRlcl8udXBkYXRlRGV2aWNlSW5mbyh0aGlzLmRldmljZUluZm9fKTtcclxuICAgIHRoaXMuY2FyZGJvYXJkVUlfID0gdGhpcy5kaXN0b3J0ZXJfLmNhcmRib2FyZFVJO1xyXG4gIH1cclxuXHJcbiAgaWYgKHRoaXMuY2FyZGJvYXJkVUlfKSB7XHJcbiAgICB0aGlzLmNhcmRib2FyZFVJXy5saXN0ZW4oZnVuY3Rpb24oZSkge1xyXG4gICAgICAvLyBPcHRpb25zIGNsaWNrZWQuXHJcbiAgICAgIHRoaXMudmlld2VyU2VsZWN0b3JfLnNob3codGhpcy5sYXllcl8uc291cmNlLnBhcmVudEVsZW1lbnQpO1xyXG4gICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9LmJpbmQodGhpcyksIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgLy8gQmFjayBjbGlja2VkLlxyXG4gICAgICB0aGlzLmV4aXRQcmVzZW50KCk7XHJcbiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIH0uYmluZCh0aGlzKSk7XHJcbiAgfVxyXG5cclxuICBpZiAodGhpcy5yb3RhdGVJbnN0cnVjdGlvbnNfKSB7XHJcbiAgICBpZiAoVXRpbC5pc0xhbmRzY2FwZU1vZGUoKSAmJiBVdGlsLmlzTW9iaWxlKCkpIHtcclxuICAgICAgLy8gSW4gbGFuZHNjYXBlIG1vZGUsIHRlbXBvcmFyaWx5IHNob3cgdGhlIFwicHV0IGludG8gQ2FyZGJvYXJkXCJcclxuICAgICAgLy8gaW50ZXJzdGl0aWFsLiBPdGhlcndpc2UsIGRvIHRoZSBkZWZhdWx0IHRoaW5nLlxyXG4gICAgICB0aGlzLnJvdGF0ZUluc3RydWN0aW9uc18uc2hvd1RlbXBvcmFyaWx5KDMwMDAsIHRoaXMubGF5ZXJfLnNvdXJjZS5wYXJlbnRFbGVtZW50KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMucm90YXRlSW5zdHJ1Y3Rpb25zXy51cGRhdGUoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIExpc3RlbiBmb3Igb3JpZW50YXRpb24gY2hhbmdlIGV2ZW50cyBpbiBvcmRlciB0byBzaG93IGludGVyc3RpdGlhbC5cclxuICB0aGlzLm9yaWVudGF0aW9uSGFuZGxlciA9IHRoaXMub25PcmllbnRhdGlvbkNoYW5nZV8uYmluZCh0aGlzKTtcclxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignb3JpZW50YXRpb25jaGFuZ2UnLCB0aGlzLm9yaWVudGF0aW9uSGFuZGxlcik7XHJcblxyXG4gIC8vIExpc3RlbiBmb3IgcHJlc2VudCBkaXNwbGF5IGNoYW5nZSBldmVudHMgaW4gb3JkZXIgdG8gdXBkYXRlIGRpc3RvcnRlciBkaW1lbnNpb25zXHJcbiAgdGhpcy52cmRpc3BsYXlwcmVzZW50Y2hhbmdlSGFuZGxlciA9IHRoaXMudXBkYXRlQm91bmRzXy5iaW5kKHRoaXMpO1xyXG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCd2cmRpc3BsYXlwcmVzZW50Y2hhbmdlJywgdGhpcy52cmRpc3BsYXlwcmVzZW50Y2hhbmdlSGFuZGxlcik7XHJcblxyXG4gIC8vIEZpcmUgdGhpcyBldmVudCBpbml0aWFsbHksIHRvIGdpdmUgZ2VvbWV0cnktZGlzdG9ydGlvbiBjbGllbnRzIHRoZSBjaGFuY2VcclxuICAvLyB0byBkbyBzb21ldGhpbmcgY3VzdG9tLlxyXG4gIHRoaXMuZmlyZVZSRGlzcGxheURldmljZVBhcmFtc0NoYW5nZV8oKTtcclxufTtcclxuXHJcbkNhcmRib2FyZFZSRGlzcGxheS5wcm90b3R5cGUuZW5kUHJlc2VudF8gPSBmdW5jdGlvbigpIHtcclxuICBpZiAodGhpcy5kaXN0b3J0ZXJfKSB7XHJcbiAgICB0aGlzLmRpc3RvcnRlcl8uZGVzdHJveSgpO1xyXG4gICAgdGhpcy5kaXN0b3J0ZXJfID0gbnVsbDtcclxuICB9XHJcbiAgaWYgKHRoaXMuY2FyZGJvYXJkVUlfKSB7XHJcbiAgICB0aGlzLmNhcmRib2FyZFVJXy5kZXN0cm95KCk7XHJcbiAgICB0aGlzLmNhcmRib2FyZFVJXyA9IG51bGw7XHJcbiAgfVxyXG5cclxuICBpZiAodGhpcy5yb3RhdGVJbnN0cnVjdGlvbnNfKSB7XHJcbiAgICB0aGlzLnJvdGF0ZUluc3RydWN0aW9uc18uaGlkZSgpO1xyXG4gIH1cclxuICB0aGlzLnZpZXdlclNlbGVjdG9yXy5oaWRlKCk7XHJcblxyXG4gIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdvcmllbnRhdGlvbmNoYW5nZScsIHRoaXMub3JpZW50YXRpb25IYW5kbGVyKTtcclxuICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigndnJkaXNwbGF5cHJlc2VudGNoYW5nZScsIHRoaXMudnJkaXNwbGF5cHJlc2VudGNoYW5nZUhhbmRsZXIpO1xyXG59O1xyXG5cclxuQ2FyZGJvYXJkVlJEaXNwbGF5LnByb3RvdHlwZS5zdWJtaXRGcmFtZSA9IGZ1bmN0aW9uKHBvc2UpIHtcclxuICBpZiAodGhpcy5kaXN0b3J0ZXJfKSB7XHJcbiAgICB0aGlzLmRpc3RvcnRlcl8uc3VibWl0RnJhbWUoKTtcclxuICB9IGVsc2UgaWYgKHRoaXMuY2FyZGJvYXJkVUlfICYmIHRoaXMubGF5ZXJfKSB7XHJcbiAgICAvLyBIYWNrIGZvciBwcmVkaXN0b3J0ZWQ6IHRydWUuXHJcbiAgICB2YXIgY2FudmFzID0gdGhpcy5sYXllcl8uc291cmNlLmdldENvbnRleHQoJ3dlYmdsJykuY2FudmFzO1xyXG4gICAgaWYgKGNhbnZhcy53aWR0aCAhPSB0aGlzLmxhc3RXaWR0aCB8fCBjYW52YXMuaGVpZ2h0ICE9IHRoaXMubGFzdEhlaWdodCkge1xyXG4gICAgICB0aGlzLmNhcmRib2FyZFVJXy5vblJlc2l6ZSgpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5sYXN0V2lkdGggPSBjYW52YXMud2lkdGg7XHJcbiAgICB0aGlzLmxhc3RIZWlnaHQgPSBjYW52YXMuaGVpZ2h0O1xyXG5cclxuICAgIC8vIFJlbmRlciB0aGUgQ2FyZGJvYXJkIFVJLlxyXG4gICAgdGhpcy5jYXJkYm9hcmRVSV8ucmVuZGVyKCk7XHJcbiAgfVxyXG59O1xyXG5cclxuQ2FyZGJvYXJkVlJEaXNwbGF5LnByb3RvdHlwZS5vbk9yaWVudGF0aW9uQ2hhbmdlXyA9IGZ1bmN0aW9uKGUpIHtcclxuICBjb25zb2xlLmxvZygnb25PcmllbnRhdGlvbkNoYW5nZV8nKTtcclxuXHJcbiAgLy8gSGlkZSB0aGUgdmlld2VyIHNlbGVjdG9yLlxyXG4gIHRoaXMudmlld2VyU2VsZWN0b3JfLmhpZGUoKTtcclxuXHJcbiAgLy8gVXBkYXRlIHRoZSByb3RhdGUgaW5zdHJ1Y3Rpb25zLlxyXG4gIGlmICh0aGlzLnJvdGF0ZUluc3RydWN0aW9uc18pIHtcclxuICAgIHRoaXMucm90YXRlSW5zdHJ1Y3Rpb25zXy51cGRhdGUoKTtcclxuICB9XHJcblxyXG4gIHRoaXMub25SZXNpemVfKCk7XHJcbn07XHJcblxyXG5DYXJkYm9hcmRWUkRpc3BsYXkucHJvdG90eXBlLm9uUmVzaXplXyA9IGZ1bmN0aW9uKGUpIHtcclxuICBpZiAodGhpcy5sYXllcl8pIHtcclxuICAgIHZhciBnbCA9IHRoaXMubGF5ZXJfLnNvdXJjZS5nZXRDb250ZXh0KCd3ZWJnbCcpO1xyXG4gICAgLy8gU2l6ZSB0aGUgQ1NTIGNhbnZhcy5cclxuICAgIC8vIEFkZGVkIHBhZGRpbmcgb24gcmlnaHQgYW5kIGJvdHRvbSBiZWNhdXNlIGlQaG9uZSA1IHdpbGwgbm90XHJcbiAgICAvLyBoaWRlIHRoZSBVUkwgYmFyIHVubGVzcyBjb250ZW50IGlzIGJpZ2dlciB0aGFuIHRoZSBzY3JlZW4uXHJcbiAgICAvLyBUaGlzIHdpbGwgbm90IGJlIHZpc2libGUgYXMgbG9uZyBhcyB0aGUgY29udGFpbmVyIGVsZW1lbnQgKGUuZy4gYm9keSlcclxuICAgIC8vIGlzIHNldCB0byAnb3ZlcmZsb3c6IGhpZGRlbicuXHJcbiAgICB2YXIgY3NzUHJvcGVydGllcyA9IFtcclxuICAgICAgJ3Bvc2l0aW9uOiBhYnNvbHV0ZScsXHJcbiAgICAgICd0b3A6IDAnLFxyXG4gICAgICAnbGVmdDogMCcsXHJcbiAgICAgICd3aWR0aDogJyArIE1hdGgubWF4KHNjcmVlbi53aWR0aCwgc2NyZWVuLmhlaWdodCkgKyAncHgnLFxyXG4gICAgICAnaGVpZ2h0OiAnICsgTWF0aC5taW4oc2NyZWVuLmhlaWdodCwgc2NyZWVuLndpZHRoKSArICdweCcsXHJcbiAgICAgICdib3JkZXI6IDAnLFxyXG4gICAgICAnbWFyZ2luOiAwJyxcclxuICAgICAgJ3BhZGRpbmc6IDAgMTBweCAxMHB4IDAnLFxyXG4gICAgXTtcclxuICAgIGdsLmNhbnZhcy5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgY3NzUHJvcGVydGllcy5qb2luKCc7ICcpICsgJzsnKTtcclxuXHJcbiAgICBVdGlsLnNhZmFyaUNzc1NpemVXb3JrYXJvdW5kKGdsLmNhbnZhcyk7XHJcbiAgfVxyXG59O1xyXG5cclxuQ2FyZGJvYXJkVlJEaXNwbGF5LnByb3RvdHlwZS5vblZpZXdlckNoYW5nZWRfID0gZnVuY3Rpb24odmlld2VyKSB7XHJcbiAgdGhpcy5kZXZpY2VJbmZvXy5zZXRWaWV3ZXIodmlld2VyKTtcclxuXHJcbiAgaWYgKHRoaXMuZGlzdG9ydGVyXykge1xyXG4gICAgLy8gVXBkYXRlIHRoZSBkaXN0b3J0aW9uIGFwcHJvcHJpYXRlbHkuXHJcbiAgICB0aGlzLmRpc3RvcnRlcl8udXBkYXRlRGV2aWNlSW5mbyh0aGlzLmRldmljZUluZm9fKTtcclxuICB9XHJcblxyXG4gIC8vIEZpcmUgYSBuZXcgZXZlbnQgY29udGFpbmluZyB2aWV3ZXIgYW5kIGRldmljZSBwYXJhbWV0ZXJzIGZvciBjbGllbnRzIHRoYXRcclxuICAvLyB3YW50IHRvIGltcGxlbWVudCB0aGVpciBvd24gZ2VvbWV0cnktYmFzZWQgZGlzdG9ydGlvbi5cclxuICB0aGlzLmZpcmVWUkRpc3BsYXlEZXZpY2VQYXJhbXNDaGFuZ2VfKCk7XHJcbn07XHJcblxyXG5DYXJkYm9hcmRWUkRpc3BsYXkucHJvdG90eXBlLmZpcmVWUkRpc3BsYXlEZXZpY2VQYXJhbXNDaGFuZ2VfID0gZnVuY3Rpb24oKSB7XHJcbiAgdmFyIGV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KCd2cmRpc3BsYXlkZXZpY2VwYXJhbXNjaGFuZ2UnLCB7XHJcbiAgICBkZXRhaWw6IHtcclxuICAgICAgdnJkaXNwbGF5OiB0aGlzLFxyXG4gICAgICBkZXZpY2VJbmZvOiB0aGlzLmRldmljZUluZm9fLFxyXG4gICAgfVxyXG4gIH0pO1xyXG4gIHdpbmRvdy5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gQ2FyZGJvYXJkVlJEaXNwbGF5O1xyXG5cclxufSx7XCIuL2Jhc2UuanNcIjoyLFwiLi9jYXJkYm9hcmQtZGlzdG9ydGVyLmpzXCI6MyxcIi4vY2FyZGJvYXJkLXVpLmpzXCI6NCxcIi4vZGV2aWNlLWluZm8uanNcIjo3LFwiLi9kcGRiL2RwZGIuanNcIjoxMSxcIi4vcm90YXRlLWluc3RydWN0aW9ucy5qc1wiOjE2LFwiLi9zZW5zb3ItZnVzaW9uL2Z1c2lvbi1wb3NlLXNlbnNvci5qc1wiOjE4LFwiLi91dGlsLmpzXCI6MjIsXCIuL3ZpZXdlci1zZWxlY3Rvci5qc1wiOjIzfV0sNjpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XHJcbi8qXHJcbkNvcHlyaWdodCAoYykgMjAxNiwgQnJhbmRvbiBKb25lcy5cclxuXHJcblBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHlcclxub2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbFxyXG5pbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzXHJcbnRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGxcclxuY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzXHJcbmZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6XHJcblxyXG5UaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpblxyXG5hbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cclxuXHJcblRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1JcclxuSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksXHJcbkZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRVxyXG5BVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSXHJcbkxJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sXHJcbk9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU5cclxuVEhFIFNPRlRXQVJFLlxyXG4qL1xyXG5cclxuLypcclxuQ2FjaGVzIHNwZWNpZmllZCBHTCBzdGF0ZSwgcnVucyBhIGNhbGxiYWNrLCBhbmQgcmVzdG9yZXMgdGhlIGNhY2hlZCBzdGF0ZSB3aGVuXHJcbmRvbmUuXHJcblxyXG5FeGFtcGxlIHVzYWdlOlxyXG5cclxudmFyIHNhdmVkU3RhdGUgPSBbXHJcbiAgZ2wuQVJSQVlfQlVGRkVSX0JJTkRJTkcsXHJcblxyXG4gIC8vIFRFWFRVUkVfQklORElOR18yRCBvciBfQ1VCRV9NQVAgbXVzdCBhbHdheXMgYmUgZm9sbG93ZWQgYnkgdGhlIHRleHVyZSB1bml0LlxyXG4gIGdsLlRFWFRVUkVfQklORElOR18yRCwgZ2wuVEVYVFVSRTAsXHJcblxyXG4gIGdsLkNMRUFSX0NPTE9SLFxyXG5dO1xyXG4vLyBBZnRlciB0aGlzIGNhbGwgdGhlIGFycmF5IGJ1ZmZlciwgdGV4dHVyZSB1bml0IDAsIGFjdGl2ZSB0ZXh0dXJlLCBhbmQgY2xlYXJcclxuLy8gY29sb3Igd2lsbCBiZSByZXN0b3JlZC4gVGhlIHZpZXdwb3J0IHdpbGwgcmVtYWluIGNoYW5nZWQsIGhvd2V2ZXIsIGJlY2F1c2VcclxuLy8gZ2wuVklFV1BPUlQgd2FzIG5vdCBpbmNsdWRlZCBpbiB0aGUgc2F2ZWRTdGF0ZSBsaXN0LlxyXG5XR0xVUHJlc2VydmVHTFN0YXRlKGdsLCBzYXZlZFN0YXRlLCBmdW5jdGlvbihnbCkge1xyXG4gIGdsLnZpZXdwb3J0KDAsIDAsIGdsLmRyYXdpbmdCdWZmZXJXaWR0aCwgZ2wuZHJhd2luZ0J1ZmZlckhlaWdodCk7XHJcblxyXG4gIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCBidWZmZXIpO1xyXG4gIGdsLmJ1ZmZlckRhdGEoZ2wuQVJSQVlfQlVGRkVSLCAuLi4uKTtcclxuXHJcbiAgZ2wuYWN0aXZlVGV4dHVyZShnbC5URVhUVVJFMCk7XHJcbiAgZ2wuYmluZFRleHR1cmUoZ2wuVEVYVFVSRV8yRCwgdGV4dHVyZSk7XHJcbiAgZ2wudGV4SW1hZ2UyRChnbC5URVhUVVJFXzJELCAuLi4pO1xyXG5cclxuICBnbC5jbGVhckNvbG9yKDEsIDAsIDAsIDEpO1xyXG4gIGdsLmNsZWFyKGdsLkNPTE9SX0JVRkZFUl9CSVQpO1xyXG59KTtcclxuXHJcbk5vdGUgdGhhdCB0aGlzIGlzIG5vdCBpbnRlbmRlZCB0byBiZSBmYXN0LiBNYW5hZ2luZyBzdGF0ZSBpbiB5b3VyIG93biBjb2RlIHRvXHJcbmF2b2lkIHJlZHVuZGFudCBzdGF0ZSBzZXR0aW5nIGFuZCBxdWVyeWluZyB3aWxsIGFsd2F5cyBiZSBmYXN0ZXIuIFRoaXMgZnVuY3Rpb25cclxuaXMgbW9zdCB1c2VmdWwgZm9yIGNhc2VzIHdoZXJlIHlvdSBtYXkgbm90IGhhdmUgZnVsbCBjb250cm9sIG92ZXIgdGhlIFdlYkdMXHJcbmNhbGxzIGJlaW5nIG1hZGUsIHN1Y2ggYXMgdG9vbGluZyBvciBlZmZlY3QgaW5qZWN0b3JzLlxyXG4qL1xyXG5cclxuZnVuY3Rpb24gV0dMVVByZXNlcnZlR0xTdGF0ZShnbCwgYmluZGluZ3MsIGNhbGxiYWNrKSB7XHJcbiAgaWYgKCFiaW5kaW5ncykge1xyXG4gICAgY2FsbGJhY2soZ2wpO1xyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuXHJcbiAgdmFyIGJvdW5kVmFsdWVzID0gW107XHJcblxyXG4gIHZhciBhY3RpdmVUZXh0dXJlID0gbnVsbDtcclxuICBmb3IgKHZhciBpID0gMDsgaSA8IGJpbmRpbmdzLmxlbmd0aDsgKytpKSB7XHJcbiAgICB2YXIgYmluZGluZyA9IGJpbmRpbmdzW2ldO1xyXG4gICAgc3dpdGNoIChiaW5kaW5nKSB7XHJcbiAgICAgIGNhc2UgZ2wuVEVYVFVSRV9CSU5ESU5HXzJEOlxyXG4gICAgICBjYXNlIGdsLlRFWFRVUkVfQklORElOR19DVUJFX01BUDpcclxuICAgICAgICB2YXIgdGV4dHVyZVVuaXQgPSBiaW5kaW5nc1srK2ldO1xyXG4gICAgICAgIGlmICh0ZXh0dXJlVW5pdCA8IGdsLlRFWFRVUkUwIHx8IHRleHR1cmVVbml0ID4gZ2wuVEVYVFVSRTMxKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmVycm9yKFwiVEVYVFVSRV9CSU5ESU5HXzJEIG9yIFRFWFRVUkVfQklORElOR19DVUJFX01BUCBtdXN0IGJlIGZvbGxvd2VkIGJ5IGEgdmFsaWQgdGV4dHVyZSB1bml0XCIpO1xyXG4gICAgICAgICAgYm91bmRWYWx1ZXMucHVzaChudWxsLCBudWxsKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIWFjdGl2ZVRleHR1cmUpIHtcclxuICAgICAgICAgIGFjdGl2ZVRleHR1cmUgPSBnbC5nZXRQYXJhbWV0ZXIoZ2wuQUNUSVZFX1RFWFRVUkUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBnbC5hY3RpdmVUZXh0dXJlKHRleHR1cmVVbml0KTtcclxuICAgICAgICBib3VuZFZhbHVlcy5wdXNoKGdsLmdldFBhcmFtZXRlcihiaW5kaW5nKSwgbnVsbCk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgZ2wuQUNUSVZFX1RFWFRVUkU6XHJcbiAgICAgICAgYWN0aXZlVGV4dHVyZSA9IGdsLmdldFBhcmFtZXRlcihnbC5BQ1RJVkVfVEVYVFVSRSk7XHJcbiAgICAgICAgYm91bmRWYWx1ZXMucHVzaChudWxsKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgZGVmYXVsdDpcclxuICAgICAgICBib3VuZFZhbHVlcy5wdXNoKGdsLmdldFBhcmFtZXRlcihiaW5kaW5nKSk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBjYWxsYmFjayhnbCk7XHJcblxyXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgYmluZGluZ3MubGVuZ3RoOyArK2kpIHtcclxuICAgIHZhciBiaW5kaW5nID0gYmluZGluZ3NbaV07XHJcbiAgICB2YXIgYm91bmRWYWx1ZSA9IGJvdW5kVmFsdWVzW2ldO1xyXG4gICAgc3dpdGNoIChiaW5kaW5nKSB7XHJcbiAgICAgIGNhc2UgZ2wuQUNUSVZFX1RFWFRVUkU6XHJcbiAgICAgICAgYnJlYWs7IC8vIElnbm9yZSB0aGlzIGJpbmRpbmcsIHNpbmNlIHdlIHNwZWNpYWwtY2FzZSBpdCB0byBoYXBwZW4gbGFzdC5cclxuICAgICAgY2FzZSBnbC5BUlJBWV9CVUZGRVJfQklORElORzpcclxuICAgICAgICBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgYm91bmRWYWx1ZSk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgZ2wuQ09MT1JfQ0xFQVJfVkFMVUU6XHJcbiAgICAgICAgZ2wuY2xlYXJDb2xvcihib3VuZFZhbHVlWzBdLCBib3VuZFZhbHVlWzFdLCBib3VuZFZhbHVlWzJdLCBib3VuZFZhbHVlWzNdKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSBnbC5DT0xPUl9XUklURU1BU0s6XHJcbiAgICAgICAgZ2wuY29sb3JNYXNrKGJvdW5kVmFsdWVbMF0sIGJvdW5kVmFsdWVbMV0sIGJvdW5kVmFsdWVbMl0sIGJvdW5kVmFsdWVbM10pO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIGdsLkNVUlJFTlRfUFJPR1JBTTpcclxuICAgICAgICBnbC51c2VQcm9ncmFtKGJvdW5kVmFsdWUpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIGdsLkVMRU1FTlRfQVJSQVlfQlVGRkVSX0JJTkRJTkc6XHJcbiAgICAgICAgZ2wuYmluZEJ1ZmZlcihnbC5FTEVNRU5UX0FSUkFZX0JVRkZFUiwgYm91bmRWYWx1ZSk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgZ2wuRlJBTUVCVUZGRVJfQklORElORzpcclxuICAgICAgICBnbC5iaW5kRnJhbWVidWZmZXIoZ2wuRlJBTUVCVUZGRVIsIGJvdW5kVmFsdWUpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIGdsLlJFTkRFUkJVRkZFUl9CSU5ESU5HOlxyXG4gICAgICAgIGdsLmJpbmRSZW5kZXJidWZmZXIoZ2wuUkVOREVSQlVGRkVSLCBib3VuZFZhbHVlKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSBnbC5URVhUVVJFX0JJTkRJTkdfMkQ6XHJcbiAgICAgICAgdmFyIHRleHR1cmVVbml0ID0gYmluZGluZ3NbKytpXTtcclxuICAgICAgICBpZiAodGV4dHVyZVVuaXQgPCBnbC5URVhUVVJFMCB8fCB0ZXh0dXJlVW5pdCA+IGdsLlRFWFRVUkUzMSlcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGdsLmFjdGl2ZVRleHR1cmUodGV4dHVyZVVuaXQpO1xyXG4gICAgICAgIGdsLmJpbmRUZXh0dXJlKGdsLlRFWFRVUkVfMkQsIGJvdW5kVmFsdWUpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIGdsLlRFWFRVUkVfQklORElOR19DVUJFX01BUDpcclxuICAgICAgICB2YXIgdGV4dHVyZVVuaXQgPSBiaW5kaW5nc1srK2ldO1xyXG4gICAgICAgIGlmICh0ZXh0dXJlVW5pdCA8IGdsLlRFWFRVUkUwIHx8IHRleHR1cmVVbml0ID4gZ2wuVEVYVFVSRTMxKVxyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgZ2wuYWN0aXZlVGV4dHVyZSh0ZXh0dXJlVW5pdCk7XHJcbiAgICAgICAgZ2wuYmluZFRleHR1cmUoZ2wuVEVYVFVSRV9DVUJFX01BUCwgYm91bmRWYWx1ZSk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgZ2wuVklFV1BPUlQ6XHJcbiAgICAgICAgZ2wudmlld3BvcnQoYm91bmRWYWx1ZVswXSwgYm91bmRWYWx1ZVsxXSwgYm91bmRWYWx1ZVsyXSwgYm91bmRWYWx1ZVszXSk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgZ2wuQkxFTkQ6XHJcbiAgICAgIGNhc2UgZ2wuQ1VMTF9GQUNFOlxyXG4gICAgICBjYXNlIGdsLkRFUFRIX1RFU1Q6XHJcbiAgICAgIGNhc2UgZ2wuU0NJU1NPUl9URVNUOlxyXG4gICAgICBjYXNlIGdsLlNURU5DSUxfVEVTVDpcclxuICAgICAgICBpZiAoYm91bmRWYWx1ZSkge1xyXG4gICAgICAgICAgZ2wuZW5hYmxlKGJpbmRpbmcpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBnbC5kaXNhYmxlKGJpbmRpbmcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBicmVhaztcclxuICAgICAgZGVmYXVsdDpcclxuICAgICAgICBjb25zb2xlLmxvZyhcIk5vIEdMIHJlc3RvcmUgYmVoYXZpb3IgZm9yIDB4XCIgKyBiaW5kaW5nLnRvU3RyaW5nKDE2KSk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGFjdGl2ZVRleHR1cmUpIHtcclxuICAgICAgZ2wuYWN0aXZlVGV4dHVyZShhY3RpdmVUZXh0dXJlKTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gV0dMVVByZXNlcnZlR0xTdGF0ZTtcclxufSx7fV0sNzpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XHJcbi8qXHJcbiAqIENvcHlyaWdodCAyMDE1IEdvb2dsZSBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuXHJcbnZhciBEaXN0b3J0aW9uID0gX2RlcmVxXygnLi9kaXN0b3J0aW9uL2Rpc3RvcnRpb24uanMnKTtcclxudmFyIE1hdGhVdGlsID0gX2RlcmVxXygnLi9tYXRoLXV0aWwuanMnKTtcclxudmFyIFV0aWwgPSBfZGVyZXFfKCcuL3V0aWwuanMnKTtcclxuXHJcbmZ1bmN0aW9uIERldmljZShwYXJhbXMpIHtcclxuICB0aGlzLndpZHRoID0gcGFyYW1zLndpZHRoIHx8IFV0aWwuZ2V0U2NyZWVuV2lkdGgoKTtcclxuICB0aGlzLmhlaWdodCA9IHBhcmFtcy5oZWlnaHQgfHwgVXRpbC5nZXRTY3JlZW5IZWlnaHQoKTtcclxuICB0aGlzLndpZHRoTWV0ZXJzID0gcGFyYW1zLndpZHRoTWV0ZXJzO1xyXG4gIHRoaXMuaGVpZ2h0TWV0ZXJzID0gcGFyYW1zLmhlaWdodE1ldGVycztcclxuICB0aGlzLmJldmVsTWV0ZXJzID0gcGFyYW1zLmJldmVsTWV0ZXJzO1xyXG59XHJcblxyXG5cclxuLy8gRmFsbGJhY2sgQW5kcm9pZCBkZXZpY2UgKGJhc2VkIG9uIE5leHVzIDUgbWVhc3VyZW1lbnRzKSBmb3IgdXNlIHdoZW5cclxuLy8gd2UgY2FuJ3QgcmVjb2duaXplIGFuIEFuZHJvaWQgZGV2aWNlLlxyXG52YXIgREVGQVVMVF9BTkRST0lEID0gbmV3IERldmljZSh7XHJcbiAgd2lkdGhNZXRlcnM6IDAuMTEwLFxyXG4gIGhlaWdodE1ldGVyczogMC4wNjIsXHJcbiAgYmV2ZWxNZXRlcnM6IDAuMDA0XHJcbn0pO1xyXG5cclxuLy8gRmFsbGJhY2sgaU9TIGRldmljZSAoYmFzZWQgb24gaVBob25lNikgZm9yIHVzZSB3aGVuXHJcbi8vIHdlIGNhbid0IHJlY29nbml6ZSBhbiBBbmRyb2lkIGRldmljZS5cclxudmFyIERFRkFVTFRfSU9TID0gbmV3IERldmljZSh7XHJcbiAgd2lkdGhNZXRlcnM6IDAuMTAzOCxcclxuICBoZWlnaHRNZXRlcnM6IDAuMDU4NCxcclxuICBiZXZlbE1ldGVyczogMC4wMDRcclxufSk7XHJcblxyXG5cclxudmFyIFZpZXdlcnMgPSB7XHJcbiAgQ2FyZGJvYXJkVjE6IG5ldyBDYXJkYm9hcmRWaWV3ZXIoe1xyXG4gICAgaWQ6ICdDYXJkYm9hcmRWMScsXHJcbiAgICBsYWJlbDogJ0NhcmRib2FyZCBJL08gMjAxNCcsXHJcbiAgICBmb3Y6IDQwLFxyXG4gICAgaW50ZXJMZW5zRGlzdGFuY2U6IDAuMDYwLFxyXG4gICAgYmFzZWxpbmVMZW5zRGlzdGFuY2U6IDAuMDM1LFxyXG4gICAgc2NyZWVuTGVuc0Rpc3RhbmNlOiAwLjA0MixcclxuICAgIGRpc3RvcnRpb25Db2VmZmljaWVudHM6IFswLjQ0MSwgMC4xNTZdLFxyXG4gICAgaW52ZXJzZUNvZWZmaWNpZW50czogWy0wLjQ0MTAwMzUsIDAuNDI3NTYxNTUsIC0wLjQ4MDQ0MzksIDAuNTQ2MDEzOSxcclxuICAgICAgLTAuNTg4MjExODMsIDAuNTczMzkzOCwgLTAuNDgzMDMyMDIsIDAuMzMyOTkwODMsIC0wLjE3NTczODQxLFxyXG4gICAgICAwLjA2NTE3NzIsIC0wLjAxNDg4OTYzLCAwLjAwMTU1OTgzNF1cclxuICB9KSxcclxuICBDYXJkYm9hcmRWMjogbmV3IENhcmRib2FyZFZpZXdlcih7XHJcbiAgICBpZDogJ0NhcmRib2FyZFYyJyxcclxuICAgIGxhYmVsOiAnQ2FyZGJvYXJkIEkvTyAyMDE1JyxcclxuICAgIGZvdjogNjAsXHJcbiAgICBpbnRlckxlbnNEaXN0YW5jZTogMC4wNjQsXHJcbiAgICBiYXNlbGluZUxlbnNEaXN0YW5jZTogMC4wMzUsXHJcbiAgICBzY3JlZW5MZW5zRGlzdGFuY2U6IDAuMDM5LFxyXG4gICAgZGlzdG9ydGlvbkNvZWZmaWNpZW50czogWzAuMzQsIDAuNTVdLFxyXG4gICAgaW52ZXJzZUNvZWZmaWNpZW50czogWy0wLjMzODM2NzA0LCAtMC4xODE2MjE4NSwgMC44NjI2NTUsIC0xLjI0NjIwNTEsXHJcbiAgICAgIDEuMDU2MDYwMiwgLTAuNTgyMDgzMTcsIDAuMjE2MDkwNzgsIC0wLjA1NDQ0ODIzLCAwLjAwOTE3Nzk1NixcclxuICAgICAgLTkuOTA0MTY5RS00LCA2LjE4MzUzNUUtNSwgLTEuNjk4MTgwM0UtNl1cclxuICB9KVxyXG59O1xyXG5cclxuXHJcbnZhciBERUZBVUxUX0xFRlRfQ0VOVEVSID0ge3g6IDAuNSwgeTogMC41fTtcclxudmFyIERFRkFVTFRfUklHSFRfQ0VOVEVSID0ge3g6IDAuNSwgeTogMC41fTtcclxuXHJcbi8qKlxyXG4gKiBNYW5hZ2VzIGluZm9ybWF0aW9uIGFib3V0IHRoZSBkZXZpY2UgYW5kIHRoZSB2aWV3ZXIuXHJcbiAqXHJcbiAqIGRldmljZVBhcmFtcyBpbmRpY2F0ZXMgdGhlIHBhcmFtZXRlcnMgb2YgdGhlIGRldmljZSB0byB1c2UgKGdlbmVyYWxseVxyXG4gKiBvYnRhaW5lZCBmcm9tIGRwZGIuZ2V0RGV2aWNlUGFyYW1zKCkpLiBDYW4gYmUgbnVsbCB0byBtZWFuIG5vIGRldmljZVxyXG4gKiBwYXJhbXMgd2VyZSBmb3VuZC5cclxuICovXHJcbmZ1bmN0aW9uIERldmljZUluZm8oZGV2aWNlUGFyYW1zKSB7XHJcbiAgdGhpcy52aWV3ZXIgPSBWaWV3ZXJzLkNhcmRib2FyZFYyO1xyXG4gIHRoaXMudXBkYXRlRGV2aWNlUGFyYW1zKGRldmljZVBhcmFtcyk7XHJcbiAgdGhpcy5kaXN0b3J0aW9uID0gbmV3IERpc3RvcnRpb24odGhpcy52aWV3ZXIuZGlzdG9ydGlvbkNvZWZmaWNpZW50cyk7XHJcbn1cclxuXHJcbkRldmljZUluZm8ucHJvdG90eXBlLnVwZGF0ZURldmljZVBhcmFtcyA9IGZ1bmN0aW9uKGRldmljZVBhcmFtcykge1xyXG4gIHRoaXMuZGV2aWNlID0gdGhpcy5kZXRlcm1pbmVEZXZpY2VfKGRldmljZVBhcmFtcykgfHwgdGhpcy5kZXZpY2U7XHJcbn07XHJcblxyXG5EZXZpY2VJbmZvLnByb3RvdHlwZS5nZXREZXZpY2UgPSBmdW5jdGlvbigpIHtcclxuICByZXR1cm4gdGhpcy5kZXZpY2U7XHJcbn07XHJcblxyXG5EZXZpY2VJbmZvLnByb3RvdHlwZS5zZXRWaWV3ZXIgPSBmdW5jdGlvbih2aWV3ZXIpIHtcclxuICB0aGlzLnZpZXdlciA9IHZpZXdlcjtcclxuICB0aGlzLmRpc3RvcnRpb24gPSBuZXcgRGlzdG9ydGlvbih0aGlzLnZpZXdlci5kaXN0b3J0aW9uQ29lZmZpY2llbnRzKTtcclxufTtcclxuXHJcbkRldmljZUluZm8ucHJvdG90eXBlLmRldGVybWluZURldmljZV8gPSBmdW5jdGlvbihkZXZpY2VQYXJhbXMpIHtcclxuICBpZiAoIWRldmljZVBhcmFtcykge1xyXG4gICAgLy8gTm8gcGFyYW1ldGVycywgc28gdXNlIGEgZGVmYXVsdC5cclxuICAgIGlmIChVdGlsLmlzSU9TKCkpIHtcclxuICAgICAgY29uc29sZS53YXJuKCdVc2luZyBmYWxsYmFjayBpT1MgZGV2aWNlIG1lYXN1cmVtZW50cy4nKTtcclxuICAgICAgcmV0dXJuIERFRkFVTFRfSU9TO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uc29sZS53YXJuKCdVc2luZyBmYWxsYmFjayBBbmRyb2lkIGRldmljZSBtZWFzdXJlbWVudHMuJyk7XHJcbiAgICAgIHJldHVybiBERUZBVUxUX0FORFJPSUQ7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBDb21wdXRlIGRldmljZSBzY3JlZW4gZGltZW5zaW9ucyBiYXNlZCBvbiBkZXZpY2VQYXJhbXMuXHJcbiAgdmFyIE1FVEVSU19QRVJfSU5DSCA9IDAuMDI1NDtcclxuICB2YXIgbWV0ZXJzUGVyUGl4ZWxYID0gTUVURVJTX1BFUl9JTkNIIC8gZGV2aWNlUGFyYW1zLnhkcGk7XHJcbiAgdmFyIG1ldGVyc1BlclBpeGVsWSA9IE1FVEVSU19QRVJfSU5DSCAvIGRldmljZVBhcmFtcy55ZHBpO1xyXG4gIHZhciB3aWR0aCA9IFV0aWwuZ2V0U2NyZWVuV2lkdGgoKTtcclxuICB2YXIgaGVpZ2h0ID0gVXRpbC5nZXRTY3JlZW5IZWlnaHQoKTtcclxuICByZXR1cm4gbmV3IERldmljZSh7XHJcbiAgICB3aWR0aE1ldGVyczogbWV0ZXJzUGVyUGl4ZWxYICogd2lkdGgsXHJcbiAgICBoZWlnaHRNZXRlcnM6IG1ldGVyc1BlclBpeGVsWSAqIGhlaWdodCxcclxuICAgIGJldmVsTWV0ZXJzOiBkZXZpY2VQYXJhbXMuYmV2ZWxNbSAqIDAuMDAxLFxyXG4gIH0pO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIENhbGN1bGF0ZXMgZmllbGQgb2YgdmlldyBmb3IgdGhlIGxlZnQgZXllLlxyXG4gKi9cclxuRGV2aWNlSW5mby5wcm90b3R5cGUuZ2V0RGlzdG9ydGVkRmllbGRPZlZpZXdMZWZ0RXllID0gZnVuY3Rpb24oKSB7XHJcbiAgdmFyIHZpZXdlciA9IHRoaXMudmlld2VyO1xyXG4gIHZhciBkZXZpY2UgPSB0aGlzLmRldmljZTtcclxuICB2YXIgZGlzdG9ydGlvbiA9IHRoaXMuZGlzdG9ydGlvbjtcclxuXHJcbiAgLy8gRGV2aWNlLmhlaWdodCBhbmQgZGV2aWNlLndpZHRoIGZvciBkZXZpY2UgaW4gcG9ydHJhaXQgbW9kZSwgc28gdHJhbnNwb3NlLlxyXG4gIHZhciBleWVUb1NjcmVlbkRpc3RhbmNlID0gdmlld2VyLnNjcmVlbkxlbnNEaXN0YW5jZTtcclxuXHJcbiAgdmFyIG91dGVyRGlzdCA9IChkZXZpY2Uud2lkdGhNZXRlcnMgLSB2aWV3ZXIuaW50ZXJMZW5zRGlzdGFuY2UpIC8gMjtcclxuICB2YXIgaW5uZXJEaXN0ID0gdmlld2VyLmludGVyTGVuc0Rpc3RhbmNlIC8gMjtcclxuICB2YXIgYm90dG9tRGlzdCA9IHZpZXdlci5iYXNlbGluZUxlbnNEaXN0YW5jZSAtIGRldmljZS5iZXZlbE1ldGVycztcclxuICB2YXIgdG9wRGlzdCA9IGRldmljZS5oZWlnaHRNZXRlcnMgLSBib3R0b21EaXN0O1xyXG5cclxuICB2YXIgb3V0ZXJBbmdsZSA9IE1hdGhVdGlsLnJhZFRvRGVnICogTWF0aC5hdGFuKFxyXG4gICAgICBkaXN0b3J0aW9uLmRpc3RvcnQob3V0ZXJEaXN0IC8gZXllVG9TY3JlZW5EaXN0YW5jZSkpO1xyXG4gIHZhciBpbm5lckFuZ2xlID0gTWF0aFV0aWwucmFkVG9EZWcgKiBNYXRoLmF0YW4oXHJcbiAgICAgIGRpc3RvcnRpb24uZGlzdG9ydChpbm5lckRpc3QgLyBleWVUb1NjcmVlbkRpc3RhbmNlKSk7XHJcbiAgdmFyIGJvdHRvbUFuZ2xlID0gTWF0aFV0aWwucmFkVG9EZWcgKiBNYXRoLmF0YW4oXHJcbiAgICAgIGRpc3RvcnRpb24uZGlzdG9ydChib3R0b21EaXN0IC8gZXllVG9TY3JlZW5EaXN0YW5jZSkpO1xyXG4gIHZhciB0b3BBbmdsZSA9IE1hdGhVdGlsLnJhZFRvRGVnICogTWF0aC5hdGFuKFxyXG4gICAgICBkaXN0b3J0aW9uLmRpc3RvcnQodG9wRGlzdCAvIGV5ZVRvU2NyZWVuRGlzdGFuY2UpKTtcclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIGxlZnREZWdyZWVzOiBNYXRoLm1pbihvdXRlckFuZ2xlLCB2aWV3ZXIuZm92KSxcclxuICAgIHJpZ2h0RGVncmVlczogTWF0aC5taW4oaW5uZXJBbmdsZSwgdmlld2VyLmZvdiksXHJcbiAgICBkb3duRGVncmVlczogTWF0aC5taW4oYm90dG9tQW5nbGUsIHZpZXdlci5mb3YpLFxyXG4gICAgdXBEZWdyZWVzOiBNYXRoLm1pbih0b3BBbmdsZSwgdmlld2VyLmZvdilcclxuICB9O1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIENhbGN1bGF0ZXMgdGhlIHRhbi1hbmdsZXMgZnJvbSB0aGUgbWF4aW11bSBGT1YgZm9yIHRoZSBsZWZ0IGV5ZSBmb3IgdGhlXHJcbiAqIGN1cnJlbnQgZGV2aWNlIGFuZCBzY3JlZW4gcGFyYW1ldGVycy5cclxuICovXHJcbkRldmljZUluZm8ucHJvdG90eXBlLmdldExlZnRFeWVWaXNpYmxlVGFuQW5nbGVzID0gZnVuY3Rpb24oKSB7XHJcbiAgdmFyIHZpZXdlciA9IHRoaXMudmlld2VyO1xyXG4gIHZhciBkZXZpY2UgPSB0aGlzLmRldmljZTtcclxuICB2YXIgZGlzdG9ydGlvbiA9IHRoaXMuZGlzdG9ydGlvbjtcclxuXHJcbiAgLy8gVGFuLWFuZ2xlcyBmcm9tIHRoZSBtYXggRk9WLlxyXG4gIHZhciBmb3ZMZWZ0ID0gTWF0aC50YW4oLU1hdGhVdGlsLmRlZ1RvUmFkICogdmlld2VyLmZvdik7XHJcbiAgdmFyIGZvdlRvcCA9IE1hdGgudGFuKE1hdGhVdGlsLmRlZ1RvUmFkICogdmlld2VyLmZvdik7XHJcbiAgdmFyIGZvdlJpZ2h0ID0gTWF0aC50YW4oTWF0aFV0aWwuZGVnVG9SYWQgKiB2aWV3ZXIuZm92KTtcclxuICB2YXIgZm92Qm90dG9tID0gTWF0aC50YW4oLU1hdGhVdGlsLmRlZ1RvUmFkICogdmlld2VyLmZvdik7XHJcbiAgLy8gVmlld3BvcnQgc2l6ZS5cclxuICB2YXIgaGFsZldpZHRoID0gZGV2aWNlLndpZHRoTWV0ZXJzIC8gNDtcclxuICB2YXIgaGFsZkhlaWdodCA9IGRldmljZS5oZWlnaHRNZXRlcnMgLyAyO1xyXG4gIC8vIFZpZXdwb3J0IGNlbnRlciwgbWVhc3VyZWQgZnJvbSBsZWZ0IGxlbnMgcG9zaXRpb24uXHJcbiAgdmFyIHZlcnRpY2FsTGVuc09mZnNldCA9ICh2aWV3ZXIuYmFzZWxpbmVMZW5zRGlzdGFuY2UgLSBkZXZpY2UuYmV2ZWxNZXRlcnMgLSBoYWxmSGVpZ2h0KTtcclxuICB2YXIgY2VudGVyWCA9IHZpZXdlci5pbnRlckxlbnNEaXN0YW5jZSAvIDIgLSBoYWxmV2lkdGg7XHJcbiAgdmFyIGNlbnRlclkgPSAtdmVydGljYWxMZW5zT2Zmc2V0O1xyXG4gIHZhciBjZW50ZXJaID0gdmlld2VyLnNjcmVlbkxlbnNEaXN0YW5jZTtcclxuICAvLyBUYW4tYW5nbGVzIG9mIHRoZSB2aWV3cG9ydCBlZGdlcywgYXMgc2VlbiB0aHJvdWdoIHRoZSBsZW5zLlxyXG4gIHZhciBzY3JlZW5MZWZ0ID0gZGlzdG9ydGlvbi5kaXN0b3J0KChjZW50ZXJYIC0gaGFsZldpZHRoKSAvIGNlbnRlclopO1xyXG4gIHZhciBzY3JlZW5Ub3AgPSBkaXN0b3J0aW9uLmRpc3RvcnQoKGNlbnRlclkgKyBoYWxmSGVpZ2h0KSAvIGNlbnRlclopO1xyXG4gIHZhciBzY3JlZW5SaWdodCA9IGRpc3RvcnRpb24uZGlzdG9ydCgoY2VudGVyWCArIGhhbGZXaWR0aCkgLyBjZW50ZXJaKTtcclxuICB2YXIgc2NyZWVuQm90dG9tID0gZGlzdG9ydGlvbi5kaXN0b3J0KChjZW50ZXJZIC0gaGFsZkhlaWdodCkgLyBjZW50ZXJaKTtcclxuICAvLyBDb21wYXJlIHRoZSB0d28gc2V0cyBvZiB0YW4tYW5nbGVzIGFuZCB0YWtlIHRoZSB2YWx1ZSBjbG9zZXIgdG8gemVybyBvbiBlYWNoIHNpZGUuXHJcbiAgdmFyIHJlc3VsdCA9IG5ldyBGbG9hdDMyQXJyYXkoNCk7XHJcbiAgcmVzdWx0WzBdID0gTWF0aC5tYXgoZm92TGVmdCwgc2NyZWVuTGVmdCk7XHJcbiAgcmVzdWx0WzFdID0gTWF0aC5taW4oZm92VG9wLCBzY3JlZW5Ub3ApO1xyXG4gIHJlc3VsdFsyXSA9IE1hdGgubWluKGZvdlJpZ2h0LCBzY3JlZW5SaWdodCk7XHJcbiAgcmVzdWx0WzNdID0gTWF0aC5tYXgoZm92Qm90dG9tLCBzY3JlZW5Cb3R0b20pO1xyXG4gIHJldHVybiByZXN1bHQ7XHJcbn07XHJcblxyXG4vKipcclxuICogQ2FsY3VsYXRlcyB0aGUgdGFuLWFuZ2xlcyBmcm9tIHRoZSBtYXhpbXVtIEZPViBmb3IgdGhlIGxlZnQgZXllIGZvciB0aGVcclxuICogY3VycmVudCBkZXZpY2UgYW5kIHNjcmVlbiBwYXJhbWV0ZXJzLCBhc3N1bWluZyBubyBsZW5zZXMuXHJcbiAqL1xyXG5EZXZpY2VJbmZvLnByb3RvdHlwZS5nZXRMZWZ0RXllTm9MZW5zVGFuQW5nbGVzID0gZnVuY3Rpb24oKSB7XHJcbiAgdmFyIHZpZXdlciA9IHRoaXMudmlld2VyO1xyXG4gIHZhciBkZXZpY2UgPSB0aGlzLmRldmljZTtcclxuICB2YXIgZGlzdG9ydGlvbiA9IHRoaXMuZGlzdG9ydGlvbjtcclxuXHJcbiAgdmFyIHJlc3VsdCA9IG5ldyBGbG9hdDMyQXJyYXkoNCk7XHJcbiAgLy8gVGFuLWFuZ2xlcyBmcm9tIHRoZSBtYXggRk9WLlxyXG4gIHZhciBmb3ZMZWZ0ID0gZGlzdG9ydGlvbi5kaXN0b3J0SW52ZXJzZShNYXRoLnRhbigtTWF0aFV0aWwuZGVnVG9SYWQgKiB2aWV3ZXIuZm92KSk7XHJcbiAgdmFyIGZvdlRvcCA9IGRpc3RvcnRpb24uZGlzdG9ydEludmVyc2UoTWF0aC50YW4oTWF0aFV0aWwuZGVnVG9SYWQgKiB2aWV3ZXIuZm92KSk7XHJcbiAgdmFyIGZvdlJpZ2h0ID0gZGlzdG9ydGlvbi5kaXN0b3J0SW52ZXJzZShNYXRoLnRhbihNYXRoVXRpbC5kZWdUb1JhZCAqIHZpZXdlci5mb3YpKTtcclxuICB2YXIgZm92Qm90dG9tID0gZGlzdG9ydGlvbi5kaXN0b3J0SW52ZXJzZShNYXRoLnRhbigtTWF0aFV0aWwuZGVnVG9SYWQgKiB2aWV3ZXIuZm92KSk7XHJcbiAgLy8gVmlld3BvcnQgc2l6ZS5cclxuICB2YXIgaGFsZldpZHRoID0gZGV2aWNlLndpZHRoTWV0ZXJzIC8gNDtcclxuICB2YXIgaGFsZkhlaWdodCA9IGRldmljZS5oZWlnaHRNZXRlcnMgLyAyO1xyXG4gIC8vIFZpZXdwb3J0IGNlbnRlciwgbWVhc3VyZWQgZnJvbSBsZWZ0IGxlbnMgcG9zaXRpb24uXHJcbiAgdmFyIHZlcnRpY2FsTGVuc09mZnNldCA9ICh2aWV3ZXIuYmFzZWxpbmVMZW5zRGlzdGFuY2UgLSBkZXZpY2UuYmV2ZWxNZXRlcnMgLSBoYWxmSGVpZ2h0KTtcclxuICB2YXIgY2VudGVyWCA9IHZpZXdlci5pbnRlckxlbnNEaXN0YW5jZSAvIDIgLSBoYWxmV2lkdGg7XHJcbiAgdmFyIGNlbnRlclkgPSAtdmVydGljYWxMZW5zT2Zmc2V0O1xyXG4gIHZhciBjZW50ZXJaID0gdmlld2VyLnNjcmVlbkxlbnNEaXN0YW5jZTtcclxuICAvLyBUYW4tYW5nbGVzIG9mIHRoZSB2aWV3cG9ydCBlZGdlcywgYXMgc2VlbiB0aHJvdWdoIHRoZSBsZW5zLlxyXG4gIHZhciBzY3JlZW5MZWZ0ID0gKGNlbnRlclggLSBoYWxmV2lkdGgpIC8gY2VudGVyWjtcclxuICB2YXIgc2NyZWVuVG9wID0gKGNlbnRlclkgKyBoYWxmSGVpZ2h0KSAvIGNlbnRlclo7XHJcbiAgdmFyIHNjcmVlblJpZ2h0ID0gKGNlbnRlclggKyBoYWxmV2lkdGgpIC8gY2VudGVyWjtcclxuICB2YXIgc2NyZWVuQm90dG9tID0gKGNlbnRlclkgLSBoYWxmSGVpZ2h0KSAvIGNlbnRlclo7XHJcbiAgLy8gQ29tcGFyZSB0aGUgdHdvIHNldHMgb2YgdGFuLWFuZ2xlcyBhbmQgdGFrZSB0aGUgdmFsdWUgY2xvc2VyIHRvIHplcm8gb24gZWFjaCBzaWRlLlxyXG4gIHJlc3VsdFswXSA9IE1hdGgubWF4KGZvdkxlZnQsIHNjcmVlbkxlZnQpO1xyXG4gIHJlc3VsdFsxXSA9IE1hdGgubWluKGZvdlRvcCwgc2NyZWVuVG9wKTtcclxuICByZXN1bHRbMl0gPSBNYXRoLm1pbihmb3ZSaWdodCwgc2NyZWVuUmlnaHQpO1xyXG4gIHJlc3VsdFszXSA9IE1hdGgubWF4KGZvdkJvdHRvbSwgc2NyZWVuQm90dG9tKTtcclxuICByZXR1cm4gcmVzdWx0O1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIENhbGN1bGF0ZXMgdGhlIHNjcmVlbiByZWN0YW5nbGUgdmlzaWJsZSBmcm9tIHRoZSBsZWZ0IGV5ZSBmb3IgdGhlXHJcbiAqIGN1cnJlbnQgZGV2aWNlIGFuZCBzY3JlZW4gcGFyYW1ldGVycy5cclxuICovXHJcbkRldmljZUluZm8ucHJvdG90eXBlLmdldExlZnRFeWVWaXNpYmxlU2NyZWVuUmVjdCA9IGZ1bmN0aW9uKHVuZGlzdG9ydGVkRnJ1c3R1bSkge1xyXG4gIHZhciB2aWV3ZXIgPSB0aGlzLnZpZXdlcjtcclxuICB2YXIgZGV2aWNlID0gdGhpcy5kZXZpY2U7XHJcblxyXG4gIHZhciBkaXN0ID0gdmlld2VyLnNjcmVlbkxlbnNEaXN0YW5jZTtcclxuICB2YXIgZXllWCA9IChkZXZpY2Uud2lkdGhNZXRlcnMgLSB2aWV3ZXIuaW50ZXJMZW5zRGlzdGFuY2UpIC8gMjtcclxuICB2YXIgZXllWSA9IHZpZXdlci5iYXNlbGluZUxlbnNEaXN0YW5jZSAtIGRldmljZS5iZXZlbE1ldGVycztcclxuICB2YXIgbGVmdCA9ICh1bmRpc3RvcnRlZEZydXN0dW1bMF0gKiBkaXN0ICsgZXllWCkgLyBkZXZpY2Uud2lkdGhNZXRlcnM7XHJcbiAgdmFyIHRvcCA9ICh1bmRpc3RvcnRlZEZydXN0dW1bMV0gKiBkaXN0ICsgZXllWSkgLyBkZXZpY2UuaGVpZ2h0TWV0ZXJzO1xyXG4gIHZhciByaWdodCA9ICh1bmRpc3RvcnRlZEZydXN0dW1bMl0gKiBkaXN0ICsgZXllWCkgLyBkZXZpY2Uud2lkdGhNZXRlcnM7XHJcbiAgdmFyIGJvdHRvbSA9ICh1bmRpc3RvcnRlZEZydXN0dW1bM10gKiBkaXN0ICsgZXllWSkgLyBkZXZpY2UuaGVpZ2h0TWV0ZXJzO1xyXG4gIHJldHVybiB7XHJcbiAgICB4OiBsZWZ0LFxyXG4gICAgeTogYm90dG9tLFxyXG4gICAgd2lkdGg6IHJpZ2h0IC0gbGVmdCxcclxuICAgIGhlaWdodDogdG9wIC0gYm90dG9tXHJcbiAgfTtcclxufTtcclxuXHJcbkRldmljZUluZm8ucHJvdG90eXBlLmdldEZpZWxkT2ZWaWV3TGVmdEV5ZSA9IGZ1bmN0aW9uKG9wdF9pc1VuZGlzdG9ydGVkKSB7XHJcbiAgcmV0dXJuIG9wdF9pc1VuZGlzdG9ydGVkID8gdGhpcy5nZXRVbmRpc3RvcnRlZEZpZWxkT2ZWaWV3TGVmdEV5ZSgpIDpcclxuICAgICAgdGhpcy5nZXREaXN0b3J0ZWRGaWVsZE9mVmlld0xlZnRFeWUoKTtcclxufTtcclxuXHJcbkRldmljZUluZm8ucHJvdG90eXBlLmdldEZpZWxkT2ZWaWV3UmlnaHRFeWUgPSBmdW5jdGlvbihvcHRfaXNVbmRpc3RvcnRlZCkge1xyXG4gIHZhciBmb3YgPSB0aGlzLmdldEZpZWxkT2ZWaWV3TGVmdEV5ZShvcHRfaXNVbmRpc3RvcnRlZCk7XHJcbiAgcmV0dXJuIHtcclxuICAgIGxlZnREZWdyZWVzOiBmb3YucmlnaHREZWdyZWVzLFxyXG4gICAgcmlnaHREZWdyZWVzOiBmb3YubGVmdERlZ3JlZXMsXHJcbiAgICB1cERlZ3JlZXM6IGZvdi51cERlZ3JlZXMsXHJcbiAgICBkb3duRGVncmVlczogZm92LmRvd25EZWdyZWVzXHJcbiAgfTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBDYWxjdWxhdGVzIHVuZGlzdG9ydGVkIGZpZWxkIG9mIHZpZXcgZm9yIHRoZSBsZWZ0IGV5ZS5cclxuICovXHJcbkRldmljZUluZm8ucHJvdG90eXBlLmdldFVuZGlzdG9ydGVkRmllbGRPZlZpZXdMZWZ0RXllID0gZnVuY3Rpb24oKSB7XHJcbiAgdmFyIHAgPSB0aGlzLmdldFVuZGlzdG9ydGVkUGFyYW1zXygpO1xyXG5cclxuICByZXR1cm4ge1xyXG4gICAgbGVmdERlZ3JlZXM6IE1hdGhVdGlsLnJhZFRvRGVnICogTWF0aC5hdGFuKHAub3V0ZXJEaXN0KSxcclxuICAgIHJpZ2h0RGVncmVlczogTWF0aFV0aWwucmFkVG9EZWcgKiBNYXRoLmF0YW4ocC5pbm5lckRpc3QpLFxyXG4gICAgZG93bkRlZ3JlZXM6IE1hdGhVdGlsLnJhZFRvRGVnICogTWF0aC5hdGFuKHAuYm90dG9tRGlzdCksXHJcbiAgICB1cERlZ3JlZXM6IE1hdGhVdGlsLnJhZFRvRGVnICogTWF0aC5hdGFuKHAudG9wRGlzdClcclxuICB9O1xyXG59O1xyXG5cclxuRGV2aWNlSW5mby5wcm90b3R5cGUuZ2V0VW5kaXN0b3J0ZWRWaWV3cG9ydExlZnRFeWUgPSBmdW5jdGlvbigpIHtcclxuICB2YXIgcCA9IHRoaXMuZ2V0VW5kaXN0b3J0ZWRQYXJhbXNfKCk7XHJcbiAgdmFyIHZpZXdlciA9IHRoaXMudmlld2VyO1xyXG4gIHZhciBkZXZpY2UgPSB0aGlzLmRldmljZTtcclxuXHJcbiAgLy8gRGlzdGFuY2VzIHN0b3JlZCBpbiBsb2NhbCB2YXJpYWJsZXMgYXJlIGluIHRhbi1hbmdsZSB1bml0cyB1bmxlc3Mgb3RoZXJ3aXNlXHJcbiAgLy8gbm90ZWQuXHJcbiAgdmFyIGV5ZVRvU2NyZWVuRGlzdGFuY2UgPSB2aWV3ZXIuc2NyZWVuTGVuc0Rpc3RhbmNlO1xyXG4gIHZhciBzY3JlZW5XaWR0aCA9IGRldmljZS53aWR0aE1ldGVycyAvIGV5ZVRvU2NyZWVuRGlzdGFuY2U7XHJcbiAgdmFyIHNjcmVlbkhlaWdodCA9IGRldmljZS5oZWlnaHRNZXRlcnMgLyBleWVUb1NjcmVlbkRpc3RhbmNlO1xyXG4gIHZhciB4UHhQZXJUYW5BbmdsZSA9IGRldmljZS53aWR0aCAvIHNjcmVlbldpZHRoO1xyXG4gIHZhciB5UHhQZXJUYW5BbmdsZSA9IGRldmljZS5oZWlnaHQgLyBzY3JlZW5IZWlnaHQ7XHJcblxyXG4gIHZhciB4ID0gTWF0aC5yb3VuZCgocC5leWVQb3NYIC0gcC5vdXRlckRpc3QpICogeFB4UGVyVGFuQW5nbGUpO1xyXG4gIHZhciB5ID0gTWF0aC5yb3VuZCgocC5leWVQb3NZIC0gcC5ib3R0b21EaXN0KSAqIHlQeFBlclRhbkFuZ2xlKTtcclxuICByZXR1cm4ge1xyXG4gICAgeDogeCxcclxuICAgIHk6IHksXHJcbiAgICB3aWR0aDogTWF0aC5yb3VuZCgocC5leWVQb3NYICsgcC5pbm5lckRpc3QpICogeFB4UGVyVGFuQW5nbGUpIC0geCxcclxuICAgIGhlaWdodDogTWF0aC5yb3VuZCgocC5leWVQb3NZICsgcC50b3BEaXN0KSAqIHlQeFBlclRhbkFuZ2xlKSAtIHlcclxuICB9O1xyXG59O1xyXG5cclxuRGV2aWNlSW5mby5wcm90b3R5cGUuZ2V0VW5kaXN0b3J0ZWRQYXJhbXNfID0gZnVuY3Rpb24oKSB7XHJcbiAgdmFyIHZpZXdlciA9IHRoaXMudmlld2VyO1xyXG4gIHZhciBkZXZpY2UgPSB0aGlzLmRldmljZTtcclxuICB2YXIgZGlzdG9ydGlvbiA9IHRoaXMuZGlzdG9ydGlvbjtcclxuXHJcbiAgLy8gTW9zdCBvZiB0aGVzZSB2YXJpYWJsZXMgaW4gdGFuLWFuZ2xlIHVuaXRzLlxyXG4gIHZhciBleWVUb1NjcmVlbkRpc3RhbmNlID0gdmlld2VyLnNjcmVlbkxlbnNEaXN0YW5jZTtcclxuICB2YXIgaGFsZkxlbnNEaXN0YW5jZSA9IHZpZXdlci5pbnRlckxlbnNEaXN0YW5jZSAvIDIgLyBleWVUb1NjcmVlbkRpc3RhbmNlO1xyXG4gIHZhciBzY3JlZW5XaWR0aCA9IGRldmljZS53aWR0aE1ldGVycyAvIGV5ZVRvU2NyZWVuRGlzdGFuY2U7XHJcbiAgdmFyIHNjcmVlbkhlaWdodCA9IGRldmljZS5oZWlnaHRNZXRlcnMgLyBleWVUb1NjcmVlbkRpc3RhbmNlO1xyXG5cclxuICB2YXIgZXllUG9zWCA9IHNjcmVlbldpZHRoIC8gMiAtIGhhbGZMZW5zRGlzdGFuY2U7XHJcbiAgdmFyIGV5ZVBvc1kgPSAodmlld2VyLmJhc2VsaW5lTGVuc0Rpc3RhbmNlIC0gZGV2aWNlLmJldmVsTWV0ZXJzKSAvIGV5ZVRvU2NyZWVuRGlzdGFuY2U7XHJcblxyXG4gIHZhciBtYXhGb3YgPSB2aWV3ZXIuZm92O1xyXG4gIHZhciB2aWV3ZXJNYXggPSBkaXN0b3J0aW9uLmRpc3RvcnRJbnZlcnNlKE1hdGgudGFuKE1hdGhVdGlsLmRlZ1RvUmFkICogbWF4Rm92KSk7XHJcbiAgdmFyIG91dGVyRGlzdCA9IE1hdGgubWluKGV5ZVBvc1gsIHZpZXdlck1heCk7XHJcbiAgdmFyIGlubmVyRGlzdCA9IE1hdGgubWluKGhhbGZMZW5zRGlzdGFuY2UsIHZpZXdlck1heCk7XHJcbiAgdmFyIGJvdHRvbURpc3QgPSBNYXRoLm1pbihleWVQb3NZLCB2aWV3ZXJNYXgpO1xyXG4gIHZhciB0b3BEaXN0ID0gTWF0aC5taW4oc2NyZWVuSGVpZ2h0IC0gZXllUG9zWSwgdmlld2VyTWF4KTtcclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIG91dGVyRGlzdDogb3V0ZXJEaXN0LFxyXG4gICAgaW5uZXJEaXN0OiBpbm5lckRpc3QsXHJcbiAgICB0b3BEaXN0OiB0b3BEaXN0LFxyXG4gICAgYm90dG9tRGlzdDogYm90dG9tRGlzdCxcclxuICAgIGV5ZVBvc1g6IGV5ZVBvc1gsXHJcbiAgICBleWVQb3NZOiBleWVQb3NZXHJcbiAgfTtcclxufTtcclxuXHJcblxyXG5mdW5jdGlvbiBDYXJkYm9hcmRWaWV3ZXIocGFyYW1zKSB7XHJcbiAgLy8gQSBtYWNoaW5lIHJlYWRhYmxlIElELlxyXG4gIHRoaXMuaWQgPSBwYXJhbXMuaWQ7XHJcbiAgLy8gQSBodW1hbiByZWFkYWJsZSBsYWJlbC5cclxuICB0aGlzLmxhYmVsID0gcGFyYW1zLmxhYmVsO1xyXG5cclxuICAvLyBGaWVsZCBvZiB2aWV3IGluIGRlZ3JlZXMgKHBlciBzaWRlKS5cclxuICB0aGlzLmZvdiA9IHBhcmFtcy5mb3Y7XHJcblxyXG4gIC8vIERpc3RhbmNlIGJldHdlZW4gbGVucyBjZW50ZXJzIGluIG1ldGVycy5cclxuICB0aGlzLmludGVyTGVuc0Rpc3RhbmNlID0gcGFyYW1zLmludGVyTGVuc0Rpc3RhbmNlO1xyXG4gIC8vIERpc3RhbmNlIGJldHdlZW4gdmlld2VyIGJhc2VsaW5lIGFuZCBsZW5zIGNlbnRlciBpbiBtZXRlcnMuXHJcbiAgdGhpcy5iYXNlbGluZUxlbnNEaXN0YW5jZSA9IHBhcmFtcy5iYXNlbGluZUxlbnNEaXN0YW5jZTtcclxuICAvLyBTY3JlZW4tdG8tbGVucyBkaXN0YW5jZSBpbiBtZXRlcnMuXHJcbiAgdGhpcy5zY3JlZW5MZW5zRGlzdGFuY2UgPSBwYXJhbXMuc2NyZWVuTGVuc0Rpc3RhbmNlO1xyXG5cclxuICAvLyBEaXN0b3J0aW9uIGNvZWZmaWNpZW50cy5cclxuICB0aGlzLmRpc3RvcnRpb25Db2VmZmljaWVudHMgPSBwYXJhbXMuZGlzdG9ydGlvbkNvZWZmaWNpZW50cztcclxuICAvLyBJbnZlcnNlIGRpc3RvcnRpb24gY29lZmZpY2llbnRzLlxyXG4gIC8vIFRPRE86IENhbGN1bGF0ZSB0aGVzZSBmcm9tIGRpc3RvcnRpb25Db2VmZmljaWVudHMgaW4gdGhlIGZ1dHVyZS5cclxuICB0aGlzLmludmVyc2VDb2VmZmljaWVudHMgPSBwYXJhbXMuaW52ZXJzZUNvZWZmaWNpZW50cztcclxufVxyXG5cclxuLy8gRXhwb3J0IHZpZXdlciBpbmZvcm1hdGlvbi5cclxuRGV2aWNlSW5mby5WaWV3ZXJzID0gVmlld2VycztcclxubW9kdWxlLmV4cG9ydHMgPSBEZXZpY2VJbmZvO1xyXG5cclxufSx7XCIuL2Rpc3RvcnRpb24vZGlzdG9ydGlvbi5qc1wiOjksXCIuL21hdGgtdXRpbC5qc1wiOjE0LFwiLi91dGlsLmpzXCI6MjJ9XSw4OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcclxuLypcclxuICogQ29weXJpZ2h0IDIwMTYgR29vZ2xlIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG52YXIgVlJEaXNwbGF5ID0gX2RlcmVxXygnLi9iYXNlLmpzJykuVlJEaXNwbGF5O1xyXG52YXIgSE1EVlJEZXZpY2UgPSBfZGVyZXFfKCcuL2Jhc2UuanMnKS5ITURWUkRldmljZTtcclxudmFyIFBvc2l0aW9uU2Vuc29yVlJEZXZpY2UgPSBfZGVyZXFfKCcuL2Jhc2UuanMnKS5Qb3NpdGlvblNlbnNvclZSRGV2aWNlO1xyXG5cclxuLyoqXHJcbiAqIFdyYXBzIGEgVlJEaXNwbGF5IGFuZCBleHBvc2VzIGl0IGFzIGEgSE1EVlJEZXZpY2VcclxuICovXHJcbmZ1bmN0aW9uIFZSRGlzcGxheUhNRERldmljZShkaXNwbGF5KSB7XHJcbiAgdGhpcy5kaXNwbGF5ID0gZGlzcGxheTtcclxuXHJcbiAgdGhpcy5oYXJkd2FyZVVuaXRJZCA9IGRpc3BsYXkuZGlzcGxheUlkO1xyXG4gIHRoaXMuZGV2aWNlSWQgPSAnd2VidnItcG9seWZpbGw6SE1EOicgKyBkaXNwbGF5LmRpc3BsYXlJZDtcclxuICB0aGlzLmRldmljZU5hbWUgPSBkaXNwbGF5LmRpc3BsYXlOYW1lICsgJyAoSE1EKSc7XHJcbn1cclxuVlJEaXNwbGF5SE1ERGV2aWNlLnByb3RvdHlwZSA9IG5ldyBITURWUkRldmljZSgpO1xyXG5cclxuVlJEaXNwbGF5SE1ERGV2aWNlLnByb3RvdHlwZS5nZXRFeWVQYXJhbWV0ZXJzID0gZnVuY3Rpb24od2hpY2hFeWUpIHtcclxuICB2YXIgZXllUGFyYW1ldGVycyA9IHRoaXMuZGlzcGxheS5nZXRFeWVQYXJhbWV0ZXJzKHdoaWNoRXllKTtcclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIGN1cnJlbnRGaWVsZE9mVmlldzogZXllUGFyYW1ldGVycy5maWVsZE9mVmlldyxcclxuICAgIG1heGltdW1GaWVsZE9mVmlldzogZXllUGFyYW1ldGVycy5maWVsZE9mVmlldyxcclxuICAgIG1pbmltdW1GaWVsZE9mVmlldzogZXllUGFyYW1ldGVycy5maWVsZE9mVmlldyxcclxuICAgIHJlY29tbWVuZGVkRmllbGRPZlZpZXc6IGV5ZVBhcmFtZXRlcnMuZmllbGRPZlZpZXcsXHJcbiAgICBleWVUcmFuc2xhdGlvbjogeyB4OiBleWVQYXJhbWV0ZXJzLm9mZnNldFswXSwgeTogZXllUGFyYW1ldGVycy5vZmZzZXRbMV0sIHo6IGV5ZVBhcmFtZXRlcnMub2Zmc2V0WzJdIH0sXHJcbiAgICByZW5kZXJSZWN0OiB7XHJcbiAgICAgIHg6ICh3aGljaEV5ZSA9PSAncmlnaHQnKSA/IGV5ZVBhcmFtZXRlcnMucmVuZGVyV2lkdGggOiAwLFxyXG4gICAgICB5OiAwLFxyXG4gICAgICB3aWR0aDogZXllUGFyYW1ldGVycy5yZW5kZXJXaWR0aCxcclxuICAgICAgaGVpZ2h0OiBleWVQYXJhbWV0ZXJzLnJlbmRlckhlaWdodFxyXG4gICAgfVxyXG4gIH07XHJcbn07XHJcblxyXG5WUkRpc3BsYXlITUREZXZpY2UucHJvdG90eXBlLnNldEZpZWxkT2ZWaWV3ID1cclxuICAgIGZ1bmN0aW9uKG9wdF9mb3ZMZWZ0LCBvcHRfZm92UmlnaHQsIG9wdF96TmVhciwgb3B0X3pGYXIpIHtcclxuICAvLyBOb3Qgc3VwcG9ydGVkLiBnZXRFeWVQYXJhbWV0ZXJzIHJlcG9ydHMgdGhhdCB0aGUgbWluLCBtYXgsIGFuZCByZWNvbW1lbmRlZFxyXG4gIC8vIEZvViBpcyBhbGwgdGhlIHNhbWUsIHNvIG5vIGFkanVzdG1lbnQgY2FuIGJlIG1hZGUuXHJcbn07XHJcblxyXG4vLyBUT0RPOiBOZWVkIHRvIGhvb2sgcmVxdWVzdEZ1bGxzY3JlZW4gdG8gc2VlIGlmIGEgd3JhcHBlZCBWUkRpc3BsYXkgd2FzIHBhc3NlZFxyXG4vLyBpbiBhcyBhbiBvcHRpb24uIElmIHNvIHdlIHNob3VsZCBwcmV2ZW50IHRoZSBkZWZhdWx0IGZ1bGxzY3JlZW4gYmVoYXZpb3IgYW5kXHJcbi8vIGNhbGwgVlJEaXNwbGF5LnJlcXVlc3RQcmVzZW50IGluc3RlYWQuXHJcblxyXG4vKipcclxuICogV3JhcHMgYSBWUkRpc3BsYXkgYW5kIGV4cG9zZXMgaXQgYXMgYSBQb3NpdGlvblNlbnNvclZSRGV2aWNlXHJcbiAqL1xyXG5mdW5jdGlvbiBWUkRpc3BsYXlQb3NpdGlvblNlbnNvckRldmljZShkaXNwbGF5KSB7XHJcbiAgdGhpcy5kaXNwbGF5ID0gZGlzcGxheTtcclxuXHJcbiAgdGhpcy5oYXJkd2FyZVVuaXRJZCA9IGRpc3BsYXkuZGlzcGxheUlkO1xyXG4gIHRoaXMuZGV2aWNlSWQgPSAnd2VidnItcG9seWZpbGw6UG9zaXRpb25TZW5zb3I6ICcgKyBkaXNwbGF5LmRpc3BsYXlJZDtcclxuICB0aGlzLmRldmljZU5hbWUgPSBkaXNwbGF5LmRpc3BsYXlOYW1lICsgJyAoUG9zaXRpb25TZW5zb3IpJztcclxufVxyXG5WUkRpc3BsYXlQb3NpdGlvblNlbnNvckRldmljZS5wcm90b3R5cGUgPSBuZXcgUG9zaXRpb25TZW5zb3JWUkRldmljZSgpO1xyXG5cclxuVlJEaXNwbGF5UG9zaXRpb25TZW5zb3JEZXZpY2UucHJvdG90eXBlLmdldFN0YXRlID0gZnVuY3Rpb24oKSB7XHJcbiAgdmFyIHBvc2UgPSB0aGlzLmRpc3BsYXkuZ2V0UG9zZSgpO1xyXG4gIHJldHVybiB7XHJcbiAgICBwb3NpdGlvbjogcG9zZS5wb3NpdGlvbiA/IHsgeDogcG9zZS5wb3NpdGlvblswXSwgeTogcG9zZS5wb3NpdGlvblsxXSwgejogcG9zZS5wb3NpdGlvblsyXSB9IDogbnVsbCxcclxuICAgIG9yaWVudGF0aW9uOiBwb3NlLm9yaWVudGF0aW9uID8geyB4OiBwb3NlLm9yaWVudGF0aW9uWzBdLCB5OiBwb3NlLm9yaWVudGF0aW9uWzFdLCB6OiBwb3NlLm9yaWVudGF0aW9uWzJdLCB3OiBwb3NlLm9yaWVudGF0aW9uWzNdIH0gOiBudWxsLFxyXG4gICAgbGluZWFyVmVsb2NpdHk6IG51bGwsXHJcbiAgICBsaW5lYXJBY2NlbGVyYXRpb246IG51bGwsXHJcbiAgICBhbmd1bGFyVmVsb2NpdHk6IG51bGwsXHJcbiAgICBhbmd1bGFyQWNjZWxlcmF0aW9uOiBudWxsXHJcbiAgfTtcclxufTtcclxuXHJcblZSRGlzcGxheVBvc2l0aW9uU2Vuc29yRGV2aWNlLnByb3RvdHlwZS5yZXNldFN0YXRlID0gZnVuY3Rpb24oKSB7XHJcbiAgcmV0dXJuIHRoaXMucG9zaXRpb25EZXZpY2UucmVzZXRQb3NlKCk7XHJcbn07XHJcblxyXG5cclxubW9kdWxlLmV4cG9ydHMuVlJEaXNwbGF5SE1ERGV2aWNlID0gVlJEaXNwbGF5SE1ERGV2aWNlO1xyXG5tb2R1bGUuZXhwb3J0cy5WUkRpc3BsYXlQb3NpdGlvblNlbnNvckRldmljZSA9IFZSRGlzcGxheVBvc2l0aW9uU2Vuc29yRGV2aWNlO1xyXG5cclxuXHJcbn0se1wiLi9iYXNlLmpzXCI6Mn1dLDk6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xyXG4vKipcclxuICogVE9ETyhzbXVzKTogSW1wbGVtZW50IGNvZWZmaWNpZW50IGludmVyc2lvbi5cclxuICovXHJcbmZ1bmN0aW9uIERpc3RvcnRpb24oY29lZmZpY2llbnRzKSB7XHJcbiAgdGhpcy5jb2VmZmljaWVudHMgPSBjb2VmZmljaWVudHM7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDYWxjdWxhdGVzIHRoZSBpbnZlcnNlIGRpc3RvcnRpb24gZm9yIGEgcmFkaXVzLlxyXG4gKiA8L3A+PHA+XHJcbiAqIEFsbG93cyB0byBjb21wdXRlIHRoZSBvcmlnaW5hbCB1bmRpc3RvcnRlZCByYWRpdXMgZnJvbSBhIGRpc3RvcnRlZCBvbmUuXHJcbiAqIFNlZSBhbHNvIGdldEFwcHJveGltYXRlSW52ZXJzZURpc3RvcnRpb24oKSBmb3IgYSBmYXN0ZXIgYnV0IHBvdGVudGlhbGx5XHJcbiAqIGxlc3MgYWNjdXJhdGUgbWV0aG9kLlxyXG4gKlxyXG4gKiBAcGFyYW0ge051bWJlcn0gcmFkaXVzIERpc3RvcnRlZCByYWRpdXMgZnJvbSB0aGUgbGVucyBjZW50ZXIgaW4gdGFuLWFuZ2xlIHVuaXRzLlxyXG4gKiBAcmV0dXJuIHtOdW1iZXJ9IFRoZSB1bmRpc3RvcnRlZCByYWRpdXMgaW4gdGFuLWFuZ2xlIHVuaXRzLlxyXG4gKi9cclxuRGlzdG9ydGlvbi5wcm90b3R5cGUuZGlzdG9ydEludmVyc2UgPSBmdW5jdGlvbihyYWRpdXMpIHtcclxuICAvLyBTZWNhbnQgbWV0aG9kLlxyXG4gIHZhciByMCA9IDA7XHJcbiAgdmFyIHIxID0gMTtcclxuICB2YXIgZHIwID0gcmFkaXVzIC0gdGhpcy5kaXN0b3J0KHIwKTtcclxuICB3aGlsZSAoTWF0aC5hYnMocjEgLSByMCkgPiAwLjAwMDEgLyoqIDAuMW1tICovKSB7XHJcbiAgICB2YXIgZHIxID0gcmFkaXVzIC0gdGhpcy5kaXN0b3J0KHIxKTtcclxuICAgIHZhciByMiA9IHIxIC0gZHIxICogKChyMSAtIHIwKSAvIChkcjEgLSBkcjApKTtcclxuICAgIHIwID0gcjE7XHJcbiAgICByMSA9IHIyO1xyXG4gICAgZHIwID0gZHIxO1xyXG4gIH1cclxuICByZXR1cm4gcjE7XHJcbn07XHJcblxyXG4vKipcclxuICogRGlzdG9ydHMgYSByYWRpdXMgYnkgaXRzIGRpc3RvcnRpb24gZmFjdG9yIGZyb20gdGhlIGNlbnRlciBvZiB0aGUgbGVuc2VzLlxyXG4gKlxyXG4gKiBAcGFyYW0ge051bWJlcn0gcmFkaXVzIFJhZGl1cyBmcm9tIHRoZSBsZW5zIGNlbnRlciBpbiB0YW4tYW5nbGUgdW5pdHMuXHJcbiAqIEByZXR1cm4ge051bWJlcn0gVGhlIGRpc3RvcnRlZCByYWRpdXMgaW4gdGFuLWFuZ2xlIHVuaXRzLlxyXG4gKi9cclxuRGlzdG9ydGlvbi5wcm90b3R5cGUuZGlzdG9ydCA9IGZ1bmN0aW9uKHJhZGl1cykge1xyXG4gIHZhciByMiA9IHJhZGl1cyAqIHJhZGl1cztcclxuICB2YXIgcmV0ID0gMDtcclxuICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuY29lZmZpY2llbnRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICByZXQgPSByMiAqIChyZXQgKyB0aGlzLmNvZWZmaWNpZW50c1tpXSk7XHJcbiAgfVxyXG4gIHJldHVybiAocmV0ICsgMSkgKiByYWRpdXM7XHJcbn07XHJcblxyXG4vLyBGdW5jdGlvbnMgYmVsb3cgcm91Z2hseSBwb3J0ZWQgZnJvbVxyXG4vLyBodHRwczovL2dpdGh1Yi5jb20vZ29vZ2xlc2FtcGxlcy9jYXJkYm9hcmQtdW5pdHkvYmxvYi9tYXN0ZXIvQ2FyZGJvYXJkL1NjcmlwdHMvQ2FyZGJvYXJkUHJvZmlsZS5jcyNMNDEyXHJcblxyXG4vLyBTb2x2ZXMgYSBzbWFsbCBsaW5lYXIgZXF1YXRpb24gdmlhIGRlc3RydWN0aXZlIGdhdXNzaWFuXHJcbi8vIGVsaW1pbmF0aW9uIGFuZCBiYWNrIHN1YnN0aXR1dGlvbi4gIFRoaXMgaXNuJ3QgZ2VuZXJpYyBudW1lcmljXHJcbi8vIGNvZGUsIGl0J3MganVzdCBhIHF1aWNrIGhhY2sgdG8gd29yayB3aXRoIHRoZSBnZW5lcmFsbHlcclxuLy8gd2VsbC1iZWhhdmVkIHN5bW1ldHJpYyBtYXRyaWNlcyBmb3IgbGVhc3Qtc3F1YXJlcyBmaXR0aW5nLlxyXG4vLyBOb3QgaW50ZW5kZWQgZm9yIHJldXNlLlxyXG4vL1xyXG4vLyBAcGFyYW0gYSBJbnB1dCBwb3NpdGl2ZSBkZWZpbml0ZSBzeW1tZXRyaWNhbCBtYXRyaXguIERlc3Ryb3llZFxyXG4vLyAgICAgZHVyaW5nIGNhbGN1bGF0aW9uLlxyXG4vLyBAcGFyYW0geSBJbnB1dCByaWdodC1oYW5kLXNpZGUgdmFsdWVzLiBEZXN0cm95ZWQgZHVyaW5nIGNhbGN1bGF0aW9uLlxyXG4vLyBAcmV0dXJuIFJlc3VsdGluZyB4IHZhbHVlIHZlY3Rvci5cclxuLy9cclxuRGlzdG9ydGlvbi5wcm90b3R5cGUuc29sdmVMaW5lYXJfID0gZnVuY3Rpb24oYSwgeSkge1xyXG4gIHZhciBuID0gYS5sZW5ndGg7XHJcblxyXG4gIC8vIEdhdXNzaWFuIGVsaW1pbmF0aW9uIChubyByb3cgZXhjaGFuZ2UpIHRvIHRyaWFuZ3VsYXIgbWF0cml4LlxyXG4gIC8vIFRoZSBpbnB1dCBtYXRyaXggaXMgYSBBXlQgQSBwcm9kdWN0IHdoaWNoIHNob3VsZCBiZSBhIHBvc2l0aXZlXHJcbiAgLy8gZGVmaW5pdGUgc3ltbWV0cmljYWwgbWF0cml4LCBhbmQgaWYgSSByZW1lbWJlciBteSBsaW5lYXJcclxuICAvLyBhbGdlYnJhIHJpZ2h0IHRoaXMgaW1wbGllcyB0aGF0IHRoZSBwaXZvdHMgd2lsbCBiZSBub256ZXJvIGFuZFxyXG4gIC8vIGNhbGN1bGF0aW9ucyBzdWZmaWNpZW50bHkgYWNjdXJhdGUgd2l0aG91dCBuZWVkaW5nIHJvd1xyXG4gIC8vIGV4Y2hhbmdlLlxyXG4gIGZvciAodmFyIGogPSAwOyBqIDwgbiAtIDE7ICsraikge1xyXG4gICAgZm9yICh2YXIgayA9IGogKyAxOyBrIDwgbjsgKytrKSB7XHJcbiAgICAgIHZhciBwID0gYVtqXVtrXSAvIGFbal1bal07XHJcbiAgICAgIGZvciAodmFyIGkgPSBqICsgMTsgaSA8IG47ICsraSkge1xyXG4gICAgICAgIGFbaV1ba10gLT0gcCAqIGFbaV1bal07XHJcbiAgICAgIH1cclxuICAgICAgeVtrXSAtPSBwICogeVtqXTtcclxuICAgIH1cclxuICB9XHJcbiAgLy8gRnJvbSB0aGlzIHBvaW50IG9uLCBvbmx5IHRoZSBtYXRyaXggZWxlbWVudHMgYVtqXVtpXSB3aXRoIGk+PWogYXJlXHJcbiAgLy8gdmFsaWQuIFRoZSBlbGltaW5hdGlvbiBkb2Vzbid0IGZpbGwgaW4gZWxpbWluYXRlZCAwIHZhbHVlcy5cclxuXHJcbiAgdmFyIHggPSBuZXcgQXJyYXkobik7XHJcblxyXG4gIC8vIEJhY2sgc3Vic3RpdHV0aW9uLlxyXG4gIGZvciAodmFyIGogPSBuIC0gMTsgaiA+PSAwOyAtLWopIHtcclxuICAgIHZhciB2ID0geVtqXTtcclxuICAgIGZvciAodmFyIGkgPSBqICsgMTsgaSA8IG47ICsraSkge1xyXG4gICAgICB2IC09IGFbaV1bal0gKiB4W2ldO1xyXG4gICAgfVxyXG4gICAgeFtqXSA9IHYgLyBhW2pdW2pdO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHg7XHJcbn07XHJcblxyXG4vLyBTb2x2ZXMgYSBsZWFzdC1zcXVhcmVzIG1hdHJpeCBlcXVhdGlvbi4gIEdpdmVuIHRoZSBlcXVhdGlvbiBBICogeCA9IHksIGNhbGN1bGF0ZSB0aGVcclxuLy8gbGVhc3Qtc3F1YXJlIGZpdCB4ID0gaW52ZXJzZShBICogdHJhbnNwb3NlKEEpKSAqIHRyYW5zcG9zZShBKSAqIHkuICBUaGUgd2F5IHRoaXMgd29ya3NcclxuLy8gaXMgdGhhdCwgd2hpbGUgQSBpcyB0eXBpY2FsbHkgbm90IGEgc3F1YXJlIG1hdHJpeCAoYW5kIGhlbmNlIG5vdCBpbnZlcnRpYmxlKSwgQSAqIHRyYW5zcG9zZShBKVxyXG4vLyBpcyBhbHdheXMgc3F1YXJlLiAgVGhhdCBpczpcclxuLy8gICBBICogeCA9IHlcclxuLy8gICB0cmFuc3Bvc2UoQSkgKiAoQSAqIHgpID0gdHJhbnNwb3NlKEEpICogeSAgIDwtIG11bHRpcGx5IGJvdGggc2lkZXMgYnkgdHJhbnNwb3NlKEEpXHJcbi8vICAgKHRyYW5zcG9zZShBKSAqIEEpICogeCA9IHRyYW5zcG9zZShBKSAqIHkgICA8LSBhc3NvY2lhdGl2aXR5XHJcbi8vICAgeCA9IGludmVyc2UodHJhbnNwb3NlKEEpICogQSkgKiB0cmFuc3Bvc2UoQSkgKiB5ICA8LSBzb2x2ZSBmb3IgeFxyXG4vLyBNYXRyaXggQSdzIHJvdyBjb3VudCAoZmlyc3QgaW5kZXgpIG11c3QgbWF0Y2ggeSdzIHZhbHVlIGNvdW50LiAgQSdzIGNvbHVtbiBjb3VudCAoc2Vjb25kIGluZGV4KVxyXG4vLyBkZXRlcm1pbmVzIHRoZSBsZW5ndGggb2YgdGhlIHJlc3VsdCB2ZWN0b3IgeC5cclxuRGlzdG9ydGlvbi5wcm90b3R5cGUuc29sdmVMZWFzdFNxdWFyZXNfID0gZnVuY3Rpb24obWF0QSwgdmVjWSkge1xyXG4gIHZhciBpLCBqLCBrLCBzdW07XHJcbiAgdmFyIG51bVNhbXBsZXMgPSBtYXRBLmxlbmd0aDtcclxuICB2YXIgbnVtQ29lZmZpY2llbnRzID0gbWF0QVswXS5sZW5ndGg7XHJcbiAgaWYgKG51bVNhbXBsZXMgIT0gdmVjWS5MZW5ndGgpIHtcclxuICAgIHRocm93IG5ldyBFcnJvcihcIk1hdHJpeCAvIHZlY3RvciBkaW1lbnNpb24gbWlzbWF0Y2hcIik7XHJcbiAgfVxyXG5cclxuICAvLyBDYWxjdWxhdGUgdHJhbnNwb3NlKEEpICogQVxyXG4gIHZhciBtYXRBVEEgPSBuZXcgQXJyYXkobnVtQ29lZmZpY2llbnRzKTtcclxuICBmb3IgKGsgPSAwOyBrIDwgbnVtQ29lZmZpY2llbnRzOyArK2spIHtcclxuICAgIG1hdEFUQVtrXSA9IG5ldyBBcnJheShudW1Db2VmZmljaWVudHMpO1xyXG4gICAgZm9yIChqID0gMDsgaiA8IG51bUNvZWZmaWNpZW50czsgKytqKSB7XHJcbiAgICAgIHN1bSA9IDA7XHJcbiAgICAgIGZvciAoaSA9IDA7IGkgPCBudW1TYW1wbGVzOyArK2kpIHtcclxuICAgICAgICBzdW0gKz0gbWF0QVtqXVtpXSAqIG1hdEFba11baV07XHJcbiAgICAgIH1cclxuICAgICAgbWF0QVRBW2tdW2pdID0gc3VtO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8gQ2FsY3VsYXRlIHRyYW5zcG9zZShBKSAqIHlcclxuICB2YXIgdmVjQVRZID0gbmV3IEFycmF5KG51bUNvZWZmaWNpZW50cyk7XHJcbiAgZm9yIChqID0gMDsgaiA8IG51bUNvZWZmaWNpZW50czsgKytqKSB7XHJcbiAgICBzdW0gPSAwO1xyXG4gICAgZm9yIChpID0gMDsgaSA8IG51bVNhbXBsZXM7ICsraSkge1xyXG4gICAgICBzdW0gKz0gbWF0QVtqXVtpXSAqIHZlY1lbaV07XHJcbiAgICB9XHJcbiAgICB2ZWNBVFlbal0gPSBzdW07XHJcbiAgfVxyXG5cclxuICAvLyBOb3cgc29sdmUgKEEgKiB0cmFuc3Bvc2UoQSkpICogeCA9IHRyYW5zcG9zZShBKSAqIHkuXHJcbiAgcmV0dXJuIHRoaXMuc29sdmVMaW5lYXJfKG1hdEFUQSwgdmVjQVRZKTtcclxufTtcclxuXHJcbi8vLyBDYWxjdWxhdGVzIGFuIGFwcHJveGltYXRlIGludmVyc2UgdG8gdGhlIGdpdmVuIHJhZGlhbCBkaXN0b3J0aW9uIHBhcmFtZXRlcnMuXHJcbkRpc3RvcnRpb24ucHJvdG90eXBlLmFwcHJveGltYXRlSW52ZXJzZSA9IGZ1bmN0aW9uKG1heFJhZGl1cywgbnVtU2FtcGxlcykge1xyXG4gIG1heFJhZGl1cyA9IG1heFJhZGl1cyB8fCAxO1xyXG4gIG51bVNhbXBsZXMgPSBudW1TYW1wbGVzIHx8IDEwMDtcclxuICB2YXIgbnVtQ29lZmZpY2llbnRzID0gNjtcclxuICB2YXIgaSwgajtcclxuXHJcbiAgLy8gUiArIEsxKlJeMyArIEsyKlJeNSA9IHIsIHdpdGggUiA9IHJwID0gZGlzdG9ydChyKVxyXG4gIC8vIFJlcGVhdGluZyBmb3IgbnVtU2FtcGxlczpcclxuICAvLyAgIFsgUjBeMywgUjBeNSBdICogWyBLMSBdID0gWyByMCAtIFIwIF1cclxuICAvLyAgIFsgUjFeMywgUjFeNSBdICAgWyBLMiBdICAgWyByMSAtIFIxIF1cclxuICAvLyAgIFsgUjJeMywgUjJeNSBdICAgICAgICAgICAgWyByMiAtIFIyIF1cclxuICAvLyAgIFsgZXRjLi4uIF0gICAgICAgICAgICAgICAgWyBldGMuLi4gXVxyXG4gIC8vIFRoYXQgaXM6XHJcbiAgLy8gICBtYXRBICogW0sxLCBLMl0gPSB5XHJcbiAgLy8gU29sdmU6XHJcbiAgLy8gICBbSzEsIEsyXSA9IGludmVyc2UodHJhbnNwb3NlKG1hdEEpICogbWF0QSkgKiB0cmFuc3Bvc2UobWF0QSkgKiB5XHJcbiAgdmFyIG1hdEEgPSBuZXcgQXJyYXkobnVtQ29lZmZpY2llbnRzKTtcclxuICBmb3IgKGogPSAwOyBqIDwgbnVtQ29lZmZpY2llbnRzOyArK2opIHtcclxuICAgIG1hdEFbal0gPSBuZXcgQXJyYXkobnVtU2FtcGxlcyk7XHJcbiAgfVxyXG4gIHZhciB2ZWNZID0gbmV3IEFycmF5KG51bVNhbXBsZXMpO1xyXG5cclxuICBmb3IgKGkgPSAwOyBpIDwgbnVtU2FtcGxlczsgKytpKSB7XHJcbiAgICB2YXIgciA9IG1heFJhZGl1cyAqIChpICsgMSkgLyBudW1TYW1wbGVzO1xyXG4gICAgdmFyIHJwID0gdGhpcy5kaXN0b3J0KHIpO1xyXG4gICAgdmFyIHYgPSBycDtcclxuICAgIGZvciAoaiA9IDA7IGogPCBudW1Db2VmZmljaWVudHM7ICsraikge1xyXG4gICAgICB2ICo9IHJwICogcnA7XHJcbiAgICAgIG1hdEFbal1baV0gPSB2O1xyXG4gICAgfVxyXG4gICAgdmVjWVtpXSA9IHIgLSBycDtcclxuICB9XHJcblxyXG4gIHZhciBpbnZlcnNlQ29lZmZpY2llbnRzID0gdGhpcy5zb2x2ZUxlYXN0U3F1YXJlc18obWF0QSwgdmVjWSk7XHJcblxyXG4gIHJldHVybiBuZXcgRGlzdG9ydGlvbihpbnZlcnNlQ29lZmZpY2llbnRzKTtcclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gRGlzdG9ydGlvbjtcclxuXHJcbn0se31dLDEwOltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcclxuLypcclxuICogQ29weXJpZ2h0IDIwMTUgR29vZ2xlIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5cclxuLyoqXHJcbiAqIERQREIgY2FjaGUuXHJcbiAqL1xyXG52YXIgRFBEQl9DQUNIRSA9IHtcclxuICBcImZvcm1hdFwiOiAxLFxyXG4gIFwibGFzdF91cGRhdGVkXCI6IFwiMjAxNi0wMS0yMFQwMDoxODozNVpcIixcclxuICBcImRldmljZXNcIjogW1xyXG5cclxuICB7XHJcbiAgICBcInR5cGVcIjogXCJhbmRyb2lkXCIsXHJcbiAgICBcInJ1bGVzXCI6IFtcclxuICAgICAgeyBcIm1kbWhcIjogXCJhc3VzLyovTmV4dXMgNy8qXCIgfSxcclxuICAgICAgeyBcInVhXCI6IFwiTmV4dXMgN1wiIH1cclxuICAgIF0sXHJcbiAgICBcImRwaVwiOiBbIDMyMC44LCAzMjMuMCBdLFxyXG4gICAgXCJid1wiOiAzLFxyXG4gICAgXCJhY1wiOiA1MDBcclxuICB9LFxyXG5cclxuICB7XHJcbiAgICBcInR5cGVcIjogXCJhbmRyb2lkXCIsXHJcbiAgICBcInJ1bGVzXCI6IFtcclxuICAgICAgeyBcIm1kbWhcIjogXCJhc3VzLyovQVNVU19aMDBBRC8qXCIgfSxcclxuICAgICAgeyBcInVhXCI6IFwiQVNVU19aMDBBRFwiIH1cclxuICAgIF0sXHJcbiAgICBcImRwaVwiOiBbIDQwMy4wLCA0MDQuNiBdLFxyXG4gICAgXCJid1wiOiAzLFxyXG4gICAgXCJhY1wiOiAxMDAwXHJcbiAgfSxcclxuXHJcbiAge1xyXG4gICAgXCJ0eXBlXCI6IFwiYW5kcm9pZFwiLFxyXG4gICAgXCJydWxlc1wiOiBbXHJcbiAgICAgIHsgXCJtZG1oXCI6IFwiSFRDLyovSFRDNjQzNUxWVy8qXCIgfSxcclxuICAgICAgeyBcInVhXCI6IFwiSFRDNjQzNUxWV1wiIH1cclxuICAgIF0sXHJcbiAgICBcImRwaVwiOiBbIDQ0OS43LCA0NDMuMyBdLFxyXG4gICAgXCJid1wiOiAzLFxyXG4gICAgXCJhY1wiOiAxMDAwXHJcbiAgfSxcclxuXHJcbiAge1xyXG4gICAgXCJ0eXBlXCI6IFwiYW5kcm9pZFwiLFxyXG4gICAgXCJydWxlc1wiOiBbXHJcbiAgICAgIHsgXCJtZG1oXCI6IFwiSFRDLyovSFRDIE9uZSBYTC8qXCIgfSxcclxuICAgICAgeyBcInVhXCI6IFwiSFRDIE9uZSBYTFwiIH1cclxuICAgIF0sXHJcbiAgICBcImRwaVwiOiBbIDMxNS4zLCAzMTQuNiBdLFxyXG4gICAgXCJid1wiOiAzLFxyXG4gICAgXCJhY1wiOiAxMDAwXHJcbiAgfSxcclxuXHJcbiAge1xyXG4gICAgXCJ0eXBlXCI6IFwiYW5kcm9pZFwiLFxyXG4gICAgXCJydWxlc1wiOiBbXHJcbiAgICAgIHsgXCJtZG1oXCI6IFwiaHRjLyovTmV4dXMgOS8qXCIgfSxcclxuICAgICAgeyBcInVhXCI6IFwiTmV4dXMgOVwiIH1cclxuICAgIF0sXHJcbiAgICBcImRwaVwiOiAyODkuMCxcclxuICAgIFwiYndcIjogMyxcclxuICAgIFwiYWNcIjogNTAwXHJcbiAgfSxcclxuXHJcbiAge1xyXG4gICAgXCJ0eXBlXCI6IFwiYW5kcm9pZFwiLFxyXG4gICAgXCJydWxlc1wiOiBbXHJcbiAgICAgIHsgXCJtZG1oXCI6IFwiSFRDLyovSFRDIE9uZSBNOS8qXCIgfSxcclxuICAgICAgeyBcInVhXCI6IFwiSFRDIE9uZSBNOVwiIH1cclxuICAgIF0sXHJcbiAgICBcImRwaVwiOiBbIDQ0Mi41LCA0NDMuMyBdLFxyXG4gICAgXCJid1wiOiAzLFxyXG4gICAgXCJhY1wiOiA1MDBcclxuICB9LFxyXG5cclxuICB7XHJcbiAgICBcInR5cGVcIjogXCJhbmRyb2lkXCIsXHJcbiAgICBcInJ1bGVzXCI6IFtcclxuICAgICAgeyBcIm1kbWhcIjogXCJIVEMvKi9IVEMgT25lX004LypcIiB9LFxyXG4gICAgICB7IFwidWFcIjogXCJIVEMgT25lX004XCIgfVxyXG4gICAgXSxcclxuICAgIFwiZHBpXCI6IFsgNDQ5LjcsIDQ0Ny40IF0sXHJcbiAgICBcImJ3XCI6IDMsXHJcbiAgICBcImFjXCI6IDUwMFxyXG4gIH0sXHJcblxyXG4gIHtcclxuICAgIFwidHlwZVwiOiBcImFuZHJvaWRcIixcclxuICAgIFwicnVsZXNcIjogW1xyXG4gICAgICB7IFwibWRtaFwiOiBcIkhUQy8qL0hUQyBPbmUvKlwiIH0sXHJcbiAgICAgIHsgXCJ1YVwiOiBcIkhUQyBPbmVcIiB9XHJcbiAgICBdLFxyXG4gICAgXCJkcGlcIjogNDcyLjgsXHJcbiAgICBcImJ3XCI6IDMsXHJcbiAgICBcImFjXCI6IDEwMDBcclxuICB9LFxyXG5cclxuICB7XHJcbiAgICBcInR5cGVcIjogXCJhbmRyb2lkXCIsXHJcbiAgICBcInJ1bGVzXCI6IFtcclxuICAgICAgeyBcIm1kbWhcIjogXCJIdWF3ZWkvKi9OZXh1cyA2UC8qXCIgfSxcclxuICAgICAgeyBcInVhXCI6IFwiTmV4dXMgNlBcIiB9XHJcbiAgICBdLFxyXG4gICAgXCJkcGlcIjogWyA1MTUuMSwgNTE4LjAgXSxcclxuICAgIFwiYndcIjogMyxcclxuICAgIFwiYWNcIjogMTAwMFxyXG4gIH0sXHJcblxyXG4gIHtcclxuICAgIFwidHlwZVwiOiBcImFuZHJvaWRcIixcclxuICAgIFwicnVsZXNcIjogW1xyXG4gICAgICB7IFwibWRtaFwiOiBcIkxHRS8qL05leHVzIDVYLypcIiB9LFxyXG4gICAgICB7IFwidWFcIjogXCJOZXh1cyA1WFwiIH1cclxuICAgIF0sXHJcbiAgICBcImRwaVwiOiBbIDQyMi4wLCA0MTkuOSBdLFxyXG4gICAgXCJid1wiOiAzLFxyXG4gICAgXCJhY1wiOiAxMDAwXHJcbiAgfSxcclxuXHJcbiAge1xyXG4gICAgXCJ0eXBlXCI6IFwiYW5kcm9pZFwiLFxyXG4gICAgXCJydWxlc1wiOiBbXHJcbiAgICAgIHsgXCJtZG1oXCI6IFwiTEdFLyovTEdNUzM0NS8qXCIgfSxcclxuICAgICAgeyBcInVhXCI6IFwiTEdNUzM0NVwiIH1cclxuICAgIF0sXHJcbiAgICBcImRwaVwiOiBbIDIyMS43LCAyMTkuMSBdLFxyXG4gICAgXCJid1wiOiAzLFxyXG4gICAgXCJhY1wiOiA1MDBcclxuICB9LFxyXG5cclxuICB7XHJcbiAgICBcInR5cGVcIjogXCJhbmRyb2lkXCIsXHJcbiAgICBcInJ1bGVzXCI6IFtcclxuICAgICAgeyBcIm1kbWhcIjogXCJMR0UvKi9MRy1EODAwLypcIiB9LFxyXG4gICAgICB7IFwidWFcIjogXCJMRy1EODAwXCIgfVxyXG4gICAgXSxcclxuICAgIFwiZHBpXCI6IFsgNDIyLjAsIDQyNC4xIF0sXHJcbiAgICBcImJ3XCI6IDMsXHJcbiAgICBcImFjXCI6IDUwMFxyXG4gIH0sXHJcblxyXG4gIHtcclxuICAgIFwidHlwZVwiOiBcImFuZHJvaWRcIixcclxuICAgIFwicnVsZXNcIjogW1xyXG4gICAgICB7IFwibWRtaFwiOiBcIkxHRS8qL0xHLUQ4NTAvKlwiIH0sXHJcbiAgICAgIHsgXCJ1YVwiOiBcIkxHLUQ4NTBcIiB9XHJcbiAgICBdLFxyXG4gICAgXCJkcGlcIjogWyA1MzcuOSwgNTQxLjkgXSxcclxuICAgIFwiYndcIjogMyxcclxuICAgIFwiYWNcIjogNTAwXHJcbiAgfSxcclxuXHJcbiAge1xyXG4gICAgXCJ0eXBlXCI6IFwiYW5kcm9pZFwiLFxyXG4gICAgXCJydWxlc1wiOiBbXHJcbiAgICAgIHsgXCJtZG1oXCI6IFwiTEdFLyovVlM5ODUgNEcvKlwiIH0sXHJcbiAgICAgIHsgXCJ1YVwiOiBcIlZTOTg1IDRHXCIgfVxyXG4gICAgXSxcclxuICAgIFwiZHBpXCI6IFsgNTM3LjksIDUzNS42IF0sXHJcbiAgICBcImJ3XCI6IDMsXHJcbiAgICBcImFjXCI6IDEwMDBcclxuICB9LFxyXG5cclxuICB7XHJcbiAgICBcInR5cGVcIjogXCJhbmRyb2lkXCIsXHJcbiAgICBcInJ1bGVzXCI6IFtcclxuICAgICAgeyBcIm1kbWhcIjogXCJMR0UvKi9OZXh1cyA1LypcIiB9LFxyXG4gICAgICB7IFwidWFcIjogXCJOZXh1cyA1IFwiIH1cclxuICAgIF0sXHJcbiAgICBcImRwaVwiOiBbIDQ0Mi40LCA0NDQuOCBdLFxyXG4gICAgXCJid1wiOiAzLFxyXG4gICAgXCJhY1wiOiAxMDAwXHJcbiAgfSxcclxuXHJcbiAge1xyXG4gICAgXCJ0eXBlXCI6IFwiYW5kcm9pZFwiLFxyXG4gICAgXCJydWxlc1wiOiBbXHJcbiAgICAgIHsgXCJtZG1oXCI6IFwiTEdFLyovTmV4dXMgNC8qXCIgfSxcclxuICAgICAgeyBcInVhXCI6IFwiTmV4dXMgNFwiIH1cclxuICAgIF0sXHJcbiAgICBcImRwaVwiOiBbIDMxOS44LCAzMTguNCBdLFxyXG4gICAgXCJid1wiOiAzLFxyXG4gICAgXCJhY1wiOiAxMDAwXHJcbiAgfSxcclxuXHJcbiAge1xyXG4gICAgXCJ0eXBlXCI6IFwiYW5kcm9pZFwiLFxyXG4gICAgXCJydWxlc1wiOiBbXHJcbiAgICAgIHsgXCJtZG1oXCI6IFwiTEdFLyovTEctUDc2OS8qXCIgfSxcclxuICAgICAgeyBcInVhXCI6IFwiTEctUDc2OVwiIH1cclxuICAgIF0sXHJcbiAgICBcImRwaVwiOiBbIDI0MC42LCAyNDcuNSBdLFxyXG4gICAgXCJid1wiOiAzLFxyXG4gICAgXCJhY1wiOiAxMDAwXHJcbiAgfSxcclxuXHJcbiAge1xyXG4gICAgXCJ0eXBlXCI6IFwiYW5kcm9pZFwiLFxyXG4gICAgXCJydWxlc1wiOiBbXHJcbiAgICAgIHsgXCJtZG1oXCI6IFwiTEdFLyovTEdNUzMyMy8qXCIgfSxcclxuICAgICAgeyBcInVhXCI6IFwiTEdNUzMyM1wiIH1cclxuICAgIF0sXHJcbiAgICBcImRwaVwiOiBbIDIwNi42LCAyMDQuNiBdLFxyXG4gICAgXCJid1wiOiAzLFxyXG4gICAgXCJhY1wiOiAxMDAwXHJcbiAgfSxcclxuXHJcbiAge1xyXG4gICAgXCJ0eXBlXCI6IFwiYW5kcm9pZFwiLFxyXG4gICAgXCJydWxlc1wiOiBbXHJcbiAgICAgIHsgXCJtZG1oXCI6IFwiTEdFLyovTEdMUzk5Ni8qXCIgfSxcclxuICAgICAgeyBcInVhXCI6IFwiTEdMUzk5NlwiIH1cclxuICAgIF0sXHJcbiAgICBcImRwaVwiOiBbIDQwMy40LCA0MDEuNSBdLFxyXG4gICAgXCJid1wiOiAzLFxyXG4gICAgXCJhY1wiOiAxMDAwXHJcbiAgfSxcclxuXHJcbiAge1xyXG4gICAgXCJ0eXBlXCI6IFwiYW5kcm9pZFwiLFxyXG4gICAgXCJydWxlc1wiOiBbXHJcbiAgICAgIHsgXCJtZG1oXCI6IFwiTWljcm9tYXgvKi80NTYwTU1YLypcIiB9LFxyXG4gICAgICB7IFwidWFcIjogXCI0NTYwTU1YXCIgfVxyXG4gICAgXSxcclxuICAgIFwiZHBpXCI6IFsgMjQwLjAsIDIxOS40IF0sXHJcbiAgICBcImJ3XCI6IDMsXHJcbiAgICBcImFjXCI6IDEwMDBcclxuICB9LFxyXG5cclxuICB7XHJcbiAgICBcInR5cGVcIjogXCJhbmRyb2lkXCIsXHJcbiAgICBcInJ1bGVzXCI6IFtcclxuICAgICAgeyBcIm1kbWhcIjogXCJNaWNyb21heC8qL0EyNTAvKlwiIH0sXHJcbiAgICAgIHsgXCJ1YVwiOiBcIk1pY3JvbWF4IEEyNTBcIiB9XHJcbiAgICBdLFxyXG4gICAgXCJkcGlcIjogWyA0ODAuMCwgNDQ2LjQgXSxcclxuICAgIFwiYndcIjogMyxcclxuICAgIFwiYWNcIjogMTAwMFxyXG4gIH0sXHJcblxyXG4gIHtcclxuICAgIFwidHlwZVwiOiBcImFuZHJvaWRcIixcclxuICAgIFwicnVsZXNcIjogW1xyXG4gICAgICB7IFwibWRtaFwiOiBcIk1pY3JvbWF4LyovTWljcm9tYXggQVE0NTAxLypcIiB9LFxyXG4gICAgICB7IFwidWFcIjogXCJNaWNyb21heCBBUTQ1MDFcIiB9XHJcbiAgICBdLFxyXG4gICAgXCJkcGlcIjogMjQwLjAsXHJcbiAgICBcImJ3XCI6IDMsXHJcbiAgICBcImFjXCI6IDUwMFxyXG4gIH0sXHJcblxyXG4gIHtcclxuICAgIFwidHlwZVwiOiBcImFuZHJvaWRcIixcclxuICAgIFwicnVsZXNcIjogW1xyXG4gICAgICB7IFwibWRtaFwiOiBcIm1vdG9yb2xhLyovRFJPSUQgUkFaUi8qXCIgfSxcclxuICAgICAgeyBcInVhXCI6IFwiRFJPSUQgUkFaUlwiIH1cclxuICAgIF0sXHJcbiAgICBcImRwaVwiOiBbIDM2OC4xLCAyNTYuNyBdLFxyXG4gICAgXCJid1wiOiAzLFxyXG4gICAgXCJhY1wiOiAxMDAwXHJcbiAgfSxcclxuXHJcbiAge1xyXG4gICAgXCJ0eXBlXCI6IFwiYW5kcm9pZFwiLFxyXG4gICAgXCJydWxlc1wiOiBbXHJcbiAgICAgIHsgXCJtZG1oXCI6IFwibW90b3JvbGEvKi9YVDgzMEMvKlwiIH0sXHJcbiAgICAgIHsgXCJ1YVwiOiBcIlhUODMwQ1wiIH1cclxuICAgIF0sXHJcbiAgICBcImRwaVwiOiBbIDI1NC4wLCAyNTUuOSBdLFxyXG4gICAgXCJid1wiOiAzLFxyXG4gICAgXCJhY1wiOiAxMDAwXHJcbiAgfSxcclxuXHJcbiAge1xyXG4gICAgXCJ0eXBlXCI6IFwiYW5kcm9pZFwiLFxyXG4gICAgXCJydWxlc1wiOiBbXHJcbiAgICAgIHsgXCJtZG1oXCI6IFwibW90b3JvbGEvKi9YVDEwMjEvKlwiIH0sXHJcbiAgICAgIHsgXCJ1YVwiOiBcIlhUMTAyMVwiIH1cclxuICAgIF0sXHJcbiAgICBcImRwaVwiOiBbIDI1NC4wLCAyNTYuNyBdLFxyXG4gICAgXCJid1wiOiAzLFxyXG4gICAgXCJhY1wiOiA1MDBcclxuICB9LFxyXG5cclxuICB7XHJcbiAgICBcInR5cGVcIjogXCJhbmRyb2lkXCIsXHJcbiAgICBcInJ1bGVzXCI6IFtcclxuICAgICAgeyBcIm1kbWhcIjogXCJtb3Rvcm9sYS8qL1hUMTAyMy8qXCIgfSxcclxuICAgICAgeyBcInVhXCI6IFwiWFQxMDIzXCIgfVxyXG4gICAgXSxcclxuICAgIFwiZHBpXCI6IFsgMjU0LjAsIDI1Ni43IF0sXHJcbiAgICBcImJ3XCI6IDMsXHJcbiAgICBcImFjXCI6IDUwMFxyXG4gIH0sXHJcblxyXG4gIHtcclxuICAgIFwidHlwZVwiOiBcImFuZHJvaWRcIixcclxuICAgIFwicnVsZXNcIjogW1xyXG4gICAgICB7IFwibWRtaFwiOiBcIm1vdG9yb2xhLyovWFQxMDI4LypcIiB9LFxyXG4gICAgICB7IFwidWFcIjogXCJYVDEwMjhcIiB9XHJcbiAgICBdLFxyXG4gICAgXCJkcGlcIjogWyAzMjYuNiwgMzI3LjYgXSxcclxuICAgIFwiYndcIjogMyxcclxuICAgIFwiYWNcIjogMTAwMFxyXG4gIH0sXHJcblxyXG4gIHtcclxuICAgIFwidHlwZVwiOiBcImFuZHJvaWRcIixcclxuICAgIFwicnVsZXNcIjogW1xyXG4gICAgICB7IFwibWRtaFwiOiBcIm1vdG9yb2xhLyovWFQxMDM0LypcIiB9LFxyXG4gICAgICB7IFwidWFcIjogXCJYVDEwMzRcIiB9XHJcbiAgICBdLFxyXG4gICAgXCJkcGlcIjogWyAzMjYuNiwgMzI4LjQgXSxcclxuICAgIFwiYndcIjogMyxcclxuICAgIFwiYWNcIjogNTAwXHJcbiAgfSxcclxuXHJcbiAge1xyXG4gICAgXCJ0eXBlXCI6IFwiYW5kcm9pZFwiLFxyXG4gICAgXCJydWxlc1wiOiBbXHJcbiAgICAgIHsgXCJtZG1oXCI6IFwibW90b3JvbGEvKi9YVDEwNTMvKlwiIH0sXHJcbiAgICAgIHsgXCJ1YVwiOiBcIlhUMTA1M1wiIH1cclxuICAgIF0sXHJcbiAgICBcImRwaVwiOiBbIDMxNS4zLCAzMTYuMSBdLFxyXG4gICAgXCJid1wiOiAzLFxyXG4gICAgXCJhY1wiOiAxMDAwXHJcbiAgfSxcclxuXHJcbiAge1xyXG4gICAgXCJ0eXBlXCI6IFwiYW5kcm9pZFwiLFxyXG4gICAgXCJydWxlc1wiOiBbXHJcbiAgICAgIHsgXCJtZG1oXCI6IFwibW90b3JvbGEvKi9YVDE1NjIvKlwiIH0sXHJcbiAgICAgIHsgXCJ1YVwiOiBcIlhUMTU2MlwiIH1cclxuICAgIF0sXHJcbiAgICBcImRwaVwiOiBbIDQwMy40LCA0MDIuNyBdLFxyXG4gICAgXCJid1wiOiAzLFxyXG4gICAgXCJhY1wiOiAxMDAwXHJcbiAgfSxcclxuXHJcbiAge1xyXG4gICAgXCJ0eXBlXCI6IFwiYW5kcm9pZFwiLFxyXG4gICAgXCJydWxlc1wiOiBbXHJcbiAgICAgIHsgXCJtZG1oXCI6IFwibW90b3JvbGEvKi9OZXh1cyA2LypcIiB9LFxyXG4gICAgICB7IFwidWFcIjogXCJOZXh1cyA2IFwiIH1cclxuICAgIF0sXHJcbiAgICBcImRwaVwiOiBbIDQ5NC4zLCA0ODkuNyBdLFxyXG4gICAgXCJid1wiOiAzLFxyXG4gICAgXCJhY1wiOiAxMDAwXHJcbiAgfSxcclxuXHJcbiAge1xyXG4gICAgXCJ0eXBlXCI6IFwiYW5kcm9pZFwiLFxyXG4gICAgXCJydWxlc1wiOiBbXHJcbiAgICAgIHsgXCJtZG1oXCI6IFwibW90b3JvbGEvKi9YVDEwNjMvKlwiIH0sXHJcbiAgICAgIHsgXCJ1YVwiOiBcIlhUMTA2M1wiIH1cclxuICAgIF0sXHJcbiAgICBcImRwaVwiOiBbIDI5NS4wLCAyOTYuNiBdLFxyXG4gICAgXCJid1wiOiAzLFxyXG4gICAgXCJhY1wiOiAxMDAwXHJcbiAgfSxcclxuXHJcbiAge1xyXG4gICAgXCJ0eXBlXCI6IFwiYW5kcm9pZFwiLFxyXG4gICAgXCJydWxlc1wiOiBbXHJcbiAgICAgIHsgXCJtZG1oXCI6IFwibW90b3JvbGEvKi9YVDEwNjQvKlwiIH0sXHJcbiAgICAgIHsgXCJ1YVwiOiBcIlhUMTA2NFwiIH1cclxuICAgIF0sXHJcbiAgICBcImRwaVwiOiBbIDI5NS4wLCAyOTUuNiBdLFxyXG4gICAgXCJid1wiOiAzLFxyXG4gICAgXCJhY1wiOiA1MDBcclxuICB9LFxyXG5cclxuICB7XHJcbiAgICBcInR5cGVcIjogXCJhbmRyb2lkXCIsXHJcbiAgICBcInJ1bGVzXCI6IFtcclxuICAgICAgeyBcIm1kbWhcIjogXCJtb3Rvcm9sYS8qL1hUMTA5Mi8qXCIgfSxcclxuICAgICAgeyBcInVhXCI6IFwiWFQxMDkyXCIgfVxyXG4gICAgXSxcclxuICAgIFwiZHBpXCI6IFsgNDIyLjAsIDQyNC4xIF0sXHJcbiAgICBcImJ3XCI6IDMsXHJcbiAgICBcImFjXCI6IDUwMFxyXG4gIH0sXHJcblxyXG4gIHtcclxuICAgIFwidHlwZVwiOiBcImFuZHJvaWRcIixcclxuICAgIFwicnVsZXNcIjogW1xyXG4gICAgICB7IFwibWRtaFwiOiBcIm1vdG9yb2xhLyovWFQxMDk1LypcIiB9LFxyXG4gICAgICB7IFwidWFcIjogXCJYVDEwOTVcIiB9XHJcbiAgICBdLFxyXG4gICAgXCJkcGlcIjogWyA0MjIuMCwgNDIzLjQgXSxcclxuICAgIFwiYndcIjogMyxcclxuICAgIFwiYWNcIjogMTAwMFxyXG4gIH0sXHJcblxyXG4gIHtcclxuICAgIFwidHlwZVwiOiBcImFuZHJvaWRcIixcclxuICAgIFwicnVsZXNcIjogW1xyXG4gICAgICB7IFwibWRtaFwiOiBcIk9uZVBsdXMvKi9BMDAwMS8qXCIgfSxcclxuICAgICAgeyBcInVhXCI6IFwiQTAwMDFcIiB9XHJcbiAgICBdLFxyXG4gICAgXCJkcGlcIjogWyA0MDMuNCwgNDAxLjAgXSxcclxuICAgIFwiYndcIjogMyxcclxuICAgIFwiYWNcIjogMTAwMFxyXG4gIH0sXHJcblxyXG4gIHtcclxuICAgIFwidHlwZVwiOiBcImFuZHJvaWRcIixcclxuICAgIFwicnVsZXNcIjogW1xyXG4gICAgICB7IFwibWRtaFwiOiBcIk9uZVBsdXMvKi9PTkUgRTEwMDUvKlwiIH0sXHJcbiAgICAgIHsgXCJ1YVwiOiBcIk9ORSBFMTAwNVwiIH1cclxuICAgIF0sXHJcbiAgICBcImRwaVwiOiBbIDQ0Mi40LCA0NDEuNCBdLFxyXG4gICAgXCJid1wiOiAzLFxyXG4gICAgXCJhY1wiOiAxMDAwXHJcbiAgfSxcclxuXHJcbiAge1xyXG4gICAgXCJ0eXBlXCI6IFwiYW5kcm9pZFwiLFxyXG4gICAgXCJydWxlc1wiOiBbXHJcbiAgICAgIHsgXCJtZG1oXCI6IFwiT25lUGx1cy8qL09ORSBBMjAwNS8qXCIgfSxcclxuICAgICAgeyBcInVhXCI6IFwiT05FIEEyMDA1XCIgfVxyXG4gICAgXSxcclxuICAgIFwiZHBpXCI6IFsgMzkxLjksIDQwNS40IF0sXHJcbiAgICBcImJ3XCI6IDMsXHJcbiAgICBcImFjXCI6IDEwMDBcclxuICB9LFxyXG5cclxuICB7XHJcbiAgICBcInR5cGVcIjogXCJhbmRyb2lkXCIsXHJcbiAgICBcInJ1bGVzXCI6IFtcclxuICAgICAgeyBcIm1kbWhcIjogXCJPUFBPLyovWDkwOS8qXCIgfSxcclxuICAgICAgeyBcInVhXCI6IFwiWDkwOVwiIH1cclxuICAgIF0sXHJcbiAgICBcImRwaVwiOiBbIDQ0Mi40LCA0NDQuMSBdLFxyXG4gICAgXCJid1wiOiAzLFxyXG4gICAgXCJhY1wiOiAxMDAwXHJcbiAgfSxcclxuXHJcbiAge1xyXG4gICAgXCJ0eXBlXCI6IFwiYW5kcm9pZFwiLFxyXG4gICAgXCJydWxlc1wiOiBbXHJcbiAgICAgIHsgXCJtZG1oXCI6IFwic2Ftc3VuZy8qL0dULUk5MDgyLypcIiB9LFxyXG4gICAgICB7IFwidWFcIjogXCJHVC1JOTA4MlwiIH1cclxuICAgIF0sXHJcbiAgICBcImRwaVwiOiBbIDE4NC43LCAxODUuNCBdLFxyXG4gICAgXCJid1wiOiAzLFxyXG4gICAgXCJhY1wiOiAxMDAwXHJcbiAgfSxcclxuXHJcbiAge1xyXG4gICAgXCJ0eXBlXCI6IFwiYW5kcm9pZFwiLFxyXG4gICAgXCJydWxlc1wiOiBbXHJcbiAgICAgIHsgXCJtZG1oXCI6IFwic2Ftc3VuZy8qL1NNLUczNjBQLypcIiB9LFxyXG4gICAgICB7IFwidWFcIjogXCJTTS1HMzYwUFwiIH1cclxuICAgIF0sXHJcbiAgICBcImRwaVwiOiBbIDE5Ni43LCAyMDUuNCBdLFxyXG4gICAgXCJid1wiOiAzLFxyXG4gICAgXCJhY1wiOiAxMDAwXHJcbiAgfSxcclxuXHJcbiAge1xyXG4gICAgXCJ0eXBlXCI6IFwiYW5kcm9pZFwiLFxyXG4gICAgXCJydWxlc1wiOiBbXHJcbiAgICAgIHsgXCJtZG1oXCI6IFwic2Ftc3VuZy8qL05leHVzIFMvKlwiIH0sXHJcbiAgICAgIHsgXCJ1YVwiOiBcIk5leHVzIFNcIiB9XHJcbiAgICBdLFxyXG4gICAgXCJkcGlcIjogWyAyMzQuNSwgMjI5LjggXSxcclxuICAgIFwiYndcIjogMyxcclxuICAgIFwiYWNcIjogMTAwMFxyXG4gIH0sXHJcblxyXG4gIHtcclxuICAgIFwidHlwZVwiOiBcImFuZHJvaWRcIixcclxuICAgIFwicnVsZXNcIjogW1xyXG4gICAgICB7IFwibWRtaFwiOiBcInNhbXN1bmcvKi9HVC1JOTMwMC8qXCIgfSxcclxuICAgICAgeyBcInVhXCI6IFwiR1QtSTkzMDBcIiB9XHJcbiAgICBdLFxyXG4gICAgXCJkcGlcIjogWyAzMDQuOCwgMzAzLjkgXSxcclxuICAgIFwiYndcIjogNSxcclxuICAgIFwiYWNcIjogNTAwXHJcbiAgfSxcclxuXHJcbiAge1xyXG4gICAgXCJ0eXBlXCI6IFwiYW5kcm9pZFwiLFxyXG4gICAgXCJydWxlc1wiOiBbXHJcbiAgICAgIHsgXCJtZG1oXCI6IFwic2Ftc3VuZy8qL1NNLVQyMzBOVS8qXCIgfSxcclxuICAgICAgeyBcInVhXCI6IFwiU00tVDIzME5VXCIgfVxyXG4gICAgXSxcclxuICAgIFwiZHBpXCI6IDIxNi4wLFxyXG4gICAgXCJid1wiOiAzLFxyXG4gICAgXCJhY1wiOiA1MDBcclxuICB9LFxyXG5cclxuICB7XHJcbiAgICBcInR5cGVcIjogXCJhbmRyb2lkXCIsXHJcbiAgICBcInJ1bGVzXCI6IFtcclxuICAgICAgeyBcIm1kbWhcIjogXCJzYW1zdW5nLyovU0dILVQzOTkvKlwiIH0sXHJcbiAgICAgIHsgXCJ1YVwiOiBcIlNHSC1UMzk5XCIgfVxyXG4gICAgXSxcclxuICAgIFwiZHBpXCI6IFsgMjE3LjcsIDIzMS40IF0sXHJcbiAgICBcImJ3XCI6IDMsXHJcbiAgICBcImFjXCI6IDEwMDBcclxuICB9LFxyXG5cclxuICB7XHJcbiAgICBcInR5cGVcIjogXCJhbmRyb2lkXCIsXHJcbiAgICBcInJ1bGVzXCI6IFtcclxuICAgICAgeyBcIm1kbWhcIjogXCJzYW1zdW5nLyovU00tTjkwMDUvKlwiIH0sXHJcbiAgICAgIHsgXCJ1YVwiOiBcIlNNLU45MDA1XCIgfVxyXG4gICAgXSxcclxuICAgIFwiZHBpXCI6IFsgMzg2LjQsIDM4Ny4wIF0sXHJcbiAgICBcImJ3XCI6IDMsXHJcbiAgICBcImFjXCI6IDUwMFxyXG4gIH0sXHJcblxyXG4gIHtcclxuICAgIFwidHlwZVwiOiBcImFuZHJvaWRcIixcclxuICAgIFwicnVsZXNcIjogW1xyXG4gICAgICB7IFwibWRtaFwiOiBcInNhbXN1bmcvKi9TQU1TVU5HLVNNLU45MDBBLypcIiB9LFxyXG4gICAgICB7IFwidWFcIjogXCJTQU1TVU5HLVNNLU45MDBBXCIgfVxyXG4gICAgXSxcclxuICAgIFwiZHBpXCI6IFsgMzg2LjQsIDM4Ny43IF0sXHJcbiAgICBcImJ3XCI6IDMsXHJcbiAgICBcImFjXCI6IDEwMDBcclxuICB9LFxyXG5cclxuICB7XHJcbiAgICBcInR5cGVcIjogXCJhbmRyb2lkXCIsXHJcbiAgICBcInJ1bGVzXCI6IFtcclxuICAgICAgeyBcIm1kbWhcIjogXCJzYW1zdW5nLyovR1QtSTk1MDAvKlwiIH0sXHJcbiAgICAgIHsgXCJ1YVwiOiBcIkdULUk5NTAwXCIgfVxyXG4gICAgXSxcclxuICAgIFwiZHBpXCI6IFsgNDQyLjUsIDQ0My4zIF0sXHJcbiAgICBcImJ3XCI6IDMsXHJcbiAgICBcImFjXCI6IDUwMFxyXG4gIH0sXHJcblxyXG4gIHtcclxuICAgIFwidHlwZVwiOiBcImFuZHJvaWRcIixcclxuICAgIFwicnVsZXNcIjogW1xyXG4gICAgICB7IFwibWRtaFwiOiBcInNhbXN1bmcvKi9HVC1JOTUwNS8qXCIgfSxcclxuICAgICAgeyBcInVhXCI6IFwiR1QtSTk1MDVcIiB9XHJcbiAgICBdLFxyXG4gICAgXCJkcGlcIjogNDM5LjQsXHJcbiAgICBcImJ3XCI6IDQsXHJcbiAgICBcImFjXCI6IDEwMDBcclxuICB9LFxyXG5cclxuICB7XHJcbiAgICBcInR5cGVcIjogXCJhbmRyb2lkXCIsXHJcbiAgICBcInJ1bGVzXCI6IFtcclxuICAgICAgeyBcIm1kbWhcIjogXCJzYW1zdW5nLyovU00tRzkwMEYvKlwiIH0sXHJcbiAgICAgIHsgXCJ1YVwiOiBcIlNNLUc5MDBGXCIgfVxyXG4gICAgXSxcclxuICAgIFwiZHBpXCI6IFsgNDE1LjYsIDQzMS42IF0sXHJcbiAgICBcImJ3XCI6IDUsXHJcbiAgICBcImFjXCI6IDEwMDBcclxuICB9LFxyXG5cclxuICB7XHJcbiAgICBcInR5cGVcIjogXCJhbmRyb2lkXCIsXHJcbiAgICBcInJ1bGVzXCI6IFtcclxuICAgICAgeyBcIm1kbWhcIjogXCJzYW1zdW5nLyovU00tRzkwME0vKlwiIH0sXHJcbiAgICAgIHsgXCJ1YVwiOiBcIlNNLUc5MDBNXCIgfVxyXG4gICAgXSxcclxuICAgIFwiZHBpXCI6IFsgNDE1LjYsIDQzMS42IF0sXHJcbiAgICBcImJ3XCI6IDUsXHJcbiAgICBcImFjXCI6IDEwMDBcclxuICB9LFxyXG5cclxuICB7XHJcbiAgICBcInR5cGVcIjogXCJhbmRyb2lkXCIsXHJcbiAgICBcInJ1bGVzXCI6IFtcclxuICAgICAgeyBcIm1kbWhcIjogXCJzYW1zdW5nLyovU00tRzgwMEYvKlwiIH0sXHJcbiAgICAgIHsgXCJ1YVwiOiBcIlNNLUc4MDBGXCIgfVxyXG4gICAgXSxcclxuICAgIFwiZHBpXCI6IDMyNi44LFxyXG4gICAgXCJid1wiOiAzLFxyXG4gICAgXCJhY1wiOiAxMDAwXHJcbiAgfSxcclxuXHJcbiAge1xyXG4gICAgXCJ0eXBlXCI6IFwiYW5kcm9pZFwiLFxyXG4gICAgXCJydWxlc1wiOiBbXHJcbiAgICAgIHsgXCJtZG1oXCI6IFwic2Ftc3VuZy8qL1NNLUc5MDZTLypcIiB9LFxyXG4gICAgICB7IFwidWFcIjogXCJTTS1HOTA2U1wiIH1cclxuICAgIF0sXHJcbiAgICBcImRwaVwiOiBbIDU2Mi43LCA1NzIuNCBdLFxyXG4gICAgXCJid1wiOiAzLFxyXG4gICAgXCJhY1wiOiAxMDAwXHJcbiAgfSxcclxuXHJcbiAge1xyXG4gICAgXCJ0eXBlXCI6IFwiYW5kcm9pZFwiLFxyXG4gICAgXCJydWxlc1wiOiBbXHJcbiAgICAgIHsgXCJtZG1oXCI6IFwic2Ftc3VuZy8qL0dULUk5MzAwLypcIiB9LFxyXG4gICAgICB7IFwidWFcIjogXCJHVC1JOTMwMFwiIH1cclxuICAgIF0sXHJcbiAgICBcImRwaVwiOiBbIDMwNi43LCAzMDQuOCBdLFxyXG4gICAgXCJid1wiOiA1LFxyXG4gICAgXCJhY1wiOiAxMDAwXHJcbiAgfSxcclxuXHJcbiAge1xyXG4gICAgXCJ0eXBlXCI6IFwiYW5kcm9pZFwiLFxyXG4gICAgXCJydWxlc1wiOiBbXHJcbiAgICAgIHsgXCJtZG1oXCI6IFwic2Ftc3VuZy8qL1NNLVQ1MzUvKlwiIH0sXHJcbiAgICAgIHsgXCJ1YVwiOiBcIlNNLVQ1MzVcIiB9XHJcbiAgICBdLFxyXG4gICAgXCJkcGlcIjogWyAxNDIuNiwgMTM2LjQgXSxcclxuICAgIFwiYndcIjogMyxcclxuICAgIFwiYWNcIjogNTAwXHJcbiAgfSxcclxuXHJcbiAge1xyXG4gICAgXCJ0eXBlXCI6IFwiYW5kcm9pZFwiLFxyXG4gICAgXCJydWxlc1wiOiBbXHJcbiAgICAgIHsgXCJtZG1oXCI6IFwic2Ftc3VuZy8qL1NNLU45MjBDLypcIiB9LFxyXG4gICAgICB7IFwidWFcIjogXCJTTS1OOTIwQ1wiIH1cclxuICAgIF0sXHJcbiAgICBcImRwaVwiOiBbIDUxNS4xLCA1MTguNCBdLFxyXG4gICAgXCJid1wiOiAzLFxyXG4gICAgXCJhY1wiOiAxMDAwXHJcbiAgfSxcclxuXHJcbiAge1xyXG4gICAgXCJ0eXBlXCI6IFwiYW5kcm9pZFwiLFxyXG4gICAgXCJydWxlc1wiOiBbXHJcbiAgICAgIHsgXCJtZG1oXCI6IFwic2Ftc3VuZy8qL0dULUk5MzAwSS8qXCIgfSxcclxuICAgICAgeyBcInVhXCI6IFwiR1QtSTkzMDBJXCIgfVxyXG4gICAgXSxcclxuICAgIFwiZHBpXCI6IFsgMzA0LjgsIDMwNS44IF0sXHJcbiAgICBcImJ3XCI6IDMsXHJcbiAgICBcImFjXCI6IDEwMDBcclxuICB9LFxyXG5cclxuICB7XHJcbiAgICBcInR5cGVcIjogXCJhbmRyb2lkXCIsXHJcbiAgICBcInJ1bGVzXCI6IFtcclxuICAgICAgeyBcIm1kbWhcIjogXCJzYW1zdW5nLyovR1QtSTkxOTUvKlwiIH0sXHJcbiAgICAgIHsgXCJ1YVwiOiBcIkdULUk5MTk1XCIgfVxyXG4gICAgXSxcclxuICAgIFwiZHBpXCI6IFsgMjQ5LjQsIDI1Ni43IF0sXHJcbiAgICBcImJ3XCI6IDMsXHJcbiAgICBcImFjXCI6IDUwMFxyXG4gIH0sXHJcblxyXG4gIHtcclxuICAgIFwidHlwZVwiOiBcImFuZHJvaWRcIixcclxuICAgIFwicnVsZXNcIjogW1xyXG4gICAgICB7IFwibWRtaFwiOiBcInNhbXN1bmcvKi9TUEgtTDUyMC8qXCIgfSxcclxuICAgICAgeyBcInVhXCI6IFwiU1BILUw1MjBcIiB9XHJcbiAgICBdLFxyXG4gICAgXCJkcGlcIjogWyAyNDkuNCwgMjU1LjkgXSxcclxuICAgIFwiYndcIjogMyxcclxuICAgIFwiYWNcIjogMTAwMFxyXG4gIH0sXHJcblxyXG4gIHtcclxuICAgIFwidHlwZVwiOiBcImFuZHJvaWRcIixcclxuICAgIFwicnVsZXNcIjogW1xyXG4gICAgICB7IFwibWRtaFwiOiBcInNhbXN1bmcvKi9TQU1TVU5HLVNHSC1JNzE3LypcIiB9LFxyXG4gICAgICB7IFwidWFcIjogXCJTQU1TVU5HLVNHSC1JNzE3XCIgfVxyXG4gICAgXSxcclxuICAgIFwiZHBpXCI6IDI4NS44LFxyXG4gICAgXCJid1wiOiAzLFxyXG4gICAgXCJhY1wiOiAxMDAwXHJcbiAgfSxcclxuXHJcbiAge1xyXG4gICAgXCJ0eXBlXCI6IFwiYW5kcm9pZFwiLFxyXG4gICAgXCJydWxlc1wiOiBbXHJcbiAgICAgIHsgXCJtZG1oXCI6IFwic2Ftc3VuZy8qL1NQSC1ENzEwLypcIiB9LFxyXG4gICAgICB7IFwidWFcIjogXCJTUEgtRDcxMFwiIH1cclxuICAgIF0sXHJcbiAgICBcImRwaVwiOiBbIDIxNy43LCAyMDQuMiBdLFxyXG4gICAgXCJid1wiOiAzLFxyXG4gICAgXCJhY1wiOiAxMDAwXHJcbiAgfSxcclxuXHJcbiAge1xyXG4gICAgXCJ0eXBlXCI6IFwiYW5kcm9pZFwiLFxyXG4gICAgXCJydWxlc1wiOiBbXHJcbiAgICAgIHsgXCJtZG1oXCI6IFwic2Ftc3VuZy8qL0dULU43MTAwLypcIiB9LFxyXG4gICAgICB7IFwidWFcIjogXCJHVC1ONzEwMFwiIH1cclxuICAgIF0sXHJcbiAgICBcImRwaVwiOiAyNjUuMSxcclxuICAgIFwiYndcIjogMyxcclxuICAgIFwiYWNcIjogMTAwMFxyXG4gIH0sXHJcblxyXG4gIHtcclxuICAgIFwidHlwZVwiOiBcImFuZHJvaWRcIixcclxuICAgIFwicnVsZXNcIjogW1xyXG4gICAgICB7IFwibWRtaFwiOiBcInNhbXN1bmcvKi9TQ0gtSTYwNS8qXCIgfSxcclxuICAgICAgeyBcInVhXCI6IFwiU0NILUk2MDVcIiB9XHJcbiAgICBdLFxyXG4gICAgXCJkcGlcIjogMjY1LjEsXHJcbiAgICBcImJ3XCI6IDMsXHJcbiAgICBcImFjXCI6IDEwMDBcclxuICB9LFxyXG5cclxuICB7XHJcbiAgICBcInR5cGVcIjogXCJhbmRyb2lkXCIsXHJcbiAgICBcInJ1bGVzXCI6IFtcclxuICAgICAgeyBcIm1kbWhcIjogXCJzYW1zdW5nLyovR2FsYXh5IE5leHVzLypcIiB9LFxyXG4gICAgICB7IFwidWFcIjogXCJHYWxheHkgTmV4dXNcIiB9XHJcbiAgICBdLFxyXG4gICAgXCJkcGlcIjogWyAzMTUuMywgMzE0LjIgXSxcclxuICAgIFwiYndcIjogMyxcclxuICAgIFwiYWNcIjogMTAwMFxyXG4gIH0sXHJcblxyXG4gIHtcclxuICAgIFwidHlwZVwiOiBcImFuZHJvaWRcIixcclxuICAgIFwicnVsZXNcIjogW1xyXG4gICAgICB7IFwibWRtaFwiOiBcInNhbXN1bmcvKi9TTS1OOTEwSC8qXCIgfSxcclxuICAgICAgeyBcInVhXCI6IFwiU00tTjkxMEhcIiB9XHJcbiAgICBdLFxyXG4gICAgXCJkcGlcIjogWyA1MTUuMSwgNTE4LjAgXSxcclxuICAgIFwiYndcIjogMyxcclxuICAgIFwiYWNcIjogMTAwMFxyXG4gIH0sXHJcblxyXG4gIHtcclxuICAgIFwidHlwZVwiOiBcImFuZHJvaWRcIixcclxuICAgIFwicnVsZXNcIjogW1xyXG4gICAgICB7IFwibWRtaFwiOiBcInNhbXN1bmcvKi9TTS1OOTEwQy8qXCIgfSxcclxuICAgICAgeyBcInVhXCI6IFwiU00tTjkxMENcIiB9XHJcbiAgICBdLFxyXG4gICAgXCJkcGlcIjogWyA1MTUuMiwgNTIwLjIgXSxcclxuICAgIFwiYndcIjogMyxcclxuICAgIFwiYWNcIjogNTAwXHJcbiAgfSxcclxuXHJcbiAge1xyXG4gICAgXCJ0eXBlXCI6IFwiYW5kcm9pZFwiLFxyXG4gICAgXCJydWxlc1wiOiBbXHJcbiAgICAgIHsgXCJtZG1oXCI6IFwic2Ftc3VuZy8qL1NNLUcxMzBNLypcIiB9LFxyXG4gICAgICB7IFwidWFcIjogXCJTTS1HMTMwTVwiIH1cclxuICAgIF0sXHJcbiAgICBcImRwaVwiOiBbIDE2NS45LCAxNjQuOCBdLFxyXG4gICAgXCJid1wiOiAzLFxyXG4gICAgXCJhY1wiOiA1MDBcclxuICB9LFxyXG5cclxuICB7XHJcbiAgICBcInR5cGVcIjogXCJhbmRyb2lkXCIsXHJcbiAgICBcInJ1bGVzXCI6IFtcclxuICAgICAgeyBcIm1kbWhcIjogXCJzYW1zdW5nLyovU00tRzkyOEkvKlwiIH0sXHJcbiAgICAgIHsgXCJ1YVwiOiBcIlNNLUc5MjhJXCIgfVxyXG4gICAgXSxcclxuICAgIFwiZHBpXCI6IFsgNTE1LjEsIDUxOC40IF0sXHJcbiAgICBcImJ3XCI6IDMsXHJcbiAgICBcImFjXCI6IDEwMDBcclxuICB9LFxyXG5cclxuICB7XHJcbiAgICBcInR5cGVcIjogXCJhbmRyb2lkXCIsXHJcbiAgICBcInJ1bGVzXCI6IFtcclxuICAgICAgeyBcIm1kbWhcIjogXCJzYW1zdW5nLyovU00tRzkyMEYvKlwiIH0sXHJcbiAgICAgIHsgXCJ1YVwiOiBcIlNNLUc5MjBGXCIgfVxyXG4gICAgXSxcclxuICAgIFwiZHBpXCI6IDU4MC42LFxyXG4gICAgXCJid1wiOiAzLFxyXG4gICAgXCJhY1wiOiA1MDBcclxuICB9LFxyXG5cclxuICB7XHJcbiAgICBcInR5cGVcIjogXCJhbmRyb2lkXCIsXHJcbiAgICBcInJ1bGVzXCI6IFtcclxuICAgICAgeyBcIm1kbWhcIjogXCJzYW1zdW5nLyovU00tRzkyMFAvKlwiIH0sXHJcbiAgICAgIHsgXCJ1YVwiOiBcIlNNLUc5MjBQXCIgfVxyXG4gICAgXSxcclxuICAgIFwiZHBpXCI6IFsgNTIyLjUsIDU3Ny4wIF0sXHJcbiAgICBcImJ3XCI6IDMsXHJcbiAgICBcImFjXCI6IDEwMDBcclxuICB9LFxyXG5cclxuICB7XHJcbiAgICBcInR5cGVcIjogXCJhbmRyb2lkXCIsXHJcbiAgICBcInJ1bGVzXCI6IFtcclxuICAgICAgeyBcIm1kbWhcIjogXCJzYW1zdW5nLyovU00tRzkyNUYvKlwiIH0sXHJcbiAgICAgIHsgXCJ1YVwiOiBcIlNNLUc5MjVGXCIgfVxyXG4gICAgXSxcclxuICAgIFwiZHBpXCI6IDU4MC42LFxyXG4gICAgXCJid1wiOiAzLFxyXG4gICAgXCJhY1wiOiA1MDBcclxuICB9LFxyXG5cclxuICB7XHJcbiAgICBcInR5cGVcIjogXCJhbmRyb2lkXCIsXHJcbiAgICBcInJ1bGVzXCI6IFtcclxuICAgICAgeyBcIm1kbWhcIjogXCJzYW1zdW5nLyovU00tRzkyNVYvKlwiIH0sXHJcbiAgICAgIHsgXCJ1YVwiOiBcIlNNLUc5MjVWXCIgfVxyXG4gICAgXSxcclxuICAgIFwiZHBpXCI6IFsgNTIyLjUsIDU3Ni42IF0sXHJcbiAgICBcImJ3XCI6IDMsXHJcbiAgICBcImFjXCI6IDEwMDBcclxuICB9LFxyXG5cclxuICB7XHJcbiAgICBcInR5cGVcIjogXCJhbmRyb2lkXCIsXHJcbiAgICBcInJ1bGVzXCI6IFtcclxuICAgICAgeyBcIm1kbWhcIjogXCJTb255LyovQzY5MDMvKlwiIH0sXHJcbiAgICAgIHsgXCJ1YVwiOiBcIkM2OTAzXCIgfVxyXG4gICAgXSxcclxuICAgIFwiZHBpXCI6IFsgNDQyLjUsIDQ0My4zIF0sXHJcbiAgICBcImJ3XCI6IDMsXHJcbiAgICBcImFjXCI6IDUwMFxyXG4gIH0sXHJcblxyXG4gIHtcclxuICAgIFwidHlwZVwiOiBcImFuZHJvaWRcIixcclxuICAgIFwicnVsZXNcIjogW1xyXG4gICAgICB7IFwibWRtaFwiOiBcIlNvbnkvKi9ENjY1My8qXCIgfSxcclxuICAgICAgeyBcInVhXCI6IFwiRDY2NTNcIiB9XHJcbiAgICBdLFxyXG4gICAgXCJkcGlcIjogWyA0MjguNiwgNDI3LjYgXSxcclxuICAgIFwiYndcIjogMyxcclxuICAgIFwiYWNcIjogMTAwMFxyXG4gIH0sXHJcblxyXG4gIHtcclxuICAgIFwidHlwZVwiOiBcImFuZHJvaWRcIixcclxuICAgIFwicnVsZXNcIjogW1xyXG4gICAgICB7IFwibWRtaFwiOiBcIlNvbnkvKi9FNjY1My8qXCIgfSxcclxuICAgICAgeyBcInVhXCI6IFwiRTY2NTNcIiB9XHJcbiAgICBdLFxyXG4gICAgXCJkcGlcIjogWyA0MjguNiwgNDI1LjcgXSxcclxuICAgIFwiYndcIjogMyxcclxuICAgIFwiYWNcIjogMTAwMFxyXG4gIH0sXHJcblxyXG4gIHtcclxuICAgIFwidHlwZVwiOiBcImFuZHJvaWRcIixcclxuICAgIFwicnVsZXNcIjogW1xyXG4gICAgICB7IFwibWRtaFwiOiBcIlNvbnkvKi9FNjg1My8qXCIgfSxcclxuICAgICAgeyBcInVhXCI6IFwiRTY4NTNcIiB9XHJcbiAgICBdLFxyXG4gICAgXCJkcGlcIjogWyA0MDMuNCwgNDAxLjkgXSxcclxuICAgIFwiYndcIjogMyxcclxuICAgIFwiYWNcIjogMTAwMFxyXG4gIH0sXHJcblxyXG4gIHtcclxuICAgIFwidHlwZVwiOiBcImFuZHJvaWRcIixcclxuICAgIFwicnVsZXNcIjogW1xyXG4gICAgICB7IFwibWRtaFwiOiBcIlNvbnkvKi9TR1AzMjEvKlwiIH0sXHJcbiAgICAgIHsgXCJ1YVwiOiBcIlNHUDMyMVwiIH1cclxuICAgIF0sXHJcbiAgICBcImRwaVwiOiBbIDIyNC43LCAyMjQuMSBdLFxyXG4gICAgXCJid1wiOiAzLFxyXG4gICAgXCJhY1wiOiA1MDBcclxuICB9LFxyXG5cclxuICB7XHJcbiAgICBcInR5cGVcIjogXCJhbmRyb2lkXCIsXHJcbiAgICBcInJ1bGVzXCI6IFtcclxuICAgICAgeyBcIm1kbWhcIjogXCJUQ1QvKi9BTENBVEVMIE9ORSBUT1VDSCBGaWVyY2UvKlwiIH0sXHJcbiAgICAgIHsgXCJ1YVwiOiBcIkFMQ0FURUwgT05FIFRPVUNIIEZpZXJjZVwiIH1cclxuICAgIF0sXHJcbiAgICBcImRwaVwiOiBbIDI0MC4wLCAyNDcuNSBdLFxyXG4gICAgXCJid1wiOiAzLFxyXG4gICAgXCJhY1wiOiAxMDAwXHJcbiAgfSxcclxuXHJcbiAge1xyXG4gICAgXCJ0eXBlXCI6IFwiYW5kcm9pZFwiLFxyXG4gICAgXCJydWxlc1wiOiBbXHJcbiAgICAgIHsgXCJtZG1oXCI6IFwiVEhMLyovdGhsIDUwMDAvKlwiIH0sXHJcbiAgICAgIHsgXCJ1YVwiOiBcInRobCA1MDAwXCIgfVxyXG4gICAgXSxcclxuICAgIFwiZHBpXCI6IFsgNDgwLjAsIDQ0My4zIF0sXHJcbiAgICBcImJ3XCI6IDMsXHJcbiAgICBcImFjXCI6IDEwMDBcclxuICB9LFxyXG5cclxuICB7XHJcbiAgICBcInR5cGVcIjogXCJhbmRyb2lkXCIsXHJcbiAgICBcInJ1bGVzXCI6IFtcclxuICAgICAgeyBcIm1kbWhcIjogXCJaVEUvKi9aVEUgQmxhZGUgTDIvKlwiIH0sXHJcbiAgICAgIHsgXCJ1YVwiOiBcIlpURSBCbGFkZSBMMlwiIH1cclxuICAgIF0sXHJcbiAgICBcImRwaVwiOiAyNDAuMCxcclxuICAgIFwiYndcIjogMyxcclxuICAgIFwiYWNcIjogNTAwXHJcbiAgfSxcclxuXHJcbiAge1xyXG4gICAgXCJ0eXBlXCI6IFwiaW9zXCIsXHJcbiAgICBcInJ1bGVzXCI6IFsgeyBcInJlc1wiOiBbIDY0MCwgOTYwIF0gfSBdLFxyXG4gICAgXCJkcGlcIjogWyAzMjUuMSwgMzI4LjQgXSxcclxuICAgIFwiYndcIjogNCxcclxuICAgIFwiYWNcIjogMTAwMFxyXG4gIH0sXHJcblxyXG4gIHtcclxuICAgIFwidHlwZVwiOiBcImlvc1wiLFxyXG4gICAgXCJydWxlc1wiOiBbIHsgXCJyZXNcIjogWyA2NDAsIDk2MCBdIH0gXSxcclxuICAgIFwiZHBpXCI6IFsgMzI1LjEsIDMyOC40IF0sXHJcbiAgICBcImJ3XCI6IDQsXHJcbiAgICBcImFjXCI6IDEwMDBcclxuICB9LFxyXG5cclxuICB7XHJcbiAgICBcInR5cGVcIjogXCJpb3NcIixcclxuICAgIFwicnVsZXNcIjogWyB7IFwicmVzXCI6IFsgNjQwLCAxMTM2IF0gfSBdLFxyXG4gICAgXCJkcGlcIjogWyAzMTcuMSwgMzIwLjIgXSxcclxuICAgIFwiYndcIjogMyxcclxuICAgIFwiYWNcIjogMTAwMFxyXG4gIH0sXHJcblxyXG4gIHtcclxuICAgIFwidHlwZVwiOiBcImlvc1wiLFxyXG4gICAgXCJydWxlc1wiOiBbIHsgXCJyZXNcIjogWyA2NDAsIDExMzYgXSB9IF0sXHJcbiAgICBcImRwaVwiOiBbIDMxNy4xLCAzMjAuMiBdLFxyXG4gICAgXCJid1wiOiAzLFxyXG4gICAgXCJhY1wiOiAxMDAwXHJcbiAgfSxcclxuXHJcbiAge1xyXG4gICAgXCJ0eXBlXCI6IFwiaW9zXCIsXHJcbiAgICBcInJ1bGVzXCI6IFsgeyBcInJlc1wiOiBbIDc1MCwgMTMzNCBdIH0gXSxcclxuICAgIFwiZHBpXCI6IDMyNi40LFxyXG4gICAgXCJid1wiOiA0LFxyXG4gICAgXCJhY1wiOiAxMDAwXHJcbiAgfSxcclxuXHJcbiAge1xyXG4gICAgXCJ0eXBlXCI6IFwiaW9zXCIsXHJcbiAgICBcInJ1bGVzXCI6IFsgeyBcInJlc1wiOiBbIDc1MCwgMTMzNCBdIH0gXSxcclxuICAgIFwiZHBpXCI6IDMyNi40LFxyXG4gICAgXCJid1wiOiA0LFxyXG4gICAgXCJhY1wiOiAxMDAwXHJcbiAgfSxcclxuXHJcbiAge1xyXG4gICAgXCJ0eXBlXCI6IFwiaW9zXCIsXHJcbiAgICBcInJ1bGVzXCI6IFsgeyBcInJlc1wiOiBbIDEyNDIsIDIyMDggXSB9IF0sXHJcbiAgICBcImRwaVwiOiBbIDQ1My42LCA0NTguNCBdLFxyXG4gICAgXCJid1wiOiA0LFxyXG4gICAgXCJhY1wiOiAxMDAwXHJcbiAgfSxcclxuXHJcbiAge1xyXG4gICAgXCJ0eXBlXCI6IFwiaW9zXCIsXHJcbiAgICBcInJ1bGVzXCI6IFsgeyBcInJlc1wiOiBbIDEyNDIsIDIyMDggXSB9IF0sXHJcbiAgICBcImRwaVwiOiBbIDQ1My42LCA0NTguNCBdLFxyXG4gICAgXCJid1wiOiA0LFxyXG4gICAgXCJhY1wiOiAxMDAwXHJcbiAgfVxyXG5dfTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gRFBEQl9DQUNIRTtcclxuXHJcbn0se31dLDExOltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcclxuLypcclxuICogQ29weXJpZ2h0IDIwMTUgR29vZ2xlIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5cclxuLy8gT2ZmbGluZSBjYWNoZSBvZiB0aGUgRFBEQiwgdG8gYmUgdXNlZCB1bnRpbCB3ZSBsb2FkIHRoZSBvbmxpbmUgb25lIChhbmRcclxuLy8gYXMgYSBmYWxsYmFjayBpbiBjYXNlIHdlIGNhbid0IGxvYWQgdGhlIG9ubGluZSBvbmUpLlxyXG52YXIgRFBEQl9DQUNIRSA9IF9kZXJlcV8oJy4vZHBkYi1jYWNoZS5qcycpO1xyXG52YXIgVXRpbCA9IF9kZXJlcV8oJy4uL3V0aWwuanMnKTtcclxuXHJcbi8vIE9ubGluZSBEUERCIFVSTC5cclxudmFyIE9OTElORV9EUERCX1VSTCA9ICdodHRwczovL3N0b3JhZ2UuZ29vZ2xlYXBpcy5jb20vY2FyZGJvYXJkLWRwZGIvZHBkYi5qc29uJztcclxuXHJcbi8qKlxyXG4gKiBDYWxjdWxhdGVzIGRldmljZSBwYXJhbWV0ZXJzIGJhc2VkIG9uIHRoZSBEUERCIChEZXZpY2UgUGFyYW1ldGVyIERhdGFiYXNlKS5cclxuICogSW5pdGlhbGx5LCB1c2VzIHRoZSBjYWNoZWQgRFBEQiB2YWx1ZXMuXHJcbiAqXHJcbiAqIElmIGZldGNoT25saW5lID09IHRydWUsIHRoZW4gdGhpcyBvYmplY3QgdHJpZXMgdG8gZmV0Y2ggdGhlIG9ubGluZSB2ZXJzaW9uXHJcbiAqIG9mIHRoZSBEUERCIGFuZCB1cGRhdGVzIHRoZSBkZXZpY2UgaW5mbyBpZiBhIGJldHRlciBtYXRjaCBpcyBmb3VuZC5cclxuICogQ2FsbHMgdGhlIG9uRGV2aWNlUGFyYW1zVXBkYXRlZCBjYWxsYmFjayB3aGVuIHRoZXJlIGlzIGFuIHVwZGF0ZSB0byB0aGVcclxuICogZGV2aWNlIGluZm9ybWF0aW9uLlxyXG4gKi9cclxuZnVuY3Rpb24gRHBkYihmZXRjaE9ubGluZSwgb25EZXZpY2VQYXJhbXNVcGRhdGVkKSB7XHJcbiAgLy8gU3RhcnQgd2l0aCB0aGUgb2ZmbGluZSBEUERCIGNhY2hlIHdoaWxlIHdlIGFyZSBsb2FkaW5nIHRoZSByZWFsIG9uZS5cclxuICB0aGlzLmRwZGIgPSBEUERCX0NBQ0hFO1xyXG5cclxuICAvLyBDYWxjdWxhdGUgZGV2aWNlIHBhcmFtcyBiYXNlZCBvbiB0aGUgb2ZmbGluZSB2ZXJzaW9uIG9mIHRoZSBEUERCLlxyXG4gIHRoaXMucmVjYWxjdWxhdGVEZXZpY2VQYXJhbXNfKCk7XHJcblxyXG4gIC8vIFhIUiB0byBmZXRjaCBvbmxpbmUgRFBEQiBmaWxlLCBpZiByZXF1ZXN0ZWQuXHJcbiAgaWYgKGZldGNoT25saW5lKSB7XHJcbiAgICAvLyBTZXQgdGhlIGNhbGxiYWNrLlxyXG4gICAgdGhpcy5vbkRldmljZVBhcmFtc1VwZGF0ZWQgPSBvbkRldmljZVBhcmFtc1VwZGF0ZWQ7XHJcblxyXG4gICAgY29uc29sZS5sb2coJ0ZldGNoaW5nIERQREIuLi4nKTtcclxuICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuICAgIHZhciBvYmogPSB0aGlzO1xyXG4gICAgeGhyLm9wZW4oJ0dFVCcsIE9OTElORV9EUERCX1VSTCwgdHJ1ZSk7XHJcbiAgICB4aHIuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGZ1bmN0aW9uKCkge1xyXG4gICAgICBvYmoubG9hZGluZyA9IGZhbHNlO1xyXG4gICAgICBpZiAoeGhyLnN0YXR1cyA+PSAyMDAgJiYgeGhyLnN0YXR1cyA8PSAyOTkpIHtcclxuICAgICAgICAvLyBTdWNjZXNzLlxyXG4gICAgICAgIGNvbnNvbGUubG9nKCdTdWNjZXNzZnVsbHkgbG9hZGVkIG9ubGluZSBEUERCLicpO1xyXG4gICAgICAgIG9iai5kcGRiID0gSlNPTi5wYXJzZSh4aHIucmVzcG9uc2UpO1xyXG4gICAgICAgIG9iai5yZWNhbGN1bGF0ZURldmljZVBhcmFtc18oKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAvLyBFcnJvciBsb2FkaW5nIHRoZSBEUERCLlxyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGxvYWRpbmcgb25saW5lIERQREIhJyk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgeGhyLnNlbmQoKTtcclxuICB9XHJcbn1cclxuXHJcbi8vIFJldHVybnMgdGhlIGN1cnJlbnQgZGV2aWNlIHBhcmFtZXRlcnMuXHJcbkRwZGIucHJvdG90eXBlLmdldERldmljZVBhcmFtcyA9IGZ1bmN0aW9uKCkge1xyXG4gIHJldHVybiB0aGlzLmRldmljZVBhcmFtcztcclxufTtcclxuXHJcbi8vIFJlY2FsY3VsYXRlcyB0aGlzIGRldmljZSdzIHBhcmFtZXRlcnMgYmFzZWQgb24gdGhlIERQREIuXHJcbkRwZGIucHJvdG90eXBlLnJlY2FsY3VsYXRlRGV2aWNlUGFyYW1zXyA9IGZ1bmN0aW9uKCkge1xyXG4gIGNvbnNvbGUubG9nKCdSZWNhbGN1bGF0aW5nIGRldmljZSBwYXJhbXMuJyk7XHJcbiAgdmFyIG5ld0RldmljZVBhcmFtcyA9IHRoaXMuY2FsY0RldmljZVBhcmFtc18oKTtcclxuICBjb25zb2xlLmxvZygnTmV3IGRldmljZSBwYXJhbWV0ZXJzOicpO1xyXG4gIGNvbnNvbGUubG9nKG5ld0RldmljZVBhcmFtcyk7XHJcbiAgaWYgKG5ld0RldmljZVBhcmFtcykge1xyXG4gICAgdGhpcy5kZXZpY2VQYXJhbXMgPSBuZXdEZXZpY2VQYXJhbXM7XHJcbiAgICAvLyBJbnZva2UgY2FsbGJhY2ssIGlmIGl0IGlzIHNldC5cclxuICAgIGlmICh0aGlzLm9uRGV2aWNlUGFyYW1zVXBkYXRlZCkge1xyXG4gICAgICB0aGlzLm9uRGV2aWNlUGFyYW1zVXBkYXRlZCh0aGlzLmRldmljZVBhcmFtcyk7XHJcbiAgICB9XHJcbiAgfSBlbHNlIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byByZWNhbGN1bGF0ZSBkZXZpY2UgcGFyYW1ldGVycy4nKTtcclxuICB9XHJcbn07XHJcblxyXG4vLyBSZXR1cm5zIGEgRGV2aWNlUGFyYW1zIG9iamVjdCB0aGF0IHJlcHJlc2VudHMgdGhlIGJlc3QgZ3Vlc3MgYXMgdG8gdGhpc1xyXG4vLyBkZXZpY2UncyBwYXJhbWV0ZXJzLiBDYW4gcmV0dXJuIG51bGwgaWYgdGhlIGRldmljZSBkb2VzIG5vdCBtYXRjaCBhbnlcclxuLy8ga25vd24gZGV2aWNlcy5cclxuRHBkYi5wcm90b3R5cGUuY2FsY0RldmljZVBhcmFtc18gPSBmdW5jdGlvbigpIHtcclxuICB2YXIgZGIgPSB0aGlzLmRwZGI7IC8vIHNob3J0aGFuZFxyXG4gIGlmICghZGIpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0RQREIgbm90IGF2YWlsYWJsZS4nKTtcclxuICAgIHJldHVybiBudWxsO1xyXG4gIH1cclxuICBpZiAoZGIuZm9ybWF0ICE9IDEpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0RQREIgaGFzIHVuZXhwZWN0ZWQgZm9ybWF0IHZlcnNpb24uJyk7XHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9XHJcbiAgaWYgKCFkYi5kZXZpY2VzIHx8ICFkYi5kZXZpY2VzLmxlbmd0aCkge1xyXG4gICAgY29uc29sZS5lcnJvcignRFBEQiBkb2VzIG5vdCBoYXZlIGEgZGV2aWNlcyBzZWN0aW9uLicpO1xyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG5cclxuICAvLyBHZXQgdGhlIGFjdHVhbCB1c2VyIGFnZW50IGFuZCBzY3JlZW4gZGltZW5zaW9ucyBpbiBwaXhlbHMuXHJcbiAgdmFyIHVzZXJBZ2VudCA9IG5hdmlnYXRvci51c2VyQWdlbnQgfHwgbmF2aWdhdG9yLnZlbmRvciB8fCB3aW5kb3cub3BlcmE7XHJcbiAgdmFyIHdpZHRoID0gVXRpbC5nZXRTY3JlZW5XaWR0aCgpO1xyXG4gIHZhciBoZWlnaHQgPSBVdGlsLmdldFNjcmVlbkhlaWdodCgpO1xyXG4gIGNvbnNvbGUubG9nKCdVc2VyIGFnZW50OiAnICsgdXNlckFnZW50KTtcclxuICBjb25zb2xlLmxvZygnUGl4ZWwgd2lkdGg6ICcgKyB3aWR0aCk7XHJcbiAgY29uc29sZS5sb2coJ1BpeGVsIGhlaWdodDogJyArIGhlaWdodCk7XHJcblxyXG4gIGlmICghZGIuZGV2aWNlcykge1xyXG4gICAgY29uc29sZS5lcnJvcignRFBEQiBoYXMgbm8gZGV2aWNlcyBzZWN0aW9uLicpO1xyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG5cclxuICBmb3IgKHZhciBpID0gMDsgaSA8IGRiLmRldmljZXMubGVuZ3RoOyBpKyspIHtcclxuICAgIHZhciBkZXZpY2UgPSBkYi5kZXZpY2VzW2ldO1xyXG4gICAgaWYgKCFkZXZpY2UucnVsZXMpIHtcclxuICAgICAgY29uc29sZS53YXJuKCdEZXZpY2VbJyArIGkgKyAnXSBoYXMgbm8gcnVsZXMgc2VjdGlvbi4nKTtcclxuICAgICAgY29udGludWU7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGRldmljZS50eXBlICE9ICdpb3MnICYmIGRldmljZS50eXBlICE9ICdhbmRyb2lkJykge1xyXG4gICAgICBjb25zb2xlLndhcm4oJ0RldmljZVsnICsgaSArICddIGhhcyBpbnZhbGlkIHR5cGUuJyk7XHJcbiAgICAgIGNvbnRpbnVlO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFNlZSBpZiB0aGlzIGRldmljZSBpcyBvZiB0aGUgYXBwcm9wcmlhdGUgdHlwZS5cclxuICAgIGlmIChVdGlsLmlzSU9TKCkgIT0gKGRldmljZS50eXBlID09ICdpb3MnKSkgY29udGludWU7XHJcblxyXG4gICAgLy8gU2VlIGlmIHRoaXMgZGV2aWNlIG1hdGNoZXMgYW55IG9mIHRoZSBydWxlczpcclxuICAgIHZhciBtYXRjaGVkID0gZmFsc2U7XHJcbiAgICBmb3IgKHZhciBqID0gMDsgaiA8IGRldmljZS5ydWxlcy5sZW5ndGg7IGorKykge1xyXG4gICAgICB2YXIgcnVsZSA9IGRldmljZS5ydWxlc1tqXTtcclxuICAgICAgaWYgKHRoaXMubWF0Y2hSdWxlXyhydWxlLCB1c2VyQWdlbnQsIHdpZHRoLCBoZWlnaHQpKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ1J1bGUgbWF0Y2hlZDonKTtcclxuICAgICAgICBjb25zb2xlLmxvZyhydWxlKTtcclxuICAgICAgICBtYXRjaGVkID0gdHJ1ZTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKCFtYXRjaGVkKSBjb250aW51ZTtcclxuXHJcbiAgICAvLyBkZXZpY2UuZHBpIG1pZ2h0IGJlIGFuIGFycmF5IG9mIFsgeGRwaSwgeWRwaV0gb3IganVzdCBhIHNjYWxhci5cclxuICAgIHZhciB4ZHBpID0gZGV2aWNlLmRwaVswXSB8fCBkZXZpY2UuZHBpO1xyXG4gICAgdmFyIHlkcGkgPSBkZXZpY2UuZHBpWzFdIHx8IGRldmljZS5kcGk7XHJcblxyXG4gICAgcmV0dXJuIG5ldyBEZXZpY2VQYXJhbXMoeyB4ZHBpOiB4ZHBpLCB5ZHBpOiB5ZHBpLCBiZXZlbE1tOiBkZXZpY2UuYncgfSk7XHJcbiAgfVxyXG5cclxuICBjb25zb2xlLndhcm4oJ05vIERQREIgZGV2aWNlIG1hdGNoLicpO1xyXG4gIHJldHVybiBudWxsO1xyXG59O1xyXG5cclxuRHBkYi5wcm90b3R5cGUubWF0Y2hSdWxlXyA9IGZ1bmN0aW9uKHJ1bGUsIHVhLCBzY3JlZW5XaWR0aCwgc2NyZWVuSGVpZ2h0KSB7XHJcbiAgLy8gV2UgY2FuIG9ubHkgbWF0Y2ggJ3VhJyBhbmQgJ3JlcycgcnVsZXMsIG5vdCBvdGhlciB0eXBlcyBsaWtlICdtZG1oJ1xyXG4gIC8vICh3aGljaCBhcmUgbWVhbnQgZm9yIG5hdGl2ZSBwbGF0Zm9ybXMpLlxyXG4gIGlmICghcnVsZS51YSAmJiAhcnVsZS5yZXMpIHJldHVybiBmYWxzZTtcclxuXHJcbiAgLy8gSWYgb3VyIHVzZXIgYWdlbnQgc3RyaW5nIGRvZXNuJ3QgY29udGFpbiB0aGUgaW5kaWNhdGVkIHVzZXIgYWdlbnQgc3RyaW5nLFxyXG4gIC8vIHRoZSBtYXRjaCBmYWlscy5cclxuICBpZiAocnVsZS51YSAmJiB1YS5pbmRleE9mKHJ1bGUudWEpIDwgMCkgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAvLyBJZiB0aGUgcnVsZSBzcGVjaWZpZXMgc2NyZWVuIGRpbWVuc2lvbnMgdGhhdCBkb24ndCBjb3JyZXNwb25kIHRvIG91cnMsXHJcbiAgLy8gdGhlIG1hdGNoIGZhaWxzLlxyXG4gIGlmIChydWxlLnJlcykge1xyXG4gICAgaWYgKCFydWxlLnJlc1swXSB8fCAhcnVsZS5yZXNbMV0pIHJldHVybiBmYWxzZTtcclxuICAgIHZhciByZXNYID0gcnVsZS5yZXNbMF07XHJcbiAgICB2YXIgcmVzWSA9IHJ1bGUucmVzWzFdO1xyXG4gICAgLy8gQ29tcGFyZSBtaW4gYW5kIG1heCBzbyBhcyB0byBtYWtlIHRoZSBvcmRlciBub3QgbWF0dGVyLCBpLmUuLCBpdCBzaG91bGRcclxuICAgIC8vIGJlIHRydWUgdGhhdCA2NDB4NDgwID09IDQ4MHg2NDAuXHJcbiAgICBpZiAoTWF0aC5taW4oc2NyZWVuV2lkdGgsIHNjcmVlbkhlaWdodCkgIT0gTWF0aC5taW4ocmVzWCwgcmVzWSkgfHxcclxuICAgICAgICAoTWF0aC5tYXgoc2NyZWVuV2lkdGgsIHNjcmVlbkhlaWdodCkgIT0gTWF0aC5tYXgocmVzWCwgcmVzWSkpKSB7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJldHVybiB0cnVlO1xyXG59XHJcblxyXG5mdW5jdGlvbiBEZXZpY2VQYXJhbXMocGFyYW1zKSB7XHJcbiAgdGhpcy54ZHBpID0gcGFyYW1zLnhkcGk7XHJcbiAgdGhpcy55ZHBpID0gcGFyYW1zLnlkcGk7XHJcbiAgdGhpcy5iZXZlbE1tID0gcGFyYW1zLmJldmVsTW07XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gRHBkYjtcclxufSx7XCIuLi91dGlsLmpzXCI6MjIsXCIuL2RwZGItY2FjaGUuanNcIjoxMH1dLDEyOltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcclxuLypcclxuICogQ29weXJpZ2h0IDIwMTUgR29vZ2xlIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5cclxuZnVuY3Rpb24gRW1pdHRlcigpIHtcclxuICB0aGlzLmNhbGxiYWNrcyA9IHt9O1xyXG59XHJcblxyXG5FbWl0dGVyLnByb3RvdHlwZS5lbWl0ID0gZnVuY3Rpb24oZXZlbnROYW1lKSB7XHJcbiAgdmFyIGNhbGxiYWNrcyA9IHRoaXMuY2FsbGJhY2tzW2V2ZW50TmFtZV07XHJcbiAgaWYgKCFjYWxsYmFja3MpIHtcclxuICAgIC8vY29uc29sZS5sb2coJ05vIHZhbGlkIGNhbGxiYWNrIHNwZWNpZmllZC4nKTtcclxuICAgIHJldHVybjtcclxuICB9XHJcbiAgdmFyIGFyZ3MgPSBbXS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7XHJcbiAgLy8gRWxpbWluYXRlIHRoZSBmaXJzdCBwYXJhbSAodGhlIGNhbGxiYWNrKS5cclxuICBhcmdzLnNoaWZ0KCk7XHJcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBjYWxsYmFja3MubGVuZ3RoOyBpKyspIHtcclxuICAgIGNhbGxiYWNrc1tpXS5hcHBseSh0aGlzLCBhcmdzKTtcclxuICB9XHJcbn07XHJcblxyXG5FbWl0dGVyLnByb3RvdHlwZS5vbiA9IGZ1bmN0aW9uKGV2ZW50TmFtZSwgY2FsbGJhY2spIHtcclxuICBpZiAoZXZlbnROYW1lIGluIHRoaXMuY2FsbGJhY2tzKSB7XHJcbiAgICB0aGlzLmNhbGxiYWNrc1tldmVudE5hbWVdLnB1c2goY2FsbGJhY2spO1xyXG4gIH0gZWxzZSB7XHJcbiAgICB0aGlzLmNhbGxiYWNrc1tldmVudE5hbWVdID0gW2NhbGxiYWNrXTtcclxuICB9XHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IEVtaXR0ZXI7XHJcblxyXG59LHt9XSwxMzpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XHJcbi8qXHJcbiAqIENvcHlyaWdodCAyMDE1IEdvb2dsZSBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxudmFyIFV0aWwgPSBfZGVyZXFfKCcuL3V0aWwuanMnKTtcclxudmFyIFdlYlZSUG9seWZpbGwgPSBfZGVyZXFfKCcuL3dlYnZyLXBvbHlmaWxsLmpzJyk7XHJcblxyXG4vLyBJbml0aWFsaXplIGEgV2ViVlJDb25maWcganVzdCBpbiBjYXNlLlxyXG53aW5kb3cuV2ViVlJDb25maWcgPSBVdGlsLmV4dGVuZCh7XHJcbiAgLy8gRm9yY2VzIGF2YWlsYWJpbGl0eSBvZiBWUiBtb2RlLCBldmVuIGZvciBub24tbW9iaWxlIGRldmljZXMuXHJcbiAgRk9SQ0VfRU5BQkxFX1ZSOiBmYWxzZSxcclxuXHJcbiAgLy8gQ29tcGxlbWVudGFyeSBmaWx0ZXIgY29lZmZpY2llbnQuIDAgZm9yIGFjY2VsZXJvbWV0ZXIsIDEgZm9yIGd5cm8uXHJcbiAgS19GSUxURVI6IDAuOTgsXHJcblxyXG4gIC8vIEhvdyBmYXIgaW50byB0aGUgZnV0dXJlIHRvIHByZWRpY3QgZHVyaW5nIGZhc3QgbW90aW9uIChpbiBzZWNvbmRzKS5cclxuICBQUkVESUNUSU9OX1RJTUVfUzogMC4wNDAsXHJcblxyXG4gIC8vIEZsYWcgdG8gZGlzYWJsZSB0b3VjaCBwYW5uZXIuIEluIGNhc2UgeW91IGhhdmUgeW91ciBvd24gdG91Y2ggY29udHJvbHMuXHJcbiAgVE9VQ0hfUEFOTkVSX0RJU0FCTEVEOiBmYWxzZSxcclxuXHJcbiAgLy8gRmxhZyB0byBkaXNhYmxlZCB0aGUgVUkgaW4gVlIgTW9kZS5cclxuICBDQVJEQk9BUkRfVUlfRElTQUJMRUQ6IGZhbHNlLCAvLyBEZWZhdWx0OiBmYWxzZVxyXG5cclxuICAvLyBGbGFnIHRvIGRpc2FibGUgdGhlIGluc3RydWN0aW9ucyB0byByb3RhdGUgeW91ciBkZXZpY2UuXHJcbiAgUk9UQVRFX0lOU1RSVUNUSU9OU19ESVNBQkxFRDogZmFsc2UsIC8vIERlZmF1bHQ6IGZhbHNlLlxyXG5cclxuICAvLyBFbmFibGUgeWF3IHBhbm5pbmcgb25seSwgZGlzYWJsaW5nIHJvbGwgYW5kIHBpdGNoLiBUaGlzIGNhbiBiZSB1c2VmdWxcclxuICAvLyBmb3IgcGFub3JhbWFzIHdpdGggbm90aGluZyBpbnRlcmVzdGluZyBhYm92ZSBvciBiZWxvdy5cclxuICBZQVdfT05MWTogZmFsc2UsXHJcblxyXG4gIC8vIFRvIGRpc2FibGUga2V5Ym9hcmQgYW5kIG1vdXNlIGNvbnRyb2xzLCBpZiB5b3Ugd2FudCB0byB1c2UgeW91ciBvd25cclxuICAvLyBpbXBsZW1lbnRhdGlvbi5cclxuICBNT1VTRV9LRVlCT0FSRF9DT05UUk9MU19ESVNBQkxFRDogZmFsc2UsXHJcblxyXG4gIC8vIFByZXZlbnQgdGhlIHBvbHlmaWxsIGZyb20gaW5pdGlhbGl6aW5nIGltbWVkaWF0ZWx5LiBSZXF1aXJlcyB0aGUgYXBwXHJcbiAgLy8gdG8gY2FsbCBJbml0aWFsaXplV2ViVlJQb2x5ZmlsbCgpIGJlZm9yZSBpdCBjYW4gYmUgdXNlZC5cclxuICBERUZFUl9JTklUSUFMSVpBVElPTjogZmFsc2UsXHJcblxyXG4gIC8vIEVuYWJsZSB0aGUgZGVwcmVjYXRlZCB2ZXJzaW9uIG9mIHRoZSBBUEkgKG5hdmlnYXRvci5nZXRWUkRldmljZXMpLlxyXG4gIEVOQUJMRV9ERVBSRUNBVEVEX0FQSTogZmFsc2UsXHJcblxyXG4gIC8vIFNjYWxlcyB0aGUgcmVjb21tZW5kZWQgYnVmZmVyIHNpemUgcmVwb3J0ZWQgYnkgV2ViVlIsIHdoaWNoIGNhbiBpbXByb3ZlXHJcbiAgLy8gcGVyZm9ybWFuY2UuXHJcbiAgLy8gVVBEQVRFKDIwMTYtMDUtMDMpOiBTZXR0aW5nIHRoaXMgdG8gMC41IGJ5IGRlZmF1bHQgc2luY2UgMS4wIGRvZXMgbm90XHJcbiAgLy8gcGVyZm9ybSB3ZWxsIG9uIG1hbnkgbW9iaWxlIGRldmljZXMuXHJcbiAgQlVGRkVSX1NDQUxFOiAwLjUsXHJcblxyXG4gIC8vIEFsbG93IFZSRGlzcGxheS5zdWJtaXRGcmFtZSB0byBjaGFuZ2UgZ2wgYmluZGluZ3MsIHdoaWNoIGlzIG1vcmVcclxuICAvLyBlZmZpY2llbnQgaWYgdGhlIGFwcGxpY2F0aW9uIGNvZGUgd2lsbCByZS1iaW5kIGl0cyByZXNvdXJjZXMgb24gdGhlXHJcbiAgLy8gbmV4dCBmcmFtZSBhbnl3YXkuIFRoaXMgaGFzIGJlZW4gc2VlbiB0byBjYXVzZSByZW5kZXJpbmcgZ2xpdGNoZXMgd2l0aFxyXG4gIC8vIFRIUkVFLmpzLlxyXG4gIC8vIERpcnR5IGJpbmRpbmdzIGluY2x1ZGU6IGdsLkZSQU1FQlVGRkVSX0JJTkRJTkcsIGdsLkNVUlJFTlRfUFJPR1JBTSxcclxuICAvLyBnbC5BUlJBWV9CVUZGRVJfQklORElORywgZ2wuRUxFTUVOVF9BUlJBWV9CVUZGRVJfQklORElORyxcclxuICAvLyBhbmQgZ2wuVEVYVFVSRV9CSU5ESU5HXzJEIGZvciB0ZXh0dXJlIHVuaXQgMC5cclxuICBESVJUWV9TVUJNSVRfRlJBTUVfQklORElOR1M6IGZhbHNlXHJcbn0sIHdpbmRvdy5XZWJWUkNvbmZpZyk7XHJcblxyXG5pZiAoIXdpbmRvdy5XZWJWUkNvbmZpZy5ERUZFUl9JTklUSUFMSVpBVElPTikge1xyXG4gIG5ldyBXZWJWUlBvbHlmaWxsKCk7XHJcbn0gZWxzZSB7XHJcbiAgd2luZG93LkluaXRpYWxpemVXZWJWUlBvbHlmaWxsID0gZnVuY3Rpb24oKSB7XHJcbiAgICBuZXcgV2ViVlJQb2x5ZmlsbCgpO1xyXG4gIH1cclxufVxyXG5cclxufSx7XCIuL3V0aWwuanNcIjoyMixcIi4vd2VidnItcG9seWZpbGwuanNcIjoyNX1dLDE0OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcclxuLypcclxuICogQ29weXJpZ2h0IDIwMTYgR29vZ2xlIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5cclxudmFyIE1hdGhVdGlsID0gd2luZG93Lk1hdGhVdGlsIHx8IHt9O1xyXG5cclxuTWF0aFV0aWwuZGVnVG9SYWQgPSBNYXRoLlBJIC8gMTgwO1xyXG5NYXRoVXRpbC5yYWRUb0RlZyA9IDE4MCAvIE1hdGguUEk7XHJcblxyXG4vLyBTb21lIG1pbmltYWwgbWF0aCBmdW5jdGlvbmFsaXR5IGJvcnJvd2VkIGZyb20gVEhSRUUuTWF0aCBhbmQgc3RyaXBwZWQgZG93blxyXG4vLyBmb3IgdGhlIHB1cnBvc2VzIG9mIHRoaXMgbGlicmFyeS5cclxuXHJcblxyXG5NYXRoVXRpbC5WZWN0b3IyID0gZnVuY3Rpb24gKCB4LCB5ICkge1xyXG4gIHRoaXMueCA9IHggfHwgMDtcclxuICB0aGlzLnkgPSB5IHx8IDA7XHJcbn07XHJcblxyXG5NYXRoVXRpbC5WZWN0b3IyLnByb3RvdHlwZSA9IHtcclxuICBjb25zdHJ1Y3RvcjogTWF0aFV0aWwuVmVjdG9yMixcclxuXHJcbiAgc2V0OiBmdW5jdGlvbiAoIHgsIHkgKSB7XHJcbiAgICB0aGlzLnggPSB4O1xyXG4gICAgdGhpcy55ID0geTtcclxuXHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9LFxyXG5cclxuICBjb3B5OiBmdW5jdGlvbiAoIHYgKSB7XHJcbiAgICB0aGlzLnggPSB2Lng7XHJcbiAgICB0aGlzLnkgPSB2Lnk7XHJcblxyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfSxcclxuXHJcbiAgc3ViVmVjdG9yczogZnVuY3Rpb24gKCBhLCBiICkge1xyXG4gICAgdGhpcy54ID0gYS54IC0gYi54O1xyXG4gICAgdGhpcy55ID0gYS55IC0gYi55O1xyXG5cclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH0sXHJcbn07XHJcblxyXG5NYXRoVXRpbC5WZWN0b3IzID0gZnVuY3Rpb24gKCB4LCB5LCB6ICkge1xyXG4gIHRoaXMueCA9IHggfHwgMDtcclxuICB0aGlzLnkgPSB5IHx8IDA7XHJcbiAgdGhpcy56ID0geiB8fCAwO1xyXG59O1xyXG5cclxuTWF0aFV0aWwuVmVjdG9yMy5wcm90b3R5cGUgPSB7XHJcbiAgY29uc3RydWN0b3I6IE1hdGhVdGlsLlZlY3RvcjMsXHJcblxyXG4gIHNldDogZnVuY3Rpb24gKCB4LCB5LCB6ICkge1xyXG4gICAgdGhpcy54ID0geDtcclxuICAgIHRoaXMueSA9IHk7XHJcbiAgICB0aGlzLnogPSB6O1xyXG5cclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH0sXHJcblxyXG4gIGNvcHk6IGZ1bmN0aW9uICggdiApIHtcclxuICAgIHRoaXMueCA9IHYueDtcclxuICAgIHRoaXMueSA9IHYueTtcclxuICAgIHRoaXMueiA9IHYuejtcclxuXHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9LFxyXG5cclxuICBsZW5ndGg6IGZ1bmN0aW9uICgpIHtcclxuICAgIHJldHVybiBNYXRoLnNxcnQoIHRoaXMueCAqIHRoaXMueCArIHRoaXMueSAqIHRoaXMueSArIHRoaXMueiAqIHRoaXMueiApO1xyXG4gIH0sXHJcblxyXG4gIG5vcm1hbGl6ZTogZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNjYWxhciA9IHRoaXMubGVuZ3RoKCk7XHJcblxyXG4gICAgaWYgKCBzY2FsYXIgIT09IDAgKSB7XHJcbiAgICAgIHZhciBpbnZTY2FsYXIgPSAxIC8gc2NhbGFyO1xyXG5cclxuICAgICAgdGhpcy5tdWx0aXBseVNjYWxhcihpbnZTY2FsYXIpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy54ID0gMDtcclxuICAgICAgdGhpcy55ID0gMDtcclxuICAgICAgdGhpcy56ID0gMDtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9LFxyXG5cclxuICBtdWx0aXBseVNjYWxhcjogZnVuY3Rpb24gKCBzY2FsYXIgKSB7XHJcbiAgICB0aGlzLnggKj0gc2NhbGFyO1xyXG4gICAgdGhpcy55ICo9IHNjYWxhcjtcclxuICAgIHRoaXMueiAqPSBzY2FsYXI7XHJcbiAgfSxcclxuXHJcbiAgYXBwbHlRdWF0ZXJuaW9uOiBmdW5jdGlvbiAoIHEgKSB7XHJcbiAgICB2YXIgeCA9IHRoaXMueDtcclxuICAgIHZhciB5ID0gdGhpcy55O1xyXG4gICAgdmFyIHogPSB0aGlzLno7XHJcblxyXG4gICAgdmFyIHF4ID0gcS54O1xyXG4gICAgdmFyIHF5ID0gcS55O1xyXG4gICAgdmFyIHF6ID0gcS56O1xyXG4gICAgdmFyIHF3ID0gcS53O1xyXG5cclxuICAgIC8vIGNhbGN1bGF0ZSBxdWF0ICogdmVjdG9yXHJcbiAgICB2YXIgaXggPSAgcXcgKiB4ICsgcXkgKiB6IC0gcXogKiB5O1xyXG4gICAgdmFyIGl5ID0gIHF3ICogeSArIHF6ICogeCAtIHF4ICogejtcclxuICAgIHZhciBpeiA9ICBxdyAqIHogKyBxeCAqIHkgLSBxeSAqIHg7XHJcbiAgICB2YXIgaXcgPSAtIHF4ICogeCAtIHF5ICogeSAtIHF6ICogejtcclxuXHJcbiAgICAvLyBjYWxjdWxhdGUgcmVzdWx0ICogaW52ZXJzZSBxdWF0XHJcbiAgICB0aGlzLnggPSBpeCAqIHF3ICsgaXcgKiAtIHF4ICsgaXkgKiAtIHF6IC0gaXogKiAtIHF5O1xyXG4gICAgdGhpcy55ID0gaXkgKiBxdyArIGl3ICogLSBxeSArIGl6ICogLSBxeCAtIGl4ICogLSBxejtcclxuICAgIHRoaXMueiA9IGl6ICogcXcgKyBpdyAqIC0gcXogKyBpeCAqIC0gcXkgLSBpeSAqIC0gcXg7XHJcblxyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfSxcclxuXHJcbiAgZG90OiBmdW5jdGlvbiAoIHYgKSB7XHJcbiAgICByZXR1cm4gdGhpcy54ICogdi54ICsgdGhpcy55ICogdi55ICsgdGhpcy56ICogdi56O1xyXG4gIH0sXHJcblxyXG4gIGNyb3NzVmVjdG9yczogZnVuY3Rpb24gKCBhLCBiICkge1xyXG4gICAgdmFyIGF4ID0gYS54LCBheSA9IGEueSwgYXogPSBhLno7XHJcbiAgICB2YXIgYnggPSBiLngsIGJ5ID0gYi55LCBieiA9IGIuejtcclxuXHJcbiAgICB0aGlzLnggPSBheSAqIGJ6IC0gYXogKiBieTtcclxuICAgIHRoaXMueSA9IGF6ICogYnggLSBheCAqIGJ6O1xyXG4gICAgdGhpcy56ID0gYXggKiBieSAtIGF5ICogYng7XHJcblxyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfSxcclxufTtcclxuXHJcbk1hdGhVdGlsLlF1YXRlcm5pb24gPSBmdW5jdGlvbiAoIHgsIHksIHosIHcgKSB7XHJcbiAgdGhpcy54ID0geCB8fCAwO1xyXG4gIHRoaXMueSA9IHkgfHwgMDtcclxuICB0aGlzLnogPSB6IHx8IDA7XHJcbiAgdGhpcy53ID0gKCB3ICE9PSB1bmRlZmluZWQgKSA/IHcgOiAxO1xyXG59O1xyXG5cclxuTWF0aFV0aWwuUXVhdGVybmlvbi5wcm90b3R5cGUgPSB7XHJcbiAgY29uc3RydWN0b3I6IE1hdGhVdGlsLlF1YXRlcm5pb24sXHJcblxyXG4gIHNldDogZnVuY3Rpb24gKCB4LCB5LCB6LCB3ICkge1xyXG4gICAgdGhpcy54ID0geDtcclxuICAgIHRoaXMueSA9IHk7XHJcbiAgICB0aGlzLnogPSB6O1xyXG4gICAgdGhpcy53ID0gdztcclxuXHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9LFxyXG5cclxuICBjb3B5OiBmdW5jdGlvbiAoIHF1YXRlcm5pb24gKSB7XHJcbiAgICB0aGlzLnggPSBxdWF0ZXJuaW9uLng7XHJcbiAgICB0aGlzLnkgPSBxdWF0ZXJuaW9uLnk7XHJcbiAgICB0aGlzLnogPSBxdWF0ZXJuaW9uLno7XHJcbiAgICB0aGlzLncgPSBxdWF0ZXJuaW9uLnc7XHJcblxyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfSxcclxuXHJcbiAgc2V0RnJvbUV1bGVyWFlaOiBmdW5jdGlvbiggeCwgeSwgeiApIHtcclxuICAgIHZhciBjMSA9IE1hdGguY29zKCB4IC8gMiApO1xyXG4gICAgdmFyIGMyID0gTWF0aC5jb3MoIHkgLyAyICk7XHJcbiAgICB2YXIgYzMgPSBNYXRoLmNvcyggeiAvIDIgKTtcclxuICAgIHZhciBzMSA9IE1hdGguc2luKCB4IC8gMiApO1xyXG4gICAgdmFyIHMyID0gTWF0aC5zaW4oIHkgLyAyICk7XHJcbiAgICB2YXIgczMgPSBNYXRoLnNpbiggeiAvIDIgKTtcclxuXHJcbiAgICB0aGlzLnggPSBzMSAqIGMyICogYzMgKyBjMSAqIHMyICogczM7XHJcbiAgICB0aGlzLnkgPSBjMSAqIHMyICogYzMgLSBzMSAqIGMyICogczM7XHJcbiAgICB0aGlzLnogPSBjMSAqIGMyICogczMgKyBzMSAqIHMyICogYzM7XHJcbiAgICB0aGlzLncgPSBjMSAqIGMyICogYzMgLSBzMSAqIHMyICogczM7XHJcblxyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfSxcclxuXHJcbiAgc2V0RnJvbUV1bGVyWVhaOiBmdW5jdGlvbiggeCwgeSwgeiApIHtcclxuICAgIHZhciBjMSA9IE1hdGguY29zKCB4IC8gMiApO1xyXG4gICAgdmFyIGMyID0gTWF0aC5jb3MoIHkgLyAyICk7XHJcbiAgICB2YXIgYzMgPSBNYXRoLmNvcyggeiAvIDIgKTtcclxuICAgIHZhciBzMSA9IE1hdGguc2luKCB4IC8gMiApO1xyXG4gICAgdmFyIHMyID0gTWF0aC5zaW4oIHkgLyAyICk7XHJcbiAgICB2YXIgczMgPSBNYXRoLnNpbiggeiAvIDIgKTtcclxuXHJcbiAgICB0aGlzLnggPSBzMSAqIGMyICogYzMgKyBjMSAqIHMyICogczM7XHJcbiAgICB0aGlzLnkgPSBjMSAqIHMyICogYzMgLSBzMSAqIGMyICogczM7XHJcbiAgICB0aGlzLnogPSBjMSAqIGMyICogczMgLSBzMSAqIHMyICogYzM7XHJcbiAgICB0aGlzLncgPSBjMSAqIGMyICogYzMgKyBzMSAqIHMyICogczM7XHJcblxyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfSxcclxuXHJcbiAgc2V0RnJvbUF4aXNBbmdsZTogZnVuY3Rpb24gKCBheGlzLCBhbmdsZSApIHtcclxuICAgIC8vIGh0dHA6Ly93d3cuZXVjbGlkZWFuc3BhY2UuY29tL21hdGhzL2dlb21ldHJ5L3JvdGF0aW9ucy9jb252ZXJzaW9ucy9hbmdsZVRvUXVhdGVybmlvbi9pbmRleC5odG1cclxuICAgIC8vIGFzc3VtZXMgYXhpcyBpcyBub3JtYWxpemVkXHJcblxyXG4gICAgdmFyIGhhbGZBbmdsZSA9IGFuZ2xlIC8gMiwgcyA9IE1hdGguc2luKCBoYWxmQW5nbGUgKTtcclxuXHJcbiAgICB0aGlzLnggPSBheGlzLnggKiBzO1xyXG4gICAgdGhpcy55ID0gYXhpcy55ICogcztcclxuICAgIHRoaXMueiA9IGF4aXMueiAqIHM7XHJcbiAgICB0aGlzLncgPSBNYXRoLmNvcyggaGFsZkFuZ2xlICk7XHJcblxyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfSxcclxuXHJcbiAgbXVsdGlwbHk6IGZ1bmN0aW9uICggcSApIHtcclxuICAgIHJldHVybiB0aGlzLm11bHRpcGx5UXVhdGVybmlvbnMoIHRoaXMsIHEgKTtcclxuICB9LFxyXG5cclxuICBtdWx0aXBseVF1YXRlcm5pb25zOiBmdW5jdGlvbiAoIGEsIGIgKSB7XHJcbiAgICAvLyBmcm9tIGh0dHA6Ly93d3cuZXVjbGlkZWFuc3BhY2UuY29tL21hdGhzL2FsZ2VicmEvcmVhbE5vcm1lZEFsZ2VicmEvcXVhdGVybmlvbnMvY29kZS9pbmRleC5odG1cclxuXHJcbiAgICB2YXIgcWF4ID0gYS54LCBxYXkgPSBhLnksIHFheiA9IGEueiwgcWF3ID0gYS53O1xyXG4gICAgdmFyIHFieCA9IGIueCwgcWJ5ID0gYi55LCBxYnogPSBiLnosIHFidyA9IGIudztcclxuXHJcbiAgICB0aGlzLnggPSBxYXggKiBxYncgKyBxYXcgKiBxYnggKyBxYXkgKiBxYnogLSBxYXogKiBxYnk7XHJcbiAgICB0aGlzLnkgPSBxYXkgKiBxYncgKyBxYXcgKiBxYnkgKyBxYXogKiBxYnggLSBxYXggKiBxYno7XHJcbiAgICB0aGlzLnogPSBxYXogKiBxYncgKyBxYXcgKiBxYnogKyBxYXggKiBxYnkgLSBxYXkgKiBxYng7XHJcbiAgICB0aGlzLncgPSBxYXcgKiBxYncgLSBxYXggKiBxYnggLSBxYXkgKiBxYnkgLSBxYXogKiBxYno7XHJcblxyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfSxcclxuXHJcbiAgaW52ZXJzZTogZnVuY3Rpb24gKCkge1xyXG4gICAgdGhpcy54ICo9IC0xO1xyXG4gICAgdGhpcy55ICo9IC0xO1xyXG4gICAgdGhpcy56ICo9IC0xO1xyXG5cclxuICAgIHRoaXMubm9ybWFsaXplKCk7XHJcblxyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfSxcclxuXHJcbiAgbm9ybWFsaXplOiBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgbCA9IE1hdGguc3FydCggdGhpcy54ICogdGhpcy54ICsgdGhpcy55ICogdGhpcy55ICsgdGhpcy56ICogdGhpcy56ICsgdGhpcy53ICogdGhpcy53ICk7XHJcblxyXG4gICAgaWYgKCBsID09PSAwICkge1xyXG4gICAgICB0aGlzLnggPSAwO1xyXG4gICAgICB0aGlzLnkgPSAwO1xyXG4gICAgICB0aGlzLnogPSAwO1xyXG4gICAgICB0aGlzLncgPSAxO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgbCA9IDEgLyBsO1xyXG5cclxuICAgICAgdGhpcy54ID0gdGhpcy54ICogbDtcclxuICAgICAgdGhpcy55ID0gdGhpcy55ICogbDtcclxuICAgICAgdGhpcy56ID0gdGhpcy56ICogbDtcclxuICAgICAgdGhpcy53ID0gdGhpcy53ICogbDtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9LFxyXG5cclxuICBzbGVycDogZnVuY3Rpb24gKCBxYiwgdCApIHtcclxuICAgIGlmICggdCA9PT0gMCApIHJldHVybiB0aGlzO1xyXG4gICAgaWYgKCB0ID09PSAxICkgcmV0dXJuIHRoaXMuY29weSggcWIgKTtcclxuXHJcbiAgICB2YXIgeCA9IHRoaXMueCwgeSA9IHRoaXMueSwgeiA9IHRoaXMueiwgdyA9IHRoaXMudztcclxuXHJcbiAgICAvLyBodHRwOi8vd3d3LmV1Y2xpZGVhbnNwYWNlLmNvbS9tYXRocy9hbGdlYnJhL3JlYWxOb3JtZWRBbGdlYnJhL3F1YXRlcm5pb25zL3NsZXJwL1xyXG5cclxuICAgIHZhciBjb3NIYWxmVGhldGEgPSB3ICogcWIudyArIHggKiBxYi54ICsgeSAqIHFiLnkgKyB6ICogcWIuejtcclxuXHJcbiAgICBpZiAoIGNvc0hhbGZUaGV0YSA8IDAgKSB7XHJcbiAgICAgIHRoaXMudyA9IC0gcWIudztcclxuICAgICAgdGhpcy54ID0gLSBxYi54O1xyXG4gICAgICB0aGlzLnkgPSAtIHFiLnk7XHJcbiAgICAgIHRoaXMueiA9IC0gcWIuejtcclxuXHJcbiAgICAgIGNvc0hhbGZUaGV0YSA9IC0gY29zSGFsZlRoZXRhO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5jb3B5KCBxYiApO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICggY29zSGFsZlRoZXRhID49IDEuMCApIHtcclxuICAgICAgdGhpcy53ID0gdztcclxuICAgICAgdGhpcy54ID0geDtcclxuICAgICAgdGhpcy55ID0geTtcclxuICAgICAgdGhpcy56ID0gejtcclxuXHJcbiAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBoYWxmVGhldGEgPSBNYXRoLmFjb3MoIGNvc0hhbGZUaGV0YSApO1xyXG4gICAgdmFyIHNpbkhhbGZUaGV0YSA9IE1hdGguc3FydCggMS4wIC0gY29zSGFsZlRoZXRhICogY29zSGFsZlRoZXRhICk7XHJcblxyXG4gICAgaWYgKCBNYXRoLmFicyggc2luSGFsZlRoZXRhICkgPCAwLjAwMSApIHtcclxuICAgICAgdGhpcy53ID0gMC41ICogKCB3ICsgdGhpcy53ICk7XHJcbiAgICAgIHRoaXMueCA9IDAuNSAqICggeCArIHRoaXMueCApO1xyXG4gICAgICB0aGlzLnkgPSAwLjUgKiAoIHkgKyB0aGlzLnkgKTtcclxuICAgICAgdGhpcy56ID0gMC41ICogKCB6ICsgdGhpcy56ICk7XHJcblxyXG4gICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICB2YXIgcmF0aW9BID0gTWF0aC5zaW4oICggMSAtIHQgKSAqIGhhbGZUaGV0YSApIC8gc2luSGFsZlRoZXRhLFxyXG4gICAgcmF0aW9CID0gTWF0aC5zaW4oIHQgKiBoYWxmVGhldGEgKSAvIHNpbkhhbGZUaGV0YTtcclxuXHJcbiAgICB0aGlzLncgPSAoIHcgKiByYXRpb0EgKyB0aGlzLncgKiByYXRpb0IgKTtcclxuICAgIHRoaXMueCA9ICggeCAqIHJhdGlvQSArIHRoaXMueCAqIHJhdGlvQiApO1xyXG4gICAgdGhpcy55ID0gKCB5ICogcmF0aW9BICsgdGhpcy55ICogcmF0aW9CICk7XHJcbiAgICB0aGlzLnogPSAoIHogKiByYXRpb0EgKyB0aGlzLnogKiByYXRpb0IgKTtcclxuXHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9LFxyXG5cclxuICBzZXRGcm9tVW5pdFZlY3RvcnM6IGZ1bmN0aW9uICgpIHtcclxuICAgIC8vIGh0dHA6Ly9sb2xlbmdpbmUubmV0L2Jsb2cvMjAxNC8wMi8yNC9xdWF0ZXJuaW9uLWZyb20tdHdvLXZlY3RvcnMtZmluYWxcclxuICAgIC8vIGFzc3VtZXMgZGlyZWN0aW9uIHZlY3RvcnMgdkZyb20gYW5kIHZUbyBhcmUgbm9ybWFsaXplZFxyXG5cclxuICAgIHZhciB2MSwgcjtcclxuICAgIHZhciBFUFMgPSAwLjAwMDAwMTtcclxuXHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKCB2RnJvbSwgdlRvICkge1xyXG4gICAgICBpZiAoIHYxID09PSB1bmRlZmluZWQgKSB2MSA9IG5ldyBNYXRoVXRpbC5WZWN0b3IzKCk7XHJcblxyXG4gICAgICByID0gdkZyb20uZG90KCB2VG8gKSArIDE7XHJcblxyXG4gICAgICBpZiAoIHIgPCBFUFMgKSB7XHJcbiAgICAgICAgciA9IDA7XHJcblxyXG4gICAgICAgIGlmICggTWF0aC5hYnMoIHZGcm9tLnggKSA+IE1hdGguYWJzKCB2RnJvbS56ICkgKSB7XHJcbiAgICAgICAgICB2MS5zZXQoIC0gdkZyb20ueSwgdkZyb20ueCwgMCApO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB2MS5zZXQoIDAsIC0gdkZyb20ueiwgdkZyb20ueSApO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB2MS5jcm9zc1ZlY3RvcnMoIHZGcm9tLCB2VG8gKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgdGhpcy54ID0gdjEueDtcclxuICAgICAgdGhpcy55ID0gdjEueTtcclxuICAgICAgdGhpcy56ID0gdjEuejtcclxuICAgICAgdGhpcy53ID0gcjtcclxuXHJcbiAgICAgIHRoaXMubm9ybWFsaXplKCk7XHJcblxyXG4gICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICB9KCksXHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IE1hdGhVdGlsO1xyXG5cclxufSx7fV0sMTU6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xyXG4vKlxyXG4gKiBDb3B5cmlnaHQgMjAxNiBHb29nbGUgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcblxyXG52YXIgVlJEaXNwbGF5ID0gX2RlcmVxXygnLi9iYXNlLmpzJykuVlJEaXNwbGF5O1xyXG52YXIgTWF0aFV0aWwgPSBfZGVyZXFfKCcuL21hdGgtdXRpbC5qcycpO1xyXG52YXIgVXRpbCA9IF9kZXJlcV8oJy4vdXRpbC5qcycpO1xyXG5cclxuLy8gSG93IG11Y2ggdG8gcm90YXRlIHBlciBrZXkgc3Ryb2tlLlxyXG52YXIgS0VZX1NQRUVEID0gMC4xNTtcclxudmFyIEtFWV9BTklNQVRJT05fRFVSQVRJT04gPSA4MDtcclxuXHJcbi8vIEhvdyBtdWNoIHRvIHJvdGF0ZSBmb3IgbW91c2UgZXZlbnRzLlxyXG52YXIgTU9VU0VfU1BFRURfWCA9IDAuNTtcclxudmFyIE1PVVNFX1NQRUVEX1kgPSAwLjM7XHJcblxyXG4vKipcclxuICogVlJEaXNwbGF5IGJhc2VkIG9uIG1vdXNlIGFuZCBrZXlib2FyZCBpbnB1dC4gRGVzaWduZWQgZm9yIGRlc2t0b3BzL2xhcHRvcHNcclxuICogd2hlcmUgb3JpZW50YXRpb24gZXZlbnRzIGFyZW4ndCBzdXBwb3J0ZWQuIENhbm5vdCBwcmVzZW50LlxyXG4gKi9cclxuZnVuY3Rpb24gTW91c2VLZXlib2FyZFZSRGlzcGxheSgpIHtcclxuICB0aGlzLmRpc3BsYXlOYW1lID0gJ01vdXNlIGFuZCBLZXlib2FyZCBWUkRpc3BsYXkgKHdlYnZyLXBvbHlmaWxsKSc7XHJcblxyXG4gIHRoaXMuY2FwYWJpbGl0aWVzLmhhc09yaWVudGF0aW9uID0gdHJ1ZTtcclxuXHJcbiAgLy8gQXR0YWNoIHRvIG1vdXNlIGFuZCBrZXlib2FyZCBldmVudHMuXHJcbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLm9uS2V5RG93bl8uYmluZCh0aGlzKSk7XHJcbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHRoaXMub25Nb3VzZU1vdmVfLmJpbmQodGhpcykpO1xyXG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCB0aGlzLm9uTW91c2VEb3duXy5iaW5kKHRoaXMpKTtcclxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHRoaXMub25Nb3VzZVVwXy5iaW5kKHRoaXMpKTtcclxuXHJcbiAgLy8gXCJQcml2YXRlXCIgbWVtYmVycy5cclxuICB0aGlzLnBoaV8gPSAwO1xyXG4gIHRoaXMudGhldGFfID0gMDtcclxuXHJcbiAgLy8gVmFyaWFibGVzIGZvciBrZXlib2FyZC1iYXNlZCByb3RhdGlvbiBhbmltYXRpb24uXHJcbiAgdGhpcy50YXJnZXRBbmdsZV8gPSBudWxsO1xyXG4gIHRoaXMuYW5nbGVBbmltYXRpb25fID0gbnVsbDtcclxuXHJcbiAgLy8gU3RhdGUgdmFyaWFibGVzIGZvciBjYWxjdWxhdGlvbnMuXHJcbiAgdGhpcy5vcmllbnRhdGlvbl8gPSBuZXcgTWF0aFV0aWwuUXVhdGVybmlvbigpO1xyXG5cclxuICAvLyBWYXJpYWJsZXMgZm9yIG1vdXNlLWJhc2VkIHJvdGF0aW9uLlxyXG4gIHRoaXMucm90YXRlU3RhcnRfID0gbmV3IE1hdGhVdGlsLlZlY3RvcjIoKTtcclxuICB0aGlzLnJvdGF0ZUVuZF8gPSBuZXcgTWF0aFV0aWwuVmVjdG9yMigpO1xyXG4gIHRoaXMucm90YXRlRGVsdGFfID0gbmV3IE1hdGhVdGlsLlZlY3RvcjIoKTtcclxuICB0aGlzLmlzRHJhZ2dpbmdfID0gZmFsc2U7XHJcblxyXG4gIHRoaXMub3JpZW50YXRpb25PdXRfID0gbmV3IEZsb2F0MzJBcnJheSg0KTtcclxufVxyXG5Nb3VzZUtleWJvYXJkVlJEaXNwbGF5LnByb3RvdHlwZSA9IG5ldyBWUkRpc3BsYXkoKTtcclxuXHJcbk1vdXNlS2V5Ym9hcmRWUkRpc3BsYXkucHJvdG90eXBlLmdldEltbWVkaWF0ZVBvc2UgPSBmdW5jdGlvbigpIHtcclxuICB0aGlzLm9yaWVudGF0aW9uXy5zZXRGcm9tRXVsZXJZWFoodGhpcy5waGlfLCB0aGlzLnRoZXRhXywgMCk7XHJcblxyXG4gIHRoaXMub3JpZW50YXRpb25PdXRfWzBdID0gdGhpcy5vcmllbnRhdGlvbl8ueDtcclxuICB0aGlzLm9yaWVudGF0aW9uT3V0X1sxXSA9IHRoaXMub3JpZW50YXRpb25fLnk7XHJcbiAgdGhpcy5vcmllbnRhdGlvbk91dF9bMl0gPSB0aGlzLm9yaWVudGF0aW9uXy56O1xyXG4gIHRoaXMub3JpZW50YXRpb25PdXRfWzNdID0gdGhpcy5vcmllbnRhdGlvbl8udztcclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIHBvc2l0aW9uOiBudWxsLFxyXG4gICAgb3JpZW50YXRpb246IHRoaXMub3JpZW50YXRpb25PdXRfLFxyXG4gICAgbGluZWFyVmVsb2NpdHk6IG51bGwsXHJcbiAgICBsaW5lYXJBY2NlbGVyYXRpb246IG51bGwsXHJcbiAgICBhbmd1bGFyVmVsb2NpdHk6IG51bGwsXHJcbiAgICBhbmd1bGFyQWNjZWxlcmF0aW9uOiBudWxsXHJcbiAgfTtcclxufTtcclxuXHJcbk1vdXNlS2V5Ym9hcmRWUkRpc3BsYXkucHJvdG90eXBlLm9uS2V5RG93bl8gPSBmdW5jdGlvbihlKSB7XHJcbiAgLy8gVHJhY2sgV0FTRCBhbmQgYXJyb3cga2V5cy5cclxuICBpZiAoZS5rZXlDb2RlID09IDM4KSB7IC8vIFVwIGtleS5cclxuICAgIHRoaXMuYW5pbWF0ZVBoaV8odGhpcy5waGlfICsgS0VZX1NQRUVEKTtcclxuICB9IGVsc2UgaWYgKGUua2V5Q29kZSA9PSAzOSkgeyAvLyBSaWdodCBrZXkuXHJcbiAgICB0aGlzLmFuaW1hdGVUaGV0YV8odGhpcy50aGV0YV8gLSBLRVlfU1BFRUQpO1xyXG4gIH0gZWxzZSBpZiAoZS5rZXlDb2RlID09IDQwKSB7IC8vIERvd24ga2V5LlxyXG4gICAgdGhpcy5hbmltYXRlUGhpXyh0aGlzLnBoaV8gLSBLRVlfU1BFRUQpO1xyXG4gIH0gZWxzZSBpZiAoZS5rZXlDb2RlID09IDM3KSB7IC8vIExlZnQga2V5LlxyXG4gICAgdGhpcy5hbmltYXRlVGhldGFfKHRoaXMudGhldGFfICsgS0VZX1NQRUVEKTtcclxuICB9XHJcbn07XHJcblxyXG5Nb3VzZUtleWJvYXJkVlJEaXNwbGF5LnByb3RvdHlwZS5hbmltYXRlVGhldGFfID0gZnVuY3Rpb24odGFyZ2V0QW5nbGUpIHtcclxuICB0aGlzLmFuaW1hdGVLZXlUcmFuc2l0aW9uc18oJ3RoZXRhXycsIHRhcmdldEFuZ2xlKTtcclxufTtcclxuXHJcbk1vdXNlS2V5Ym9hcmRWUkRpc3BsYXkucHJvdG90eXBlLmFuaW1hdGVQaGlfID0gZnVuY3Rpb24odGFyZ2V0QW5nbGUpIHtcclxuICAvLyBQcmV2ZW50IGxvb2tpbmcgdG9vIGZhciB1cCBvciBkb3duLlxyXG4gIHRhcmdldEFuZ2xlID0gVXRpbC5jbGFtcCh0YXJnZXRBbmdsZSwgLU1hdGguUEkvMiwgTWF0aC5QSS8yKTtcclxuICB0aGlzLmFuaW1hdGVLZXlUcmFuc2l0aW9uc18oJ3BoaV8nLCB0YXJnZXRBbmdsZSk7XHJcbn07XHJcblxyXG4vKipcclxuICogU3RhcnQgYW4gYW5pbWF0aW9uIHRvIHRyYW5zaXRpb24gYW4gYW5nbGUgZnJvbSBvbmUgdmFsdWUgdG8gYW5vdGhlci5cclxuICovXHJcbk1vdXNlS2V5Ym9hcmRWUkRpc3BsYXkucHJvdG90eXBlLmFuaW1hdGVLZXlUcmFuc2l0aW9uc18gPSBmdW5jdGlvbihhbmdsZU5hbWUsIHRhcmdldEFuZ2xlKSB7XHJcbiAgLy8gSWYgYW4gYW5pbWF0aW9uIGlzIGN1cnJlbnRseSBydW5uaW5nLCBjYW5jZWwgaXQuXHJcbiAgaWYgKHRoaXMuYW5nbGVBbmltYXRpb25fKSB7XHJcbiAgICBjYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLmFuZ2xlQW5pbWF0aW9uXyk7XHJcbiAgfVxyXG4gIHZhciBzdGFydEFuZ2xlID0gdGhpc1thbmdsZU5hbWVdO1xyXG4gIHZhciBzdGFydFRpbWUgPSBuZXcgRGF0ZSgpO1xyXG4gIC8vIFNldCB1cCBhbiBpbnRlcnZhbCB0aW1lciB0byBwZXJmb3JtIHRoZSBhbmltYXRpb24uXHJcbiAgdGhpcy5hbmdsZUFuaW1hdGlvbl8gPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24gYW5pbWF0ZSgpIHtcclxuICAgIC8vIE9uY2Ugd2UncmUgZmluaXNoZWQgdGhlIGFuaW1hdGlvbiwgd2UncmUgZG9uZS5cclxuICAgIHZhciBlbGFwc2VkID0gbmV3IERhdGUoKSAtIHN0YXJ0VGltZTtcclxuICAgIGlmIChlbGFwc2VkID49IEtFWV9BTklNQVRJT05fRFVSQVRJT04pIHtcclxuICAgICAgdGhpc1thbmdsZU5hbWVdID0gdGFyZ2V0QW5nbGU7XHJcbiAgICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMuYW5nbGVBbmltYXRpb25fKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgLy8gbG9vcCB3aXRoIHJlcXVlc3RBbmltYXRpb25GcmFtZVxyXG4gICAgdGhpcy5hbmdsZUFuaW1hdGlvbl8gPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoYW5pbWF0ZS5iaW5kKHRoaXMpKVxyXG4gICAgLy8gTGluZWFybHkgaW50ZXJwb2xhdGUgdGhlIGFuZ2xlIHNvbWUgYW1vdW50LlxyXG4gICAgdmFyIHBlcmNlbnQgPSBlbGFwc2VkIC8gS0VZX0FOSU1BVElPTl9EVVJBVElPTjtcclxuICAgIHRoaXNbYW5nbGVOYW1lXSA9IHN0YXJ0QW5nbGUgKyAodGFyZ2V0QW5nbGUgLSBzdGFydEFuZ2xlKSAqIHBlcmNlbnQ7XHJcbiAgfS5iaW5kKHRoaXMpKTtcclxufTtcclxuXHJcbk1vdXNlS2V5Ym9hcmRWUkRpc3BsYXkucHJvdG90eXBlLm9uTW91c2VEb3duXyA9IGZ1bmN0aW9uKGUpIHtcclxuICB0aGlzLnJvdGF0ZVN0YXJ0Xy5zZXQoZS5jbGllbnRYLCBlLmNsaWVudFkpO1xyXG4gIHRoaXMuaXNEcmFnZ2luZ18gPSB0cnVlO1xyXG59O1xyXG5cclxuLy8gVmVyeSBzaW1pbGFyIHRvIGh0dHBzOi8vZ2lzdC5naXRodWIuY29tL21yZmxpeC84MzUxMDIwXHJcbk1vdXNlS2V5Ym9hcmRWUkRpc3BsYXkucHJvdG90eXBlLm9uTW91c2VNb3ZlXyA9IGZ1bmN0aW9uKGUpIHtcclxuICBpZiAoIXRoaXMuaXNEcmFnZ2luZ18gJiYgIXRoaXMuaXNQb2ludGVyTG9ja2VkXygpKSB7XHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG4gIC8vIFN1cHBvcnQgcG9pbnRlciBsb2NrIEFQSS5cclxuICBpZiAodGhpcy5pc1BvaW50ZXJMb2NrZWRfKCkpIHtcclxuICAgIHZhciBtb3ZlbWVudFggPSBlLm1vdmVtZW50WCB8fCBlLm1vek1vdmVtZW50WCB8fCAwO1xyXG4gICAgdmFyIG1vdmVtZW50WSA9IGUubW92ZW1lbnRZIHx8IGUubW96TW92ZW1lbnRZIHx8IDA7XHJcbiAgICB0aGlzLnJvdGF0ZUVuZF8uc2V0KHRoaXMucm90YXRlU3RhcnRfLnggLSBtb3ZlbWVudFgsIHRoaXMucm90YXRlU3RhcnRfLnkgLSBtb3ZlbWVudFkpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICB0aGlzLnJvdGF0ZUVuZF8uc2V0KGUuY2xpZW50WCwgZS5jbGllbnRZKTtcclxuICB9XHJcbiAgLy8gQ2FsY3VsYXRlIGhvdyBtdWNoIHdlIG1vdmVkIGluIG1vdXNlIHNwYWNlLlxyXG4gIHRoaXMucm90YXRlRGVsdGFfLnN1YlZlY3RvcnModGhpcy5yb3RhdGVFbmRfLCB0aGlzLnJvdGF0ZVN0YXJ0Xyk7XHJcbiAgdGhpcy5yb3RhdGVTdGFydF8uY29weSh0aGlzLnJvdGF0ZUVuZF8pO1xyXG5cclxuICAvLyBLZWVwIHRyYWNrIG9mIHRoZSBjdW11bGF0aXZlIGV1bGVyIGFuZ2xlcy5cclxuICB0aGlzLnBoaV8gKz0gMiAqIE1hdGguUEkgKiB0aGlzLnJvdGF0ZURlbHRhXy55IC8gc2NyZWVuLmhlaWdodCAqIE1PVVNFX1NQRUVEX1k7XHJcbiAgdGhpcy50aGV0YV8gKz0gMiAqIE1hdGguUEkgKiB0aGlzLnJvdGF0ZURlbHRhXy54IC8gc2NyZWVuLndpZHRoICogTU9VU0VfU1BFRURfWDtcclxuXHJcbiAgLy8gUHJldmVudCBsb29raW5nIHRvbyBmYXIgdXAgb3IgZG93bi5cclxuICB0aGlzLnBoaV8gPSBVdGlsLmNsYW1wKHRoaXMucGhpXywgLU1hdGguUEkvMiwgTWF0aC5QSS8yKTtcclxufTtcclxuXHJcbk1vdXNlS2V5Ym9hcmRWUkRpc3BsYXkucHJvdG90eXBlLm9uTW91c2VVcF8gPSBmdW5jdGlvbihlKSB7XHJcbiAgdGhpcy5pc0RyYWdnaW5nXyA9IGZhbHNlO1xyXG59O1xyXG5cclxuTW91c2VLZXlib2FyZFZSRGlzcGxheS5wcm90b3R5cGUuaXNQb2ludGVyTG9ja2VkXyA9IGZ1bmN0aW9uKCkge1xyXG4gIHZhciBlbCA9IGRvY3VtZW50LnBvaW50ZXJMb2NrRWxlbWVudCB8fCBkb2N1bWVudC5tb3pQb2ludGVyTG9ja0VsZW1lbnQgfHxcclxuICAgICAgZG9jdW1lbnQud2Via2l0UG9pbnRlckxvY2tFbGVtZW50O1xyXG4gIHJldHVybiBlbCAhPT0gdW5kZWZpbmVkO1xyXG59O1xyXG5cclxuTW91c2VLZXlib2FyZFZSRGlzcGxheS5wcm90b3R5cGUucmVzZXRQb3NlID0gZnVuY3Rpb24oKSB7XHJcbiAgdGhpcy5waGlfID0gMDtcclxuICB0aGlzLnRoZXRhXyA9IDA7XHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IE1vdXNlS2V5Ym9hcmRWUkRpc3BsYXk7XHJcblxyXG59LHtcIi4vYmFzZS5qc1wiOjIsXCIuL21hdGgtdXRpbC5qc1wiOjE0LFwiLi91dGlsLmpzXCI6MjJ9XSwxNjpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XHJcbi8qXHJcbiAqIENvcHlyaWdodCAyMDE1IEdvb2dsZSBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuXHJcbnZhciBVdGlsID0gX2RlcmVxXygnLi91dGlsLmpzJyk7XHJcblxyXG5mdW5jdGlvbiBSb3RhdGVJbnN0cnVjdGlvbnMoKSB7XHJcbiAgdGhpcy5sb2FkSWNvbl8oKTtcclxuXHJcbiAgdmFyIG92ZXJsYXkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICB2YXIgcyA9IG92ZXJsYXkuc3R5bGU7XHJcbiAgcy5wb3NpdGlvbiA9ICdmaXhlZCc7XHJcbiAgcy50b3AgPSAwO1xyXG4gIHMucmlnaHQgPSAwO1xyXG4gIHMuYm90dG9tID0gMDtcclxuICBzLmxlZnQgPSAwO1xyXG4gIHMuYmFja2dyb3VuZENvbG9yID0gJ2dyYXknO1xyXG4gIHMuZm9udEZhbWlseSA9ICdzYW5zLXNlcmlmJztcclxuICAvLyBGb3JjZSB0aGlzIHRvIGJlIGFib3ZlIHRoZSBmdWxsc2NyZWVuIGNhbnZhcywgd2hpY2ggaXMgYXQgekluZGV4OiA5OTk5OTkuXHJcbiAgcy56SW5kZXggPSAxMDAwMDAwO1xyXG5cclxuICB2YXIgaW1nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XHJcbiAgaW1nLnNyYyA9IHRoaXMuaWNvbjtcclxuICB2YXIgcyA9IGltZy5zdHlsZTtcclxuICBzLm1hcmdpbkxlZnQgPSAnMjUlJztcclxuICBzLm1hcmdpblRvcCA9ICcyNSUnO1xyXG4gIHMud2lkdGggPSAnNTAlJztcclxuICBvdmVybGF5LmFwcGVuZENoaWxkKGltZyk7XHJcblxyXG4gIHZhciB0ZXh0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgdmFyIHMgPSB0ZXh0LnN0eWxlO1xyXG4gIHMudGV4dEFsaWduID0gJ2NlbnRlcic7XHJcbiAgcy5mb250U2l6ZSA9ICcxNnB4JztcclxuICBzLmxpbmVIZWlnaHQgPSAnMjRweCc7XHJcbiAgcy5tYXJnaW4gPSAnMjRweCAyNSUnO1xyXG4gIHMud2lkdGggPSAnNTAlJztcclxuICB0ZXh0LmlubmVySFRNTCA9ICdQbGFjZSB5b3VyIHBob25lIGludG8geW91ciBDYXJkYm9hcmQgdmlld2VyLic7XHJcbiAgb3ZlcmxheS5hcHBlbmRDaGlsZCh0ZXh0KTtcclxuXHJcbiAgdmFyIHNuYWNrYmFyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgdmFyIHMgPSBzbmFja2Jhci5zdHlsZTtcclxuICBzLmJhY2tncm91bmRDb2xvciA9ICcjQ0ZEOERDJztcclxuICBzLnBvc2l0aW9uID0gJ2ZpeGVkJztcclxuICBzLmJvdHRvbSA9IDA7XHJcbiAgcy53aWR0aCA9ICcxMDAlJztcclxuICBzLmhlaWdodCA9ICc0OHB4JztcclxuICBzLnBhZGRpbmcgPSAnMTRweCAyNHB4JztcclxuICBzLmJveFNpemluZyA9ICdib3JkZXItYm94JztcclxuICBzLmNvbG9yID0gJyM2NTZBNkInO1xyXG4gIG92ZXJsYXkuYXBwZW5kQ2hpbGQoc25hY2tiYXIpO1xyXG5cclxuICB2YXIgc25hY2tiYXJUZXh0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgc25hY2tiYXJUZXh0LnN0eWxlLmZsb2F0ID0gJ2xlZnQnO1xyXG4gIHNuYWNrYmFyVGV4dC5pbm5lckhUTUwgPSAnTm8gQ2FyZGJvYXJkIHZpZXdlcj8nO1xyXG5cclxuICB2YXIgc25hY2tiYXJCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XHJcbiAgc25hY2tiYXJCdXR0b24uaHJlZiA9ICdodHRwczovL3d3dy5nb29nbGUuY29tL2dldC9jYXJkYm9hcmQvZ2V0LWNhcmRib2FyZC8nO1xyXG4gIHNuYWNrYmFyQnV0dG9uLmlubmVySFRNTCA9ICdnZXQgb25lJztcclxuICBzbmFja2JhckJ1dHRvbi50YXJnZXQgPSAnX2JsYW5rJztcclxuICB2YXIgcyA9IHNuYWNrYmFyQnV0dG9uLnN0eWxlO1xyXG4gIHMuZmxvYXQgPSAncmlnaHQnO1xyXG4gIHMuZm9udFdlaWdodCA9IDYwMDtcclxuICBzLnRleHRUcmFuc2Zvcm0gPSAndXBwZXJjYXNlJztcclxuICBzLmJvcmRlckxlZnQgPSAnMXB4IHNvbGlkIGdyYXknO1xyXG4gIHMucGFkZGluZ0xlZnQgPSAnMjRweCc7XHJcbiAgcy50ZXh0RGVjb3JhdGlvbiA9ICdub25lJztcclxuICBzLmNvbG9yID0gJyM2NTZBNkInO1xyXG5cclxuICBzbmFja2Jhci5hcHBlbmRDaGlsZChzbmFja2JhclRleHQpO1xyXG4gIHNuYWNrYmFyLmFwcGVuZENoaWxkKHNuYWNrYmFyQnV0dG9uKTtcclxuXHJcbiAgdGhpcy5vdmVybGF5ID0gb3ZlcmxheTtcclxuICB0aGlzLnRleHQgPSB0ZXh0O1xyXG5cclxuICB0aGlzLmhpZGUoKTtcclxufVxyXG5cclxuUm90YXRlSW5zdHJ1Y3Rpb25zLnByb3RvdHlwZS5zaG93ID0gZnVuY3Rpb24ocGFyZW50KSB7XHJcbiAgaWYgKCFwYXJlbnQgJiYgIXRoaXMub3ZlcmxheS5wYXJlbnRFbGVtZW50KSB7XHJcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRoaXMub3ZlcmxheSk7XHJcbiAgfSBlbHNlIGlmIChwYXJlbnQpIHtcclxuICAgIGlmICh0aGlzLm92ZXJsYXkucGFyZW50RWxlbWVudCAmJiB0aGlzLm92ZXJsYXkucGFyZW50RWxlbWVudCAhPSBwYXJlbnQpXHJcbiAgICAgIHRoaXMub3ZlcmxheS5wYXJlbnRFbGVtZW50LnJlbW92ZUNoaWxkKHRoaXMub3ZlcmxheSk7XHJcblxyXG4gICAgcGFyZW50LmFwcGVuZENoaWxkKHRoaXMub3ZlcmxheSk7XHJcbiAgfVxyXG5cclxuICB0aGlzLm92ZXJsYXkuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XHJcblxyXG4gIHZhciBpbWcgPSB0aGlzLm92ZXJsYXkucXVlcnlTZWxlY3RvcignaW1nJyk7XHJcbiAgdmFyIHMgPSBpbWcuc3R5bGU7XHJcblxyXG4gIGlmIChVdGlsLmlzTGFuZHNjYXBlTW9kZSgpKSB7XHJcbiAgICBzLndpZHRoID0gJzIwJSc7XHJcbiAgICBzLm1hcmdpbkxlZnQgPSAnNDAlJztcclxuICAgIHMubWFyZ2luVG9wID0gJzMlJztcclxuICB9IGVsc2Uge1xyXG4gICAgcy53aWR0aCA9ICc1MCUnO1xyXG4gICAgcy5tYXJnaW5MZWZ0ID0gJzI1JSc7XHJcbiAgICBzLm1hcmdpblRvcCA9ICcyNSUnO1xyXG4gIH1cclxufTtcclxuXHJcblJvdGF0ZUluc3RydWN0aW9ucy5wcm90b3R5cGUuaGlkZSA9IGZ1bmN0aW9uKCkge1xyXG4gIHRoaXMub3ZlcmxheS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG59O1xyXG5cclxuUm90YXRlSW5zdHJ1Y3Rpb25zLnByb3RvdHlwZS5zaG93VGVtcG9yYXJpbHkgPSBmdW5jdGlvbihtcywgcGFyZW50KSB7XHJcbiAgdGhpcy5zaG93KHBhcmVudCk7XHJcbiAgdGhpcy50aW1lciA9IHNldFRpbWVvdXQodGhpcy5oaWRlLmJpbmQodGhpcyksIG1zKTtcclxufTtcclxuXHJcblJvdGF0ZUluc3RydWN0aW9ucy5wcm90b3R5cGUuZGlzYWJsZVNob3dUZW1wb3JhcmlseSA9IGZ1bmN0aW9uKCkge1xyXG4gIGNsZWFyVGltZW91dCh0aGlzLnRpbWVyKTtcclxufTtcclxuXHJcblJvdGF0ZUluc3RydWN0aW9ucy5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24oKSB7XHJcbiAgdGhpcy5kaXNhYmxlU2hvd1RlbXBvcmFyaWx5KCk7XHJcbiAgLy8gSW4gcG9ydHJhaXQgVlIgbW9kZSwgdGVsbCB0aGUgdXNlciB0byByb3RhdGUgdG8gbGFuZHNjYXBlLiBPdGhlcndpc2UsIGhpZGVcclxuICAvLyB0aGUgaW5zdHJ1Y3Rpb25zLlxyXG4gIGlmICghVXRpbC5pc0xhbmRzY2FwZU1vZGUoKSAmJiBVdGlsLmlzTW9iaWxlKCkpIHtcclxuICAgIHRoaXMuc2hvdygpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICB0aGlzLmhpZGUoKTtcclxuICB9XHJcbn07XHJcblxyXG5Sb3RhdGVJbnN0cnVjdGlvbnMucHJvdG90eXBlLmxvYWRJY29uXyA9IGZ1bmN0aW9uKCkge1xyXG4gIC8vIEVuY29kZWQgYXNzZXRfc3JjL3JvdGF0ZS1pbnN0cnVjdGlvbnMuc3ZnXHJcbiAgdGhpcy5pY29uID0gVXRpbC5iYXNlNjQoJ2ltYWdlL3N2Zyt4bWwnLCAnUEQ5NGJXd2dkbVZ5YzJsdmJqMGlNUzR3SWlCbGJtTnZaR2x1WnowaVZWUkdMVGdpSUhOMFlXNWtZV3h2Ym1VOUltNXZJajgrQ2p4emRtY2dkMmxrZEdnOUlqRTVPSEI0SWlCb1pXbG5hSFE5SWpJME1IQjRJaUIyYVdWM1FtOTRQU0l3SURBZ01UazRJREkwTUNJZ2RtVnljMmx2YmowaU1TNHhJaUI0Yld4dWN6MGlhSFIwY0RvdkwzZDNkeTUzTXk1dmNtY3ZNakF3TUM5emRtY2lJSGh0Ykc1ek9uaHNhVzVyUFNKb2RIUndPaTh2ZDNkM0xuY3pMbTl5Wnk4eE9UazVMM2hzYVc1cklpQjRiV3h1Y3pwemEyVjBZMmc5SW1oMGRIQTZMeTkzZDNjdVltOW9aVzFwWVc1amIyUnBibWN1WTI5dEwzTnJaWFJqYUM5dWN5SStDaUFnSUNBOElTMHRJRWRsYm1WeVlYUnZjam9nVTJ0bGRHTm9JRE11TXk0eklDZ3hNakE0TVNrZ0xTQm9kSFJ3T2k4dmQzZDNMbUp2YUdWdGFXRnVZMjlrYVc1bkxtTnZiUzl6YTJWMFkyZ2dMUzArQ2lBZ0lDQThkR2wwYkdVK2RISmhibk5wZEdsdmJqd3ZkR2wwYkdVK0NpQWdJQ0E4WkdWell6NURjbVZoZEdWa0lIZHBkR2dnVTJ0bGRHTm9Mand2WkdWell6NEtJQ0FnSUR4a1pXWnpQand2WkdWbWN6NEtJQ0FnSUR4bklHbGtQU0pRWVdkbExURWlJSE4wY205clpUMGlibTl1WlNJZ2MzUnliMnRsTFhkcFpIUm9QU0l4SWlCbWFXeHNQU0p1YjI1bElpQm1hV3hzTFhKMWJHVTlJbVYyWlc1dlpHUWlJSE5yWlhSamFEcDBlWEJsUFNKTlUxQmhaMlVpUGdvZ0lDQWdJQ0FnSUR4bklHbGtQU0owY21GdWMybDBhVzl1SWlCemEyVjBZMmc2ZEhsd1pUMGlUVk5CY25SaWIyRnlaRWR5YjNWd0lqNEtJQ0FnSUNBZ0lDQWdJQ0FnUEdjZ2FXUTlJa2x0Y0c5eWRHVmtMVXhoZVdWeWN5MURiM0I1TFRRdEt5MUpiWEJ2Y25SbFpDMU1ZWGxsY25NdFEyOXdlUzByTFVsdGNHOXlkR1ZrTFV4aGVXVnljeTFEYjNCNUxUSXRRMjl3ZVNJZ2MydGxkR05vT25SNWNHVTlJazFUVEdGNVpYSkhjbTkxY0NJK0NpQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBOFp5QnBaRDBpU1cxd2IzSjBaV1F0VEdGNVpYSnpMVU52Y0hrdE5DSWdkSEpoYm5ObWIzSnRQU0owY21GdWMyeGhkR1VvTUM0d01EQXdNREFzSURFd055NHdNREF3TURBcElpQnphMlYwWTJnNmRIbHdaVDBpVFZOVGFHRndaVWR5YjNWd0lqNEtJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0E4Y0dGMGFDQmtQU0pOTVRRNUxqWXlOU3d5TGpVeU55QkRNVFE1TGpZeU5Td3lMalV5TnlBeE5UVXVPREExTERZdU1EazJJREUxTmk0ek5qSXNOaTQwTVRnZ1RERTFOaTR6TmpJc055NHpNRFFnUXpFMU5pNHpOaklzTnk0ME9ERWdNVFUyTGpNM05TdzNMalkyTkNBeE5UWXVOQ3czTGpnMU15QkRNVFUyTGpReExEY3VPVE0wSURFMU5pNDBNaXc0TGpBeE5TQXhOVFl1TkRJM0xEZ3VNRGsxSUVNeE5UWXVOVFkzTERrdU5URWdNVFUzTGpRd01Td3hNUzR3T1RNZ01UVTRMalV6TWl3eE1pNHdPVFFnVERFMk5DNHlOVElzTVRjdU1UVTJJRXd4TmpRdU16TXpMREUzTGpBMk5pQkRNVFkwTGpNek15d3hOeTR3TmpZZ01UWTRMamN4TlN3eE5DNDFNellnTVRZNUxqVTJPQ3d4TkM0d05ESWdRekUzTVM0d01qVXNNVFF1T0RneklERTVOUzQxTXpnc01qa3VNRE0xSURFNU5TNDFNemdzTWprdU1ETTFJRXd4T1RVdU5UTTRMRGd6TGpBek5pQkRNVGsxTGpVek9DdzRNeTQ0TURjZ01UazFMakUxTWl3NE5DNHlOVE1nTVRrMExqVTVMRGcwTGpJMU15QkRNVGswTGpNMU55dzROQzR5TlRNZ01UazBMakE1TlN3NE5DNHhOemNnTVRrekxqZ3hPQ3c0TkM0d01UY2dUREUyT1M0NE5URXNOekF1TVRjNUlFd3hOamt1T0RNM0xEY3dMakl3TXlCTU1UUXlMalV4TlN3NE5TNDVOemdnVERFME1TNDJOalVzT0RRdU5qVTFJRU14TXpZdU9UTTBMRGd6TGpFeU5pQXhNekV1T1RFM0xEZ3hMamt4TlNBeE1qWXVOekUwTERneExqQTBOU0JETVRJMkxqY3dPU3c0TVM0d05pQXhNall1TnpBM0xEZ3hMakEyT1NBeE1qWXVOekEzTERneExqQTJPU0JNTVRJeExqWTBMRGs0TGpBeklFd3hNVE11TnpRNUxERXdNaTQxT0RZZ1RERXhNeTQzTVRJc01UQXlMalV5TXlCTU1URXpMamN4TWl3eE16QXVNVEV6SUVNeE1UTXVOekV5TERFek1DNDRPRFVnTVRFekxqTXlOaXd4TXpFdU16TWdNVEV5TGpjMk5Dd3hNekV1TXpNZ1F6RXhNaTQxTXpJc01UTXhMak16SURFeE1pNHlOamtzTVRNeExqSTFOQ0F4TVRFdU9Ua3lMREV6TVM0d09UUWdURFk1TGpVeE9Td3hNRFl1TlRjeUlFTTJPQzQxTmprc01UQTJMakF5TXlBMk55NDNPVGtzTVRBMExqWTVOU0EyTnk0M09Ua3NNVEF6TGpZd05TQk1OamN1TnprNUxERXdNaTQxTnlCTU5qY3VOemM0TERFd01pNDJNVGNnUXpZM0xqSTNMREV3TWk0ek9UTWdOall1TmpRNExERXdNaTR5TkRrZ05qVXVPVFl5TERFd01pNHlNVGdnUXpZMUxqZzNOU3d4TURJdU1qRTBJRFkxTGpjNE9Dd3hNREl1TWpFeUlEWTFMamN3TVN3eE1ESXVNakV5SUVNMk5TNDJNRFlzTVRBeUxqSXhNaUEyTlM0MU1URXNNVEF5TGpJeE5TQTJOUzQwTVRZc01UQXlMakl4T1NCRE5qVXVNVGsxTERFd01pNHlNamtnTmpRdU9UYzBMREV3TWk0eU16VWdOalF1TnpVMExERXdNaTR5TXpVZ1F6WTBMak16TVN3eE1ESXVNak0xSURZekxqa3hNU3d4TURJdU1qRTJJRFl6TGpRNU9Dd3hNREl1TVRjNElFTTJNUzQ0TkRNc01UQXlMakF5TlNBMk1DNHlPVGdzTVRBeExqVTNPQ0ExT1M0d09UUXNNVEF3TGpnNE1pQk1NVEl1TlRFNExEY3pMams1TWlCTU1USXVOVEl6TERjMExqQXdOQ0JNTWk0eU5EVXNOVFV1TWpVMElFTXhMakkwTkN3MU15NDBNamNnTWk0d01EUXNOVEV1TURNNElETXVPVFF6TERRNUxqa3hPQ0JNTlRrdU9UVTBMREUzTGpVM015QkROakF1TmpJMkxERTNMakU0TlNBMk1TNHpOU3d4Tnk0d01ERWdOakl1TURVekxERTNMakF3TVNCRE5qTXVNemM1TERFM0xqQXdNU0EyTkM0Mk1qVXNNVGN1TmpZZ05qVXVNamdzTVRndU9EVTBJRXcyTlM0eU9EVXNNVGd1T0RVeElFdzJOUzQxTVRJc01Ua3VNalkwSUV3Mk5TNDFNRFlzTVRrdU1qWTRJRU0yTlM0NU1Ea3NNakF1TURBeklEWTJMalF3TlN3eU1DNDJPQ0EyTmk0NU9ETXNNakV1TWpnMklFdzJOeTR5Tml3eU1TNDFOVFlnUXpZNUxqRTNOQ3d5TXk0ME1EWWdOekV1TnpJNExESTBMak0xTnlBM05DNHpOek1zTWpRdU16VTNJRU0zTmk0ek1qSXNNalF1TXpVM0lEYzRMak15TVN3eU15NDROQ0E0TUM0eE5EZ3NNakl1TnpnMUlFTTRNQzR4TmpFc01qSXVOemcxSURnM0xqUTJOeXd4T0M0MU5qWWdPRGN1TkRZM0xERTRMalUyTmlCRE9EZ3VNVE01TERFNExqRTNPQ0E0T0M0NE5qTXNNVGN1T1RrMElEZzVMalUyTml3eE55NDVPVFFnUXprd0xqZzVNaXd4Tnk0NU9UUWdPVEl1TVRNNExERTRMalkxTWlBNU1pNDNPVElzTVRrdU9EUTNJRXc1Tmk0d05ESXNNalV1TnpjMUlFdzVOaTR3TmpRc01qVXVOelUzSUV3eE1ESXVPRFE1TERJNUxqWTNOQ0JNTVRBeUxqYzBOQ3d5T1M0ME9USWdUREUwT1M0Mk1qVXNNaTQxTWpjZ1RURTBPUzQyTWpVc01DNDRPVElnUXpFME9TNHpORE1zTUM0NE9USWdNVFE1TGpBMk1pd3dMamsyTlNBeE5EZ3VPREVzTVM0eE1TQk1NVEF5TGpZME1Td3lOeTQyTmpZZ1REazNMakl6TVN3eU5DNDFORElnVERrMExqSXlOaXd4T1M0d05qRWdRemt6TGpNeE15d3hOeTR6T1RRZ09URXVOVEkzTERFMkxqTTFPU0E0T1M0MU5qWXNNVFl1TXpVNElFTTRPQzQxTlRVc01UWXVNelU0SURnM0xqVTBOaXd4Tmk0Mk16SWdPRFl1TmpRNUxERTNMakUxSUVNNE15NDROemdzTVRndU56VWdOemt1TmpnM0xESXhMakUyT1NBM09TNHpOelFzTWpFdU16UTFJRU0zT1M0ek5Ua3NNakV1TXpVeklEYzVMak0wTlN3eU1TNHpOakVnTnprdU16TXNNakV1TXpZNUlFTTNOeTQzT1Rnc01qSXVNalUwSURjMkxqQTROQ3d5TWk0M01qSWdOelF1TXpjekxESXlMamN5TWlCRE56SXVNRGd4TERJeUxqY3lNaUEyT1M0NU5Ua3NNakV1T0RrZ05qZ3VNemszTERJd0xqTTRJRXcyT0M0eE5EVXNNakF1TVRNMUlFTTJOeTQzTURZc01Ua3VOamN5SURZM0xqTXlNeXd4T1M0eE5UWWdOamN1TURBMkxERTRMall3TVNCRE5qWXVPVGc0TERFNExqVTFPU0EyTmk0NU5qZ3NNVGd1TlRFNUlEWTJMamswTml3eE9DNDBOemtnVERZMkxqY3hPU3d4T0M0d05qVWdRelkyTGpZNUxERTRMakF4TWlBMk5pNDJOVGdzTVRjdU9UWWdOall1TmpJMExERTNMamt4TVNCRE5qVXVOamcyTERFMkxqTXpOeUEyTXk0NU5URXNNVFV1TXpZMklEWXlMakExTXl3eE5TNHpOallnUXpZeExqQTBNaXd4TlM0ek5qWWdOakF1TURNekxERTFMalkwSURVNUxqRXpOaXd4Tmk0eE5UZ2dURE11TVRJMUxEUTRMalV3TWlCRE1DNDBNallzTlRBdU1EWXhJQzB3TGpZeE15dzFNeTQwTkRJZ01DNDRNVEVzTlRZdU1EUWdUREV4TGpBNE9TdzNOQzQzT1NCRE1URXVNalkyTERjMUxqRXhNeUF4TVM0MU16Y3NOelV1TXpVeklERXhMamcxTERjMUxqUTVOQ0JNTlRndU1qYzJMREV3TWk0eU9UZ2dRelU1TGpZM09Td3hNRE11TVRBNElEWXhMalF6TXl3eE1ETXVOak1nTmpNdU16UTRMREV3TXk0NE1EWWdRell6TGpneE1pd3hNRE11T0RRNElEWTBMakk0TlN3eE1ETXVPRGNnTmpRdU56VTBMREV3TXk0NE55QkROalVzTVRBekxqZzNJRFkxTGpJME9Td3hNRE11T0RZMElEWTFMalE1TkN3eE1ETXVPRFV5SUVNMk5TNDFOak1zTVRBekxqZzBPU0EyTlM0Mk16SXNNVEF6TGpnME55QTJOUzQzTURFc01UQXpMamcwTnlCRE5qVXVOelkwTERFd015NDRORGNnTmpVdU9ESTRMREV3TXk0NE5Ea2dOalV1T0Rrc01UQXpMamcxTWlCRE5qVXVPVGcyTERFd015NDROVFlnTmpZdU1EZ3NNVEF6TGpnMk15QTJOaTR4TnpNc01UQXpMamczTkNCRE5qWXVNamd5TERFd05TNDBOamNnTmpjdU16TXlMREV3Tnk0eE9UY2dOamd1TnpBeUxERXdOeTQ1T0RnZ1RERXhNUzR4TnpRc01UTXlMalV4SUVNeE1URXVOams0TERFek1pNDRNVElnTVRFeUxqSXpNaXd4TXpJdU9UWTFJREV4TWk0M05qUXNNVE15TGprMk5TQkRNVEUwTGpJMk1Td3hNekl1T1RZMUlERXhOUzR6TkRjc01UTXhMamMyTlNBeE1UVXVNelEzTERFek1DNHhNVE1nVERFeE5TNHpORGNzTVRBekxqVTFNU0JNTVRJeUxqUTFPQ3c1T1M0ME5EWWdRekV5TWk0NE1Ua3NPVGt1TWpNM0lERXlNeTR3T0Rjc09UZ3VPRGs0SURFeU15NHlNRGNzT1RndU5EazRJRXd4TWpjdU9EWTFMRGd5TGprd05TQkRNVE15TGpJM09TdzRNeTQzTURJZ01UTTJMalUxTnl3NE5DNDNOVE1nTVRRd0xqWXdOeXc0Tmk0d016TWdUREUwTVM0eE5DdzROaTQ0TmpJZ1F6RTBNUzQwTlRFc09EY3VNelEySURFME1TNDVOemNzT0RjdU5qRXpJREUwTWk0MU1UWXNPRGN1TmpFeklFTXhOREl1TnprMExEZzNMall4TXlBeE5ETXVNRGMyTERnM0xqVTBNaUF4TkRNdU16TXpMRGczTGpNNU15Qk1NVFk1TGpnMk5TdzNNaTR3TnpZZ1RERTVNeXc0TlM0ME16TWdRekU1TXk0MU1qTXNPRFV1TnpNMUlERTVOQzR3TlRnc09EVXVPRGc0SURFNU5DNDFPU3c0TlM0NE9EZ2dRekU1Tmk0d09EY3NPRFV1T0RnNElERTVOeTR4TnpNc09EUXVOamc1SURFNU55NHhOek1zT0RNdU1ETTJJRXd4T1RjdU1UY3pMREk1TGpBek5TQkRNVGszTGpFM015d3lPQzQwTlRFZ01UazJMamcyTVN3eU55NDVNVEVnTVRrMkxqTTFOU3d5Tnk0Mk1Ua2dRekU1Tmk0ek5UVXNNamN1TmpFNUlERTNNUzQ0TkRNc01UTXVORFkzSURFM01DNHpPRFVzTVRJdU5qSTJJRU14TnpBdU1UTXlMREV5TGpRNElERTJPUzQ0TlN3eE1pNDBNRGNnTVRZNUxqVTJPQ3d4TWk0ME1EY2dRekUyT1M0eU9EVXNNVEl1TkRBM0lERTJPUzR3TURJc01USXVORGd4SURFMk9DNDNORGtzTVRJdU5qSTNJRU14TmpndU1UUXpMREV5TGprM09DQXhOalV1TnpVMkxERTBMak0xTnlBeE5qUXVOREkwTERFMUxqRXlOU0JNTVRVNUxqWXhOU3d4TUM0NE55QkRNVFU0TGpjNU5pd3hNQzR4TkRVZ01UVTRMakUxTkN3NExqa3pOeUF4TlRndU1EVTBMRGN1T1RNMElFTXhOVGd1TURRMUxEY3VPRE0zSURFMU9DNHdNelFzTnk0M016a2dNVFU0TGpBeU1TdzNMalkwSUVNeE5UZ3VNREExTERjdU5USXpJREUxTnk0NU9UZ3NOeTQwTVNBeE5UY3VPVGs0TERjdU16QTBJRXd4TlRjdU9UazRMRFl1TkRFNElFTXhOVGN1T1RrNExEVXVPRE0wSURFMU55NDJPRFlzTlM0eU9UVWdNVFUzTGpFNE1TdzFMakF3TWlCRE1UVTJMall5TkN3MExqWTRJREUxTUM0ME5ESXNNUzR4TVRFZ01UVXdMalEwTWl3eExqRXhNU0JETVRVd0xqRTRPU3d3TGprMk5TQXhORGt1T1RBM0xEQXVPRGt5SURFME9TNDJNalVzTUM0NE9USWlJR2xrUFNKR2FXeHNMVEVpSUdacGJHdzlJaU0wTlRWQk5qUWlQand2Y0dGMGFENEtJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0E4Y0dGMGFDQmtQU0pOT1RZdU1ESTNMREkxTGpZek5pQk1NVFF5TGpZd015dzFNaTQxTWpjZ1F6RTBNeTQ0TURjc05UTXVNakl5SURFME5DNDFPRElzTlRRdU1URTBJREUwTkM0NE5EVXNOVFV1TURZNElFd3hORFF1T0RNMUxEVTFMakEzTlNCTU5qTXVORFl4TERFd01pNHdOVGNnVERZekxqUTJMREV3TWk0d05UY2dRell4TGpnd05pd3hNREV1T1RBMUlEWXdMakkyTVN3eE1ERXVORFUzSURVNUxqQTFOeXd4TURBdU56WXlJRXd4TWk0ME9ERXNOek11T0RjeElFdzVOaTR3TWpjc01qVXVOak0ySWlCcFpEMGlSbWxzYkMweUlpQm1hV3hzUFNJalJrRkdRVVpCSWo0OEwzQmhkR2crQ2lBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ1BIQmhkR2dnWkQwaVRUWXpMalEyTVN3eE1ESXVNVGMwSUVNMk15NDBOVE1zTVRBeUxqRTNOQ0EyTXk0ME5EWXNNVEF5TGpFM05DQTJNeTQwTXprc01UQXlMakUzTWlCRE5qRXVOelEyTERFd01pNHdNVFlnTmpBdU1qRXhMREV3TVM0MU5qTWdOVGd1T1RrNExERXdNQzQ0TmpNZ1RERXlMalF5TWl3M015NDVOek1nUXpFeUxqTTROaXczTXk0NU5USWdNVEl1TXpZMExEY3pMamt4TkNBeE1pNHpOalFzTnpNdU9EY3hJRU14TWk0ek5qUXNOek11T0RNZ01USXVNemcyTERjekxqYzVNU0F4TWk0ME1qSXNOek11TnpjZ1REazFMamsyT0N3eU5TNDFNelVnUXprMkxqQXdOQ3d5TlM0MU1UUWdPVFl1TURRNUxESTFMalV4TkNBNU5pNHdPRFVzTWpVdU5UTTFJRXd4TkRJdU5qWXhMRFV5TGpReU5pQkRNVFF6TGpnNE9DdzFNeTR4TXpRZ01UUTBMalk0TWl3MU5DNHdNemdnTVRRMExqazFOeXcxTlM0d016Y2dRekUwTkM0NU55dzFOUzR3T0RNZ01UUTBMamsxTXl3MU5TNHhNek1nTVRRMExqa3hOU3cxTlM0eE5qRWdRekUwTkM0NU1URXNOVFV1TVRZMUlERTBOQzQ0T1Rnc05UVXVNVGMwSURFME5DNDRPVFFzTlRVdU1UYzNJRXcyTXk0MU1Ua3NNVEF5TGpFMU9DQkROak11TlRBeExERXdNaTR4TmprZ05qTXVORGd4TERFd01pNHhOelFnTmpNdU5EWXhMREV3TWk0eE56UWdURFl6TGpRMk1Td3hNREl1TVRjMElGb2dUVEV5TGpjeE5DdzNNeTQ0TnpFZ1REVTVMakV4TlN3eE1EQXVOall4SUVNMk1DNHlPVE1zTVRBeExqTTBNU0EyTVM0M09EWXNNVEF4TGpjNE1pQTJNeTQwTXpVc01UQXhMamt6TnlCTU1UUTBMamN3Tnl3MU5TNHdNVFVnUXpFME5DNDBNamdzTlRRdU1UQTRJREUwTXk0Mk9ESXNOVE11TWpnMUlERTBNaTQxTkRRc05USXVOakk0SUV3NU5pNHdNamNzTWpVdU56Y3hJRXd4TWk0M01UUXNOek11T0RjeElFd3hNaTQzTVRRc056TXVPRGN4SUZvaUlHbGtQU0pHYVd4c0xUTWlJR1pwYkd3OUlpTTJNRGRFT0VJaVBqd3ZjR0YwYUQ0S0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQThjR0YwYUNCa1BTSk5NVFE0TGpNeU55dzFPQzQwTnpFZ1F6RTBPQzR4TkRVc05UZ3VORGdnTVRRM0xqazJNaXcxT0M0ME9DQXhORGN1TnpneExEVTRMalEzTWlCRE1UUTFMamc0Tnl3MU9DNHpPRGtnTVRRMExqUTNPU3cxTnk0ME16UWdNVFEwTGpZek5pdzFOaTR6TkNCRE1UUTBMalk0T1N3MU5TNDVOamNnTVRRMExqWTJOQ3cxTlM0MU9UY2dNVFEwTGpVMk5DdzFOUzR5TXpVZ1REWXpMalEyTVN3eE1ESXVNRFUzSUVNMk5DNHdPRGtzTVRBeUxqRXhOU0EyTkM0M016TXNNVEF5TGpFeklEWTFMak0zT1N3eE1ESXVNRGs1SUVNMk5TNDFOakVzTVRBeUxqQTVJRFkxTGpjME15d3hNREl1TURrZ05qVXVPVEkxTERFd01pNHdPVGdnUXpZM0xqZ3hPU3d4TURJdU1UZ3hJRFk1TGpJeU55d3hNRE11TVRNMklEWTVMakEzTERFd05DNHlNeUJNTVRRNExqTXlOeXcxT0M0ME56RWlJR2xrUFNKR2FXeHNMVFFpSUdacGJHdzlJaU5HUmtaR1JrWWlQand2Y0dGMGFENEtJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0E4Y0dGMGFDQmtQU0pOTmprdU1EY3NNVEEwTGpNME55QkROamt1TURRNExERXdOQzR6TkRjZ05qa3VNREkxTERFd05DNHpOQ0EyT1M0d01EVXNNVEEwTGpNeU55QkROamd1T1RZNExERXdOQzR6TURFZ05qZ3VPVFE0TERFd05DNHlOVGNnTmpndU9UVTFMREV3TkM0eU1UTWdRelk1TERFd015NDRPVFlnTmpndU9EazRMREV3TXk0MU56WWdOamd1TmpVNExERXdNeTR5T0RnZ1F6WTRMakUxTXl3eE1ESXVOamM0SURZM0xqRXdNeXd4TURJdU1qWTJJRFkxTGpreUxERXdNaTR5TVRRZ1F6WTFMamMwTWl3eE1ESXVNakEySURZMUxqVTJNeXd4TURJdU1qQTNJRFkxTGpNNE5Td3hNREl1TWpFMUlFTTJOQzQzTkRJc01UQXlMakkwTmlBMk5DNHdPRGNzTVRBeUxqSXpNaUEyTXk0ME5Td3hNREl1TVRjMElFTTJNeTR6T1Rrc01UQXlMakUyT1NBMk15NHpOVGdzTVRBeUxqRXpNaUEyTXk0ek5EY3NNVEF5TGpBNE1pQkROak11TXpNMkxERXdNaTR3TXpNZ05qTXVNelU0TERFd01TNDVPREVnTmpNdU5EQXlMREV3TVM0NU5UWWdUREUwTkM0MU1EWXNOVFV1TVRNMElFTXhORFF1TlRNM0xEVTFMakV4TmlBeE5EUXVOVGMxTERVMUxqRXhNeUF4TkRRdU5qQTVMRFUxTGpFeU55QkRNVFEwTGpZME1pdzFOUzR4TkRFZ01UUTBMalkyT0N3MU5TNHhOeUF4TkRRdU5qYzNMRFUxTGpJd05DQkRNVFEwTGpjNE1TdzFOUzQxT0RVZ01UUTBMamd3Tml3MU5TNDVOeklnTVRRMExqYzFNU3cxTmk0ek5UY2dRekUwTkM0M01EWXNOVFl1TmpjeklERTBOQzQ0TURnc05UWXVPVGswSURFME5TNHdORGNzTlRjdU1qZ3lJRU14TkRVdU5UVXpMRFUzTGpnNU1pQXhORFl1TmpBeUxEVTRMak13TXlBeE5EY3VOemcyTERVNExqTTFOU0JETVRRM0xqazJOQ3cxT0M0ek5qTWdNVFE0TGpFME15dzFPQzR6TmpNZ01UUTRMak15TVN3MU9DNHpOVFFnUXpFME9DNHpOemNzTlRndU16VXlJREUwT0M0ME1qUXNOVGd1TXpnM0lERTBPQzQwTXprc05UZ3VORE00SUVNeE5EZ3VORFUwTERVNExqUTVJREUwT0M0ME16SXNOVGd1TlRRMUlERTBPQzR6T0RVc05UZ3VOVGN5SUV3Mk9TNHhNamtzTVRBMExqTXpNU0JETmprdU1URXhMREV3TkM0ek5ESWdOamt1TURrc01UQTBMak0wTnlBMk9TNHdOeXd4TURRdU16UTNJRXcyT1M0d055d3hNRFF1TXpRM0lGb2dUVFkxTGpZMk5Td3hNREV1T1RjMUlFTTJOUzQzTlRRc01UQXhMamszTlNBMk5TNDRORElzTVRBeExqazNOeUEyTlM0NU15d3hNREV1T1RneElFTTJOeTR4T1RZc01UQXlMakF6TnlBMk9DNHlPRE1zTVRBeUxqUTJPU0EyT0M0NE16Z3NNVEF6TGpFek9TQkROamt1TURZMUxERXdNeTQwTVRNZ05qa3VNVGc0TERFd015NDNNVFFnTmprdU1UazRMREV3TkM0d01qRWdUREUwTnk0NE9ETXNOVGd1TlRreUlFTXhORGN1T0RRM0xEVTRMalU1TWlBeE5EY3VPREV4TERVNExqVTVNU0F4TkRjdU56YzJMRFU0TGpVNE9TQkRNVFEyTGpVd09TdzFPQzQxTXpNZ01UUTFMalF5TWl3MU9DNHhJREUwTkM0NE5qY3NOVGN1TkRNeElFTXhORFF1TlRnMUxEVTNMakE1TVNBeE5EUXVORFkxTERVMkxqY3dOeUF4TkRRdU5USXNOVFl1TXpJMElFTXhORFF1TlRZekxEVTJMakF5TVNBeE5EUXVOVFV5TERVMUxqY3hOaUF4TkRRdU5EZzRMRFUxTGpReE5DQk1Oak11T0RRMkxERXdNUzQ1TnlCRE5qUXVNelV6TERFd01pNHdNRElnTmpRdU9EWTNMREV3TWk0d01EWWdOalV1TXpjMExERXdNUzQ1T0RJZ1F6WTFMalEzTVN3eE1ERXVPVGMzSURZMUxqVTJPQ3d4TURFdU9UYzFJRFkxTGpZMk5Td3hNREV1T1RjMUlFdzJOUzQyTmpVc01UQXhMamszTlNCYUlpQnBaRDBpUm1sc2JDMDFJaUJtYVd4c1BTSWpOakEzUkRoQ0lqNDhMM0JoZEdnK0NpQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdQSEJoZEdnZ1pEMGlUVEl1TWpBNExEVTFMakV6TkNCRE1TNHlNRGNzTlRNdU16QTNJREV1T1RZM0xEVXdMamt4TnlBekxqa3dOaXcwT1M0M09UY2dURFU1TGpreE55d3hOeTQwTlRNZ1F6WXhMamcxTml3eE5pNHpNek1nTmpRdU1qUXhMREUyTGprd055QTJOUzR5TkRNc01UZ3VOek0wSUV3Mk5TNDBOelVzTVRrdU1UUTBJRU0yTlM0NE56SXNNVGt1T0RneUlEWTJMak0yT0N3eU1DNDFOaUEyTmk0NU5EVXNNakV1TVRZMUlFdzJOeTR5TWpNc01qRXVORE0xSUVNM01DNDFORGdzTWpRdU5qUTVJRGMxTGpnd05pd3lOUzR4TlRFZ09EQXVNVEV4TERJeUxqWTJOU0JNT0RjdU5ETXNNVGd1TkRRMUlFTTRPUzR6Tnl3eE55NHpNallnT1RFdU56VTBMREUzTGpnNU9TQTVNaTQzTlRVc01Ua3VOekkzSUV3NU5pNHdNRFVzTWpVdU5qVTFJRXd4TWk0ME9EWXNOek11T0RnMElFd3lMakl3T0N3MU5TNHhNelFnV2lJZ2FXUTlJa1pwYkd3dE5pSWdabWxzYkQwaUkwWkJSa0ZHUVNJK1BDOXdZWFJvUGdvZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lEeHdZWFJvSUdROUlrMHhNaTQwT0RZc056UXVNREF4SUVNeE1pNDBOellzTnpRdU1EQXhJREV5TGpRMk5TdzNNeTQ1T1RrZ01USXVORFUxTERjekxqazVOaUJETVRJdU5ESTBMRGN6TGprNE9DQXhNaTR6T1Rrc056TXVPVFkzSURFeUxqTTROQ3czTXk0NU5DQk1NaTR4TURZc05UVXVNVGtnUXpFdU1EYzFMRFV6TGpNeElERXVPRFUzTERVd0xqZzBOU0F6TGpnME9DdzBPUzQyT1RZZ1REVTVMamcxT0N3eE55NHpOVElnUXpZd0xqVXlOU3d4Tmk0NU5qY2dOakV1TWpjeExERTJMamMyTkNBMk1pNHdNVFlzTVRZdU56WTBJRU0yTXk0ME16RXNNVFl1TnpZMElEWTBMalkyTml3eE55NDBOallnTmpVdU16STNMREU0TGpZME5pQkROalV1TXpNM0xERTRMalkxTkNBMk5TNHpORFVzTVRndU5qWXpJRFkxTGpNMU1Td3hPQzQyTnpRZ1REWTFMalUzT0N3eE9TNHdPRGdnUXpZMUxqVTROQ3d4T1M0eElEWTFMalU0T1N3eE9TNHhNVElnTmpVdU5Ua3hMREU1TGpFeU5pQkROalV1T1RnMUxERTVMamd6T0NBMk5pNDBOamtzTWpBdU5EazNJRFkzTGpBekxESXhMakE0TlNCTU5qY3VNekExTERJeExqTTFNU0JETmprdU1UVXhMREl6TGpFek55QTNNUzQyTkRrc01qUXVNVElnTnpRdU16TTJMREkwTGpFeUlFTTNOaTR6TVRNc01qUXVNVElnTnpndU1qa3NNak11TlRneUlEZ3dMakExTXl3eU1pNDFOak1nUXpnd0xqQTJOQ3d5TWk0MU5UY2dPREF1TURjMkxESXlMalUxTXlBNE1DNHdPRGdzTWpJdU5UVWdURGczTGpNM01pd3hPQzR6TkRRZ1F6ZzRMakF6T0N3eE55NDVOVGtnT0RndU56ZzBMREUzTGpjMU5pQTRPUzQxTWprc01UY3VOelUySUVNNU1DNDVOVFlzTVRjdU56VTJJRGt5TGpJd01Td3hPQzQwTnpJZ09USXVPRFU0TERFNUxqWTNJRXc1Tmk0eE1EY3NNalV1TlRrNUlFTTVOaTR4TXpnc01qVXVOalUwSURrMkxqRXhPQ3d5TlM0M01qUWdPVFl1TURZekxESTFMamMxTmlCTU1USXVOVFExTERjekxqazROU0JETVRJdU5USTJMRGN6TGprNU5pQXhNaTQxTURZc056UXVNREF4SURFeUxqUTROaXczTkM0d01ERWdUREV5TGpRNE5pdzNOQzR3TURFZ1dpQk5Oakl1TURFMkxERTJMams1TnlCRE5qRXVNekV5TERFMkxqazVOeUEyTUM0Mk1EWXNNVGN1TVRrZ05Ua3VPVGMxTERFM0xqVTFOQ0JNTXk0NU5qVXNORGt1T0RrNUlFTXlMakE0TXl3MU1DNDVPRFVnTVM0ek5ERXNOVE11TXpBNElESXVNekVzTlRVdU1EYzRJRXd4TWk0MU16RXNOek11TnpJeklFdzVOUzQ0TkRnc01qVXVOakV4SUV3NU1pNDJOVE1zTVRrdU56Z3lJRU01TWk0d016Z3NNVGd1TmpZZ09UQXVPRGNzTVRjdU9Ua2dPRGt1TlRJNUxERTNMams1SUVNNE9DNDRNalVzTVRjdU9Ua2dPRGd1TVRFNUxERTRMakU0TWlBNE55NDBPRGtzTVRndU5UUTNJRXc0TUM0eE56SXNNakl1TnpjeUlFTTRNQzR4TmpFc01qSXVOemM0SURnd0xqRTBPU3d5TWk0M09ESWdPREF1TVRNM0xESXlMamM0TlNCRE56Z3VNelEyTERJekxqZ3hNU0EzTmk0ek5ERXNNalF1TXpVMElEYzBMak16Tml3eU5DNHpOVFFnUXpjeExqVTRPQ3d5TkM0ek5UUWdOamt1TURNekxESXpMak0wTnlBMk55NHhORElzTWpFdU5URTVJRXcyTmk0NE5qUXNNakV1TWpRNUlFTTJOaTR5Tnpjc01qQXVOak0wSURZMUxqYzNOQ3d4T1M0NU5EY2dOalV1TXpZM0xERTVMakl3TXlCRE5qVXVNellzTVRrdU1Ua3lJRFkxTGpNMU5pd3hPUzR4TnprZ05qVXVNelUwTERFNUxqRTJOaUJNTmpVdU1UWXpMREU0TGpneE9TQkROalV1TVRVMExERTRMamd4TVNBMk5TNHhORFlzTVRndU9EQXhJRFkxTGpFMExERTRMamM1SUVNMk5DNDFNalVzTVRjdU5qWTNJRFl6TGpNMU55d3hOaTQ1T1RjZ05qSXVNREUyTERFMkxqazVOeUJNTmpJdU1ERTJMREUyTGprNU55QmFJaUJwWkQwaVJtbHNiQzAzSWlCbWFXeHNQU0lqTmpBM1JEaENJajQ4TDNCaGRHZytDaUFnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnUEhCaGRHZ2daRDBpVFRReUxqUXpOQ3cwT0M0NE1EZ2dURFF5TGpRek5DdzBPQzQ0TURnZ1F6TTVMamt5TkN3ME9DNDRNRGNnTXpjdU56TTNMRFEzTGpVMUlETTJMalU0TWl3ME5TNDBORE1nUXpNMExqYzNNU3cwTWk0eE16a2dNell1TVRRMExETTNMamd3T1NBek9TNDJOREVzTXpVdU56ZzVJRXcxTVM0NU16SXNNamd1TmpreElFTTFNeTR4TURNc01qZ3VNREUxSURVMExqUXhNeXd5Tnk0Mk5UZ2dOVFV1TnpJeExESTNMalkxT0NCRE5UZ3VNak14TERJM0xqWTFPQ0EyTUM0ME1UZ3NNamd1T1RFMklEWXhMalUzTXl3ek1TNHdNak1nUXpZekxqTTROQ3d6TkM0ek1qY2dOakl1TURFeUxETTRMalkxTnlBMU9DNDFNVFFzTkRBdU5qYzNJRXcwTmk0eU1qTXNORGN1TnpjMUlFTTBOUzR3TlRNc05EZ3VORFVnTkRNdU56UXlMRFE0TGpnd09DQTBNaTQwTXpRc05EZ3VPREE0SUV3ME1pNDBNelFzTkRndU9EQTRJRm9nVFRVMUxqY3lNU3d5T0M0eE1qVWdRelUwTGpRNU5Td3lPQzR4TWpVZ05UTXVNalkxTERJNExqUTJNU0ExTWk0eE5qWXNNamt1TURrMklFd3pPUzQ0TnpVc016WXVNVGswSUVNek5pNDFPVFlzTXpndU1EZzNJRE0xTGpNd01pdzBNaTR4TXpZZ016WXVPVGt5TERRMUxqSXhPQ0JETXpndU1EWXpMRFEzTGpFM015QTBNQzR3T1Rnc05EZ3VNelFnTkRJdU5ETTBMRFE0TGpNMElFTTBNeTQyTmpFc05EZ3VNelFnTkRRdU9Ea3NORGd1TURBMUlEUTFMams1TERRM0xqTTNJRXcxT0M0eU9ERXNOREF1TWpjeUlFTTJNUzQxTml3ek9DNHpOemtnTmpJdU9EVXpMRE0wTGpNeklEWXhMakUyTkN3ek1TNHlORGdnUXpZd0xqQTVNaXd5T1M0eU9UTWdOVGd1TURVNExESTRMakV5TlNBMU5TNDNNakVzTWpndU1USTFJRXcxTlM0M01qRXNNamd1TVRJMUlGb2lJR2xrUFNKR2FXeHNMVGdpSUdacGJHdzlJaU0yTURkRU9FSWlQand2Y0dGMGFENEtJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0E4Y0dGMGFDQmtQU0pOTVRRNUxqVTRPQ3d5TGpRd055QkRNVFE1TGpVNE9Dd3lMalF3TnlBeE5UVXVOelk0TERVdU9UYzFJREUxTmk0ek1qVXNOaTR5T1RjZ1RERTFOaTR6TWpVc055NHhPRFFnUXpFMU5pNHpNalVzTnk0ek5pQXhOVFl1TXpNNExEY3VOVFEwSURFMU5pNHpOaklzTnk0M016TWdRekUxTmk0ek56TXNOeTQ0TVRRZ01UVTJMak00TWl3M0xqZzVOQ0F4TlRZdU16a3NOeTQ1TnpVZ1F6RTFOaTQxTXl3NUxqTTVJREUxTnk0ek5qTXNNVEF1T1RjeklERTFPQzQwT1RVc01URXVPVGMwSUV3eE5qVXVPRGt4TERFNExqVXhPU0JETVRZMkxqQTJPQ3d4T0M0Mk56VWdNVFkyTGpJME9Td3hPQzQ0TVRRZ01UWTJMalF6TWl3eE9DNDVNelFnUXpFMk9DNHdNVEVzTVRrdU9UYzBJREUyT1M0ek9ESXNNVGt1TkNBeE5qa3VORGswTERFM0xqWTFNaUJETVRZNUxqVTBNeXd4Tmk0NE5qZ2dNVFk1TGpVMU1Td3hOaTR3TlRjZ01UWTVMalV4Tnl3eE5TNHlNak1nVERFMk9TNDFNVFFzTVRVdU1EWXpJRXd4TmprdU5URTBMREV6TGpreE1pQkRNVGN3TGpjNExERTBMalkwTWlBeE9UVXVOVEF4TERJNExqa3hOU0F4T1RVdU5UQXhMREk0TGpreE5TQk1NVGsxTGpVd01TdzRNaTQ1TVRVZ1F6RTVOUzQxTURFc09EUXVNREExSURFNU5DNDNNekVzT0RRdU5EUTFJREU1TXk0M09ERXNPRE11T0RrM0lFd3hOVEV1TXpBNExEVTVMak0zTkNCRE1UVXdMak0xT0N3MU9DNDRNallnTVRRNUxqVTRPQ3cxTnk0ME9UY2dNVFE1TGpVNE9DdzFOaTQwTURnZ1RERTBPUzQxT0Rnc01qSXVNemMxSWlCcFpEMGlSbWxzYkMwNUlpQm1hV3hzUFNJalJrRkdRVVpCSWo0OEwzQmhkR2crQ2lBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ1BIQmhkR2dnWkQwaVRURTVOQzQxTlRNc09EUXVNalVnUXpFNU5DNHlPVFlzT0RRdU1qVWdNVGswTGpBeE15dzROQzR4TmpVZ01Ua3pMamN5TWl3NE15NDVPVGNnVERFMU1TNHlOU3cxT1M0ME56WWdRekUxTUM0eU5qa3NOVGd1T1RBNUlERTBPUzQwTnpFc05UY3VOVE16SURFME9TNDBOekVzTlRZdU5EQTRJRXd4TkRrdU5EY3hMREl5TGpNM05TQk1NVFE1TGpjd05Td3lNaTR6TnpVZ1RERTBPUzQzTURVc05UWXVOREE0SUVNeE5Ea3VOekExTERVM0xqUTFPU0F4TlRBdU5EVXNOVGd1TnpRMElERTFNUzR6TmpZc05Ua3VNamMwSUV3eE9UTXVPRE01TERnekxqYzVOU0JETVRrMExqSTJNeXc0TkM0d05DQXhPVFF1TmpVMUxEZzBMakE0TXlBeE9UUXVPVFF5TERnekxqa3hOeUJETVRrMUxqSXlOeXc0TXk0M05UTWdNVGsxTGpNNE5DdzRNeTR6T1RjZ01UazFMak00TkN3NE1pNDVNVFVnVERFNU5TNHpPRFFzTWpndU9UZ3lJRU14T1RRdU1UQXlMREk0TGpJME1pQXhOekl1TVRBMExERTFMalUwTWlBeE5qa3VOak14TERFMExqRXhOQ0JNTVRZNUxqWXpOQ3d4TlM0eU1pQkRNVFk1TGpZMk9Dd3hOaTR3TlRJZ01UWTVMalkyTERFMkxqZzNOQ0F4TmprdU5qRXNNVGN1TmpVNUlFTXhOamt1TlRVMkxERTRMalV3TXlBeE5qa3VNakUwTERFNUxqRXlNeUF4TmpndU5qUTNMREU1TGpRd05TQkRNVFk0TGpBeU9Dd3hPUzQzTVRRZ01UWTNMakU1Tnl3eE9TNDFOemdnTVRZMkxqTTJOeXd4T1M0d016SWdRekUyTmk0eE9ERXNNVGd1T1RBNUlERTJOUzQ1T1RVc01UZ3VOelkySURFMk5TNDRNVFFzTVRndU5qQTJJRXd4TlRndU5ERTNMREV5TGpBMk1pQkRNVFUzTGpJMU9Td3hNUzR3TXpZZ01UVTJMalF4T0N3NUxqUXpOeUF4TlRZdU1qYzBMRGN1T1RnMklFTXhOVFl1TWpZMkxEY3VPVEEzSURFMU5pNHlOVGNzTnk0NE1qY2dNVFUyTGpJME55dzNMamMwT0NCRE1UVTJMakl5TVN3M0xqVTFOU0F4TlRZdU1qQTVMRGN1TXpZMUlERTFOaTR5TURrc055NHhPRFFnVERFMU5pNHlNRGtzTmk0ek5qUWdRekUxTlM0ek56VXNOUzQ0T0RNZ01UUTVMalV5T1N3eUxqVXdPQ0F4TkRrdU5USTVMREl1TlRBNElFd3hORGt1TmpRMkxESXVNekEySUVNeE5Ea3VOalEyTERJdU16QTJJREUxTlM0NE1qY3NOUzQ0TnpRZ01UVTJMak00TkN3MkxqRTVOaUJNTVRVMkxqUTBNaXcyTGpJeklFd3hOVFl1TkRReUxEY3VNVGcwSUVNeE5UWXVORFF5TERjdU16VTFJREUxTmk0ME5UUXNOeTQxTXpVZ01UVTJMalEzT0N3M0xqY3hOeUJETVRVMkxqUTRPU3czTGpnZ01UVTJMalE1T1N3M0xqZzRNaUF4TlRZdU5UQTNMRGN1T1RZeklFTXhOVFl1TmpRMUxEa3VNelU0SURFMU55NDBOVFVzTVRBdU9EazRJREUxT0M0MU56SXNNVEV1T0RnMklFd3hOalV1T1RZNUxERTRMalF6TVNCRE1UWTJMakUwTWl3eE9DNDFPRFFnTVRZMkxqTXhPU3d4T0M0M01pQXhOall1TkRrMkxERTRMamd6TnlCRE1UWTNMakkxTkN3eE9TNHpNellnTVRZNExERTVMalEyTnlBeE5qZ3VOVFF6TERFNUxqRTVOaUJETVRZNUxqQXpNeXd4T0M0NU5UTWdNVFk1TGpNeU9Td3hPQzQwTURFZ01UWTVMak0zTnl3eE55NDJORFVnUXpFMk9TNDBNamNzTVRZdU9EWTNJREUyT1M0ME16UXNNVFl1TURVMElERTJPUzQwTURFc01UVXVNakk0SUV3eE5qa3VNemszTERFMUxqQTJOU0JNTVRZNUxqTTVOeXd4TXk0M01TQk1NVFk1TGpVM01pd3hNeTQ0TVNCRE1UY3dMamd6T1N3eE5DNDFOREVnTVRrMUxqVTFPU3d5T0M0NE1UUWdNVGsxTGpVMU9Td3lPQzQ0TVRRZ1RERTVOUzQyTVRnc01qZ3VPRFEzSUV3eE9UVXVOakU0TERneUxqa3hOU0JETVRrMUxqWXhPQ3c0TXk0ME9EUWdNVGsxTGpReUxEZ3pMamt4TVNBeE9UVXVNRFU1TERnMExqRXhPU0JETVRrMExqa3dPQ3c0TkM0eU1EWWdNVGswTGpjek55dzROQzR5TlNBeE9UUXVOVFV6TERnMExqSTFJaUJwWkQwaVJtbHNiQzB4TUNJZ1ptbHNiRDBpSXpZd04wUTRRaUkrUEM5d1lYUm9QZ29nSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUR4d1lYUm9JR1E5SWsweE5EVXVOamcxTERVMkxqRTJNU0JNTVRZNUxqZ3NOekF1TURneklFd3hORE11T0RJeUxEZzFMakE0TVNCTU1UUXlMak0yTERnMExqYzNOQ0JETVRNMUxqZ3lOaXc0TWk0Mk1EUWdNVEk0TGpjek1pdzRNUzR3TkRZZ01USXhMak0wTVN3NE1DNHhOVGdnUXpFeE5pNDVOellzTnprdU5qTTBJREV4TWk0Mk56Z3NPREV1TWpVMElERXhNUzQzTkRNc09ETXVOemM0SUVNeE1URXVOVEEyTERnMExqUXhOQ0F4TVRFdU5UQXpMRGcxTGpBM01TQXhNVEV1TnpNeUxEZzFMamN3TmlCRE1URXpMakkzTERnNUxqazNNeUF4TVRVdU9UWTRMRGswTGpBMk9TQXhNVGt1TnpJM0xEazNMamcwTVNCTU1USXdMakkxT1N3NU9DNDJPRFlnUXpFeU1DNHlOaXc1T0M0Mk9EVWdPVFF1TWpneUxERXhNeTQyT0RNZ09UUXVNamd5TERFeE15NDJPRE1nVERjd0xqRTJOeXc1T1M0M05qRWdUREUwTlM0Mk9EVXNOVFl1TVRZeElpQnBaRDBpUm1sc2JDMHhNU0lnWm1sc2JEMGlJMFpHUmtaR1JpSStQQzl3WVhSb1Bnb2dJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJRHh3WVhSb0lHUTlJazA1TkM0eU9ESXNNVEV6TGpneE9DQk1PVFF1TWpJekxERXhNeTQzT0RVZ1REWTVMamt6TXl3NU9TNDNOakVnVERjd0xqRXdPQ3c1T1M0Mk5pQk1NVFExTGpZNE5TdzFOaTR3TWpZZ1RERTBOUzQzTkRNc05UWXVNRFU1SUV3eE56QXVNRE16TERjd0xqQTRNeUJNTVRRekxqZzBNaXc0TlM0eU1EVWdUREUwTXk0M09UY3NPRFV1TVRrMUlFTXhORE11TnpjeUxEZzFMakU1SURFME1pNHpNellzT0RRdU9EZzRJREUwTWk0ek16WXNPRFF1T0RnNElFTXhNelV1TnpnM0xEZ3lMamN4TkNBeE1qZ3VOekl6TERneExqRTJNeUF4TWpFdU16STNMRGd3TGpJM05DQkRNVEl3TGpjNE9DdzRNQzR5TURrZ01USXdMakl6Tml3NE1DNHhOemNnTVRFNUxqWTRPU3c0TUM0eE56Y2dRekV4TlM0NU16RXNPREF1TVRjM0lERXhNaTQyTXpVc09ERXVOekE0SURFeE1TNDROVElzT0RNdU9ERTVJRU14TVRFdU5qSTBMRGcwTGpRek1pQXhNVEV1TmpJeExEZzFMakExTXlBeE1URXVPRFF5TERnMUxqWTJOeUJETVRFekxqTTNOeXc0T1M0NU1qVWdNVEUyTGpBMU9DdzVNeTQ1T1RNZ01URTVMamd4TERrM0xqYzFPQ0JNTVRFNUxqZ3lOaXc1Tnk0M056a2dUREV5TUM0ek5USXNPVGd1TmpFMElFTXhNakF1TXpVMExEazRMall4TnlBeE1qQXVNelUyTERrNExqWXlJREV5TUM0ek5UZ3NPVGd1TmpJMElFd3hNakF1TkRJeUxEazRMamN5TmlCTU1USXdMak14Tnl3NU9DNDNPRGNnUXpFeU1DNHlOalFzT1RndU9ERTRJRGswTGpVNU9Td3hNVE11TmpNMUlEazBMak0wTERFeE15NDNPRFVnVERrMExqSTRNaXd4TVRNdU9ERTRJRXc1TkM0eU9ESXNNVEV6TGpneE9DQmFJRTAzTUM0ME1ERXNPVGt1TnpZeElFdzVOQzR5T0RJc01URXpMalUwT1NCTU1URTVMakE0TkN3NU9TNHlNamtnUXpFeE9TNDJNeXc1T0M0NU1UUWdNVEU1TGprekxEazRMamMwSURFeU1DNHhNREVzT1RndU5qVTBJRXd4TVRrdU5qTTFMRGszTGpreE5DQkRNVEUxTGpnMk5DdzVOQzR4TWpjZ01URXpMakUyT0N3NU1DNHdNek1nTVRFeExqWXlNaXc0TlM0M05EWWdRekV4TVM0ek9ESXNPRFV1TURjNUlERXhNUzR6T0RZc09EUXVOREEwSURFeE1TNDJNek1zT0RNdU56TTRJRU14TVRJdU5EUTRMRGd4TGpVek9TQXhNVFV1T0RNMkxEYzVMamswTXlBeE1Ua3VOamc1TERjNUxqazBNeUJETVRJd0xqSTBOaXczT1M0NU5ETWdNVEl3TGpnd05pdzNPUzQ1TnpZZ01USXhMak0xTlN3NE1DNHdORElnUXpFeU9DNDNOamNzT0RBdU9UTXpJREV6TlM0NE5EWXNPREl1TkRnM0lERTBNaTR6T1RZc09EUXVOall6SUVNeE5ETXVNak15TERnMExqZ3pPQ0F4TkRNdU5qRXhMRGcwTGpreE55QXhORE11TnpnMkxEZzBMamsyTnlCTU1UWTVMalUyTml3M01DNHdPRE1nVERFME5TNDJPRFVzTlRZdU1qazFJRXczTUM0ME1ERXNPVGt1TnpZeElFdzNNQzQwTURFc09Ua3VOell4SUZvaUlHbGtQU0pHYVd4c0xURXlJaUJtYVd4c1BTSWpOakEzUkRoQ0lqNDhMM0JoZEdnK0NpQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdQSEJoZEdnZ1pEMGlUVEUyTnk0eU15d3hPQzQ1TnprZ1RERTJOeTR5TXl3Mk9TNDROU0JNTVRNNUxqa3dPU3c0TlM0Mk1qTWdUREV6TXk0ME5EZ3NOekV1TkRVMklFTXhNekl1TlRNNExEWTVMalEySURFek1DNHdNaXcyT1M0M01UZ2dNVEkzTGpneU5DdzNNaTR3TXlCRE1USTJMamMyT1N3M015NHhOQ0F4TWpVdU9UTXhMRGMwTGpVNE5TQXhNalV1TkRrMExEYzJMakEwT0NCTU1URTVMakF6TkN3NU55NDJOellnVERreExqY3hNaXd4TVRNdU5EVWdURGt4TGpjeE1pdzJNaTQxTnprZ1RERTJOeTR5TXl3eE9DNDVOemtpSUdsa1BTSkdhV3hzTFRFeklpQm1hV3hzUFNJalJrWkdSa1pHSWo0OEwzQmhkR2crQ2lBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ1BIQmhkR2dnWkQwaVRUa3hMamN4TWl3eE1UTXVOVFkzSUVNNU1TNDJPVElzTVRFekxqVTJOeUE1TVM0Mk56SXNNVEV6TGpVMk1TQTVNUzQyTlRNc01URXpMalUxTVNCRE9URXVOakU0TERFeE15NDFNeUE1TVM0MU9UVXNNVEV6TGpRNU1pQTVNUzQxT1RVc01URXpMalExSUV3NU1TNDFPVFVzTmpJdU5UYzVJRU01TVM0MU9UVXNOakl1TlRNM0lEa3hMall4T0N3Mk1pNDBPVGtnT1RFdU5qVXpMRFl5TGpRM09DQk1NVFkzTGpFM01pd3hPQzQ0TnpnZ1F6RTJOeTR5TURnc01UZ3VPRFUzSURFMk55NHlOVElzTVRndU9EVTNJREUyTnk0eU9EZ3NNVGd1T0RjNElFTXhOamN1TXpJMExERTRMamc1T1NBeE5qY3VNelEzTERFNExqa3pOeUF4TmpjdU16UTNMREU0TGprM09TQk1NVFkzTGpNME55dzJPUzQ0TlNCRE1UWTNMak0wTnl3Mk9TNDRPVEVnTVRZM0xqTXlOQ3cyT1M0NU15QXhOamN1TWpnNExEWTVMamsxSUV3eE16a3VPVFkzTERnMUxqY3lOU0JETVRNNUxqa3pPU3c0TlM0M05ERWdNVE01TGprd05TdzROUzQzTkRVZ01UTTVMamczTXl3NE5TNDNNelVnUXpFek9TNDRORElzT0RVdU56STFJREV6T1M0NE1UWXNPRFV1TnpBeUlERXpPUzQ0TURJc09EVXVOamN5SUV3eE16TXVNelF5TERjeExqVXdOQ0JETVRNeUxqazJOeXczTUM0Mk9ESWdNVE15TGpJNExEY3dMakl5T1NBeE16RXVOREE0TERjd0xqSXlPU0JETVRNd0xqTXhPU3czTUM0eU1qa2dNVEk1TGpBME5DdzNNQzQ1TVRVZ01USTNMamt3T0N3M01pNHhNU0JETVRJMkxqZzNOQ3czTXk0eUlERXlOaTR3TXpRc056UXVOalEzSURFeU5TNDJNRFlzTnpZdU1EZ3lJRXd4TVRrdU1UUTJMRGszTGpjd09TQkRNVEU1TGpFek55dzVOeTQzTXpnZ01URTVMakV4T0N3NU55NDNOaklnTVRFNUxqQTVNaXc1Tnk0M056Y2dURGt4TGpjM0xERXhNeTQxTlRFZ1F6a3hMamMxTWl3eE1UTXVOVFl4SURreExqY3pNaXd4TVRNdU5UWTNJRGt4TGpjeE1pd3hNVE11TlRZM0lFdzVNUzQzTVRJc01URXpMalUyTnlCYUlFMDVNUzQ0TWprc05qSXVOalEzSUV3NU1TNDRNamtzTVRFekxqSTBPQ0JNTVRFNExqa3pOU3c1Tnk0MU9UZ2dUREV5TlM0ek9ESXNOell1TURFMUlFTXhNalV1T0RJM0xEYzBMalV5TlNBeE1qWXVOalkwTERjekxqQTRNU0F4TWpjdU56TTVMRGN4TGprMUlFTXhNamd1T1RFNUxEY3dMamN3T0NBeE16QXVNalUyTERZNUxqazVOaUF4TXpFdU5EQTRMRFk1TGprNU5pQkRNVE15TGpNM055dzJPUzQ1T1RZZ01UTXpMakV6T1N3M01DNDBPVGNnTVRNekxqVTFOQ3czTVM0ME1EY2dUREV6T1M0NU5qRXNPRFV1TkRVNElFd3hOamN1TVRFekxEWTVMamM0TWlCTU1UWTNMakV4TXl3eE9TNHhPREVnVERreExqZ3lPU3cyTWk0Mk5EY2dURGt4TGpneU9TdzJNaTQyTkRjZ1dpSWdhV1E5SWtacGJHd3RNVFFpSUdacGJHdzlJaU0yTURkRU9FSWlQand2Y0dGMGFENEtJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0E4Y0dGMGFDQmtQU0pOTVRZNExqVTBNeXd4T1M0eU1UTWdUREUyT0M0MU5ETXNOekF1TURneklFd3hOREV1TWpJeExEZzFMamcxTnlCTU1UTTBMamMyTVN3M01TNDJPRGtnUXpFek15NDROVEVzTmprdU5qazBJREV6TVM0ek16TXNOamt1T1RVeElERXlPUzR4TXpjc056SXVNall6SUVNeE1qZ3VNRGd5TERjekxqTTNOQ0F4TWpjdU1qUTBMRGMwTGpneE9TQXhNall1T0RBM0xEYzJMakk0TWlCTU1USXdMak0wTml3NU55NDVNRGtnVERrekxqQXlOU3d4TVRNdU5qZ3pJRXc1TXk0d01qVXNOakl1T0RFeklFd3hOamd1TlRRekxERTVMakl4TXlJZ2FXUTlJa1pwYkd3dE1UVWlJR1pwYkd3OUlpTkdSa1pHUmtZaVBqd3ZjR0YwYUQ0S0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQThjR0YwYUNCa1BTSk5PVE11TURJMUxERXhNeTQ0SUVNNU15NHdNRFVzTVRFekxqZ2dPVEl1T1RnMExERXhNeTQzT1RVZ09USXVPVFkyTERFeE15NDNPRFVnUXpreUxqa3pNU3d4TVRNdU56WTBJRGt5TGprd09Dd3hNVE11TnpJMUlEa3lMamt3T0N3eE1UTXVOamcwSUV3NU1pNDVNRGdzTmpJdU9ERXpJRU01TWk0NU1EZ3NOakl1TnpjeElEa3lMamt6TVN3Mk1pNDNNek1nT1RJdU9UWTJMRFl5TGpjeE1pQk1NVFk0TGpRNE5Dd3hPUzR4TVRJZ1F6RTJPQzQxTWl3eE9TNHdPU0F4TmpndU5UWTFMREU1TGpBNUlERTJPQzQyTURFc01Ua3VNVEV5SUVNeE5qZ3VOak0zTERFNUxqRXpNaUF4TmpndU5qWXNNVGt1TVRjeElERTJPQzQyTml3eE9TNHlNVElnVERFMk9DNDJOaXczTUM0d09ETWdRekUyT0M0Mk5pdzNNQzR4TWpVZ01UWTRMall6Tnl3M01DNHhOalFnTVRZNExqWXdNU3czTUM0eE9EUWdUREUwTVM0eU9DdzROUzQ1TlRnZ1F6RTBNUzR5TlRFc09EVXVPVGMxSURFME1TNHlNVGNzT0RVdU9UYzVJREUwTVM0eE9EWXNPRFV1T1RZNElFTXhOREV1TVRVMExEZzFMamsxT0NBeE5ERXVNVEk1TERnMUxqa3pOaUF4TkRFdU1URTFMRGcxTGprd05pQk1NVE0wTGpZMU5TdzNNUzQzTXpnZ1F6RXpOQzR5T0N3M01DNDVNVFVnTVRNekxqVTVNeXczTUM0ME5qTWdNVE15TGpjeUxEY3dMalEyTXlCRE1UTXhMall6TWl3M01DNDBOak1nTVRNd0xqTTFOeXczTVM0eE5EZ2dNVEk1TGpJeU1TdzNNaTR6TkRRZ1F6RXlPQzR4T0RZc056TXVORE16SURFeU55NHpORGNzTnpRdU9EZ3hJREV5Tmk0NU1Ua3NOell1TXpFMUlFd3hNakF1TkRVNExEazNMamswTXlCRE1USXdMalExTERrM0xqazNNaUF4TWpBdU5ETXhMRGszTGprNU5pQXhNakF1TkRBMUxEazRMakF4SUV3NU15NHdPRE1zTVRFekxqYzROU0JET1RNdU1EWTFMREV4TXk0M09UVWdPVE11TURRMUxERXhNeTQ0SURrekxqQXlOU3d4TVRNdU9DQk1PVE11TURJMUxERXhNeTQ0SUZvZ1RUa3pMakUwTWl3Mk1pNDRPREVnVERrekxqRTBNaXd4TVRNdU5EZ3hJRXd4TWpBdU1qUTRMRGszTGpnek1pQk1NVEkyTGpZNU5TdzNOaTR5TkRnZ1F6RXlOeTR4TkN3M05DNDNOVGdnTVRJM0xqazNOeXczTXk0ek1UVWdNVEk1TGpBMU1pdzNNaTR4T0RNZ1F6RXpNQzR5TXpFc056QXVPVFF5SURFek1TNDFOamdzTnpBdU1qSTVJREV6TWk0M01pdzNNQzR5TWprZ1F6RXpNeTQyT0Rrc056QXVNakk1SURFek5DNDBOVElzTnpBdU56TXhJREV6TkM0NE5qY3NOekV1TmpReElFd3hOREV1TWpjMExEZzFMalk1TWlCTU1UWTRMalF5Tml3M01DNHdNVFlnVERFMk9DNDBNallzTVRrdU5ERTFJRXc1TXk0eE5ESXNOakl1T0RneElFdzVNeTR4TkRJc05qSXVPRGd4SUZvaUlHbGtQU0pHYVd4c0xURTJJaUJtYVd4c1BTSWpOakEzUkRoQ0lqNDhMM0JoZEdnK0NpQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdQSEJoZEdnZ1pEMGlUVEUyT1M0NExEY3dMakE0TXlCTU1UUXlMalEzT0N3NE5TNDROVGNnVERFek5pNHdNVGdzTnpFdU5qZzVJRU14TXpVdU1UQTRMRFk1TGpZNU5DQXhNekl1TlRrc05qa3VPVFV4SURFek1DNHpPVE1zTnpJdU1qWXpJRU14TWprdU16TTVMRGN6TGpNM05DQXhNamd1TlN3M05DNDRNVGtnTVRJNExqQTJOQ3czTmk0eU9ESWdUREV5TVM0Mk1ETXNPVGN1T1RBNUlFdzVOQzR5T0RJc01URXpMalk0TXlCTU9UUXVNamd5TERZeUxqZ3hNeUJNTVRZNUxqZ3NNVGt1TWpFeklFd3hOamt1T0N3M01DNHdPRE1nV2lJZ2FXUTlJa1pwYkd3dE1UY2lJR1pwYkd3OUlpTkdRVVpCUmtFaVBqd3ZjR0YwYUQ0S0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQThjR0YwYUNCa1BTSk5PVFF1TWpneUxERXhNeTQ1TVRjZ1F6azBMakkwTVN3eE1UTXVPVEUzSURrMExqSXdNU3d4TVRNdU9UQTNJRGswTGpFMk5Td3hNVE11T0RnMklFTTVOQzR3T1RNc01URXpMamcwTlNBNU5DNHdORGdzTVRFekxqYzJOeUE1TkM0d05EZ3NNVEV6TGpZNE5DQk1PVFF1TURRNExEWXlMamd4TXlCRE9UUXVNRFE0TERZeUxqY3pJRGswTGpBNU15dzJNaTQyTlRJZ09UUXVNVFkxTERZeUxqWXhNU0JNTVRZNUxqWTRNeXd4T1M0d01TQkRNVFk1TGpjMU5Td3hPQzQ1TmprZ01UWTVMamcwTkN3eE9DNDVOamtnTVRZNUxqa3hOeXd4T1M0d01TQkRNVFk1TGprNE9Td3hPUzR3TlRJZ01UY3dMakF6TXl3eE9TNHhNamtnTVRjd0xqQXpNeXd4T1M0eU1USWdUREUzTUM0d016TXNOekF1TURneklFTXhOekF1TURNekxEY3dMakUyTmlBeE5qa3VPVGc1TERjd0xqSTBOQ0F4TmprdU9URTNMRGN3TGpJNE5TQk1NVFF5TGpVNU5TdzROaTR3TmlCRE1UUXlMalV6T0N3NE5pNHdPVElnTVRReUxqUTJPU3c0Tmk0eElERTBNaTQwTURjc09EWXVNRGdnUXpFME1pNHpORFFzT0RZdU1EWWdNVFF5TGpJNU15dzROaTR3TVRRZ01UUXlMakkyTml3NE5TNDVOVFFnVERFek5TNDRNRFVzTnpFdU56ZzJJRU14TXpVdU5EUTFMRGN3TGprNU55QXhNelF1T0RFekxEY3dMalU0SURFek15NDVOemNzTnpBdU5UZ2dRekV6TWk0NU1qRXNOekF1TlRnZ01UTXhMalkzTml3M01TNHlOVElnTVRNd0xqVTJNaXczTWk0ME1qUWdRekV5T1M0MU5DdzNNeTQxTURFZ01USTRMamN4TVN3M05DNDVNekVnTVRJNExqSTROeXczTmk0ek5EZ2dUREV5TVM0NE1qY3NPVGN1T1RjMklFTXhNakV1T0RFc09UZ3VNRE0wSURFeU1TNDNOekVzT1RndU1EZ3lJREV5TVM0M01pdzVPQzR4TVRJZ1REazBMak01T0N3eE1UTXVPRGcySUVNNU5DNHpOaklzTVRFekxqa3dOeUE1TkM0ek1qSXNNVEV6TGpreE55QTVOQzR5T0RJc01URXpMamt4TnlCTU9UUXVNamd5TERFeE15NDVNVGNnV2lCTk9UUXVOVEUxTERZeUxqazBPQ0JNT1RRdU5URTFMREV4TXk0eU56a2dUREV5TVM0ME1EWXNPVGN1TnpVMElFd3hNamN1T0RRc056WXVNakUxSUVNeE1qZ3VNamtzTnpRdU56QTRJREV5T1M0eE16Y3NOek11TWpRM0lERXpNQzR5TWpRc056SXVNVEF6SUVNeE16RXVOREkxTERjd0xqZ3pPQ0F4TXpJdU56a3pMRGN3TGpFeE1pQXhNek11T1RjM0xEY3dMakV4TWlCRE1UTTBMams1TlN3M01DNHhNVElnTVRNMUxqYzVOU3czTUM0Mk16Z2dNVE0yTGpJekxEY3hMalU1TWlCTU1UUXlMalU0TkN3NE5TNDFNallnVERFMk9TNDFOallzTmprdU9UUTRJRXd4TmprdU5UWTJMREU1TGpZeE55Qk1PVFF1TlRFMUxEWXlMamswT0NCTU9UUXVOVEUxTERZeUxqazBPQ0JhSWlCcFpEMGlSbWxzYkMweE9DSWdabWxzYkQwaUl6WXdOMFE0UWlJK1BDOXdZWFJvUGdvZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lEeHdZWFJvSUdROUlrMHhNRGt1T0RrMExEa3lMamswTXlCTU1UQTVMamc1TkN3NU1pNDVORE1nUXpFd09DNHhNaXc1TWk0NU5ETWdNVEEyTGpZMU15dzVNaTR5TVRnZ01UQTFMalkxTERrd0xqZ3lNeUJETVRBMUxqVTRNeXc1TUM0M016RWdNVEExTGpVNU15dzVNQzQyTVNBeE1EVXVOamN6TERrd0xqVXlPU0JETVRBMUxqYzFNeXc1TUM0ME5EZ2dNVEExTGpnNExEa3dMalEwSURFd05TNDVOelFzT1RBdU5UQTJJRU14TURZdU56VTBMRGt4TGpBMU15QXhNRGN1TmpjNUxEa3hMak16TXlBeE1EZ3VOekkwTERreExqTXpNeUJETVRFd0xqQTBOeXc1TVM0ek16TWdNVEV4TGpRM09DdzVNQzQ0T1RRZ01URXlMams0TERrd0xqQXlOeUJETVRFNExqSTVNU3c0Tmk0NU5pQXhNakl1TmpFeExEYzVMalV3T1NBeE1qSXVOakV4TERjekxqUXhOaUJETVRJeUxqWXhNU3czTVM0ME9Ea2dNVEl5TGpFMk9TdzJPUzQ0TlRZZ01USXhMak16TXl3Mk9DNDJPVElnUXpFeU1TNHlOallzTmpndU5pQXhNakV1TWpjMkxEWTRMalEzTXlBeE1qRXVNelUyTERZNExqTTVNaUJETVRJeExqUXpOaXcyT0M0ek1URWdNVEl4TGpVMk15dzJPQzR5T1RrZ01USXhMalkxTml3Mk9DNHpOalVnUXpFeU15NHpNamNzTmprdU5UTTNJREV5TkM0eU5EY3NOekV1TnpRMklERXlOQzR5TkRjc056UXVOVGcwSUVNeE1qUXVNalEzTERnd0xqZ3lOaUF4TVRrdU9ESXhMRGc0TGpRME55QXhNVFF1TXpneUxEa3hMalU0TnlCRE1URXlMamd3T0N3NU1pNDBPVFVnTVRFeExqSTVPQ3c1TWk0NU5ETWdNVEE1TGpnNU5DdzVNaTQ1TkRNZ1RERXdPUzQ0T1RRc09USXVPVFF6SUZvZ1RURXdOaTQ1TWpVc09URXVOREF4SUVNeE1EY3VOek00TERreUxqQTFNaUF4TURndU56UTFMRGt5TGpJM09DQXhNRGt1T0RrekxEa3lMakkzT0NCTU1UQTVMamc1TkN3NU1pNHlOemdnUXpFeE1TNHlNVFVzT1RJdU1qYzRJREV4TWk0Mk5EY3NPVEV1T1RVeElERXhOQzR4TkRnc09URXVNRGcwSUVNeE1Ua3VORFU1TERnNExqQXhOeUF4TWpNdU56Z3NPREF1TmpJeElERXlNeTQzT0N3M05DNDFNamdnUXpFeU15NDNPQ3czTWk0MU5Ea2dNVEl6TGpNeE55dzNNQzQ1TWprZ01USXlMalExTkN3Mk9TNDNOamNnUXpFeU1pNDROalVzTnpBdU9EQXlJREV5TXk0d056a3NOekl1TURReUlERXlNeTR3Tnprc056TXVOREF5SUVNeE1qTXVNRGM1TERjNUxqWTBOU0F4TVRndU5qVXpMRGczTGpJNE5TQXhNVE11TWpFMExEa3dMalF5TlNCRE1URXhMalkwTERreExqTXpOQ0F4TVRBdU1UTXNPVEV1TnpReUlERXdPQzQzTWpRc09URXVOelF5SUVNeE1EZ3VNRGd6TERreExqYzBNaUF4TURjdU5EZ3hMRGt4TGpVNU15QXhNRFl1T1RJMUxEa3hMalF3TVNCTU1UQTJMamt5TlN3NU1TNDBNREVnV2lJZ2FXUTlJa1pwYkd3dE1Ua2lJR1pwYkd3OUlpTTJNRGRFT0VJaVBqd3ZjR0YwYUQ0S0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQThjR0YwYUNCa1BTSk5NVEV6TGpBNU55dzVNQzR5TXlCRE1URTRMalE0TVN3NE55NHhNaklnTVRJeUxqZzBOU3czT1M0MU9UUWdNVEl5TGpnME5TdzNNeTQwTVRZZ1F6RXlNaTQ0TkRVc056RXVNelkxSURFeU1pNHpOaklzTmprdU56STBJREV5TVM0MU1qSXNOamd1TlRVMklFTXhNVGt1TnpNNExEWTNMak13TkNBeE1UY3VNVFE0TERZM0xqTTJNaUF4TVRRdU1qWTFMRFk1TGpBeU5pQkRNVEE0TGpnNE1TdzNNaTR4TXpRZ01UQTBMalV4Tnl3M09TNDJOaklnTVRBMExqVXhOeXc0TlM0NE5DQkRNVEEwTGpVeE55dzROeTQ0T1RFZ01UQTFMRGc1TGpVek1pQXhNRFV1T0RRc09UQXVOeUJETVRBM0xqWXlOQ3c1TVM0NU5USWdNVEV3TGpJeE5DdzVNUzQ0T1RRZ01URXpMakE1Tnl3NU1DNHlNeUlnYVdROUlrWnBiR3d0TWpBaUlHWnBiR3c5SWlOR1FVWkJSa0VpUGp3dmNHRjBhRDRLSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBOGNHRjBhQ0JrUFNKTk1UQTRMamN5TkN3NU1TNDJNVFFnVERFd09DNDNNalFzT1RFdU5qRTBJRU14TURjdU5UZ3lMRGt4TGpZeE5DQXhNRFl1TlRZMkxEa3hMalF3TVNBeE1EVXVOekExTERrd0xqYzVOeUJETVRBMUxqWTROQ3c1TUM0M09ETWdNVEExTGpZMk5TdzVNQzQ0TVRFZ01UQTFMalkxTERrd0xqYzVJRU14TURRdU56VTJMRGc1TGpVME5pQXhNRFF1TWpnekxEZzNMamcwTWlBeE1EUXVNamd6TERnMUxqZ3hOeUJETVRBMExqSTRNeXczT1M0MU56VWdNVEE0TGpjd09TdzNNUzQ1TlRNZ01URTBMakUwT0N3Mk9DNDRNVElnUXpFeE5TNDNNaklzTmpjdU9UQTBJREV4Tnk0eU16SXNOamN1TkRRNUlERXhPQzQyTXpnc05qY3VORFE1SUVNeE1Ua3VOemdzTmpjdU5EUTVJREV5TUM0M09UWXNOamN1TnpVNElERXlNUzQyTlRZc05qZ3VNell5SUVNeE1qRXVOamM0TERZNExqTTNOeUF4TWpFdU5qazNMRFk0TGpNNU55QXhNakV1TnpFeUxEWTRMalF4T0NCRE1USXlMall3Tml3Mk9TNDJOaklnTVRJekxqQTNPU3czTVM0ek9TQXhNak11TURjNUxEY3pMalF4TlNCRE1USXpMakEzT1N3M09TNDJOVGdnTVRFNExqWTFNeXc0Tnk0eE9UZ2dNVEV6TGpJeE5DdzVNQzR6TXpnZ1F6RXhNUzQyTkN3NU1TNHlORGNnTVRFd0xqRXpMRGt4TGpZeE5DQXhNRGd1TnpJMExEa3hMall4TkNCTU1UQTRMamN5TkN3NU1TNDJNVFFnV2lCTk1UQTJMakF3Tml3NU1DNDFNRFVnUXpFd05pNDNPQ3c1TVM0d016Y2dNVEEzTGpZNU5DdzVNUzR5T0RFZ01UQTRMamN5TkN3NU1TNHlPREVnUXpFeE1DNHdORGNzT1RFdU1qZ3hJREV4TVM0ME56Z3NPVEF1T0RZNElERXhNaTQ1T0N3NU1DNHdNREVnUXpFeE9DNHlPVEVzT0RZdU9UTTFJREV5TWk0Mk1URXNOemt1TkRrMklERXlNaTQyTVRFc056TXVOREF6SUVNeE1qSXVOakV4TERjeExqUTVOQ0F4TWpJdU1UYzNMRFk1TGpnNElERXlNUzR6TlRZc05qZ3VOekU0SUVNeE1qQXVOVGd5TERZNExqRTROU0F4TVRrdU5qWTRMRFkzTGpreE9TQXhNVGd1TmpNNExEWTNMamt4T1NCRE1URTNMak14TlN3Mk55NDVNVGtnTVRFMUxqZzRNeXcyT0M0ek5pQXhNVFF1TXpneUxEWTVMakl5TnlCRE1UQTVMakEzTVN3M01pNHlPVE1nTVRBMExqYzFNU3czT1M0M016TWdNVEEwTGpjMU1TdzROUzQ0TWpZZ1F6RXdOQzQzTlRFc09EY3VOek0xSURFd05TNHhPRFVzT0RrdU16UXpJREV3Tmk0d01EWXNPVEF1TlRBMUlFd3hNRFl1TURBMkxEa3dMalV3TlNCYUlpQnBaRDBpUm1sc2JDMHlNU0lnWm1sc2JEMGlJell3TjBRNFFpSStQQzl3WVhSb1Bnb2dJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJRHh3WVhSb0lHUTlJazB4TkRrdU16RTRMRGN1TWpZeUlFd3hNemt1TXpNMExERTJMakUwSUV3eE5UVXVNakkzTERJM0xqRTNNU0JNTVRZd0xqZ3hOaXd5TVM0d05Ua2dUREUwT1M0ek1UZ3NOeTR5TmpJaUlHbGtQU0pHYVd4c0xUSXlJaUJtYVd4c1BTSWpSa0ZHUVVaQklqNDhMM0JoZEdnK0NpQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdQSEJoZEdnZ1pEMGlUVEUyT1M0Mk56WXNNVE11T0RRZ1RERTFPUzQ1TWpnc01Ua3VORFkzSUVNeE5UWXVNamcyTERJeExqVTNJREUxTUM0MExESXhMalU0SURFME5pNDNPREVzTVRrdU5Ea3hJRU14TkRNdU1UWXhMREUzTGpRd01pQXhORE11TVRnc01UUXVNREF6SURFME5pNDRNaklzTVRFdU9TQk1NVFUyTGpNeE55dzJMakk1TWlCTU1UUTVMalU0T0N3eUxqUXdOeUJNTmpjdU56VXlMRFE1TGpRM09DQk1NVEV6TGpZM05TdzNOUzQ1T1RJZ1RERXhOaTQzTlRZc056UXVNakV6SUVNeE1UY3VNemczTERjekxqZzBPQ0F4TVRjdU5qSTFMRGN6TGpNeE5TQXhNVGN1TXpjMExEY3lMamd5TXlCRE1URTFMakF4Tnl3Mk9DNHhPVEVnTVRFMExqYzRNU3cyTXk0eU56Y2dNVEUyTGpZNU1TdzFPQzQxTmpFZ1F6RXlNaTR6TWprc05EUXVOalF4SURFME1TNHlMRE16TGpjME5pQXhOalV1TXpBNUxETXdMalE1TVNCRE1UY3pMalEzT0N3eU9TNHpPRGdnTVRneExqazRPU3d5T1M0MU1qUWdNVGt3TGpBeE15d3pNQzQ0T0RVZ1F6RTVNQzQ0TmpVc016RXVNRE1nTVRreExqYzRPU3d6TUM0NE9UTWdNVGt5TGpReUxETXdMalV5T0NCTU1UazFMalV3TVN3eU9DNDNOU0JNTVRZNUxqWTNOaXd4TXk0NE5DSWdhV1E5SWtacGJHd3RNak1pSUdacGJHdzlJaU5HUVVaQlJrRWlQand2Y0dGMGFENEtJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0E4Y0dGMGFDQmtQU0pOTVRFekxqWTNOU3czTmk0ME5Ua2dRekV4TXk0MU9UUXNOell1TkRVNUlERXhNeTQxTVRRc056WXVORE00SURFeE15NDBORElzTnpZdU16azNJRXcyTnk0MU1UZ3NORGt1T0RneUlFTTJOeTR6TnpRc05Ea3VOems1SURZM0xqSTROQ3cwT1M0Mk5EVWdOamN1TWpnMUxEUTVMalEzT0NCRE5qY3VNamcxTERRNUxqTXhNU0EyTnk0ek56UXNORGt1TVRVM0lEWTNMalV4T1N3ME9TNHdOek1nVERFME9TNHpOVFVzTWk0d01ESWdRekUwT1M0ME9Ua3NNUzQ1TVRrZ01UUTVMalkzTnl3eExqa3hPU0F4TkRrdU9ESXhMREl1TURBeUlFd3hOVFl1TlRVc05TNDRPRGNnUXpFMU5pNDNOelFzTmk0d01UY2dNVFUyTGpnMUxEWXVNekF5SURFMU5pNDNNaklzTmk0MU1qWWdRekUxTmk0MU9USXNOaTQzTkRrZ01UVTJMak13Tnl3MkxqZ3lOaUF4TlRZdU1EZ3pMRFl1TmprMklFd3hORGt1TlRnM0xESXVPVFEySUV3Mk9DNDJPRGNzTkRrdU5EYzVJRXd4TVRNdU5qYzFMRGMxTGpRMU1pQk1NVEUyTGpVeU15dzNNeTQ0TURnZ1F6RXhOaTQzTVRVc056TXVOamszSURFeE55NHhORE1zTnpNdU16azVJREV4Tmk0NU5UZ3NOek11TURNMUlFTXhNVFF1TlRReUxEWTRMakk0TnlBeE1UUXVNeXcyTXk0eU1qRWdNVEUyTGpJMU9DdzFPQzR6T0RVZ1F6RXhPUzR3TmpRc05URXVORFU0SURFeU5TNHhORE1zTkRVdU1UUXpJREV6TXk0NE5DdzBNQzR4TWpJZ1F6RTBNaTQwT1Rjc016VXVNVEkwSURFMU15NHpOVGdzTXpFdU5qTXpJREUyTlM0eU5EY3NNekF1TURJNElFTXhOek11TkRRMUxESTRMamt5TVNBeE9ESXVNRE0zTERJNUxqQTFPQ0F4T1RBdU1Ea3hMRE13TGpReU5TQkRNVGt3TGpnekxETXdMalUxSURFNU1TNDJOVElzTXpBdU5ETXlJREU1TWk0eE9EWXNNekF1TVRJMElFd3hPVFF1TlRZM0xESTRMamMxSUV3eE5qa3VORFF5TERFMExqSTBOQ0JETVRZNUxqSXhPU3d4TkM0eE1UVWdNVFk1TGpFME1pd3hNeTQ0TWprZ01UWTVMakkzTVN3eE15NDJNRFlnUXpFMk9TNDBMREV6TGpNNE1pQXhOamt1TmpnMUxERXpMak13TmlBeE5qa3VPVEE1TERFekxqUXpOU0JNTVRrMUxqY3pOQ3d5T0M0ek5EVWdRekU1TlM0NE56a3NNamd1TkRJNElERTVOUzQ1Tmpnc01qZ3VOVGd6SURFNU5TNDVOamdzTWpndU56VWdRekU1TlM0NU5qZ3NNamd1T1RFMklERTVOUzQ0Tnprc01qa3VNRGN4SURFNU5TNDNNelFzTWprdU1UVTBJRXd4T1RJdU5qVXpMRE13TGprek15QkRNVGt4TGprek1pd3pNUzR6TlNBeE9UQXVPRGtzTXpFdU5UQTRJREU0T1M0NU16VXNNekV1TXpRMklFTXhPREV1T1RjeUxESTVMams1TlNBeE56TXVORGM0TERJNUxqZzJJREUyTlM0ek56SXNNekF1T1RVMElFTXhOVE11TmpBeUxETXlMalUwTXlBeE5ESXVPRFlzTXpVdU9Ua3pJREV6TkM0ek1EY3NOREF1T1RNeElFTXhNalV1TnprekxEUTFMamcwTnlBeE1Ua3VPRFV4TERVeUxqQXdOQ0F4TVRjdU1USTBMRFU0TGpjek5pQkRNVEUxTGpJM0xEWXpMak14TkNBeE1UVXVOVEF4TERZNExqRXhNaUF4TVRjdU56a3NOekl1TmpFeElFTXhNVGd1TVRZc056TXVNek0ySURFeE55NDRORFVzTnpRdU1USTBJREV4Tmk0NU9TdzNOQzQyTVRjZ1RERXhNeTQ1TURrc056WXVNemszSUVNeE1UTXVPRE0yTERjMkxqUXpPQ0F4TVRNdU56VTJMRGMyTGpRMU9TQXhNVE11TmpjMUxEYzJMalExT1NJZ2FXUTlJa1pwYkd3dE1qUWlJR1pwYkd3OUlpTTBOVFZCTmpRaVBqd3ZjR0YwYUQ0S0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQThjR0YwYUNCa1BTSk5NVFV6TGpNeE5pd3lNUzR5TnprZ1F6RTFNQzQ1TURNc01qRXVNamM1SURFME9DNDBPVFVzTWpBdU56VXhJREUwTmk0Mk5qUXNNVGt1TmpreklFTXhORFF1T0RRMkxERTRMalkwTkNBeE5ETXVPRFEwTERFM0xqSXpNaUF4TkRNdU9EUTBMREUxTGpjeE9DQkRNVFF6TGpnME5Dd3hOQzR4T1RFZ01UUTBMamcyTERFeUxqYzJNeUF4TkRZdU56QTFMREV4TGpZNU9DQk1NVFUyTGpFNU9DdzJMakE1TVNCRE1UVTJMak13T1N3MkxqQXlOU0F4TlRZdU5EVXlMRFl1TURZeUlERTFOaTQxTVRnc05pNHhOek1nUXpFMU5pNDFPRE1zTmk0eU9EUWdNVFUyTGpVME55dzJMalF5TnlBeE5UWXVORE0yTERZdU5Ea3pJRXd4TkRZdU9UUXNNVEl1TVRBeUlFTXhORFV1TWpRMExERXpMakE0TVNBeE5EUXVNekV5TERFMExqTTJOU0F4TkRRdU16RXlMREUxTGpjeE9DQkRNVFEwTGpNeE1pd3hOeTR3TlRnZ01UUTFMakl6TERFNExqTXlOaUF4TkRZdU9EazNMREU1TGpJNE9TQkRNVFV3TGpRME5pd3lNUzR6TXpnZ01UVTJMakkwTERJeExqTXlOeUF4TlRrdU9ERXhMREU1TGpJMk5TQk1NVFk1TGpVMU9Td3hNeTQyTXpjZ1F6RTJPUzQyTnl3eE15NDFOek1nTVRZNUxqZ3hNeXd4TXk0Mk1URWdNVFk1TGpnM09Dd3hNeTQzTWpNZ1F6RTJPUzQ1TkRNc01UTXVPRE0wSURFMk9TNDVNRFFzTVRNdU9UYzNJREUyT1M0M09UTXNNVFF1TURReUlFd3hOakF1TURRMUxERTVMalkzSUVNeE5UZ3VNVGczTERJd0xqYzBNaUF4TlRVdU56UTVMREl4TGpJM09TQXhOVE11TXpFMkxESXhMakkzT1NJZ2FXUTlJa1pwYkd3dE1qVWlJR1pwYkd3OUlpTTJNRGRFT0VJaVBqd3ZjR0YwYUQ0S0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQThjR0YwYUNCa1BTSk5NVEV6TGpZM05TdzNOUzQ1T1RJZ1REWTNMamMyTWl3ME9TNDBPRFFpSUdsa1BTSkdhV3hzTFRJMklpQm1hV3hzUFNJak5EVTFRVFkwSWo0OEwzQmhkR2crQ2lBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ1BIQmhkR2dnWkQwaVRURXhNeTQyTnpVc056WXVNelF5SUVNeE1UTXVOakUxTERjMkxqTTBNaUF4TVRNdU5UVTFMRGMyTGpNeU55QXhNVE11TlN3M05pNHlPVFVnVERZM0xqVTROeXcwT1M0M09EY2dRelkzTGpReE9TdzBPUzQyT1NBMk55NHpOaklzTkRrdU5EYzJJRFkzTGpRMU9TdzBPUzR6TURrZ1F6WTNMalUxTml3ME9TNHhOREVnTmpjdU56Y3NORGt1TURneklEWTNMamt6Tnl3ME9TNHhPQ0JNTVRFekxqZzFMRGMxTGpZNE9DQkRNVEUwTGpBeE9DdzNOUzQzT0RVZ01URTBMakEzTlN3M05pQXhNVE11T1RjNExEYzJMakUyTnlCRE1URXpMamt4TkN3M05pNHlOemtnTVRFekxqYzVOaXczTmk0ek5ESWdNVEV6TGpZM05TdzNOaTR6TkRJaUlHbGtQU0pHYVd4c0xUSTNJaUJtYVd4c1BTSWpORFUxUVRZMElqNDhMM0JoZEdnK0NpQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdQSEJoZEdnZ1pEMGlUVFkzTGpjMk1pdzBPUzQwT0RRZ1REWTNMamMyTWl3eE1ETXVORGcxSUVNMk55NDNOaklzTVRBMExqVTNOU0EyT0M0MU16SXNNVEExTGprd015QTJPUzQwT0RJc01UQTJMalExTWlCTU1URXhMamsxTlN3eE16QXVPVGN6SUVNeE1USXVPVEExTERFek1TNDFNaklnTVRFekxqWTNOU3d4TXpFdU1EZ3pJREV4TXk0Mk56VXNNVEk1TGprNU15Qk1NVEV6TGpZM05TdzNOUzQ1T1RJaUlHbGtQU0pHYVd4c0xUSTRJaUJtYVd4c1BTSWpSa0ZHUVVaQklqNDhMM0JoZEdnK0NpQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdQSEJoZEdnZ1pEMGlUVEV4TWk0M01qY3NNVE14TGpVMk1TQkRNVEV5TGpRekxERXpNUzQxTmpFZ01URXlMakV3Tnl3eE16RXVORFkySURFeE1TNDNPQ3d4TXpFdU1qYzJJRXcyT1M0ek1EY3NNVEEyTGpjMU5TQkROamd1TWpRMExERXdOaTR4TkRJZ05qY3VOREV5TERFd05DNDNNRFVnTmpjdU5ERXlMREV3TXk0ME9EVWdURFkzTGpReE1pdzBPUzQwT0RRZ1F6WTNMalF4TWl3ME9TNHlPU0EyTnk0MU5qa3NORGt1TVRNMElEWTNMamMyTWl3ME9TNHhNelFnUXpZM0xqazFOaXcwT1M0eE16UWdOamd1TVRFekxEUTVMakk1SURZNExqRXhNeXcwT1M0ME9EUWdURFk0TGpFeE15d3hNRE11TkRnMUlFTTJPQzR4TVRNc01UQTBMalEwTlNBMk9DNDRNaXd4TURVdU5qWTFJRFk1TGpZMU55d3hNRFl1TVRRNElFd3hNVEl1TVRNc01UTXdMalkzSUVNeE1USXVORGMwTERFek1DNDROamdnTVRFeUxqYzVNU3d4TXpBdU9URXpJREV4TXl3eE16QXVOemt5SUVNeE1UTXVNakEyTERFek1DNDJOek1nTVRFekxqTXlOU3d4TXpBdU16Z3hJREV4TXk0ek1qVXNNVEk1TGprNU15Qk1NVEV6TGpNeU5TdzNOUzQ1T1RJZ1F6RXhNeTR6TWpVc056VXVOems0SURFeE15NDBPRElzTnpVdU5qUXhJREV4TXk0Mk56VXNOelV1TmpReElFTXhNVE11T0RZNUxEYzFMalkwTVNBeE1UUXVNREkxTERjMUxqYzVPQ0F4TVRRdU1ESTFMRGMxTGprNU1pQk1NVEUwTGpBeU5Td3hNamt1T1RreklFTXhNVFF1TURJMUxERXpNQzQyTkRnZ01URXpMamM0Tml3eE16RXVNVFEzSURFeE15NHpOU3d4TXpFdU16azVJRU14TVRNdU1UWXlMREV6TVM0MU1EY2dNVEV5TGprMU1pd3hNekV1TlRZeElERXhNaTQzTWpjc01UTXhMalUyTVNJZ2FXUTlJa1pwYkd3dE1qa2lJR1pwYkd3OUlpTTBOVFZCTmpRaVBqd3ZjR0YwYUQ0S0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQThjR0YwYUNCa1BTSk5NVEV5TGpnMkxEUXdMalV4TWlCRE1URXlMamcyTERRd0xqVXhNaUF4TVRJdU9EWXNOREF1TlRFeUlERXhNaTQ0TlRrc05EQXVOVEV5SUVNeE1UQXVOVFF4TERRd0xqVXhNaUF4TURndU16WXNNemt1T1RrZ01UQTJMamN4Tnl3ek9TNHdOREVnUXpFd05TNHdNVElzTXpndU1EVTNJREV3TkM0d056UXNNell1TnpJMklERXdOQzR3TnpRc016VXVNamt5SUVNeE1EUXVNRGMwTERNekxqZzBOeUF4TURVdU1ESTJMRE15TGpVd01TQXhNRFl1TnpVMExETXhMalV3TkNCTU1URTRMamM1TlN3eU5DNDFOVEVnUXpFeU1DNDBOak1zTWpNdU5UZzVJREV5TWk0Mk5qa3NNak11TURVNElERXlOUzR3TURjc01qTXVNRFU0SUVNeE1qY3VNekkxTERJekxqQTFPQ0F4TWprdU5UQTJMREl6TGpVNE1TQXhNekV1TVRVc01qUXVOVE1nUXpFek1pNDROVFFzTWpVdU5URTBJREV6TXk0M09UTXNNall1T0RRMUlERXpNeTQzT1RNc01qZ3VNamM0SUVNeE16TXVOemt6TERJNUxqY3lOQ0F4TXpJdU9EUXhMRE14TGpBMk9TQXhNekV1TVRFekxETXlMakEyTnlCTU1URTVMakEzTVN3ek9TNHdNVGtnUXpFeE55NDBNRE1zTXprdU9UZ3lJREV4TlM0eE9UY3NOREF1TlRFeUlERXhNaTQ0Tml3ME1DNDFNVElnVERFeE1pNDROaXcwTUM0MU1USWdXaUJOTVRJMUxqQXdOeXd5TXk0M05Ua2dRekV5TWk0M09Td3lNeTQzTlRrZ01USXdMamN3T1N3eU5DNHlOVFlnTVRFNUxqRTBOaXd5TlM0eE5UZ2dUREV3Tnk0eE1EUXNNekl1TVRFZ1F6RXdOUzQyTURJc016SXVPVGM0SURFd05DNDNOelFzTXpRdU1UQTRJREV3TkM0M056UXNNelV1TWpreUlFTXhNRFF1TnpjMExETTJMalEyTlNBeE1EVXVOVGc1TERNM0xqVTRNU0F4TURjdU1EWTNMRE00TGpRek5DQkRNVEE0TGpZd05Td3pPUzR6TWpNZ01URXdMalkyTXl3ek9TNDRNVElnTVRFeUxqZzFPU3d6T1M0NE1USWdUREV4TWk0NE5pd3pPUzQ0TVRJZ1F6RXhOUzR3TnpZc016a3VPREV5SURFeE55NHhOVGdzTXprdU16RTFJREV4T0M0M01qRXNNemd1TkRFeklFd3hNekF1TnpZeUxETXhMalEySUVNeE16SXVNalkwTERNd0xqVTVNeUF4TXpNdU1Ea3lMREk1TGpRMk15QXhNek11TURreUxESTRMakkzT0NCRE1UTXpMakE1TWl3eU55NHhNRFlnTVRNeUxqSTNPQ3d5TlM0NU9TQXhNekF1T0N3eU5TNHhNellnUXpFeU9TNHlOakVzTWpRdU1qUTRJREV5Tnk0eU1EUXNNak11TnpVNUlERXlOUzR3TURjc01qTXVOelU1SUV3eE1qVXVNREEzTERJekxqYzFPU0JhSWlCcFpEMGlSbWxzYkMwek1DSWdabWxzYkQwaUl6WXdOMFE0UWlJK1BDOXdZWFJvUGdvZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lEeHdZWFJvSUdROUlrMHhOalV1TmpNc01UWXVNakU1SUV3eE5Ua3VPRGsyTERFNUxqVXpJRU14TlRZdU56STVMREl4TGpNMU9DQXhOVEV1TmpFc01qRXVNelkzSURFME9DNDBOak1zTVRrdU5UVWdRekUwTlM0ek1UWXNNVGN1TnpNeklERTBOUzR6TXpJc01UUXVOemM0SURFME9DNDBPVGtzTVRJdU9UUTVJRXd4TlRRdU1qTXpMRGt1TmpNNUlFd3hOalV1TmpNc01UWXVNakU1SWlCcFpEMGlSbWxzYkMwek1TSWdabWxzYkQwaUkwWkJSa0ZHUVNJK1BDOXdZWFJvUGdvZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lEeHdZWFJvSUdROUlrMHhOVFF1TWpNekxERXdMalEwT0NCTU1UWTBMakl5T0N3eE5pNHlNVGtnVERFMU9TNDFORFlzTVRndU9USXpJRU14TlRndU1URXlMREU1TGpjMUlERTFOaTR4T1RRc01qQXVNakEySURFMU5DNHhORGNzTWpBdU1qQTJJRU14TlRJdU1URTRMREl3TGpJd05pQXhOVEF1TWpJMExERTVMamMxTnlBeE5EZ3VPREUwTERFNExqazBNeUJETVRRM0xqVXlOQ3d4T0M0eE9Ua2dNVFEyTGpneE5Dd3hOeTR5TkRrZ01UUTJMamd4TkN3eE5pNHlOamtnUXpFME5pNDRNVFFzTVRVdU1qYzRJREUwTnk0MU16Y3NNVFF1TXpFMElERTBPQzQ0TlN3eE15NDFOVFlnVERFMU5DNHlNek1zTVRBdU5EUTRJRTB4TlRRdU1qTXpMRGt1TmpNNUlFd3hORGd1TkRrNUxERXlMamswT1NCRE1UUTFMak16TWl3eE5DNDNOemdnTVRRMUxqTXhOaXd4Tnk0M016TWdNVFE0TGpRMk15d3hPUzQxTlNCRE1UVXdMakF6TVN3eU1DNDBOVFVnTVRVeUxqQTROaXd5TUM0NU1EY2dNVFUwTGpFME55d3lNQzQ1TURjZ1F6RTFOaTR5TWpRc01qQXVPVEEzSURFMU9DNHpNRFlzTWpBdU5EUTNJREUxT1M0NE9UWXNNVGt1TlRNZ1RERTJOUzQyTXl3eE5pNHlNVGtnVERFMU5DNHlNek1zT1M0Mk16a2lJR2xrUFNKR2FXeHNMVE15SWlCbWFXeHNQU0lqTmpBM1JEaENJajQ4TDNCaGRHZytDaUFnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnUEhCaGRHZ2daRDBpVFRFME5TNDBORFVzTnpJdU5qWTNJRXd4TkRVdU5EUTFMRGN5TGpZMk55QkRNVFF6TGpZM01pdzNNaTQyTmpjZ01UUXlMakl3TkN3M01TNDRNVGNnTVRReExqSXdNaXczTUM0ME1qSWdRekUwTVM0eE16VXNOekF1TXpNZ01UUXhMakUwTlN3M01DNHhORGNnTVRReExqSXlOU3czTUM0d05qWWdRekUwTVM0ek1EVXNOamt1T1RnMUlERTBNUzQwTXpJc05qa3VPVFEySURFME1TNDFNalVzTnpBdU1ERXhJRU14TkRJdU16QTJMRGN3TGpVMU9TQXhORE11TWpNeExEY3dMamd5TXlBeE5EUXVNamMyTERjd0xqZ3lNaUJETVRRMUxqVTVPQ3czTUM0NE1qSWdNVFEzTGpBekxEY3dMak0zTmlBeE5EZ3VOVE15TERZNUxqVXdPU0JETVRVekxqZzBNaXcyTmk0ME5ETWdNVFU0TGpFMk15dzFPQzQ1T0RjZ01UVTRMakUyTXl3MU1pNDRPVFFnUXpFMU9DNHhOak1zTlRBdU9UWTNJREUxTnk0M01qRXNORGt1TXpNeUlERTFOaTQ0T0RRc05EZ3VNVFk0SUVNeE5UWXVPREU0TERRNExqQTNOaUF4TlRZdU9ESTRMRFEzTGprME9DQXhOVFl1T1RBNExEUTNMamcyTnlCRE1UVTJMams0T0N3ME55NDNPRFlnTVRVM0xqRXhOQ3cwTnk0M056UWdNVFUzTGpJd09DdzBOeTQ0TkNCRE1UVTRMamczT0N3ME9TNHdNVElnTVRVNUxqYzVPQ3cxTVM0eU1pQXhOVGt1TnprNExEVTBMakExT1NCRE1UVTVMamM1T0N3Mk1DNHpNREVnTVRVMUxqTTNNeXcyT0M0d05EWWdNVFE1TGprek15dzNNUzR4T0RZZ1F6RTBPQzR6Tml3M01pNHdPVFFnTVRRMkxqZzFMRGN5TGpZMk55QXhORFV1TkRRMUxEY3lMalkyTnlCTU1UUTFMalEwTlN3M01pNDJOamNnV2lCTk1UUXlMalEzTml3M01TQkRNVFF6TGpJNUxEY3hMalkxTVNBeE5EUXVNamsyTERjeUxqQXdNaUF4TkRVdU5EUTFMRGN5TGpBd01pQkRNVFEyTGpjMk55dzNNaTR3TURJZ01UUTRMakU1T0N3M01TNDFOU0F4TkRrdU55dzNNQzQyT0RJZ1F6RTFOUzR3TVN3Mk55NDJNVGNnTVRVNUxqTXpNU3cyTUM0eE5Ua2dNVFU1TGpNek1TdzFOQzR3TmpVZ1F6RTFPUzR6TXpFc05USXVNRGcxSURFMU9DNDROamdzTlRBdU5ETTFJREUxT0M0d01EWXNORGt1TWpjeUlFTXhOVGd1TkRFM0xEVXdMak13TnlBeE5UZ3VOak1zTlRFdU5UTXlJREUxT0M0Mk15dzFNaTQ0T1RJZ1F6RTFPQzQyTXl3MU9TNHhNelFnTVRVMExqSXdOU3cyTmk0M05qY2dNVFE0TGpjMk5TdzJPUzQ1TURjZ1F6RTBOeTR4T1RJc056QXVPREUySURFME5TNDJPREVzTnpFdU1qZ3pJREUwTkM0eU56WXNOekV1TWpneklFTXhORE11TmpNMExEY3hMakk0TXlBeE5ETXVNRE16TERjeExqRTVNaUF4TkRJdU5EYzJMRGN4SUV3eE5ESXVORGMyTERjeElGb2lJR2xrUFNKR2FXeHNMVE16SWlCbWFXeHNQU0lqTmpBM1JEaENJajQ4TDNCaGRHZytDaUFnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnUEhCaGRHZ2daRDBpVFRFME9DNDJORGdzTmprdU56QTBJRU14TlRRdU1ETXlMRFkyTGpVNU5pQXhOVGd1TXprMkxEVTVMakEyT0NBeE5UZ3VNemsyTERVeUxqZzVNU0JETVRVNExqTTVOaXcxTUM0NE16a2dNVFUzTGpreE15dzBPUzR4T1RnZ01UVTNMakEzTkN3ME9DNHdNeUJETVRVMUxqSTRPU3cwTmk0M056Z2dNVFV5TGpZNU9TdzBOaTQ0TXpZZ01UUTVMamd4Tml3ME9DNDFNREVnUXpFME5DNDBNek1zTlRFdU5qQTVJREUwTUM0d05qZ3NOVGt1TVRNM0lERTBNQzR3Tmpnc05qVXVNekUwSUVNeE5EQXVNRFk0TERZM0xqTTJOU0F4TkRBdU5UVXlMRFk1TGpBd05pQXhOREV1TXpreExEY3dMakUzTkNCRE1UUXpMakUzTml3M01TNDBNamNnTVRRMUxqYzJOU3czTVM0ek5qa2dNVFE0TGpZME9DdzJPUzQzTURRaUlHbGtQU0pHYVd4c0xUTTBJaUJtYVd4c1BTSWpSa0ZHUVVaQklqNDhMM0JoZEdnK0NpQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdQSEJoZEdnZ1pEMGlUVEUwTkM0eU56WXNOekV1TWpjMklFd3hORFF1TWpjMkxEY3hMakkzTmlCRE1UUXpMakV6TXl3M01TNHlOellnTVRReUxqRXhPQ3czTUM0NU5qa2dNVFF4TGpJMU55dzNNQzR6TmpVZ1F6RTBNUzR5TXpZc056QXVNelV4SURFME1TNHlNVGNzTnpBdU16TXlJREUwTVM0eU1ESXNOekF1TXpFeElFTXhOREF1TXpBM0xEWTVMakEyTnlBeE16a3VPRE0xTERZM0xqTXpPU0F4TXprdU9ETTFMRFkxTGpNeE5DQkRNVE01TGpnek5TdzFPUzR3TnpNZ01UUTBMakkyTERVeExqUXpPU0F4TkRrdU55dzBPQzR5T1RnZ1F6RTFNUzR5TnpNc05EY3VNemtnTVRVeUxqYzROQ3cwTmk0NU1qa2dNVFUwTGpFNE9TdzBOaTQ1TWprZ1F6RTFOUzR6TXpJc05EWXVPVEk1SURFMU5pNHpORGNzTkRjdU1qTTJJREUxTnk0eU1EZ3NORGN1T0RNNUlFTXhOVGN1TWpJNUxEUTNMamcxTkNBeE5UY3VNalE0TERRM0xqZzNNeUF4TlRjdU1qWXpMRFEzTGpnNU5DQkRNVFU0TGpFMU55dzBPUzR4TXpnZ01UVTRMall6TERVd0xqZzJOU0F4TlRndU5qTXNOVEl1T0RreElFTXhOVGd1TmpNc05Ua3VNVE15SURFMU5DNHlNRFVzTmpZdU56WTJJREUwT0M0M05qVXNOamt1T1RBM0lFTXhORGN1TVRreUxEY3dMamd4TlNBeE5EVXVOamd4TERjeExqSTNOaUF4TkRRdU1qYzJMRGN4TGpJM05pQk1NVFEwTGpJM05pdzNNUzR5TnpZZ1dpQk5NVFF4TGpVMU9DdzNNQzR4TURRZ1F6RTBNaTR6TXpFc056QXVOak0zSURFME15NHlORFVzTnpFdU1EQTFJREUwTkM0eU56WXNOekV1TURBMUlFTXhORFV1TlRrNExEY3hMakF3TlNBeE5EY3VNRE1zTnpBdU5EWTNJREUwT0M0MU16SXNOamt1TmlCRE1UVXpMamcwTWl3Mk5pNDFNelFnTVRVNExqRTJNeXcxT1M0d016TWdNVFU0TGpFMk15dzFNaTQ1TXprZ1F6RTFPQzR4TmpNc05URXVNRE14SURFMU55NDNNamtzTkRrdU16ZzFJREUxTmk0NU1EY3NORGd1TWpJeklFTXhOVFl1TVRNekxEUTNMalk1TVNBeE5UVXVNakU1TERRM0xqUXdPU0F4TlRRdU1UZzVMRFEzTGpRd09TQkRNVFV5TGpnMk55dzBOeTQwTURrZ01UVXhMalF6TlN3ME55NDRORElnTVRRNUxqa3pNeXcwT0M0M01Ea2dRekUwTkM0Mk1qTXNOVEV1TnpjMUlERTBNQzR6TURJc05Ua3VNamN6SURFME1DNHpNRElzTmpVdU16WTJJRU14TkRBdU16QXlMRFkzTGpJM05pQXhOREF1TnpNMkxEWTRMamswTWlBeE5ERXVOVFU0TERjd0xqRXdOQ0JNTVRReExqVTFPQ3czTUM0eE1EUWdXaUlnYVdROUlrWnBiR3d0TXpVaUlHWnBiR3c5SWlNMk1EZEVPRUlpUGp3dmNHRjBhRDRLSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBOGNHRjBhQ0JrUFNKTk1UVXdMamN5TERZMUxqTTJNU0JNTVRVd0xqTTFOeXcyTlM0d05qWWdRekUxTVM0eE5EY3NOalF1TURreUlERTFNUzQ0Tmprc05qTXVNRFFnTVRVeUxqVXdOU3cyTVM0NU16Z2dRekUxTXk0ek1UTXNOakF1TlRNNUlERTFNeTQ1Tnpnc05Ua3VNRFkzSURFMU5DNDBPRElzTlRjdU5UWXpJRXd4TlRRdU9USTFMRFUzTGpjeE1pQkRNVFUwTGpReE1pdzFPUzR5TkRVZ01UVXpMamN6TXl3Mk1DNDNORFVnTVRVeUxqa3hMRFl5TGpFM01pQkRNVFV5TGpJMk1pdzJNeTR5T1RVZ01UVXhMalV5TlN3Mk5DNHpOamdnTVRVd0xqY3lMRFkxTGpNMk1TSWdhV1E5SWtacGJHd3RNellpSUdacGJHdzlJaU0yTURkRU9FSWlQand2Y0dGMGFENEtJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0E4Y0dGMGFDQmtQU0pOTVRFMUxqa3hOeXc0TkM0MU1UUWdUREV4TlM0MU5UUXNPRFF1TWpJZ1F6RXhOaTR6TkRRc09ETXVNalExSURFeE55NHdOallzT0RJdU1UazBJREV4Tnk0M01ESXNPREV1TURreUlFTXhNVGd1TlRFc056a3VOamt5SURFeE9TNHhOelVzTnpndU1qSWdNVEU1TGpZM09DdzNOaTQzTVRjZ1RERXlNQzR4TWpFc056WXVPRFkxSUVNeE1Ua3VOakE0TERjNExqTTVPQ0F4TVRndU9UTXNOemt1T0RrNUlERXhPQzR4TURZc09ERXVNekkySUVNeE1UY3VORFU0TERneUxqUTBPQ0F4TVRZdU56SXlMRGd6TGpVeU1TQXhNVFV1T1RFM0xEZzBMalV4TkNJZ2FXUTlJa1pwYkd3dE16Y2lJR1pwYkd3OUlpTTJNRGRFT0VJaVBqd3ZjR0YwYUQ0S0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQThjR0YwYUNCa1BTSk5NVEUwTERFek1DNDBOellnVERFeE5Dd3hNekF1TURBNElFd3hNVFFzTnpZdU1EVXlJRXd4TVRRc056VXVOVGcwSUV3eE1UUXNOell1TURVeUlFd3hNVFFzTVRNd0xqQXdPQ0JNTVRFMExERXpNQzQwTnpZaUlHbGtQU0pHYVd4c0xUTTRJaUJtYVd4c1BTSWpOakEzUkRoQ0lqNDhMM0JoZEdnK0NpQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBOEwyYytDaUFnSUNBZ0lDQWdJQ0FnSUNBZ0lDQThaeUJwWkQwaVNXMXdiM0owWldRdFRHRjVaWEp6TFVOdmNIa2lJSFJ5WVc1elptOXliVDBpZEhKaGJuTnNZWFJsS0RZeUxqQXdNREF3TUN3Z01DNHdNREF3TURBcElpQnphMlYwWTJnNmRIbHdaVDBpVFZOVGFHRndaVWR5YjNWd0lqNEtJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0E4Y0dGMGFDQmtQU0pOTVRrdU9ESXlMRE0zTGpRM05DQkRNVGt1T0RNNUxETTNMak16T1NBeE9TNDNORGNzTXpjdU1UazBJREU1TGpVMU5Td3pOeTR3T0RJZ1F6RTVMakl5T0N3ek5pNDRPVFFnTVRndU56STVMRE0yTGpnM01pQXhPQzQwTkRZc016Y3VNRE0zSUV3eE1pNDBNelFzTkRBdU5UQTRJRU14TWk0ek1ETXNOREF1TlRnMElERXlMakkwTERRd0xqWTROaUF4TWk0eU5ETXNOREF1TnpreklFTXhNaTR5TkRVc05EQXVPVEkxSURFeUxqSTBOU3cwTVM0eU5UUWdNVEl1TWpRMUxEUXhMak0zTVNCTU1USXVNalExTERReExqUXhOQ0JNTVRJdU1qTTRMRFF4TGpVME1pQkRPQzR4TkRnc05ETXVPRGczSURVdU5qUTNMRFExTGpNeU1TQTFMalkwTnl3ME5TNHpNakVnUXpVdU5qUTJMRFExTGpNeU1TQXpMalUzTERRMkxqTTJOeUF5TGpnMkxEVXdMalV4TXlCRE1pNDROaXcxTUM0MU1UTWdNUzQ1TkRnc05UY3VORGMwSURFdU9UWXlMRGN3TGpJMU9DQkRNUzQ1Tnpjc09ESXVPREk0SURJdU5UWTRMRGczTGpNeU9DQXpMakV5T1N3NU1TNDJNRGtnUXpNdU16UTVMRGt6TGpJNU15QTJMakV6TERrekxqY3pOQ0EyTGpFekxEa3pMamN6TkNCRE5pNDBOakVzT1RNdU56YzBJRFl1T0RJNExEa3pMamN3TnlBM0xqSXhMRGt6TGpRNE5pQk1PREl1TkRnekxEUTVMamt6TlNCRE9EUXVNamt4TERRNExqZzJOaUE0TlM0eE5TdzBOaTR5TVRZZ09EVXVOVE01TERRekxqWTFNU0JET0RZdU56VXlMRE0xTGpZMk1TQTROeTR5TVRRc01UQXVOamN6SURnMUxqSTJOQ3d6TGpjM015QkRPRFV1TURZNExETXVNRGdnT0RRdU56VTBMREl1TmprZ09EUXVNemsyTERJdU5Ea3hJRXc0TWk0ek1Td3hMamN3TVNCRE9ERXVOVGd6TERFdU56STVJRGd3TGpnNU5Dd3lMakUyT0NBNE1DNDNOellzTWk0eU16WWdRemd3TGpZek5pd3lMak14TnlBME1TNDRNRGNzTWpRdU5UZzFJREl3TGpBek1pd3pOeTR3TnpJZ1RERTVMamd5TWl3ek55NDBOelFpSUdsa1BTSkdhV3hzTFRFaUlHWnBiR3c5SWlOR1JrWkdSa1lpUGp3dmNHRjBhRDRLSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBOGNHRjBhQ0JrUFNKTk9ESXVNekV4TERFdU56QXhJRXc0TkM0ek9UWXNNaTQwT1RFZ1F6ZzBMamMxTkN3eUxqWTVJRGcxTGpBMk9Dd3pMakE0SURnMUxqSTJOQ3d6TGpjM015QkRPRGN1TWpFekxERXdMalkzTXlBNE5pNDNOVEVzTXpVdU5qWWdPRFV1TlRNNUxEUXpMalkxTVNCRE9EVXVNVFE1TERRMkxqSXhOaUE0TkM0eU9TdzBPQzQ0TmpZZ09ESXVORGd6TERRNUxqa3pOU0JNTnk0eU1TdzVNeTQwT0RZZ1F6WXVPRGszTERrekxqWTJOeUEyTGpVNU5TdzVNeTQzTkRRZ05pNHpNVFFzT1RNdU56UTBJRXcyTGpFek1TdzVNeTQzTXpNZ1F6WXVNVE14TERrekxqY3pOQ0F6TGpNME9TdzVNeTR5T1RNZ015NHhNamdzT1RFdU5qQTVJRU15TGpVMk9DdzROeTR6TWpjZ01TNDVOemNzT0RJdU9ESTRJREV1T1RZekxEY3dMakkxT0NCRE1TNDVORGdzTlRjdU5EYzBJREl1T0RZc05UQXVOVEV6SURJdU9EWXNOVEF1TlRFeklFTXpMalUzTERRMkxqTTJOeUExTGpZME55dzBOUzR6TWpFZ05TNDJORGNzTkRVdU16SXhJRU0xTGpZME55dzBOUzR6TWpFZ09DNHhORGdzTkRNdU9EZzNJREV5TGpJek9DdzBNUzQxTkRJZ1RERXlMakkwTlN3ME1TNDBNVFFnVERFeUxqSTBOU3cwTVM0ek56RWdRekV5TGpJME5TdzBNUzR5TlRRZ01USXVNalExTERRd0xqa3lOU0F4TWk0eU5ETXNOREF1TnpreklFTXhNaTR5TkN3ME1DNDJPRFlnTVRJdU16QXlMRFF3TGpVNE15QXhNaTQwTXpRc05EQXVOVEE0SUV3eE9DNDBORFlzTXpjdU1ETTJJRU14T0M0MU56UXNNell1T1RZeUlERTRMamMwTml3ek5pNDVNallnTVRndU9USTNMRE0yTGpreU5pQkRNVGt1TVRRMUxETTJMamt5TmlBeE9TNHpOellzTXpZdU9UYzVJREU1TGpVMU5Dd3pOeTR3T0RJZ1F6RTVMamMwTnl3ek55NHhPVFFnTVRrdU9ETTVMRE0zTGpNMElERTVMamd5TWl3ek55NDBOelFnVERJd0xqQXpNeXd6Tnk0d056SWdRelF4TGpnd05pd3lOQzQxT0RVZ09EQXVOak0yTERJdU16RTRJRGd3TGpjM055d3lMakl6TmlCRE9EQXVPRGswTERJdU1UWTRJRGd4TGpVNE15d3hMamN5T1NBNE1pNHpNVEVzTVM0M01ERWdUVGd5TGpNeE1Td3dMamN3TkNCTU9ESXVNamN5TERBdU56QTFJRU00TVM0Mk5UUXNNQzQzTWpnZ09EQXVPVGc1TERBdU9UUTVJRGd3TGpJNU9Dd3hMak0yTVNCTU9EQXVNamMzTERFdU16Y3pJRU00TUM0eE1qa3NNUzQwTlRnZ05Ua3VOelk0TERFekxqRXpOU0F4T1M0M05UZ3NNell1TURjNUlFTXhPUzQxTERNMUxqazRNU0F4T1M0eU1UUXNNelV1T1RJNUlERTRMamt5Tnl3ek5TNDVNamtnUXpFNExqVTJNaXd6TlM0NU1qa2dNVGd1TWpJekxETTJMakF4TXlBeE55NDVORGNzTXpZdU1UY3pJRXd4TVM0NU16VXNNemt1TmpRMElFTXhNUzQwT1RNc016a3VPRGs1SURFeExqSXpOaXcwTUM0ek16UWdNVEV1TWpRMkxEUXdMamd4SUV3eE1TNHlORGNzTkRBdU9UWWdURFV1TVRZM0xEUTBMalEwTnlCRE5DNDNPVFFzTkRRdU5qUTJJREl1TmpJMUxEUTFMamszT0NBeExqZzNOeXcxTUM0ek5EVWdUREV1T0RjeExEVXdMak00TkNCRE1TNDROaklzTlRBdU5EVTBJREF1T1RVeExEVTNMalUxTnlBd0xqazJOU3czTUM0eU5Ua2dRekF1T1RjNUxEZ3lMamczT1NBeExqVTJPQ3c0Tnk0ek56VWdNaTR4TXpjc09URXVOekkwSUV3eUxqRXpPU3c1TVM0M016a2dRekl1TkRRM0xEazBMakE1TkNBMUxqWXhOQ3c1TkM0Mk5qSWdOUzQ1TnpVc09UUXVOekU1SUV3MkxqQXdPU3c1TkM0M01qTWdRell1TVRFc09UUXVOek0ySURZdU1qRXpMRGswTGpjME1pQTJMak14TkN3NU5DNDNORElnUXpZdU56a3NPVFF1TnpReUlEY3VNallzT1RRdU5qRWdOeTQzTVN3NU5DNHpOU0JNT0RJdU9UZ3pMRFV3TGpjNU9DQkRPRFF1TnprMExEUTVMamN5TnlBNE5TNDVPRElzTkRjdU16YzFJRGcyTGpVeU5TdzBNeTQ0TURFZ1F6ZzNMamN4TVN3ek5TNDVPRGNnT0RndU1qVTVMREV3TGpjd05TQTROaTR5TWpRc015NDFNRElnUXpnMUxqazNNU3d5TGpZd09TQTROUzQxTWl3eExqazNOU0E0TkM0NE9ERXNNUzQyTWlCTU9EUXVOelE1TERFdU5UVTRJRXc0TWk0Mk5qUXNNQzQzTmprZ1F6Z3lMalUxTVN3d0xqY3lOU0E0TWk0ME16RXNNQzQzTURRZ09ESXVNekV4TERBdU56QTBJaUJwWkQwaVJtbHNiQzB5SWlCbWFXeHNQU0lqTkRVMVFUWTBJajQ4TDNCaGRHZytDaUFnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnUEhCaGRHZ2daRDBpVFRZMkxqSTJOeXd4TVM0MU5qVWdURFkzTGpjMk1pd3hNUzQ1T1RrZ1RERXhMalF5TXl3ME5DNHpNalVpSUdsa1BTSkdhV3hzTFRNaUlHWnBiR3c5SWlOR1JrWkdSa1lpUGp3dmNHRjBhRDRLSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBOGNHRjBhQ0JrUFNKTk1USXVNakF5TERrd0xqVTBOU0JETVRJdU1ESTVMRGt3TGpVME5TQXhNUzQ0TmpJc09UQXVORFUxSURFeExqYzJPU3c1TUM0eU9UVWdRekV4TGpZek1pdzVNQzR3TlRjZ01URXVOekV6TERnNUxqYzFNaUF4TVM0NU5USXNPRGt1TmpFMElFd3pNQzR6T0Rrc056Z3VPVFk1SUVNek1DNDJNamdzTnpndU9ETXhJRE13TGprek15dzNPQzQ1TVRNZ016RXVNRGN4TERjNUxqRTFNaUJETXpFdU1qQTRMRGM1TGpNNUlETXhMakV5Tnl3M09TNDJPVFlnTXpBdU9EZzRMRGM1TGpnek15Qk1NVEl1TkRVeExEa3dMalEzT0NCTU1USXVNakF5TERrd0xqVTBOU0lnYVdROUlrWnBiR3d0TkNJZ1ptbHNiRDBpSXpZd04wUTRRaUkrUEM5d1lYUm9QZ29nSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUR4d1lYUm9JR1E5SWsweE15NDNOalFzTkRJdU5qVTBJRXd4TXk0Mk5UWXNOREl1TlRreUlFd3hNeTQzTURJc05ESXVOREl4SUV3eE9DNDRNemNzTXprdU5EVTNJRXd4T1M0d01EY3NNemt1TlRBeUlFd3hPQzQ1TmpJc016a3VOamN6SUV3eE15NDRNamNzTkRJdU5qTTNJRXd4TXk0M05qUXNOREl1TmpVMElpQnBaRDBpUm1sc2JDMDFJaUJtYVd4c1BTSWpOakEzUkRoQ0lqNDhMM0JoZEdnK0NpQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdQSEJoZEdnZ1pEMGlUVGd1TlRJc09UQXVNemMxSUV3NExqVXlMRFEyTGpReU1TQk1PQzQxT0RNc05EWXVNemcxSUV3M05TNDROQ3czTGpVMU5DQk1OelV1T0RRc05URXVOVEE0SUV3M05TNDNOemdzTlRFdU5UUTBJRXc0TGpVeUxEa3dMak0zTlNCTU9DNDFNaXc1TUM0ek56VWdXaUJOT0M0M055dzBOaTQxTmpRZ1REZ3VOemNzT0RrdU9UUTBJRXczTlM0MU9URXNOVEV1TXpZMUlFdzNOUzQxT1RFc055NDVPRFVnVERndU56Y3NORFl1TlRZMElFdzRMamMzTERRMkxqVTJOQ0JhSWlCcFpEMGlSbWxzYkMwMklpQm1hV3hzUFNJak5qQTNSRGhDSWo0OEwzQmhkR2crQ2lBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ1BIQmhkR2dnWkQwaVRUSTBMams0Tml3NE15NHhPRElnUXpJMExqYzFOaXc0TXk0ek16RWdNalF1TXpjMExEZ3pMalUyTmlBeU5DNHhNemNzT0RNdU56QTFJRXd4TWk0Mk16SXNPVEF1TkRBMklFTXhNaTR6T1RVc09UQXVOVFExSURFeUxqUXlOaXc1TUM0Mk5UZ2dNVEl1Tnl3NU1DNDJOVGdnVERFekxqSTJOU3c1TUM0Mk5UZ2dRekV6TGpVMExEa3dMalkxT0NBeE15NDVOVGdzT1RBdU5UUTFJREUwTGpFNU5TdzVNQzQwTURZZ1RESTFMamNzT0RNdU56QTFJRU15TlM0NU16Y3NPRE11TlRZMklESTJMakV5T0N3NE15NDBOVElnTWpZdU1USTFMRGd6TGpRME9TQkRNall1TVRJeUxEZ3pMalEwTnlBeU5pNHhNVGtzT0RNdU1qSWdNall1TVRFNUxEZ3lMamswTmlCRE1qWXVNVEU1TERneUxqWTNNaUF5TlM0NU16RXNPREl1TlRZNUlESTFMamN3TVN3NE1pNDNNVGtnVERJMExqazROaXc0TXk0eE9ESWlJR2xrUFNKR2FXeHNMVGNpSUdacGJHdzlJaU0yTURkRU9FSWlQand2Y0dGMGFENEtJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0E4Y0dGMGFDQmtQU0pOTVRNdU1qWTJMRGt3TGpjNE1pQk1NVEl1Tnl3NU1DNDNPRElnUXpFeUxqVXNPVEF1TnpneUlERXlMak00TkN3NU1DNDNNallnTVRJdU16VTBMRGt3TGpZeE5pQkRNVEl1TXpJMExEa3dMalV3TmlBeE1pNHpPVGNzT1RBdU16azVJREV5TGpVMk9TdzVNQzR5T1RrZ1RESTBMakEzTkN3NE15NDFPVGNnUXpJMExqTXhMRGd6TGpRMU9TQXlOQzQyT0Rrc09ETXVNakkySURJMExqa3hPQ3c0TXk0d056Z2dUREkxTGpZek15dzRNaTQyTVRRZ1F6STFMamN5TXl3NE1pNDFOVFVnTWpVdU9ERXpMRGd5TGpVeU5TQXlOUzQ0T1Rrc09ESXVOVEkxSUVNeU5pNHdOekVzT0RJdU5USTFJREkyTGpJME5DdzRNaTQyTlRVZ01qWXVNalEwTERneUxqazBOaUJETWpZdU1qUTBMRGd6TGpFMklESTJMakkwTlN3NE15NHpNRGtnTWpZdU1qUTNMRGd6TGpNNE15Qk1Nall1TWpVekxEZ3pMak00TnlCTU1qWXVNalE1TERnekxqUTFOaUJETWpZdU1qUTJMRGd6TGpVek1TQXlOaTR5TkRZc09ETXVOVE14SURJMUxqYzJNeXc0TXk0NE1USWdUREUwTGpJMU9DdzVNQzQxTVRRZ1F6RTBMRGt3TGpZMk5TQXhNeTQxTmpRc09UQXVOemd5SURFekxqSTJOaXc1TUM0M09ESWdUREV6TGpJMk5pdzVNQzQzT0RJZ1dpQk5NVEl1TmpZMkxEa3dMalV6TWlCTU1USXVOeXc1TUM0MU16TWdUREV6TGpJMk5pdzVNQzQxTXpNZ1F6RXpMalV4T0N3NU1DNDFNek1nTVRNdU9URTFMRGt3TGpReU5TQXhOQzR4TXpJc09UQXVNams1SUV3eU5TNDJNemNzT0RNdU5UazNJRU15TlM0NE1EVXNPRE11TkRrNUlESTFMamt6TVN3NE15NDBNalFnTWpVdU9UazRMRGd6TGpNNE15QkRNalV1T1RrMExEZ3pMakk1T1NBeU5TNDVPVFFzT0RNdU1UWTFJREkxTGprNU5DdzRNaTQ1TkRZZ1RESTFMamc1T1N3NE1pNDNOelVnVERJMUxqYzJPQ3c0TWk0NE1qUWdUREkxTGpBMU5DdzRNeTR5T0RjZ1F6STBMamd5TWl3NE15NDBNemNnTWpRdU5ETTRMRGd6TGpZM015QXlOQzR5TERnekxqZ3hNaUJNTVRJdU5qazFMRGt3TGpVeE5DQk1NVEl1TmpZMkxEa3dMalV6TWlCTU1USXVOalkyTERrd0xqVXpNaUJhSWlCcFpEMGlSbWxzYkMwNElpQm1hV3hzUFNJak5qQTNSRGhDSWo0OEwzQmhkR2crQ2lBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ1BIQmhkR2dnWkQwaVRURXpMakkyTml3NE9TNDROekVnVERFeUxqY3NPRGt1T0RjeElFTXhNaTQxTERnNUxqZzNNU0F4TWk0ek9EUXNPRGt1T0RFMUlERXlMak0xTkN3NE9TNDNNRFVnUXpFeUxqTXlOQ3c0T1M0MU9UVWdNVEl1TXprM0xEZzVMalE0T0NBeE1pNDFOamtzT0RrdU16ZzRJRXd5TkM0d056UXNPREl1TmpnMklFTXlOQzR6TXpJc09ESXVOVE0xSURJMExqYzJPQ3c0TWk0ME1UZ2dNalV1TURZM0xEZ3lMalF4T0NCTU1qVXVOak15TERneUxqUXhPQ0JETWpVdU9ETXlMRGd5TGpReE9DQXlOUzQ1TkRnc09ESXVORGMwSURJMUxqazNPQ3c0TWk0MU9EUWdRekkyTGpBd09DdzRNaTQyT1RRZ01qVXVPVE0xTERneUxqZ3dNU0F5TlM0M05qTXNPREl1T1RBeElFd3hOQzR5TlRnc09Ea3VOakF6SUVNeE5DdzRPUzQzTlRRZ01UTXVOVFkwTERnNUxqZzNNU0F4TXk0eU5qWXNPRGt1T0RjeElFd3hNeTR5TmpZc09Ea3VPRGN4SUZvZ1RURXlMalkyTml3NE9TNDJNakVnVERFeUxqY3NPRGt1TmpJeUlFd3hNeTR5TmpZc09Ea3VOakl5SUVNeE15NDFNVGdzT0RrdU5qSXlJREV6TGpreE5TdzRPUzQxTVRVZ01UUXVNVE15TERnNUxqTTRPQ0JNTWpVdU5qTTNMRGd5TGpZNE5pQk1NalV1TmpZM0xEZ3lMalkyT0NCTU1qVXVOak15TERneUxqWTJOeUJNTWpVdU1EWTNMRGd5TGpZMk55QkRNalF1T0RFMUxEZ3lMalkyTnlBeU5DNDBNVGdzT0RJdU56YzFJREkwTGpJc09ESXVPVEF4SUV3eE1pNDJPVFVzT0RrdU5qQXpJRXd4TWk0Mk5qWXNPRGt1TmpJeElFd3hNaTQyTmpZc09Ea3VOakl4SUZvaUlHbGtQU0pHYVd4c0xUa2lJR1pwYkd3OUlpTTJNRGRFT0VJaVBqd3ZjR0YwYUQ0S0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQThjR0YwYUNCa1BTSk5NVEl1TXpjc09UQXVPREF4SUV3eE1pNHpOeXc0T1M0MU5UUWdUREV5TGpNM0xEa3dMamd3TVNJZ2FXUTlJa1pwYkd3dE1UQWlJR1pwYkd3OUlpTTJNRGRFT0VJaVBqd3ZjR0YwYUQ0S0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQThjR0YwYUNCa1BTSk5OaTR4TXl3NU15NDVNREVnUXpVdU16YzVMRGt6TGpnd09DQTBMamd4Tml3NU15NHhOalFnTkM0Mk9URXNPVEl1TlRJMUlFTXpMamcyTERnNExqSTROeUF6TGpVMExEZ3pMamMwTXlBekxqVXlOaXczTVM0eE56TWdRek11TlRFeExEVTRMak00T1NBMExqUXlNeXcxTVM0ME1qZ2dOQzQwTWpNc05URXVOREk0SUVNMUxqRXpOQ3cwTnk0eU9ESWdOeTR5TVN3ME5pNHlNellnTnk0eU1TdzBOaTR5TXpZZ1F6Y3VNakVzTkRZdU1qTTJJRGd4TGpZMk55d3pMakkxSURneUxqQTJPU3d6TGpBeE55QkRPREl1TWpreUxESXVPRGc0SURnMExqVTFOaXd4TGpRek15QTROUzR5TmpRc015NDVOQ0JET0RjdU1qRTBMREV3TGpnMElEZzJMamMxTWl3ek5TNDRNamNnT0RVdU5UTTVMRFF6TGpneE9DQkRPRFV1TVRVc05EWXVNemd6SURnMExqSTVNU3cwT1M0d016TWdPREl1TkRnekxEVXdMakV3TVNCTU55NHlNU3c1TXk0Mk5UTWdRell1T0RJNExEa3pMamczTkNBMkxqUTJNU3c1TXk0NU5ERWdOaTR4TXl3NU15NDVNREVnUXpZdU1UTXNPVE11T1RBeElETXVNelE1TERrekxqUTJJRE11TVRJNUxEa3hMamMzTmlCRE1pNDFOamdzT0RjdU5EazFJREV1T1RjM0xEZ3lMams1TlNBeExqazJNaXczTUM0ME1qVWdRekV1T1RRNExEVTNMalkwTVNBeUxqZzJMRFV3TGpZNElESXVPRFlzTlRBdU5qZ2dRek11TlRjc05EWXVOVE0wSURVdU5qUTNMRFExTGpRNE9TQTFMalkwTnl3ME5TNDBPRGtnUXpVdU5qUTJMRFExTGpRNE9TQTRMakEyTlN3ME5DNHdPVElnTVRJdU1qUTFMRFF4TGpZM09TQk1NVE11TVRFMkxEUXhMalUySUV3eE9TNDNNVFVzTXpjdU56TWdUREU1TGpjMk1Td3pOeTR5TmprZ1REWXVNVE1zT1RNdU9UQXhJaUJwWkQwaVJtbHNiQzB4TVNJZ1ptbHNiRDBpSTBaQlJrRkdRU0krUEM5d1lYUm9QZ29nSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUR4d1lYUm9JR1E5SWswMkxqTXhOeXc1TkM0eE5qRWdURFl1TVRBeUxEazBMakUwT0NCTU5pNHhNREVzT1RRdU1UUTRJRXcxTGpnMU55dzVOQzR4TURFZ1F6VXVNVE00TERrekxqazBOU0F6TGpBNE5TdzVNeTR6TmpVZ01pNDRPREVzT1RFdU9EQTVJRU15TGpNeE15dzROeTQwTmprZ01TNDNNamNzT0RJdU9UazJJREV1TnpFekxEY3dMalF5TlNCRE1TNDJPVGtzTlRjdU56Y3hJREl1TmpBMExEVXdMamN4T0NBeUxqWXhNeXcxTUM0Mk5EZ2dRek11TXpNNExEUTJMalF4TnlBMUxqUTBOU3cwTlM0ek1TQTFMalV6TlN3ME5TNHlOallnVERFeUxqRTJNeXcwTVM0ME16a2dUREV6TGpBek15dzBNUzR6TWlCTU1Ua3VORGM1TERNM0xqVTNPQ0JNTVRrdU5URXpMRE0zTGpJME5DQkRNVGt1TlRJMkxETTNMakV3TnlBeE9TNDJORGNzTXpjdU1EQTRJREU1TGpjNE5pd3pOeTR3TWpFZ1F6RTVMamt5TWl3ek55NHdNelFnTWpBdU1ESXpMRE0zTGpFMU5pQXlNQzR3TURrc016Y3VNamt6SUV3eE9TNDVOU3d6Tnk0NE9ESWdUREV6TGpFNU9DdzBNUzQ0TURFZ1RERXlMak15T0N3ME1TNDVNVGtnVERVdU56Y3lMRFExTGpjd05DQkROUzQzTkRFc05EVXVOeklnTXk0M09ESXNORFl1TnpjeUlETXVNVEEyTERVd0xqY3lNaUJETXk0d09Ua3NOVEF1TnpneUlESXVNVGs0TERVM0xqZ3dPQ0F5TGpJeE1pdzNNQzQwTWpRZ1F6SXVNakkyTERneUxqazJNeUF5TGpnd09TdzROeTQwTWlBekxqTTNNeXc1TVM0M01qa2dRek11TkRZMExEa3lMalF5SURRdU1EWXlMRGt5TGpnNE15QTBMalk0TWl3NU15NHhPREVnUXpRdU5UWTJMRGt5TGprNE5DQTBMalE0Tml3NU1pNDNOellnTkM0ME5EWXNPVEl1TlRjeUlFTXpMalkyTlN3NE9DNDFPRGdnTXk0eU9URXNPRFF1TXpjZ015NHlOellzTnpFdU1UY3pJRU16TGpJMk1pdzFPQzQxTWlBMExqRTJOeXcxTVM0ME5qWWdOQzR4TnpZc05URXVNemsySUVNMExqa3dNU3cwTnk0eE5qVWdOeTR3TURnc05EWXVNRFU1SURjdU1EazRMRFEyTGpBeE5DQkROeTR3T1RRc05EWXVNREUxSURneExqVTBNaXd6TGpBek5DQTRNUzQ1TkRRc01pNDRNRElnVERneExqazNNaXd5TGpjNE5TQkRPREl1T0RjMkxESXVNalEzSURnekxqWTVNaXd5TGpBNU55QTROQzR6TXpJc01pNHpOVElnUXpnMExqZzROeXd5TGpVM015QTROUzR5T0RFc015NHdPRFVnT0RVdU5UQTBMRE11T0RjeUlFTTROeTQxTVRnc01URWdPRFl1T1RZMExETTJMakE1TVNBNE5TNDNPRFVzTkRNdU9EVTFJRU00TlM0eU56Z3NORGN1TVRrMklEZzBMakl4TERRNUxqTTNJRGd5TGpZeExEVXdMak14TnlCTU55NHpNelVzT1RNdU9EWTVJRU0yTGprNU9TdzVOQzR3TmpNZ05pNDJOVGdzT1RRdU1UWXhJRFl1TXpFM0xEazBMakUyTVNCTU5pNHpNVGNzT1RRdU1UWXhJRm9nVFRZdU1UY3NPVE11TmpVMElFTTJMalEyTXl3NU15NDJPU0EyTGpjM05DdzVNeTQyTVRjZ055NHdPRFVzT1RNdU5ETTNJRXc0TWk0ek5UZ3NORGt1T0RnMklFTTROQzR4T0RFc05EZ3VPREE0SURnMExqazJMRFExTGprM01TQTROUzR5T1RJc05ETXVOemdnUXpnMkxqUTJOaXd6Tmk0d05Ea2dPRGN1TURJekxERXhMakE0TlNBNE5TNHdNalFzTkM0d01EZ2dRemcwTGpnME5pd3pMak0zTnlBNE5DNDFOVEVzTWk0NU56WWdPRFF1TVRRNExESXVPREUySUVNNE15NDJOalFzTWk0Mk1qTWdPREl1T1RneUxESXVOelkwSURneUxqSXlOeXd6TGpJeE15Qk1PREl1TVRrekxETXVNak0wSUVNNE1TNDNPVEVzTXk0ME5qWWdOeTR6TXpVc05EWXVORFV5SURjdU16TTFMRFEyTGpRMU1pQkROeTR6TURRc05EWXVORFk1SURVdU16UTJMRFEzTGpVeU1TQTBMalkyT1N3MU1TNDBOekVnUXpRdU5qWXlMRFV4TGpVeklETXVOell4TERVNExqVTFOaUF6TGpjM05TdzNNUzR4TnpNZ1F6TXVOemtzT0RRdU16STRJRFF1TVRZeExEZzRMalV5TkNBMExqa3pOaXc1TWk0ME56WWdRelV1TURJMkxEa3lMamt6TnlBMUxqUXhNaXc1TXk0ME5Ua2dOUzQ1TnpNc09UTXVOakUxSUVNMkxqQTROeXc1TXk0Mk5DQTJMakUxT0N3NU15NDJOVElnTmk0eE5qa3NPVE11TmpVMElFdzJMakUzTERrekxqWTFOQ0JNTmk0eE55dzVNeTQyTlRRZ1dpSWdhV1E5SWtacGJHd3RNVElpSUdacGJHdzlJaU0wTlRWQk5qUWlQand2Y0dGMGFENEtJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0E4Y0dGMGFDQmtQU0pOTnk0ek1UY3NOamd1T1RneUlFTTNMamd3Tml3Mk9DNDNNREVnT0M0eU1ESXNOamd1T1RJMklEZ3VNakF5TERZNUxqUTROeUJET0M0eU1ESXNOekF1TURRM0lEY3VPREEyTERjd0xqY3pJRGN1TXpFM0xEY3hMakF4TWlCRE5pNDRNamtzTnpFdU1qazBJRFl1TkRNekxEY3hMakEyT1NBMkxqUXpNeXczTUM0MU1EZ2dRell1TkRNekxEWTVMamswT0NBMkxqZ3lPU3cyT1M0eU5qVWdOeTR6TVRjc05qZ3VPVGd5SWlCcFpEMGlSbWxzYkMweE15SWdabWxzYkQwaUkwWkdSa1pHUmlJK1BDOXdZWFJvUGdvZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lEeHdZWFJvSUdROUlrMDJMamt5TERjeExqRXpNeUJETmk0Mk16RXNOekV1TVRNeklEWXVORE16TERjd0xqa3dOU0EyTGpRek15dzNNQzQxTURnZ1F6WXVORE16TERZNUxqazBPQ0EyTGpneU9TdzJPUzR5TmpVZ055NHpNVGNzTmpndU9UZ3lJRU0zTGpRMkxEWTRMamtnTnk0MU9UVXNOamd1T0RZeElEY3VOekUwTERZNExqZzJNU0JET0M0d01ETXNOamd1T0RZeElEZ3VNakF5TERZNUxqQTVJRGd1TWpBeUxEWTVMalE0TnlCRE9DNHlNRElzTnpBdU1EUTNJRGN1T0RBMkxEY3dMamN6SURjdU16RTNMRGN4TGpBeE1pQkROeTR4TnpRc056RXVNRGswSURjdU1ETTVMRGN4TGpFek15QTJMamt5TERjeExqRXpNeUJOTnk0M01UUXNOamd1TmpjMElFTTNMalUxTnl3Mk9DNDJOelFnTnk0ek9USXNOamd1TnpJeklEY3VNakkwTERZNExqZ3lNU0JETmk0Mk56WXNOamt1TVRNNElEWXVNalEyTERZNUxqZzNPU0EyTGpJME5pdzNNQzQxTURnZ1F6WXVNalEyTERjd0xqazVOQ0EyTGpVeE55dzNNUzR6TWlBMkxqa3lMRGN4TGpNeUlFTTNMakEzT0N3M01TNHpNaUEzTGpJME15dzNNUzR5TnpFZ055NDBNVEVzTnpFdU1UYzBJRU0zTGprMU9TdzNNQzQ0TlRjZ09DNHpPRGtzTnpBdU1URTNJRGd1TXpnNUxEWTVMalE0TnlCRE9DNHpPRGtzTmprdU1EQXhJRGd1TVRFM0xEWTRMalkzTkNBM0xqY3hOQ3cyT0M0Mk56UWlJR2xrUFNKR2FXeHNMVEUwSWlCbWFXeHNQU0lqT0RBNU4wRXlJajQ4TDNCaGRHZytDaUFnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnUEhCaGRHZ2daRDBpVFRZdU9USXNOekF1T1RRM0lFTTJMalkwT1N3M01DNDVORGNnTmk0Mk1qRXNOekF1TmpRZ05pNDJNakVzTnpBdU5UQTRJRU0yTGpZeU1TdzNNQzR3TVRjZ05pNDVPRElzTmprdU16a3lJRGN1TkRFeExEWTVMakUwTlNCRE55NDFNakVzTmprdU1EZ3lJRGN1TmpJMUxEWTVMakEwT1NBM0xqY3hOQ3cyT1M0d05Ea2dRemN1T1RnMkxEWTVMakEwT1NBNExqQXhOU3cyT1M0ek5UVWdPQzR3TVRVc05qa3VORGczSUVNNExqQXhOU3cyT1M0NU56Z2dOeTQyTlRJc056QXVOakF6SURjdU1qSTBMRGN3TGpnMU1TQkROeTR4TVRVc056QXVPVEUwSURjdU1ERXNOekF1T1RRM0lEWXVPVElzTnpBdU9UUTNJRTAzTGpjeE5DdzJPQzQ0TmpFZ1F6Y3VOVGsxTERZNExqZzJNU0EzTGpRMkxEWTRMamtnTnk0ek1UY3NOamd1T1RneUlFTTJMamd5T1N3Mk9TNHlOalVnTmk0ME16TXNOamt1T1RRNElEWXVORE16TERjd0xqVXdPQ0JETmk0ME16TXNOekF1T1RBMUlEWXVOak14TERjeExqRXpNeUEyTGpreUxEY3hMakV6TXlCRE55NHdNemtzTnpFdU1UTXpJRGN1TVRjMExEY3hMakE1TkNBM0xqTXhOeXczTVM0d01USWdRemN1T0RBMkxEY3dMamN6SURndU1qQXlMRGN3TGpBME55QTRMakl3TWl3Mk9TNDBPRGNnUXpndU1qQXlMRFk1TGpBNUlEZ3VNREF6TERZNExqZzJNU0EzTGpjeE5DdzJPQzQ0TmpFaUlHbGtQU0pHYVd4c0xURTFJaUJtYVd4c1BTSWpPREE1TjBFeUlqNDhMM0JoZEdnK0NpQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdQSEJoZEdnZ1pEMGlUVGN1TkRRMExEZzFMak0xSUVNM0xqY3dPQ3c0TlM0eE9UZ2dOeTQ1TWpFc09EVXVNekU1SURjdU9USXhMRGcxTGpZeU1pQkROeTQ1TWpFc09EVXVPVEkxSURjdU56QTRMRGcyTGpJNU1pQTNMalEwTkN3NE5pNDBORFFnUXpjdU1UZ3hMRGcyTGpVNU55QTJMamsyTnl3NE5pNDBOelVnTmk0NU5qY3NPRFl1TVRjeklFTTJMamsyTnl3NE5TNDROekVnTnk0eE9ERXNPRFV1TlRBeUlEY3VORFEwTERnMUxqTTFJaUJwWkQwaVJtbHNiQzB4TmlJZ1ptbHNiRDBpSTBaR1JrWkdSaUkrUEM5d1lYUm9QZ29nSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUR4d1lYUm9JR1E5SWswM0xqSXpMRGcyTGpVeElFTTNMakEzTkN3NE5pNDFNU0EyTGprMk55dzROaTR6T0RjZ05pNDVOamNzT0RZdU1UY3pJRU0yTGprMk55dzROUzQ0TnpFZ055NHhPREVzT0RVdU5UQXlJRGN1TkRRMExEZzFMak0xSUVNM0xqVXlNU3c0TlM0ek1EVWdOeTQxT1RRc09EVXVNamcwSURjdU5qVTRMRGcxTGpJNE5DQkROeTQ0TVRRc09EVXVNamcwSURjdU9USXhMRGcxTGpRd09DQTNMamt5TVN3NE5TNDJNaklnUXpjdU9USXhMRGcxTGpreU5TQTNMamN3T0N3NE5pNHlPVElnTnk0ME5EUXNPRFl1TkRRMElFTTNMak0yTnl3NE5pNDBPRGtnTnk0eU9UUXNPRFl1TlRFZ055NHlNeXc0Tmk0MU1TQk5OeTQyTlRnc09EVXVNRGs0SUVNM0xqVTFPQ3c0TlM0d09UZ2dOeTQwTlRVc09EVXVNVEkzSURjdU16VXhMRGcxTGpFNE9DQkROeTR3TXpFc09EVXVNemN6SURZdU56Z3hMRGcxTGpnd05pQTJMamM0TVN3NE5pNHhOek1nUXpZdU56Z3hMRGcyTGpRNE1pQTJMamsyTml3NE5pNDJPVGNnTnk0eU15dzROaTQyT1RjZ1F6Y3VNek1zT0RZdU5qazNJRGN1TkRNekxEZzJMalkyTmlBM0xqVXpPQ3c0Tmk0Mk1EY2dRemN1T0RVNExEZzJMalF5TWlBNExqRXdPQ3c0TlM0NU9Ea2dPQzR4TURnc09EVXVOakl5SUVNNExqRXdPQ3c0TlM0ek1UTWdOeTQ1TWpNc09EVXVNRGs0SURjdU5qVTRMRGcxTGpBNU9DSWdhV1E5SWtacGJHd3RNVGNpSUdacGJHdzlJaU00TURrM1FUSWlQand2Y0dGMGFENEtJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0E4Y0dGMGFDQmtQU0pOTnk0eU15dzROaTR6TWpJZ1REY3VNVFUwTERnMkxqRTNNeUJETnk0eE5UUXNPRFV1T1RNNElEY3VNek16TERnMUxqWXlPU0EzTGpVek9DdzROUzQxTVRJZ1REY3VOalU0TERnMUxqUTNNU0JNTnk0M016UXNPRFV1TmpJeUlFTTNMamN6TkN3NE5TNDROVFlnTnk0MU5UVXNPRFl1TVRZMElEY3VNelV4TERnMkxqSTRNaUJNTnk0eU15dzROaTR6TWpJZ1RUY3VOalU0TERnMUxqSTROQ0JETnk0MU9UUXNPRFV1TWpnMElEY3VOVEl4TERnMUxqTXdOU0EzTGpRME5DdzROUzR6TlNCRE55NHhPREVzT0RVdU5UQXlJRFl1T1RZM0xEZzFMamczTVNBMkxqazJOeXc0Tmk0eE56TWdRell1T1RZM0xEZzJMak00TnlBM0xqQTNOQ3c0Tmk0MU1TQTNMakl6TERnMkxqVXhJRU0zTGpJNU5DdzROaTQxTVNBM0xqTTJOeXc0Tmk0ME9Ea2dOeTQwTkRRc09EWXVORFEwSUVNM0xqY3dPQ3c0Tmk0eU9USWdOeTQ1TWpFc09EVXVPVEkxSURjdU9USXhMRGcxTGpZeU1pQkROeTQ1TWpFc09EVXVOREE0SURjdU9ERTBMRGcxTGpJNE5DQTNMalkxT0N3NE5TNHlPRFFpSUdsa1BTSkdhV3hzTFRFNElpQm1hV3hzUFNJak9EQTVOMEV5SWo0OEwzQmhkR2crQ2lBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ1BIQmhkR2dnWkQwaVRUYzNMakkzT0N3M0xqYzJPU0JNTnpjdU1qYzRMRFV4TGpRek5pQk1NVEF1TWpBNExEa3dMakUySUV3eE1DNHlNRGdzTkRZdU5Ea3pJRXczTnk0eU56Z3NOeTQzTmpraUlHbGtQU0pHYVd4c0xURTVJaUJtYVd4c1BTSWpORFUxUVRZMElqNDhMM0JoZEdnK0NpQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdQSEJoZEdnZ1pEMGlUVEV3TGpBNE15dzVNQzR6TnpVZ1RERXdMakE0TXl3ME5pNDBNakVnVERFd0xqRTBOaXcwTmk0ek9EVWdURGMzTGpRd015dzNMalUxTkNCTU56Y3VOREF6TERVeExqVXdPQ0JNTnpjdU16UXhMRFV4TGpVME5DQk1NVEF1TURnekxEa3dMak0zTlNCTU1UQXVNRGd6TERrd0xqTTNOU0JhSUUweE1DNHpNek1zTkRZdU5UWTBJRXd4TUM0ek16TXNPRGt1T1RRMElFdzNOeTR4TlRRc05URXVNelkxSUV3M055NHhOVFFzTnk0NU9EVWdUREV3TGpNek15dzBOaTQxTmpRZ1RERXdMak16TXl3ME5pNDFOalFnV2lJZ2FXUTlJa1pwYkd3dE1qQWlJR1pwYkd3OUlpTTJNRGRFT0VJaVBqd3ZjR0YwYUQ0S0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUR3dlp6NEtJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lEeHdZWFJvSUdROUlrMHhNalV1TnpNM0xEZzRMalkwTnlCTU1URTRMakE1T0N3NU1TNDVPREVnVERFeE9DNHdPVGdzT0RRZ1RERXdOaTQyTXprc09EZ3VOekV6SUV3eE1EWXVOak01TERrMkxqazRNaUJNT1Rrc01UQXdMak14TlNCTU1URXlMak0yT1N3eE1ETXVPVFl4SUV3eE1qVXVOek0zTERnNExqWTBOeUlnYVdROUlrbHRjRzl5ZEdWa0xVeGhlV1Z5Y3kxRGIzQjVMVElpSUdacGJHdzlJaU0wTlRWQk5qUWlJSE5yWlhSamFEcDBlWEJsUFNKTlUxTm9ZWEJsUjNKdmRYQWlQand2Y0dGMGFENEtJQ0FnSUNBZ0lDQWdJQ0FnUEM5blBnb2dJQ0FnSUNBZ0lEd3ZaejRLSUNBZ0lEd3ZaejRLUEM5emRtYysnKTtcclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gUm90YXRlSW5zdHJ1Y3Rpb25zO1xyXG5cclxufSx7XCIuL3V0aWwuanNcIjoyMn1dLDE3OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcclxuLypcclxuICogQ29weXJpZ2h0IDIwMTUgR29vZ2xlIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5cclxudmFyIFNlbnNvclNhbXBsZSA9IF9kZXJlcV8oJy4vc2Vuc29yLXNhbXBsZS5qcycpO1xyXG52YXIgTWF0aFV0aWwgPSBfZGVyZXFfKCcuLi9tYXRoLXV0aWwuanMnKTtcclxudmFyIFV0aWwgPSBfZGVyZXFfKCcuLi91dGlsLmpzJyk7XHJcblxyXG52YXIgREVCVUcgPSBmYWxzZTtcclxuXHJcbi8qKlxyXG4gKiBBbiBpbXBsZW1lbnRhdGlvbiBvZiBhIHNpbXBsZSBjb21wbGVtZW50YXJ5IGZpbHRlciwgd2hpY2ggZnVzZXMgZ3lyb3Njb3BlIGFuZFxyXG4gKiBhY2NlbGVyb21ldGVyIGRhdGEgZnJvbSB0aGUgJ2RldmljZW1vdGlvbicgZXZlbnQuXHJcbiAqXHJcbiAqIEFjY2VsZXJvbWV0ZXIgZGF0YSBpcyB2ZXJ5IG5vaXN5LCBidXQgc3RhYmxlIG92ZXIgdGhlIGxvbmcgdGVybS5cclxuICogR3lyb3Njb3BlIGRhdGEgaXMgc21vb3RoLCBidXQgdGVuZHMgdG8gZHJpZnQgb3ZlciB0aGUgbG9uZyB0ZXJtLlxyXG4gKlxyXG4gKiBUaGlzIGZ1c2lvbiBpcyByZWxhdGl2ZWx5IHNpbXBsZTpcclxuICogMS4gR2V0IG9yaWVudGF0aW9uIGVzdGltYXRlcyBmcm9tIGFjY2VsZXJvbWV0ZXIgYnkgYXBwbHlpbmcgYSBsb3ctcGFzcyBmaWx0ZXJcclxuICogICAgb24gdGhhdCBkYXRhLlxyXG4gKiAyLiBHZXQgb3JpZW50YXRpb24gZXN0aW1hdGVzIGZyb20gZ3lyb3Njb3BlIGJ5IGludGVncmF0aW5nIG92ZXIgdGltZS5cclxuICogMy4gQ29tYmluZSB0aGUgdHdvIGVzdGltYXRlcywgd2VpZ2hpbmcgKDEpIGluIHRoZSBsb25nIHRlcm0sIGJ1dCAoMikgZm9yIHRoZVxyXG4gKiAgICBzaG9ydCB0ZXJtLlxyXG4gKi9cclxuZnVuY3Rpb24gQ29tcGxlbWVudGFyeUZpbHRlcihrRmlsdGVyKSB7XHJcbiAgdGhpcy5rRmlsdGVyID0ga0ZpbHRlcjtcclxuXHJcbiAgLy8gUmF3IHNlbnNvciBtZWFzdXJlbWVudHMuXHJcbiAgdGhpcy5jdXJyZW50QWNjZWxNZWFzdXJlbWVudCA9IG5ldyBTZW5zb3JTYW1wbGUoKTtcclxuICB0aGlzLmN1cnJlbnRHeXJvTWVhc3VyZW1lbnQgPSBuZXcgU2Vuc29yU2FtcGxlKCk7XHJcbiAgdGhpcy5wcmV2aW91c0d5cm9NZWFzdXJlbWVudCA9IG5ldyBTZW5zb3JTYW1wbGUoKTtcclxuXHJcbiAgLy8gU2V0IGRlZmF1bHQgbG9vayBkaXJlY3Rpb24gdG8gYmUgaW4gdGhlIGNvcnJlY3QgZGlyZWN0aW9uLlxyXG4gIGlmIChVdGlsLmlzSU9TKCkpIHtcclxuICAgIHRoaXMuZmlsdGVyUSA9IG5ldyBNYXRoVXRpbC5RdWF0ZXJuaW9uKC0xLCAwLCAwLCAxKTtcclxuICB9IGVsc2Uge1xyXG4gICAgdGhpcy5maWx0ZXJRID0gbmV3IE1hdGhVdGlsLlF1YXRlcm5pb24oMSwgMCwgMCwgMSk7XHJcbiAgfVxyXG4gIHRoaXMucHJldmlvdXNGaWx0ZXJRID0gbmV3IE1hdGhVdGlsLlF1YXRlcm5pb24oKTtcclxuICB0aGlzLnByZXZpb3VzRmlsdGVyUS5jb3B5KHRoaXMuZmlsdGVyUSk7XHJcblxyXG4gIC8vIE9yaWVudGF0aW9uIGJhc2VkIG9uIHRoZSBhY2NlbGVyb21ldGVyLlxyXG4gIHRoaXMuYWNjZWxRID0gbmV3IE1hdGhVdGlsLlF1YXRlcm5pb24oKTtcclxuICAvLyBXaGV0aGVyIG9yIG5vdCB0aGUgb3JpZW50YXRpb24gaGFzIGJlZW4gaW5pdGlhbGl6ZWQuXHJcbiAgdGhpcy5pc09yaWVudGF0aW9uSW5pdGlhbGl6ZWQgPSBmYWxzZTtcclxuICAvLyBSdW5uaW5nIGVzdGltYXRlIG9mIGdyYXZpdHkgYmFzZWQgb24gdGhlIGN1cnJlbnQgb3JpZW50YXRpb24uXHJcbiAgdGhpcy5lc3RpbWF0ZWRHcmF2aXR5ID0gbmV3IE1hdGhVdGlsLlZlY3RvcjMoKTtcclxuICAvLyBNZWFzdXJlZCBncmF2aXR5IGJhc2VkIG9uIGFjY2VsZXJvbWV0ZXIuXHJcbiAgdGhpcy5tZWFzdXJlZEdyYXZpdHkgPSBuZXcgTWF0aFV0aWwuVmVjdG9yMygpO1xyXG5cclxuICAvLyBEZWJ1ZyBvbmx5IHF1YXRlcm5pb24gb2YgZ3lyby1iYXNlZCBvcmllbnRhdGlvbi5cclxuICB0aGlzLmd5cm9JbnRlZ3JhbFEgPSBuZXcgTWF0aFV0aWwuUXVhdGVybmlvbigpO1xyXG59XHJcblxyXG5Db21wbGVtZW50YXJ5RmlsdGVyLnByb3RvdHlwZS5hZGRBY2NlbE1lYXN1cmVtZW50ID0gZnVuY3Rpb24odmVjdG9yLCB0aW1lc3RhbXBTKSB7XHJcbiAgdGhpcy5jdXJyZW50QWNjZWxNZWFzdXJlbWVudC5zZXQodmVjdG9yLCB0aW1lc3RhbXBTKTtcclxufTtcclxuXHJcbkNvbXBsZW1lbnRhcnlGaWx0ZXIucHJvdG90eXBlLmFkZEd5cm9NZWFzdXJlbWVudCA9IGZ1bmN0aW9uKHZlY3RvciwgdGltZXN0YW1wUykge1xyXG4gIHRoaXMuY3VycmVudEd5cm9NZWFzdXJlbWVudC5zZXQodmVjdG9yLCB0aW1lc3RhbXBTKTtcclxuXHJcbiAgdmFyIGRlbHRhVCA9IHRpbWVzdGFtcFMgLSB0aGlzLnByZXZpb3VzR3lyb01lYXN1cmVtZW50LnRpbWVzdGFtcFM7XHJcbiAgaWYgKFV0aWwuaXNUaW1lc3RhbXBEZWx0YVZhbGlkKGRlbHRhVCkpIHtcclxuICAgIHRoaXMucnVuXygpO1xyXG4gIH1cclxuXHJcbiAgdGhpcy5wcmV2aW91c0d5cm9NZWFzdXJlbWVudC5jb3B5KHRoaXMuY3VycmVudEd5cm9NZWFzdXJlbWVudCk7XHJcbn07XHJcblxyXG5Db21wbGVtZW50YXJ5RmlsdGVyLnByb3RvdHlwZS5ydW5fID0gZnVuY3Rpb24oKSB7XHJcblxyXG4gIGlmICghdGhpcy5pc09yaWVudGF0aW9uSW5pdGlhbGl6ZWQpIHtcclxuICAgIHRoaXMuYWNjZWxRID0gdGhpcy5hY2NlbFRvUXVhdGVybmlvbl8odGhpcy5jdXJyZW50QWNjZWxNZWFzdXJlbWVudC5zYW1wbGUpO1xyXG4gICAgdGhpcy5wcmV2aW91c0ZpbHRlclEuY29weSh0aGlzLmFjY2VsUSk7XHJcbiAgICB0aGlzLmlzT3JpZW50YXRpb25Jbml0aWFsaXplZCA9IHRydWU7XHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG5cclxuICB2YXIgZGVsdGFUID0gdGhpcy5jdXJyZW50R3lyb01lYXN1cmVtZW50LnRpbWVzdGFtcFMgLVxyXG4gICAgICB0aGlzLnByZXZpb3VzR3lyb01lYXN1cmVtZW50LnRpbWVzdGFtcFM7XHJcblxyXG4gIC8vIENvbnZlcnQgZ3lybyByb3RhdGlvbiB2ZWN0b3IgdG8gYSBxdWF0ZXJuaW9uIGRlbHRhLlxyXG4gIHZhciBneXJvRGVsdGFRID0gdGhpcy5neXJvVG9RdWF0ZXJuaW9uRGVsdGFfKHRoaXMuY3VycmVudEd5cm9NZWFzdXJlbWVudC5zYW1wbGUsIGRlbHRhVCk7XHJcbiAgdGhpcy5neXJvSW50ZWdyYWxRLm11bHRpcGx5KGd5cm9EZWx0YVEpO1xyXG5cclxuICAvLyBmaWx0ZXJfMSA9IEsgKiAoZmlsdGVyXzAgKyBneXJvICogZFQpICsgKDEgLSBLKSAqIGFjY2VsLlxyXG4gIHRoaXMuZmlsdGVyUS5jb3B5KHRoaXMucHJldmlvdXNGaWx0ZXJRKTtcclxuICB0aGlzLmZpbHRlclEubXVsdGlwbHkoZ3lyb0RlbHRhUSk7XHJcblxyXG4gIC8vIENhbGN1bGF0ZSB0aGUgZGVsdGEgYmV0d2VlbiB0aGUgY3VycmVudCBlc3RpbWF0ZWQgZ3Jhdml0eSBhbmQgdGhlIHJlYWxcclxuICAvLyBncmF2aXR5IHZlY3RvciBmcm9tIGFjY2VsZXJvbWV0ZXIuXHJcbiAgdmFyIGludkZpbHRlclEgPSBuZXcgTWF0aFV0aWwuUXVhdGVybmlvbigpO1xyXG4gIGludkZpbHRlclEuY29weSh0aGlzLmZpbHRlclEpO1xyXG4gIGludkZpbHRlclEuaW52ZXJzZSgpO1xyXG5cclxuICB0aGlzLmVzdGltYXRlZEdyYXZpdHkuc2V0KDAsIDAsIC0xKTtcclxuICB0aGlzLmVzdGltYXRlZEdyYXZpdHkuYXBwbHlRdWF0ZXJuaW9uKGludkZpbHRlclEpO1xyXG4gIHRoaXMuZXN0aW1hdGVkR3Jhdml0eS5ub3JtYWxpemUoKTtcclxuXHJcbiAgdGhpcy5tZWFzdXJlZEdyYXZpdHkuY29weSh0aGlzLmN1cnJlbnRBY2NlbE1lYXN1cmVtZW50LnNhbXBsZSk7XHJcbiAgdGhpcy5tZWFzdXJlZEdyYXZpdHkubm9ybWFsaXplKCk7XHJcblxyXG4gIC8vIENvbXBhcmUgZXN0aW1hdGVkIGdyYXZpdHkgd2l0aCBtZWFzdXJlZCBncmF2aXR5LCBnZXQgdGhlIGRlbHRhIHF1YXRlcm5pb25cclxuICAvLyBiZXR3ZWVuIHRoZSB0d28uXHJcbiAgdmFyIGRlbHRhUSA9IG5ldyBNYXRoVXRpbC5RdWF0ZXJuaW9uKCk7XHJcbiAgZGVsdGFRLnNldEZyb21Vbml0VmVjdG9ycyh0aGlzLmVzdGltYXRlZEdyYXZpdHksIHRoaXMubWVhc3VyZWRHcmF2aXR5KTtcclxuICBkZWx0YVEuaW52ZXJzZSgpO1xyXG5cclxuICBpZiAoREVCVUcpIHtcclxuICAgIGNvbnNvbGUubG9nKCdEZWx0YTogJWQgZGVnLCBHX2VzdDogKCVzLCAlcywgJXMpLCBHX21lYXM6ICglcywgJXMsICVzKScsXHJcbiAgICAgICAgICAgICAgICBNYXRoVXRpbC5yYWRUb0RlZyAqIFV0aWwuZ2V0UXVhdGVybmlvbkFuZ2xlKGRlbHRhUSksXHJcbiAgICAgICAgICAgICAgICAodGhpcy5lc3RpbWF0ZWRHcmF2aXR5LngpLnRvRml4ZWQoMSksXHJcbiAgICAgICAgICAgICAgICAodGhpcy5lc3RpbWF0ZWRHcmF2aXR5LnkpLnRvRml4ZWQoMSksXHJcbiAgICAgICAgICAgICAgICAodGhpcy5lc3RpbWF0ZWRHcmF2aXR5LnopLnRvRml4ZWQoMSksXHJcbiAgICAgICAgICAgICAgICAodGhpcy5tZWFzdXJlZEdyYXZpdHkueCkudG9GaXhlZCgxKSxcclxuICAgICAgICAgICAgICAgICh0aGlzLm1lYXN1cmVkR3Jhdml0eS55KS50b0ZpeGVkKDEpLFxyXG4gICAgICAgICAgICAgICAgKHRoaXMubWVhc3VyZWRHcmF2aXR5LnopLnRvRml4ZWQoMSkpO1xyXG4gIH1cclxuXHJcbiAgLy8gQ2FsY3VsYXRlIHRoZSBTTEVSUCB0YXJnZXQ6IGN1cnJlbnQgb3JpZW50YXRpb24gcGx1cyB0aGUgbWVhc3VyZWQtZXN0aW1hdGVkXHJcbiAgLy8gcXVhdGVybmlvbiBkZWx0YS5cclxuICB2YXIgdGFyZ2V0USA9IG5ldyBNYXRoVXRpbC5RdWF0ZXJuaW9uKCk7XHJcbiAgdGFyZ2V0US5jb3B5KHRoaXMuZmlsdGVyUSk7XHJcbiAgdGFyZ2V0US5tdWx0aXBseShkZWx0YVEpO1xyXG5cclxuICAvLyBTTEVSUCBmYWN0b3I6IDAgaXMgcHVyZSBneXJvLCAxIGlzIHB1cmUgYWNjZWwuXHJcbiAgdGhpcy5maWx0ZXJRLnNsZXJwKHRhcmdldFEsIDEgLSB0aGlzLmtGaWx0ZXIpO1xyXG5cclxuICB0aGlzLnByZXZpb3VzRmlsdGVyUS5jb3B5KHRoaXMuZmlsdGVyUSk7XHJcbn07XHJcblxyXG5Db21wbGVtZW50YXJ5RmlsdGVyLnByb3RvdHlwZS5nZXRPcmllbnRhdGlvbiA9IGZ1bmN0aW9uKCkge1xyXG4gIHJldHVybiB0aGlzLmZpbHRlclE7XHJcbn07XHJcblxyXG5Db21wbGVtZW50YXJ5RmlsdGVyLnByb3RvdHlwZS5hY2NlbFRvUXVhdGVybmlvbl8gPSBmdW5jdGlvbihhY2NlbCkge1xyXG4gIHZhciBub3JtQWNjZWwgPSBuZXcgTWF0aFV0aWwuVmVjdG9yMygpO1xyXG4gIG5vcm1BY2NlbC5jb3B5KGFjY2VsKTtcclxuICBub3JtQWNjZWwubm9ybWFsaXplKCk7XHJcbiAgdmFyIHF1YXQgPSBuZXcgTWF0aFV0aWwuUXVhdGVybmlvbigpO1xyXG4gIHF1YXQuc2V0RnJvbVVuaXRWZWN0b3JzKG5ldyBNYXRoVXRpbC5WZWN0b3IzKDAsIDAsIC0xKSwgbm9ybUFjY2VsKTtcclxuICBxdWF0LmludmVyc2UoKTtcclxuICByZXR1cm4gcXVhdDtcclxufTtcclxuXHJcbkNvbXBsZW1lbnRhcnlGaWx0ZXIucHJvdG90eXBlLmd5cm9Ub1F1YXRlcm5pb25EZWx0YV8gPSBmdW5jdGlvbihneXJvLCBkdCkge1xyXG4gIC8vIEV4dHJhY3QgYXhpcyBhbmQgYW5nbGUgZnJvbSB0aGUgZ3lyb3Njb3BlIGRhdGEuXHJcbiAgdmFyIHF1YXQgPSBuZXcgTWF0aFV0aWwuUXVhdGVybmlvbigpO1xyXG4gIHZhciBheGlzID0gbmV3IE1hdGhVdGlsLlZlY3RvcjMoKTtcclxuICBheGlzLmNvcHkoZ3lybyk7XHJcbiAgYXhpcy5ub3JtYWxpemUoKTtcclxuICBxdWF0LnNldEZyb21BeGlzQW5nbGUoYXhpcywgZ3lyby5sZW5ndGgoKSAqIGR0KTtcclxuICByZXR1cm4gcXVhdDtcclxufTtcclxuXHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IENvbXBsZW1lbnRhcnlGaWx0ZXI7XHJcblxyXG59LHtcIi4uL21hdGgtdXRpbC5qc1wiOjE0LFwiLi4vdXRpbC5qc1wiOjIyLFwiLi9zZW5zb3Itc2FtcGxlLmpzXCI6MjB9XSwxODpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XHJcbi8qXHJcbiAqIENvcHlyaWdodCAyMDE1IEdvb2dsZSBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxudmFyIENvbXBsZW1lbnRhcnlGaWx0ZXIgPSBfZGVyZXFfKCcuL2NvbXBsZW1lbnRhcnktZmlsdGVyLmpzJyk7XHJcbnZhciBQb3NlUHJlZGljdG9yID0gX2RlcmVxXygnLi9wb3NlLXByZWRpY3Rvci5qcycpO1xyXG52YXIgVG91Y2hQYW5uZXIgPSBfZGVyZXFfKCcuLi90b3VjaC1wYW5uZXIuanMnKTtcclxudmFyIE1hdGhVdGlsID0gX2RlcmVxXygnLi4vbWF0aC11dGlsLmpzJyk7XHJcbnZhciBVdGlsID0gX2RlcmVxXygnLi4vdXRpbC5qcycpO1xyXG5cclxuLyoqXHJcbiAqIFRoZSBwb3NlIHNlbnNvciwgaW1wbGVtZW50ZWQgdXNpbmcgRGV2aWNlTW90aW9uIEFQSXMuXHJcbiAqL1xyXG5mdW5jdGlvbiBGdXNpb25Qb3NlU2Vuc29yKCkge1xyXG4gIHRoaXMuZGV2aWNlSWQgPSAnd2VidnItcG9seWZpbGw6ZnVzZWQnO1xyXG4gIHRoaXMuZGV2aWNlTmFtZSA9ICdWUiBQb3NpdGlvbiBEZXZpY2UgKHdlYnZyLXBvbHlmaWxsOmZ1c2VkKSc7XHJcblxyXG4gIHRoaXMuYWNjZWxlcm9tZXRlciA9IG5ldyBNYXRoVXRpbC5WZWN0b3IzKCk7XHJcbiAgdGhpcy5neXJvc2NvcGUgPSBuZXcgTWF0aFV0aWwuVmVjdG9yMygpO1xyXG5cclxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignZGV2aWNlbW90aW9uJywgdGhpcy5vbkRldmljZU1vdGlvbkNoYW5nZV8uYmluZCh0aGlzKSk7XHJcbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ29yaWVudGF0aW9uY2hhbmdlJywgdGhpcy5vblNjcmVlbk9yaWVudGF0aW9uQ2hhbmdlXy5iaW5kKHRoaXMpKTtcclxuXHJcbiAgdGhpcy5maWx0ZXIgPSBuZXcgQ29tcGxlbWVudGFyeUZpbHRlcihXZWJWUkNvbmZpZy5LX0ZJTFRFUik7XHJcbiAgdGhpcy5wb3NlUHJlZGljdG9yID0gbmV3IFBvc2VQcmVkaWN0b3IoV2ViVlJDb25maWcuUFJFRElDVElPTl9USU1FX1MpO1xyXG4gIHRoaXMudG91Y2hQYW5uZXIgPSBuZXcgVG91Y2hQYW5uZXIoKTtcclxuXHJcbiAgdGhpcy5maWx0ZXJUb1dvcmxkUSA9IG5ldyBNYXRoVXRpbC5RdWF0ZXJuaW9uKCk7XHJcblxyXG4gIC8vIFNldCB0aGUgZmlsdGVyIHRvIHdvcmxkIHRyYW5zZm9ybSwgZGVwZW5kaW5nIG9uIE9TLlxyXG4gIGlmIChVdGlsLmlzSU9TKCkpIHtcclxuICAgIHRoaXMuZmlsdGVyVG9Xb3JsZFEuc2V0RnJvbUF4aXNBbmdsZShuZXcgTWF0aFV0aWwuVmVjdG9yMygxLCAwLCAwKSwgTWF0aC5QSSAvIDIpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICB0aGlzLmZpbHRlclRvV29ybGRRLnNldEZyb21BeGlzQW5nbGUobmV3IE1hdGhVdGlsLlZlY3RvcjMoMSwgMCwgMCksIC1NYXRoLlBJIC8gMik7XHJcbiAgfVxyXG5cclxuICB0aGlzLmludmVyc2VXb3JsZFRvU2NyZWVuUSA9IG5ldyBNYXRoVXRpbC5RdWF0ZXJuaW9uKCk7XHJcbiAgdGhpcy53b3JsZFRvU2NyZWVuUSA9IG5ldyBNYXRoVXRpbC5RdWF0ZXJuaW9uKCk7XHJcbiAgdGhpcy5vcmlnaW5hbFBvc2VBZGp1c3RRID0gbmV3IE1hdGhVdGlsLlF1YXRlcm5pb24oKTtcclxuICB0aGlzLm9yaWdpbmFsUG9zZUFkanVzdFEuc2V0RnJvbUF4aXNBbmdsZShuZXcgTWF0aFV0aWwuVmVjdG9yMygwLCAwLCAxKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC13aW5kb3cub3JpZW50YXRpb24gKiBNYXRoLlBJIC8gMTgwKTtcclxuXHJcbiAgdGhpcy5zZXRTY3JlZW5UcmFuc2Zvcm1fKCk7XHJcbiAgLy8gQWRqdXN0IHRoaXMgZmlsdGVyIGZvciBiZWluZyBpbiBsYW5kc2NhcGUgbW9kZS5cclxuICBpZiAoVXRpbC5pc0xhbmRzY2FwZU1vZGUoKSkge1xyXG4gICAgdGhpcy5maWx0ZXJUb1dvcmxkUS5tdWx0aXBseSh0aGlzLmludmVyc2VXb3JsZFRvU2NyZWVuUSk7XHJcbiAgfVxyXG5cclxuICAvLyBLZWVwIHRyYWNrIG9mIGEgcmVzZXQgdHJhbnNmb3JtIGZvciByZXNldFNlbnNvci5cclxuICB0aGlzLnJlc2V0USA9IG5ldyBNYXRoVXRpbC5RdWF0ZXJuaW9uKCk7XHJcblxyXG4gIHRoaXMuaXNGaXJlZm94QW5kcm9pZCA9IFV0aWwuaXNGaXJlZm94QW5kcm9pZCgpO1xyXG4gIHRoaXMuaXNJT1MgPSBVdGlsLmlzSU9TKCk7XHJcblxyXG4gIHRoaXMub3JpZW50YXRpb25PdXRfID0gbmV3IEZsb2F0MzJBcnJheSg0KTtcclxufVxyXG5cclxuRnVzaW9uUG9zZVNlbnNvci5wcm90b3R5cGUuZ2V0UG9zaXRpb24gPSBmdW5jdGlvbigpIHtcclxuICAvLyBUaGlzIFBvc2VTZW5zb3IgZG9lc24ndCBzdXBwb3J0IHBvc2l0aW9uXHJcbiAgcmV0dXJuIG51bGw7XHJcbn07XHJcblxyXG5GdXNpb25Qb3NlU2Vuc29yLnByb3RvdHlwZS5nZXRPcmllbnRhdGlvbiA9IGZ1bmN0aW9uKCkge1xyXG4gIC8vIENvbnZlcnQgZnJvbSBmaWx0ZXIgc3BhY2UgdG8gdGhlIHRoZSBzYW1lIHN5c3RlbSB1c2VkIGJ5IHRoZVxyXG4gIC8vIGRldmljZW9yaWVudGF0aW9uIGV2ZW50LlxyXG4gIHZhciBvcmllbnRhdGlvbiA9IHRoaXMuZmlsdGVyLmdldE9yaWVudGF0aW9uKCk7XHJcblxyXG4gIC8vIFByZWRpY3Qgb3JpZW50YXRpb24uXHJcbiAgdGhpcy5wcmVkaWN0ZWRRID0gdGhpcy5wb3NlUHJlZGljdG9yLmdldFByZWRpY3Rpb24ob3JpZW50YXRpb24sIHRoaXMuZ3lyb3Njb3BlLCB0aGlzLnByZXZpb3VzVGltZXN0YW1wUyk7XHJcblxyXG4gIC8vIENvbnZlcnQgdG8gVEhSRUUgY29vcmRpbmF0ZSBzeXN0ZW06IC1aIGZvcndhcmQsIFkgdXAsIFggcmlnaHQuXHJcbiAgdmFyIG91dCA9IG5ldyBNYXRoVXRpbC5RdWF0ZXJuaW9uKCk7XHJcbiAgb3V0LmNvcHkodGhpcy5maWx0ZXJUb1dvcmxkUSk7XHJcbiAgb3V0Lm11bHRpcGx5KHRoaXMucmVzZXRRKTtcclxuICBpZiAoIVdlYlZSQ29uZmlnLlRPVUNIX1BBTk5FUl9ESVNBQkxFRCkge1xyXG4gICAgb3V0Lm11bHRpcGx5KHRoaXMudG91Y2hQYW5uZXIuZ2V0T3JpZW50YXRpb24oKSk7XHJcbiAgfVxyXG4gIG91dC5tdWx0aXBseSh0aGlzLnByZWRpY3RlZFEpO1xyXG4gIG91dC5tdWx0aXBseSh0aGlzLndvcmxkVG9TY3JlZW5RKTtcclxuXHJcbiAgLy8gSGFuZGxlIHRoZSB5YXctb25seSBjYXNlLlxyXG4gIGlmIChXZWJWUkNvbmZpZy5ZQVdfT05MWSkge1xyXG4gICAgLy8gTWFrZSBhIHF1YXRlcm5pb24gdGhhdCBvbmx5IHR1cm5zIGFyb3VuZCB0aGUgWS1heGlzLlxyXG4gICAgb3V0LnggPSAwO1xyXG4gICAgb3V0LnogPSAwO1xyXG4gICAgb3V0Lm5vcm1hbGl6ZSgpO1xyXG4gIH1cclxuXHJcbiAgdGhpcy5vcmllbnRhdGlvbk91dF9bMF0gPSBvdXQueDtcclxuICB0aGlzLm9yaWVudGF0aW9uT3V0X1sxXSA9IG91dC55O1xyXG4gIHRoaXMub3JpZW50YXRpb25PdXRfWzJdID0gb3V0Lno7XHJcbiAgdGhpcy5vcmllbnRhdGlvbk91dF9bM10gPSBvdXQudztcclxuICByZXR1cm4gdGhpcy5vcmllbnRhdGlvbk91dF87XHJcbn07XHJcblxyXG5GdXNpb25Qb3NlU2Vuc29yLnByb3RvdHlwZS5yZXNldFBvc2UgPSBmdW5jdGlvbigpIHtcclxuICAvLyBSZWR1Y2UgdG8gaW52ZXJ0ZWQgeWF3LW9ubHkuXHJcbiAgdGhpcy5yZXNldFEuY29weSh0aGlzLmZpbHRlci5nZXRPcmllbnRhdGlvbigpKTtcclxuICB0aGlzLnJlc2V0US54ID0gMDtcclxuICB0aGlzLnJlc2V0US55ID0gMDtcclxuICB0aGlzLnJlc2V0US56ICo9IC0xO1xyXG4gIHRoaXMucmVzZXRRLm5vcm1hbGl6ZSgpO1xyXG5cclxuICAvLyBUYWtlIGludG8gYWNjb3VudCBleHRyYSB0cmFuc2Zvcm1hdGlvbnMgaW4gbGFuZHNjYXBlIG1vZGUuXHJcbiAgaWYgKFV0aWwuaXNMYW5kc2NhcGVNb2RlKCkpIHtcclxuICAgIHRoaXMucmVzZXRRLm11bHRpcGx5KHRoaXMuaW52ZXJzZVdvcmxkVG9TY3JlZW5RKTtcclxuICB9XHJcblxyXG4gIC8vIFRha2UgaW50byBhY2NvdW50IG9yaWdpbmFsIHBvc2UuXHJcbiAgdGhpcy5yZXNldFEubXVsdGlwbHkodGhpcy5vcmlnaW5hbFBvc2VBZGp1c3RRKTtcclxuXHJcbiAgaWYgKCFXZWJWUkNvbmZpZy5UT1VDSF9QQU5ORVJfRElTQUJMRUQpIHtcclxuICAgIHRoaXMudG91Y2hQYW5uZXIucmVzZXRTZW5zb3IoKTtcclxuICB9XHJcbn07XHJcblxyXG5GdXNpb25Qb3NlU2Vuc29yLnByb3RvdHlwZS5vbkRldmljZU1vdGlvbkNoYW5nZV8gPSBmdW5jdGlvbihkZXZpY2VNb3Rpb24pIHtcclxuICB2YXIgYWNjR3Jhdml0eSA9IGRldmljZU1vdGlvbi5hY2NlbGVyYXRpb25JbmNsdWRpbmdHcmF2aXR5O1xyXG4gIHZhciByb3RSYXRlID0gZGV2aWNlTW90aW9uLnJvdGF0aW9uUmF0ZTtcclxuICB2YXIgdGltZXN0YW1wUyA9IGRldmljZU1vdGlvbi50aW1lU3RhbXAgLyAxMDAwO1xyXG5cclxuICAvLyBGaXJlZm94IEFuZHJvaWQgdGltZVN0YW1wIHJldHVybnMgb25lIHRob3VzYW5kdGggb2YgYSBtaWxsaXNlY29uZC5cclxuICBpZiAodGhpcy5pc0ZpcmVmb3hBbmRyb2lkKSB7XHJcbiAgICB0aW1lc3RhbXBTIC89IDEwMDA7XHJcbiAgfVxyXG5cclxuICB2YXIgZGVsdGFTID0gdGltZXN0YW1wUyAtIHRoaXMucHJldmlvdXNUaW1lc3RhbXBTO1xyXG4gIGlmIChkZWx0YVMgPD0gVXRpbC5NSU5fVElNRVNURVAgfHwgZGVsdGFTID4gVXRpbC5NQVhfVElNRVNURVApIHtcclxuICAgIGNvbnNvbGUud2FybignSW52YWxpZCB0aW1lc3RhbXBzIGRldGVjdGVkLiBUaW1lIHN0ZXAgYmV0d2VlbiBzdWNjZXNzaXZlICcgK1xyXG4gICAgICAgICAgICAgICAgICdneXJvc2NvcGUgc2Vuc29yIHNhbXBsZXMgaXMgdmVyeSBzbWFsbCBvciBub3QgbW9ub3RvbmljJyk7XHJcbiAgICB0aGlzLnByZXZpb3VzVGltZXN0YW1wUyA9IHRpbWVzdGFtcFM7XHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG4gIHRoaXMuYWNjZWxlcm9tZXRlci5zZXQoLWFjY0dyYXZpdHkueCwgLWFjY0dyYXZpdHkueSwgLWFjY0dyYXZpdHkueik7XHJcbiAgdGhpcy5neXJvc2NvcGUuc2V0KHJvdFJhdGUuYWxwaGEsIHJvdFJhdGUuYmV0YSwgcm90UmF0ZS5nYW1tYSk7XHJcblxyXG4gIC8vIFdpdGggaU9TIGFuZCBGaXJlZm94IEFuZHJvaWQsIHJvdGF0aW9uUmF0ZSBpcyByZXBvcnRlZCBpbiBkZWdyZWVzLFxyXG4gIC8vIHNvIHdlIGZpcnN0IGNvbnZlcnQgdG8gcmFkaWFucy5cclxuICBpZiAodGhpcy5pc0lPUyB8fCB0aGlzLmlzRmlyZWZveEFuZHJvaWQpIHtcclxuICAgIHRoaXMuZ3lyb3Njb3BlLm11bHRpcGx5U2NhbGFyKE1hdGguUEkgLyAxODApO1xyXG4gIH1cclxuXHJcbiAgdGhpcy5maWx0ZXIuYWRkQWNjZWxNZWFzdXJlbWVudCh0aGlzLmFjY2VsZXJvbWV0ZXIsIHRpbWVzdGFtcFMpO1xyXG4gIHRoaXMuZmlsdGVyLmFkZEd5cm9NZWFzdXJlbWVudCh0aGlzLmd5cm9zY29wZSwgdGltZXN0YW1wUyk7XHJcblxyXG4gIHRoaXMucHJldmlvdXNUaW1lc3RhbXBTID0gdGltZXN0YW1wUztcclxufTtcclxuXHJcbkZ1c2lvblBvc2VTZW5zb3IucHJvdG90eXBlLm9uU2NyZWVuT3JpZW50YXRpb25DaGFuZ2VfID1cclxuICAgIGZ1bmN0aW9uKHNjcmVlbk9yaWVudGF0aW9uKSB7XHJcbiAgdGhpcy5zZXRTY3JlZW5UcmFuc2Zvcm1fKCk7XHJcbn07XHJcblxyXG5GdXNpb25Qb3NlU2Vuc29yLnByb3RvdHlwZS5zZXRTY3JlZW5UcmFuc2Zvcm1fID0gZnVuY3Rpb24oKSB7XHJcbiAgdGhpcy53b3JsZFRvU2NyZWVuUS5zZXQoMCwgMCwgMCwgMSk7XHJcbiAgc3dpdGNoICh3aW5kb3cub3JpZW50YXRpb24pIHtcclxuICAgIGNhc2UgMDpcclxuICAgICAgYnJlYWs7XHJcbiAgICBjYXNlIDkwOlxyXG4gICAgICB0aGlzLndvcmxkVG9TY3JlZW5RLnNldEZyb21BeGlzQW5nbGUobmV3IE1hdGhVdGlsLlZlY3RvcjMoMCwgMCwgMSksIC1NYXRoLlBJIC8gMik7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgY2FzZSAtOTA6XHJcbiAgICAgIHRoaXMud29ybGRUb1NjcmVlblEuc2V0RnJvbUF4aXNBbmdsZShuZXcgTWF0aFV0aWwuVmVjdG9yMygwLCAwLCAxKSwgTWF0aC5QSSAvIDIpO1xyXG4gICAgICBicmVhaztcclxuICAgIGNhc2UgMTgwOlxyXG4gICAgICAvLyBUT0RPLlxyXG4gICAgICBicmVhaztcclxuICB9XHJcbiAgdGhpcy5pbnZlcnNlV29ybGRUb1NjcmVlblEuY29weSh0aGlzLndvcmxkVG9TY3JlZW5RKTtcclxuICB0aGlzLmludmVyc2VXb3JsZFRvU2NyZWVuUS5pbnZlcnNlKCk7XHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IEZ1c2lvblBvc2VTZW5zb3I7XHJcblxyXG59LHtcIi4uL21hdGgtdXRpbC5qc1wiOjE0LFwiLi4vdG91Y2gtcGFubmVyLmpzXCI6MjEsXCIuLi91dGlsLmpzXCI6MjIsXCIuL2NvbXBsZW1lbnRhcnktZmlsdGVyLmpzXCI6MTcsXCIuL3Bvc2UtcHJlZGljdG9yLmpzXCI6MTl9XSwxOTpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XHJcbi8qXHJcbiAqIENvcHlyaWdodCAyMDE1IEdvb2dsZSBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxudmFyIE1hdGhVdGlsID0gX2RlcmVxXygnLi4vbWF0aC11dGlsLmpzJyk7XHJcbnZhciBERUJVRyA9IGZhbHNlO1xyXG5cclxuLyoqXHJcbiAqIEdpdmVuIGFuIG9yaWVudGF0aW9uIGFuZCB0aGUgZ3lyb3Njb3BlIGRhdGEsIHByZWRpY3RzIHRoZSBmdXR1cmUgb3JpZW50YXRpb25cclxuICogb2YgdGhlIGhlYWQuIFRoaXMgbWFrZXMgcmVuZGVyaW5nIGFwcGVhciBmYXN0ZXIuXHJcbiAqXHJcbiAqIEFsc28gc2VlOiBodHRwOi8vbXNsLmNzLnVpdWMuZWR1L35sYXZhbGxlL3BhcGVycy9MYXZZZXJLYXRBbnQxNC5wZGZcclxuICpcclxuICogQHBhcmFtIHtOdW1iZXJ9IHByZWRpY3Rpb25UaW1lUyB0aW1lIGZyb20gaGVhZCBtb3ZlbWVudCB0byB0aGUgYXBwZWFyYW5jZSBvZlxyXG4gKiB0aGUgY29ycmVzcG9uZGluZyBpbWFnZS5cclxuICovXHJcbmZ1bmN0aW9uIFBvc2VQcmVkaWN0b3IocHJlZGljdGlvblRpbWVTKSB7XHJcbiAgdGhpcy5wcmVkaWN0aW9uVGltZVMgPSBwcmVkaWN0aW9uVGltZVM7XHJcblxyXG4gIC8vIFRoZSBxdWF0ZXJuaW9uIGNvcnJlc3BvbmRpbmcgdG8gdGhlIHByZXZpb3VzIHN0YXRlLlxyXG4gIHRoaXMucHJldmlvdXNRID0gbmV3IE1hdGhVdGlsLlF1YXRlcm5pb24oKTtcclxuICAvLyBQcmV2aW91cyB0aW1lIGEgcHJlZGljdGlvbiBvY2N1cnJlZC5cclxuICB0aGlzLnByZXZpb3VzVGltZXN0YW1wUyA9IG51bGw7XHJcblxyXG4gIC8vIFRoZSBkZWx0YSBxdWF0ZXJuaW9uIHRoYXQgYWRqdXN0cyB0aGUgY3VycmVudCBwb3NlLlxyXG4gIHRoaXMuZGVsdGFRID0gbmV3IE1hdGhVdGlsLlF1YXRlcm5pb24oKTtcclxuICAvLyBUaGUgb3V0cHV0IHF1YXRlcm5pb24uXHJcbiAgdGhpcy5vdXRRID0gbmV3IE1hdGhVdGlsLlF1YXRlcm5pb24oKTtcclxufVxyXG5cclxuUG9zZVByZWRpY3Rvci5wcm90b3R5cGUuZ2V0UHJlZGljdGlvbiA9IGZ1bmN0aW9uKGN1cnJlbnRRLCBneXJvLCB0aW1lc3RhbXBTKSB7XHJcbiAgaWYgKCF0aGlzLnByZXZpb3VzVGltZXN0YW1wUykge1xyXG4gICAgdGhpcy5wcmV2aW91c1EuY29weShjdXJyZW50USk7XHJcbiAgICB0aGlzLnByZXZpb3VzVGltZXN0YW1wUyA9IHRpbWVzdGFtcFM7XHJcbiAgICByZXR1cm4gY3VycmVudFE7XHJcbiAgfVxyXG5cclxuICAvLyBDYWxjdWxhdGUgYXhpcyBhbmQgYW5nbGUgYmFzZWQgb24gZ3lyb3Njb3BlIHJvdGF0aW9uIHJhdGUgZGF0YS5cclxuICB2YXIgYXhpcyA9IG5ldyBNYXRoVXRpbC5WZWN0b3IzKCk7XHJcbiAgYXhpcy5jb3B5KGd5cm8pO1xyXG4gIGF4aXMubm9ybWFsaXplKCk7XHJcblxyXG4gIHZhciBhbmd1bGFyU3BlZWQgPSBneXJvLmxlbmd0aCgpO1xyXG5cclxuICAvLyBJZiB3ZSdyZSByb3RhdGluZyBzbG93bHksIGRvbid0IGRvIHByZWRpY3Rpb24uXHJcbiAgaWYgKGFuZ3VsYXJTcGVlZCA8IE1hdGhVdGlsLmRlZ1RvUmFkICogMjApIHtcclxuICAgIGlmIChERUJVRykge1xyXG4gICAgICBjb25zb2xlLmxvZygnTW92aW5nIHNsb3dseSwgYXQgJXMgZGVnL3M6IG5vIHByZWRpY3Rpb24nLFxyXG4gICAgICAgICAgICAgICAgICAoTWF0aFV0aWwucmFkVG9EZWcgKiBhbmd1bGFyU3BlZWQpLnRvRml4ZWQoMSkpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5vdXRRLmNvcHkoY3VycmVudFEpO1xyXG4gICAgdGhpcy5wcmV2aW91c1EuY29weShjdXJyZW50USk7XHJcbiAgICByZXR1cm4gdGhpcy5vdXRRO1xyXG4gIH1cclxuXHJcbiAgLy8gR2V0IHRoZSBwcmVkaWN0ZWQgYW5nbGUgYmFzZWQgb24gdGhlIHRpbWUgZGVsdGEgYW5kIGxhdGVuY3kuXHJcbiAgdmFyIGRlbHRhVCA9IHRpbWVzdGFtcFMgLSB0aGlzLnByZXZpb3VzVGltZXN0YW1wUztcclxuICB2YXIgcHJlZGljdEFuZ2xlID0gYW5ndWxhclNwZWVkICogdGhpcy5wcmVkaWN0aW9uVGltZVM7XHJcblxyXG4gIHRoaXMuZGVsdGFRLnNldEZyb21BeGlzQW5nbGUoYXhpcywgcHJlZGljdEFuZ2xlKTtcclxuICB0aGlzLm91dFEuY29weSh0aGlzLnByZXZpb3VzUSk7XHJcbiAgdGhpcy5vdXRRLm11bHRpcGx5KHRoaXMuZGVsdGFRKTtcclxuXHJcbiAgdGhpcy5wcmV2aW91c1EuY29weShjdXJyZW50USk7XHJcblxyXG4gIHJldHVybiB0aGlzLm91dFE7XHJcbn07XHJcblxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBQb3NlUHJlZGljdG9yO1xyXG5cclxufSx7XCIuLi9tYXRoLXV0aWwuanNcIjoxNH1dLDIwOltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcclxuZnVuY3Rpb24gU2Vuc29yU2FtcGxlKHNhbXBsZSwgdGltZXN0YW1wUykge1xyXG4gIHRoaXMuc2V0KHNhbXBsZSwgdGltZXN0YW1wUyk7XHJcbn07XHJcblxyXG5TZW5zb3JTYW1wbGUucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uKHNhbXBsZSwgdGltZXN0YW1wUykge1xyXG4gIHRoaXMuc2FtcGxlID0gc2FtcGxlO1xyXG4gIHRoaXMudGltZXN0YW1wUyA9IHRpbWVzdGFtcFM7XHJcbn07XHJcblxyXG5TZW5zb3JTYW1wbGUucHJvdG90eXBlLmNvcHkgPSBmdW5jdGlvbihzZW5zb3JTYW1wbGUpIHtcclxuICB0aGlzLnNldChzZW5zb3JTYW1wbGUuc2FtcGxlLCBzZW5zb3JTYW1wbGUudGltZXN0YW1wUyk7XHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IFNlbnNvclNhbXBsZTtcclxuXHJcbn0se31dLDIxOltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcclxuLypcclxuICogQ29weXJpZ2h0IDIwMTUgR29vZ2xlIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG52YXIgTWF0aFV0aWwgPSBfZGVyZXFfKCcuL21hdGgtdXRpbC5qcycpO1xyXG52YXIgVXRpbCA9IF9kZXJlcV8oJy4vdXRpbC5qcycpO1xyXG5cclxudmFyIFJPVEFURV9TUEVFRCA9IDAuNTtcclxuLyoqXHJcbiAqIFByb3ZpZGVzIGEgcXVhdGVybmlvbiByZXNwb25zaWJsZSBmb3IgcHJlLXBhbm5pbmcgdGhlIHNjZW5lIGJlZm9yZSBmdXJ0aGVyXHJcbiAqIHRyYW5zZm9ybWF0aW9ucyBkdWUgdG8gZGV2aWNlIHNlbnNvcnMuXHJcbiAqL1xyXG5mdW5jdGlvbiBUb3VjaFBhbm5lcigpIHtcclxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIHRoaXMub25Ub3VjaFN0YXJ0Xy5iaW5kKHRoaXMpKTtcclxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgdGhpcy5vblRvdWNoTW92ZV8uYmluZCh0aGlzKSk7XHJcbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgdGhpcy5vblRvdWNoRW5kXy5iaW5kKHRoaXMpKTtcclxuXHJcbiAgdGhpcy5pc1RvdWNoaW5nID0gZmFsc2U7XHJcbiAgdGhpcy5yb3RhdGVTdGFydCA9IG5ldyBNYXRoVXRpbC5WZWN0b3IyKCk7XHJcbiAgdGhpcy5yb3RhdGVFbmQgPSBuZXcgTWF0aFV0aWwuVmVjdG9yMigpO1xyXG4gIHRoaXMucm90YXRlRGVsdGEgPSBuZXcgTWF0aFV0aWwuVmVjdG9yMigpO1xyXG5cclxuICB0aGlzLnRoZXRhID0gMDtcclxuICB0aGlzLm9yaWVudGF0aW9uID0gbmV3IE1hdGhVdGlsLlF1YXRlcm5pb24oKTtcclxufVxyXG5cclxuVG91Y2hQYW5uZXIucHJvdG90eXBlLmdldE9yaWVudGF0aW9uID0gZnVuY3Rpb24oKSB7XHJcbiAgdGhpcy5vcmllbnRhdGlvbi5zZXRGcm9tRXVsZXJYWVooMCwgMCwgdGhpcy50aGV0YSk7XHJcbiAgcmV0dXJuIHRoaXMub3JpZW50YXRpb247XHJcbn07XHJcblxyXG5Ub3VjaFBhbm5lci5wcm90b3R5cGUucmVzZXRTZW5zb3IgPSBmdW5jdGlvbigpIHtcclxuICB0aGlzLnRoZXRhID0gMDtcclxufTtcclxuXHJcblRvdWNoUGFubmVyLnByb3RvdHlwZS5vblRvdWNoU3RhcnRfID0gZnVuY3Rpb24oZSkge1xyXG4gIC8vIE9ubHkgcmVzcG9uZCBpZiB0aGVyZSBpcyBleGFjdGx5IG9uZSB0b3VjaC5cclxuICBpZiAoZS50b3VjaGVzLmxlbmd0aCAhPSAxKSB7XHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG4gIHRoaXMucm90YXRlU3RhcnQuc2V0KGUudG91Y2hlc1swXS5wYWdlWCwgZS50b3VjaGVzWzBdLnBhZ2VZKTtcclxuICB0aGlzLmlzVG91Y2hpbmcgPSB0cnVlO1xyXG59O1xyXG5cclxuVG91Y2hQYW5uZXIucHJvdG90eXBlLm9uVG91Y2hNb3ZlXyA9IGZ1bmN0aW9uKGUpIHtcclxuICBpZiAoIXRoaXMuaXNUb3VjaGluZykge1xyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuICB0aGlzLnJvdGF0ZUVuZC5zZXQoZS50b3VjaGVzWzBdLnBhZ2VYLCBlLnRvdWNoZXNbMF0ucGFnZVkpO1xyXG4gIHRoaXMucm90YXRlRGVsdGEuc3ViVmVjdG9ycyh0aGlzLnJvdGF0ZUVuZCwgdGhpcy5yb3RhdGVTdGFydCk7XHJcbiAgdGhpcy5yb3RhdGVTdGFydC5jb3B5KHRoaXMucm90YXRlRW5kKTtcclxuXHJcbiAgLy8gT24gaU9TLCBkaXJlY3Rpb24gaXMgaW52ZXJ0ZWQuXHJcbiAgaWYgKFV0aWwuaXNJT1MoKSkge1xyXG4gICAgdGhpcy5yb3RhdGVEZWx0YS54ICo9IC0xO1xyXG4gIH1cclxuXHJcbiAgdmFyIGVsZW1lbnQgPSBkb2N1bWVudC5ib2R5O1xyXG4gIHRoaXMudGhldGEgKz0gMiAqIE1hdGguUEkgKiB0aGlzLnJvdGF0ZURlbHRhLnggLyBlbGVtZW50LmNsaWVudFdpZHRoICogUk9UQVRFX1NQRUVEO1xyXG59O1xyXG5cclxuVG91Y2hQYW5uZXIucHJvdG90eXBlLm9uVG91Y2hFbmRfID0gZnVuY3Rpb24oZSkge1xyXG4gIHRoaXMuaXNUb3VjaGluZyA9IGZhbHNlO1xyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBUb3VjaFBhbm5lcjtcclxuXHJcbn0se1wiLi9tYXRoLXV0aWwuanNcIjoxNCxcIi4vdXRpbC5qc1wiOjIyfV0sMjI6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xyXG4vKlxyXG4gKiBDb3B5cmlnaHQgMjAxNSBHb29nbGUgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcblxyXG52YXIgb2JqZWN0QXNzaWduID0gX2RlcmVxXygnb2JqZWN0LWFzc2lnbicpO1xyXG5cclxudmFyIFV0aWwgPSB3aW5kb3cuVXRpbCB8fCB7fTtcclxuXHJcblV0aWwuTUlOX1RJTUVTVEVQID0gMC4wMDE7XHJcblV0aWwuTUFYX1RJTUVTVEVQID0gMTtcclxuXHJcblV0aWwuYmFzZTY0ID0gZnVuY3Rpb24obWltZVR5cGUsIGJhc2U2NCkge1xyXG4gIHJldHVybiAnZGF0YTonICsgbWltZVR5cGUgKyAnO2Jhc2U2NCwnICsgYmFzZTY0O1xyXG59O1xyXG5cclxuVXRpbC5jbGFtcCA9IGZ1bmN0aW9uKHZhbHVlLCBtaW4sIG1heCkge1xyXG4gIHJldHVybiBNYXRoLm1pbihNYXRoLm1heChtaW4sIHZhbHVlKSwgbWF4KTtcclxufTtcclxuXHJcblV0aWwubGVycCA9IGZ1bmN0aW9uKGEsIGIsIHQpIHtcclxuICByZXR1cm4gYSArICgoYiAtIGEpICogdCk7XHJcbn07XHJcblxyXG5VdGlsLmlzSU9TID0gKGZ1bmN0aW9uKCkge1xyXG4gIHZhciBpc0lPUyA9IC9pUGFkfGlQaG9uZXxpUG9kLy50ZXN0KG5hdmlnYXRvci5wbGF0Zm9ybSk7XHJcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xyXG4gICAgcmV0dXJuIGlzSU9TO1xyXG4gIH07XHJcbn0pKCk7XHJcblxyXG5VdGlsLmlzU2FmYXJpID0gKGZ1bmN0aW9uKCkge1xyXG4gIHZhciBpc1NhZmFyaSA9IC9eKCg/IWNocm9tZXxhbmRyb2lkKS4pKnNhZmFyaS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk7XHJcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xyXG4gICAgcmV0dXJuIGlzU2FmYXJpO1xyXG4gIH07XHJcbn0pKCk7XHJcblxyXG5VdGlsLmlzRmlyZWZveEFuZHJvaWQgPSAoZnVuY3Rpb24oKSB7XHJcbiAgdmFyIGlzRmlyZWZveEFuZHJvaWQgPSBuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoJ0ZpcmVmb3gnKSAhPT0gLTEgJiZcclxuICAgICAgbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCdBbmRyb2lkJykgIT09IC0xO1xyXG4gIHJldHVybiBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiBpc0ZpcmVmb3hBbmRyb2lkO1xyXG4gIH07XHJcbn0pKCk7XHJcblxyXG5VdGlsLmlzTGFuZHNjYXBlTW9kZSA9IGZ1bmN0aW9uKCkge1xyXG4gIHJldHVybiAod2luZG93Lm9yaWVudGF0aW9uID09IDkwIHx8IHdpbmRvdy5vcmllbnRhdGlvbiA9PSAtOTApO1xyXG59O1xyXG5cclxuLy8gSGVscGVyIG1ldGhvZCB0byB2YWxpZGF0ZSB0aGUgdGltZSBzdGVwcyBvZiBzZW5zb3IgdGltZXN0YW1wcy5cclxuVXRpbC5pc1RpbWVzdGFtcERlbHRhVmFsaWQgPSBmdW5jdGlvbih0aW1lc3RhbXBEZWx0YVMpIHtcclxuICBpZiAoaXNOYU4odGltZXN0YW1wRGVsdGFTKSkge1xyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH1cclxuICBpZiAodGltZXN0YW1wRGVsdGFTIDw9IFV0aWwuTUlOX1RJTUVTVEVQKSB7XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfVxyXG4gIGlmICh0aW1lc3RhbXBEZWx0YVMgPiBVdGlsLk1BWF9USU1FU1RFUCkge1xyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH1cclxuICByZXR1cm4gdHJ1ZTtcclxufTtcclxuXHJcblV0aWwuZ2V0U2NyZWVuV2lkdGggPSBmdW5jdGlvbigpIHtcclxuICByZXR1cm4gTWF0aC5tYXgod2luZG93LnNjcmVlbi53aWR0aCwgd2luZG93LnNjcmVlbi5oZWlnaHQpICpcclxuICAgICAgd2luZG93LmRldmljZVBpeGVsUmF0aW87XHJcbn07XHJcblxyXG5VdGlsLmdldFNjcmVlbkhlaWdodCA9IGZ1bmN0aW9uKCkge1xyXG4gIHJldHVybiBNYXRoLm1pbih3aW5kb3cuc2NyZWVuLndpZHRoLCB3aW5kb3cuc2NyZWVuLmhlaWdodCkgKlxyXG4gICAgICB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbztcclxufTtcclxuXHJcblV0aWwucmVxdWVzdEZ1bGxzY3JlZW4gPSBmdW5jdGlvbihlbGVtZW50KSB7XHJcbiAgaWYgKGVsZW1lbnQucmVxdWVzdEZ1bGxzY3JlZW4pIHtcclxuICAgIGVsZW1lbnQucmVxdWVzdEZ1bGxzY3JlZW4oKTtcclxuICB9IGVsc2UgaWYgKGVsZW1lbnQud2Via2l0UmVxdWVzdEZ1bGxzY3JlZW4pIHtcclxuICAgIGVsZW1lbnQud2Via2l0UmVxdWVzdEZ1bGxzY3JlZW4oKTtcclxuICB9IGVsc2UgaWYgKGVsZW1lbnQubW96UmVxdWVzdEZ1bGxTY3JlZW4pIHtcclxuICAgIGVsZW1lbnQubW96UmVxdWVzdEZ1bGxTY3JlZW4oKTtcclxuICB9IGVsc2UgaWYgKGVsZW1lbnQubXNSZXF1ZXN0RnVsbHNjcmVlbikge1xyXG4gICAgZWxlbWVudC5tc1JlcXVlc3RGdWxsc2NyZWVuKCk7XHJcbiAgfSBlbHNlIHtcclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9XHJcblxyXG4gIHJldHVybiB0cnVlO1xyXG59O1xyXG5cclxuVXRpbC5leGl0RnVsbHNjcmVlbiA9IGZ1bmN0aW9uKCkge1xyXG4gIGlmIChkb2N1bWVudC5leGl0RnVsbHNjcmVlbikge1xyXG4gICAgZG9jdW1lbnQuZXhpdEZ1bGxzY3JlZW4oKTtcclxuICB9IGVsc2UgaWYgKGRvY3VtZW50LndlYmtpdEV4aXRGdWxsc2NyZWVuKSB7XHJcbiAgICBkb2N1bWVudC53ZWJraXRFeGl0RnVsbHNjcmVlbigpO1xyXG4gIH0gZWxzZSBpZiAoZG9jdW1lbnQubW96Q2FuY2VsRnVsbFNjcmVlbikge1xyXG4gICAgZG9jdW1lbnQubW96Q2FuY2VsRnVsbFNjcmVlbigpO1xyXG4gIH0gZWxzZSBpZiAoZG9jdW1lbnQubXNFeGl0RnVsbHNjcmVlbikge1xyXG4gICAgZG9jdW1lbnQubXNFeGl0RnVsbHNjcmVlbigpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gdHJ1ZTtcclxufTtcclxuXHJcblV0aWwuZ2V0RnVsbHNjcmVlbkVsZW1lbnQgPSBmdW5jdGlvbigpIHtcclxuICByZXR1cm4gZG9jdW1lbnQuZnVsbHNjcmVlbkVsZW1lbnQgfHxcclxuICAgICAgZG9jdW1lbnQud2Via2l0RnVsbHNjcmVlbkVsZW1lbnQgfHxcclxuICAgICAgZG9jdW1lbnQubW96RnVsbFNjcmVlbkVsZW1lbnQgfHxcclxuICAgICAgZG9jdW1lbnQubXNGdWxsc2NyZWVuRWxlbWVudDtcclxufTtcclxuXHJcblV0aWwubGlua1Byb2dyYW0gPSBmdW5jdGlvbihnbCwgdmVydGV4U291cmNlLCBmcmFnbWVudFNvdXJjZSwgYXR0cmliTG9jYXRpb25NYXApIHtcclxuICAvLyBObyBlcnJvciBjaGVja2luZyBmb3IgYnJldml0eS5cclxuICB2YXIgdmVydGV4U2hhZGVyID0gZ2wuY3JlYXRlU2hhZGVyKGdsLlZFUlRFWF9TSEFERVIpO1xyXG4gIGdsLnNoYWRlclNvdXJjZSh2ZXJ0ZXhTaGFkZXIsIHZlcnRleFNvdXJjZSk7XHJcbiAgZ2wuY29tcGlsZVNoYWRlcih2ZXJ0ZXhTaGFkZXIpO1xyXG5cclxuICB2YXIgZnJhZ21lbnRTaGFkZXIgPSBnbC5jcmVhdGVTaGFkZXIoZ2wuRlJBR01FTlRfU0hBREVSKTtcclxuICBnbC5zaGFkZXJTb3VyY2UoZnJhZ21lbnRTaGFkZXIsIGZyYWdtZW50U291cmNlKTtcclxuICBnbC5jb21waWxlU2hhZGVyKGZyYWdtZW50U2hhZGVyKTtcclxuXHJcbiAgdmFyIHByb2dyYW0gPSBnbC5jcmVhdGVQcm9ncmFtKCk7XHJcbiAgZ2wuYXR0YWNoU2hhZGVyKHByb2dyYW0sIHZlcnRleFNoYWRlcik7XHJcbiAgZ2wuYXR0YWNoU2hhZGVyKHByb2dyYW0sIGZyYWdtZW50U2hhZGVyKTtcclxuXHJcbiAgZm9yICh2YXIgYXR0cmliTmFtZSBpbiBhdHRyaWJMb2NhdGlvbk1hcClcclxuICAgIGdsLmJpbmRBdHRyaWJMb2NhdGlvbihwcm9ncmFtLCBhdHRyaWJMb2NhdGlvbk1hcFthdHRyaWJOYW1lXSwgYXR0cmliTmFtZSk7XHJcblxyXG4gIGdsLmxpbmtQcm9ncmFtKHByb2dyYW0pO1xyXG5cclxuICBnbC5kZWxldGVTaGFkZXIodmVydGV4U2hhZGVyKTtcclxuICBnbC5kZWxldGVTaGFkZXIoZnJhZ21lbnRTaGFkZXIpO1xyXG5cclxuICByZXR1cm4gcHJvZ3JhbTtcclxufTtcclxuXHJcblV0aWwuZ2V0UHJvZ3JhbVVuaWZvcm1zID0gZnVuY3Rpb24oZ2wsIHByb2dyYW0pIHtcclxuICB2YXIgdW5pZm9ybXMgPSB7fTtcclxuICB2YXIgdW5pZm9ybUNvdW50ID0gZ2wuZ2V0UHJvZ3JhbVBhcmFtZXRlcihwcm9ncmFtLCBnbC5BQ1RJVkVfVU5JRk9STVMpO1xyXG4gIHZhciB1bmlmb3JtTmFtZSA9ICcnO1xyXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgdW5pZm9ybUNvdW50OyBpKyspIHtcclxuICAgIHZhciB1bmlmb3JtSW5mbyA9IGdsLmdldEFjdGl2ZVVuaWZvcm0ocHJvZ3JhbSwgaSk7XHJcbiAgICB1bmlmb3JtTmFtZSA9IHVuaWZvcm1JbmZvLm5hbWUucmVwbGFjZSgnWzBdJywgJycpO1xyXG4gICAgdW5pZm9ybXNbdW5pZm9ybU5hbWVdID0gZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHByb2dyYW0sIHVuaWZvcm1OYW1lKTtcclxuICB9XHJcbiAgcmV0dXJuIHVuaWZvcm1zO1xyXG59O1xyXG5cclxuVXRpbC5vcnRob01hdHJpeCA9IGZ1bmN0aW9uIChvdXQsIGxlZnQsIHJpZ2h0LCBib3R0b20sIHRvcCwgbmVhciwgZmFyKSB7XHJcbiAgdmFyIGxyID0gMSAvIChsZWZ0IC0gcmlnaHQpLFxyXG4gICAgICBidCA9IDEgLyAoYm90dG9tIC0gdG9wKSxcclxuICAgICAgbmYgPSAxIC8gKG5lYXIgLSBmYXIpO1xyXG4gIG91dFswXSA9IC0yICogbHI7XHJcbiAgb3V0WzFdID0gMDtcclxuICBvdXRbMl0gPSAwO1xyXG4gIG91dFszXSA9IDA7XHJcbiAgb3V0WzRdID0gMDtcclxuICBvdXRbNV0gPSAtMiAqIGJ0O1xyXG4gIG91dFs2XSA9IDA7XHJcbiAgb3V0WzddID0gMDtcclxuICBvdXRbOF0gPSAwO1xyXG4gIG91dFs5XSA9IDA7XHJcbiAgb3V0WzEwXSA9IDIgKiBuZjtcclxuICBvdXRbMTFdID0gMDtcclxuICBvdXRbMTJdID0gKGxlZnQgKyByaWdodCkgKiBscjtcclxuICBvdXRbMTNdID0gKHRvcCArIGJvdHRvbSkgKiBidDtcclxuICBvdXRbMTRdID0gKGZhciArIG5lYXIpICogbmY7XHJcbiAgb3V0WzE1XSA9IDE7XHJcbiAgcmV0dXJuIG91dDtcclxufTtcclxuXHJcblV0aWwuaXNNb2JpbGUgPSBmdW5jdGlvbigpIHtcclxuICB2YXIgY2hlY2sgPSBmYWxzZTtcclxuICAoZnVuY3Rpb24oYSl7aWYoLyhhbmRyb2lkfGJiXFxkK3xtZWVnbykuK21vYmlsZXxhdmFudGdvfGJhZGFcXC98YmxhY2tiZXJyeXxibGF6ZXJ8Y29tcGFsfGVsYWluZXxmZW5uZWN8aGlwdG9wfGllbW9iaWxlfGlwKGhvbmV8b2QpfGlyaXN8a2luZGxlfGxnZSB8bWFlbW98bWlkcHxtbXB8bW9iaWxlLitmaXJlZm94fG5ldGZyb250fG9wZXJhIG0ob2J8aW4paXxwYWxtKCBvcyk/fHBob25lfHAoaXhpfHJlKVxcL3xwbHVja2VyfHBvY2tldHxwc3B8c2VyaWVzKDR8NikwfHN5bWJpYW58dHJlb3x1cFxcLihicm93c2VyfGxpbmspfHZvZGFmb25lfHdhcHx3aW5kb3dzIGNlfHhkYXx4aWluby9pLnRlc3QoYSl8fC8xMjA3fDYzMTB8NjU5MHwzZ3NvfDR0aHB8NTBbMS02XWl8Nzcwc3w4MDJzfGEgd2F8YWJhY3xhYyhlcnxvb3xzXFwtKXxhaShrb3xybil8YWwoYXZ8Y2F8Y28pfGFtb2l8YW4oZXh8bnl8eXcpfGFwdHV8YXIoY2h8Z28pfGFzKHRlfHVzKXxhdHR3fGF1KGRpfFxcLW18ciB8cyApfGF2YW58YmUoY2t8bGx8bnEpfGJpKGxifHJkKXxibChhY3xheil8YnIoZXx2KXd8YnVtYnxid1xcLShufHUpfGM1NVxcL3xjYXBpfGNjd2F8Y2RtXFwtfGNlbGx8Y2h0bXxjbGRjfGNtZFxcLXxjbyhtcHxuZCl8Y3Jhd3xkYShpdHxsbHxuZyl8ZGJ0ZXxkY1xcLXN8ZGV2aXxkaWNhfGRtb2J8ZG8oY3xwKW98ZHMoMTJ8XFwtZCl8ZWwoNDl8YWkpfGVtKGwyfHVsKXxlcihpY3xrMCl8ZXNsOHxleihbNC03XTB8b3N8d2F8emUpfGZldGN8Zmx5KFxcLXxfKXxnMSB1fGc1NjB8Z2VuZXxnZlxcLTV8Z1xcLW1vfGdvKFxcLnd8b2QpfGdyKGFkfHVuKXxoYWllfGhjaXR8aGRcXC0obXxwfHQpfGhlaVxcLXxoaShwdHx0YSl8aHAoIGl8aXApfGhzXFwtY3xodChjKFxcLXwgfF98YXxnfHB8c3x0KXx0cCl8aHUoYXd8dGMpfGlcXC0oMjB8Z298bWEpfGkyMzB8aWFjKCB8XFwtfFxcLyl8aWJyb3xpZGVhfGlnMDF8aWtvbXxpbTFrfGlubm98aXBhcXxpcmlzfGphKHR8dilhfGpicm98amVtdXxqaWdzfGtkZGl8a2VqaXxrZ3QoIHxcXC8pfGtsb258a3B0IHxrd2NcXC18a3lvKGN8ayl8bGUobm98eGkpfGxnKCBnfFxcLyhrfGx8dSl8NTB8NTR8XFwtW2Etd10pfGxpYnd8bHlueHxtMVxcLXd8bTNnYXxtNTBcXC98bWEodGV8dWl8eG8pfG1jKDAxfDIxfGNhKXxtXFwtY3J8bWUocmN8cmkpfG1pKG84fG9hfHRzKXxtbWVmfG1vKDAxfDAyfGJpfGRlfGRvfHQoXFwtfCB8b3x2KXx6eil8bXQoNTB8cDF8diApfG13YnB8bXl3YXxuMTBbMC0yXXxuMjBbMi0zXXxuMzAoMHwyKXxuNTAoMHwyfDUpfG43KDAoMHwxKXwxMCl8bmUoKGN8bSlcXC18b258dGZ8d2Z8d2d8d3QpfG5vayg2fGkpfG56cGh8bzJpbXxvcCh0aXx3dil8b3Jhbnxvd2cxfHA4MDB8cGFuKGF8ZHx0KXxwZHhnfHBnKDEzfFxcLShbMS04XXxjKSl8cGhpbHxwaXJlfHBsKGF5fHVjKXxwblxcLTJ8cG8oY2t8cnR8c2UpfHByb3h8cHNpb3xwdFxcLWd8cWFcXC1hfHFjKDA3fDEyfDIxfDMyfDYwfFxcLVsyLTddfGlcXC0pfHF0ZWt8cjM4MHxyNjAwfHJha3N8cmltOXxybyh2ZXx6byl8czU1XFwvfHNhKGdlfG1hfG1tfG1zfG55fHZhKXxzYygwMXxoXFwtfG9vfHBcXC0pfHNka1xcL3xzZShjKFxcLXwwfDEpfDQ3fG1jfG5kfHJpKXxzZ2hcXC18c2hhcnxzaWUoXFwtfG0pfHNrXFwtMHxzbCg0NXxpZCl8c20oYWx8YXJ8YjN8aXR8dDUpfHNvKGZ0fG55KXxzcCgwMXxoXFwtfHZcXC18diApfHN5KDAxfG1iKXx0MigxOHw1MCl8dDYoMDB8MTB8MTgpfHRhKGd0fGxrKXx0Y2xcXC18dGRnXFwtfHRlbChpfG0pfHRpbVxcLXx0XFwtbW98dG8ocGx8c2gpfHRzKDcwfG1cXC18bTN8bTUpfHR4XFwtOXx1cChcXC5ifGcxfHNpKXx1dHN0fHY0MDB8djc1MHx2ZXJpfHZpKHJnfHRlKXx2ayg0MHw1WzAtM118XFwtdil8dm00MHx2b2RhfHZ1bGN8dngoNTJ8NTN8NjB8NjF8NzB8ODB8ODF8ODN8ODV8OTgpfHczYyhcXC18ICl8d2ViY3x3aGl0fHdpKGcgfG5jfG53KXx3bWxifHdvbnV8eDcwMHx5YXNcXC18eW91cnx6ZXRvfHp0ZVxcLS9pLnRlc3QoYS5zdWJzdHIoMCw0KSkpY2hlY2sgPSB0cnVlfSkobmF2aWdhdG9yLnVzZXJBZ2VudHx8bmF2aWdhdG9yLnZlbmRvcnx8d2luZG93Lm9wZXJhKTtcclxuICByZXR1cm4gY2hlY2s7XHJcbn07XHJcblxyXG5VdGlsLmV4dGVuZCA9IG9iamVjdEFzc2lnbjtcclxuXHJcblV0aWwuc2FmYXJpQ3NzU2l6ZVdvcmthcm91bmQgPSBmdW5jdGlvbihjYW52YXMpIHtcclxuICAvLyBUT0RPKHNtdXMpOiBSZW1vdmUgdGhpcyB3b3JrYXJvdW5kIHdoZW4gU2FmYXJpIGZvciBpT1MgaXMgZml4ZWQuXHJcbiAgLy8gaU9TIG9ubHkgd29ya2Fyb3VuZCAoZm9yIGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3dfYnVnLmNnaT9pZD0xNTI1NTYpLlxyXG4gIC8vXHJcbiAgLy8gXCJUbyB0aGUgbGFzdCBJIGdyYXBwbGUgd2l0aCB0aGVlO1xyXG4gIC8vICBmcm9tIGhlbGwncyBoZWFydCBJIHN0YWIgYXQgdGhlZTtcclxuICAvLyAgZm9yIGhhdGUncyBzYWtlIEkgc3BpdCBteSBsYXN0IGJyZWF0aCBhdCB0aGVlLlwiXHJcbiAgLy8gLS0gTW9ieSBEaWNrLCBieSBIZXJtYW4gTWVsdmlsbGVcclxuICBpZiAoVXRpbC5pc0lPUygpKSB7XHJcbiAgICB2YXIgd2lkdGggPSBjYW52YXMuc3R5bGUud2lkdGg7XHJcbiAgICB2YXIgaGVpZ2h0ID0gY2FudmFzLnN0eWxlLmhlaWdodDtcclxuICAgIGNhbnZhcy5zdHlsZS53aWR0aCA9IChwYXJzZUludCh3aWR0aCkgKyAxKSArICdweCc7XHJcbiAgICBjYW52YXMuc3R5bGUuaGVpZ2h0ID0gKHBhcnNlSW50KGhlaWdodCkpICsgJ3B4JztcclxuICAgIGNvbnNvbGUubG9nKCdSZXNldHRpbmcgd2lkdGggdG8uLi4nLCB3aWR0aCk7XHJcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICBjb25zb2xlLmxvZygnRG9uZS4gV2lkdGggaXMgbm93Jywgd2lkdGgpO1xyXG4gICAgICBjYW52YXMuc3R5bGUud2lkdGggPSB3aWR0aDtcclxuICAgICAgY2FudmFzLnN0eWxlLmhlaWdodCA9IGhlaWdodDtcclxuICAgIH0sIDEwMCk7XHJcbiAgfVxyXG5cclxuICAvLyBEZWJ1ZyBvbmx5LlxyXG4gIHdpbmRvdy5VdGlsID0gVXRpbDtcclxuICB3aW5kb3cuY2FudmFzID0gY2FudmFzO1xyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBVdGlsO1xyXG5cclxufSx7XCJvYmplY3QtYXNzaWduXCI6MX1dLDIzOltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcclxuLypcclxuICogQ29weXJpZ2h0IDIwMTUgR29vZ2xlIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5cclxudmFyIEVtaXR0ZXIgPSBfZGVyZXFfKCcuL2VtaXR0ZXIuanMnKTtcclxudmFyIFV0aWwgPSBfZGVyZXFfKCcuL3V0aWwuanMnKTtcclxudmFyIERldmljZUluZm8gPSBfZGVyZXFfKCcuL2RldmljZS1pbmZvLmpzJyk7XHJcblxyXG52YXIgREVGQVVMVF9WSUVXRVIgPSAnQ2FyZGJvYXJkVjEnO1xyXG52YXIgVklFV0VSX0tFWSA9ICdXRUJWUl9DQVJEQk9BUkRfVklFV0VSJztcclxudmFyIENMQVNTX05BTUUgPSAnd2VidnItcG9seWZpbGwtdmlld2VyLXNlbGVjdG9yJztcclxuXHJcbi8qKlxyXG4gKiBDcmVhdGVzIGEgdmlld2VyIHNlbGVjdG9yIHdpdGggdGhlIG9wdGlvbnMgc3BlY2lmaWVkLiBTdXBwb3J0cyBiZWluZyBzaG93blxyXG4gKiBhbmQgaGlkZGVuLiBHZW5lcmF0ZXMgZXZlbnRzIHdoZW4gdmlld2VyIHBhcmFtZXRlcnMgY2hhbmdlLiBBbHNvIHN1cHBvcnRzXHJcbiAqIHNhdmluZyB0aGUgY3VycmVudGx5IHNlbGVjdGVkIGluZGV4IGluIGxvY2FsU3RvcmFnZS5cclxuICovXHJcbmZ1bmN0aW9uIFZpZXdlclNlbGVjdG9yKCkge1xyXG4gIC8vIFRyeSB0byBsb2FkIHRoZSBzZWxlY3RlZCBrZXkgZnJvbSBsb2NhbCBzdG9yYWdlLiBJZiBub25lIGV4aXN0cywgdXNlIHRoZVxyXG4gIC8vIGRlZmF1bHQga2V5LlxyXG4gIHRyeSB7XHJcbiAgICB0aGlzLnNlbGVjdGVkS2V5ID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oVklFV0VSX0tFWSkgfHwgREVGQVVMVF9WSUVXRVI7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBsb2FkIHZpZXdlciBwcm9maWxlOiAlcycsIGVycm9yKTtcclxuICB9XHJcbiAgdGhpcy5kaWFsb2cgPSB0aGlzLmNyZWF0ZURpYWxvZ18oRGV2aWNlSW5mby5WaWV3ZXJzKTtcclxuICB0aGlzLnJvb3QgPSBudWxsO1xyXG59XHJcblZpZXdlclNlbGVjdG9yLnByb3RvdHlwZSA9IG5ldyBFbWl0dGVyKCk7XHJcblxyXG5WaWV3ZXJTZWxlY3Rvci5wcm90b3R5cGUuc2hvdyA9IGZ1bmN0aW9uKHJvb3QpIHtcclxuICB0aGlzLnJvb3QgPSByb290O1xyXG5cclxuICByb290LmFwcGVuZENoaWxkKHRoaXMuZGlhbG9nKTtcclxuICAvL2NvbnNvbGUubG9nKCdWaWV3ZXJTZWxlY3Rvci5zaG93Jyk7XHJcblxyXG4gIC8vIEVuc3VyZSB0aGUgY3VycmVudGx5IHNlbGVjdGVkIGl0ZW0gaXMgY2hlY2tlZC5cclxuICB2YXIgc2VsZWN0ZWQgPSB0aGlzLmRpYWxvZy5xdWVyeVNlbGVjdG9yKCcjJyArIHRoaXMuc2VsZWN0ZWRLZXkpO1xyXG4gIHNlbGVjdGVkLmNoZWNrZWQgPSB0cnVlO1xyXG5cclxuICAvLyBTaG93IHRoZSBVSS5cclxuICB0aGlzLmRpYWxvZy5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcclxufTtcclxuXHJcblZpZXdlclNlbGVjdG9yLnByb3RvdHlwZS5oaWRlID0gZnVuY3Rpb24oKSB7XHJcbiAgaWYgKHRoaXMucm9vdCAmJiB0aGlzLnJvb3QuY29udGFpbnModGhpcy5kaWFsb2cpKSB7XHJcbiAgICB0aGlzLnJvb3QucmVtb3ZlQ2hpbGQodGhpcy5kaWFsb2cpO1xyXG4gIH1cclxuICAvL2NvbnNvbGUubG9nKCdWaWV3ZXJTZWxlY3Rvci5oaWRlJyk7XHJcbiAgdGhpcy5kaWFsb2cuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxufTtcclxuXHJcblZpZXdlclNlbGVjdG9yLnByb3RvdHlwZS5nZXRDdXJyZW50Vmlld2VyID0gZnVuY3Rpb24oKSB7XHJcbiAgcmV0dXJuIERldmljZUluZm8uVmlld2Vyc1t0aGlzLnNlbGVjdGVkS2V5XTtcclxufTtcclxuXHJcblZpZXdlclNlbGVjdG9yLnByb3RvdHlwZS5nZXRTZWxlY3RlZEtleV8gPSBmdW5jdGlvbigpIHtcclxuICB2YXIgaW5wdXQgPSB0aGlzLmRpYWxvZy5xdWVyeVNlbGVjdG9yKCdpbnB1dFtuYW1lPWZpZWxkXTpjaGVja2VkJyk7XHJcbiAgaWYgKGlucHV0KSB7XHJcbiAgICByZXR1cm4gaW5wdXQuaWQ7XHJcbiAgfVxyXG4gIHJldHVybiBudWxsO1xyXG59O1xyXG5cclxuVmlld2VyU2VsZWN0b3IucHJvdG90eXBlLm9uU2F2ZV8gPSBmdW5jdGlvbigpIHtcclxuICB0aGlzLnNlbGVjdGVkS2V5ID0gdGhpcy5nZXRTZWxlY3RlZEtleV8oKTtcclxuICBpZiAoIXRoaXMuc2VsZWN0ZWRLZXkgfHwgIURldmljZUluZm8uVmlld2Vyc1t0aGlzLnNlbGVjdGVkS2V5XSkge1xyXG4gICAgY29uc29sZS5lcnJvcignVmlld2VyU2VsZWN0b3Iub25TYXZlXzogdGhpcyBzaG91bGQgbmV2ZXIgaGFwcGVuIScpO1xyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuXHJcbiAgdGhpcy5lbWl0KCdjaGFuZ2UnLCBEZXZpY2VJbmZvLlZpZXdlcnNbdGhpcy5zZWxlY3RlZEtleV0pO1xyXG5cclxuICAvLyBBdHRlbXB0IHRvIHNhdmUgdGhlIHZpZXdlciBwcm9maWxlLCBidXQgZmFpbHMgaW4gcHJpdmF0ZSBtb2RlLlxyXG4gIHRyeSB7XHJcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShWSUVXRVJfS0VZLCB0aGlzLnNlbGVjdGVkS2V5KTtcclxuICB9IGNhdGNoKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gc2F2ZSB2aWV3ZXIgcHJvZmlsZTogJXMnLCBlcnJvcik7XHJcbiAgfVxyXG4gIHRoaXMuaGlkZSgpO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIENyZWF0ZXMgdGhlIGRpYWxvZy5cclxuICovXHJcblZpZXdlclNlbGVjdG9yLnByb3RvdHlwZS5jcmVhdGVEaWFsb2dfID0gZnVuY3Rpb24ob3B0aW9ucykge1xyXG4gIHZhciBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICBjb250YWluZXIuY2xhc3NMaXN0LmFkZChDTEFTU19OQU1FKTtcclxuICBjb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAvLyBDcmVhdGUgYW4gb3ZlcmxheSB0aGF0IGRpbXMgdGhlIGJhY2tncm91bmQsIGFuZCB3aGljaCBnb2VzIGF3YXkgd2hlbiB5b3VcclxuICAvLyB0YXAgaXQuXHJcbiAgdmFyIG92ZXJsYXkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICB2YXIgcyA9IG92ZXJsYXkuc3R5bGU7XHJcbiAgcy5wb3NpdGlvbiA9ICdmaXhlZCc7XHJcbiAgcy5sZWZ0ID0gMDtcclxuICBzLnRvcCA9IDA7XHJcbiAgcy53aWR0aCA9ICcxMDAlJztcclxuICBzLmhlaWdodCA9ICcxMDAlJztcclxuICBzLmJhY2tncm91bmQgPSAncmdiYSgwLCAwLCAwLCAwLjMpJztcclxuICBvdmVybGF5LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5oaWRlLmJpbmQodGhpcykpO1xyXG5cclxuICB2YXIgd2lkdGggPSAyODA7XHJcbiAgdmFyIGRpYWxvZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gIHZhciBzID0gZGlhbG9nLnN0eWxlO1xyXG4gIHMuYm94U2l6aW5nID0gJ2JvcmRlci1ib3gnO1xyXG4gIHMucG9zaXRpb24gPSAnZml4ZWQnO1xyXG4gIHMudG9wID0gJzI0cHgnO1xyXG4gIHMubGVmdCA9ICc1MCUnO1xyXG4gIHMubWFyZ2luTGVmdCA9ICgtd2lkdGgvMikgKyAncHgnO1xyXG4gIHMud2lkdGggPSB3aWR0aCArICdweCc7XHJcbiAgcy5wYWRkaW5nID0gJzI0cHgnO1xyXG4gIHMub3ZlcmZsb3cgPSAnaGlkZGVuJztcclxuICBzLmJhY2tncm91bmQgPSAnI2ZhZmFmYSc7XHJcbiAgcy5mb250RmFtaWx5ID0gXCInUm9ib3RvJywgc2Fucy1zZXJpZlwiO1xyXG4gIHMuYm94U2hhZG93ID0gJzBweCA1cHggMjBweCAjNjY2JztcclxuXHJcbiAgZGlhbG9nLmFwcGVuZENoaWxkKHRoaXMuY3JlYXRlSDFfKCdTZWxlY3QgeW91ciB2aWV3ZXInKSk7XHJcbiAgZm9yICh2YXIgaWQgaW4gb3B0aW9ucykge1xyXG4gICAgZGlhbG9nLmFwcGVuZENoaWxkKHRoaXMuY3JlYXRlQ2hvaWNlXyhpZCwgb3B0aW9uc1tpZF0ubGFiZWwpKTtcclxuICB9XHJcbiAgZGlhbG9nLmFwcGVuZENoaWxkKHRoaXMuY3JlYXRlQnV0dG9uXygnU2F2ZScsIHRoaXMub25TYXZlXy5iaW5kKHRoaXMpKSk7XHJcblxyXG4gIGNvbnRhaW5lci5hcHBlbmRDaGlsZChvdmVybGF5KTtcclxuICBjb250YWluZXIuYXBwZW5kQ2hpbGQoZGlhbG9nKTtcclxuXHJcbiAgcmV0dXJuIGNvbnRhaW5lcjtcclxufTtcclxuXHJcblZpZXdlclNlbGVjdG9yLnByb3RvdHlwZS5jcmVhdGVIMV8gPSBmdW5jdGlvbihuYW1lKSB7XHJcbiAgdmFyIGgxID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaDEnKTtcclxuICB2YXIgcyA9IGgxLnN0eWxlO1xyXG4gIHMuY29sb3IgPSAnYmxhY2snO1xyXG4gIHMuZm9udFNpemUgPSAnMjBweCc7XHJcbiAgcy5mb250V2VpZ2h0ID0gJ2JvbGQnO1xyXG4gIHMubWFyZ2luVG9wID0gMDtcclxuICBzLm1hcmdpbkJvdHRvbSA9ICcyNHB4JztcclxuICBoMS5pbm5lckhUTUwgPSBuYW1lO1xyXG4gIHJldHVybiBoMTtcclxufTtcclxuXHJcblZpZXdlclNlbGVjdG9yLnByb3RvdHlwZS5jcmVhdGVDaG9pY2VfID0gZnVuY3Rpb24oaWQsIG5hbWUpIHtcclxuICAvKlxyXG4gIDxkaXYgY2xhc3M9XCJjaG9pY2VcIj5cclxuICA8aW5wdXQgaWQ9XCJ2MVwiIHR5cGU9XCJyYWRpb1wiIG5hbWU9XCJmaWVsZFwiIHZhbHVlPVwidjFcIj5cclxuICA8bGFiZWwgZm9yPVwidjFcIj5DYXJkYm9hcmQgVjE8L2xhYmVsPlxyXG4gIDwvZGl2PlxyXG4gICovXHJcbiAgdmFyIGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gIGRpdi5zdHlsZS5tYXJnaW5Ub3AgPSAnOHB4JztcclxuICBkaXYuc3R5bGUuY29sb3IgPSAnYmxhY2snO1xyXG5cclxuICB2YXIgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xyXG4gIGlucHV0LnN0eWxlLmZvbnRTaXplID0gJzMwcHgnO1xyXG4gIGlucHV0LnNldEF0dHJpYnV0ZSgnaWQnLCBpZCk7XHJcbiAgaW5wdXQuc2V0QXR0cmlidXRlKCd0eXBlJywgJ3JhZGlvJyk7XHJcbiAgaW5wdXQuc2V0QXR0cmlidXRlKCd2YWx1ZScsIGlkKTtcclxuICBpbnB1dC5zZXRBdHRyaWJ1dGUoJ25hbWUnLCAnZmllbGQnKTtcclxuXHJcbiAgdmFyIGxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGFiZWwnKTtcclxuICBsYWJlbC5zdHlsZS5tYXJnaW5MZWZ0ID0gJzRweCc7XHJcbiAgbGFiZWwuc2V0QXR0cmlidXRlKCdmb3InLCBpZCk7XHJcbiAgbGFiZWwuaW5uZXJIVE1MID0gbmFtZTtcclxuXHJcbiAgZGl2LmFwcGVuZENoaWxkKGlucHV0KTtcclxuICBkaXYuYXBwZW5kQ2hpbGQobGFiZWwpO1xyXG5cclxuICByZXR1cm4gZGl2O1xyXG59O1xyXG5cclxuVmlld2VyU2VsZWN0b3IucHJvdG90eXBlLmNyZWF0ZUJ1dHRvbl8gPSBmdW5jdGlvbihsYWJlbCwgb25jbGljaykge1xyXG4gIHZhciBidXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcclxuICBidXR0b24uaW5uZXJIVE1MID0gbGFiZWw7XHJcbiAgdmFyIHMgPSBidXR0b24uc3R5bGU7XHJcbiAgcy5mbG9hdCA9ICdyaWdodCc7XHJcbiAgcy50ZXh0VHJhbnNmb3JtID0gJ3VwcGVyY2FzZSc7XHJcbiAgcy5jb2xvciA9ICcjMTA5NGY3JztcclxuICBzLmZvbnRTaXplID0gJzE0cHgnO1xyXG4gIHMubGV0dGVyU3BhY2luZyA9IDA7XHJcbiAgcy5ib3JkZXIgPSAwO1xyXG4gIHMuYmFja2dyb3VuZCA9ICdub25lJztcclxuICBzLm1hcmdpblRvcCA9ICcxNnB4JztcclxuXHJcbiAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb25jbGljayk7XHJcblxyXG4gIHJldHVybiBidXR0b247XHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IFZpZXdlclNlbGVjdG9yO1xyXG5cclxufSx7XCIuL2RldmljZS1pbmZvLmpzXCI6NyxcIi4vZW1pdHRlci5qc1wiOjEyLFwiLi91dGlsLmpzXCI6MjJ9XSwyNDpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XHJcbi8qXHJcbiAqIENvcHlyaWdodCAyMDE1IEdvb2dsZSBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuXHJcbnZhciBVdGlsID0gX2RlcmVxXygnLi91dGlsLmpzJyk7XHJcblxyXG4vKipcclxuICogQW5kcm9pZCBhbmQgaU9TIGNvbXBhdGlibGUgd2FrZWxvY2sgaW1wbGVtZW50YXRpb24uXHJcbiAqXHJcbiAqIFJlZmFjdG9yZWQgdGhhbmtzIHRvIGRrb3ZhbGV2QC5cclxuICovXHJcbmZ1bmN0aW9uIEFuZHJvaWRXYWtlTG9jaygpIHtcclxuICB2YXIgdmlkZW8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd2aWRlbycpO1xyXG5cclxuICB2aWRlby5hZGRFdmVudExpc3RlbmVyKCdlbmRlZCcsIGZ1bmN0aW9uKCkge1xyXG4gICAgdmlkZW8ucGxheSgpO1xyXG4gIH0pO1xyXG5cclxuICB0aGlzLnJlcXVlc3QgPSBmdW5jdGlvbigpIHtcclxuICAgIGlmICh2aWRlby5wYXVzZWQpIHtcclxuICAgICAgLy8gQmFzZTY0IHZlcnNpb24gb2YgdmlkZW9zX3NyYy9uby1zbGVlcC0xMjBzLm1wNC5cclxuICAgICAgdmlkZW8uc3JjID0gVXRpbC5iYXNlNjQoJ3ZpZGVvL21wNCcsICdBQUFBR0daMGVYQnBjMjl0QUFBQUFHMXdOREZoZG1NeEFBQUlBMjF2YjNZQUFBQnNiWFpvWkFBQUFBRFNhOXY2MG12YitnQUJYNUFBbHcvZ0FBRUFBQUVBQUFBQUFBQUFBQUFBQUFBQkFBQUFBQUFBQUFBQUFBQUFBQUFBQVFBQUFBQUFBQUFBQUFBQUFBQUFRQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFJQUFBZGtkSEpoYXdBQUFGeDBhMmhrQUFBQUFkSnIyL3JTYTl2NkFBQUFBUUFBQUFBQWx3L2dBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUJBQUFBQUFBQUFBQUFBQUFBQUFBQUFRQUFBQUFBQUFBQUFBQUFBQUFBUUFBQUFBQVFBQUFBSEFBQUFBQUFKR1ZrZEhNQUFBQWNaV3h6ZEFBQUFBQUFBQUFCQUpjUDRBQUFBQUFBQVFBQUFBQUczRzFrYVdFQUFBQWdiV1JvWkFBQUFBRFNhOXY2MG12YitnQVBRa0FHam5lQUZjY0FBQUFBQUMxb1pHeHlBQUFBQUFBQUFBQjJhV1JsQUFBQUFBQUFBQUFBQUFBQVZtbGtaVzlJWVc1a2JHVnlBQUFBQm9kdGFXNW1BQUFBRkhadGFHUUFBQUFCQUFBQUFBQUFBQUFBQUFBa1pHbHVaZ0FBQUJ4a2NtVm1BQUFBQUFBQUFBRUFBQUFNZFhKc0lBQUFBQUVBQUFaSGMzUmliQUFBQUpkemRITmtBQUFBQUFBQUFBRUFBQUNIWVhaak1RQUFBQUFBQUFBQkFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBTUFCd0FTQUFBQUVnQUFBQUFBQUFBQVFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQmovL3dBQUFERmhkbU5EQVdRQUMvL2hBQmxuWkFBTHJObGZsbHc0UUFBQUF3QkFBQUFEQUtQRkNtV0FBUUFGYU92c3Npd0FBQUFZYzNSMGN3QUFBQUFBQUFBQkFBQUFiZ0FQUWtBQUFBQVVjM1J6Y3dBQUFBQUFBQUFCQUFBQUFRQUFBNEJqZEhSekFBQUFBQUFBQUc0QUFBQUJBRDBKQUFBQUFBRUFlaElBQUFBQUFRQTlDUUFBQUFBQkFBQUFBQUFBQUFFQUQwSkFBQUFBQVFCTVMwQUFBQUFCQUI2RWdBQUFBQUVBQUFBQUFBQUFBUUFQUWtBQUFBQUJBRXhMUUFBQUFBRUFIb1NBQUFBQUFRQUFBQUFBQUFBQkFBOUNRQUFBQUFFQVRFdEFBQUFBQVFBZWhJQUFBQUFCQUFBQUFBQUFBQUVBRDBKQUFBQUFBUUJNUzBBQUFBQUJBQjZFZ0FBQUFBRUFBQUFBQUFBQUFRQVBRa0FBQUFBQkFFeExRQUFBQUFFQUhvU0FBQUFBQVFBQUFBQUFBQUFCQUE5Q1FBQUFBQUVBVEV0QUFBQUFBUUFlaElBQUFBQUJBQUFBQUFBQUFBRUFEMEpBQUFBQUFRQk1TMEFBQUFBQkFCNkVnQUFBQUFFQUFBQUFBQUFBQVFBUFFrQUFBQUFCQUV4TFFBQUFBQUVBSG9TQUFBQUFBUUFBQUFBQUFBQUJBQTlDUUFBQUFBRUFURXRBQUFBQUFRQWVoSUFBQUFBQkFBQUFBQUFBQUFFQUQwSkFBQUFBQVFCTVMwQUFBQUFCQUI2RWdBQUFBQUVBQUFBQUFBQUFBUUFQUWtBQUFBQUJBRXhMUUFBQUFBRUFIb1NBQUFBQUFRQUFBQUFBQUFBQkFBOUNRQUFBQUFFQVRFdEFBQUFBQVFBZWhJQUFBQUFCQUFBQUFBQUFBQUVBRDBKQUFBQUFBUUJNUzBBQUFBQUJBQjZFZ0FBQUFBRUFBQUFBQUFBQUFRQVBRa0FBQUFBQkFFeExRQUFBQUFFQUhvU0FBQUFBQVFBQUFBQUFBQUFCQUE5Q1FBQUFBQUVBVEV0QUFBQUFBUUFlaElBQUFBQUJBQUFBQUFBQUFBRUFEMEpBQUFBQUFRQk1TMEFBQUFBQkFCNkVnQUFBQUFFQUFBQUFBQUFBQVFBUFFrQUFBQUFCQUV4TFFBQUFBQUVBSG9TQUFBQUFBUUFBQUFBQUFBQUJBQTlDUUFBQUFBRUFURXRBQUFBQUFRQWVoSUFBQUFBQkFBQUFBQUFBQUFFQUQwSkFBQUFBQVFCTVMwQUFBQUFCQUI2RWdBQUFBQUVBQUFBQUFBQUFBUUFQUWtBQUFBQUJBRXhMUUFBQUFBRUFIb1NBQUFBQUFRQUFBQUFBQUFBQkFBOUNRQUFBQUFFQVRFdEFBQUFBQVFBZWhJQUFBQUFCQUFBQUFBQUFBQUVBRDBKQUFBQUFBUUJNUzBBQUFBQUJBQjZFZ0FBQUFBRUFBQUFBQUFBQUFRQVBRa0FBQUFBQkFFeExRQUFBQUFFQUhvU0FBQUFBQVFBQUFBQUFBQUFCQUE5Q1FBQUFBQUVBVEV0QUFBQUFBUUFlaElBQUFBQUJBQUFBQUFBQUFBRUFEMEpBQUFBQUFRQk1TMEFBQUFBQkFCNkVnQUFBQUFFQUFBQUFBQUFBQVFBUFFrQUFBQUFCQUV4TFFBQUFBQUVBSG9TQUFBQUFBUUFBQUFBQUFBQUJBQTlDUUFBQUFBRUFMY2JBQUFBQUhITjBjMk1BQUFBQUFBQUFBUUFBQUFFQUFBQnVBQUFBQVFBQUFjeHpkSE42QUFBQUFBQUFBQUFBQUFCdUFBQURDUUFBQUJnQUFBQU9BQUFBRGdBQUFBd0FBQUFTQUFBQURnQUFBQXdBQUFBTUFBQUFFZ0FBQUE0QUFBQU1BQUFBREFBQUFCSUFBQUFPQUFBQURBQUFBQXdBQUFBU0FBQUFEZ0FBQUF3QUFBQU1BQUFBRWdBQUFBNEFBQUFNQUFBQURBQUFBQklBQUFBT0FBQUFEQUFBQUF3QUFBQVNBQUFBRGdBQUFBd0FBQUFNQUFBQUVnQUFBQTRBQUFBTUFBQUFEQUFBQUJJQUFBQU9BQUFBREFBQUFBd0FBQUFTQUFBQURnQUFBQXdBQUFBTUFBQUFFZ0FBQUE0QUFBQU1BQUFBREFBQUFCSUFBQUFPQUFBQURBQUFBQXdBQUFBU0FBQUFEZ0FBQUF3QUFBQU1BQUFBRWdBQUFBNEFBQUFNQUFBQURBQUFBQklBQUFBT0FBQUFEQUFBQUF3QUFBQVNBQUFBRGdBQUFBd0FBQUFNQUFBQUVnQUFBQTRBQUFBTUFBQUFEQUFBQUJJQUFBQU9BQUFBREFBQUFBd0FBQUFTQUFBQURnQUFBQXdBQUFBTUFBQUFFZ0FBQUE0QUFBQU1BQUFBREFBQUFCSUFBQUFPQUFBQURBQUFBQXdBQUFBU0FBQUFEZ0FBQUF3QUFBQU1BQUFBRWdBQUFBNEFBQUFNQUFBQURBQUFBQklBQUFBT0FBQUFEQUFBQUF3QUFBQVNBQUFBRGdBQUFBd0FBQUFNQUFBQUVnQUFBQTRBQUFBTUFBQUFEQUFBQUJNQUFBQVVjM1JqYndBQUFBQUFBQUFCQUFBSUt3QUFBQ3QxWkhSaEFBQUFJNmxsYm1NQUZ3QUFkbXhqSURJdU1pNHhJSE4wY21WaGJTQnZkWFJ3ZFhRQUFBQUlkMmxrWlFBQUNSUnRaR0YwQUFBQ3JnWC8vNnZjUmVtOTV0bEl0NVlzMkNEWkkrN3ZlREkyTkNBdElHTnZjbVVnTVRReUlDMGdTQzR5TmpRdlRWQkZSeTAwSUVGV1F5QmpiMlJsWXlBdElFTnZjSGxzWldaMElESXdNRE10TWpBeE5DQXRJR2gwZEhBNkx5OTNkM2N1ZG1sa1pXOXNZVzR1YjNKbkwzZ3lOalF1YUhSdGJDQXRJRzl3ZEdsdmJuTTZJR05oWW1GalBURWdjbVZtUFRNZ1pHVmliRzlqYXoweE9qQTZNQ0JoYm1Gc2VYTmxQVEI0TXpvd2VERXpJRzFsUFdobGVDQnpkV0p0WlQwM0lIQnplVDB4SUhCemVWOXlaRDB4TGpBd09qQXVNREFnYldsNFpXUmZjbVZtUFRFZ2JXVmZjbUZ1WjJVOU1UWWdZMmh5YjIxaFgyMWxQVEVnZEhKbGJHeHBjejB4SURoNE9HUmpkRDB4SUdOeGJUMHdJR1JsWVdSNmIyNWxQVEl4TERFeElHWmhjM1JmY0hOcmFYQTlNU0JqYUhKdmJXRmZjWEJmYjJabWMyVjBQUzB5SUhSb2NtVmhaSE05TVRJZ2JHOXZhMkZvWldGa1gzUm9jbVZoWkhNOU1TQnpiR2xqWldSZmRHaHlaV0ZrY3owd0lHNXlQVEFnWkdWamFXMWhkR1U5TVNCcGJuUmxjbXhoWTJWa1BUQWdZbXgxY21GNVgyTnZiWEJoZEQwd0lHTnZibk4wY21GcGJtVmtYMmx1ZEhKaFBUQWdZbVp5WVcxbGN6MHpJR0pmY0hseVlXMXBaRDB5SUdKZllXUmhjSFE5TVNCaVgySnBZWE05TUNCa2FYSmxZM1E5TVNCM1pXbG5hSFJpUFRFZ2IzQmxibDluYjNBOU1DQjNaV2xuYUhSd1BUSWdhMlY1YVc1MFBUSTFNQ0JyWlhscGJuUmZiV2x1UFRFZ2MyTmxibVZqZFhROU5EQWdhVzUwY21GZmNtVm1jbVZ6YUQwd0lISmpYMnh2YjJ0aGFHVmhaRDAwTUNCeVl6MWhZbklnYldKMGNtVmxQVEVnWW1sMGNtRjBaVDB4TURBZ2NtRjBaWFJ2YkQweExqQWdjV052YlhBOU1DNDJNQ0J4Y0cxcGJqMHhNQ0J4Y0cxaGVEMDFNU0J4Y0hOMFpYQTlOQ0JwY0Y5eVlYUnBiejB4TGpRd0lHRnhQVEU2TVM0d01BQ0FBQUFBVTJXSWhBQVEvOGx0bE9lK2NUWnVHa0tnK2FSdHVpdmNEWjBwQnNmc0VpOXAvaTF5VTlEeFMybHE0ZFhUaW5WaUYxVVJCS1hnbnpLQmQvVWgxYmtoSHRNcndyUmNPSnNsRDAxVUIrZnlhTDZlZitEQkFBQUFGRUdhSkd4QkQ1Qit2K2ErNFFxRjNNZ0JYejlNQUFBQUNrR2VRbmlILys5NHI2RUFBQUFLQVo1aGRFTi84UXl0d0FBQUFBZ0JubU5xUTMvRWdRQUFBQTVCbW1oSnFFRm9tVXdJSWYvKzRRQUFBQXBCbm9aRkVTdy8vNzZCQUFBQUNBR2VwWFJEZjhTQkFBQUFDQUdlcDJwRGY4U0FBQUFBRGtHYXJFbW9RV3laVEFnaC8vN2dBQUFBQ2tHZXlrVVZMRC8vdm9FQUFBQUlBWjdwZEVOL3hJQUFBQUFJQVo3cmFrTi94SUFBQUFBT1FacndTYWhCYkpsTUNDSC8vdUVBQUFBS1FaOE9SUlVzUC8rK2dRQUFBQWdCbnkxMFEzL0VnUUFBQUFnQm55OXFRMy9FZ0FBQUFBNUJtelJKcUVGc21Vd0lJZi8rNEFBQUFBcEJuMUpGRlN3Ly83NkJBQUFBQ0FHZmNYUkRmOFNBQUFBQUNBR2ZjMnBEZjhTQUFBQUFEa0diZUVtb1FXeVpUQWdoLy83aEFBQUFDa0dmbGtVVkxELy92b0FBQUFBSUFaKzFkRU4veElFQUFBQUlBWiszYWtOL3hJRUFBQUFPUVp1OFNhaEJiSmxNQ0NILy91QUFBQUFLUVovYVJSVXNQLysrZ1FBQUFBZ0JuL2wwUTMvRWdBQUFBQWdCbi90cVEzL0VnUUFBQUE1Qm0rQkpxRUZzbVV3SUlmLys0UUFBQUFwQm5oNUZGU3cvLzc2QUFBQUFDQUdlUFhSRGY4U0FBQUFBQ0FHZVAycERmOFNCQUFBQURrR2FKRW1vUVd5WlRBZ2gvLzdnQUFBQUNrR2VRa1VWTEQvL3ZvRUFBQUFJQVo1aGRFTi94SUFBQUFBSUFaNWpha04veElFQUFBQU9RWnBvU2FoQmJKbE1DQ0gvL3VFQUFBQUtRWjZHUlJVc1AvKytnUUFBQUFnQm5xVjBRMy9FZ1FBQUFBZ0JucWRxUTMvRWdBQUFBQTVCbXF4SnFFRnNtVXdJSWYvKzRBQUFBQXBCbnNwRkZTdy8vNzZCQUFBQUNBR2U2WFJEZjhTQUFBQUFDQUdlNjJwRGY4U0FBQUFBRGtHYThFbW9RV3laVEFnaC8vN2hBQUFBQ2tHZkRrVVZMRC8vdm9FQUFBQUlBWjh0ZEVOL3hJRUFBQUFJQVo4dmFrTi94SUFBQUFBT1FaczBTYWhCYkpsTUNDSC8vdUFBQUFBS1FaOVNSUlVzUC8rK2dRQUFBQWdCbjNGMFEzL0VnQUFBQUFnQm4zTnFRMy9FZ0FBQUFBNUJtM2hKcUVGc21Vd0lJZi8rNFFBQUFBcEJuNVpGRlN3Ly83NkFBQUFBQ0FHZnRYUkRmOFNCQUFBQUNBR2Z0MnBEZjhTQkFBQUFEa0didkVtb1FXeVpUQWdoLy83Z0FBQUFDa0dmMmtVVkxELy92b0VBQUFBSUFaLzVkRU4veElBQUFBQUlBWi83YWtOL3hJRUFBQUFPUVp2Z1NhaEJiSmxNQ0NILy91RUFBQUFLUVo0ZVJSVXNQLysrZ0FBQUFBZ0JuajEwUTMvRWdBQUFBQWdCbmo5cVEzL0VnUUFBQUE1Qm1pUkpxRUZzbVV3SUlmLys0QUFBQUFwQm5rSkZGU3cvLzc2QkFBQUFDQUdlWVhSRGY4U0FBQUFBQ0FHZVkycERmOFNCQUFBQURrR2FhRW1vUVd5WlRBZ2gvLzdoQUFBQUNrR2Voa1VWTEQvL3ZvRUFBQUFJQVo2bGRFTi94SUVBQUFBSUFaNm5ha04veElBQUFBQU9RWnFzU2FoQmJKbE1DQ0gvL3VBQUFBQUtRWjdLUlJVc1AvKytnUUFBQUFnQm51bDBRMy9FZ0FBQUFBZ0JudXRxUTMvRWdBQUFBQTVCbXZCSnFFRnNtVXdJSWYvKzRRQUFBQXBCbnc1RkZTdy8vNzZCQUFBQUNBR2ZMWFJEZjhTQkFBQUFDQUdmTDJwRGY4U0FBQUFBRGtHYk5FbW9RV3laVEFnaC8vN2dBQUFBQ2tHZlVrVVZMRC8vdm9FQUFBQUlBWjl4ZEVOL3hJQUFBQUFJQVo5emFrTi94SUFBQUFBT1FadDRTYWhCYkpsTUNDSC8vdUVBQUFBS1FaK1dSUlVzUC8rK2dBQUFBQWdCbjdWMFEzL0VnUUFBQUFnQm43ZHFRMy9FZ1FBQUFBNUJtN3hKcUVGc21Vd0lJZi8rNEFBQUFBcEJuOXBGRlN3Ly83NkJBQUFBQ0FHZitYUkRmOFNBQUFBQUNBR2YrMnBEZjhTQkFBQUFEa0diNEVtb1FXeVpUQWdoLy83aEFBQUFDa0dlSGtVVkxELy92b0FBQUFBSUFaNDlkRU4veElBQUFBQUlBWjQvYWtOL3hJRUFBQUFPUVpva1NhaEJiSmxNQ0NILy91QUFBQUFLUVo1Q1JSVXNQLysrZ1FBQUFBZ0JubUYwUTMvRWdBQUFBQWdCbm1OcVEzL0VnUUFBQUE1Qm1taEpxRUZzbVV3SUlmLys0UUFBQUFwQm5vWkZGU3cvLzc2QkFBQUFDQUdlcFhSRGY4U0JBQUFBQ0FHZXAycERmOFNBQUFBQURrR2FyRW1vUVd5WlRBZ2gvLzdnQUFBQUNrR2V5a1VWTEQvL3ZvRUFBQUFJQVo3cGRFTi94SUFBQUFBSUFaN3Jha04veElBQUFBQVBRWnJ1U2FoQmJKbE1GRXczLy83QicpO1xyXG4gICAgICB2aWRlby5wbGF5KCk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgdGhpcy5yZWxlYXNlID0gZnVuY3Rpb24oKSB7XHJcbiAgICB2aWRlby5wYXVzZSgpO1xyXG4gICAgdmlkZW8uc3JjID0gJyc7XHJcbiAgfTtcclxufVxyXG5cclxuZnVuY3Rpb24gaU9TV2FrZUxvY2soKSB7XHJcbiAgdmFyIHRpbWVyID0gbnVsbDtcclxuXHJcbiAgdGhpcy5yZXF1ZXN0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICBpZiAoIXRpbWVyKSB7XHJcbiAgICAgIHRpbWVyID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgd2luZG93LmxvY2F0aW9uID0gd2luZG93LmxvY2F0aW9uO1xyXG4gICAgICAgIHNldFRpbWVvdXQod2luZG93LnN0b3AsIDApO1xyXG4gICAgICB9LCAzMDAwMCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICB0aGlzLnJlbGVhc2UgPSBmdW5jdGlvbigpIHtcclxuICAgIGlmICh0aW1lcikge1xyXG4gICAgICBjbGVhckludGVydmFsKHRpbWVyKTtcclxuICAgICAgdGltZXIgPSBudWxsO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIGdldFdha2VMb2NrKCkge1xyXG4gIHZhciB1c2VyQWdlbnQgPSBuYXZpZ2F0b3IudXNlckFnZW50IHx8IG5hdmlnYXRvci52ZW5kb3IgfHwgd2luZG93Lm9wZXJhO1xyXG4gIGlmICh1c2VyQWdlbnQubWF0Y2goL2lQaG9uZS9pKSB8fCB1c2VyQWdlbnQubWF0Y2goL2lQb2QvaSkpIHtcclxuICAgIHJldHVybiBpT1NXYWtlTG9jaztcclxuICB9IGVsc2Uge1xyXG4gICAgcmV0dXJuIEFuZHJvaWRXYWtlTG9jaztcclxuICB9XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gZ2V0V2FrZUxvY2soKTtcclxufSx7XCIuL3V0aWwuanNcIjoyMn1dLDI1OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcclxuLypcclxuICogQ29weXJpZ2h0IDIwMTUgR29vZ2xlIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5cclxudmFyIENhcmRib2FyZFZSRGlzcGxheSA9IF9kZXJlcV8oJy4vY2FyZGJvYXJkLXZyLWRpc3BsYXkuanMnKTtcclxudmFyIE1vdXNlS2V5Ym9hcmRWUkRpc3BsYXkgPSBfZGVyZXFfKCcuL21vdXNlLWtleWJvYXJkLXZyLWRpc3BsYXkuanMnKTtcclxuLy8gVW5jb21tZW50IHRvIGFkZCBwb3NpdGlvbmFsIHRyYWNraW5nIHZpYSB3ZWJjYW0uXHJcbi8vdmFyIFdlYmNhbVBvc2l0aW9uU2Vuc29yVlJEZXZpY2UgPSByZXF1aXJlKCcuL3dlYmNhbS1wb3NpdGlvbi1zZW5zb3ItdnItZGV2aWNlLmpzJyk7XHJcbnZhciBWUkRpc3BsYXkgPSBfZGVyZXFfKCcuL2Jhc2UuanMnKS5WUkRpc3BsYXk7XHJcbnZhciBITURWUkRldmljZSA9IF9kZXJlcV8oJy4vYmFzZS5qcycpLkhNRFZSRGV2aWNlO1xyXG52YXIgUG9zaXRpb25TZW5zb3JWUkRldmljZSA9IF9kZXJlcV8oJy4vYmFzZS5qcycpLlBvc2l0aW9uU2Vuc29yVlJEZXZpY2U7XHJcbnZhciBWUkRpc3BsYXlITUREZXZpY2UgPSBfZGVyZXFfKCcuL2Rpc3BsYXktd3JhcHBlcnMuanMnKS5WUkRpc3BsYXlITUREZXZpY2U7XHJcbnZhciBWUkRpc3BsYXlQb3NpdGlvblNlbnNvckRldmljZSA9IF9kZXJlcV8oJy4vZGlzcGxheS13cmFwcGVycy5qcycpLlZSRGlzcGxheVBvc2l0aW9uU2Vuc29yRGV2aWNlO1xyXG5cclxuZnVuY3Rpb24gV2ViVlJQb2x5ZmlsbCgpIHtcclxuICB0aGlzLmRpc3BsYXlzID0gW107XHJcbiAgdGhpcy5kZXZpY2VzID0gW107IC8vIEZvciBkZXByZWNhdGVkIG9iamVjdHNcclxuICB0aGlzLmRldmljZXNQb3B1bGF0ZWQgPSBmYWxzZTtcclxuICB0aGlzLm5hdGl2ZVdlYlZSQXZhaWxhYmxlID0gdGhpcy5pc1dlYlZSQXZhaWxhYmxlKCk7XHJcbiAgdGhpcy5uYXRpdmVMZWdhY3lXZWJWUkF2YWlsYWJsZSA9IHRoaXMuaXNEZXByZWNhdGVkV2ViVlJBdmFpbGFibGUoKTtcclxuXHJcbiAgaWYgKCF0aGlzLm5hdGl2ZUxlZ2FjeVdlYlZSQXZhaWxhYmxlKSB7XHJcbiAgICBpZiAoIXRoaXMubmF0aXZlV2ViVlJBdmFpbGFibGUpIHtcclxuICAgICAgdGhpcy5lbmFibGVQb2x5ZmlsbCgpO1xyXG4gICAgfVxyXG4gICAgaWYgKFdlYlZSQ29uZmlnLkVOQUJMRV9ERVBSRUNBVEVEX0FQSSkge1xyXG4gICAgICB0aGlzLmVuYWJsZURlcHJlY2F0ZWRQb2x5ZmlsbCgpO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuV2ViVlJQb2x5ZmlsbC5wcm90b3R5cGUuaXNXZWJWUkF2YWlsYWJsZSA9IGZ1bmN0aW9uKCkge1xyXG4gIHJldHVybiAoJ2dldFZSRGlzcGxheXMnIGluIG5hdmlnYXRvcik7XHJcbn07XHJcblxyXG5XZWJWUlBvbHlmaWxsLnByb3RvdHlwZS5pc0RlcHJlY2F0ZWRXZWJWUkF2YWlsYWJsZSA9IGZ1bmN0aW9uKCkge1xyXG4gIHJldHVybiAoJ2dldFZSRGV2aWNlcycgaW4gbmF2aWdhdG9yKSB8fCAoJ21vekdldFZSRGV2aWNlcycgaW4gbmF2aWdhdG9yKTtcclxufTtcclxuXHJcbldlYlZSUG9seWZpbGwucHJvdG90eXBlLnBvcHVsYXRlRGV2aWNlcyA9IGZ1bmN0aW9uKCkge1xyXG4gIGlmICh0aGlzLmRldmljZXNQb3B1bGF0ZWQpIHtcclxuICAgIHJldHVybjtcclxuICB9XHJcblxyXG4gIC8vIEluaXRpYWxpemUgb3VyIHZpcnR1YWwgVlIgZGV2aWNlcy5cclxuICB2YXIgdnJEaXNwbGF5ID0gbnVsbDtcclxuXHJcbiAgLy8gQWRkIGEgQ2FyZGJvYXJkIFZSRGlzcGxheSBvbiBjb21wYXRpYmxlIG1vYmlsZSBkZXZpY2VzXHJcbiAgaWYgKHRoaXMuaXNDYXJkYm9hcmRDb21wYXRpYmxlKCkpIHtcclxuICAgIHZyRGlzcGxheSA9IG5ldyBDYXJkYm9hcmRWUkRpc3BsYXkoKTtcclxuICAgIHRoaXMuZGlzcGxheXMucHVzaCh2ckRpc3BsYXkpO1xyXG5cclxuICAgIC8vIEZvciBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eVxyXG4gICAgaWYgKFdlYlZSQ29uZmlnLkVOQUJMRV9ERVBSRUNBVEVEX0FQSSkge1xyXG4gICAgICB0aGlzLmRldmljZXMucHVzaChuZXcgVlJEaXNwbGF5SE1ERGV2aWNlKHZyRGlzcGxheSkpO1xyXG4gICAgICB0aGlzLmRldmljZXMucHVzaChuZXcgVlJEaXNwbGF5UG9zaXRpb25TZW5zb3JEZXZpY2UodnJEaXNwbGF5KSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBBZGQgYSBNb3VzZSBhbmQgS2V5Ym9hcmQgZHJpdmVuIFZSRGlzcGxheSBmb3IgZGVza3RvcHMvbGFwdG9wc1xyXG4gIGlmICghdGhpcy5pc01vYmlsZSgpICYmICFXZWJWUkNvbmZpZy5NT1VTRV9LRVlCT0FSRF9DT05UUk9MU19ESVNBQkxFRCkge1xyXG4gICAgdnJEaXNwbGF5ID0gbmV3IE1vdXNlS2V5Ym9hcmRWUkRpc3BsYXkoKTtcclxuICAgIHRoaXMuZGlzcGxheXMucHVzaCh2ckRpc3BsYXkpO1xyXG5cclxuICAgIC8vIEZvciBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eVxyXG4gICAgaWYgKFdlYlZSQ29uZmlnLkVOQUJMRV9ERVBSRUNBVEVEX0FQSSkge1xyXG4gICAgICB0aGlzLmRldmljZXMucHVzaChuZXcgVlJEaXNwbGF5SE1ERGV2aWNlKHZyRGlzcGxheSkpO1xyXG4gICAgICB0aGlzLmRldmljZXMucHVzaChuZXcgVlJEaXNwbGF5UG9zaXRpb25TZW5zb3JEZXZpY2UodnJEaXNwbGF5KSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBVbmNvbW1lbnQgdG8gYWRkIHBvc2l0aW9uYWwgdHJhY2tpbmcgdmlhIHdlYmNhbS5cclxuICAvL2lmICghdGhpcy5pc01vYmlsZSgpICYmIFdlYlZSQ29uZmlnLkVOQUJMRV9ERVBSRUNBVEVEX0FQSSkge1xyXG4gIC8vICBwb3NpdGlvbkRldmljZSA9IG5ldyBXZWJjYW1Qb3NpdGlvblNlbnNvclZSRGV2aWNlKCk7XHJcbiAgLy8gIHRoaXMuZGV2aWNlcy5wdXNoKHBvc2l0aW9uRGV2aWNlKTtcclxuICAvL31cclxuXHJcbiAgdGhpcy5kZXZpY2VzUG9wdWxhdGVkID0gdHJ1ZTtcclxufTtcclxuXHJcbldlYlZSUG9seWZpbGwucHJvdG90eXBlLmVuYWJsZVBvbHlmaWxsID0gZnVuY3Rpb24oKSB7XHJcbiAgLy8gUHJvdmlkZSBuYXZpZ2F0b3IuZ2V0VlJEaXNwbGF5cy5cclxuICBuYXZpZ2F0b3IuZ2V0VlJEaXNwbGF5cyA9IHRoaXMuZ2V0VlJEaXNwbGF5cy5iaW5kKHRoaXMpO1xyXG5cclxuICAvLyBQcm92aWRlIHRoZSBWUkRpc3BsYXkgb2JqZWN0LlxyXG4gIHdpbmRvdy5WUkRpc3BsYXkgPSBWUkRpc3BsYXk7XHJcbn07XHJcblxyXG5XZWJWUlBvbHlmaWxsLnByb3RvdHlwZS5lbmFibGVEZXByZWNhdGVkUG9seWZpbGwgPSBmdW5jdGlvbigpIHtcclxuICAvLyBQcm92aWRlIG5hdmlnYXRvci5nZXRWUkRldmljZXMuXHJcbiAgbmF2aWdhdG9yLmdldFZSRGV2aWNlcyA9IHRoaXMuZ2V0VlJEZXZpY2VzLmJpbmQodGhpcyk7XHJcblxyXG4gIC8vIFByb3ZpZGUgdGhlIENhcmRib2FyZEhNRFZSRGV2aWNlIGFuZCBQb3NpdGlvblNlbnNvclZSRGV2aWNlIG9iamVjdHMuXHJcbiAgd2luZG93LkhNRFZSRGV2aWNlID0gSE1EVlJEZXZpY2U7XHJcbiAgd2luZG93LlBvc2l0aW9uU2Vuc29yVlJEZXZpY2UgPSBQb3NpdGlvblNlbnNvclZSRGV2aWNlO1xyXG59O1xyXG5cclxuV2ViVlJQb2x5ZmlsbC5wcm90b3R5cGUuZ2V0VlJEaXNwbGF5cyA9IGZ1bmN0aW9uKCkge1xyXG4gIHRoaXMucG9wdWxhdGVEZXZpY2VzKCk7XHJcbiAgdmFyIGRpc3BsYXlzID0gdGhpcy5kaXNwbGF5cztcclxuICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICB0cnkge1xyXG4gICAgICByZXNvbHZlKGRpc3BsYXlzKTtcclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgcmVqZWN0KGUpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG59O1xyXG5cclxuV2ViVlJQb2x5ZmlsbC5wcm90b3R5cGUuZ2V0VlJEZXZpY2VzID0gZnVuY3Rpb24oKSB7XHJcbiAgY29uc29sZS53YXJuKCdnZXRWUkRldmljZXMgaXMgZGVwcmVjYXRlZC4gUGxlYXNlIHVwZGF0ZSB5b3VyIGNvZGUgdG8gdXNlIGdldFZSRGlzcGxheXMgaW5zdGVhZC4nKTtcclxuICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgaWYgKCFzZWxmLmRldmljZXNQb3B1bGF0ZWQpIHtcclxuICAgICAgICBpZiAoc2VsZi5uYXRpdmVXZWJWUkF2YWlsYWJsZSkge1xyXG4gICAgICAgICAgcmV0dXJuIG5hdmlnYXRvci5nZXRWUkRpc3BsYXlzKGZ1bmN0aW9uKGRpc3BsYXlzKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGlzcGxheXMubGVuZ3RoOyArK2kpIHtcclxuICAgICAgICAgICAgICBzZWxmLmRldmljZXMucHVzaChuZXcgVlJEaXNwbGF5SE1ERGV2aWNlKGRpc3BsYXlzW2ldKSk7XHJcbiAgICAgICAgICAgICAgc2VsZi5kZXZpY2VzLnB1c2gobmV3IFZSRGlzcGxheVBvc2l0aW9uU2Vuc29yRGV2aWNlKGRpc3BsYXlzW2ldKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc2VsZi5kZXZpY2VzUG9wdWxhdGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgcmVzb2x2ZShzZWxmLmRldmljZXMpO1xyXG4gICAgICAgICAgfSwgcmVqZWN0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChzZWxmLm5hdGl2ZUxlZ2FjeVdlYlZSQXZhaWxhYmxlKSB7XHJcbiAgICAgICAgICByZXR1cm4gKG5hdmlnYXRvci5nZXRWUkREZXZpY2VzIHx8IG5hdmlnYXRvci5tb3pHZXRWUkRldmljZXMpKGZ1bmN0aW9uKGRldmljZXMpIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkZXZpY2VzLmxlbmd0aDsgKytpKSB7XHJcbiAgICAgICAgICAgICAgaWYgKGRldmljZXNbaV0gaW5zdGFuY2VvZiBITURWUkRldmljZSkge1xyXG4gICAgICAgICAgICAgICAgc2VsZi5kZXZpY2VzLnB1c2goZGV2aWNlc1tpXSk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIGlmIChkZXZpY2VzW2ldIGluc3RhbmNlb2YgUG9zaXRpb25TZW5zb3JWUkRldmljZSkge1xyXG4gICAgICAgICAgICAgICAgc2VsZi5kZXZpY2VzLnB1c2goZGV2aWNlc1tpXSk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHNlbGYuZGV2aWNlc1BvcHVsYXRlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIHJlc29sdmUoc2VsZi5kZXZpY2VzKTtcclxuICAgICAgICAgIH0sIHJlamVjdCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICBzZWxmLnBvcHVsYXRlRGV2aWNlcygpO1xyXG4gICAgICByZXNvbHZlKHNlbGYuZGV2aWNlcyk7XHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgIHJlamVjdChlKTtcclxuICAgIH1cclxuICB9KTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBEZXRlcm1pbmUgaWYgYSBkZXZpY2UgaXMgbW9iaWxlLlxyXG4gKi9cclxuV2ViVlJQb2x5ZmlsbC5wcm90b3R5cGUuaXNNb2JpbGUgPSBmdW5jdGlvbigpIHtcclxuICByZXR1cm4gL0FuZHJvaWQvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpIHx8XHJcbiAgICAgIC9pUGhvbmV8aVBhZHxpUG9kL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTtcclxufTtcclxuXHJcbldlYlZSUG9seWZpbGwucHJvdG90eXBlLmlzQ2FyZGJvYXJkQ29tcGF0aWJsZSA9IGZ1bmN0aW9uKCkge1xyXG4gIC8vIEZvciBub3csIHN1cHBvcnQgYWxsIGlPUyBhbmQgQW5kcm9pZCBkZXZpY2VzLlxyXG4gIC8vIEFsc28gZW5hYmxlIHRoZSBXZWJWUkNvbmZpZy5GT1JDRV9WUiBmbGFnIGZvciBkZWJ1Z2dpbmcuXHJcbiAgcmV0dXJuIHRoaXMuaXNNb2JpbGUoKSB8fCBXZWJWUkNvbmZpZy5GT1JDRV9FTkFCTEVfVlI7XHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IFdlYlZSUG9seWZpbGw7XHJcblxyXG59LHtcIi4vYmFzZS5qc1wiOjIsXCIuL2NhcmRib2FyZC12ci1kaXNwbGF5LmpzXCI6NSxcIi4vZGlzcGxheS13cmFwcGVycy5qc1wiOjgsXCIuL21vdXNlLWtleWJvYXJkLXZyLWRpc3BsYXkuanNcIjoxNX1dfSx7fSxbMTNdKTtcclxuIiwidmFyIEV2ZW50RW1pdHRlciA9IHJlcXVpcmUoJ2V2ZW50ZW1pdHRlcjMnKTtcclxudmFyIHNoYWthID0gcmVxdWlyZSgnc2hha2EtcGxheWVyJyk7XHJcblxyXG52YXIgVHlwZXMgPSB7XHJcbiAgSExTOiAxLFxyXG4gIERBU0g6IDIsXHJcbiAgVklERU86IDNcclxufTtcclxuXHJcbnZhciBERUZBVUxUX0JJVFNfUEVSX1NFQ09ORCA9IDEwMDAwMDA7XHJcblxyXG4vKipcclxuICogU3VwcG9ydHMgcmVndWxhciB2aWRlbyBVUkxzIChlZy4gbXA0KSwgYXMgd2VsbCBhcyBhZGFwdGl2ZSBtYW5pZmVzdHMgbGlrZVxyXG4gKiBEQVNIICgubXBkKSBhbmQgc29vbiBITFMgKC5tM3U4KS5cclxuICpcclxuICogRXZlbnRzOlxyXG4gKiAgIGxvYWQodmlkZW8pOiBXaGVuIHRoZSB2aWRlbyBpcyBsb2FkZWQuXHJcbiAqICAgZXJyb3IobWVzc2FnZSk6IElmIGFuIGVycm9yIG9jY3Vycy5cclxuICpcclxuICogVG8gcGxheS9wYXVzZS9zZWVrL2V0YywgcGxlYXNlIHVzZSB0aGUgdW5kZXJseWluZyB2aWRlbyBlbGVtZW50LlxyXG4gKi9cclxuZnVuY3Rpb24gQWRhcHRpdmVQbGF5ZXIoKSB7XHJcbiAgdGhpcy52aWRlbyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3ZpZGVvJyk7XHJcbiAgdGhpcy52aWRlby5sb29wID0gdHJ1ZTtcclxuICAvLyBFbmFibGUgaW5saW5lIHZpZGVvIHBsYXliYWNrIGluIGlPUyAxMCsuXHJcbiAgdGhpcy52aWRlby5zZXRBdHRyaWJ1dGUoJ3BsYXlzaW5saW5lJywgdHJ1ZSk7XHJcbiAgdGhpcy52aWRlby5zZXRBdHRyaWJ1dGUoJ2Nyb3Nzb3JpZ2luJywgJ2Fub255bW91cycpO1xyXG59XHJcbkFkYXB0aXZlUGxheWVyLnByb3RvdHlwZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuXHJcbkFkYXB0aXZlUGxheWVyLnByb3RvdHlwZS5sb2FkID0gZnVuY3Rpb24odXJsKSB7XHJcbiAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gIC8vIFRPRE8oc211cyk6IEludmVzdGlnYXRlIHdoZXRoZXIgb3Igbm90IGRpZmZlcmVudGlhdGlvbiBpcyBiZXN0IGRvbmUgYnlcclxuICAvLyBtaW1lVHlwZSBhZnRlciBhbGwuIEN1cnNvcnkgcmVzZWFyY2ggc3VnZ2VzdHMgdGhhdCBhZGFwdGl2ZSBzdHJlYW1pbmdcclxuICAvLyBtYW5pZmVzdCBtaW1lIHR5cGVzIGFyZW4ndCBwcm9wZXJseSBzdXBwb3J0ZWQuXHJcbiAgLy9cclxuICAvLyBGb3Igbm93LCBtYWtlIGRldGVybWluYXRpb24gYmFzZWQgb24gZXh0ZW5zaW9uLlxyXG4gIHZhciBleHRlbnNpb24gPSBVdGlsLmdldEV4dGVuc2lvbih1cmwpO1xyXG4gIHN3aXRjaCAoZXh0ZW5zaW9uKSB7XHJcbiAgICBjYXNlICdtM3U4JzogLy8gSExTXHJcbiAgICAgIHRoaXMudHlwZSA9IFR5cGVzLkhMUztcclxuICAgICAgaWYgKFV0aWwuaXNTYWZhcmkoKSkge1xyXG4gICAgICAgIHRoaXMubG9hZFZpZGVvXyh1cmwpLnRoZW4oZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBzZWxmLmVtaXQoJ2xvYWQnLCBzZWxmLnZpZGVvKTtcclxuICAgICAgICB9KS5jYXRjaCh0aGlzLm9uRXJyb3JfLmJpbmQodGhpcykpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHNlbGYub25FcnJvcl8oJ0hMUyBpcyBvbmx5IHN1cHBvcnRlZCBvbiBTYWZhcmkuJyk7XHJcbiAgICAgIH1cclxuICAgICAgYnJlYWs7XHJcbiAgICBjYXNlICdtcGQnOiAvLyBNUEVHLURBU0hcclxuICAgICAgdGhpcy50eXBlID0gVHlwZXMuREFTSDtcclxuICAgICAgdGhpcy5sb2FkU2hha2FWaWRlb18odXJsKS50aGVuKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdUaGUgdmlkZW8gaGFzIG5vdyBiZWVuIGxvYWRlZCEnKTtcclxuICAgICAgICBzZWxmLmVtaXQoJ2xvYWQnLCBzZWxmLnZpZGVvKTtcclxuICAgICAgfSkuY2F0Y2godGhpcy5vbkVycm9yXy5iaW5kKHRoaXMpKTtcclxuICAgICAgYnJlYWs7XHJcbiAgICBkZWZhdWx0OiAvLyBBIHJlZ3VsYXIgdmlkZW8sIG5vdCBhbiBhZGFwdGl2ZSBtYW5pZmVzdC5cclxuICAgICAgdGhpcy50eXBlID0gVHlwZXMuVklERU87XHJcbiAgICAgIHRoaXMubG9hZFZpZGVvXyh1cmwpLnRoZW4oZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgc2VsZi5lbWl0KCdsb2FkJywgc2VsZi52aWRlbyk7XHJcbiAgICAgIH0pLmNhdGNoKHRoaXMub25FcnJvcl8uYmluZCh0aGlzKSk7XHJcbiAgICAgIGJyZWFrO1xyXG4gIH1cclxufTtcclxuXHJcbkFkYXB0aXZlUGxheWVyLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24oKSB7XHJcbiAgdGhpcy52aWRlby5wYXVzZSgpO1xyXG4gIHRoaXMudmlkZW8uc3JjID0gJyc7XHJcbiAgdGhpcy52aWRlbyA9IG51bGw7XHJcbn07XHJcblxyXG4vKioqIFBSSVZBVEUgQVBJICoqKi9cclxuXHJcbkFkYXB0aXZlUGxheWVyLnByb3RvdHlwZS5vbkVycm9yXyA9IGZ1bmN0aW9uKGUpIHtcclxuICBjb25zb2xlLmVycm9yKGUpO1xyXG4gIHRoaXMuZW1pdCgnZXJyb3InLCBlKTtcclxufTtcclxuXHJcbkFkYXB0aXZlUGxheWVyLnByb3RvdHlwZS5sb2FkVmlkZW9fID0gZnVuY3Rpb24odXJsKSB7XHJcbiAgdmFyIHZpZGVvID0gdGhpcy52aWRlbztcclxuICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICB2aWRlby5zcmMgPSB1cmw7XHJcbiAgICB2aWRlby5hZGRFdmVudExpc3RlbmVyKCdjYW5wbGF5dGhyb3VnaCcsIHJlc29sdmUpO1xyXG4gICAgdmlkZW8uYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCByZWplY3QpO1xyXG4gICAgdmlkZW8ubG9hZCgpO1xyXG4gIH0pO1xyXG59O1xyXG5cclxuQWRhcHRpdmVQbGF5ZXIucHJvdG90eXBlLmluaXRTaGFrYV8gPSBmdW5jdGlvbigpIHtcclxuICB0aGlzLnBsYXllciA9IG5ldyBzaGFrYS5QbGF5ZXIodGhpcy52aWRlbyk7XHJcblxyXG4gIHRoaXMucGxheWVyLmNvbmZpZ3VyZSh7XHJcbiAgICBhYnI6IHsgZGVmYXVsdEJhbmR3aWR0aEVzdGltYXRlOiBERUZBVUxUX0JJVFNfUEVSX1NFQ09ORCB9XHJcbiAgfSk7XHJcblxyXG4gIC8vIExpc3RlbiBmb3IgZXJyb3IgZXZlbnRzLlxyXG4gIHRoaXMucGxheWVyLmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgdGhpcy5vbkVycm9yXyk7XHJcbn07XHJcblxyXG5BZGFwdGl2ZVBsYXllci5wcm90b3R5cGUubG9hZFNoYWthVmlkZW9fID0gZnVuY3Rpb24odXJsKSB7XHJcbiAgLy8gSW5zdGFsbCBidWlsdC1pbiBwb2x5ZmlsbHMgdG8gcGF0Y2ggYnJvd3NlciBpbmNvbXBhdGliaWxpdGllcy5cclxuICBzaGFrYS5wb2x5ZmlsbC5pbnN0YWxsQWxsKCk7XHJcblxyXG4gIGlmICghc2hha2EuUGxheWVyLmlzQnJvd3NlclN1cHBvcnRlZCgpKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdTaGFrYSBpcyBub3Qgc3VwcG9ydGVkIG9uIHRoaXMgYnJvd3Nlci4nKTtcclxuICAgIHJldHVybjtcclxuICB9XHJcblxyXG4gIHRoaXMuaW5pdFNoYWthXygpO1xyXG4gIHJldHVybiB0aGlzLnBsYXllci5sb2FkKHVybCk7XHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IEFkYXB0aXZlUGxheWVyO1xyXG4iLCIvKlxyXG4gKiBDb3B5cmlnaHQgMjAxNSBHb29nbGUgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBFeWVzID0ge1xyXG4gIExFRlQ6IDEsXHJcbiAgUklHSFQ6IDJcclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gRXllcztcclxuIiwiLypcclxuICogQ29weXJpZ2h0IDIwMTUgR29vZ2xlIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG52YXIgRXZlbnRFbWl0dGVyID0gcmVxdWlyZSgnZXZlbnRlbWl0dGVyMycpO1xyXG52YXIgVFdFRU4gPSByZXF1aXJlKCd0d2Vlbi5qcycpO1xyXG5cclxuLy8gQ29uc3RhbnRzIGZvciB0aGUgZm9jdXMvYmx1ciBhbmltYXRpb24uXHJcbnZhciBOT1JNQUxfU0NBTEUgPSBuZXcgVEhSRUUuVmVjdG9yMygxLCAxLCAxKTtcclxudmFyIEZPQ1VTX1NDQUxFID0gbmV3IFRIUkVFLlZlY3RvcjMoMS4yLCAxLjIsIDEuMik7XHJcbnZhciBGT0NVU19EVVJBVElPTiA9IDIwMDtcclxuXHJcbi8vIENvbnN0YW50cyBmb3IgdGhlIGFjdGl2ZS9pbmFjdGl2ZSBhbmltYXRpb24uXHJcbnZhciBJTkFDVElWRV9DT0xPUiA9IG5ldyBUSFJFRS5Db2xvcigxLCAxLCAxKTtcclxudmFyIEFDVElWRV9DT0xPUiA9IG5ldyBUSFJFRS5Db2xvcigwLjgsIDAsIDApO1xyXG52YXIgQUNUSVZFX0RVUkFUSU9OID0gMTAwO1xyXG5cclxuLy8gQ29uc3RhbnRzIGZvciBvcGFjaXR5LlxyXG52YXIgTUFYX0lOTkVSX09QQUNJVFkgPSAwLjg7XHJcbnZhciBNQVhfT1VURVJfT1BBQ0lUWSA9IDAuNTtcclxudmFyIEZBREVfU1RBUlRfQU5HTEVfREVHID0gMzU7XHJcbnZhciBGQURFX0VORF9BTkdMRV9ERUcgPSA2MDtcclxuLyoqXHJcbiAqIFJlc3BvbnNpYmxlIGZvciByZWN0YW5ndWxhciBob3Qgc3BvdHMgdGhhdCB0aGUgdXNlciBjYW4gaW50ZXJhY3Qgd2l0aC5cclxuICpcclxuICogU3BlY2lmaWMgZHV0aWVzOlxyXG4gKiAgIEFkZGluZyBhbmQgcmVtb3ZpbmcgaG90c3BvdHMuXHJcbiAqICAgUmVuZGVyaW5nIHRoZSBob3RzcG90cyAoZGVidWcgbW9kZSBvbmx5KS5cclxuICogICBOb3RpZnlpbmcgd2hlbiBob3RzcG90cyBhcmUgaW50ZXJhY3RlZCB3aXRoLlxyXG4gKiBcclxuICogRW1pdHMgdGhlIGZvbGxvd2luZyBldmVudHM6XHJcbiAqICAgY2xpY2sgKGlkKTogYSBob3RzcG90IGlzIGNsaWNrZWQuXHJcbiAqICAgZm9jdXMgKGlkKTogYSBob3RzcG90IGlzIGZvY3VzZWQuXHJcbiAqICAgYmx1ciAoaWQpOiBhIGhvdHNwb3QgaXMgbm8gbG9uZ2VyIGhvdmVyZWQgb3Zlci5cclxuICovXHJcbmZ1bmN0aW9uIEhvdHNwb3RSZW5kZXJlcih3b3JsZFJlbmRlcmVyKSB7XHJcbiAgdGhpcy53b3JsZFJlbmRlcmVyID0gd29ybGRSZW5kZXJlcjtcclxuICB0aGlzLnNjZW5lID0gd29ybGRSZW5kZXJlci5zY2VuZTtcclxuXHJcbiAgLy8gTm90ZTogdGhpcyBldmVudCBtdXN0IGJlIGFkZGVkIHRvIGRvY3VtZW50LmJvZHkgYW5kIG5vdCB0byB3aW5kb3cgZm9yIGl0IHRvXHJcbiAgLy8gd29yayBpbnNpZGUgaU9TIGlmcmFtZXMuXHJcbiAgdmFyIGJvZHkgPSBkb2N1bWVudC5ib2R5O1xyXG4gIC8vIEJpbmQgZXZlbnRzIGZvciBob3RzcG90IGludGVyYWN0aW9uLlxyXG4gIGlmICghVXRpbC5pc01vYmlsZSgpKSB7XHJcbiAgICAvLyBPbmx5IGVuYWJsZSBtb3VzZSBldmVudHMgb24gZGVza3RvcC5cclxuICAgIGJvZHkuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGhpcy5vbk1vdXNlRG93bl8uYmluZCh0aGlzKSwgZmFsc2UpO1xyXG4gICAgYm9keS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCB0aGlzLm9uTW91c2VNb3ZlXy5iaW5kKHRoaXMpLCBmYWxzZSk7XHJcbiAgICBib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCB0aGlzLm9uTW91c2VVcF8uYmluZCh0aGlzKSwgZmFsc2UpO1xyXG4gIH1cclxuICBib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCB0aGlzLm9uVG91Y2hTdGFydF8uYmluZCh0aGlzKSwgZmFsc2UpO1xyXG4gIGJvZHkuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCB0aGlzLm9uVG91Y2hFbmRfLmJpbmQodGhpcyksIGZhbHNlKTtcclxuXHJcbiAgLy8gQWRkIGEgcGxhY2Vob2xkZXIgZm9yIGhvdHNwb3RzLlxyXG4gIHRoaXMuaG90c3BvdFJvb3QgPSBuZXcgVEhSRUUuT2JqZWN0M0QoKTtcclxuICAvLyBBbGlnbiB0aGUgY2VudGVyIHdpdGggdGhlIGNlbnRlciBvZiB0aGUgY2FtZXJhIHRvby5cclxuICB0aGlzLmhvdHNwb3RSb290LnJvdGF0aW9uLnkgPSBNYXRoLlBJIC8gMjtcclxuICB0aGlzLnNjZW5lLmFkZCh0aGlzLmhvdHNwb3RSb290KTtcclxuXHJcbiAgLy8gQWxsIGhvdHNwb3QgSURzLlxyXG4gIHRoaXMuaG90c3BvdHMgPSB7fTtcclxuXHJcbiAgLy8gQ3VycmVudGx5IHNlbGVjdGVkIGhvdHNwb3RzLlxyXG4gIHRoaXMuc2VsZWN0ZWRIb3RzcG90cyA9IHt9O1xyXG5cclxuICAvLyBIb3RzcG90cyB0aGF0IHRoZSBsYXN0IHRvdWNoc3RhcnQgLyBtb3VzZWRvd24gZXZlbnQgaGFwcGVuZWQgZm9yLlxyXG4gIHRoaXMuZG93bkhvdHNwb3RzID0ge307XHJcblxyXG4gIC8vIEZvciByYXljYXN0aW5nLiBJbml0aWFsaXplIG1vdXNlIHRvIGJlIG9mZiBzY3JlZW4gaW5pdGlhbGx5LlxyXG4gIHRoaXMucG9pbnRlciA9IG5ldyBUSFJFRS5WZWN0b3IyKDEsIDEpO1xyXG4gIHRoaXMucmF5Y2FzdGVyID0gbmV3IFRIUkVFLlJheWNhc3RlcigpO1xyXG59XHJcbkhvdHNwb3RSZW5kZXJlci5wcm90b3R5cGUgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcblxyXG4vKipcclxuICogQHBhcmFtIHBpdGNoIHtOdW1iZXJ9IFRoZSBsYXRpdHVkZSBvZiBjZW50ZXIsIHNwZWNpZmllZCBpbiBkZWdyZWVzLCBiZXR3ZWVuXHJcbiAqIC05MCBhbmQgOTAsIHdpdGggMCBhdCB0aGUgaG9yaXpvbi5cclxuICogQHBhcmFtIHlhdyB7TnVtYmVyfSBUaGUgbG9uZ2l0dWRlIG9mIGNlbnRlciwgc3BlY2lmaWVkIGluIGRlZ3JlZXMsIGJldHdlZW5cclxuICogLTE4MCBhbmQgMTgwLCB3aXRoIDAgYXQgdGhlIGltYWdlIGNlbnRlci5cclxuICogQHBhcmFtIHJhZGl1cyB7TnVtYmVyfSBUaGUgcmFkaXVzIG9mIHRoZSBob3RzcG90LCBzcGVjaWZpZWQgaW4gbWV0ZXJzLlxyXG4gKiBAcGFyYW0gZGlzdGFuY2Uge051bWJlcn0gVGhlIGRpc3RhbmNlIG9mIHRoZSBob3RzcG90IGZyb20gY2FtZXJhLCBzcGVjaWZpZWRcclxuICogaW4gbWV0ZXJzLlxyXG4gKiBAcGFyYW0gaG90c3BvdElkIHtTdHJpbmd9IFRoZSBJRCBvZiB0aGUgaG90c3BvdC5cclxuICovXHJcbkhvdHNwb3RSZW5kZXJlci5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24ocGl0Y2gsIHlhdywgcmFkaXVzLCBkaXN0YW5jZSwgaWQsIGltYWdlLCBpc19zdGVyZW8pIHtcclxuICAvL2NvbnNvbGUubG9nKCdIb3RzcG90UmVuZGVyZXIuYWRkJywgcGl0Y2gsIHlhdywgcmFkaXVzLCBkaXN0YW5jZSwgaWQsIGltYWdlKTtcclxuICAvLyBJZiBhIGhvdHNwb3QgYWxyZWFkeSBleGlzdHMgd2l0aCB0aGlzIElELCBzdG9wLlxyXG4gIGlmICh0aGlzLmhvdHNwb3RzW2lkXSkge1xyXG4gICAgLy8gVE9ETzogUHJvcGVyIGVycm9yIHJlcG9ydGluZy5cclxuICAgIGNvbnNvbGUuZXJyb3IoJ0F0dGVtcHQgdG8gYWRkIGhvdHNwb3Qgd2l0aCBleGlzdGluZyBpZCAlcy4nLCBpZCk7XHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG4gIHZhciBob3RzcG90ID0gdGhpcy5jcmVhdGVIb3RzcG90XyhyYWRpdXMsIGRpc3RhbmNlLCBpbWFnZSwgaXNfc3RlcmVvKTtcclxuICBob3RzcG90Lm5hbWUgPSBpZDtcclxuXHJcbiAgLy8gUG9zaXRpb24gdGhlIGhvdHNwb3QgYmFzZWQgb24gdGhlIHBpdGNoIGFuZCB5YXcgc3BlY2lmaWVkLlxyXG4gIHZhciBxdWF0ID0gbmV3IFRIUkVFLlF1YXRlcm5pb24oKTtcclxuICBxdWF0LnNldEZyb21FdWxlcihuZXcgVEhSRUUuRXVsZXIoVEhSRUUuTWF0aC5kZWdUb1JhZChwaXRjaCksIFRIUkVFLk1hdGguZGVnVG9SYWQoeWF3KSwgMCkpO1xyXG4gIGhvdHNwb3QucG9zaXRpb24uYXBwbHlRdWF0ZXJuaW9uKHF1YXQpO1xyXG4gIGhvdHNwb3QubG9va0F0KG5ldyBUSFJFRS5WZWN0b3IzKCkpO1xyXG4gIFxyXG4gIHRoaXMuaG90c3BvdFJvb3QuYWRkKGhvdHNwb3QpO1xyXG4gIHRoaXMuaG90c3BvdHNbaWRdID0gaG90c3BvdDtcclxufVxyXG5cclxuLyoqXHJcbiAqIFJlbW92ZXMgYSBob3RzcG90IGJhc2VkIG9uIHRoZSBJRC5cclxuICpcclxuICogQHBhcmFtIElEIHtTdHJpbmd9IElkZW50aWZpZXIgb2YgdGhlIGhvdHNwb3QgdG8gYmUgcmVtb3ZlZC5cclxuICovXHJcbkhvdHNwb3RSZW5kZXJlci5wcm90b3R5cGUucmVtb3ZlID0gZnVuY3Rpb24oaWQpIHtcclxuICAvLyBJZiB0aGVyZSdzIG5vIGhvdHNwb3Qgd2l0aCB0aGlzIElELCBmYWlsLlxyXG4gIGlmICghdGhpcy5ob3RzcG90c1tpZF0pIHsgXHJcbiAgICAvLyBUT0RPOiBQcm9wZXIgZXJyb3IgcmVwb3J0aW5nLlxyXG4gICAgY29uc29sZS5lcnJvcignQXR0ZW1wdCB0byByZW1vdmUgbm9uLWV4aXN0aW5nIGhvdHNwb3Qgd2l0aCBpZCAlcy4nLCBpZCk7XHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG4gIC8vIFJlbW92ZSB0aGUgbWVzaCBmcm9tIHRoZSBzY2VuZS5cclxuICB0aGlzLmhvdHNwb3RSb290LnJlbW92ZSh0aGlzLmhvdHNwb3RzW2lkXSk7XHJcblxyXG4gIC8vIElmIHRoaXMgaG90c3BvdCB3YXMgc2VsZWN0ZWQsIG1ha2Ugc3VyZSBpdCBnZXRzIHVuc2VsZWN0ZWQuXHJcbiAgZGVsZXRlIHRoaXMuc2VsZWN0ZWRIb3RzcG90c1tpZF07XHJcbiAgZGVsZXRlIHRoaXMuZG93bkhvdHNwb3RzW2lkXTtcclxuICBkZWxldGUgdGhpcy5ob3RzcG90c1tpZF07XHJcbiAgdGhpcy5lbWl0KCdibHVyJywgaWQpO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIENsZWFycyBhbGwgaG90c3BvdHMgZnJvbSB0aGUgcGFuby4gT2Z0ZW4gY2FsbGVkIHdoZW4gY2hhbmdpbmcgcGFub3MuXHJcbiAqL1xyXG5Ib3RzcG90UmVuZGVyZXIucHJvdG90eXBlLmNsZWFyQWxsID0gZnVuY3Rpb24oKSB7XHJcbiAgZm9yICh2YXIgaWQgaW4gdGhpcy5ob3RzcG90cykge1xyXG4gICAgdGhpcy5yZW1vdmUoaWQpO1xyXG4gIH1cclxufTtcclxuXHJcbkhvdHNwb3RSZW5kZXJlci5wcm90b3R5cGUuZ2V0Q291bnQgPSBmdW5jdGlvbigpIHtcclxuICB2YXIgY291bnQgPSAwO1xyXG4gIGZvciAodmFyIGlkIGluIHRoaXMuaG90c3BvdHMpIHtcclxuICAgIGNvdW50ICs9IDE7XHJcbiAgfVxyXG4gIHJldHVybiBjb3VudDtcclxufTtcclxuXHJcbkhvdHNwb3RSZW5kZXJlci5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24oY2FtZXJhKSB7XHJcbiAgaWYgKHRoaXMud29ybGRSZW5kZXJlci5pc1ZSTW9kZSgpKSB7XHJcbiAgICB0aGlzLnBvaW50ZXIuc2V0KDAsIDApO1xyXG4gIH1cclxuICAvLyBVcGRhdGUgdGhlIHBpY2tpbmcgcmF5IHdpdGggdGhlIGNhbWVyYSBhbmQgbW91c2UgcG9zaXRpb24uXHJcbiAgdGhpcy5yYXljYXN0ZXIuc2V0RnJvbUNhbWVyYSh0aGlzLnBvaW50ZXIsIGNhbWVyYSk7XHRcclxuXHJcbiAgLy8gRmFkZSBob3RzcG90cyBvdXQgaWYgdGhleSBhcmUgcmVhbGx5IGZhciBmcm9tIGNlbnRlciB0byBhdm9pZCBvdmVybHlcclxuICAvLyBkaXN0b3J0ZWQgdmlzdWFscy5cclxuICB0aGlzLmZhZGVPZmZDZW50ZXJIb3RzcG90c18oY2FtZXJhKTtcclxuXHJcbiAgdmFyIGhvdHNwb3RzID0gdGhpcy5ob3RzcG90Um9vdC5jaGlsZHJlbjtcclxuICBcclxuICAvLyBHbyB0aHJvdWdoIGFsbCBob3RzcG90cyB0byBzZWUgaWYgdGhleSBhcmUgY3VycmVudGx5IHNlbGVjdGVkLlxyXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgaG90c3BvdHMubGVuZ3RoOyBpKyspIHtcclxuICAgIHZhciBob3RzcG90ID0gaG90c3BvdHNbaV07XHJcbiAgICAvL2hvdHNwb3QubG9va0F0KGNhbWVyYS5wb3NpdGlvbik7XHJcbiAgICB2YXIgaWQgPSBob3RzcG90Lm5hbWU7XHJcbiAgICAvLyBDaGVjayBpZiBob3RzcG90IGlzIGludGVyc2VjdGVkIHdpdGggdGhlIHBpY2tpbmcgcmF5LlxyXG4gICAgdmFyIGludGVyc2VjdHMgPSB0aGlzLnJheWNhc3Rlci5pbnRlcnNlY3RPYmplY3RzKGhvdHNwb3QuY2hpbGRyZW4pO1xyXG4gICAgdmFyIGlzSW50ZXJzZWN0ZWQgPSAoaW50ZXJzZWN0cy5sZW5ndGggPiAwKTtcclxuXHJcbiAgICAvLyBJZiBuZXdseSBzZWxlY3RlZCwgZW1pdCBhIGZvY3VzIGV2ZW50LlxyXG4gICAgaWYgKGlzSW50ZXJzZWN0ZWQgJiYgIXRoaXMuc2VsZWN0ZWRIb3RzcG90c1tpZF0pIHtcclxuICAgICAgdGhpcy5lbWl0KCdmb2N1cycsIGlkKTtcclxuICAgICAgdGhpcy5mb2N1c18oaWQpO1xyXG4gICAgfVxyXG4gICAgLy8gSWYgbm8gbG9uZ2VyIHNlbGVjdGVkLCBlbWl0IGEgYmx1ciBldmVudC5cclxuICAgIGlmICghaXNJbnRlcnNlY3RlZCAmJiB0aGlzLnNlbGVjdGVkSG90c3BvdHNbaWRdKSB7XHJcbiAgICAgIHRoaXMuZW1pdCgnYmx1cicsIGlkKTtcclxuICAgICAgdGhpcy5ibHVyXyhpZCk7XHJcbiAgICB9XHJcbiAgICAvLyBVcGRhdGUgdGhlIHNldCBvZiBzZWxlY3RlZCBob3RzcG90cy5cclxuICAgIGlmIChpc0ludGVyc2VjdGVkKSB7XHJcbiAgICAgIHRoaXMuc2VsZWN0ZWRIb3RzcG90c1tpZF0gPSB0cnVlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgZGVsZXRlIHRoaXMuc2VsZWN0ZWRIb3RzcG90c1tpZF07XHJcbiAgICB9XHJcbiAgfVxyXG59O1xyXG5cclxuLyoqXHJcbiAqIFRvZ2dsZSB3aGV0aGVyIG9yIG5vdCBob3RzcG90cyBhcmUgdmlzaWJsZS5cclxuICovXHJcbkhvdHNwb3RSZW5kZXJlci5wcm90b3R5cGUuc2V0VmlzaWJpbGl0eSA9IGZ1bmN0aW9uKGlzVmlzaWJsZSkge1xyXG4gIHRoaXMuaG90c3BvdFJvb3QudmlzaWJsZSA9IGlzVmlzaWJsZTtcclxufTtcclxuXHJcbkhvdHNwb3RSZW5kZXJlci5wcm90b3R5cGUub25Ub3VjaFN0YXJ0XyA9IGZ1bmN0aW9uKGUpIHtcclxuICAvLyBJbiBWUiBtb2RlLCBkb24ndCB0b3VjaCB0aGUgcG9pbnRlciBwb3NpdGlvbi5cclxuICBpZiAoIXRoaXMud29ybGRSZW5kZXJlci5pc1ZSTW9kZSgpKSB7XHJcbiAgICB0aGlzLnVwZGF0ZVRvdWNoXyhlKTtcclxuICB9XHJcblxyXG4gIC8vIEZvcmNlIGEgY2FtZXJhIHVwZGF0ZSB0byBzZWUgaWYgYW55IGhvdHNwb3RzIHdlcmUgc2VsZWN0ZWQuXHJcbiAgdGhpcy51cGRhdGUodGhpcy53b3JsZFJlbmRlcmVyLmNhbWVyYSk7XHJcblxyXG4gIHRoaXMuZG93bkhvdHNwb3RzID0ge307XHJcbiAgZm9yICh2YXIgaWQgaW4gdGhpcy5zZWxlY3RlZEhvdHNwb3RzKSB7XHJcbiAgICB0aGlzLmRvd25Ib3RzcG90c1tpZF0gPSB0cnVlO1xyXG4gICAgdGhpcy5kb3duXyhpZCk7XHJcbiAgfVxyXG4gIHJldHVybiBmYWxzZTtcclxufTtcclxuXHJcbkhvdHNwb3RSZW5kZXJlci5wcm90b3R5cGUub25Ub3VjaEVuZF8gPSBmdW5jdGlvbihlKSB7XHJcbiAgLy8gSWYgbm8gaG90c3BvdHMgYXJlIHByZXNzZWQsIGVtaXQgYW4gZW1wdHkgY2xpY2sgZXZlbnQuXHJcbiAgaWYgKCF0aGlzLmRvd25Ib3RzcG90cykge1xyXG4gICAgdGhpcy5lbWl0KCdjbGljaycpO1xyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuXHJcbiAgLy8gT25seSBlbWl0IGEgY2xpY2sgaWYgdGhlIGZpbmdlciB3YXMgZG93biBvbiB0aGUgc2FtZSBob3RzcG90IGJlZm9yZS5cclxuICBmb3IgKHZhciBpZCBpbiB0aGlzLmRvd25Ib3RzcG90cykge1xyXG4gICAgdGhpcy5lbWl0KCdjbGljaycsIGlkKTtcclxuICAgIHRoaXMudXBfKGlkKTtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICB9XHJcbn07XHJcblxyXG5Ib3RzcG90UmVuZGVyZXIucHJvdG90eXBlLnVwZGF0ZVRvdWNoXyA9IGZ1bmN0aW9uKGUpIHtcclxuICB2YXIgc2l6ZSA9IHRoaXMuZ2V0U2l6ZV8oKTtcclxuICB2YXIgdG91Y2ggPSBlLnRvdWNoZXNbMF07XHJcblx0dGhpcy5wb2ludGVyLnggPSAodG91Y2guY2xpZW50WCAvIHNpemUud2lkdGgpICogMiAtIDE7XHJcblx0dGhpcy5wb2ludGVyLnkgPSAtICh0b3VjaC5jbGllbnRZIC8gc2l6ZS5oZWlnaHQpICogMiArIDE7XHRcclxufTtcclxuXHJcbkhvdHNwb3RSZW5kZXJlci5wcm90b3R5cGUub25Nb3VzZURvd25fID0gZnVuY3Rpb24oZSkge1xyXG4gIHRoaXMudXBkYXRlTW91c2VfKGUpO1xyXG5cclxuICB0aGlzLmRvd25Ib3RzcG90cyA9IHt9O1xyXG4gIGZvciAodmFyIGlkIGluIHRoaXMuc2VsZWN0ZWRIb3RzcG90cykge1xyXG4gICAgdGhpcy5kb3duSG90c3BvdHNbaWRdID0gdHJ1ZTtcclxuICAgIHRoaXMuZG93bl8oaWQpO1xyXG4gIH1cclxufTtcclxuXHJcbkhvdHNwb3RSZW5kZXJlci5wcm90b3R5cGUub25Nb3VzZU1vdmVfID0gZnVuY3Rpb24oZSkge1xyXG4gIHRoaXMudXBkYXRlTW91c2VfKGUpO1xyXG59O1xyXG5cclxuSG90c3BvdFJlbmRlcmVyLnByb3RvdHlwZS5vbk1vdXNlVXBfID0gZnVuY3Rpb24oZSkge1xyXG4gIHRoaXMudXBkYXRlTW91c2VfKGUpO1xyXG5cclxuICAvLyBJZiBubyBob3RzcG90cyBhcmUgcHJlc3NlZCwgZW1pdCBhbiBlbXB0eSBjbGljayBldmVudC5cclxuICBpZiAoIXRoaXMuZG93bkhvdHNwb3RzKSB7XHJcbiAgICB0aGlzLmVtaXQoJ2NsaWNrJyk7XHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG5cclxuICAvLyBPbmx5IGVtaXQgYSBjbGljayBpZiB0aGUgbW91c2Ugd2FzIGRvd24gb24gdGhlIHNhbWUgaG90c3BvdCBiZWZvcmUuXHJcbiAgZm9yICh2YXIgaWQgaW4gdGhpcy5zZWxlY3RlZEhvdHNwb3RzKSB7XHJcbiAgICBpZiAoaWQgaW4gdGhpcy5kb3duSG90c3BvdHMpIHtcclxuICAgICAgdGhpcy5lbWl0KCdjbGljaycsIGlkKTtcclxuICAgICAgdGhpcy51cF8oaWQpO1xyXG4gICAgfVxyXG4gIH1cclxufTtcclxuXHJcbkhvdHNwb3RSZW5kZXJlci5wcm90b3R5cGUudXBkYXRlTW91c2VfID0gZnVuY3Rpb24oZSkge1xyXG4gIHZhciBzaXplID0gdGhpcy5nZXRTaXplXygpO1xyXG5cdHRoaXMucG9pbnRlci54ID0gKGUuY2xpZW50WCAvIHNpemUud2lkdGgpICogMiAtIDE7XHJcblx0dGhpcy5wb2ludGVyLnkgPSAtIChlLmNsaWVudFkgLyBzaXplLmhlaWdodCkgKiAyICsgMTtcdFxyXG59O1xyXG5cclxuSG90c3BvdFJlbmRlcmVyLnByb3RvdHlwZS5nZXRTaXplXyA9IGZ1bmN0aW9uKCkge1xyXG4gIHZhciBjYW52YXMgPSB0aGlzLndvcmxkUmVuZGVyZXIucmVuZGVyZXIuZG9tRWxlbWVudDtcclxuICByZXR1cm4gdGhpcy53b3JsZFJlbmRlcmVyLnJlbmRlcmVyLmdldFNpemUoKTtcclxufTtcclxuXHJcbkhvdHNwb3RSZW5kZXJlci5wcm90b3R5cGUuY3JlYXRlSG90c3BvdF8gPSBmdW5jdGlvbihyYWRpdXMsIGRpc3RhbmNlLCBpbWFnZSwgaXNfc3RlcmVvKSB7XHJcbiAgdmFyIGlubmVyR2VvbWV0cnkgPSBuZXcgVEhSRUUuQ2lyY2xlR2VvbWV0cnkocmFkaXVzLCAzMik7XHJcblxyXG4gIHZhciBpbm5lck1hdGVyaWFsID0gbmV3IFRIUkVFLk1lc2hCYXNpY01hdGVyaWFsKHtcclxuICAgIGNvbG9yOiAweGZmZmZmZiwgc2lkZTogVEhSRUUuRG91YmxlU2lkZSwgdHJhbnNwYXJlbnQ6IHRydWUsXHJcbiAgICBvcGFjaXR5OiBNQVhfSU5ORVJfT1BBQ0lUWSwgZGVwdGhUZXN0OiBmYWxzZVxyXG4gIH0pO1xyXG4gIGlmKGltYWdlJiZpbWFnZSE9XCIwXCIpe1xyXG4gICAgdmFyIGxvYWRlciA9IG5ldyBUSFJFRS5UZXh0dXJlTG9hZGVyKCk7XHJcbiAgICBsb2FkZXIuY3Jvc3NPcmlnaW4gPSAnYW5vbnltb3VzJztcclxuICAgIGxvYWRlci5sb2FkKGltYWdlLCBmdW5jdGlvbih0ZXh0dXJlKXtcclxuICAgICAgdGV4dHVyZS53cmFwUyA9IHRleHR1cmUud3JhcFQgPSBUSFJFRS5SZXBlYXRXcmFwcGluZztcclxuICAgICAgaWYoaXNfc3RlcmVvJiZpc19zdGVyZW8hPVwiMFwiKXtcclxuICAgICAgICB0ZXh0dXJlLnJlcGVhdC5zZXQoMC41LCAwLjUpO1xyXG4gICAgICB9ZWxzZXtcclxuICAgICAgICB0ZXh0dXJlLnJlcGVhdC5zZXQoMC41LCAxKTtcclxuICAgICAgfVxyXG4gICAgICBpbm5lck1hdGVyaWFsLm1hcCA9IHRleHR1cmU7XHJcbiAgICAgIGlubmVyTWF0ZXJpYWwubWFwLm5lZWRzVXBkYXRlID0gdHJ1ZTtcclxuICAgICAgaW5uZXJNYXRlcmlhbC5uZWVkc1VwZGF0ZSA9IHRydWU7XHJcbiAgICB9KTtcclxuICB9XHJcbiAgdmFyIGlubmVyID0gbmV3IFRIUkVFLk1lc2goaW5uZXJHZW9tZXRyeSwgaW5uZXJNYXRlcmlhbCk7XHJcbiAgaW5uZXIubmFtZSA9ICdpbm5lcic7XHJcblxyXG4gIHZhciBvdXRlck1hdGVyaWFsID0gbmV3IFRIUkVFLk1lc2hCYXNpY01hdGVyaWFsKHtcclxuICAgIGNvbG9yOiAweGZmZmZmZiwgc2lkZTogVEhSRUUuRG91YmxlU2lkZSwgdHJhbnNwYXJlbnQ6IHRydWUsXHJcbiAgICBvcGFjaXR5OiBNQVhfT1VURVJfT1BBQ0lUWSwgZGVwdGhUZXN0OiBmYWxzZVxyXG4gIH0pO1xyXG4gIHZhciBvdXRlckdlb21ldHJ5ID0gbmV3IFRIUkVFLlJpbmdHZW9tZXRyeShyYWRpdXMgKiAwLjg1LCByYWRpdXMsIDMyKTtcclxuICB2YXIgb3V0ZXIgPSBuZXcgVEhSRUUuTWVzaChvdXRlckdlb21ldHJ5LCBvdXRlck1hdGVyaWFsKTtcclxuICBvdXRlci5uYW1lID0gJ291dGVyJztcclxuXHJcbiAgLy8gUG9zaXRpb24gYXQgdGhlIGV4dHJlbWUgZW5kIG9mIHRoZSBzcGhlcmUuXHJcbiAgdmFyIGhvdHNwb3QgPSBuZXcgVEhSRUUuT2JqZWN0M0QoKTtcclxuICBob3RzcG90LnBvc2l0aW9uLnogPSAtZGlzdGFuY2U7XHJcbiAgaG90c3BvdC5zY2FsZS5zZXQoTk9STUFMX1NDQUxFKTtcclxuXHJcbiAgaG90c3BvdC5hZGQoaW5uZXIpO1xyXG4gIGhvdHNwb3QuYWRkKG91dGVyKTtcclxuXHJcbiAgcmV0dXJuIGhvdHNwb3Q7XHJcbn07XHJcblxyXG4vKipcclxuICogTGFyZ2UgYXNwZWN0IHJhdGlvcyB0ZW5kIHRvIGNhdXNlIHZpc3VhbGx5IGphcnJpbmcgZGlzdG9ydGlvbnMgb24gdGhlIHNpZGVzLlxyXG4gKiBIZXJlIHdlIGZhZGUgaG90c3BvdHMgb3V0IHRvIGF2b2lkIHRoZW0uXHJcbiAqL1xyXG5Ib3RzcG90UmVuZGVyZXIucHJvdG90eXBlLmZhZGVPZmZDZW50ZXJIb3RzcG90c18gPSBmdW5jdGlvbihjYW1lcmEpIHtcclxuICB2YXIgbG9va0F0ID0gbmV3IFRIUkVFLlZlY3RvcjMoMSwgMCwgMCk7XHJcbiAgbG9va0F0LmFwcGx5UXVhdGVybmlvbihjYW1lcmEucXVhdGVybmlvbik7XHJcbiAgLy8gVGFrZSBpbnRvIGFjY291bnQgdGhlIGNhbWVyYSBwYXJlbnQgdG9vLlxyXG4gIGxvb2tBdC5hcHBseVF1YXRlcm5pb24oY2FtZXJhLnBhcmVudC5xdWF0ZXJuaW9uKTtcclxuXHJcbiAgLy8gR28gdGhyb3VnaCBlYWNoIGhvdHNwb3QuIENhbGN1bGF0ZSBob3cgZmFyIG9mZiBjZW50ZXIgaXQgaXMuXHJcbiAgZm9yICh2YXIgaWQgaW4gdGhpcy5ob3RzcG90cykge1xyXG4gICAgdmFyIGhvdHNwb3QgPSB0aGlzLmhvdHNwb3RzW2lkXTtcclxuICAgIHZhciBhbmdsZSA9IGhvdHNwb3QucG9zaXRpb24uYW5nbGVUbyhsb29rQXQpO1xyXG4gICAgdmFyIGFuZ2xlRGVnID0gVEhSRUUuTWF0aC5yYWRUb0RlZyhhbmdsZSk7XHJcbiAgICB2YXIgaXNWaXNpYmxlID0gYW5nbGVEZWcgPCA0NTtcclxuICAgIHZhciBvcGFjaXR5O1xyXG4gICAgaWYgKGFuZ2xlRGVnIDwgRkFERV9TVEFSVF9BTkdMRV9ERUcpIHtcclxuICAgICAgb3BhY2l0eSA9IDE7XHJcbiAgICB9IGVsc2UgaWYgKGFuZ2xlRGVnID4gRkFERV9FTkRfQU5HTEVfREVHKSB7XHJcbiAgICAgIG9wYWNpdHkgPSAwO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgLy8gV2UgYXJlIGluIHRoZSBjYXNlIFNUQVJUIDwgYW5nbGUgPCBFTkQuIExpbmVhcmx5IGludGVycG9sYXRlLlxyXG4gICAgICB2YXIgcmFuZ2UgPSBGQURFX0VORF9BTkdMRV9ERUcgLSBGQURFX1NUQVJUX0FOR0xFX0RFRztcclxuICAgICAgdmFyIHZhbHVlID0gRkFERV9FTkRfQU5HTEVfREVHIC0gYW5nbGVEZWc7XHJcbiAgICAgIG9wYWNpdHkgPSB2YWx1ZSAvIHJhbmdlO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIE9wYWNpdHkgYSBmdW5jdGlvbiBvZiBhbmdsZS4gSWYgYW5nbGUgaXMgbGFyZ2UsIG9wYWNpdHkgaXMgemVyby4gQXQgc29tZVxyXG4gICAgLy8gcG9pbnQsIHJhbXAgb3BhY2l0eSBkb3duLlxyXG4gICAgdGhpcy5zZXRPcGFjaXR5XyhpZCwgb3BhY2l0eSk7XHJcbiAgfVxyXG59O1xyXG5cclxuSG90c3BvdFJlbmRlcmVyLnByb3RvdHlwZS5mb2N1c18gPSBmdW5jdGlvbihpZCkge1xyXG4gIHZhciBob3RzcG90ID0gdGhpcy5ob3RzcG90c1tpZF07XHJcblxyXG4gIC8vIFR3ZWVuIHNjYWxlIG9mIGhvdHNwb3QuXHJcbiAgdGhpcy50d2VlbiA9IG5ldyBUV0VFTi5Ud2Vlbihob3RzcG90LnNjYWxlKS50byhGT0NVU19TQ0FMRSwgRk9DVVNfRFVSQVRJT04pXHJcbiAgICAgIC5lYXNpbmcoVFdFRU4uRWFzaW5nLlF1YWRyYXRpYy5Jbk91dClcclxuICAgICAgLnN0YXJ0KCk7XHJcbn07XHJcblxyXG5Ib3RzcG90UmVuZGVyZXIucHJvdG90eXBlLmJsdXJfID0gZnVuY3Rpb24oaWQpIHtcclxuICB2YXIgaG90c3BvdCA9IHRoaXMuaG90c3BvdHNbaWRdO1xyXG5cclxuICB0aGlzLnR3ZWVuID0gbmV3IFRXRUVOLlR3ZWVuKGhvdHNwb3Quc2NhbGUpLnRvKE5PUk1BTF9TQ0FMRSwgRk9DVVNfRFVSQVRJT04pXHJcbiAgICAgIC5lYXNpbmcoVFdFRU4uRWFzaW5nLlF1YWRyYXRpYy5Jbk91dClcclxuICAgICAgLnN0YXJ0KCk7XHJcbn07XHJcblxyXG5Ib3RzcG90UmVuZGVyZXIucHJvdG90eXBlLmRvd25fID0gZnVuY3Rpb24oaWQpIHtcclxuICAvLyBCZWNvbWUgYWN0aXZlLlxyXG4gIHZhciBob3RzcG90ID0gdGhpcy5ob3RzcG90c1tpZF07XHJcbiAgdmFyIG91dGVyID0gaG90c3BvdC5nZXRPYmplY3RCeU5hbWUoJ2lubmVyJyk7XHJcblxyXG4gIHRoaXMudHdlZW4gPSBuZXcgVFdFRU4uVHdlZW4ob3V0ZXIubWF0ZXJpYWwuY29sb3IpLnRvKEFDVElWRV9DT0xPUiwgQUNUSVZFX0RVUkFUSU9OKVxyXG4gICAgICAuc3RhcnQoKTtcclxufTtcclxuXHJcbkhvdHNwb3RSZW5kZXJlci5wcm90b3R5cGUudXBfID0gZnVuY3Rpb24oaWQpIHtcclxuICAvLyBCZWNvbWUgaW5hY3RpdmUuXHJcbiAgdmFyIGhvdHNwb3QgPSB0aGlzLmhvdHNwb3RzW2lkXTtcclxuICB2YXIgb3V0ZXIgPSBob3RzcG90LmdldE9iamVjdEJ5TmFtZSgnaW5uZXInKTtcclxuXHJcbiAgdGhpcy50d2VlbiA9IG5ldyBUV0VFTi5Ud2VlbihvdXRlci5tYXRlcmlhbC5jb2xvcikudG8oSU5BQ1RJVkVfQ09MT1IsIEFDVElWRV9EVVJBVElPTilcclxuICAgICAgLnN0YXJ0KCk7XHJcbn07XHJcblxyXG5Ib3RzcG90UmVuZGVyZXIucHJvdG90eXBlLnNldE9wYWNpdHlfID0gZnVuY3Rpb24oaWQsIG9wYWNpdHkpIHtcclxuICB2YXIgaG90c3BvdCA9IHRoaXMuaG90c3BvdHNbaWRdO1xyXG4gIHZhciBvdXRlciA9IGhvdHNwb3QuZ2V0T2JqZWN0QnlOYW1lKCdvdXRlcicpO1xyXG4gIHZhciBpbm5lciA9IGhvdHNwb3QuZ2V0T2JqZWN0QnlOYW1lKCdpbm5lcicpO1xyXG5cclxuICBvdXRlci5tYXRlcmlhbC5vcGFjaXR5ID0gb3BhY2l0eSAqIE1BWF9PVVRFUl9PUEFDSVRZO1xyXG4gIGlubmVyLm1hdGVyaWFsLm9wYWNpdHkgPSBvcGFjaXR5ICogTUFYX0lOTkVSX09QQUNJVFk7XHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IEhvdHNwb3RSZW5kZXJlcjtcclxuIiwiLypcclxuICogQ29weXJpZ2h0IDIwMTUgR29vZ2xlIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG52YXIgRXZlbnRFbWl0dGVyID0gcmVxdWlyZSgnZXZlbnRlbWl0dGVyMycpO1xyXG52YXIgTWVzc2FnZSA9IHJlcXVpcmUoJy4uL21lc3NhZ2UnKTtcclxuXHJcblxyXG4vKipcclxuICogU2l0cyBpbiBhbiBlbWJlZGRlZCBpZnJhbWUsIHJlY2VpdmluZyBtZXNzYWdlcyBmcm9tIGEgY29udGFpbmluZ1xyXG4gKiBpRnJhbWUuIFRoaXMgZmFjaWxpdGF0ZXMgYW4gQVBJIHdoaWNoIHByb3ZpZGVzIHRoZSBmb2xsb3dpbmcgZmVhdHVyZXM6XHJcbiAqXHJcbiAqICAgIFBsYXlpbmcgYW5kIHBhdXNpbmcgY29udGVudC5cclxuICogICAgQWRkaW5nIGhvdHNwb3RzLlxyXG4gKiAgICBTZW5kaW5nIG1lc3NhZ2VzIGJhY2sgdG8gdGhlIGNvbnRhaW5pbmcgaWZyYW1lIHdoZW4gaG90c3BvdCBpcyBjbGlja2VkXHJcbiAqICAgIFNlbmRpbmcgYW5hbHl0aWNzIGV2ZW50cyB0byBjb250YWluaW5nIGlmcmFtZS5cclxuICogICAgUmVjZWl2aW5nIERldmljZU1vdGlvbiBldmVudHMgYW5kIHJlc3ludGhlc2l6aW5nIHRoZW0gaW4gdGhpcyBpZnJhbWVcclxuICogICAgICAgICh3b3JrYXJvdW5kIGZvciBodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MTUwMDcyKS5cclxuICovXHJcbmZ1bmN0aW9uIElGcmFtZU1lc3NhZ2VSZWNlaXZlcigpIHtcclxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIHRoaXMub25NZXNzYWdlXy5iaW5kKHRoaXMpLCBmYWxzZSk7XHJcbn1cclxuSUZyYW1lTWVzc2FnZVJlY2VpdmVyLnByb3RvdHlwZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuXHJcbklGcmFtZU1lc3NhZ2VSZWNlaXZlci5wcm90b3R5cGUub25NZXNzYWdlXyA9IGZ1bmN0aW9uKGV2ZW50KSB7XHJcbiAgLy9jb25zb2xlLmxvZygnb25NZXNzYWdlXycsIGV2ZW50KTtcclxuXHJcbiAgdmFyIG1lc3NhZ2UgPSBldmVudC5kYXRhO1xyXG4gIHZhciB0eXBlID0gbWVzc2FnZS50eXBlLnRvTG93ZXJDYXNlKCk7XHJcbiAgdmFyIGRhdGEgPSBtZXNzYWdlLmRhdGE7XHJcbiAgaWYodHlwZSA9PSBNZXNzYWdlLlNFVF9DT05URU5UKXtcclxuICAgIGRhdGEuY2FsbGJhY2sgPSBmdW5jdGlvbigpe1xyXG4gICAgICBVdGlsLnNlbmRQYXJlbnRNZXNzYWdlKHt0eXBlOnR5cGV9KTtcclxuICAgIH07XHJcbiAgfVxyXG4gIHN3aXRjaCAodHlwZSkge1xyXG4gICAgY2FzZSBNZXNzYWdlLkRFVklDRV9NT1RJT046XHJcbiAgICAgIC8vIFN5bnRoZXNpemUgYSBEZXZpY2VNb3Rpb24gZXZlbnQuXHJcbiAgICAgIHRoaXMuc3ludGhlc2l6ZURldmljZU1vdGlvbkV2ZW50XyhtZXNzYWdlLmRldmljZU1vdGlvbkV2ZW50KTtcclxuICAgICAgYnJlYWs7XHJcbiAgICBjYXNlIE1lc3NhZ2UuU0VUX0NPTlRFTlQ6XHJcbiAgICBjYXNlIE1lc3NhZ2UuU0VUX1ZPTFVNRTpcclxuICAgIGNhc2UgTWVzc2FnZS5BRERfSE9UU1BPVDpcclxuICAgIGNhc2UgTWVzc2FnZS5QTEFZOlxyXG4gICAgY2FzZSBNZXNzYWdlLlBBVVNFOlxyXG4gICAgY2FzZSBNZXNzYWdlLlNFVFVQX05BVklHQVRJT046XHJcbiAgICBjYXNlIE1lc3NhZ2UuRU5BQkxFX01VTFRJUExBWUVSX01PREU6XHJcbiAgICBjYXNlIE1lc3NhZ2UuSk9JTl9NVUxUSVBMQVlFUl9ST09NOlxyXG4gICAgY2FzZSBNZXNzYWdlLkxFQVZFX01VTFRJUExBWUVSX1JPT006XHJcbiAgICBjYXNlIE1lc3NhZ2UuU0VUX01VTFRJUExBWUVSX01FOlxyXG4gICAgICAvLyBUT0RPKHNtdXMpOiBFbWl0IHRoZSBldmVudCBcclxuICAgICAgdGhpcy5lbWl0KHR5cGUsIGRhdGEpO1xyXG4gICAgICBicmVhaztcclxuICAgIGRlZmF1bHQ6XHJcbiAgICAgIGNvbnNvbGUud2FybignR290IHVua25vd24gbWVzc2FnZSBvZiB0eXBlICVzIGZyb20gJXMnLCB0eXBlLCBNZXNzYWdlLlNFVF9DT05URU5ULCBtZXNzYWdlLm9yaWdpbik7XHJcbiAgfVxyXG59O1xyXG5cclxuSUZyYW1lTWVzc2FnZVJlY2VpdmVyLnByb3RvdHlwZS5zeW50aGVzaXplRGV2aWNlTW90aW9uRXZlbnRfID0gZnVuY3Rpb24oZXZlbnREYXRhKSB7XHJcbiAgdmFyIHR5cGUgPSAnZGV2aWNlbW90aW9uLWlmcmFtZSc7XHJcbiAgdmFyIGNhbkJ1YmJsZSA9IGZhbHNlO1xyXG4gIHZhciBjYW5jZWxhYmxlID0gZmFsc2U7XHJcblxyXG4gIHZhciBkbWUgPSBkb2N1bWVudC5jcmVhdGVFdmVudCgnRGV2aWNlTW90aW9uRXZlbnQnKTtcclxuICBkbWUuaW5pdERldmljZU1vdGlvbkV2ZW50KHR5cGUsIGNhbkJ1YmJsZSwgY2FuY2VsYWJsZSxcclxuICAgICAgZXZlbnREYXRhLmFjY2VsZXJhdGlvbixcclxuICAgICAgZXZlbnREYXRhLmFjY2VsZXJhdGlvbkluY2x1ZGluZ0dyYXZpdHksXHJcbiAgICAgIGV2ZW50RGF0YS5yb3RhdGlvblJhdGUsXHJcbiAgICAgIGV2ZW50RGF0YS5pbnRlcnZhbCk7XHJcblxyXG4gIHdpbmRvdy5kaXNwYXRjaEV2ZW50KGRtZSk7XHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IElGcmFtZU1lc3NhZ2VSZWNlaXZlcjtcclxuIiwiLypcclxuICogQ29weXJpZ2h0IDIwMTUgR29vZ2xlIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5cclxuLyoqXHJcbiAqIFNob3dzIGEgMkQgbG9hZGluZyBpbmRpY2F0b3Igd2hpbGUgdmFyaW91cyBwaWVjZXMgb2YgRW1iZWRWUiBsb2FkLlxyXG4gKi9cclxuZnVuY3Rpb24gTG9hZGluZ0luZGljYXRvcigpIHtcclxuICB0aGlzLmVsID0gdGhpcy5idWlsZF8oKTtcclxuICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRoaXMuZWwpO1xyXG4gIHRoaXMuc2hvdygpO1xyXG59XHJcblxyXG5Mb2FkaW5nSW5kaWNhdG9yLnByb3RvdHlwZS5idWlsZF8gPSBmdW5jdGlvbigpIHtcclxuICB2YXIgb3ZlcmxheSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gIHZhciBzID0gb3ZlcmxheS5zdHlsZTtcclxuICBzLnBvc2l0aW9uID0gJ2ZpeGVkJztcclxuICBzLnRvcCA9IDA7XHJcbiAgcy5sZWZ0ID0gMDtcclxuICBzLndpZHRoID0gJzEwMCUnO1xyXG4gIHMuaGVpZ2h0ID0gJzEwMCUnO1xyXG4gIHMuYmFja2dyb3VuZCA9ICcjZWVlJztcclxuICB2YXIgaW1nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XHJcbiAgaW1nLnNyYyA9ICdpbWFnZXMvbG9hZGluZy5naWYnO1xyXG4gIHZhciBzID0gaW1nLnN0eWxlO1xyXG4gIHMucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xyXG4gIHMudG9wID0gJzUwJSc7XHJcbiAgcy5sZWZ0ID0gJzUwJSc7XHJcbiAgcy50cmFuc2Zvcm0gPSAndHJhbnNsYXRlKC01MCUsIC01MCUpJztcclxuXHJcbiAgb3ZlcmxheS5hcHBlbmRDaGlsZChpbWcpO1xyXG4gIHJldHVybiBvdmVybGF5O1xyXG59O1xyXG5cclxuTG9hZGluZ0luZGljYXRvci5wcm90b3R5cGUuaGlkZSA9IGZ1bmN0aW9uKCkge1xyXG4gIHRoaXMuZWwuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxufTtcclxuXHJcbkxvYWRpbmdJbmRpY2F0b3IucHJvdG90eXBlLnNob3cgPSBmdW5jdGlvbigpIHtcclxuICB0aGlzLmVsLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBMb2FkaW5nSW5kaWNhdG9yO1xyXG4iLCIvKlxyXG4gKiBDb3B5cmlnaHQgMjAxNSBHb29nbGUgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcblxyXG4vLyBJbml0aWFsaXplIHRoZSBsb2FkaW5nIGluZGljYXRvciBhcyBxdWlja2x5IGFzIHBvc3NpYmxlIHRvIGdpdmUgdGhlIHVzZXJcclxuLy8gaW1tZWRpYXRlIGZlZWRiYWNrLlxyXG52YXIgTG9hZGluZ0luZGljYXRvciA9IHJlcXVpcmUoJy4vbG9hZGluZy1pbmRpY2F0b3InKTtcclxudmFyIGxvYWRJbmRpY2F0b3IgPSBuZXcgTG9hZGluZ0luZGljYXRvcigpO1xyXG5cclxudmFyIEVTNlByb21pc2UgPSByZXF1aXJlKCdlczYtcHJvbWlzZScpO1xyXG4vLyBQb2x5ZmlsbCBFUzYgcHJvbWlzZXMgZm9yIElFLlxyXG5FUzZQcm9taXNlLnBvbHlmaWxsKCk7XHJcblxyXG52YXIgSUZyYW1lTWVzc2FnZVJlY2VpdmVyID0gcmVxdWlyZSgnLi9pZnJhbWUtbWVzc2FnZS1yZWNlaXZlcicpO1xyXG52YXIgTWVzc2FnZSA9IHJlcXVpcmUoJy4uL21lc3NhZ2UnKTtcclxudmFyIFNjZW5lSW5mbyA9IHJlcXVpcmUoJy4vc2NlbmUtaW5mbycpO1xyXG52YXIgU3RhdHMgPSByZXF1aXJlKCcuLi8uLi9ub2RlX21vZHVsZXMvc3RhdHMtanMvYnVpbGQvc3RhdHMubWluJyk7XHJcbnZhciBVdGlsID0gcmVxdWlyZSgnLi4vdXRpbCcpO1xyXG52YXIgV2ViVlJQb2x5ZmlsbCA9IHJlcXVpcmUoJ3dlYnZyLXBvbHlmaWxsJyk7XHJcbnZhciBXb3JsZFJlbmRlcmVyID0gcmVxdWlyZSgnLi93b3JsZC1yZW5kZXJlcicpO1xyXG5cclxudmFyIHJlY2VpdmVyID0gbmV3IElGcmFtZU1lc3NhZ2VSZWNlaXZlcigpO1xyXG5yZWNlaXZlci5vbihNZXNzYWdlLlBMQVksIG9uUGxheVJlcXVlc3QpO1xyXG5yZWNlaXZlci5vbihNZXNzYWdlLlBBVVNFLCBvblBhdXNlUmVxdWVzdCk7XHJcbnJlY2VpdmVyLm9uKE1lc3NhZ2UuQUREX0hPVFNQT1QsIG9uQWRkSG90c3BvdCk7XHJcbnJlY2VpdmVyLm9uKE1lc3NhZ2UuU0VUVVBfTkFWSUdBVElPTiwgb25BZGROYXZpZ2F0aW9uKTtcclxucmVjZWl2ZXIub24oTWVzc2FnZS5FTkFCTEVfTVVMVElQTEFZRVJfTU9ERSwgZW5hYmxlTXVsdGlwbGF5ZXJNb2RlKTtcclxucmVjZWl2ZXIub24oTWVzc2FnZS5KT0lOX01VTFRJUExBWUVSX1JPT00sIGpvaW5NdWx0aXBsYXllclJvb20pO1xyXG5yZWNlaXZlci5vbihNZXNzYWdlLkxFQVZFX01VTFRJUExBWUVSX1JPT00sIGxlYXZlTXVsdGlwbGF5ZXJSb29tKTtcclxucmVjZWl2ZXIub24oTWVzc2FnZS5TRVRfTVVMVElQTEFZRVJfTUUsIHNldE11bHRpcGxheWVyTWUpO1xyXG5yZWNlaXZlci5vbihNZXNzYWdlLlNFVF9DT05URU5ULCBvblNldENvbnRlbnQpO1xyXG5yZWNlaXZlci5vbihNZXNzYWdlLlNFVF9WT0xVTUUsIG9uU2V0Vm9sdW1lKTtcclxuXHJcbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgb25Mb2FkKTtcclxuXHJcbnZhciBzdGF0cyA9IG5ldyBTdGF0cygpO1xyXG5cclxudmFyIHdvcmxkUmVuZGVyZXIgPSBuZXcgV29ybGRSZW5kZXJlcigpO1xyXG53b3JsZFJlbmRlcmVyLm9uKCdlcnJvcicsIG9uUmVuZGVyRXJyb3IpO1xyXG53b3JsZFJlbmRlcmVyLm9uKCdsb2FkJywgb25SZW5kZXJMb2FkKTtcclxud29ybGRSZW5kZXJlci5vbignbW9kZWNoYW5nZScsIG9uTW9kZUNoYW5nZSk7XHJcbndvcmxkUmVuZGVyZXIuaG90c3BvdFJlbmRlcmVyLm9uKCdjbGljaycsIG9uSG90c3BvdENsaWNrKTtcclxuXHJcbndpbmRvdy53b3JsZFJlbmRlcmVyID0gd29ybGRSZW5kZXJlcjtcclxuXHJcbnZhciBpc1JlYWR5U2VudCA9IGZhbHNlO1xyXG5cclxuZnVuY3Rpb24gb25Mb2FkKCkge1xyXG4gIGlmICghVXRpbC5pc1dlYkdMRW5hYmxlZCgpKSB7XHJcbiAgICBzaG93RXJyb3IoJ1dlYkdMIG5vdCBzdXBwb3J0ZWQuJyk7XHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG5cclxuICAvLyBMb2FkIHRoZSBzY2VuZS5cclxuICB2YXIgc2NlbmUgPSBTY2VuZUluZm8ubG9hZEZyb21HZXRQYXJhbXMoKTtcclxuICB3b3JsZFJlbmRlcmVyLnNldFNjZW5lKHNjZW5lKTtcclxuXHJcbiAgaWYgKHNjZW5lLmlzRGVidWcpIHtcclxuICAgIC8vIFNob3cgc3RhdHMuXHJcbiAgICBzaG93U3RhdHMoKTtcclxuICB9XHJcblxyXG4gIGlmIChzY2VuZS5pc1lhd09ubHkpIHtcclxuICAgIFdlYlZSQ29uZmlnID0gd2luZG93LldlYlZSQ29uZmlnIHx8IHt9O1xyXG4gICAgV2ViVlJDb25maWcuWUFXX09OTFkgPSB0cnVlO1xyXG4gIH1cclxuXHJcbiAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGxvb3ApO1xyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gb25WaWRlb1RhcCgpIHtcclxuICB3b3JsZFJlbmRlcmVyLnZpZGVvUHJveHkucGxheSgpO1xyXG4gIGhpZGVQbGF5QnV0dG9uKCk7XHJcblxyXG4gIC8vIFByZXZlbnQgbXVsdGlwbGUgcGxheSgpIGNhbGxzIG9uIHRoZSB2aWRlbyBlbGVtZW50LlxyXG4gIGRvY3VtZW50LmJvZHkucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCBvblZpZGVvVGFwKTtcclxufVxyXG5cclxuZnVuY3Rpb24gb25SZW5kZXJMb2FkKGV2ZW50KSB7XHJcbiAgaWYgKGV2ZW50LnZpZGVvRWxlbWVudCkge1xyXG4gICAgLy8gT24gbW9iaWxlLCB0ZWxsIHRoZSB1c2VyIHRoZXkgbmVlZCB0byB0YXAgdG8gc3RhcnQuIE90aGVyd2lzZSwgYXV0b3BsYXkuXHJcbiAgICBpZiAoVXRpbC5pc01vYmlsZSgpKSB7XHJcbiAgICAgIC8vIFRlbGwgdXNlciB0byB0YXAgdG8gc3RhcnQuXHJcbiAgICAgIHNob3dQbGF5QnV0dG9uKCk7XHJcbiAgICAgIGRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCBvblZpZGVvVGFwKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGV2ZW50LnZpZGVvRWxlbWVudC5wbGF5KCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQXR0YWNoIHRvIHBhdXNlIGFuZCBwbGF5IGV2ZW50cywgdG8gbm90aWZ5IHRoZSBBUEkuXHJcbiAgICBldmVudC52aWRlb0VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigncGF1c2UnLCBvblBhdXNlKTtcclxuICAgIGV2ZW50LnZpZGVvRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdwbGF5Jywgb25QbGF5KTtcclxuICB9XHJcbiAgLy8gSGlkZSBsb2FkaW5nIGluZGljYXRvci5cclxuICBsb2FkSW5kaWNhdG9yLmhpZGUoKTtcclxuXHJcbiAgLy8gQXV0b3BhbiBvbmx5IG9uIGRlc2t0b3AsIGZvciBwaG90b3Mgb25seSwgYW5kIG9ubHkgaWYgYXV0b3BhbiBpcyBlbmFibGVkLlxyXG4gIGlmICghVXRpbC5pc01vYmlsZSgpICYmICF3b3JsZFJlbmRlcmVyLnNjZW5lSW5mby52aWRlbyAmJlxyXG4gICAgICAhd29ybGRSZW5kZXJlci5zY2VuZUluZm8uaXNBdXRvcGFuT2ZmKSB7XHJcbiAgICB3b3JsZFJlbmRlcmVyLmF1dG9wYW4oKTtcclxuICB9XHJcblxyXG4gIC8vIE5vdGlmeSB0aGUgQVBJIHRoYXQgd2UgYXJlIHJlYWR5LCBidXQgb25seSBkbyB0aGlzIG9uY2UuXHJcbiAgaWYgKCFpc1JlYWR5U2VudCkge1xyXG4gICAgVXRpbC5zZW5kUGFyZW50TWVzc2FnZSh7XHJcbiAgICAgIHR5cGU6ICdyZWFkeScgXHJcbiAgICB9KTtcclxuICAgIGlzUmVhZHlTZW50ID0gdHJ1ZTtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG9uUGxheVJlcXVlc3QoKSB7XHJcbiAgaWYgKCF3b3JsZFJlbmRlcmVyLnZpZGVvUHJveHkpIHtcclxuICAgIG9uQXBpRXJyb3IoJ0F0dGVtcHQgdG8gcGF1c2UsIGJ1dCBubyB2aWRlbyBmb3VuZC4nKTtcclxuICAgIHJldHVybjtcclxuICB9XHJcbiAgd29ybGRSZW5kZXJlci52aWRlb1Byb3h5LnBsYXkoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gb25QYXVzZVJlcXVlc3QoKSB7XHJcbiAgaWYgKCF3b3JsZFJlbmRlcmVyLnZpZGVvUHJveHkpIHtcclxuICAgIG9uQXBpRXJyb3IoJ0F0dGVtcHQgdG8gcGF1c2UsIGJ1dCBubyB2aWRlbyBmb3VuZC4nKTtcclxuICAgIHJldHVybjtcclxuICB9XHJcbiAgd29ybGRSZW5kZXJlci52aWRlb1Byb3h5LnBhdXNlKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG9uQWRkSG90c3BvdChlKSB7XHJcbiAgLy8gY29uc29sZS5sb2coJ29uQWRkSG90c3BvdCcsIGUpO1xyXG4gIC8vIFRPRE86IEltcGxlbWVudCBzb21lIHZhbGlkYXRpb24/XHJcblxyXG4gIHZhciBwaXRjaCA9IHBhcnNlRmxvYXQoZS5waXRjaCk7XHJcbiAgdmFyIHlhdyA9IHBhcnNlRmxvYXQoZS55YXcpO1xyXG4gIHZhciByYWRpdXMgPSBwYXJzZUZsb2F0KGUucmFkaXVzKTtcclxuICB2YXIgZGlzdGFuY2UgPSBwYXJzZUZsb2F0KGUuZGlzdGFuY2UpO1xyXG4gIHZhciBpZCA9IGUuaWQ7XHJcbiAgdmFyIGltYWdlID0gZS5pbWFnZTtcclxuICB2YXIgaXNfc3RlcmVvID0gZS5pc19zdGVyZW87XHJcbiAgd29ybGRSZW5kZXJlci5ob3RzcG90UmVuZGVyZXIuYWRkKHBpdGNoLCB5YXcsIHJhZGl1cywgZGlzdGFuY2UsIGlkLCBpbWFnZSwgaXNfc3RlcmVvKTtcclxuICBcclxufVxyXG5mdW5jdGlvbiBlbmFibGVNdWx0aXBsYXllck1vZGUoKXtcclxuICB3b3JsZFJlbmRlcmVyLm11bHRpcGxheWVyTW9kZS5lbmFibGVNdWx0aXBsYXllck1vZGUoKTtcclxufVxyXG5mdW5jdGlvbiBzZXRNdWx0aXBsYXllck1lKGUpe1xyXG4gIHdvcmxkUmVuZGVyZXIubXVsdGlwbGF5ZXJNb2RlLnNldE1lKGUpO1xyXG59XHJcbmZ1bmN0aW9uIGpvaW5NdWx0aXBsYXllclJvb20oZSl7XHJcbiAgd29ybGRSZW5kZXJlci5tdWx0aXBsYXllck1vZGUuam9pblJvb20oZS5yb29tKTtcclxufVxyXG5mdW5jdGlvbiBsZWF2ZU11bHRpcGxheWVyUm9vbSgpe1xyXG4gIFxyXG59XHJcbmZ1bmN0aW9uIG9uQWRkTmF2aWdhdGlvbihlKSB7XHJcbiAgd29ybGRSZW5kZXJlci5uYXZpZ2F0aW9uUmVuZGVyZXIuc2V0dXAoZSk7XHJcbn1cclxuZnVuY3Rpb24gb25TZXRDb250ZW50KGUpIHtcclxuICAvLyBjb25zb2xlLmxvZygnb25TZXRDb250ZW50JywgZSk7XHJcbiAgLy8gRmFkZSB0byBibGFjay5cclxuICB3b3JsZFJlbmRlcmVyLnNwaGVyZVJlbmRlcmVyLnNldE9wYWNpdHkoMCwgNTAwKS50aGVuKGZ1bmN0aW9uKCkge1xyXG4gICAgLy8gVGhlbiBsb2FkIHRoZSBuZXcgc2NlbmUuXHJcbiAgICB2YXIgc2NlbmUgPSBTY2VuZUluZm8ubG9hZEZyb21BUElQYXJhbXMoZS5jb250ZW50SW5mbyk7XHJcbiAgICAvLyBSZW1vdmUgYWxsIG9mIHRoZSBob3RzcG90cy5cclxuICAgIHdvcmxkUmVuZGVyZXIuaG90c3BvdFJlbmRlcmVyLmNsZWFyQWxsKCk7XHJcbiAgICAvLyBEZXN0cm95IHRoZSB3b3JsZFxyXG4gICAgd29ybGRSZW5kZXJlci5kZXN0cm95KCk7XHJcbiAgICAvLyBVcGRhdGUgdGhlIFVSTCB0byByZWZsZWN0IHRoZSBuZXcgc2NlbmUuIFRoaXMgaXMgaW1wb3J0YW50IHBhcnRpY3VsYXJpbHlcclxuICAgIC8vIG9uIGlPUyB3aGVyZSB3ZSB1c2UgYSBmYWtlIGZ1bGxzY3JlZW4gbW9kZS5cclxuICAgIHZhciB1cmwgPSBzY2VuZS5nZXRDdXJyZW50VXJsKCk7XHJcbiAgICAvL2NvbnNvbGUubG9nKCdVcGRhdGluZyB1cmwgdG8gYmUgJXMnLCB1cmwpO1xyXG4gICAgd2luZG93Lmhpc3RvcnkucHVzaFN0YXRlKG51bGwsICdWUiBWaWV3JywgdXJsKTtcclxuICAgIGUuY2FsbGJhY2soKTtcclxuICAgIC8vIEFuZCBzZXQgdGhlIG5ldyBzY2VuZS5cclxuICAgIHJldHVybiB3b3JsZFJlbmRlcmVyLnNldFNjZW5lKHNjZW5lKTtcclxuICB9KS50aGVuKGZ1bmN0aW9uKCkge1xyXG4gICAgLy8gVGhlbiBmYWRlIHRoZSBzY2VuZSBiYWNrIGluLlxyXG4gICAgd29ybGRSZW5kZXJlci5zcGhlcmVSZW5kZXJlci5zZXRPcGFjaXR5KDEsIDUwMCk7XHJcbiAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG9uU2V0Vm9sdW1lKGUpIHtcclxuICAvLyBPbmx5IHdvcmsgZm9yIHZpZGVvLiBJZiB0aGVyZSdzIG5vIHZpZGVvLCBzZW5kIGJhY2sgYW4gZXJyb3IuXHJcbiAgaWYgKCF3b3JsZFJlbmRlcmVyLnZpZGVvUHJveHkpIHtcclxuICAgIG9uQXBpRXJyb3IoJ0F0dGVtcHQgdG8gc2V0IHZvbHVtZSwgYnV0IG5vIHZpZGVvIGZvdW5kLicpO1xyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuICB3b3JsZFJlbmRlcmVyLnZpZGVvUHJveHkuc2V0Vm9sdW1lKGUudm9sdW1lTGV2ZWwpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBvbkFwaUVycm9yKG1lc3NhZ2UpIHtcclxuICBjb25zb2xlLmVycm9yKG1lc3NhZ2UpO1xyXG4gIFV0aWwuc2VuZFBhcmVudE1lc3NhZ2Uoe1xyXG4gICAgdHlwZTogJ2Vycm9yJyxcclxuICAgIGRhdGE6IHttZXNzYWdlOiBtZXNzYWdlfVxyXG4gIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBvbk1vZGVDaGFuZ2UobW9kZSkge1xyXG4gIFV0aWwuc2VuZFBhcmVudE1lc3NhZ2Uoe1xyXG4gICAgdHlwZTogJ21vZGVjaGFuZ2UnLFxyXG4gICAgZGF0YToge21vZGU6IG1vZGV9XHJcbiAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG9uSG90c3BvdENsaWNrKGlkKSB7XHJcbiAgVXRpbC5zZW5kUGFyZW50TWVzc2FnZSh7XHJcbiAgICB0eXBlOiAnY2xpY2snLFxyXG4gICAgZGF0YToge2lkOiBpZH1cclxuICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gb25QbGF5KCkge1xyXG4gIFV0aWwuc2VuZFBhcmVudE1lc3NhZ2Uoe1xyXG4gICAgdHlwZTogJ3BhdXNlZCcsXHJcbiAgICBkYXRhOiBmYWxzZVxyXG4gIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBvblBhdXNlKCkge1xyXG4gIFV0aWwuc2VuZFBhcmVudE1lc3NhZ2Uoe1xyXG4gICAgdHlwZTogJ3BhdXNlZCcsXHJcbiAgICBkYXRhOiB0cnVlXHJcbiAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG9uU2NlbmVFcnJvcihtZXNzYWdlKSB7XHJcbiAgc2hvd0Vycm9yKCdMb2FkZXI6ICcgKyBtZXNzYWdlKTtcclxufVxyXG5cclxuZnVuY3Rpb24gb25SZW5kZXJFcnJvcihtZXNzYWdlKSB7XHJcbiAgc2hvd0Vycm9yKCdSZW5kZXI6ICcgKyBtZXNzYWdlKTtcclxufVxyXG5cclxuZnVuY3Rpb24gc2hvd0Vycm9yKG1lc3NhZ2UsIG9wdF90aXRsZSkge1xyXG4gIC8vIEhpZGUgbG9hZGluZyBpbmRpY2F0b3IuXHJcbiAgbG9hZEluZGljYXRvci5oaWRlKCk7XHJcblxyXG4gIHZhciBlcnJvciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNlcnJvcicpO1xyXG4gIGVycm9yLmNsYXNzTGlzdC5hZGQoJ3Zpc2libGUnKTtcclxuICBlcnJvci5xdWVyeVNlbGVjdG9yKCcubWVzc2FnZScpLmlubmVySFRNTCA9IG1lc3NhZ2U7XHJcblxyXG4gIHZhciB0aXRsZSA9IChvcHRfdGl0bGUgIT09IHVuZGVmaW5lZCA/IG9wdF90aXRsZSA6ICdFcnJvcicpO1xyXG4gIGVycm9yLnF1ZXJ5U2VsZWN0b3IoJy50aXRsZScpLmlubmVySFRNTCA9IHRpdGxlO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoaWRlRXJyb3IoKSB7XHJcbiAgdmFyIGVycm9yID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2Vycm9yJyk7XHJcbiAgZXJyb3IuY2xhc3NMaXN0LnJlbW92ZSgndmlzaWJsZScpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzaG93UGxheUJ1dHRvbigpIHtcclxuICB2YXIgcGxheUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwbGF5LW92ZXJsYXknKTtcclxuICBwbGF5QnV0dG9uLmNsYXNzTGlzdC5hZGQoJ3Zpc2libGUnKTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGlkZVBsYXlCdXR0b24oKSB7XHJcbiAgdmFyIHBsYXlCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcGxheS1vdmVybGF5Jyk7XHJcbiAgcGxheUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCd2aXNpYmxlJyk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNob3dTdGF0cygpIHtcclxuICBzdGF0cy5zZXRNb2RlKDApOyAvLyAwOiBmcHMsIDE6IG1zXHJcblxyXG4gIC8vIEFsaWduIGJvdHRvbS1sZWZ0LlxyXG4gIHN0YXRzLmRvbUVsZW1lbnQuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xyXG4gIHN0YXRzLmRvbUVsZW1lbnQuc3R5bGUubGVmdCA9ICcwcHgnO1xyXG4gIHN0YXRzLmRvbUVsZW1lbnQuc3R5bGUuYm90dG9tID0gJzBweCc7XHJcbiAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChzdGF0cy5kb21FbGVtZW50KTtcclxufVxyXG5cclxuZnVuY3Rpb24gbG9vcCh0aW1lKSB7XHJcbiAgc3RhdHMuYmVnaW4oKTtcclxuICAvLyBVcGRhdGUgdGhlIHZpZGVvIGlmIG5lZWRlZC5cclxuICBpZiAod29ybGRSZW5kZXJlci52aWRlb1Byb3h5KSB7XHJcbiAgICB3b3JsZFJlbmRlcmVyLnZpZGVvUHJveHkudXBkYXRlKHRpbWUpO1xyXG4gIH1cclxuICB3b3JsZFJlbmRlcmVyLnJlbmRlcih0aW1lKTtcclxuICBzdGF0cy5lbmQoKTtcclxuICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUobG9vcCk7XHJcbn1cclxuIiwiXHJcbnZhciBFdmVudEVtaXR0ZXIgPSByZXF1aXJlKCdldmVudGVtaXR0ZXIzJyk7XHJcblxyXG5cclxuZnVuY3Rpb24gTXVsdGlwbGF5ZXJNb2RlKHdvcmxkUmVuZGVyZXIpIHtcclxuICAgIHRoaXMud29ybGRSZW5kZXJlciA9IHdvcmxkUmVuZGVyZXI7XHJcbiAgICB0aGlzLmNhbWVyYSA9IHRoaXMud29ybGRSZW5kZXJlci5jYW1lcmE7XHJcbn1cclxuTXVsdGlwbGF5ZXJNb2RlLnByb3RvdHlwZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuXHJcbk11bHRpcGxheWVyTW9kZS5wcm90b3R5cGUuZW5hYmxlTXVsdGlwbGF5ZXJNb2RlID0gZnVuY3Rpb24oKXtcclxuICAgIHRoaXMuY2FtZXJhID0gdGhpcy53b3JsZFJlbmRlcmVyLmNhbWVyYTtcclxuICAgIHRoaXMubGVhcE1vdGlvbigpO1xyXG4gICAgaWYodGhpcy5tZSl7XHJcbiAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMuc29ja2V0ID0gaW8oKTtcclxuICAgICAgICB0aGlzLnNvY2tldC5vbihcInJvb20tcmVuZGVyLWRhdGFcIixmdW5jdGlvbihyb29tKXtcclxuICAgICAgICAgICAgdGhhdC5yZW5kZXJNZSgpO1xyXG4gICAgICAgICAgICB0aGF0LnJlbmRlclJvb20ocm9vbSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5zb2NrZXQub24oXCJyb29tLWpvaW5lZFwiLGZ1bmN0aW9uKHNvY2tldElkKXtcclxuICAgICAgICAgICAgdGhhdC5zb2NrZXRJZCA9IHNvY2tldElkO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59O1xyXG5cclxuTXVsdGlwbGF5ZXJNb2RlLnByb3RvdHlwZS5qb2luUm9vbSA9IGZ1bmN0aW9uKHJvb20pe1xyXG4gICAgaWYodGhpcy5tZSl7XHJcbiAgICAgICAgdGhpcy5yb29tID0gcm9vbTtcclxuICAgICAgICB0aGlzLnNvY2tldC5lbWl0KFwiam9pbi1yb29tXCIse3Jvb206cm9vbSxtZTp7bmFtZTp0aGlzLm1lLm1lLm5hbWUsZmFjZTp0aGlzLm1lLm1lLmZhY2V9LHBvc2l0aW9uOnt4OnRoaXMuY2FtZXJhLnBvc2l0aW9uLngseTp0aGlzLmNhbWVyYS5wb3NpdGlvbi55LHo6dGhpcy5jYW1lcmEucG9zaXRpb24uen0scXVhdGVybmlvbjp7dzp0aGlzLmNhbWVyYS5xdWF0ZXJuaW9uLl93LHg6dGhpcy5jYW1lcmEucXVhdGVybmlvbi5feCx5OnRoaXMuY2FtZXJhLnF1YXRlcm5pb24uX3ksejp0aGlzLmNhbWVyYS5xdWF0ZXJuaW9uLl96fSxsZWZ0SGFuZDpbXSxyaWdodEhhbmQ6W119KTtcclxuICAgIH1cclxufTtcclxuXHJcbk11bHRpcGxheWVyTW9kZS5wcm90b3R5cGUubGVhdmVSb29tID0gZnVuY3Rpb24ocm9vbSl7XHJcbiAgICB0aGlzLnNvY2tldC5lbWl0KFwibGVhdmUtcm9vbVwiLHtyb29tOnJvb20sbWU6e25hbWU6dGhpcy5tZS5tZS5uYW1lLGZhY2U6dGhpcy5tZS5tZS5mYWNlfX0pO1xyXG59O1xyXG5cclxuTXVsdGlwbGF5ZXJNb2RlLnByb3RvdHlwZS5yZW5kZXJNZSA9IGZ1bmN0aW9uKCl7XHJcbiAgICB0aGlzLm1lID0ge3Jvb206dGhpcy5yb29tLG1lOntuYW1lOnRoaXMubWUubWUubmFtZSxmYWNlOnRoaXMubWUubWUuZmFjZX0scG9zaXRpb246e3g6dGhpcy5jYW1lcmEucG9zaXRpb24ueCx5OnRoaXMuY2FtZXJhLnBvc2l0aW9uLnksejp0aGlzLmNhbWVyYS5wb3NpdGlvbi56fSxxdWF0ZXJuaW9uOnt3OnRoaXMuY2FtZXJhLnF1YXRlcm5pb24uX3cseDp0aGlzLmNhbWVyYS5xdWF0ZXJuaW9uLl94LHk6dGhpcy5jYW1lcmEucXVhdGVybmlvbi5feSx6OnRoaXMuY2FtZXJhLnF1YXRlcm5pb24uX3p9LGxlZnRIYW5kOnRoaXMubWUubGVmdEhhbmQscmlnaHRIYW5kOnRoaXMubWUucmlnaHRIYW5kfTtcclxuICAgIHRoaXMuc29ja2V0LmVtaXQoXCJyb29tLXJlbmRlclwiLHRoaXMubWUpO1xyXG59O1xyXG5NdWx0aXBsYXllck1vZGUucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uKCl7XHJcbiAgICBmb3IodmFyIGlkIGluIE11bHRpcGxheWVyTW9kZS5wcm90b3R5cGUucGxheWVycyl7XHJcbiAgICAgICAgdmFyIHBsYXllciA9IE11bHRpcGxheWVyTW9kZS5wcm90b3R5cGUucGxheWVyc1tpZF07XHJcbiAgICAgICAgcGxheWVyLnF1YXRlcm5pb24uY29weShwbGF5ZXIucGVyc29uLnF1YXRlcm5pb24pO1xyXG4gICAgICAgIC8vcGxheWVyLnJvdGF0aW9uLnNldCgtKHBsYXllci5wZXJzb24ucm90YXRpb24ueikscGxheWVyLnBlcnNvbi5yb3RhdGlvbi55LHBsYXllci5wZXJzb24ucm90YXRpb24ueCk7XHJcbiAgICB9XHJcbn07XHJcbk11bHRpcGxheWVyTW9kZS5wcm90b3R5cGUucGxheWVycyA9IHt9O1xyXG5NdWx0aXBsYXllck1vZGUucHJvdG90eXBlLnJlbmRlclJvb20gPSBmdW5jdGlvbihyb29tKXtcclxuICAgIHZhciBwZXJzb25Db3VudCA9IDA7XHJcbiAgICBmb3IodmFyIGlkIGluIHJvb20ucGVvcGxlKXtcclxuICAgICAgICBwZXJzb25Db3VudCsrO1xyXG4gICAgICAgIHZhciBhbmdsZSA9IDM2MCoocm9vbS5wZW9wbGVbaWRdLm51bWJlci8yKTtcclxuICAgICAgICBpZihpZCE9dGhpcy5tZS5tZS5uYW1lKXtcclxuICAgICAgICAgICAgdmFyIGN1YmU7XHJcbiAgICAgICAgICAgIHZhciBwZXJzb24gPSByb29tLnBlb3BsZVtpZF07XHJcbiAgICAgICAgICAgIGlmKCEodGhpcy5wbGF5ZXJzW3BlcnNvbi5tZS5uYW1lXSkpe1xyXG4gICAgICAgICAgICAgICAgdmFyIGdlb21ldHJ5ID0gbmV3IFRIUkVFLlNwaGVyZUdlb21ldHJ5KCAxNSwgMjQsIDI0ICk7XHJcbiAgICAgICAgICAgICAgICB2YXIgbWF0ZXJpYWwgPSBuZXcgVEhSRUUuTWVzaFBob25nTWF0ZXJpYWwoIHtjb2xvcjogMHhlZmVmZWZ9ICk7XHJcbiAgICAgICAgICAgICAgICBnZW9tZXRyeS5hcHBseU1hdHJpeCggbmV3IFRIUkVFLk1hdHJpeDQoKS5tYWtlU2NhbGUoIDEuMCwgMS4yLCAwLjIgKSApO1xyXG4gICAgICAgICAgICAgICAgY3ViZSA9IG5ldyBUSFJFRS5Hcm91cCgpO1xyXG4gICAgICAgICAgICAgICAgY3ViZS5jdWJlID0gbmV3IFRIUkVFLk1lc2goIGdlb21ldHJ5LCBtYXRlcmlhbCApO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBjdWJlLmFkZChjdWJlLmN1YmUpO1xyXG4gICAgICAgICAgICAgICAgY3ViZS5sZWZ0TWVzaGVzPVtdO1xyXG4gICAgICAgICAgICAgICAgY3ViZS5yaWdodE1lc2hlcz1bXTtcclxuICAgICAgICAgICAgICAgIGN1YmUub3JpZ2luYWxQb3NpdGlvbiA9IHt4OjEwMCpNYXRoLmNvcyhhbmdsZSksejoxMDAqTWF0aC5zaW4oYW5nbGUpfTtcclxuICAgICAgICAgICAgICAgIGN1YmUucG9zaXRpb24uc2V0KGN1YmUub3JpZ2luYWxQb3NpdGlvbi54LDAsY3ViZS5vcmlnaW5hbFBvc2l0aW9uLnopO1xyXG4gICAgICAgICAgICAgICAgY3ViZS5wZXJzb24gPSBwZXJzb247XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBsYXllcnNbcGVyc29uLm1lLm5hbWVdID0gY3ViZTtcclxuICAgICAgICAgICAgICAgIHRoaXMud29ybGRSZW5kZXJlci5zY2VuZS5hZGQoIGN1YmUgKTtcclxuICAgICAgICAgICAgICAgIHZhciBsb2FkZXIgPSBuZXcgVEhSRUUuVGV4dHVyZUxvYWRlcigpO1xyXG4gICAgICAgICAgICAgICAgbG9hZGVyLmNyb3NzT3JpZ2luID0gJ2Fub255bW91cyc7XHJcbiAgICAgICAgICAgICAgICBsb2FkZXIubG9hZChwZXJzb24ubWUuZmFjZSwgZnVuY3Rpb24odGV4dHVyZSl7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dHVyZS53cmFwUyA9IHRleHR1cmUud3JhcFQgPSBUSFJFRS5SZXBlYXRXcmFwcGluZztcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0dXJlLm9mZnNldC54ID0gMC43NTtcclxuICAgICAgICAgICAgICAgICAgICBjdWJlLmN1YmUubWF0ZXJpYWwubWFwID0gdGV4dHVyZTtcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0dXJlLm5lZWRzVXBkYXRlPXRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgY3ViZS5jdWJlLm1hdGVyaWFsLm5lZWRzVXBkYXRlPXRydWU7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBsYXllcnNbcGVyc29uLm1lLm5hbWVdLnBlcnNvbiA9IHBlcnNvbjtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVySGFuZHModGhpcy5wbGF5ZXJzW3BlcnNvbi5tZS5uYW1lXSxwZXJzb24sZmFsc2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIHZhciBvcmlnaW5hbFBvc2l0aW9uID0ge3g6MTAwKk1hdGguY29zKGFuZ2xlKSx6OjEwMCpNYXRoLnNpbihhbmdsZSl9O1xyXG4gICAgICAgICAgICB0aGlzLmNhbWVyYS5wYXJlbnQucG9zaXRpb24uc2V0KG9yaWdpbmFsUG9zaXRpb24ueCwwLG9yaWdpbmFsUG9zaXRpb24ueik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZm9yKHZhciBpZCBpbiBNdWx0aXBsYXllck1vZGUucHJvdG90eXBlLnBsYXllcnMpe1xyXG4gICAgICAgIGlmKCEoaWQgaW4gcm9vbS5wZW9wbGUpKXtcclxuICAgICAgICAgICAgdGhpcy53b3JsZFJlbmRlcmVyLnNjZW5lLnJlbW92ZSggTXVsdGlwbGF5ZXJNb2RlLnByb3RvdHlwZS5wbGF5ZXJzW2lkXSApO1xyXG4gICAgICAgICAgICBkZWxldGUgTXVsdGlwbGF5ZXJNb2RlLnByb3RvdHlwZS5wbGF5ZXJzW2lkXTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn07XHJcblxyXG5NdWx0aXBsYXllck1vZGUucHJvdG90eXBlLnNldE1lID0gZnVuY3Rpb24oZGF0YSl7XHJcbiAgICB0aGlzLm1lID0ge21lOntuYW1lOmRhdGEubmFtZSxmYWNlOmRhdGEuZmFjZX0scG9zaXRpb246e3g6dGhpcy5jYW1lcmEucG9zaXRpb24ueCx5OnRoaXMuY2FtZXJhLnBvc2l0aW9uLnksejp0aGlzLmNhbWVyYS5wb3NpdGlvbi56fSxxdWF0ZXJuaW9uOnt3OnRoaXMuY2FtZXJhLnF1YXRlcm5pb24uX3cseDp0aGlzLmNhbWVyYS5xdWF0ZXJuaW9uLl94LHk6dGhpcy5jYW1lcmEucXVhdGVybmlvbi5feSx6OnRoaXMuY2FtZXJhLnF1YXRlcm5pb24uX3p9LGxlZnRIYW5kOltdLHJpZ2h0SGFuZDpbXX07XHJcbn07XHJcbk11bHRpcGxheWVyTW9kZS5wcm90b3R5cGUucmVuZGVySGFuZHMgPSBmdW5jdGlvbihvYmplY3QsZnJhbWUsaXNMZWFwKXtcclxuICAgIHZhciBjb3VudEJvbmVzID0gMDtcclxuICAgIC8vdmFyIGNvdW50QXJtcyA9IDA7XHJcbiAgICB2YXIgdGhhdCA9IHRoaXM7XHJcbiAgICBpZihpc0xlYXApe1xyXG4gICAgICAgIHRoaXMubWUubGVmdEhhbmQ9W107XHJcbiAgICAgICAgdGhpcy5tZS5yaWdodEhhbmQ9W107XHJcbiAgICAgICAgZnJhbWUuaGFuZHMuZm9yRWFjaChmdW5jdGlvbihoYW5kKXtcclxuICAgICAgICAvL2ZvciAoIHZhciBoYW5kIG9mIGZyYW1lLmhhbmRzICkge1xyXG4gICAgICAgICAgICBoYW5kLmZpbmdlcnMuZm9yRWFjaChmdW5jdGlvbihmaW5nZXIpe1xyXG4gICAgICAgICAgICAvL2ZvciAoIHZhciBmaW5nZXIgb2YgaGFuZC5maW5nZXJzICkge1xyXG4gICAgICAgICAgICAgICAgZmluZ2VyLmJvbmVzLmZvckVhY2goZnVuY3Rpb24oYm9uZSl7XHJcbiAgICAgICAgICAgICAgICAvL2ZvciAoIHZhciBib25lIG9mIGZpbmdlci5ib25lcyApIHtcclxuICAgICAgICAgICAgICAgICAgICAvL2lmICggID09PSAwICkgeyBjb250aW51ZTsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGJvbmUuY2VudGVyXyA9IGJvbmUuY2VudGVyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYm9uZS5tYXRyaXhfID0gYm9uZS5tYXRyaXgoKTtcclxuICAgICAgICAgICAgICAgICAgICAvL3ZhciBib25lTWVzaCA9IG9iamVjdC5ib25lTWVzaGVzIFsgY291bnRCb25lcyBdIHx8IHRoYXQuYWRkQm9uZU1lc2goIG9iamVjdC5ib25lTWVzaGVzICk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJvbmVNZXNoO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKG9iamVjdC5ib25lTWVzaGVzIFsgY291bnRCb25lcyBdKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgIGJvbmVNZXNoID0gb2JqZWN0LmJvbmVNZXNoZXMgWyBjb3VudEJvbmVzIF07XHJcbiAgICAgICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICBib25lTWVzaCA9IHRoYXQuYWRkQm9uZU1lc2goIG9iamVjdC5ib25lTWVzaGVzICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICBvYmplY3QuYWRkKCBib25lTWVzaCApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB0aGF0LnVwZGF0ZUJvbmVNZXNoKCBib25lLCBib25lTWVzaCwgb2JqZWN0LCBpc0xlYXAgKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGF0LmFkZEhhbmRUb01lKGhhbmQudHlwZSxib25lKTtcclxuICAgICAgICAgICAgICAgICAgICBjb3VudEJvbmVzKys7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIC8vdmFyIGFybSA9IGhhbmQuYXJtO1xyXG4gICAgICAgICAgICAvL2FybS5jZW50ZXJfID0gYXJtLmNlbnRlcigpO1xyXG4gICAgICAgICAgICAvL2FybS5tYXRyaXhfID0gYXJtLm1hdHJpeCgpO1xyXG4gICAgICAgICAgICAvL3ZhciBhcm1NZXNoID0gb2JqZWN0LmFybU1lc2hlcyBbIGNvdW50QXJtcysrIF0gfHwgdGhpcy5hZGRCb25lTWVzaCggb2JqZWN0LmFybU1lc2hlcyApO1xyXG4gICAgICAgICAgICAvLy8vdGhpcy5hZGRIYW5kVG9NZShoYW5kLnR5cGUsYXJtKTtcclxuICAgICAgICAgICAgLy90aGlzLnVwZGF0ZUJvbmVNZXNoKCBhcm0sIGFybU1lc2gsIG9iamVjdCwgaXNMZWFwICk7XHJcbiAgICAgICAgICAgIC8vYXJtTWVzaC5zY2FsZS5zZXQoIGFybS53aWR0aCAvIDQsIGFybS53aWR0aCAvIDIsIGFybS5sZW5ndGggKTtcclxuICAgICAgICB9KTtcclxuICAgIH1lbHNle1xyXG4gICAgICAgIGZyYW1lLmxlZnRIYW5kLmZvckVhY2goZnVuY3Rpb24oYm9uZSxpKXtcclxuICAgICAgICAgICAgdmFyIGJvbmVNZXNoO1xyXG4gICAgICAgICAgICBpZihvYmplY3QubGVmdE1lc2hlcyBbIGkgXSl7XHJcbiAgICAgICAgICAgICAgICAgYm9uZU1lc2ggPSBvYmplY3QubGVmdE1lc2hlcyBbIGkgXTtcclxuICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgYm9uZU1lc2ggPSB0aGF0LmFkZEJvbmVNZXNoKCBvYmplY3QubGVmdE1lc2hlcyApO1xyXG4gICAgICAgICAgICAgICAgIG9iamVjdC5hZGQoIGJvbmVNZXNoICk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhhdC51cGRhdGVCb25lTWVzaCggYm9uZSwgYm9uZU1lc2gsIG9iamVjdCwgaXNMZWFwICk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgZnJhbWUucmlnaHRIYW5kLmZvckVhY2goZnVuY3Rpb24oYm9uZSxpKXtcclxuICAgICAgICAgICAgIHZhciBib25lTWVzaDtcclxuICAgICAgICAgICAgaWYob2JqZWN0LnJpZ2h0TWVzaGVzIFsgaSBdKXtcclxuICAgICAgICAgICAgICAgICBib25lTWVzaCA9IG9iamVjdC5yaWdodE1lc2hlcyBbIGkgXTtcclxuICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgYm9uZU1lc2ggPSB0aGF0LmFkZEJvbmVNZXNoKCBvYmplY3QucmlnaHRNZXNoZXMgKTtcclxuICAgICAgICAgICAgICAgICBvYmplY3QuYWRkKCBib25lTWVzaCApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoYXQudXBkYXRlQm9uZU1lc2goIGJvbmUsIGJvbmVNZXNoLCBvYmplY3QsIGlzTGVhcCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn07XHJcblxyXG5NdWx0aXBsYXllck1vZGUucHJvdG90eXBlLmFkZEhhbmRUb01lID0gZnVuY3Rpb24oIHNpZGUsIGJvbmUgKSB7XHJcbiAgICB0aGlzLm1lW3NpZGUrXCJIYW5kXCJdLnB1c2goe2NlbnRlcl86IGJvbmUuY2VudGVyX30pO1xyXG59O1xyXG5cclxuTXVsdGlwbGF5ZXJNb2RlLnByb3RvdHlwZS5hZGRCb25lTWVzaCA9IGZ1bmN0aW9uKCBtZXNoZXMgKSB7XHJcbiAgICB2YXIgZ2VvbWV0cnkgPSBuZXcgVEhSRUUuU3BoZXJlR2VvbWV0cnkoIDAuNCwgMjAsIDIwICk7XHJcbiAgICB2YXIgbWF0ZXJpYWwgPSBuZXcgVEhSRUUuTWVzaFBob25nTWF0ZXJpYWwoIHtjb2xvcjogMHhlZmVmZWZ9ICk7XHJcbiAgICB2YXIgbWVzaCA9IG5ldyBUSFJFRS5NZXNoKCBnZW9tZXRyeSwgbWF0ZXJpYWwgKTtcclxuICAgIG1lc2hlcy5wdXNoKCBtZXNoICk7XHJcbiAgICByZXR1cm4gbWVzaDtcclxufTtcclxuXHJcbk11bHRpcGxheWVyTW9kZS5wcm90b3R5cGUudXBkYXRlQm9uZU1lc2ggPSBmdW5jdGlvbiggYm9uZSwgbWVzaCwgcGFyZW50LCBpc0xlYXApIHtcclxuICAgICAgICBpZihpc0xlYXApe1xyXG4gICAgICAgICAgICBtZXNoLnNldFJvdGF0aW9uRnJvbU1hdHJpeCggbmV3IFRIUkVFLk1hdHJpeDQoKS5mcm9tQXJyYXkoIGJvbmUubWF0cml4XyApICk7XHJcbiAgICAgICAgICAgIG1lc2gucXVhdGVybmlvbi5tdWx0aXBseSggbmV3IFRIUkVFLlF1YXRlcm5pb24oKS5zZXRGcm9tRXVsZXIoIG5ldyBUSFJFRS5FdWxlciggMCwgMCwgTWF0aC5QSSAvIDIgKSApICk7XHJcbiAgICAgICAgICAgIG1lc2guc2NhbGUuc2V0KCBib25lLndpZHRoLzEwMDAsIGJvbmUud2lkdGgvMTAwMCwgYm9uZS5sZW5ndGgpO1xyXG4gICAgICAgICAgICBtZXNoLnBvc2l0aW9uLnNldCggYm9uZS5jZW50ZXJfWzBdLGJvbmUuY2VudGVyX1sxXSxib25lLmNlbnRlcl9bMl0pO1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICBtZXNoLnBvc2l0aW9uLnNldCggYm9uZS5jZW50ZXJfWzBdLGJvbmUuY2VudGVyX1sxXSxib25lLmNlbnRlcl9bMl0pO1xyXG4gICAgICAgIH1cclxufTtcclxuXHJcbk11bHRpcGxheWVyTW9kZS5wcm90b3R5cGUubGVhcE1vdGlvbiA9IGZ1bmN0aW9uKCl7XHJcbiAgICB2YXIgdGhhdCA9IHRoaXM7XHJcbiAgICB0aGF0LmNhbWVyYS5hcm1NZXNoZXMgPSBbXTtcclxuXHR0aGF0LmNhbWVyYS5ib25lTWVzaGVzID0gW107XHJcbiAgICBcclxuICAgIExlYXAubG9vcCh7ZW5hYmxlR2VzdHVyZXM6dHJ1ZSwvKm9wdGltaXplSE1EOiB0cnVlLGJhY2tncm91bmQ6IHRydWUqL30sIGZ1bmN0aW9uKGZyYW1lKXtcclxuICAgICAgICB0aGF0LnJlbmRlckhhbmRzKHRoYXQuY2FtZXJhLGZyYW1lLHRydWUpO1xyXG4gICAgfSkudXNlKCd0cmFuc2Zvcm0nLCB7XHJcbiAgICAgICAgLy9xdWF0ZXJuaW9uOiBuZXcgVEhSRUUuUXVhdGVybmlvbigpLnNldEZyb21FdWxlcihuZXcgVEhSRUUuRXVsZXIoKE1hdGguUEkgKiAtMC4zKSwgMCwgTWF0aC5QSSwgJ1pYWScpKSxcclxuICAgICAgICBwb3NpdGlvbjogbmV3IFRIUkVFLlZlY3RvcjMoMCwgLTUwLC0xMDApLFxyXG4gICAgICAgIHNjYWxlOjEwMCxcclxuICAgICAgICB2cjogdHJ1ZSxcclxuICAgICAgICAvL2VmZmVjdGl2ZVBhcmVudDp0aGF0LmNhbWVyYVxyXG4gICAgfSlcclxuICAgIC8qLnVzZSgnYm9uZUhhbmQnLCB7XHJcbiAgICAgIC8vIElmIHlvdSBhbHJlYWR5IGhhdmUgYSBzY2VuZSBvciB3YW50IHRvIGNyZWF0ZSBpdCB5b3Vyc2VsZiwgeW91IGNhbiBwYXNzIGl0IGluIGhlcmVcclxuICAgICAgLy8gQWx0ZXJuYXRpdmVseSwgeW91IGNhbiBwYXNzIGl0IGluIHdoZW5ldmVyIHlvdSB3YW50IGJ5IGRvaW5nXHJcbiAgICAgIC8vIExlYXAubG9vcENvbnRyb2xsZXIucGx1Z2lucy5ib25lSGFuZC5zY2VuZSA9IG15U2NlbmUuXHJcbiAgICAgICAgc2NlbmU6IHRoaXMud29ybGRSZW5kZXJlci5zY2VuZSxcclxuICAgICAgLy8gRGlzcGxheSB0aGUgYXJtXHJcbiAgICAgICAgYXJtOiB0cnVlXHJcbiAgICB9KSovO1xyXG59O1xyXG5tb2R1bGUuZXhwb3J0cyA9IE11bHRpcGxheWVyTW9kZTsiLCJcclxudmFyIEV5ZXMgPSByZXF1aXJlKCcuL2V5ZXMnKTtcclxudmFyIFRlbXBsYXRlUmVuZGVyZXIgPSByZXF1aXJlKCcuL3RlbXBsYXRlLXJlbmRlcmVyJyk7XHJcblxyXG52YXIgU2NlbmVJbmZvID0gcmVxdWlyZSgnLi9zY2VuZS1pbmZvJyk7XHJcblxyXG5mdW5jdGlvbiBOYXZpZ2F0aW9uUmVuZGVyZXIod29ybGRSZW5kZXJlcikge1xyXG4gIHRoaXMuc2V0V29ybGQod29ybGRSZW5kZXJlcik7XHJcbn1cclxuXHJcbk5hdmlnYXRpb25SZW5kZXJlci5wcm90b3R5cGUgPSBuZXcgVGVtcGxhdGVSZW5kZXJlcigpO1xyXG5OYXZpZ2F0aW9uUmVuZGVyZXIucHJvdG90eXBlLm5leHRfID0gZnVuY3Rpb24oKXtcclxuICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKHRoaXMuZGF0YSk7XHJcbiAgaWYodGhpcy5jdXJyZW50PGtleXMubGVuZ3RoLTEpe1xyXG4gICAgdGhpcy5jdXJyZW50Kys7XHJcbiAgICB0aGlzLnNob3dDdXJyZW50KCk7XHJcbiAgfVxyXG59O1xyXG5cclxuTmF2aWdhdGlvblJlbmRlcmVyLnByb3RvdHlwZS5wcmV2XyA9IGZ1bmN0aW9uKCl7XHJcbiAgaWYodGhpcy5jdXJyZW50PjApe1xyXG4gICAgdGhpcy5jdXJyZW50LS07XHJcbiAgICB0aGlzLnNob3dDdXJyZW50KCk7XHJcbiAgfVxyXG59O1xyXG5OYXZpZ2F0aW9uUmVuZGVyZXIucHJvdG90eXBlLnNob3dDdXJyZW50ID0gZnVuY3Rpb24oKXtcclxuICB2YXIgY3VycmVudCA9IHRoaXMuZGF0YVtPYmplY3Qua2V5cyh0aGlzLmRhdGEpW3RoaXMuY3VycmVudF1dO1xyXG4gIHZhciB0aGF0ID0gdGhpcztcclxuICB2YXIgbG9hZGVyID0gbmV3IFRIUkVFLlRleHR1cmVMb2FkZXIoKTtcclxuICBsb2FkZXIuY3Jvc3NPcmlnaW4gPSAnYW5vbnltb3VzJztcclxuICBsb2FkZXIubG9hZChjdXJyZW50LmltYWdlLCBmdW5jdGlvbih0ZXh0dXJlKXtcclxuICAgIHZhciBsZWZ0VGV4dHVyZSA9IHRleHR1cmUuY2xvbmUoKTtcclxuICAgIHZhciByaWdodFRleHR1cmUgPSB0ZXh0dXJlLmNsb25lKCk7XHJcbiAgICByaWdodFRleHR1cmUud3JhcFMgPSByaWdodFRleHR1cmUud3JhcFQgPSBsZWZ0VGV4dHVyZS53cmFwUyA9IGxlZnRUZXh0dXJlLndyYXBUID0gVEhSRUUuUmVwZWF0V3JhcHBpbmc7XHJcbiAgICBpZiAoY3VycmVudC5pc19zdGVyZW8pe1xyXG4gICAgICBsZWZ0VGV4dHVyZS5yZXBlYXQuc2V0KDAuOCwgMC40KTtcclxuICAgICAgcmlnaHRUZXh0dXJlLnJlcGVhdC5zZXQoMC44LDAuNCk7XHJcbiAgICAgIGxlZnRUZXh0dXJlLm9mZnNldC5zZXQoMC4wNSwwLjA1KTtcclxuICAgICAgcmlnaHRUZXh0dXJlLm9mZnNldC5zZXQoMC4wNSwwLjU1KTtcclxuICAgIH1lbHNle1xyXG4gICAgICBsZWZ0VGV4dHVyZS5yZXBlYXQuc2V0KDAuOCwgMC44KTtcclxuICAgICAgcmlnaHRUZXh0dXJlLnJlcGVhdC5zZXQoMC44LCAwLjgpO1xyXG4gICAgICBsZWZ0VGV4dHVyZS5vZmZzZXQuc2V0KDAuMSwwLjEpO1xyXG4gICAgICByaWdodFRleHR1cmUub2Zmc2V0LnNldCgwLjEsMC4xKTtcclxuICAgIH1cclxuICAgIHRoYXQucGxhbmVMZWZ0Lm1hdGVyaWFsLm1hcCA9IGxlZnRUZXh0dXJlO1xyXG4gICAgdGhhdC5wbGFuZVJpZ2h0Lm1hdGVyaWFsLm1hcCA9IHJpZ2h0VGV4dHVyZTtcclxuICAgIHRoYXQucGxhbmVMZWZ0Lm1hdGVyaWFsLm5lZWRzVXBkYXRlPXRydWU7XHJcbiAgICB0aGF0LnBsYW5lUmlnaHQubWF0ZXJpYWwubmVlZHNVcGRhdGU9dHJ1ZTtcclxuICAgIHRoYXQucGxhbmVMZWZ0Lm1hdGVyaWFsLm1hcC5uZWVkc1VwZGF0ZT10cnVlO1xyXG4gICAgdGhhdC5wbGFuZVJpZ2h0Lm1hdGVyaWFsLm1hcC5uZWVkc1VwZGF0ZT10cnVlO1xyXG4gIH0pO1xyXG59O1xyXG5cclxuTmF2aWdhdGlvblJlbmRlcmVyLnByb3RvdHlwZS5jcmVhdGVOYXZpZ2F0aW9uUGxhbmVfID0gZnVuY3Rpb24oKSB7XHJcbiAgdmFyIGdlb21ldHJ5ID0gIG5ldyBUSFJFRS5QbGFuZUdlb21ldHJ5KCAwLjIsIDAuMiwgMC4wMSk7XHJcbiAgdmFyIG1hdGVyaWFsID0gbmV3IFRIUkVFLk1lc2hCYXNpY01hdGVyaWFsKHt0cmFuc3BhcmVudDogdHJ1ZSwgb3BhY2l0eTogMC45fSk7XHJcbiAgdmFyIHBsYW5lID0gbmV3IFRIUkVFLk1lc2goIGdlb21ldHJ5LCBtYXRlcmlhbCApO1xyXG4gIHBsYW5lLnBvc2l0aW9uLnNldCgwLC0wLjEsLTAuNCk7XHJcbiAgcGxhbmUubG9va0F0KHRoaXMud29ybGRSZW5kZXJlci5jYW1lcmEucG9zaXRpb24pO1xyXG4gIHJldHVybiBwbGFuZTtcclxufTtcclxuXHJcbk5hdmlnYXRpb25SZW5kZXJlci5wcm90b3R5cGUuY3JlYXRlTmF2aWdhdGlvbkJ1dHRvbl8gPSBmdW5jdGlvbigpIHtcclxuICB2YXIgZ2VvbWV0cnkgPSAgbmV3IFRIUkVFLkN5bGluZGVyR2VvbWV0cnkoMCwgMC4wMywgMC4wMywgMywgMiwgZmFsc2UpO1xyXG4gIHZhciBtYXRlcmlhbCA9IG5ldyBUSFJFRS5NZXNoUGhvbmdNYXRlcmlhbCh7Lyp0cmFuc3BhcmVudDogdHJ1ZSwgb3BhY2l0eTogMC45LCovIGNvbG9yOiAweGIzODhmZn0pO1xyXG4gIHZhciBidXR0b24gPSBuZXcgVEhSRUUuTWVzaCggZ2VvbWV0cnksIG1hdGVyaWFsICk7XHJcbiAvLyBidXR0b24ubG9va0F0KHRoaXMud29ybGRSZW5kZXJlci5jYW1lcmEucG9zaXRpb24pO1xyXG4gIHJldHVybiBidXR0b247XHJcbn07XHJcblxyXG5OYXZpZ2F0aW9uUmVuZGVyZXIucHJvdG90eXBlLnVwZGF0ZV8gPSBmdW5jdGlvbihjYW1lcmEpIHtcclxuICBpZiAodGhpcy53b3JsZFJlbmRlcmVyLmlzVlJNb2RlKCkpIHtcclxuICAgIHRoaXMucG9pbnRlci5zZXQoMCwgMCk7XHJcbiAgfVxyXG4gIC8vIFVwZGF0ZSB0aGUgcGlja2luZyByYXkgd2l0aCB0aGUgY2FtZXJhIGFuZCBtb3VzZSBwb3NpdGlvbi5cclxuICB0aGlzLnJheWNhc3Rlci5zZXRGcm9tQ2FtZXJhKHRoaXMucG9pbnRlciwgY2FtZXJhKTtcdFxyXG4gIFxyXG4gIGlmKHRoaXMudXBkYXRlJiZ0eXBlb2YgdGhpcy51cGRhdGUgPT0gXCJmdW5jdGlvblwiKXRoaXMudXBkYXRlKCk7XHJcbiAgXHJcbiAgdmFyIGVsZW1lbnRzID0gdGhpcy53b3JsZFJlbmRlcmVyLnNjZW5lLmdldE9iamVjdEJ5TmFtZSgnbmF2JykuY2hpbGRyZW47XHJcbiAgXHJcbiAgdmFyIGludGVyc2VjdHMgPSB0aGlzLnJheWNhc3Rlci5pbnRlcnNlY3RPYmplY3RzKGVsZW1lbnRzKTtcclxuICB2YXIgaXNJbnRlcnNlY3RlZCA9IChpbnRlcnNlY3RzLmxlbmd0aCA+IDApO1xyXG4gIFxyXG4gIC8vIElmIG5ld2x5IHNlbGVjdGVkLCBlbWl0IGEgZm9jdXMgZXZlbnQuXHJcbiAgaWYgKGlzSW50ZXJzZWN0ZWQpIHtcclxuICAgIHRoaXMuY3VycmVudEVsZW1lbnQgPSBpbnRlcnNlY3RzWzBdLm9iamVjdDtcclxuICB9ZWxzZXtcclxuICAgIHRoaXMuY3VycmVudEVsZW1lbnQgPSBmYWxzZTtcclxuICB9XHJcbn07XHJcblxyXG5OYXZpZ2F0aW9uUmVuZGVyZXIucHJvdG90eXBlLnNldHVwID0gZnVuY3Rpb24oZGF0YSkge1xyXG4gIHRoaXMuZGF0YSA9IGRhdGE7XHJcbiAgdGhpcy5wbGFuZUxlZnQgPSB0aGlzLmNyZWF0ZU5hdmlnYXRpb25QbGFuZV8oKTtcclxuICB0aGlzLnBsYW5lUmlnaHQgPSB0aGlzLmNyZWF0ZU5hdmlnYXRpb25QbGFuZV8oKTtcclxuICB0aGlzLnBsYW5lTGVmdC5uYW1lID0gXCJwbGFuZUxlZnRcIjtcclxuICB0aGlzLnBsYW5lUmlnaHQubmFtZSA9IFwicGxhbmVSaWdodFwiO1xyXG4gIHRoaXMubmF2TGVmdCA9IHRoaXMuY3JlYXRlTmF2aWdhdGlvbkJ1dHRvbl8oKTtcclxuICB0aGlzLm5hdlJpZ2h0ID0gdGhpcy5jcmVhdGVOYXZpZ2F0aW9uQnV0dG9uXygpO1xyXG4gIHRoaXMubmF2TGVmdC5uYW1lID0gXCJuYXZMZWZ0XCI7XHJcbiAgdGhpcy5uYXZSaWdodC5uYW1lID0gXCJuYXZSaWdodFwiO1xyXG4gIHRoaXMubmF2TGVmdC5wb3NpdGlvbi5zZXQoLTAuMSwtMC4wNzUsLTAuMyk7XHJcbiAgdGhpcy5uYXZSaWdodC5wb3NpdGlvbi5zZXQoMC4xLC0wLjA3NSwtMC4zKTtcclxuICB0aGlzLm5hdkxlZnQucm90YXRpb24uc2V0KDAsLShNYXRoLlBJLzQpLE1hdGguUEkvMik7XHJcbiAgdGhpcy5uYXZSaWdodC5yb3RhdGlvbi5zZXQoMCxNYXRoLlBJLzQsLShNYXRoLlBJLzIpKTtcclxuICAvL3RoaXMuYWRkXyh0aGlzLm5hdkxlZnQsXCJuYXZMZWZ0XCIpO1xyXG4gIC8vdGhpcy5hZGRfKHRoaXMubmF2UmlnaHQsXCJuYXZSaWdodFwiKTtcclxuICBcclxuICAvLyBEaXNwbGF5IGluIGxlZnQgYW5kIHJpZ2h0IGV5ZSByZXNwZWN0aXZlbHkuXHJcbiAgdGhpcy5wbGFuZUxlZnQubGF5ZXJzLnNldChFeWVzLkxFRlQpO1xyXG4gIHRoaXMucGxhbmVMZWZ0LmV5ZSA9IEV5ZXMuTEVGVDtcclxuICB0aGlzLnBsYW5lUmlnaHQubGF5ZXJzLnNldChFeWVzLlJJR0hUKTtcclxuICB0aGlzLnBsYW5lUmlnaHQuZXllID0gRXllcy5SSUdIVDtcclxuICB0aGlzLndvcmxkUmVuZGVyZXIuc2NlbmUuZ2V0T2JqZWN0QnlOYW1lKCduYXYnKS5jaGlsZHJlbiA9IFt0aGlzLnBsYW5lTGVmdCwgdGhpcy5wbGFuZVJpZ2h0LHRoaXMubmF2TGVmdCx0aGlzLm5hdlJpZ2h0XTtcclxuICB0aGlzLmN1cnJlbnQ9MDtcclxuICB0aGlzLnNob3dDdXJyZW50KCk7XHJcbn07XHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5OYXZpZ2F0aW9uUmVuZGVyZXIucHJvdG90eXBlLmZvY3VzID0gZnVuY3Rpb24oaWQpIHtcclxuICBcclxufTtcclxuXHJcbk5hdmlnYXRpb25SZW5kZXJlci5wcm90b3R5cGUuYmx1ciA9IGZ1bmN0aW9uKGlkKSB7XHJcbiAgXHJcbn07XHJcblxyXG5OYXZpZ2F0aW9uUmVuZGVyZXIucHJvdG90eXBlLmRvd24gPSBmdW5jdGlvbihpZCkge1xyXG4gIC8vYWxlcnQoXCJ0aGlzIGlzIHRoZSBjbGlja1wiKTtcclxuICAvLyBCZWNvbWUgYWN0aXZlLlxyXG59O1xyXG5cclxuTmF2aWdhdGlvblJlbmRlcmVyLnByb3RvdHlwZS51cCA9IGZ1bmN0aW9uKGlkKSB7XHJcbiAgaWYodGhpcy5jdXJyZW50RWxlbWVudCYmdGhpcy5jdXJyZW50RWxlbWVudC5uYW1lKXtcclxuICAgIGlmKHRoaXMuY3VycmVudEVsZW1lbnQubmFtZT09XCJuYXZMZWZ0XCIpdGhpcy5wcmV2XygpO1xyXG4gICAgaWYodGhpcy5jdXJyZW50RWxlbWVudC5uYW1lPT1cIm5hdlJpZ2h0XCIpdGhpcy5uZXh0XygpO1xyXG4gICAgaWYodGhpcy5jdXJyZW50RWxlbWVudC5uYW1lPT1cInBsYW5lTGVmdFwiKXtcclxuICAgICAgdmFyIHRoYXQgPSB0aGlzO1xyXG4gICAgICB2YXIgZGF0YSA9IHRoaXMuZGF0YVtPYmplY3Qua2V5cyh0aGlzLmRhdGEpW3RoaXMuY3VycmVudF1dO1xyXG4gICAgICB0aGlzLm5hdkxlZnQudmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgICB0aGlzLm5hdlJpZ2h0LnZpc2libGUgPSBmYWxzZTsgXHJcbiAgICAgIHRoaXMucGxhbmVSaWdodC52aXNpYmxlID0gZmFsc2U7IFxyXG4gICAgICB0aGlzLnBsYW5lTGVmdC52aXNpYmxlID0gZmFsc2U7IFxyXG4gICAgICB0aGlzLndvcmxkUmVuZGVyZXIuc3BoZXJlUmVuZGVyZXIuc2V0T3BhY2l0eSgwLCA1MDApLnRoZW4oZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgLy8gVGhlbiBsb2FkIHRoZSBuZXcgc2NlbmUuXHJcbiAgICAgICAgdmFyIHNjZW5lID0gU2NlbmVJbmZvLmxvYWRGcm9tQVBJUGFyYW1zKHtcclxuICAgICAgICAgIGltYWdlOiBkYXRhLmltYWdlLFxyXG4gICAgICAgICAgcHJldmlldzogZGF0YS5wcmV2aWV3LFxyXG4gICAgICAgICAgaXNfc3RlcmVvOiBkYXRhLmlzX3N0ZXJlbyxcclxuICAgICAgICAgIGlzX2F1dG9wYW5fb2ZmOiB0cnVlXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gUmVtb3ZlIGFsbCBvZiB0aGUgaG90c3BvdHMuXHJcbiAgICAgICAgdGhhdC53b3JsZFJlbmRlcmVyLmhvdHNwb3RSZW5kZXJlci5jbGVhckFsbCgpO1xyXG4gICAgICAgIC8vIERlc3Ryb3kgdGhlIHdvcmxkXHJcbiAgICAgICAgdGhhdC53b3JsZFJlbmRlcmVyLmRlc3Ryb3koKTtcclxuICAgICAgICAvLyBVcGRhdGUgdGhlIFVSTCB0byByZWZsZWN0IHRoZSBuZXcgc2NlbmUuIFRoaXMgaXMgaW1wb3J0YW50IHBhcnRpY3VsYXJpbHlcclxuICAgICAgICAvLyBvbiBpT1Mgd2hlcmUgd2UgdXNlIGEgZmFrZSBmdWxsc2NyZWVuIG1vZGUuXHJcbiAgICAgICAgdmFyIHVybCA9IHNjZW5lLmdldEN1cnJlbnRVcmwoKTtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKCdVcGRhdGluZyB1cmwgdG8gYmUgJXMnLCB1cmwpO1xyXG4gICAgICAgIHdpbmRvdy5oaXN0b3J5LnB1c2hTdGF0ZShudWxsLCAnVlIgVmlldycsIHVybCk7XHJcbiAgICAgICAgLy8gQW5kIHNldCB0aGUgbmV3IHNjZW5lLlxyXG4gICAgICAgIHJldHVybiB0aGF0LndvcmxkUmVuZGVyZXIuc2V0U2NlbmUoc2NlbmUpO1xyXG4gICAgICB9KS50aGVuKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIC8vIFRoZW4gZmFkZSB0aGUgc2NlbmUgYmFjayBpbi5cclxuICAgICAgICB0aGF0LndvcmxkUmVuZGVyZXIuc3BoZXJlUmVuZGVyZXIuc2V0T3BhY2l0eSgxLCA1MDApLnRoZW4oZnVuY3Rpb24oKXtcclxuICAgICAgICAgIHRoYXQubmF2TGVmdC52aXNpYmxlID0gdHJ1ZTsgIFxyXG4gICAgICAgICAgdGhhdC5uYXZSaWdodC52aXNpYmxlID0gdHJ1ZTsgIFxyXG4gICAgICAgICAgdGhhdC5wbGFuZVJpZ2h0LnZpc2libGUgPSB0cnVlOyBcclxuICAgICAgICAgIHRoYXQucGxhbmVMZWZ0LnZpc2libGUgPSB0cnVlOyBcclxuICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIC8vIEJlY29tZSBpbmFjdGl2ZS5cclxufTtcclxuXHJcbk5hdmlnYXRpb25SZW5kZXJlci5wcm90b3R5cGUuc2V0T3BhY2l0eSA9IGZ1bmN0aW9uKG9wYWNpdHksIGR1cmF0aW9uKSB7XHJcbiAgXHJcbn07XHJcblxyXG5cclxuTmF2aWdhdGlvblJlbmRlcmVyLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbigpIHtcclxuICBcclxuICAvLyBGYWRlIGhvdHNwb3RzIG91dCBpZiB0aGV5IGFyZSByZWFsbHkgZmFyIGZyb20gY2VudGVyIHRvIGF2b2lkIG92ZXJseVxyXG4gIC8vIGRpc3RvcnRlZCB2aXN1YWxzLlxyXG4gIC8vIHRoaXMuZmFkZU9mZkNlbnRlckhvdHNwb3RzXyhjYW1lcmEpO1xyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBOYXZpZ2F0aW9uUmVuZGVyZXI7IiwiZnVuY3Rpb24gUmV0aWNsZVJlbmRlcmVyKGNhbWVyYSkge1xyXG4gIHRoaXMuY2FtZXJhID0gY2FtZXJhO1xyXG5cclxuICB0aGlzLnJldGljbGUgPSB0aGlzLmNyZWF0ZVJldGljbGVfKCk7XHJcbiAgLy8gSW4gZnJvbnQgb2YgdGhlIGhvdHNwb3QgaXRzZWxmLCB3aGljaCBpcyBhdCByPTAuOTkuXHJcbiAgdGhpcy5yZXRpY2xlLnBvc2l0aW9uLnogPSAtMC45NztcclxuICBjYW1lcmEuYWRkKHRoaXMucmV0aWNsZSk7XHJcblxyXG4gIHRoaXMuc2V0VmlzaWJpbGl0eShmYWxzZSk7XHJcbn1cclxuXHJcblJldGljbGVSZW5kZXJlci5wcm90b3R5cGUuc2V0VmlzaWJpbGl0eSA9IGZ1bmN0aW9uKGlzVmlzaWJsZSkge1xyXG4gIC8vIFRPRE86IFR3ZWVuIHRoZSB0cmFuc2l0aW9uLlxyXG4gIHRoaXMucmV0aWNsZS52aXNpYmxlID0gaXNWaXNpYmxlO1xyXG59O1xyXG5cclxuUmV0aWNsZVJlbmRlcmVyLnByb3RvdHlwZS5jcmVhdGVSZXRpY2xlXyA9IGZ1bmN0aW9uKCkge1xyXG4gIC8vIE1ha2UgYSB0b3J1cy5cclxuICB2YXIgZ2VvbWV0cnkgPSBuZXcgVEhSRUUuVG9ydXNHZW9tZXRyeSgwLjAyLCAwLjAwNSwgMTAsIDIwKTtcclxuICB2YXIgbWF0ZXJpYWwgPSBuZXcgVEhSRUUuTWVzaEJhc2ljTWF0ZXJpYWwoe2NvbG9yOiAweDAwMDAwMH0pO1xyXG4gIHZhciB0b3J1cyA9IG5ldyBUSFJFRS5NZXNoKGdlb21ldHJ5LCBtYXRlcmlhbCk7XHJcblxyXG4gIHJldHVybiB0b3J1cztcclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gUmV0aWNsZVJlbmRlcmVyO1xyXG4iLCIvKlxyXG4gKiBDb3B5cmlnaHQgMjAxNSBHb29nbGUgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcblxyXG52YXIgQ0FNRUxfVE9fVU5ERVJTQ09SRSA9IHtcclxuICB2aWRlbzogJ3ZpZGVvJyxcclxuICBpbWFnZTogJ2ltYWdlJyxcclxuICBwcmV2aWV3OiAncHJldmlldycsXHJcbiAgaXNTdGVyZW86ICdpc19zdGVyZW8nLFxyXG4gIGRlZmF1bHRZYXc6ICdkZWZhdWx0X3lhdycsXHJcbiAgaXNZYXdPbmx5OiAnaXNfeWF3X29ubHknLFxyXG4gIGlzRGVidWc6ICdpc19kZWJ1ZycsXHJcbiAgaXNWUk9mZjogJ2lzX3ZyX29mZicsXHJcbiAgaXNBdXRvcGFuT2ZmOiAnaXNfYXV0b3Bhbl9vZmYnLFxyXG59O1xyXG5cclxuLyoqXHJcbiAqIENvbnRhaW5zIGFsbCBpbmZvcm1hdGlvbiBhYm91dCBhIGdpdmVuIHNjZW5lLlxyXG4gKi9cclxuZnVuY3Rpb24gU2NlbmVJbmZvKG9wdF9wYXJhbXMpIHtcclxuICB2YXIgcGFyYW1zID0gb3B0X3BhcmFtcyB8fCB7fTtcclxuXHJcbiAgdGhpcy5pbWFnZSA9IHBhcmFtcy5pbWFnZTtcclxuICB0aGlzLnByZXZpZXcgPSBwYXJhbXMucHJldmlldztcclxuICB0aGlzLnZpZGVvID0gcGFyYW1zLnZpZGVvO1xyXG4gIHRoaXMuZGVmYXVsdFlhdyA9IFRIUkVFLk1hdGguZGVnVG9SYWQocGFyYW1zLmRlZmF1bHRZYXcgfHwgMCk7XHJcblxyXG4gIHRoaXMuaXNTdGVyZW8gPSBVdGlsLnBhcnNlQm9vbGVhbihwYXJhbXMuaXNTdGVyZW8pO1xyXG4gIHRoaXMuaXNZYXdPbmx5ID0gVXRpbC5wYXJzZUJvb2xlYW4ocGFyYW1zLmlzWWF3T25seSk7XHJcbiAgdGhpcy5pc0RlYnVnID0gVXRpbC5wYXJzZUJvb2xlYW4ocGFyYW1zLmlzRGVidWcpO1xyXG4gIHRoaXMuaXNWUk9mZiA9IFV0aWwucGFyc2VCb29sZWFuKHBhcmFtcy5pc1ZST2ZmKTtcclxuICB0aGlzLmlzQXV0b3Bhbk9mZiA9IFV0aWwucGFyc2VCb29sZWFuKHBhcmFtcy5pc0F1dG9wYW5PZmYpO1xyXG59XHJcblxyXG5TY2VuZUluZm8ubG9hZEZyb21HZXRQYXJhbXMgPSBmdW5jdGlvbigpIHtcclxuICB2YXIgcGFyYW1zID0ge307XHJcbiAgZm9yICh2YXIgY2FtZWxDYXNlIGluIENBTUVMX1RPX1VOREVSU0NPUkUpIHtcclxuICAgIHZhciB1bmRlcnNjb3JlID0gQ0FNRUxfVE9fVU5ERVJTQ09SRVtjYW1lbENhc2VdO1xyXG4gICAgcGFyYW1zW2NhbWVsQ2FzZV0gPSBVdGlsLmdldFF1ZXJ5UGFyYW1ldGVyKHVuZGVyc2NvcmUpO1xyXG4gIH1cclxuICB2YXIgc2NlbmUgPSBuZXcgU2NlbmVJbmZvKHBhcmFtcyk7XHJcbiAgaWYgKCFzY2VuZS5pc1ZhbGlkKCkpIHtcclxuICAgIGNvbnNvbGUud2FybignSW52YWxpZCBzY2VuZTogJXMnLCBzY2VuZS5lcnJvck1lc3NhZ2UpO1xyXG4gIH1cclxuICByZXR1cm4gc2NlbmU7XHJcbn07XHJcblxyXG5TY2VuZUluZm8ubG9hZEZyb21BUElQYXJhbXMgPSBmdW5jdGlvbih1bmRlcnNjb3JlUGFyYW1zKSB7XHJcbiAgdmFyIHBhcmFtcyA9IHt9O1xyXG4gIGZvciAodmFyIGNhbWVsQ2FzZSBpbiBDQU1FTF9UT19VTkRFUlNDT1JFKSB7XHJcbiAgICB2YXIgdW5kZXJzY29yZSA9IENBTUVMX1RPX1VOREVSU0NPUkVbY2FtZWxDYXNlXTtcclxuICAgIGlmICh1bmRlcnNjb3JlUGFyYW1zW3VuZGVyc2NvcmVdKSB7XHJcbiAgICAgIHBhcmFtc1tjYW1lbENhc2VdID0gdW5kZXJzY29yZVBhcmFtc1t1bmRlcnNjb3JlXTtcclxuICAgIH1cclxuICB9XHJcbiAgdmFyIHNjZW5lID0gbmV3IFNjZW5lSW5mbyhwYXJhbXMpO1xyXG4gIGlmICghc2NlbmUuaXNWYWxpZCgpKSB7XHJcbiAgICBjb25zb2xlLndhcm4oJ0ludmFsaWQgc2NlbmU6ICVzJywgc2NlbmUuZXJyb3JNZXNzYWdlKTtcclxuICB9XHJcbiAgcmV0dXJuIHNjZW5lO1xyXG59O1xyXG5cclxuU2NlbmVJbmZvLnByb3RvdHlwZS5pc1ZhbGlkID0gZnVuY3Rpb24oKSB7XHJcbiAgLy8gRWl0aGVyIGl0J3MgYW4gaW1hZ2Ugb3IgYSB2aWRlby5cclxuICBpZiAoIXRoaXMuaW1hZ2UgJiYgIXRoaXMudmlkZW8pIHtcclxuICAgIHRoaXMuZXJyb3JNZXNzYWdlID0gJ0VpdGhlciBpbWFnZSBvciB2aWRlbyBVUkwgbXVzdCBiZSBzcGVjaWZpZWQuJztcclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9XHJcbiAgaWYgKHRoaXMuaW1hZ2UgJiYgdGhpcy52aWRlbykge1xyXG4gICAgdGhpcy5lcnJvck1lc3NhZ2UgPSAnQm90aCBpbWFnZSBhbmQgdmlkZW8gVVJMIGNhblxcJ3QgYmUgc3BlY2lmaWVkLic7XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfVxyXG4gIGlmICh0aGlzLmltYWdlICYmICF0aGlzLmlzVmFsaWRJbWFnZV8odGhpcy5pbWFnZSkpIHtcclxuICAgIHRoaXMuZXJyb3JNZXNzYWdlID0gJ0ludmFsaWQgaW1hZ2UgVVJMOiAnICsgdGhpcy5pbWFnZTtcclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9XHJcbiAgdGhpcy5lcnJvck1lc3NhZ2UgPSBudWxsO1xyXG4gIHJldHVybiB0cnVlO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIEdlbmVyYXRlcyBhIFVSTCB0byByZWZsZWN0IHRoaXMgc2NlbmUuXHJcbiAqL1xyXG5TY2VuZUluZm8ucHJvdG90eXBlLmdldEN1cnJlbnRVcmwgPSBmdW5jdGlvbigpIHtcclxuICB2YXIgdXJsID0gbG9jYXRpb24ucHJvdG9jb2wgKyAnLy8nICsgbG9jYXRpb24uaG9zdCArIGxvY2F0aW9uLnBhdGhuYW1lICsgJz8nO1xyXG4gIGZvciAodmFyIGNhbWVsQ2FzZSBpbiBDQU1FTF9UT19VTkRFUlNDT1JFKSB7XHJcbiAgICB2YXIgdW5kZXJzY29yZSA9IENBTUVMX1RPX1VOREVSU0NPUkVbY2FtZWxDYXNlXTtcclxuICAgIHZhciB2YWx1ZSA9IHRoaXNbY2FtZWxDYXNlXTtcclxuICAgIGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgIHVybCArPSB1bmRlcnNjb3JlICsgJz0nICsgdmFsdWUgKyAnJic7XHJcbiAgICB9XHJcbiAgfVxyXG4gIC8vIENob3Agb2ZmIHRoZSB0cmFpbGluZyBhbXBlcnNhbmQuXHJcbiAgcmV0dXJuIHVybC5zdWJzdHJpbmcoMCwgdXJsLmxlbmd0aCAtIDEpO1xyXG59O1xyXG5cclxuU2NlbmVJbmZvLnByb3RvdHlwZS5pc1ZhbGlkSW1hZ2VfID0gZnVuY3Rpb24oaW1hZ2VVcmwpIHtcclxuICByZXR1cm4gdHJ1ZTtcclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gU2NlbmVJbmZvO1xyXG4iLCIvKlxyXG4gKiBDb3B5cmlnaHQgMjAxNSBHb29nbGUgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcblxyXG52YXIgRXllcyA9IHJlcXVpcmUoJy4vZXllcycpO1xyXG52YXIgVFdFRU4gPSByZXF1aXJlKCd0d2Vlbi5qcycpO1xyXG52YXIgVXRpbCA9IHJlcXVpcmUoJy4uL3V0aWwnKTtcclxuXHJcbmZ1bmN0aW9uIFNwaGVyZVJlbmRlcmVyKHNjZW5lKSB7XHJcbiAgdGhpcy5zY2VuZSA9IHNjZW5lO1xyXG5cclxuICAvLyBDcmVhdGUgYSB0cmFuc3BhcmVudCBtYXNrLlxyXG4gIHRoaXMuY3JlYXRlT3BhY2l0eU1hc2tfKCk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTZXRzIHRoZSBwaG90b3NwaGVyZSBiYXNlZCBvbiB0aGUgaW1hZ2UgaW4gdGhlIHNvdXJjZS4gU3VwcG9ydHMgc3RlcmVvIGFuZFxyXG4gKiBtb25vIHBob3Rvc3BoZXJlcy5cclxuICpcclxuICogQHJldHVybiB7UHJvbWlzZX1cclxuICovXHJcblNwaGVyZVJlbmRlcmVyLnByb3RvdHlwZS5zZXRQaG90b3NwaGVyZSA9IGZ1bmN0aW9uKHNyYywgb3B0X3BhcmFtcykge1xyXG4gIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcclxuICAgIHRoaXMucmVzb2x2ZSA9IHJlc29sdmU7XHJcbiAgICB0aGlzLnJlamVjdCA9IHJlamVjdDtcclxuXHJcbiAgICB2YXIgcGFyYW1zID0gb3B0X3BhcmFtcyB8fCB7fTtcclxuXHJcbiAgICB0aGlzLmlzU3RlcmVvID0gISFwYXJhbXMuaXNTdGVyZW87XHJcbiAgICB0aGlzLnNyYyA9IHNyYztcclxuXHJcbiAgICAvLyBMb2FkIHRleHR1cmUuXHJcbiAgICB2YXIgbG9hZGVyID0gbmV3IFRIUkVFLlRleHR1cmVMb2FkZXIoKTtcclxuICAgIGxvYWRlci5jcm9zc09yaWdpbiA9ICdhbm9ueW1vdXMnO1xyXG4gICAgbG9hZGVyLmxvYWQoc3JjLCB0aGlzLm9uVGV4dHVyZUxvYWRlZF8uYmluZCh0aGlzKSwgdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICAgICAgdGhpcy5vblRleHR1cmVFcnJvcl8uYmluZCh0aGlzKSk7XHJcbiAgfS5iaW5kKHRoaXMpKTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBAcmV0dXJuIHtQcm9taXNlfSBZZWFoLlxyXG4gKi9cclxuU3BoZXJlUmVuZGVyZXIucHJvdG90eXBlLnNldDM2MFZpZGVvID0gZnVuY3Rpb24odmlkZW9FbGVtZW50LCBvcHRfcGFyYW1zKSB7XHJcbiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgdGhpcy5yZXNvbHZlID0gcmVzb2x2ZTtcclxuICAgIHRoaXMucmVqZWN0ID0gcmVqZWN0O1xyXG5cclxuICAgIHZhciBwYXJhbXMgPSBvcHRfcGFyYW1zIHx8IHt9O1xyXG5cclxuICAgIHRoaXMuaXNTdGVyZW8gPSAhIXBhcmFtcy5pc1N0ZXJlbztcclxuXHJcbiAgICAvLyBMb2FkIHRoZSB2aWRlbyB0ZXh0dXJlLlxyXG4gICAgdmFyIHZpZGVvVGV4dHVyZSA9IG5ldyBUSFJFRS5WaWRlb1RleHR1cmUodmlkZW9FbGVtZW50KTtcclxuICAgIHZpZGVvVGV4dHVyZS5taW5GaWx0ZXIgPSBUSFJFRS5OZWFyZXN0RmlsdGVyO1xyXG4gICAgdmlkZW9UZXh0dXJlLm1hZ0ZpbHRlciA9IFRIUkVFLk5lYXJlc3RGaWx0ZXI7XHJcbiAgICB2aWRlb1RleHR1cmUuZm9ybWF0ID0gVEhSRUUuUkdCRm9ybWF0O1xyXG4gICAgdmlkZW9UZXh0dXJlLmdlbmVyYXRlTWlwbWFwcyA9IGZhbHNlO1xyXG4gICAgdmlkZW9UZXh0dXJlLm5lZWRzVXBkYXRlID0gdHJ1ZTtcclxuXHJcbiAgICB0aGlzLm9uVGV4dHVyZUxvYWRlZF8odmlkZW9UZXh0dXJlKTtcclxuICB9LmJpbmQodGhpcykpO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIFNldCB0aGUgb3BhY2l0eSBvZiB0aGUgcGFub3JhbWEuXHJcbiAqXHJcbiAqIEBwYXJhbSB7TnVtYmVyfSBvcGFjaXR5IEhvdyBvcGFxdWUgd2Ugd2FudCB0aGUgcGFub3JhbWEgdG8gYmUuIDAgbWVhbnMgYmxhY2ssXHJcbiAqIDEgbWVhbnMgZnVsbCBjb2xvci5cclxuICogQHBhcmFtIHtOdW1iZXJ9IGR1cmF0aW9uIE51bWJlciBvZiBtaWxsaXNlY29uZHMgdGhlIHRyYW5zaXRpb24gc2hvdWxkIHRha2UuXHJcbiAqXHJcbiAqIEByZXR1cm4ge1Byb21pc2V9IFdoZW4gdGhlIG9wYWNpdHkgY2hhbmdlIGlzIGNvbXBsZXRlLlxyXG4gKi9cclxuU3BoZXJlUmVuZGVyZXIucHJvdG90eXBlLnNldE9wYWNpdHkgPSBmdW5jdGlvbihvcGFjaXR5LCBkdXJhdGlvbikge1xyXG4gIHZhciBzY2VuZSA9IHRoaXMuc2NlbmU7XHJcbiAgLy8gSWYgd2Ugd2FudCB0aGUgb3BhY2l0eVxyXG4gIHZhciBvdmVybGF5T3BhY2l0eSA9IDEgLSBvcGFjaXR5O1xyXG4gIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcclxuICAgIHZhciBtYXNrID0gc2NlbmUuZ2V0T2JqZWN0QnlOYW1lKCdvcGFjaXR5TWFzaycpO1xyXG4gICAgdmFyIHR3ZWVuID0gbmV3IFRXRUVOLlR3ZWVuKHtvcGFjaXR5OiBtYXNrLm1hdGVyaWFsLm9wYWNpdHl9KVxyXG4gICAgICAgIC50byh7b3BhY2l0eTogb3ZlcmxheU9wYWNpdHl9LCBkdXJhdGlvbilcclxuICAgICAgICAuZWFzaW5nKFRXRUVOLkVhc2luZy5RdWFkcmF0aWMuSW5PdXQpO1xyXG4gICAgdHdlZW4ub25VcGRhdGUoZnVuY3Rpb24oZSkge1xyXG4gICAgICBtYXNrLm1hdGVyaWFsLm9wYWNpdHkgPSB0aGlzLm9wYWNpdHk7XHJcbiAgICB9KTtcclxuICAgIHR3ZWVuLm9uQ29tcGxldGUocmVzb2x2ZSkuc3RhcnQoKTtcclxuICB9KTtcclxufTtcclxuXHJcblNwaGVyZVJlbmRlcmVyLnByb3RvdHlwZS5vblRleHR1cmVMb2FkZWRfID0gZnVuY3Rpb24odGV4dHVyZSkge1xyXG4gIHZhciBzcGhlcmVMZWZ0O1xyXG4gIHZhciBzcGhlcmVSaWdodDtcclxuICBpZiAodGhpcy5pc1N0ZXJlbykge1xyXG4gICAgc3BoZXJlTGVmdCA9IHRoaXMuY3JlYXRlUGhvdG9zcGhlcmVfKHRleHR1cmUsIHtvZmZzZXRZOiAwLjUsIHNjYWxlWTogMC41fSk7XHJcbiAgICBzcGhlcmVSaWdodCA9IHRoaXMuY3JlYXRlUGhvdG9zcGhlcmVfKHRleHR1cmUsIHtvZmZzZXRZOiAwLCBzY2FsZVk6IDAuNX0pO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBzcGhlcmVMZWZ0ID0gdGhpcy5jcmVhdGVQaG90b3NwaGVyZV8odGV4dHVyZSk7XHJcbiAgICBzcGhlcmVSaWdodCA9IHRoaXMuY3JlYXRlUGhvdG9zcGhlcmVfKHRleHR1cmUpO1xyXG4gIH1cclxuXHJcbiAgLy8gRGlzcGxheSBpbiBsZWZ0IGFuZCByaWdodCBleWUgcmVzcGVjdGl2ZWx5LlxyXG4gIHNwaGVyZUxlZnQubGF5ZXJzLnNldChFeWVzLkxFRlQpO1xyXG4gIHNwaGVyZUxlZnQuZXllID0gRXllcy5MRUZUO1xyXG4gIHNwaGVyZVJpZ2h0LmxheWVycy5zZXQoRXllcy5SSUdIVCk7XHJcbiAgc3BoZXJlUmlnaHQuZXllID0gRXllcy5SSUdIVDtcclxuXHJcbiAgdGhpcy5zY2VuZS5nZXRPYmplY3RCeU5hbWUoJ3Bob3RvJykuY2hpbGRyZW4gPSBbc3BoZXJlTGVmdCwgc3BoZXJlUmlnaHRdO1xyXG5cclxuICB0aGlzLnJlc29sdmUoKTtcclxufTtcclxuXHJcblNwaGVyZVJlbmRlcmVyLnByb3RvdHlwZS5vblRleHR1cmVFcnJvcl8gPSBmdW5jdGlvbihlcnJvcikge1xyXG4gIHRoaXMucmVqZWN0KCdVbmFibGUgdG8gbG9hZCB0ZXh0dXJlIGZyb20gXCInICsgdGhpcy5zcmMgKyAnXCInKTtcclxufTtcclxuXHJcblxyXG5TcGhlcmVSZW5kZXJlci5wcm90b3R5cGUuY3JlYXRlUGhvdG9zcGhlcmVfID0gZnVuY3Rpb24odGV4dHVyZSwgb3B0X3BhcmFtcykge1xyXG4gIHZhciBwID0gb3B0X3BhcmFtcyB8fCB7fTtcclxuICBwLnNjYWxlWCA9IHAuc2NhbGVYIHx8IDE7XHJcbiAgcC5zY2FsZVkgPSBwLnNjYWxlWSB8fCAxO1xyXG4gIHAub2Zmc2V0WCA9IHAub2Zmc2V0WCB8fCAwO1xyXG4gIHAub2Zmc2V0WSA9IHAub2Zmc2V0WSB8fCAwO1xyXG4gIHAucGhpU3RhcnQgPSBwLnBoaVN0YXJ0IHx8IDA7XHJcbiAgcC5waGlMZW5ndGggPSBwLnBoaUxlbmd0aCB8fCBNYXRoLlBJICogMjtcclxuICBwLnRoZXRhU3RhcnQgPSBwLnRoZXRhU3RhcnQgfHwgMDtcclxuICBwLnRoZXRhTGVuZ3RoID0gcC50aGV0YUxlbmd0aCB8fCBNYXRoLlBJO1xyXG5cclxuICB2YXIgZ2VvbWV0cnkgPSBuZXcgVEhSRUUuU3BoZXJlR2VvbWV0cnkoMTAwMCwgNDgsIDQ4LFxyXG4gICAgICBwLnBoaVN0YXJ0LCBwLnBoaUxlbmd0aCwgcC50aGV0YVN0YXJ0LCBwLnRoZXRhTGVuZ3RoKTtcclxuICBnZW9tZXRyeS5hcHBseU1hdHJpeChuZXcgVEhSRUUuTWF0cml4NCgpLm1ha2VTY2FsZSgtMSwgMSwgMSkpO1xyXG4gIHZhciB1dnMgPSBnZW9tZXRyeS5mYWNlVmVydGV4VXZzWzBdO1xyXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgdXZzLmxlbmd0aDsgaSArKykge1xyXG4gICAgZm9yICh2YXIgaiA9IDA7IGogPCAzOyBqICsrKSB7XHJcbiAgICAgIHV2c1tpXVtqXS54ICo9IHAuc2NhbGVYO1xyXG4gICAgICB1dnNbaV1bal0ueCArPSBwLm9mZnNldFg7XHJcbiAgICAgIHV2c1tpXVtqXS55ICo9IHAuc2NhbGVZO1xyXG4gICAgICB1dnNbaV1bal0ueSArPSBwLm9mZnNldFk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICB2YXIgbWF0ZXJpYWwgPSBuZXcgVEhSRUUuTWVzaEJhc2ljTWF0ZXJpYWwoeyBtYXA6IHRleHR1cmUgfSk7XHJcbiAgdmFyIG91dCA9IG5ldyBUSFJFRS5NZXNoKGdlb21ldHJ5LCBtYXRlcmlhbCk7XHJcbiAgLy9vdXQudmlzaWJsZSA9IGZhbHNlO1xyXG4gIC8vb3V0LnJlbmRlck9yZGVyID0gLTE7XHJcbiAgcmV0dXJuIG91dDtcclxufTtcclxuXHJcblNwaGVyZVJlbmRlcmVyLnByb3RvdHlwZS5jcmVhdGVPcGFjaXR5TWFza18gPSBmdW5jdGlvbigpIHtcclxuICB2YXIgZ2VvbWV0cnkgPSBuZXcgVEhSRUUuU3BoZXJlR2VvbWV0cnkoMC4yLCA0OCwgNDgpO1xyXG4gIHZhciBtYXRlcmlhbCA9IG5ldyBUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbCh7XHJcbiAgICBjb2xvcjogMHgwMDAwMDAsIHNpZGU6IFRIUkVFLkRvdWJsZVNpZGUsIG9wYWNpdHk6IDAsIHRyYW5zcGFyZW50OiB0cnVlfSk7XHJcbiAgdmFyIG9wYWNpdHlNYXNrID0gbmV3IFRIUkVFLk1lc2goZ2VvbWV0cnksIG1hdGVyaWFsKTtcclxuICBvcGFjaXR5TWFzay5uYW1lID0gJ29wYWNpdHlNYXNrJztcclxuICAvL29wYWNpdHlNYXNrLnJlbmRlck9yZGVyID0gMTtcclxuXHJcbiAgdGhpcy5zY2VuZS5hZGQob3BhY2l0eU1hc2spO1xyXG4gIHJldHVybiBvcGFjaXR5TWFzaztcclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gU3BoZXJlUmVuZGVyZXI7XHJcbiIsIlxyXG52YXIgRXZlbnRFbWl0dGVyID0gcmVxdWlyZSgnZXZlbnRlbWl0dGVyMycpO1xyXG5cclxuXHJcbmZ1bmN0aW9uIFRlbXBsYXRlUmVuZGVyZXIoKSB7XHJcbn1cclxuVGVtcGxhdGVSZW5kZXJlci5wcm90b3R5cGUgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcblxyXG5UZW1wbGF0ZVJlbmRlcmVyLnByb3RvdHlwZS5zZXRXb3JsZCA9IGZ1bmN0aW9uKHdvcmxkUmVuZGVyZXIpe1xyXG4gIFxyXG4gIHRoaXMud29ybGRSZW5kZXJlciA9IHdvcmxkUmVuZGVyZXI7XHJcbiAgLy8gTm90ZTogdGhpcyBldmVudCBtdXN0IGJlIGFkZGVkIHRvIGRvY3VtZW50LmJvZHkgYW5kIG5vdCB0byB3aW5kb3cgZm9yIGl0IHRvXHJcbiAgLy8gd29yayBpbnNpZGUgaU9TIGlmcmFtZXMuXHJcbiAgdmFyIGJvZHkgPSBkb2N1bWVudC5ib2R5O1xyXG4gIC8vIEJpbmQgZXZlbnRzIGZvciBob3RzcG90IGludGVyYWN0aW9uLlxyXG4gIGlmICghVXRpbC5pc01vYmlsZSgpKSB7XHJcbiAgICAvLyBPbmx5IGVuYWJsZSBtb3VzZSBldmVudHMgb24gZGVza3RvcC5cclxuICAgIGJvZHkuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGhpcy5vbk1vdXNlRG93bl8uYmluZCh0aGlzKSwgZmFsc2UpO1xyXG4gICAgYm9keS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCB0aGlzLm9uTW91c2VNb3ZlXy5iaW5kKHRoaXMpLCBmYWxzZSk7XHJcbiAgICBib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCB0aGlzLm9uTW91c2VVcF8uYmluZCh0aGlzKSwgZmFsc2UpO1xyXG4gIH1cclxuICBib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCB0aGlzLm9uVG91Y2hTdGFydF8uYmluZCh0aGlzKSwgZmFsc2UpO1xyXG4gIGJvZHkuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCB0aGlzLm9uVG91Y2hFbmRfLmJpbmQodGhpcyksIGZhbHNlKTtcclxuXHJcbiAgLy8gQWRkIGEgcGxhY2Vob2xkZXIgZm9yIGhvdHNwb3RzLlxyXG4gIHRoaXMucm9vdCA9IG5ldyBUSFJFRS5Hcm91cCgpO1xyXG4gIC8vIEFsaWduIHRoZSBjZW50ZXIgd2l0aCB0aGUgY2VudGVyIG9mIHRoZSBjYW1lcmEgdG9vLlxyXG4gIHRoaXMucm9vdC5yb3RhdGlvbi55ID0gTWF0aC5QSSAvIDI7XHJcbiAgdGhpcy53b3JsZFJlbmRlcmVyLnNjZW5lLmFkZCh0aGlzLnJvb3QpO1xyXG5cclxuICAvLyBBbGwgZWxlbWVudCBJRHMuXHJcbiAgdGhpcy5lbGVtZW50cyA9IHt9O1xyXG5cclxuICAvLyBDdXJyZW50bHkgc2VsZWN0ZWQgZWxlbWVudHMuXHJcbiAgdGhpcy5zZWxlY3RlZEVsZW1lbnRzID0ge307XHJcblxyXG4gIC8vIEVsZW1lbnRzIHRoYXQgdGhlIGxhc3QgdG91Y2hzdGFydCAvIG1vdXNlZG93biBldmVudCBoYXBwZW5lZCBmb3IuXHJcbiAgdGhpcy5kb3duRWxlbWVudHMgPSB7fTtcclxuXHJcbiAgLy8gRm9yIHJheWNhc3RpbmcuIEluaXRpYWxpemUgbW91c2UgdG8gYmUgb2ZmIHNjcmVlbiBpbml0aWFsbHkuXHJcbiAgdGhpcy5wb2ludGVyID0gbmV3IFRIUkVFLlZlY3RvcjIoMSwgMSk7XHJcbiAgdGhpcy5yYXljYXN0ZXIgPSBuZXcgVEhSRUUuUmF5Y2FzdGVyKCk7XHJcbiAgLy8gVE9ETzogVHdlZW4gdGhpcyBhbmltYXRpb24uXHJcbiAgdGhpcy5zZXRWaXNpYmlsaXR5KGZhbHNlKTtcclxufVxyXG5cclxuVGVtcGxhdGVSZW5kZXJlci5wcm90b3R5cGUuc2V0VmlzaWJpbGl0eSA9IGZ1bmN0aW9uKGlzVmlzaWJsZSkge1xyXG4gIHRoaXMucm9vdC52aXNpYmxlID0gaXNWaXNpYmxlO1xyXG59O1xyXG5cclxuVGVtcGxhdGVSZW5kZXJlci5wcm90b3R5cGUub25Ub3VjaFN0YXJ0XyA9IGZ1bmN0aW9uKGUpIHtcclxuICAvLyBJbiBWUiBtb2RlLCBkb24ndCB0b3VjaCB0aGUgcG9pbnRlciBwb3NpdGlvbi5cclxuICBpZiAoIXRoaXMud29ybGRSZW5kZXJlci5pc1ZSTW9kZSgpKSB7XHJcbiAgICB0aGlzLnVwZGF0ZVRvdWNoXyhlKTtcclxuICB9XHJcblxyXG4gIC8vIEZvcmNlIGEgY2FtZXJhIHVwZGF0ZSB0byBzZWUgaWYgYW55IGhvdHNwb3RzIHdlcmUgc2VsZWN0ZWQuXHJcbiAgdGhpcy51cGRhdGUodGhpcy53b3JsZFJlbmRlcmVyLmNhbWVyYSk7XHJcblxyXG4gIHRoaXMuZG93bkVsZW1lbnRzID0ge307XHJcbiAgZm9yICh2YXIgaWQgaW4gdGhpcy5zZWxlY3RlZEhvdHNwb3RzKSB7XHJcbiAgICB0aGlzLmRvd25FbGVtZW50c1tpZF0gPSB0cnVlO1xyXG4gICAgaWYodGhpcy5kb3duJiZ0eXBlb2YgdGhpcy5kb3duID09IFwiZnVuY3Rpb25cIil0aGlzLmRvd24oaWQpO1xyXG4gIH1cclxuICByZXR1cm4gZmFsc2U7XHJcbn07XHJcblxyXG5UZW1wbGF0ZVJlbmRlcmVyLnByb3RvdHlwZS5vblRvdWNoRW5kXyA9IGZ1bmN0aW9uKGUpIHtcclxuICAvLyBJZiBubyBob3RzcG90cyBhcmUgcHJlc3NlZCwgZW1pdCBhbiBlbXB0eSBjbGljayBldmVudC5cclxuICBcclxuICAgIGlmKHRoaXMudXAmJnR5cGVvZiB0aGlzLnVwID09IFwiZnVuY3Rpb25cIil0aGlzLnVwKCk7XHJcbn07XHJcblxyXG5UZW1wbGF0ZVJlbmRlcmVyLnByb3RvdHlwZS51cGRhdGVUb3VjaF8gPSBmdW5jdGlvbihlKSB7XHJcbiAgdmFyIHNpemUgPSB0aGlzLndvcmxkUmVuZGVyZXIucmVuZGVyZXIuZ2V0U2l6ZSgpO1xyXG4gIHZhciB0b3VjaCA9IGUudG91Y2hlc1swXTtcclxuXHR0aGlzLnBvaW50ZXIueCA9ICh0b3VjaC5jbGllbnRYIC8gc2l6ZS53aWR0aCkgKiAyIC0gMTtcclxuXHR0aGlzLnBvaW50ZXIueSA9IC0gKHRvdWNoLmNsaWVudFkgLyBzaXplLmhlaWdodCkgKiAyICsgMTtcdFxyXG59O1xyXG5cclxuVGVtcGxhdGVSZW5kZXJlci5wcm90b3R5cGUub25Nb3VzZURvd25fID0gZnVuY3Rpb24oZSkge1xyXG4gIHRoaXMudXBkYXRlTW91c2VfKGUpO1xyXG4gIGlmKHRoaXMuZG93biYmdHlwZW9mIHRoaXMuZG93biA9PSBcImZ1bmN0aW9uXCIpdGhpcy5kb3duKCk7XHJcbn07XHJcblxyXG5UZW1wbGF0ZVJlbmRlcmVyLnByb3RvdHlwZS5vbk1vdXNlTW92ZV8gPSBmdW5jdGlvbihlKSB7XHJcbiAgdGhpcy51cGRhdGVNb3VzZV8oZSk7XHJcbn07XHJcblxyXG5UZW1wbGF0ZVJlbmRlcmVyLnByb3RvdHlwZS5vbk1vdXNlVXBfID0gZnVuY3Rpb24oZSkge1xyXG4gIHRoaXMudXBkYXRlTW91c2VfKGUpO1xyXG4gIGlmKHRoaXMudXAmJnR5cGVvZiB0aGlzLnVwID09IFwiZnVuY3Rpb25cIil0aGlzLnVwKCk7XHJcbn07XHJcblxyXG5UZW1wbGF0ZVJlbmRlcmVyLnByb3RvdHlwZS51cGRhdGVNb3VzZV8gPSBmdW5jdGlvbihlKSB7XHJcbiAgdmFyIHNpemUgPSB0aGlzLndvcmxkUmVuZGVyZXIucmVuZGVyZXIuZ2V0U2l6ZSgpO1xyXG5cdHRoaXMucG9pbnRlci54ID0gKGUuY2xpZW50WCAvIHNpemUud2lkdGgpICogMiAtIDE7XHJcblx0dGhpcy5wb2ludGVyLnkgPSAtIChlLmNsaWVudFkgLyBzaXplLmhlaWdodCkgKiAyICsgMTtcdFxyXG59O1xyXG5cclxuVGVtcGxhdGVSZW5kZXJlci5wcm90b3R5cGUuYWRkXyA9IGZ1bmN0aW9uKGVsZW1lbnQsIGlkLyosIGltYWdlLCBpc19zdGVyZW8qLykge1xyXG4gICAgLy8gSWYgYSBob3RzcG90IGFscmVhZHkgZXhpc3RzIHdpdGggdGhpcyBJRCwgc3RvcC5cclxuICAgIGlmICh0aGlzLmVsZW1lbnRzW2lkXSkge1xyXG4gICAgICAvLyBUT0RPOiBQcm9wZXIgZXJyb3IgcmVwb3J0aW5nLlxyXG4gICAgICBjb25zb2xlLmVycm9yKCdBdHRlbXB0IHRvIGFkZCBlbGVtZW50IHdpdGggZXhpc3RpbmcgaWQgJXMuJywgaWQpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBpZihlbGVtZW50KXtcclxuICAgICAgICBlbGVtZW50Lm5hbWUgPSBpZDtcclxuICAgICAgICB0aGlzLnJvb3QuYWRkKGVsZW1lbnQpO1xyXG4gICAgICAgIHRoaXMuZWxlbWVudHNbaWRdID0gZWxlbWVudDtcclxuICAgIH1cclxufTtcclxuXHJcblxyXG5UZW1wbGF0ZVJlbmRlcmVyLnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbihpZCkge1xyXG4gIC8vIElmIHRoZXJlJ3Mgbm8gaG90c3BvdCB3aXRoIHRoaXMgSUQsIGZhaWwuXHJcbiAgaWYgKCF0aGlzLmVsZW1lbnRzW2lkXSkgeyBcclxuICAgIC8vIFRPRE86IFByb3BlciBlcnJvciByZXBvcnRpbmcuXHJcbiAgICBjb25zb2xlLmVycm9yKCdBdHRlbXB0IHRvIHJlbW92ZSBub24tZXhpc3RpbmcgaG90c3BvdCB3aXRoIGlkICVzLicsIGlkKTtcclxuICAgIHJldHVybjtcclxuICB9XHJcbiAgLy8gUmVtb3ZlIHRoZSBtZXNoIGZyb20gdGhlIHNjZW5lLlxyXG4gIHRoaXMucm9vdC5yZW1vdmUodGhpcy5lbGVtZW50c1tpZF0pO1xyXG5cclxuICAvLyBJZiB0aGlzIGhvdHNwb3Qgd2FzIHNlbGVjdGVkLCBtYWtlIHN1cmUgaXQgZ2V0cyB1bnNlbGVjdGVkLlxyXG4gIGRlbGV0ZSB0aGlzLnNlbGVjdGVkRWxlbWVudHNbaWRdO1xyXG4gIGRlbGV0ZSB0aGlzLmRvd25FbGVtZW50c1tpZF07XHJcbiAgZGVsZXRlIHRoaXMuZWxlbWVudHNbaWRdO1xyXG4gIHRoaXMuZW1pdCgnYmx1cicsIGlkKTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBDbGVhcnMgYWxsIGhvdHNwb3RzIGZyb20gdGhlIHBhbm8uIE9mdGVuIGNhbGxlZCB3aGVuIGNoYW5naW5nIHBhbm9zLlxyXG4gKi9cclxuVGVtcGxhdGVSZW5kZXJlci5wcm90b3R5cGUuY2xlYXJBbGwgPSBmdW5jdGlvbigpIHtcclxuICBmb3IgKHZhciBpZCBpbiB0aGlzLmVsZW1lbnRzKSB7XHJcbiAgICB0aGlzLnJlbW92ZShpZCk7XHJcbiAgfVxyXG59O1xyXG5cclxuVGVtcGxhdGVSZW5kZXJlci5wcm90b3R5cGUuZ2V0Q291bnQgPSBmdW5jdGlvbigpIHtcclxuICB2YXIgY291bnQgPSAwO1xyXG4gIGZvciAodmFyIGlkIGluIHRoaXMuZWxlbWVudHMpIHtcclxuICAgIGNvdW50ICs9IDE7XHJcbiAgfVxyXG4gIHJldHVybiBjb3VudDtcclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gVGVtcGxhdGVSZW5kZXJlcjsiLCJ2YXIgVXRpbCA9IHJlcXVpcmUoJy4uL3V0aWwnKTtcclxuXHJcbi8qKlxyXG4gKiBBIHByb3h5IGNsYXNzIGZvciB3b3JraW5nIGFyb3VuZCB0aGUgZmFjdCB0aGF0IGFzIHNvb24gYXMgYSB2aWRlbyBpcyBwbGF5KCllZFxyXG4gKiBvbiBpT1MsIFNhZmFyaSBhdXRvLWZ1bGxzY3JlZW5zIHRoZSB2aWRlby5cclxuICpcclxuICogVE9ETyhzbXVzKTogVGhlIGVudGlyZSByYWlzb24gZCdldHJlIGZvciB0aGlzIGNsYXNzIGlzIHRvIHdvcmsgYXJvdW5kIHRoaXNcclxuICogaXNzdWUuIE9uY2UgU2FmYXJpIGltcGxlbWVudHMgc29tZSB3YXkgdG8gc3VwcHJlc3MgdGhpcyBmdWxsc2NyZWVuIHBsYXllciwgd2VcclxuICogY2FuIHJlbW92ZSB0aGlzIGNvZGUuXHJcbiAqL1xyXG5mdW5jdGlvbiBWaWRlb1Byb3h5KHZpZGVvRWxlbWVudCkge1xyXG4gIHRoaXMudmlkZW9FbGVtZW50ID0gdmlkZW9FbGVtZW50O1xyXG4gIC8vIFRydWUgaWYgd2UncmUgY3VycmVudGx5IG1hbnVhbGx5IGFkdmFuY2luZyB0aGUgcGxheWhlYWQgKG9ubHkgb24gaU9TKS5cclxuICB0aGlzLmlzRmFrZVBsYXliYWNrID0gZmFsc2U7XHJcblxyXG4gIC8vIFdoZW4gdGhlIHZpZGVvIHN0YXJ0ZWQgcGxheWluZy5cclxuICB0aGlzLnN0YXJ0VGltZSA9IG51bGw7XHJcbn1cclxuXHJcblZpZGVvUHJveHkucHJvdG90eXBlLnBsYXkgPSBmdW5jdGlvbigpIHtcclxuICBpZiAoVXRpbC5pc0lPUzlPckxlc3MoKSkge1xyXG4gICAgdGhpcy5zdGFydFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKTtcclxuICAgIHRoaXMuaXNGYWtlUGxheWJhY2sgPSB0cnVlO1xyXG5cclxuICAgIC8vIE1ha2UgYW4gYXVkaW8gZWxlbWVudCB0byBwbGF5YmFjayBqdXN0IHRoZSBhdWRpbyBwYXJ0LlxyXG4gICAgdGhpcy5hdWRpb0VsZW1lbnQgPSBuZXcgQXVkaW8oKTtcclxuICAgIHRoaXMuYXVkaW9FbGVtZW50LnNyYyA9IHRoaXMudmlkZW9FbGVtZW50LnNyYztcclxuICAgIHRoaXMuYXVkaW9FbGVtZW50LnBsYXkoKTtcclxuICB9IGVsc2Uge1xyXG4gICAgdGhpcy52aWRlb0VsZW1lbnQucGxheSgpLnRoZW4oZnVuY3Rpb24oZSkge1xyXG4gICAgICBjb25zb2xlLmxvZygnUGxheWluZyB2aWRlby4nLCBlKTtcclxuICAgIH0pO1xyXG4gIH1cclxufTtcclxuXHJcblZpZGVvUHJveHkucHJvdG90eXBlLnBhdXNlID0gZnVuY3Rpb24oKSB7XHJcbiAgaWYgKFV0aWwuaXNJT1M5T3JMZXNzKCkgJiYgdGhpcy5pc0Zha2VQbGF5YmFjaykge1xyXG4gICAgdGhpcy5pc0Zha2VQbGF5YmFjayA9IHRydWU7XHJcblxyXG4gICAgdGhpcy5hdWRpb0VsZW1lbnQucGF1c2UoKTtcclxuICB9IGVsc2Uge1xyXG4gICAgdGhpcy52aWRlb0VsZW1lbnQucGF1c2UoKTtcclxuICB9XHJcbn07XHJcblxyXG5WaWRlb1Byb3h5LnByb3RvdHlwZS5zZXRWb2x1bWUgPSBmdW5jdGlvbih2b2x1bWVMZXZlbCkge1xyXG4gIGlmICh0aGlzLnZpZGVvRWxlbWVudCkge1xyXG4gICAgLy8gT24gaU9TIDEwLCB0aGUgVmlkZW9FbGVtZW50LnZvbHVtZSBwcm9wZXJ0eSBpcyByZWFkLW9ubHkuIFNvIHdlIHNwZWNpYWxcclxuICAgIC8vIGNhc2UgbXV0aW5nIGFuZCB1bm11dGluZy5cclxuICAgIGlmIChVdGlsLmlzSU9TKCkpIHtcclxuICAgICAgdGhpcy52aWRlb0VsZW1lbnQubXV0ZWQgPSAodm9sdW1lTGV2ZWwgPT09IDApO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy52aWRlb0VsZW1lbnQudm9sdW1lID0gdm9sdW1lTGV2ZWw7XHJcbiAgICB9XHJcbiAgfVxyXG4gIGlmICh0aGlzLmF1ZGlvRWxlbWVudCkge1xyXG4gICAgdGhpcy5hdWRpb0VsZW1lbnQudm9sdW1lID0gdm9sdW1lTGV2ZWw7XHJcbiAgfVxyXG59O1xyXG5cclxuLyoqXHJcbiAqIENhbGxlZCBvbiBSQUYgdG8gcHJvZ3Jlc3MgcGxheWJhY2suXHJcbiAqL1xyXG5WaWRlb1Byb3h5LnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbigpIHtcclxuICAvLyBGYWtlcyBwbGF5YmFjayBmb3IgaU9TIG9ubHkuXHJcbiAgaWYgKCF0aGlzLmlzRmFrZVBsYXliYWNrKSB7XHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG4gIHZhciBkdXJhdGlvbiA9IHRoaXMudmlkZW9FbGVtZW50LmR1cmF0aW9uO1xyXG4gIHZhciBub3cgPSBwZXJmb3JtYW5jZS5ub3coKTtcclxuICB2YXIgZGVsdGEgPSBub3cgLSB0aGlzLnN0YXJ0VGltZTtcclxuICB2YXIgZGVsdGFTID0gZGVsdGEgLyAxMDAwO1xyXG4gIHRoaXMudmlkZW9FbGVtZW50LmN1cnJlbnRUaW1lID0gZGVsdGFTO1xyXG5cclxuICAvLyBMb29wIHRocm91Z2ggdGhlIHZpZGVvXHJcbiAgaWYgKGRlbHRhUyA+IGR1cmF0aW9uKSB7XHJcbiAgICB0aGlzLnN0YXJ0VGltZSA9IG5vdztcclxuICAgIHRoaXMudmlkZW9FbGVtZW50LmN1cnJlbnRUaW1lID0gMDtcclxuICAgIC8vIEFsc28gcmVzdGFydCB0aGUgYXVkaW8uXHJcbiAgICB0aGlzLmF1ZGlvRWxlbWVudC5jdXJyZW50VGltZSA9IDA7XHJcbiAgfVxyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBWaWRlb1Byb3h5O1xyXG4iLCIvKlxyXG4gKiBDb3B5cmlnaHQgMjAxNiBHb29nbGUgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBBZGFwdGl2ZVBsYXllciA9IHJlcXVpcmUoJy4vYWRhcHRpdmUtcGxheWVyJyk7XHJcbnZhciBFdmVudEVtaXR0ZXIgPSByZXF1aXJlKCdldmVudGVtaXR0ZXIzJyk7XHJcbnZhciBFeWVzID0gcmVxdWlyZSgnLi9leWVzJyk7XHJcbnZhciBIb3RzcG90UmVuZGVyZXIgPSByZXF1aXJlKCcuL2hvdHNwb3QtcmVuZGVyZXInKTtcclxudmFyIFJldGljbGVSZW5kZXJlciA9IHJlcXVpcmUoJy4vcmV0aWNsZS1yZW5kZXJlcicpO1xyXG52YXIgTmF2aWdhdGlvblJlbmRlcmVyID0gcmVxdWlyZSgnLi9uYXZpZ2F0aW9uLXJlbmRlcmVyJyk7XHJcbnZhciBNdWx0aXBsYXllck1vZGUgPSByZXF1aXJlKCcuL211bHRpcGxheWVyLW1vZGUnKTtcclxudmFyIFNwaGVyZVJlbmRlcmVyID0gcmVxdWlyZSgnLi9zcGhlcmUtcmVuZGVyZXInKTtcclxudmFyIFRXRUVOID0gcmVxdWlyZSgndHdlZW4uanMnKTtcclxudmFyIFV0aWwgPSByZXF1aXJlKCcuLi91dGlsJyk7XHJcbnZhciBWaWRlb1Byb3h5ID0gcmVxdWlyZSgnLi92aWRlby1wcm94eScpO1xyXG52YXIgV2ViVlJNYW5hZ2VyID0gcmVxdWlyZSgnd2VidnItYm9pbGVycGxhdGUnKTtcclxuXHJcbnZhciBBVVRPUEFOX0RVUkFUSU9OID0gMzAwMDtcclxudmFyIEFVVE9QQU5fQU5HTEUgPSAwLjQ7XHJcblxyXG5cclxuLyoqXHJcbiAqIFRoZSBtYWluIFdlYkdMIHJlbmRlcmluZyBlbnRyeSBwb2ludC4gTWFuYWdlcyB0aGUgc2NlbmUsIGNhbWVyYSwgVlItcmVsYXRlZFxyXG4gKiByZW5kZXJpbmcgdXBkYXRlcy4gSW50ZXJhY3RzIHdpdGggdGhlIFdlYlZSTWFuYWdlci5cclxuICpcclxuICogQ29vcmRpbmF0ZXMgdGhlIG90aGVyIHJlbmRlcmVyczogU3BoZXJlUmVuZGVyZXIsIEhvdHNwb3RSZW5kZXJlcixcclxuICogUmV0aWNsZVJlbmRlcmVyLlxyXG4gKlxyXG4gKiBBbHNvIG1hbmFnZXMgdGhlIEFkYXB0aXZlUGxheWVyIGFuZCBWaWRlb1Byb3h5LlxyXG4gKlxyXG4gKiBFbWl0cyB0aGUgZm9sbG93aW5nIGV2ZW50czpcclxuICogICBsb2FkOiB3aGVuIHRoZSBzY2VuZSBpcyBsb2FkZWQuXHJcbiAqICAgZXJyb3I6IGlmIHRoZXJlIGlzIGFuIGVycm9yIGxvYWRpbmcgdGhlIHNjZW5lLlxyXG4gKiAgIG1vZGVjaGFuZ2UoQm9vbGVhbiBpc1ZSKTogaWYgdGhlIG1vZGUgKGVnLiBWUiwgZnVsbHNjcmVlbiwgZXRjKSBjaGFuZ2VzLlxyXG4gKi9cclxuZnVuY3Rpb24gV29ybGRSZW5kZXJlcigpIHtcclxuICB0aGlzLmluaXRfKCk7XHJcblxyXG4gIHRoaXMuc3BoZXJlUmVuZGVyZXIgPSBuZXcgU3BoZXJlUmVuZGVyZXIodGhpcy5zY2VuZSk7XHJcbiAgdGhpcy5yZXRpY2xlUmVuZGVyZXIgPSBuZXcgUmV0aWNsZVJlbmRlcmVyKHRoaXMuY2FtZXJhKTtcclxuICB0aGlzLmhvdHNwb3RSZW5kZXJlciA9IG5ldyBIb3RzcG90UmVuZGVyZXIodGhpcyk7XHJcbiAgdGhpcy5uYXZpZ2F0aW9uUmVuZGVyZXIgPSBuZXcgTmF2aWdhdGlvblJlbmRlcmVyKHRoaXMpO1xyXG4gIHRoaXMubXVsdGlwbGF5ZXJNb2RlID0gbmV3IE11bHRpcGxheWVyTW9kZSh0aGlzKTtcclxuICB0aGlzLmhvdHNwb3RSZW5kZXJlci5vbignZm9jdXMnLCB0aGlzLm9uSG90c3BvdEZvY3VzXy5iaW5kKHRoaXMpKTtcclxuICB0aGlzLmhvdHNwb3RSZW5kZXJlci5vbignYmx1cicsIHRoaXMub25Ib3RzcG90Qmx1cl8uYmluZCh0aGlzKSk7XHJcbn1cclxuV29ybGRSZW5kZXJlci5wcm90b3R5cGUgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcblxyXG5Xb3JsZFJlbmRlcmVyLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbih0aW1lKSB7XHJcbiAgdGhpcy5jb250cm9scy51cGRhdGUoKTtcclxuICB0aGlzLmhvdHNwb3RSZW5kZXJlci51cGRhdGUodGhpcy5jYW1lcmEpO1xyXG4gIHRoaXMubmF2aWdhdGlvblJlbmRlcmVyLnVwZGF0ZV8odGhpcy5jYW1lcmEpO1xyXG4gIHRoaXMubXVsdGlwbGF5ZXJNb2RlLnVwZGF0ZSgpO1xyXG4gIFRXRUVOLnVwZGF0ZSh0aW1lKTtcclxuICB0aGlzLmVmZmVjdC5yZW5kZXIodGhpcy5zY2VuZSwgdGhpcy5jYW1lcmEpO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIEByZXR1cm4ge1Byb21pc2V9IFdoZW4gdGhlIHNjZW5lIGlzIGZ1bGx5IGxvYWRlZC5cclxuICovXHJcbldvcmxkUmVuZGVyZXIucHJvdG90eXBlLnNldFNjZW5lID0gZnVuY3Rpb24oc2NlbmUpIHtcclxuICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgdmFyIHByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcclxuICAgIHNlbGYuc2NlbmVSZXNvbHZlID0gcmVzb2x2ZTtcclxuICAgIHNlbGYuc2NlbmVSZWplY3QgPSByZWplY3Q7XHJcbiAgfSk7XHJcblxyXG4gIGlmICghc2NlbmUgfHwgIXNjZW5lLmlzVmFsaWQoKSkge1xyXG4gICAgdGhpcy5kaWRMb2FkRmFpbF8oc2NlbmUuZXJyb3JNZXNzYWdlKTtcclxuICAgIHJldHVybjtcclxuICB9XHJcblxyXG4gIHZhciBwYXJhbXMgPSB7XHJcbiAgICBpc1N0ZXJlbzogc2NlbmUuaXNTdGVyZW8sXHJcbiAgfTtcclxuICB0aGlzLnNldERlZmF1bHRZYXdfKHNjZW5lLmRlZmF1bHRZYXcgfHwgMCk7XHJcblxyXG4gIC8vIERpc2FibGUgVlIgbW9kZSBpZiBleHBsaWNpdGx5IGRpc2FibGVkLCBvciBpZiB3ZSdyZSBsb2FkaW5nIGEgdmlkZW8gb24gaU9TXHJcbiAgLy8gOSBvciBlYXJsaWVyLlxyXG4gIGlmIChzY2VuZS5pc1ZST2ZmIHx8IChzY2VuZS52aWRlbyAmJiBVdGlsLmlzSU9TOU9yTGVzcygpKSkge1xyXG4gICAgdGhpcy5tYW5hZ2VyLnNldFZSQ29tcGF0aWJsZU92ZXJyaWRlKGZhbHNlKTtcclxuICB9XHJcblxyXG4gIC8vIFNldCB2YXJpb3VzIGNhbGxiYWNrIG92ZXJyaWRlcyBpbiBpT1MuXHJcbiAgaWYgKFV0aWwuaXNJT1MoKSkge1xyXG4gICAgdGhpcy5tYW5hZ2VyLnNldEZ1bGxzY3JlZW5DYWxsYmFjayhmdW5jdGlvbigpIHtcclxuICAgICAgVXRpbC5zZW5kUGFyZW50TWVzc2FnZSh7dHlwZTogJ2VudGVyLWZ1bGxzY3JlZW4nfSk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMubWFuYWdlci5zZXRFeGl0RnVsbHNjcmVlbkNhbGxiYWNrKGZ1bmN0aW9uKCkge1xyXG4gICAgICBVdGlsLnNlbmRQYXJlbnRNZXNzYWdlKHt0eXBlOiAnZXhpdC1mdWxsc2NyZWVuJ30pO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLm1hbmFnZXIuc2V0VlJDYWxsYmFjayhmdW5jdGlvbigpIHtcclxuICAgICAgVXRpbC5zZW5kUGFyZW50TWVzc2FnZSh7dHlwZTogJ2VudGVyLXZyJ30pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvLyBJZiB3ZSdyZSBkZWFsaW5nIHdpdGggYW4gaW1hZ2UsIGFuZCBub3QgYSB2aWRlby5cclxuICBpZiAoc2NlbmUuaW1hZ2UgJiYgIXNjZW5lLnZpZGVvKSB7XHJcbiAgICBpZiAoc2NlbmUucHJldmlldykge1xyXG4gICAgICAvLyBGaXJzdCBsb2FkIHRoZSBwcmV2aWV3LlxyXG4gICAgICB0aGlzLnNwaGVyZVJlbmRlcmVyLnNldFBob3Rvc3BoZXJlKHNjZW5lLnByZXZpZXcsIHBhcmFtcykudGhlbihmdW5jdGlvbigpIHtcclxuICAgICAgICAvLyBBcyBzb29uIGFzIHNvbWV0aGluZyBpcyBsb2FkZWQsIGVtaXQgdGhlIGxvYWQgZXZlbnQgdG8gaGlkZSB0aGVcclxuICAgICAgICAvLyBsb2FkaW5nIHByb2dyZXNzIGJhci5cclxuICAgICAgICBzZWxmLmRpZExvYWRfKCk7XHJcbiAgICAgICAgLy8gVGhlbiBsb2FkIHRoZSBmdWxsIHJlc29sdXRpb24gaW1hZ2UuXHJcbiAgICAgICAgc2VsZi5zcGhlcmVSZW5kZXJlci5zZXRQaG90b3NwaGVyZShzY2VuZS5pbWFnZSwgcGFyYW1zKTtcclxuICAgICAgfSkuY2F0Y2goc2VsZi5kaWRMb2FkRmFpbF8uYmluZChzZWxmKSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAvLyBObyBwcmV2aWV3IC0tIGdvIHN0cmFpZ2h0IHRvIHJlbmRlcmluZyB0aGUgZnVsbCBpbWFnZS5cclxuICAgICAgdGhpcy5zcGhlcmVSZW5kZXJlci5zZXRQaG90b3NwaGVyZShzY2VuZS5pbWFnZSwgcGFyYW1zKS50aGVuKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHNlbGYuZGlkTG9hZF8oKTtcclxuICAgICAgfSkuY2F0Y2goc2VsZi5kaWRMb2FkRmFpbF8uYmluZChzZWxmKSk7XHJcbiAgICB9XHJcbiAgfSBlbHNlIGlmIChzY2VuZS52aWRlbykge1xyXG4gICAgaWYgKFV0aWwuaXNJRTExKCkpIHtcclxuICAgICAgLy8gT24gSUUgMTEsIGlmIGFuICdpbWFnZScgcGFyYW0gaXMgcHJvdmlkZWQsIGxvYWQgaXQgaW5zdGVhZCBvZiBzaG93aW5nXHJcbiAgICAgIC8vIGFuIGVycm9yLlxyXG4gICAgICAvL1xyXG4gICAgICAvLyBUT0RPKHNtdXMpOiBPbmNlIHZpZGVvIHRleHR1cmVzIGFyZSBzdXBwb3J0ZWQsIHJlbW92ZSB0aGlzIGZhbGxiYWNrLlxyXG4gICAgICBpZiAoc2NlbmUuaW1hZ2UpIHtcclxuICAgICAgICB0aGlzLnNwaGVyZVJlbmRlcmVyLnNldFBob3Rvc3BoZXJlKHNjZW5lLmltYWdlLCBwYXJhbXMpLnRoZW4oZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBzZWxmLmRpZExvYWRfKCk7XHJcbiAgICAgICAgfSkuY2F0Y2goc2VsZi5kaWRMb2FkRmFpbF8uYmluZChzZWxmKSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5kaWRMb2FkRmFpbF8oJ1ZpZGVvIGlzIG5vdCBzdXBwb3J0ZWQgb24gSUUxMS4nKTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5wbGF5ZXIgPSBuZXcgQWRhcHRpdmVQbGF5ZXIoKTtcclxuICAgICAgdGhpcy5wbGF5ZXIub24oJ2xvYWQnLCBmdW5jdGlvbih2aWRlb0VsZW1lbnQpIHtcclxuICAgICAgICBzZWxmLnNwaGVyZVJlbmRlcmVyLnNldDM2MFZpZGVvKHZpZGVvRWxlbWVudCwgcGFyYW1zKS50aGVuKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgc2VsZi5kaWRMb2FkXyh7dmlkZW9FbGVtZW50OiB2aWRlb0VsZW1lbnR9KTtcclxuICAgICAgICB9KS5jYXRjaChzZWxmLmRpZExvYWRGYWlsXy5iaW5kKHNlbGYpKTtcclxuICAgICAgfSk7XHJcbiAgICAgIHRoaXMucGxheWVyLm9uKCdlcnJvcicsIGZ1bmN0aW9uKGVycm9yKSB7XHJcbiAgICAgICAgc2VsZi5kaWRMb2FkRmFpbF8oJ1ZpZGVvIGxvYWQgZXJyb3I6ICcgKyBlcnJvcik7XHJcbiAgICAgIH0pO1xyXG4gICAgICB0aGlzLnBsYXllci5sb2FkKHNjZW5lLnZpZGVvKTtcclxuXHJcbiAgICAgIHRoaXMudmlkZW9Qcm94eSA9IG5ldyBWaWRlb1Byb3h5KHRoaXMucGxheWVyLnZpZGVvKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHRoaXMuc2NlbmVJbmZvID0gc2NlbmU7XHJcbiAvLyBjb25zb2xlLmxvZygnTG9hZGVkIHNjZW5lJywgc2NlbmUpO1xyXG5cclxuICByZXR1cm4gcHJvbWlzZTtcclxufTtcclxuXHJcbldvcmxkUmVuZGVyZXIucHJvdG90eXBlLmlzVlJNb2RlID0gZnVuY3Rpb24oKSB7XHJcbiAgcmV0dXJuICEhdGhpcy52ckRpc3BsYXkgJiYgdGhpcy52ckRpc3BsYXkuaXNQcmVzZW50aW5nO1xyXG59O1xyXG5cclxuV29ybGRSZW5kZXJlci5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uKCkge1xyXG4gIGlmICh0aGlzLnBsYXllcikge1xyXG4gICAgdGhpcy5wbGF5ZXIucmVtb3ZlQWxsTGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLnBsYXllci5kZXN0cm95KCk7XHJcbiAgICB0aGlzLnBsYXllciA9IG51bGw7XHJcbiAgfVxyXG59XHJcblxyXG5Xb3JsZFJlbmRlcmVyLnByb3RvdHlwZS5kaWRMb2FkXyA9IGZ1bmN0aW9uKG9wdF9ldmVudCkge1xyXG4gIHZhciBldmVudCA9IG9wdF9ldmVudCB8fCB7fTtcclxuICB0aGlzLmVtaXQoJ2xvYWQnLCBldmVudCk7XHJcbiAgaWYgKHRoaXMuc2NlbmVSZXNvbHZlKSB7XHJcbiAgICB0aGlzLnNjZW5lUmVzb2x2ZSgpO1xyXG4gIH1cclxufTtcclxuXHJcbldvcmxkUmVuZGVyZXIucHJvdG90eXBlLmRpZExvYWRGYWlsXyA9IGZ1bmN0aW9uKG1lc3NhZ2UpIHtcclxuICB0aGlzLmVtaXQoJ2Vycm9yJywgbWVzc2FnZSk7XHJcbiAgaWYgKHRoaXMuc2NlbmVSZWplY3QpIHtcclxuICAgIHRoaXMuc2NlbmVSZWplY3QobWVzc2FnZSk7XHJcbiAgfVxyXG59O1xyXG5cclxuLyoqXHJcbiAqIFNldHMgdGhlIGRlZmF1bHQgeWF3LlxyXG4gKiBAcGFyYW0ge051bWJlcn0gYW5nbGVSYWQgVGhlIHlhdyBpbiByYWRpYW5zLlxyXG4gKi9cclxuV29ybGRSZW5kZXJlci5wcm90b3R5cGUuc2V0RGVmYXVsdFlhd18gPSBmdW5jdGlvbihhbmdsZVJhZCkge1xyXG4gIC8vIFJvdGF0ZSB0aGUgY2FtZXJhIHBhcmVudCB0byB0YWtlIGludG8gYWNjb3VudCB0aGUgc2NlbmUncyByb3RhdGlvbi5cclxuICAvLyBCeSBkZWZhdWx0LCBpdCBzaG91bGQgYmUgYXQgdGhlIGNlbnRlciBvZiB0aGUgaW1hZ2UuXHJcbiAgLy90aGlzLmNhbWVyYS5wYXJlbnQucm90YXRpb24ueSA9IChNYXRoLlBJIC8gMi4wKSArIGFuZ2xlUmFkO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIERvIHRoZSBpbml0aWFsIGNhbWVyYSB0d2VlbiB0byByb3RhdGUgdGhlIGNhbWVyYSwgZ2l2aW5nIGFuIGluZGljYXRpb24gdGhhdFxyXG4gKiB0aGVyZSBpcyBsaXZlIGNvbnRlbnQgdGhlcmUgKG9uIGRlc2t0b3Agb25seSkuXHJcbiAqL1xyXG5Xb3JsZFJlbmRlcmVyLnByb3RvdHlwZS5hdXRvcGFuID0gZnVuY3Rpb24oZHVyYXRpb24pIHtcclxuICB2YXIgdGFyZ2V0WSA9IHRoaXMuY2FtZXJhLnBhcmVudC5yb3RhdGlvbi55IC0gQVVUT1BBTl9BTkdMRTtcclxuICB2YXIgdHdlZW4gPSBuZXcgVFdFRU4uVHdlZW4odGhpcy5jYW1lcmEucGFyZW50LnJvdGF0aW9uKVxyXG4gICAgICAudG8oe3k6IHRhcmdldFl9LCBBVVRPUEFOX0RVUkFUSU9OKVxyXG4gICAgICAuZWFzaW5nKFRXRUVOLkVhc2luZy5RdWFkcmF0aWMuT3V0KVxyXG4gICAgICAuc3RhcnQoKTtcclxufTtcclxuXHJcbldvcmxkUmVuZGVyZXIucHJvdG90eXBlLmluaXRfID0gZnVuY3Rpb24oKSB7XHJcbiAgdmFyIGNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2JvZHknKTtcclxuICB2YXIgYXNwZWN0ID0gd2luZG93LmlubmVyV2lkdGggLyB3aW5kb3cuaW5uZXJIZWlnaHQ7XHJcbiAgdmFyIGNhbWVyYSA9IG5ldyBUSFJFRS5QZXJzcGVjdGl2ZUNhbWVyYSg3NSwgYXNwZWN0LCAwLjAwMDAwMDAwMSwgNTAwKTtcclxuICBjYW1lcmEubGF5ZXJzLmVuYWJsZSgxKTtcclxuXHJcbiAgdmFyIGNhbWVyYUR1bW15ID0gbmV3IFRIUkVFLk9iamVjdDNEKCk7XHJcbiAgY2FtZXJhRHVtbXkuYWRkKGNhbWVyYSk7XHJcblxyXG4gIC8vIEFudGlhbGlhc2luZyBkaXNhYmxlZCB0byBpbXByb3ZlIHBlcmZvcm1hbmNlLlxyXG4gIHZhciByZW5kZXJlciA9IG5ldyBUSFJFRS5XZWJHTFJlbmRlcmVyKHthbnRpYWxpYXM6IHRydWV9KTtcclxuICByZW5kZXJlci5zZXRDbGVhckNvbG9yKDB4MDAwMDAwLCAwKTtcclxuICByZW5kZXJlci5zZXRTaXplKHdpbmRvdy5pbm5lcldpZHRoLCB3aW5kb3cuaW5uZXJIZWlnaHQpO1xyXG4gIHJlbmRlcmVyLnNldFBpeGVsUmF0aW8od2luZG93LmRldmljZVBpeGVsUmF0aW8pO1xyXG5cclxuICBjb250YWluZXIuYXBwZW5kQ2hpbGQocmVuZGVyZXIuZG9tRWxlbWVudCk7XHJcblxyXG4gIHZhciBjb250cm9scyA9IG5ldyBUSFJFRS5WUkNvbnRyb2xzKGNhbWVyYSk7XHJcbiAgdmFyIGVmZmVjdCA9IG5ldyBUSFJFRS5WUkVmZmVjdChyZW5kZXJlcik7XHJcblxyXG4gIC8vIERpc2FibGUgZXllIHNlcGFyYXRpb24uXHJcbiAgZWZmZWN0LnNjYWxlID0gMDtcclxuICBlZmZlY3Quc2V0U2l6ZSh3aW5kb3cuaW5uZXJXaWR0aCwgd2luZG93LmlubmVySGVpZ2h0KTtcclxuXHJcbiAgdGhpcy5jYW1lcmEgPSBjYW1lcmE7XHJcbiAgdGhpcy5yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gIHRoaXMuZWZmZWN0ID0gZWZmZWN0O1xyXG4gIHRoaXMuY29udHJvbHMgPSBjb250cm9scztcclxuICB0aGlzLm1hbmFnZXIgPSBuZXcgV2ViVlJNYW5hZ2VyKHJlbmRlcmVyLCBlZmZlY3QsIHtwcmVkaXN0b3J0ZWQ6IGZhbHNlfSk7XHJcblxyXG4gIHRoaXMuc2NlbmUgPSB0aGlzLmNyZWF0ZVNjZW5lXygpO1xyXG4gIHRoaXMuc2NlbmUuYWRkKHRoaXMuY2FtZXJhLnBhcmVudCk7XHJcblxyXG5cclxuICAvLyBXYXRjaCB0aGUgcmVzaXplIGV2ZW50LlxyXG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCB0aGlzLm9uUmVzaXplXy5iaW5kKHRoaXMpKTtcclxuXHJcbiAgLy8gUHJldmVudCBjb250ZXh0IG1lbnUuXHJcbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2NvbnRleHRtZW51JywgdGhpcy5vbkNvbnRleHRNZW51Xy5iaW5kKHRoaXMpKTtcclxuXHJcbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3ZyZGlzcGxheXByZXNlbnRjaGFuZ2UnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub25WUkRpc3BsYXlQcmVzZW50Q2hhbmdlXy5iaW5kKHRoaXMpKTtcclxufTtcclxuXHJcbldvcmxkUmVuZGVyZXIucHJvdG90eXBlLm9uUmVzaXplXyA9IGZ1bmN0aW9uKCkge1xyXG4gIHRoaXMuZWZmZWN0LnNldFNpemUod2luZG93LmlubmVyV2lkdGgsIHdpbmRvdy5pbm5lckhlaWdodCk7XHJcbiAgdGhpcy5jYW1lcmEuYXNwZWN0ID0gd2luZG93LmlubmVyV2lkdGggLyB3aW5kb3cuaW5uZXJIZWlnaHQ7XHJcbiAgdGhpcy5jYW1lcmEudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpO1xyXG59O1xyXG5cclxuV29ybGRSZW5kZXJlci5wcm90b3R5cGUub25WUkRpc3BsYXlQcmVzZW50Q2hhbmdlXyA9IGZ1bmN0aW9uKGUpIHtcclxuICBjb25zb2xlLmxvZygnb25WUkRpc3BsYXlQcmVzZW50Q2hhbmdlXycpO1xyXG4gIHRoaXMudnJEaXNwbGF5ID0gZS5kZXRhaWwudnJkaXNwbGF5O1xyXG4gIHZhciBpc1ZSID0gdGhpcy5pc1ZSTW9kZSgpO1xyXG5cclxuICAvLyBJZiB0aGUgbW9kZSBjaGFuZ2VkIHRvIFZSIGFuZCB0aGVyZSBpcyBhdCBsZWFzdCBvbmUgaG90c3BvdCwgc2hvdyByZXRpY2xlLlxyXG4gIC8vdmFyIGlzUmV0aWNsZVZpc2libGUgPSBpc1ZSO1xyXG4gIHRoaXMucmV0aWNsZVJlbmRlcmVyLnNldFZpc2liaWxpdHkoaXNWUik7XHJcbiAgLy9jb25zb2xlLmxvZygnTW9kZSBjaGFuZ2VkIGFuZCByZXRpY2xlIHZpc2liaWxpdHkgaXMgbm93OiAlcycsIGlzUmV0aWNsZVZpc2libGUpO1xyXG5cclxuICAvLyBSZXNpemUgdGhlIHJlbmRlcmVyIGZvciBnb29kIG1lYXN1cmUuXHJcbiAgdGhpcy5vblJlc2l6ZV8oKTtcclxuXHJcbiAgLy8gQW5hbHl0aWNzLlxyXG4gIGlmICh3aW5kb3cuYW5hbHl0aWNzKSB7XHJcbiAgICBhbmFseXRpY3MubG9nTW9kZUNoYW5nZWQoaXNWUik7XHJcbiAgfVxyXG5cclxuICAvLyBXaGVuIGV4aXRpbmcgVlIgbW9kZSwgbWFrZSBzdXJlIHdlIGVtaXQgYmFjayBhbiBleGl0LWZ1bGxzY3JlZW4gZXZlbnQuXHJcbiAgaWYgKCFpc1ZSICYmIFV0aWwuaXNJT1MoKSkge1xyXG4gICAgVXRpbC5zZW5kUGFyZW50TWVzc2FnZSh7dHlwZTogJ2V4aXQtZnVsbHNjcmVlbid9KTtcclxuICB9XHJcblxyXG4gIC8vIEVtaXQgYSBtb2RlIGNoYW5nZSBldmVudCBiYWNrIHRvIGFueSBsaXN0ZW5lcnMuXHJcbiAgdGhpcy5lbWl0KCdtb2RlY2hhbmdlJywgaXNWUik7XHJcbn07XHJcblxyXG5Xb3JsZFJlbmRlcmVyLnByb3RvdHlwZS5jcmVhdGVTY2VuZV8gPSBmdW5jdGlvbihvcHRfcGFyYW1zKSB7XHJcbiAgdmFyIHNjZW5lID0gbmV3IFRIUkVFLlNjZW5lKCk7XHJcblxyXG4gIC8vIEFkZCBhIGdyb3VwIGZvciB0aGUgcGhvdG9zcGhlcmUuXHJcbiAgdmFyIHBob3RvR3JvdXAgPSBuZXcgVEhSRUUuT2JqZWN0M0QoKTtcclxuICBwaG90b0dyb3VwLm5hbWUgPSAncGhvdG8nO1xyXG4gIHNjZW5lLmFkZChwaG90b0dyb3VwKTtcclxuXHJcbiAgLy8gQWRkIGEgZ3JvdXAgZm9yIHRoZSBuYXZpZ2F0aW9uLlxyXG4gIHZhciBuYXZHcm91cCA9IG5ldyBUSFJFRS5PYmplY3QzRCgpO1xyXG4gIG5hdkdyb3VwLm5hbWUgPSAnbmF2JztcclxuICBzY2VuZS5hZGQobmF2R3JvdXApO1xyXG4gIFxyXG4gIHNjZW5lLmFkZChuZXcgVEhSRUUuUG9pbnRMaWdodCgweEZGRkZGRikpO1xyXG4gIHJldHVybiBzY2VuZTtcclxufTtcclxuXHJcbldvcmxkUmVuZGVyZXIucHJvdG90eXBlLm9uSG90c3BvdEZvY3VzXyA9IGZ1bmN0aW9uKGlkKSB7XHJcbiAgLy9jb25zb2xlLmxvZygnb25Ib3RzcG90Rm9jdXNfJywgaWQpO1xyXG4gIC8vIFNldCB0aGUgZGVmYXVsdCBjdXJzb3IgdG8gYmUgYSBwb2ludGVyLlxyXG4gIHRoaXMuc2V0Q3Vyc29yXygncG9pbnRlcicpO1xyXG59O1xyXG5cclxuV29ybGRSZW5kZXJlci5wcm90b3R5cGUub25Ib3RzcG90Qmx1cl8gPSBmdW5jdGlvbihpZCkge1xyXG4gIC8vY29uc29sZS5sb2coJ29uSG90c3BvdEJsdXJfJywgaWQpO1xyXG4gIC8vIFJlc2V0IHRoZSBkZWZhdWx0IGN1cnNvciB0byBiZSB0aGUgZGVmYXVsdCBvbmUuXHJcbiAgdGhpcy5zZXRDdXJzb3JfKCcnKTtcclxufTtcclxuXHJcbldvcmxkUmVuZGVyZXIucHJvdG90eXBlLnNldEN1cnNvcl8gPSBmdW5jdGlvbihjdXJzb3IpIHtcclxuICB0aGlzLnJlbmRlcmVyLmRvbUVsZW1lbnQuc3R5bGUuY3Vyc29yID0gY3Vyc29yO1xyXG59O1xyXG5cclxuV29ybGRSZW5kZXJlci5wcm90b3R5cGUub25Db250ZXh0TWVudV8gPSBmdW5jdGlvbihlKSB7XHJcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgcmV0dXJuIGZhbHNlO1xyXG59O1xyXG5cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gV29ybGRSZW5kZXJlcjtcclxuIiwiLyoqXHJcbiAqIE1lc3NhZ2VzIGZyb20gdGhlIEFQSSB0byB0aGUgZW1iZWQuXHJcbiAqL1xyXG52YXIgTWVzc2FnZSA9IHtcclxuICBQTEFZOiAncGxheScsXHJcbiAgUEFVU0U6ICdwYXVzZScsXHJcbiAgQUREX0hPVFNQT1Q6ICdhZGRob3RzcG90JyxcclxuICBTRVRfQ09OVEVOVDogJ3NldGltYWdlJyxcclxuICBTRVRfVk9MVU1FOiAnc2V0dm9sdW1lJyxcclxuICBERVZJQ0VfTU9USU9OOiAnZGV2aWNlbW90aW9uJyxcclxuICBTRVRVUF9OQVZJR0FUSU9OOiAnbmF2aWdhdGlvbicsXHJcbiAgRU5BQkxFX01VTFRJUExBWUVSX01PREU6ICdtdWx0aXBsYXllci1lbmFibGUnLFxyXG4gIEpPSU5fTVVMVElQTEFZRVJfUk9PTTogJ211bHRpcGxheWVyLWpvaW4nLFxyXG4gIExFQVZFX01VTFRJUExBWUVSX1JPT006ICdtdWx0aXBsYXllci1sZWF2ZScsXHJcbiAgU0VUX01VTFRJUExBWUVSX01FOiAnbXVsdGlwbGF5ZXItbWUnXHJcbn07XHJcbnZhciBDYWxsYmFja3MgPSB7fTtcclxuZm9yKHR5cGUgaW4gTWVzc2FnZSl7XHJcbiAgQ2FsbGJhY2tzW01lc3NhZ2VbdHlwZV1dID0gZnVuY3Rpb24oKXt9O1xyXG59XHJcbk1lc3NhZ2UuY2FsbGJhY2tzID0gQ2FsbGJhY2tzO1xyXG5tb2R1bGUuZXhwb3J0cyA9IE1lc3NhZ2U7XHJcbiIsIi8qXHJcbiAqIENvcHlyaWdodCAyMDE1IEdvb2dsZSBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuXHJcblV0aWwgPSB3aW5kb3cuVXRpbCB8fCB7fTtcclxuXHJcblV0aWwuaXNEYXRhVVJJID0gZnVuY3Rpb24oc3JjKSB7XHJcbiAgcmV0dXJuIHNyYyAmJiBzcmMuaW5kZXhPZignZGF0YTonKSA9PSAwO1xyXG59O1xyXG5cclxuVXRpbC5nZW5lcmF0ZVVVSUQgPSBmdW5jdGlvbigpIHtcclxuICBmdW5jdGlvbiBzNCgpIHtcclxuICAgIHJldHVybiBNYXRoLmZsb29yKCgxICsgTWF0aC5yYW5kb20oKSkgKiAweDEwMDAwKVxyXG4gICAgLnRvU3RyaW5nKDE2KVxyXG4gICAgLnN1YnN0cmluZygxKTtcclxuICB9XHJcbiAgcmV0dXJuIHM0KCkgKyBzNCgpICsgJy0nICsgczQoKSArICctJyArIHM0KCkgKyAnLScgK1xyXG4gICAgczQoKSArICctJyArIHM0KCkgKyBzNCgpICsgczQoKTtcclxufTtcclxuXHJcblV0aWwuaXNNb2JpbGUgPSBmdW5jdGlvbigpIHtcclxuICB2YXIgY2hlY2sgPSBmYWxzZTtcclxuICAoZnVuY3Rpb24oYSl7aWYoLyhhbmRyb2lkfGJiXFxkK3xtZWVnbykuK21vYmlsZXxhdmFudGdvfGJhZGFcXC98YmxhY2tiZXJyeXxibGF6ZXJ8Y29tcGFsfGVsYWluZXxmZW5uZWN8aGlwdG9wfGllbW9iaWxlfGlwKGhvbmV8b2QpfGlyaXN8a2luZGxlfGxnZSB8bWFlbW98bWlkcHxtbXB8bW9iaWxlLitmaXJlZm94fG5ldGZyb250fG9wZXJhIG0ob2J8aW4paXxwYWxtKCBvcyk/fHBob25lfHAoaXhpfHJlKVxcL3xwbHVja2VyfHBvY2tldHxwc3B8c2VyaWVzKDR8NikwfHN5bWJpYW58dHJlb3x1cFxcLihicm93c2VyfGxpbmspfHZvZGFmb25lfHdhcHx3aW5kb3dzIGNlfHhkYXx4aWluby9pLnRlc3QoYSl8fC8xMjA3fDYzMTB8NjU5MHwzZ3NvfDR0aHB8NTBbMS02XWl8Nzcwc3w4MDJzfGEgd2F8YWJhY3xhYyhlcnxvb3xzXFwtKXxhaShrb3xybil8YWwoYXZ8Y2F8Y28pfGFtb2l8YW4oZXh8bnl8eXcpfGFwdHV8YXIoY2h8Z28pfGFzKHRlfHVzKXxhdHR3fGF1KGRpfFxcLW18ciB8cyApfGF2YW58YmUoY2t8bGx8bnEpfGJpKGxifHJkKXxibChhY3xheil8YnIoZXx2KXd8YnVtYnxid1xcLShufHUpfGM1NVxcL3xjYXBpfGNjd2F8Y2RtXFwtfGNlbGx8Y2h0bXxjbGRjfGNtZFxcLXxjbyhtcHxuZCl8Y3Jhd3xkYShpdHxsbHxuZyl8ZGJ0ZXxkY1xcLXN8ZGV2aXxkaWNhfGRtb2J8ZG8oY3xwKW98ZHMoMTJ8XFwtZCl8ZWwoNDl8YWkpfGVtKGwyfHVsKXxlcihpY3xrMCl8ZXNsOHxleihbNC03XTB8b3N8d2F8emUpfGZldGN8Zmx5KFxcLXxfKXxnMSB1fGc1NjB8Z2VuZXxnZlxcLTV8Z1xcLW1vfGdvKFxcLnd8b2QpfGdyKGFkfHVuKXxoYWllfGhjaXR8aGRcXC0obXxwfHQpfGhlaVxcLXxoaShwdHx0YSl8aHAoIGl8aXApfGhzXFwtY3xodChjKFxcLXwgfF98YXxnfHB8c3x0KXx0cCl8aHUoYXd8dGMpfGlcXC0oMjB8Z298bWEpfGkyMzB8aWFjKCB8XFwtfFxcLyl8aWJyb3xpZGVhfGlnMDF8aWtvbXxpbTFrfGlubm98aXBhcXxpcmlzfGphKHR8dilhfGpicm98amVtdXxqaWdzfGtkZGl8a2VqaXxrZ3QoIHxcXC8pfGtsb258a3B0IHxrd2NcXC18a3lvKGN8ayl8bGUobm98eGkpfGxnKCBnfFxcLyhrfGx8dSl8NTB8NTR8XFwtW2Etd10pfGxpYnd8bHlueHxtMVxcLXd8bTNnYXxtNTBcXC98bWEodGV8dWl8eG8pfG1jKDAxfDIxfGNhKXxtXFwtY3J8bWUocmN8cmkpfG1pKG84fG9hfHRzKXxtbWVmfG1vKDAxfDAyfGJpfGRlfGRvfHQoXFwtfCB8b3x2KXx6eil8bXQoNTB8cDF8diApfG13YnB8bXl3YXxuMTBbMC0yXXxuMjBbMi0zXXxuMzAoMHwyKXxuNTAoMHwyfDUpfG43KDAoMHwxKXwxMCl8bmUoKGN8bSlcXC18b258dGZ8d2Z8d2d8d3QpfG5vayg2fGkpfG56cGh8bzJpbXxvcCh0aXx3dil8b3Jhbnxvd2cxfHA4MDB8cGFuKGF8ZHx0KXxwZHhnfHBnKDEzfFxcLShbMS04XXxjKSl8cGhpbHxwaXJlfHBsKGF5fHVjKXxwblxcLTJ8cG8oY2t8cnR8c2UpfHByb3h8cHNpb3xwdFxcLWd8cWFcXC1hfHFjKDA3fDEyfDIxfDMyfDYwfFxcLVsyLTddfGlcXC0pfHF0ZWt8cjM4MHxyNjAwfHJha3N8cmltOXxybyh2ZXx6byl8czU1XFwvfHNhKGdlfG1hfG1tfG1zfG55fHZhKXxzYygwMXxoXFwtfG9vfHBcXC0pfHNka1xcL3xzZShjKFxcLXwwfDEpfDQ3fG1jfG5kfHJpKXxzZ2hcXC18c2hhcnxzaWUoXFwtfG0pfHNrXFwtMHxzbCg0NXxpZCl8c20oYWx8YXJ8YjN8aXR8dDUpfHNvKGZ0fG55KXxzcCgwMXxoXFwtfHZcXC18diApfHN5KDAxfG1iKXx0MigxOHw1MCl8dDYoMDB8MTB8MTgpfHRhKGd0fGxrKXx0Y2xcXC18dGRnXFwtfHRlbChpfG0pfHRpbVxcLXx0XFwtbW98dG8ocGx8c2gpfHRzKDcwfG1cXC18bTN8bTUpfHR4XFwtOXx1cChcXC5ifGcxfHNpKXx1dHN0fHY0MDB8djc1MHx2ZXJpfHZpKHJnfHRlKXx2ayg0MHw1WzAtM118XFwtdil8dm00MHx2b2RhfHZ1bGN8dngoNTJ8NTN8NjB8NjF8NzB8ODB8ODF8ODN8ODV8OTgpfHczYyhcXC18ICl8d2ViY3x3aGl0fHdpKGcgfG5jfG53KXx3bWxifHdvbnV8eDcwMHx5YXNcXC18eW91cnx6ZXRvfHp0ZVxcLS9pLnRlc3QoYS5zdWJzdHIoMCw0KSkpY2hlY2sgPSB0cnVlfSkobmF2aWdhdG9yLnVzZXJBZ2VudHx8bmF2aWdhdG9yLnZlbmRvcnx8d2luZG93Lm9wZXJhKTtcclxuICByZXR1cm4gY2hlY2s7XHJcbn07XHJcblxyXG5VdGlsLmlzSU9TID0gZnVuY3Rpb24oKSB7XHJcbiAgcmV0dXJuIC8oaVBhZHxpUGhvbmV8aVBvZCkvZy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpO1xyXG59O1xyXG5cclxuVXRpbC5pc1NhZmFyaSA9IGZ1bmN0aW9uKCkge1xyXG4gIHJldHVybiAvXigoPyFjaHJvbWV8YW5kcm9pZCkuKSpzYWZhcmkvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpO1xyXG59O1xyXG5cclxuVXRpbC5jbG9uZU9iamVjdCA9IGZ1bmN0aW9uKG9iaikge1xyXG4gIHZhciBvdXQgPSB7fTtcclxuICBmb3IgKGtleSBpbiBvYmopIHtcclxuICAgIG91dFtrZXldID0gb2JqW2tleV07XHJcbiAgfVxyXG4gIHJldHVybiBvdXQ7XHJcbn07XHJcblxyXG5VdGlsLmhhc2hDb2RlID0gZnVuY3Rpb24ocykge1xyXG4gIHJldHVybiBzLnNwbGl0KFwiXCIpLnJlZHVjZShmdW5jdGlvbihhLGIpe2E9KChhPDw1KS1hKStiLmNoYXJDb2RlQXQoMCk7cmV0dXJuIGEmYX0sMCk7XHJcbn07XHJcblxyXG5VdGlsLmxvYWRUcmFja1NyYyA9IGZ1bmN0aW9uKGNvbnRleHQsIHNyYywgY2FsbGJhY2ssIG9wdF9wcm9ncmVzc0NhbGxiYWNrKSB7XHJcbiAgdmFyIHJlcXVlc3QgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuICByZXF1ZXN0Lm9wZW4oJ0dFVCcsIHNyYywgdHJ1ZSk7XHJcbiAgcmVxdWVzdC5yZXNwb25zZVR5cGUgPSAnYXJyYXlidWZmZXInO1xyXG5cclxuICAvLyBEZWNvZGUgYXN5bmNocm9ub3VzbHkuXHJcbiAgcmVxdWVzdC5vbmxvYWQgPSBmdW5jdGlvbigpIHtcclxuICAgIGNvbnRleHQuZGVjb2RlQXVkaW9EYXRhKHJlcXVlc3QucmVzcG9uc2UsIGZ1bmN0aW9uKGJ1ZmZlcikge1xyXG4gICAgICBjYWxsYmFjayhidWZmZXIpO1xyXG4gICAgfSwgZnVuY3Rpb24oZSkge1xyXG4gICAgICBjb25zb2xlLmVycm9yKGUpO1xyXG4gICAgfSk7XHJcbiAgfTtcclxuICBpZiAob3B0X3Byb2dyZXNzQ2FsbGJhY2spIHtcclxuICAgIHJlcXVlc3Qub25wcm9ncmVzcyA9IGZ1bmN0aW9uKGUpIHtcclxuICAgICAgdmFyIHBlcmNlbnQgPSBlLmxvYWRlZCAvIGUudG90YWw7XHJcbiAgICAgIG9wdF9wcm9ncmVzc0NhbGxiYWNrKHBlcmNlbnQpO1xyXG4gICAgfTtcclxuICB9XHJcbiAgcmVxdWVzdC5zZW5kKCk7XHJcbn07XHJcblxyXG5VdGlsLmlzUG93MiA9IGZ1bmN0aW9uKG4pIHtcclxuICByZXR1cm4gKG4gJiAobiAtIDEpKSA9PSAwO1xyXG59O1xyXG5cclxuVXRpbC5jYXBpdGFsaXplID0gZnVuY3Rpb24ocykge1xyXG4gIHJldHVybiBzLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgcy5zbGljZSgxKTtcclxufTtcclxuXHJcblV0aWwuaXNJRnJhbWUgPSBmdW5jdGlvbigpIHtcclxuICB0cnkge1xyXG4gICAgcmV0dXJuIHdpbmRvdy5zZWxmICE9PSB3aW5kb3cudG9wO1xyXG4gIH0gY2F0Y2ggKGUpIHtcclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH1cclxufTtcclxuXHJcbi8vIEZyb20gaHR0cDovL2dvby5nbC80V1gzdGdcclxuVXRpbC5nZXRRdWVyeVBhcmFtZXRlciA9IGZ1bmN0aW9uKG5hbWUpIHtcclxuICBuYW1lID0gbmFtZS5yZXBsYWNlKC9bXFxbXS8sIFwiXFxcXFtcIikucmVwbGFjZSgvW1xcXV0vLCBcIlxcXFxdXCIpO1xyXG4gIHZhciByZWdleCA9IG5ldyBSZWdFeHAoXCJbXFxcXD8mXVwiICsgbmFtZSArIFwiPShbXiYjXSopXCIpLFxyXG4gICAgICByZXN1bHRzID0gcmVnZXguZXhlYyhsb2NhdGlvbi5zZWFyY2gpO1xyXG4gIHJldHVybiByZXN1bHRzID09PSBudWxsID8gXCJcIiA6IGRlY29kZVVSSUNvbXBvbmVudChyZXN1bHRzWzFdLnJlcGxhY2UoL1xcKy9nLCBcIiBcIikpO1xyXG59O1xyXG5cclxuXHJcbi8vIEZyb20gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8xMTg3MTA3Ny9wcm9wZXItd2F5LXRvLWRldGVjdC13ZWJnbC1zdXBwb3J0LlxyXG5VdGlsLmlzV2ViR0xFbmFibGVkID0gZnVuY3Rpb24oKSB7XHJcbiAgdmFyIGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xyXG4gIHRyeSB7IGdsID0gY2FudmFzLmdldENvbnRleHQoXCJ3ZWJnbFwiKTsgfVxyXG4gIGNhdGNoICh4KSB7IGdsID0gbnVsbDsgfVxyXG5cclxuICBpZiAoZ2wgPT0gbnVsbCkge1xyXG4gICAgdHJ5IHsgZ2wgPSBjYW52YXMuZ2V0Q29udGV4dChcImV4cGVyaW1lbnRhbC13ZWJnbFwiKTsgZXhwZXJpbWVudGFsID0gdHJ1ZTsgfVxyXG4gICAgY2F0Y2ggKHgpIHsgZ2wgPSBudWxsOyB9XHJcbiAgfVxyXG4gIHJldHVybiAhIWdsO1xyXG59O1xyXG5cclxuVXRpbC5jbG9uZSA9IGZ1bmN0aW9uKG9iaikge1xyXG4gIHJldHVybiBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KG9iaikpO1xyXG59O1xyXG5cclxuLy8gRnJvbSBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzEwMTQwNjA0L2Zhc3Rlc3QtaHlwb3RlbnVzZS1pbi1qYXZhc2NyaXB0XHJcblV0aWwuaHlwb3QgPSBNYXRoLmh5cG90IHx8IGZ1bmN0aW9uKHgsIHkpIHtcclxuICByZXR1cm4gTWF0aC5zcXJ0KHgqeCArIHkqeSk7XHJcbn07XHJcblxyXG4vLyBGcm9tIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzE3NDQ3NzE4LzY5MzkzNFxyXG5VdGlsLmlzSUUxMSA9IGZ1bmN0aW9uKCkge1xyXG4gIHJldHVybiBuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9UcmlkZW50Lyk7XHJcbn07XHJcblxyXG5VdGlsLmdldFJlY3RDZW50ZXIgPSBmdW5jdGlvbihyZWN0KSB7XHJcbiAgcmV0dXJuIG5ldyBUSFJFRS5WZWN0b3IyKHJlY3QueCArIHJlY3Qud2lkdGgvMiwgcmVjdC55ICsgcmVjdC5oZWlnaHQvMik7XHJcbn07XHJcblxyXG5VdGlsLmdldFNjcmVlbldpZHRoID0gZnVuY3Rpb24oKSB7XHJcbiAgcmV0dXJuIE1hdGgubWF4KHdpbmRvdy5zY3JlZW4ud2lkdGgsIHdpbmRvdy5zY3JlZW4uaGVpZ2h0KSAqXHJcbiAgICAgIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvO1xyXG59O1xyXG5cclxuVXRpbC5nZXRTY3JlZW5IZWlnaHQgPSBmdW5jdGlvbigpIHtcclxuICByZXR1cm4gTWF0aC5taW4od2luZG93LnNjcmVlbi53aWR0aCwgd2luZG93LnNjcmVlbi5oZWlnaHQpICpcclxuICAgICAgd2luZG93LmRldmljZVBpeGVsUmF0aW87XHJcbn07XHJcblxyXG5VdGlsLmlzSU9TOU9yTGVzcyA9IGZ1bmN0aW9uKCkge1xyXG4gIGlmICghVXRpbC5pc0lPUygpKSB7XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfVxyXG4gIHZhciByZSA9IC8oaVBob25lfGlQYWR8aVBvZCkgT1MgKFtcXGRfXSspLztcclxuICB2YXIgaU9TVmVyc2lvbiA9IG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2gocmUpO1xyXG4gIGlmICghaU9TVmVyc2lvbikge1xyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH1cclxuICAvLyBHZXQgdGhlIGxhc3QgZ3JvdXAuXHJcbiAgdmFyIHZlcnNpb25TdHJpbmcgPSBpT1NWZXJzaW9uW2lPU1ZlcnNpb24ubGVuZ3RoIC0gMV07XHJcbiAgdmFyIG1ham9yVmVyc2lvbiA9IHBhcnNlRmxvYXQodmVyc2lvblN0cmluZyk7XHJcbiAgcmV0dXJuIG1ham9yVmVyc2lvbiA8PSA5O1xyXG59O1xyXG5cclxuVXRpbC5nZXRFeHRlbnNpb24gPSBmdW5jdGlvbih1cmwpIHtcclxuICByZXR1cm4gdXJsLnNwbGl0KCcuJykucG9wKCk7XHJcbn07XHJcblxyXG5VdGlsLmNyZWF0ZUdldFBhcmFtcyA9IGZ1bmN0aW9uKHBhcmFtcykge1xyXG4gIHZhciBvdXQgPSAnPyc7XHJcbiAgZm9yICh2YXIgayBpbiBwYXJhbXMpIHtcclxuICAgIHZhciBwYXJhbVN0cmluZyA9IGsgKyAnPScgKyBwYXJhbXNba10gKyAnJic7XHJcbiAgICBvdXQgKz0gcGFyYW1TdHJpbmc7XHJcbiAgfVxyXG4gIC8vIFJlbW92ZSB0aGUgdHJhaWxpbmcgYW1wZXJzYW5kLlxyXG4gIG91dC5zdWJzdHJpbmcoMCwgcGFyYW1zLmxlbmd0aCAtIDIpO1xyXG4gIHJldHVybiBvdXQ7XHJcbn07XHJcblxyXG5VdGlsLnNlbmRQYXJlbnRNZXNzYWdlID0gZnVuY3Rpb24obWVzc2FnZSkge1xyXG4gIGlmICh3aW5kb3cucGFyZW50KSB7XHJcbiAgICBwYXJlbnQucG9zdE1lc3NhZ2UobWVzc2FnZSwgJyonKTtcclxuICB9XHJcbn07XHJcblxyXG5VdGlsLnBhcnNlQm9vbGVhbiA9IGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgaWYgKHZhbHVlID09ICdmYWxzZScgfHwgdmFsdWUgPT0gMCkge1xyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH0gZWxzZSBpZiAodmFsdWUgPT0gJ3RydWUnIHx8IHZhbHVlID09IDEpIHtcclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH0gZWxzZSB7XHJcbiAgICByZXR1cm4gISF2YWx1ZTtcclxuICB9XHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IFV0aWw7XHJcbiJdfQ==
